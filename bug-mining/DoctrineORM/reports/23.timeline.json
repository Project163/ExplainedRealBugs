[{"actor":{"login":"diego-ninja","id":78662279,"node_id":"MDQ6VXNlcjc4NjYyMjc5","avatar_url":"https://avatars.githubusercontent.com/u/78662279?v=4","gravatar_id":"","url":"https://api.github.com/users/diego-ninja","html_url":"https://github.com/diego-ninja","followers_url":"https://api.github.com/users/diego-ninja/followers","following_url":"https://api.github.com/users/diego-ninja/following{/other_user}","gists_url":"https://api.github.com/users/diego-ninja/gists{/gist_id}","starred_url":"https://api.github.com/users/diego-ninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diego-ninja/subscriptions","organizations_url":"https://api.github.com/users/diego-ninja/orgs","repos_url":"https://api.github.com/users/diego-ninja/repos","events_url":"https://api.github.com/users/diego-ninja/events{/privacy}","received_events_url":"https://api.github.com/users/diego-ninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T12:11:00Z","updated_at":"2021-02-22T12:11:00Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/doctrine/orm/issues/8500","repository_url":"https://api.github.com/repos/doctrine/orm","labels_url":"https://api.github.com/repos/doctrine/orm/issues/8500/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/orm/issues/8500/comments","events_url":"https://api.github.com/repos/doctrine/orm/issues/8500/events","html_url":"https://github.com/doctrine/orm/pull/8500","id":813443661,"node_id":"MDExOlB1bGxSZXF1ZXN0NTc3NTkxMDgx","number":8500,"title":"Proposed fix for #DCC8499","user":{"login":"diego-ninja","id":78662279,"node_id":"MDQ6VXNlcjc4NjYyMjc5","avatar_url":"https://avatars.githubusercontent.com/u/78662279?v=4","gravatar_id":"","url":"https://api.github.com/users/diego-ninja","html_url":"https://github.com/diego-ninja","followers_url":"https://api.github.com/users/diego-ninja/followers","following_url":"https://api.github.com/users/diego-ninja/following{/other_user}","gists_url":"https://api.github.com/users/diego-ninja/gists{/gist_id}","starred_url":"https://api.github.com/users/diego-ninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diego-ninja/subscriptions","organizations_url":"https://api.github.com/users/diego-ninja/orgs","repos_url":"https://api.github.com/users/diego-ninja/repos","events_url":"https://api.github.com/users/diego-ninja/events{/privacy}","received_events_url":"https://api.github.com/users/diego-ninja/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-02-22T12:10:59Z","updated_at":"2021-02-23T08:48:26Z","closed_at":"2021-02-23T08:48:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":597887,"node_id":"MDEwOlJlcG9zaXRvcnk1OTc4ODc=","name":"orm","full_name":"doctrine/orm","private":false,"owner":{"login":"doctrine","id":209254,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwOTI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/209254?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrine","html_url":"https://github.com/doctrine","followers_url":"https://api.github.com/users/doctrine/followers","following_url":"https://api.github.com/users/doctrine/following{/other_user}","gists_url":"https://api.github.com/users/doctrine/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrine/subscriptions","organizations_url":"https://api.github.com/users/doctrine/orgs","repos_url":"https://api.github.com/users/doctrine/repos","events_url":"https://api.github.com/users/doctrine/events{/privacy}","received_events_url":"https://api.github.com/users/doctrine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/doctrine/orm","description":"Doctrine Object Relational Mapper (ORM)","fork":false,"url":"https://api.github.com/repos/doctrine/orm","forks_url":"https://api.github.com/repos/doctrine/orm/forks","keys_url":"https://api.github.com/repos/doctrine/orm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/doctrine/orm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/doctrine/orm/teams","hooks_url":"https://api.github.com/repos/doctrine/orm/hooks","issue_events_url":"https://api.github.com/repos/doctrine/orm/issues/events{/number}","events_url":"https://api.github.com/repos/doctrine/orm/events","assignees_url":"https://api.github.com/repos/doctrine/orm/assignees{/user}","branches_url":"https://api.github.com/repos/doctrine/orm/branches{/branch}","tags_url":"https://api.github.com/repos/doctrine/orm/tags","blobs_url":"https://api.github.com/repos/doctrine/orm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/doctrine/orm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/doctrine/orm/git/refs{/sha}","trees_url":"https://api.github.com/repos/doctrine/orm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/doctrine/orm/statuses/{sha}","languages_url":"https://api.github.com/repos/doctrine/orm/languages","stargazers_url":"https://api.github.com/repos/doctrine/orm/stargazers","contributors_url":"https://api.github.com/repos/doctrine/orm/contributors","subscribers_url":"https://api.github.com/repos/doctrine/orm/subscribers","subscription_url":"https://api.github.com/repos/doctrine/orm/subscription","commits_url":"https://api.github.com/repos/doctrine/orm/commits{/sha}","git_commits_url":"https://api.github.com/repos/doctrine/orm/git/commits{/sha}","comments_url":"https://api.github.com/repos/doctrine/orm/comments{/number}","issue_comment_url":"https://api.github.com/repos/doctrine/orm/issues/comments{/number}","contents_url":"https://api.github.com/repos/doctrine/orm/contents/{+path}","compare_url":"https://api.github.com/repos/doctrine/orm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/doctrine/orm/merges","archive_url":"https://api.github.com/repos/doctrine/orm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/doctrine/orm/downloads","issues_url":"https://api.github.com/repos/doctrine/orm/issues{/number}","pulls_url":"https://api.github.com/repos/doctrine/orm/pulls{/number}","milestones_url":"https://api.github.com/repos/doctrine/orm/milestones{/number}","notifications_url":"https://api.github.com/repos/doctrine/orm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/doctrine/orm/labels{/name}","releases_url":"https://api.github.com/repos/doctrine/orm/releases{/id}","deployments_url":"https://api.github.com/repos/doctrine/orm/deployments","created_at":"2010-04-06T21:42:59Z","updated_at":"2025-11-10T09:26:15Z","pushed_at":"2025-11-10T13:35:45Z","git_url":"git://github.com/doctrine/orm.git","ssh_url":"git@github.com:doctrine/orm.git","clone_url":"https://github.com/doctrine/orm.git","svn_url":"https://github.com/doctrine/orm","homepage":"https://www.doctrine-project.org/projects/orm.html","size":54667,"stargazers_count":10115,"watchers_count":10115,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2553,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1301,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest"],"visibility":"public","forks":2553,"open_issues":1301,"watchers":10115,"default_branch":"3.5.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/doctrine/orm/pulls/8500","html_url":"https://github.com/doctrine/orm/pull/8500","diff_url":"https://github.com/doctrine/orm/pull/8500.diff","patch_url":"https://github.com/doctrine/orm/pull/8500.patch","merged_at":null},"body":"Proposed fix for issue commented in #8499.","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/8500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/orm/issues/8500/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/783350740","html_url":"https://github.com/doctrine/orm/issues/8499#issuecomment-783350740","issue_url":"https://api.github.com/repos/doctrine/orm/issues/8499","id":783350740,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzM1MDc0MA==","user":{"login":"Warxcell","id":3340882,"node_id":"MDQ6VXNlcjMzNDA4ODI=","avatar_url":"https://avatars.githubusercontent.com/u/3340882?v=4","gravatar_id":"","url":"https://api.github.com/users/Warxcell","html_url":"https://github.com/Warxcell","followers_url":"https://api.github.com/users/Warxcell/followers","following_url":"https://api.github.com/users/Warxcell/following{/other_user}","gists_url":"https://api.github.com/users/Warxcell/gists{/gist_id}","starred_url":"https://api.github.com/users/Warxcell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Warxcell/subscriptions","organizations_url":"https://api.github.com/users/Warxcell/orgs","repos_url":"https://api.github.com/users/Warxcell/repos","events_url":"https://api.github.com/users/Warxcell/events{/privacy}","received_events_url":"https://api.github.com/users/Warxcell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T12:50:02Z","updated_at":"2021-02-22T13:39:44Z","body":"Btw there is similar problem with Composite `@Id` that are made of `\\DateTimeInterface|object`","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/783350740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Warxcell","id":3340882,"node_id":"MDQ6VXNlcjMzNDA4ODI=","avatar_url":"https://avatars.githubusercontent.com/u/3340882?v=4","gravatar_id":"","url":"https://api.github.com/users/Warxcell","html_url":"https://github.com/Warxcell","followers_url":"https://api.github.com/users/Warxcell/followers","following_url":"https://api.github.com/users/Warxcell/following{/other_user}","gists_url":"https://api.github.com/users/Warxcell/gists{/gist_id}","starred_url":"https://api.github.com/users/Warxcell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Warxcell/subscriptions","organizations_url":"https://api.github.com/users/Warxcell/orgs","repos_url":"https://api.github.com/users/Warxcell/repos","events_url":"https://api.github.com/users/Warxcell/events{/privacy}","received_events_url":"https://api.github.com/users/Warxcell/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"diego-ninja","id":78662279,"node_id":"MDQ6VXNlcjc4NjYyMjc5","avatar_url":"https://avatars.githubusercontent.com/u/78662279?v=4","gravatar_id":"","url":"https://api.github.com/users/diego-ninja","html_url":"https://github.com/diego-ninja","followers_url":"https://api.github.com/users/diego-ninja/followers","following_url":"https://api.github.com/users/diego-ninja/following{/other_user}","gists_url":"https://api.github.com/users/diego-ninja/gists{/gist_id}","starred_url":"https://api.github.com/users/diego-ninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diego-ninja/subscriptions","organizations_url":"https://api.github.com/users/diego-ninja/orgs","repos_url":"https://api.github.com/users/diego-ninja/repos","events_url":"https://api.github.com/users/diego-ninja/events{/privacy}","received_events_url":"https://api.github.com/users/diego-ninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-23T12:22:07Z","updated_at":"2021-02-23T12:22:07Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/doctrine/orm/issues/8508","repository_url":"https://api.github.com/repos/doctrine/orm","labels_url":"https://api.github.com/repos/doctrine/orm/issues/8508/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/orm/issues/8508/comments","events_url":"https://api.github.com/repos/doctrine/orm/issues/8508/events","html_url":"https://github.com/doctrine/orm/pull/8508","id":814414233,"node_id":"MDExOlB1bGxSZXF1ZXN0NTc4NDA2NjUz","number":8508,"title":"Proposed fix for #8499","user":{"login":"diego-ninja","id":78662279,"node_id":"MDQ6VXNlcjc4NjYyMjc5","avatar_url":"https://avatars.githubusercontent.com/u/78662279?v=4","gravatar_id":"","url":"https://api.github.com/users/diego-ninja","html_url":"https://github.com/diego-ninja","followers_url":"https://api.github.com/users/diego-ninja/followers","following_url":"https://api.github.com/users/diego-ninja/following{/other_user}","gists_url":"https://api.github.com/users/diego-ninja/gists{/gist_id}","starred_url":"https://api.github.com/users/diego-ninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diego-ninja/subscriptions","organizations_url":"https://api.github.com/users/diego-ninja/orgs","repos_url":"https://api.github.com/users/diego-ninja/repos","events_url":"https://api.github.com/users/diego-ninja/events{/privacy}","received_events_url":"https://api.github.com/users/diego-ninja/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":296201252,"node_id":"MDU6TGFiZWwyOTYyMDEyNTI=","url":"https://api.github.com/repos/doctrine/orm/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/doctrine/orm/milestones/88","html_url":"https://github.com/doctrine/orm/milestone/88","labels_url":"https://api.github.com/repos/doctrine/orm/milestones/88/labels","id":6444843,"node_id":"MDk6TWlsZXN0b25lNjQ0NDg0Mw==","number":88,"title":"2.8.3","description":"2.8.x bugfix release (patch)","creator":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":14,"state":"closed","created_at":"2021-02-17T18:00:09Z","updated_at":"2021-04-01T21:22:03Z","due_on":null,"closed_at":"2021-04-01T21:22:03Z"},"comments":7,"created_at":"2021-02-23T12:22:07Z","updated_at":"2021-02-27T17:41:05Z","closed_at":"2021-02-27T17:40:49Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":597887,"node_id":"MDEwOlJlcG9zaXRvcnk1OTc4ODc=","name":"orm","full_name":"doctrine/orm","private":false,"owner":{"login":"doctrine","id":209254,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwOTI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/209254?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrine","html_url":"https://github.com/doctrine","followers_url":"https://api.github.com/users/doctrine/followers","following_url":"https://api.github.com/users/doctrine/following{/other_user}","gists_url":"https://api.github.com/users/doctrine/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrine/subscriptions","organizations_url":"https://api.github.com/users/doctrine/orgs","repos_url":"https://api.github.com/users/doctrine/repos","events_url":"https://api.github.com/users/doctrine/events{/privacy}","received_events_url":"https://api.github.com/users/doctrine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/doctrine/orm","description":"Doctrine Object Relational Mapper (ORM)","fork":false,"url":"https://api.github.com/repos/doctrine/orm","forks_url":"https://api.github.com/repos/doctrine/orm/forks","keys_url":"https://api.github.com/repos/doctrine/orm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/doctrine/orm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/doctrine/orm/teams","hooks_url":"https://api.github.com/repos/doctrine/orm/hooks","issue_events_url":"https://api.github.com/repos/doctrine/orm/issues/events{/number}","events_url":"https://api.github.com/repos/doctrine/orm/events","assignees_url":"https://api.github.com/repos/doctrine/orm/assignees{/user}","branches_url":"https://api.github.com/repos/doctrine/orm/branches{/branch}","tags_url":"https://api.github.com/repos/doctrine/orm/tags","blobs_url":"https://api.github.com/repos/doctrine/orm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/doctrine/orm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/doctrine/orm/git/refs{/sha}","trees_url":"https://api.github.com/repos/doctrine/orm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/doctrine/orm/statuses/{sha}","languages_url":"https://api.github.com/repos/doctrine/orm/languages","stargazers_url":"https://api.github.com/repos/doctrine/orm/stargazers","contributors_url":"https://api.github.com/repos/doctrine/orm/contributors","subscribers_url":"https://api.github.com/repos/doctrine/orm/subscribers","subscription_url":"https://api.github.com/repos/doctrine/orm/subscription","commits_url":"https://api.github.com/repos/doctrine/orm/commits{/sha}","git_commits_url":"https://api.github.com/repos/doctrine/orm/git/commits{/sha}","comments_url":"https://api.github.com/repos/doctrine/orm/comments{/number}","issue_comment_url":"https://api.github.com/repos/doctrine/orm/issues/comments{/number}","contents_url":"https://api.github.com/repos/doctrine/orm/contents/{+path}","compare_url":"https://api.github.com/repos/doctrine/orm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/doctrine/orm/merges","archive_url":"https://api.github.com/repos/doctrine/orm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/doctrine/orm/downloads","issues_url":"https://api.github.com/repos/doctrine/orm/issues{/number}","pulls_url":"https://api.github.com/repos/doctrine/orm/pulls{/number}","milestones_url":"https://api.github.com/repos/doctrine/orm/milestones{/number}","notifications_url":"https://api.github.com/repos/doctrine/orm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/doctrine/orm/labels{/name}","releases_url":"https://api.github.com/repos/doctrine/orm/releases{/id}","deployments_url":"https://api.github.com/repos/doctrine/orm/deployments","created_at":"2010-04-06T21:42:59Z","updated_at":"2025-11-10T09:26:15Z","pushed_at":"2025-11-10T13:35:45Z","git_url":"git://github.com/doctrine/orm.git","ssh_url":"git@github.com:doctrine/orm.git","clone_url":"https://github.com/doctrine/orm.git","svn_url":"https://github.com/doctrine/orm","homepage":"https://www.doctrine-project.org/projects/orm.html","size":54667,"stargazers_count":10115,"watchers_count":10115,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2553,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1301,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest"],"visibility":"public","forks":2553,"open_issues":1301,"watchers":10115,"default_branch":"3.5.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/doctrine/orm/pulls/8508","html_url":"https://github.com/doctrine/orm/pull/8508","diff_url":"https://github.com/doctrine/orm/pull/8508.diff","patch_url":"https://github.com/doctrine/orm/pull/8508.patch","merged_at":"2021-02-27T17:40:49Z"},"body":"Changed lock function to compare timestamps instead of DateTimeInterface objects directly.\n\nWhen using optimistic lock with DateTimeInterface based version field a bug appears due to the use of the === operator for comparing the lock version and the entity version. This comparison always resolves to false because the === operator when comparing objects is only true when both sides are the exact same instance of the object.\n\nTo fix the issue I have decided to compare timestamps instead the DateTimeInterface based objects directly, calling getTimestamp() method and doing a strict comparison.\n\nModified OptimisticLockException to use DateTimeInterface instead of DateTime class.\n\nAdded test suite to cover case.\n\nFixes #8499","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/8508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/orm/issues/8508/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/784171654","html_url":"https://github.com/doctrine/orm/issues/8499#issuecomment-784171654","issue_url":"https://api.github.com/repos/doctrine/orm/issues/8499","id":784171654,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NDE3MTY1NA==","user":{"login":"diego-ninja","id":78662279,"node_id":"MDQ6VXNlcjc4NjYyMjc5","avatar_url":"https://avatars.githubusercontent.com/u/78662279?v=4","gravatar_id":"","url":"https://api.github.com/users/diego-ninja","html_url":"https://github.com/diego-ninja","followers_url":"https://api.github.com/users/diego-ninja/followers","following_url":"https://api.github.com/users/diego-ninja/following{/other_user}","gists_url":"https://api.github.com/users/diego-ninja/gists{/gist_id}","starred_url":"https://api.github.com/users/diego-ninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diego-ninja/subscriptions","organizations_url":"https://api.github.com/users/diego-ninja/orgs","repos_url":"https://api.github.com/users/diego-ninja/repos","events_url":"https://api.github.com/users/diego-ninja/events{/privacy}","received_events_url":"https://api.github.com/users/diego-ninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-23T12:38:09Z","updated_at":"2021-02-23T12:38:09Z","body":"Just created a new PR with fix and tests, this time to 2.8.x branch. All checks have passed.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/784171654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"diego-ninja","id":78662279,"node_id":"MDQ6VXNlcjc4NjYyMjc5","avatar_url":"https://avatars.githubusercontent.com/u/78662279?v=4","gravatar_id":"","url":"https://api.github.com/users/diego-ninja","html_url":"https://github.com/diego-ninja","followers_url":"https://api.github.com/users/diego-ninja/followers","following_url":"https://api.github.com/users/diego-ninja/following{/other_user}","gists_url":"https://api.github.com/users/diego-ninja/gists{/gist_id}","starred_url":"https://api.github.com/users/diego-ninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diego-ninja/subscriptions","organizations_url":"https://api.github.com/users/diego-ninja/orgs","repos_url":"https://api.github.com/users/diego-ninja/repos","events_url":"https://api.github.com/users/diego-ninja/events{/privacy}","received_events_url":"https://api.github.com/users/diego-ninja/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4373500044,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQzNzM1MDAwNDQ=","url":"https://api.github.com/repos/doctrine/orm/issues/events/4373500044","actor":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"59fddbaa9e9bfbe8bb946c7179f18bf4d43b0cee","commit_url":"https://api.github.com/repos/greg0ire/doctrine-orm/commits/59fddbaa9e9bfbe8bb946c7179f18bf4d43b0cee","created_at":"2021-02-24T22:20:22Z","performed_via_github_app":null},{"id":4385221076,"node_id":"MDExOkNsb3NlZEV2ZW50NDM4NTIyMTA3Ng==","url":"https://api.github.com/repos/doctrine/orm/issues/events/4385221076","actor":{"login":"beberlei","id":26936,"node_id":"MDQ6VXNlcjI2OTM2","avatar_url":"https://avatars.githubusercontent.com/u/26936?v=4","gravatar_id":"","url":"https://api.github.com/users/beberlei","html_url":"https://github.com/beberlei","followers_url":"https://api.github.com/users/beberlei/followers","following_url":"https://api.github.com/users/beberlei/following{/other_user}","gists_url":"https://api.github.com/users/beberlei/gists{/gist_id}","starred_url":"https://api.github.com/users/beberlei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beberlei/subscriptions","organizations_url":"https://api.github.com/users/beberlei/orgs","repos_url":"https://api.github.com/users/beberlei/repos","events_url":"https://api.github.com/users/beberlei/events{/privacy}","received_events_url":"https://api.github.com/users/beberlei/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-02-27T17:40:49Z","state_reason":null,"performed_via_github_app":null},{"id":4385221122,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQzODUyMjExMjI=","url":"https://api.github.com/repos/doctrine/orm/issues/events/4385221122","actor":{"login":"beberlei","id":26936,"node_id":"MDQ6VXNlcjI2OTM2","avatar_url":"https://avatars.githubusercontent.com/u/26936?v=4","gravatar_id":"","url":"https://api.github.com/users/beberlei","html_url":"https://github.com/beberlei","followers_url":"https://api.github.com/users/beberlei/followers","following_url":"https://api.github.com/users/beberlei/following{/other_user}","gists_url":"https://api.github.com/users/beberlei/gists{/gist_id}","starred_url":"https://api.github.com/users/beberlei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beberlei/subscriptions","organizations_url":"https://api.github.com/users/beberlei/orgs","repos_url":"https://api.github.com/users/beberlei/repos","events_url":"https://api.github.com/users/beberlei/events{/privacy}","received_events_url":"https://api.github.com/users/beberlei/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"07d426edf5d2374b6a74a31ff1d68f8741121042","commit_url":"https://api.github.com/repos/doctrine/orm/commits/07d426edf5d2374b6a74a31ff1d68f8741121042","created_at":"2021-02-27T17:40:53Z","performed_via_github_app":null},{"actor":{"login":"acoulton","id":416566,"node_id":"MDQ6VXNlcjQxNjU2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/416566?v=4","gravatar_id":"","url":"https://api.github.com/users/acoulton","html_url":"https://github.com/acoulton","followers_url":"https://api.github.com/users/acoulton/followers","following_url":"https://api.github.com/users/acoulton/following{/other_user}","gists_url":"https://api.github.com/users/acoulton/gists{/gist_id}","starred_url":"https://api.github.com/users/acoulton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acoulton/subscriptions","organizations_url":"https://api.github.com/users/acoulton/orgs","repos_url":"https://api.github.com/users/acoulton/repos","events_url":"https://api.github.com/users/acoulton/events{/privacy}","received_events_url":"https://api.github.com/users/acoulton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-09T12:06:19Z","updated_at":"2021-03-09T12:06:19Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/doctrine/orm/issues/8527","repository_url":"https://api.github.com/repos/doctrine/orm","labels_url":"https://api.github.com/repos/doctrine/orm/issues/8527/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/orm/issues/8527/comments","events_url":"https://api.github.com/repos/doctrine/orm/issues/8527/events","html_url":"https://github.com/doctrine/orm/issues/8527","id":825820906,"node_id":"MDU6SXNzdWU4MjU4MjA5MDY=","number":8527,"title":"Breaking change to optimistic locking in 2.8.2","user":{"login":"acoulton","id":416566,"node_id":"MDQ6VXNlcjQxNjU2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/416566?v=4","gravatar_id":"","url":"https://api.github.com/users/acoulton","html_url":"https://github.com/acoulton","followers_url":"https://api.github.com/users/acoulton/followers","following_url":"https://api.github.com/users/acoulton/following{/other_user}","gists_url":"https://api.github.com/users/acoulton/gists{/gist_id}","starred_url":"https://api.github.com/users/acoulton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acoulton/subscriptions","organizations_url":"https://api.github.com/users/acoulton/orgs","repos_url":"https://api.github.com/users/acoulton/repos","events_url":"https://api.github.com/users/acoulton/events{/privacy}","received_events_url":"https://api.github.com/users/acoulton/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-03-09T12:06:19Z","updated_at":"2021-03-10T22:55:55Z","closed_at":"2021-03-09T20:59:57Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":597887,"node_id":"MDEwOlJlcG9zaXRvcnk1OTc4ODc=","name":"orm","full_name":"doctrine/orm","private":false,"owner":{"login":"doctrine","id":209254,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwOTI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/209254?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrine","html_url":"https://github.com/doctrine","followers_url":"https://api.github.com/users/doctrine/followers","following_url":"https://api.github.com/users/doctrine/following{/other_user}","gists_url":"https://api.github.com/users/doctrine/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrine/subscriptions","organizations_url":"https://api.github.com/users/doctrine/orgs","repos_url":"https://api.github.com/users/doctrine/repos","events_url":"https://api.github.com/users/doctrine/events{/privacy}","received_events_url":"https://api.github.com/users/doctrine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/doctrine/orm","description":"Doctrine Object Relational Mapper (ORM)","fork":false,"url":"https://api.github.com/repos/doctrine/orm","forks_url":"https://api.github.com/repos/doctrine/orm/forks","keys_url":"https://api.github.com/repos/doctrine/orm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/doctrine/orm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/doctrine/orm/teams","hooks_url":"https://api.github.com/repos/doctrine/orm/hooks","issue_events_url":"https://api.github.com/repos/doctrine/orm/issues/events{/number}","events_url":"https://api.github.com/repos/doctrine/orm/events","assignees_url":"https://api.github.com/repos/doctrine/orm/assignees{/user}","branches_url":"https://api.github.com/repos/doctrine/orm/branches{/branch}","tags_url":"https://api.github.com/repos/doctrine/orm/tags","blobs_url":"https://api.github.com/repos/doctrine/orm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/doctrine/orm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/doctrine/orm/git/refs{/sha}","trees_url":"https://api.github.com/repos/doctrine/orm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/doctrine/orm/statuses/{sha}","languages_url":"https://api.github.com/repos/doctrine/orm/languages","stargazers_url":"https://api.github.com/repos/doctrine/orm/stargazers","contributors_url":"https://api.github.com/repos/doctrine/orm/contributors","subscribers_url":"https://api.github.com/repos/doctrine/orm/subscribers","subscription_url":"https://api.github.com/repos/doctrine/orm/subscription","commits_url":"https://api.github.com/repos/doctrine/orm/commits{/sha}","git_commits_url":"https://api.github.com/repos/doctrine/orm/git/commits{/sha}","comments_url":"https://api.github.com/repos/doctrine/orm/comments{/number}","issue_comment_url":"https://api.github.com/repos/doctrine/orm/issues/comments{/number}","contents_url":"https://api.github.com/repos/doctrine/orm/contents/{+path}","compare_url":"https://api.github.com/repos/doctrine/orm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/doctrine/orm/merges","archive_url":"https://api.github.com/repos/doctrine/orm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/doctrine/orm/downloads","issues_url":"https://api.github.com/repos/doctrine/orm/issues{/number}","pulls_url":"https://api.github.com/repos/doctrine/orm/pulls{/number}","milestones_url":"https://api.github.com/repos/doctrine/orm/milestones{/number}","notifications_url":"https://api.github.com/repos/doctrine/orm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/doctrine/orm/labels{/name}","releases_url":"https://api.github.com/repos/doctrine/orm/releases{/id}","deployments_url":"https://api.github.com/repos/doctrine/orm/deployments","created_at":"2010-04-06T21:42:59Z","updated_at":"2025-11-10T09:26:15Z","pushed_at":"2025-11-10T13:35:45Z","git_url":"git://github.com/doctrine/orm.git","ssh_url":"git@github.com:doctrine/orm.git","clone_url":"https://github.com/doctrine/orm.git","svn_url":"https://github.com/doctrine/orm","homepage":"https://www.doctrine-project.org/projects/orm.html","size":54667,"stargazers_count":10115,"watchers_count":10115,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2553,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1301,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest"],"visibility":"public","forks":2553,"open_issues":1301,"watchers":10115,"default_branch":"3.5.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Version 2.8.2 introduced a breaking change to the way optimistic lock versions are compared.\r\n\r\nThis has been reported (and fixed) specifically for DateTime objects as #8499 but in reality it applies more broadly.\r\n\r\nPrior to 2.8.2 the version was compared with a `!=` operator. However among the 25k lines changed in this [automated coding style fix commit](https://github.com/doctrine/orm/commit/68bc00b6c672349925c247951f13c7c90eb801e6#diff-55a900494fc8033ab498c53929716caf0aa39d6bdd7058e7d256787a24412ee4R2502) is a change from that to a `!==` operator.\r\n\r\nPreviously, this would work:\r\n\r\n```php\r\n// view.php\r\n//... form stuff\r\n<input type=\"hidden\" name=\"version\" value=\"<?=$entity->getVersion();?>\">\r\n\r\n// controller.php\r\n$entity = $em->find('MyEntity', $id, LockMode::OPTIMISTIC, $_POST['version']);\r\n```\r\n\r\nHowever because the POST value is a `string` rather than an `int` it now consistently fails with an OptimisticLockException.\r\n\r\nI appreciate that the documentation examples for this show the controller code explicitly casting the incoming value to `(int) $version` before passing it in. Also that the various Doctrine phpdocs have `@param int|null $lockVersion` - although this is technically incorrect, since it's also valid to pass a DateTimeInterface.\r\n\r\nSo there's an argument the old behaviour was wrong, and the caller should always have been forced to cast the value if required.\r\n\r\nOn the other hand, since there's only (incomplete/inaccurate) phpdoc rather than strict typehints, and it's always \"just worked\" it seems reasonable to assume a fair number of people will be just passing in the POST/GET value without explicitly casting.\r\n\r\nAnd arguably it should actually be valid to pass the raw string here - AFAIK integer-versioned entities always start at version 1, so there's no case where you could get a false-positive-version match by passing in a string that casts to `0`. If you pass a string, either it contains the value of the correct integer (and the lock is valid), or you haven't (and the lock fails).\r\n\r\nEither way the release changes previously-working behaviour, so should at very least have a changelog / commit message highlighting that even if you consider this a side-effect of a bugfix rather than a semver-level breaking change.\r\n\r\nMore generally, I don't think it's ideal practice to include behavioural changes (comparison operators etc) alongside stylistic fixes in a single commit that is too big for consumers to realistically review. The [diff between 2.8.1 and 2.8.2](https://github.com/doctrine/orm/compare/242cf1a33df1b8bc5e1b86c3ebd01db07851c833...ebae57eb9637acd8252b398df3121b120688ed5c) has 1,199 changed files with 28,067 additions and 25,814 deletions and with no changelog beyond the 78 mostly-cursory commit messages it's very hard to see what's included.\r\n\r\nFortunately this issue was caught by our integration tests before shipping to production, but it does now make me nervous that there may be `strict-equality` related bugs that have yet to surface. Even if the equality operator fixes had been split to a separate commit it would be much easier to assess whether there are others that might affect us.","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/8527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/orm/issues/8527/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]