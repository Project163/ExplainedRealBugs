[{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/450353241","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-450353241","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":450353241,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDM1MzI0MQ==","user":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-28T12:38:54Z","updated_at":"2018-12-28T12:38:54Z","body":" > The original exception is properly thrown.\r\n\r\nI'd rather say that the failed rollback should have priority here, as something much worse is happening (no active transaction in first place).","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/450353241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2047199447,"node_id":"MDEyOkxhYmVsZWRFdmVudDIwNDcxOTk0NDc=","url":"https://api.github.com/repos/doctrine/orm/issues/events/2047199447","actor":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-12-28T12:38:59Z","label":{"name":"Bug","color":"e11d21"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/450355078","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-450355078","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":450355078,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDM1NTA3OA==","user":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-28T12:54:55Z","updated_at":"2018-12-28T12:54:55Z","body":"I forgot to mention that the whole operation is called within `$entityManager::transactional()` but that can be seen in linked source.\r\n\r\nI see that it starts with `$this->conn->beginTransaction();`  \r\nFollowed by `$this->conn->commit()` after flush and `$this->_conn->commit()` within it.\r\n\r\nJust checked that before calling `PDOConnection::commit()`, the transaction is active `PDO::inTransaction() -> true`\r\n\r\nAfter first PDOException with Unique violation is thrown, the transaction is no longer active.\r\n\r\nMost possibly because `$this->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);` is set on DBAL PDOConnection in the constructor so `commit()` throws exception and cancels transaction.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/450355078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-28T13:27:36Z","updated_at":"2018-12-28T13:27:36Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/doctrine/orm/issues/7546","repository_url":"https://api.github.com/repos/doctrine/orm","labels_url":"https://api.github.com/repos/doctrine/orm/issues/7546/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/orm/issues/7546/comments","events_url":"https://api.github.com/repos/doctrine/orm/issues/7546/events","html_url":"https://github.com/doctrine/orm/pull/7546","id":394637155,"node_id":"MDExOlB1bGxSZXF1ZXN0MjQxMzMzNDMz","number":7546,"title":"Fix previous exception rethrow on transaction rollback","user":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":296201252,"node_id":"MDU6TGFiZWwyOTYyMDEyNTI=","url":"https://api.github.com/repos/doctrine/orm/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null},{"id":297446435,"node_id":"MDU6TGFiZWwyOTc0NDY0MzU=","url":"https://api.github.com/repos/doctrine/orm/labels/Invalid","name":"Invalid","color":"bbbbbb","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2018-12-28T13:27:36Z","updated_at":"2018-12-28T13:40:15Z","closed_at":"2018-12-28T13:29:56Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":597887,"node_id":"MDEwOlJlcG9zaXRvcnk1OTc4ODc=","name":"orm","full_name":"doctrine/orm","private":false,"owner":{"login":"doctrine","id":209254,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwOTI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/209254?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrine","html_url":"https://github.com/doctrine","followers_url":"https://api.github.com/users/doctrine/followers","following_url":"https://api.github.com/users/doctrine/following{/other_user}","gists_url":"https://api.github.com/users/doctrine/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrine/subscriptions","organizations_url":"https://api.github.com/users/doctrine/orgs","repos_url":"https://api.github.com/users/doctrine/repos","events_url":"https://api.github.com/users/doctrine/events{/privacy}","received_events_url":"https://api.github.com/users/doctrine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/doctrine/orm","description":"Doctrine Object Relational Mapper (ORM)","fork":false,"url":"https://api.github.com/repos/doctrine/orm","forks_url":"https://api.github.com/repos/doctrine/orm/forks","keys_url":"https://api.github.com/repos/doctrine/orm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/doctrine/orm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/doctrine/orm/teams","hooks_url":"https://api.github.com/repos/doctrine/orm/hooks","issue_events_url":"https://api.github.com/repos/doctrine/orm/issues/events{/number}","events_url":"https://api.github.com/repos/doctrine/orm/events","assignees_url":"https://api.github.com/repos/doctrine/orm/assignees{/user}","branches_url":"https://api.github.com/repos/doctrine/orm/branches{/branch}","tags_url":"https://api.github.com/repos/doctrine/orm/tags","blobs_url":"https://api.github.com/repos/doctrine/orm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/doctrine/orm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/doctrine/orm/git/refs{/sha}","trees_url":"https://api.github.com/repos/doctrine/orm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/doctrine/orm/statuses/{sha}","languages_url":"https://api.github.com/repos/doctrine/orm/languages","stargazers_url":"https://api.github.com/repos/doctrine/orm/stargazers","contributors_url":"https://api.github.com/repos/doctrine/orm/contributors","subscribers_url":"https://api.github.com/repos/doctrine/orm/subscribers","subscription_url":"https://api.github.com/repos/doctrine/orm/subscription","commits_url":"https://api.github.com/repos/doctrine/orm/commits{/sha}","git_commits_url":"https://api.github.com/repos/doctrine/orm/git/commits{/sha}","comments_url":"https://api.github.com/repos/doctrine/orm/comments{/number}","issue_comment_url":"https://api.github.com/repos/doctrine/orm/issues/comments{/number}","contents_url":"https://api.github.com/repos/doctrine/orm/contents/{+path}","compare_url":"https://api.github.com/repos/doctrine/orm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/doctrine/orm/merges","archive_url":"https://api.github.com/repos/doctrine/orm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/doctrine/orm/downloads","issues_url":"https://api.github.com/repos/doctrine/orm/issues{/number}","pulls_url":"https://api.github.com/repos/doctrine/orm/pulls{/number}","milestones_url":"https://api.github.com/repos/doctrine/orm/milestones{/number}","notifications_url":"https://api.github.com/repos/doctrine/orm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/doctrine/orm/labels{/name}","releases_url":"https://api.github.com/repos/doctrine/orm/releases{/id}","deployments_url":"https://api.github.com/repos/doctrine/orm/deployments","created_at":"2010-04-06T21:42:59Z","updated_at":"2025-11-10T09:26:15Z","pushed_at":"2025-11-10T13:35:45Z","git_url":"git://github.com/doctrine/orm.git","ssh_url":"git@github.com:doctrine/orm.git","clone_url":"https://github.com/doctrine/orm.git","svn_url":"https://github.com/doctrine/orm","homepage":"https://www.doctrine-project.org/projects/orm.html","size":54667,"stargazers_count":10115,"watchers_count":10115,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2553,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1301,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest"],"visibility":"public","forks":2553,"open_issues":1301,"watchers":10115,"default_branch":"3.5.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/doctrine/orm/pulls/7546","html_url":"https://github.com/doctrine/orm/pull/7546","diff_url":"https://github.com/doctrine/orm/pull/7546.diff","patch_url":"https://github.com/doctrine/orm/pull/7546.patch","merged_at":null},"body":"\"Fixes\" https://github.com/doctrine/doctrine2/issues/7545\r\n\r\nNot sure if proper fix, was checking DBAL's code and everything is IMO just fine there. So my goal was to keep both exceptions in ORM's code.\r\n\r\nOr do you have ideas for a better way to fix?","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/7546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/orm/issues/7546/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/450441845","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-450441845","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":450441845,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDQ0MTg0NQ==","user":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-28T23:17:04Z","updated_at":"2018-12-28T23:17:59Z","body":"I decided to go with a test. Found out, that it works just fine. The problem is that in some cases, I defer unique constrains (eg. when doing full sync, running all CUD operations)\r\n\r\nWhen constraint is deferred, the violation is thrown during commit, not on flush and therefore the issue pops up.\r\n\r\nhttps://github.com/simPod/doctrine2/commit/cd031c84b7346fc264819b211e51f5d00408cc94\r\n\r\nTests pass when line :48 is commented out (constraint defer is disabled).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/450441845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/450793666","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-450793666","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":450793666,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDc5MzY2Ng==","user":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T06:26:44Z","updated_at":"2019-01-02T06:26:44Z","body":"@simPod I'd suggest tackling this within 3.x, by adding a better exception type that captures both rollback and previous failures.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/450793666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2049809184,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA0OTgwOTE4NA==","url":"https://api.github.com/repos/doctrine/orm/issues/events/2049809184","actor":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-01-02T06:26:44Z","performed_via_github_app":null},{"id":2049809185,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwNDk4MDkxODU=","url":"https://api.github.com/repos/doctrine/orm/issues/events/2049809185","actor":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-01-02T06:26:44Z","performed_via_github_app":null},{"actor":{"login":"grongor","id":972493,"node_id":"MDQ6VXNlcjk3MjQ5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/972493?v=4","gravatar_id":"","url":"https://api.github.com/users/grongor","html_url":"https://github.com/grongor","followers_url":"https://api.github.com/users/grongor/followers","following_url":"https://api.github.com/users/grongor/following{/other_user}","gists_url":"https://api.github.com/users/grongor/gists{/gist_id}","starred_url":"https://api.github.com/users/grongor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grongor/subscriptions","organizations_url":"https://api.github.com/users/grongor/orgs","repos_url":"https://api.github.com/users/grongor/repos","events_url":"https://api.github.com/users/grongor/events{/privacy}","received_events_url":"https://api.github.com/users/grongor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-04T15:18:02Z","updated_at":"2019-01-04T15:18:02Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/doctrine/dbal/issues/3423","repository_url":"https://api.github.com/repos/doctrine/dbal","labels_url":"https://api.github.com/repos/doctrine/dbal/issues/3423/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/dbal/issues/3423/comments","events_url":"https://api.github.com/repos/doctrine/dbal/issues/3423/events","html_url":"https://github.com/doctrine/dbal/issues/3423","id":395961149,"node_id":"MDU6SXNzdWUzOTU5NjExNDk=","number":3423,"title":"Rollback called when outside of a transaction when using deferred constraints","user":{"login":"grongor","id":972493,"node_id":"MDQ6VXNlcjk3MjQ5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/972493?v=4","gravatar_id":"","url":"https://api.github.com/users/grongor","html_url":"https://github.com/grongor","followers_url":"https://api.github.com/users/grongor/followers","following_url":"https://api.github.com/users/grongor/following{/other_user}","gists_url":"https://api.github.com/users/grongor/gists{/gist_id}","starred_url":"https://api.github.com/users/grongor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grongor/subscriptions","organizations_url":"https://api.github.com/users/grongor/orgs","repos_url":"https://api.github.com/users/grongor/repos","events_url":"https://api.github.com/users/grongor/events{/privacy}","received_events_url":"https://api.github.com/users/grongor/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":225630784,"node_id":"MDU6TGFiZWwyMjU2MzA3ODQ=","url":"https://api.github.com/repos/doctrine/dbal/labels/Improvement","name":"Improvement","color":"0052cc","default":false,"description":null},{"id":308743416,"node_id":"MDU6TGFiZWwzMDg3NDM0MTY=","url":"https://api.github.com/repos/doctrine/dbal/labels/PostgreSQL","name":"PostgreSQL","color":"c7def8","default":false,"description":null},{"id":308743849,"node_id":"MDU6TGFiZWwzMDg3NDM4NDk=","url":"https://api.github.com/repos/doctrine/dbal/labels/Oracle","name":"Oracle","color":"c7def8","default":false,"description":null},{"id":309180183,"node_id":"MDU6TGFiZWwzMDkxODAxODM=","url":"https://api.github.com/repos/doctrine/dbal/labels/Foreign%20Keys","name":"Foreign Keys","color":"ffffff","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2019-01-04T15:18:02Z","updated_at":"2025-02-20T00:26:32Z","closed_at":"2025-01-16T10:21:42Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":677464,"node_id":"MDEwOlJlcG9zaXRvcnk2Nzc0NjQ=","name":"dbal","full_name":"doctrine/dbal","private":false,"owner":{"login":"doctrine","id":209254,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwOTI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/209254?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrine","html_url":"https://github.com/doctrine","followers_url":"https://api.github.com/users/doctrine/followers","following_url":"https://api.github.com/users/doctrine/following{/other_user}","gists_url":"https://api.github.com/users/doctrine/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrine/subscriptions","organizations_url":"https://api.github.com/users/doctrine/orgs","repos_url":"https://api.github.com/users/doctrine/repos","events_url":"https://api.github.com/users/doctrine/events{/privacy}","received_events_url":"https://api.github.com/users/doctrine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/doctrine/dbal","description":"Doctrine Database Abstraction Layer","fork":false,"url":"https://api.github.com/repos/doctrine/dbal","forks_url":"https://api.github.com/repos/doctrine/dbal/forks","keys_url":"https://api.github.com/repos/doctrine/dbal/keys{/key_id}","collaborators_url":"https://api.github.com/repos/doctrine/dbal/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/doctrine/dbal/teams","hooks_url":"https://api.github.com/repos/doctrine/dbal/hooks","issue_events_url":"https://api.github.com/repos/doctrine/dbal/issues/events{/number}","events_url":"https://api.github.com/repos/doctrine/dbal/events","assignees_url":"https://api.github.com/repos/doctrine/dbal/assignees{/user}","branches_url":"https://api.github.com/repos/doctrine/dbal/branches{/branch}","tags_url":"https://api.github.com/repos/doctrine/dbal/tags","blobs_url":"https://api.github.com/repos/doctrine/dbal/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/doctrine/dbal/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/doctrine/dbal/git/refs{/sha}","trees_url":"https://api.github.com/repos/doctrine/dbal/git/trees{/sha}","statuses_url":"https://api.github.com/repos/doctrine/dbal/statuses/{sha}","languages_url":"https://api.github.com/repos/doctrine/dbal/languages","stargazers_url":"https://api.github.com/repos/doctrine/dbal/stargazers","contributors_url":"https://api.github.com/repos/doctrine/dbal/contributors","subscribers_url":"https://api.github.com/repos/doctrine/dbal/subscribers","subscription_url":"https://api.github.com/repos/doctrine/dbal/subscription","commits_url":"https://api.github.com/repos/doctrine/dbal/commits{/sha}","git_commits_url":"https://api.github.com/repos/doctrine/dbal/git/commits{/sha}","comments_url":"https://api.github.com/repos/doctrine/dbal/comments{/number}","issue_comment_url":"https://api.github.com/repos/doctrine/dbal/issues/comments{/number}","contents_url":"https://api.github.com/repos/doctrine/dbal/contents/{+path}","compare_url":"https://api.github.com/repos/doctrine/dbal/compare/{base}...{head}","merges_url":"https://api.github.com/repos/doctrine/dbal/merges","archive_url":"https://api.github.com/repos/doctrine/dbal/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/doctrine/dbal/downloads","issues_url":"https://api.github.com/repos/doctrine/dbal/issues{/number}","pulls_url":"https://api.github.com/repos/doctrine/dbal/pulls{/number}","milestones_url":"https://api.github.com/repos/doctrine/dbal/milestones{/number}","notifications_url":"https://api.github.com/repos/doctrine/dbal/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/doctrine/dbal/labels{/name}","releases_url":"https://api.github.com/repos/doctrine/dbal/releases{/id}","deployments_url":"https://api.github.com/repos/doctrine/dbal/deployments","created_at":"2010-05-20T17:01:42Z","updated_at":"2025-11-10T09:25:45Z","pushed_at":"2025-10-30T13:20:32Z","git_url":"git://github.com/doctrine/dbal.git","ssh_url":"git@github.com:doctrine/dbal.git","clone_url":"https://github.com/doctrine/dbal.git","svn_url":"https://github.com/doctrine/dbal","homepage":"https://www.doctrine-project.org/projects/dbal.html","size":44600,"stargazers_count":9662,"watchers_count":9662,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1374,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":273,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["database","hacktoberfest","ibm-db2","mariadb","mysql","oracle","postgresql","sql-server","sqlite"],"visibility":"public","forks":1374,"open_issues":273,"watchers":9662,"default_branch":"4.3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Bug Report\r\n\r\nIn PostgreSQL there are deferrable constraints - constraints that are **checked at the time of commit**, not immediately after issuing an SQL statement.\r\n\r\nAnd when the commit fails because of such constraint (duplicate key in unique constraint, for example) then the transaction is rolled back and an exception is thrown inside PDO.\r\n\r\nThe problem is that both DBAL and ORM don't expect that behaviour and they try to rollback the transaction after catching that exception. That triggers another exception - trying to rollback a transaction while there is no transaction active.\r\n\r\nSo this bug creates several issues:\r\n- we try to rollback a transaction when there is no transaction\r\n- we lose information about what error happened in the first place\r\n- the Connection object is unusable after this happens as the internal \"transaction level counter\" remains at 1 while it should be 0\r\n\r\n@simPod already discovered the issue and mentioned it here https://github.com/doctrine/doctrine2/issues/7545 . The problem with his issue is that he didn't find the root cause/only mentioned \"previous exception being discarded\", which is partly correct but doesn't reflect the severity of the issue. It's not like we only need to know \"what happened before that last exception\" - the second exception shouldn't have been thrown in the first place.\r\n\r\nCode is better then 1000 words, so here you go:\r\n- Failing build; added tests \"explaining\" the issue: https://travis-ci.org/grongor/dbal/builds/475298852\r\n- Green build; added fix for the failing tests: https://travis-ci.org/grongor/dbal/builds/475299477\r\n- Pull request with both the tests and the fix: https://github.com/doctrine/dbal/pull/3424\r\n\r\n\r\n|    Q        |   A\r\n|------------ | ------\r\n| BC Break    | no\r\n| Version     | all up to this day, afaik\r\n\r\n#### Current behaviour\r\n\r\nYou can't use PostgreSQLs deferred constraints as they will kill DBAL/ORM when the constraint is violated.\r\n\r\n#### How to reproduce\r\n\r\nCreate a table with deferrable unique constraint. Try to insert some data to the table when in transaction with deferrable constraint set to defer. Both DBAL and ORM will throw made up errors and end up in unexpected state.\r\n\r\n#### Expected behaviour\r\n\r\nI would expect to get an unique constraint violation exception. I would also expect to be able to use the connection after the fact.\r\n","reactions":{"url":"https://api.github.com/repos/doctrine/dbal/issues/3423/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/dbal/issues/3423/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/451656574","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-451656574","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":451656574,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTY1NjU3NA==","user":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-05T13:46:49Z","updated_at":"2019-01-05T13:46:49Z","body":"@grongor took over ðŸ‘‹ ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/451656574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2055888916,"node_id":"MDExOkNsb3NlZEV2ZW50MjA1NTg4ODkxNg==","url":"https://api.github.com/repos/doctrine/orm/issues/events/2055888916","actor":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-01-05T13:46:49Z","state_reason":null,"performed_via_github_app":null},{"id":2055888917,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA1NTg4ODkxNw==","url":"https://api.github.com/repos/doctrine/orm/issues/events/2055888917","actor":{"login":"grongor","id":972493,"node_id":"MDQ6VXNlcjk3MjQ5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/972493?v=4","gravatar_id":"","url":"https://api.github.com/users/grongor","html_url":"https://github.com/grongor","followers_url":"https://api.github.com/users/grongor/followers","following_url":"https://api.github.com/users/grongor/following{/other_user}","gists_url":"https://api.github.com/users/grongor/gists{/gist_id}","starred_url":"https://api.github.com/users/grongor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grongor/subscriptions","organizations_url":"https://api.github.com/users/grongor/orgs","repos_url":"https://api.github.com/users/grongor/repos","events_url":"https://api.github.com/users/grongor/events{/privacy}","received_events_url":"https://api.github.com/users/grongor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-01-05T13:46:49Z","performed_via_github_app":null},{"id":2055888918,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwNTU4ODg5MTg=","url":"https://api.github.com/repos/doctrine/orm/issues/events/2055888918","actor":{"login":"grongor","id":972493,"node_id":"MDQ6VXNlcjk3MjQ5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/972493?v=4","gravatar_id":"","url":"https://api.github.com/users/grongor","html_url":"https://github.com/grongor","followers_url":"https://api.github.com/users/grongor/followers","following_url":"https://api.github.com/users/grongor/following{/other_user}","gists_url":"https://api.github.com/users/grongor/gists{/gist_id}","starred_url":"https://api.github.com/users/grongor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grongor/subscriptions","organizations_url":"https://api.github.com/users/grongor/orgs","repos_url":"https://api.github.com/users/grongor/repos","events_url":"https://api.github.com/users/grongor/events{/privacy}","received_events_url":"https://api.github.com/users/grongor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-01-05T13:46:49Z","performed_via_github_app":null},{"id":5399528047,"node_id":"REE_lADOAAkff84XhYtqzwAAAAFB1kJv","url":"https://api.github.com/repos/doctrine/orm/issues/events/5399528047","actor":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2021-10-03T10:15:00Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T08:52:35Z","updated_at":"2021-10-04T08:52:35Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/doctrine/dbal/issues/4846","repository_url":"https://api.github.com/repos/doctrine/dbal","labels_url":"https://api.github.com/repos/doctrine/dbal/issues/4846/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/dbal/issues/4846/comments","events_url":"https://api.github.com/repos/doctrine/dbal/issues/4846/events","html_url":"https://github.com/doctrine/dbal/pull/4846","id":1014905998,"node_id":"PR_kwDOAApWWM4soGnM","number":4846,"title":"Fix incorrect handling of transactions using deferred constraints","user":{"login":"simPod","id":327717,"node_id":"MDQ6VXNlcjMyNzcxNw==","avatar_url":"https://avatars.githubusercontent.com/u/327717?v=4","gravatar_id":"","url":"https://api.github.com/users/simPod","html_url":"https://github.com/simPod","followers_url":"https://api.github.com/users/simPod/followers","following_url":"https://api.github.com/users/simPod/following{/other_user}","gists_url":"https://api.github.com/users/simPod/gists{/gist_id}","starred_url":"https://api.github.com/users/simPod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simPod/subscriptions","organizations_url":"https://api.github.com/users/simPod/orgs","repos_url":"https://api.github.com/users/simPod/repos","events_url":"https://api.github.com/users/simPod/events{/privacy}","received_events_url":"https://api.github.com/users/simPod/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":225630784,"node_id":"MDU6TGFiZWwyMjU2MzA3ODQ=","url":"https://api.github.com/repos/doctrine/dbal/labels/Improvement","name":"Improvement","color":"0052cc","default":false,"description":null},{"id":307619938,"node_id":"MDU6TGFiZWwzMDc2MTk5Mzg=","url":"https://api.github.com/repos/doctrine/dbal/labels/Requires%20Feedback","name":"Requires Feedback","color":"eb6420","default":false,"description":null},{"id":308743416,"node_id":"MDU6TGFiZWwzMDg3NDM0MTY=","url":"https://api.github.com/repos/doctrine/dbal/labels/PostgreSQL","name":"PostgreSQL","color":"c7def8","default":false,"description":null},{"id":308743849,"node_id":"MDU6TGFiZWwzMDg3NDM4NDk=","url":"https://api.github.com/repos/doctrine/dbal/labels/Oracle","name":"Oracle","color":"c7def8","default":false,"description":null},{"id":309180183,"node_id":"MDU6TGFiZWwzMDkxODAxODM=","url":"https://api.github.com/repos/doctrine/dbal/labels/Foreign%20Keys","name":"Foreign Keys","color":"ffffff","default":false,"description":null},{"id":3494842168,"node_id":"LA_kwDOAApWWM7QTw84","url":"https://api.github.com/repos/doctrine/dbal/labels/Stale","name":"Stale","color":"404040","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":27,"created_at":"2021-10-04T08:52:35Z","updated_at":"2025-01-12T12:53:46Z","closed_at":"2024-06-11T03:01:46Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":true,"repository":{"id":677464,"node_id":"MDEwOlJlcG9zaXRvcnk2Nzc0NjQ=","name":"dbal","full_name":"doctrine/dbal","private":false,"owner":{"login":"doctrine","id":209254,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwOTI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/209254?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrine","html_url":"https://github.com/doctrine","followers_url":"https://api.github.com/users/doctrine/followers","following_url":"https://api.github.com/users/doctrine/following{/other_user}","gists_url":"https://api.github.com/users/doctrine/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrine/subscriptions","organizations_url":"https://api.github.com/users/doctrine/orgs","repos_url":"https://api.github.com/users/doctrine/repos","events_url":"https://api.github.com/users/doctrine/events{/privacy}","received_events_url":"https://api.github.com/users/doctrine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/doctrine/dbal","description":"Doctrine Database Abstraction Layer","fork":false,"url":"https://api.github.com/repos/doctrine/dbal","forks_url":"https://api.github.com/repos/doctrine/dbal/forks","keys_url":"https://api.github.com/repos/doctrine/dbal/keys{/key_id}","collaborators_url":"https://api.github.com/repos/doctrine/dbal/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/doctrine/dbal/teams","hooks_url":"https://api.github.com/repos/doctrine/dbal/hooks","issue_events_url":"https://api.github.com/repos/doctrine/dbal/issues/events{/number}","events_url":"https://api.github.com/repos/doctrine/dbal/events","assignees_url":"https://api.github.com/repos/doctrine/dbal/assignees{/user}","branches_url":"https://api.github.com/repos/doctrine/dbal/branches{/branch}","tags_url":"https://api.github.com/repos/doctrine/dbal/tags","blobs_url":"https://api.github.com/repos/doctrine/dbal/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/doctrine/dbal/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/doctrine/dbal/git/refs{/sha}","trees_url":"https://api.github.com/repos/doctrine/dbal/git/trees{/sha}","statuses_url":"https://api.github.com/repos/doctrine/dbal/statuses/{sha}","languages_url":"https://api.github.com/repos/doctrine/dbal/languages","stargazers_url":"https://api.github.com/repos/doctrine/dbal/stargazers","contributors_url":"https://api.github.com/repos/doctrine/dbal/contributors","subscribers_url":"https://api.github.com/repos/doctrine/dbal/subscribers","subscription_url":"https://api.github.com/repos/doctrine/dbal/subscription","commits_url":"https://api.github.com/repos/doctrine/dbal/commits{/sha}","git_commits_url":"https://api.github.com/repos/doctrine/dbal/git/commits{/sha}","comments_url":"https://api.github.com/repos/doctrine/dbal/comments{/number}","issue_comment_url":"https://api.github.com/repos/doctrine/dbal/issues/comments{/number}","contents_url":"https://api.github.com/repos/doctrine/dbal/contents/{+path}","compare_url":"https://api.github.com/repos/doctrine/dbal/compare/{base}...{head}","merges_url":"https://api.github.com/repos/doctrine/dbal/merges","archive_url":"https://api.github.com/repos/doctrine/dbal/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/doctrine/dbal/downloads","issues_url":"https://api.github.com/repos/doctrine/dbal/issues{/number}","pulls_url":"https://api.github.com/repos/doctrine/dbal/pulls{/number}","milestones_url":"https://api.github.com/repos/doctrine/dbal/milestones{/number}","notifications_url":"https://api.github.com/repos/doctrine/dbal/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/doctrine/dbal/labels{/name}","releases_url":"https://api.github.com/repos/doctrine/dbal/releases{/id}","deployments_url":"https://api.github.com/repos/doctrine/dbal/deployments","created_at":"2010-05-20T17:01:42Z","updated_at":"2025-11-10T09:25:45Z","pushed_at":"2025-10-30T13:20:32Z","git_url":"git://github.com/doctrine/dbal.git","ssh_url":"git@github.com:doctrine/dbal.git","clone_url":"https://github.com/doctrine/dbal.git","svn_url":"https://github.com/doctrine/dbal","homepage":"https://www.doctrine-project.org/projects/dbal.html","size":44600,"stargazers_count":9662,"watchers_count":9662,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1374,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":273,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["database","hacktoberfest","ibm-db2","mariadb","mysql","oracle","postgresql","sql-server","sqlite"],"visibility":"public","forks":1374,"open_issues":273,"watchers":9662,"default_branch":"4.3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/doctrine/dbal/pulls/4846","html_url":"https://github.com/doctrine/dbal/pull/4846","diff_url":"https://github.com/doctrine/dbal/pull/4846.diff","patch_url":"https://github.com/doctrine/dbal/pull/4846.patch","merged_at":null},"body":"_Closes #3424 as it's very long and outdated so I decided to start again here_\r\n\r\n<!-- Fill in the relevant information below to help triage your pull request. -->\r\n\r\n|      Q       |   A\r\n|------------- | -----------\r\n| Type         | bug/feature\r\n| BC Break     | yes\r\n| Fixed issues | #3423, https://github.com/doctrine/orm/issues/7545\r\n\r\n#### Summary\r\n\r\nRollback is being called when outside of a transaction when using e.g. deferred constraints or when using ORM and database throws error like https://www.cockroachlabs.com/docs/v21.1/transaction-retry-error-reference.html#retry_write_too_old which is then effectively hidden after PDO's `There's no active transaction`.\r\n","reactions":{"url":"https://api.github.com/repos/doctrine/dbal/issues/4846/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/doctrine/dbal/issues/4846/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"ro0NL","id":1047696,"node_id":"MDQ6VXNlcjEwNDc2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1047696?v=4","gravatar_id":"","url":"https://api.github.com/users/ro0NL","html_url":"https://github.com/ro0NL","followers_url":"https://api.github.com/users/ro0NL/followers","following_url":"https://api.github.com/users/ro0NL/following{/other_user}","gists_url":"https://api.github.com/users/ro0NL/gists{/gist_id}","starred_url":"https://api.github.com/users/ro0NL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ro0NL/subscriptions","organizations_url":"https://api.github.com/users/ro0NL/orgs","repos_url":"https://api.github.com/users/ro0NL/repos","events_url":"https://api.github.com/users/ro0NL/events{/privacy}","received_events_url":"https://api.github.com/users/ro0NL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T21:38:21Z","updated_at":"2024-04-24T21:38:21Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/doctrine/orm/issues/11423","repository_url":"https://api.github.com/repos/doctrine/orm","labels_url":"https://api.github.com/repos/doctrine/orm/issues/11423/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/orm/issues/11423/comments","events_url":"https://api.github.com/repos/doctrine/orm/issues/11423/events","html_url":"https://github.com/doctrine/orm/issues/11423","id":2261730665,"node_id":"I_kwDOAAkff86Gz0Vp","number":11423,"title":"Original exception is swallowed due rollback exception","user":{"login":"ro0NL","id":1047696,"node_id":"MDQ6VXNlcjEwNDc2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1047696?v=4","gravatar_id":"","url":"https://api.github.com/users/ro0NL","html_url":"https://github.com/ro0NL","followers_url":"https://api.github.com/users/ro0NL/followers","following_url":"https://api.github.com/users/ro0NL/following{/other_user}","gists_url":"https://api.github.com/users/ro0NL/gists{/gist_id}","starred_url":"https://api.github.com/users/ro0NL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ro0NL/subscriptions","organizations_url":"https://api.github.com/users/ro0NL/orgs","repos_url":"https://api.github.com/users/ro0NL/repos","events_url":"https://api.github.com/users/ro0NL/events{/privacy}","received_events_url":"https://api.github.com/users/ro0NL/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2024-04-24T16:39:40Z","updated_at":"2025-05-09T20:09:24Z","closed_at":"2024-04-26T11:33:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":597887,"node_id":"MDEwOlJlcG9zaXRvcnk1OTc4ODc=","name":"orm","full_name":"doctrine/orm","private":false,"owner":{"login":"doctrine","id":209254,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwOTI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/209254?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrine","html_url":"https://github.com/doctrine","followers_url":"https://api.github.com/users/doctrine/followers","following_url":"https://api.github.com/users/doctrine/following{/other_user}","gists_url":"https://api.github.com/users/doctrine/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrine/subscriptions","organizations_url":"https://api.github.com/users/doctrine/orgs","repos_url":"https://api.github.com/users/doctrine/repos","events_url":"https://api.github.com/users/doctrine/events{/privacy}","received_events_url":"https://api.github.com/users/doctrine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/doctrine/orm","description":"Doctrine Object Relational Mapper (ORM)","fork":false,"url":"https://api.github.com/repos/doctrine/orm","forks_url":"https://api.github.com/repos/doctrine/orm/forks","keys_url":"https://api.github.com/repos/doctrine/orm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/doctrine/orm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/doctrine/orm/teams","hooks_url":"https://api.github.com/repos/doctrine/orm/hooks","issue_events_url":"https://api.github.com/repos/doctrine/orm/issues/events{/number}","events_url":"https://api.github.com/repos/doctrine/orm/events","assignees_url":"https://api.github.com/repos/doctrine/orm/assignees{/user}","branches_url":"https://api.github.com/repos/doctrine/orm/branches{/branch}","tags_url":"https://api.github.com/repos/doctrine/orm/tags","blobs_url":"https://api.github.com/repos/doctrine/orm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/doctrine/orm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/doctrine/orm/git/refs{/sha}","trees_url":"https://api.github.com/repos/doctrine/orm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/doctrine/orm/statuses/{sha}","languages_url":"https://api.github.com/repos/doctrine/orm/languages","stargazers_url":"https://api.github.com/repos/doctrine/orm/stargazers","contributors_url":"https://api.github.com/repos/doctrine/orm/contributors","subscribers_url":"https://api.github.com/repos/doctrine/orm/subscribers","subscription_url":"https://api.github.com/repos/doctrine/orm/subscription","commits_url":"https://api.github.com/repos/doctrine/orm/commits{/sha}","git_commits_url":"https://api.github.com/repos/doctrine/orm/git/commits{/sha}","comments_url":"https://api.github.com/repos/doctrine/orm/comments{/number}","issue_comment_url":"https://api.github.com/repos/doctrine/orm/issues/comments{/number}","contents_url":"https://api.github.com/repos/doctrine/orm/contents/{+path}","compare_url":"https://api.github.com/repos/doctrine/orm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/doctrine/orm/merges","archive_url":"https://api.github.com/repos/doctrine/orm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/doctrine/orm/downloads","issues_url":"https://api.github.com/repos/doctrine/orm/issues{/number}","pulls_url":"https://api.github.com/repos/doctrine/orm/pulls{/number}","milestones_url":"https://api.github.com/repos/doctrine/orm/milestones{/number}","notifications_url":"https://api.github.com/repos/doctrine/orm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/doctrine/orm/labels{/name}","releases_url":"https://api.github.com/repos/doctrine/orm/releases{/id}","deployments_url":"https://api.github.com/repos/doctrine/orm/deployments","created_at":"2010-04-06T21:42:59Z","updated_at":"2025-11-10T09:26:15Z","pushed_at":"2025-11-10T13:35:45Z","git_url":"git://github.com/doctrine/orm.git","ssh_url":"git@github.com:doctrine/orm.git","clone_url":"https://github.com/doctrine/orm.git","svn_url":"https://github.com/doctrine/orm","homepage":"https://www.doctrine-project.org/projects/orm.html","size":54667,"stargazers_count":10115,"watchers_count":10115,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2553,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1301,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest"],"visibility":"public","forks":2553,"open_issues":1301,"watchers":10115,"default_branch":"3.5.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Bug Report\r\n\r\n<!-- Fill in the relevant information below to help triage your issue. -->\r\n\r\n|    Q        |   A\r\n|------------ | ------\r\n| BC Break    | no\r\n| Version     | 2.19\r\n\r\n#### Summary\r\n\r\nWhen rollback fails (eg. due `SAVEPOINT DOCTRINE_2 does not exist`) at https://github.com/doctrine/orm/blob/bdc41e2b5ea3020cf4660a12b5a985b94fbcd042/src/UnitOfWork.php#L485 the original exception is swallowed, which breaks debugging.\r\n\r\n<!-- Provide a summary describing the problem you are experiencing. -->\r\n\r\n#### Current behavior\r\n\r\nSwallowed exception\r\n\r\n#### How to reproduce\r\n\r\n<!--\r\nProvide steps to reproduce the bug.\r\nIf possible, also add a code snippet with relevant configuration, entity mappings, DQL etc.\r\nAdding a failing Unit or Functional Test would help us a lot - you can submit one in a Pull Request separately, referencing this bug report.\r\n-->\r\n\r\n#### Expected behavior\r\n\r\nTry/catch rollback and log its exception, so the original exception is actually thrown.\r\n","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/11423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/orm/issues/11423/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2079212497","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-2079212497","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":2079212497,"node_id":"IC_kwDOAAkff8577kPR","user":{"login":"ro0NL","id":1047696,"node_id":"MDQ6VXNlcjEwNDc2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1047696?v=4","gravatar_id":"","url":"https://api.github.com/users/ro0NL","html_url":"https://github.com/ro0NL","followers_url":"https://api.github.com/users/ro0NL/followers","following_url":"https://api.github.com/users/ro0NL/following{/other_user}","gists_url":"https://api.github.com/users/ro0NL/gists{/gist_id}","starred_url":"https://api.github.com/users/ro0NL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ro0NL/subscriptions","organizations_url":"https://api.github.com/users/ro0NL/orgs","repos_url":"https://api.github.com/users/ro0NL/repos","events_url":"https://api.github.com/users/ro0NL/events{/privacy}","received_events_url":"https://api.github.com/users/ro0NL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-26T11:34:41Z","updated_at":"2024-04-26T11:38:53Z","body":"the original exception should not/never be swallowed, and it's a real prod debug issue\r\n\r\nwe'll get an exception either way, i prefer the original one\r\n\r\nso i suggest tackling this within 2.x","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2079212497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ro0NL","id":1047696,"node_id":"MDQ6VXNlcjEwNDc2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1047696?v=4","gravatar_id":"","url":"https://api.github.com/users/ro0NL","html_url":"https://github.com/ro0NL","followers_url":"https://api.github.com/users/ro0NL/followers","following_url":"https://api.github.com/users/ro0NL/following{/other_user}","gists_url":"https://api.github.com/users/ro0NL/gists{/gist_id}","starred_url":"https://api.github.com/users/ro0NL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ro0NL/subscriptions","organizations_url":"https://api.github.com/users/ro0NL/orgs","repos_url":"https://api.github.com/users/ro0NL/repos","events_url":"https://api.github.com/users/ro0NL/events{/privacy}","received_events_url":"https://api.github.com/users/ro0NL/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2080415062","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-2080415062","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":2080415062,"node_id":"IC_kwDOAAkff858AJ1W","user":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-27T08:25:32Z","updated_at":"2024-04-27T08:25:32Z","body":"@ro0NL this was reported 6 years ago. Can you please provide a full stack trace of the exception you are getting now? I would like to know if it is still a `PDOException` or if it is wrapped in another exception type. If we could with Marco's solution, I think changing the exception type could be considered a breaking change, even though I don't see why anyone would want to catch something this serious. If that's the case, I would suggest cloning the exception, and tweaking the message of the cloned exception so that it contains a string representation of the previous exception, or adding a property to the exception so that it's possible for an error handler to display it however they see fit. I don't think we will be able to use `$previous` here.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2080415062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12631407191,"node_id":"MEE_lADOAAkff84XhYtqzwAAAALw4_pX","url":"https://api.github.com/repos/doctrine/orm/issues/events/12631407191","actor":{"login":"ro0NL","id":1047696,"node_id":"MDQ6VXNlcjEwNDc2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1047696?v=4","gravatar_id":"","url":"https://api.github.com/users/ro0NL","html_url":"https://github.com/ro0NL","followers_url":"https://api.github.com/users/ro0NL/followers","following_url":"https://api.github.com/users/ro0NL/following{/other_user}","gists_url":"https://api.github.com/users/ro0NL/gists{/gist_id}","starred_url":"https://api.github.com/users/ro0NL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ro0NL/subscriptions","organizations_url":"https://api.github.com/users/ro0NL/orgs","repos_url":"https://api.github.com/users/ro0NL/repos","events_url":"https://api.github.com/users/ro0NL/events{/privacy}","received_events_url":"https://api.github.com/users/ro0NL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-04-27T08:25:33Z","performed_via_github_app":null},{"id":12631407198,"node_id":"SE_lADOAAkff84XhYtqzwAAAALw4_pe","url":"https://api.github.com/repos/doctrine/orm/issues/events/12631407198","actor":{"login":"ro0NL","id":1047696,"node_id":"MDQ6VXNlcjEwNDc2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1047696?v=4","gravatar_id":"","url":"https://api.github.com/users/ro0NL","html_url":"https://github.com/ro0NL","followers_url":"https://api.github.com/users/ro0NL/followers","following_url":"https://api.github.com/users/ro0NL/following{/other_user}","gists_url":"https://api.github.com/users/ro0NL/gists{/gist_id}","starred_url":"https://api.github.com/users/ro0NL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ro0NL/subscriptions","organizations_url":"https://api.github.com/users/ro0NL/orgs","repos_url":"https://api.github.com/users/ro0NL/repos","events_url":"https://api.github.com/users/ro0NL/events{/privacy}","received_events_url":"https://api.github.com/users/ro0NL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-04-27T08:25:33Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2080419382","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-2080419382","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":2080419382,"node_id":"IC_kwDOAAkff858AK42","user":{"login":"ro0NL","id":1047696,"node_id":"MDQ6VXNlcjEwNDc2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1047696?v=4","gravatar_id":"","url":"https://api.github.com/users/ro0NL","html_url":"https://github.com/ro0NL","followers_url":"https://api.github.com/users/ro0NL/followers","following_url":"https://api.github.com/users/ro0NL/following{/other_user}","gists_url":"https://api.github.com/users/ro0NL/gists{/gist_id}","starred_url":"https://api.github.com/users/ro0NL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ro0NL/subscriptions","organizations_url":"https://api.github.com/users/ro0NL/orgs","repos_url":"https://api.github.com/users/ro0NL/repos","events_url":"https://api.github.com/users/ro0NL/events{/privacy}","received_events_url":"https://api.github.com/users/ro0NL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-27T08:45:25Z","updated_at":"2024-04-27T08:45:25Z","body":"**Doctrine\\DBAL\\Exception\\DriverException**\r\n\r\n```\r\nAn exception occurred while executing a query: SQLSTATE[42000]: Syntax error or access violation: 1305 SAVEPOINT DOCTRINE_2 does not exist\r\n\r\n/app/vendor/doctrine/dbal/src/Connection.php:1943\r\n/app/vendor/doctrine/dbal/src/Connection.php:1885\r\n/app/vendor/doctrine/dbal/src/Connection.php:1213\r\n/app/vendor/doctrine/dbal/src/Connections/PrimaryReadReplicaConnection.php:292\r\n/app/vendor/doctrine/dbal/src/Connection.php:1638\r\n/app/vendor/doctrine/dbal/src/Connections/PrimaryReadReplicaConnection.php:365\r\n/app/vendor/doctrine/dbal/src/Connection.php:1535\r\n/app/vendor/doctrine/dbal/src/Connections/PrimaryReadReplicaConnection.php:322\r\n/app/vendor/doctrine/orm/src/UnitOfWork.php:485\r\n/app/vendor/doctrine/orm/src/EntityManager.php:403\r\n```\r\n\r\n____\r\n\r\nprevious: **Doctrine\\DBAL\\Driver\\PDO\\Exception**\r\n\r\n```\r\nSQLSTATE[42000]: Syntax error or access violation: 1305 SAVEPOINT DOCTRINE_2 does not exist\r\n\r\n/app/vendor/doctrine/dbal/src/Driver/PDO/Connection.php:39\r\n/app/vendor/doctrine/dbal/src/Driver/Middleware/AbstractConnectionMiddleware.php:46\r\n/app/src/Bundles/CoreFunctionsBundle/Dbal/Connection.php:90\r\n/app/vendor/doctrine/dbal/src/Connection.php:1211\r\n/app/vendor/doctrine/dbal/src/Connections/PrimaryReadReplicaConnection.php:292\r\n/app/vendor/doctrine/dbal/src/Connection.php:1638\r\n/app/vendor/doctrine/dbal/src/Connections/PrimaryReadReplicaConnection.php:365\r\n/app/vendor/doctrine/dbal/src/Connection.php:1535\r\n/app/vendor/doctrine/dbal/src/Connections/PrimaryReadReplicaConnection.php:322\r\n/app/vendor/doctrine/orm/src/UnitOfWork.php:485\r\n/app/vendor/doctrine/orm/src/EntityManager.php:403\r\n```\r\n\r\n____\r\n\r\nprevious previous: **PDOException**\r\n\r\n```\r\nSQLSTATE[42000]: Syntax error or access violation: 1305 SAVEPOINT DOCTRINE_2 does not exist\r\n\r\n/app/vendor/doctrine/dbal/src/Driver/PDO/Connection.php:33\r\n/app/vendor/doctrine/dbal/src/Driver/Middleware/AbstractConnectionMiddleware.php:46\r\n/app/src/Bundles/CoreFunctionsBundle/Dbal/Connection.php:90\r\n/app/vendor/doctrine/dbal/src/Connection.php:1211\r\n/app/vendor/doctrine/dbal/src/Connections/PrimaryReadReplicaConnection.php:292\r\n/app/vendor/doctrine/dbal/src/Connection.php:1638\r\n/app/vendor/doctrine/dbal/src/Connections/PrimaryReadReplicaConnection.php:365\r\n/app/vendor/doctrine/dbal/src/Connection.php:1535\r\n/app/vendor/doctrine/dbal/src/Connections/PrimaryReadReplicaConnection.php:322\r\n/app/vendor/doctrine/orm/src/UnitOfWork.php:485\r\n/app/vendor/doctrine/orm/src/EntityManager.php:403\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2080419382/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ro0NL","id":1047696,"node_id":"MDQ6VXNlcjEwNDc2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1047696?v=4","gravatar_id":"","url":"https://api.github.com/users/ro0NL","html_url":"https://github.com/ro0NL","followers_url":"https://api.github.com/users/ro0NL/followers","following_url":"https://api.github.com/users/ro0NL/following{/other_user}","gists_url":"https://api.github.com/users/ro0NL/gists{/gist_id}","starred_url":"https://api.github.com/users/ro0NL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ro0NL/subscriptions","organizations_url":"https://api.github.com/users/ro0NL/orgs","repos_url":"https://api.github.com/users/ro0NL/repos","events_url":"https://api.github.com/users/ro0NL/events{/privacy}","received_events_url":"https://api.github.com/users/ro0NL/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2080421662","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-2080421662","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":2080421662,"node_id":"IC_kwDOAAkff858ALce","user":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-27T08:56:02Z","updated_at":"2024-04-27T08:59:08Z","body":"Then I think a possible design could be defining `DriverException::withPrevious(\\Throwable $throwable)` or rather `DriverException::withSomeOtherName()` to avoid confusion with `$previous`, add a getter for that thing, then modify `Connection::rollback()` so that it accepts a throwable, and calls the wither above when that throwable is defined and an exception occurs here: https://github.com/doctrine/dbal/blob/4.0.x/src/Connection.php#L1061-L1063\r\n\r\nThen, that extra exception could be displayed by the error handlerâ€¦ that could be an issue since it would mean the error handler would have to know about the wither. Another solution to that could be to clone the exception and modify its message.\r\n\r\nSadly, this means this cannot be tackled in 2.x","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2080421662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2080426459","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-2080426459","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":2080426459,"node_id":"IC_kwDOAAkff858AMnb","user":{"login":"ro0NL","id":1047696,"node_id":"MDQ6VXNlcjEwNDc2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1047696?v=4","gravatar_id":"","url":"https://api.github.com/users/ro0NL","html_url":"https://github.com/ro0NL","followers_url":"https://api.github.com/users/ro0NL/followers","following_url":"https://api.github.com/users/ro0NL/following{/other_user}","gists_url":"https://api.github.com/users/ro0NL/gists{/gist_id}","starred_url":"https://api.github.com/users/ro0NL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ro0NL/subscriptions","organizations_url":"https://api.github.com/users/ro0NL/orgs","repos_url":"https://api.github.com/users/ro0NL/repos","events_url":"https://api.github.com/users/ro0NL/events{/privacy}","received_events_url":"https://api.github.com/users/ro0NL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-27T09:13:40Z","updated_at":"2024-04-27T09:13:40Z","body":"perhaps simply rethrow with original exception concatted in message?\r\n\r\nhttps://3v4l.org/FmcJa","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2080426459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ro0NL","id":1047696,"node_id":"MDQ6VXNlcjEwNDc2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1047696?v=4","gravatar_id":"","url":"https://api.github.com/users/ro0NL","html_url":"https://github.com/ro0NL","followers_url":"https://api.github.com/users/ro0NL/followers","following_url":"https://api.github.com/users/ro0NL/following{/other_user}","gists_url":"https://api.github.com/users/ro0NL/gists{/gist_id}","starred_url":"https://api.github.com/users/ro0NL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ro0NL/subscriptions","organizations_url":"https://api.github.com/users/ro0NL/orgs","repos_url":"https://api.github.com/users/ro0NL/repos","events_url":"https://api.github.com/users/ro0NL/events{/privacy}","received_events_url":"https://api.github.com/users/ro0NL/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2080430161","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-2080430161","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":2080430161,"node_id":"IC_kwDOAAkff858ANhR","user":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-27T09:28:43Z","updated_at":"2024-04-27T09:33:40Z","body":"Yes, that's what I mean by \"modify its message\" (except I would use deep cloning). In the meantime, I think there is something you could try on your application to debug your urgent production issue with ORM 2 and DBAL 3: writing a DBAL middleware that catches, logs and rethrows any exception it sees go through.\r\n\r\nNote that since `AbstractConnectionMiddleware` has a `rollback` method, you could go as far as memoizing the exception, and then logging when and only when `rollback()` is called and an exception occurs when calling `$this->wrapped->rollback()`.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2080430161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-31T17:48:11Z","updated_at":"2024-05-31T17:48:11Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/doctrine/orm/issues/11482","repository_url":"https://api.github.com/repos/doctrine/orm","labels_url":"https://api.github.com/repos/doctrine/orm/issues/11482/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/orm/issues/11482/comments","events_url":"https://api.github.com/repos/doctrine/orm/issues/11482/events","html_url":"https://github.com/doctrine/orm/pull/11482","id":2328148919,"node_id":"PR_kwDOAAkff85xJM1C","number":11482,"title":"Catch Rollback Driver Exception","user":{"login":"rodnaph","id":447579,"node_id":"MDQ6VXNlcjQ0NzU3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/447579?v=4","gravatar_id":"","url":"https://api.github.com/users/rodnaph","html_url":"https://github.com/rodnaph","followers_url":"https://api.github.com/users/rodnaph/followers","following_url":"https://api.github.com/users/rodnaph/following{/other_user}","gists_url":"https://api.github.com/users/rodnaph/gists{/gist_id}","starred_url":"https://api.github.com/users/rodnaph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rodnaph/subscriptions","organizations_url":"https://api.github.com/users/rodnaph/orgs","repos_url":"https://api.github.com/users/rodnaph/repos","events_url":"https://api.github.com/users/rodnaph/events{/privacy}","received_events_url":"https://api.github.com/users/rodnaph/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-05-31T16:00:05Z","updated_at":"2024-05-31T19:26:04Z","closed_at":"2024-05-31T19:26:04Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":597887,"node_id":"MDEwOlJlcG9zaXRvcnk1OTc4ODc=","name":"orm","full_name":"doctrine/orm","private":false,"owner":{"login":"doctrine","id":209254,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwOTI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/209254?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrine","html_url":"https://github.com/doctrine","followers_url":"https://api.github.com/users/doctrine/followers","following_url":"https://api.github.com/users/doctrine/following{/other_user}","gists_url":"https://api.github.com/users/doctrine/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrine/subscriptions","organizations_url":"https://api.github.com/users/doctrine/orgs","repos_url":"https://api.github.com/users/doctrine/repos","events_url":"https://api.github.com/users/doctrine/events{/privacy}","received_events_url":"https://api.github.com/users/doctrine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/doctrine/orm","description":"Doctrine Object Relational Mapper (ORM)","fork":false,"url":"https://api.github.com/repos/doctrine/orm","forks_url":"https://api.github.com/repos/doctrine/orm/forks","keys_url":"https://api.github.com/repos/doctrine/orm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/doctrine/orm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/doctrine/orm/teams","hooks_url":"https://api.github.com/repos/doctrine/orm/hooks","issue_events_url":"https://api.github.com/repos/doctrine/orm/issues/events{/number}","events_url":"https://api.github.com/repos/doctrine/orm/events","assignees_url":"https://api.github.com/repos/doctrine/orm/assignees{/user}","branches_url":"https://api.github.com/repos/doctrine/orm/branches{/branch}","tags_url":"https://api.github.com/repos/doctrine/orm/tags","blobs_url":"https://api.github.com/repos/doctrine/orm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/doctrine/orm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/doctrine/orm/git/refs{/sha}","trees_url":"https://api.github.com/repos/doctrine/orm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/doctrine/orm/statuses/{sha}","languages_url":"https://api.github.com/repos/doctrine/orm/languages","stargazers_url":"https://api.github.com/repos/doctrine/orm/stargazers","contributors_url":"https://api.github.com/repos/doctrine/orm/contributors","subscribers_url":"https://api.github.com/repos/doctrine/orm/subscribers","subscription_url":"https://api.github.com/repos/doctrine/orm/subscription","commits_url":"https://api.github.com/repos/doctrine/orm/commits{/sha}","git_commits_url":"https://api.github.com/repos/doctrine/orm/git/commits{/sha}","comments_url":"https://api.github.com/repos/doctrine/orm/comments{/number}","issue_comment_url":"https://api.github.com/repos/doctrine/orm/issues/comments{/number}","contents_url":"https://api.github.com/repos/doctrine/orm/contents/{+path}","compare_url":"https://api.github.com/repos/doctrine/orm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/doctrine/orm/merges","archive_url":"https://api.github.com/repos/doctrine/orm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/doctrine/orm/downloads","issues_url":"https://api.github.com/repos/doctrine/orm/issues{/number}","pulls_url":"https://api.github.com/repos/doctrine/orm/pulls{/number}","milestones_url":"https://api.github.com/repos/doctrine/orm/milestones{/number}","notifications_url":"https://api.github.com/repos/doctrine/orm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/doctrine/orm/labels{/name}","releases_url":"https://api.github.com/repos/doctrine/orm/releases{/id}","deployments_url":"https://api.github.com/repos/doctrine/orm/deployments","created_at":"2010-04-06T21:42:59Z","updated_at":"2025-11-10T09:26:15Z","pushed_at":"2025-11-10T13:35:45Z","git_url":"git://github.com/doctrine/orm.git","ssh_url":"git@github.com:doctrine/orm.git","clone_url":"https://github.com/doctrine/orm.git","svn_url":"https://github.com/doctrine/orm","homepage":"https://www.doctrine-project.org/projects/orm.html","size":54667,"stargazers_count":10115,"watchers_count":10115,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2553,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1301,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest"],"visibility":"public","forks":2553,"open_issues":1301,"watchers":10115,"default_branch":"3.5.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/doctrine/orm/pulls/11482","html_url":"https://github.com/doctrine/orm/pull/11482","diff_url":"https://github.com/doctrine/orm/pull/11482.diff","patch_url":"https://github.com/doctrine/orm/pull/11482.patch","merged_at":null},"body":"Adds a try/catch when rolling back after an exception during UnitOfWork commit, so exception is not lost.\r\n\r\nCurrently the connection driver could throw an exception on rollback (eg. if the exception causes there to be no active transaction) which results in the driver exception propagating to the caller, and the commit Throwable being lost. Instead here, the rollback exception is swallowed so the original commit exception can be thrown to the caller.\r\n\r\nI'm not sure what the best behaviour is here, so please advise. I've also not added any tests yet as it looked like I'd need to do some wrangling on the mocks being used, so wanted to at least check this was a reasonable idea before spending time on it.","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/11482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/orm/issues/11482/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"rodnaph","id":447579,"node_id":"MDQ6VXNlcjQ0NzU3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/447579?v=4","gravatar_id":"","url":"https://api.github.com/users/rodnaph","html_url":"https://github.com/rodnaph","followers_url":"https://api.github.com/users/rodnaph/followers","following_url":"https://api.github.com/users/rodnaph/following{/other_user}","gists_url":"https://api.github.com/users/rodnaph/gists{/gist_id}","starred_url":"https://api.github.com/users/rodnaph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rodnaph/subscriptions","organizations_url":"https://api.github.com/users/rodnaph/orgs","repos_url":"https://api.github.com/users/rodnaph/repos","events_url":"https://api.github.com/users/rodnaph/events{/privacy}","received_events_url":"https://api.github.com/users/rodnaph/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-17T08:18:47Z","updated_at":"2024-06-17T08:18:47Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/symfony/symfony/issues/54355","repository_url":"https://api.github.com/repos/symfony/symfony","labels_url":"https://api.github.com/repos/symfony/symfony/issues/54355/labels{/name}","comments_url":"https://api.github.com/repos/symfony/symfony/issues/54355/comments","events_url":"https://api.github.com/repos/symfony/symfony/issues/54355/events","html_url":"https://github.com/symfony/symfony/pull/54355","id":2197809845,"node_id":"PR_kwDOAAb9Ss5qPIry","number":54355,"title":"[Messenger] Swallow Exception on Rollback","user":{"login":"rodnaph","id":447579,"node_id":"MDQ6VXNlcjQ0NzU3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/447579?v=4","gravatar_id":"","url":"https://api.github.com/users/rodnaph","html_url":"https://github.com/rodnaph","followers_url":"https://api.github.com/users/rodnaph/followers","following_url":"https://api.github.com/users/rodnaph/following{/other_user}","gists_url":"https://api.github.com/users/rodnaph/gists{/gist_id}","starred_url":"https://api.github.com/users/rodnaph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rodnaph/subscriptions","organizations_url":"https://api.github.com/users/rodnaph/orgs","repos_url":"https://api.github.com/users/rodnaph/repos","events_url":"https://api.github.com/users/rodnaph/events{/privacy}","received_events_url":"https://api.github.com/users/rodnaph/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":237003792,"node_id":"MDU6TGFiZWwyMzcwMDM3OTI=","url":"https://api.github.com/repos/symfony/symfony/labels/Status:%20Needs%20Review","name":"Status: Needs Review","color":"ededed","default":false,"description":null},{"id":877085690,"node_id":"MDU6TGFiZWw4NzcwODU2OTA=","url":"https://api.github.com/repos/symfony/symfony/labels/Messenger","name":"Messenger","color":"dddddd","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/symfony/symfony/milestones/35","html_url":"https://github.com/symfony/symfony/milestone/35","labels_url":"https://api.github.com/repos/symfony/symfony/milestones/35/labels","id":12957424,"node_id":"MI_kwDOAAb9Ss4Axbbw","number":35,"title":"7.4","description":"https://symfony.com/releases/7.4","creator":{"login":"fabpot","id":47313,"node_id":"MDQ6VXNlcjQ3MzEz","avatar_url":"https://avatars.githubusercontent.com/u/47313?v=4","gravatar_id":"","url":"https://api.github.com/users/fabpot","html_url":"https://github.com/fabpot","followers_url":"https://api.github.com/users/fabpot/followers","following_url":"https://api.github.com/users/fabpot/following{/other_user}","gists_url":"https://api.github.com/users/fabpot/gists{/gist_id}","starred_url":"https://api.github.com/users/fabpot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fabpot/subscriptions","organizations_url":"https://api.github.com/users/fabpot/orgs","repos_url":"https://api.github.com/users/fabpot/repos","events_url":"https://api.github.com/users/fabpot/events{/privacy}","received_events_url":"https://api.github.com/users/fabpot/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":209,"closed_issues":600,"state":"open","created_at":"2025-05-26T16:55:41Z","updated_at":"2025-11-10T10:18:23Z","due_on":"2025-11-30T08:00:00Z","closed_at":null},"comments":1,"created_at":"2024-03-20T15:19:50Z","updated_at":"2025-06-01T07:08:28Z","closed_at":null,"author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":458058,"node_id":"MDEwOlJlcG9zaXRvcnk0NTgwNTg=","name":"symfony","full_name":"symfony/symfony","private":false,"owner":{"login":"symfony","id":143937,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE0MzkzNw==","avatar_url":"https://avatars.githubusercontent.com/u/143937?v=4","gravatar_id":"","url":"https://api.github.com/users/symfony","html_url":"https://github.com/symfony","followers_url":"https://api.github.com/users/symfony/followers","following_url":"https://api.github.com/users/symfony/following{/other_user}","gists_url":"https://api.github.com/users/symfony/gists{/gist_id}","starred_url":"https://api.github.com/users/symfony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symfony/subscriptions","organizations_url":"https://api.github.com/users/symfony/orgs","repos_url":"https://api.github.com/users/symfony/repos","events_url":"https://api.github.com/users/symfony/events{/privacy}","received_events_url":"https://api.github.com/users/symfony/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/symfony/symfony","description":"The Symfony PHP framework","fork":false,"url":"https://api.github.com/repos/symfony/symfony","forks_url":"https://api.github.com/repos/symfony/symfony/forks","keys_url":"https://api.github.com/repos/symfony/symfony/keys{/key_id}","collaborators_url":"https://api.github.com/repos/symfony/symfony/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/symfony/symfony/teams","hooks_url":"https://api.github.com/repos/symfony/symfony/hooks","issue_events_url":"https://api.github.com/repos/symfony/symfony/issues/events{/number}","events_url":"https://api.github.com/repos/symfony/symfony/events","assignees_url":"https://api.github.com/repos/symfony/symfony/assignees{/user}","branches_url":"https://api.github.com/repos/symfony/symfony/branches{/branch}","tags_url":"https://api.github.com/repos/symfony/symfony/tags","blobs_url":"https://api.github.com/repos/symfony/symfony/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/symfony/symfony/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/symfony/symfony/git/refs{/sha}","trees_url":"https://api.github.com/repos/symfony/symfony/git/trees{/sha}","statuses_url":"https://api.github.com/repos/symfony/symfony/statuses/{sha}","languages_url":"https://api.github.com/repos/symfony/symfony/languages","stargazers_url":"https://api.github.com/repos/symfony/symfony/stargazers","contributors_url":"https://api.github.com/repos/symfony/symfony/contributors","subscribers_url":"https://api.github.com/repos/symfony/symfony/subscribers","subscription_url":"https://api.github.com/repos/symfony/symfony/subscription","commits_url":"https://api.github.com/repos/symfony/symfony/commits{/sha}","git_commits_url":"https://api.github.com/repos/symfony/symfony/git/commits{/sha}","comments_url":"https://api.github.com/repos/symfony/symfony/comments{/number}","issue_comment_url":"https://api.github.com/repos/symfony/symfony/issues/comments{/number}","contents_url":"https://api.github.com/repos/symfony/symfony/contents/{+path}","compare_url":"https://api.github.com/repos/symfony/symfony/compare/{base}...{head}","merges_url":"https://api.github.com/repos/symfony/symfony/merges","archive_url":"https://api.github.com/repos/symfony/symfony/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/symfony/symfony/downloads","issues_url":"https://api.github.com/repos/symfony/symfony/issues{/number}","pulls_url":"https://api.github.com/repos/symfony/symfony/pulls{/number}","milestones_url":"https://api.github.com/repos/symfony/symfony/milestones{/number}","notifications_url":"https://api.github.com/repos/symfony/symfony/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/symfony/symfony/labels{/name}","releases_url":"https://api.github.com/repos/symfony/symfony/releases{/id}","deployments_url":"https://api.github.com/repos/symfony/symfony/deployments","created_at":"2010-01-04T14:21:21Z","updated_at":"2025-11-10T12:48:30Z","pushed_at":"2025-11-08T16:31:14Z","git_url":"git://github.com/symfony/symfony.git","ssh_url":"git@github.com:symfony/symfony.git","clone_url":"https://github.com/symfony/symfony.git","svn_url":"https://github.com/symfony/symfony","homepage":"https://symfony.com","size":310286,"stargazers_count":30758,"watchers_count":30758,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":9740,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":779,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["bundle","framework","hacktoberfest","php","php-framework","symfony","symfony-bundle"],"visibility":"public","forks":9740,"open_issues":779,"watchers":30758,"default_branch":"7.4","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/symfony/symfony/pulls/54355","html_url":"https://github.com/symfony/symfony/pull/54355","diff_url":"https://github.com/symfony/symfony/pull/54355.diff","patch_url":"https://github.com/symfony/symfony/pull/54355.patch","merged_at":null},"body":"| Q             | A\r\n| ------------- | ---\r\n| Branch?       | 7.1\r\n| Bug fix?      | no\r\n| New feature?  | no\r\n| Deprecations? | no\r\n| Issues        | None\r\n| License       | MIT\r\n\r\nWhen a database level exception occurs, eg. constraint violations, it may not be possible to rollback the active transaction when handing the exception in the Messenger middleware. In this case an exception is thrown from rollback, and the original exception is lost.\r\n\r\nI've added a try/catch to swallow any exception rolling back, so the original exception will be thrown as expected. I don't know if there is better behaviour here, just swallowing the exception seems quite poor. We could create a new exception with the rollback error, adding the original exception to it?\r\n\r\nI also tried checking if there was an active transaction before rolling back, but that does not seem to be a reliable method for catching this condition.\r\n\r\nI've marked this as neither a bugfix or a feature...  it's a minor improvement, but let me know if I should update the description.","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/54355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/symfony/symfony/issues/54355/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2180894200","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-2180894200","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":2180894200,"node_id":"IC_kwDOAAkff86B_c34","user":{"login":"adlpz","id":602379,"node_id":"MDQ6VXNlcjYwMjM3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/602379?v=4","gravatar_id":"","url":"https://api.github.com/users/adlpz","html_url":"https://github.com/adlpz","followers_url":"https://api.github.com/users/adlpz/followers","following_url":"https://api.github.com/users/adlpz/following{/other_user}","gists_url":"https://api.github.com/users/adlpz/gists{/gist_id}","starred_url":"https://api.github.com/users/adlpz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adlpz/subscriptions","organizations_url":"https://api.github.com/users/adlpz/orgs","repos_url":"https://api.github.com/users/adlpz/repos","events_url":"https://api.github.com/users/adlpz/events{/privacy}","received_events_url":"https://api.github.com/users/adlpz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-20T14:46:20Z","updated_at":"2024-06-20T14:46:20Z","body":"We've been seeing this issue. I'll add some context on what we've found:\r\n\r\n- We're in ORM 2.\r\n- The DB is MySQL and we're using savepoints. \r\n- In our case, the underlying exception is a `Doctrine\\DBAL\\Exception\\DeadlockException`. \r\n- Apparently with MySQL an implicit rollback happens when a deadlock occurs.\r\n- The exception is triggered by a `$em->flush()` which calls `$uow->commit()`. In the main try/catch block of the method `$conn->isTransactionActive()` is `true` and `$conn->rollBack()` is called.\r\n- If we don't use savepoints, this results in a `ROLLBACK` issued, which with no transactions active (they've been implicitly rolled back) is a no-op.\r\n- However with savepoints this results in a `ROLLBACK TO SAVEPOINT DOCTRINE_X`. As this savepoint doesn't exist anymore, a `Doctrine\\DBAL\\Exception\\DriverException` is thrown.\r\n- The same `catch` block handles the new exception which overwrites the original from then on. The original issue never reaches our logging infrastructure.\r\n\r\nWe've seen two possible workarounds:\r\n\r\n- Forking/patching `UnitOfWork` to add a try-catch around the rollback.\r\n- Using a connection middleware to patch `$connection->exec()` and `$connection->rollBack()` and catch/log any exceptions from these statements.\r\n\r\nHowever in any case a proper solution for this issue would be, as suggested, to include the information of the previous exception somehow. Maybe with a specific exception class that handles exceptions _happened during the handling of an exception_ like it's the case here.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2180894200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adlpz","id":602379,"node_id":"MDQ6VXNlcjYwMjM3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/602379?v=4","gravatar_id":"","url":"https://api.github.com/users/adlpz","html_url":"https://github.com/adlpz","followers_url":"https://api.github.com/users/adlpz/followers","following_url":"https://api.github.com/users/adlpz/following{/other_user}","gists_url":"https://api.github.com/users/adlpz/gists{/gist_id}","starred_url":"https://api.github.com/users/adlpz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adlpz/subscriptions","organizations_url":"https://api.github.com/users/adlpz/orgs","repos_url":"https://api.github.com/users/adlpz/repos","events_url":"https://api.github.com/users/adlpz/events{/privacy}","received_events_url":"https://api.github.com/users/adlpz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2402212382","html_url":"https://github.com/doctrine/orm/issues/7545#issuecomment-2402212382","issue_url":"https://api.github.com/repos/doctrine/orm/issues/7545","id":2402212382,"node_id":"IC_kwDOAAkff86PLtoe","user":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T12:40:12Z","updated_at":"2024-10-09T12:41:12Z","body":"Hello from the [doctrine hackathon](https://www.doctrine-project.org/2024/07/09/doctrine-core-team-meetup.html) :wave: \r\n\r\nI discussed this with the team, and @alcaeus told me that code inside a catch block should never fail. If it does, it might be because we are trying to do something despite the fact that an exception occurred. That kind of stuff should be done in a `finally` block, and as it turns out, when you use this pattern, PHP handles it gracefully and displays both exceptions :exploding_head: \r\nSo the fix is going to be simpler than expected I think.\r\n\r\nhttps://3v4l.org/9QiaO","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/comments/2402212382/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14572302795,"node_id":"MEE_lADOAAkff84XhYtqzwAAAANkk7HL","url":"https://api.github.com/repos/doctrine/orm/issues/events/14572302795","actor":{"login":"alcaeus","id":383198,"node_id":"MDQ6VXNlcjM4MzE5OA==","avatar_url":"https://avatars.githubusercontent.com/u/383198?v=4","gravatar_id":"","url":"https://api.github.com/users/alcaeus","html_url":"https://github.com/alcaeus","followers_url":"https://api.github.com/users/alcaeus/followers","following_url":"https://api.github.com/users/alcaeus/following{/other_user}","gists_url":"https://api.github.com/users/alcaeus/gists{/gist_id}","starred_url":"https://api.github.com/users/alcaeus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alcaeus/subscriptions","organizations_url":"https://api.github.com/users/alcaeus/orgs","repos_url":"https://api.github.com/users/alcaeus/repos","events_url":"https://api.github.com/users/alcaeus/events{/privacy}","received_events_url":"https://api.github.com/users/alcaeus/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-10-09T12:40:14Z","performed_via_github_app":null},{"id":14572302815,"node_id":"SE_lADOAAkff84XhYtqzwAAAANkk7Hf","url":"https://api.github.com/repos/doctrine/orm/issues/events/14572302815","actor":{"login":"alcaeus","id":383198,"node_id":"MDQ6VXNlcjM4MzE5OA==","avatar_url":"https://avatars.githubusercontent.com/u/383198?v=4","gravatar_id":"","url":"https://api.github.com/users/alcaeus","html_url":"https://github.com/alcaeus","followers_url":"https://api.github.com/users/alcaeus/followers","following_url":"https://api.github.com/users/alcaeus/following{/other_user}","gists_url":"https://api.github.com/users/alcaeus/gists{/gist_id}","starred_url":"https://api.github.com/users/alcaeus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alcaeus/subscriptions","organizations_url":"https://api.github.com/users/alcaeus/orgs","repos_url":"https://api.github.com/users/alcaeus/repos","events_url":"https://api.github.com/users/alcaeus/events{/privacy}","received_events_url":"https://api.github.com/users/alcaeus/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-10-09T12:40:14Z","performed_via_github_app":null}]