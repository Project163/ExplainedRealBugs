{"url":"https://api.github.com/repos/doctrine/orm/issues/11163","repository_url":"https://api.github.com/repos/doctrine/orm","labels_url":"https://api.github.com/repos/doctrine/orm/issues/11163/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/orm/issues/11163/comments","events_url":"https://api.github.com/repos/doctrine/orm/issues/11163/events","html_url":"https://github.com/doctrine/orm/issues/11163","id":2085812227,"node_id":"I_kwDOAAkff858UvgD","number":11163,"title":"orderBy not being respected","user":{"login":"brian-codes","id":37519149,"node_id":"MDQ6VXNlcjM3NTE5MTQ5","avatar_url":"https://avatars.githubusercontent.com/u/37519149?v=4","gravatar_id":"","url":"https://api.github.com/users/brian-codes","html_url":"https://github.com/brian-codes","followers_url":"https://api.github.com/users/brian-codes/followers","following_url":"https://api.github.com/users/brian-codes/following{/other_user}","gists_url":"https://api.github.com/users/brian-codes/gists{/gist_id}","starred_url":"https://api.github.com/users/brian-codes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brian-codes/subscriptions","organizations_url":"https://api.github.com/users/brian-codes/orgs","repos_url":"https://api.github.com/users/brian-codes/repos","events_url":"https://api.github.com/users/brian-codes/events{/privacy}","received_events_url":"https://api.github.com/users/brian-codes/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2024-01-17T09:52:16Z","updated_at":"2024-05-01T13:50:33Z","closed_at":"2024-04-30T07:14:15Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Bug Report\r\n\r\n|    Q        |   A\r\n|------------ | ------\r\n| BC Break    | yes/no\r\n| Version     | 2.17.2\r\n\r\n#### Summary\r\n\r\nI have a relationship between Threads and Messages. One thread can contain many Messages. Using XML mapping there is an orderBy entry stating the collection of messages should be ordered by their created at date. This works correctly on v2.16.3 but open upgrading to 2.17.2 this is no longer respected and the collection of messages is ordered by it's UUID.\r\n\r\n#### Current behavior\r\n\r\norderBy entry not being respected and instead sorting the collection by UUID\r\n\r\n#### How to reproduce\r\n\r\nUse QueryBuilder to get a collection of Threads.\r\n\r\n```\r\n    <entity repository-class=\"App\\ThreadRepository\" name=\"App\\Thread\" table=\"threads\">\r\n        <one-to-many field=\"messages\" target-entity=\"App\\Message\" mapped-by=\"thread\" fetch=\"EAGER\">\r\n            <order-by>\r\n                <order-by-field name=\"createdAt\"/>\r\n            </order-by>\r\n        </one-to-many>\r\n    </entity>\r\n```\r\n\r\n```\r\n    <entity repository-class=\"App\\MessageRepository\" name=\"App\\Message\" table=\"messages\">\r\n        <field name=\"createdAt\" type=\"datetime\" column=\"created_at\"/>\r\n        <many-to-one field=\"thread\" target-entity=\"App\\Thread\" inversed-by=\"messages\"/>\r\n    </entity>\r\n```\r\n\r\n```\r\n    $qb = $this->getEntityManager()->createQueryBuilder();\r\n\r\n    $qb\r\n    ->select('thread')\r\n    ->from(Thread::class, 'thread');\r\n\r\n    return $qb->getQuery()->getResult();\r\n```\r\n\r\n#### Expected behavior\r\n\r\norderBy entry to be respected and order the collection by the stated field.\r\n","closed_by":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/11163/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/orm/issues/11163/timeline","performed_via_github_app":null,"state_reason":"completed"}