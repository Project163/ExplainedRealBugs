{"url":"https://api.github.com/repos/doctrine/orm/issues/5989","repository_url":"https://api.github.com/repos/doctrine/orm","labels_url":"https://api.github.com/repos/doctrine/orm/issues/5989/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/orm/issues/5989/comments","events_url":"https://api.github.com/repos/doctrine/orm/issues/5989/events","html_url":"https://github.com/doctrine/orm/issues/5989","id":172917389,"node_id":"MDU6SXNzdWUxNzI5MTczODk=","number":5989,"title":"SimpleObjectHydrator produces wrong values with inheritance table and simple array type ","user":{"login":"w3sami","id":3714721,"node_id":"MDQ6VXNlcjM3MTQ3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/3714721?v=4","gravatar_id":"","url":"https://api.github.com/users/w3sami","html_url":"https://github.com/w3sami","followers_url":"https://api.github.com/users/w3sami/followers","following_url":"https://api.github.com/users/w3sami/following{/other_user}","gists_url":"https://api.github.com/users/w3sami/gists{/gist_id}","starred_url":"https://api.github.com/users/w3sami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w3sami/subscriptions","organizations_url":"https://api.github.com/users/w3sami/orgs","repos_url":"https://api.github.com/users/w3sami/repos","events_url":"https://api.github.com/users/w3sami/events{/privacy}","received_events_url":"https://api.github.com/users/w3sami/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":296201252,"node_id":"MDU6TGFiZWwyOTYyMDEyNTI=","url":"https://api.github.com/repos/doctrine/orm/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/doctrine/orm/milestones/56","html_url":"https://github.com/doctrine/orm/milestone/56","labels_url":"https://api.github.com/repos/doctrine/orm/milestones/56/labels","id":1485912,"node_id":"MDk6TWlsZXN0b25lMTQ4NTkxMg==","number":56,"title":"2.5.5","description":"https://github.com/doctrine/doctrine2/releases/tag/v2.5.5","creator":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":18,"state":"closed","created_at":"2016-01-05T21:17:46Z","updated_at":"2016-09-10T19:19:27Z","due_on":null,"closed_at":"2016-09-10T19:01:11Z"},"comments":5,"created_at":"2016-08-24T10:27:43Z","updated_at":"2016-09-08T11:42:50Z","closed_at":"2016-09-08T11:39:39Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I am getting empty array instead of array with some values, since SimpleObjectHydrator converts the value with convertToPHPValue\n\nline 129 $value = $type->convertToPHPValue($value, $this->_platform);\n\nthis doesent play well with the null check below\n\nline 134:\n// Prevent overwrite in case of inherit classes using same property name (See AbstractHydrator)\n            if ( ! isset($data[$fieldName]) || $value !== null) {\n                $data[$fieldName] = $value;\n            }\n\nsince arrayType->convertToPHPValue  returns [] when null, resulting in a leak from the wrong left joined table.\n\nsolution is easy, dont use the converted value in the if, but instead a raw value.\n\neg line 125 + $rawValue = $value;\nand\n136: if ( ! isset($data[$fieldName]) || $rawValue !== null) {\n\nsorry I don't have time to write a pr with tests\n","closed_by":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/5989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/orm/issues/5989/timeline","performed_via_github_app":null,"state_reason":"completed"}