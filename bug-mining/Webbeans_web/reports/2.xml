<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:15:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OWB-363] Intermittent bug with ApplicationScope disposers not being called</title>
                <link>https://issues.apache.org/jira/browse/OWB-363</link>
                <project id="12310844" key="OWB">OpenWebBeans</project>
                    <description>&lt;p&gt;While testing an application have seen an issue where disposers for application scoped producer methods are not called.  Took a quick peek at the WebContextService, and I suspect the ThreadLocal may not be correct for the thread that is handling the application stop.&lt;/p&gt;

&lt;p&gt;It seems to me that we already have a 1:1 mapping of WebContextService (loaded based on the classloader by WebBeansFinder) to the application, so we could probably make the ApplicationContext field non-static and non-threadlocal.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12463134">OWB-363</key>
            <summary>Intermittent bug with ApplicationScope disposers not being called</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gerdogdu">Gurkan Erdogdu</assignee>
                                    <reporter username="bergmark">Joseph E Bergmark</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Apr 2010 18:27:42 +0000</created>
                <updated>Wed, 28 Apr 2010 18:30:31 +0000</updated>
                            <resolved>Wed, 28 Apr 2010 08:33:43 +0000</resolved>
                                    <version>M4</version>
                                    <fixVersion>1.0.0-alpha-1</fixVersion>
                                    <component>Context and Scopes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12861834" author="yingwang" created="Wed, 28 Apr 2010 15:48:55 +0000"  >&lt;p&gt;Gurkan, Joe, I took a look on the latest change. It could fix the applicationContext is not destroyed issue when shutting down. However, I feel it is still possible that wrong applicationContext gets destroyed in multiple applications env. such as:&lt;/p&gt;

&lt;p&gt;T1:  Thread 1 handles App1 and have threadLocal applicationContext(app1)&lt;br/&gt;
T2:  Thread 2 handles App2 and have threadLocal applicationContext(app2)&lt;br/&gt;
T3:  app2 shutdown by admin and thread 1 handles it, since it has applicationContext(app1), according to current logic in destroyApplicationContext, app1&apos;s applicationContext get destroyed.  (I didn&apos;t find applicationContext get reset after each request.)&lt;/p&gt;

&lt;p&gt;How about directly extract applicationContext from currentApplicationContexts(serveletContext) and do not use threadLocal one in destroyApplicationcontext () or make applicationContext a non-threadLocal, non-static variable like Joe said? &lt;/p&gt;
</comment>
                            <comment id="12861887" author="gerdogdu" created="Wed, 28 Apr 2010 18:30:31 +0000"  >&lt;p&gt;YING, you are right! I updated code to look saved ApplicationContext currentApplicationContexts before looking ThreadLocal. Also I reset thread local application context while destroying request.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>162740</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 30 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i086zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>45730</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>