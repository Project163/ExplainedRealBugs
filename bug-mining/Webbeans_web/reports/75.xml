<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:16:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OWB-1124] Lazy start on SessionContext NPE on no active RequestContext</title>
                <link>https://issues.apache.org/jira/browse/OWB-1124</link>
                <project id="12310844" key="OWB">OpenWebBeans</project>
                    <description>&lt;p&gt;I upgraded to TomEE 7-M1 and I have a problem with checking for active contexts. Now this behavior:&lt;/p&gt;


&lt;p&gt;        ServletRequestContext requestContext = getRequestContext(true);&lt;br/&gt;
        if (requestContext == null)&lt;/p&gt;
        {
            logger.log(Level.WARNING, &quot;Could NOT lazily initialize session context because NO active request context&quot;);
        }

&lt;p&gt;Only logs it and goes ahead and breaks on NPE on line 815 but before it simply never executed any code if requestContext was null. &lt;/p&gt;

&lt;p&gt;This is the code in my application that actually uses Deltaspike now for checking:&lt;/p&gt;

&lt;p&gt;	private boolean isActive(Class&amp;lt;? extends Annotation&amp;gt; scope) &lt;/p&gt;
{
		return ContextUtils.isContextActive(scope);
	}


&lt;p&gt;Full stacktrace&lt;/p&gt;

&lt;p&gt;            at org.apache.webbeans.web.context.WebContextsService.lazyStartSessionContext(WebContextsService.java:815)&lt;br/&gt;
            at org.apache.webbeans.web.context.WebContextsService.getSessionContext(WebContextsService.java:739)&lt;br/&gt;
            at org.apache.webbeans.web.context.WebContextsService.getCurrentContext(WebContextsService.java:277)&lt;br/&gt;
            at org.apache.webbeans.container.BeanManagerImpl.getContext(BeanManagerImpl.java:287)&lt;br/&gt;
            at org.apache.webbeans.container.InjectableBeanManager.getContext(InjectableBeanManager.java:129)&lt;br/&gt;
            at org.apache.deltaspike.core.util.ContextUtils.isContextActive(ContextUtils.java:60)&lt;br/&gt;
            at org.apache.deltaspike.core.util.ContextUtils.isContextActive(ContextUtils.java:46)&lt;br/&gt;
            at com.company.ContextLookup.isActive(ContextLookup.java:23)&lt;/p&gt;


&lt;p&gt;My actual use case is that I tag all my entities if I can find out who changed it but in this case it was a background thread.&lt;/p&gt;</description>
                <environment>TomEE 7.0M1</environment>
        <key id="12946189">OWB-1124</key>
            <summary>Lazy start on SessionContext NPE on no active RequestContext</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="romain.manni-bucau">Romain Manni-Bucau</assignee>
                                    <reporter username="karlkilden">Karl Kild&#233;n</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Mar 2016 16:12:31 +0000</created>
                <updated>Sun, 4 Sep 2016 08:32:38 +0000</updated>
                            <resolved>Thu, 11 Aug 2016 07:13:23 +0000</resolved>
                                                    <fixVersion>1.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15175856" author="karlkilden" created="Wed, 2 Mar 2016 16:15:37 +0000"  >&lt;p&gt;I will add a patch to this jira 2016-03-03&lt;/p&gt;</comment>
                            <comment id="15175858" author="karlkilden" created="Wed, 2 Mar 2016 16:16:30 +0000"  >&lt;p&gt;Workaround:&lt;/p&gt;

&lt;p&gt;For me it is just a matter of try catching the call to ContextUtils and treat the error as false&lt;/p&gt;</comment>
                            <comment id="15177693" author="karlkilden" created="Thu, 3 Mar 2016 11:21:39 +0000"  >&lt;p&gt;Hi Romain, I actually committed on trunk because the change I decided on was minimal.&lt;/p&gt;

&lt;p&gt;It made the most sense to introduce a return; because that was the flow tactic used in that class in other places.&lt;/p&gt;

&lt;p&gt;I intended to write a test class but i was unable to set it up correctly with no mocking frameworks on the path and with my method in question nested a bit down in the call chain so no test...&lt;/p&gt;</comment>
                            <comment id="15177697" author="karlkilden" created="Thu, 3 Mar 2016 11:24:10 +0000"  >&lt;p&gt;Diff&lt;/p&gt;</comment>
                            <comment id="15177754" author="romain.manni-bucau" created="Thu, 3 Mar 2016 12:34:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlkilden&quot; class=&quot;user-hover&quot; rel=&quot;karlkilden&quot;&gt;karlkilden&lt;/a&gt; pushed a test. Did you test OWB snapshot with tomee cdi tcks? (mvn clean install -pl tck/cdi-embedded &amp;amp;&amp;amp; cd  tck/cdi-embedded &amp;amp;&amp;amp; mvn clean install from tomee trunk once openwebbeans version property upgraded to the snapshot in root pom).&lt;/p&gt;</comment>
                            <comment id="15416665" author="struberg" created="Thu, 11 Aug 2016 07:03:16 +0000"  >&lt;p&gt;Romain, can this be closed?&lt;/p&gt;</comment>
                            <comment id="15416672" author="romain.manni-bucau" created="Thu, 11 Aug 2016 07:08:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=struberg&quot; class=&quot;user-hover&quot; rel=&quot;struberg&quot;&gt;struberg&lt;/a&gt; think so yes&lt;/p&gt;</comment>
                            <comment id="15462539" author="struberg" created="Sun, 4 Sep 2016 08:32:38 +0000"  >&lt;p&gt;shipped with &lt;a href=&quot;https://issues.apache.org/jira/browse/OWB-1&quot; title=&quot;move source code to incubator svn repo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OWB-1&quot;&gt;&lt;del&gt;OWB-1&lt;/del&gt;&lt;/a&gt;.7.0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12791153" name="changes.diff" size="509" author="karlkilden" created="Thu, 3 Mar 2016 11:24:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u1cn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>