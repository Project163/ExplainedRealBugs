<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:15:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OWB-444] Using Static Loggers in Shared ClassLoader</title>
                <link>https://issues.apache.org/jira/browse/OWB-444</link>
                <project id="12310844" key="OWB">OpenWebBeans</project>
                    <description>&lt;p&gt;Errors of using static loggers in shared classloaders environments&lt;/p&gt;</description>
                <environment></environment>
        <key id="12472096">OWB-444</key>
            <summary>Using Static Loggers in Shared ClassLoader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gerdogdu">Gurkan Erdogdu</assignee>
                                    <reporter username="gerdogdu">Gurkan Erdogdu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Aug 2010 13:26:37 +0000</created>
                <updated>Sun, 15 May 2011 16:35:02 +0000</updated>
                            <resolved>Mon, 21 Mar 2011 19:22:06 +0000</resolved>
                                    <version>1.0.0-alpha-1</version>
                                    <fixVersion>1.0.0</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12900690" author="gerdogdu" created="Fri, 20 Aug 2010 13:30:25 +0000"  >&lt;p&gt;This also means that chaning all static methods to normal if they have been using logging heavily. &lt;/p&gt;

&lt;p&gt;For example, one candiate is WebBeansDecoratorConfig class.&lt;/p&gt;</comment>
                            <comment id="12901004" author="struberg" created="Sat, 21 Aug 2010 10:50:37 +0000"  >&lt;p&gt;I think I already commented on removing most of our static util methods because they are also bad from a performance and configuration perspective. I&apos;d suggest to remove &apos;static&apos; and apply them as members to BeanManager + hold a back reference to the BM.&lt;/p&gt;

&lt;p&gt;All those utils then have a ct like&lt;/p&gt;

&lt;p&gt;private BeanManagerImpl bm;&lt;br/&gt;
public AnnotationUtil(BeanManagerImpl bm)&lt;br/&gt;
{&lt;br/&gt;
  this.bm = bm;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;so they can easily access other utils by calling bm.getClassUtil()....&lt;/p&gt;

&lt;p&gt;All our Util can then also be modeled as SPI and thus we gain further portability.&lt;br/&gt;
I can e.g. imagine a ClassUtil which does all the methods via doPrivileged in SecureClassUtil vs a simple implementation without utilising the SecurityManager in SimpleClassUtil.&lt;/p&gt;</comment>
                            <comment id="12901030" author="gerdogdu" created="Sat, 21 Aug 2010 14:27:51 +0000"  >&lt;p&gt;I have committed some changes to loggers, (those are not related with Utility or static classes). Those chages are needed because static loggers do not work in shared classloader runtime environments.&lt;/p&gt;

&lt;p&gt;As Mark has stated, we have to also change our Utility classes for removing static methods. This is an another side of the story&lt;/p&gt;</comment>
                            <comment id="12901031" author="gerdogdu" created="Sat, 21 Aug 2010 14:34:45 +0000"  >&lt;p&gt;I am thinking to change important utility classes to singletons that like others. This is the simplest and correct way without getting into trouble&lt;/p&gt;</comment>
                            <comment id="12901032" author="struberg" created="Sat, 21 Aug 2010 14:46:42 +0000"  >&lt;p&gt;Thought about this already, but I think this would have a huge drawback on our performance. Think about how often we would need to call our WebBeansFinder! If you look at our application with yourkit profiler or a similar tool, then you&apos;d see that we already use WebBeansFinder way too often imo. Otoh, our BeanManager has exactly the right &apos;slice&apos; (1 per WebApp) for creating and keeping most of our utilities.&lt;/p&gt;</comment>
                            <comment id="12901085" author="gerdogdu" created="Sat, 21 Aug 2010 20:05:59 +0000"  >&lt;p&gt;What is the difference to call our singletons from WebBeansFinder over BeanManager ? I wonder how much performance difference between them? Just for curiosity....&lt;/p&gt;</comment>
                            <comment id="12901089" author="struberg" created="Sat, 21 Aug 2010 20:24:23 +0000"  >&lt;p&gt;Maybe my proposal was not yet clear enough: I like to keep those utils as members in BeanManagerImpl (with back-references), so for each WebApp we have exactly 1 BeanManagerImpl. And this has exactly 1 instance of each util. In this case we do not need any singletons anymore. Because our BeanManagerImpl has exactly the one needed (and correctly configured) util class at hand. &lt;/p&gt;

&lt;p&gt;To give you a few numbers: on a large JSF page I originally had more than 1 million WebBeansFinder invocations! Most of them come from our utils which most times need to resolve the BeanManagerImpl... I then at least removed redundant BeanManagerImp.getManager() calls and also removed the doPrivileged and now we are down to ~400.000 invocations. At the end of the day this still costs up to 20% of our performance, so I would not underestimate the effect!&lt;/p&gt;</comment>
                            <comment id="13009318" author="struberg" created="Mon, 21 Mar 2011 19:22:06 +0000"  >&lt;p&gt;actually already fixed in 1.0.0&lt;/p&gt;</comment>
                            <comment id="13033737" author="struberg" created="Sun, 15 May 2011 16:35:02 +0000"  >&lt;p&gt;closed, shipped in openwebbeans-1.1.0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>162817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i087gn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>45808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>