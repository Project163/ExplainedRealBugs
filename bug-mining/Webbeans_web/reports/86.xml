<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:16:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OWB-1175] Duplicate registration of ServletContextBean</title>
                <link>https://issues.apache.org/jira/browse/OWB-1175</link>
                <project id="12310844" key="OWB">OpenWebBeans</project>
                    <description>&lt;p&gt;After updating to 1.7.2 (from 1.6.3) my application on Tomcat 8 stopped working.&lt;/p&gt;

&lt;p&gt;It configures both the WebBeansConfigurationListener and WebBeansConfigurationFilter in web.xml&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;listener&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;listener-class&amp;gt;&lt;/span&gt;org.apache.webbeans.servlet.WebBeansConfigurationListener&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/listener-class&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/listener&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;filter&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;filter-name&amp;gt;&lt;/span&gt;WebBeansConfigurationFilter&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/filter-name&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;filter-class&amp;gt;&lt;/span&gt;org.apache.webbeans.servlet.WebBeansConfigurationFilter&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/filter-class&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/filter&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;filter-mapping&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;filter-name&amp;gt;&lt;/span&gt;WebBeansConfigurationFilter&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/filter-name&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;url-pattern&amp;gt;&lt;/span&gt;/*&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/url-pattern&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dispatcher&amp;gt;&lt;/span&gt;FORWARD&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dispatcher&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/filter-mapping&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I need this setup to handle requests being forwarded by a different webapp (with cross-context).&lt;/p&gt;

&lt;p&gt;When starting, Open-Webbeans fails now with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SCHWERWIEGEND: Exception starting filter WebBeansConfigurationFilter
org.apache.webbeans.exception.DuplicateDefinitionException: PassivationCapable bean id is not unique: SERVLET_CONTEXT#interface javax.servlet.ServletContext#@javax.enterprise.inject.Default(),@javax.enterprise.inject.Any(), bean:ServletContext, WebBeansType:SERVLET_CONTEXT, Name:null, API Types:[java.lang.Object,javax.servlet.ServletContext], Qualifiers:[javax.enterprise.inject.Default,javax.enterprise.inject.Any]
	at org.apache.webbeans.container.BeanManagerImpl.addPassivationInfo(BeanManagerImpl.java:411)
	at org.apache.webbeans.container.BeanManagerImpl.addInternalBean(BeanManagerImpl.java:365)
	at org.apache.webbeans.web.lifecycle.WebContainerLifecycle.startApplication(WebContainerLifecycle.java:90)
	at org.apache.webbeans.servlet.WebBeansConfigurationFilter.init(WebBeansConfigurationFilter.java:90)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is probably due to WebContainerLifecycle#startApplication, which does not first check if it is already started before it adds the ServletContextBean (again) in contrast to AbstractLifecycle#startApplication (bootstrapApplication).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13060671">OWB-1175</key>
            <summary>Duplicate registration of ServletContextBean</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="struberg">Mark Struberg</assignee>
                                    <reporter username="bmueller">Benjamin Mueller</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Mar 2017 13:11:57 +0000</created>
                <updated>Wed, 19 Apr 2017 13:48:01 +0000</updated>
                            <resolved>Sat, 15 Apr 2017 09:38:05 +0000</resolved>
                                    <version>1.7.2</version>
                                    <fixVersion>1.7.3</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15950942" author="struberg" created="Fri, 31 Mar 2017 14:02:30 +0000"  >&lt;p&gt;Hi Benjamin!&lt;/p&gt;

&lt;p&gt;You should not need the Filter!&lt;br/&gt;
The Filter + SessionListener was for pre servlet-2.5 environments. That was about 2005. &lt;br/&gt;
We should probably remove those two classes and just keep the WebBeansConfigurationListener to make it more clear for users&lt;/p&gt;</comment>
                            <comment id="15951597" author="bergmark" created="Fri, 31 Mar 2017 20:31:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bmueller&quot; class=&quot;user-hover&quot; rel=&quot;bmueller&quot;&gt;bmueller&lt;/a&gt;: It sounds like you may be using the filter because the WebBeansConfigurationListener&apos;s requestInitialized() method isn&apos;t getting called for your cross-context forwards?&lt;/p&gt;</comment>
                            <comment id="15951616" author="bmueller" created="Fri, 31 Mar 2017 20:48:10 +0000"  >&lt;p&gt;Hi, yes, that&apos;s exactly why I added the filter.&lt;/p&gt;</comment>
                            <comment id="15951642" author="struberg" created="Fri, 31 Mar 2017 21:02:01 +0000"  >&lt;p&gt;I&apos;ll try to reproduce it. If you have a public sample then this would of course help.&lt;/p&gt;</comment>
                            <comment id="15952331" author="bmueller" created="Sat, 1 Apr 2017 18:10:03 +0000"  >&lt;p&gt;Here&apos;s a minimalistic sample for reproducing the issue. Just drop the built war file into Tomcat8/webapps and it will result in the issue.&lt;br/&gt;
Thanks for taking a look at it.&lt;/p&gt;</comment>
                            <comment id="15964926" author="struberg" created="Tue, 11 Apr 2017 20:34:52 +0000"  >&lt;p&gt;Looks like it&apos;s even more complicated. &lt;br/&gt;
As far as I can tell after debugging through it seems that neither the Context Listener nor the Servlet Filter gets invoked for a forward on the target application &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;That means that adding that Filter for having cross-context forwards won&apos;t help much I fear.&lt;br/&gt;
I&apos;ll investigate if we have another portable solution.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;edit&lt;/b&gt; had the dispatcher in the wrong web.xml. Seems to work now&lt;/p&gt;</comment>
                            <comment id="15965053" author="struberg" created="Tue, 11 Apr 2017 22:32:11 +0000"  >&lt;p&gt;This seems to work now. Still need to automate the IT test but works already if I trigger it manually.&lt;/p&gt;

&lt;p&gt;The config looks the following now:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &amp;lt;listener&amp;gt;
        &amp;lt;listener-&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;org.apache.webbeans.servlet.WebBeansConfigurationListener&amp;lt;/listener-&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;
    &amp;lt;/listener&amp;gt;
    &amp;lt;filter&amp;gt;
        &amp;lt;filter-name&amp;gt;owbfilter&amp;lt;/filter-name&amp;gt;
        &amp;lt;filter-&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;org.apache.webbeans.servlet.WebBeansConfigurationFilter&amp;lt;/filter-&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;
        &amp;lt;init-param&amp;gt;
            &amp;lt;param-name&amp;gt;startOwb&amp;lt;/param-name&amp;gt;
            &amp;lt;param-value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/param-value&amp;gt;
        &amp;lt;/init-param&amp;gt;
    &amp;lt;/filter&amp;gt;
    &amp;lt;filter-mapping&amp;gt;
        &amp;lt;filter-name&amp;gt;owbfilter&amp;lt;/filter-name&amp;gt;
        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
        &amp;lt;dispatcher&amp;gt;FORWARD&amp;lt;/dispatcher&amp;gt;
        &amp;lt;dispatcher&amp;gt;INCLUDE&amp;lt;/dispatcher&amp;gt;
    &amp;lt;/filter-mapping&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15965728" author="struberg" created="Wed, 12 Apr 2017 12:22:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bmueller&quot; class=&quot;user-hover&quot; rel=&quot;bmueller&quot;&gt;bmueller&lt;/a&gt; would this solution be enough for you?&lt;/p&gt;

&lt;p&gt;It is of course not perfect as it requires manually setting the startOwb initparam to false (to make the Filter NOT try to start OWB, default is true). But I think cross-context forwards are really an exceptional usecase as it is by default forbidden on almost every server due to security constraints.&lt;/p&gt;</comment>
                            <comment id="15966259" author="bmueller" created="Wed, 12 Apr 2017 17:39:30 +0000"  >&lt;p&gt;This solution would be perfectly fine with me - thanks!&lt;/p&gt;</comment>
                            <comment id="15966269" author="struberg" created="Wed, 12 Apr 2017 17:44:40 +0000"  >&lt;p&gt;Can you please check it out locally &lt;a href=&quot;http://openwebbeans.apache.org/source.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openwebbeans.apache.org/source.html&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;Simply build owb with mvn clean install and test that version within your app?&lt;/p&gt;</comment>
                            <comment id="15966306" author="bmueller" created="Wed, 12 Apr 2017 18:06:50 +0000"  >&lt;p&gt;Sure - I will give my feedback in the course of next week (long Easter weekend coming). &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12861604" name="test.zip" size="1807" author="bmueller" created="Sat, 1 Apr 2017 18:10:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 31 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3d1z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>