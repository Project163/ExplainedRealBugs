[{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/768162449","html_url":"https://github.com/jmoiron/sqlx/issues/690#issuecomment-768162449","issue_url":"https://api.github.com/repos/jmoiron/sqlx/issues/690","id":768162449,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODE2MjQ0OQ==","user":{"login":"ekrem95","id":16150227,"node_id":"MDQ6VXNlcjE2MTUwMjI3","avatar_url":"https://avatars.githubusercontent.com/u/16150227?v=4","gravatar_id":"","url":"https://api.github.com/users/ekrem95","html_url":"https://github.com/ekrem95","followers_url":"https://api.github.com/users/ekrem95/followers","following_url":"https://api.github.com/users/ekrem95/following{/other_user}","gists_url":"https://api.github.com/users/ekrem95/gists{/gist_id}","starred_url":"https://api.github.com/users/ekrem95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekrem95/subscriptions","organizations_url":"https://api.github.com/users/ekrem95/orgs","repos_url":"https://api.github.com/users/ekrem95/repos","events_url":"https://api.github.com/users/ekrem95/events{/privacy}","received_events_url":"https://api.github.com/users/ekrem95/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T09:41:17Z","updated_at":"2021-01-27T09:41:17Z","body":"Hello,\r\n\r\nI have experienced a similar issue where if a query string ends with a white space or a new line the result of this code is:\r\n\r\n```\r\n\tpersonStructs := []*Person{\r\n\t\t{FirstName: \"Ardie\", LastName: \"Savea\", Email: \"asavea@ab.co.nz\"},\r\n\t\t{FirstName: \"Sonny Bill\", LastName: \"Williams\", Email: \"sbw@ab.co.nz\"},\r\n\t\t{FirstName: \"Ngani\", LastName: \"Laumape\", Email: \"nlaumape@ab.co.nz\"},\r\n\t}\r\n\r\n\t_, err = tx.NamedExec(`INSERT INTO person (first_name, last_name, email)\r\n\t\tVALUES (:first_name, :last_name, :email) `, personStructs)\r\n\r\n\tfmt.Println(err)\r\n```\r\n\r\n`pq: got 9 parameters but the statement requires 3`\r\n\r\nVersion: 1.3.0, 1.3.1\r\n\r\nKind Regards ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/768162449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ekrem95","id":16150227,"node_id":"MDQ6VXNlcjE2MTUwMjI3","avatar_url":"https://avatars.githubusercontent.com/u/16150227?v=4","gravatar_id":"","url":"https://api.github.com/users/ekrem95","html_url":"https://github.com/ekrem95","followers_url":"https://api.github.com/users/ekrem95/followers","following_url":"https://api.github.com/users/ekrem95/following{/other_user}","gists_url":"https://api.github.com/users/ekrem95/gists{/gist_id}","starred_url":"https://api.github.com/users/ekrem95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekrem95/subscriptions","organizations_url":"https://api.github.com/users/ekrem95/orgs","repos_url":"https://api.github.com/users/ekrem95/repos","events_url":"https://api.github.com/users/ekrem95/events{/privacy}","received_events_url":"https://api.github.com/users/ekrem95/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4263253528,"node_id":"MDExOkNsb3NlZEV2ZW50NDI2MzI1MzUyOA==","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4263253528","actor":{"login":"jmoiron","id":218132,"node_id":"MDQ6VXNlcjIxODEzMg==","avatar_url":"https://avatars.githubusercontent.com/u/218132?v=4","gravatar_id":"","url":"https://api.github.com/users/jmoiron","html_url":"https://github.com/jmoiron","followers_url":"https://api.github.com/users/jmoiron/followers","following_url":"https://api.github.com/users/jmoiron/following{/other_user}","gists_url":"https://api.github.com/users/jmoiron/gists{/gist_id}","starred_url":"https://api.github.com/users/jmoiron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmoiron/subscriptions","organizations_url":"https://api.github.com/users/jmoiron/orgs","repos_url":"https://api.github.com/users/jmoiron/repos","events_url":"https://api.github.com/users/jmoiron/events{/privacy}","received_events_url":"https://api.github.com/users/jmoiron/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"a1d5e64734233358bc4e0a54beddc18509071a95","commit_url":"https://api.github.com/repos/jmoiron/sqlx/commits/a1d5e64734233358bc4e0a54beddc18509071a95","created_at":"2021-01-28T21:15:56Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/769401917","html_url":"https://github.com/jmoiron/sqlx/issues/690#issuecomment-769401917","issue_url":"https://api.github.com/repos/jmoiron/sqlx/issues/690","id":769401917,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTQwMTkxNw==","user":{"login":"jmoiron","id":218132,"node_id":"MDQ6VXNlcjIxODEzMg==","avatar_url":"https://avatars.githubusercontent.com/u/218132?v=4","gravatar_id":"","url":"https://api.github.com/users/jmoiron","html_url":"https://github.com/jmoiron","followers_url":"https://api.github.com/users/jmoiron/followers","following_url":"https://api.github.com/users/jmoiron/following{/other_user}","gists_url":"https://api.github.com/users/jmoiron/gists{/gist_id}","starred_url":"https://api.github.com/users/jmoiron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmoiron/subscriptions","organizations_url":"https://api.github.com/users/jmoiron/orgs","repos_url":"https://api.github.com/users/jmoiron/repos","events_url":"https://api.github.com/users/jmoiron/events{/privacy}","received_events_url":"https://api.github.com/users/jmoiron/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T21:16:36Z","updated_at":"2021-01-28T21:16:36Z","body":"If the issue is as @ekrem95 reports, I think this is fixed in the latest commit.  Can you verify @drsasa, and if not, give me your specific use case?","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/769401917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jmoiron","id":218132,"node_id":"MDQ6VXNlcjIxODEzMg==","avatar_url":"https://avatars.githubusercontent.com/u/218132?v=4","gravatar_id":"","url":"https://api.github.com/users/jmoiron","html_url":"https://github.com/jmoiron","followers_url":"https://api.github.com/users/jmoiron/followers","following_url":"https://api.github.com/users/jmoiron/following{/other_user}","gists_url":"https://api.github.com/users/jmoiron/gists{/gist_id}","starred_url":"https://api.github.com/users/jmoiron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmoiron/subscriptions","organizations_url":"https://api.github.com/users/jmoiron/orgs","repos_url":"https://api.github.com/users/jmoiron/repos","events_url":"https://api.github.com/users/jmoiron/events{/privacy}","received_events_url":"https://api.github.com/users/jmoiron/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4263256433,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDI2MzI1NjQzMw==","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4263256433","actor":{"login":"ekrem95","id":16150227,"node_id":"MDQ6VXNlcjE2MTUwMjI3","avatar_url":"https://avatars.githubusercontent.com/u/16150227?v=4","gravatar_id":"","url":"https://api.github.com/users/ekrem95","html_url":"https://github.com/ekrem95","followers_url":"https://api.github.com/users/ekrem95/followers","following_url":"https://api.github.com/users/ekrem95/following{/other_user}","gists_url":"https://api.github.com/users/ekrem95/gists{/gist_id}","starred_url":"https://api.github.com/users/ekrem95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekrem95/subscriptions","organizations_url":"https://api.github.com/users/ekrem95/orgs","repos_url":"https://api.github.com/users/ekrem95/repos","events_url":"https://api.github.com/users/ekrem95/events{/privacy}","received_events_url":"https://api.github.com/users/ekrem95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-28T21:16:36Z","performed_via_github_app":null},{"id":4263256437,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyNjMyNTY0Mzc=","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4263256437","actor":{"login":"ekrem95","id":16150227,"node_id":"MDQ6VXNlcjE2MTUwMjI3","avatar_url":"https://avatars.githubusercontent.com/u/16150227?v=4","gravatar_id":"","url":"https://api.github.com/users/ekrem95","html_url":"https://github.com/ekrem95","followers_url":"https://api.github.com/users/ekrem95/followers","following_url":"https://api.github.com/users/ekrem95/following{/other_user}","gists_url":"https://api.github.com/users/ekrem95/gists{/gist_id}","starred_url":"https://api.github.com/users/ekrem95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekrem95/subscriptions","organizations_url":"https://api.github.com/users/ekrem95/orgs","repos_url":"https://api.github.com/users/ekrem95/repos","events_url":"https://api.github.com/users/ekrem95/events{/privacy}","received_events_url":"https://api.github.com/users/ekrem95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-28T21:16:37Z","performed_via_github_app":null},{"id":4263256443,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDI2MzI1NjQ0Mw==","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4263256443","actor":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-28T21:16:37Z","performed_via_github_app":null},{"id":4263256447,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyNjMyNTY0NDc=","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4263256447","actor":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-28T21:16:37Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/769505766","html_url":"https://github.com/jmoiron/sqlx/issues/690#issuecomment-769505766","issue_url":"https://api.github.com/repos/jmoiron/sqlx/issues/690","id":769505766,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTUwNTc2Ng==","user":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-29T01:15:27Z","updated_at":"2021-02-01T17:17:40Z","body":"@jmoiron It was not space problem, but found what is.\r\n\r\nif you have insert string like this:\r\n\"INSERT INTO xxx (aaa, bbb) VALUES (:ccc, :ddd)\"\r\nit will work.\r\nBut if you have like this:\r\n\"INSERT INTO xxx (aaa, bbb) VALUES (:ccc, :ddd);\" <- here we have ; at end\r\nwill not. For now I changed and removed ; at end on all queries.\r\n\r\nBut since it is so common to end SQL queries with ; I think this is bug.\r\n\r\nKind regards,\r\nAlexandar\r\n\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/769505766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4274937887,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDI3NDkzNzg4Nw==","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4274937887","actor":{"login":"jmoiron","id":218132,"node_id":"MDQ6VXNlcjIxODEzMg==","avatar_url":"https://avatars.githubusercontent.com/u/218132?v=4","gravatar_id":"","url":"https://api.github.com/users/jmoiron","html_url":"https://github.com/jmoiron","followers_url":"https://api.github.com/users/jmoiron/followers","following_url":"https://api.github.com/users/jmoiron/following{/other_user}","gists_url":"https://api.github.com/users/jmoiron/gists{/gist_id}","starred_url":"https://api.github.com/users/jmoiron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmoiron/subscriptions","organizations_url":"https://api.github.com/users/jmoiron/orgs","repos_url":"https://api.github.com/users/jmoiron/repos","events_url":"https://api.github.com/users/jmoiron/events{/privacy}","received_events_url":"https://api.github.com/users/jmoiron/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-02-01T17:17:41Z","performed_via_github_app":null},{"id":4274937891,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyNzQ5Mzc4OTE=","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4274937891","actor":{"login":"jmoiron","id":218132,"node_id":"MDQ6VXNlcjIxODEzMg==","avatar_url":"https://avatars.githubusercontent.com/u/218132?v=4","gravatar_id":"","url":"https://api.github.com/users/jmoiron","html_url":"https://github.com/jmoiron","followers_url":"https://api.github.com/users/jmoiron/followers","following_url":"https://api.github.com/users/jmoiron/following{/other_user}","gists_url":"https://api.github.com/users/jmoiron/gists{/gist_id}","starred_url":"https://api.github.com/users/jmoiron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmoiron/subscriptions","organizations_url":"https://api.github.com/users/jmoiron/orgs","repos_url":"https://api.github.com/users/jmoiron/repos","events_url":"https://api.github.com/users/jmoiron/events{/privacy}","received_events_url":"https://api.github.com/users/jmoiron/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-02-01T17:17:41Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/779447267","html_url":"https://github.com/jmoiron/sqlx/issues/690#issuecomment-779447267","issue_url":"https://api.github.com/repos/jmoiron/sqlx/issues/690","id":779447267,"node_id":"MDEyOklzc3VlQ29tbWVudDc3OTQ0NzI2Nw==","user":{"login":"stefpap","id":22637722,"node_id":"MDQ6VXNlcjIyNjM3NzIy","avatar_url":"https://avatars.githubusercontent.com/u/22637722?v=4","gravatar_id":"","url":"https://api.github.com/users/stefpap","html_url":"https://github.com/stefpap","followers_url":"https://api.github.com/users/stefpap/followers","following_url":"https://api.github.com/users/stefpap/following{/other_user}","gists_url":"https://api.github.com/users/stefpap/gists{/gist_id}","starred_url":"https://api.github.com/users/stefpap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stefpap/subscriptions","organizations_url":"https://api.github.com/users/stefpap/orgs","repos_url":"https://api.github.com/users/stefpap/repos","events_url":"https://api.github.com/users/stefpap/events{/privacy}","received_events_url":"https://api.github.com/users/stefpap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-15T21:06:13Z","updated_at":"2021-02-15T21:06:13Z","body":"I second what @drsasa said, removing the `;` from the end of my query fixed the issue\r\nNice find, thanks :)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/779447267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stefpap","id":22637722,"node_id":"MDQ6VXNlcjIyNjM3NzIy","avatar_url":"https://avatars.githubusercontent.com/u/22637722?v=4","gravatar_id":"","url":"https://api.github.com/users/stefpap","html_url":"https://github.com/stefpap","followers_url":"https://api.github.com/users/stefpap/followers","following_url":"https://api.github.com/users/stefpap/following{/other_user}","gists_url":"https://api.github.com/users/stefpap/gists{/gist_id}","starred_url":"https://api.github.com/users/stefpap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stefpap/subscriptions","organizations_url":"https://api.github.com/users/stefpap/orgs","repos_url":"https://api.github.com/users/stefpap/repos","events_url":"https://api.github.com/users/stefpap/events{/privacy}","received_events_url":"https://api.github.com/users/stefpap/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4333422068,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDMzMzQyMjA2OA==","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4333422068","actor":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-02-15T21:06:13Z","performed_via_github_app":null},{"id":4333422070,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzMzM0MjIwNzA=","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4333422070","actor":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-02-15T21:06:13Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/787797089","html_url":"https://github.com/jmoiron/sqlx/issues/690#issuecomment-787797089","issue_url":"https://api.github.com/repos/jmoiron/sqlx/issues/690","id":787797089,"node_id":"MDEyOklzc3VlQ29tbWVudDc4Nzc5NzA4OQ==","user":{"login":"aarengee","id":10773737,"node_id":"MDQ6VXNlcjEwNzczNzM3","avatar_url":"https://avatars.githubusercontent.com/u/10773737?v=4","gravatar_id":"","url":"https://api.github.com/users/aarengee","html_url":"https://github.com/aarengee","followers_url":"https://api.github.com/users/aarengee/followers","following_url":"https://api.github.com/users/aarengee/following{/other_user}","gists_url":"https://api.github.com/users/aarengee/gists{/gist_id}","starred_url":"https://api.github.com/users/aarengee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aarengee/subscriptions","organizations_url":"https://api.github.com/users/aarengee/orgs","repos_url":"https://api.github.com/users/aarengee/repos","events_url":"https://api.github.com/users/aarengee/events{/privacy}","received_events_url":"https://api.github.com/users/aarengee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-01T09:22:16Z","updated_at":"2021-03-01T11:17:32Z","body":"@jmoiron @hmgle \r\nFacing a similar issue . \r\nRemoving `;` at the end might solve it but is not reasonable as we might need to do more after batch insert like a batch upsert say using `ON CONFLICT`\r\n\r\nSee comment here. \r\nhttps://github.com/jmoiron/sqlx/pull/667#issuecomment-787731678\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/787797089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aarengee","id":10773737,"node_id":"MDQ6VXNlcjEwNzczNzM3","avatar_url":"https://avatars.githubusercontent.com/u/10773737?v=4","gravatar_id":"","url":"https://api.github.com/users/aarengee","html_url":"https://github.com/aarengee","followers_url":"https://api.github.com/users/aarengee/followers","following_url":"https://api.github.com/users/aarengee/following{/other_user}","gists_url":"https://api.github.com/users/aarengee/gists{/gist_id}","starred_url":"https://api.github.com/users/aarengee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aarengee/subscriptions","organizations_url":"https://api.github.com/users/aarengee/orgs","repos_url":"https://api.github.com/users/aarengee/repos","events_url":"https://api.github.com/users/aarengee/events{/privacy}","received_events_url":"https://api.github.com/users/aarengee/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4388933032,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDM4ODkzMzAzMg==","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4388933032","actor":{"login":"jmoiron","id":218132,"node_id":"MDQ6VXNlcjIxODEzMg==","avatar_url":"https://avatars.githubusercontent.com/u/218132?v=4","gravatar_id":"","url":"https://api.github.com/users/jmoiron","html_url":"https://github.com/jmoiron","followers_url":"https://api.github.com/users/jmoiron/followers","following_url":"https://api.github.com/users/jmoiron/following{/other_user}","gists_url":"https://api.github.com/users/jmoiron/gists{/gist_id}","starred_url":"https://api.github.com/users/jmoiron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmoiron/subscriptions","organizations_url":"https://api.github.com/users/jmoiron/orgs","repos_url":"https://api.github.com/users/jmoiron/repos","events_url":"https://api.github.com/users/jmoiron/events{/privacy}","received_events_url":"https://api.github.com/users/jmoiron/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-01T11:17:32Z","performed_via_github_app":null},{"id":4388933039,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzODg5MzMwMzk=","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4388933039","actor":{"login":"jmoiron","id":218132,"node_id":"MDQ6VXNlcjIxODEzMg==","avatar_url":"https://avatars.githubusercontent.com/u/218132?v=4","gravatar_id":"","url":"https://api.github.com/users/jmoiron","html_url":"https://github.com/jmoiron","followers_url":"https://api.github.com/users/jmoiron/followers","following_url":"https://api.github.com/users/jmoiron/following{/other_user}","gists_url":"https://api.github.com/users/jmoiron/gists{/gist_id}","starred_url":"https://api.github.com/users/jmoiron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmoiron/subscriptions","organizations_url":"https://api.github.com/users/jmoiron/orgs","repos_url":"https://api.github.com/users/jmoiron/repos","events_url":"https://api.github.com/users/jmoiron/events{/privacy}","received_events_url":"https://api.github.com/users/jmoiron/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-01T11:17:33Z","performed_via_github_app":null},{"id":4388933042,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDM4ODkzMzA0Mg==","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4388933042","actor":{"login":"hmgle","id":1779916,"node_id":"MDQ6VXNlcjE3Nzk5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/1779916?v=4","gravatar_id":"","url":"https://api.github.com/users/hmgle","html_url":"https://github.com/hmgle","followers_url":"https://api.github.com/users/hmgle/followers","following_url":"https://api.github.com/users/hmgle/following{/other_user}","gists_url":"https://api.github.com/users/hmgle/gists{/gist_id}","starred_url":"https://api.github.com/users/hmgle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmgle/subscriptions","organizations_url":"https://api.github.com/users/hmgle/orgs","repos_url":"https://api.github.com/users/hmgle/repos","events_url":"https://api.github.com/users/hmgle/events{/privacy}","received_events_url":"https://api.github.com/users/hmgle/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-01T11:17:33Z","performed_via_github_app":null},{"id":4388933045,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzODg5MzMwNDU=","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4388933045","actor":{"login":"hmgle","id":1779916,"node_id":"MDQ6VXNlcjE3Nzk5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/1779916?v=4","gravatar_id":"","url":"https://api.github.com/users/hmgle","html_url":"https://github.com/hmgle","followers_url":"https://api.github.com/users/hmgle/followers","following_url":"https://api.github.com/users/hmgle/following{/other_user}","gists_url":"https://api.github.com/users/hmgle/gists{/gist_id}","starred_url":"https://api.github.com/users/hmgle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmgle/subscriptions","organizations_url":"https://api.github.com/users/hmgle/orgs","repos_url":"https://api.github.com/users/hmgle/repos","events_url":"https://api.github.com/users/hmgle/events{/privacy}","received_events_url":"https://api.github.com/users/hmgle/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-01T11:17:33Z","performed_via_github_app":null},{"actor":{"login":"powerman","id":1354301,"node_id":"MDQ6VXNlcjEzNTQzMDE=","avatar_url":"https://avatars.githubusercontent.com/u/1354301?v=4","gravatar_id":"","url":"https://api.github.com/users/powerman","html_url":"https://github.com/powerman","followers_url":"https://api.github.com/users/powerman/followers","following_url":"https://api.github.com/users/powerman/following{/other_user}","gists_url":"https://api.github.com/users/powerman/gists{/gist_id}","starred_url":"https://api.github.com/users/powerman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/powerman/subscriptions","organizations_url":"https://api.github.com/users/powerman/orgs","repos_url":"https://api.github.com/users/powerman/repos","events_url":"https://api.github.com/users/powerman/events{/privacy}","received_events_url":"https://api.github.com/users/powerman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T13:38:29Z","updated_at":"2021-03-30T13:38:29Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/694","repository_url":"https://api.github.com/repos/jmoiron/sqlx","labels_url":"https://api.github.com/repos/jmoiron/sqlx/issues/694/labels{/name}","comments_url":"https://api.github.com/repos/jmoiron/sqlx/issues/694/comments","events_url":"https://api.github.com/repos/jmoiron/sqlx/issues/694/events","html_url":"https://github.com/jmoiron/sqlx/issues/694","id":796496556,"node_id":"MDU6SXNzdWU3OTY0OTY1NTY=","number":694,"title":"Bulk insert assumed that the placeholders will always be at the end","user":{"login":"MichaelBui","id":1146708,"node_id":"MDQ6VXNlcjExNDY3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/1146708?v=4","gravatar_id":"","url":"https://api.github.com/users/MichaelBui","html_url":"https://github.com/MichaelBui","followers_url":"https://api.github.com/users/MichaelBui/followers","following_url":"https://api.github.com/users/MichaelBui/following{/other_user}","gists_url":"https://api.github.com/users/MichaelBui/gists{/gist_id}","starred_url":"https://api.github.com/users/MichaelBui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MichaelBui/subscriptions","organizations_url":"https://api.github.com/users/MichaelBui/orgs","repos_url":"https://api.github.com/users/MichaelBui/repos","events_url":"https://api.github.com/users/MichaelBui/events{/privacy}","received_events_url":"https://api.github.com/users/MichaelBui/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2021-01-29T01:15:23Z","updated_at":"2023-07-12T20:54:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7877397,"node_id":"MDEwOlJlcG9zaXRvcnk3ODc3Mzk3","name":"sqlx","full_name":"jmoiron/sqlx","private":false,"owner":{"login":"jmoiron","id":218132,"node_id":"MDQ6VXNlcjIxODEzMg==","avatar_url":"https://avatars.githubusercontent.com/u/218132?v=4","gravatar_id":"","url":"https://api.github.com/users/jmoiron","html_url":"https://github.com/jmoiron","followers_url":"https://api.github.com/users/jmoiron/followers","following_url":"https://api.github.com/users/jmoiron/following{/other_user}","gists_url":"https://api.github.com/users/jmoiron/gists{/gist_id}","starred_url":"https://api.github.com/users/jmoiron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmoiron/subscriptions","organizations_url":"https://api.github.com/users/jmoiron/orgs","repos_url":"https://api.github.com/users/jmoiron/repos","events_url":"https://api.github.com/users/jmoiron/events{/privacy}","received_events_url":"https://api.github.com/users/jmoiron/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/jmoiron/sqlx","description":"general purpose extensions to golang's database/sql","fork":false,"url":"https://api.github.com/repos/jmoiron/sqlx","forks_url":"https://api.github.com/repos/jmoiron/sqlx/forks","keys_url":"https://api.github.com/repos/jmoiron/sqlx/keys{/key_id}","collaborators_url":"https://api.github.com/repos/jmoiron/sqlx/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/jmoiron/sqlx/teams","hooks_url":"https://api.github.com/repos/jmoiron/sqlx/hooks","issue_events_url":"https://api.github.com/repos/jmoiron/sqlx/issues/events{/number}","events_url":"https://api.github.com/repos/jmoiron/sqlx/events","assignees_url":"https://api.github.com/repos/jmoiron/sqlx/assignees{/user}","branches_url":"https://api.github.com/repos/jmoiron/sqlx/branches{/branch}","tags_url":"https://api.github.com/repos/jmoiron/sqlx/tags","blobs_url":"https://api.github.com/repos/jmoiron/sqlx/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/jmoiron/sqlx/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/jmoiron/sqlx/git/refs{/sha}","trees_url":"https://api.github.com/repos/jmoiron/sqlx/git/trees{/sha}","statuses_url":"https://api.github.com/repos/jmoiron/sqlx/statuses/{sha}","languages_url":"https://api.github.com/repos/jmoiron/sqlx/languages","stargazers_url":"https://api.github.com/repos/jmoiron/sqlx/stargazers","contributors_url":"https://api.github.com/repos/jmoiron/sqlx/contributors","subscribers_url":"https://api.github.com/repos/jmoiron/sqlx/subscribers","subscription_url":"https://api.github.com/repos/jmoiron/sqlx/subscription","commits_url":"https://api.github.com/repos/jmoiron/sqlx/commits{/sha}","git_commits_url":"https://api.github.com/repos/jmoiron/sqlx/git/commits{/sha}","comments_url":"https://api.github.com/repos/jmoiron/sqlx/comments{/number}","issue_comment_url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments{/number}","contents_url":"https://api.github.com/repos/jmoiron/sqlx/contents/{+path}","compare_url":"https://api.github.com/repos/jmoiron/sqlx/compare/{base}...{head}","merges_url":"https://api.github.com/repos/jmoiron/sqlx/merges","archive_url":"https://api.github.com/repos/jmoiron/sqlx/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/jmoiron/sqlx/downloads","issues_url":"https://api.github.com/repos/jmoiron/sqlx/issues{/number}","pulls_url":"https://api.github.com/repos/jmoiron/sqlx/pulls{/number}","milestones_url":"https://api.github.com/repos/jmoiron/sqlx/milestones{/number}","notifications_url":"https://api.github.com/repos/jmoiron/sqlx/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/jmoiron/sqlx/labels{/name}","releases_url":"https://api.github.com/repos/jmoiron/sqlx/releases{/id}","deployments_url":"https://api.github.com/repos/jmoiron/sqlx/deployments","created_at":"2013-01-28T19:40:00Z","updated_at":"2025-11-10T02:44:57Z","pushed_at":"2024-08-15T16:19:19Z","git_url":"git://github.com/jmoiron/sqlx.git","ssh_url":"git@github.com:jmoiron/sqlx.git","clone_url":"https://github.com/jmoiron/sqlx.git","svn_url":"https://github.com/jmoiron/sqlx","homepage":"http://jmoiron.github.io/sqlx/","size":877,"stargazers_count":17293,"watchers_count":17293,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":1115,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":387,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1115,"open_issues":387,"watchers":17293,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Current regex only accept placeholders at the end of the query:\r\n```\r\nvar valueBracketReg = regexp.MustCompile(`\\([^(]*.[^(]\\)$`)\r\n```\r\n\r\nThis doesn't work with `INSERT .... ON DUPLICATE KEY UPDATE....`\r\n","reactions":{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/694/reactions","total_count":10,"+1":10,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jmoiron/sqlx/issues/694/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":4729153951,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ3MjkxNTM5NTE=","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/4729153951","actor":{"login":"ebenoist","id":1656713,"node_id":"MDQ6VXNlcjE2NTY3MTM=","avatar_url":"https://avatars.githubusercontent.com/u/1656713?v=4","gravatar_id":"","url":"https://api.github.com/users/ebenoist","html_url":"https://github.com/ebenoist","followers_url":"https://api.github.com/users/ebenoist/followers","following_url":"https://api.github.com/users/ebenoist/following{/other_user}","gists_url":"https://api.github.com/users/ebenoist/gists{/gist_id}","starred_url":"https://api.github.com/users/ebenoist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebenoist/subscriptions","organizations_url":"https://api.github.com/users/ebenoist/orgs","repos_url":"https://api.github.com/users/ebenoist/repos","events_url":"https://api.github.com/users/ebenoist/events{/privacy}","received_events_url":"https://api.github.com/users/ebenoist/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"cca8b15174b4f3795545d68b5b6c6a18f7a1590a","commit_url":"https://api.github.com/repos/reverbdotcom/sqlx/commits/cca8b15174b4f3795545d68b5b6c6a18f7a1590a","created_at":"2021-05-11T16:23:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/986008449","html_url":"https://github.com/jmoiron/sqlx/issues/690#issuecomment-986008449","issue_url":"https://api.github.com/repos/jmoiron/sqlx/issues/690","id":986008449,"node_id":"IC_kwDOAHgzFc46xUuB","user":{"login":"dxps","id":14140226,"node_id":"MDQ6VXNlcjE0MTQwMjI2","avatar_url":"https://avatars.githubusercontent.com/u/14140226?v=4","gravatar_id":"","url":"https://api.github.com/users/dxps","html_url":"https://github.com/dxps","followers_url":"https://api.github.com/users/dxps/followers","following_url":"https://api.github.com/users/dxps/following{/other_user}","gists_url":"https://api.github.com/users/dxps/gists{/gist_id}","starred_url":"https://api.github.com/users/dxps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dxps/subscriptions","organizations_url":"https://api.github.com/users/dxps/orgs","repos_url":"https://api.github.com/users/dxps/repos","events_url":"https://api.github.com/users/dxps/events{/privacy}","received_events_url":"https://api.github.com/users/dxps/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T10:54:49Z","updated_at":"2021-12-04T11:07:13Z","body":"@drsasa , @ekrem95 \r\nI'm trying to look for a solution on a similar (not identical, ofc) case on my side. Could you please give some hints :question: \r\n\r\nUsing one of the standard Postgres' upsert approaches like this:\r\n```golang\r\nvar addListingNamedSQL = \"INSERT INTO listings (id, name, symbol) VALUES (:id, :name, :symbol) ON CONFLICT (id) DO UPDATE SET name = :name, symbol = :symbol\"\r\n```\r\n(tried to have the SQL in one single line, instead of the multi line form using backticks, just to remove any other possible issue)\r\n\r\nand then use it with `NamedExec` like this:\r\n```golang\r\n// TEST\r\nlistings = []domain.Listing{\r\n   {Id: \"1\", Symbol: \"1\", Name: \"1\"},\r\n   {Id: \"2\", Symbol: \"2\", Name: \"2\"},\r\n}\r\n\r\nr.NamedExec(addListingNamedSQL, listings)\r\n```\r\nit throws the error: `pq: got 10 parameters but the statement requires 8`\r\n\r\nThe classic INSERT works just fine:\r\n```sql\r\nINSERT INTO listings (id, name, symbol) VALUES (1, '1n', '1')\r\n    ON CONFLICT (id) DO UPDATE SET name = '1n', symbol = '1';\r\n```\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/986008449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dxps","id":14140226,"node_id":"MDQ6VXNlcjE0MTQwMjI2","avatar_url":"https://avatars.githubusercontent.com/u/14140226?v=4","gravatar_id":"","url":"https://api.github.com/users/dxps","html_url":"https://github.com/dxps","followers_url":"https://api.github.com/users/dxps/followers","following_url":"https://api.github.com/users/dxps/following{/other_user}","gists_url":"https://api.github.com/users/dxps/gists{/gist_id}","starred_url":"https://api.github.com/users/dxps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dxps/subscriptions","organizations_url":"https://api.github.com/users/dxps/orgs","repos_url":"https://api.github.com/users/dxps/repos","events_url":"https://api.github.com/users/dxps/events{/privacy}","received_events_url":"https://api.github.com/users/dxps/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5715530403,"node_id":"MEE_lADOAHgzFc4vXDZdzwAAAAFUrBKj","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/5715530403","actor":{"login":"ekrem95","id":16150227,"node_id":"MDQ6VXNlcjE2MTUwMjI3","avatar_url":"https://avatars.githubusercontent.com/u/16150227?v=4","gravatar_id":"","url":"https://api.github.com/users/ekrem95","html_url":"https://github.com/ekrem95","followers_url":"https://api.github.com/users/ekrem95/followers","following_url":"https://api.github.com/users/ekrem95/following{/other_user}","gists_url":"https://api.github.com/users/ekrem95/gists{/gist_id}","starred_url":"https://api.github.com/users/ekrem95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekrem95/subscriptions","organizations_url":"https://api.github.com/users/ekrem95/orgs","repos_url":"https://api.github.com/users/ekrem95/repos","events_url":"https://api.github.com/users/ekrem95/events{/privacy}","received_events_url":"https://api.github.com/users/ekrem95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-12-04T10:54:49Z","performed_via_github_app":null},{"id":5715530404,"node_id":"SE_lADOAHgzFc4vXDZdzwAAAAFUrBKk","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/5715530404","actor":{"login":"ekrem95","id":16150227,"node_id":"MDQ6VXNlcjE2MTUwMjI3","avatar_url":"https://avatars.githubusercontent.com/u/16150227?v=4","gravatar_id":"","url":"https://api.github.com/users/ekrem95","html_url":"https://github.com/ekrem95","followers_url":"https://api.github.com/users/ekrem95/followers","following_url":"https://api.github.com/users/ekrem95/following{/other_user}","gists_url":"https://api.github.com/users/ekrem95/gists{/gist_id}","starred_url":"https://api.github.com/users/ekrem95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekrem95/subscriptions","organizations_url":"https://api.github.com/users/ekrem95/orgs","repos_url":"https://api.github.com/users/ekrem95/repos","events_url":"https://api.github.com/users/ekrem95/events{/privacy}","received_events_url":"https://api.github.com/users/ekrem95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-12-04T10:54:49Z","performed_via_github_app":null},{"id":5715530405,"node_id":"MEE_lADOAHgzFc4vXDZdzwAAAAFUrBKl","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/5715530405","actor":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-12-04T10:54:49Z","performed_via_github_app":null},{"id":5715530406,"node_id":"SE_lADOAHgzFc4vXDZdzwAAAAFUrBKm","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/5715530406","actor":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-12-04T10:54:49Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/986029614","html_url":"https://github.com/jmoiron/sqlx/issues/690#issuecomment-986029614","issue_url":"https://api.github.com/repos/jmoiron/sqlx/issues/690","id":986029614,"node_id":"IC_kwDOAHgzFc46xZ4u","user":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T13:44:41Z","updated_at":"2021-12-04T14:37:02Z","body":"> \r\n\r\nI think NamedExec do not support bulk UPSERT.\r\nJust looked into code how handle this and what I found is,\r\nthat SQL expression is translated to:\r\n\r\n```sql\r\nINSERT INTO listings (id, name, symbol) VALUES ($1, $2, $3),($4, $5, $6) ON CONFLICT (id) DO UPDATE SET name = $7, symbol = $8\r\n```\r\n\r\nWhich is not good interpretation of what you trying to do. So my conclusion is that UPSERT is not supported on batch insert.\r\nAnd like you see this is reason for that error, here is expected 8 params and we sent 10\r\n\r\nCheers!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/986029614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/986031599","html_url":"https://github.com/jmoiron/sqlx/issues/690#issuecomment-986031599","issue_url":"https://api.github.com/repos/jmoiron/sqlx/issues/690","id":986031599,"node_id":"IC_kwDOAHgzFc46xaXv","user":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T14:00:03Z","updated_at":"2021-12-04T14:37:52Z","body":"> > \r\n> \r\n> I think NamedExec do not support bulk UPSERT. Just looked into code how handle this and what I found is, that SQL expression is translated to:\r\n> \r\n> `INSERT INTO listings (id, name, symbol) VALUES ($1, $2, $3),($4, $5, $6) ON CONFLICT (id) DO UPDATE SET name = $7, symbol = $8`\r\n> \r\n> Which is not good interpretation of what you trying to do. So my conclusion is that UPSERT is not supported on batch insert. And like you see this is reason for that error, here is expected 8 params and we sent 10\r\n> \r\n> Cheers!\r\n\r\nFrom other hand just saw that your PG syntax is not good :)\r\nYour query should look like this:\r\n\r\n```sql\r\nINSERT INTO listings (id, name, symbol) VALUES (1, '1n', '1')\r\n    ON CONFLICT (id) DO UPDATE SET name = excluded.name, symbol = excluded.symbol;\r\n```\r\n  \r\nWhich take us to this:\r\n\r\n```go\r\nvar addListingNamedSQL = \"INSERT INTO listings (id, name, symbol) VALUES (:id, :name, :symbol) ON CONFLICT (id) DO UPDATE SET name = excluded.name, symbol = excluded.symbol\"\r\n```\r\n\r\nAnd everything will work as expected. `EXCLUDED` contains rejected row so is common practice to use that instead values on `CONFLICT` part.\r\n\r\nSo really nothing wrong here on `sqlx` part.\r\n\r\nCheers!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/986031599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/986056178","html_url":"https://github.com/jmoiron/sqlx/issues/690#issuecomment-986056178","issue_url":"https://api.github.com/repos/jmoiron/sqlx/issues/690","id":986056178,"node_id":"IC_kwDOAHgzFc46xgXy","user":{"login":"dxps","id":14140226,"node_id":"MDQ6VXNlcjE0MTQwMjI2","avatar_url":"https://avatars.githubusercontent.com/u/14140226?v=4","gravatar_id":"","url":"https://api.github.com/users/dxps","html_url":"https://github.com/dxps","followers_url":"https://api.github.com/users/dxps/followers","following_url":"https://api.github.com/users/dxps/following{/other_user}","gists_url":"https://api.github.com/users/dxps/gists{/gist_id}","starred_url":"https://api.github.com/users/dxps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dxps/subscriptions","organizations_url":"https://api.github.com/users/dxps/orgs","repos_url":"https://api.github.com/users/dxps/repos","events_url":"https://api.github.com/users/dxps/events{/privacy}","received_events_url":"https://api.github.com/users/dxps/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T16:43:46Z","updated_at":"2021-12-04T16:48:06Z","body":"@drsasa Thanks for the detailed feedback, Alexandar! \r\nYeah, I didn't yet dive into the inners of sqlx to understand the error. So, thanks for the insight!\r\n\r\nThe SQL that I showed before it's just fine and it works without a problem.\r\nI'd say that according to [pg docs](https://www.postgresql.org/docs/current/sql-insert.html#id-1.9.3.152.6.3.3), `excluded` is that special table name used in this feature.\r\nI could check further to make sure there are no side effects of not using it.\r\n\r\nMeanwhile, to overcome this issue, I used the classical approach of doing all the \"upserts\" in a transaction. And the SQL used for this is:\r\n```sql\r\nvar addListingSQL = `INSERT INTO listings (id, name, symbol) VALUES ($1, $2, $3) \r\n                     ON CONFLICT (id) DO UPDATE SET name = $2, symbol = $3`\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/jmoiron/sqlx/issues/comments/986056178/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dxps","id":14140226,"node_id":"MDQ6VXNlcjE0MTQwMjI2","avatar_url":"https://avatars.githubusercontent.com/u/14140226?v=4","gravatar_id":"","url":"https://api.github.com/users/dxps","html_url":"https://github.com/dxps","followers_url":"https://api.github.com/users/dxps/followers","following_url":"https://api.github.com/users/dxps/following{/other_user}","gists_url":"https://api.github.com/users/dxps/gists{/gist_id}","starred_url":"https://api.github.com/users/dxps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dxps/subscriptions","organizations_url":"https://api.github.com/users/dxps/orgs","repos_url":"https://api.github.com/users/dxps/repos","events_url":"https://api.github.com/users/dxps/events{/privacy}","received_events_url":"https://api.github.com/users/dxps/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5715830958,"node_id":"MEE_lADOAHgzFc4vXDZdzwAAAAFUsKiu","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/5715830958","actor":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-12-04T16:43:46Z","performed_via_github_app":null},{"id":5715830961,"node_id":"SE_lADOAHgzFc4vXDZdzwAAAAFUsKix","url":"https://api.github.com/repos/jmoiron/sqlx/issues/events/5715830961","actor":{"login":"drsasa","id":17159644,"node_id":"MDQ6VXNlcjE3MTU5NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/17159644?v=4","gravatar_id":"","url":"https://api.github.com/users/drsasa","html_url":"https://github.com/drsasa","followers_url":"https://api.github.com/users/drsasa/followers","following_url":"https://api.github.com/users/drsasa/following{/other_user}","gists_url":"https://api.github.com/users/drsasa/gists{/gist_id}","starred_url":"https://api.github.com/users/drsasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsasa/subscriptions","organizations_url":"https://api.github.com/users/drsasa/orgs","repos_url":"https://api.github.com/users/drsasa/repos","events_url":"https://api.github.com/users/drsasa/events{/privacy}","received_events_url":"https://api.github.com/users/drsasa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-12-04T16:43:46Z","performed_via_github_app":null}]