diff --git a/mqtt-cs/src/main/java/org/apache/rocketmq/mqtt/cs/session/infly/RetryDriver.java b/mqtt-cs/src/main/java/org/apache/rocketmq/mqtt/cs/session/infly/RetryDriver.java
index 86ac2a8..9b32ce9 100644
--- a/mqtt-cs/src/main/java/org/apache/rocketmq/mqtt/cs/session/infly/RetryDriver.java
+++ b/mqtt-cs/src/main/java/org/apache/rocketmq/mqtt/cs/session/infly/RetryDriver.java
@@ -230,7 +230,10 @@ public class RetryDriver {
         Map<Integer, RetryMessage> noWaitRetryMsgMap = sessionNoWaitRetryMsgMap.get(channelId);
         if (noWaitRetryMsgMap == null) {
             noWaitRetryMsgMap = new ConcurrentHashMap<>(2);
-            sessionNoWaitRetryMsgMap.putIfAbsent(channelId, noWaitRetryMsgMap);
+            Map<Integer, RetryMessage> old = sessionNoWaitRetryMsgMap.putIfAbsent(channelId, noWaitRetryMsgMap);
+            if (old != null) {
+                noWaitRetryMsgMap = old;
+            }
         }
 
         if (!subscription.isRetry() &&
