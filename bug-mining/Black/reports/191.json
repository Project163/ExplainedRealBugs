{"url":"https://api.github.com/repos/psf/black/issues/2759","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2759/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2759/comments","events_url":"https://api.github.com/repos/psf/black/issues/2759/events","html_url":"https://github.com/psf/black/issues/2759","id":1098304850,"node_id":"I_kwDOB3dpmM5Bds1S","number":2759,"title":"Backtracking parser does not ignore newlines/comments","user":{"login":"isidentical","id":47358913,"node_id":"MDQ6VXNlcjQ3MzU4OTEz","avatar_url":"https://avatars.githubusercontent.com/u/47358913?v=4","gravatar_id":"","url":"https://api.github.com/users/isidentical","html_url":"https://github.com/isidentical","followers_url":"https://api.github.com/users/isidentical/followers","following_url":"https://api.github.com/users/isidentical/following{/other_user}","gists_url":"https://api.github.com/users/isidentical/gists{/gist_id}","starred_url":"https://api.github.com/users/isidentical/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/isidentical/subscriptions","organizations_url":"https://api.github.com/users/isidentical/orgs","repos_url":"https://api.github.com/users/isidentical/repos","events_url":"https://api.github.com/users/isidentical/events{/privacy}","received_events_url":"https://api.github.com/users/isidentical/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-01-10T19:47:57Z","updated_at":"2022-01-10T20:22:07Z","closed_at":"2022-01-10T20:22:07Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The regular parser ignores `token.NL`/`token.COMMENT` since the grammar assumes there can be any number of them during parsing. This is actually handled in the driver rather than parser, so when the parser got implemented initially we did not specifically instruct this. But seems like it is now needed.\r\n\r\nhttps://github.com/pantsbuild/pants/blob/aa1d38d4f3b791509bff773a65c2b07490bacad3/src/python/pants/util/enums_test.py#L33-L41\r\n\r\nThis seem to only cover cases where a standalone `match` or `case` is used in a newline fashion:\r\n```py\r\nmatch(\r\n     something\r\n)\r\n```\r\n\r\nIt does not include `re.match()` or other variants as far as I can see. The fix is should be really easy, just ignoring those tokens on the recorder.","closed_by":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/psf/black/issues/2759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2759/timeline","performed_via_github_app":null,"state_reason":"completed"}