{"url":"https://api.github.com/repos/psf/black/issues/2742","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2742/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2742/comments","events_url":"https://api.github.com/repos/psf/black/issues/2742/events","html_url":"https://github.com/psf/black/issues/2742","id":1092553659,"node_id":"I_kwDOB3dpmM5BHwu7","number":2742,"title":"Allow defining custom python magics for Jupyter support","user":{"login":"mgmarino","id":124705,"node_id":"MDQ6VXNlcjEyNDcwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/124705?v=4","gravatar_id":"","url":"https://api.github.com/users/mgmarino","html_url":"https://github.com/mgmarino","followers_url":"https://api.github.com/users/mgmarino/followers","following_url":"https://api.github.com/users/mgmarino/following{/other_user}","gists_url":"https://api.github.com/users/mgmarino/gists{/gist_id}","starred_url":"https://api.github.com/users/mgmarino/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgmarino/subscriptions","organizations_url":"https://api.github.com/users/mgmarino/orgs","repos_url":"https://api.github.com/users/mgmarino/repos","events_url":"https://api.github.com/users/mgmarino/events{/privacy}","received_events_url":"https://api.github.com/users/mgmarino/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":867432796,"node_id":"MDU6TGFiZWw4Njc0MzI3OTY=","url":"https://api.github.com/repos/psf/black/labels/T:%20enhancement","name":"T: enhancement","color":"a2eeef","default":false,"description":"New feature or request"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-01-03T14:22:18Z","updated_at":"2024-01-21T13:05:09Z","closed_at":"2022-01-21T00:45:29Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Recent updates of black have introduced out-of-the-box support for Jupyter Notebooks, which is extremely helpful.  As of #2630 only *known* python cell magics are processed (see e.g. [here](https://github.com/psf/black/blob/8a84bebcfcabddfd5b82a8cff0b830a745999b6c/src/black/handle_ipynb_magics.py#L40)), which certainly makes sense.  We have the use case that we have several custom python cell magics that we would also like to process.  \r\n\r\nThis request is to allow configuration to support additional (user-defined) magics.  \r\n\r\n\r\nPossible solutions:\r\n\r\nI am aware that we could certainly call black from python directly and programmatically update `PYTHON_CELL_MAGICS` to include our custom python magics.  However, I'm not keen on doing this because it would depend on implementation details within black.   If this would be the preferred solution, then I would suggest to at least add a function that could be called to register the additional magics.\r\n\r\nAnother possibility would be to add a configuration flag/option (i.e. in `pyproject.toml`/CLI) that would allow the input of a list of additional python cell magic names.  (Using an environment variable would be a similar option, but I don't see any other place that this is done, other than with e.g. `XDG_CACHE_HOME` which is a more \"global\" configuration variable.)  This is likely my preferred solution, but, given that black makes a concerted effort *to avoid* configuration options, I could understand why this would not be acceptable.\r\n\r\nThanks in advance for any input/consideration.\r\n","closed_by":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/psf/black/issues/2742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2742/timeline","performed_via_github_app":null,"state_reason":"completed"}