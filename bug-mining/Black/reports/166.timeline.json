[{"id":4660358036,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ2NjAzNTgwMzY=","url":"https://api.github.com/repos/psf/black/issues/events/4660358036","actor":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-04-29T04:38:49Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":4663275683,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ2NjMyNzU2ODM=","url":"https://api.github.com/repos/psf/black/issues/events/4663275683","actor":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-04-29T14:49:02Z","label":{"name":"command line","color":"f2b3db"},"performed_via_github_app":null},{"id":4663275686,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ2NjMyNzU2ODY=","url":"https://api.github.com/repos/psf/black/issues/events/4663275686","actor":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-04-29T14:49:02Z","label":{"name":"enhancement","color":"a2eeef"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/comments/829302326","html_url":"https://github.com/psf/black/issues/2164#issuecomment-829302326","issue_url":"https://api.github.com/repos/psf/black/issues/2164","id":829302326,"node_id":"MDEyOklzc3VlQ29tbWVudDgyOTMwMjMyNg==","user":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-29T14:49:06Z","updated_at":"2021-04-29T14:53:36Z","body":"Hi,\r\n\r\n> prominently documented \r\n\r\nI do agree that this feature was poorly documented and needs to be documented better. I'll definitely take this into account once I am done with the other things I'm doing. Matter of fact I've been planning for a little while to put together a \"Common Issues & FAQ\" page for situations just like this one! I'm sorry for the amount of confusion and frustration our lack of documentation has caused.\r\n\r\n> \"convenient\"\r\n\r\n> If someone thinks it's important\r\n\r\nThis is where I am going to seem harsh and inconsiderate but no, this _is a useful and convenient feature_. Is it for you? No, but we as maintainers must take into account the needs of all of our users when considering potential options. Since the year and a half this feature has been in the wild, this is the second complaint I've seen from users about this feature. On the other hand, the issue requesting this feature (https://github.com/psf/black/issues/475) has seen much more positive feedback from the community. Are issue counts and +1s a perfect representation of the userbase and their needs, wishes, and issues? No, but they are one of the limited ways we can get real world data.\r\n\r\n> plugin and extra: black[vcs]\r\n\r\nI'd argue that it would be better to make this feature configurable via a flag or option since turning this feature on whether `pathspec` is installed would lead to confusion. \r\n\r\nSo that leaves me to consider two options (other maintainers may have different opinions):\r\n\r\n1. Add a flag / option and **disable this feature by default**; or\r\n2. Add a flag / option and **keep this feature enabled by default**\r\n\r\nI personally prefer no. 2 because while disabling the feature by default might not lead to Black touching important files, it does lead Black to format files it most likely shouldn't, increasing runtime. That was the main argument for why this feature should be added anyway. Black has already gotten slower in some cases to avoid bugs, and I'd rather not the average runtime increase even more. Option 1 is not a deal breaker for me, but it's going to need someone else to come by in support for it.\r\n\r\nFinally for you personally, a workaround is to use pre-commit. Pre-commit can handle the automatic file discovery Black does too and it passes the files directly to Black via the command line. Files and directories passed via the command line aren't affected by --include, --exclude, or .gitignore.\r\n\r\nI hope that explains my viewpoint well enough. Thank you for reporting, it's nice to know more about our users' experiences.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/829302326/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/829362404","html_url":"https://github.com/psf/black/issues/2164#issuecomment-829362404","issue_url":"https://api.github.com/repos/psf/black/issues/2164","id":829362404,"node_id":"MDEyOklzc3VlQ29tbWVudDgyOTM2MjQwNA==","user":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-29T15:59:09Z","updated_at":"2021-04-29T15:59:09Z","body":"I'm not saying it's totally bad feature. My point of view is that introducing a convenience (read optional, but positive) should not be optimizing the common *at the detriment of the uncommon case*. We aren't talking about total program performance here, where taking a small hit somewhere for the advantage of overall performance increase is okay; we are talking about people. \r\n\r\nOn second inspection I think the issue is more that the implementation of this feature is incorrect, a file can be excluded while also being version controlled. The proper logic for exclusion is `ignored and not version_controlled`.\r\n\r\nOf course I understand this will likely require the project to take on a dependency on `pygit` for a feature that not everyone will use, which isn't ideal. And of course other VCSs go without attention, maybe some user would like SVN support? Should that be added? And they will likely need lots of options to configure those features... With VCS support there is an unbounded interface on the project that will either balloon, or require some arbitrary line in the sand to be drawn that will peeve the users who end up on the opposite side of the line. It's not a good place to be.\r\n\r\nIf you do not intend to fix the logic, I would do the least intrusive thing, which is option 1. \r\n\r\nI've worked around the issue for now by changing my `.gitignore` to the following. I doubt there will be any Python source files in my project I do not intend to check in if I already haven't.\r\n```\r\n*\r\n# to support black\r\n!*.py\r\n```\r\n\r\n> use pre-commit\r\n\r\nI am not a fan of modifying source files in pre-commit. I already use `black --check` in pre-commit.\r\n\r\nAnd I hope you understand when I say \"you\" I don't mean you personally, but you \"the project\". Thank you for responding.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/829362404/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/829444065","html_url":"https://github.com/psf/black/issues/2164#issuecomment-829444065","issue_url":"https://api.github.com/repos/psf/black/issues/2164","id":829444065,"node_id":"MDEyOklzc3VlQ29tbWVudDgyOTQ0NDA2NQ==","user":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-29T17:17:16Z","updated_at":"2021-04-29T18:58:00Z","body":"> convenience (read optional, but positive) should not be optimizing the common at the detriment of the uncommon case. \r\n\r\nMy viewpoint is the opposite to a degree. Now optimizing for the common case and blocking the uncommon cases from ever working? That crosses my line in the sand, but in general, we can't get this perfect. Yes there's the people component to this issue, but it's about tradeoffs here, if there's a bunch of users that are all hitting this issue and find it annoying, sure, I wouldn't mind disrupting most our users and going with No. 1. And that's the next point I want to make, Option 1. is intrusive in its own way since I'm sure plenty of people are now dependant on this feature (including me! - I hope that covers my biases) and yanking it from under them would certainly be annoying and frustrating. Yes it's an \"one time\" (well sorta, some people may never notice the change and will face the sudden increase in runtime without knowing how to fix it) cost, but I am not convinced it's worth it.\r\n\r\n> The proper logic for exclusion is `ignored and not version_controlled`\r\n\r\n~~I mean, maybe? It totally makes sense to me to have files checked into version control but are still excluded from Black. Maybe the file is Python 2 and can't be formatted by Black. Or it purposefully has bad formatting or even invalid syntax (e.g, our `./tests/data` directory in this repo).~~ this comment was made under a wrong interpretation of what \"ignored\" and \"checked into\" meant, please ignore, it's wrong :(\r\n\r\nFinally, I'm going to ping some other maintainers to see what their thoughts are about this /cc @JelleZijlstra @cooperlees ","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/829444065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4664152972,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDY2NDE1Mjk3Mg==","url":"https://api.github.com/repos/psf/black/issues/events/4664152972","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-04-29T17:17:16Z","performed_via_github_app":null},{"id":4664152975,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ2NjQxNTI5NzU=","url":"https://api.github.com/repos/psf/black/issues/events/4664152975","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-04-29T17:17:16Z","performed_via_github_app":null},{"id":4664152978,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDY2NDE1Mjk3OA==","url":"https://api.github.com/repos/psf/black/issues/events/4664152978","actor":{"login":"cooperlees","id":3005596,"node_id":"MDQ6VXNlcjMwMDU1OTY=","avatar_url":"https://avatars.githubusercontent.com/u/3005596?v=4","gravatar_id":"","url":"https://api.github.com/users/cooperlees","html_url":"https://github.com/cooperlees","followers_url":"https://api.github.com/users/cooperlees/followers","following_url":"https://api.github.com/users/cooperlees/following{/other_user}","gists_url":"https://api.github.com/users/cooperlees/gists{/gist_id}","starred_url":"https://api.github.com/users/cooperlees/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooperlees/subscriptions","organizations_url":"https://api.github.com/users/cooperlees/orgs","repos_url":"https://api.github.com/users/cooperlees/repos","events_url":"https://api.github.com/users/cooperlees/events{/privacy}","received_events_url":"https://api.github.com/users/cooperlees/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-04-29T17:17:17Z","performed_via_github_app":null},{"id":4664152981,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ2NjQxNTI5ODE=","url":"https://api.github.com/repos/psf/black/issues/events/4664152981","actor":{"login":"cooperlees","id":3005596,"node_id":"MDQ6VXNlcjMwMDU1OTY=","avatar_url":"https://avatars.githubusercontent.com/u/3005596?v=4","gravatar_id":"","url":"https://api.github.com/users/cooperlees","html_url":"https://github.com/cooperlees","followers_url":"https://api.github.com/users/cooperlees/followers","following_url":"https://api.github.com/users/cooperlees/following{/other_user}","gists_url":"https://api.github.com/users/cooperlees/gists{/gist_id}","starred_url":"https://api.github.com/users/cooperlees/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooperlees/subscriptions","organizations_url":"https://api.github.com/users/cooperlees/orgs","repos_url":"https://api.github.com/users/cooperlees/repos","events_url":"https://api.github.com/users/cooperlees/events{/privacy}","received_events_url":"https://api.github.com/users/cooperlees/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-04-29T17:17:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/comments/829483734","html_url":"https://github.com/psf/black/issues/2164#issuecomment-829483734","issue_url":"https://api.github.com/repos/psf/black/issues/2164","id":829483734,"node_id":"MDEyOklzc3VlQ29tbWVudDgyOTQ4MzczNA==","user":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-29T18:18:25Z","updated_at":"2021-04-29T18:18:25Z","body":"One more argument is that `flake8` does not support this feature and just runs forever. Although it doesn't even include reasonable default exclusions like `.tox/`, `.nox/` and `.eggs/`, etc. which might be too far in the other direction.\r\n\r\n> I mean, maybe? It totally makes sense to me to have files checked into version control but are still excluded from Black. Maybe the file is Python 2 and can't be formatted by Black.\r\n\r\nThis is not the purpose of a `.gitignore`. This is what a configuration file is for.\r\n\r\nThe previous comment was troubling so I decided to try configuring via `pyproject.toml` to set the exclude and include to what I would expect and found that apparently the `.gitignore` rules take precedence over actual configurations! This is really bad...","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/829483734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/829501735","html_url":"https://github.com/psf/black/issues/2164#issuecomment-829501735","issue_url":"https://api.github.com/repos/psf/black/issues/2164","id":829501735,"node_id":"MDEyOklzc3VlQ29tbWVudDgyOTUwMTczNQ==","user":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-29T18:46:53Z","updated_at":"2021-04-29T18:50:39Z","body":"> This is not the purpose of a .gitignore. This is what a configuration file is for.\r\n\r\nSorry, I misunderstood what \"ignored\" and \"checked in\" meant in this context (spot the person who is an idiot when it comes to anything remotely advanced about source version control). Let's just move on about this topic between us two shall we :)  \r\n\r\n> The previous comment was troubling so I decided to try configuring via pyproject.toml to set the exclude and include to what I would expect and found that apparently the .gitignore rules take precedence over actual configurations! This is really bad...\r\n\r\nTaking a look at the code, we treat .gitignore as just another exclude type. Exclusions are calcuated first, then inclusions. This is documented in the help for --exclude and --include:\r\n\r\n```text\r\n  --include TEXT                  A regular expression that matches files and\r\n                                  directories that should be included on\r\n                                  recursive searches.  An empty value means\r\n                                  all files are included regardless of the\r\n                                  name.  Use forward slashes for directories\r\n                                  on all platforms (Windows, too).  Exclusions\r\n                                  are calculated first, inclusions later.\r\n                                  [default: \\.pyi?$]\r\n```\r\n\r\nI wouldn't consider it troubling per se. Not ideal but unless we want to redo how all of the file discovery works, I think that's a bit out of scope for this issue. FYI this is what was decided as the behaviour on that issue: \r\n\r\n>  Because we have --include, I think the most sensible option is to merge gitignore with the value of --exclude; if there's no --exclude, merge it with the default. Values in pyproject.toml basically replace the default value for command line options.\r\n\r\nhttps://github.com/psf/black/issues/475#issuecomment-444278828","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/829501735/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/829536310","html_url":"https://github.com/psf/black/issues/2164#issuecomment-829536310","issue_url":"https://api.github.com/repos/psf/black/issues/2164","id":829536310,"node_id":"MDEyOklzc3VlQ29tbWVudDgyOTUzNjMxMA==","user":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-29T19:42:36Z","updated_at":"2021-04-29T19:44:07Z","body":"> Because we have --include, I think the most sensible option is to merge gitignore with the value of --exclude; if there's no --exclude, merge it with the default. Values in pyproject.toml basically replace the default value for command line options.\r\n\r\nOof... I absolutely disagree. Precedence is about *overriding* previous configurations. `.gitignore` should be a fallback if exclusions are not set, not a fundamental truth to be merged in. It's essentially turning all setting of exclusions in the configuration file and command line into extra exclusions. However, if you specify `--exclude` on the command line it *overrides* the configuration file, but neither override the `.gitignore`? It's just not clean... Hence why you need the flag you suggested. I think using `.gitignore` while not checking if the file is being version controlled is not great; but this is an even less palatable decision.\r\n\r\nAlso, are you sure about the exclusion/inclusion logic? I just tried the following.\r\n```sh\r\n> rm .gitignore\r\n> black src/ --exclude \".*\" --include \"\\.py$\"\r\nNo Python files are present to be formatted. Nothing to do ðŸ˜´\r\n> black src/ --include \"\\.py$\"\r\nAll done! âœ¨ ðŸ° âœ¨\r\n10 files left unchanged.\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/829536310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/829552710","html_url":"https://github.com/psf/black/issues/2164#issuecomment-829552710","issue_url":"https://api.github.com/repos/psf/black/issues/2164","id":829552710,"node_id":"MDEyOklzc3VlQ29tbWVudDgyOTU1MjcxMA==","user":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-29T19:53:13Z","updated_at":"2021-04-29T20:04:27Z","body":"Honestly I'm so confused where I am going to check myself out of this conversation since I'm at high risk of saying something that is wrong and/or dumb again.\r\n\r\nIf you want to check yourself, here's most of the relevant code:\r\n\r\nhttps://github.com/psf/black/blob/b39999da7f451c285befac217f1f9a685774b34d/src/black/__init__.py#L6206-L6269\r\n\r\nedit:\r\n\r\nif you're wondering what I'm confused by, here's what:\r\n\r\n- What is even the problem? It sounds like all of our file discovery logic should be redone\r\n- What solutions are we considering here?\r\n- What is the scope here? The scope is seemingly growing in size, and I'm losing track of what's being discussed here\r\n\r\nI might come back and see if with a clearer mind, I'll be able to make sense of it, but this has changed from some well defined into something that's too much for me to make sense of easily. It's a me issue btw, chances are that your explanations are just fine and it's me who is being dumb.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/829552710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/829769932","html_url":"https://github.com/psf/black/issues/2164#issuecomment-829769932","issue_url":"https://api.github.com/repos/psf/black/issues/2164","id":829769932,"node_id":"MDEyOklzc3VlQ29tbWVudDgyOTc2OTkzMg==","user":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-30T03:20:45Z","updated_at":"2021-04-30T03:20:45Z","body":"I think I may have gotten slightly confused on that last bit, I don't think the documentation is clear.\r\n\r\n> Exclusions are calculated first, inclusions later.\r\n\r\nThe first time I reasoned about it as \"if inclusion is considered later, that means it has precedence\", but what it really means is \"files are excluded first and remaining files are then checked for inclusion\". Which plainly doesn't make sense if I stopped and thought about what the default patterns were. Still I think the documentation could be made more clear and concise: \"exclusion has higher precedence than inclusion.\"\r\n\r\n> What is the scope here? The scope is seemingly growing in size, and I'm losing track of what's being discussed here\r\n\r\nMost of what I mentioned was just showcasing how playing around with version control can easily balloon in scope and complexity and it's a rock best left unturned (at least in the base project). But since then I've just been trying to find a way to work around the issue cleanly without having to modify my `.gitignore`. My workflow should not have to change to accommodate a single tool's assumptions.\r\n\r\n> What is even the problem?\r\n\r\nThe next issue is that the `.gitignore` is *always* considered and has precedence over every other rule. I don't think black should be treating `.gitignore` as another configuration file, it was never intended as such. At best it is a convenient default in the case of explicit configuration not existing. If `pyproject.toml` or the commandline receive `exclude` it should *override* `.gitignore`. `extend_exclude` will extend `.gitignore` if no `exclude` is present.\r\n\r\n> What solutions are we considering here?\r\n\r\nBasically, the comment you linked (https://github.com/psf/black/issues/475#issuecomment-444278828) I think is totally wrong and we should do the opposite. If `exclude` is passed to that function, `gitignore` is not considered.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/829769932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/829783896","html_url":"https://github.com/psf/black/issues/2164#issuecomment-829783896","issue_url":"https://api.github.com/repos/psf/black/issues/2164","id":829783896,"node_id":"MDEyOklzc3VlQ29tbWVudDgyOTc4Mzg5Ng==","user":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-30T03:42:20Z","updated_at":"2021-04-30T03:42:20Z","body":"Thank you very much @ktbarrett! It's pretty late where I am right now so I'll respond later with my proper (counter)arguments of my own (well maybe, you've done a decent job of warming me up to accepting more disruption to clean up the semantics - although please don't take that as \"I'm accepting your solution 100%\"). I just wanted to say my thanks for clarifying when you didn't have to, I appreciate it a lot. I should do better and try not to get these things wrong as a maintainer, but oh well, I suppose you gotta live and learn sometimes... Even if we two aren't able to reach an acceptable middle ground, you've certainly expanded my view on this topic so thank you for engaging me in some meaningful discussion :)","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/829783896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4666737243,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDY2NjczNzI0Mw==","url":"https://api.github.com/repos/psf/black/issues/events/4666737243","actor":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-04-30T03:42:20Z","performed_via_github_app":null},{"id":4666737246,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ2NjY3MzcyNDY=","url":"https://api.github.com/repos/psf/black/issues/events/4666737246","actor":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-04-30T03:42:20Z","performed_via_github_app":null},{"actor":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-30T04:34:32Z","updated_at":"2021-04-30T04:34:32Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/psf/black/issues/2170","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2170/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2170/comments","events_url":"https://api.github.com/repos/psf/black/issues/2170/events","html_url":"https://github.com/psf/black/pull/2170","id":871991367,"node_id":"MDExOlB1bGxSZXF1ZXN0NjI2OTY3MDg1","number":2170,"title":"Do not use gitignore if explicitly passing excludes","user":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-04-30T04:34:32Z","updated_at":"2021-05-07T13:17:19Z","closed_at":"2021-05-07T12:54:22Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":125266328,"node_id":"MDEwOlJlcG9zaXRvcnkxMjUyNjYzMjg=","name":"black","full_name":"psf/black","private":false,"owner":{"login":"psf","id":50630501,"node_id":"MDEyOk9yZ2FuaXphdGlvbjUwNjMwNTAx","avatar_url":"https://avatars.githubusercontent.com/u/50630501?v=4","gravatar_id":"","url":"https://api.github.com/users/psf","html_url":"https://github.com/psf","followers_url":"https://api.github.com/users/psf/followers","following_url":"https://api.github.com/users/psf/following{/other_user}","gists_url":"https://api.github.com/users/psf/gists{/gist_id}","starred_url":"https://api.github.com/users/psf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psf/subscriptions","organizations_url":"https://api.github.com/users/psf/orgs","repos_url":"https://api.github.com/users/psf/repos","events_url":"https://api.github.com/users/psf/events{/privacy}","received_events_url":"https://api.github.com/users/psf/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/psf/black","description":"The uncompromising Python code formatter","fork":false,"url":"https://api.github.com/repos/psf/black","forks_url":"https://api.github.com/repos/psf/black/forks","keys_url":"https://api.github.com/repos/psf/black/keys{/key_id}","collaborators_url":"https://api.github.com/repos/psf/black/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/psf/black/teams","hooks_url":"https://api.github.com/repos/psf/black/hooks","issue_events_url":"https://api.github.com/repos/psf/black/issues/events{/number}","events_url":"https://api.github.com/repos/psf/black/events","assignees_url":"https://api.github.com/repos/psf/black/assignees{/user}","branches_url":"https://api.github.com/repos/psf/black/branches{/branch}","tags_url":"https://api.github.com/repos/psf/black/tags","blobs_url":"https://api.github.com/repos/psf/black/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/psf/black/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/psf/black/git/refs{/sha}","trees_url":"https://api.github.com/repos/psf/black/git/trees{/sha}","statuses_url":"https://api.github.com/repos/psf/black/statuses/{sha}","languages_url":"https://api.github.com/repos/psf/black/languages","stargazers_url":"https://api.github.com/repos/psf/black/stargazers","contributors_url":"https://api.github.com/repos/psf/black/contributors","subscribers_url":"https://api.github.com/repos/psf/black/subscribers","subscription_url":"https://api.github.com/repos/psf/black/subscription","commits_url":"https://api.github.com/repos/psf/black/commits{/sha}","git_commits_url":"https://api.github.com/repos/psf/black/git/commits{/sha}","comments_url":"https://api.github.com/repos/psf/black/comments{/number}","issue_comment_url":"https://api.github.com/repos/psf/black/issues/comments{/number}","contents_url":"https://api.github.com/repos/psf/black/contents/{+path}","compare_url":"https://api.github.com/repos/psf/black/compare/{base}...{head}","merges_url":"https://api.github.com/repos/psf/black/merges","archive_url":"https://api.github.com/repos/psf/black/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/psf/black/downloads","issues_url":"https://api.github.com/repos/psf/black/issues{/number}","pulls_url":"https://api.github.com/repos/psf/black/pulls{/number}","milestones_url":"https://api.github.com/repos/psf/black/milestones{/number}","notifications_url":"https://api.github.com/repos/psf/black/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/psf/black/labels{/name}","releases_url":"https://api.github.com/repos/psf/black/releases{/id}","deployments_url":"https://api.github.com/repos/psf/black/deployments","created_at":"2018-03-14T19:54:45Z","updated_at":"2025-11-09T16:48:04Z","pushed_at":"2025-11-05T18:14:18Z","git_url":"git://github.com/psf/black.git","ssh_url":"git@github.com:psf/black.git","clone_url":"https://github.com/psf/black.git","svn_url":"https://github.com/psf/black","homepage":"https://black.readthedocs.io/en/stable/","size":7569,"stargazers_count":41126,"watchers_count":41126,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":2665,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":337,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["autopep8","code","codeformatter","formatter","gofmt","hacktoberfest","pre-commit-hook","python","yapf"],"visibility":"public","forks":2665,"open_issues":337,"watchers":41126,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/2170","html_url":"https://github.com/psf/black/pull/2170","diff_url":"https://github.com/psf/black/pull/2170.diff","patch_url":"https://github.com/psf/black/pull/2170.patch","merged_at":"2021-05-07T12:54:22Z"},"body":"Closes #2164.\r\n\r\nChanges behavior of how `.gitignore` is handled. With this change, the rules in `.gitignore` are only used as a *fallback* if no exclusion rule is explicitly passed on the command line or in `pyproject.toml`. Previously they were used regardless if explicit exclusion rules were specified, preventing any overriding of `.gitignore` rules.\r\n\r\nThose that depend only on `.gitignore` for their exclusion rules will not be affected. Those that use both `.gitignore` and `exclude` will find that `exclude` will act more like actually specifying `exclude` and not just another `extra-excludes`. If the previous behavior was desired, they should move their rules from `exclude` to `extra-excludes`.","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2170/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/psf/black/issues/comments/829831069","html_url":"https://github.com/psf/black/issues/2164#issuecomment-829831069","issue_url":"https://api.github.com/repos/psf/black/issues/2164","id":829831069,"node_id":"MDEyOklzc3VlQ29tbWVudDgyOTgzMTA2OQ==","user":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-30T04:59:39Z","updated_at":"2021-04-30T04:59:49Z","body":"And thank you as well for responding. I've been piecemealing the diagnosis between work, and my comments weren't very well designed. To summarize:\r\n\r\n> There is a configuration hierarchy: default/gitignore -> pyproject.toml -> command line.\r\n> `exclude` specified at any level of the hierarchy overrides the previous level.\r\n> `extra-excludes` at any level is additive to the previous level's `exclude`.\r\n> Right now gitignore is misbehaving because you can't override it.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/829831069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ktbarrett","id":22162772,"node_id":"MDQ6VXNlcjIyMTYyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/22162772?v=4","gravatar_id":"","url":"https://api.github.com/users/ktbarrett","html_url":"https://github.com/ktbarrett","followers_url":"https://api.github.com/users/ktbarrett/followers","following_url":"https://api.github.com/users/ktbarrett/following{/other_user}","gists_url":"https://api.github.com/users/ktbarrett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktbarrett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktbarrett/subscriptions","organizations_url":"https://api.github.com/users/ktbarrett/orgs","repos_url":"https://api.github.com/users/ktbarrett/repos","events_url":"https://api.github.com/users/ktbarrett/events{/privacy}","received_events_url":"https://api.github.com/users/ktbarrett/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4701687147,"node_id":"MDExOkNsb3NlZEV2ZW50NDcwMTY4NzE0Nw==","url":"https://api.github.com/repos/psf/black/issues/events/4701687147","actor":{"login":"ambv","id":55281,"node_id":"MDQ6VXNlcjU1Mjgx","avatar_url":"https://avatars.githubusercontent.com/u/55281?v=4","gravatar_id":"","url":"https://api.github.com/users/ambv","html_url":"https://github.com/ambv","followers_url":"https://api.github.com/users/ambv/followers","following_url":"https://api.github.com/users/ambv/following{/other_user}","gists_url":"https://api.github.com/users/ambv/gists{/gist_id}","starred_url":"https://api.github.com/users/ambv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ambv/subscriptions","organizations_url":"https://api.github.com/users/ambv/orgs","repos_url":"https://api.github.com/users/ambv/repos","events_url":"https://api.github.com/users/ambv/events{/privacy}","received_events_url":"https://api.github.com/users/ambv/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-05-07T12:54:22Z","state_reason":null,"performed_via_github_app":null},{"id":4701687276,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ3MDE2ODcyNzY=","url":"https://api.github.com/repos/psf/black/issues/events/4701687276","actor":{"login":"ambv","id":55281,"node_id":"MDQ6VXNlcjU1Mjgx","avatar_url":"https://avatars.githubusercontent.com/u/55281?v=4","gravatar_id":"","url":"https://api.github.com/users/ambv","html_url":"https://github.com/ambv","followers_url":"https://api.github.com/users/ambv/followers","following_url":"https://api.github.com/users/ambv/following{/other_user}","gists_url":"https://api.github.com/users/ambv/gists{/gist_id}","starred_url":"https://api.github.com/users/ambv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ambv/subscriptions","organizations_url":"https://api.github.com/users/ambv/orgs","repos_url":"https://api.github.com/users/ambv/repos","events_url":"https://api.github.com/users/ambv/events{/privacy}","received_events_url":"https://api.github.com/users/ambv/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1fe2efd8573a63ffc76c69320720d349b21897da","commit_url":"https://api.github.com/repos/psf/black/commits/1fe2efd8573a63ffc76c69320720d349b21897da","created_at":"2021-05-07T12:54:23Z","performed_via_github_app":null}]