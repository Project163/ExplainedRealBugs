{"url":"https://api.github.com/repos/psf/black/issues/3944","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/3944/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/3944/comments","events_url":"https://api.github.com/repos/psf/black/issues/3944/events","html_url":"https://github.com/psf/black/issues/3944","id":1944560107,"node_id":"I_kwDOB3dpmM5z56Hr","number":3944,"title":"Preserve blank line before raw docstrings","user":{"login":"konstin","id":6826232,"node_id":"MDQ6VXNlcjY4MjYyMzI=","avatar_url":"https://avatars.githubusercontent.com/u/6826232?v=4","gravatar_id":"","url":"https://api.github.com/users/konstin","html_url":"https://github.com/konstin","followers_url":"https://api.github.com/users/konstin/followers","following_url":"https://api.github.com/users/konstin/following{/other_user}","gists_url":"https://api.github.com/users/konstin/gists{/gist_id}","starred_url":"https://api.github.com/users/konstin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konstin/subscriptions","organizations_url":"https://api.github.com/users/konstin/orgs","repos_url":"https://api.github.com/users/konstin/repos","events_url":"https://api.github.com/users/konstin/events{/privacy}","received_events_url":"https://api.github.com/users/konstin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869135448,"node_id":"MDU6TGFiZWw4NjkxMzU0NDg=","url":"https://api.github.com/repos/psf/black/labels/T:%20style","name":"T: style","color":"0052cc","default":false,"description":"What do we want Blackened code to look like?"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-10-16T07:30:26Z","updated_at":"2023-10-16T17:51:53Z","closed_at":"2023-10-16T17:51:53Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the style change**\r\n\r\nCurrently, black preserves the blank line before regular doc strings, but not before raw docstrings. It should preserve them before both.\r\n\r\n**Input**\r\n\r\n```python\r\nclass TextIOWrapper(TextIOBase):\r\n    \r\n    r\"\"\"Character and line based layer over a BufferedIOBase object, buffer.\r\n\r\n    [...]\r\n    \"\"\"\r\n\r\n    _CHUNK_SIZE = 2048\r\n    \r\nclass TextIOWrapper(TextIOBase):\r\n    \r\n    \"\"\"Character and line based layer over a BufferedIOBase object, buffer.\r\n\r\n    [...]\r\n    \"\"\"\r\n\r\n    _CHUNK_SIZE = 2048\r\n```\r\n\r\n**Examples in the current _Black_ style**\r\n\r\n```python\r\nclass TextIOWrapper(TextIOBase):\r\n    r\"\"\"Character and line based layer over a BufferedIOBase object, buffer.\r\n\r\n    [...]\r\n    \"\"\"\r\n\r\n    _CHUNK_SIZE = 2048\r\n\r\n\r\nclass TextIOWrapper(TextIOBase):\r\n\r\n    \"\"\"Character and line based layer over a BufferedIOBase object, buffer.\r\n\r\n    [...]\r\n    \"\"\"\r\n\r\n    _CHUNK_SIZE = 2048\r\n```\r\n\r\n**Desired style**\r\n\r\n```python\r\nclass TextIOWrapper(TextIOBase):\r\n\r\n    r\"\"\"Character and line based layer over a BufferedIOBase object, buffer.\r\n\r\n    [...]\r\n    \"\"\"\r\n\r\n    _CHUNK_SIZE = 2048\r\n\r\n\r\nclass TextIOWrapper(TextIOBase):\r\n\r\n    \"\"\"Character and line based layer over a BufferedIOBase object, buffer.\r\n\r\n    [...]\r\n    \"\"\"\r\n\r\n    _CHUNK_SIZE = 2048\r\n```\r\n\r\n**Additional context**\r\n\r\nCurrently, black doesn't seem to consider raw triple quotes strings as docstrings, even though cpython (and PEP 257) do. I've seen some raw triple quoted doc string uses in the wild, such as the above example from cpython.","closed_by":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/psf/black/issues/3944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/3944/timeline","performed_via_github_app":null,"state_reason":"completed"}