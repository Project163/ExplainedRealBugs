{"url":"https://api.github.com/repos/psf/black/issues/4007","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/4007/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/4007/comments","events_url":"https://api.github.com/repos/psf/black/issues/4007/events","html_url":"https://github.com/psf/black/issues/4007","id":1970173923,"node_id":"I_kwDOB3dpmM51bnfj","number":4007,"title":"Preview: Improved line breaks with multiple targets","user":{"login":"MichaReiser","id":1203881,"node_id":"MDQ6VXNlcjEyMDM4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1203881?v=4","gravatar_id":"","url":"https://api.github.com/users/MichaReiser","html_url":"https://github.com/MichaReiser","followers_url":"https://api.github.com/users/MichaReiser/followers","following_url":"https://api.github.com/users/MichaReiser/following{/other_user}","gists_url":"https://api.github.com/users/MichaReiser/gists{/gist_id}","starred_url":"https://api.github.com/users/MichaReiser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MichaReiser/subscriptions","organizations_url":"https://api.github.com/users/MichaReiser/orgs","repos_url":"https://api.github.com/users/MichaReiser/repos","events_url":"https://api.github.com/users/MichaReiser/events{/privacy}","received_events_url":"https://api.github.com/users/MichaReiser/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":2955697253,"node_id":"MDU6TGFiZWwyOTU1Njk3MjUz","url":"https://api.github.com/repos/psf/black/labels/S:%20accepted","name":"S: accepted","color":"46cf54","default":false,"description":"The changes in this design / enhancement issue have been accepted and can be implemented"},{"id":3042873307,"node_id":"MDU6TGFiZWwzMDQyODczMzA3","url":"https://api.github.com/repos/psf/black/labels/F:%20linebreak","name":"F: linebreak","color":"BFD4F2","default":false,"description":"How should we split up lines?"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-10-31T10:48:12Z","updated_at":"2023-11-23T03:11:50Z","closed_at":"2023-11-23T03:11:50Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\n\r\nThe \"Improved line breaks\" preview style should break the value before the target according to the preview style documentation. This is true for the first target, but doesn't seem to be the case when using assignments with multiple targets:\r\n\r\n**To Reproduce**\r\n```python\r\na[\"a\"] = b[\"b\"] = aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\r\n```\r\n\r\nGets formatted as \r\n\r\n```python\r\na[\"a\"] = b[\r\n    \"b\"\r\n] = aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\r\n\r\n```\r\n\r\n[Playground](https://black.vercel.app/?version=stable&state=_Td6WFoAAATm1rRGAgAhARYAAAB0L-Wj4ADMAFVdAD2IimZxl1N_WlPES01_qCOT7awAfNGVJ9IWJHgdr0d2gMGKSpT3UMUMo5J6ECjUnb1jNhRjYKWZ3fsosIWsXGVDUtIk1F-eVokrlu_cNCY1wSFZAQAAAAAA-lFsvxNMpXAAAXHNAQAAALZBEqqxxGf7AgAAAAAEWVo=)\r\n\r\n**Expected behavior**\r\n\r\nBlack to parenthesize the value before splitting the targets:\r\n\r\n```python\r\na[\"a\"] = b[\"b\"] = (\r\n    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\r\n)\r\n```","closed_by":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/psf/black/issues/4007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/4007/timeline","performed_via_github_app":null,"state_reason":"completed"}