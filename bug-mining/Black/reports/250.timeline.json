[{"id":11088669216,"node_id":"LE_lADOB3dpmM54HwbgzwAAAAKU76og","url":"https://api.github.com/repos/psf/black/issues/events/11088669216","actor":{"login":"tg2648","id":45052145,"node_id":"MDQ6VXNlcjQ1MDUyMTQ1","avatar_url":"https://avatars.githubusercontent.com/u/45052145?v=4","gravatar_id":"","url":"https://api.github.com/users/tg2648","html_url":"https://github.com/tg2648","followers_url":"https://api.github.com/users/tg2648/followers","following_url":"https://api.github.com/users/tg2648/following{/other_user}","gists_url":"https://api.github.com/users/tg2648/gists{/gist_id}","starred_url":"https://api.github.com/users/tg2648/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tg2648/subscriptions","organizations_url":"https://api.github.com/users/tg2648/orgs","repos_url":"https://api.github.com/users/tg2648/repos","events_url":"https://api.github.com/users/tg2648/events{/privacy}","received_events_url":"https://api.github.com/users/tg2648/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-11-28T20:56:34Z","label":{"name":"T: bug","color":"d73a4a"},"performed_via_github_app":null},{"actor":{"login":"karthiknadig","id":3840081,"node_id":"MDQ6VXNlcjM4NDAwODE=","avatar_url":"https://avatars.githubusercontent.com/u/3840081?v=4","gravatar_id":"","url":"https://api.github.com/users/karthiknadig","html_url":"https://github.com/karthiknadig","followers_url":"https://api.github.com/users/karthiknadig/followers","following_url":"https://api.github.com/users/karthiknadig/following{/other_user}","gists_url":"https://api.github.com/users/karthiknadig/gists{/gist_id}","starred_url":"https://api.github.com/users/karthiknadig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karthiknadig/subscriptions","organizations_url":"https://api.github.com/users/karthiknadig/orgs","repos_url":"https://api.github.com/users/karthiknadig/repos","events_url":"https://api.github.com/users/karthiknadig/events{/privacy}","received_events_url":"https://api.github.com/users/karthiknadig/received_events","type":"User","user_view_type":"public","site_admin":true},"created_at":"2024-01-03T19:56:10Z","updated_at":"2024-01-03T19:56:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/408","repository_url":"https://api.github.com/repos/microsoft/vscode-black-formatter","labels_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/408/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/408/comments","events_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/408/events","html_url":"https://github.com/microsoft/vscode-black-formatter/issues/408","id":2064560515,"node_id":"I_kwDOHIRw0857DrGD","number":408,"title":"Having Issue After Updating black from 23.10.1 to 23.12.1","user":{"login":"gaotako","id":137874616,"node_id":"U_kgDOCDfMuA","avatar_url":"https://avatars.githubusercontent.com/u/137874616?v=4","gravatar_id":"","url":"https://api.github.com/users/gaotako","html_url":"https://github.com/gaotako","followers_url":"https://api.github.com/users/gaotako/followers","following_url":"https://api.github.com/users/gaotako/following{/other_user}","gists_url":"https://api.github.com/users/gaotako/gists{/gist_id}","starred_url":"https://api.github.com/users/gaotako/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaotako/subscriptions","organizations_url":"https://api.github.com/users/gaotako/orgs","repos_url":"https://api.github.com/users/gaotako/repos","events_url":"https://api.github.com/users/gaotako/events{/privacy}","received_events_url":"https://api.github.com/users/gaotako/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4007934215,"node_id":"LA_kwDOHIRw087u5DkH","url":"https://api.github.com/repos/microsoft/vscode-black-formatter/labels/triage-needed","name":"triage-needed","color":"FBCA04","default":false,"description":"Issue is not triaged."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-01-03T19:46:48Z","updated_at":"2024-01-04T19:22:05Z","closed_at":"2024-01-03T19:56:09Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":478441683,"node_id":"R_kgDOHIRw0w","name":"vscode-black-formatter","full_name":"microsoft/vscode-black-formatter","private":false,"owner":{"login":"microsoft","id":6154722,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6154722?v=4","gravatar_id":"","url":"https://api.github.com/users/microsoft","html_url":"https://github.com/microsoft","followers_url":"https://api.github.com/users/microsoft/followers","following_url":"https://api.github.com/users/microsoft/following{/other_user}","gists_url":"https://api.github.com/users/microsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/microsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/microsoft/subscriptions","organizations_url":"https://api.github.com/users/microsoft/orgs","repos_url":"https://api.github.com/users/microsoft/repos","events_url":"https://api.github.com/users/microsoft/events{/privacy}","received_events_url":"https://api.github.com/users/microsoft/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/microsoft/vscode-black-formatter","description":"Formatting support for Python using the Black formatter","fork":false,"url":"https://api.github.com/repos/microsoft/vscode-black-formatter","forks_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/forks","keys_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/keys{/key_id}","collaborators_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/teams","hooks_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/hooks","issue_events_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/events{/number}","events_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/events","assignees_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/assignees{/user}","branches_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/branches{/branch}","tags_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/tags","blobs_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/git/refs{/sha}","trees_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/git/trees{/sha}","statuses_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/statuses/{sha}","languages_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/languages","stargazers_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/stargazers","contributors_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/contributors","subscribers_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/subscribers","subscription_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/subscription","commits_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/commits{/sha}","git_commits_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/git/commits{/sha}","comments_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/comments{/number}","issue_comment_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/comments{/number}","contents_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/contents/{+path}","compare_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/compare/{base}...{head}","merges_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/merges","archive_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/downloads","issues_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues{/number}","pulls_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/pulls{/number}","milestones_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/milestones{/number}","notifications_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/labels{/name}","releases_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/releases{/id}","deployments_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/deployments","created_at":"2022-04-06T07:01:38Z","updated_at":"2025-10-31T13:21:04Z","pushed_at":"2025-09-05T20:07:34Z","git_url":"git://github.com/microsoft/vscode-black-formatter.git","ssh_url":"git@github.com:microsoft/vscode-black-formatter.git","clone_url":"https://github.com/microsoft/vscode-black-formatter.git","svn_url":"https://github.com/microsoft/vscode-black-formatter","homepage":"https://marketplace.visualstudio.com/items?itemName=ms-python.black-formatter","size":1173,"stargazers_count":177,"watchers_count":177,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":43,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":23,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":43,"open_issues":23,"watchers":177,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"After I update black==23.11.0 or black==23.12.1, VSCode can not format my file while I can format through terminal:\r\n- VSCode Log:\r\n```\r\n2024-01-03 19:32:54.231 [info] Server: Start requested.\r\n2024-01-03 19:32:54.867 [info] CWD Server: /local/home/gajianfe/Workplace/FinTechSentryPyToolkit\r\n2024-01-03 19:32:54.867 [info] Settings used to run Server:\r\n[\r\n    {\r\n        \"cwd\": \"/home/gajianfe/Workplace/FinTechSentryPyToolkit\",\r\n        \"workspace\": \"file:///home/gajianfe/Workplace/FinTechSentryPyToolkit\",\r\n        \"args\": [],\r\n        \"path\": [],\r\n        \"interpreter\": [\r\n            \"/home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/bin/python\"\r\n        ],\r\n        \"importStrategy\": \"fromEnvironment\",\r\n        \"showNotifications\": \"off\"\r\n    }\r\n]\r\n\r\n2024-01-03 19:32:54.867 [info] Global settings:\r\n{\r\n    \"cwd\": \"/local/home/gajianfe\",\r\n    \"workspace\": \"/local/home/gajianfe\",\r\n    \"args\": [],\r\n    \"path\": [],\r\n    \"interpreter\": [],\r\n    \"importStrategy\": \"fromEnvironment\",\r\n    \"showNotifications\": \"off\"\r\n}\r\n\r\n2024-01-03 19:32:54.867 [info] sys.path used to run Server:\r\n   /local/home/gajianfe/.vscode-server/extensions/ms-python.black-formatter-2023.6.0/bundled/tool\r\n   /home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python38.zip\r\n   /home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8\r\n   /home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8/lib-dynload\r\n   /home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8/site-packages\r\n   /local/home/gajianfe/.vscode-server/extensions/ms-python.black-formatter-2023.6.0/bundled/libs\r\n2024-01-03 19:32:54.870 [info] /home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/bin/python -m black --version\r\n2024-01-03 19:32:54.870 [info] CWD formatter: /home/gajianfe/Workplace/FinTechSentryPyToolkit\r\n2024-01-03 19:32:54.935 [info] Version info for formatter running for /local/home/gajianfe/Workplace/FinTechSentryPyToolkit:\r\nblack, 23.12.1 (compiled: yes)\r\nPython (CPython) 3.8.18\r\n\r\n2024-01-03 19:32:54.935 [info] SUPPORTED black>=22.3.0\r\nFOUND black==23.12.1\r\n\r\n2024-01-03 19:33:29.408 [info] [Trace - 7:33:29 PM] Sending notification 'textDocument/didChange'.\r\n2024-01-03 19:33:30.403 [info] [Trace - 7:33:30 PM] Sending notification 'textDocument/didChange'.\r\n2024-01-03 19:33:32.580 [info] [Trace - 7:33:32 PM] Sending request 'textDocument/formatting - (1)'.\r\n2024-01-03 19:33:32.588 [info] [Trace - 7:33:32 PM] Received notification 'window/logMessage'.\r\n2024-01-03 19:33:32.588 [info] /home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/bin/python -m black --stdin-filename /home/gajianfe/Workplace/FinTechSentryPyToolkit/src/FinTechSentryPyToolkit/pkgsort.py -\r\n2024-01-03 19:33:32.588 [info] [Trace - 7:33:32 PM] Received notification 'window/logMessage'.\r\n2024-01-03 19:33:32.588 [info] CWD formatter: /home/gajianfe/Workplace/FinTechSentryPyToolkit\r\n2024-01-03 19:33:32.594 [info] [Trace - 7:33:32 PM] Received notification 'window/logMessage'.\r\n2024-01-03 19:33:32.594 [info] [Error - 7:33:32 PM] Traceback (most recent call last):\r\n  File \"/local/home/gajianfe/.vscode-server/extensions/ms-python.black-formatter-2023.6.0/bundled/tool/lsp_server.py\", line 458, in _run_tool_on_document\r\n    result = utils.run_module(\r\n  File \"/local/home/gajianfe/.vscode-server/extensions/ms-python.black-formatter-2023.6.0/bundled/tool/lsp_utils.py\", line 173, in run_module\r\n    return _run_module(module, argv, use_stdin, source)\r\n  File \"/local/home/gajianfe/.vscode-server/extensions/ms-python.black-formatter-2023.6.0/bundled/tool/lsp_utils.py\", line 156, in _run_module\r\n    runpy.run_module(module, run_name=\"__main__\")\r\n  File \"/home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8/runpy.py\", line 210, in run_module\r\n    return _run_code(code, {}, init_globals, run_name, mod_spec)\r\n  File \"/home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8/site-packages/black/__main__.py\", line 3, in <module>\r\n    patched_main()\r\n  File \"src/black/__init__.py\", line 1541, in patched_main\r\n  File \"/home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8/site-packages/click/core.py\", line 1157, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8/site-packages/click/core.py\", line 1078, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8/site-packages/click/core.py\", line 1434, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8/site-packages/click/core.py\", line 783, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8/site-packages/click/decorators.py\", line 33, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"src/black/__init__.py\", line 616, in main\r\n  File \"src/black/__init__.py\", line 703, in get_sources\r\n  File \"/home/gajianfe/Workplace/FinTechSentryPyToolkit/conda/dev/lib/python3.8/pathlib.py\", line 908, in relative_to\r\n    raise ValueError(\"{!r} does not start with {!r}\"\r\nValueError: '/home/gajianfe/Workplace/FinTechSentryPyToolkit/src/FinTechSentryPyToolkit/pkgsort.py' does not start with '/local/home/gajianfe/Workplace/FinTechSentryPyToolkit/src/FinTechSentryPyToolkit'\r\n```\r\n- Terminal Log\r\n```\r\n$ black pkgsort.py \r\nreformatted pkgsort.py\r\n\r\nAll done! ‚ú® üç∞ ‚ú®\r\n1 file reformatted.\r\n```\r\n\r\n**I think the issue is related to configuring formatter environment with soft links:**\r\nOn my server, `/home/gajianfe` is a soft link to `/local/home/gajianfe`, and `/home` and `/local/home` are two different directories. It seems that vscode-formatter fetch path in two ways, and one is from absolute file system location, and one is from my working directory (that uses soft link).\r\nThese settings are created by the server, and I can not modify them. I try to find if there is any setting to control this VSCode behavior, but fail to find any information. \r\n \r\nWhen using black==23.10.1, VSCode can format properly:\r\n```\r\n2024-01-03 19:29:19.137 [info] Server: Start requested.\r\n2024-01-03 19:29:19.536 [info] CWD Server: /local/home/gajianfe/Workplace/FinTechSentryPyToolkit\r\n2024-01-03 19:29:19.536 [info] Settings used to run Server:\r\n[\r\n    {\r\n        \"cwd\": \"/home/gajianfe/Workplace/FinTechSentryPyToolkit\",\r\n        \"workspace\": \"file:///home/gajianfe/Workplace/FinTechSentryPyToolkit\",\r\n        \"args\": [],\r\n        \"path\": [],\r\n        \"interpreter\": [\r\n            \"/home/gajianfe/MiniConda3/envs/Default/bin/python\"\r\n        ],\r\n        \"importStrategy\": \"fromEnvironment\",\r\n        \"showNotifications\": \"off\"\r\n    }\r\n]\r\n\r\n2024-01-03 19:29:19.536 [info] Global settings:\r\n{\r\n    \"cwd\": \"/local/home/gajianfe\",\r\n    \"workspace\": \"/local/home/gajianfe\",\r\n    \"args\": [],\r\n    \"path\": [],\r\n    \"interpreter\": [],\r\n    \"importStrategy\": \"fromEnvironment\",\r\n    \"showNotifications\": \"off\"\r\n}\r\n\r\n2024-01-03 19:29:19.536 [info] sys.path used to run Server:\r\n   /local/home/gajianfe/.vscode-server/extensions/ms-python.black-formatter-2023.6.0/bundled/tool\r\n   /home/gajianfe/MiniConda3/envs/Default/lib/python311.zip\r\n   /home/gajianfe/MiniConda3/envs/Default/lib/python3.11\r\n   /home/gajianfe/MiniConda3/envs/Default/lib/python3.11/lib-dynload\r\n   /home/gajianfe/MiniConda3/envs/Default/lib/python3.11/site-packages\r\n   /local/home/gajianfe/.vscode-server/extensions/ms-python.black-formatter-2023.6.0/bundled/libs\r\n2024-01-03 19:29:19.537 [info] /home/gajianfe/MiniConda3/envs/Default/bin/python -m black --version\r\n2024-01-03 19:29:19.537 [info] CWD formatter: /home/gajianfe/Workplace/FinTechSentryPyToolkit\r\n2024-01-03 19:29:19.594 [info] Version info for formatter running for /local/home/gajianfe/Workplace/FinTechSentryPyToolkit:\r\nblack, 23.10.1 (compiled: yes)\r\nPython (CPython) 3.11.4\r\n\r\n2024-01-03 19:29:19.594 [info] SUPPORTED black>=22.3.0\r\nFOUND black==23.10.1\r\n\r\n2024-01-03 19:29:27.235 [info] [Trace - 7:29:27 PM] Sending request 'textDocument/formatting - (1)'.\r\n2024-01-03 19:29:27.243 [info] [Trace - 7:29:27 PM] Received notification 'window/logMessage'.\r\n2024-01-03 19:29:27.243 [info] /home/gajianfe/MiniConda3/envs/Default/bin/python -m black --stdin-filename /home/gajianfe/Workplace/FinTechSentryPyToolkit/src/FinTechSentryPyToolkit/pkgsort.py -\r\n2024-01-03 19:29:27.243 [info] [Trace - 7:29:27 PM] Received notification 'window/logMessage'.\r\n2024-01-03 19:29:27.243 [info] CWD formatter: /home/gajianfe/Workplace/FinTechSentryPyToolkit\r\n2024-01-03 19:29:27.507 [info] [Trace - 7:29:27 PM] Received notification 'window/logMessage'.\r\n2024-01-03 19:29:27.508 [info] reformatted /home/gajianfe/Workplace/FinTechSentryPyToolkit/src/FinTechSentryPyToolkit/pkgsort.py\r\n\r\nAll done! ‚ú® üç∞ ‚ú®\r\n1 file reformatted.\r\n```","reactions":{"url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/408/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/psf/black/issues/comments/1900226075","html_url":"https://github.com/psf/black/issues/4077#issuecomment-1900226075","issue_url":"https://api.github.com/repos/psf/black/issues/4077","id":1900226075,"node_id":"IC_kwDOB3dpmM5xQyYb","user":{"login":"faph","id":8397805,"node_id":"MDQ6VXNlcjgzOTc4MDU=","avatar_url":"https://avatars.githubusercontent.com/u/8397805?v=4","gravatar_id":"","url":"https://api.github.com/users/faph","html_url":"https://github.com/faph","followers_url":"https://api.github.com/users/faph/followers","following_url":"https://api.github.com/users/faph/following{/other_user}","gists_url":"https://api.github.com/users/faph/gists{/gist_id}","starred_url":"https://api.github.com/users/faph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faph/subscriptions","organizations_url":"https://api.github.com/users/faph/orgs","repos_url":"https://api.github.com/users/faph/repos","events_url":"https://api.github.com/users/faph/events{/privacy}","received_events_url":"https://api.github.com/users/faph/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-19T11:21:34Z","updated_at":"2024-01-19T11:21:34Z","body":"Subscribing as we are affected by this too.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/1900226075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"faph","id":8397805,"node_id":"MDQ6VXNlcjgzOTc4MDU=","avatar_url":"https://avatars.githubusercontent.com/u/8397805?v=4","gravatar_id":"","url":"https://api.github.com/users/faph","html_url":"https://github.com/faph","followers_url":"https://api.github.com/users/faph/followers","following_url":"https://api.github.com/users/faph/following{/other_user}","gists_url":"https://api.github.com/users/faph/gists{/gist_id}","starred_url":"https://api.github.com/users/faph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faph/subscriptions","organizations_url":"https://api.github.com/users/faph/orgs","repos_url":"https://api.github.com/users/faph/repos","events_url":"https://api.github.com/users/faph/events{/privacy}","received_events_url":"https://api.github.com/users/faph/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"dankrzeminski32","id":76189617,"node_id":"MDQ6VXNlcjc2MTg5NjE3","avatar_url":"https://avatars.githubusercontent.com/u/76189617?v=4","gravatar_id":"","url":"https://api.github.com/users/dankrzeminski32","html_url":"https://github.com/dankrzeminski32","followers_url":"https://api.github.com/users/dankrzeminski32/followers","following_url":"https://api.github.com/users/dankrzeminski32/following{/other_user}","gists_url":"https://api.github.com/users/dankrzeminski32/gists{/gist_id}","starred_url":"https://api.github.com/users/dankrzeminski32/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dankrzeminski32/subscriptions","organizations_url":"https://api.github.com/users/dankrzeminski32/orgs","repos_url":"https://api.github.com/users/dankrzeminski32/repos","events_url":"https://api.github.com/users/dankrzeminski32/events{/privacy}","received_events_url":"https://api.github.com/users/dankrzeminski32/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-22T06:52:26Z","updated_at":"2024-01-22T06:52:26Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/psf/black/issues/4161","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/4161/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/4161/comments","events_url":"https://api.github.com/repos/psf/black/issues/4161/events","html_url":"https://github.com/psf/black/pull/4161","id":2093214887,"node_id":"PR_kwDOB3dpmM5kryTU","number":4161,"title":"fix: pathlib exception handling with symlinks","user":{"login":"dankrzeminski32","id":76189617,"node_id":"MDQ6VXNlcjc2MTg5NjE3","avatar_url":"https://avatars.githubusercontent.com/u/76189617?v=4","gravatar_id":"","url":"https://api.github.com/users/dankrzeminski32","html_url":"https://github.com/dankrzeminski32","followers_url":"https://api.github.com/users/dankrzeminski32/followers","following_url":"https://api.github.com/users/dankrzeminski32/following{/other_user}","gists_url":"https://api.github.com/users/dankrzeminski32/gists{/gist_id}","starred_url":"https://api.github.com/users/dankrzeminski32/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dankrzeminski32/subscriptions","organizations_url":"https://api.github.com/users/dankrzeminski32/orgs","repos_url":"https://api.github.com/users/dankrzeminski32/repos","events_url":"https://api.github.com/users/dankrzeminski32/events{/privacy}","received_events_url":"https://api.github.com/users/dankrzeminski32/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-01-22T06:52:26Z","updated_at":"2024-01-24T05:57:17Z","closed_at":"2024-01-22T17:46:57Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":125266328,"node_id":"MDEwOlJlcG9zaXRvcnkxMjUyNjYzMjg=","name":"black","full_name":"psf/black","private":false,"owner":{"login":"psf","id":50630501,"node_id":"MDEyOk9yZ2FuaXphdGlvbjUwNjMwNTAx","avatar_url":"https://avatars.githubusercontent.com/u/50630501?v=4","gravatar_id":"","url":"https://api.github.com/users/psf","html_url":"https://github.com/psf","followers_url":"https://api.github.com/users/psf/followers","following_url":"https://api.github.com/users/psf/following{/other_user}","gists_url":"https://api.github.com/users/psf/gists{/gist_id}","starred_url":"https://api.github.com/users/psf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psf/subscriptions","organizations_url":"https://api.github.com/users/psf/orgs","repos_url":"https://api.github.com/users/psf/repos","events_url":"https://api.github.com/users/psf/events{/privacy}","received_events_url":"https://api.github.com/users/psf/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/psf/black","description":"The uncompromising Python code formatter","fork":false,"url":"https://api.github.com/repos/psf/black","forks_url":"https://api.github.com/repos/psf/black/forks","keys_url":"https://api.github.com/repos/psf/black/keys{/key_id}","collaborators_url":"https://api.github.com/repos/psf/black/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/psf/black/teams","hooks_url":"https://api.github.com/repos/psf/black/hooks","issue_events_url":"https://api.github.com/repos/psf/black/issues/events{/number}","events_url":"https://api.github.com/repos/psf/black/events","assignees_url":"https://api.github.com/repos/psf/black/assignees{/user}","branches_url":"https://api.github.com/repos/psf/black/branches{/branch}","tags_url":"https://api.github.com/repos/psf/black/tags","blobs_url":"https://api.github.com/repos/psf/black/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/psf/black/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/psf/black/git/refs{/sha}","trees_url":"https://api.github.com/repos/psf/black/git/trees{/sha}","statuses_url":"https://api.github.com/repos/psf/black/statuses/{sha}","languages_url":"https://api.github.com/repos/psf/black/languages","stargazers_url":"https://api.github.com/repos/psf/black/stargazers","contributors_url":"https://api.github.com/repos/psf/black/contributors","subscribers_url":"https://api.github.com/repos/psf/black/subscribers","subscription_url":"https://api.github.com/repos/psf/black/subscription","commits_url":"https://api.github.com/repos/psf/black/commits{/sha}","git_commits_url":"https://api.github.com/repos/psf/black/git/commits{/sha}","comments_url":"https://api.github.com/repos/psf/black/comments{/number}","issue_comment_url":"https://api.github.com/repos/psf/black/issues/comments{/number}","contents_url":"https://api.github.com/repos/psf/black/contents/{+path}","compare_url":"https://api.github.com/repos/psf/black/compare/{base}...{head}","merges_url":"https://api.github.com/repos/psf/black/merges","archive_url":"https://api.github.com/repos/psf/black/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/psf/black/downloads","issues_url":"https://api.github.com/repos/psf/black/issues{/number}","pulls_url":"https://api.github.com/repos/psf/black/pulls{/number}","milestones_url":"https://api.github.com/repos/psf/black/milestones{/number}","notifications_url":"https://api.github.com/repos/psf/black/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/psf/black/labels{/name}","releases_url":"https://api.github.com/repos/psf/black/releases{/id}","deployments_url":"https://api.github.com/repos/psf/black/deployments","created_at":"2018-03-14T19:54:45Z","updated_at":"2025-11-09T16:48:04Z","pushed_at":"2025-11-05T18:14:18Z","git_url":"git://github.com/psf/black.git","ssh_url":"git@github.com:psf/black.git","clone_url":"https://github.com/psf/black.git","svn_url":"https://github.com/psf/black","homepage":"https://black.readthedocs.io/en/stable/","size":7569,"stargazers_count":41126,"watchers_count":41126,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":2665,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":337,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["autopep8","code","codeformatter","formatter","gofmt","hacktoberfest","pre-commit-hook","python","yapf"],"visibility":"public","forks":2665,"open_issues":337,"watchers":41126,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/4161","html_url":"https://github.com/psf/black/pull/4161","diff_url":"https://github.com/psf/black/pull/4161.diff","patch_url":"https://github.com/psf/black/pull/4161.patch","merged_at":"2024-01-22T17:46:57Z"},"body":"Fixes #4077 \r\n\r\n### Description\r\n\r\nAdded additional exception handling when calculating the root relative file path. ","reactions":{"url":"https://api.github.com/repos/psf/black/issues/4161/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/4161/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":11560072288,"node_id":"CE_lADOB3dpmM54HwbgzwAAAAKxCLRg","url":"https://api.github.com/repos/psf/black/issues/events/11560072288","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-01-22T17:46:58Z","state_reason":null,"performed_via_github_app":null},{"id":11560072369,"node_id":"REFE_lADOB3dpmM54HwbgzwAAAAKxCLSx","url":"https://api.github.com/repos/psf/black/issues/events/11560072369","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8fe602b1fa91dc6db682d1dba79a8a7341597271","commit_url":"https://api.github.com/repos/psf/black/commits/8fe602b1fa91dc6db682d1dba79a8a7341597271","created_at":"2024-01-22T17:46:59Z","performed_via_github_app":null},{"actor":{"login":"karthiknadig","id":3840081,"node_id":"MDQ6VXNlcjM4NDAwODE=","avatar_url":"https://avatars.githubusercontent.com/u/3840081?v=4","gravatar_id":"","url":"https://api.github.com/users/karthiknadig","html_url":"https://github.com/karthiknadig","followers_url":"https://api.github.com/users/karthiknadig/followers","following_url":"https://api.github.com/users/karthiknadig/following{/other_user}","gists_url":"https://api.github.com/users/karthiknadig/gists{/gist_id}","starred_url":"https://api.github.com/users/karthiknadig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karthiknadig/subscriptions","organizations_url":"https://api.github.com/users/karthiknadig/orgs","repos_url":"https://api.github.com/users/karthiknadig/repos","events_url":"https://api.github.com/users/karthiknadig/events{/privacy}","received_events_url":"https://api.github.com/users/karthiknadig/received_events","type":"User","user_view_type":"public","site_admin":true},"created_at":"2024-02-02T20:09:14Z","updated_at":"2024-02-02T20:09:14Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/446","repository_url":"https://api.github.com/repos/microsoft/vscode-black-formatter","labels_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/446/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/446/comments","events_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/446/events","html_url":"https://github.com/microsoft/vscode-black-formatter/issues/446","id":2115096171,"node_id":"I_kwDOHIRw085-Ec5r","number":446,"title":"Black doesn't work when folder is opened as a symlink","user":{"login":"ischurov","id":2717321,"node_id":"MDQ6VXNlcjI3MTczMjE=","avatar_url":"https://avatars.githubusercontent.com/u/2717321?v=4","gravatar_id":"","url":"https://api.github.com/users/ischurov","html_url":"https://github.com/ischurov","followers_url":"https://api.github.com/users/ischurov/followers","following_url":"https://api.github.com/users/ischurov/following{/other_user}","gists_url":"https://api.github.com/users/ischurov/gists{/gist_id}","starred_url":"https://api.github.com/users/ischurov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ischurov/subscriptions","organizations_url":"https://api.github.com/users/ischurov/orgs","repos_url":"https://api.github.com/users/ischurov/repos","events_url":"https://api.github.com/users/ischurov/events{/privacy}","received_events_url":"https://api.github.com/users/ischurov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4007934215,"node_id":"LA_kwDOHIRw087u5DkH","url":"https://api.github.com/repos/microsoft/vscode-black-formatter/labels/triage-needed","name":"triage-needed","color":"FBCA04","default":false,"description":"Issue is not triaged."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-02-02T14:42:21Z","updated_at":"2024-02-02T20:09:13Z","closed_at":"2024-02-02T20:09:13Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":478441683,"node_id":"R_kgDOHIRw0w","name":"vscode-black-formatter","full_name":"microsoft/vscode-black-formatter","private":false,"owner":{"login":"microsoft","id":6154722,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6154722?v=4","gravatar_id":"","url":"https://api.github.com/users/microsoft","html_url":"https://github.com/microsoft","followers_url":"https://api.github.com/users/microsoft/followers","following_url":"https://api.github.com/users/microsoft/following{/other_user}","gists_url":"https://api.github.com/users/microsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/microsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/microsoft/subscriptions","organizations_url":"https://api.github.com/users/microsoft/orgs","repos_url":"https://api.github.com/users/microsoft/repos","events_url":"https://api.github.com/users/microsoft/events{/privacy}","received_events_url":"https://api.github.com/users/microsoft/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/microsoft/vscode-black-formatter","description":"Formatting support for Python using the Black formatter","fork":false,"url":"https://api.github.com/repos/microsoft/vscode-black-formatter","forks_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/forks","keys_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/keys{/key_id}","collaborators_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/teams","hooks_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/hooks","issue_events_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/events{/number}","events_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/events","assignees_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/assignees{/user}","branches_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/branches{/branch}","tags_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/tags","blobs_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/git/refs{/sha}","trees_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/git/trees{/sha}","statuses_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/statuses/{sha}","languages_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/languages","stargazers_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/stargazers","contributors_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/contributors","subscribers_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/subscribers","subscription_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/subscription","commits_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/commits{/sha}","git_commits_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/git/commits{/sha}","comments_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/comments{/number}","issue_comment_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/comments{/number}","contents_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/contents/{+path}","compare_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/compare/{base}...{head}","merges_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/merges","archive_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/downloads","issues_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues{/number}","pulls_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/pulls{/number}","milestones_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/milestones{/number}","notifications_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/labels{/name}","releases_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/releases{/id}","deployments_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/deployments","created_at":"2022-04-06T07:01:38Z","updated_at":"2025-10-31T13:21:04Z","pushed_at":"2025-09-05T20:07:34Z","git_url":"git://github.com/microsoft/vscode-black-formatter.git","ssh_url":"git@github.com:microsoft/vscode-black-formatter.git","clone_url":"https://github.com/microsoft/vscode-black-formatter.git","svn_url":"https://github.com/microsoft/vscode-black-formatter","homepage":"https://marketplace.visualstudio.com/items?itemName=ms-python.black-formatter","size":1173,"stargazers_count":177,"watchers_count":177,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":43,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":23,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":43,"open_issues":23,"watchers":177,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"\nType: <b>Bug</b>\n\nI am using Remote Tunnels. On a remote system, I have a folder /vol/tcm10/ischurov/graphene-magnetic and a symlink to that folder in /home/ischurov/tcm10/graphene-magnetic. When I open the folder using a symlink, and try to format a file with black (e.g. on saving), I have the following:\n\n```\n2024-02-02 15:36:18.689 [info] [Trace - 3:36:18 PM] Sending request 'textDocument/formatting - (3)'.\n2024-02-02 15:36:18.694 [info] [Trace - 3:36:18 PM] Received notification 'window/logMessage'.\n2024-02-02 15:36:18.694 [info] /nix/store/dl6jppcsbgrx3pn05zwzh4fk1gg8bcpd-python3-3.11.7-env/bin/python3 -m black --stdin-filename /home/ischurov/tcm10/graphene-magnetic/test.py -\n2024-02-02 15:36:18.695 [info] [Trace - 3:36:18 PM] Received notification 'window/logMessage'.\n2024-02-02 15:36:18.695 [info] CWD formatter: /home/ischurov/tcm10/graphene-magnetic\n2024-02-02 15:36:18.702 [info] [Trace - 3:36:18 PM] Received notification 'window/logMessage'.\n2024-02-02 15:36:18.702 [info] No Python files are present to be formatted. Nothing to do üò¥\n\n2024-02-02 15:36:18.702 [info] [Trace - 3:36:18 PM] Received response 'textDocument/formatting - (3)' in 13ms.\n```\n\nWhen I invoke the command from the terminal, I get the following:\n\n```\nischurov@cn05:~/tcm10/graphene-magnetic$ /nix/store/dl6jppcsbgrx3pn05zwzh4fk1gg8bcpd-python3-3.11.7-env/bin/python3 -m black --stdin-filename /home/ischurov/tcm10/graphene-magnetic/test.py -\nTraceback (most recent call last):\n  File \"<frozen runpy>\", line 198, in _run_module_as_main\n  File \"<frozen runpy>\", line 88, in _run_code\n  File \"/nix/store/nax4lri0ymvmj18jpyvzl0cgg965ws0a-python3.11-black-23.11.0/lib/python3.11/site-packages/black/__main__.py\", line 3, in <module>\n    patched_main()\n  File \"/nix/store/nax4lri0ymvmj18jpyvzl0cgg965ws0a-python3.11-black-23.11.0/lib/python3.11/site-packages/black/__init__.py\", line 1504, in patched_main\n    main()\n  File \"/nix/store/cnxd9sz13rs17ahadm39iam4cl32wriq-python3.11-click-8.1.7/lib/python3.11/site-packages/click/core.py\", line 1157, in __call__\n    return self.main(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/nix/store/cnxd9sz13rs17ahadm39iam4cl32wriq-python3.11-click-8.1.7/lib/python3.11/site-packages/click/core.py\", line 1078, in main\n    rv = self.invoke(ctx)\n         ^^^^^^^^^^^^^^^^\n  File \"/nix/store/cnxd9sz13rs17ahadm39iam4cl32wriq-python3.11-click-8.1.7/lib/python3.11/site-packages/click/core.py\", line 1434, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/nix/store/cnxd9sz13rs17ahadm39iam4cl32wriq-python3.11-click-8.1.7/lib/python3.11/site-packages/click/core.py\", line 783, in invoke\n    return __callback(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/nix/store/cnxd9sz13rs17ahadm39iam4cl32wriq-python3.11-click-8.1.7/lib/python3.11/site-packages/click/decorators.py\", line 33, in new_func\n    return f(get_current_context(), *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/nix/store/nax4lri0ymvmj18jpyvzl0cgg965ws0a-python3.11-black-23.11.0/lib/python3.11/site-packages/black/__init__.py\", line 600, in main\n    sources = get_sources(\n              ^^^^^^^^^^^^\n  File \"/nix/store/nax4lri0ymvmj18jpyvzl0cgg965ws0a-python3.11-black-23.11.0/lib/python3.11/site-packages/black/__init__.py\", line 687, in get_sources\n    root_relative_path = path.absolute().relative_to(root).as_posix()\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/nix/store/w4fvvhkzb0ssv0fw5j34pw09f0qw84w8-python3-3.11.7/lib/python3.11/pathlib.py\", line 730, in relative_to\n    raise ValueError(\"{!r} is not in the subpath of {!r}\"\nValueError: '/home/ischurov/tcm10/graphene-magnetic/test.py' is not in the subpath of '/vol/tcm10/ischurov/graphene-magnetic' OR one path is relative and the other is absolute.\n```\n\nIf I open the same folder by its real path, not a symlink, Black works without any problems.\n\nThe issue can possible be specific to either Remote Tunnels or Linux because I cannot reproduce it on my local Mac machine.\n\nI can reproduce it with the pre-release (v2024.1.10331006) version of Black extension.\n\nExtension version: 2024.1.10331006\nVS Code version: Code 1.86.0 (05047486b6df5eb8d44b2ecd70ea3bdf775fd937, 2024-01-31T10:29:15.765Z)\nOS version: Darwin x64 22.1.0\nModes:\nRemote OS version: Linux x64 5.15.0-79-generic\nRemote OS version: Linux x64 5.15.0-79-generic\n\n<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n|CPUs|Intel(R) Core(TM) i5-8257U CPU @ 1.40GHz (8 x 1400)|\n|GPU Status|2d_canvas: enabled<br>canvas_oop_rasterization: disabled_off<br>direct_rendering_display_compositor: disabled_off_ok<br>gpu_compositing: enabled<br>multiple_raster_threads: enabled_on<br>opengl: enabled_on<br>rasterization: enabled<br>raw_draw: disabled_off_ok<br>skia_graphite: disabled_off<br>video_decode: enabled<br>video_encode: enabled<br>webgl: enabled<br>webgl2: enabled<br>webgpu: enabled|\n|Load (avg)|5, 15, 23|\n|Memory (System)|16.00GB (2.32GB free)|\n|Process Argv|--crash-reporter-id 6268c79f-ba03-42d2-bf4d-cd2dfec6306c|\n|Screen Reader|no|\n|VM|0%|\n\n|Item|Value|\n|---|---|\n|Remote|cn24|\n|OS|Linux x64 5.15.0-79-generic|\n|CPUs|Intel(R) Xeon(R) CPU E5-2660 0 @ 2.20GHz (16 x 1200)|\n|Memory (System)|125.83GB (121.81GB free)|\n|VM|0%|\n\n|Item|Value|\n|---|---|\n|Remote|cn24|\n|OS|Linux x64 5.15.0-79-generic|\n|CPUs|Intel(R) Xeon(R) CPU E5-2660 0 @ 2.20GHz (16 x 1200)|\n|Memory (System)|125.83GB (121.81GB free)|\n|VM|0%|\n</details><details>\n<summary>A/B Experiments</summary>\n\n```\nvsliv368cf:30146710\nvspor879:30202332\nvspor708:30202333\nvspor363:30204092\nvscod805:30301674\nbinariesv615:30325510\nvsaa593cf:30376535\npy29gd2263:30899288\nc4g48928:30535728\nazure-dev_surveyone:30548225\n2i9eh265:30646982\n0bi6i642:30951795\npythongtdpath:30769146\nwelcomedialog:30910333\npythonidxpt:30866567\npythonnoceb:30805159\nasynctok:30898717\npythontestfixt:30902429\npythonregdiag2:30936856\npyreplss1:30897532\npythonmypyd1:30879173\npythoncet0:30885854\npythontbext0:30879054\ndsvsc016:30899300\ndsvsc017:30899301\ndsvsc018:30899302\ndsvsc019b:30953937\n3ef8e399:30949928\n\n```\n\n</details>\n\n<!-- generated by issue reporter -->","reactions":{"url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vscode-black-formatter/issues/446/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"id":11766475108,"node_id":"REFE_lADOB3dpmM54HwbgzwAAAAK9Vilk","url":"https://api.github.com/repos/psf/black/issues/events/11766475108","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7735032532c49ae2ec752f409d74fd26b6a692ce","commit_url":"https://api.github.com/repos/hauntsaninja/black/commits/7735032532c49ae2ec752f409d74fd26b6a692ce","created_at":"2024-02-11T08:02:50Z","performed_via_github_app":null},{"id":11766476188,"node_id":"REFE_lADOB3dpmM54HwbgzwAAAAK9Vi2c","url":"https://api.github.com/repos/psf/black/issues/events/11766476188","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"418aba9231baa5c1c435dad668da19da4a9580e4","commit_url":"https://api.github.com/repos/hauntsaninja/black/commits/418aba9231baa5c1c435dad668da19da4a9580e4","created_at":"2024-02-11T08:03:27Z","performed_via_github_app":null},{"actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-11T08:05:33Z","updated_at":"2024-02-11T08:05:33Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/psf/black/issues/4222","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/4222/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/4222/comments","events_url":"https://api.github.com/repos/psf/black/issues/4222/events","html_url":"https://github.com/psf/black/pull/4222","id":2128885187,"node_id":"PR_kwDOB3dpmM5mkl8k","number":4222,"title":"Fix ignoring input files for symlink reasons","user":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-02-11T08:05:32Z","updated_at":"2024-02-12T08:04:12Z","closed_at":"2024-02-12T08:04:09Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":125266328,"node_id":"MDEwOlJlcG9zaXRvcnkxMjUyNjYzMjg=","name":"black","full_name":"psf/black","private":false,"owner":{"login":"psf","id":50630501,"node_id":"MDEyOk9yZ2FuaXphdGlvbjUwNjMwNTAx","avatar_url":"https://avatars.githubusercontent.com/u/50630501?v=4","gravatar_id":"","url":"https://api.github.com/users/psf","html_url":"https://github.com/psf","followers_url":"https://api.github.com/users/psf/followers","following_url":"https://api.github.com/users/psf/following{/other_user}","gists_url":"https://api.github.com/users/psf/gists{/gist_id}","starred_url":"https://api.github.com/users/psf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psf/subscriptions","organizations_url":"https://api.github.com/users/psf/orgs","repos_url":"https://api.github.com/users/psf/repos","events_url":"https://api.github.com/users/psf/events{/privacy}","received_events_url":"https://api.github.com/users/psf/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/psf/black","description":"The uncompromising Python code formatter","fork":false,"url":"https://api.github.com/repos/psf/black","forks_url":"https://api.github.com/repos/psf/black/forks","keys_url":"https://api.github.com/repos/psf/black/keys{/key_id}","collaborators_url":"https://api.github.com/repos/psf/black/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/psf/black/teams","hooks_url":"https://api.github.com/repos/psf/black/hooks","issue_events_url":"https://api.github.com/repos/psf/black/issues/events{/number}","events_url":"https://api.github.com/repos/psf/black/events","assignees_url":"https://api.github.com/repos/psf/black/assignees{/user}","branches_url":"https://api.github.com/repos/psf/black/branches{/branch}","tags_url":"https://api.github.com/repos/psf/black/tags","blobs_url":"https://api.github.com/repos/psf/black/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/psf/black/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/psf/black/git/refs{/sha}","trees_url":"https://api.github.com/repos/psf/black/git/trees{/sha}","statuses_url":"https://api.github.com/repos/psf/black/statuses/{sha}","languages_url":"https://api.github.com/repos/psf/black/languages","stargazers_url":"https://api.github.com/repos/psf/black/stargazers","contributors_url":"https://api.github.com/repos/psf/black/contributors","subscribers_url":"https://api.github.com/repos/psf/black/subscribers","subscription_url":"https://api.github.com/repos/psf/black/subscription","commits_url":"https://api.github.com/repos/psf/black/commits{/sha}","git_commits_url":"https://api.github.com/repos/psf/black/git/commits{/sha}","comments_url":"https://api.github.com/repos/psf/black/comments{/number}","issue_comment_url":"https://api.github.com/repos/psf/black/issues/comments{/number}","contents_url":"https://api.github.com/repos/psf/black/contents/{+path}","compare_url":"https://api.github.com/repos/psf/black/compare/{base}...{head}","merges_url":"https://api.github.com/repos/psf/black/merges","archive_url":"https://api.github.com/repos/psf/black/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/psf/black/downloads","issues_url":"https://api.github.com/repos/psf/black/issues{/number}","pulls_url":"https://api.github.com/repos/psf/black/pulls{/number}","milestones_url":"https://api.github.com/repos/psf/black/milestones{/number}","notifications_url":"https://api.github.com/repos/psf/black/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/psf/black/labels{/name}","releases_url":"https://api.github.com/repos/psf/black/releases{/id}","deployments_url":"https://api.github.com/repos/psf/black/deployments","created_at":"2018-03-14T19:54:45Z","updated_at":"2025-11-09T16:48:04Z","pushed_at":"2025-11-05T18:14:18Z","git_url":"git://github.com/psf/black.git","ssh_url":"git@github.com:psf/black.git","clone_url":"https://github.com/psf/black.git","svn_url":"https://github.com/psf/black","homepage":"https://black.readthedocs.io/en/stable/","size":7569,"stargazers_count":41126,"watchers_count":41126,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":2665,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":337,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["autopep8","code","codeformatter","formatter","gofmt","hacktoberfest","pre-commit-hook","python","yapf"],"visibility":"public","forks":2665,"open_issues":337,"watchers":41126,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/4222","html_url":"https://github.com/psf/black/pull/4222","diff_url":"https://github.com/psf/black/pull/4222.diff","patch_url":"https://github.com/psf/black/pull/4222.patch","merged_at":"2024-02-12T08:04:09Z"},"body":"This relates to #4015, #4161 and the behaviour of os.getcwd()\r\n\r\nBlack is a big user of pathlib and as such loves doing `.resolve()`, since for a long time it was the only good way of getting an absolute path in pathlib. However, this has two problems:\r\n\r\nThe first minor problem is performance, e.g. in #3751 I (safely) got rid of a bunch of `.resolve()` which made Black 40% faster on cached runs.\r\n\r\nThe second more important problem is that always resolving symlinks results in unintuitive exclusion behaviour. For instance, a gitignored symlink should never alter formatting of your actual code. This kind of thing was reported by users a few times.\r\n\r\nIn #3846, I improved the exclusion rule logic for symlinks in `gen_python_files` and everything was good.\r\n\r\nBut `gen_python_files` isn't enough, there's also `get_sources`, which handles user specified paths directly (instead of files Black discovers). So in #4015, I made a very similar change to #3846 for `get_sources`, and this is where some problems began.\r\n\r\nThe core issue was the line:\r\n```\r\nroot_relative_path = path.absolute().relative_to(root).as_posix()\r\n```\r\nThe first issue is that despite root being computed from user inputs, we call `.resolve()` while computing root (likely unecessarily). Which means that `path` may not actually be relative to `root`. So I started off this PR trying to fix that, when I ran into the second issue. Which is that `os.getcwd()` (as called by `os.path.abspath` or `Path.absolute` or `Path.cwd`) also often resolves symlinks!\r\n```\r\n>>> import os\r\n>>> os.environ.get(\"PWD\")\r\n'/Users/shantanu/dev/black/symlink/bug'\r\n>>> os.getcwd()\r\n'/Users/shantanu/dev/black/actual/bug'\r\n```\r\nThis also meant that the breakage often would not show up when input relative paths.\r\n\r\nThis doesn't affect `gen_python_files` / #3846 because things are known to be relative to `root` and always absolute.\r\n\r\nAnyway, it looks like #4161 fixed the crash by just swallowing the error and ignoring the file. Instead, we should just try to compute the actual relative path. I think this PR should be quite safe, but we could also consider reverting some of the previous changes; the associated issues weren't too popular.\r\n\r\nAt the same time, I think there's still behaviour that can be improved and I kind of want to make larger changes, but maybe I'll save that for if we do something like #3952\r\n\r\nFixes #4205, fixes #4209, original report in #4077","reactions":{"url":"https://api.github.com/repos/psf/black/issues/4222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/4222/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":11771116963,"node_id":"REFE_lADOB3dpmM54HwbgzwAAAAK9nP2j","url":"https://api.github.com/repos/psf/black/issues/events/11771116963","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"23dfc5b2c3b0694a8c27e58e28439591976aaf94","commit_url":"https://api.github.com/repos/psf/black/commits/23dfc5b2c3b0694a8c27e58e28439591976aaf94","created_at":"2024-02-12T08:04:11Z","performed_via_github_app":null}]