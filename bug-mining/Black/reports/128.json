{"url":"https://api.github.com/repos/psf/black/issues/1244","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/1244/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/1244/comments","events_url":"https://api.github.com/repos/psf/black/issues/1244/events","html_url":"https://github.com/psf/black/issues/1244","id":554098610,"node_id":"MDU6SXNzdWU1NTQwOTg2MTA=","number":1244,"title":"Preserve r-string prefix capitalization","user":{"login":"janosh","id":30958850,"node_id":"MDQ6VXNlcjMwOTU4ODUw","avatar_url":"https://avatars.githubusercontent.com/u/30958850?v=4","gravatar_id":"","url":"https://api.github.com/users/janosh","html_url":"https://github.com/janosh","followers_url":"https://api.github.com/users/janosh/followers","following_url":"https://api.github.com/users/janosh/following{/other_user}","gists_url":"https://api.github.com/users/janosh/gists{/gist_id}","starred_url":"https://api.github.com/users/janosh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janosh/subscriptions","organizations_url":"https://api.github.com/users/janosh/orgs","repos_url":"https://api.github.com/users/janosh/repos","events_url":"https://api.github.com/users/janosh/events{/privacy}","received_events_url":"https://api.github.com/users/janosh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":867432796,"node_id":"MDU6TGFiZWw4Njc0MzI3OTY=","url":"https://api.github.com/repos/psf/black/labels/T:%20enhancement","name":"T: enhancement","color":"a2eeef","default":false,"description":"New feature or request"},{"id":2955697253,"node_id":"MDU6TGFiZWwyOTU1Njk3MjUz","url":"https://api.github.com/repos/psf/black/labels/S:%20accepted","name":"S: accepted","color":"46cf54","default":false,"description":"The changes in this design / enhancement issue have been accepted and can be implemented"},{"id":2972766151,"node_id":"MDU6TGFiZWwyOTcyNzY2MTUx","url":"https://api.github.com/repos/psf/black/labels/F:%20strings","name":"F: strings","color":"BFD4F2","default":false,"description":"Related to our handling of strings"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-01-23T11:26:28Z","updated_at":"2021-06-09T00:46:10Z","closed_at":"2021-06-09T00:46:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The [MagicPython](https://github.com/MagicStack/MagicPython) syntax highlighter (and VS Code, Sublime Text and Atom which all use it) interprets upper (`R\"foo\"`) and lower case r-strings (`r\"bar\"`) differently. The reason for this is explained in their readme:\r\n\r\n> Raw strings are often interpreted as regular expressions. This is a bit of a problem, because depending on the application this may actually not be the most common case. Raw strings can simply be the input to some other processor, in which case regexp-specific highlighting is really hindering the overall readability. MagicPython follows a convention that a lower-case r prefix means a regexp string, but an upper-case R prefix means just a raw string with no special regexp semantics. This convention holds true for all of the legal combinations of prefixes. As always the syntax is biased towards Python 3, thus it will mark Python-2-only prefixes (i.e. variations of ur) as deprecated.\r\n\r\nThis is a neat feature, especially in cases with more involved string interpolation which are hard to read and easy to mess up without proper highlighting. As a simplified example:\r\n\r\n```py\r\nimport matplotlib.pyplot as plt\r\n\r\nplt.title(R\"$y_\\mathrm{true}$ vs $y_\\mathrm{pred}$\")\r\nplt.title(r\"$y_\\mathrm{true}$ vs $y_\\mathrm{pred}$\")\r\n```\r\n\r\nNote that even GitHub syntax highlighting has this feature. This is what it looks like in VS Code:\r\n\r\n![upper](https://user-images.githubusercontent.com/30958850/72980560-ba861f80-3dd2-11ea-85a7-24899d4a3a69.png)\r\n![lower](https://user-images.githubusercontent.com/30958850/72980561-bb1eb600-3dd2-11ea-9397-23092e184fa2.png)\r\n\r\nUnfortunately, this feature becomes unusable in conjunction with `black` since `black` automatically lower cases all r-strings.\r\n\r\n**Describe the solution you'd like**\r\n\r\nEither add an option to `pyproject.toml` to disable automatic lower casing and/or change `black`'s default behavior to preserve string prefix casing. I prefer the latter.\r\n\r\n**Additional context**\r\n\r\nThis behavior was introduced in #198, apparently without being aware that some syntax highlighters treat the cases differently.","closed_by":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/psf/black/issues/1244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/1244/timeline","performed_via_github_app":null,"state_reason":"completed"}