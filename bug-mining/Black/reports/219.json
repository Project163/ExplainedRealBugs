{"url":"https://api.github.com/repos/psf/black/issues/3320","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/3320/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/3320/comments","events_url":"https://api.github.com/repos/psf/black/issues/3320/events","html_url":"https://github.com/psf/black/issues/3320","id":1402610906,"node_id":"I_kwDOB3dpmM5TmiTa","number":3320,"title":"style regression: too long single line docstrings have their quotes moved to a new line.","user":{"login":"onerandomusername","id":71233171,"node_id":"MDQ6VXNlcjcxMjMzMTcx","avatar_url":"https://avatars.githubusercontent.com/u/71233171?v=4","gravatar_id":"","url":"https://api.github.com/users/onerandomusername","html_url":"https://github.com/onerandomusername","followers_url":"https://api.github.com/users/onerandomusername/followers","following_url":"https://api.github.com/users/onerandomusername/following{/other_user}","gists_url":"https://api.github.com/users/onerandomusername/gists{/gist_id}","starred_url":"https://api.github.com/users/onerandomusername/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onerandomusername/subscriptions","organizations_url":"https://api.github.com/users/onerandomusername/orgs","repos_url":"https://api.github.com/users/onerandomusername/repos","events_url":"https://api.github.com/users/onerandomusername/events{/privacy}","received_events_url":"https://api.github.com/users/onerandomusername/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":3042873307,"node_id":"MDU6TGFiZWwzMDQyODczMzA3","url":"https://api.github.com/repos/psf/black/labels/F:%20linebreak","name":"F: linebreak","color":"BFD4F2","default":false,"description":"How should we split up lines?"},{"id":4476035512,"node_id":"LA_kwDOB3dpmM8AAAABCsrhuA","url":"https://api.github.com/repos/psf/black/labels/F:%20docstrings","name":"F: docstrings","color":"BFD4F2","default":false,"description":"How we format docstrings"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2022-10-10T05:18:57Z","updated_at":"2022-12-13T04:56:39Z","closed_at":"2022-12-13T04:56:39Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\nPlease make sure that the bug is not already fixed either in newer versions or the\r\ncurrent development version. To confirm this, you have three options:\r\n\r\n1. Update Black's version if a newer release exists: `pip install -U black`\r\n2. Use the online formatter at <https://black.vercel.app/?version=main>, which will use\r\n   the latest main branch.\r\n3. Or run _Black_ on your machine:\r\n   - create a new virtualenv (make sure it's the same Python version);\r\n   - clone this repository;\r\n   - run `pip install -e .[d]`;\r\n   - run `pip install -r test_requirements.txt`\r\n   - make sure it's sane by running `python -m pytest`; and\r\n   - run `black` like you did last time.\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nSingle-line docstrings that are longer than the line length have the final three `\"` moved to a new line.\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n**To Reproduce**\r\n\r\nFor example, take this code:\r\n```py\r\nfrom typing import Optional\r\n\r\n# leaves this the same\r\ndef large_image_url(self) -> Optional[str]:\r\n    \"\"\"Optional[:class:`str`]: Returns a URL pointing to the large image asset of this activity, if applicable.\r\n    \"\"\"\r\n    pass\r\n\r\n\r\n# leaves this the same too\r\ndef large_image_url(self) -> Optional[str]:\r\n    \"\"\"\r\n    Optional[:class:`str`]: Returns a URL pointing to the large image asset of this activity, if applicable.\r\n    \"\"\"\r\n    pass\r\n\r\n\r\n# depending on the length of the docstring, this one *may* be left as-is\r\ndef large_image_url(self) -> Optional[str]:\r\n    \"\"\"\r\n    Optional[:class:`str`]: Returns a URL pointing to the large image asset of this activity, if applicable.\"\"\"\r\n    pass\r\n\r\n\r\n# but this one is modified\r\ndef large_image_url(self) -> Optional[str]:\r\n    \"\"\"Optional[:class:`str`]: Returns a URL pointing to the large image asset of this activity, if applicable.\"\"\"\r\n    pass\r\n\r\n```\r\n\r\nAnd run it with these arguments:\r\n\r\n```sh\r\n$ black file.py --preview\r\n```\r\n\r\nWe get this format:\r\n\r\n```py\r\nfrom typing import Optional\r\n\r\n# leaves this the same\r\ndef large_image_url(self) -> Optional[str]:\r\n    \"\"\"Optional[:class:`str`]: Returns a URL pointing to the large image asset of this activity, if applicable.\r\n    \"\"\"\r\n    pass\r\n\r\n\r\n# leaves this the same too\r\ndef large_image_url(self) -> Optional[str]:\r\n    \"\"\"\r\n    Optional[:class:`str`]: Returns a URL pointing to the large image asset of this activity, if applicable.\r\n    \"\"\"\r\n    pass\r\n\r\n\r\n# this one is also left as-is\r\ndef large_image_url(self) -> Optional[str]:\r\n    \"\"\"\r\n    Optional[:class:`str`]: Returns a URL pointing to the large image asset of this activity, if applicable.\r\n    \"\"\"\r\n    pass\r\n\r\n\r\n# but this one is modified\r\ndef large_image_url(self) -> Optional[str]:\r\n    \"\"\"Optional[:class:`str`]: Returns a URL pointing to the large image asset of this activity, if applicable.\r\n    \"\"\"\r\n    pass\r\n```\r\n\r\n**Expected behavior**\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nSingle line docstrings are left alone. I understand what this change is supposed to do, and on already multiline docstrings this wouldn't be an issue (although it would be nice for the docstring formatter to be entirely consistent among all docstrings instead of having different behavior for the line length but i digress).\r\n\r\n**Environment**\r\n\r\n<!-- Please complete the following information: -->\r\n\r\n- Black's version: <!-- e.g. [main] --> 22.10.0\r\n- OS and Python version: <!-- e.g. [Linux/Python 3.7.4rc1] --> Python 3.11.0rc2, on linux, but i can recreate with python 3.8 too\r\n\r\n\r\n**Additional Comments**\r\n\r\nThis seems like a regression from #3044","closed_by":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/psf/black/issues/3320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/3320/timeline","performed_via_github_app":null,"state_reason":"completed"}