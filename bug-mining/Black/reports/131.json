{"url":"https://api.github.com/repos/psf/black/issues/1290","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/1290/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/1290/comments","events_url":"https://api.github.com/repos/psf/black/issues/1290/events","html_url":"https://github.com/psf/black/issues/1290","id":574660743,"node_id":"MDU6SXNzdWU1NzQ2NjA3NDM=","number":1290,"title":"[Bug bounty] Black formatting gallery for chosen PyPI packages","user":{"login":"ambv","id":55281,"node_id":"MDQ6VXNlcjU1Mjgx","avatar_url":"https://avatars.githubusercontent.com/u/55281?v=4","gravatar_id":"","url":"https://api.github.com/users/ambv","html_url":"https://github.com/ambv","followers_url":"https://api.github.com/users/ambv/followers","following_url":"https://api.github.com/users/ambv/following{/other_user}","gists_url":"https://api.github.com/users/ambv/gists{/gist_id}","starred_url":"https://api.github.com/users/ambv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ambv/subscriptions","organizations_url":"https://api.github.com/users/ambv/orgs","repos_url":"https://api.github.com/users/ambv/repos","events_url":"https://api.github.com/users/ambv/events{/privacy}","received_events_url":"https://api.github.com/users/ambv/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":867432796,"node_id":"MDU6TGFiZWw4Njc0MzI3OTY=","url":"https://api.github.com/repos/psf/black/labels/T:%20enhancement","name":"T: enhancement","color":"a2eeef","default":false,"description":"New feature or request"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-03-03T13:16:18Z","updated_at":"2020-03-09T13:42:28Z","closed_at":"2020-03-09T13:42:28Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bounty amount\r\n$500 paid on merge to an agreed PayPal account.\r\n\r\n## Motivation\r\nWe need a way to easily see what formatting would Black apply to given PyPI projects. This is especially important to compare formatting changes between two versions of Black.\r\n\r\n## Specification\r\n### Docker image\r\nCreate a Docker image running with Python 3.8 which accepts the following arguments:\r\n- `-p`: name of the PyPI source package to download;\r\n- optionally `-v`: version of the PyPI source package to download; \r\n- version of Black to apply formatting with;\r\n- optionally: `pyproject.toml` for Black to apply formatting with.\r\n\r\nThere can be multiple pairs of Black version and configs. If there is more than one, the second formatting should be applied over the first one.\r\n\r\n### Result\r\nRunning the Docker image will produce a sub-directory in the output directory named $PROJECT-$VERSION. It will be a Git repository with the following branches:\r\n- `master`: a commit with the original contents of the downloaded PyPI source package;\r\n- `black-$N`: a commit with `master` reformatted with Black version $N;\r\n- `black-$N+1`: a commit with `black-$N` reformatted with Black version $N+1;\r\n- `black-$N+2`: a commit with `black-$N+1` reformatted with Black version $N+2;\r\n- and so on.\r\n\r\n### Example invocations of the tool\r\n* Django 3.0.3, three versions of Black, no pyproject.toml\r\n```sh\r\n$ docker run -it -v /host/directory/for/output:/output black_gallery:latest -p Django -v 3.0.3 19.3b0 19.10b0 master\r\n```\r\n* latest Twisted, two versions, with pyproject.toml\r\n```sh\r\n$ docker run -it -v /host/directory/for/output:/output black_gallery:latest -p Twisted 19.10b0:pyproject-19.10b0.toml master:pyproject-master.toml\r\n```\r\nNote: no `-v` specified, would download \"19.10.0\" at the time of writing this issue (3.3.2020).\r\n\r\n### Support for CPython standard library tests and PyPy\r\nOn top of PyPI packages, the tool needs to accept the following special values of `-p` and `-v`:\r\n* when `-p` is \"cpython\", the project to download is \"https://github.com/python/cpython/archive/VERSION.zip\" where VERSION is specified with `-v` (for example `-v v3.9.0a4` or `-v master`);\r\n* when `-p` is \"pypy\", the project to download is \"https://foss.heptapod.net/pypy/pypy/repository/VERSION/archive.tar.bz2\" where VERSION is specified with `-v` (for example: `-v release-pypy2.7-v7.3.0rc4` or `-v branch/default`).\r\n\r\n### Logs\r\nThe tool should log output verbosely to stdout.\r\n\r\n### Source code location\r\nAll source code for this project should be located in a `gallery` directory in the `psf/black` Git repository.\r\n\r\n## FAQ\r\n### Can I call dibs on this one?\r\nNo, anybody is invited to present us with a pull request as long as this issue is open. If you'd like to announce that you're working on it, submitting a work-in-progress pull request is a great way to do it.\r\n\r\n### What if multiple people present pull requests?\r\nIn this situation the maintainers of Black will choose the one they like best.\r\n\r\n### What if there are multiple authors on the pull request?\r\nThe principal author of the pull request receives the full amount. If they decide to split it later, they are free to do whatever they wish.\r\n\r\n### Can you use a different platform than PayPal?\r\nNo.\r\n\r\n### This issue is under-specified.\r\nWe're happy to clarify.\r\n\r\n### I have a different question.\r\nAsk below.","closed_by":{"login":"ambv","id":55281,"node_id":"MDQ6VXNlcjU1Mjgx","avatar_url":"https://avatars.githubusercontent.com/u/55281?v=4","gravatar_id":"","url":"https://api.github.com/users/ambv","html_url":"https://github.com/ambv","followers_url":"https://api.github.com/users/ambv/followers","following_url":"https://api.github.com/users/ambv/following{/other_user}","gists_url":"https://api.github.com/users/ambv/gists{/gist_id}","starred_url":"https://api.github.com/users/ambv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ambv/subscriptions","organizations_url":"https://api.github.com/users/ambv/orgs","repos_url":"https://api.github.com/users/ambv/repos","events_url":"https://api.github.com/users/ambv/events{/privacy}","received_events_url":"https://api.github.com/users/ambv/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/psf/black/issues/1290/reactions","total_count":8,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/1290/timeline","performed_via_github_app":null,"state_reason":"completed"}