[{"id":7511951624,"node_id":"LE_lADOB3dpmM5TLeppzwAAAAG_v0kI","url":"https://api.github.com/repos/psf/black/issues/events/7511951624","actor":{"login":"bugfood","id":2976480,"node_id":"MDQ6VXNlcjI5NzY0ODA=","avatar_url":"https://avatars.githubusercontent.com/u/2976480?v=4","gravatar_id":"","url":"https://api.github.com/users/bugfood","html_url":"https://github.com/bugfood","followers_url":"https://api.github.com/users/bugfood/followers","following_url":"https://api.github.com/users/bugfood/following{/other_user}","gists_url":"https://api.github.com/users/bugfood/gists{/gist_id}","starred_url":"https://api.github.com/users/bugfood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bugfood/subscriptions","organizations_url":"https://api.github.com/users/bugfood/orgs","repos_url":"https://api.github.com/users/bugfood/repos","events_url":"https://api.github.com/users/bugfood/events{/privacy}","received_events_url":"https://api.github.com/users/bugfood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-10-04T00:44:30Z","label":{"name":"T: enhancement","color":"a2eeef"},"performed_via_github_app":null},{"id":7511957348,"node_id":"LE_lADOB3dpmM5TLeppzwAAAAG_v19k","url":"https://api.github.com/repos/psf/black/issues/events/7511957348","actor":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-10-04T00:45:55Z","label":{"name":"C: vim","color":"AEEE87"},"performed_via_github_app":null},{"actor":{"login":"bugfood","id":2976480,"node_id":"MDQ6VXNlcjI5NzY0ODA=","avatar_url":"https://avatars.githubusercontent.com/u/2976480?v=4","gravatar_id":"","url":"https://api.github.com/users/bugfood","html_url":"https://github.com/bugfood","followers_url":"https://api.github.com/users/bugfood/followers","following_url":"https://api.github.com/users/bugfood/following{/other_user}","gists_url":"https://api.github.com/users/bugfood/gists{/gist_id}","starred_url":"https://api.github.com/users/bugfood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bugfood/subscriptions","organizations_url":"https://api.github.com/users/bugfood/orgs","repos_url":"https://api.github.com/users/bugfood/repos","events_url":"https://api.github.com/users/bugfood/events{/privacy}","received_events_url":"https://api.github.com/users/bugfood/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-04T00:48:11Z","updated_at":"2022-10-04T00:48:11Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/psf/black/issues/3309","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/3309/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/3309/comments","events_url":"https://api.github.com/repos/psf/black/issues/3309/events","html_url":"https://github.com/psf/black/pull/3309","id":1395520650,"node_id":"PR_kwDOB3dpmM5AGM7x","number":3309,"title":"Vim plugin: allow using system black rather than virtualenv","user":{"login":"bugfood","id":2976480,"node_id":"MDQ6VXNlcjI5NzY0ODA=","avatar_url":"https://avatars.githubusercontent.com/u/2976480?v=4","gravatar_id":"","url":"https://api.github.com/users/bugfood","html_url":"https://github.com/bugfood","followers_url":"https://api.github.com/users/bugfood/followers","following_url":"https://api.github.com/users/bugfood/following{/other_user}","gists_url":"https://api.github.com/users/bugfood/gists{/gist_id}","starred_url":"https://api.github.com/users/bugfood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bugfood/subscriptions","organizations_url":"https://api.github.com/users/bugfood/orgs","repos_url":"https://api.github.com/users/bugfood/repos","events_url":"https://api.github.com/users/bugfood/events{/privacy}","received_events_url":"https://api.github.com/users/bugfood/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-10-04T00:48:11Z","updated_at":"2023-04-19T03:12:46Z","closed_at":"2022-10-27T23:55:34Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":125266328,"node_id":"MDEwOlJlcG9zaXRvcnkxMjUyNjYzMjg=","name":"black","full_name":"psf/black","private":false,"owner":{"login":"psf","id":50630501,"node_id":"MDEyOk9yZ2FuaXphdGlvbjUwNjMwNTAx","avatar_url":"https://avatars.githubusercontent.com/u/50630501?v=4","gravatar_id":"","url":"https://api.github.com/users/psf","html_url":"https://github.com/psf","followers_url":"https://api.github.com/users/psf/followers","following_url":"https://api.github.com/users/psf/following{/other_user}","gists_url":"https://api.github.com/users/psf/gists{/gist_id}","starred_url":"https://api.github.com/users/psf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psf/subscriptions","organizations_url":"https://api.github.com/users/psf/orgs","repos_url":"https://api.github.com/users/psf/repos","events_url":"https://api.github.com/users/psf/events{/privacy}","received_events_url":"https://api.github.com/users/psf/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/psf/black","description":"The uncompromising Python code formatter","fork":false,"url":"https://api.github.com/repos/psf/black","forks_url":"https://api.github.com/repos/psf/black/forks","keys_url":"https://api.github.com/repos/psf/black/keys{/key_id}","collaborators_url":"https://api.github.com/repos/psf/black/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/psf/black/teams","hooks_url":"https://api.github.com/repos/psf/black/hooks","issue_events_url":"https://api.github.com/repos/psf/black/issues/events{/number}","events_url":"https://api.github.com/repos/psf/black/events","assignees_url":"https://api.github.com/repos/psf/black/assignees{/user}","branches_url":"https://api.github.com/repos/psf/black/branches{/branch}","tags_url":"https://api.github.com/repos/psf/black/tags","blobs_url":"https://api.github.com/repos/psf/black/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/psf/black/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/psf/black/git/refs{/sha}","trees_url":"https://api.github.com/repos/psf/black/git/trees{/sha}","statuses_url":"https://api.github.com/repos/psf/black/statuses/{sha}","languages_url":"https://api.github.com/repos/psf/black/languages","stargazers_url":"https://api.github.com/repos/psf/black/stargazers","contributors_url":"https://api.github.com/repos/psf/black/contributors","subscribers_url":"https://api.github.com/repos/psf/black/subscribers","subscription_url":"https://api.github.com/repos/psf/black/subscription","commits_url":"https://api.github.com/repos/psf/black/commits{/sha}","git_commits_url":"https://api.github.com/repos/psf/black/git/commits{/sha}","comments_url":"https://api.github.com/repos/psf/black/comments{/number}","issue_comment_url":"https://api.github.com/repos/psf/black/issues/comments{/number}","contents_url":"https://api.github.com/repos/psf/black/contents/{+path}","compare_url":"https://api.github.com/repos/psf/black/compare/{base}...{head}","merges_url":"https://api.github.com/repos/psf/black/merges","archive_url":"https://api.github.com/repos/psf/black/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/psf/black/downloads","issues_url":"https://api.github.com/repos/psf/black/issues{/number}","pulls_url":"https://api.github.com/repos/psf/black/pulls{/number}","milestones_url":"https://api.github.com/repos/psf/black/milestones{/number}","notifications_url":"https://api.github.com/repos/psf/black/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/psf/black/labels{/name}","releases_url":"https://api.github.com/repos/psf/black/releases{/id}","deployments_url":"https://api.github.com/repos/psf/black/deployments","created_at":"2018-03-14T19:54:45Z","updated_at":"2025-11-09T16:48:04Z","pushed_at":"2025-11-05T18:14:18Z","git_url":"git://github.com/psf/black.git","ssh_url":"git@github.com:psf/black.git","clone_url":"https://github.com/psf/black.git","svn_url":"https://github.com/psf/black","homepage":"https://black.readthedocs.io/en/stable/","size":7569,"stargazers_count":41126,"watchers_count":41126,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":2665,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":337,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["autopep8","code","codeformatter","formatter","gofmt","hacktoberfest","pre-commit-hook","python","yapf"],"visibility":"public","forks":2665,"open_issues":337,"watchers":41126,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/3309","html_url":"https://github.com/psf/black/pull/3309","diff_url":"https://github.com/psf/black/pull/3309.diff","patch_url":"https://github.com/psf/black/pull/3309.patch","merged_at":"2022-10-27T23:55:34Z"},"body":"Provide a configuration parameter to the Vim plugin which will allow the plugin to skip setting up a virtualenv. This is useful when there is a system installation of black (e.g. from a Linux distribution) which the user prefers to use.\r\n\r\nUsing a virtualenv remains the default.\r\n\r\n### Description\r\n\r\nI have several reasons why using a virtualenv is undesirable to me. I have listed them in the following feature request.\r\nFixes: https://github.com/psf/black/issues/3308\r\n\r\n### Checklist - did you ...\r\n\r\n\r\n- [Y] Add an entry in `CHANGES.md` if necessary?\r\n- [N/A?] Add / update tests if necessary?\r\n- [Y] Add new / update outdated documentation?\r\n\r\nThanks,\r\nCorey","reactions":{"url":"https://api.github.com/repos/psf/black/issues/3309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/3309/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/psf/black/issues/comments/1277765998","html_url":"https://github.com/psf/black/issues/3308#issuecomment-1277765998","issue_url":"https://api.github.com/repos/psf/black/issues/3308","id":1277765998,"node_id":"IC_kwDOB3dpmM5MKSlu","user":{"login":"krowbar","id":588712,"node_id":"MDQ6VXNlcjU4ODcxMg==","avatar_url":"https://avatars.githubusercontent.com/u/588712?v=4","gravatar_id":"","url":"https://api.github.com/users/krowbar","html_url":"https://github.com/krowbar","followers_url":"https://api.github.com/users/krowbar/followers","following_url":"https://api.github.com/users/krowbar/following{/other_user}","gists_url":"https://api.github.com/users/krowbar/gists{/gist_id}","starred_url":"https://api.github.com/users/krowbar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krowbar/subscriptions","organizations_url":"https://api.github.com/users/krowbar/orgs","repos_url":"https://api.github.com/users/krowbar/repos","events_url":"https://api.github.com/users/krowbar/events{/privacy}","received_events_url":"https://api.github.com/users/krowbar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-13T15:05:23Z","updated_at":"2022-10-13T15:05:23Z","body":"Doesn't setting \r\n`g:black_virtualenv = \"/usr/local/\"`\r\nsomewhere in vim startup files (or specifically for python files) do that?\r\nThe path may vary depending on your distribution, it will search for the site-packages below that point (see _get_virtualenv_site_packages function)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/1277765998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"krowbar","id":588712,"node_id":"MDQ6VXNlcjU4ODcxMg==","avatar_url":"https://avatars.githubusercontent.com/u/588712?v=4","gravatar_id":"","url":"https://api.github.com/users/krowbar","html_url":"https://github.com/krowbar","followers_url":"https://api.github.com/users/krowbar/followers","following_url":"https://api.github.com/users/krowbar/following{/other_user}","gists_url":"https://api.github.com/users/krowbar/gists{/gist_id}","starred_url":"https://api.github.com/users/krowbar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krowbar/subscriptions","organizations_url":"https://api.github.com/users/krowbar/orgs","repos_url":"https://api.github.com/users/krowbar/repos","events_url":"https://api.github.com/users/krowbar/events{/privacy}","received_events_url":"https://api.github.com/users/krowbar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/1279559811","html_url":"https://github.com/psf/black/issues/3308#issuecomment-1279559811","issue_url":"https://api.github.com/repos/psf/black/issues/3308","id":1279559811,"node_id":"IC_kwDOB3dpmM5MRIiD","user":{"login":"bugfood","id":2976480,"node_id":"MDQ6VXNlcjI5NzY0ODA=","avatar_url":"https://avatars.githubusercontent.com/u/2976480?v=4","gravatar_id":"","url":"https://api.github.com/users/bugfood","html_url":"https://github.com/bugfood","followers_url":"https://api.github.com/users/bugfood/followers","following_url":"https://api.github.com/users/bugfood/following{/other_user}","gists_url":"https://api.github.com/users/bugfood/gists{/gist_id}","starred_url":"https://api.github.com/users/bugfood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bugfood/subscriptions","organizations_url":"https://api.github.com/users/bugfood/orgs","repos_url":"https://api.github.com/users/bugfood/repos","events_url":"https://api.github.com/users/bugfood/events{/privacy}","received_events_url":"https://api.github.com/users/bugfood/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-14T22:55:13Z","updated_at":"2022-10-14T22:56:54Z","body":"> Doesn't setting `g:black_virtualenv = \"/usr/local/\"` somewhere in vim startup files (or specifically for python files) do that? The path may vary depending on your distribution, it will search for the site-packages below that point (see _get_virtualenv_site_packages function)\r\n\r\nHmm. I hadn't looked at that before now, but I don't think it's suitable. I'll elaborate below.\r\n\r\nThat function is:\r\n```\r\ndef _get_virtualenv_site_packages(venv_path, pyver):\r\n  if sys.platform[:3] == \"win\":\r\n    return venv_path / 'Lib' / 'site-packages'\r\n  return venv_path / 'lib' / f'python{pyver[0]}.{pyver[1]}' / 'site-packages'\r\n\r\n```\r\n\r\n...and it's called as (abridged):\r\n```\r\n  virtualenv_path = Path(vim.eval(\"g:black_virtualenv\")).expanduser()\r\n  virtualenv_site_packages = str(_get_virtualenv_site_packages(virtualenv_path, pyver))\r\n  if not virtualenv_path.is_dir():\r\n    # (set up black virtualenv)...\r\n```\r\n\r\nSo it looks like `g:black_virtualenv` needs to refer to a directory that has subdirectories `lib/python3.10/site-packages`, at least for my python version.\r\n\r\nThis doesn't match anything in the Debian package structure.\r\n```\r\n$ dpkg -L black\r\n/.\r\n/usr\r\n/usr/bin\r\n/usr/bin/black\r\n/usr/lib\r\n/usr/lib/python3\r\n/usr/lib/python3/dist-packages\r\n/usr/lib/python3/dist-packages/_black_version.py\r\n/usr/lib/python3/dist-packages/black\r\n/usr/lib/python3/dist-packages/black/__init__.py\r\n/usr/lib/python3/dist-packages/black/__main__.py\r\n/usr/lib/python3/dist-packages/black/brackets.py\r\n/usr/lib/python3/dist-packages/black/cache.py\r\n/usr/lib/python3/dist-packages/black/comments.py\r\n/usr/lib/python3/dist-packages/black/concurrency.py\r\n/usr/lib/python3/dist-packages/black/const.py\r\n/usr/lib/python3/dist-packages/black/debug.py\r\n/usr/lib/python3/dist-packages/black/files.py\r\n/usr/lib/python3/dist-packages/black/handle_ipynb_magics.py\r\n/usr/lib/python3/dist-packages/black/linegen.py\r\n/usr/lib/python3/dist-packages/black/lines.py\r\n/usr/lib/python3/dist-packages/black/mode.py\r\n/usr/lib/python3/dist-packages/black/nodes.py\r\n/usr/lib/python3/dist-packages/black/numerics.py\r\n/usr/lib/python3/dist-packages/black/output.py\r\n/usr/lib/python3/dist-packages/black/parsing.py\r\n/usr/lib/python3/dist-packages/black/py.typed\r\n/usr/lib/python3/dist-packages/black/report.py\r\n/usr/lib/python3/dist-packages/black/rusty.py\r\n/usr/lib/python3/dist-packages/black/strings.py\r\n/usr/lib/python3/dist-packages/black/trans.py\r\n/usr/lib/python3/dist-packages/black-22.8.0.dist-info\r\n/usr/lib/python3/dist-packages/black-22.8.0.dist-info/AUTHORS.md\r\n/usr/lib/python3/dist-packages/black-22.8.0.dist-info/METADATA\r\n/usr/lib/python3/dist-packages/black-22.8.0.dist-info/RECORD\r\n/usr/lib/python3/dist-packages/black-22.8.0.dist-info/WHEEL\r\n/usr/lib/python3/dist-packages/black-22.8.0.dist-info/entry_points.txt\r\n/usr/lib/python3/dist-packages/black-22.8.0.dist-info/top_level.txt\r\n/usr/lib/python3/dist-packages/blackd\r\n/usr/lib/python3/dist-packages/blackd/__init__.py\r\n/usr/lib/python3/dist-packages/blackd/__main__.py\r\n/usr/lib/python3/dist-packages/blackd/middlewares.py\r\n/usr/lib/python3/dist-packages/blib2to3\r\n/usr/lib/python3/dist-packages/blib2to3/Grammar.txt\r\n/usr/lib/python3/dist-packages/blib2to3/PatternGrammar.txt\r\n/usr/lib/python3/dist-packages/blib2to3/__init__.py\r\n/usr/lib/python3/dist-packages/blib2to3/pgen2\r\n/usr/lib/python3/dist-packages/blib2to3/pgen2/__init__.py\r\n/usr/lib/python3/dist-packages/blib2to3/pgen2/conv.py\r\n/usr/lib/python3/dist-packages/blib2to3/pgen2/driver.py\r\n/usr/lib/python3/dist-packages/blib2to3/pgen2/grammar.py\r\n/usr/lib/python3/dist-packages/blib2to3/pgen2/literals.py\r\n/usr/lib/python3/dist-packages/blib2to3/pgen2/parse.py\r\n/usr/lib/python3/dist-packages/blib2to3/pgen2/pgen.py\r\n/usr/lib/python3/dist-packages/blib2to3/pgen2/token.py\r\n/usr/lib/python3/dist-packages/blib2to3/pgen2/tokenize.py\r\n/usr/lib/python3/dist-packages/blib2to3/pygram.py\r\n/usr/lib/python3/dist-packages/blib2to3/pytree.py\r\n/usr/share\r\n/usr/share/bash-completion\r\n/usr/share/bash-completion/completions\r\n/usr/share/bash-completion/completions/black\r\n/usr/share/doc\r\n/usr/share/doc/black\r\n/usr/share/doc/black/README.Debian\r\n/usr/share/doc/black/changelog.Debian.gz\r\n/usr/share/doc/black/changelog.gz\r\n/usr/share/doc/black/copyright\r\n/usr/share/man\r\n/usr/share/man/man1\r\n/usr/share/man/man1/black-primer.1.gz\r\n/usr/share/man/man1/black.1.gz\r\n```\r\n\r\nI can trick the plugin by making an empty dir, e.g.:\r\n```\r\nmkdir -p /tmp/black/lib/python3.10/site-packages/\r\n```\r\n...and then setting in vim:\r\n```\r\n:let g:black_virtualenv = \"/tmp/black\"\r\n```\r\n...but that seems hackish, and it will break upon my next python version upgrade or if the plugin is ever modified to do any other validation of the virtualenv.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/1279559811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bugfood","id":2976480,"node_id":"MDQ6VXNlcjI5NzY0ODA=","avatar_url":"https://avatars.githubusercontent.com/u/2976480?v=4","gravatar_id":"","url":"https://api.github.com/users/bugfood","html_url":"https://github.com/bugfood","followers_url":"https://api.github.com/users/bugfood/followers","following_url":"https://api.github.com/users/bugfood/following{/other_user}","gists_url":"https://api.github.com/users/bugfood/gists{/gist_id}","starred_url":"https://api.github.com/users/bugfood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bugfood/subscriptions","organizations_url":"https://api.github.com/users/bugfood/orgs","repos_url":"https://api.github.com/users/bugfood/repos","events_url":"https://api.github.com/users/bugfood/events{/privacy}","received_events_url":"https://api.github.com/users/bugfood/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/1281096128","html_url":"https://github.com/psf/black/issues/3308#issuecomment-1281096128","issue_url":"https://api.github.com/repos/psf/black/issues/3308","id":1281096128,"node_id":"IC_kwDOB3dpmM5MW_nA","user":{"login":"krowbar","id":588712,"node_id":"MDQ6VXNlcjU4ODcxMg==","avatar_url":"https://avatars.githubusercontent.com/u/588712?v=4","gravatar_id":"","url":"https://api.github.com/users/krowbar","html_url":"https://github.com/krowbar","followers_url":"https://api.github.com/users/krowbar/followers","following_url":"https://api.github.com/users/krowbar/following{/other_user}","gists_url":"https://api.github.com/users/krowbar/gists{/gist_id}","starred_url":"https://api.github.com/users/krowbar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krowbar/subscriptions","organizations_url":"https://api.github.com/users/krowbar/orgs","repos_url":"https://api.github.com/users/krowbar/repos","events_url":"https://api.github.com/users/krowbar/events{/privacy}","received_events_url":"https://api.github.com/users/krowbar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-17T15:55:50Z","updated_at":"2022-10-17T15:55:50Z","body":"`g:black_virtualenv = \"/usr/local/\"`\r\nworked (at least for me) under 22.8.0, but failed like you predicted with 22.10.0 requiring access python site-packages directory.\r\n\r\nIt's (at least partly) related to the CACHE_DIR (or setting BLACK_CACHE_DIR environment variable).\r\n`...`\r\n`  File \"/usr/local/lib/python3.9/site-packages/black/nodes.py\", line 25, in <module>`\r\n` pygram.initialize(CACHE_DIR)`\r\n`...`\r\n`FileNotFoundError: [Errno 2] No such file or directory: /usr/local/lib/python3.9/sitepackages/blib2to3/home/rkruus/.cache/black/22.10.0/`\r\n\r\nThat cache is now being being forced under the site-packages directory, even when setting BLACK_CACHE_DIR -- BLACK_CACHE_DIR is appended to site-packages.\r\nExplicitly setting that variable that uses an absolute path may work?\r\nOr test for write in the CACHE_DIR and fallback to $HOME/.cache/black?\r\n\r\nThe previous default behaviour was to to use (as can be seen in the error message above): \r\n`$HOME/.cache/black/VERSION`\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/1281096128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"krowbar","id":588712,"node_id":"MDQ6VXNlcjU4ODcxMg==","avatar_url":"https://avatars.githubusercontent.com/u/588712?v=4","gravatar_id":"","url":"https://api.github.com/users/krowbar","html_url":"https://github.com/krowbar","followers_url":"https://api.github.com/users/krowbar/followers","following_url":"https://api.github.com/users/krowbar/following{/other_user}","gists_url":"https://api.github.com/users/krowbar/gists{/gist_id}","starred_url":"https://api.github.com/users/krowbar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krowbar/subscriptions","organizations_url":"https://api.github.com/users/krowbar/orgs","repos_url":"https://api.github.com/users/krowbar/repos","events_url":"https://api.github.com/users/krowbar/events{/privacy}","received_events_url":"https://api.github.com/users/krowbar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/1281234337","html_url":"https://github.com/psf/black/issues/3308#issuecomment-1281234337","issue_url":"https://api.github.com/repos/psf/black/issues/3308","id":1281234337,"node_id":"IC_kwDOB3dpmM5MXhWh","user":{"login":"bugfood","id":2976480,"node_id":"MDQ6VXNlcjI5NzY0ODA=","avatar_url":"https://avatars.githubusercontent.com/u/2976480?v=4","gravatar_id":"","url":"https://api.github.com/users/bugfood","html_url":"https://github.com/bugfood","followers_url":"https://api.github.com/users/bugfood/followers","following_url":"https://api.github.com/users/bugfood/following{/other_user}","gists_url":"https://api.github.com/users/bugfood/gists{/gist_id}","starred_url":"https://api.github.com/users/bugfood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bugfood/subscriptions","organizations_url":"https://api.github.com/users/bugfood/orgs","repos_url":"https://api.github.com/users/bugfood/repos","events_url":"https://api.github.com/users/bugfood/events{/privacy}","received_events_url":"https://api.github.com/users/bugfood/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-17T17:46:25Z","updated_at":"2022-10-17T17:46:25Z","body":"> `g:black_virtualenv = \"/usr/local/\"` worked (at least for me) under 22.8.0, but failed like you predicted with 22.10.0 requiring access python site-packages directory.\r\n\r\nNot to contradict you, but to clarify a bit, the failure I'm getting happens earlier than what you are seeing.\r\n\r\nFor your environment, this line returns a directory that exists:\r\n```\r\nreturn venv_path / 'lib' / f'python{pyver[0]}.{pyver[1]}' / 'site-packages'\r\n```\r\n\r\nFor my environment, no such directory exists.\r\n\r\nEither way, I think that `g:black_virtualenv` is too fragile to be a usable workaround.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/1281234337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bugfood","id":2976480,"node_id":"MDQ6VXNlcjI5NzY0ODA=","avatar_url":"https://avatars.githubusercontent.com/u/2976480?v=4","gravatar_id":"","url":"https://api.github.com/users/bugfood","html_url":"https://github.com/bugfood","followers_url":"https://api.github.com/users/bugfood/followers","following_url":"https://api.github.com/users/bugfood/following{/other_user}","gists_url":"https://api.github.com/users/bugfood/gists{/gist_id}","starred_url":"https://api.github.com/users/bugfood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bugfood/subscriptions","organizations_url":"https://api.github.com/users/bugfood/orgs","repos_url":"https://api.github.com/users/bugfood/repos","events_url":"https://api.github.com/users/bugfood/events{/privacy}","received_events_url":"https://api.github.com/users/bugfood/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7686698685,"node_id":"CE_lADOB3dpmM5TLeppzwAAAAHKKba9","url":"https://api.github.com/repos/psf/black/issues/events/7686698685","actor":{"login":"cooperlees","id":3005596,"node_id":"MDQ6VXNlcjMwMDU1OTY=","avatar_url":"https://avatars.githubusercontent.com/u/3005596?v=4","gravatar_id":"","url":"https://api.github.com/users/cooperlees","html_url":"https://github.com/cooperlees","followers_url":"https://api.github.com/users/cooperlees/followers","following_url":"https://api.github.com/users/cooperlees/following{/other_user}","gists_url":"https://api.github.com/users/cooperlees/gists{/gist_id}","starred_url":"https://api.github.com/users/cooperlees/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooperlees/subscriptions","organizations_url":"https://api.github.com/users/cooperlees/orgs","repos_url":"https://api.github.com/users/cooperlees/repos","events_url":"https://api.github.com/users/cooperlees/events{/privacy}","received_events_url":"https://api.github.com/users/cooperlees/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-10-27T23:55:35Z","state_reason":null,"performed_via_github_app":null},{"id":7686698879,"node_id":"REFE_lADOB3dpmM5TLeppzwAAAAHKKbd_","url":"https://api.github.com/repos/psf/black/issues/events/7686698879","actor":{"login":"cooperlees","id":3005596,"node_id":"MDQ6VXNlcjMwMDU1OTY=","avatar_url":"https://avatars.githubusercontent.com/u/3005596?v=4","gravatar_id":"","url":"https://api.github.com/users/cooperlees","html_url":"https://github.com/cooperlees","followers_url":"https://api.github.com/users/cooperlees/followers","following_url":"https://api.github.com/users/cooperlees/following{/other_user}","gists_url":"https://api.github.com/users/cooperlees/gists{/gist_id}","starred_url":"https://api.github.com/users/cooperlees/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooperlees/subscriptions","organizations_url":"https://api.github.com/users/cooperlees/orgs","repos_url":"https://api.github.com/users/cooperlees/repos","events_url":"https://api.github.com/users/cooperlees/events{/privacy}","received_events_url":"https://api.github.com/users/cooperlees/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4bb6e4f64ab3820ab9fae6716cd59479d34b7edf","commit_url":"https://api.github.com/repos/psf/black/commits/4bb6e4f64ab3820ab9fae6716cd59479d34b7edf","created_at":"2022-10-27T23:55:38Z","performed_via_github_app":null},{"actor":{"login":"naught101","id":167164,"node_id":"MDQ6VXNlcjE2NzE2NA==","avatar_url":"https://avatars.githubusercontent.com/u/167164?v=4","gravatar_id":"","url":"https://api.github.com/users/naught101","html_url":"https://github.com/naught101","followers_url":"https://api.github.com/users/naught101/followers","following_url":"https://api.github.com/users/naught101/following{/other_user}","gists_url":"https://api.github.com/users/naught101/gists{/gist_id}","starred_url":"https://api.github.com/users/naught101/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naught101/subscriptions","organizations_url":"https://api.github.com/users/naught101/orgs","repos_url":"https://api.github.com/users/naught101/repos","events_url":"https://api.github.com/users/naught101/events{/privacy}","received_events_url":"https://api.github.com/users/naught101/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-19T03:08:21Z","updated_at":"2023-04-19T03:08:21Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/psf/black/issues/1269","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/1269/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/1269/comments","events_url":"https://api.github.com/repos/psf/black/issues/1269/events","html_url":"https://github.com/psf/black/issues/1269","id":562851928,"node_id":"MDU6SXNzdWU1NjI4NTE5Mjg=","number":1269,"title":"Option not to install black venv and use the system one","user":{"login":"mcepl","id":198999,"node_id":"MDQ6VXNlcjE5ODk5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/198999?v=4","gravatar_id":"","url":"https://api.github.com/users/mcepl","html_url":"https://github.com/mcepl","followers_url":"https://api.github.com/users/mcepl/followers","following_url":"https://api.github.com/users/mcepl/following{/other_user}","gists_url":"https://api.github.com/users/mcepl/gists{/gist_id}","starred_url":"https://api.github.com/users/mcepl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcepl/subscriptions","organizations_url":"https://api.github.com/users/mcepl/orgs","repos_url":"https://api.github.com/users/mcepl/repos","events_url":"https://api.github.com/users/mcepl/events{/privacy}","received_events_url":"https://api.github.com/users/mcepl/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":867432794,"node_id":"MDU6TGFiZWw4Njc0MzI3OTQ=","url":"https://api.github.com/repos/psf/black/labels/R:%20duplicate","name":"R: duplicate","color":"ffffff","default":false,"description":"This issue or pull request already exists"},{"id":867432796,"node_id":"MDU6TGFiZWw4Njc0MzI3OTY=","url":"https://api.github.com/repos/psf/black/labels/T:%20enhancement","name":"T: enhancement","color":"a2eeef","default":false,"description":"New feature or request"},{"id":2046060270,"node_id":"MDU6TGFiZWwyMDQ2MDYwMjcw","url":"https://api.github.com/repos/psf/black/labels/C:%20vim","name":"C: vim","color":"AEEE87","default":false,"description":"Vim plugin"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-02-10T21:54:54Z","updated_at":"2023-04-19T03:38:51Z","closed_at":"2023-04-19T03:38:51Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":125266328,"node_id":"MDEwOlJlcG9zaXRvcnkxMjUyNjYzMjg=","name":"black","full_name":"psf/black","private":false,"owner":{"login":"psf","id":50630501,"node_id":"MDEyOk9yZ2FuaXphdGlvbjUwNjMwNTAx","avatar_url":"https://avatars.githubusercontent.com/u/50630501?v=4","gravatar_id":"","url":"https://api.github.com/users/psf","html_url":"https://github.com/psf","followers_url":"https://api.github.com/users/psf/followers","following_url":"https://api.github.com/users/psf/following{/other_user}","gists_url":"https://api.github.com/users/psf/gists{/gist_id}","starred_url":"https://api.github.com/users/psf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psf/subscriptions","organizations_url":"https://api.github.com/users/psf/orgs","repos_url":"https://api.github.com/users/psf/repos","events_url":"https://api.github.com/users/psf/events{/privacy}","received_events_url":"https://api.github.com/users/psf/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/psf/black","description":"The uncompromising Python code formatter","fork":false,"url":"https://api.github.com/repos/psf/black","forks_url":"https://api.github.com/repos/psf/black/forks","keys_url":"https://api.github.com/repos/psf/black/keys{/key_id}","collaborators_url":"https://api.github.com/repos/psf/black/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/psf/black/teams","hooks_url":"https://api.github.com/repos/psf/black/hooks","issue_events_url":"https://api.github.com/repos/psf/black/issues/events{/number}","events_url":"https://api.github.com/repos/psf/black/events","assignees_url":"https://api.github.com/repos/psf/black/assignees{/user}","branches_url":"https://api.github.com/repos/psf/black/branches{/branch}","tags_url":"https://api.github.com/repos/psf/black/tags","blobs_url":"https://api.github.com/repos/psf/black/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/psf/black/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/psf/black/git/refs{/sha}","trees_url":"https://api.github.com/repos/psf/black/git/trees{/sha}","statuses_url":"https://api.github.com/repos/psf/black/statuses/{sha}","languages_url":"https://api.github.com/repos/psf/black/languages","stargazers_url":"https://api.github.com/repos/psf/black/stargazers","contributors_url":"https://api.github.com/repos/psf/black/contributors","subscribers_url":"https://api.github.com/repos/psf/black/subscribers","subscription_url":"https://api.github.com/repos/psf/black/subscription","commits_url":"https://api.github.com/repos/psf/black/commits{/sha}","git_commits_url":"https://api.github.com/repos/psf/black/git/commits{/sha}","comments_url":"https://api.github.com/repos/psf/black/comments{/number}","issue_comment_url":"https://api.github.com/repos/psf/black/issues/comments{/number}","contents_url":"https://api.github.com/repos/psf/black/contents/{+path}","compare_url":"https://api.github.com/repos/psf/black/compare/{base}...{head}","merges_url":"https://api.github.com/repos/psf/black/merges","archive_url":"https://api.github.com/repos/psf/black/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/psf/black/downloads","issues_url":"https://api.github.com/repos/psf/black/issues{/number}","pulls_url":"https://api.github.com/repos/psf/black/pulls{/number}","milestones_url":"https://api.github.com/repos/psf/black/milestones{/number}","notifications_url":"https://api.github.com/repos/psf/black/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/psf/black/labels{/name}","releases_url":"https://api.github.com/repos/psf/black/releases{/id}","deployments_url":"https://api.github.com/repos/psf/black/deployments","created_at":"2018-03-14T19:54:45Z","updated_at":"2025-11-09T16:48:04Z","pushed_at":"2025-11-05T18:14:18Z","git_url":"git://github.com/psf/black.git","ssh_url":"git@github.com:psf/black.git","clone_url":"https://github.com/psf/black.git","svn_url":"https://github.com/psf/black","homepage":"https://black.readthedocs.io/en/stable/","size":7569,"stargazers_count":41126,"watchers_count":41126,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":2665,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":337,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["autopep8","code","codeformatter","formatter","gofmt","hacktoberfest","pre-commit-hook","python","yapf"],"visibility":"public","forks":2665,"open_issues":337,"watchers":41126,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'm always frustrated when I install this vim plugin to my system, and I have already installed black as a Python library from my system packages (on openSUSE), and the plugin without my consent and against my will dumps yet another directory to my already too crowded ``~/.vim`` directory. And no, I don't want to put venv somewhere else, just don't bother install from PyPI yourself and trust that I am not an idiot and I can install required Python packages myself.\r\n\r\nThere should be an option for users who don't want to have vim plugin installing anything. In case, after all, I am an idiot, and I forget to install it, then plugin just fails and crash horribly.","reactions":{"url":"https://api.github.com/repos/psf/black/issues/1269/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/1269/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]