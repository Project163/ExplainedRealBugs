{"url":"https://api.github.com/repos/psf/black/issues/2296","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2296/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2296/comments","events_url":"https://api.github.com/repos/psf/black/issues/2296/events","html_url":"https://github.com/psf/black/issues/2296","id":908018839,"node_id":"MDU6SXNzdWU5MDgwMTg4Mzk=","number":2296,"title":"black doesn't remove ugly trailing commas in subscripts","user":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":970487886,"node_id":"MDU6TGFiZWw5NzA0ODc4ODY=","url":"https://api.github.com/repos/psf/black/labels/F:%20trailing%20comma","name":"F: trailing comma","color":"BFD4F2","default":false,"description":"Full of magic"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-06-01T08:01:00Z","updated_at":"2022-08-13T13:41:36Z","closed_at":"2022-08-13T13:41:36Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\n\r\nWe recently added `--skip-magic-trailing-comma` to black. When running with this option, we'd like it to always remove ugly unnecessary trailing commas that plagued some earlier versions of black, but it doesn't do this in the case of subscripts.\r\n\r\n**To Reproduce**\r\n\r\n```\r\n(venv) ~/tmp/venv Î» cat test.pyi\r\nTuple[A, B,]\r\n\r\ndef f(a, b,): ...\r\n(venv) ~/tmp/venv Î» black -l 130 test.pyi --skip-magic-trailing-comma --check --diff\r\n--- test.pyi\t2021-06-01 07:57:26.995533 +0000\r\n+++ test.pyi\t2021-06-01 07:58:31.094021 +0000\r\n@@ -1,3 +1,3 @@\r\n Tuple[A, B,]\r\n \r\n-def f(a, b,): ...\r\n+def f(a, b): ...\r\nwould reformat test.pyi\r\nOh no! ðŸ’¥ ðŸ’” ðŸ’¥\r\n1 file would be reformatted.\r\n```\r\n\r\n**Expected behavior**\r\n\r\nIf the subscript expression has more than one element, we should remove the extra trailing comma.\r\n","closed_by":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/psf/black/issues/2296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2296/timeline","performed_via_github_app":null,"state_reason":"completed"}