{"url":"https://api.github.com/repos/psf/black/issues/2254","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2254/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2254/comments","events_url":"https://api.github.com/repos/psf/black/issues/2254/events","html_url":"https://github.com/psf/black/issues/2254","id":899870861,"node_id":"MDU6SXNzdWU4OTk4NzA4NjE=","number":2254,"title":"fmt:skip fails with internal error","user":{"login":"memeplex","id":2845433,"node_id":"MDQ6VXNlcjI4NDU0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/2845433?v=4","gravatar_id":"","url":"https://api.github.com/users/memeplex","html_url":"https://github.com/memeplex","followers_url":"https://api.github.com/users/memeplex/followers","following_url":"https://api.github.com/users/memeplex/following{/other_user}","gists_url":"https://api.github.com/users/memeplex/gists{/gist_id}","starred_url":"https://api.github.com/users/memeplex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/memeplex/subscriptions","organizations_url":"https://api.github.com/users/memeplex/orgs","repos_url":"https://api.github.com/users/memeplex/repos","events_url":"https://api.github.com/users/memeplex/events{/privacy}","received_events_url":"https://api.github.com/users/memeplex/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":2272618118,"node_id":"MDU6TGFiZWwyMjcyNjE4MTE4","url":"https://api.github.com/repos/psf/black/labels/C:%20crash","name":"C: crash","color":"ff0000","default":false,"description":"Black is crashing"},{"id":3042738070,"node_id":"MDU6TGFiZWwzMDQyNzM4MDcw","url":"https://api.github.com/repos/psf/black/labels/F:%20fmtskip","name":"F: fmtskip","color":"BFD4F2","default":false,"description":"fmt: skip implementation"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-05-24T17:46:11Z","updated_at":"2021-06-08T22:02:56Z","closed_at":"2021-06-08T21:37:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug** A clear and concise description of what the bug is.\r\n\r\n`# fmt:skip` fails with internal error message.\r\n\r\n**To Reproduce** Steps to reproduce the behavior:\r\n\r\n1. Open the link to vercel.app below\r\n2. See the log at the right hand side\r\n\r\n**Expected behavior** A clear and concise description of what you expected to happen.\r\n\r\nNot sure, that it doesn't abort with an error at the bare minimum, I was just giving a try to the new `# fmt: skip` directive, my intention was to avoid a blank line before a local class definition, maybe it's not supposed to work like that, it's not clear to me, but that's one thing and another is:\r\n\r\n```\r\nerror: cannot format /Users/carlos/Repositories/Jampp/predex-docs/dox.py: INTERNAL ERROR: Black produced different code on the second pass of the formatter.  Please report a bug on https://github.com/psf/black/issues.  This diff might be helpful: /var/folders/st/d_bcbs_j6033r_g_dfztgmxc0000gn/T/blk_7soxut5i.log\r\nOh no! ðŸ’¥ ðŸ’” ðŸ’¥\r\n1 file failed to reformat.\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n\r\nI'm not sure this is relevant because I'm reproducing the issue in vercel.app, but here it is:\r\n\r\n- Version: 21.5b0\r\n- OS and Python version: 3.8.5\r\n\r\n\r\n**Does this bug also happen on main?** To answer this, you have two options:\r\n\r\nI hope this resource is persistent enough, because of the large URL I wasn't allowed to post directly from vercel.app:\r\n\r\n[https://black.vercel.app/?version=main&state=...](https://black.vercel.app/?version=main&state=_Td6WFoAAATm1rRGAgAhARYAAAB0L-Wj4BclB-NdAD2IimZxl1N_WlwxRhR7MSgEofbjIYetoq3c39_bAan9-vGj_muCNt2IJmCUcYYdGvv9c_kpjBLXC11IPxpVmC1TU3iRQH1FHIfWj6Nv8jykZL-LhWVrGEp1zvlct6FWYbt9IXnO8b_7yCKraClJFzvWxJ5ByHCa09njhdo8DtOdEEmsuoHZ79buhAxvjhAJp5N6XRrQgveaamNijV-z8fG-oQTJ85ccbjBNNm86fk8p564RqHP2MNXpnE2lO6RV6BQhohubJeaHiL4rgbOQvebFszNr2GTca3_obrr6KVP0VDDmzKOlBqmeANytHUtXGUOR-udZkuMCqt8rEbpzs2BnbYmD1ucBRj7RwwUe8Rpdssazljhx19cnDic82Uz6eWRV-mIuT86r66NnSgsNZu7VqAN9s0HIgfeNypX1HUPQvMIgzu1KTtH42XRMmNFUMeIJU64lbQS341-d-UdaU8g0V4uRD_q_oQR1UtXJUPNSo9kI1ALhy9GCmtZGksj3SIIYjsOLkvToN5jDgG1Q905BIzA3LQOG2Pe0SuEzOkbVSoEnBJGPE5JLri7Y_6cXBra2WbZd9AY9wIDkr5R3mhKoftcqa3zDLmyculGFZ22UyCIN89Cg0-FzC2Ilsof934JcDoCxz2cgEZikoBz0oRTizqm_90uoX5CTNphAP1jqy1avz4CF9QzBUVc1FRWphPIddZN468JGVQaFQk9lTLm8LXCyK0Tj4ZrRII3VnzQkUd_phO-nquq3HuWjhVsv34uOzwKQ_tcF_x62Sc8x_OG0LLfzsUgoSgul1bnpm5ZnnEGXAe4oFLSPbBBgQXD2NGL9YJwke1j3-gyRGCsinkUCaXeBZd0QHANVtnmRlWjc9Kv7XMeZ3EsjTV2s-_FcCMRcvq3Fss8G31PgM6-O7DHMn55jO0Efx3YaGS6xoQCE-zVbidb_cZ_EniXH_p_5dUiTkRQeZo1BHYogTvMlkkVLCkPCwFdFyZ3YsAIo15__e09Wag8UX6VZ0cieHMWN8NFicux4S1zWkd0GPi0YkQLtIKz3n2-P5X_JTxnYZIqw2nsvb3d8vzozqSREOIeY6rgsFfMMLe83nLzIZNNQK1ezDf288XXit07EA5wEGr-dxiU1ARS15EfRAKAqcj9rCaW5uCSlBIW9kF07cw3Z3OjX0aH1mVTgP4JY6AoABYmVrbmdJdgSU1wmkbGcPdZtt9LSDPTRglMOqcheFdnqCYEi1OdS6ZwRPxTyKjdTYnslxHy6QmVZ_Iu-Kzpmqlai0yrv3VR4VAsVPOEBrydBUA-ie5OEk9dJx6V2iqrDBFkiR-FLBtQkSMkSG-Qbf0zHXLrw4qB2JOcEJxQZPLd15__RYfStxctShZyRwOQG01WkNwpYfNziC0W0zSDWwuIcXf3EXoAo02uwyVoV8uTvFp3C1Ow9Q9UPG0nrV-GF36tgLhRcrU0xF4O2SjDszJNUjirfuOet4EFIm_RYONYB-9QWWW9vQ5H7k8C4x-zdIFPL5e0BQIz7yVPXCm6K8-jmI5ia432q8rmmWTASTbhdrP30tFRRp9TSyCLYB5yasMBwM2s55hwgnIAXJmWwggk4gP_MAKZNw2GTvhyr2wTs3luxUefAPREFuAS_wXjeFCtktkif79upTOY2zXLqoMO4VUGjQdZNNFr0ePy8-gyBg4S7XCeRbb7RP6BumejzHyivVNfHut2eBxoxJUHVSOskrGCL8o2-k_j12IpiKzmFmD3NDSAOhcduRxJMxQVzTkUJFfkKg3px4sQtVBFRjbVzq-8BsDvX-nN4Vjl2E6u2corekvbzL_5e92_ysMyVJ39t9G1LViYmh3HXp6qx3t_Eo8qMtUB4DTF_9VoBlpXHlIJs-Z4Dw9NeEx7Dl54lyDvTufH8Qo4vxFqfQJBo2lsTyZUGooQKy5aJwGKG-jYLon4c71freJO6dT8WKNpcltC5jYHKlBqRu51CpZdcMkEdSpE-5S42xpKT69SvexH4u_gtE4WPuQRGfRnszoCnB8PVq4PPzekmzQ_6GKZHzvKUrbEZ3BmUDARX1jWSaiMftfy8UO_jBp4NUzLlqewWevFy_1KXZu664nKSr_HXePo-LuEKEVTA3UP_95X29sxUYzxB7PD-LuExaTRWSRqjR073y9kEYGlOMkLMRwwD4eiAwxC4qltoN5Vuh_9oHp8m8OgHGINrQosR195DjUghoITj_yJxAcL78rOtHX-AmzA3g3ePF4DE3yuvwJ9DAs9fSo55ftYCIjKDh9S7O-kgnotnbm8NkuBrsj1XkDqSRrPbGU_EjiIKQAwnVjPQs7CBHVzpuSt4-y2a3dwe6hgKfSUC3RsQzSaEc_Y5EgdKk8OXQ9mJZE6_R2nMlilQIRxzzOdDqT1tKFZKgqBhmi-OCVh8FIEMcHf6pyDc4bq6VLyW6fRGbJDIFPEu69l8axZp0DMCONeKhu_vslauv9jXKBdCpJgSg0UMmASWu4O8LJBioFl3wDRAA6R4JQlu76xBVcf_1N6K58XEmN6h8uLqvshZkkz2CWogvZmlH2rlf5jp-oaMAiC5n-pJd-dp4QqsbSr8deAbLyu0TteCD7aXESyuGDwQ_5SmotOkuBFSO2PGOsEHgXQ2YOThbGoFKzBt6s3VFu6LAKhmJJl0bIos5egIln5ncoRt50NShaMmwqaSbEyqYgAAggVgnGv9IpsAAf8Ppi4AAPPFEv-xxGf7AgAAAAAEWVo=)\r\n\r\nRemoving `# fmt: skip` in line 42 fixes the issue.\r\n","closed_by":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/psf/black/issues/2254/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2254/timeline","performed_via_github_app":null,"state_reason":"completed"}