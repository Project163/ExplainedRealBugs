[{"url":"https://api.github.com/repos/psf/black/issues/comments/427056132","html_url":"https://github.com/psf/black/issues/548#issuecomment-427056132","issue_url":"https://api.github.com/repos/psf/black/issues/548","id":427056132,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNzA1NjEzMg==","user":{"login":"rooterkyberian","id":637466,"node_id":"MDQ6VXNlcjYzNzQ2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/637466?v=4","gravatar_id":"","url":"https://api.github.com/users/rooterkyberian","html_url":"https://github.com/rooterkyberian","followers_url":"https://api.github.com/users/rooterkyberian/followers","following_url":"https://api.github.com/users/rooterkyberian/following{/other_user}","gists_url":"https://api.github.com/users/rooterkyberian/gists{/gist_id}","starred_url":"https://api.github.com/users/rooterkyberian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rooterkyberian/subscriptions","organizations_url":"https://api.github.com/users/rooterkyberian/orgs","repos_url":"https://api.github.com/users/rooterkyberian/repos","events_url":"https://api.github.com/users/rooterkyberian/events{/privacy}","received_events_url":"https://api.github.com/users/rooterkyberian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-04T15:10:23Z","updated_at":"2018-10-04T15:10:23Z","body":"`print(((1)))` will also be unchanged where we expected it to be equal to `print(1)`\r\n\r\nSomething that is likely another issue, but similar:\r\n```\r\nf = lambda a: (1)\r\ng = lambda a: ((1))\r\n```\r\nwill also be left unchanged\r\n\r\ntested with \r\nPython version: Python 3.7.0\r\nBlack version: 18.9b0","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/427056132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rooterkyberian","id":637466,"node_id":"MDQ6VXNlcjYzNzQ2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/637466?v=4","gravatar_id":"","url":"https://api.github.com/users/rooterkyberian","html_url":"https://github.com/rooterkyberian","followers_url":"https://api.github.com/users/rooterkyberian/followers","following_url":"https://api.github.com/users/rooterkyberian/following{/other_user}","gists_url":"https://api.github.com/users/rooterkyberian/gists{/gist_id}","starred_url":"https://api.github.com/users/rooterkyberian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rooterkyberian/subscriptions","organizations_url":"https://api.github.com/users/rooterkyberian/orgs","repos_url":"https://api.github.com/users/rooterkyberian/repos","events_url":"https://api.github.com/users/rooterkyberian/events{/privacy}","received_events_url":"https://api.github.com/users/rooterkyberian/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/486755135","html_url":"https://github.com/psf/black/issues/548#issuecomment-486755135","issue_url":"https://api.github.com/repos/psf/black/issues/548","id":486755135,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4Njc1NTEzNQ==","user":{"login":"sr105","id":814760,"node_id":"MDQ6VXNlcjgxNDc2MA==","avatar_url":"https://avatars.githubusercontent.com/u/814760?v=4","gravatar_id":"","url":"https://api.github.com/users/sr105","html_url":"https://github.com/sr105","followers_url":"https://api.github.com/users/sr105/followers","following_url":"https://api.github.com/users/sr105/following{/other_user}","gists_url":"https://api.github.com/users/sr105/gists{/gist_id}","starred_url":"https://api.github.com/users/sr105/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sr105/subscriptions","organizations_url":"https://api.github.com/users/sr105/orgs","repos_url":"https://api.github.com/users/sr105/repos","events_url":"https://api.github.com/users/sr105/events{/privacy}","received_events_url":"https://api.github.com/users/sr105/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-25T16:59:47Z","updated_at":"2019-04-25T16:59:47Z","body":"Duplicate of #445 ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/486755135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sr105","id":814760,"node_id":"MDQ6VXNlcjgxNDc2MA==","avatar_url":"https://avatars.githubusercontent.com/u/814760?v=4","gravatar_id":"","url":"https://api.github.com/users/sr105","html_url":"https://github.com/sr105","followers_url":"https://api.github.com/users/sr105/followers","following_url":"https://api.github.com/users/sr105/following{/other_user}","gists_url":"https://api.github.com/users/sr105/gists{/gist_id}","starred_url":"https://api.github.com/users/sr105/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sr105/subscriptions","organizations_url":"https://api.github.com/users/sr105/orgs","repos_url":"https://api.github.com/users/sr105/repos","events_url":"https://api.github.com/users/sr105/events{/privacy}","received_events_url":"https://api.github.com/users/sr105/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/psf/black/issues/comments/489451981","html_url":"https://github.com/psf/black/issues/548#issuecomment-489451981","issue_url":"https://api.github.com/repos/psf/black/issues/548","id":489451981,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTQ1MTk4MQ==","user":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-05T18:39:54Z","updated_at":"2019-05-05T18:39:54Z","body":"Don't think this is quite a dupe.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/489451981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2319728232,"node_id":"MDEyOkxhYmVsZWRFdmVudDIzMTk3MjgyMzI=","url":"https://api.github.com/repos/psf/black/issues/events/2319728232","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-05-05T18:40:01Z","label":{"name":"design","color":"0052cc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/comments/489719368","html_url":"https://github.com/psf/black/issues/548#issuecomment-489719368","issue_url":"https://api.github.com/repos/psf/black/issues/548","id":489719368,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTcxOTM2OA==","user":{"login":"sr105","id":814760,"node_id":"MDQ6VXNlcjgxNDc2MA==","avatar_url":"https://avatars.githubusercontent.com/u/814760?v=4","gravatar_id":"","url":"https://api.github.com/users/sr105","html_url":"https://github.com/sr105","followers_url":"https://api.github.com/users/sr105/followers","following_url":"https://api.github.com/users/sr105/following{/other_user}","gists_url":"https://api.github.com/users/sr105/gists{/gist_id}","starred_url":"https://api.github.com/users/sr105/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sr105/subscriptions","organizations_url":"https://api.github.com/users/sr105/orgs","repos_url":"https://api.github.com/users/sr105/repos","events_url":"https://api.github.com/users/sr105/events{/privacy}","received_events_url":"https://api.github.com/users/sr105/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-06T18:11:51Z","updated_at":"2019-05-06T18:11:51Z","body":"Both involve black removing unnecessary tuple parentheses. The code to fix one will likely fix the other.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/psf/black/issues/comments/489719368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sr105","id":814760,"node_id":"MDQ6VXNlcjgxNDc2MA==","avatar_url":"https://avatars.githubusercontent.com/u/814760?v=4","gravatar_id":"","url":"https://api.github.com/users/sr105","html_url":"https://github.com/sr105","followers_url":"https://api.github.com/users/sr105/followers","following_url":"https://api.github.com/users/sr105/following{/other_user}","gists_url":"https://api.github.com/users/sr105/gists{/gist_id}","starred_url":"https://api.github.com/users/sr105/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sr105/subscriptions","organizations_url":"https://api.github.com/users/sr105/orgs","repos_url":"https://api.github.com/users/sr105/repos","events_url":"https://api.github.com/users/sr105/events{/privacy}","received_events_url":"https://api.github.com/users/sr105/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2338841239,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIzMzg4NDEyMzk=","url":"https://api.github.com/repos/psf/black/issues/events/2338841239","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"aab0c64139ee6b0c7e9e03ff2ed0075976750170","commit_url":"https://api.github.com/repos/JelleZijlstra/black/commits/aab0c64139ee6b0c7e9e03ff2ed0075976750170","created_at":"2019-05-14T04:22:42Z","performed_via_github_app":null},{"actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-14T04:36:24Z","updated_at":"2019-05-14T04:36:24Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/psf/black/issues/850","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/850/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/850/comments","events_url":"https://api.github.com/repos/psf/black/issues/850/events","html_url":"https://github.com/psf/black/pull/850","id":443706222,"node_id":"MDExOlB1bGxSZXF1ZXN0Mjc4NTE2NTM0","number":850,"title":"remove obviously unnecessary parentheses","user":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-05-14T04:36:24Z","updated_at":"2019-05-23T13:58:06Z","closed_at":"2019-05-16T04:11:05Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":125266328,"node_id":"MDEwOlJlcG9zaXRvcnkxMjUyNjYzMjg=","name":"black","full_name":"psf/black","private":false,"owner":{"login":"psf","id":50630501,"node_id":"MDEyOk9yZ2FuaXphdGlvbjUwNjMwNTAx","avatar_url":"https://avatars.githubusercontent.com/u/50630501?v=4","gravatar_id":"","url":"https://api.github.com/users/psf","html_url":"https://github.com/psf","followers_url":"https://api.github.com/users/psf/followers","following_url":"https://api.github.com/users/psf/following{/other_user}","gists_url":"https://api.github.com/users/psf/gists{/gist_id}","starred_url":"https://api.github.com/users/psf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psf/subscriptions","organizations_url":"https://api.github.com/users/psf/orgs","repos_url":"https://api.github.com/users/psf/repos","events_url":"https://api.github.com/users/psf/events{/privacy}","received_events_url":"https://api.github.com/users/psf/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/psf/black","description":"The uncompromising Python code formatter","fork":false,"url":"https://api.github.com/repos/psf/black","forks_url":"https://api.github.com/repos/psf/black/forks","keys_url":"https://api.github.com/repos/psf/black/keys{/key_id}","collaborators_url":"https://api.github.com/repos/psf/black/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/psf/black/teams","hooks_url":"https://api.github.com/repos/psf/black/hooks","issue_events_url":"https://api.github.com/repos/psf/black/issues/events{/number}","events_url":"https://api.github.com/repos/psf/black/events","assignees_url":"https://api.github.com/repos/psf/black/assignees{/user}","branches_url":"https://api.github.com/repos/psf/black/branches{/branch}","tags_url":"https://api.github.com/repos/psf/black/tags","blobs_url":"https://api.github.com/repos/psf/black/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/psf/black/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/psf/black/git/refs{/sha}","trees_url":"https://api.github.com/repos/psf/black/git/trees{/sha}","statuses_url":"https://api.github.com/repos/psf/black/statuses/{sha}","languages_url":"https://api.github.com/repos/psf/black/languages","stargazers_url":"https://api.github.com/repos/psf/black/stargazers","contributors_url":"https://api.github.com/repos/psf/black/contributors","subscribers_url":"https://api.github.com/repos/psf/black/subscribers","subscription_url":"https://api.github.com/repos/psf/black/subscription","commits_url":"https://api.github.com/repos/psf/black/commits{/sha}","git_commits_url":"https://api.github.com/repos/psf/black/git/commits{/sha}","comments_url":"https://api.github.com/repos/psf/black/comments{/number}","issue_comment_url":"https://api.github.com/repos/psf/black/issues/comments{/number}","contents_url":"https://api.github.com/repos/psf/black/contents/{+path}","compare_url":"https://api.github.com/repos/psf/black/compare/{base}...{head}","merges_url":"https://api.github.com/repos/psf/black/merges","archive_url":"https://api.github.com/repos/psf/black/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/psf/black/downloads","issues_url":"https://api.github.com/repos/psf/black/issues{/number}","pulls_url":"https://api.github.com/repos/psf/black/pulls{/number}","milestones_url":"https://api.github.com/repos/psf/black/milestones{/number}","notifications_url":"https://api.github.com/repos/psf/black/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/psf/black/labels{/name}","releases_url":"https://api.github.com/repos/psf/black/releases{/id}","deployments_url":"https://api.github.com/repos/psf/black/deployments","created_at":"2018-03-14T19:54:45Z","updated_at":"2025-11-09T16:48:04Z","pushed_at":"2025-11-05T18:14:18Z","git_url":"git://github.com/psf/black.git","ssh_url":"git@github.com:psf/black.git","clone_url":"https://github.com/psf/black.git","svn_url":"https://github.com/psf/black","homepage":"https://black.readthedocs.io/en/stable/","size":7569,"stargazers_count":41126,"watchers_count":41126,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":2665,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":337,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["autopep8","code","codeformatter","formatter","gofmt","hacktoberfest","pre-commit-hook","python","yapf"],"visibility":"public","forks":2665,"open_issues":337,"watchers":41126,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/850","html_url":"https://github.com/psf/black/pull/850","diff_url":"https://github.com/psf/black/pull/850.diff","patch_url":"https://github.com/psf/black/pull/850.patch","merged_at":"2019-05-16T04:11:05Z"},"body":"Fixes #548\r\n\r\nThis removes all parentheses around very simple nodes (e.g., `(1)`, `(x)`). Perhaps we can do something more aggressive, like removing them around function call or attribute access expressions.","reactions":{"url":"https://api.github.com/repos/psf/black/issues/850/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/850/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":2345193549,"node_id":"MDExOkNsb3NlZEV2ZW50MjM0NTE5MzU0OQ==","url":"https://api.github.com/repos/psf/black/issues/events/2345193549","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-05-16T04:11:05Z","state_reason":null,"performed_via_github_app":null},{"id":2345193596,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIzNDUxOTM1OTY=","url":"https://api.github.com/repos/psf/black/issues/events/2345193596","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"957ba24bb6cdd32e4dd14ff2808dcf4d58851844","commit_url":"https://api.github.com/repos/psf/black/commits/957ba24bb6cdd32e4dd14ff2808dcf4d58851844","created_at":"2019-05-16T04:11:08Z","performed_via_github_app":null},{"actor":{"login":"hugovk","id":1324225,"node_id":"MDQ6VXNlcjEzMjQyMjU=","avatar_url":"https://avatars.githubusercontent.com/u/1324225?v=4","gravatar_id":"","url":"https://api.github.com/users/hugovk","html_url":"https://github.com/hugovk","followers_url":"https://api.github.com/users/hugovk/followers","following_url":"https://api.github.com/users/hugovk/following{/other_user}","gists_url":"https://api.github.com/users/hugovk/gists{/gist_id}","starred_url":"https://api.github.com/users/hugovk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hugovk/subscriptions","organizations_url":"https://api.github.com/users/hugovk/orgs","repos_url":"https://api.github.com/users/hugovk/repos","events_url":"https://api.github.com/users/hugovk/events{/privacy}","received_events_url":"https://api.github.com/users/hugovk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T19:56:08Z","updated_at":"2019-10-13T19:56:08Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/psf/black/issues/1044","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/1044/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/1044/comments","events_url":"https://api.github.com/repos/psf/black/issues/1044/events","html_url":"https://github.com/psf/black/issues/1044","id":501954470,"node_id":"MDU6SXNzdWU1MDE5NTQ0NzA=","number":1044,"title":"Regression with master","user":{"login":"hugovk","id":1324225,"node_id":"MDQ6VXNlcjEzMjQyMjU=","avatar_url":"https://avatars.githubusercontent.com/u/1324225?v=4","gravatar_id":"","url":"https://api.github.com/users/hugovk","html_url":"https://github.com/hugovk","followers_url":"https://api.github.com/users/hugovk/followers","following_url":"https://api.github.com/users/hugovk/following{/other_user}","gists_url":"https://api.github.com/users/hugovk/gists{/gist_id}","starred_url":"https://api.github.com/users/hugovk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hugovk/subscriptions","organizations_url":"https://api.github.com/users/hugovk/orgs","repos_url":"https://api.github.com/users/hugovk/repos","events_url":"https://api.github.com/users/hugovk/events{/privacy}","received_events_url":"https://api.github.com/users/hugovk/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-10-03T09:31:47Z","updated_at":"2019-10-20T16:41:20Z","closed_at":"2019-10-20T16:41:20Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":125266328,"node_id":"MDEwOlJlcG9zaXRvcnkxMjUyNjYzMjg=","name":"black","full_name":"psf/black","private":false,"owner":{"login":"psf","id":50630501,"node_id":"MDEyOk9yZ2FuaXphdGlvbjUwNjMwNTAx","avatar_url":"https://avatars.githubusercontent.com/u/50630501?v=4","gravatar_id":"","url":"https://api.github.com/users/psf","html_url":"https://github.com/psf","followers_url":"https://api.github.com/users/psf/followers","following_url":"https://api.github.com/users/psf/following{/other_user}","gists_url":"https://api.github.com/users/psf/gists{/gist_id}","starred_url":"https://api.github.com/users/psf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psf/subscriptions","organizations_url":"https://api.github.com/users/psf/orgs","repos_url":"https://api.github.com/users/psf/repos","events_url":"https://api.github.com/users/psf/events{/privacy}","received_events_url":"https://api.github.com/users/psf/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/psf/black","description":"The uncompromising Python code formatter","fork":false,"url":"https://api.github.com/repos/psf/black","forks_url":"https://api.github.com/repos/psf/black/forks","keys_url":"https://api.github.com/repos/psf/black/keys{/key_id}","collaborators_url":"https://api.github.com/repos/psf/black/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/psf/black/teams","hooks_url":"https://api.github.com/repos/psf/black/hooks","issue_events_url":"https://api.github.com/repos/psf/black/issues/events{/number}","events_url":"https://api.github.com/repos/psf/black/events","assignees_url":"https://api.github.com/repos/psf/black/assignees{/user}","branches_url":"https://api.github.com/repos/psf/black/branches{/branch}","tags_url":"https://api.github.com/repos/psf/black/tags","blobs_url":"https://api.github.com/repos/psf/black/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/psf/black/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/psf/black/git/refs{/sha}","trees_url":"https://api.github.com/repos/psf/black/git/trees{/sha}","statuses_url":"https://api.github.com/repos/psf/black/statuses/{sha}","languages_url":"https://api.github.com/repos/psf/black/languages","stargazers_url":"https://api.github.com/repos/psf/black/stargazers","contributors_url":"https://api.github.com/repos/psf/black/contributors","subscribers_url":"https://api.github.com/repos/psf/black/subscribers","subscription_url":"https://api.github.com/repos/psf/black/subscription","commits_url":"https://api.github.com/repos/psf/black/commits{/sha}","git_commits_url":"https://api.github.com/repos/psf/black/git/commits{/sha}","comments_url":"https://api.github.com/repos/psf/black/comments{/number}","issue_comment_url":"https://api.github.com/repos/psf/black/issues/comments{/number}","contents_url":"https://api.github.com/repos/psf/black/contents/{+path}","compare_url":"https://api.github.com/repos/psf/black/compare/{base}...{head}","merges_url":"https://api.github.com/repos/psf/black/merges","archive_url":"https://api.github.com/repos/psf/black/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/psf/black/downloads","issues_url":"https://api.github.com/repos/psf/black/issues{/number}","pulls_url":"https://api.github.com/repos/psf/black/pulls{/number}","milestones_url":"https://api.github.com/repos/psf/black/milestones{/number}","notifications_url":"https://api.github.com/repos/psf/black/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/psf/black/labels{/name}","releases_url":"https://api.github.com/repos/psf/black/releases{/id}","deployments_url":"https://api.github.com/repos/psf/black/deployments","created_at":"2018-03-14T19:54:45Z","updated_at":"2025-11-09T16:48:04Z","pushed_at":"2025-11-05T18:14:18Z","git_url":"git://github.com/psf/black.git","ssh_url":"git@github.com:psf/black.git","clone_url":"https://github.com/psf/black.git","svn_url":"https://github.com/psf/black","homepage":"https://black.readthedocs.io/en/stable/","size":7569,"stargazers_count":41126,"watchers_count":41126,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":2665,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":337,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["autopep8","code","codeformatter","formatter","gofmt","hacktoberfest","pre-commit-hook","python","yapf"],"visibility":"public","forks":2665,"open_issues":337,"watchers":41126,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Operating system: macOS Mojave 10.14.6\r\nPython version: 3.7.4\r\n*Black* version: master\r\n\r\nPossibly duplicates of https://github.com/psf/black/issues/1041 and https://github.com/psf/black/issues/1042.\r\n\r\nRunning Black master on the pip master codebase, all reformat except one:\r\n\r\n```\r\nerror: cannot format /Users/hugo/github/pip/tests/unit/test_collector.py: INTERNAL ERROR: Black produced different code on the second pass of the formatter.  Please report a bug on https://github.com/psf/black/issues.  This diff might be helpful: /var/folders/kt/j77sf4_n6fnbx6pg199rbx700000gn/T/blk_2wyp3a1o.log\r\n```\r\n\r\nThe source file:\r\nhttps://github.com/pypa/pip/blob/e6f69fadd8c84526d933b2650141193595059e72/tests/unit/test_collector.py\r\n\r\nThe Black log file:\r\n\r\n```diff\r\n--- source\r\n+++ first pass\r\n@@ -27,15 +27,11 @@\r\n from pip._internal.network.session import PipSession\r\n from tests.lib import make_test_link_collector\r\n \r\n \r\n @pytest.mark.parametrize(\r\n-    \"url\",\r\n-    [\r\n-        \"ftp://python.org/python-3.7.1.zip\",\r\n-        \"file:///opt/data/pip-18.0.tar.gz\",\r\n-    ],\r\n+    \"url\", [\"ftp://python.org/python-3.7.1.zip\", \"file:///opt/data/pip-18.0.tar.gz\"]\r\n )\r\n def test_get_html_response_archive_to_naive_scheme(url):\r\n     \"\"\"\r\n     `_get_html_response()` should error on an archive-like URL if the scheme\r\n     does not allow \"poking\" without getting data.\r\n@@ -55,52 +51,44 @@\r\n     \"\"\"\r\n     `_get_html_response()` should send a HEAD request on an archive-like URL\r\n     if the scheme supports it, and raise `_NotHTML` if the response isn't HTML.\r\n     \"\"\"\r\n     session = mock.Mock(PipSession)\r\n-    session.head.return_value = mock.Mock(**{\r\n-        \"request.method\": \"HEAD\",\r\n-        \"headers\": {\"Content-Type\": content_type},\r\n-    })\r\n+    session.head.return_value = mock.Mock(\r\n+        **{\"request.method\": \"HEAD\", \"headers\": {\"Content-Type\": content_type}}\r\n+    )\r\n \r\n     with pytest.raises(_NotHTML) as ctx:\r\n         _get_html_response(url, session=session)\r\n \r\n-    session.assert_has_calls([\r\n-        mock.call.head(url, allow_redirects=True),\r\n-    ])\r\n+    session.assert_has_calls([mock.call.head(url, allow_redirects=True)])\r\n     assert ctx.value.args == (content_type, \"HEAD\")\r\n \r\n \r\n @pytest.mark.parametrize(\r\n-    \"url\",\r\n-    [\r\n-        \"http://python.org/python-3.7.1.zip\",\r\n-        \"https://pypi.org/pip-18.0.tar.gz\",\r\n-    ],\r\n+    \"url\", [\"http://python.org/python-3.7.1.zip\", \"https://pypi.org/pip-18.0.tar.gz\"]\r\n )\r\n def test_get_html_response_archive_to_http_scheme_is_html(url):\r\n     \"\"\"\r\n     `_get_html_response()` should work with archive-like URLs if the HEAD\r\n     request is responded with text/html.\r\n     \"\"\"\r\n     session = mock.Mock(PipSession)\r\n-    session.head.return_value = mock.Mock(**{\r\n-        \"request.method\": \"HEAD\",\r\n-        \"headers\": {\"Content-Type\": \"text/html\"},\r\n-    })\r\n+    session.head.return_value = mock.Mock(\r\n+        **{\"request.method\": \"HEAD\", \"headers\": {\"Content-Type\": \"text/html\"}}\r\n+    )\r\n     session.get.return_value = mock.Mock(headers={\"Content-Type\": \"text/html\"})\r\n \r\n     resp = _get_html_response(url, session=session)\r\n \r\n     assert resp is not None\r\n     assert session.mock_calls == [\r\n         mock.call.head(url, allow_redirects=True),\r\n         mock.call.head().raise_for_status(),\r\n-        mock.call.get(url, headers={\r\n-            \"Accept\": \"text/html\", \"Cache-Control\": \"max-age=0\",\r\n-        }),\r\n+        mock.call.get(\r\n+            url, headers={\"Accept\": \"text/html\", \"Cache-Control\": \"max-age=0\"}\r\n+        ),\r\n         mock.call.get().raise_for_status(),\r\n     ]\r\n \r\n \r\n @pytest.mark.parametrize(\r\n@@ -117,22 +105,20 @@\r\n     look like an archive, only the GET request that retrieves data.\r\n     \"\"\"\r\n     session = mock.Mock(PipSession)\r\n \r\n     # Mock the headers dict to ensure it is accessed.\r\n-    session.get.return_value = mock.Mock(headers=mock.Mock(**{\r\n-        \"get.return_value\": \"text/html\",\r\n-    }))\r\n+    session.get.return_value = mock.Mock(\r\n+        headers=mock.Mock(**{\"get.return_value\": \"text/html\"})\r\n+    )\r\n \r\n     resp = _get_html_response(url, session=session)\r\n \r\n     assert resp is not None\r\n     assert session.head.call_count == 0\r\n     assert session.get.mock_calls == [\r\n-        mock.call(url, headers={\r\n-            \"Accept\": \"text/html\", \"Cache-Control\": \"max-age=0\",\r\n-        }),\r\n+        mock.call(url, headers={\"Accept\": \"text/html\", \"Cache-Control\": \"max-age=0\"}),\r\n         mock.call().raise_for_status(),\r\n         mock.call().headers.get(\"Content-Type\", \"\"),\r\n     ]\r\n \r\n \r\n@@ -142,13 +128,13 @@\r\n     in its DEBUG log message.\r\n     \"\"\"\r\n     session = mock.Mock(PipSession)\r\n \r\n     # Mock the headers dict to ensure it is accessed.\r\n-    session.get.return_value = mock.Mock(headers=mock.Mock(**{\r\n-        \"get.return_value\": \"text/html\",\r\n-    }))\r\n+    session.get.return_value = mock.Mock(\r\n+        headers=mock.Mock(**{\"get.return_value\": \"text/html\"})\r\n+    )\r\n \r\n     caplog.set_level(logging.DEBUG)\r\n \r\n     resp = _get_html_response(\r\n         \"https://user:my_password@example.com/simple/\", session=session\r\n@@ -156,73 +142,87 @@\r\n \r\n     assert resp is not None\r\n \r\n     assert len(caplog.records) == 1\r\n     record = caplog.records[0]\r\n-    assert record.levelname == 'DEBUG'\r\n+    assert record.levelname == \"DEBUG\"\r\n     assert record.message.splitlines() == [\r\n-        \"Getting page https://user:****@example.com/simple/\",\r\n+        \"Getting page https://user:****@example.com/simple/\"\r\n     ]\r\n \r\n \r\n @pytest.mark.parametrize(\r\n     (\"html\", \"url\", \"expected\"),\r\n     [\r\n         (b\"<html></html>\", \"https://example.com/\", \"https://example.com/\"),\r\n         (\r\n+            b\"<html><head>\" b'<base href=\"https://foo.example.com/\">' b\"</head></html>\",\r\n+            \"https://example.com/\",\r\n+            \"https://foo.example.com/\",\r\n+        ),\r\n+        (\r\n             b\"<html><head>\"\r\n-            b\"<base href=\\\"https://foo.example.com/\\\">\"\r\n+            b'<base><base href=\"https://foo.example.com/\">'\r\n             b\"</head></html>\",\r\n             \"https://example.com/\",\r\n             \"https://foo.example.com/\",\r\n         ),\r\n-        (\r\n-            b\"<html><head>\"\r\n-            b\"<base><base href=\\\"https://foo.example.com/\\\">\"\r\n-            b\"</head></html>\",\r\n-            \"https://example.com/\",\r\n-            \"https://foo.example.com/\",\r\n-        ),\r\n     ],\r\n )\r\n def test_determine_base_url(html, url, expected):\r\n     document = html5lib.parse(\r\n-        html, transport_encoding=None, namespaceHTMLElements=False,\r\n+        html, transport_encoding=None, namespaceHTMLElements=False\r\n     )\r\n     assert _determine_base_url(document, url) == expected\r\n \r\n \r\n @pytest.mark.parametrize(\r\n     (\"url\", \"clean_url\"),\r\n     [\r\n         # URL with hostname and port. Port separator should not be quoted.\r\n-        (\"https://localhost.localdomain:8181/path/with space/\",\r\n-         \"https://localhost.localdomain:8181/path/with%20space/\"),\r\n+        (\r\n+            \"https://localhost.localdomain:8181/path/with space/\",\r\n+            \"https://localhost.localdomain:8181/path/with%20space/\",\r\n+        ),\r\n         # URL that is already properly quoted. The quoting `%`\r\n         # characters should not be quoted again.\r\n-        (\"https://localhost.localdomain:8181/path/with%20quoted%20space/\",\r\n-         \"https://localhost.localdomain:8181/path/with%20quoted%20space/\"),\r\n+        (\r\n+            \"https://localhost.localdomain:8181/path/with%20quoted%20space/\",\r\n+            \"https://localhost.localdomain:8181/path/with%20quoted%20space/\",\r\n+        ),\r\n         # URL with IPv4 address and port.\r\n-        (\"https://127.0.0.1:8181/path/with space/\",\r\n-         \"https://127.0.0.1:8181/path/with%20space/\"),\r\n+        (\r\n+            \"https://127.0.0.1:8181/path/with space/\",\r\n+            \"https://127.0.0.1:8181/path/with%20space/\",\r\n+        ),\r\n         # URL with IPv6 address and port. The `[]` brackets around the\r\n         # IPv6 address should not be quoted.\r\n-        (\"https://[fd00:0:0:236::100]:8181/path/with space/\",\r\n-         \"https://[fd00:0:0:236::100]:8181/path/with%20space/\"),\r\n+        (\r\n+            \"https://[fd00:0:0:236::100]:8181/path/with space/\",\r\n+            \"https://[fd00:0:0:236::100]:8181/path/with%20space/\",\r\n+        ),\r\n         # URL with query. The leading `?` should not be quoted.\r\n-        (\"https://localhost.localdomain:8181/path/with/query?request=test\",\r\n-         \"https://localhost.localdomain:8181/path/with/query?request=test\"),\r\n+        (\r\n+            \"https://localhost.localdomain:8181/path/with/query?request=test\",\r\n+            \"https://localhost.localdomain:8181/path/with/query?request=test\",\r\n+        ),\r\n         # URL with colon in the path portion.\r\n-        (\"https://localhost.localdomain:8181/path:/with:/colon\",\r\n-         \"https://localhost.localdomain:8181/path%3A/with%3A/colon\"),\r\n+        (\r\n+            \"https://localhost.localdomain:8181/path:/with:/colon\",\r\n+            \"https://localhost.localdomain:8181/path%3A/with%3A/colon\",\r\n+        ),\r\n         # URL with something that looks like a drive letter, but is\r\n         # not. The `:` should be quoted.\r\n-        (\"https://localhost.localdomain/T:/path/\",\r\n-         \"https://localhost.localdomain/T%3A/path/\"),\r\n+        (\r\n+            \"https://localhost.localdomain/T:/path/\",\r\n+            \"https://localhost.localdomain/T%3A/path/\",\r\n+        ),\r\n         # VCS URL containing revision string.\r\n-        (\"git+ssh://example.com/path to/repo.git@1.0#egg=my-package-1.0\",\r\n-         \"git+ssh://example.com/path%20to/repo.git@1.0#egg=my-package-1.0\"),\r\n+        (\r\n+            \"git+ssh://example.com/path to/repo.git@1.0#egg=my-package-1.0\",\r\n+            \"git+ssh://example.com/path%20to/repo.git@1.0#egg=my-package-1.0\",\r\n+        ),\r\n         # URL with Windows drive letter. The `:` after the drive\r\n         # letter should not be quoted. The trailing `/` should be\r\n         # removed.\r\n         pytest.param(\r\n             \"file:///T:/path/with spaces/\",\r\n@@ -234,88 +234,80 @@\r\n         pytest.param(\r\n             \"file:///T:/path/with spaces/\",\r\n             \"file:///T%3A/path/with%20spaces/\",\r\n             marks=pytest.mark.skipif(\"sys.platform == 'win32'\"),\r\n         ),\r\n-    ]\r\n+    ],\r\n )\r\n def test_clean_link(url, clean_url):\r\n-    assert(_clean_link(url) == clean_url)\r\n-\r\n-\r\n-@pytest.mark.parametrize('anchor_html, expected', [\r\n-    # Test not present.\r\n-    ('<a href=\"/pkg1-1.0.tar.gz\"></a>', None),\r\n-    # Test present with no value.\r\n-    ('<a href=\"/pkg2-1.0.tar.gz\" data-yanked></a>', ''),\r\n-    # Test the empty string.\r\n-    ('<a href=\"/pkg3-1.0.tar.gz\" data-yanked=\"\"></a>', ''),\r\n-    # Test a non-empty string.\r\n-    ('<a href=\"/pkg4-1.0.tar.gz\" data-yanked=\"error\"></a>', 'error'),\r\n-    # Test a value with an escaped character.\r\n-    ('<a href=\"/pkg4-1.0.tar.gz\" data-yanked=\"version &lt 1\"></a>',\r\n-        'version < 1'),\r\n-    # Test a yanked reason with a non-ascii character.\r\n-    (u'<a href=\"/pkg-1.0.tar.gz\" data-yanked=\"curlyquote \\u2018\"></a>',\r\n-        u'curlyquote \\u2018'),\r\n-])\r\n+    assert _clean_link(url) == clean_url\r\n+\r\n+\r\n+@pytest.mark.parametrize(\r\n+    \"anchor_html, expected\",\r\n+    [\r\n+        # Test not present.\r\n+        ('<a href=\"/pkg1-1.0.tar.gz\"></a>', None),\r\n+        # Test present with no value.\r\n+        ('<a href=\"/pkg2-1.0.tar.gz\" data-yanked></a>', \"\"),\r\n+        # Test the empty string.\r\n+        ('<a href=\"/pkg3-1.0.tar.gz\" data-yanked=\"\"></a>', \"\"),\r\n+        # Test a non-empty string.\r\n+        ('<a href=\"/pkg4-1.0.tar.gz\" data-yanked=\"error\"></a>', \"error\"),\r\n+        # Test a value with an escaped character.\r\n+        ('<a href=\"/pkg4-1.0.tar.gz\" data-yanked=\"version &lt 1\"></a>', \"version < 1\"),\r\n+        # Test a yanked reason with a non-ascii character.\r\n+        (\r\n+            u'<a href=\"/pkg-1.0.tar.gz\" data-yanked=\"curlyquote \\u2018\"></a>',\r\n+            u\"curlyquote \\u2018\",\r\n+        ),\r\n+    ],\r\n+)\r\n def test_parse_links__yanked_reason(anchor_html, expected):\r\n     html = (\r\n         # Mark this as a unicode string for Python 2 since anchor_html\r\n         # can contain non-ascii.\r\n         u'<html><head><meta charset=\"utf-8\"><head>'\r\n-        '<body>{}</body></html>'\r\n+        \"<body>{}</body></html>\"\r\n     ).format(anchor_html)\r\n-    html_bytes = html.encode('utf-8')\r\n-    page = HTMLPage(\r\n-        html_bytes,\r\n-        encoding=None,\r\n-        url='https://example.com/simple/',\r\n-    )\r\n+    html_bytes = html.encode(\"utf-8\")\r\n+    page = HTMLPage(html_bytes, encoding=None, url=\"https://example.com/simple/\")\r\n     links = list(parse_links(page))\r\n-    link, = links\r\n+    (link,) = links\r\n     actual = link.yanked_reason\r\n     assert actual == expected\r\n \r\n \r\n def test_request_http_error(caplog):\r\n     caplog.set_level(logging.DEBUG)\r\n-    link = Link('http://localhost')\r\n+    link = Link(\"http://localhost\")\r\n     session = Mock(PipSession)\r\n     session.get.return_value = resp = Mock()\r\n-    resp.raise_for_status.side_effect = requests.HTTPError('Http error')\r\n+    resp.raise_for_status.side_effect = requests.HTTPError(\"Http error\")\r\n     assert _get_html_page(link, session=session) is None\r\n-    assert (\r\n-        'Could not fetch URL http://localhost: Http error - skipping'\r\n-        in caplog.text\r\n-    )\r\n+    assert \"Could not fetch URL http://localhost: Http error - skipping\" in caplog.text\r\n \r\n \r\n def test_request_retries(caplog):\r\n     caplog.set_level(logging.DEBUG)\r\n-    link = Link('http://localhost')\r\n+    link = Link(\"http://localhost\")\r\n     session = Mock(PipSession)\r\n-    session.get.side_effect = requests.exceptions.RetryError('Retry error')\r\n+    session.get.side_effect = requests.exceptions.RetryError(\"Retry error\")\r\n     assert _get_html_page(link, session=session) is None\r\n-    assert (\r\n-        'Could not fetch URL http://localhost: Retry error - skipping'\r\n-        in caplog.text\r\n-    )\r\n+    assert \"Could not fetch URL http://localhost: Retry error - skipping\" in caplog.text\r\n \r\n \r\n def test_make_html_page():\r\n-    headers = {'Content-Type': 'text/html; charset=UTF-8'}\r\n+    headers = {\"Content-Type\": \"text/html; charset=UTF-8\"}\r\n     response = pretend.stub(\r\n-        content=b'<content>',\r\n-        url='https://example.com/index.html',\r\n-        headers=headers,\r\n+        content=b\"<content>\", url=\"https://example.com/index.html\", headers=headers\r\n     )\r\n \r\n     actual = _make_html_page(response)\r\n-    assert actual.content == b'<content>'\r\n-    assert actual.encoding == 'UTF-8'\r\n-    assert actual.url == 'https://example.com/index.html'\r\n+    assert actual.content == b\"<content>\"\r\n+    assert actual.encoding == \"UTF-8\"\r\n+    assert actual.url == \"https://example.com/index.html\"\r\n \r\n \r\n @pytest.mark.parametrize(\r\n     \"url, vcs_scheme\",\r\n     [\r\n@@ -335,73 +327,70 @@\r\n     assert caplog.record_tuples == [\r\n         (\r\n             \"pip._internal.collector\",\r\n             logging.DEBUG,\r\n             \"Cannot look at {} URL {}\".format(vcs_scheme, url),\r\n-        ),\r\n+        )\r\n     ]\r\n \r\n \r\n def make_fake_html_response(url):\r\n     \"\"\"\r\n     Create a fake requests.Response object.\r\n     \"\"\"\r\n-    html = dedent(u\"\"\"\\\r\n+    html = dedent(\r\n+        u\"\"\"\\\r\n     <html><head><meta name=\"api-version\" value=\"2\" /></head>\r\n     <body>\r\n     <a href=\"/abc-1.0.tar.gz#md5=000000000\">abc-1.0.tar.gz</a>\r\n     </body></html>\r\n-    \"\"\")\r\n-    content = html.encode('utf-8')\r\n+    \"\"\"\r\n+    )\r\n+    content = html.encode(\"utf-8\")\r\n     return pretend.stub(content=content, url=url, headers={})\r\n \r\n \r\n def test_get_html_page_directory_append_index(tmpdir):\r\n     \"\"\"`_get_html_page()` should append \"index.html\" to a directory URL.\r\n     \"\"\"\r\n     dirpath = tmpdir.mkdir(\"something\")\r\n-    dir_url = \"file:///{}\".format(\r\n-        urllib_request.pathname2url(dirpath).lstrip(\"/\"),\r\n-    )\r\n+    dir_url = \"file:///{}\".format(urllib_request.pathname2url(dirpath).lstrip(\"/\"))\r\n     expected_url = \"{}/index.html\".format(dir_url.rstrip(\"/\"))\r\n \r\n     session = mock.Mock(PipSession)\r\n     fake_response = make_fake_html_response(expected_url)\r\n     with mock.patch(\"pip._internal.collector._get_html_response\") as mock_func:\r\n         mock_func.return_value = fake_response\r\n         actual = _get_html_page(Link(dir_url), session=session)\r\n         assert mock_func.mock_calls == [\r\n-            mock.call(expected_url, session=session),\r\n-        ], 'actual calls: {}'.format(mock_func.mock_calls)\r\n+            mock.call(expected_url, session=session)\r\n+        ], \"actual calls: {}\".format(mock_func.mock_calls)\r\n \r\n         assert actual.content == fake_response.content\r\n         assert actual.encoding is None\r\n         assert actual.url == expected_url\r\n \r\n \r\n def test_remove_duplicate_links():\r\n     links = [\r\n         # We choose Links that will test that ordering is preserved.\r\n-        Link('https://example.com/2'),\r\n-        Link('https://example.com/1'),\r\n-        Link('https://example.com/2'),\r\n+        Link(\"https://example.com/2\"),\r\n+        Link(\"https://example.com/1\"),\r\n+        Link(\"https://example.com/2\"),\r\n     ]\r\n     actual = _remove_duplicate_links(links)\r\n-    assert actual == [\r\n-        Link('https://example.com/2'),\r\n-        Link('https://example.com/1'),\r\n-    ]\r\n+    assert actual == [Link(\"https://example.com/2\"), Link(\"https://example.com/1\")]\r\n \r\n \r\n def test_group_locations__file_expand_dir(data):\r\n     \"\"\"\r\n     Test that a file:// dir gets listdir run with expand_dir\r\n     \"\"\"\r\n     files, urls = group_locations([data.find_links], expand_dir=True)\r\n     assert files and not urls, (\r\n-        \"files and not urls should have been found at find-links url: %s\" %\r\n-        data.find_links\r\n+        \"files and not urls should have been found at find-links url: %s\"\r\n+        % data.find_links\r\n     )\r\n \r\n \r\n def test_group_locations__file_not_find_link(data):\r\n     \"\"\"\r\n@@ -414,65 +403,66 @@\r\n \r\n def test_group_locations__non_existing_path():\r\n     \"\"\"\r\n     Test that a non-existing path is ignored.\r\n     \"\"\"\r\n-    files, urls = group_locations([os.path.join('this', 'doesnt', 'exist')])\r\n+    files, urls = group_locations([os.path.join(\"this\", \"doesnt\", \"exist\")])\r\n     assert not urls and not files, \"nothing should have been found\"\r\n \r\n \r\n def check_links_include(links, names):\r\n     \"\"\"\r\n     Assert that the given list of Link objects includes, for each of the\r\n     given names, a link whose URL has a base name matching that name.\r\n     \"\"\"\r\n     for name in names:\r\n-        assert any(link.url.endswith(name) for link in links), (\r\n-            'name {!r} not among links: {}'.format(name, links)\r\n-        )\r\n+        assert any(\r\n+            link.url.endswith(name) for link in links\r\n+        ), \"name {!r} not among links: {}\".format(name, links)\r\n \r\n \r\n class TestLinkCollector(object):\r\n-\r\n-    @patch('pip._internal.collector._get_html_response')\r\n+    @patch(\"pip._internal.collector._get_html_response\")\r\n     def test_collect_links(self, mock_get_html_response, caplog, data):\r\n         caplog.set_level(logging.DEBUG)\r\n \r\n-        expected_url = 'https://pypi.org/simple/twine/'\r\n+        expected_url = \"https://pypi.org/simple/twine/\"\r\n \r\n         fake_page = make_fake_html_response(expected_url)\r\n         mock_get_html_response.return_value = fake_page\r\n \r\n         link_collector = make_test_link_collector(\r\n             find_links=[data.find_links],\r\n             # Include two copies of the URL to check that the second one\r\n             # is skipped.\r\n             index_urls=[PyPI.simple_url, PyPI.simple_url],\r\n         )\r\n-        actual = link_collector.collect_links('twine')\r\n+        actual = link_collector.collect_links(\"twine\")\r\n \r\n         mock_get_html_response.assert_called_once_with(\r\n-            expected_url, session=link_collector.session,\r\n+            expected_url, session=link_collector.session\r\n         )\r\n \r\n         # Spot-check the CollectedLinks return value.\r\n         assert len(actual.files) > 20\r\n-        check_links_include(actual.files, names=['simple-1.0.tar.gz'])\r\n+        check_links_include(actual.files, names=[\"simple-1.0.tar.gz\"])\r\n \r\n         assert len(actual.find_links) == 1\r\n-        check_links_include(actual.find_links, names=['packages'])\r\n+        check_links_include(actual.find_links, names=[\"packages\"])\r\n \r\n         actual_pages = actual.pages\r\n         assert list(actual_pages) == [expected_url]\r\n         actual_page_links = actual_pages[expected_url]\r\n         assert len(actual_page_links) == 1\r\n-        assert actual_page_links[0].url == (\r\n-            'https://pypi.org/abc-1.0.tar.gz#md5=000000000'\r\n+        assert actual_page_links[\r\n+            0\r\n+        ].url == \"https://pypi.org/abc-1.0.tar.gz#md5=000000000\"\r\n+\r\n+        expected_message = dedent(\r\n+            \"\"\"\\\r\n+        1 location(s) to search for versions of twine:\r\n+        * https://pypi.org/simple/twine/\"\"\"\r\n         )\r\n-\r\n-        expected_message = dedent(\"\"\"\\\r\n-        1 location(s) to search for versions of twine:\r\n-        * https://pypi.org/simple/twine/\"\"\")\r\n         assert caplog.record_tuples == [\r\n-            ('pip._internal.collector', logging.DEBUG, expected_message),\r\n+            (\"pip._internal.collector\", logging.DEBUG, expected_message)\r\n         ]\r\n \r\n--- first pass\r\n+++ second pass\r\n@@ -451,13 +451,13 @@\r\n \r\n         actual_pages = actual.pages\r\n         assert list(actual_pages) == [expected_url]\r\n         actual_page_links = actual_pages[expected_url]\r\n         assert len(actual_page_links) == 1\r\n-        assert actual_page_links[\r\n-            0\r\n-        ].url == \"https://pypi.org/abc-1.0.tar.gz#md5=000000000\"\r\n+        assert (\r\n+            actual_page_links[0].url == \"https://pypi.org/abc-1.0.tar.gz#md5=000000000\"\r\n+        )\r\n \r\n         expected_message = dedent(\r\n             \"\"\"\\\r\n         1 location(s) to search for versions of twine:\r\n         * https://pypi.org/simple/twine/\"\"\"\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/psf/black/issues/1044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/1044/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"hugovk","id":1324225,"node_id":"MDQ6VXNlcjEzMjQyMjU=","avatar_url":"https://avatars.githubusercontent.com/u/1324225?v=4","gravatar_id":"","url":"https://api.github.com/users/hugovk","html_url":"https://github.com/hugovk","followers_url":"https://api.github.com/users/hugovk/followers","following_url":"https://api.github.com/users/hugovk/following{/other_user}","gists_url":"https://api.github.com/users/hugovk/gists{/gist_id}","starred_url":"https://api.github.com/users/hugovk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hugovk/subscriptions","organizations_url":"https://api.github.com/users/hugovk/orgs","repos_url":"https://api.github.com/users/hugovk/repos","events_url":"https://api.github.com/users/hugovk/events{/privacy}","received_events_url":"https://api.github.com/users/hugovk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T20:23:39Z","updated_at":"2019-10-13T20:23:39Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/psf/black/issues/1042","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/1042/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/1042/comments","events_url":"https://api.github.com/repos/psf/black/issues/1042/events","html_url":"https://github.com/psf/black/issues/1042","id":501818759,"node_id":"MDU6SXNzdWU1MDE4MTg3NTk=","number":1042,"title":"Regression: Unstable formatting on long strings","user":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-10-03T02:34:37Z","updated_at":"2019-10-20T16:02:18Z","closed_at":"2019-10-20T16:02:18Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":125266328,"node_id":"MDEwOlJlcG9zaXRvcnkxMjUyNjYzMjg=","name":"black","full_name":"psf/black","private":false,"owner":{"login":"psf","id":50630501,"node_id":"MDEyOk9yZ2FuaXphdGlvbjUwNjMwNTAx","avatar_url":"https://avatars.githubusercontent.com/u/50630501?v=4","gravatar_id":"","url":"https://api.github.com/users/psf","html_url":"https://github.com/psf","followers_url":"https://api.github.com/users/psf/followers","following_url":"https://api.github.com/users/psf/following{/other_user}","gists_url":"https://api.github.com/users/psf/gists{/gist_id}","starred_url":"https://api.github.com/users/psf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psf/subscriptions","organizations_url":"https://api.github.com/users/psf/orgs","repos_url":"https://api.github.com/users/psf/repos","events_url":"https://api.github.com/users/psf/events{/privacy}","received_events_url":"https://api.github.com/users/psf/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/psf/black","description":"The uncompromising Python code formatter","fork":false,"url":"https://api.github.com/repos/psf/black","forks_url":"https://api.github.com/repos/psf/black/forks","keys_url":"https://api.github.com/repos/psf/black/keys{/key_id}","collaborators_url":"https://api.github.com/repos/psf/black/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/psf/black/teams","hooks_url":"https://api.github.com/repos/psf/black/hooks","issue_events_url":"https://api.github.com/repos/psf/black/issues/events{/number}","events_url":"https://api.github.com/repos/psf/black/events","assignees_url":"https://api.github.com/repos/psf/black/assignees{/user}","branches_url":"https://api.github.com/repos/psf/black/branches{/branch}","tags_url":"https://api.github.com/repos/psf/black/tags","blobs_url":"https://api.github.com/repos/psf/black/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/psf/black/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/psf/black/git/refs{/sha}","trees_url":"https://api.github.com/repos/psf/black/git/trees{/sha}","statuses_url":"https://api.github.com/repos/psf/black/statuses/{sha}","languages_url":"https://api.github.com/repos/psf/black/languages","stargazers_url":"https://api.github.com/repos/psf/black/stargazers","contributors_url":"https://api.github.com/repos/psf/black/contributors","subscribers_url":"https://api.github.com/repos/psf/black/subscribers","subscription_url":"https://api.github.com/repos/psf/black/subscription","commits_url":"https://api.github.com/repos/psf/black/commits{/sha}","git_commits_url":"https://api.github.com/repos/psf/black/git/commits{/sha}","comments_url":"https://api.github.com/repos/psf/black/comments{/number}","issue_comment_url":"https://api.github.com/repos/psf/black/issues/comments{/number}","contents_url":"https://api.github.com/repos/psf/black/contents/{+path}","compare_url":"https://api.github.com/repos/psf/black/compare/{base}...{head}","merges_url":"https://api.github.com/repos/psf/black/merges","archive_url":"https://api.github.com/repos/psf/black/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/psf/black/downloads","issues_url":"https://api.github.com/repos/psf/black/issues{/number}","pulls_url":"https://api.github.com/repos/psf/black/pulls{/number}","milestones_url":"https://api.github.com/repos/psf/black/milestones{/number}","notifications_url":"https://api.github.com/repos/psf/black/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/psf/black/labels{/name}","releases_url":"https://api.github.com/repos/psf/black/releases{/id}","deployments_url":"https://api.github.com/repos/psf/black/deployments","created_at":"2018-03-14T19:54:45Z","updated_at":"2025-11-09T16:48:04Z","pushed_at":"2025-11-05T18:14:18Z","git_url":"git://github.com/psf/black.git","ssh_url":"git@github.com:psf/black.git","clone_url":"https://github.com/psf/black.git","svn_url":"https://github.com/psf/black","homepage":"https://black.readthedocs.io/en/stable/","size":7569,"stargazers_count":41126,"watchers_count":41126,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":2665,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":337,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["autopep8","code","codeformatter","formatter","gofmt","hacktoberfest","pre-commit-hook","python","yapf"],"visibility":"public","forks":2665,"open_issues":337,"watchers":41126,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I tested Black master on our codebase in preparation for a release, but found that Black failed to format 17 files (the previous release didn't crash on any of our files). It's not clear that all of these have the same root cause, but here's one I minimized somewhat:\r\n\r\n```\r\n$ black infra-common/qroxy/qroxy.py \r\nerror: cannot format infra-common/qroxy/qroxy.py: INTERNAL ERROR: Black produced different code on the second pass of the formatter.  Please report a bug on https://github.com/psf/black/issues.  This diff might be helpful: /tmp/blk_i040l_hj.log\r\nOh no!   \r\n1 file failed to reformat.\r\n$ cat /tmp/blk_i040l_hj.log \r\n--- source\r\n+++ first pass\r\n@@ -1,10 +1,10 @@\r\n async def show_status():\r\n     while True:\r\n         try:\r\n             if report_host:\r\n                 data = (\r\n-                    f\"{boxname},{alive_server_connections},{server_queue.size()},{requester_queue.size()}\"\r\n-                ).encode()\r\n+                    f\"{boxname},{alive_server_connections},{server_queue.size()},{requester_queue.size()}\".encode()\r\n+                )\r\n         except Exception as e:\r\n             log.error(f\"show_status thread encounters exception: {e}\")\r\n \r\n--- first pass\r\n+++ second pass\r\n@@ -1,10 +1,8 @@\r\n async def show_status():\r\n     while True:\r\n         try:\r\n             if report_host:\r\n-                data = (\r\n-                    f\"{boxname},{alive_server_connections},{server_queue.size()},{requester_queue.size()}\".encode()\r\n-                )\r\n+                data = f\"{boxname},{alive_server_connections},{server_queue.size()},{requester_queue.size()}\".encode()\r\n         except Exception as e:\r\n             log.error(f\"show_status thread encounters exception: {e}\")\r\n \r\n$ cat infra-common/qroxy/qroxy.py \r\nasync def show_status():\r\n    while True:\r\n        try:\r\n            if report_host:\r\n                data = (\r\n                    f\"{boxname},{alive_server_connections},{server_queue.size()},{requester_queue.size()}\"\r\n                ).encode()\r\n        except Exception as e:\r\n            log.error(f\"show_status thread encounters exception: {e}\")\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/psf/black/issues/1042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/1042/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]