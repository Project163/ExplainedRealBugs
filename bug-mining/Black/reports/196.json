{"url":"https://api.github.com/repos/psf/black/issues/2360","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2360/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2360/comments","events_url":"https://api.github.com/repos/psf/black/issues/2360/events","html_url":"https://github.com/psf/black/issues/2360","id":936824338,"node_id":"MDU6SXNzdWU5MzY4MjQzMzg=","number":2360,"title":"Make SRC/CODE mandatory and mutually exclusive","user":{"login":"felix-hilden","id":25202257,"node_id":"MDQ6VXNlcjI1MjAyMjU3","avatar_url":"https://avatars.githubusercontent.com/u/25202257?v=4","gravatar_id":"","url":"https://api.github.com/users/felix-hilden","html_url":"https://github.com/felix-hilden","followers_url":"https://api.github.com/users/felix-hilden/followers","following_url":"https://api.github.com/users/felix-hilden/following{/other_user}","gists_url":"https://api.github.com/users/felix-hilden/gists{/gist_id}","starred_url":"https://api.github.com/users/felix-hilden/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felix-hilden/subscriptions","organizations_url":"https://api.github.com/users/felix-hilden/orgs","repos_url":"https://api.github.com/users/felix-hilden/repos","events_url":"https://api.github.com/users/felix-hilden/events{/privacy}","received_events_url":"https://api.github.com/users/felix-hilden/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1348567694,"node_id":"MDU6TGFiZWwxMzQ4NTY3Njk0","url":"https://api.github.com/repos/psf/black/labels/C:%20configuration","name":"C: configuration","color":"16BC84","default":false,"description":"CLI and configuration"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-07-05T08:18:38Z","updated_at":"2022-01-24T15:35:57Z","closed_at":"2022-01-24T15:35:57Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Is your feature request related to a problem? Please describe.**\r\nFrom #2356, which made (assuming it got merged) SRC appear as a mandatory CLI parameter: Strictly speaking, SRC is optional both in the way that Black accepts no arguments (and then prints \"nothing to do\") and with `--code \"\"`. I think accepting SRC and then skipping it when `-c` is passed is a bit confusing.\r\n\r\n**Describe the solution you'd like**\r\nI'll propose we make `SRC` and `--code` mutually exclusive and require one of them.\r\n\r\nSo, something like this:\r\n```\r\n> black\r\nBLACK IS MAD: specify one of SRC / --code\r\n\r\n> black --code \"\" .\r\nBLACK IS FURIOUS: are you trying to confuse me?\r\n```\r\n\r\nI wonder if Click has some way of documenting call modes. Maybe something like:\r\n\r\n```\r\n> black --help\r\n\r\nblack [opts] src\r\nblack [opts] --code CODE\r\n\r\nOptions:\r\n...\r\n```\r\n\r\nThe \"nothing to do\" message could be emitted when the supplied path doesn't contain any valid files, like it is currently.\r\n\r\n*Ideally* though, we would have a flag to turn the source to code I think. If I'm thinking about it from a documentation perspective, it would be much easier to explain:\r\n\r\n```\r\n> black --help\r\n\r\nblack [opts] src\r\n\r\nSRC     Sources to be formatted as directories or files.\r\n        If --code was passed, treat SRC as Python text.\r\n\r\nOptions:\r\ncode    Treat SRC as Python text.\r\n```\r\n\r\nI don't know what multiple sources of Python text would do then. Maybe different lines, or we could require only one source in that case. Anyways, this is kind of an addon to my proposition, not the main thing.\r\n\r\n**Additional context**\r\nAlso, relevant discussion in #861: SRC is currently undocumented on the CLI help. We should definitely document it while we're at it (if it doesn't get documented earlier).","closed_by":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/psf/black/issues/2360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2360/timeline","performed_via_github_app":null,"state_reason":"completed"}