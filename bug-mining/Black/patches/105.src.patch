diff --git a/.travis.yml b/.travis.yml
index 01c1339..c0cd5ab 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -33,6 +33,10 @@ matrix:
       python: 3.7
     - name: "3.8-dev"
       python: 3.8-dev
+  # aiohttp currently has a bug affecting 3.8
+  allow_failures:
+    - name: "3.8-dev"
+      python: 3.8-dev
 before_deploy:
   - pip install pyinstaller
   - pyinstaller --clean -F --add-data blib2to3/:blib2to3 black.py
diff --git a/setup.py b/setup.py
index 096be9e..620124f 100644
--- a/setup.py
+++ b/setup.py
@@ -42,7 +42,7 @@ def get_version() -> str:
     python_requires=">=3.6",
     zip_safe=False,
     install_requires=["click>=6.5", "attrs>=18.1.0", "appdirs", "toml>=0.9.4"],
-    extras_require={"d": ["aiohttp>=3.3.2"]},
+    extras_require={"d": ["aiohttp>=3.3.2", "aiohttp-cors"]},
     test_suite="tests.test_black",
     classifiers=[
         "Development Status :: 4 - Beta",
