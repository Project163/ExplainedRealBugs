<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:41:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MSHARED-36] Maven Archiver creates incorrect Class-Path entry in Manifest for deployed snapshots</title>
                <link>https://issues.apache.org/jira/browse/MSHARED-36</link>
                <project id="12317922" key="MSHARED">Maven Shared Components</project>
                    <description>&lt;p&gt;See related problems &lt;a href=&quot;https://issues.apache.org/jira/browse/MJAR-28&quot; title=&quot;Using the jar plugin with addClasspath and snapshots can create manifest classpath with incorrect jar versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MJAR-28&quot;&gt;&lt;del&gt;MJAR-28&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/MASSEMBLY-67&quot; title=&quot;assembling dependent jars or snapshots uses timestamp formatted version instead of ${version}&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MASSEMBLY-67&quot;&gt;&lt;del&gt;MASSEMBLY-67&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Summary:&lt;/p&gt;

&lt;p&gt;The Maven-Archiver uses the file part of the artifact&apos;s filename to create the Class-Path entries in the Manifest.&lt;br/&gt;
This works fine for released artifacts and non-deployed snapshot.&lt;br/&gt;
The problem occurs when using a deployed snapshot as the assembly plugin will copy the dependency as ${artifactId}&lt;del&gt;${version}-timestampedversion.jar and the entry in the Class-Path will be ${artifactId}&lt;/del&gt;${version}-SNAPSHOT&lt;br/&gt;
thus use of java -jar &amp;lt;jarfile&amp;gt; will fail because of the differing names.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12808231">MSHARED-36</key>
            <summary>Maven Archiver creates incorrect Class-Path entry in Manifest for deployed snapshots</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcasey">John Dennis Casey</assignee>
                                    <reporter username="baerrach">Barrie Treloar</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Jul 2006 19:53:39 +0000</created>
                <updated>Sun, 15 Jun 2025 12:53:26 +0000</updated>
                            <resolved>Mon, 22 Sep 2008 15:03:11 +0000</resolved>
                                                    <fixVersion>maven-archiver-2.4</fixVersion>
                                    <component>maven-archiver</component>
                        <due></due>
                            <votes>9</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14449354" author="baerrach" created="Wed, 19 Jul 2006 19:56:30 +0000"  >&lt;p&gt;Attached refactoring patch, with appropriate test cases, that changes Maven Archiver to use Project.getRuntimeArtifacts instead of Project.getRuntimeClasspathElements.&lt;/p&gt;</comment>
                            <comment id="14449301" author="baerrach" created="Wed, 19 Jul 2006 21:07:40 +0000"  >&lt;p&gt;Test Cases that exercise the problems.&lt;br/&gt;
(Unfortunately the patch also includes previous steps)&lt;/p&gt;</comment>
                            <comment id="14449262" author="baerrach" created="Wed, 19 Jul 2006 21:15:29 +0000"  >&lt;p&gt;Patch to fix the bug and get working unit test&lt;br/&gt;
(Unfortunately the patch also includes previous steps)&lt;/p&gt;</comment>
                            <comment id="14449277" author="baerrach" created="Sun, 6 Aug 2006 18:51:41 +0000"  >&lt;p&gt;Oops. Classpath is missing file extension...&lt;br/&gt;
Need to update tests and repatch.&lt;/p&gt;</comment>
                            <comment id="14449252" author="baerrach" created="Sun, 6 Aug 2006 19:13:26 +0000"  >&lt;p&gt;Patch adds the type of the artifact to the classpath which was incorrectly left off.&lt;/p&gt;</comment>
                            <comment id="14449263" author="baerrach" created="Fri, 11 Aug 2006 16:19:44 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/MASSEMBLY-67&quot; title=&quot;assembling dependent jars or snapshots uses timestamp formatted version instead of ${version}&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MASSEMBLY-67&quot;&gt;&lt;del&gt;MASSEMBLY-67&lt;/del&gt;&lt;/a&gt; John Casey says&lt;/p&gt;

&lt;p&gt;The solution here is to use an outputFileNameMapping such as this:&lt;/p&gt;

&lt;p&gt;${artifactId}-${baseVersion}.${extension}&lt;/p&gt;

&lt;p&gt;Using ${baseVersion} for cases where you want to preserve the -SNAPSHOT naming, the plugin retains the ability to use ${version} for the timestamp-buildnumber naming, which is useful for describing the exact library version included in the assembly.&lt;/p&gt;

</comment>
                            <comment id="14449315" author="maxb" created="Wed, 6 Sep 2006 14:13:04 +0000"  >&lt;p&gt;I think this issue should be reopened. It is true that an outputFileNameMapping can provide a workaround, but that&apos;s only a workaround, not a fix.&lt;/p&gt;</comment>
                            <comment id="14449292" author="maxb" created="Mon, 11 Sep 2006 10:17:00 +0000"  >&lt;p&gt;I think the true issue is in the core component maven-artifact-manager, in the DefaultArtifactResolver class - which, in the case of a snapshot version, explicitly overrides the artifact&apos;s file property from the &quot;version&quot; name to the &quot;baseVersion&quot; name. Search for the line &quot;artifact.setFile( copy );&quot; to find the relevant place in the code. I suggest that that line should simply be deleted, allowing artifact.getName() to remain returning the &quot;version&quot; name.&lt;/p&gt;</comment>
                            <comment id="14449336" author="maxb" created="Mon, 11 Sep 2006 10:26:53 +0000"  >&lt;p&gt;Since I cannot override a core component from a POM, I have made a workaround that fixes the behaviour at the maven-archiver level. I am attaching a patch against maven-archiver-2.2.&lt;/p&gt;

&lt;p&gt;My patch is generally along the same fundamental approach as Baerrach&apos;s, but with the following differences:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;aims to fix the problem with minimal changes, instead of including refactoring mixed with the fix.&lt;/li&gt;
	&lt;li&gt;applies the fix to the jar indexing codepath too.&lt;/li&gt;
	&lt;li&gt;tries to avoid hardcoding the details of how to construct artifact filenames.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In that last point, it is only partially successful - I could not work out how to get hold of an appropriate ArtifactRepository object within maven-archiver, so I resorted to making the twin assumptions:&lt;br/&gt;
 1. that the existing filepath would contain the correct path, and only the basename need be fixed up.&lt;br/&gt;
 2. that a DefaultRepositoryLayout object would give me the correct basename.&lt;/p&gt;

&lt;p&gt;In practice this seems to work, even if it is a little ugly.&lt;/p&gt;</comment>
                            <comment id="14449278" author="cg" created="Fri, 12 Jan 2007 12:02:53 +0000"  >&lt;p&gt;I would like to see a fix that does not involve adding extra configuration items to the assembly... whatever happened to &quot;convention instead of configuration&quot; - and yes, the onus is on &lt;del&gt;you&lt;/del&gt; to determine which behaviour should be &quot;standard&quot;...&lt;/p&gt;</comment>
                            <comment id="14449891" author="matthew.mccullough" created="Wed, 15 Aug 2007 18:23:11 +0000"  >&lt;p&gt;The assembly:assembly behavior that uses the timestamped JAR name causes a disagreement with jar:jar thus resulting in a zip package that can&apos;t be executed since the jar names in the manifest are &quot;simple names&quot; and the jars actually delivered in the ZIP assembly are the date-stamped ones.&lt;/p&gt;</comment>
                            <comment id="14449371" author="brianf@infinity.nu" created="Fri, 7 Mar 2008 19:45:01 +0000"  >&lt;p&gt;Can someone produce an IT for this?&lt;/p&gt;</comment>
                            <comment id="14449299" author="aldana" created="Wed, 14 May 2008 04:15:40 +0000"  >&lt;p&gt;i got same problem. for the start i workarounded this by setting &amp;lt;uniqueVersion&amp;gt;false&amp;lt;/uniqueVersion&amp;gt; in distribution management for snapshots.&lt;/p&gt;</comment>
                            <comment id="14449879" author="darboistom" created="Wed, 28 May 2008 09:38:51 +0000"  >&lt;p&gt;Error &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14449532" author="jdcasey" created="Mon, 22 Sep 2008 15:03:11 +0000"  >&lt;p&gt;I&apos;ve changed the manifest creation logic to use the timestamp/buildnumber version by default (when the classpathLayoutType is simple - the default value - or repository, which makes it act like a maven repo dir structure). The repo output looks like:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org/codehaus/plexus/plexus-archiver/1.0-alpha-11-SNAPSHOT/plexus-archiver-1.0-alpha-11-20081022.112233-1.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You could always specify a custom classpathLayoutType and customClasspathLayout configuration to modify this.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/MSHARED-32&quot; title=&quot;Customization of jar-name pattern of classpath-entries inside MANIFEST.MF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHARED-32&quot;&gt;&lt;del&gt;MSHARED-32&lt;/del&gt;&lt;/a&gt; for more info on the custom layout stuff.&lt;/p&gt;</comment>
                            <comment id="17977466" author="JIRAUSER302100" created="Sun, 15 Jun 2025 12:53:26 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-archiver/issues/121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-archiver#121&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12801217">MDEPLOY-57</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12798914">MASSEMBLY-67</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12803958">MJAR-28</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12801217">MDEPLOY-57</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12719099" name="MNG-2456-maxb.patch" size="5650" author="maxb" created="Mon, 11 Sep 2006 10:26:53 +0000"/>
                            <attachment id="12719082" name="MNG-2456-patch.txt" size="25178" author="baerrach" created="Sun, 6 Aug 2006 19:13:26 +0000"/>
                            <attachment id="12719122" name="MNG-2456-step1-refactoring-patch.txt" size="20907" author="baerrach" created="Wed, 19 Jul 2006 19:56:30 +0000"/>
                            <attachment id="12719067" name="MNG-2456-step2-add-test-cases-patch.txt" size="25632" author="baerrach" created="Wed, 19 Jul 2006 21:07:40 +0000"/>
                            <attachment id="12719077" name="MNG-2456-step3-fix-bug-patch.txt" size="25628" author="baerrach" created="Wed, 19 Jul 2006 21:15:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2b3zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>