diff --git a/release-notes/CREDITS b/release-notes/CREDITS
index 7ed322d..6f49189 100644
--- a/release-notes/CREDITS
+++ b/release-notes/CREDITS
@@ -11,3 +11,8 @@ Anton O (mavarazy@github)
 
 #35: Add annotation based support for HyperSchema to JsonSchema
  (2.4.1)
+
+Greg Adams (gadams00@github)
+
+#47: VisitorContext results in incomplete json schema output
+ (2.4.4)
diff --git a/release-notes/VERSION b/release-notes/VERSION
index 7041026..f80289b 100644
--- a/release-notes/VERSION
+++ b/release-notes/VERSION
@@ -1,13 +1,19 @@
 Project: jackson-module-jsonSchema
-Version: 2.4.3 (03-Oct-2014)
-
-#34: NPE when generating schema for class with JsonValue annotation over Collection/Array
- (reported by peshitz@github)
 
 ------------------------------------------------------------------------
-=== History: ===
+=== Releases ===
 ------------------------------------------------------------------------
 
+2.4.4 (not yet released)
+
+#47: VisitorContext results in incomplete json schema output
+ (reported by Greg A)
+
+2.4.3 (03-Oct-2014)
+
+#34: NPE when generating schema for class with JsonValue annotation over Collection/Array
+ (reported by peshitz@github)
+
 2.4.2 (14-Aug-2014)
 
 No changes since 2.4.1.
diff --git a/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/MapVisitor.java b/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/MapVisitor.java
index 2beb41b..e40ab5a 100644
--- a/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/MapVisitor.java
+++ b/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/MapVisitor.java
@@ -84,7 +84,7 @@ public class MapVisitor extends JsonMapFormatVisitor.Base
 
         // check if we've seen this sub-schema already and return a reference-schema if we have
         if (visitorContext != null) {
-            String seenSchemaUri = VisitorContext.getSeenSchemaUri(propertyTypeHint);
+            String seenSchemaUri = visitorContext.getSeenSchemaUri(propertyTypeHint);
             if (seenSchemaUri != null) {
                 return new ReferenceSchema(seenSchemaUri);
             }
diff --git a/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/ObjectVisitor.java b/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/ObjectVisitor.java
index 524eb89..ad7d67f 100644
--- a/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/ObjectVisitor.java
+++ b/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/ObjectVisitor.java
@@ -103,7 +103,7 @@ public class ObjectVisitor extends JsonObjectFormatVisitor.Base
         }
 
         // check if we've seen this argument's sub-schema already and return a reference-schema if we have
-        String seenSchemaUri = VisitorContext.getSeenSchemaUri(prop.getType());
+        String seenSchemaUri = visitorContext.getSeenSchemaUri(prop.getType());
         if (seenSchemaUri != null) {
             return new ReferenceSchema(seenSchemaUri);
         }
@@ -125,7 +125,7 @@ public class ObjectVisitor extends JsonObjectFormatVisitor.Base
     {
         // check if we've seen this argument's sub-schema already and return a reference-schema if we have
         if (visitorContext != null) {
-            String seenSchemaUri = VisitorContext.getSeenSchemaUri(propertyTypeHint);
+            String seenSchemaUri = visitorContext.getSeenSchemaUri(propertyTypeHint);
             if (seenSchemaUri != null) {
                 return new ReferenceSchema(seenSchemaUri);
             }
diff --git a/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/SchemaFactoryWrapper.java b/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/SchemaFactoryWrapper.java
index d22b121..9d96c16 100644
--- a/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/SchemaFactoryWrapper.java
+++ b/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/SchemaFactoryWrapper.java
@@ -101,8 +101,7 @@ public class SchemaFactoryWrapper implements JsonFormatVisitorWrapper, Visitor
         schema = s;
 
         // if we don't already have a recursive visitor context, create one
-        if (visitorContext == null)
-        {
+        if (visitorContext == null) {
             visitorContext = new VisitorContext();
         }
 
diff --git a/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/VisitorContext.java b/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/VisitorContext.java
index d2c7afe..b068893 100644
--- a/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/VisitorContext.java
+++ b/src/main/java/com/fasterxml/jackson/module/jsonSchema/factories/VisitorContext.java
@@ -4,15 +4,11 @@ import com.fasterxml.jackson.databind.JavaType;
 
 import java.util.HashSet;
 
-/**
- * Created by adb on 6/9/14.
- */
-public class VisitorContext {
+public class VisitorContext
+{
+    private final HashSet<JavaType> seenSchemas = new HashSet<JavaType>();
 
-    private static HashSet<JavaType> seenSchemas = new HashSet<JavaType>();
-
-    static public String addSeenSchemaUri(JavaType aSeenSchema)
-    {
+    public String addSeenSchemaUri(JavaType aSeenSchema) {
         if (aSeenSchema != null && !aSeenSchema.isPrimitive()) {
             seenSchemas.add(aSeenSchema);
             return javaTypeToUrn(aSeenSchema);
@@ -20,13 +16,11 @@ public class VisitorContext {
         return null;
     }
 
-    static public String getSeenSchemaUri(JavaType aSeenSchema)
-    {
+    public String getSeenSchemaUri(JavaType aSeenSchema) {
         return (seenSchemas.contains(aSeenSchema)) ? javaTypeToUrn(aSeenSchema) : null;
     }
 
-    static public String javaTypeToUrn(JavaType jt)
-    {
+    public String javaTypeToUrn(JavaType jt) {
         return "urn:jsonschema:" + jt.toCanonical().replace('.', ':').replace('$', ':');
     }
 }
diff --git a/src/test/java/com/fasterxml/jackson/module/jsonSchema/TestVisitorContext.java b/src/test/java/com/fasterxml/jackson/module/jsonSchema/TestVisitorContext.java
new file mode 100644
index 0000000..647750f
--- /dev/null
+++ b/src/test/java/com/fasterxml/jackson/module/jsonSchema/TestVisitorContext.java
@@ -0,0 +1,100 @@
+package com.fasterxml.jackson.module.jsonSchema;
+
+import com.fasterxml.jackson.databind.*;
+import com.fasterxml.jackson.module.jsonSchema.factories.SchemaFactoryWrapper;
+
+public class TestVisitorContext extends SchemaTestBase
+{
+    static class Foo {
+        private String fooProp1;
+        private int fooProp2;
+        private Bar fooProp3;
+
+        public String getFooProp1() {
+            return fooProp1;
+        }
+
+        public void setFooProp1(String fooProp1) {
+            this.fooProp1 = fooProp1;
+        }
+
+        public int getFooProp2() {
+            return fooProp2;
+        }
+
+        public void setFooProp2(int fooProp2) {
+            this.fooProp2 = fooProp2;
+        }
+
+        public Bar getFooProp3() {
+            return fooProp3;
+        }
+
+        public void setFooProp3(Bar fooProp3) {
+            this.fooProp3 = fooProp3;
+        }
+    }
+
+    static class Bar {
+        private String barProp1;
+        private int barProp2;
+
+        public String getBarProp1() {
+            return barProp1;
+        }
+
+        public void setBarProp1(String barProp1) {
+            this.barProp1 = barProp1;
+        }
+
+        public int getBarProp2() {
+            return barProp2;
+        }
+
+        public void setBarProp2(int barProp2) {
+            this.barProp2 = barProp2;
+        }
+    }
+
+    static class Qwer {
+        private String qwerProp1;
+        private Bar qwerProp2;
+
+        public String getQwerProp1() {
+            return qwerProp1;
+        }
+
+        public void setQwerProp1(String qwerProp1) {
+            this.qwerProp1 = qwerProp1;
+        }
+
+        public Bar getQwerProp2() {
+            return qwerProp2;
+        }
+
+        public void setQwerProp2(Bar qwerProp2) {
+            this.qwerProp2 = qwerProp2;
+        }
+    }
+
+    // for [jsonSchema#47]
+    public void testSchemaGeneration() throws Exception {
+        String schemaStr = generateSchema(Foo.class);
+        schemaStr = generateSchema(Qwer.class);
+        // ok, not very robust but has to do:
+        if (schemaStr.indexOf("$ref") >= 0) {
+            fail("Should not have $ref for type Bar (as per issue #47): "+schemaStr);
+        }
+    }
+
+    private final static ObjectMapper MAPPER = new ObjectMapper();
+    
+    private String generateSchema(Class<?> clazz) throws Exception
+    {
+        MAPPER.configure(SerializationFeature.INDENT_OUTPUT, true);
+        SchemaFactoryWrapper visitor = new SchemaFactoryWrapper();
+        MAPPER.acceptJsonFormatVisitor(MAPPER.constructType(clazz), visitor);
+        return MAPPER.writeValueAsString(visitor.finalSchema());
+    }
+
+}
