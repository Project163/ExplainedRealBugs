[{"id":15308412742,"node_id":"LE_lADOAzqfmc6enHoXzwAAAAOQc9dG","url":"https://api.github.com/repos/storybookjs/storybook/issues/events/15308412742","actor":{"login":"sentience","id":89772,"node_id":"MDQ6VXNlcjg5Nzcy","avatar_url":"https://avatars.githubusercontent.com/u/89772?v=4","gravatar_id":"","url":"https://api.github.com/users/sentience","html_url":"https://github.com/sentience","followers_url":"https://api.github.com/users/sentience/followers","following_url":"https://api.github.com/users/sentience/following{/other_user}","gists_url":"https://api.github.com/users/sentience/gists{/gist_id}","starred_url":"https://api.github.com/users/sentience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sentience/subscriptions","organizations_url":"https://api.github.com/users/sentience/orgs","repos_url":"https://api.github.com/users/sentience/repos","events_url":"https://api.github.com/users/sentience/events{/privacy}","received_events_url":"https://api.github.com/users/sentience/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-11-15T07:22:11Z","label":{"name":"bug","color":"EB484F"},"performed_via_github_app":null},{"id":15308412747,"node_id":"LE_lADOAzqfmc6enHoXzwAAAAOQc9dL","url":"https://api.github.com/repos/storybookjs/storybook/issues/events/15308412747","actor":{"login":"sentience","id":89772,"node_id":"MDQ6VXNlcjg5Nzcy","avatar_url":"https://avatars.githubusercontent.com/u/89772?v=4","gravatar_id":"","url":"https://api.github.com/users/sentience","html_url":"https://github.com/sentience","followers_url":"https://api.github.com/users/sentience/followers","following_url":"https://api.github.com/users/sentience/following{/other_user}","gists_url":"https://api.github.com/users/sentience/gists{/gist_id}","starred_url":"https://api.github.com/users/sentience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sentience/subscriptions","organizations_url":"https://api.github.com/users/sentience/orgs","repos_url":"https://api.github.com/users/sentience/repos","events_url":"https://api.github.com/users/sentience/events{/privacy}","received_events_url":"https://api.github.com/users/sentience/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-11-15T07:22:11Z","label":{"name":"needs triage","color":"D4C5F9"},"performed_via_github_app":null},{"id":15333692767,"node_id":"LE_lADOAzqfmc6enHoXzwAAAAOR9ZVf","url":"https://api.github.com/repos/storybookjs/storybook/issues/events/15333692767","actor":{"login":"valentinpalkovic","id":5889929,"node_id":"MDQ6VXNlcjU4ODk5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5889929?v=4","gravatar_id":"","url":"https://api.github.com/users/valentinpalkovic","html_url":"https://github.com/valentinpalkovic","followers_url":"https://api.github.com/users/valentinpalkovic/followers","following_url":"https://api.github.com/users/valentinpalkovic/following{/other_user}","gists_url":"https://api.github.com/users/valentinpalkovic/gists{/gist_id}","starred_url":"https://api.github.com/users/valentinpalkovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valentinpalkovic/subscriptions","organizations_url":"https://api.github.com/users/valentinpalkovic/orgs","repos_url":"https://api.github.com/users/valentinpalkovic/repos","events_url":"https://api.github.com/users/valentinpalkovic/events{/privacy}","received_events_url":"https://api.github.com/users/valentinpalkovic/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-11-18T12:31:39Z","label":{"name":"help wanted","color":"0E8A16"},"performed_via_github_app":null},{"id":15333692771,"node_id":"LE_lADOAzqfmc6enHoXzwAAAAOR9ZVj","url":"https://api.github.com/repos/storybookjs/storybook/issues/events/15333692771","actor":{"login":"valentinpalkovic","id":5889929,"node_id":"MDQ6VXNlcjU4ODk5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5889929?v=4","gravatar_id":"","url":"https://api.github.com/users/valentinpalkovic","html_url":"https://github.com/valentinpalkovic","followers_url":"https://api.github.com/users/valentinpalkovic/followers","following_url":"https://api.github.com/users/valentinpalkovic/following{/other_user}","gists_url":"https://api.github.com/users/valentinpalkovic/gists{/gist_id}","starred_url":"https://api.github.com/users/valentinpalkovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valentinpalkovic/subscriptions","organizations_url":"https://api.github.com/users/valentinpalkovic/orgs","repos_url":"https://api.github.com/users/valentinpalkovic/repos","events_url":"https://api.github.com/users/valentinpalkovic/events{/privacy}","received_events_url":"https://api.github.com/users/valentinpalkovic/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-11-18T12:31:39Z","label":{"name":"nextjs","color":"09b1ba"},"performed_via_github_app":null},{"id":15333693208,"node_id":"UNLE_lADOAzqfmc6enHoXzwAAAAOR9ZcY","url":"https://api.github.com/repos/storybookjs/storybook/issues/events/15333693208","actor":{"login":"valentinpalkovic","id":5889929,"node_id":"MDQ6VXNlcjU4ODk5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5889929?v=4","gravatar_id":"","url":"https://api.github.com/users/valentinpalkovic","html_url":"https://github.com/valentinpalkovic","followers_url":"https://api.github.com/users/valentinpalkovic/followers","following_url":"https://api.github.com/users/valentinpalkovic/following{/other_user}","gists_url":"https://api.github.com/users/valentinpalkovic/gists{/gist_id}","starred_url":"https://api.github.com/users/valentinpalkovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valentinpalkovic/subscriptions","organizations_url":"https://api.github.com/users/valentinpalkovic/orgs","repos_url":"https://api.github.com/users/valentinpalkovic/repos","events_url":"https://api.github.com/users/valentinpalkovic/events{/privacy}","received_events_url":"https://api.github.com/users/valentinpalkovic/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-11-18T12:31:41Z","label":{"name":"needs triage","color":"D4C5F9"},"performed_via_github_app":null},{"id":15344702592,"node_id":"REFE_lADOAzqfmc6enHoXzwAAAAOSnZSA","url":"https://api.github.com/repos/storybookjs/storybook/issues/events/15344702592","actor":{"login":"sentience","id":89772,"node_id":"MDQ6VXNlcjg5Nzcy","avatar_url":"https://avatars.githubusercontent.com/u/89772?v=4","gravatar_id":"","url":"https://api.github.com/users/sentience","html_url":"https://github.com/sentience","followers_url":"https://api.github.com/users/sentience/followers","following_url":"https://api.github.com/users/sentience/following{/other_user}","gists_url":"https://api.github.com/users/sentience/gists{/gist_id}","starred_url":"https://api.github.com/users/sentience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sentience/subscriptions","organizations_url":"https://api.github.com/users/sentience/orgs","repos_url":"https://api.github.com/users/sentience/repos","events_url":"https://api.github.com/users/sentience/events{/privacy}","received_events_url":"https://api.github.com/users/sentience/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2a02e134805f9659481f90237478a39516322c44","commit_url":"https://api.github.com/repos/sentience/storybook/commits/2a02e134805f9659481f90237478a39516322c44","created_at":"2024-11-19T07:14:59Z","performed_via_github_app":null},{"actor":{"login":"sentience","id":89772,"node_id":"MDQ6VXNlcjg5Nzcy","avatar_url":"https://avatars.githubusercontent.com/u/89772?v=4","gravatar_id":"","url":"https://api.github.com/users/sentience","html_url":"https://github.com/sentience","followers_url":"https://api.github.com/users/sentience/followers","following_url":"https://api.github.com/users/sentience/following{/other_user}","gists_url":"https://api.github.com/users/sentience/gists{/gist_id}","starred_url":"https://api.github.com/users/sentience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sentience/subscriptions","organizations_url":"https://api.github.com/users/sentience/orgs","repos_url":"https://api.github.com/users/sentience/repos","events_url":"https://api.github.com/users/sentience/events{/privacy}","received_events_url":"https://api.github.com/users/sentience/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-19T07:19:38Z","updated_at":"2024-11-19T07:19:38Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/storybookjs/storybook/issues/29654","repository_url":"https://api.github.com/repos/storybookjs/storybook","labels_url":"https://api.github.com/repos/storybookjs/storybook/issues/29654/labels{/name}","comments_url":"https://api.github.com/repos/storybookjs/storybook/issues/29654/comments","events_url":"https://api.github.com/repos/storybookjs/storybook/issues/29654/events","html_url":"https://github.com/storybookjs/storybook/pull/29654","id":2671051892,"node_id":"PR_kwDOAzqfmc6CWEcV","number":29654,"title":"Next.js: Fix webpack fsCache not working","user":{"login":"sentience","id":89772,"node_id":"MDQ6VXNlcjg5Nzcy","avatar_url":"https://avatars.githubusercontent.com/u/89772?v=4","gravatar_id":"","url":"https://api.github.com/users/sentience","html_url":"https://github.com/sentience","followers_url":"https://api.github.com/users/sentience/followers","following_url":"https://api.github.com/users/sentience/following{/other_user}","gists_url":"https://api.github.com/users/sentience/gists{/gist_id}","starred_url":"https://api.github.com/users/sentience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sentience/subscriptions","organizations_url":"https://api.github.com/users/sentience/orgs","repos_url":"https://api.github.com/users/sentience/repos","events_url":"https://api.github.com/users/sentience/events{/privacy}","received_events_url":"https://api.github.com/users/sentience/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343576454,"node_id":"MDU6TGFiZWwzNDM1NzY0NTQ=","url":"https://api.github.com/repos/storybookjs/storybook/labels/bug","name":"bug","color":"EB484F","default":true,"description":null},{"id":2272354128,"node_id":"MDU6TGFiZWwyMjcyMzU0MTI4","url":"https://api.github.com/repos/storybookjs/storybook/labels/nextjs","name":"nextjs","color":"09b1ba","default":false,"description":""},{"id":4772297351,"node_id":"LA_kwDOAzqfmc8AAAABHHN6hw","url":"https://api.github.com/repos/storybookjs/storybook/labels/ci:merged","name":"ci:merged","color":"17899A","default":false,"description":"Run the CI jobs that normally run when merged."}],"state":"closed","locked":false,"assignee":{"login":"valentinpalkovic","id":5889929,"node_id":"MDQ6VXNlcjU4ODk5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5889929?v=4","gravatar_id":"","url":"https://api.github.com/users/valentinpalkovic","html_url":"https://github.com/valentinpalkovic","followers_url":"https://api.github.com/users/valentinpalkovic/followers","following_url":"https://api.github.com/users/valentinpalkovic/following{/other_user}","gists_url":"https://api.github.com/users/valentinpalkovic/gists{/gist_id}","starred_url":"https://api.github.com/users/valentinpalkovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valentinpalkovic/subscriptions","organizations_url":"https://api.github.com/users/valentinpalkovic/orgs","repos_url":"https://api.github.com/users/valentinpalkovic/repos","events_url":"https://api.github.com/users/valentinpalkovic/events{/privacy}","received_events_url":"https://api.github.com/users/valentinpalkovic/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"valentinpalkovic","id":5889929,"node_id":"MDQ6VXNlcjU4ODk5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5889929?v=4","gravatar_id":"","url":"https://api.github.com/users/valentinpalkovic","html_url":"https://github.com/valentinpalkovic","followers_url":"https://api.github.com/users/valentinpalkovic/followers","following_url":"https://api.github.com/users/valentinpalkovic/following{/other_user}","gists_url":"https://api.github.com/users/valentinpalkovic/gists{/gist_id}","starred_url":"https://api.github.com/users/valentinpalkovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valentinpalkovic/subscriptions","organizations_url":"https://api.github.com/users/valentinpalkovic/orgs","repos_url":"https://api.github.com/users/valentinpalkovic/repos","events_url":"https://api.github.com/users/valentinpalkovic/events{/privacy}","received_events_url":"https://api.github.com/users/valentinpalkovic/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":10,"created_at":"2024-11-19T07:19:37Z","updated_at":"2024-12-13T12:36:12Z","closed_at":"2024-12-13T12:36:11Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":54173593,"node_id":"MDEwOlJlcG9zaXRvcnk1NDE3MzU5Mw==","name":"storybook","full_name":"storybookjs/storybook","private":false,"owner":{"login":"storybookjs","id":22632046,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIyNjMyMDQ2","avatar_url":"https://avatars.githubusercontent.com/u/22632046?v=4","gravatar_id":"","url":"https://api.github.com/users/storybookjs","html_url":"https://github.com/storybookjs","followers_url":"https://api.github.com/users/storybookjs/followers","following_url":"https://api.github.com/users/storybookjs/following{/other_user}","gists_url":"https://api.github.com/users/storybookjs/gists{/gist_id}","starred_url":"https://api.github.com/users/storybookjs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/storybookjs/subscriptions","organizations_url":"https://api.github.com/users/storybookjs/orgs","repos_url":"https://api.github.com/users/storybookjs/repos","events_url":"https://api.github.com/users/storybookjs/events{/privacy}","received_events_url":"https://api.github.com/users/storybookjs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/storybookjs/storybook","description":"Storybook is the industry standard workshop for building, documenting, and testing UI components in isolation","fork":false,"url":"https://api.github.com/repos/storybookjs/storybook","forks_url":"https://api.github.com/repos/storybookjs/storybook/forks","keys_url":"https://api.github.com/repos/storybookjs/storybook/keys{/key_id}","collaborators_url":"https://api.github.com/repos/storybookjs/storybook/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/storybookjs/storybook/teams","hooks_url":"https://api.github.com/repos/storybookjs/storybook/hooks","issue_events_url":"https://api.github.com/repos/storybookjs/storybook/issues/events{/number}","events_url":"https://api.github.com/repos/storybookjs/storybook/events","assignees_url":"https://api.github.com/repos/storybookjs/storybook/assignees{/user}","branches_url":"https://api.github.com/repos/storybookjs/storybook/branches{/branch}","tags_url":"https://api.github.com/repos/storybookjs/storybook/tags","blobs_url":"https://api.github.com/repos/storybookjs/storybook/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/storybookjs/storybook/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/storybookjs/storybook/git/refs{/sha}","trees_url":"https://api.github.com/repos/storybookjs/storybook/git/trees{/sha}","statuses_url":"https://api.github.com/repos/storybookjs/storybook/statuses/{sha}","languages_url":"https://api.github.com/repos/storybookjs/storybook/languages","stargazers_url":"https://api.github.com/repos/storybookjs/storybook/stargazers","contributors_url":"https://api.github.com/repos/storybookjs/storybook/contributors","subscribers_url":"https://api.github.com/repos/storybookjs/storybook/subscribers","subscription_url":"https://api.github.com/repos/storybookjs/storybook/subscription","commits_url":"https://api.github.com/repos/storybookjs/storybook/commits{/sha}","git_commits_url":"https://api.github.com/repos/storybookjs/storybook/git/commits{/sha}","comments_url":"https://api.github.com/repos/storybookjs/storybook/comments{/number}","issue_comment_url":"https://api.github.com/repos/storybookjs/storybook/issues/comments{/number}","contents_url":"https://api.github.com/repos/storybookjs/storybook/contents/{+path}","compare_url":"https://api.github.com/repos/storybookjs/storybook/compare/{base}...{head}","merges_url":"https://api.github.com/repos/storybookjs/storybook/merges","archive_url":"https://api.github.com/repos/storybookjs/storybook/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/storybookjs/storybook/downloads","issues_url":"https://api.github.com/repos/storybookjs/storybook/issues{/number}","pulls_url":"https://api.github.com/repos/storybookjs/storybook/pulls{/number}","milestones_url":"https://api.github.com/repos/storybookjs/storybook/milestones{/number}","notifications_url":"https://api.github.com/repos/storybookjs/storybook/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/storybookjs/storybook/labels{/name}","releases_url":"https://api.github.com/repos/storybookjs/storybook/releases{/id}","deployments_url":"https://api.github.com/repos/storybookjs/storybook/deployments","created_at":"2016-03-18T04:23:44Z","updated_at":"2025-11-09T19:05:22Z","pushed_at":"2025-11-09T13:10:47Z","git_url":"git://github.com/storybookjs/storybook.git","ssh_url":"git@github.com:storybookjs/storybook.git","clone_url":"https://github.com/storybookjs/storybook.git","svn_url":"https://github.com/storybookjs/storybook","homepage":"https://storybook.js.org","size":1063804,"stargazers_count":88616,"watchers_count":88616,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":9775,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2245,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["angular","components","design-systems","documentation","html","javascript","react","react-native","stories","storybook","styleguide","svelte","testing","typescript","ui","vite","vue","web-components","webpack","workshop"],"visibility":"public","forks":9775,"open_issues":2245,"watchers":88616,"default_branch":"next","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/storybookjs/storybook/pulls/29654","html_url":"https://github.com/storybookjs/storybook/pull/29654","diff_url":"https://github.com/storybookjs/storybook/pull/29654.diff","patch_url":"https://github.com/storybookjs/storybook/pull/29654.patch","merged_at":"2024-12-13T12:36:11Z"},"body":"Closes #29621\r\n\r\n## What I did\r\n\r\nNext.js overrides certain internal webpack packages (particularly `webpack-sources`), which are involved with filesystem caching, with its own versions from next/dist/compiled.\r\n\r\nFor filesystem caching to work, Next.js must be allowed to perform these overrides before webpack is first initialized by @storybook/builder-webpack5. If it is not, the objects to be serialized to disk in the caching process will be instantiated using the original (non-Next.js) modules, but the cache serializers will be created using the Next.js modules. This mismatch between the objects to be cached and the serializers that write the filesystem cache prevents the cache from being written; instead, webpack outputs a warning message to the console for every object that it tries and fails to find a matching serializer for.\r\n\r\nThis fix works by invoking Next.js to configure webpack in the `core` hook of @storybook/nextjs/preset, immediately before loading @storybook/builder-webpack5. We don't actually use this configuration that Next.js creates; the actual configuration that will be used in the build is still generated in `webpackFinal` as before.\r\n\r\n`fsCache` ([docs](https://storybook.js.org/docs/builders/webpack#configure)) has a large impact on Storybook build performance. Even in a minimal project with a single story, enabling it reduces hot-cache build time by 66%! This is therefore a very valuable option to be able to enable.\r\n\r\n## Checklist for Contributors\r\n\r\n### Testing\r\n\r\n@storybook/nextjs does not appear to have a test suite, so I don't see an easy way to test this feature. I've verified that it resolves the issue in my repro project for #29621.\r\n\r\n#### The changes in this PR are covered in the following automated tests:\r\n\r\n- [ ] stories\r\n- [ ] unit tests\r\n- [ ] integration tests\r\n- [ ] end-to-end tests\r\n\r\n#### Manual testing\r\n\r\n1. Clone https://github.com/sentience/storybook-nextjs-webpack-cache-issue-demo\r\n2. Run Storybook (`pnpm i`, `pnpm storybook build`) and note the console warnings at the end of the build that indicate the filesystem cache is not working.\r\n3. Upgrade @storybook/nextjs to a canary release with this change.\r\n4. Run Storybook again and note the console warnings are gone, and the build runs in 33% of the time!\r\n\r\n### Documentation\r\n\r\n<!-- Please check (put an \"x\" inside the \"[ ]\") the applicable items below to indicate which documentation has been updated. -->\r\n\r\n- [ ] ~Add or update documentation reflecting your changes~\r\n- [ ] ~If you are deprecating/removing a feature, make sure to update\r\n      [MIGRATION.MD](https://github.com/storybookjs/storybook/blob/next/MIGRATION.md)~\r\n\r\n## Checklist for Maintainers\r\n\r\n- [ ] When this PR is ready for testing, make sure to add `ci:normal`, `ci:merged` or `ci:daily` GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in `code/lib/cli-storybook/src/sandbox-templates.ts`\r\n- [x] Make sure this PR contains **one** of the labels below:\r\n   <details>\r\n     <summary>Available labels</summary>\r\n\r\n  - `bug`: Internal changes that fixes incorrect behavior.\r\n  - `maintenance`: User-facing maintenance tasks.\r\n  - `dependencies`: Upgrading (sometimes downgrading) dependencies.\r\n  - `build`: Internal-facing build tooling & test updates. Will not show up in release changelog.\r\n  - `cleanup`: Minor cleanup style change. Will not show up in release changelog.\r\n  - `documentation`: Documentation **only** changes. Will not show up in release changelog.\r\n  - `feature request`: Introducing a new feature.\r\n  - `BREAKING CHANGE`: Changes that break compatibility in some way with current major version.\r\n  - `other`: Changes that don't fit in the above categories.\r\n\r\n   </details>\r\n\r\n### ðŸ¦‹ Canary release\r\n\r\n<!-- CANARY_RELEASE_SECTION -->\nThis pull request has been released as version `0.0.0-pr-29654-sha-83a1f24f`. Try it out in a new sandbox by running `npx storybook@0.0.0-pr-29654-sha-83a1f24f sandbox` or in an existing project with `npx storybook@0.0.0-pr-29654-sha-83a1f24f upgrade`.\n<details>\n<summary>More information</summary>\n\n| | |\n| --- | --- |\n| **Published version** | [`0.0.0-pr-29654-sha-83a1f24f`](https://npmjs.com/package/storybook/v/0.0.0-pr-29654-sha-83a1f24f) |\n| **Triggered by** | @valentinpalkovic |\n| **Repository** | [sentience/storybook](https://github.com/sentience/storybook) |\n| **Branch** | [`fix-nextjs-webpack-fscache`](https://github.com/sentience/storybook/tree/fix-nextjs-webpack-fscache) |\n| **Commit** | [`83a1f24f`](https://github.com/sentience/storybook/commit/83a1f24f02c50a0b5ed4a03c6b248100183a3b01) |\n| **Datetime** | Tue Dec  3 06:19:41 UTC 2024 (`1733206781`) |\n| **Workflow run** | [12134081252](https://github.com/storybookjs/storybook/actions/runs/12134081252) |\n\nTo request a new release of this pull request, mention the `@storybookjs/core` team.\n\n_core team members can create a new canary release [here](https://github.com/storybookjs/storybook/actions/workflows/canary-release-pr.yml) or locally with `gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=29654`_\n</details>\n<!-- CANARY_RELEASE_SECTION -->\r\n\r\n<!-- BENCHMARK_SECTION -->\n\n| name | before | after | diff | z | % |\n| ---- | ------ | ----- | ---- | - | - |\n| createSize |  0 B | 0 B | 0 B | - | - |\n| generateSize |  77.7 MB | 77.7 MB | 0 B | 0.65 | 0% |\n| initSize |  133 MB | 133 MB | -625 B | 0.66 | 0% |\n| diffSize |  55.3 MB | 55.3 MB | -625 B | 0.66 | 0% |\n| buildSize |  6.87 MB | 6.87 MB | 41 B | -0.03 | 0% |\n| buildSbAddonsSize |  1.51 MB | 1.51 MB | 0 B | -0.42 | 0% |\n| buildSbCommonSize |  195 kB | 195 kB | 0 B | - | 0% |\n| buildSbManagerSize |  1.86 MB | 1.86 MB | 0 B | **1.52** | 0% |\n| buildSbPreviewSize |  0 B | 0 B | 0 B | - | - |\n| buildStaticSize |  0 B | 0 B | 0 B | - | - |\n| buildPrebuildSize |  3.57 MB | 3.57 MB | 0 B | -0.05 | 0% |\n| buildPreviewSize |  3.3 MB | 3.3 MB | 41 B | 0.29 | 0% |\n| testBuildSize |  0 B | 0 B | 0 B | - | - |\n| testBuildSbAddonsSize |  0 B | 0 B | 0 B | - | - |\n| testBuildSbCommonSize |  0 B | 0 B | 0 B | - | - |\n| testBuildSbManagerSize |  0 B | 0 B | 0 B | - | - |\n| testBuildSbPreviewSize |  0 B | 0 B | 0 B | - | - |\n| testBuildStaticSize |  0 B | 0 B | 0 B | - | - |\n| testBuildPrebuildSize |  0 B | 0 B | 0 B | - | - |\n| testBuildPreviewSize |  0 B | 0 B | 0 B | - | - |\n\n\n\n| name | before | after | diff | z | % |\n| ---- | ------ | ----- | ---- | - | - |\n| createTime |  7.5s | 6.7s | -772ms | -0.95 | -11.5% |\n| generateTime |  20.3s | 18.2s | -2s -171ms | -0.86 | -11.9% |\n| initTime |  13.1s | 12s | -1s -126ms | -1.01 | -9.4% |\n| buildTime |  9.5s | 7.9s | -1s -596ms | **-1.69** | ðŸ”°-20.1% |\n| testBuildTime |  0ms | 0ms | 0ms | - | - |\n| devPreviewResponsive |  5s | 4.6s | -312ms | -0.73 | -6.7% |\n| devManagerResponsive |  3.7s | 3.5s | -222ms | -0.69 | -6.3% |\n| devManagerHeaderVisible |  549ms | 539ms | -10ms | -0.5 | -1.9% |\n| devManagerIndexVisible |  626ms | 570ms | -56ms | -0.89 | -9.8% |\n| devStoryVisibleUncached |  1.8s | 1.7s | -112ms | -0.46 | -6.5% |\n| devStoryVisible |  624ms | 625ms | 1ms | -0.21 | 0.2% |\n| devAutodocsVisible |  507ms | 499ms | -8ms | -0.16 | -1.6% |\n| devMDXVisible |  483ms | 465ms | -18ms | -0.61 | -3.9% |\n| buildManagerHeaderVisible |  585ms | 515ms | -70ms | -0.74 | -13.6% |\n| buildManagerIndexVisible |  692ms | 612ms | -80ms | -0.7 | -13.1% |\n| buildStoryVisible |  534ms | 478ms | -56ms | -0.65 | -11.7% |\n| buildAutodocsVisible |  410ms | 415ms | 5ms | -0.5 | 1.2% |\n| buildMDXVisible |  415ms | 423ms | 8ms | -0.37 | 1.9% |\n\n<!-- BENCHMARK_SECTION -->\r\n\r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nThis PR fixes webpack's filesystem caching in @storybook/nextjs by ensuring Next.js can properly override webpack internals before Storybook's webpack builder initialization, significantly improving build performance.\r\n\r\n- Modified `code/frameworks/nextjs/src/preset.ts` to load Next.js configuration in the `core` hook before webpack initialization\r\n- Added early webpack configuration setup to allow Next.js to override internal packages like `webpack-sources`\r\n- Enables proper filesystem caching functionality, reducing build times by up to 66%\r\n- Maintains existing webpack configuration generation in `webpackFinal` hook for actual builds\r\n\r\n<!-- /greptile_comment -->","reactions":{"url":"https://api.github.com/repos/storybookjs/storybook/issues/29654/reactions","total_count":3,"+1":1,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/storybookjs/storybook/issues/29654/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":15648276317,"node_id":"CE_lADOAzqfmc6enHoXzwAAAAOktb9d","url":"https://api.github.com/repos/storybookjs/storybook/issues/events/15648276317","actor":{"login":"valentinpalkovic","id":5889929,"node_id":"MDQ6VXNlcjU4ODk5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5889929?v=4","gravatar_id":"","url":"https://api.github.com/users/valentinpalkovic","html_url":"https://github.com/valentinpalkovic","followers_url":"https://api.github.com/users/valentinpalkovic/followers","following_url":"https://api.github.com/users/valentinpalkovic/following{/other_user}","gists_url":"https://api.github.com/users/valentinpalkovic/gists{/gist_id}","starred_url":"https://api.github.com/users/valentinpalkovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valentinpalkovic/subscriptions","organizations_url":"https://api.github.com/users/valentinpalkovic/orgs","repos_url":"https://api.github.com/users/valentinpalkovic/repos","events_url":"https://api.github.com/users/valentinpalkovic/events{/privacy}","received_events_url":"https://api.github.com/users/valentinpalkovic/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-12-13T12:36:13Z","state_reason":null,"performed_via_github_app":null},{"id":15648276383,"node_id":"CE_lADOAzqfmc6enHoXzwAAAAOktb-f","url":"https://api.github.com/repos/storybookjs/storybook/issues/events/15648276383","actor":{"login":"valentinpalkovic","id":5889929,"node_id":"MDQ6VXNlcjU4ODk5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5889929?v=4","gravatar_id":"","url":"https://api.github.com/users/valentinpalkovic","html_url":"https://github.com/valentinpalkovic","followers_url":"https://api.github.com/users/valentinpalkovic/followers","following_url":"https://api.github.com/users/valentinpalkovic/following{/other_user}","gists_url":"https://api.github.com/users/valentinpalkovic/gists{/gist_id}","starred_url":"https://api.github.com/users/valentinpalkovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valentinpalkovic/subscriptions","organizations_url":"https://api.github.com/users/valentinpalkovic/orgs","repos_url":"https://api.github.com/users/valentinpalkovic/repos","events_url":"https://api.github.com/users/valentinpalkovic/events{/privacy}","received_events_url":"https://api.github.com/users/valentinpalkovic/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"2a02e134805f9659481f90237478a39516322c44","commit_url":"https://api.github.com/repos/storybookjs/storybook/commits/2a02e134805f9659481f90237478a39516322c44","created_at":"2024-12-13T12:36:13Z","state_reason":null,"performed_via_github_app":null}]