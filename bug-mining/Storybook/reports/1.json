{"url":"https://api.github.com/repos/storybookjs/storybook/issues/20478","repository_url":"https://api.github.com/repos/storybookjs/storybook","labels_url":"https://api.github.com/repos/storybookjs/storybook/issues/20478/labels{/name}","comments_url":"https://api.github.com/repos/storybookjs/storybook/issues/20478/comments","events_url":"https://api.github.com/repos/storybookjs/storybook/issues/20478/events","html_url":"https://github.com/storybookjs/storybook/issues/20478","id":1517235348,"node_id":"I_kwDOAzqfmc5abyyU","number":20478,"title":"[Bug]: [7.0.0-beta.20]: Unable to change story loading globing parttern for something else than `stories`","user":{"login":"JUNNNI","id":8655890,"node_id":"MDQ6VXNlcjg2NTU4OTA=","avatar_url":"https://avatars.githubusercontent.com/u/8655890?v=4","gravatar_id":"","url":"https://api.github.com/users/JUNNNI","html_url":"https://github.com/JUNNNI","followers_url":"https://api.github.com/users/JUNNNI/followers","following_url":"https://api.github.com/users/JUNNNI/following{/other_user}","gists_url":"https://api.github.com/users/JUNNNI/gists{/gist_id}","starred_url":"https://api.github.com/users/JUNNNI/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JUNNNI/subscriptions","organizations_url":"https://api.github.com/users/JUNNNI/orgs","repos_url":"https://api.github.com/users/JUNNNI/repos","events_url":"https://api.github.com/users/JUNNNI/events{/privacy}","received_events_url":"https://api.github.com/users/JUNNNI/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343576459,"node_id":"MDU6TGFiZWwzNDM1NzY0NTk=","url":"https://api.github.com/repos/storybookjs/storybook/labels/question%20/%20support","name":"question / support","color":"cc317c","default":false,"description":null},{"id":603498044,"node_id":"MDU6TGFiZWw2MDM0OTgwNDQ=","url":"https://api.github.com/repos/storybookjs/storybook/labels/documentation","name":"documentation","color":"fbca04","default":true,"description":null},{"id":820606800,"node_id":"MDU6TGFiZWw4MjA2MDY4MDA=","url":"https://api.github.com/repos/storybookjs/storybook/labels/core","name":"core","color":"f9d0c4","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"sheriffMoose","id":1110191,"node_id":"MDQ6VXNlcjExMTAxOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1110191?v=4","gravatar_id":"","url":"https://api.github.com/users/sheriffMoose","html_url":"https://github.com/sheriffMoose","followers_url":"https://api.github.com/users/sheriffMoose/followers","following_url":"https://api.github.com/users/sheriffMoose/following{/other_user}","gists_url":"https://api.github.com/users/sheriffMoose/gists{/gist_id}","starred_url":"https://api.github.com/users/sheriffMoose/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sheriffMoose/subscriptions","organizations_url":"https://api.github.com/users/sheriffMoose/orgs","repos_url":"https://api.github.com/users/sheriffMoose/repos","events_url":"https://api.github.com/users/sheriffMoose/events{/privacy}","received_events_url":"https://api.github.com/users/sheriffMoose/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sheriffMoose","id":1110191,"node_id":"MDQ6VXNlcjExMTAxOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1110191?v=4","gravatar_id":"","url":"https://api.github.com/users/sheriffMoose","html_url":"https://github.com/sheriffMoose","followers_url":"https://api.github.com/users/sheriffMoose/followers","following_url":"https://api.github.com/users/sheriffMoose/following{/other_user}","gists_url":"https://api.github.com/users/sheriffMoose/gists{/gist_id}","starred_url":"https://api.github.com/users/sheriffMoose/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sheriffMoose/subscriptions","organizations_url":"https://api.github.com/users/sheriffMoose/orgs","repos_url":"https://api.github.com/users/sheriffMoose/repos","events_url":"https://api.github.com/users/sheriffMoose/events{/privacy}","received_events_url":"https://api.github.com/users/sheriffMoose/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":4,"created_at":"2023-01-03T11:04:06Z","updated_at":"2023-01-20T03:31:08Z","closed_at":"2023-01-20T03:31:08Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nTrying to update the story loading configuration with a globing pattern that doesn't contain the keyword `stories`. \r\nAfter updating that configuration, Storybook won't start and results into the following error:\r\n```\r\nError: No matching story indexer found for `src/components/storybook-example/ExampleButton.[customName].tsx`\r\n```\r\n\r\n### To Reproduce\r\n\r\nBased on the following configuration that is working :\r\n\r\n\r\n```shell\r\n├── .storybook\r\n│   └── main.ts\r\n├── src\r\n├── └── storybook-example\r\n└─────── └── ExampleButton.stories.tsx\r\n```\r\n\r\n```tsx\r\n// .storybook/main.ts\r\n\r\nimport { ConfigEnv, mergeConfig } from 'vite';\r\nimport svgr from 'vite-plugin-svgr';\r\nimport { aliases } from '../src/aliases';\r\n\r\nexport default {\r\n    stories: ['../src/**/*.mdx', '../src/**/*.stories.@(jsx|tsx)'],\r\n    addons: ['@storybook/addon-links', '@storybook/addon-essentials', '@storybook/addon-interactions'],\r\n    framework: {\r\n        name: '@storybook/react-vite',\r\n        options: {},\r\n    },\r\n    docs: {\r\n        autodocs: 'tag',\r\n    },\r\n    async viteFinal(config: ConfigEnv) {\r\n        return mergeConfig(config, {\r\n            plugins: [svgr()],\r\n        });\r\n    },\r\n};\r\n```\r\n\r\n1) Update the `stories` entry for something different, like follow:\r\n\r\n```ts\r\nstories: ['../src/**/*.mdx', '../src/**/*.storiestest.@(jsx|tsx)'],\r\n```\r\n\r\n2) Rename `ExampleButton.stories.tsx` to `ExampleButton.storiestest.tsx`\r\n\r\n\r\n3) Restart Storybook and the following error will appear:\r\n\r\n```\r\nError: No matching story indexer found for /Users/xxx/Documents/myproject/apps/client/src/components/storybook-example/ExampleButton.storiestest.tsx\r\n    at StoryIndexGenerator.extractStories (/Users/xxx/Documents/myproject/node_modules/.pnpm/@storybook+core-server@7.0.0-beta.20/node_modules/@storybook/core-server/dist/index.js:10:10111)\r\n```\r\n\r\n\r\n### System\r\n\r\n```shell\r\nMacOS Monterey 12.5.1\r\npnpm version 7.17.1\r\n```\r\n\r\n\r\n### Additional context\r\n\r\n- The project is a monorepo using `pnpm` and its workspaces features.\r\n- Tried to clear the `node_modules/.cache` folder after updating the configuration.","closed_by":{"login":"sheriffMoose","id":1110191,"node_id":"MDQ6VXNlcjExMTAxOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1110191?v=4","gravatar_id":"","url":"https://api.github.com/users/sheriffMoose","html_url":"https://github.com/sheriffMoose","followers_url":"https://api.github.com/users/sheriffMoose/followers","following_url":"https://api.github.com/users/sheriffMoose/following{/other_user}","gists_url":"https://api.github.com/users/sheriffMoose/gists{/gist_id}","starred_url":"https://api.github.com/users/sheriffMoose/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sheriffMoose/subscriptions","organizations_url":"https://api.github.com/users/sheriffMoose/orgs","repos_url":"https://api.github.com/users/sheriffMoose/repos","events_url":"https://api.github.com/users/sheriffMoose/events{/privacy}","received_events_url":"https://api.github.com/users/sheriffMoose/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/storybookjs/storybook/issues/20478/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/storybookjs/storybook/issues/20478/timeline","performed_via_github_app":null,"state_reason":"completed"}