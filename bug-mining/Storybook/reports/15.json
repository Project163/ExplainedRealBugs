{"url":"https://api.github.com/repos/storybookjs/storybook/issues/29308","repository_url":"https://api.github.com/repos/storybookjs/storybook","labels_url":"https://api.github.com/repos/storybookjs/storybook/issues/29308/labels{/name}","comments_url":"https://api.github.com/repos/storybookjs/storybook/issues/29308/comments","events_url":"https://api.github.com/repos/storybookjs/storybook/issues/29308/events","html_url":"https://github.com/storybookjs/storybook/issues/29308","id":2575753834,"node_id":"I_kwDOAzqfmc6ZhuJq","number":29308,"title":"[Bug]: type error while importing `svelte 5` component due to recent change in `svelte-check`","user":{"login":"bhvngt","id":79074469,"node_id":"MDQ6VXNlcjc5MDc0NDY5","avatar_url":"https://avatars.githubusercontent.com/u/79074469?v=4","gravatar_id":"","url":"https://api.github.com/users/bhvngt","html_url":"https://github.com/bhvngt","followers_url":"https://api.github.com/users/bhvngt/followers","following_url":"https://api.github.com/users/bhvngt/following{/other_user}","gists_url":"https://api.github.com/users/bhvngt/gists{/gist_id}","starred_url":"https://api.github.com/users/bhvngt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhvngt/subscriptions","organizations_url":"https://api.github.com/users/bhvngt/orgs","repos_url":"https://api.github.com/users/bhvngt/repos","events_url":"https://api.github.com/users/bhvngt/events{/privacy}","received_events_url":"https://api.github.com/users/bhvngt/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343576454,"node_id":"MDU6TGFiZWwzNDM1NzY0NTQ=","url":"https://api.github.com/repos/storybookjs/storybook/labels/bug","name":"bug","color":"EB484F","default":true,"description":null},{"id":571226465,"node_id":"MDU6TGFiZWw1NzEyMjY0NjU=","url":"https://api.github.com/repos/storybookjs/storybook/labels/help%20wanted","name":"help wanted","color":"0E8A16","default":true,"description":""},{"id":885024119,"node_id":"MDU6TGFiZWw4ODUwMjQxMTk=","url":"https://api.github.com/repos/storybookjs/storybook/labels/typescript","name":"typescript","color":"42e58b","default":false,"description":""},{"id":1019218919,"node_id":"MDU6TGFiZWwxMDE5MjE4OTE5","url":"https://api.github.com/repos/storybookjs/storybook/labels/svelte","name":"svelte","color":"f9d0c4","default":false,"description":""},{"id":5426231884,"node_id":"LA_kwDOAzqfmc8AAAABQ226TA","url":"https://api.github.com/repos/storybookjs/storybook/labels/sev:S3","name":"sev:S3","color":"5319E7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2024-10-09T12:13:25Z","updated_at":"2025-04-06T18:30:09Z","closed_at":"2025-03-18T14:03:58Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nDue to recent [change](https://github.com/sveltejs/language-tools/pull/2517) in `svelte-check` v4.0.3, following type error occurs while importing Svelte 5 component in svelte storybook file. This also ends up causing multiple type errors in the story args definition.\n\n```typescript\nError: Type 'Component<Props, {}, \"\">' is not assignable to type 'ComponentType<Component<Props, {}, \"\">, any>'.\n  Type 'Component<Props, {}, \"\">' provides no match for the signature 'new (options: ComponentConstructorOptions<Component<Props, {}, \"\">>): { [x: string]: any; $destroy: () => void; $on: <K extends string>(type: K, callback: (e: any) => void) => () => void; $set: (props: Partial<...>) => void; }'. \n```\n\nAs per [PR](https://github.com/sveltejs/language-tools/pull/2517), In svelte 5, components are functions. Hence with this PR only function type is exported in runes mode.\n\nI tried to supply svelte 5 component to `Meta` as `Meta<ReturnType<typeof Button>>`. However, it throws following error after that change.\n\n```typescript\nError: Type '{ $on?(type: string, callback: (e: any) => void): () => void; $set?(props: Partial<Props>): void; }' is not assignable to type 'ComponentType<{ $on?(type: string, callback: (e: any) => void): () => void; $set?(props: Partial<Props>): void; }, any>'.\n  Type '{ $on?(type: string, callback: (e: any) => void): () => void; $set?(props: Partial<Props>): void; }' provides no match for the signature 'new (options: ComponentConstructorOptions<{ $on?(type: string, callback: (e: any) => void): () => void; $set?(props: Partial<Props>): void; }>): { ...; }'. \n  title: \"Example/Button\",\n  component: Button as ReturnType<typeof Button>,\n  tags: [\"autodocs\"],\n```\n\n\n### Reproduction link\n\nhttps://codesandbox.io/p/devbox/8p9rrz\n\n### Reproduction steps\n\n1. Run pnpm install\n2. Run pnpm check\n3. Type error will be thrown\n4. If `svelte-check` is reverted to `4.0.2`, svelte-check passes with no errors.\n\n### System\n\n```\n  System:\n    OS: Linux 6.1 Debian GNU/Linux 12 (bookworm) 12 (bookworm)\n    CPU: (2) x64 AMD EPYC\n    Shell: Unknown\n  Binaries:\n    Node: 20.9.0 - /usr/local/bin/node\n    Yarn: 1.22.19 - /usr/local/bin/yarn <----- active\n    npm: 9.8.1 - /usr/local/bin/npm\n    pnpm: 8.10.2 - /usr/local/share/npm-global/bin/pnpm\n  npmPackages:\n    @storybook/addon-essentials: ^8.3.5 => 8.3.5 \n    @storybook/addon-interactions: ^8.3.5 => 8.3.5 \n    @storybook/addon-links: ^8.3.5 => 8.3.5 \n    @storybook/addon-svelte-csf: ^4.1.7 => 4.1.7 \n    @storybook/blocks: ^8.3.5 => 8.3.5 \n    @storybook/svelte: ^8.3.5 => 8.3.5 \n    @storybook/sveltekit: ^8.3.5 => 8.3.5 \n    @storybook/test: ^8.3.5 => 8.3.5 \n    storybook: ^8.3.5 => 8.3.5 \n```\n### Additional context\n\n_No response_","closed_by":{"login":"kasperpeulen","id":1035299,"node_id":"MDQ6VXNlcjEwMzUyOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1035299?v=4","gravatar_id":"","url":"https://api.github.com/users/kasperpeulen","html_url":"https://github.com/kasperpeulen","followers_url":"https://api.github.com/users/kasperpeulen/followers","following_url":"https://api.github.com/users/kasperpeulen/following{/other_user}","gists_url":"https://api.github.com/users/kasperpeulen/gists{/gist_id}","starred_url":"https://api.github.com/users/kasperpeulen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kasperpeulen/subscriptions","organizations_url":"https://api.github.com/users/kasperpeulen/orgs","repos_url":"https://api.github.com/users/kasperpeulen/repos","events_url":"https://api.github.com/users/kasperpeulen/events{/privacy}","received_events_url":"https://api.github.com/users/kasperpeulen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/storybookjs/storybook/issues/29308/reactions","total_count":5,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":2},"timeline_url":"https://api.github.com/repos/storybookjs/storybook/issues/29308/timeline","performed_via_github_app":null,"state_reason":"completed"}