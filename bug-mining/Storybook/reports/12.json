{"url":"https://api.github.com/repos/storybookjs/storybook/issues/29122","repository_url":"https://api.github.com/repos/storybookjs/storybook","labels_url":"https://api.github.com/repos/storybookjs/storybook/issues/29122/labels{/name}","comments_url":"https://api.github.com/repos/storybookjs/storybook/issues/29122/comments","events_url":"https://api.github.com/repos/storybookjs/storybook/issues/29122/events","html_url":"https://github.com/storybookjs/storybook/issues/29122","id":2525062335,"node_id":"I_kwDOAzqfmc6WgWS_","number":29122,"title":"[Bug]: Brand image css class conflict causes image to resize on hot reloads","user":{"login":"stevensacks","id":162252,"node_id":"MDQ6VXNlcjE2MjI1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/162252?v=4","gravatar_id":"","url":"https://api.github.com/users/stevensacks","html_url":"https://github.com/stevensacks","followers_url":"https://api.github.com/users/stevensacks/followers","following_url":"https://api.github.com/users/stevensacks/following{/other_user}","gists_url":"https://api.github.com/users/stevensacks/gists{/gist_id}","starred_url":"https://api.github.com/users/stevensacks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevensacks/subscriptions","organizations_url":"https://api.github.com/users/stevensacks/orgs","repos_url":"https://api.github.com/users/stevensacks/repos","events_url":"https://api.github.com/users/stevensacks/events{/privacy}","received_events_url":"https://api.github.com/users/stevensacks/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343576454,"node_id":"MDU6TGFiZWwzNDM1NzY0NTQ=","url":"https://api.github.com/repos/storybookjs/storybook/labels/bug","name":"bug","color":"EB484F","default":true,"description":null},{"id":2901306776,"node_id":"MDU6TGFiZWwyOTAxMzA2Nzc2","url":"https://api.github.com/repos/storybookjs/storybook/labels/needs%20triage","name":"needs triage","color":"D4C5F9","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-09-13T15:04:40Z","updated_at":"2024-10-01T07:17:26Z","closed_at":"2024-10-01T07:17:26Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nThe brand image has two different classes acting upon it, and sometimes one class takes precedence, and sometimes the other one does.\r\n\r\nThis is the class directly on the `<img>` tag:\r\n```css\r\n.css-1rb1jn6 {\r\n    display: block;\r\n    max-width: 150px;\r\n    max-height: 100px;\r\n}\r\n```\r\n\r\nBut there's another class on the div that contains the brand image that is also targeting it:\r\n```css\r\n.css-1nwijr1>*>* {\r\n    max-width: 100%;\r\n}\r\n```\r\n\r\nOn first load, the first class with `max-width: 150px` has precedence. When Storybook hot reloads (from a theming addon, for example), the div class takes precedence and the brand image gets noticeably larger because it's no longer constrained by the `max-width: 150px`.\r\n\r\n`<img>` precedence\r\n![img precedence](https://github.com/user-attachments/assets/9b99ef59-fd73-4c00-9e57-f48692c16d51)\r\n\r\n`<div>` precedence\r\n![div precedence](https://github.com/user-attachments/assets/731091ff-750c-4b95-852e-69020b3312da)\r\n\r\nThis happens on my local machine and on Chromatic.\n\n### Reproduction link\n\nhttps://66e3cef65bf40b8afc34806f-jvdpuqyolz.chromatic.com/?path=/story/components-button--default\n\n### Reproduction steps\n\n1. In the top bar, click the \"sun\" icon to toggle dark and light mode.\r\n2. See the GAIA logo resize on each click\r\n3. Open the element inspector to select it and watch the css classes toggle precedence.\n\n### System\n\n```bash\nSystem:\r\n    OS: macOS 14.6.1\r\n    CPU: (12) arm64 Apple M2 Pro\r\n    Shell: 5.9 - /bin/zsh\r\n  Binaries:\r\n    Node: 20.17.0 - ~/.nvm/versions/node/v20.17.0/bin/node\r\n    npm: 10.8.3 - ~/.nvm/versions/node/v20.17.0/bin/npm <----- active\r\n    pnpm: 8.1.0 - ~/.nvm/versions/node/v20.17.0/bin/pnpm\r\n  Browsers:\r\n    Chrome: 128.0.6613.138\r\n    Safari: 17.6\r\n  npmPackages:\r\n    @storybook/addon-essentials: 8.3.0 => 8.3.0 \r\n    @storybook/addon-interactions: 8.3.0 => 8.3.0 \r\n    @storybook/addon-links: 8.3.0 => 8.3.0 \r\n    @storybook/blocks: 8.3.0 => 8.3.0 \r\n    @storybook/manager-api: 8.3.0 => 8.3.0 \r\n    @storybook/preview-api: 8.3.0 => 8.3.0 \r\n    @storybook/react: 8.3.0 => 8.3.0 \r\n    @storybook/react-vite: 8.3.0 => 8.3.0 \r\n    @storybook/test: 8.3.0 => 8.3.0 \r\n    @storybook/theming: 8.3.0 => 8.3.0 \r\n    @storybook/types: 8.3.0 => 8.3.0 \r\n    chromatic: 11.10.2 => 11.10.2 \r\n    eslint-plugin-storybook: 0.8.0 => 0.8.0 \r\n    storybook: 8.3.0 => 8.3.0 \r\n    storybook-dark-mode: 4.0.2 => 4.0.2 \r\n    storybook-react-i18next: 3.1.7 => 3.1.7\n```\n\n\n### Additional context\n\n_No response_","closed_by":{"login":"ndelangen","id":3070389,"node_id":"MDQ6VXNlcjMwNzAzODk=","avatar_url":"https://avatars.githubusercontent.com/u/3070389?v=4","gravatar_id":"","url":"https://api.github.com/users/ndelangen","html_url":"https://github.com/ndelangen","followers_url":"https://api.github.com/users/ndelangen/followers","following_url":"https://api.github.com/users/ndelangen/following{/other_user}","gists_url":"https://api.github.com/users/ndelangen/gists{/gist_id}","starred_url":"https://api.github.com/users/ndelangen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ndelangen/subscriptions","organizations_url":"https://api.github.com/users/ndelangen/orgs","repos_url":"https://api.github.com/users/ndelangen/repos","events_url":"https://api.github.com/users/ndelangen/events{/privacy}","received_events_url":"https://api.github.com/users/ndelangen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/storybookjs/storybook/issues/29122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/storybookjs/storybook/issues/29122/timeline","performed_via_github_app":null,"state_reason":"completed"}