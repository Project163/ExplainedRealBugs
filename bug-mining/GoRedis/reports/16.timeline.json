[{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/139647438","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-139647438","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":139647438,"node_id":"MDEyOklzc3VlQ29tbWVudDEzOTY0NzQzOA==","user":{"login":"dim","id":16614,"node_id":"MDQ6VXNlcjE2NjE0","avatar_url":"https://avatars.githubusercontent.com/u/16614?v=4","gravatar_id":"","url":"https://api.github.com/users/dim","html_url":"https://github.com/dim","followers_url":"https://api.github.com/users/dim/followers","following_url":"https://api.github.com/users/dim/following{/other_user}","gists_url":"https://api.github.com/users/dim/gists{/gist_id}","starred_url":"https://api.github.com/users/dim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dim/subscriptions","organizations_url":"https://api.github.com/users/dim/orgs","repos_url":"https://api.github.com/users/dim/repos","events_url":"https://api.github.com/users/dim/events{/privacy}","received_events_url":"https://api.github.com/users/dim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-09-11T19:57:30Z","updated_at":"2015-09-11T19:57:30Z","body":"The client is thread safe, but pipelines, multi blocks, etc are not.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/139647438/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dim","id":16614,"node_id":"MDQ6VXNlcjE2NjE0","avatar_url":"https://avatars.githubusercontent.com/u/16614?v=4","gravatar_id":"","url":"https://api.github.com/users/dim","html_url":"https://github.com/dim","followers_url":"https://api.github.com/users/dim/followers","following_url":"https://api.github.com/users/dim/following{/other_user}","gists_url":"https://api.github.com/users/dim/gists{/gist_id}","starred_url":"https://api.github.com/users/dim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dim/subscriptions","organizations_url":"https://api.github.com/users/dim/orgs","repos_url":"https://api.github.com/users/dim/repos","events_url":"https://api.github.com/users/dim/events{/privacy}","received_events_url":"https://api.github.com/users/dim/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":407716811,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQwNzcxNjgxMQ==","url":"https://api.github.com/repos/redis/go-redis/issues/events/407716811","actor":{"login":"vmihailenco","id":290976,"node_id":"MDQ6VXNlcjI5MDk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/290976?v=4","gravatar_id":"","url":"https://api.github.com/users/vmihailenco","html_url":"https://github.com/vmihailenco","followers_url":"https://api.github.com/users/vmihailenco/followers","following_url":"https://api.github.com/users/vmihailenco/following{/other_user}","gists_url":"https://api.github.com/users/vmihailenco/gists{/gist_id}","starred_url":"https://api.github.com/users/vmihailenco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmihailenco/subscriptions","organizations_url":"https://api.github.com/users/vmihailenco/orgs","repos_url":"https://api.github.com/users/vmihailenco/repos","events_url":"https://api.github.com/users/vmihailenco/events{/privacy}","received_events_url":"https://api.github.com/users/vmihailenco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c809246d8b39d8bbe9d03b67fee954081a863f32","commit_url":"https://api.github.com/repos/redis/go-redis/commits/c809246d8b39d8bbe9d03b67fee954081a863f32","created_at":"2015-09-12T06:36:15Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/139733085","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-139733085","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":139733085,"node_id":"MDEyOklzc3VlQ29tbWVudDEzOTczMzA4NQ==","user":{"login":"vmihailenco","id":290976,"node_id":"MDQ6VXNlcjI5MDk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/290976?v=4","gravatar_id":"","url":"https://api.github.com/users/vmihailenco","html_url":"https://github.com/vmihailenco","followers_url":"https://api.github.com/users/vmihailenco/followers","following_url":"https://api.github.com/users/vmihailenco/following{/other_user}","gists_url":"https://api.github.com/users/vmihailenco/gists{/gist_id}","starred_url":"https://api.github.com/users/vmihailenco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmihailenco/subscriptions","organizations_url":"https://api.github.com/users/vmihailenco/orgs","repos_url":"https://api.github.com/users/vmihailenco/repos","events_url":"https://api.github.com/users/vmihailenco/events{/privacy}","received_events_url":"https://api.github.com/users/vmihailenco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-09-12T06:40:16Z","updated_at":"2015-09-12T06:40:16Z","body":"What @dim said. Multi, pipelines and PubSub are not thread-safe, because using them from multiple goroutines does not make much sense to me. But we can make them thread-safe if you find such use case.\n\nHopefully https://github.com/go-redis/redis/pull/167 will make situation clearer.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/139733085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vmihailenco","id":290976,"node_id":"MDQ6VXNlcjI5MDk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/290976?v=4","gravatar_id":"","url":"https://api.github.com/users/vmihailenco","html_url":"https://github.com/vmihailenco","followers_url":"https://api.github.com/users/vmihailenco/followers","following_url":"https://api.github.com/users/vmihailenco/following{/other_user}","gists_url":"https://api.github.com/users/vmihailenco/gists{/gist_id}","starred_url":"https://api.github.com/users/vmihailenco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmihailenco/subscriptions","organizations_url":"https://api.github.com/users/vmihailenco/orgs","repos_url":"https://api.github.com/users/vmihailenco/repos","events_url":"https://api.github.com/users/vmihailenco/events{/privacy}","received_events_url":"https://api.github.com/users/vmihailenco/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":407717286,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDA3NzE3Mjg2","url":"https://api.github.com/repos/redis/go-redis/issues/events/407717286","actor":{"login":"dim","id":16614,"node_id":"MDQ6VXNlcjE2NjE0","avatar_url":"https://avatars.githubusercontent.com/u/16614?v=4","gravatar_id":"","url":"https://api.github.com/users/dim","html_url":"https://github.com/dim","followers_url":"https://api.github.com/users/dim/followers","following_url":"https://api.github.com/users/dim/following{/other_user}","gists_url":"https://api.github.com/users/dim/gists{/gist_id}","starred_url":"https://api.github.com/users/dim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dim/subscriptions","organizations_url":"https://api.github.com/users/dim/orgs","repos_url":"https://api.github.com/users/dim/repos","events_url":"https://api.github.com/users/dim/events{/privacy}","received_events_url":"https://api.github.com/users/dim/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-09-12T06:40:16Z","performed_via_github_app":null},{"id":407717287,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQwNzcxNzI4Nw==","url":"https://api.github.com/repos/redis/go-redis/issues/events/407717287","actor":{"login":"dim","id":16614,"node_id":"MDQ6VXNlcjE2NjE0","avatar_url":"https://avatars.githubusercontent.com/u/16614?v=4","gravatar_id":"","url":"https://api.github.com/users/dim","html_url":"https://github.com/dim","followers_url":"https://api.github.com/users/dim/followers","following_url":"https://api.github.com/users/dim/following{/other_user}","gists_url":"https://api.github.com/users/dim/gists{/gist_id}","starred_url":"https://api.github.com/users/dim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dim/subscriptions","organizations_url":"https://api.github.com/users/dim/orgs","repos_url":"https://api.github.com/users/dim/repos","events_url":"https://api.github.com/users/dim/events{/privacy}","received_events_url":"https://api.github.com/users/dim/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-09-12T06:40:16Z","performed_via_github_app":null},{"id":407718253,"node_id":"MDExOkNsb3NlZEV2ZW50NDA3NzE4MjUz","url":"https://api.github.com/repos/redis/go-redis/issues/events/407718253","actor":{"login":"vmihailenco","id":290976,"node_id":"MDQ6VXNlcjI5MDk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/290976?v=4","gravatar_id":"","url":"https://api.github.com/users/vmihailenco","html_url":"https://github.com/vmihailenco","followers_url":"https://api.github.com/users/vmihailenco/followers","following_url":"https://api.github.com/users/vmihailenco/following{/other_user}","gists_url":"https://api.github.com/users/vmihailenco/gists{/gist_id}","starred_url":"https://api.github.com/users/vmihailenco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmihailenco/subscriptions","organizations_url":"https://api.github.com/users/vmihailenco/orgs","repos_url":"https://api.github.com/users/vmihailenco/repos","events_url":"https://api.github.com/users/vmihailenco/events{/privacy}","received_events_url":"https://api.github.com/users/vmihailenco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"c809246d8b39d8bbe9d03b67fee954081a863f32","commit_url":"https://api.github.com/repos/redis/go-redis/commits/c809246d8b39d8bbe9d03b67fee954081a863f32","created_at":"2015-09-12T06:45:37Z","state_reason":null,"performed_via_github_app":null},{"id":407718254,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQwNzcxODI1NA==","url":"https://api.github.com/repos/redis/go-redis/issues/events/407718254","actor":{"login":"vmihailenco","id":290976,"node_id":"MDQ6VXNlcjI5MDk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/290976?v=4","gravatar_id":"","url":"https://api.github.com/users/vmihailenco","html_url":"https://github.com/vmihailenco","followers_url":"https://api.github.com/users/vmihailenco/followers","following_url":"https://api.github.com/users/vmihailenco/following{/other_user}","gists_url":"https://api.github.com/users/vmihailenco/gists{/gist_id}","starred_url":"https://api.github.com/users/vmihailenco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmihailenco/subscriptions","organizations_url":"https://api.github.com/users/vmihailenco/orgs","repos_url":"https://api.github.com/users/vmihailenco/repos","events_url":"https://api.github.com/users/vmihailenco/events{/privacy}","received_events_url":"https://api.github.com/users/vmihailenco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"eef3fd78ef0f78e8406339c27fd46c6af93f24ba","commit_url":"https://api.github.com/repos/redis/go-redis/commits/eef3fd78ef0f78e8406339c27fd46c6af93f24ba","created_at":"2015-09-12T06:45:37Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/149347216","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-149347216","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":149347216,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTM0NzIxNg==","user":{"login":"sammy007","id":7374093,"node_id":"MDQ6VXNlcjczNzQwOTM=","avatar_url":"https://avatars.githubusercontent.com/u/7374093?v=4","gravatar_id":"","url":"https://api.github.com/users/sammy007","html_url":"https://github.com/sammy007","followers_url":"https://api.github.com/users/sammy007/followers","following_url":"https://api.github.com/users/sammy007/following{/other_user}","gists_url":"https://api.github.com/users/sammy007/gists{/gist_id}","starred_url":"https://api.github.com/users/sammy007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammy007/subscriptions","organizations_url":"https://api.github.com/users/sammy007/orgs","repos_url":"https://api.github.com/users/sammy007/repos","events_url":"https://api.github.com/users/sammy007/events{/privacy}","received_events_url":"https://api.github.com/users/sammy007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-19T21:04:57Z","updated_at":"2015-10-19T21:04:57Z","body":"I have an app where .multi should be called from hundreds of goroutines in order to persist some work done by each worker. Is it good use-case to make .multi thread safe?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/149347216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sammy007","id":7374093,"node_id":"MDQ6VXNlcjczNzQwOTM=","avatar_url":"https://avatars.githubusercontent.com/u/7374093?v=4","gravatar_id":"","url":"https://api.github.com/users/sammy007","html_url":"https://github.com/sammy007","followers_url":"https://api.github.com/users/sammy007/followers","following_url":"https://api.github.com/users/sammy007/following{/other_user}","gists_url":"https://api.github.com/users/sammy007/gists{/gist_id}","starred_url":"https://api.github.com/users/sammy007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammy007/subscriptions","organizations_url":"https://api.github.com/users/sammy007/orgs","repos_url":"https://api.github.com/users/sammy007/repos","events_url":"https://api.github.com/users/sammy007/events{/privacy}","received_events_url":"https://api.github.com/users/sammy007/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/149360999","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-149360999","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":149360999,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTM2MDk5OQ==","user":{"login":"dim","id":16614,"node_id":"MDQ6VXNlcjE2NjE0","avatar_url":"https://avatars.githubusercontent.com/u/16614?v=4","gravatar_id":"","url":"https://api.github.com/users/dim","html_url":"https://github.com/dim","followers_url":"https://api.github.com/users/dim/followers","following_url":"https://api.github.com/users/dim/following{/other_user}","gists_url":"https://api.github.com/users/dim/gists{/gist_id}","starred_url":"https://api.github.com/users/dim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dim/subscriptions","organizations_url":"https://api.github.com/users/dim/orgs","repos_url":"https://api.github.com/users/dim/repos","events_url":"https://api.github.com/users/dim/events{/privacy}","received_events_url":"https://api.github.com/users/dim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-19T22:03:31Z","updated_at":"2015-10-19T22:03:31Z","body":"Not really, in my opinion. For me, the same rule applies here as for native\nGo maps. The Go team could have made them thread safe but decided not to\nadd it would benefit only a small fraction of use cases.\n\nI don't know the exact scenario, but I would suggest you should\nbatch/collect the results from your goroutines and then build a multi\nstatement from a single goroutine. Take e.g. a look at\nhttps://github.com/facebookgo/muster for that purpose.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/149360999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dim","id":16614,"node_id":"MDQ6VXNlcjE2NjE0","avatar_url":"https://avatars.githubusercontent.com/u/16614?v=4","gravatar_id":"","url":"https://api.github.com/users/dim","html_url":"https://github.com/dim","followers_url":"https://api.github.com/users/dim/followers","following_url":"https://api.github.com/users/dim/following{/other_user}","gists_url":"https://api.github.com/users/dim/gists{/gist_id}","starred_url":"https://api.github.com/users/dim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dim/subscriptions","organizations_url":"https://api.github.com/users/dim/orgs","repos_url":"https://api.github.com/users/dim/repos","events_url":"https://api.github.com/users/dim/events{/privacy}","received_events_url":"https://api.github.com/users/dim/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/149362226","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-149362226","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":149362226,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTM2MjIyNg==","user":{"login":"sammy007","id":7374093,"node_id":"MDQ6VXNlcjczNzQwOTM=","avatar_url":"https://avatars.githubusercontent.com/u/7374093?v=4","gravatar_id":"","url":"https://api.github.com/users/sammy007","html_url":"https://github.com/sammy007","followers_url":"https://api.github.com/users/sammy007/followers","following_url":"https://api.github.com/users/sammy007/following{/other_user}","gists_url":"https://api.github.com/users/sammy007/gists{/gist_id}","starred_url":"https://api.github.com/users/sammy007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammy007/subscriptions","organizations_url":"https://api.github.com/users/sammy007/orgs","repos_url":"https://api.github.com/users/sammy007/repos","events_url":"https://api.github.com/users/sammy007/events{/privacy}","received_events_url":"https://api.github.com/users/sammy007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-19T22:10:06Z","updated_at":"2015-10-19T22:10:06Z","body":"Well, maybe I am missing something. I don't wanna share multi tx between goroutines, each goroutine will create separate client.Multi().\nI guess this code is ok then: https://github.com/sammy007/go-cryptonote-pool/blob/master/go-pool/storage/redis.go#L73\nPlease tell me if I am wrong.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/149362226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sammy007","id":7374093,"node_id":"MDQ6VXNlcjczNzQwOTM=","avatar_url":"https://avatars.githubusercontent.com/u/7374093?v=4","gravatar_id":"","url":"https://api.github.com/users/sammy007","html_url":"https://github.com/sammy007","followers_url":"https://api.github.com/users/sammy007/followers","following_url":"https://api.github.com/users/sammy007/following{/other_user}","gists_url":"https://api.github.com/users/sammy007/gists{/gist_id}","starred_url":"https://api.github.com/users/sammy007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammy007/subscriptions","organizations_url":"https://api.github.com/users/sammy007/orgs","repos_url":"https://api.github.com/users/sammy007/repos","events_url":"https://api.github.com/users/sammy007/events{/privacy}","received_events_url":"https://api.github.com/users/sammy007/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/149645095","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-149645095","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":149645095,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTY0NTA5NQ==","user":{"login":"vmihailenco","id":290976,"node_id":"MDQ6VXNlcjI5MDk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/290976?v=4","gravatar_id":"","url":"https://api.github.com/users/vmihailenco","html_url":"https://github.com/vmihailenco","followers_url":"https://api.github.com/users/vmihailenco/followers","following_url":"https://api.github.com/users/vmihailenco/following{/other_user}","gists_url":"https://api.github.com/users/vmihailenco/gists{/gist_id}","starred_url":"https://api.github.com/users/vmihailenco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmihailenco/subscriptions","organizations_url":"https://api.github.com/users/vmihailenco/orgs","repos_url":"https://api.github.com/users/vmihailenco/repos","events_url":"https://api.github.com/users/vmihailenco/events{/privacy}","received_events_url":"https://api.github.com/users/vmihailenco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-20T17:46:53Z","updated_at":"2015-10-20T17:46:53Z","body":"From what I see it is okay, but you use Redis transactions (MULTI) without WATCH, which AFAIK is somewhat pointless (but I can be wrong :). When you don't need WATCH you can just use pipelines - https://godoc.org/gopkg.in/redis.v3#ex-Client-Pipelined. It will not be much faster though.\n\n> I don't wanna share multi tx between goroutines, each goroutine will create separate client.Multi().\n\nThen you don't have to worry about thread-safety since each goroutine will have its own copy of Multi.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/149645095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vmihailenco","id":290976,"node_id":"MDQ6VXNlcjI5MDk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/290976?v=4","gravatar_id":"","url":"https://api.github.com/users/vmihailenco","html_url":"https://github.com/vmihailenco","followers_url":"https://api.github.com/users/vmihailenco/followers","following_url":"https://api.github.com/users/vmihailenco/following{/other_user}","gists_url":"https://api.github.com/users/vmihailenco/gists{/gist_id}","starred_url":"https://api.github.com/users/vmihailenco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmihailenco/subscriptions","organizations_url":"https://api.github.com/users/vmihailenco/orgs","repos_url":"https://api.github.com/users/vmihailenco/repos","events_url":"https://api.github.com/users/vmihailenco/events{/privacy}","received_events_url":"https://api.github.com/users/vmihailenco/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/153339764","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-153339764","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":153339764,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MzMzOTc2NA==","user":{"login":"lcosmin","id":1164572,"node_id":"MDQ6VXNlcjExNjQ1NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1164572?v=4","gravatar_id":"","url":"https://api.github.com/users/lcosmin","html_url":"https://github.com/lcosmin","followers_url":"https://api.github.com/users/lcosmin/followers","following_url":"https://api.github.com/users/lcosmin/following{/other_user}","gists_url":"https://api.github.com/users/lcosmin/gists{/gist_id}","starred_url":"https://api.github.com/users/lcosmin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lcosmin/subscriptions","organizations_url":"https://api.github.com/users/lcosmin/orgs","repos_url":"https://api.github.com/users/lcosmin/repos","events_url":"https://api.github.com/users/lcosmin/events{/privacy}","received_events_url":"https://api.github.com/users/lcosmin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-11-03T12:37:21Z","updated_at":"2015-11-03T12:37:21Z","body":"How about the following scenario:  create a pipeline, pass it to multiple goroutines (which do some operations) and call Exec() a single time (after the goroutines have finished) from the function that created the pipeline. Is this still unsafe ?\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/153339764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lcosmin","id":1164572,"node_id":"MDQ6VXNlcjExNjQ1NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1164572?v=4","gravatar_id":"","url":"https://api.github.com/users/lcosmin","html_url":"https://github.com/lcosmin","followers_url":"https://api.github.com/users/lcosmin/followers","following_url":"https://api.github.com/users/lcosmin/following{/other_user}","gists_url":"https://api.github.com/users/lcosmin/gists{/gist_id}","starred_url":"https://api.github.com/users/lcosmin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lcosmin/subscriptions","organizations_url":"https://api.github.com/users/lcosmin/orgs","repos_url":"https://api.github.com/users/lcosmin/repos","events_url":"https://api.github.com/users/lcosmin/events{/privacy}","received_events_url":"https://api.github.com/users/lcosmin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/153401005","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-153401005","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":153401005,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MzQwMTAwNQ==","user":{"login":"vmihailenco","id":290976,"node_id":"MDQ6VXNlcjI5MDk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/290976?v=4","gravatar_id":"","url":"https://api.github.com/users/vmihailenco","html_url":"https://github.com/vmihailenco","followers_url":"https://api.github.com/users/vmihailenco/followers","following_url":"https://api.github.com/users/vmihailenco/following{/other_user}","gists_url":"https://api.github.com/users/vmihailenco/gists{/gist_id}","starred_url":"https://api.github.com/users/vmihailenco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmihailenco/subscriptions","organizations_url":"https://api.github.com/users/vmihailenco/orgs","repos_url":"https://api.github.com/users/vmihailenco/repos","events_url":"https://api.github.com/users/vmihailenco/events{/privacy}","received_events_url":"https://api.github.com/users/vmihailenco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-11-03T16:12:11Z","updated_at":"2015-11-03T16:12:11Z","body":"Yes, currently it is unsafe. But I see a point and I am inclined to make pipeline/multi threadsafe just to avoid confusion it causes :)\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/153401005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vmihailenco","id":290976,"node_id":"MDQ6VXNlcjI5MDk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/290976?v=4","gravatar_id":"","url":"https://api.github.com/users/vmihailenco","html_url":"https://github.com/vmihailenco","followers_url":"https://api.github.com/users/vmihailenco/followers","following_url":"https://api.github.com/users/vmihailenco/following{/other_user}","gists_url":"https://api.github.com/users/vmihailenco/gists{/gist_id}","starred_url":"https://api.github.com/users/vmihailenco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmihailenco/subscriptions","organizations_url":"https://api.github.com/users/vmihailenco/orgs","repos_url":"https://api.github.com/users/vmihailenco/repos","events_url":"https://api.github.com/users/vmihailenco/events{/privacy}","received_events_url":"https://api.github.com/users/vmihailenco/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":454399574,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ1NDM5OTU3NA==","url":"https://api.github.com/repos/redis/go-redis/issues/events/454399574","actor":{"login":"vmihailenco","id":290976,"node_id":"MDQ6VXNlcjI5MDk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/290976?v=4","gravatar_id":"","url":"https://api.github.com/users/vmihailenco","html_url":"https://github.com/vmihailenco","followers_url":"https://api.github.com/users/vmihailenco/followers","following_url":"https://api.github.com/users/vmihailenco/following{/other_user}","gists_url":"https://api.github.com/users/vmihailenco/gists{/gist_id}","starred_url":"https://api.github.com/users/vmihailenco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmihailenco/subscriptions","organizations_url":"https://api.github.com/users/vmihailenco/orgs","repos_url":"https://api.github.com/users/vmihailenco/repos","events_url":"https://api.github.com/users/vmihailenco/events{/privacy}","received_events_url":"https://api.github.com/users/vmihailenco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d0d3920e69467352e1ea1b3edf28e2aa2c6e9b4a","commit_url":"https://api.github.com/repos/redis/go-redis/commits/d0d3920e69467352e1ea1b3edf28e2aa2c6e9b4a","created_at":"2015-11-04T12:25:58Z","performed_via_github_app":null},{"id":458078220,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ1ODA3ODIyMA==","url":"https://api.github.com/repos/redis/go-redis/issues/events/458078220","actor":{"login":"vmihailenco","id":290976,"node_id":"MDQ6VXNlcjI5MDk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/290976?v=4","gravatar_id":"","url":"https://api.github.com/users/vmihailenco","html_url":"https://github.com/vmihailenco","followers_url":"https://api.github.com/users/vmihailenco/followers","following_url":"https://api.github.com/users/vmihailenco/following{/other_user}","gists_url":"https://api.github.com/users/vmihailenco/gists{/gist_id}","starred_url":"https://api.github.com/users/vmihailenco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmihailenco/subscriptions","organizations_url":"https://api.github.com/users/vmihailenco/orgs","repos_url":"https://api.github.com/users/vmihailenco/repos","events_url":"https://api.github.com/users/vmihailenco/events{/privacy}","received_events_url":"https://api.github.com/users/vmihailenco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"470271c81ea3ce473a952d39cbc97e5912ad9eca","commit_url":"https://api.github.com/repos/redis/go-redis/commits/470271c81ea3ce473a952d39cbc97e5912ad9eca","created_at":"2015-11-08T07:12:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/510737728","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-510737728","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":510737728,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDczNzcyOA==","user":{"login":"lwjli","id":19380375,"node_id":"MDQ6VXNlcjE5MzgwMzc1","avatar_url":"https://avatars.githubusercontent.com/u/19380375?v=4","gravatar_id":"","url":"https://api.github.com/users/lwjli","html_url":"https://github.com/lwjli","followers_url":"https://api.github.com/users/lwjli/followers","following_url":"https://api.github.com/users/lwjli/following{/other_user}","gists_url":"https://api.github.com/users/lwjli/gists{/gist_id}","starred_url":"https://api.github.com/users/lwjli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lwjli/subscriptions","organizations_url":"https://api.github.com/users/lwjli/orgs","repos_url":"https://api.github.com/users/lwjli/repos","events_url":"https://api.github.com/users/lwjli/events{/privacy}","received_events_url":"https://api.github.com/users/lwjli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T04:14:02Z","updated_at":"2019-07-12T04:14:02Z","body":"Under high concurrency with single client, some request may fail.\r\nAfter filter out the failed request, the response is OK.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/510737728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lwjli","id":19380375,"node_id":"MDQ6VXNlcjE5MzgwMzc1","avatar_url":"https://avatars.githubusercontent.com/u/19380375?v=4","gravatar_id":"","url":"https://api.github.com/users/lwjli","html_url":"https://github.com/lwjli","followers_url":"https://api.github.com/users/lwjli/followers","following_url":"https://api.github.com/users/lwjli/following{/other_user}","gists_url":"https://api.github.com/users/lwjli/gists{/gist_id}","starred_url":"https://api.github.com/users/lwjli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lwjli/subscriptions","organizations_url":"https://api.github.com/users/lwjli/orgs","repos_url":"https://api.github.com/users/lwjli/repos","events_url":"https://api.github.com/users/lwjli/events{/privacy}","received_events_url":"https://api.github.com/users/lwjli/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/839131032","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-839131032","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":839131032,"node_id":"MDEyOklzc3VlQ29tbWVudDgzOTEzMTAzMg==","user":{"login":"drachs","id":450381,"node_id":"MDQ6VXNlcjQ1MDM4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/450381?v=4","gravatar_id":"","url":"https://api.github.com/users/drachs","html_url":"https://github.com/drachs","followers_url":"https://api.github.com/users/drachs/followers","following_url":"https://api.github.com/users/drachs/following{/other_user}","gists_url":"https://api.github.com/users/drachs/gists{/gist_id}","starred_url":"https://api.github.com/users/drachs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drachs/subscriptions","organizations_url":"https://api.github.com/users/drachs/orgs","repos_url":"https://api.github.com/users/drachs/repos","events_url":"https://api.github.com/users/drachs/events{/privacy}","received_events_url":"https://api.github.com/users/drachs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-11T20:22:42Z","updated_at":"2021-05-11T20:22:42Z","body":"I think it is really important to document the read safety of the library.  In particular, I came here wonder if I should do a global redis client or needed to do one redis client per go routine.   I am assuming from the discussion that a global redis client is preferable.   I didn't see this addressed in the docs.\r\n\r\nBut I'd like to leave the feedback that if some parts of the library are thread safe and others are not then it's very important to make that clear in the documentation, especially in a language like Go with a very aggressive multithreaded model.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/839131032/reactions","total_count":20,"+1":20,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"drachs","id":450381,"node_id":"MDQ6VXNlcjQ1MDM4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/450381?v=4","gravatar_id":"","url":"https://api.github.com/users/drachs","html_url":"https://github.com/drachs","followers_url":"https://api.github.com/users/drachs/followers","following_url":"https://api.github.com/users/drachs/following{/other_user}","gists_url":"https://api.github.com/users/drachs/gists{/gist_id}","starred_url":"https://api.github.com/users/drachs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drachs/subscriptions","organizations_url":"https://api.github.com/users/drachs/orgs","repos_url":"https://api.github.com/users/drachs/repos","events_url":"https://api.github.com/users/drachs/events{/privacy}","received_events_url":"https://api.github.com/users/drachs/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/861359162","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-861359162","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":861359162,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MTM1OTE2Mg==","user":{"login":"DachuanZhao","id":23434805,"node_id":"MDQ6VXNlcjIzNDM0ODA1","avatar_url":"https://avatars.githubusercontent.com/u/23434805?v=4","gravatar_id":"","url":"https://api.github.com/users/DachuanZhao","html_url":"https://github.com/DachuanZhao","followers_url":"https://api.github.com/users/DachuanZhao/followers","following_url":"https://api.github.com/users/DachuanZhao/following{/other_user}","gists_url":"https://api.github.com/users/DachuanZhao/gists{/gist_id}","starred_url":"https://api.github.com/users/DachuanZhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DachuanZhao/subscriptions","organizations_url":"https://api.github.com/users/DachuanZhao/orgs","repos_url":"https://api.github.com/users/DachuanZhao/repos","events_url":"https://api.github.com/users/DachuanZhao/events{/privacy}","received_events_url":"https://api.github.com/users/DachuanZhao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-15T09:52:51Z","updated_at":"2021-06-15T09:52:51Z","body":"> I think it is really important to document the read safety of the library. In particular, I came here wonder if I should do a global redis client or needed to do one redis client per go routine. I am assuming from the discussion that a global redis client is preferable. I didn't see this addressed in the docs.\r\n> \r\n> But I'd like to leave the feedback that if some parts of the library are thread safe and others are not then it's very important to make that clear in the documentation, especially in a language like Go with a very aggressive multithreaded model.\r\n\r\n+1 . Is the client safe for concurrent use now ?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/861359162/reactions","total_count":9,"+1":9,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DachuanZhao","id":23434805,"node_id":"MDQ6VXNlcjIzNDM0ODA1","avatar_url":"https://avatars.githubusercontent.com/u/23434805?v=4","gravatar_id":"","url":"https://api.github.com/users/DachuanZhao","html_url":"https://github.com/DachuanZhao","followers_url":"https://api.github.com/users/DachuanZhao/followers","following_url":"https://api.github.com/users/DachuanZhao/following{/other_user}","gists_url":"https://api.github.com/users/DachuanZhao/gists{/gist_id}","starred_url":"https://api.github.com/users/DachuanZhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DachuanZhao/subscriptions","organizations_url":"https://api.github.com/users/DachuanZhao/orgs","repos_url":"https://api.github.com/users/DachuanZhao/repos","events_url":"https://api.github.com/users/DachuanZhao/events{/privacy}","received_events_url":"https://api.github.com/users/DachuanZhao/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/1726198954","html_url":"https://github.com/redis/go-redis/issues/166#issuecomment-1726198954","issue_url":"https://api.github.com/repos/redis/go-redis/issues/166","id":1726198954,"node_id":"IC_kwDOAE8G285m47Sq","user":{"login":"bgokden","id":974543,"node_id":"MDQ6VXNlcjk3NDU0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/974543?v=4","gravatar_id":"","url":"https://api.github.com/users/bgokden","html_url":"https://github.com/bgokden","followers_url":"https://api.github.com/users/bgokden/followers","following_url":"https://api.github.com/users/bgokden/following{/other_user}","gists_url":"https://api.github.com/users/bgokden/gists{/gist_id}","starred_url":"https://api.github.com/users/bgokden/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgokden/subscriptions","organizations_url":"https://api.github.com/users/bgokden/orgs","repos_url":"https://api.github.com/users/bgokden/repos","events_url":"https://api.github.com/users/bgokden/events{/privacy}","received_events_url":"https://api.github.com/users/bgokden/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-19T17:34:50Z","updated_at":"2023-09-19T17:34:50Z","body":"After a couple of days of testing. I can confirm that Redis client operations that use streams are not thread-safe.\r\nI am developing an async chat system. I have a web socket backend where a goroutine reads the messages and sends them to a stream and another goroutine that reads from a stream and sends them to the web socket. It was breaking for no apparent reason and I came here because some operations are not thread-safe. As I see any blocking operation is not thread-safe.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/go-redis/issues/comments/1726198954/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bgokden","id":974543,"node_id":"MDQ6VXNlcjk3NDU0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/974543?v=4","gravatar_id":"","url":"https://api.github.com/users/bgokden","html_url":"https://github.com/bgokden","followers_url":"https://api.github.com/users/bgokden/followers","following_url":"https://api.github.com/users/bgokden/following{/other_user}","gists_url":"https://api.github.com/users/bgokden/gists{/gist_id}","starred_url":"https://api.github.com/users/bgokden/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgokden/subscriptions","organizations_url":"https://api.github.com/users/bgokden/orgs","repos_url":"https://api.github.com/users/bgokden/repos","events_url":"https://api.github.com/users/bgokden/events{/privacy}","received_events_url":"https://api.github.com/users/bgokden/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10967788388,"node_id":"REFE_lADOAE8G284GUrCjzwAAAAKNuytk","url":"https://api.github.com/repos/redis/go-redis/issues/events/10967788388","actor":{"login":"RolandMarchand","id":90345171,"node_id":"MDQ6VXNlcjkwMzQ1MTcx","avatar_url":"https://avatars.githubusercontent.com/u/90345171?v=4","gravatar_id":"","url":"https://api.github.com/users/RolandMarchand","html_url":"https://github.com/RolandMarchand","followers_url":"https://api.github.com/users/RolandMarchand/followers","following_url":"https://api.github.com/users/RolandMarchand/following{/other_user}","gists_url":"https://api.github.com/users/RolandMarchand/gists{/gist_id}","starred_url":"https://api.github.com/users/RolandMarchand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RolandMarchand/subscriptions","organizations_url":"https://api.github.com/users/RolandMarchand/orgs","repos_url":"https://api.github.com/users/RolandMarchand/repos","events_url":"https://api.github.com/users/RolandMarchand/events{/privacy}","received_events_url":"https://api.github.com/users/RolandMarchand/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"af68eebab41948b7c9841cd66b270b8d26a11f09","commit_url":"https://api.github.com/repos/RolandMarchand/chroma-canvas/commits/af68eebab41948b7c9841cd66b270b8d26a11f09","created_at":"2023-11-15T13:58:34Z","performed_via_github_app":null}]