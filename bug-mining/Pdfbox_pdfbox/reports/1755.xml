<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:06:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3799] Problem in TextPosition&apos;s hashCode</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3799</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Just another side effect related to TextPosition&apos;s hashCode&lt;/p&gt;

&lt;p&gt;I am using the hashCode because I want to know the color of each letter. To do this, during the processTextPosition, I save the current graphic state in a map, using the current text position as key. Then, on writeString, I iterate all the text positions and I get the color for each of them though this map.&lt;/p&gt;

&lt;p&gt;Of course would be easier if this information could be saved in the text position. But this is just a desired feature.&lt;/p&gt;

&lt;p&gt;I am discovering that from processTextPosition to writeString sometimes happens that the same textPosition has just a different unicode. In processTextPosition is just a &quot;x&quot; (char 120), but then on writeString the same textPosition the unicode is the x, followed by &apos;&#772;&apos; (char 772). Everything about the textPosition remains the same: same coordinates, same System.identityHashCode; the only thing that changes is the unicode, which causes the computation of a different hashCode.&lt;/p&gt;

&lt;p&gt;That is giving problem. As workaround I am using now System.identityHashCode instead of the current TextPosition&apos;s implementation&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13073675">PDFBOX-3799</key>
            <summary>Problem in TextPosition&apos;s hashCode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="miromannino">Miro Mannino</reporter>
                        <labels>
                    </labels>
                <created>Sun, 21 May 2017 06:48:51 +0000</created>
                <updated>Fri, 21 Jul 2017 04:40:09 +0000</updated>
                            <resolved>Sun, 21 May 2017 17:27:48 +0000</resolved>
                                    <version>2.0.6</version>
                                    <fixVersion>2.0.7</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Text extraction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16018896" author="jira-bot" created="Sun, 21 May 2017 17:19:28 +0000"  >&lt;p&gt;Commit 1795710 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1795710&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1795710&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3799&quot; title=&quot;Problem in TextPosition&amp;#39;s hashCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3799&quot;&gt;&lt;del&gt;PDFBOX-3799&lt;/del&gt;&lt;/a&gt;: remove mutable fields from hash calculation&lt;/p&gt;</comment>
                            <comment id="16018898" author="jira-bot" created="Sun, 21 May 2017 17:19:33 +0000"  >&lt;p&gt;Commit 1795711 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1795711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1795711&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3799&quot; title=&quot;Problem in TextPosition&amp;#39;s hashCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3799&quot;&gt;&lt;del&gt;PDFBOX-3799&lt;/del&gt;&lt;/a&gt;: remove mutable fields from hash calculation&lt;/p&gt;</comment>
                            <comment id="16018903" author="tilman" created="Sun, 21 May 2017 17:25:54 +0000"  >&lt;p&gt;Thank you for finding this. The lesson of this is that one shouldn&apos;t trust the IDE too much - only the &lt;tt&gt;final&lt;/tt&gt; fields should have been part of the hash calculation.&lt;/p&gt;</comment>
                            <comment id="16018906" author="tilman" created="Sun, 21 May 2017 17:28:41 +0000"  >&lt;p&gt;Re your other wish, I prefer not, because this would use more memory.&lt;/p&gt;</comment>
                            <comment id="16019184" author="miromannino" created="Mon, 22 May 2017 06:28:20 +0000"  >&lt;p&gt;Of course not trust the IDE ehehe.&lt;br/&gt;
About the final fields I mostly agree, immutable classes have many advantages.&lt;/p&gt;

&lt;p&gt;The thing I am not understanding is why that unicode should change. That &quot;x&quot; should still be &quot;x&quot;, right?&lt;/p&gt;</comment>
                            <comment id="16019221" author="tilman" created="Mon, 22 May 2017 07:28:08 +0000"  >&lt;p&gt;I didn&apos;t research this fully (I would have needed a test file), it has to do with diacritics. I just saw that there was an assignment after construction. Maybe something like a becoming &#225;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13072429">PDFBOX-3794</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3f9j3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>