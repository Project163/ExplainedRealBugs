<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:13:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5521] Signing tries to set byteRange of old signature</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5521</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;A long bug report on the users mailing lists leads to the finding that the COSWriter code hits an &quot;old&quot; signature that is (for whatever reason, maybe it was incorrectly included) present in the incremental part. The signing then fails because the byte range to be written is longer than the existing byte range.&lt;/p&gt;

&lt;p&gt;To avoid this, we improve signature detection by checking that the size indicated by byteRange is higher than the existing PDF size.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13483585">PDFBOX-5521</key>
            <summary>Signing tries to set byteRange of old signature</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Sep 2022 06:37:58 +0000</created>
                <updated>Thu, 18 Sep 2025 09:06:09 +0000</updated>
                            <resolved>Thu, 29 Sep 2022 18:36:11 +0000</resolved>
                                    <version>2.0.27</version>
                                    <fixVersion>2.0.28</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Signing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17610376" author="jira-bot" created="Wed, 28 Sep 2022 06:54:04 +0000"  >&lt;p&gt;Commit 1904317 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1904317&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1904317&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5521&quot; title=&quot;Signing tries to set byteRange of old signature&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5521&quot;&gt;&lt;del&gt;PDFBOX-5521&lt;/del&gt;&lt;/a&gt;: detect and avoid old signatures in the incrementally saved part&lt;/p&gt;</comment>
                            <comment id="17610382" author="jira-bot" created="Wed, 28 Sep 2022 07:03:19 +0000"  >&lt;p&gt;Commit 1904318 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1904318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1904318&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5521&quot; title=&quot;Signing tries to set byteRange of old signature&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5521&quot;&gt;&lt;del&gt;PDFBOX-5521&lt;/del&gt;&lt;/a&gt;: refactor&lt;/p&gt;</comment>
                            <comment id="17610436" author="mkl" created="Wed, 28 Sep 2022 08:36:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;COSWriter code hits an &quot;old&quot; signature that is (for whatever reason, maybe it was incorrectly included) present in the incremental part.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Most likely the problem signature in question is the usage rights signature. (The message &quot;This document enabled extended features in Adobe Acrobat Reader.&quot; indicates that there is a usage rights signature in the PDF in question.)&lt;/p&gt;

&lt;p&gt;In contrast to other signatures, a usage rights signature dictionary need not be an indirect object, it may be a direct object in the &lt;b&gt;Perms&lt;/b&gt; dictionary which in turn may be a direct object in the catalog dictionary. Thus, such a usage rights signature may occur again and again in each incremental update touching the catalog.&lt;/p&gt;

&lt;p&gt;In particular such a recurring usage rights signature is not &lt;em&gt;incorrectly included&lt;/em&gt; and the PDFBox signing code must be able to recognize that its signature dictionary is not the dictionary of the currently to sign signature field.&lt;/p&gt;</comment>
                            <comment id="17610663" author="jira-bot" created="Wed, 28 Sep 2022 17:04:52 +0000"  >&lt;p&gt;Commit 1904325 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1904325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1904325&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5521&quot; title=&quot;Signing tries to set byteRange of old signature&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5521&quot;&gt;&lt;del&gt;PDFBOX-5521&lt;/del&gt;&lt;/a&gt;: remove logging based on comment by mkl that it might be a usage rights signature that is a direct object in the catalog dictionary&lt;/p&gt;</comment>
                            <comment id="17611157" author="jira-bot" created="Thu, 29 Sep 2022 17:50:47 +0000"  >&lt;p&gt;Commit 1904336 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1904336&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1904336&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5521&quot; title=&quot;Signing tries to set byteRange of old signature&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5521&quot;&gt;&lt;del&gt;PDFBOX-5521&lt;/del&gt;&lt;/a&gt;: detect and avoid old signatures in the incrementally saved part&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13629275">PDFBOX-6071</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13629222">PDFBOX-6070</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://lists.apache.org/thread/k02nvwkch50jrf70rqh6g3mt2g3f6r48]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z18wn4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>