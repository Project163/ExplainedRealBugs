<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:15:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5992] Inline image bug with multi-byte newline tokens</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5992</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;There seems to be an issue with parsing inline image streams which are written with multi-byte whitespace tokens causing the image data to be prepended with whitespace. I&apos;ve attached an affected PDF to this issue where you should be able to reproduce the issue by loading the PDF and using the &lt;tt&gt;PDFRenderer&lt;/tt&gt; to render the PDF into an image.&lt;br/&gt;
&#160;&lt;br/&gt;
When converting the PDF to an image, I get the following error:&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;tt&gt;Exception occurred while converting page at index &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; javax.imageio.IIOException: Not a JPEG stream (starts with: 0x0aff, expected SOI: 0xffd8)&lt;/tt&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
The exception comes from Twelvemonkeys but there is nothing wrong with the image itself or that library. The image is zlib-compressed and inserted into the PDF, but if you open the PDF, extract the zlib-compressed object, and look at the hex data of the start of the image, you see included the following data:&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;tt&gt;4944 0d0a ffd8&lt;/tt&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
This corresponds to the &apos;ID&apos; token, followed by a newline, followed by the start of the object stream, which is a JPEG image as indicated by the SOI indicator &lt;tt&gt;ffd8&lt;/tt&gt;. However, you&apos;ll notice that the new line character is multi-byte: it&apos;s a carriage return followed by a line feed character. According to the PDF specification ISO 32000-2:&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;cite&gt;The PDF character set is divided into three classes referred to as regular, delimiter, and white-space characters. This classification enables the grouping of characters into tokens...PDF treats any sequence of consecutive whitespace characters, not inside of a string or stream, as one character.&lt;/cite&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
Furthermore, regarding the section on inline images:&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;cite&gt;The bytes between the ID operator and a whitespace token, but before the EI operator shall be treated the same as a stream object&apos;s data (see 7.3.8, &quot;Stream objects&quot;), even though they do not follow the standard stream syntax.&lt;/cite&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
This means that an arbitrary number of whitespace bytes can appear between the &apos;ID&apos; token and the start of the image stream according to the PDF specification. However, in the &lt;tt&gt;PDFStreamParser&lt;/tt&gt; class, we observe the following logic for stripping this whitespace:&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;tt&gt;if( isWhitespace() )&lt;/tt&gt;&lt;br/&gt;
{&lt;br/&gt;
&lt;tt&gt;&#160;&#160;&#160;&#160;//pull off the whitespace character&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160;&#160;&#160;&#160;source.read();&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;}&lt;/tt&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
This assumes a single-byte newline character, but does not properly handle multi-byte newlines. As such, in the example the &lt;tt&gt;0d&lt;/tt&gt; character gets skipped, but the &lt;tt&gt;0a&lt;/tt&gt; character isn&apos;t and is included in the &lt;tt&gt;imageData&lt;/tt&gt; byte array, and when passed on to Twelvemonkeys an exception is thrown.&lt;br/&gt;
&#160;&lt;br/&gt;
The solution here is to simply replace the if statement with a while loop.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13616053">PDFBOX-5992</key>
            <summary>Inline image bug with multi-byte newline tokens</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="bplate">Ben Plate</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Apr 2025 17:10:43 +0000</created>
                <updated>Thu, 2 Oct 2025 17:40:21 +0000</updated>
                            <resolved>Sun, 1 Jun 2025 11:53:36 +0000</resolved>
                                    <version>2.0.33</version>
                    <version>3.0.4 PDFBox</version>
                    <version>4.0.0</version>
                                    <fixVersion>2.0.35</fixVersion>
                    <fixVersion>3.0.6 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="17946497" author="lehmi" created="Tue, 22 Apr 2025 18:00:14 +0000"  >&lt;p&gt;I can&apos;t reproduce the issue. The attached file renders fine using 2.0.x, 3.0.x and the current trunk, no exception at all.&lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bplate&quot; class=&quot;user-hover&quot; rel=&quot;bplate&quot;&gt;bplate&lt;/a&gt; what exactly are you doing to get that exception?&lt;/p&gt;</comment>
                            <comment id="17946500" author="tilman" created="Tue, 22 Apr 2025 18:07:41 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The image is zlib-compressed and inserted into the PDF&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No it&apos;s only JPEG compressed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
BI
/W 775
/H 340
/CS /RGB
/BPC 8
/I &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
/F [/DCT]
ID
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Could it be you attached the wrong file? I don&apos;t get an error, only a warning &quot;The end of the stream doesn&apos;t point to the correct offset, using workaround to read the stream, stream start position: 84, length: 21768, expected end position: 21852&quot;.&lt;/p&gt;</comment>
                            <comment id="17946502" author="JIRAUSER309477" created="Tue, 22 Apr 2025 18:10:14 +0000"  >&lt;p&gt;Hmm let me check if that file is correct. I had to edit it to remove PII so I&apos;ll reattach with another after I confirm it&apos;s exhibiting the issue.&lt;/p&gt;</comment>
                            <comment id="17946504" author="JIRAUSER309477" created="Tue, 22 Apr 2025 18:14:20 +0000"  >&lt;p&gt;Also, to produce the issue I call the function &lt;tt&gt;PDFRenderer::renderImageWithDPI&lt;/tt&gt; which throws this exception.&lt;/p&gt;</comment>
                            <comment id="17946518" author="tilman" created="Tue, 22 Apr 2025 19:25:15 +0000"  >&lt;p&gt;I thought that your proposed change made sense so I ran rendering tests and things got worse, e.g. this &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13076198/13076198_EDGE11896203.pdf&quot; title=&quot;EDGE11896203.pdf attached to PDFBOX-5992&quot;&gt;EDGE11896203.pdf&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. This is because the image data starts with 00.&lt;/p&gt;</comment>
                            <comment id="17946541" author="JIRAUSER309477" created="Tue, 22 Apr 2025 20:07:57 +0000"  >&lt;p&gt;So after looking more in depth, it seems the bug is from a combination of &lt;tt&gt;PDFStreamParser&lt;/tt&gt; skipping a single whitespace byte, &lt;tt&gt;DCTFilter&lt;/tt&gt; reading past another byte, and me using an outdated version of twelvemonkeys which resets the input stream using &lt;tt&gt;seek(0)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I mentioned earlier that PDFStreamParser only skips a single byte, so when consecutive whitespace characters are present, they get read into the &lt;tt&gt;imageData&lt;/tt&gt; input stream. But in the JPEG &lt;tt&gt;DCTFilter&lt;/tt&gt; class there seems to be an edge-case check for this issue:&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;tt&gt;iis = ImageIO.createImageInputStream(encoded);&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;// skip one LF if there&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;if (iis.read() != 0x0A)&lt;/tt&gt;&lt;br/&gt;
{&lt;br/&gt;
&lt;tt&gt;&#160; &#160; iis.seek(0);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;}&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;reader.setInput(iis);&lt;/tt&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
This effectively skips the &lt;tt&gt;0a&lt;/tt&gt; whitespace byte by setting the position of the reader head to 1. However, in version 3.3.2 of twelvemonkeys, you can see &lt;a href=&quot;https://github.com/haraldk/TwelveMonkeys/blob/twelvemonkeys-3.3.2/imageio/imageio-jpeg/src/main/java/com/twelvemonkeys/imageio/plugins/jpeg/JPEGImageReader.java#L716&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; that the reader head is reset to position 0. This caused the issue I was observing, but it was fixed in version 3.4.0 of twelvemonkeys.&lt;br/&gt;
&#160;&lt;br/&gt;
So essentially, PDFBox removes the first whitespace character, includes the second but positions the reader head after it, then an old version twelvemonkeys reset the head and read in the wrong starting byte. This was my fault for having this out of date dependency.&lt;br/&gt;
&#160;&lt;br/&gt;
However, PDFBox still only skips up to two whitespace characters and if there are more, an error appears even with the latest version of twelvemonkeys. This would PDF would still be valid according to ISO 32000-2, but I imagine it&apos;s quite uncommon. I&apos;ve attached a PDF which demonstrates this behavior.&lt;/p&gt;</comment>
                            <comment id="17946546" author="JIRAUSER309477" created="Tue, 22 Apr 2025 20:57:05 +0000"  >&lt;p&gt;Just noticed your most recent comment. It&apos;s interesting that image streams can start with whitespace and that does seem to complicate adhering to ISO 32000-2. If that&apos;s the case though it seems like not using the while loop would be best for backwards-compatibility, but I&apos;m not sure how other PDF parsers handle this and if this is standard behavior.&lt;/p&gt;</comment>
                            <comment id="17946548" author="lehmi" created="Tue, 22 Apr 2025 21:08:14 +0000"  >&lt;p&gt;Replacing the whole if-clause with &quot;skipWhiteSpaces();&quot; seems to work. That method skips the next spaces followed by one CR or one  LF or a CRLF&lt;/p&gt;</comment>
                            <comment id="17946550" author="JIRAUSER309477" created="Tue, 22 Apr 2025 21:10:18 +0000"  >&lt;p&gt;Ah I wasn&apos;t aware of that method&#8212;that seems like a good solution.&lt;/p&gt;</comment>
                            <comment id="17946592" author="tilman" created="Wed, 23 Apr 2025 04:12:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bplate&quot; class=&quot;user-hover&quot; rel=&quot;bplate&quot;&gt;bplate&lt;/a&gt; Your second broken file also fails to render with Adobe.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; That change destroys the rendering of the &quot;yeung&quot; file from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-31&quot; title=&quot;bug with the Type3 font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-31&quot;&gt;&lt;del&gt;PDFBOX-31&lt;/del&gt;&lt;/a&gt;, and the file from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3046&quot; title=&quot;Specific PDF prints really (REALLY) slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3046&quot;&gt;&lt;del&gt;PDFBOX-3046&lt;/del&gt;&lt;/a&gt; (and a few more).&lt;/p&gt;</comment>
                            <comment id="17946645" author="mkl" created="Wed, 23 Apr 2025 07:42:53 +0000"  >&lt;p&gt;Considering the starting assumptions:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;em&gt;&#8212;The PDF character set is divided into three classes referred to as regular, delimiter, and white-space characters. This classification enables the grouping of characters into tokens...PDF treats any sequence of consecutive whitespace characters, not inside of a string or stream, as one character.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Furthermore, regarding the section on inline images:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&#8212;The bytes between the ID operator and a whitespace token, but before the EI operator shall be treated the same as a stream object&apos;s data (see 7.3.8, &quot;Stream objects&quot;), even though they do not follow the standard stream syntax.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;This means that an arbitrary number of whitespace bytes can appear between the &apos;ID&apos; token and the start of the image stream according to the PDF specification.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In the same section you will also find:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&#8212;Unless the image uses &lt;b&gt;ASCIIHexDecode&lt;/b&gt; or &lt;b&gt;ASCII85Decode&lt;/b&gt; as &lt;del&gt;one of its filters&lt;/del&gt; its final or only filter, the &lt;b&gt;ID&lt;/b&gt; operator shall be followed by a single white-space character, and the next character shall be interpreted as the first byte of image data.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Thus, the &lt;em&gt;whitespace token&lt;/em&gt; you found and quoted usually may only consist of a single whitespace &lt;em&gt;byte&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;In general, therefore, blindly applying &lt;tt&gt;skipWhiteSpaces()&lt;/tt&gt; is wrong! &lt;/p&gt;

&lt;p&gt;In case that the image data cannot start with a whitespace, though, skipping whitespaces &lt;em&gt;can&lt;/em&gt; repair broken PDFs, but &lt;em&gt;only in that case&lt;/em&gt;!&lt;/p&gt;</comment>
                            <comment id="17946653" author="mkl" created="Wed, 23 Apr 2025 08:21:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bplate&quot; class=&quot;user-hover&quot; rel=&quot;bplate&quot;&gt;bplate&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;as an aside, your example PDFs include many KBs of trash bytes after the %%EOF. Thus, they are broken as PDFs and PDF processors reading them need to repair them somehow. This can result in any kind of accidental change to them.&lt;/p&gt;

&lt;p&gt;Also there is something fishy about the page content streams: While PDFBox and Chrome can inflate them, iText and Adobe Acrobat cannot. Also the &lt;b&gt;Length1&lt;/b&gt; entry of those streams is weird.&lt;/p&gt;

&lt;p&gt;I&apos;d recommend using valid files as test files here.&lt;/p&gt;</comment>
                            <comment id="17946764" author="JIRAUSER309477" created="Wed, 23 Apr 2025 17:16:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;In the same section you will also find:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&#8212;Unless the image uses&#160;&lt;b&gt;ASCIIHexDecode&lt;/b&gt;&#160;or&#160;&lt;b&gt;ASCII85Decode&lt;/b&gt;&#160;as&#160;&lt;del&gt;one of its filters&lt;/del&gt;&#160;its final or only filter, the&#160;&lt;b&gt;ID&lt;/b&gt;&#160;operator shall be followed by a single white-space character, and the next character shall be interpreted as the first byte of image data.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Thus, the&#160;&lt;em&gt;whitespace token&lt;/em&gt;&#160;you found and quoted usually may only consist of a single whitespace&#160;&lt;em&gt;byte&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;In general, therefore, blindly applying&#160;&lt;tt&gt;skipWhiteSpaces()&lt;/tt&gt;&#160;is wrong!&lt;/p&gt;

&lt;p&gt;In case that the image data cannot start with a whitespace, though, skipping whitespaces&#160;&lt;em&gt;can&lt;/em&gt;&#160;repair broken PDFs, but&#160;&lt;em&gt;only in that case&lt;/em&gt;!&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ah, I missed that. Seems like in that case whatever PDF software was used to generate the PDF I encountered doesn&apos;t follow this rule, since it uses &lt;tt&gt;0a0d&lt;/tt&gt; between ID and the JPEG SOI.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bplate&quot; class=&quot;user-hover&quot; rel=&quot;bplate&quot;&gt;bplate&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;as an aside, your example PDFs include many KBs of trash bytes after the %%EOF. Thus, they are broken as PDFs and PDF processors reading them need to repair them somehow. This can result in any kind of accidental change to them.&lt;/p&gt;

&lt;p&gt;Also there is something fishy about the page content streams: While PDFBox and Chrome can inflate them, iText and Adobe Acrobat cannot. Also the&#160;&lt;b&gt;Length1&lt;/b&gt;&#160;entry of those streams is weird.&lt;/p&gt;

&lt;p&gt;I&apos;d recommend using valid files as test files here.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I had to remove confidential information before uploading the PDF and I did this by removing the bytes unnecessary for this problem in a hex editor. I left the inline image in tact but added another whitespace character between the ID operator and the start of the image stream. I checked that it opened on my end in Chrome but PDFBox returned a missing SOI indicator as a result of only skipping two of the whitespace characters. That all being said, considering the PDF specification doesn&apos;t allow for more than a single whitespace character it seems like a moot point. It would appear that the file itself is technically malformed and the check in &lt;tt&gt;DCTFilter&lt;/tt&gt; accounts for it anyway; it was just due to the outdated Twelvemonkeys dependency that that check didn&apos;t apply.&lt;/p&gt;</comment>
                            <comment id="17946960" author="mkl" created="Thu, 24 Apr 2025 07:01:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;Ah, I missed that. Seems like in that case whatever PDF software was used to generate the PDF I encountered doesn&apos;t follow this rule, since it uses 0a0d between ID and the JPEG SOI.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, not following the spec is something many PDF processors are good at.&lt;/p&gt;

&lt;p&gt;Nonetheless, checking options to repair PDFs created by such PDF processors can be of interest here, too, as PDFBox does attempt to be very lenient in that regard.&lt;/p&gt;</comment>
                            <comment id="17947137" author="lehmi" created="Thu, 24 Apr 2025 19:57:38 +0000"  >&lt;p&gt;I&apos;m experimenting with a fix which doesn&apos;t have any negative impact&lt;/p&gt;</comment>
                            <comment id="17950320" author="jira-bot" created="Thu, 8 May 2025 15:49:41 +0000"  >&lt;p&gt;Commit 1925467 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1925467&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1925467&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5992&quot; title=&quot;Inline image bug with multi-byte newline tokens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5992&quot;&gt;&lt;del&gt;PDFBOX-5992&lt;/del&gt;&lt;/a&gt;: skip either a line break (CR, LF or CRLF) or any one-byte whitespace at the beginning of an inline image&lt;/p&gt;</comment>
                            <comment id="17950321" author="lehmi" created="Thu, 8 May 2025 15:52:41 +0000"  >&lt;p&gt;I&apos;ve changed the parser, so that it skips either a line break (CR, LF or CRLF) or any one-byte whitespace. It works with the attached file and seems not to destroy the rendering of any other file like such &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; provided earlier.&lt;/p&gt;</comment>
                            <comment id="17950419" author="tilman" created="Fri, 9 May 2025 03:00:29 +0000"  >&lt;p&gt;It works!&lt;/p&gt;</comment>
                            <comment id="17950444" author="jira-bot" created="Fri, 9 May 2025 05:56:36 +0000"  >&lt;p&gt;Commit 1925470 from lehmi@apache.org in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1925470&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1925470&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5992&quot; title=&quot;Inline image bug with multi-byte newline tokens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5992&quot;&gt;&lt;del&gt;PDFBOX-5992&lt;/del&gt;&lt;/a&gt;: skip either a line break (CR, LF or CRLF) or any one-byte whitespace at the beginning of an inline image&lt;/p&gt;</comment>
                            <comment id="17950448" author="lehmi" created="Fri, 9 May 2025 06:14:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Thanks for the fast feedback.&lt;/p&gt;

&lt;p&gt;I&apos;ve applied the patch to the 3.x branch as well. 2.x has to wait as the changes doesn&apos;t work out of the box, some further investigation is needed. The file from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3046&quot; title=&quot;Specific PDF prints really (REALLY) slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3046&quot;&gt;&lt;del&gt;PDFBOX-3046&lt;/del&gt;&lt;/a&gt; is a total mess&lt;/p&gt;</comment>
                            <comment id="17955491" author="jira-bot" created="Sun, 1 Jun 2025 11:50:44 +0000"  >&lt;p&gt;Commit 1926036 from lehmi@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1926036&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1926036&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5992&quot; title=&quot;Inline image bug with multi-byte newline tokens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5992&quot;&gt;&lt;del&gt;PDFBOX-5992&lt;/del&gt;&lt;/a&gt;: skip either a line break (CR, LF or CRLF) or any one-byte whitespace at the beginning of an inline image&lt;/p&gt;</comment>
                            <comment id="17955492" author="lehmi" created="Sun, 1 Jun 2025 11:53:36 +0000"  >&lt;p&gt;I&apos;ve found the small but important difference between 2.x und 3.x and apllied my fix to the 2.x branch as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bplate&quot; class=&quot;user-hover&quot; rel=&quot;bplate&quot;&gt;bplate&lt;/a&gt; thanks for the report&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; thanks again for double checking&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13076198" name="EDGE11896203.pdf" size="43437" author="tilman" created="Tue, 22 Apr 2025 19:23:54 +0000"/>
                            <attachment id="13076200" name="broken-2.pdf" size="85385" author="bplate" created="Tue, 22 Apr 2025 20:07:44 +0000"/>
                            <attachment id="13076193" name="broken.pdf" size="85384" author="bplate" created="Tue, 22 Apr 2025 17:06:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1vhy8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>