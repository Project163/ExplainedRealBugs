<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:52:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-898] COSStreamArray NullPointerException. firstStream is null if COSArray contains no items</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-898</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;COSStreamArray checks whether array contains any items. If array is empty firstStream is not set and therefore null.&lt;/p&gt;

&lt;p&gt;    public COSStreamArray( COSArray array )&lt;br/&gt;
    {&lt;br/&gt;
        super( new COSDictionary(), null );&lt;br/&gt;
        streams = array;&lt;br/&gt;
        if( array.size() &amp;gt; 0 )&lt;/p&gt;
        {
            firstStream = (COSStream)array.getObject( 0 );
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;Most methods of COSStreamArray however use firstStream without any checks which can result in a NullPointerException. &lt;/p&gt;

&lt;p&gt;I have a PDF that when parsed, results in a NPE because COSStreamArray#getScratchFile is called while firstStream is null.&lt;/p&gt;

&lt;p&gt;One option would be to not create an instance of COSStreamArray when there are no items in the array.&lt;/p&gt;

&lt;p&gt;A patch is attached that checks whether the array is empty and only creates an instance of there are any items.&lt;/p&gt;

&lt;p&gt;The PDF was created with:&lt;/p&gt;

&lt;p&gt;LaTeX with hyperref package&lt;br/&gt;
PDF-1.2&lt;/p&gt;</description>
                <environment></environment>
        <key id="12480482">PDFBOX-898</key>
            <summary>COSStreamArray NullPointerException. firstStream is null if COSArray contains no items</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adamnichols">Adam Nichols</assignee>
                                    <reporter username="martijn_brinkers">Martijn Brinkers</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Nov 2010 11:44:07 +0000</created>
                <updated>Mon, 20 Dec 2010 09:38:24 +0000</updated>
                            <resolved>Mon, 22 Nov 2010 21:21:30 +0000</resolved>
                                    <version>1.3.1</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12934130" author="martijn_brinkers" created="Sat, 20 Nov 2010 11:47:09 +0000"  >&lt;p&gt;Patch to skip creating COSStreamArray if array is empty&lt;/p&gt;</comment>
                            <comment id="12934604" author="adamnichols" created="Mon, 22 Nov 2010 21:21:30 +0000"  >&lt;p&gt;I agree that creating an array of nothing doesn&apos;t make much sense.  Patch committed in revision 1037894.  Thanks for the contributions.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12460095" name="PDFBOX-898.patch" size="664" author="martijn_brinkers" created="Sat, 20 Nov 2010 11:47:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163562</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zkxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>205694</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>