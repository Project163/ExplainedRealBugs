<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:04:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3638] NullPointerException when setting form field value</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3638</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am not able to fill out form fields using 2.0.3 or 2.0.4.&lt;br/&gt;
When calling &lt;tt&gt;field.setValue(&quot;value&quot;)&lt;/tt&gt; I get a NullPointerException.&lt;/p&gt;

&lt;p&gt;Code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDDocument doc = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;input.pdf&quot;&lt;/span&gt;));
PDAcroForm form = doc.getDocumentCatalog().getAcroForm();
form.getField(&lt;span class=&quot;code-quote&quot;&gt;&quot;firstname&quot;&lt;/span&gt;).setValue(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;);
form.flatten();
doc.save(&lt;span class=&quot;code-quote&quot;&gt;&quot;output.pdf&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Stacktrace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.NullPointerException
	at org.apache.pdfbox.pdmodel.PDPageContentStream.getName(PDPageContentStream.java:964)
	at org.apache.pdfbox.pdmodel.PDPageContentStream.setNonStrokingColor(PDPageContentStream.java:1172)
	at org.apache.pdfbox.pdmodel.interactive.form.AppearanceGeneratorHelper.initializeAppearanceContent(AppearanceGeneratorHelper.java:211)
	at org.apache.pdfbox.pdmodel.interactive.form.AppearanceGeneratorHelper.setAppearanceValue(AppearanceGeneratorHelper.java:167)
	at org.apache.pdfbox.pdmodel.interactive.form.PDTextField.constructAppearances(PDTextField.java:263)
	at org.apache.pdfbox.pdmodel.interactive.form.PDTerminalField.applyChange(PDTerminalField.java:228)
	at org.apache.pdfbox.pdmodel.interactive.form.PDTextField.setValue(PDTextField.java:218)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The private property &lt;tt&gt;PDResources resources&lt;/tt&gt; is null.&lt;/p&gt;

&lt;p&gt;If I set &lt;tt&gt;form.setNeedAppearances(true);&lt;/tt&gt; before setting the value, the NullPointerException is gone. But then &lt;tt&gt;form.flatten()&lt;/tt&gt; does break something, all form fields are empty in the resulting pdf.&lt;/p&gt;

&lt;p&gt;Maybe this is an issue with our pdf. The same code works using version 2.0.2, but there I suffer from the black border issue (see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3454&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;3454&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;I attached the pdf and a screenshot with some infos from the PDFDebugger tool as requested.&lt;/p&gt;

&lt;p&gt;Thanks in advance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13029434">PDFBOX-3638</key>
            <summary>NullPointerException when setting form field value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilmanginzel">Tilman Ginzel</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Dec 2016 12:45:51 +0000</created>
                <updated>Sat, 25 Mar 2017 18:12:51 +0000</updated>
                            <resolved>Tue, 20 Dec 2016 21:01:00 +0000</resolved>
                                    <version>2.0.3</version>
                    <version>2.0.4</version>
                                    <fixVersion>2.0.5</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>AcroForm</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15764392" author="jira-bot" created="Tue, 20 Dec 2016 15:03:32 +0000"  >&lt;p&gt;Commit 1775301 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1775301&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1775301&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3638&quot; title=&quot;NullPointerException when setting form field value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3638&quot;&gt;&lt;del&gt;PDFBOX-3638&lt;/del&gt;&lt;/a&gt;: add resources dictionary&lt;/p&gt;</comment>
                            <comment id="15764394" author="jira-bot" created="Tue, 20 Dec 2016 15:04:01 +0000"  >&lt;p&gt;Commit 1775303 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1775303&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1775303&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3638&quot; title=&quot;NullPointerException when setting form field value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3638&quot;&gt;&lt;del&gt;PDFBOX-3638&lt;/del&gt;&lt;/a&gt;: add resources dictionary&lt;/p&gt;</comment>
                            <comment id="15764415" author="tilman" created="Tue, 20 Dec 2016 15:12:00 +0000"  >&lt;p&gt;This fixes the NPE but the result file is incorrect - it uses a colorspace cs1 that isn&apos;t defined. Might be because of the empty /MK/BG array.&lt;/p&gt;</comment>
                            <comment id="15764450" author="jira-bot" created="Tue, 20 Dec 2016 15:26:17 +0000"  >&lt;p&gt;Commit 1775307 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1775307&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1775307&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3638&quot; title=&quot;NullPointerException when setting form field value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3638&quot;&gt;&lt;del&gt;PDFBOX-3638&lt;/del&gt;&lt;/a&gt;: return null if color array hasn&apos;t 1, 3 or 4 elements&lt;/p&gt;</comment>
                            <comment id="15764451" author="jira-bot" created="Tue, 20 Dec 2016 15:26:22 +0000"  >&lt;p&gt;Commit 1775308 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1775308&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1775308&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3638&quot; title=&quot;NullPointerException when setting form field value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3638&quot;&gt;&lt;del&gt;PDFBOX-3638&lt;/del&gt;&lt;/a&gt;: return null if color array hasn&apos;t 1, 3 or 4 elements&lt;/p&gt;</comment>
                            <comment id="15764466" author="tilman" created="Tue, 20 Dec 2016 15:33:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilmanginzel&quot; class=&quot;user-hover&quot; rel=&quot;tilmanginzel&quot;&gt;tilmanginzel&lt;/a&gt; Please try a snapshot (will be available soon) and give feedback&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.5-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.5-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15764502" author="tilmanginzel" created="Tue, 20 Dec 2016 15:50:07 +0000"  >&lt;p&gt;Thanks for the fast fix! Seems to be working, but unfortunately a thin black border appears again. Is this something we should fix in our pdf?&lt;/p&gt;</comment>
                            <comment id="15764753" author="jira-bot" created="Tue, 20 Dec 2016 17:33:30 +0000"  >&lt;p&gt;Commit 1775327 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1775327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1775327&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3638&quot; title=&quot;NullPointerException when setting form field value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3638&quot;&gt;&lt;del&gt;PDFBOX-3638&lt;/del&gt;&lt;/a&gt;: draw line only if border color is set&lt;/p&gt;</comment>
                            <comment id="15764755" author="jira-bot" created="Tue, 20 Dec 2016 17:33:47 +0000"  >&lt;p&gt;Commit 1775328 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1775328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1775328&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3638&quot; title=&quot;NullPointerException when setting form field value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3638&quot;&gt;&lt;del&gt;PDFBOX-3638&lt;/del&gt;&lt;/a&gt;: draw line only if border color is set&lt;/p&gt;</comment>
                            <comment id="15764756" author="tilman" created="Tue, 20 Dec 2016 17:34:20 +0000"  >&lt;p&gt;Ignore my (deleted) comment. Your file has no entry for border color, only for background color (none). However it has an entry to have a border of size 1. The latest commit draws the border only if a color has been set in /MK/BC - please test this again.&lt;/p&gt;</comment>
                            <comment id="15765062" author="tilmanginzel" created="Tue, 20 Dec 2016 19:39:45 +0000"  >&lt;p&gt;Thank you very much, everything works as expected now! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Can be closed in my opinion.&lt;/p&gt;</comment>
                            <comment id="15773301" author="jira-bot" created="Fri, 23 Dec 2016 17:15:23 +0000"  >&lt;p&gt;Commit 1775855 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1775855&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1775855&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3638&quot; title=&quot;NullPointerException when setting form field value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3638&quot;&gt;&lt;del&gt;PDFBOX-3638&lt;/del&gt;&lt;/a&gt;: remove useless assignment&lt;/p&gt;</comment>
                            <comment id="15773302" author="jira-bot" created="Fri, 23 Dec 2016 17:15:38 +0000"  >&lt;p&gt;Commit 1775856 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1775856&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1775856&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3638&quot; title=&quot;NullPointerException when setting form field value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3638&quot;&gt;&lt;del&gt;PDFBOX-3638&lt;/del&gt;&lt;/a&gt;: remove useless assignment&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13045797">PDFBOX-3701</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12844064" name="input.pdf" size="102573" author="tilmanginzel" created="Tue, 20 Dec 2016 12:46:15 +0000"/>
                            <attachment id="12844065" name="pdfdebugger.png" size="85566" author="tilmanginzel" created="Tue, 20 Dec 2016 12:46:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37tl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>