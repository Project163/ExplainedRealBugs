<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:13:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5601] Barcode corrupted when printing document</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5601</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;When printing the attached document, the barcode on the left side is corrupted.  Please see preview of desired versus actual.&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13058018/13058018_preview.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;This does not occur when printing with other applications&lt;/li&gt;
	&lt;li&gt;This issue also occurs on the latest 3.0 alpha version&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java -jar pdfbox-app-2.0.27.jar PrintPDF 234457694-edit.pdf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13535876">PDFBOX-5601</key>
            <summary>Barcode corrupted when printing document</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tresf">Tres Finocchiaro</reporter>
                        <labels>
                            <label>print</label>
                            <label>printing</label>
                    </labels>
                <created>Thu, 11 May 2023 21:04:02 +0000</created>
                <updated>Sat, 1 Jul 2023 17:22:23 +0000</updated>
                            <resolved>Sat, 20 May 2023 14:16:27 +0000</resolved>
                                    <version>2.0.27</version>
                    <version>2.0.28</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.29</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17722000" author="tilman" created="Fri, 12 May 2023 03:41:48 +0000"  >&lt;p&gt;I can reproduce this. The barcode is also in terrible quality, it is a low quality JPEG with artifacts.&lt;br/&gt;
&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13058025/13058025_jpeg.jpg&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17722001" author="tresf" created="Fri, 12 May 2023 03:57:02 +0000"  >&lt;p&gt;I agree it&apos;s bad quality, but I believe the artifacts are worse with certain printer drivers such as XPS Document Writer or Microsoft Print to PDF.  I&apos;d also like to mention that the issue seems to be specific to Windows; testing on MacOS, it looks OK.&lt;/p&gt;</comment>
                            <comment id="17722246" author="tilman" created="Fri, 12 May 2023 17:14:11 +0000"  >&lt;p&gt;Re my deleted comment: it was a code 128 barcode which has more widths than 2.&lt;/p&gt;

&lt;p&gt;The flipkart image is ARGB so there&apos;s transparency, which has resulted in weird behavior in the past. I also remember one printing problem that had a rotated barcode vanishing completely.&lt;br/&gt;
&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8191800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8191800&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It&apos;s likely java or windows, because our code is the same.&lt;/p&gt;

&lt;p&gt;I failed to reproduce the effect for now but I&apos;ll try some different strategies.&lt;/p&gt;</comment>
                            <comment id="17722322" author="tilman" created="Sat, 13 May 2023 04:19:45 +0000"  >&lt;p&gt;Update: it&apos;s not related to the flipcart image, I was able to reproduce the effect with only the rotated barcode. With this, I was able to create a non PDFBox code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PDFBox5601BadPrint &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Printable
{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; PrinterException
    {
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFBox5601BadPrint().doStuff();
    }

    PDFBox5601BadPrint()
    {
    }

    void doStuff() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; PrinterException
    {
        PrinterJob job = PrinterJob.getPrinterJob();
        job.setPrintService(PrintServiceLookup.lookupDefaultPrintService());
        job.setPrintable(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (job.printDialog())
        {
            job.print();
        }
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; print(Graphics graphics, PageFormat pageFormat, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; index)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (index == 0)
        {
            Graphics2D g2d = (Graphics2D) graphics;
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
            {
                BufferedImage bim = ImageIO.read(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URL(&lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/secure/attachment/13058029/PDFBOX-5601-original-barcode.png&quot;&lt;/span&gt;).openStream());
&lt;/span&gt;                g2d.drawImage(bim, AffineTransform.getScaleInstance(2, 2), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
                g2d.transform(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AffineTransform(1, 0, 0, -1, 0, 100));
                g2d.scale(0.01, 0.001);
                AffineTransform at = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AffineTransform(0,-1410,277.5,0,221.25,3036.25);
                g2d.drawImage(bim, at, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);            
            }
            &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException ex)
            {
                ex.printStackTrace();
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(-1);
            }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Printable.PAGE_EXISTS;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Printable.NO_SUCH_PAGE;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please try this code on a windows and a non windows system to see if there are any differences.&lt;/p&gt;</comment>
                            <comment id="17722358" author="jira-bot" created="Sat, 13 May 2023 12:56:37 +0000"  >&lt;p&gt;Commit 1909792 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1909792&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1909792&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5601&quot; title=&quot;Barcode corrupted when printing document&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5601&quot;&gt;&lt;del&gt;PDFBOX-5601&lt;/del&gt;&lt;/a&gt;: avoid terrible output on printer unless TYPE_4BYTE_ABGR&lt;/p&gt;</comment>
                            <comment id="17722359" author="jira-bot" created="Sat, 13 May 2023 12:56:40 +0000"  >&lt;p&gt;Commit 1909793 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1909793&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1909793&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5601&quot; title=&quot;Barcode corrupted when printing document&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5601&quot;&gt;&lt;del&gt;PDFBOX-5601&lt;/del&gt;&lt;/a&gt;: avoid terrible output on printer unless TYPE_4BYTE_ABGR&lt;/p&gt;</comment>
                            <comment id="17722363" author="tilman" created="Sat, 13 May 2023 13:10:46 +0000"  >&lt;p&gt;I found out that by copying the BufferedImage into a TYPE_4BYTE_ABGR image (but not TYPE_INT_ARGB) then it works fine. (Sadly this workaround does not solve &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4010&quot; title=&quot;A (rotated) barcode is missing from a pdf when printed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4010&quot;&gt;&lt;del&gt;PDFBOX-4010&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tresf&quot; class=&quot;user-hover&quot; rel=&quot;tresf&quot;&gt;tresf&lt;/a&gt; please test the new version whether it works for you, and also test the code I posted earlier, on a non windows system because I want to report the bug to Oracle.&lt;/p&gt;

&lt;p&gt;I&apos;m wondering if this change ruins other of your printings that you reported here, as this introduces transparency where there were not. (However your file here already has transparency elsewhere with the &quot;flipcart&quot; image)&lt;/p&gt;</comment>
                            <comment id="17722391" author="tresf" created="Sat, 13 May 2023 18:42:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; thanks kindly for this patch.  I agree, it seems to fix the issue on Windows, however it seems to introduce a new issue on MacOS where all images for this PDF are now blank.  The newly introduced issue does not appear to affect Ubuntu 22.04.&lt;/p&gt;

&lt;p&gt;My steps for testing:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
git clone https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/apache/pdfbox
&lt;/span&gt;cd pdfbox
git checkout 2.0
mvn clean install
java -jar app/target/pdfbox-app-2.0.29-SNAPSHOT.jar PrintPDF ~/Downloads/234457694-edit.pdf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13058069/13058069_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17722392" author="tilman" created="Sat, 13 May 2023 18:47:45 +0000"  >&lt;p&gt;I can&apos;t help much here, because I don&apos;t own a mac. Please play with this code to find out if there is something that works for printers on all systems.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PDFBox5601BadPrint &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Printable
{

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; PrinterException
    {
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFBox5601BadPrint().doStuff();
    }

    PDFBox5601BadPrint()
    {
    }

    void doStuff() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; PrinterException
    {
        PrinterJob job = PrinterJob.getPrinterJob();
        job.setPrintService(PrintServiceLookup.lookupDefaultPrintService());
        job.setPrintable(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (job.printDialog())
        {
            job.print();
        }
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; print(Graphics graphics, PageFormat pageFormat, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; index)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (index == 0)
        {
            Graphics2D g2d = (Graphics2D) graphics;
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
            {
                &lt;span class=&quot;code-comment&quot;&gt;// TYPE_INT_ARGB with hints bad
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// TYPE_INT_ARGB without hints bad
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// TYPE_4BYTE_ABGR with hints good but blurry
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// TYPE_4BYTE_ABGR without rendering hints all good
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// TYPE_4BYTE_ABGR with VALUE_RENDER_QUALITY blurry
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// TYPE_4BYTE_ABGR with VALUE_INTERPOLATION_BICUBIC blurry
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//                g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//                g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
&lt;/span&gt;                BufferedImage bim = ImageIO.read(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URL(&lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/secure/attachment/13058029/PDFBOX-5601-original-barcode.png&quot;&lt;/span&gt;).openStream());
&lt;/span&gt;                BufferedImage bim2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedImage(bim.getWidth(), bim.getHeight(), BufferedImage.TYPE_4BYTE_ABGR);
                Graphics g = bim2.getGraphics();
                g.drawImage(bim, 0, 0, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
                g.dispose();
                bim = bim2;
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bim);
                g2d.drawImage(bim, AffineTransform.getScaleInstance(2, 2), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
                g2d.transform(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AffineTransform(1, 0, 0, -1, 0, 100));
                g2d.scale(0.01, 0.001);
                AffineTransform at = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AffineTransform(0, -1410, 277.5, 0, 221.25, 3036.25);
                g2d.drawImage(bim, at, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
            }
            &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException ex)
            {
                ex.printStackTrace();
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(-1);
            }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Printable.PAGE_EXISTS;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Printable.NO_SUCH_PAGE;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17722408" author="tresf" created="Sat, 13 May 2023 19:50:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; would it make more sense to make the &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5601&quot; title=&quot;Barcode corrupted when printing document&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5601&quot;&gt;&lt;del&gt;PDFBOX-5601&lt;/del&gt;&lt;/a&gt; patch conditional?&#160; Quoting:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; I&apos;d also like to mention that the issue seems to be specific to Windows; testing on MacOS, it looks OK.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Clarification.... since posting that, I did test on Ubuntu 22.04, and the issue is present there as well as Windows.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; I&apos;m wondering if this change ruins other of your printings that you reported here, as this introduces transparency where there were not.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is a very good point.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13058077/13058077_screenshot-2.png&quot; height=&quot;385&quot; width=&quot;378&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17722414" author="tresf" created="Sat, 13 May 2023 20:48:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;&amp;gt; I can&apos;t help much here, because I don&apos;t own a mac. Please play with this code to find out if there is something that works for printers on all systems.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;For starters, I&apos;m working from `pdfbox` just to see if there was any observable differences...&#160; I added the following debug line to the code...&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (deviceType == GraphicsDevice.TYPE_PRINTER &amp;amp;&amp;amp;
image.getType() != BufferedImage.TYPE_4BYTE_ABGR)
{
   LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Type: &quot;&lt;/span&gt; + image.getType()); &lt;span class=&quot;code-comment&quot;&gt;// ### DEBUG LINE ADDED HERE ###&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;m not sure if this is helpful at all, but at a glance is odd...&#160;&lt;/p&gt;

&lt;p&gt;Mac:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Windows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Linux:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2
INFO: Type: 1
INFO: Type: 1
INFO: Type: 1
INFO: Type: 2 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17722431" author="tilman" created="Sun, 14 May 2023 02:21:25 +0000"  >&lt;p&gt;One of the images should be &quot;2&quot; because that is the flipcart image which has transparency. This is created in PDImageXObject.scaleImage() .&lt;/p&gt;</comment>
                            <comment id="17722433" author="tilman" created="Sun, 14 May 2023 03:29:27 +0000"  >&lt;p&gt;Re making the patch conditional, sure, I can do that. So it should be on Windows and Ubuntu. What do you get for Ubuntu when you call &lt;tt&gt;System.getProperty(&quot;os.name&quot;)&lt;/tt&gt; ?&lt;/p&gt;</comment>
                            <comment id="17722479" author="lehmi" created="Sun, 14 May 2023 13:35:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;What do you get for Ubuntu when you call System.getProperty(&quot;os.name&quot;) ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We already have some code doing exactly what you are looking for: &lt;tt&gt;org.apache.fontbox.util.autodetect.FontFileFinder.determineDirFinder()&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17722480" author="tilman" created="Sun, 14 May 2023 13:42:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; thanks, but that one assumes linux is &quot;the rest&quot; and doesn&apos;t specifically ask for Ubuntu. I&apos;d like to include the change for windows and ubuntu specifically, until more people complain.&lt;/p&gt;</comment>
                            <comment id="17722491" author="lehmi" created="Sun, 14 May 2023 15:14:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; you are right, sorry for missing that detail&lt;/p&gt;</comment>
                            <comment id="17722655" author="lehmi" created="Mon, 15 May 2023 05:49:27 +0000"  >&lt;p&gt;On Fedora &quot;os.name&quot; is set to &quot;Linux&quot; and I expect other Linux distros to return the same value. It doesn&apos;t makes sense to add a specific information about the used distribution to that value as it is just a &quot;flavour&quot; of Linux but not different operating systems&lt;/p&gt;</comment>
                            <comment id="17722660" author="jira-bot" created="Mon, 15 May 2023 06:05:48 +0000"  >&lt;p&gt;Commit 1909825 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1909825&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1909825&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5601&quot; title=&quot;Barcode corrupted when printing document&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5601&quot;&gt;&lt;del&gt;PDFBOX-5601&lt;/del&gt;&lt;/a&gt;: limit workaround to Windows and Linux&lt;/p&gt;</comment>
                            <comment id="17722662" author="jira-bot" created="Mon, 15 May 2023 06:05:52 +0000"  >&lt;p&gt;Commit 1909826 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1909826&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1909826&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5601&quot; title=&quot;Barcode corrupted when printing document&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5601&quot;&gt;&lt;del&gt;PDFBOX-5601&lt;/del&gt;&lt;/a&gt;: limit workaround to Windows and Linux&lt;/p&gt;</comment>
                            <comment id="17722787" author="tresf" created="Mon, 15 May 2023 13:53:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;&amp;gt; &#160;but that one assumes linux is &quot;the rest&quot; and doesn&apos;t specifically ask for Ubuntu. I&apos;d like to include the change for windows and ubuntu specifically, until more people complain.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;d be happy to replay these tests on other platforms to clarify scope.&lt;/p&gt;</comment>
                            <comment id="17722879" author="tilman" created="Mon, 15 May 2023 17:28:37 +0000"  >&lt;p&gt;The other specifically supported platform is AS/400 &#128514;&lt;/p&gt;</comment>
                            <comment id="17722972" author="tresf" created="Tue, 16 May 2023 02:48:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;&amp;gt; The other specifically supported platform is AS/400 &#128514;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Out of curiosity, I registered for PUB400.com.&#160; It&apos;s running Java 8, but the default user permissions don&apos;t allow creation of an output queue. &#129335;&#8205;&#9794;&#65039;&#128527;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17723009" author="tresf" created="Tue, 16 May 2023 06:49:02 +0000"  >&lt;p&gt;So far, the only OS that&apos;s not OK with this patch is MacOS on ARM64 (M1/Apple Silicon)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;OS&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Bug Exists&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;OK with patch&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Ubuntu 22.04&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Yes&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Solaris 11 (Java 8)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;No&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Fedora 34&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Yes&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;MacOS 13 (ARM64)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;No&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;No&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;MacOS 11 (Intel)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;No&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Windows 11&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Yes&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;I tried HaikuOS as well, but it seems to be missing Java bindings for its non-CUPS printing subsystem.&lt;/p&gt;

&lt;p&gt;Solaris didn&apos;t exhibit the bug, but didn&apos;t seem to be affected by the patch either.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17723010" author="tresf" created="Tue, 16 May 2023 06:55:55 +0000"  >&lt;p&gt;Added Intel Mac results, as they differ from my M1 testing.&lt;/p&gt;</comment>
                            <comment id="17724485" author="tilman" created="Sat, 20 May 2023 04:46:02 +0000"  >&lt;p&gt;Are we done here? So the patch doesn&apos;t work on ARM mac, but the patch isn&apos;t active there anyway. (The latest change makes it active only on Linux and Windows)&lt;br/&gt;
If you run the latest snapshot on the ARM mac, does the flipcart image appear? I&apos;m asking because that one is ARGB.&lt;/p&gt;</comment>
                            <comment id="17724505" author="jira-bot" created="Sat, 20 May 2023 08:17:19 +0000"  >&lt;p&gt;Commit 1909946 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1909946&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1909946&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5601&quot; title=&quot;Barcode corrupted when printing document&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5601&quot;&gt;&lt;del&gt;PDFBOX-5601&lt;/del&gt;&lt;/a&gt;: improve comment&lt;/p&gt;</comment>
                            <comment id="17724506" author="jira-bot" created="Sat, 20 May 2023 08:17:23 +0000"  >&lt;p&gt;Commit 1909947 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1909947&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1909947&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5601&quot; title=&quot;Barcode corrupted when printing document&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5601&quot;&gt;&lt;del&gt;PDFBOX-5601&lt;/del&gt;&lt;/a&gt;: improve comment&lt;/p&gt;</comment>
                            <comment id="17724533" author="tresf" created="Sat, 20 May 2023 14:04:28 +0000"  >&lt;p&gt;I&apos;m fine with the patch in its current form. &#160;&lt;/p&gt;

&lt;p&gt;I felt obligated to provide a larger variety of testing results so that Apache could determine scope.&#160; The only non-Linux Unix I was able to test was Solaris, which was fine WITH and was fine WITHOUT the patch, so the existing code is fine.&lt;/p&gt;

&lt;p&gt;I&apos;ve tested on ARM64 Linux and ARM64 Windows, but they match that of their Intel counterparts, so it&apos;s not architecturally specific... except on Mac.&#160; If pdfbox is OK with the patch, I am too.&#160; The user that reported this is already using the snapshot from the 2.0 branch as a workaround.&lt;/p&gt;</comment>
                            <comment id="17724535" author="tilman" created="Sat, 20 May 2023 14:17:13 +0000"  >&lt;p&gt;Thanks for the feedback and the report!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13118240">PDFBOX-4010</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13058019" name="234457694-edit.pdf" size="30820" author="tresf" created="Thu, 11 May 2023 20:58:30 +0000"/>
                            <attachment id="13058057" name="PDFBOX-5601-badbarcodeprint-reduced.pdf" size="6890" author="tilman" created="Sat, 13 May 2023 05:18:19 +0000"/>
                            <attachment id="13058029" name="PDFBOX-5601-original-barcode.png" size="246" author="tilman" created="Fri, 12 May 2023 06:44:21 +0000"/>
                            <attachment id="13058025" name="jpeg.jpg" size="2510" author="tilman" created="Fri, 12 May 2023 03:41:27 +0000"/>
                            <attachment id="13058018" name="preview.png" size="80652" author="tresf" created="Thu, 11 May 2023 21:02:18 +0000"/>
                            <attachment id="13058069" name="screenshot-1.png" size="185257" author="tresf" created="Sat, 13 May 2023 18:40:03 +0000"/>
                            <attachment id="13058077" name="screenshot-2.png" size="295278" author="tresf" created="Sat, 13 May 2023 19:39:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1hubc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>