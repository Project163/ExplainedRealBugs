<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:54:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1694] Bug in org.apache.pdfbox.io.Ascii85InputStream</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1694</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Method &apos;org.apache.pdfbox.io.Ascii85InputStream.read()&apos; has bug when reading final set of char that are not modulo-4.&lt;br/&gt;
Test file=&quot;www.mzweb.com.br/grupobimbo/web/arquivos/Bimbo_Historia_20070409_Esp.pdf&quot;. &lt;br/&gt;
On page#0 there is a dictionary &quot;323 0 obj &amp;lt;&amp;lt; /Length 1492 /Filter &lt;span class=&quot;error&quot;&gt;&amp;#91;/Ascii85Decode /FlateDecode&amp;#93;&lt;/span&gt;&amp;gt;&amp;gt;&quot;&lt;br/&gt;
Last set of bytes to decode is &quot;%f&quot; or  0x25, 0x66&lt;br/&gt;
Ascii85InputStream pads this to &quot;%f~!!&quot; and correctly generates the final byte 0x0f.&lt;br/&gt;
Including the &apos;~&apos; end-of-data char in the padding is a major bug.&lt;br/&gt;
If the final padding were &quot;%f!!!&quot;, the final byte decoded would be 0x0e (which is wrong).&lt;br/&gt;
The correct padding is the &apos;u&apos; char, or &quot;%fuuu&quot; (See &lt;a href=&quot;http://en.wikipedia.org/wiki/Ascii85&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://en.wikipedia.org/wiki/Ascii85&lt;/a&gt;)&lt;br/&gt;
This is a quick fix. &lt;br/&gt;
The PDF files for corporate website &quot;Grupo Bimbo&quot; include lots of examples using Ascii85Decode/&lt;/p&gt;</description>
                <environment>Any</environment>
        <key id="12663545">PDFBOX-1694</key>
            <summary>Bug in org.apache.pdfbox.io.Ascii85InputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="peterwcostello">Peter Costello</reporter>
                        <labels>
                            <label>Ascii85Decode</label>
                    </labels>
                <created>Wed, 14 Aug 2013 00:22:18 +0000</created>
                <updated>Sat, 30 Nov 2013 17:02:12 +0000</updated>
                            <resolved>Sun, 25 Aug 2013 12:54:33 +0000</resolved>
                                    <version>1.7.1</version>
                                    <fixVersion>1.8.3</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="1800">0.5h</timeoriginalestimate>
                            <timeestimate seconds="1800">0.5h</timeestimate>
                                        <comments>
                            <comment id="13740781" author="lehmi" created="Thu, 15 Aug 2013 07:32:15 +0000"  >&lt;p&gt;I understand your point and totally agree that the current implementation isn&apos;t correct. But I can&apos;t find any pdf having an issue with it. Even your sample pdf doesn&apos;t throw any exception or anything similar. Can you confirm that?&lt;/p&gt;</comment>
                            <comment id="13741085" author="petercostello" created="Thu, 15 Aug 2013 15:45:52 +0000"  >&lt;p&gt;The example I sent decodes properly. The point is that the encoding &amp;amp;&lt;br/&gt;
decoding should be symmetrical. The decoding adds padding bytes &quot;~!!&quot; or&lt;br/&gt;
93*85^n where n is extra number of bytes.  The spec is to add&lt;br/&gt;
84*85^n+84*85^(n-1)+84*85^(n-2).  Whether or not the current decoding works&lt;br/&gt;
would need to be verified by writing a test program that encodes and then&lt;br/&gt;
decodes all 2^32 possible data values. My contention is that it would be&lt;br/&gt;
simpler to just fix the code rather than waiting for some obscure bug&lt;br/&gt;
report that is difficult to debug. Your call.&lt;/p&gt;


&lt;p&gt;On Thu, Aug 15, 2013 at 12:32 AM, Andreas Lehmk&#252;hler (JIRA) &amp;lt;jira@apache.org&lt;/p&gt;
</comment>
                            <comment id="13742213" author="tilman" created="Fri, 16 Aug 2013 13:31:35 +0000"  >&lt;p&gt;I wrote a test, and it failed for a different reason, see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1696&quot; title=&quot;Bug in org.apache.pdfbox.io.Ascii85OutputStream  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1696&quot;&gt;&lt;del&gt;PDFBOX-1696&lt;/del&gt;&lt;/a&gt;. I&apos;ll put the test here as soon as I know how long it takes to complete.&lt;/p&gt;</comment>
                            <comment id="13742913" author="tilman" created="Sat, 17 Aug 2013 12:43:24 +0000"  >&lt;p&gt;Here&apos;s the test, to be put into src\test\java\org\apache\pdfbox\io\TestIOUtils.java. &lt;/p&gt;

&lt;p&gt;After correcting &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1696&quot; title=&quot;Bug in org.apache.pdfbox.io.Ascii85OutputStream  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1696&quot;&gt;&lt;del&gt;PDFBOX-1696&lt;/del&gt;&lt;/a&gt;, the test never completed, or crashed because of gc problems. A run with the profiler showed that there were tons of java.lang.ref.Finalizer objects, and ASCII85OutputStream objects. Deleting finalize() in ASCII85OutputStream.java solved the problem. I see no sense in having that function: per java documentation, it isn&apos;t known WHEN it will be called, so the flush() that is called there might happening much too late if a user forgot to call close(). The test took 25 minutes on my 4 year old W7 system. So it isn&apos;t for normal builds, only to test changes made in the two modules.&lt;/p&gt;</comment>
                            <comment id="13742914" author="tilman" created="Sat, 17 Aug 2013 12:45:44 +0000"  >&lt;p&gt;test of ascii85 modules&lt;/p&gt;</comment>
                            <comment id="13749623" author="lehmi" created="Sun, 25 Aug 2013 12:54:33 +0000"  >&lt;p&gt;I fixed the padding issue in revisions 1517273 and 1517281.&lt;/p&gt;

&lt;p&gt;Furthermore I added some some optimizations based on Tilmans proposal (see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1696&quot; title=&quot;Bug in org.apache.pdfbox.io.Ascii85OutputStream  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1696&quot;&gt;&lt;del&gt;PDFBOX-1696&lt;/del&gt;&lt;/a&gt;):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;removed finalize()&lt;/li&gt;
	&lt;li&gt;removed write(byte[] b,int off, int sz)&lt;/li&gt;
	&lt;li&gt;added a flush() call in close()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I didn&apos;t add the test case as it takes too much time to finish (14 minutes on my i7 3770K)&lt;/p&gt;

&lt;p&gt;Thanks for the pointer (Peter) and the contribution (Tilman)!&lt;/p&gt;</comment>
                            <comment id="13824847" author="lehmi" created="Sun, 17 Nov 2013 14:33:22 +0000"  >&lt;p&gt;Merged into 1.8-branch in revision 1542735&lt;/p&gt;</comment>
                            <comment id="13835812" author="lehmi" created="Sat, 30 Nov 2013 17:02:12 +0000"  >&lt;p&gt;Closed after releasing 1.8.3&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12664065">PDFBOX-1696</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12598591" name="test.java" size="3768" author="tilman" created="Sat, 17 Aug 2013 12:45:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1n8vb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>