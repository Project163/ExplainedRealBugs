<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:05:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3747] CmapSubtable#getCharCodes provides values in random order</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3747</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Some fonts may have an ambigious glyphId to character code mapping. CmapSubtable#getCharCodes provides all of them, but in a random order. We should sort the list to provide a consistent order.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13062082">PDFBOX-3747</key>
            <summary>CmapSubtable#getCharCodes provides values in random order</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="lehmi">Andreas Lehmk&#252;hler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Apr 2017 12:16:31 +0000</created>
                <updated>Mon, 15 May 2017 20:28:11 +0000</updated>
                            <resolved>Thu, 6 Apr 2017 16:56:49 +0000</resolved>
                                    <version>2.0.5</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.6</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15959273" author="jira-bot" created="Thu, 6 Apr 2017 16:50:40 +0000"  >&lt;p&gt;Commit 1790426 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1790426&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1790426&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3747&quot; title=&quot;CmapSubtable#getCharCodes provides values in random order&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3747&quot;&gt;&lt;del&gt;PDFBOX-3747&lt;/del&gt;&lt;/a&gt;: sort code mappings to provide a reliable order&lt;/p&gt;</comment>
                            <comment id="15959277" author="jira-bot" created="Thu, 6 Apr 2017 16:52:03 +0000"  >&lt;p&gt;Commit 1790427 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1790427&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1790427&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3747&quot; title=&quot;CmapSubtable#getCharCodes provides values in random order&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3747&quot;&gt;&lt;del&gt;PDFBOX-3747&lt;/del&gt;&lt;/a&gt;: sort code mappings to provide a reliable order&lt;/p&gt;</comment>
                            <comment id="15959290" author="lehmi" created="Thu, 6 Apr 2017 16:56:49 +0000"  >&lt;p&gt;I got different orderings on linux and windows. The latter was the issue and ended in a more or less wrong toUnicode mapping (hyphen was mapped to unicode 0x2010 and not to 0x002d)&lt;/p&gt;

&lt;p&gt;The mapping is sorted in ascending order now, so that pdfbox provides a reliable order.&lt;/p&gt;</comment>
                            <comment id="15959768" author="tilman" created="Thu, 6 Apr 2017 21:17:47 +0000"  >&lt;p&gt;Did this result in a bad text extraction? If yes, can you attach a file? I could create a reduced version for tests.&lt;/p&gt;</comment>
                            <comment id="15960297" author="lehmi" created="Fri, 7 Apr 2017 05:38:23 +0000"  >&lt;p&gt;The origin issue is about creating pdfs using pdfbox. But yes, if you try to extract text from such pdfs you get false results. I&apos;ve simply used the HelloWorldTTF example with calibri.ttf on windows 7. I&apos;m going to attach a sample when I&apos;m back in office&lt;/p&gt;</comment>
                            <comment id="15960666" author="lehmi" created="Fri, 7 Apr 2017 12:05:14 +0000"  >&lt;p&gt;I&apos;ve attached a sample pdf as requested. It was created on windows 7 using calibri.ttf as font. The ToUnicode mapping includes a wrong mapping for the hyphen character:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;0372&amp;gt; &amp;lt;0372&amp;gt; &amp;lt;2010&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Correct is the following mapping&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;0372&amp;gt; &amp;lt;0372&amp;gt; &amp;lt;002D&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15961014" author="jira-bot" created="Fri, 7 Apr 2017 16:00:04 +0000"  >&lt;p&gt;Commit 1790573 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1790573&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1790573&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3747&quot; title=&quot;CmapSubtable#getCharCodes provides values in random order&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3747&quot;&gt;&lt;del&gt;PDFBOX-3747&lt;/del&gt;&lt;/a&gt;: added test, cleaned existing code, use junit 4 style&lt;/p&gt;</comment>
                            <comment id="15961015" author="jira-bot" created="Fri, 7 Apr 2017 16:00:42 +0000"  >&lt;p&gt;Commit 1790574 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1790574&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1790574&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3747&quot; title=&quot;CmapSubtable#getCharCodes provides values in random order&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3747&quot;&gt;&lt;del&gt;PDFBOX-3747&lt;/del&gt;&lt;/a&gt;: added test, cleaned existing code, use junit 4 style, use JDK7&lt;/p&gt;</comment>
                            <comment id="15961019" author="tilman" created="Fri, 7 Apr 2017 16:02:01 +0000"  >&lt;p&gt;Thanks, I added a small test for windows, to prevent that in the future, or in a fork, somebody would &quot;optimize&quot; and remove the sort.&lt;/p&gt;</comment>
                            <comment id="15961023" author="lehmi" created="Fri, 7 Apr 2017 16:04:18 +0000"  >&lt;p&gt;Good idea, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12862473" name="PDFBOX-3747.pdf" size="10388" author="lehmi" created="Fri, 7 Apr 2017 12:02:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3daon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>