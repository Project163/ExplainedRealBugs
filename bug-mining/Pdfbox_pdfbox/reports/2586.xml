<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:11:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5276] Encryption on Split documents</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5276</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Splitting a two page document into two separate documents via org.apache.pdfbox.multipdf.Splitter&lt;br/&gt;
Then using the List&amp;lt;PDDocument&amp;gt; returned to encrypt the first document causes weird side effects on the second document in the list. It will still open with the owner password of the first document (Even though it shouldn&apos;t be encrypted), but it is unreadable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13399329">PDFBOX-5276</key>
            <summary>Encryption on Split documents</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="ctidrv">Dustin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Sep 2021 21:16:22 +0000</created>
                <updated>Fri, 17 Dec 2021 06:50:05 +0000</updated>
                            <resolved>Sun, 5 Sep 2021 08:17:03 +0000</resolved>
                                    <version>2.0.24</version>
                                    <fixVersion>2.0.25</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Documentation</component>
                    <component>Utilities</component>
                    <component>Writing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17409710" author="ctidrv" created="Fri, 3 Sep 2021 21:18:35 +0000"  >&lt;p&gt;Owner Password to the uploaded file is &quot;pass&quot;.&lt;/p&gt;

&lt;p&gt;The issue appears to not care about the document in any way that is fed to the system, but always outputs a strange second document if the first is encrypted.&lt;/p&gt;</comment>
                            <comment id="17409799" author="tilman" created="Sat, 4 Sep 2021 04:35:17 +0000"  >&lt;p&gt;PDDocument.save() warns about this, but people (if they read this at all) usually won&apos;t understand that the split documents still have common resources. Not sure what we should do: fail if the document is encrypted (forcing the user to disable encryption first), or quietly remove the encryption?&lt;/p&gt;</comment>
                            <comment id="17409971" author="ctidrv" created="Sat, 4 Sep 2021 13:37:33 +0000"  >&lt;p&gt;I didn&#8217;t realize there was a warning. It does make sense that some resources are shared. So if that&#8217;s the case what would you recommend to handle solving the issue on my end?&lt;/p&gt;</comment>
                            <comment id="17409976" author="tilman" created="Sat, 4 Sep 2021 13:42:34 +0000"  >&lt;p&gt;The warning is only in the javadoc. Try calling PDDocument.setAllSecurityToBeRemoved(true) before saving.&lt;/p&gt;</comment>
                            <comment id="17409979" author="ctidrv" created="Sat, 4 Sep 2021 14:07:41 +0000"  >&lt;p&gt;I had a feeling that was the case. I did some testing with that, does it have to be done before saving? Wouldn&#8217;t that cause it to save unencrypted? I have tested calling that before the second document is saved to no avail, also tested calling it directly after the first one is saved.&lt;/p&gt;</comment>
                            <comment id="17409980" author="tilman" created="Sat, 4 Sep 2021 14:18:19 +0000"  >&lt;p&gt;I haven&apos;t tested it myself but I just looked into the code, the new document doesn&apos;t get the encryption info at all?!&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; PDDocument createNewDocument() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
    {
        PDDocument document = memoryUsageSetting == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ?
                                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDDocument() : &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDDocument(memoryUsageSetting);
        document.getDocument().setVersion(getSourceDocument().getVersion());
        document.setDocumentInformation(getSourceDocument().getDocumentInformation());
        document.getDocumentCatalog().setViewerPreferences(
                getSourceDocument().getDocumentCatalog().getViewerPreferences());
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; document;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Did you call save() on the original document?&lt;/p&gt;</comment>
                            <comment id="17410060" author="ctidrv" created="Sat, 4 Sep 2021 22:56:34 +0000"  >&lt;p&gt;I am on my cellphone, but what I do is load a document via input stream, then I split into multiple documents and based on the return from text stripper I will encrypt and save. Save is never called on the original document before splitting.&lt;/p&gt;</comment>
                            <comment id="17410061" author="ctidrv" created="Sat, 4 Sep 2021 22:57:35 +0000"  >&lt;p&gt;Sorry, to answer your other question no the second document and the original copy of the first doesn&#8217;t return that it is encrypted. &lt;/p&gt;</comment>
                            <comment id="17410088" author="tilman" created="Sun, 5 Sep 2021 03:22:52 +0000"  >&lt;p&gt;If you encrypt and save one page, the resources used by the other pages will be encrypted as well. And the two pages do have common resources.&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13033049/13033049_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;br/&gt;
So the best would be to save all files unencrypted, then reload and encrypt the ones you want to.&lt;/p&gt;</comment>
                            <comment id="17410090" author="ctidrv" created="Sun, 5 Sep 2021 03:36:15 +0000"  >&lt;p&gt;If that&#8217;s the only option. I would really like to avoid writing to disk unencrypted especially the volume I will be handling. I have a few crazy ideas I might try first. Thanks for the explanation, kind of sucks how that happens.&lt;/p&gt;</comment>
                            <comment id="17410118" author="jira-bot" created="Sun, 5 Sep 2021 08:12:52 +0000"  >&lt;p&gt;Commit 1892918 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892918&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892918&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5276&quot; title=&quot;Encryption on Split documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5276&quot;&gt;&lt;del&gt;PDFBOX-5276&lt;/del&gt;&lt;/a&gt;: improve javadoc: result documents should not be saved with encryption&lt;/p&gt;</comment>
                            <comment id="17410119" author="jira-bot" created="Sun, 5 Sep 2021 08:12:55 +0000"  >&lt;p&gt;Commit 1892919 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892919&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892919&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5276&quot; title=&quot;Encryption on Split documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5276&quot;&gt;&lt;del&gt;PDFBOX-5276&lt;/del&gt;&lt;/a&gt;: improve javadoc: result documents should not be saved with encryption&lt;/p&gt;</comment>
                            <comment id="17410120" author="tilman" created="Sun, 5 Sep 2021 08:16:54 +0000"  >&lt;p&gt;If you have enough memory, then you can save to a ByteArrayOutputStream and reload from a byte array.&lt;br/&gt;
I have improved the javadoc, maybe this will help a user in the future.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13033023" name="ShouldNotBeEncrypted.pdf" size="472796" author="ctidrv" created="Fri, 3 Sep 2021 21:17:32 +0000"/>
                            <attachment id="13033049" name="screenshot-1.png" size="72761" author="tilman" created="Sun, 5 Sep 2021 03:21:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0uluo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>