<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:01:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2949] Rendering to ARGB brings black background</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2949</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;As reported by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jon_wu&quot; class=&quot;user-hover&quot; rel=&quot;jon_wu&quot;&gt;jon_wu&lt;/a&gt; in the user mailing list... instead of the somewhat long thread, here&apos;s code I tried:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (PDDocument document = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(dir, &lt;span class=&quot;code-quote&quot;&gt;&quot;dora.pdf&quot;&lt;/span&gt;)))
        {
            PDFRenderer pdfRenderer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFRenderer(document);

            BufferedImage bim = pdfRenderer.renderImageWithDPI(0, 300, ImageType.RGB);
            ImageIO.write(bim, &lt;span class=&quot;code-quote&quot;&gt;&quot;png&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(dir, &lt;span class=&quot;code-quote&quot;&gt;&quot;dorargb.png&quot;&lt;/span&gt;));
            bim = pdfRenderer.renderImageWithDPI(0, 300, ImageType.ARGB);
            ImageIO.write(bim, &lt;span class=&quot;code-quote&quot;&gt;&quot;png&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(dir, &lt;span class=&quot;code-quote&quot;&gt;&quot;doraargb.png&quot;&lt;/span&gt;));

        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;PDFRenderer has this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        Graphics2D g = image.createGraphics();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (imageType != ImageType.ARGB)
        {
            g.setBackground(Color.WHITE);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We could just remove the line with the &quot;if&quot; and the braces. The question is, is the current behaviour a fault or a feature? Note that the ARGB image has a detail that is invisible in the RGB image.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12860343">PDFBOX-2949</key>
            <summary>Rendering to ARGB brings black background</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jahewson">John Hewson</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Aug 2015 17:51:43 +0000</created>
                <updated>Thu, 17 Mar 2016 19:08:10 +0000</updated>
                            <resolved>Tue, 1 Sep 2015 06:05:31 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14720409" author="jon_wu" created="Fri, 28 Aug 2015 18:57:35 +0000"  >&lt;p&gt;I&apos;m pretty sure this is a fault. The PDF has no background and should result in an image with a transparent background behind the text. Given that it comes out with a black background, there&apos;s no way to keep it transparent.&lt;/p&gt;

&lt;p&gt;When you try to write a PNG and get a black background, it often times means you didn&apos;t properly set ARGB so I wonder if something like that could be going on deeper in the code.&lt;/p&gt;

&lt;p&gt;You can&apos;t remove the if above because the ARGB result won&apos;t be transparent anymore. My current ugly workaround is to g.setBackground(new Color(0, 0, 0, 0)); before rendering. The color here doesn&apos;t matter, it&apos;s just that this forces the background to be fully transparent even after rendering for some reason.&lt;/p&gt;</comment>
                            <comment id="14724845" author="jahewson" created="Tue, 1 Sep 2015 06:03:37 +0000"  >&lt;p&gt;It turns out that creating a new ARGB BufferedImage and saving it without doing any drawing results in a black image. I&apos;d assumed that ARGB images were initialised to be transparent, not black. The solution is to set the background color to 0,0,0,0 immediately after the image has been created.&lt;/p&gt;</comment>
                            <comment id="14724847" author="jira-bot" created="Tue, 1 Sep 2015 06:04:22 +0000"  >&lt;p&gt;Commit 1700394 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1700394&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1700394&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2949&quot; title=&quot;Rendering to ARGB brings black background&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2949&quot;&gt;&lt;del&gt;PDFBOX-2949&lt;/del&gt;&lt;/a&gt;: Render ARGB images with a transparent background&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12753035" name="dora.pdf" size="36053" author="tilman" created="Fri, 28 Aug 2015 17:54:52 +0000"/>
                            <attachment id="12753037" name="doraargb.png" size="14026" author="tilman" created="Fri, 28 Aug 2015 17:54:52 +0000"/>
                            <attachment id="12753036" name="dorargb.png" size="11006" author="tilman" created="Fri, 28 Aug 2015 17:54:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jjkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>