<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:52:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-872] ERROR org.apache.pdfbox.filter.FlateFilter  - Stop reading corrupt stream</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-872</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;This report: &lt;a href=&quot;http://www2.goldmansachs.com/our-firm/press/press-releases/current/pdfs/2010-q2-earnings.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www2.goldmansachs.com/our-firm/press/press-releases/current/pdfs/2010-q2-earnings.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;With this code:&lt;br/&gt;
public static String getTransformed(InputStream inputStream) {&lt;br/&gt;
        PDDocument pdDocument = null;&lt;br/&gt;
        String document = null;&lt;br/&gt;
        try &lt;/p&gt;
{
            PDFParser parser = new PDFParser(inputStream);
            parser.parse();

            pdDocument = parser.getPDDocument();

            PDFText2HTML pdf2html = new PDFText2HTML(&quot;UTF-8&quot;);
            document = pdf2html.getText(pdDocument);
        }
&lt;p&gt; catch (IOException e) &lt;/p&gt;
{
            e.printStackTrace();      
        }
&lt;p&gt; finally {&lt;br/&gt;
            if (pdDocument != null) {&lt;br/&gt;
                try &lt;/p&gt;
{
                    pdDocument.getDocument().close();
                }
&lt;p&gt; catch (IOException e) &lt;/p&gt;
{
                    e.printStackTrace();
                      }
&lt;p&gt;            }&lt;br/&gt;
        }&lt;/p&gt;

&lt;p&gt;        return document;&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;returns:&lt;br/&gt;
17:01:15,609 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pdfbox.filter.FlateFilter  - Stop reading corrupt stream&lt;br/&gt;
null&lt;br/&gt;
java.io.IOException: Error: Expected an integer type, actual=&apos;&apos;&lt;br/&gt;
	at org.apache.pdfbox.pdfparser.BaseParser.readInt(BaseParser.java:1310)&lt;br/&gt;
	at org.apache.pdfbox.pdfparser.PDFObjectStreamParser.parse(PDFObjectStreamParser.java:81)&lt;br/&gt;
	at org.apache.pdfbox.cos.COSDocument.dereferenceObjectStreams(COSDocument.java:449)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDDocument.openProtection(PDDocument.java:1112)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDDocument.decrypt(PDDocument.java:591)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:246)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:184)&lt;/p&gt;

&lt;p&gt;in Foxit PDF this file was opened normally&lt;/p&gt;</description>
                <environment>Windows XP [&#1042;&#1077;&#1088;&#1089;&#1080;&#1103; 5.1.2600]&lt;br/&gt;
java version &amp;quot;1.6.0_22&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_22-b04)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 17.1-b03, mixed mode, sharing)</environment>
        <key id="12477745">PDFBOX-872</key>
            <summary>ERROR org.apache.pdfbox.filter.FlateFilter  - Stop reading corrupt stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adamnichols">Adam Nichols</assignee>
                                    <reporter username="vladimir_postrigan">Vladimir</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Oct 2010 14:07:36 +0000</created>
                <updated>Mon, 20 Dec 2010 09:38:21 +0000</updated>
                            <resolved>Mon, 22 Nov 2010 21:50:59 +0000</resolved>
                                    <version>1.3.1</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12925788" author="sriharshareddyk" created="Thu, 28 Oct 2010 12:32:31 +0000"  >&lt;p&gt;This could be a bug in PDF Box. It actually fails because of the ZipException.&lt;br/&gt;
Interesting thing is that when I print the attached file to another PDF file and then pass that file instead your code works fine.&lt;br/&gt;
I wonder if it could be the document Format, the one you attached has its version as PDF-1.2 and the one that I created by printing your file into a PDF has it as PDF-1.4.&lt;/p&gt;

&lt;p&gt;-Harsha&lt;/p&gt;</comment>
                            <comment id="12926860" author="martijn_brinkers" created="Mon, 1 Nov 2010 09:03:12 +0000"  >&lt;p&gt;According to PDFBox the PDF is encrypted because document.isEncrypted() returns true but the document does not seem to be encrypted.&lt;/p&gt;

&lt;p&gt;Acrobat reader security tab says: &quot;All contents of the document are encrypted and search engines cannot access the document&apos;s meta data&quot;.&lt;/p&gt;

&lt;p&gt;Somehow it&apos;s &apos;encrypted&apos; but all PDF viewers can open it. This however seems not be supported by PDFBox &lt;/p&gt;</comment>
                            <comment id="12928633" author="lehmi" created="Fri, 5 Nov 2010 15:49:44 +0000"  >&lt;p&gt;This issue seems to duplicate &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-697&quot; title=&quot;Error: Expected an integer type, actual=&amp;#39;&amp;#39; -&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-697&quot;&gt;&lt;del&gt;PDFBOX-697&lt;/del&gt;&lt;/a&gt;. The mentioned pdf uses an unsupported crypt filter to protect the content.&lt;/p&gt;</comment>
                            <comment id="12933476" author="vladimir_postrigan" created="Thu, 18 Nov 2010 17:00:53 +0000"  >&lt;p&gt;Another report:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.salesforce.com/assets/pdf/investors/Q2FY11_Salesforce_FinancialResults.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.salesforce.com/assets/pdf/investors/Q2FY11_Salesforce_FinancialResults.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Has the same exception:&lt;br/&gt;
18:57:22,406 &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-6-thread-1&amp;#93;&lt;/span&gt; ERROR org.apache.pdfbox.filter.FlateFilter  - Stop reading corrupt stream&lt;br/&gt;
java.io.IOException: Error: Expected an integer type, actual=&apos;&apos;&lt;br/&gt;
	at org.apache.pdfbox.pdfparser.BaseParser.readInt(BaseParser.java:1380)&lt;br/&gt;
	at org.apache.pdfbox.pdfparser.PDFObjectStreamParser.parse(PDFObjectStreamParser.java:97)&lt;br/&gt;
	at org.apache.pdfbox.cos.COSDocument.dereferenceObjectStreams(COSDocument.java:483)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDDocument.openProtection(PDDocument.java:1089)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDDocument.decrypt(PDDocument.java:591)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:309)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:241)&lt;/p&gt;

&lt;p&gt;	at java.lang.Thread.run(Thread.java:619)&lt;/p&gt;</comment>
                            <comment id="12934022" author="martijn_brinkers" created="Fri, 19 Nov 2010 22:24:22 +0000"  >&lt;p&gt;The exception is thrown because the PDF was encrypted with AES. PDFBox does not yet support AES out of the box. I have added a patch to add AES encryption to the SecurityHandler. AES is enabled in the StandardSecurityHandler when the PDCryptFilterDictionary says that the PDF was encrypted with AES.&lt;/p&gt;

&lt;p&gt;With the patch, the attached PDF can be read.&lt;/p&gt;</comment>
                            <comment id="12934023" author="martijn_brinkers" created="Fri, 19 Nov 2010 22:25:35 +0000"  >&lt;p&gt;Patch that adds AES support to SecurityHandler and StandardSecurityHandler&lt;/p&gt;</comment>
                            <comment id="12934613" author="adamnichols" created="Mon, 22 Nov 2010 21:50:59 +0000"  >&lt;p&gt;Patch looks good.  Nice documentation.  The only problem I see is that it removes a method which people may be depending on.  I&apos;m going to add that function back in and just default the boolean decrypt to &quot;false&quot; since the name of the function is &quot;encryptData&quot;.  I&apos;m marking the old encryptData() method deprecated in favor of the new one.  I just don&apos;t want to break compatibility with anyone&apos;s project without any warning.  It will probably be removed in version 2.0, as people normally expect some API changes when the major version changes.&lt;/p&gt;

&lt;p&gt;Patch committed (with small backwards compatibility addition) in revision 1037900.&lt;/p&gt;</comment>
                            <comment id="12934622" author="martijn_brinkers" created="Mon, 22 Nov 2010 22:08:56 +0000"  >&lt;p&gt;The update contains a minor typo. It should be @deprecated instead of @depricated&lt;/p&gt;</comment>
                            <comment id="12934626" author="adamnichols" created="Mon, 22 Nov 2010 22:15:32 +0000"  >&lt;p&gt;Fixed typo in revision 1037914.  Thanks&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12462567">PDFBOX-697</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12460062" name="PDFBOX-872.patch" size="7913" author="martijn_brinkers" created="Fri, 19 Nov 2010 22:25:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zfqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>