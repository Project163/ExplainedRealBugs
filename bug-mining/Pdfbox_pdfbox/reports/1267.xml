<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:01:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3018] IOException &quot;head is mandatory&quot; when using getOriginalData() of TT font from TTC file</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3018</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I tried this to answer this question:&lt;br/&gt;
&lt;a href=&quot;http://stackoverflow.com/questions/33044069/pdfbox-2-0-and-ttc-fonts&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/33044069/pdfbox-2-0-and-ttc-fonts&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        TrueTypeCollection trueTypeCollection = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TrueTypeCollection(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;c:/windows/fonts/MSGothic.ttc&quot;&lt;/span&gt;));
        TrueTypeFont ttFont = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (TrueTypeFont font : trueTypeCollection.getFonts())
        {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;MS-Gothic&quot;&lt;/span&gt;.equals(font.getName()))
            {
                ttFont = font;
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ttFont == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
        {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
        }
        PDType0Font font = PDType0Font.load(document, ttFont.getOriginalData(), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However this doesn&apos;t work:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.io.IOException: head is mandatory
    at org.apache.fontbox.ttf.TTFParser.parseTables(TTFParser.java:176)
    at org.apache.fontbox.ttf.TTFParser.parse(TTFParser.java:145)
    at org.apache.fontbox.ttf.TTFParser.parseEmbedded(TTFParser.java:119)
    at org.apache.pdfbox.pdmodel.font.TrueTypeEmbedder.buildFontFile2(TrueTypeEmbedder.java:89)
    at org.apache.pdfbox.pdmodel.font.TrueTypeEmbedder.&amp;lt;init&amp;gt;(TrueTypeEmbedder.java:72)
    at org.apache.pdfbox.pdmodel.font.PDCIDFontType2Embedder.&amp;lt;init&amp;gt;(PDCIDFontType2Embedder.java:61)
    at org.apache.pdfbox.pdmodel.font.PDType0Font.&amp;lt;init&amp;gt;(PDType0Font.java:120)
    at org.apache.pdfbox.pdmodel.font.PDType0Font.load(PDType0Font.java:89) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From Andreas:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Looks like a bug. ttFont.getOriginalData() returns the data of the underlying ttc instead of the single ttf. &lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12903989">PDFBOX-3018</key>
            <summary>IOException &quot;head is mandatory&quot; when using getOriginalData() of TT font from TTC file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Oct 2015 17:41:50 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:12 +0000</updated>
                            <resolved>Sun, 18 Oct 2015 10:19:23 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14952259" author="lehmi" created="Sun, 11 Oct 2015 11:02:08 +0000"  >&lt;p&gt;The problem is that a ttc doesn&apos;t contain a separate stream for each font. One of the main intentions of a ttc is to share tables among all included fonts.&lt;/p&gt;

&lt;p&gt;We have to implement something to create a separate stream for those fonts.&lt;/p&gt;</comment>
                            <comment id="14952267" author="tilman" created="Sun, 11 Oct 2015 11:52:39 +0000"  >&lt;p&gt;&lt;del&gt;Or do the second best thing: return null (or an exception) for getOriginalData(), and instead have a PDType0Font.load() method that takes a TrueTypeCollection and name, and then does whats needed to have an embedded font.&lt;/del&gt;&lt;/p&gt;</comment>
                            <comment id="14952269" author="lehmi" created="Sun, 11 Oct 2015 11:57:12 +0000"  >&lt;p&gt;OK, but PDType0Font.load() needs the ttf stream too, so that in the end we have to create it somewhere.&lt;/p&gt;</comment>
                            <comment id="14952342" author="msahyoun" created="Sun, 11 Oct 2015 17:04:59 +0000"  >&lt;p&gt;Apache FOP supports that so might be taken as inspiration. &lt;/p&gt;</comment>
                            <comment id="14952359" author="lehmi" created="Sun, 11 Oct 2015 17:50:35 +0000"  >&lt;p&gt;I just remembered that we already have something like that: TTFSubsetter. I did a dirty hack and managed to extend the existing code to use a ttf from a ttc. Find attached a sample pdf&lt;/p&gt;</comment>
                            <comment id="14960864" author="nfalco79" created="Fri, 16 Oct 2015 15:14:08 +0000"  >&lt;p&gt;me too, I have the same issue.&lt;br/&gt;
I&apos;m looking a workaround to transform a TrueTypeFont into a PDFont to embed into PDF.&lt;/p&gt;</comment>
                            <comment id="14961038" author="tilman" created="Fri, 16 Oct 2015 17:18:28 +0000"  >&lt;p&gt;is your &quot;same issue&quot; related to truetype collections, i.e. ttc files?&lt;/p&gt;</comment>
                            <comment id="14961114" author="nfalco79" created="Fri, 16 Oct 2015 18:10:44 +0000"  >&lt;p&gt;yes.&lt;br/&gt;
I have a uming.ttc font (&lt;a href=&quot;http://www.freedesktop.org/wiki/Software/CJKUnifonts/Download/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.freedesktop.org/wiki/Software/CJKUnifonts/Download/&lt;/a&gt;) that contains chinese variant for TW, HK and CN.&lt;br/&gt;
With beta 2.0 now handle parse file as Hausherr has done (or in alternative by FontMapper that load font in the system, but I prefer use directly to avoid installation in the server/develop enviroment).&lt;br/&gt;
After all I have a TrueTypeFont that can not be added to the document in creation or the filling form to embed it.&lt;/p&gt;</comment>
                            <comment id="14961943" author="jira-bot" created="Sat, 17 Oct 2015 15:44:36 +0000"  >&lt;p&gt;Commit 1709190 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1709190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1709190&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3018&quot; title=&quot;IOException &amp;quot;head is mandatory&amp;quot; when using getOriginalData() of TT font from TTC file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3018&quot;&gt;&lt;del&gt;PDFBOX-3018&lt;/del&gt;&lt;/a&gt;: use a given TrueTypeFpont instance to create a Type0 font so that true type font collections can be used as input&lt;/p&gt;</comment>
                            <comment id="14961945" author="lehmi" created="Sat, 17 Oct 2015 15:46:52 +0000"  >&lt;p&gt;I&apos;ve added another load method to PDType0Font so that a given TrueTypeFont instance can be used as font when creating a pdf. Please give it a try ...&lt;/p&gt;

&lt;p&gt;The origin code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDType0Font font = PDType0Font.load(document, ttFont.getOriginalData(), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;has to be simply replaced with the following&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDType0Font font = PDType0Font.load(document, ttFont, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14961949" author="lehmi" created="Sat, 17 Oct 2015 15:54:04 +0000"  >&lt;p&gt;I&apos;ve attached another sample containing some special characters using MS-Gothic from msgothic.ttc&lt;/p&gt;</comment>
                            <comment id="14962094" author="tilman" created="Sat, 17 Oct 2015 22:11:35 +0000"  >&lt;p&gt;Thanks, I tried it myself and it works fine.&lt;/p&gt;</comment>
                            <comment id="14962264" author="lehmi" created="Sun, 18 Oct 2015 10:19:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Thanks for your feedback&lt;/p&gt;

&lt;p&gt;Set to solved&lt;/p&gt;</comment>
                            <comment id="14962510" author="tilman" created="Sun, 18 Oct 2015 17:08:02 +0000"  >&lt;p&gt;Commit 1709294 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1709294&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1709294&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3018&quot; title=&quot;IOException &amp;quot;head is mandatory&amp;quot; when using getOriginalData() of TT font from TTC file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3018&quot;&gt;&lt;del&gt;PDFBOX-3018&lt;/del&gt;&lt;/a&gt;: add convenience method to get a TT font by name&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12767215" name="ttctest.pdf" size="6406" author="lehmi" created="Sat, 17 Oct 2015 15:54:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2musf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>