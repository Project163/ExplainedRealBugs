<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:12:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5397] Certain PDF cannot be processed</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5397</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://cdn.discordapp.com/attachments/381016918703996928/955833631484563566/unknown.png&quot; height=&quot;291&quot; width=&quot;570&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;For certain PDFs where we use PDFBox to open a PDF, scan for defined dummy QR codes on it, and then replace the dummy with a real QR code, we either get the above error, or the process does not terminate.&lt;/p&gt;

&lt;p&gt;A sample file TET_5_4xxx_GR_00_00_XX_14_F.pdf or TSA_5_BF2x_GR_-1_01_XX_09_F.pdf .&lt;br/&gt;
They both lead to the above problem.&lt;/p&gt;

&lt;p&gt;Our own analysis so far is that it might be the same issue as mentionend in &lt;a href=&quot;https://stackoverflow.com/questions/69237146/pdfbox-renderimagewithdpi-hangs-sometimes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/69237146/pdfbox-renderimagewithdpi-hangs-sometimes&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For our company PMG Projektraum GmbH, Munich, Germany, this is an essential function. Currently users cannot download PDFs in most cases because of this: The download tries to add a QR code and never ends.&lt;/p&gt;

&lt;p&gt;It could be that the QR code on these PDFs causes issues because it is in a certain layer. We observed that in Adobe Reader we see a QR Code but with or own viewer it is invisible:&lt;/p&gt;


&lt;p&gt;This is TSA_5_4xxx_SH_XX_05_XX_03_F.pdf&lt;/p&gt;

&lt;p&gt;where we have the same issues&lt;/p&gt;


&lt;p&gt;Any idea, what this might be and how to solve it?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13435162">PDFBOX-5397</key>
            <summary>Certain PDF cannot be processed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="th@pmgnet.de">Tobias Hugendubel</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Mar 2022 16:45:26 +0000</created>
                <updated>Thu, 21 Apr 2022 15:38:40 +0000</updated>
                            <resolved>Wed, 30 Mar 2022 03:01:04 +0000</resolved>
                                    <version>2.0.24</version>
                    <version>2.0.25</version>
                                    <fixVersion>2.0.26</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17510801" author="msahyoun" created="Tue, 22 Mar 2022 17:57:11 +0000"  >&lt;p&gt;Why do you need to render the PDF when the use case is to look for a dummy object and replace that?&lt;/p&gt;</comment>
                            <comment id="17510805" author="msahyoun" created="Tue, 22 Mar 2022 18:02:26 +0000"  >&lt;p&gt;I&apos;ve added a rendition of TSA_5_4xxx_SH_XX_05_XX_03_F.pdf. Works fine for me. Tested using the command line PDFToImage utility. Which version of PDFBox are you using? Which OS ...&lt;/p&gt;</comment>
                            <comment id="17510814" author="tilman" created="Tue, 22 Mar 2022 18:20:49 +0000"  >&lt;p&gt;&quot;could not initialize class java.awt.graphicsenvironment$localge&quot; finds a lot of answers.&lt;/p&gt;</comment>
                            <comment id="17510823" author="tilman" created="Tue, 22 Mar 2022 18:38:28 +0000"  >&lt;p&gt;Adobe claims that something is wrong with TET_5_4xxx_GR_00_00_XX_14_F.pdf . Same for TSA_5_BF2x_GR_-1_01_XX_09_F.pdf . I was able to render all files with 300dpi (but it took very long).&lt;/p&gt;</comment>
                            <comment id="17510834" author="tilman" created="Tue, 22 Mar 2022 19:05:14 +0000"  >&lt;p&gt;Also mention what jdk you&apos;re using. Always update to the latest jdk of one number.&lt;/p&gt;</comment>
                            <comment id="17511190" author="JIRAUSER286940" created="Wed, 23 Mar 2022 11:39:20 +0000"  >&lt;p&gt;a) &quot;Why do you need to render the PDF when the use case is to look for a dummy object and replace that?&quot;&lt;br/&gt;
&lt;b&gt;Is there better ways to try to replace a dummy QR code?&lt;/b&gt;&lt;br/&gt;
We would love to change it in the long run.&lt;/p&gt;

&lt;p&gt;b) &quot;I&apos;ve added a rendition of TSA_5_4xxx_SH_XX_05_XX_03_F.pdf. Works fine for me. Tested using the command line PDFToImage utility. Which version of PDFBox are you using? Which OS ...&quot;&lt;br/&gt;
OS = Debian 11&lt;br/&gt;
&lt;b&gt;JDK = OpenJDK 17&lt;/b&gt;&lt;br/&gt;
JRE = no installation&lt;br/&gt;
&lt;b&gt;PDFBox = 2.0.24&lt;/b&gt;&lt;br/&gt;
on our production server&lt;/p&gt;

&lt;p&gt;TSA_5_4xxx_SH_XX_03_F.pdf also works best for us. Thing is, it only generates a new PDF locally, on Production it seems not to terminate.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;File that is most problematic from the above is the 09 one (really large), here the comment of our developer:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13041481/13041481_image-2022-03-23-12-29-03-735.png&quot; height=&quot;243&quot; width=&quot;564&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#00875a&quot;&gt;c) &quot;could not initialize class java.awt.graphicsenvironment$localge&quot; finds a lot of answers.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#00875a&quot;&gt;Seems to be an environment problem of our test environment only. Seems that xhost is missing there. It is not an issue on Production.&lt;/font&gt;&lt;br/&gt;
&lt;b&gt;&lt;font color=&quot;#00875a&quot;&gt;You can ignore that for the moment.&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#172b4d&quot;&gt;d) &quot;Adobe claims that something is wrong with TET_5_4xxx_GR_00_00_XX_14_F.pdf . Same for TSA_5_BF2x_GR_-1_01_XX_09_F.pdf . I was able to render all files with 300dpi (but it took very long).&quot;&lt;br/&gt;
The files were created with &lt;b&gt;&quot;PDFTron&quot;&lt;/b&gt;. &lt;a href=&quot;https://www.pdftron.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.pdftron.com/&lt;/a&gt; Customer uses that, we can&apos;t influence that choice.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#172b4d&quot;&gt;&lt;b&gt;Do you know more about this software&lt;/b&gt;, maybe from other problem tickets, how this tool must be used with generating PDFs to avoid such issues?&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17511346" author="jira-bot" created="Wed, 23 Mar 2022 16:31:05 +0000"  >&lt;p&gt;Commit 1899152 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1899152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1899152&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5397&quot; title=&quot;Certain PDF cannot be processed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5397&quot;&gt;&lt;del&gt;PDFBOX-5397&lt;/del&gt;&lt;/a&gt;: use dash workaround for all versions; remove version detection&lt;/p&gt;</comment>
                            <comment id="17511347" author="jira-bot" created="Wed, 23 Mar 2022 16:31:09 +0000"  >&lt;p&gt;Commit 1899153 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1899153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1899153&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5397&quot; title=&quot;Certain PDF cannot be processed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5397&quot;&gt;&lt;del&gt;PDFBOX-5397&lt;/del&gt;&lt;/a&gt;: use dash workaround for all versions; remove version detection&lt;/p&gt;</comment>
                            <comment id="17511348" author="tilman" created="Wed, 23 Mar 2022 16:31:35 +0000"  >&lt;p&gt;TET_5_4xxx_GR_00_00_XX_14_F.pdf fails bitonal rendering with Amazon Corretto 11, 17 and 18 but works on jdk8.&lt;/p&gt;

&lt;p&gt;Here&apos;s what happens last:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;PDFOperator{d} [COSArray{[COSFloat{.001}, COSInt{0}, COSInt{0}, COSInt{0}]}, COSFloat{.001}]
PDFOperator{m} [COSFloat{1182.74}, COSFloat{814.76}]
PDFOperator{l} [COSFloat{1428.79}, COSFloat{814.76}]
PDFOperator{S} []
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The cause is (once again) a java bug related to a poor dash pattern. As seen in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3360&quot; title=&quot;java.lang.IllegalArgumentException: dash lengths all zero&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3360&quot;&gt;&lt;del&gt;PDFBOX-3360&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2373&quot; title=&quot;Rendering at 72 dpi crashes java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2373&quot;&gt;&lt;del&gt;PDFBOX-2373&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2929&quot; title=&quot;&amp;quot;Illegal instruction: 4&amp;quot; with PDFToImage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2929&quot;&gt;&lt;del&gt;PDFBOX-2929&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3204&quot; title=&quot;JVM crashes on PDFRenderer.renderImageWithDPI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3204&quot;&gt;&lt;del&gt;PDFBOX-3204&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3813&quot; title=&quot;PDF Box crash when using PDFToImage or PDFDebug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3813&quot;&gt;&lt;del&gt;PDFBOX-3813&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3724&quot; title=&quot;Wrong size in rendering of some artifacts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3724&quot;&gt;&lt;del&gt;PDFBOX-3724&lt;/del&gt;&lt;/a&gt;. We have a workaround but it is disabled for jdk10 and higher since &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4492&quot; title=&quot;JVM crashes on PDFRenderer.renderImage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4492&quot;&gt;&lt;del&gt;PDFBOX-4492&lt;/del&gt;&lt;/a&gt; because I thought they had fixed it. So they didn&apos;t.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DashCrash
{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args)
    {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Version: &quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.version&quot;&lt;/span&gt;));
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; t0 = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis();
        BufferedImage bim = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedImage(2000, 2000, BufferedImage.TYPE_BYTE_BINARY);
        Graphics2D g2d = (Graphics2D) bim.getGraphics();
        GeneralPath path = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GeneralPath();
        path.moveTo(1182.74f, 814.76f);
        path.lineTo(1428.79f, 814.76f);
        path.closePath();
        &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;[] dash = {0.001f};
        BasicStroke stroke = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BasicStroke(1, BasicStroke.CAP_BUTT, BasicStroke.JOIN_MITER, 10, dash, 0);
        g2d.setStroke(stroke);
        g2d.draw(path);
        g2d.dispose();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;done in &quot;&lt;/span&gt; + (&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis() - t0) + &lt;span class=&quot;code-quote&quot;&gt;&quot; millis&quot;&lt;/span&gt;);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I played around a bit: it does end some time, and the time depends on the value, but also on the image type. 0.005 is done in 3 seconds, 0.002 in 25 seconds.&lt;/p&gt;

&lt;p&gt;Re Adobe error msg, no idea what&apos;s going on, maybe it&apos;s the dash pattern, maybe not. It&apos;s probably not the fault of PDFTron. The pattern is likely calculated by another software that uses PDFTron. So that software should avoid using tiny tiny dash patterns, these make no sense.&lt;/p&gt;</comment>
                            <comment id="17511367" author="tilman" created="Wed, 23 Mar 2022 16:51:40 +0000"  >&lt;p&gt;Snapshot is available now:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.26-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.26-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17513980" author="JIRAUSER286940" created="Tue, 29 Mar 2022 10:24:30 +0000"  >&lt;p&gt;We have now manually added a timeout in our placeholder search and successfully use a fallback in that case for problematic files.&lt;br/&gt;
We tried a validate method of PDFBox but there we could not really identify problematic files, this might one of your future improvements.&lt;/p&gt;

&lt;p&gt;But the initial problem we found a solution now, thanks a lot for your feedback, that helped.&lt;br/&gt;
Ticket is closed.&lt;/p&gt;</comment>
                            <comment id="17514417" author="tilman" created="Wed, 30 Mar 2022 03:02:35 +0000"  >&lt;p&gt;The 2.0.26 version will come out soon so your workaround would be needed less.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13041427" name="TET_5_4xxx_GR_00_00_XX_14_F.pdf" size="1728277" author="th@pmgnet.de" created="Tue, 22 Mar 2022 16:24:34 +0000"/>
                            <attachment id="13041425" name="TSA_5_4xxx_SH_XX_05_XX_03_F.pdf" size="818260" author="th@pmgnet.de" created="Tue, 22 Mar 2022 16:44:06 +0000"/>
                            <attachment id="13041429" name="TSA_5_4xxx_SH_XX_05_XX_03_F1.jpg" size="2832530" author="msahyoun" created="Tue, 22 Mar 2022 18:00:57 +0000"/>
                            <attachment id="13041426" name="TSA_5_BF2x_GR_-1_01_XX_09_F.pdf" size="1959478" author="th@pmgnet.de" created="Tue, 22 Mar 2022 16:30:15 +0000"/>
                            <attachment id="13041480" name="image-2022-03-23-12-25-56-963.png" size="29272" author="th@pmgnet.de" created="Wed, 23 Mar 2022 11:25:57 +0000"/>
                            <attachment id="13041481" name="image-2022-03-23-12-29-03-735.png" size="29272" author="th@pmgnet.de" created="Wed, 23 Mar 2022 11:29:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10ptc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>