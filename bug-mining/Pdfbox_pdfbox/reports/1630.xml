<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:04:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3642]  java.lang.ClassCastException is thrown when flattening form with a picture</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3642</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Without picture in the form flattening works ok. With picture the following exception is thrown:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.ClassCastException: org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject cannot be cast to org.apache.pdfbox.pdmodel.graphics.form.PDFormXObject&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PDAcroForm.resolveNeedsTranslation(PDAcroForm.java:726)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PDAcroForm.flatten(PDAcroForm.java:276)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PDAcroForm.flatten(PDAcroForm.java:192)&lt;br/&gt;
	at test.FlattenIssue.main(FlattenIssue.java:27)&lt;/p&gt;

&lt;p&gt;Attaching source PDF form (generated in open office). &lt;/p&gt;</description>
                <environment></environment>
        <key id="13031067">PDFBOX-3642</key>
            <summary> java.lang.ClassCastException is thrown when flattening form with a picture</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="msahyoun">Maruan Sahyoun</assignee>
                                    <reporter username="rumburak">rumburak</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Dec 2016 10:05:32 +0000</created>
                <updated>Sat, 25 Mar 2017 18:12:19 +0000</updated>
                            <resolved>Wed, 25 Jan 2017 17:05:51 +0000</resolved>
                                    <version>2.0.4</version>
                                    <fixVersion>2.0.5</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>AcroForm</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15785019" author="rumburak" created="Thu, 29 Dec 2016 10:11:27 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;CodeUsed.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                        PDDocument sourcePdfForm = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;OpenOfficeFormWithPicture.pdf&quot;&lt;/span&gt;));
			PDAcroForm acroForm = sourcePdfForm.getDocumentCatalog()
					.getAcroForm();
			acroForm.setNeedAppearances(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
			List&amp;lt;PDField&amp;gt; list = acroForm.getFields();
			&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Iterator&amp;lt;PDField&amp;gt; iterator = list.iterator(); iterator.hasNext();) 
                        {
				PDField pdField = (PDField) iterator.next();
				pdField.setReadOnly(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
				pdField.setValue(&lt;span class=&quot;code-quote&quot;&gt;&quot;filled&quot;&lt;/span&gt;);
			}
			
			acroForm.flatten();
			sourcePdfForm.save(&lt;span class=&quot;code-quote&quot;&gt;&quot;OpenOfficeForm_filled_flattened.pdf&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15785024" author="rumburak" created="Thu, 29 Dec 2016 10:13:22 +0000"  >&lt;p&gt;PDF Form with a picture inside&lt;/p&gt;</comment>
                            <comment id="15793334" author="jira-bot" created="Mon, 2 Jan 2017 18:59:20 +0000"  >&lt;p&gt;Commit 1776981 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1776981&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1776981&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3642&quot; title=&quot; java.lang.ClassCastException is thrown when flattening form with a picture&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3642&quot;&gt;&lt;del&gt;PDFBOX-3642&lt;/del&gt;&lt;/a&gt;: test for PDImageXObject to avoid ClassCastException&lt;/p&gt;</comment>
                            <comment id="15793338" author="jira-bot" created="Mon, 2 Jan 2017 19:01:33 +0000"  >&lt;p&gt;Commit 1776982 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1776982&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1776982&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3642&quot; title=&quot; java.lang.ClassCastException is thrown when flattening form with a picture&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3642&quot;&gt;&lt;del&gt;PDFBOX-3642&lt;/del&gt;&lt;/a&gt;: remove unused import for PDImageXObject&lt;/p&gt;</comment>
                            <comment id="15793485" author="jira-bot" created="Mon, 2 Jan 2017 20:57:30 +0000"  >&lt;p&gt;Commit 1777017 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1777017&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1777017&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3642&quot; title=&quot; java.lang.ClassCastException is thrown when flattening form with a picture&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3642&quot;&gt;&lt;del&gt;PDFBOX-3642&lt;/del&gt;&lt;/a&gt;: test for PDImageXObject to avoid ClassCastException&lt;/p&gt;</comment>
                            <comment id="15793489" author="msahyoun" created="Mon, 2 Jan 2017 20:59:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rumburak&quot; class=&quot;user-hover&quot; rel=&quot;rumburak&quot;&gt;rumburak&lt;/a&gt; could you test and verify if the change resolve the issues using the latest snapshot which should be available within a few hours&lt;/p&gt;</comment>
                            <comment id="15838138" author="msahyoun" created="Wed, 25 Jan 2017 17:05:51 +0000"  >&lt;p&gt;resolving issue with the successful tests running.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rumburak&quot; class=&quot;user-hover&quot; rel=&quot;rumburak&quot;&gt;rumburak&lt;/a&gt; you can reopen the issue if the fix doesn&apos;t work for you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12845041" name="OpenOfficeFormWithPicture.pdf" size="92443" author="rumburak" created="Thu, 29 Dec 2016 10:13:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i383nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>