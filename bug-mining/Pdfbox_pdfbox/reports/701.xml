<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:57:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2320] IOException: Could not read embedded TTF for font TimesNewRoman</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2320</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;java -jar ~/pdf-box-svn/app/target/pdfbox-app-2.0.0-SNAPSHOT.jar PDFToImage -nonSeq TEST_SetCharSpacing_Error.pdf&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Sep 5, 2014 10:56:40 AM org.apache.pdfbox.pdfparser.NonSequentialPDFParser validateStreamLength
SEVERE: The end of the stream doesn&apos;t point to the correct offset, using workaround to read the stream
Sep 5, 2014 10:56:40 AM org.apache.pdfbox.pdfparser.NonSequentialPDFParser validateStreamLength
SEVERE: The end of the stream doesn&apos;t point to the correct offset, using workaround to read the stream
Sep 5, 2014 10:56:40 AM org.apache.pdfbox.filter.FlateFilter decode
SEVERE: FlateFilter: stop reading corrupt stream due to a DataFormatException
Sep 5, 2014 10:56:40 AM org.apache.pdfbox.filter.FlateFilter decode
SEVERE: FlateFilter: stop reading corrupt stream due to a DataFormatException
Sep 5, 2014 10:56:40 AM org.apache.pdfbox.filter.FlateFilter decode
SEVERE: FlateFilter: stop reading corrupt stream due to a DataFormatException
Sep 5, 2014 10:56:40 AM org.apache.pdfbox.filter.FlateFilter decode
SEVERE: FlateFilter: stop reading corrupt stream due to a DataFormatException
Sep 5, 2014 10:56:40 AM org.apache.pdfbox.filter.FlateFilter decode
SEVERE: FlateFilter: stop reading corrupt stream due to a DataFormatException
Sep 5, 2014 10:56:40 AM org.apache.pdfbox.filter.FlateFilter decode
SEVERE: FlateFilter: stop reading corrupt stream due to a DataFormatException
Sep 5, 2014 10:56:40 AM org.apache.pdfbox.filter.FlateFilter decode
SEVERE: FlateFilter: stop reading corrupt stream due to a DataFormatException
Sep 5, 2014 10:56:40 AM org.apache.pdfbox.filter.FlateFilter decode
SEVERE: FlateFilter: stop reading corrupt stream due to a DataFormatException
Sep 5, 2014 10:56:40 AM org.apache.pdfbox.filter.FlateFilter decode
SEVERE: FlateFilter: stop reading corrupt stream due to a DataFormatException
Sep 5, 2014 10:56:40 AM org.apache.pdfbox.filter.FlateFilter decode
SEVERE: FlateFilter: stop reading corrupt stream due to a DataFormatException

Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.io.IOException: Could not read embedded TTF &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; font TimesNewRoman
	at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.&amp;lt;init&amp;gt;(PDTrueTypeFont.java:116)
	at org.apache.pdfbox.pdmodel.font.PDFontFactory.createFont(PDFontFactory.java:73)
	at org.apache.pdfbox.pdmodel.PDResources.getFonts(PDResources.java:171)
	at org.apache.pdfbox.util.PDFStreamEngine.getFonts(PDFStreamEngine.java:543)
	at org.apache.pdfbox.util.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.text.SetTextFont.process(SetTextFont.java:48)
	at org.apache.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:510)
	at org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:275)
	at org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:240)
	at org.apache.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:194)
	at org.apache.pdfbox.rendering.PageDrawer.drawPage(PageDrawer.java:176)
	at org.apache.pdfbox.rendering.PDFRenderer.renderPage(PDFRenderer.java:228)
	at org.apache.pdfbox.rendering.PDFRenderer.renderImage(PDFRenderer.java:160)
	at org.apache.pdfbox.rendering.PDFRenderer.renderImageWithDPI(PDFRenderer.java:109)
	at org.apache.pdfbox.tools.PDFToImage.main(PDFToImage.java:265)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)
Caused by: java.io.IOException: java.util.zip.DataFormatException: invalid block type
	at org.apache.pdfbox.filter.FlateFilter.decode(FlateFilter.java:83)
	at org.apache.pdfbox.cos.COSStream.doDecode(COSStream.java:365)
	at org.apache.pdfbox.cos.COSStream.doDecode(COSStream.java:286)
	at org.apache.pdfbox.cos.COSStream.getUnfilteredStream(COSStream.java:189)
	at org.apache.pdfbox.pdmodel.common.PDStream.createInputStream(PDStream.java:232)
	at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.&amp;lt;init&amp;gt;(PDTrueTypeFont.java:108)
	... 18 more
Caused by: java.util.zip.DataFormatException: invalid block type
	at java.util.zip.Inflater.inflateBytes(Native Method)
	at java.util.zip.Inflater.inflate(Inflater.java:238)
	at java.util.zip.Inflater.inflate(Inflater.java:256)
	at org.apache.pdfbox.filter.FlateFilter.decompress(FlateFilter.java:101)
	at org.apache.pdfbox.filter.FlateFilter.decode(FlateFilter.java:74)
	... 23 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12739430">PDFBOX-2320</key>
            <summary>IOException: Could not read embedded TTF for font TimesNewRoman</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="ssteiner">Simon Steiner</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Sep 2014 08:47:54 +0000</created>
                <updated>Sat, 13 Dec 2014 14:14:47 +0000</updated>
                            <resolved>Wed, 17 Sep 2014 19:32:48 +0000</resolved>
                                    <version>1.8.6</version>
                    <version>1.8.7</version>
                    <version>1.8.8</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.8</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14123266" author="jahewson" created="Fri, 5 Sep 2014 18:00:03 +0000"  >&lt;p&gt;The log is showing &quot;SEVERE: The end of the stream doesn&apos;t point to the correct offset, using workaround to read the stream&quot; and the TTF error is caused by &quot;java.util.zip.DataFormatException: invalid block type&quot;. So this looks like a problem with the xref recovery mechanism or stream parsing - &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14124854" author="tilman" created="Sun, 7 Sep 2014 10:08:55 +0000"  >&lt;p&gt;A stream is incorrectly read in readUntilEndStream(), a byte is missing. I checked whether my &quot;EndstreamOutputStream&quot; is the cause by temporary removing it, but it isn&apos;t. readUntilEndStream() is different in BaseParser and in NonSequentialParser. We can assume that the one in BaseParser is the correct one, because 1. it handles this file (we must increase the pushbackbuffer), 2. there should have been complaints before because that part is used a lot in the old parser.&lt;/p&gt;

&lt;p&gt;A modified version of readUntilEndStream() was entered in 2013 in rev 1465366 by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt;. The one in Baseparser is unchanged since 2011 except for some formatting changes. So lets just use the one from BaseParser so that we don&apos;t have code twice. (Sorry!)&lt;/p&gt;

&lt;p&gt;I&apos;m doing the change only for 2.0 for now, I&apos;ll do it for 1.8.* after the upcoming release.&lt;/p&gt;</comment>
                            <comment id="14124855" author="jira-bot" created="Sun, 7 Sep 2014 10:11:04 +0000"  >&lt;p&gt;Commit 1622993 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1622993&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1622993&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2320&quot; title=&quot;IOException: Could not read embedded TTF for font TimesNewRoman&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2320&quot;&gt;&lt;del&gt;PDFBOX-2320&lt;/del&gt;&lt;/a&gt;: use readUntilEndStream from BaseParser, remove the method from NonSequentialParser; better log output&lt;/p&gt;</comment>
                            <comment id="14124857" author="tilman" created="Sun, 7 Sep 2014 10:24:27 +0000"  >&lt;p&gt;Stream-1410081173856.txt has the extracted stream. There is an &quot;R&quot; missing after &quot;ON+YYcFU?0p3cRS&amp;lt;gA*JJ,$7Bs%)r%&amp;amp;F&quot;.&lt;/p&gt;</comment>
                            <comment id="14125379" author="lehmi" created="Mon, 8 Sep 2014 10:21:44 +0000"  >&lt;p&gt;I&apos;ve no idea why I&apos;d added readUntilEndStream to the NonSequentialParser class. The most interesting thing is, I&apos;d obviously copied that method from somewhere else, but not from BaseParser as there are some important differences which lead to the described issue. I&apos;ve no clue where those changes come from. However, thanks for cleaning up.&lt;/p&gt;</comment>
                            <comment id="14137790" author="jira-bot" created="Wed, 17 Sep 2014 19:30:26 +0000"  >&lt;p&gt;Commit 1625776 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1625776&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1625776&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2320&quot; title=&quot;IOException: Could not read embedded TTF for font TimesNewRoman&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2320&quot;&gt;&lt;del&gt;PDFBOX-2320&lt;/del&gt;&lt;/a&gt;: use readUntilEndStream from BaseParser, remove the method from NonSequentialParser; better log output&lt;/p&gt;</comment>
                            <comment id="14137793" author="jira-bot" created="Wed, 17 Sep 2014 19:31:41 +0000"  >&lt;p&gt;Commit 1625777 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1625777&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1625777&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2320&quot; title=&quot;IOException: Could not read embedded TTF for font TimesNewRoman&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2320&quot;&gt;&lt;del&gt;PDFBOX-2320&lt;/del&gt;&lt;/a&gt;: set readUntilEndStream from BaseParser to protected to allow access from nonseq parser&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12667076" name="Stream-1410081173856.txt" size="73617" author="tilman" created="Sun, 7 Sep 2014 10:24:27 +0000"/>
                            <attachment id="12671263" name="TEST_SetCharSpacing_Error.pdf" size="282811" author="jahewson" created="Thu, 25 Sep 2014 17:33:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zpt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>