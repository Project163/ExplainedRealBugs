<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:10:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4887] Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4887</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;ol&gt;
	&lt;li&gt;Run the code in the attachment(pdfbox.java).&lt;/li&gt;
	&lt;li&gt;The exception as follows: &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13005756/13005756_image-2020-06-16-12-25-47-482.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13311624">PDFBOX-4887</key>
            <summary>Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="berylbai">bai yuan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jun 2020 04:26:29 +0000</created>
                <updated>Tue, 17 Oct 2023 03:15:19 +0000</updated>
                            <resolved>Tue, 16 Jun 2020 18:58:17 +0000</resolved>
                                    <version>2.0.19</version>
                                    <fixVersion>2.0.21</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Writing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17137823" author="tilman" created="Tue, 16 Jun 2020 18:08:58 +0000"  >&lt;p&gt;Sadly, you can&apos;t embed fonts from TrueType collections for forms because &quot;not subsetting&quot; isn&apos;t supported.&lt;/p&gt;

&lt;p&gt;PDFBox fails to detect that this is a TTC file. While these can be used as TrueType fonts logically and subsetting works, they can&apos;t be embedded as individual full TrueType files, because PDFBox has no such feature (in theory, one might implement it by expanding TrueTypeEmbedder; but you can convert ttc files to ttf with online converters). And the PDF specification does not support TTC files. Solution: PDFBox must detect this. That is easy, because TTC files begin with &quot;ttcf&quot;.&lt;/p&gt;</comment>
                            <comment id="17137827" author="jira-bot" created="Tue, 16 Jun 2020 18:13:05 +0000"  >&lt;p&gt;Commit 1878896 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878896&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878896&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: prevent full embedding (only subsetting is allowed) of TrueType collections&lt;/p&gt;</comment>
                            <comment id="17137828" author="jira-bot" created="Tue, 16 Jun 2020 18:13:21 +0000"  >&lt;p&gt;Commit 1878897 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878897&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878897&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: prevent full embedding (only subsetting is allowed) of TrueType collections&lt;/p&gt;</comment>
                            <comment id="17137829" author="jira-bot" created="Tue, 16 Jun 2020 18:13:25 +0000"  >&lt;p&gt;Commit 1878898 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878898&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878898&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: prevent full embedding (only subsetting is allowed) of TrueType collections&lt;/p&gt;</comment>
                            <comment id="17137834" author="jira-bot" created="Tue, 16 Jun 2020 18:23:46 +0000"  >&lt;p&gt;Commit 1878899 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878899&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878899&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: check whether mark() and reset() are supported&lt;/p&gt;</comment>
                            <comment id="17137835" author="jira-bot" created="Tue, 16 Jun 2020 18:23:49 +0000"  >&lt;p&gt;Commit 1878900 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878900&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878900&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: check whether mark() and reset() are supported&lt;/p&gt;</comment>
                            <comment id="17137836" author="jira-bot" created="Tue, 16 Jun 2020 18:23:53 +0000"  >&lt;p&gt;Commit 1878901 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878901&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878901&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: check whether mark() and reset() are supported&lt;/p&gt;</comment>
                            <comment id="17137856" author="tilman" created="Tue, 16 Jun 2020 18:58:17 +0000"  >&lt;p&gt;Thanks for reporting this. And sorry for not offering a better solution. You&apos;ll need to convert to ttf or use a different font because embedding in AcroForms should be in full.&lt;/p&gt;</comment>
                            <comment id="17138650" author="jira-bot" created="Wed, 17 Jun 2020 17:08:06 +0000"  >&lt;p&gt;Commit 1878932 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878932&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878932&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: SonarQube fix&lt;/p&gt;</comment>
                            <comment id="17138651" author="jira-bot" created="Wed, 17 Jun 2020 17:08:10 +0000"  >&lt;p&gt;Commit 1878933 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878933&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: SonarQube fix&lt;/p&gt;</comment>
                            <comment id="17138652" author="jira-bot" created="Wed, 17 Jun 2020 17:08:14 +0000"  >&lt;p&gt;Commit 1878934 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878934&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878934&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: SonarQube fix&lt;/p&gt;</comment>
                            <comment id="17138936" author="berylbai" created="Thu, 18 Jun 2020 01:20:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;, i don&apos;t understand why just draw the plain text, this font can be fully embedded in PDF.&lt;/p&gt;</comment>
                            <comment id="17139004" author="tilman" created="Thu, 18 Jun 2020 03:42:52 +0000"  >&lt;p&gt;The plain text usage works because no attempt is made to read the TTC file as a ttf font again. I expect that the problem would come when reading the PDF after saving. The problem you got was because when using fields, the font is read again. (Yes this is inefficient, I can&apos;t remember what the reason was. If you are creating many fields, the best is to save the PDF first before setting the values)&lt;/p&gt;</comment>
                            <comment id="17140309" author="tilman" created="Fri, 19 Jun 2020 07:42:00 +0000"  >&lt;p&gt;Commit 1878967 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878967&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878967&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;

&lt;p&gt;Commit 1878968 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878968&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878968&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;

&lt;p&gt;Commit 1878969 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878969&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878969&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4887&quot; title=&quot;Using the same font  fully embedded in plain text and PDTextField, it throws an exception in PDTextField.setValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4887&quot;&gt;&lt;del&gt;PDFBOX-4887&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13554333">PDFBOX-5701</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13005756" name="image-2020-06-16-12-25-47-482.png" size="73569" author="berylbai" created="Tue, 16 Jun 2020 04:25:49 +0000"/>
                            <attachment id="13005757" name="msyh.ttc" size="19647736" author="berylbai" created="Tue, 16 Jun 2020 04:29:46 +0000"/>
                            <attachment id="13005755" name="pdfbox.java" size="3308" author="berylbai" created="Tue, 16 Jun 2020 04:26:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fvqw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>