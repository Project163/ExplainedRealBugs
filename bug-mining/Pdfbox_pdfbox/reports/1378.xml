<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:02:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2996] StackOverflow in Quicksort</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2996</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Running PDFTextStripper through ExtractText triggers a StackOverflow exception in the QuickSort implementation for &lt;a href=&quot;https://www.dropbox.com/s/6crie7y5gqadwa5/1.pdf?dl=0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this particular document&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To reproduce: &lt;tt&gt;java -jar pdfbox-app-1.8.11-SNAPSHOT.jar ExtractText -sort failing_sort.pdf&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;(Related to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1512&quot; title=&quot;TextPositionComparator is not compatible with Java 7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1512&quot;&gt;&lt;del&gt;PDFBOX-1512&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</description>
                <environment>Java 7</environment>
        <key id="12896625">PDFBOX-2996</key>
            <summary>StackOverflow in Quicksort</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="maristaran">Manuel Aristaran</reporter>
                        <labels>
                    </labels>
                <created>Sat, 26 Sep 2015 22:21:11 +0000</created>
                <updated>Mon, 18 Jan 2016 12:01:49 +0000</updated>
                            <resolved>Wed, 6 Jan 2016 20:03:48 +0000</resolved>
                                    <version>1.8.10</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.11</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Text extraction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14909511" author="maristaran" created="Sat, 26 Sep 2015 22:39:24 +0000"  >&lt;p&gt;For reference, this bug was reported in Tabula issue tracker: &lt;a href=&quot;https://github.com/tabulapdf/tabula-java/issues/26&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tabulapdf/tabula-java/issues/26&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14909727" author="tilman" created="Sun, 27 Sep 2015 12:56:14 +0000"  >&lt;p&gt;Works fine with 1.8.6 and 1.8.7 (1.8.8 is the first version with quicksort). &lt;/p&gt;

&lt;p&gt;I&apos;m able to run it on 1.8.8 with the option &lt;tt&gt;-Xss2m&lt;/tt&gt;, but not with &lt;tt&gt;-Xss1m&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Now why does it need to much stack size? Here&apos;s a trace of the split() method:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;left: 0, split: 11377, right: 11377&lt;br/&gt;
left: 0, split: 11376, right: 11376&lt;br/&gt;
left: 0, split: 11375, right: 11375&lt;br/&gt;
left: 0, split: 11374, right: 11374&lt;br/&gt;
left: 0, split: 11373, right: 11373&lt;br/&gt;
left: 0, split: 11372, right: 11372&lt;br/&gt;
left: 0, split: 11371, right: 11371&lt;br/&gt;
left: 0, split: 11370, right: 11370&lt;br/&gt;
left: 0, split: 11369, right: 11369&lt;br/&gt;
left: 0, split: 11368, right: 11368&lt;br/&gt;
left: 0, split: 11367, right: 11367&lt;br/&gt;
left: 0, split: 11366, right: 11366&lt;br/&gt;
left: 0, split: 11365, right: 11365&lt;br/&gt;
left: 0, split: 11364, right: 11364&lt;br/&gt;
left: 0, split: 11363, right: 11363&lt;br/&gt;
left: 0, split: 11362, right: 11362&lt;br/&gt;
left: 0, split: 11361, right: 11361&lt;br/&gt;
left: 0, split: 11360, right: 11360&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14934038" author="tilman" created="Mon, 28 Sep 2015 21:12:43 +0000"  >&lt;p&gt;These are some options:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;do nothing&lt;/li&gt;
	&lt;li&gt;mention the &lt;tt&gt;-Xss2m&lt;/tt&gt; in the usage and in the javadoc&lt;/li&gt;
	&lt;li&gt;implement an iterative quicksort (&lt;a href=&quot;http://stackoverflow.com/questions/12553238/quicksort-iterative-or-recursive&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;will be slower&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;implement mergesort, which was used in older JDK versions (the assumption being that the transitivity problem won&apos;t hurt a classic implementation)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14935283" author="maristaran" created="Tue, 29 Sep 2015 14:54:56 +0000"  >&lt;p&gt;Thanks, Tilman.&lt;/p&gt;

&lt;p&gt;I&apos;ll implement an iterative Quicksort in Tabula &#8212;i&apos;m not too concerned about the loss of performance&#8212; and report back our results. If there&apos;s interest, I can send a patch to PDFBox with our implementation.&lt;/p&gt;</comment>
                            <comment id="14935616" author="tilman" created="Tue, 29 Sep 2015 18:44:22 +0000"  >&lt;p&gt;Yes, please do.&lt;/p&gt;

&lt;p&gt;(Which brings an interesting question - if we take it, will the source code have to include the MIT license?)&lt;/p&gt;</comment>
                            <comment id="14935637" author="maristaran" created="Tue, 29 Sep 2015 18:53:29 +0000"  >&lt;p&gt;I don&apos;t think so. In any case, I can dual-license my code as Apache to PDFBOX&lt;/p&gt;</comment>
                            <comment id="15024302" author="lehmi" created="Tue, 24 Nov 2015 11:22:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maristaran&quot; class=&quot;user-hover&quot; rel=&quot;maristaran&quot;&gt;maristaran&lt;/a&gt; Is your offer still valid? I&apos;d like to see this change in 2.0. Apache licensed code is preferred but I&apos;m sure we are able to handle MIT licensed code as well&lt;/p&gt;</comment>
                            <comment id="15025317" author="maristaran" created="Tue, 24 Nov 2015 20:37:08 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt;, sorry for the delay.&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a patch that brings the iterative Quicksort implementation that we use in Tabula (&lt;a href=&quot;https://github.com/tabulapdf/tabula-java/blob/cbde485b40ad3b65b1cfc878bd7e085a23c34d37/src/main/java/technology/tabula/QuickSort.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tabulapdf/tabula-java/blob/cbde485b40ad3b65b1cfc878bd7e085a23c34d37/src/main/java/technology/tabula/QuickSort.java&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;The current test suite passes, but I haven&apos;t included any new tests.&lt;/p&gt;

&lt;p&gt;Regarding licensing: you can assume that I&apos;m relicensing that code to PDFBox as Apache. Let me know if there&apos;s anything else we should do.&lt;/p&gt;

&lt;p&gt;Hope it helps!&lt;/p&gt;

</comment>
                            <comment id="15025322" author="maristaran" created="Tue, 24 Nov 2015 20:37:42 +0000"  >&lt;p&gt;Implement iterative quicksort.&lt;/p&gt;</comment>
                            <comment id="15025398" author="tilman" created="Tue, 24 Nov 2015 21:02:24 +0000"  >&lt;p&gt;Tests fail with the file&lt;br/&gt;
&lt;a href=&quot;https://www.spd.de/linkableblob/12354/data/artikel1_20_arab.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.spd.de/linkableblob/12354/data/artikel1_20_arab.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;i.e. the sorted output is different than before.&lt;/p&gt;</comment>
                            <comment id="15025425" author="tilman" created="Tue, 24 Nov 2015 21:15:14 +0000"  >&lt;p&gt;Btw it would be nice to attach your file here, so I can use it for further tests. The dropbox link no longer works. (I won&apos;t commit the file, as it is probably copyrighted, only use it for me)&lt;/p&gt;</comment>
                            <comment id="15025435" author="maristaran" created="Tue, 24 Nov 2015 21:20:04 +0000"  >&lt;p&gt;Failing document, originally referenced with a now broken Dropbox link.&lt;/p&gt;</comment>
                            <comment id="15025471" author="tilman" created="Tue, 24 Nov 2015 21:36:47 +0000"  >&lt;p&gt;Here are the different files. I don&apos;t know if it is a bug. It could also be related to the problem that made us use quicksort in the first place. (non transitive comparator)&lt;/p&gt;</comment>
                            <comment id="15025491" author="lars t" created="Tue, 24 Nov 2015 21:46:48 +0000"  >&lt;p&gt;Your StackOverflowError is probably caused by the selection of the pivot in line&lt;/p&gt;

&lt;p&gt;T pivot = list.get(right);&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Quicksort#Choice_of_pivot&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Quicksort#Choice_of_pivot&lt;/a&gt; for more details. Your trace of the split() method points out the problem, because split=right  &lt;/p&gt;

&lt;p&gt;The new iterative quicksort chooses the middle index of the partition by using&lt;/p&gt;

&lt;p&gt;int p = left + ((right-left)/2);&lt;/p&gt;

&lt;p&gt;and should solve your problem by choosing the middle index and avoiding the recursion.&lt;/p&gt;</comment>
                            <comment id="15025518" author="tilman" created="Tue, 24 Nov 2015 21:58:54 +0000"  >&lt;p&gt;I tried that change for the recursive version, and it makes a mess with three files. There&apos;s probably more to do. I am attaching another file (001991.pdf) for tests.&lt;/p&gt;</comment>
                            <comment id="15025549" author="lars t" created="Tue, 24 Nov 2015 22:16:57 +0000"  >&lt;p&gt;Did you change&lt;/p&gt;

&lt;p&gt;int j = right - 1;&lt;/p&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;p&gt;int j = right;&lt;/p&gt;

&lt;p&gt;?&lt;/p&gt;</comment>
                            <comment id="15025559" author="tilman" created="Tue, 24 Nov 2015 22:20:31 +0000"  >&lt;p&gt;I did now. It makes it even worse.&lt;/p&gt;</comment>
                            <comment id="15027314" author="lars t" created="Wed, 25 Nov 2015 18:20:25 +0000"  >&lt;p&gt;I added my QuickSort.java recursiv version for you. Sorry that I didn&apos;t use diff or uploaded it to GitHub. My QuickSort version hasn&apos;t the StackOverflowError problem and uses the middle index of the partition for the pivot.&lt;/p&gt;</comment>
                            <comment id="15028312" author="tilman" created="Thu, 26 Nov 2015 07:45:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lars+t&quot; class=&quot;user-hover&quot; rel=&quot;lars t&quot;&gt;lars t&lt;/a&gt; I tried the attached quicksort.java, and I get differences, e.g. for the file &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3110&quot; title=&quot;Extract by beads doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3110&quot;&gt;&lt;del&gt;PDFBOX-3110&lt;/del&gt;&lt;/a&gt;-poems-beads.pdf:&lt;/p&gt;

&lt;p&gt;Org: [position: 19, size: 3, lines: [Es scheinen die alten Weiden so grau. &#8212;&#8222;Ich liebe dich, mich reizt deine sch&#246;ne Gestalt; Dem Vater grauset&#8217;s; er reitet geschwind,, Und bist du nicht willig, so brauch&#8217; ich Gewalt.&#8220; &#8212; Er h&#228;lt in Armen das &#228;chzende Kind,, Mein Vater, mein Vater, jetzt fa&#223;t er mich an! Erreicht den Hof mit M&#252;he und Not;]]&lt;br/&gt;
New: [position: 19, size: 11, lines: [Es scheinen die alten Weiden so grau. &#8212;&#8222;Ich liebe dich, mich reizt deine sch&#246;ne Gestalt; Dem taV er grauset&#8217;s;, d,  we nr , cr, b, e, n, i dt he i st, U, ge,  ist d  u nicht willig, so brauch&#8217; ich Gewalt.&#8220; &#8212; Er h&#228;lt in Arm ne  das &#228;chzende iK dn ,, Mein Vater, mein Vat re , jetzt fa&#223;t er m i hc  ea rn r! E icht de  n Ho  f im t M h&#252; e und oN t;]]&lt;/p&gt;

&lt;p&gt;try it yourself...&lt;/p&gt;</comment>
                            <comment id="15028366" author="tboehme" created="Thu, 26 Nov 2015 08:43:45 +0000"  >&lt;p&gt;I had a look on the QuickSort.java attachment. First it is still a recursive algorithm - and I thought an iterative version was proposed to overcome the Stackoverflow exception? Second the implementation seems to be broken - I ran a 2-element test (in my head), say a list of {2,1}. 2 is pivot; &lt;tt&gt;i&lt;/tt&gt; is incremented, &lt;tt&gt;j&lt;/tt&gt; not decremented -&amp;gt; &lt;tt&gt;i==j&lt;/tt&gt; -&amp;gt; we have a (nonsense swap) and &lt;tt&gt;i=2; j=0&lt;/tt&gt;. Thus the list comes out unchanged.&lt;/p&gt;

&lt;p&gt;It seems you should think about the algorithm in depth again and maybe if a true iterative version is possible.&lt;/p&gt;</comment>
                            <comment id="15028394" author="tilman" created="Thu, 26 Nov 2015 09:06:56 +0000"  >&lt;p&gt;The QuickSort.java wasn&apos;t meant to be iterative, that was because of a side discussion involving the original implementation, that the stack overflow may have happened because of a poor pivot element choice. The iterative version is in the .patch file.&lt;/p&gt;</comment>
                            <comment id="15028441" author="tboehme" created="Thu, 26 Nov 2015 09:40:28 +0000"  >&lt;p&gt;Ok, but then my second argument about the brokenness is still valid and it can/should not be used for comparison purposes or am I missing something here?&lt;/p&gt;</comment>
                            <comment id="15028453" author="tboehme" created="Thu, 26 Nov 2015 09:55:13 +0000"  >&lt;p&gt;Ok, so I&apos;ve had a look on quicksort.patch. It seems quite identical to &lt;a href=&quot;http://stackoverflow.com/questions/12553238/quicksort-iterative-or-recursive&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/12553238/quicksort-iterative-or-recursive&lt;/a&gt;&lt;br/&gt;
Comparing both implementations there is one difference which might be the reason for the current patch not functioning propertly:&lt;br/&gt;
in &lt;tt&gt;partition()&lt;/tt&gt; the first comparison &lt;tt&gt;if (cmp.compare(list.get(l), piv) &amp;lt;= 0)&lt;/tt&gt; should read &lt;tt&gt;if (cmp.compare(list.get(l), piv) &amp;lt; 0)&lt;/tt&gt; - which would correspond to &lt;tt&gt;if (arr[l] &amp;lt; piv)&lt;/tt&gt; in the StackOverflow variant.&lt;/p&gt;</comment>
                            <comment id="15028462" author="tboehme" created="Thu, 26 Nov 2015 10:07:31 +0000"  >&lt;p&gt;I would also propose to replace &lt;tt&gt;Stack&lt;/tt&gt; (which is synchronized) by &lt;tt&gt;ArrayDeque&lt;/tt&gt; (also recommended by Sun/Oracle).&lt;/p&gt;</comment>
                            <comment id="15028463" author="tilman" created="Thu, 26 Nov 2015 10:07:44 +0000"  >&lt;p&gt;Your second argument is of course valid &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15028465" author="lars t" created="Thu, 26 Nov 2015 10:09:14 +0000"  >&lt;p&gt;No, you choose the wrong pivot.&lt;/p&gt;

&lt;p&gt;list is &lt;/p&gt;
{2,1}
&lt;p&gt;low=0, high=1&lt;br/&gt;
i=0, j=1&lt;br/&gt;
because (low+high)/2 = (0+1)/2 = 1/2 = 0, the pivot is 2&lt;/p&gt;

&lt;p&gt;while i &amp;lt;= j is true, 0 &amp;lt;= 1&lt;br/&gt;
2&amp;lt;=2 &amp;amp;&amp;amp; 0&amp;lt;1 -&amp;gt; true -&amp;gt; i++ -&amp;gt; i=1&lt;br/&gt;
2&amp;lt;=1 &amp;amp;&amp;amp; 1&amp;gt;0 -&amp;gt; false -&amp;gt; nop&lt;br/&gt;
1&amp;lt;=1 -&amp;gt; true -&amp;gt; swap -&amp;gt; list is &lt;/p&gt;
{1,2}, i++, j-- -&amp;gt; i=2, j=0&lt;br/&gt;
end of while&lt;br/&gt;
&lt;br/&gt;
low=0 &amp;lt; j=0 -&amp;gt; false&lt;br/&gt;
i=2 &amp;lt; high=1 -&amp;gt; false&lt;br/&gt;
&lt;br/&gt;
list is {1,2}</comment>
                            <comment id="15028497" author="lars t" created="Thu, 26 Nov 2015 10:27:51 +0000"  >&lt;p&gt;Hopefully that helps to fix the problem.&lt;/p&gt;

&lt;p&gt;But my current assumption is that my QuickSort and the quicksort.patch won&apos;t work, because the TextPositionComparator is not transitive &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1512&quot; title=&quot;TextPositionComparator is not compatible with Java 7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1512&quot;&gt;&lt;del&gt;PDFBOX-1512&lt;/del&gt;&lt;/a&gt; and we are using a not stable sorting algorithm.&lt;br/&gt;
See &lt;a href=&quot;https://en.wikipedia.org/wiki/Sorting_algorithm#Stability&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Sorting_algorithm#Stability&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&quot;In efficient implementations it is not a stable sort, meaning that the relative order of equal sort items is not preserved.&quot;&lt;br/&gt;
See &lt;a href=&quot;https://en.wikipedia.org/wiki/Quicksort&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Quicksort&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The legacy merge sort in Java 6 is maybe stable and the &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1512&quot; title=&quot;TextPositionComparator is not compatible with Java 7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1512&quot;&gt;&lt;del&gt;PDFBOX-1512&lt;/del&gt;&lt;/a&gt; problem won&apos;t show up.&lt;/p&gt;

&lt;p&gt;&quot;Most implementations produce a stable sort, which means that the implementation preserves the input order of equal elements in the sorted output.&quot;&lt;br/&gt;
See &lt;a href=&quot;https://en.wikipedia.org/wiki/Merge_sort&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Merge_sort&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Hence if the assumed fix of the quicksort.patch won&apos;t work and I can&apos;t fix my quicksort with the file &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3110&quot; title=&quot;Extract by beads doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3110&quot;&gt;&lt;del&gt;PDFBOX-3110&lt;/del&gt;&lt;/a&gt;-poems-beads.pdf, someone should adapt the legacy mergesort of Java 6.&lt;/p&gt;

</comment>
                            <comment id="15028517" author="tboehme" created="Thu, 26 Nov 2015 10:35:43 +0000"  >&lt;p&gt;No, the swap won&apos;t exchange the elements because as you wrote &lt;tt&gt;i&lt;/tt&gt; is now 1 and &lt;tt&gt;j&lt;/tt&gt; remains 1, so we have &lt;tt&gt;i==j&lt;/tt&gt; which does not exchange the elements.&lt;/p&gt;</comment>
                            <comment id="15028662" author="lars t" created="Thu, 26 Nov 2015 12:22:10 +0000"  >&lt;p&gt;The line is&lt;br/&gt;
if (i &amp;lt;= j)&lt;br/&gt;
and with i=1 and j=1, the expression 1&amp;lt;=1 is true, hence we will have a swap.&lt;/p&gt;</comment>
                            <comment id="15028707" author="tboehme" created="Thu, 26 Nov 2015 12:57:03 +0000"  >&lt;p&gt;Yes, but you swap the very same element at position 1 with itself. So no exchange between position 0 and 1 but position 1 is exchanged with itself -&amp;gt; remains at position 1: &lt;tt&gt;swap(list, i, j)&lt;/tt&gt; and &lt;tt&gt;i&lt;/tt&gt; and &lt;tt&gt;j&lt;/tt&gt; are 1.&lt;/p&gt;</comment>
                            <comment id="15028709" author="lars t" created="Thu, 26 Nov 2015 13:02:47 +0000"  >&lt;p&gt;Sorry, now got it. Thx to Timo for his tenacity.&lt;/p&gt;

&lt;p&gt;I double checked my quicksort and found out that the two pivot comparisons in each while statement were wrong. I fixed it, but this didn&apos;t solved the text extraction. Hence I did some research with a stable sorting algorithm like Bubblesort. See below for my results, I added patch for testing.&lt;/p&gt;</comment>
                            <comment id="15029119" author="tilman" created="Thu, 26 Nov 2015 17:12:11 +0000"  >&lt;p&gt;I just retested the iterative version on my now lightly larger testset after the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3062&quot; title=&quot;Text extraction and height different in 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3062&quot;&gt;&lt;del&gt;PDFBOX-3062&lt;/del&gt;&lt;/a&gt;. It is still only the &quot;spd&quot; file I mentioned earlier that is different.&lt;/p&gt;</comment>
                            <comment id="15029135" author="lars t" created="Thu, 26 Nov 2015 17:45:21 +0000"  >&lt;p&gt;I did some tests based on my assumption that the not transitive TextPositionComparator and the not stable quicksort algorithm causing some problems.&lt;/p&gt;

&lt;p&gt;I replaced the quicksort with a bubble sort algorithm. The tests with the files&lt;br/&gt;
failing_sort.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3110&quot; title=&quot;Extract by beads doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3110&quot;&gt;&lt;del&gt;PDFBOX-3110&lt;/del&gt;&lt;/a&gt;-poems-beads.pdf&lt;br/&gt;
are running well. But someone should double check this with the Lars-v0-&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2996&quot; title=&quot;StackOverflow in Quicksort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2996&quot;&gt;&lt;del&gt;PDFBOX-2996&lt;/del&gt;&lt;/a&gt;.patch&lt;/p&gt;

&lt;p&gt;005021-reduced.pdf leads to&lt;br/&gt;
ITH THE increasing complexity of optical modules,&lt;br/&gt;
W&lt;/p&gt;</comment>
                            <comment id="15029630" author="lars t" created="Fri, 27 Nov 2015 08:51:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Can you do some tests based on &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3044&quot; title=&quot;Improve text extraction tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3044&quot;&gt;&lt;del&gt;PDFBOX-3044&lt;/del&gt;&lt;/a&gt; with my patch? Can you measure the performance impact using the bubble sort instead of the quicksort also?&lt;/p&gt;

&lt;p&gt;In my opinion there won&apos;t be essential performance impacts, because the current quicksort with choosing the right index for the pivot, is causing the stack overhead. And also most texts are sorted which results in O&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; cost for the bubble sort with O(1) memory usage. But your &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3044&quot; title=&quot;Improve text extraction tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3044&quot;&gt;&lt;del&gt;PDFBOX-3044&lt;/del&gt;&lt;/a&gt; PDF set will show us some different results.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Sorting_algorithm#Comparison_of_algorithms&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Sorting_algorithm#Comparison_of_algorithms&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Later on I going to provide a clean patch set for you.&lt;/p&gt;</comment>
                            <comment id="15029726" author="lars t" created="Fri, 27 Nov 2015 10:15:50 +0000"  >&lt;p&gt;Lars-v1-&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2996&quot; title=&quot;StackOverflow in Quicksort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2996&quot;&gt;&lt;del&gt;PDFBOX-2996&lt;/del&gt;&lt;/a&gt;.patch added with a new BubbleSort class and modifications in PDFTextStripper.&lt;/p&gt;</comment>
                            <comment id="15030058" author="tilman" created="Fri, 27 Nov 2015 17:08:54 +0000"  >&lt;p&gt;005021-reduced.pdf isn&apos;t part of my test set, the W being or not being part of the rest and where it is to be positioned is a tricky question. IMHO a user can&apos;t expect the &quot;W&quot; to be part of the rest, but of course it would be nice if it is.&lt;/p&gt;

&lt;p&gt;Just for fun, I first tested forcing java&apos;s own sort algorithm first. That spd file has different results than the trunk. No exception is thrown.&lt;/p&gt;

&lt;p&gt;Java classic: 8.4sec&lt;/p&gt;

&lt;p&gt;Quicksort classic: 23.6sec&lt;/p&gt;

&lt;p&gt;Quicksort iterative: 8.3sec&lt;/p&gt;

&lt;p&gt;Bubble sort: 13.9sec&lt;/p&gt;

&lt;p&gt;Btw the result of bubble sort are also different for the spd file.&lt;/p&gt;

&lt;p&gt;So my favorite at this time would be the iterative quicksort.&lt;/p&gt;

&lt;p&gt;We shouldn&apos;t use any algorithm that wikipedia describes as &quot;slow and impractical&quot; in the first paragraph. My memory of bubble sort is that it was taught to explain the concept of describing complexity (here: O(n^2)) on a bad algorithm.&lt;/p&gt;</comment>
                            <comment id="15030106" author="lars t" created="Fri, 27 Nov 2015 17:53:34 +0000"  >&lt;p&gt;To complete my bubble sort patch I added a test case to Lars-v2-&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2996&quot; title=&quot;StackOverflow in Quicksort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2996&quot;&gt;&lt;del&gt;PDFBOX-2996&lt;/del&gt;&lt;/a&gt;.patch.&lt;/p&gt;

&lt;p&gt;Unfortunately I&apos;m getting an IOException for the spd file.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.io.IOException: Error: Could not find referenced cmap stream Identity-H
	at org.apache.fontbox.cmap.CMapParser.getExternalCMap(CMapParser.java:413)
	at org.apache.fontbox.cmap.CMapParser.parsePredefined(CMapParser.java:85)
	at org.apache.pdfbox.pdmodel.font.CMapManager.getPredefinedCMap(CMapManager.java:54)
	at org.apache.pdfbox.pdmodel.font.PDType0Font.readEncoding(PDType0Font.java:181)
	at org.apache.pdfbox.pdmodel.font.PDType0Font.&amp;lt;init&amp;gt;(PDType0Font.java:129)
	at org.apache.pdfbox.pdmodel.font.PDFontFactory.createFont(PDFontFactory.java:83)
	at org.apache.pdfbox.pdmodel.PDResources.getFont(PDResources.java:123)
	at org.apache.pdfbox.contentstream.operator.text.SetFontAndSize.process(SetFontAndSize.java:60)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processOperator(PDFStreamEngine.java:814)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStreamOperators(PDFStreamEngine.java:471)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStream(PDFStreamEngine.java:445)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processPage(PDFStreamEngine.java:149)
	at org.apache.pdfbox.text.PDFTextStreamEngine.processPage(PDFTextStreamEngine.java:130)
	at org.apache.pdfbox.text.PDFTextStripper.processPage(PDFTextStripper.java:371)
	at org.apache.pdfbox.text.PDFTextStripper.processPages(PDFTextStripper.java:307)
	at org.apache.pdfbox.text.PDFTextStripper.writeText(PDFTextStripper.java:252)
	at org.apache.pdfbox.tools.ExtractText.startExtraction(ExtractText.java:231)
	at org.apache.pdfbox.tools.ExtractText.main(ExtractText.java:81)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The bubble sort result is different for the spd file to what? The reference is Java classic?&lt;/p&gt;</comment>
                            <comment id="15030145" author="tilman" created="Fri, 27 Nov 2015 18:42:33 +0000"  >&lt;p&gt;Yes, that too.&lt;/p&gt;

&lt;p&gt;This isn&apos;t THAT important. I suspect it is related to the reason that we started with quicksort. I added this file to my test set to check for problems with BiDi texts (here: mixed arab and latin glyphs).&lt;/p&gt;

&lt;p&gt;re the exception - are you using the current version, without any changes? It works for me in 2.0 and 1.8.11.&lt;/p&gt;</comment>
                            <comment id="15030153" author="lars t" created="Fri, 27 Nov 2015 18:56:25 +0000"  >&lt;p&gt;I&apos;m using the current trunk which includes your &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3103&quot; title=&quot;Slow performance when printing PDF (fix provided)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3103&quot;&gt;&lt;del&gt;PDFBOX-3103&lt;/del&gt;&lt;/a&gt; changes also.&lt;/p&gt;

&lt;p&gt;I&apos;m running the tests with jdk1.8.0_66 on my Mac OS 10.11.1.&lt;/p&gt;

&lt;p&gt;The referenced cmap stream Identity-H couldn&apos;t be found in&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;at org.apache.pdfbox.pdmodel.font.PDType0Font.&amp;lt;init&amp;gt;(PDType0Font.java:129)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and the descendantFont name is&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;descendantFont.name=ZNZXLO+TheSansSemiBold-Caps-SC700
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should I raise an issue for that?&lt;/p&gt;</comment>
                            <comment id="15030230" author="tilman" created="Fri, 27 Nov 2015 20:43:52 +0000"  >&lt;p&gt;Yes. I won&apos;t be able to analyse that one, because I don&apos;t understand much about fonts, and I don&apos;t have a mac.&lt;/p&gt;</comment>
                            <comment id="15030235" author="lars t" created="Fri, 27 Nov 2015 21:01:46 +0000"  >&lt;p&gt;It must be a problem with my IDE setting. Maybe resource files are missing in the path, because the command line&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java -jar pdfbox-app-2.0.0-RC1.jar ExtractText -sort artikel1_20_arab.pdf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is running without any errors.&lt;/p&gt;</comment>
                            <comment id="15030250" author="lehmi" created="Fri, 27 Nov 2015 21:28:15 +0000"  >&lt;p&gt;The missing file is part of the fontbox resources&lt;/p&gt;</comment>
                            <comment id="15030255" author="lars t" created="Fri, 27 Nov 2015 21:30:26 +0000"  >&lt;p&gt;Missing resources added, now it&apos;s running well. Thx.&lt;/p&gt;

&lt;p&gt;Can you attach the artikel1_20_arab.pdf-sorted-java6.txt file for me?&lt;br/&gt;
Should this file be the reference of all diffs in your opinion?&lt;/p&gt;</comment>
                            <comment id="15030272" author="tilman" created="Fri, 27 Nov 2015 22:06:03 +0000"  >&lt;p&gt;No, I don&apos;t have JDK6. What I did was running on JDK7 but not using quicksort.&lt;/p&gt;

&lt;p&gt;Considering the weird differences and the glyphs that none of us understand, that file isn&apos;t really useful to compare sort algorithms.&lt;/p&gt;</comment>
                            <comment id="15030284" author="lars t" created="Fri, 27 Nov 2015 22:36:46 +0000"  >&lt;p&gt;Just added the output file of the iterative quick sorting algrithm with a pivot choosen from the right index. The output changes again.&lt;/p&gt;

&lt;p&gt;artikel1_20_arab.pdf-sorted-iter-withRightPivot.txt&lt;/p&gt;

&lt;p&gt;Even if the spd file isn&apos;t the right test file for us, but it shows how the different sorting algorithms have an impact on the text extraction. Maybe the stability of the algorithms have an impact on that. Hence the output file of Java 6 would be a good reference. Unfortunately I haven&apos;t Java 6 on my Mac also. I&apos;m going to use the useLegacyMergeSort option to extract the file.&lt;/p&gt;

&lt;p&gt;When a stable sorting algorithm is realy needed, which was used in Java 6, then the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1512&quot; title=&quot;TextPositionComparator is not compatible with Java 7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1512&quot;&gt;&lt;del&gt;PDFBOX-1512&lt;/del&gt;&lt;/a&gt; with quick sort was the wrong choice. My hypothesis is that the quick sorting algorithm with the right index for the pivot runs for most PDFs, but not for all. &lt;/p&gt;</comment>
                            <comment id="15030335" author="lars t" created="Sat, 28 Nov 2015 01:01:23 +0000"  >&lt;p&gt;I tried a lot and tested a lot with the spd file and Java 8 on my Mac. The results of diff-delta.png should be carefully used, because e.g. the encoding during the file comparison could change the results.&lt;/p&gt;

&lt;p&gt;The expected result is that quick sort recursive and quick sort iterative with choosing the right index for the pivot are equal.&lt;/p&gt;

&lt;p&gt;Bubble sort is very close to the Java 8 legacy merge sort.&lt;/p&gt;

&lt;p&gt;Java 8 legacy merge sort and the Java 8 tim sort (introduced in Java 7) are very different.&lt;/p&gt;

&lt;p&gt;Tommorrow I&apos;m trying to reproduce the output files and the test results.&lt;/p&gt;</comment>
                            <comment id="15030659" author="lars t" created="Sat, 28 Nov 2015 20:46:46 +0000"  >&lt;p&gt;I can reproduce my tests results as documented in diff-delta.png. Using WinDiff to look into the differences between the results I can see the weird differences and the glyphs that none of us both understand also.&lt;/p&gt;

&lt;p&gt;In my opinion the number of the deltas can be used as an measurement of the sorting algorithms. And when legacy merge sort is the base line, which was used until &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1512&quot; title=&quot;TextPositionComparator is not compatible with Java 7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1512&quot;&gt;&lt;del&gt;PDFBOX-1512&lt;/del&gt;&lt;/a&gt;, then bubble sort should be used as a substitution of it.&lt;/p&gt;

&lt;p&gt;Otherwise the iterative quick sort with choosing the right index for the pivot is the best choice and substitution for the current recursive quick sort. This would solve the issue &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2996&quot; title=&quot;StackOverflow in Quicksort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2996&quot;&gt;&lt;del&gt;PDFBOX-2996&lt;/del&gt;&lt;/a&gt;, but you should reminder that Java 5&amp;amp;6 are having different text extraction results than Java 7+ on certain PDF files.&lt;/p&gt;</comment>
                            <comment id="15034255" author="tilman" created="Tue, 1 Dec 2015 18:18:36 +0000"  >&lt;p&gt;Here&apos;s a list of files from my rendering tests that fail with TimSort. The files can be found with their issue or with google.&lt;/p&gt;

&lt;p&gt;Basiswissen-Vorschriften.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1292&quot; title=&quot;Rendering of certain documents results in large tracts of blank space - even though contents can be extracted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1292&quot;&gt;&lt;del&gt;PDFBOX-1292&lt;/del&gt;&lt;/a&gt;.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1359&quot; title=&quot;stack overflow~~  ExtractText (PDF2TXT) &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1359&quot;&gt;&lt;del&gt;PDFBOX-1359&lt;/del&gt;&lt;/a&gt;.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2163&quot; title=&quot;inline image with EI in the middle incorrectly parsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2163&quot;&gt;&lt;del&gt;PDFBOX-2163&lt;/del&gt;&lt;/a&gt;-152584.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2163&quot; title=&quot;inline image with EI in the middle incorrectly parsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2163&quot;&gt;&lt;del&gt;PDFBOX-2163&lt;/del&gt;&lt;/a&gt;-258126.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2163&quot; title=&quot;inline image with EI in the middle incorrectly parsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2163&quot;&gt;&lt;del&gt;PDFBOX-2163&lt;/del&gt;&lt;/a&gt;-876636.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2187&quot; title=&quot;ArrayIndexOutOfBoundsException in TIFFFaxDecoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2187&quot;&gt;&lt;del&gt;PDFBOX-2187&lt;/del&gt;&lt;/a&gt;-002145.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2188&quot; title=&quot;java.io.IOException: Expected a name or array but got: COSObject{1823, 0}&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2188&quot;&gt;&lt;del&gt;PDFBOX-2188&lt;/del&gt;&lt;/a&gt;.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2250&quot; title=&quot;Improve XRef self healing mechanism&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2250&quot;&gt;&lt;del&gt;PDFBOX-2250&lt;/del&gt;&lt;/a&gt;-113223.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2367&quot; title=&quot;Ligature glyph widths wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2367&quot;&gt;&lt;del&gt;PDFBOX-2367&lt;/del&gt;&lt;/a&gt;.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2385&quot; title=&quot;inline image with EI at the end incorrectly parsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2385&quot;&gt;&lt;del&gt;PDFBOX-2385&lt;/del&gt;&lt;/a&gt;-032992.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2385&quot; title=&quot;inline image with EI at the end incorrectly parsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2385&quot;&gt;&lt;del&gt;PDFBOX-2385&lt;/del&gt;&lt;/a&gt;-862497.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2845&quot; title=&quot;Error parsing PDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2845&quot;&gt;&lt;del&gt;PDFBOX-2845&lt;/del&gt;&lt;/a&gt;.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2904&quot; title=&quot;IndexOutOfBoundsException in CFFType1Font.getType2CharString()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2904&quot;&gt;&lt;del&gt;PDFBOX-2904&lt;/del&gt;&lt;/a&gt;-378255.pdf&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2939&quot; title=&quot;PDFRenderer.renderImageWithDPI exception with certain PDFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2939&quot;&gt;&lt;del&gt;PDFBOX-2939&lt;/del&gt;&lt;/a&gt;.pdf&lt;br/&gt;
PDFJS-1324-2012_visitorsguide_web.pdf&lt;br/&gt;
PDFJS-1732.pdf&lt;/p&gt;</comment>
                            <comment id="15035888" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"  >&lt;p&gt;Adding further comparision charts and the text extraction of each sorting algorithm. timsort results are added, but the text extractions were terminated before completion, due to the known facts.&lt;/p&gt;</comment>
                            <comment id="15045099" author="lars t" created="Mon, 7 Dec 2015 15:46:41 +0000"  >&lt;p&gt;I finished my tests several days ago. Please tell me if I can perform futher tests for you.&lt;/p&gt;</comment>
                            <comment id="15083551" author="lehmi" created="Tue, 5 Jan 2016 18:51:31 +0000"  >&lt;p&gt;What is the status of this ticket? Is there any work around/fix for the stack overflow or do we have to solve the transitive issue first?&lt;/p&gt;</comment>
                            <comment id="15083560" author="tilman" created="Tue, 5 Jan 2016 18:57:31 +0000"  >&lt;p&gt;This is about choosing a replacement sort. I had a look at the diff tables that Lars made, but my opinion is still the one I wrote on 27/Nov/15 18:08, i.e. take the solution by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maristaran&quot; class=&quot;user-hover&quot; rel=&quot;maristaran&quot;&gt;maristaran&lt;/a&gt; because it is fast &lt;del&gt;(although some sort outputs will be different)&lt;/del&gt;.&lt;/p&gt;</comment>
                            <comment id="15083571" author="lehmi" created="Tue, 5 Jan 2016 19:08:27 +0000"  >&lt;p&gt;So let&apos;s apply that patch and see what happens. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Do you want to do that or should I?&lt;/p&gt;</comment>
                            <comment id="15083630" author="tilman" created="Tue, 5 Jan 2016 19:36:15 +0000"  >&lt;p&gt;I&apos;ll do it.&lt;/p&gt;</comment>
                            <comment id="15083684" author="jira-bot" created="Tue, 5 Jan 2016 20:01:03 +0000"  >&lt;p&gt;Commit 1723153 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1723153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1723153&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2996&quot; title=&quot;StackOverflow in Quicksort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2996&quot;&gt;&lt;del&gt;PDFBOX-2996&lt;/del&gt;&lt;/a&gt;: replace quicksort with iterative quicksort, by Manuel Aristaran&lt;/p&gt;</comment>
                            <comment id="15083732" author="jira-bot" created="Tue, 5 Jan 2016 20:39:17 +0000"  >&lt;p&gt;Commit 1723157 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1723157&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1723157&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2996&quot; title=&quot;StackOverflow in Quicksort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2996&quot;&gt;&lt;del&gt;PDFBOX-2996&lt;/del&gt;&lt;/a&gt;: replace quicksort with iterative quicksort, by Manuel Aristaran&lt;/p&gt;</comment>
                            <comment id="15085221" author="tilman" created="Wed, 6 Jan 2016 08:49:36 +0000"  >&lt;p&gt;All sort outputs were identical.&lt;/p&gt;</comment>
                            <comment id="15085222" author="tilman" created="Wed, 6 Jan 2016 08:50:21 +0000"  >&lt;p&gt;Only one sort output was different, of a bidi file that isn&apos;t part of the official test set.&lt;/p&gt;</comment>
                            <comment id="15085264" author="lehmi" created="Wed, 6 Jan 2016 09:11:25 +0000"  >&lt;p&gt;Is it worst or just different? &lt;/p&gt;</comment>
                            <comment id="15085883" author="tilman" created="Wed, 6 Jan 2016 17:31:50 +0000"  >&lt;p&gt;Impossible to tell, because I can&apos;t read arabic. I copied all test files from 2.0 to 1.8 and there were two more differences, but it applied to files where it is hard to tell what the correct result should be (two columns with lines with y-coordinates near each other). When comparing, sometimes the &quot;old&quot; was better, sometimes the &quot;new&quot; was better. (&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3062&quot; title=&quot;Text extraction and height different in 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3062&quot;&gt;&lt;del&gt;PDFBOX-3062&lt;/del&gt;&lt;/a&gt;-005021.pdf).&lt;/p&gt;

&lt;p&gt;IMHO the sort option shouldn&apos;t be used by default, unless one expects tables (e.g. invoices).&lt;/p&gt;</comment>
                            <comment id="15085892" author="jira-bot" created="Wed, 6 Jan 2016 17:34:11 +0000"  >&lt;p&gt;Commit 1723388 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1723388&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1723388&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2996&quot; title=&quot;StackOverflow in Quicksort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2996&quot;&gt;&lt;del&gt;PDFBOX-2996&lt;/del&gt;&lt;/a&gt;: fix bug that the test compared two identical arrays&lt;/p&gt;</comment>
                            <comment id="15085895" author="jira-bot" created="Wed, 6 Jan 2016 17:34:52 +0000"  >&lt;p&gt;Commit 1723389 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1723389&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1723389&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2996&quot; title=&quot;StackOverflow in Quicksort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2996&quot;&gt;&lt;del&gt;PDFBOX-2996&lt;/del&gt;&lt;/a&gt;: fix bug that the test compared two identical arrays&lt;/p&gt;</comment>
                            <comment id="15085905" author="jira-bot" created="Wed, 6 Jan 2016 17:37:53 +0000"  >&lt;p&gt;Commit 1723391 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1723391&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1723391&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2996&quot; title=&quot;StackOverflow in Quicksort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2996&quot;&gt;&lt;del&gt;PDFBOX-2996&lt;/del&gt;&lt;/a&gt;: add bigger test&lt;/p&gt;</comment>
                            <comment id="15085906" author="jira-bot" created="Wed, 6 Jan 2016 17:38:17 +0000"  >&lt;p&gt;Commit 1723392 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1723392&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1723392&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2996&quot; title=&quot;StackOverflow in Quicksort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2996&quot;&gt;&lt;del&gt;PDFBOX-2996&lt;/del&gt;&lt;/a&gt;: add bigger test&lt;/p&gt;</comment>
                            <comment id="15086192" author="tilman" created="Wed, 6 Jan 2016 20:03:48 +0000"  >&lt;p&gt;Setting to resolved. Thanks to everybody for their inputs.&lt;/p&gt;</comment>
                            <comment id="15090563" author="tilman" created="Sat, 9 Jan 2016 11:22:19 +0000"  >&lt;p&gt;DNP2K2VFE3VUCAWHY242M3TIXCXIH24G.pdf is an example of a file where sort is needed despite not having tables, because the glyphs are not ordered.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12631225">PDFBOX-1512</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12774172" name="001991.pdf" size="17462" author="tilman" created="Tue, 24 Nov 2015 21:59:15 +0000"/>
                            <attachment id="12775291" name="Basiswissen-Vorschriften.pdf-diffs.png" size="98514" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775292" name="Basiswissen-Vorschriften.pdf-sorted-bubble.txt" size="45023" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775293" name="Basiswissen-Vorschriften.pdf-sorted-java8-legacyMergeSort.txt" size="45022" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775294" name="Basiswissen-Vorschriften.pdf-sorted-java8-timsort.txt" size="33013" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775295" name="Basiswissen-Vorschriften.pdf-sorted-qs-iterative-withMiddlePivot.txt" size="45051" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775296" name="Basiswissen-Vorschriften.pdf-sorted-qs-iterative-withRightPivot.txt" size="45046" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775297" name="Basiswissen-Vorschriften.pdf-sorted-qs-recursive.txt" size="45046" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12781391" name="DNP2K2VFE3VUCAWHY242M3TIXCXIH24G.pdf" size="390703" author="tilman" created="Sat, 9 Jan 2016 11:22:19 +0000"/>
                            <attachment id="12774543" name="Lars-v0-PDFBOX-2996.patch" size="1035" author="lars t" created="Thu, 26 Nov 2015 17:45:21 +0000"/>
                            <attachment id="12774602" name="Lars-v1-PDFBOX-2996.patch" size="5014" author="lars t" created="Fri, 27 Nov 2015 10:15:50 +0000"/>
                            <attachment id="12774654" name="Lars-v2-PDFBOX-2996.patch" size="8507" author="lars t" created="Fri, 27 Nov 2015 17:53:34 +0000"/>
                            <attachment id="12775298" name="PDFBOX-1292.pdf-diffs.png" size="99336" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775299" name="PDFBOX-1292.pdf-sorted-bubble.txt" size="51458" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775300" name="PDFBOX-1292.pdf-sorted-java8-legacyMergeSort.txt" size="51460" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775301" name="PDFBOX-1292.pdf-sorted-java8-timsort.txt" size="18251" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775302" name="PDFBOX-1292.pdf-sorted-qs-iterative-withMiddlePivot.txt" size="51465" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775303" name="PDFBOX-1292.pdf-sorted-qs-iterative-withRightPivot.txt" size="51471" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12775304" name="PDFBOX-1292.pdf-sorted-qs-recursive.txt" size="51471" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12774390" name="QuickSort.java" size="2913" author="lars t" created="Wed, 25 Nov 2015 18:18:36 +0000"/>
                            <attachment id="12774683" name="TestSortingAlgorithms.java" size="2314" author="lars t" created="Sat, 28 Nov 2015 01:03:10 +0000"/>
                            <attachment id="12775290" name="artikel1_20_arab.pdf-diffs.png" size="89607" author="lars t" created="Wed, 2 Dec 2015 14:39:47 +0000"/>
                            <attachment id="12774667" name="artikel1_20_arab.pdf-sorted-bubble.txt" size="60370" author="lars t" created="Fri, 27 Nov 2015 21:30:56 +0000"/>
                            <attachment id="12774161" name="artikel1_20_arab.pdf-sorted-diff.txt" size="5482" author="tilman" created="Tue, 24 Nov 2015 21:36:47 +0000"/>
                            <attachment id="12774669" name="artikel1_20_arab.pdf-sorted-iter-withRightPivot.txt" size="60379" author="lars t" created="Fri, 27 Nov 2015 22:36:46 +0000"/>
                            <attachment id="12774162" name="artikel1_20_arab.pdf-sorted-iter.txt" size="60395" author="tilman" created="Tue, 24 Nov 2015 21:36:47 +0000"/>
                            <attachment id="12774677" name="artikel1_20_arab.pdf-sorted-java8-legacyMergeSort.txt" size="60369" author="lars t" created="Sat, 28 Nov 2015 01:01:23 +0000"/>
                            <attachment id="12774678" name="artikel1_20_arab.pdf-sorted-java8-timsort.txt" size="60378" author="lars t" created="Sat, 28 Nov 2015 01:01:23 +0000"/>
                            <attachment id="12774679" name="artikel1_20_arab.pdf-sorted-qs-iterative-withMiddlePivot.txt" size="60375" author="lars t" created="Sat, 28 Nov 2015 01:01:23 +0000"/>
                            <attachment id="12774680" name="artikel1_20_arab.pdf-sorted-qs-iterative-withRightPivot.txt" size="60379" author="lars t" created="Sat, 28 Nov 2015 01:01:23 +0000"/>
                            <attachment id="12774681" name="artikel1_20_arab.pdf-sorted-qs-recursive.txt" size="60379" author="lars t" created="Sat, 28 Nov 2015 01:01:23 +0000"/>
                            <attachment id="12774163" name="artikel1_20_arab.pdf-sorted-rekur.txt" size="60399" author="tilman" created="Tue, 24 Nov 2015 21:36:47 +0000"/>
                            <attachment id="12774155" name="failing_sort.pdf" size="14074" author="maristaran" created="Tue, 24 Nov 2015 21:20:04 +0000"/>
                            <attachment id="12774147" name="quicksort.patch" size="3093" author="maristaran" created="Tue, 24 Nov 2015 20:37:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2llpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>