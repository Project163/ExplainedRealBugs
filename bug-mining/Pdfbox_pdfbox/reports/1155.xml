<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:01:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2323] More flexible image caching (OOM)</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2323</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Image caching in PDImageXObject can cause very high memory usage which has resulted in issues &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2313&quot; title=&quot;ExtractImages finds never-rendered images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2313&quot;&gt;&lt;del&gt;PDFBOX-2313&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2310&quot; title=&quot;codeToGID NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2310&quot;&gt;&lt;del&gt;PDFBOX-2310&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2101&quot; title=&quot;Surprising memory consumption when extracting images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2101&quot;&gt;&lt;del&gt;PDFBOX-2101&lt;/del&gt;&lt;/a&gt;. Images are just so large that the current &quot;on size fits all&quot; caching isn&apos;t working well.&lt;/p&gt;

&lt;p&gt;Pushing responsibility for caching down to callers of PDImage#getImage() would allow for use-case specific caching strategies, for example PDFRenderer could cache small images for the duration of a document being rendered, rather than having to re-create the PDImageXObject again for every page on which it appears. Likewise caching of large images could be limited to a single page, or not at all.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12739543">PDFBOX-2323</key>
            <summary>More flexible image caching (OOM)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jahewson">John Hewson</assignee>
                                    <reporter username="jahewson">John Hewson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Sep 2014 18:06:03 +0000</created>
                <updated>Sat, 22 Jul 2017 09:54:31 +0000</updated>
                            <resolved>Thu, 9 Jul 2015 05:36:00 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>PDModel</component>
                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14132638" author="tilman" created="Sat, 13 Sep 2014 11:18:04 +0000"  >&lt;p&gt;The attached file &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2323&quot; title=&quot;More flexible image caching (OOM)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2323&quot;&gt;&lt;del&gt;PDFBOX-2323&lt;/del&gt;&lt;/a&gt;-245999-p7-outofmemory.pdf renders with an OutOfMemoryError. The reason is that it has thousands of images; although these are assigned to only a few objects, it results in thousands of cached images. I am able to render it if I disable the image caching. (remove the line &quot;cachedImage = image;&quot; in PDImageXObject)&lt;/p&gt;</comment>
                            <comment id="14614816" author="lehmi" created="Mon, 6 Jul 2015 10:07:35 +0000"  >&lt;p&gt;Everything works fine using the current trunk version. I&apos;ve checked PDFReader and PDFToImage -resolution 300 using the attached pdf.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Do you still have the described issue?&lt;/p&gt;</comment>
                            <comment id="14615505" author="tilman" created="Mon, 6 Jul 2015 19:13:58 +0000"  >&lt;p&gt;No!&lt;/p&gt;</comment>
                            <comment id="14616196" author="jahewson" created="Tue, 7 Jul 2015 05:20:56 +0000"  >&lt;p&gt;I was thinking of changing &quot;cachedImage&quot; to a WeakReference&amp;lt;BufferedImage&amp;gt;, WDYT?&lt;/p&gt;</comment>
                            <comment id="14616261" author="tilman" created="Tue, 7 Jul 2015 06:33:09 +0000"  >&lt;p&gt;Yes... although after reading this&lt;br/&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/299659/what-is-the-difference-between-a-soft-reference-and-a-weak-reference-in-java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/299659/what-is-the-difference-between-a-soft-reference-and-a-weak-reference-in-java&lt;/a&gt;&lt;br/&gt;
I suspect that SoftReference would be better.&lt;/p&gt;</comment>
                            <comment id="14619931" author="jahewson" created="Thu, 9 Jul 2015 05:31:08 +0000"  >&lt;p&gt;Yep, that&apos;s perfect, SoftReference it is.&lt;/p&gt;</comment>
                            <comment id="14619934" author="jira-bot" created="Thu, 9 Jul 2015 05:35:24 +0000"  >&lt;p&gt;Commit 1689988 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1689988&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1689988&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2323&quot; title=&quot;More flexible image caching (OOM)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2323&quot;&gt;&lt;del&gt;PDFBOX-2323&lt;/del&gt;&lt;/a&gt;: Use a SoftReference for cached image data&lt;/p&gt;</comment>
                            <comment id="16097198" author="yachunmiao" created="Sat, 22 Jul 2017 09:34:03 +0000"  >&lt;p&gt;But use SoftReference will result in JVM full gc frequently. It is better make it optional, user can decide use imgae cache or not. In some case, the PDImageXObject.getImage() will only be called once, but the image is forcely be cached as softreference&lt;/p&gt;</comment>
                            <comment id="16097201" author="yachunmiao" created="Sat, 22 Jul 2017 09:38:29 +0000"  >&lt;p&gt;How about we check if PDImageXObject.getImage() is called more than some times (The threshold would be confugurable: like N, by default you can set it as 1 like current implementaion, the export this as an option. which seems more flexiable) &lt;/p&gt;</comment>
                            <comment id="16097213" author="lehmi" created="Sat, 22 Jul 2017 09:54:31 +0000"  >&lt;p&gt;This ticket was closed a year ago. Please start a discussion on the &lt;a href=&quot;https://pdfbox.apache.org/mailinglists.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;mailing list&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12717072">PDFBOX-2101</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12742908">PDFBOX-2370</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12668573" name="PDFBOX-2323-245999-p7-outofmemory.pdf" size="476968" author="tilman" created="Sat, 13 Sep 2014 11:18:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zqhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>