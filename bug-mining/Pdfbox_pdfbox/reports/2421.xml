<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:10:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4421] Add support for AES128 encryption for public key</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4421</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Follow-up of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4413&quot; title=&quot;Add support for AES256 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4413&quot;&gt;&lt;del&gt;PDFBOX-4413&lt;/del&gt;&lt;/a&gt;. AES256 works for public key crypto, but AES128 doesn&apos;t when the file is generated by an external software. (local tests work) We should at least get the decryption to work.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13207512">PDFBOX-4421</key>
            <summary>Add support for AES128 encryption for public key</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                            <label>AES128</label>
                    </labels>
                <created>Thu, 3 Jan 2019 16:54:08 +0000</created>
                <updated>Sun, 20 Dec 2020 18:48:18 +0000</updated>
                            <resolved>Wed, 7 Oct 2020 16:16:00 +0000</resolved>
                                    <version>2.0.13</version>
                                    <fixVersion>2.0.22</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Crypto</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17196790" author="capsvd" created="Wed, 16 Sep 2020 08:37:49 +0000"  >&lt;p&gt;It would be one of our requirements for this to work and maybe we could contribute to resolve this issue? I am currently evaluating what might be the exact problem here and how it could be resolved.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;As far as I understand it:&lt;/b&gt;&lt;br/&gt;
 &lt;font color=&quot;#000000&quot;&gt;org.apache.pdfbox.pdmodel.encryption.SecurityHandler&lt;/font&gt; attempts to determine a key of the correct length and content using the method &quot;calcFinalKey&quot;, which is dependend on the &quot;Length&quot; COSDictionary entry of a document&apos;s &quot;Encryption&quot; dictionary, which should work, if the dictionary value &quot;V&quot; is set to either 2 or 3.&lt;/p&gt;

&lt;p&gt;But as &quot;Length&quot; is optional, defaults to 40 and is not used by &quot;V&quot; 4, this will create a key of insufficient length and padding (length: 10 = 40/8+5) for AES128 encrypted documents (As e.g. currently created by Adobe DC)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13011599/13011599_image-2020-09-16-10-32-11-060.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;According to the Reference Manual &quot;V&quot; 4 should make use of the entries &quot;CF&quot; &quot;StmF&quot; &quot;StrF&quot; to provide information about the used algorithm:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13011600/13011600_image-2020-09-16-10-33-55-201.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Questions:&lt;/b&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Is my analysis correct?&lt;/li&gt;
	&lt;li&gt;Is implementing &quot;V&quot; 4 the missing piece here?&lt;/li&gt;
	&lt;li&gt;Do you have further information, that could be helpful to implement this?&lt;/li&gt;
	&lt;li&gt;Is this something, that I could possibly help with, or is a solution coming anyway?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Edit:&lt;/b&gt;&lt;br/&gt;
Having read through &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4413&quot; title=&quot;Add support for AES256 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4413&quot;&gt;&lt;del&gt;PDFBOX-4413&lt;/del&gt;&lt;/a&gt; and some related tickets, my guess is, that PublicKeySecurityHandler should be operating somewhat comparable to the StandardSecurityHandler, concerning algorithms and especially &quot;V&quot; (which already seems to define behaviour for V 0 through 6).&lt;br/&gt;
I think exactly here would be the place to start this: &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13011617/13011617_image-2020-09-16-11-55-33-275.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17197129" author="tilman" created="Wed, 16 Sep 2020 17:13:05 +0000"  >&lt;p&gt;Encryption and decryption is there but IIRC length 128 doesn&apos;t work with external software. I don&apos;t have enough time right now, sadly. Maybe in a few days. Yes this is something you could try. I tried at that time and wasn&apos;t successful. The file I created at that time does have /V 4. But it&apos;s really the decryption that matters most. There is no real need to encrypt with 128, one should choose 256 (which works).&lt;/p&gt;</comment>
                            <comment id="17197520" author="capsvd" created="Thu, 17 Sep 2020 08:55:18 +0000"  >&lt;p&gt;Hmmm, I am not entirely sure yet, but possibly the current code is missing only 2 simple steps for success? (speaking about decryption)&lt;/p&gt;

&lt;p&gt;I must state this first: I am absolutely uncertain about the following!&lt;/p&gt;

&lt;p&gt;I tried to understand and play arround with your code and attempted to understand which part does what and which variable represents what COS Structure. Leading me to two simple assumptions, that I guessed would lead to satisfying results.&lt;br/&gt;
(I can neither guarantee, that this really solves the issue, nor that this won&apos;t brake for some cases, but your thoughts about it would be absolutely helpful!)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Basic Assumption:&lt;/b&gt;&lt;br/&gt;
This should work! I can find the parts of the Reference manual, that are represented here and I can&apos;t find big definition gaps at first glance.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;1. Assumption: The assumed key length is wrong (40 instead of 128):&lt;/b&gt;&lt;br/&gt;
The method &quot;prepareForDecryption&quot; in PublicKeySecurityHandler is currently determining the key length via the PDEncryption dictionary encryption.getLength(). for the case &lt;ins&gt;if (encryption.getVersion() == 4 || encryption.getVersion() == 5)&lt;/ins&gt; possibly it should be modified like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// detect whether AES encryption is used. This assumes that the encryption algo is 
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// stored in the PDCryptFilterDictionary
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// However, crypt filters are used only when V is 4 or 5.
&lt;/span&gt;PDCryptFilterDictionary defaultCryptFilterDictionary = encryption.getDefaultCryptFilterDictionary();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (defaultCryptFilterDictionary != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (defaultCryptFilterDictionary.getLength() != 0) {
      setKeyLength(defaultCryptFilterDictionary.getLength());
   }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;2. Assumption: Now that it accepts, that the key length is 128, the message digest is wrong.&lt;/b&gt;&lt;br/&gt;
For my test document it now succeeded in creating the cipher, but reported a wrong padding / a wrong key, when trying doFinal(). I was absolutely certain to provide the corrrect password, alias and keystore to a matching document, therefore: The message digest - determining the key - can not be correct. I found this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (encryption.getVersion() == 4 || encryption.getVersion() == 5) {
   mdResult = MessageDigests.getSHA256().digest(sha1Input);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And simply changed it to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (encryption.getVersion() == 4 || encryption.getVersion() == 5) {
   mdResult = MessageDigests.getSHA1().digest(sha1Input);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;A change which will most definately brake the AES256 handling, but I ignored that for now. (possibly V4 and V5 should be handled in separate cases for this reason?&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Could these assumptions be possibly correct?&lt;/b&gt;&lt;br/&gt;
I created a AES128 encrypted document using Adobe DC and wrote a most simplistic test, that shall load said document using my testkeystore and shall determine the number of pages:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; password = &lt;span class=&quot;code-quote&quot;&gt;&quot;w!z%C*F-JaNdRgUk&quot;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; alias = &lt;span class=&quot;code-quote&quot;&gt;&quot;testnutzer&quot;&lt;/span&gt;;

@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void openEncDoc() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    File keystore = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;C:\\Users\\cap.SVD\\Desktop&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;keystore.pfx&quot;&lt;/span&gt;);
    File encDoc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;C:\\Users\\cap.SVD\\Desktop&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;B2-Adobe-128-aes-sec.pdf&quot;&lt;/span&gt;);

    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Now loading and decrypting: &quot;&lt;/span&gt; + encDoc.getAbsolutePath());
    InputStream keyStoreData = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(keystore);
    PDDocument doc = PDDocument.load(encDoc, password, keyStoreData, alias);
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
       &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot; SUCCESS decrypting document, it has &quot;&lt;/span&gt; + doc.getNumberOfPages() + &lt;span class=&quot;code-quote&quot;&gt;&quot; pages.&quot;&lt;/span&gt;);
    } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
       keyStoreData.close();
       doc.close();
    }
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which failed previously for said document and now results in the output:&lt;br/&gt;
Now loading and decrypting: C:\Users\cap.SVD\Desktop\B2-Adobe-128-aes-sec.pdf&lt;br/&gt;
 SUCCESS decrypting document, it has 3 pages.&lt;/p&gt;

&lt;p&gt;-The document has been successfully decrypted and the number of pages could be determined?&lt;/p&gt;

&lt;p&gt;I really don&apos;t trust myself here, therefore: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Where am I seeing things too simple or could this possibly be the solution?&lt;br/&gt;
I will definately follow this lead for now - as it resulted in a success - but I don&apos;t trust that success yet neither, further testing is required and this is for now quick and dirty trash code, to simply make it work (somehow).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Edit:&lt;/b&gt;&lt;br/&gt;
Applying the same assumptions to &quot;prepareDocumentForEncryption&quot; also resulted in a AES128 encrypted document, that could be opened by Adobe DC and still contained everything it shall contain (or so it seems).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (version == 4)
{
   dictionary.setSubFilter(SUBFILTER5);
   mdResult = MessageDigests.getSHA1().digest(shaInput);
   COSName aesVName = COSName.AESV2;
   prepareEncryptionDictAES(dictionary, aesVName, recipientsFields);
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(version == 5) {
   dictionary.setSubFilter(SUBFILTER5);
   mdResult = MessageDigests.getSHA256().digest(shaInput);
   COSName aesVName = COSName.AESV3;
   prepareEncryptionDictAES(dictionary, aesVName, recipientsFields);
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
   dictionary.setSubFilter(SUBFILTER4);
   mdResult = MessageDigests.getSHA1().digest(shaInput);
   dictionary.setRecipients(recipientsFields);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Currently I would not agree to, that you were unssuccesful here - but maybe you missed two things?&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Edit2:&lt;/b&gt;&lt;br/&gt;
I saved the decrypted document using doc.setAllSecurityToBeRemoved(true); to be sure, that PDFBox would do something with it and would not simply write it back as is.&lt;/p&gt;

&lt;p&gt;The decrypted document also seems to be complete, readable and perfectly fine.&lt;br/&gt;
I guess I will wait for your feedback now - either I am missing some obvious issues here, or this ticket had been nearly resolved then and is simply missing some minor details.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Edit3:&lt;/b&gt;&lt;br/&gt;
I am attaching the draft for my current suggestion as a patch file to this issue. This does currently not contain additional Tests (as my currently existing tests are not really helpful for automated testing) I did not yet run any of the PDFBox tests and it contains some further suggestions. (mostly pushing some functionality to super classes to avoid code redundancies.)&lt;br/&gt;
This is simply a draft, so that you can reproduce what I am doing here.&lt;/p&gt;</comment>
                            <comment id="17197787" author="tilman" created="Thu, 17 Sep 2020 16:20:33 +0000"  >&lt;p&gt;great job, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=capSVD&quot; class=&quot;user-hover&quot; rel=&quot;capSVD&quot;&gt;capSVD&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;I&apos;ll do the core changes first, and do the refactorings later. I prefer small commits that focus on a narrow topic. (There is no such &quot;rule&quot;, it&apos;s just me, because it&apos;s easier when doing &quot;archeology&quot; years later)&lt;/p&gt;</comment>
                            <comment id="17197997" author="capsvd" created="Thu, 17 Sep 2020 22:02:15 +0000"  >&lt;p&gt;You&apos;re welcome and thanks!&lt;br/&gt;
As always, concerning my suggestions: Do entirely as you please!&lt;/p&gt;

&lt;p&gt;Indeed smaller and more focussed commits would be better and I should surely follow that &quot;rule&quot; too. But I get carried away - changing things here and there as I go along. Refactoring this and that. And wouldn&apos;t it be nice if.... It&apos;s more or less me trying to understand things. &quot;If that didn&apos;t brake it, then I understood it.&quot;&lt;br/&gt;
I already reduced that, but am still working on it. Simply read such things as mere suggestions. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17198359" author="capsvd" created="Fri, 18 Sep 2020 14:00:47 +0000"  >&lt;p&gt;&lt;b&gt;Concerning AES-256:&lt;/b&gt;&lt;br/&gt;
 I won&apos;t have the time to further check and verify this, as I will be on vacation for the next 2 weeks, but: I also stumbled upon the keylength problem for AES-256. For AES-128 and AES-256 Adobe DC apparently never sets the optional /Length entry for the encryption dictionary - possibly AES-256 should also rather search the Filters for such a length entry additionally. As pointed out above: Otherwise it will attempt to use the default value (40) and will fail to decrypt documents for that reason:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13011751/13011751_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Also see: B2-AES-256-secured.pdf for an example&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Edit:&lt;/b&gt; Updated patch has been provided - this should fix it, but should be tested.&lt;/p&gt;</comment>
                            <comment id="17198385" author="tilman" created="Fri, 18 Sep 2020 14:51:23 +0000"  >&lt;p&gt;I assume this patch is against the version before I made my changes, because it gets refused (&quot;Cannot apply hunk&quot;). However both of your files get opened and read with the current code. But don&apos;t worry, when it&apos;s all done I&apos;ll also have two test files created not with PDFBox to make sure that the code is good with files without the length entry.&lt;/p&gt;</comment>
                            <comment id="17198401" author="jira-bot" created="Fri, 18 Sep 2020 15:28:54 +0000"  >&lt;p&gt;Commit 1881823 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881823&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: pull up AES stuff because it will be used by both security handlers, as suggested by Christian Appl&lt;/p&gt;</comment>
                            <comment id="17198402" author="jira-bot" created="Fri, 18 Sep 2020 15:28:58 +0000"  >&lt;p&gt;Commit 1881824 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881824&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881824&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: pull up AES stuff because it will be used by both security handlers, as suggested by Christian Appl&lt;/p&gt;</comment>
                            <comment id="17198500" author="jira-bot" created="Fri, 18 Sep 2020 18:58:54 +0000"  >&lt;p&gt;Commit 1881827 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881827&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881827&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: pull up protection policy and computing version number, because it will be used by both security handlers, as suggested by Christian Appl&lt;/p&gt;</comment>
                            <comment id="17198501" author="jira-bot" created="Fri, 18 Sep 2020 18:58:59 +0000"  >&lt;p&gt;Commit 1881828 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881828&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881828&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: pull up protection policy and computing version number, because it will be used by both security handlers, as suggested by Christian Appl&lt;/p&gt;</comment>
                            <comment id="17198684" author="jira-bot" created="Sat, 19 Sep 2020 08:59:28 +0000"  >&lt;p&gt;Commit 1881841 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881841&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881841&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: user getters/setters for keyLength, as suggested by Christian Appl&lt;/p&gt;</comment>
                            <comment id="17198685" author="jira-bot" created="Sat, 19 Sep 2020 08:59:45 +0000"  >&lt;p&gt;Commit 1881842 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881842&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881842&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: use getters/setters for keyLength and make it private, as suggested by Christian Appl&lt;/p&gt;</comment>
                            <comment id="17198690" author="jira-bot" created="Sat, 19 Sep 2020 09:38:25 +0000"  >&lt;p&gt;Commit 1881843 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881843&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881843&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: use getters/setters for encryptionKey and make it private, as suggested by Christian Appl&lt;/p&gt;</comment>
                            <comment id="17198691" author="jira-bot" created="Sat, 19 Sep 2020 09:38:39 +0000"  >&lt;p&gt;Commit 1881844 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881844&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881844&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: use getters/setters for encryptionKey, as suggested by Christian Appl&lt;/p&gt;</comment>
                            <comment id="17198723" author="tilman" created="Sat, 19 Sep 2020 12:59:12 +0000"  >&lt;p&gt;I wanted to add small files created with itext but after reading their license, I realize I can&apos;t, even if I&apos;d publish the source code, because it may not be used in a &quot;non AGPL environment&quot;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=capSVD&quot; class=&quot;user-hover&quot; rel=&quot;capSVD&quot;&gt;capSVD&lt;/a&gt; when back, could you please create two very small files with the software you used, only with one page, and the text &quot;Key length: 128&quot; and &quot;Key length: 256&quot;. Your two files are too large because I&apos;d like to include them in the source distribution as part of a test.&lt;/p&gt;</comment>
                            <comment id="17198771" author="jira-bot" created="Sat, 19 Sep 2020 15:45:34 +0000"  >&lt;p&gt;Commit 1881852 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881852&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881852&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: use template, as suggested by Christian Appl&lt;/p&gt;</comment>
                            <comment id="17198800" author="jira-bot" created="Sat, 19 Sep 2020 17:08:23 +0000"  >&lt;p&gt;Commit 1881853 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881853&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881853&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: Sonar fix: provide the parametrized type&lt;/p&gt;</comment>
                            <comment id="17198810" author="jira-bot" created="Sat, 19 Sep 2020 17:47:25 +0000"  >&lt;p&gt;Commit 1881854 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881854&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881854&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: add temporary tests&lt;/p&gt;</comment>
                            <comment id="17198822" author="jira-bot" created="Sat, 19 Sep 2020 18:49:09 +0000"  >&lt;p&gt;Commit 1881856 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881856&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881856&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: Sonar fix: remove usage of generic wildcard type&lt;/p&gt;</comment>
                            <comment id="17207888" author="capsvd" created="Mon, 5 Oct 2020 07:57:56 +0000"  >&lt;p&gt;Sure!&lt;/p&gt;

&lt;p&gt;&quot;AESkeylength128.pdf&quot; and &quot;AESkeylength256.pdf&quot; should both be using certificates from the &quot;keystore.pfx&quot; I already shared.&lt;br/&gt;
 alias: testnutzer&lt;br/&gt;
 password:&#160;w!z%C*F-JaNdRgUk&lt;/p&gt;

&lt;p&gt;The used Software is the current &lt;br/&gt;
Adobe Acrobat Pro DC&lt;br/&gt;
if you want to check whether you can use those PDFs.&lt;/p&gt;</comment>
                            <comment id="17208222" author="jira-bot" created="Mon, 5 Oct 2020 17:51:19 +0000"  >&lt;p&gt;Commit 1882254 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1882254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1882254&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: adjust test to use the files provided by Christian Appl&lt;/p&gt;</comment>
                            <comment id="17208256" author="jira-bot" created="Mon, 5 Oct 2020 18:47:40 +0000"  >&lt;p&gt;Commit 1882255 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1882255&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1882255&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: adjust test to use the files provided by Christian Appl&lt;/p&gt;</comment>
                            <comment id="17208259" author="tilman" created="Mon, 5 Oct 2020 18:57:01 +0000"  >&lt;p&gt;Need to do some housekeeping before resolving, some of the commits are missing in this ticket. Maybe svn2jira was down (again) without me noticing.&lt;/p&gt;

&lt;p&gt;Also, keyStore parameter null is reported as &quot;Provided decryption material is not compatible with the document&quot; which is &#129318;&#8205;&#9794;&#65039;&lt;/p&gt;</comment>
                            <comment id="17208275" author="jira-bot" created="Mon, 5 Oct 2020 19:34:37 +0000"  >&lt;p&gt;Commit 1882256 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1882256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1882256&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: improve exception text&lt;/p&gt;</comment>
                            <comment id="17208276" author="jira-bot" created="Mon, 5 Oct 2020 19:34:54 +0000"  >&lt;p&gt;Commit 1882257 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1882257&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1882257&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: improve exception text&lt;/p&gt;</comment>
                            <comment id="17209649" author="tilman" created="Wed, 7 Oct 2020 16:15:08 +0000"  >&lt;p&gt;missed commits by svn2jira:&lt;/p&gt;

&lt;p&gt;Commit 1881794 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881794&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881794&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: fix bugs to support and enable AES 128 encryption, as suggested by Christian Appl:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;get actual key length from default crypt filter dict (PDFBox was using default 40)&lt;/li&gt;
	&lt;li&gt;use SHA1 digest for V 4&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Commit 1881796 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1881796&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1881796&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4421&quot; title=&quot;Add support for AES128 encryption for public key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4421&quot;&gt;&lt;del&gt;PDFBOX-4421&lt;/del&gt;&lt;/a&gt;: fix bugs to support and enable AES 128 encryption, as suggested by Christian Appl:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;get actual key length from default crypt filter dict (PDFBox was using default 40)&lt;/li&gt;
	&lt;li&gt;use SHA1 digest for V 4&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17209650" author="tilman" created="Wed, 7 Oct 2020 16:16:00 +0000"  >&lt;p&gt;We&apos;re done here. Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=capSVD&quot; class=&quot;user-hover&quot; rel=&quot;capSVD&quot;&gt;capSVD&lt;/a&gt; for solving this!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13012980" name="AESkeylength128.pdf" size="11591" author="capSVD" created="Mon, 5 Oct 2020 07:58:02 +0000"/>
                            <attachment id="13012981" name="AESkeylength256.pdf" size="11180" author="capSVD" created="Mon, 5 Oct 2020 07:58:02 +0000"/>
                            <attachment id="13011752" name="B2-AES-256-secured.pdf" size="807872" author="capSVD" created="Fri, 18 Sep 2020 14:00:46 +0000"/>
                            <attachment id="13011682" name="B2-Adobe-128-aes-sec.pdf" size="807870" author="capSVD" created="Thu, 17 Sep 2020 08:56:23 +0000"/>
                            <attachment id="13011753" name="PDFBOX-4421_Add_support_for_AES128_encryption_for_public_key_(AES128,_256_-_filter_based_k.patch" size="26046" author="capSVD" created="Fri, 18 Sep 2020 14:11:55 +0000"/>
                            <attachment id="13011684" name="PDFBOX-4421_Add_support_for_AES128_encryption_for_public_key_(DRAFT).patch" size="25826" author="capSVD" created="Thu, 17 Sep 2020 10:29:43 +0000"/>
                            <attachment id="13011599" name="image-2020-09-16-10-32-11-060.png" size="14241" author="capSVD" created="Wed, 16 Sep 2020 08:32:11 +0000"/>
                            <attachment id="13011600" name="image-2020-09-16-10-33-55-201.png" size="39736" author="capSVD" created="Wed, 16 Sep 2020 08:33:55 +0000"/>
                            <attachment id="13011617" name="image-2020-09-16-11-55-33-275.png" size="32808" author="capSVD" created="Wed, 16 Sep 2020 09:55:33 +0000"/>
                            <attachment id="13011681" name="keystore.pfx" size="2383" author="capSVD" created="Thu, 17 Sep 2020 08:56:23 +0000"/>
                            <attachment id="13011751" name="screenshot-1.png" size="10931" author="capSVD" created="Fri, 18 Sep 2020 13:59:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u00ho0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>