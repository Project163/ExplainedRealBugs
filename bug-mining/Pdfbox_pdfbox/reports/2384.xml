<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:10:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4889] Cannot flatten this file.</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4889</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Calling&#160;pdfDoc.getDocumentCatalog().getAcroForm().flatten() gives&#160;&lt;/p&gt;

&lt;p&gt;&quot;Multiplying two matrices produces illegal values&quot;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13311696">PDFBOX-4889</key>
            <summary>Cannot flatten this file.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="Jief">Jief Knudsen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jun 2020 11:53:44 +0000</created>
                <updated>Fri, 21 Aug 2020 04:55:02 +0000</updated>
                            <resolved>Wed, 17 Jun 2020 17:08:59 +0000</resolved>
                                    <version>2.0.20</version>
                                    <fixVersion>2.0.21</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>AcroForm</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17138541" author="mkl" created="Wed, 17 Jun 2020 15:08:08 +0000"  >&lt;p&gt;The &lt;b&gt;AcroForm&lt;/b&gt; form structure of the PDF is utterly broken. But that&apos;s not the problem here.&lt;/p&gt;

&lt;p&gt;The problem is that some of the widget annotations referenced from the document page have a non-empty &lt;b&gt;Rect&lt;/b&gt; but a normal appearance with an empty (0&#215;0) &lt;b&gt;BBox&lt;/b&gt;. When displaying or flattening that widget, the &lt;b&gt;BBox&lt;/b&gt; area of that appearance must be moved and scaled to fill the widget &lt;b&gt;Rect&lt;/b&gt;. But that is impossible, you cannot scale a zero width or height by a finite real number to fill a none-zero width or height. Unfortunately PDFBox does not check for this situation and tries to scale by infinity. This in turn eventually is caught by some later concatenation of the scaling with another transformation, resulting in the observed exception.&lt;/p&gt;

&lt;p&gt;As an example the field with the partial name &quot;topmostSubform&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.Page1&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.f1_1&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&quot; (which is an invalid &lt;em&gt;partial&lt;/em&gt; name) has a &lt;b&gt;Rect&lt;/b&gt; &lt;tt&gt;[ 36 684 467.25 698.001 ]&lt;/tt&gt; and its normal appearance has a &lt;b&gt;BBox&lt;/b&gt; &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0 0 0 0&amp;#93;&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Strictly speaking this PDF is broken. But a more benign behavior of PDFBox would be to recognize the broken appearance and ignore it.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure whether a new annotation should be built and flattened instead or whether the field should be completely ignored. In the case at hand the result would be identical because (at first glance) the fields with these invalid empty normal appearances also have no value.&lt;/p&gt;</comment>
                            <comment id="17138563" author="jira-bot" created="Wed, 17 Jun 2020 15:26:32 +0000"  >&lt;p&gt;Commit 1878927 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878927&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878927&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4889&quot; title=&quot;Cannot flatten this file.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4889&quot;&gt;&lt;del&gt;PDFBOX-4889&lt;/del&gt;&lt;/a&gt;: ignore empty BBox&lt;/p&gt;</comment>
                            <comment id="17138564" author="jira-bot" created="Wed, 17 Jun 2020 15:26:37 +0000"  >&lt;p&gt;Commit 1878928 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878928&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878928&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4889&quot; title=&quot;Cannot flatten this file.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4889&quot;&gt;&lt;del&gt;PDFBOX-4889&lt;/del&gt;&lt;/a&gt;: ignore empty BBox&lt;/p&gt;</comment>
                            <comment id="17138565" author="jira-bot" created="Wed, 17 Jun 2020 15:26:41 +0000"  >&lt;p&gt;Commit 1878929 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878929&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878929&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4889&quot; title=&quot;Cannot flatten this file.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4889&quot;&gt;&lt;del&gt;PDFBOX-4889&lt;/del&gt;&lt;/a&gt;: ignore empty BBox&lt;/p&gt;</comment>
                            <comment id="17138567" author="tilman" created="Wed, 17 Jun 2020 15:29:30 +0000"  >&lt;p&gt;Yes, thanks, I decided to ignore that annotation because of the empty BBox like we&apos;re already ignoring missing BBoxes.&lt;/p&gt;</comment>
                            <comment id="17138653" author="tilman" created="Wed, 17 Jun 2020 17:08:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.21-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.21-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17138654" author="tilman" created="Wed, 17 Jun 2020 17:08:59 +0000"  >&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13005793" name="f1040sb test.pdf" size="123508" author="Jief" created="Tue, 16 Jun 2020 11:53:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fw6w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>