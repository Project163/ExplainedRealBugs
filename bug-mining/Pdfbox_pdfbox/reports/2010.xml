<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:07:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4302] ToUnicode CMap is not written correctly when the entry count is just 100.</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4302</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The following warning log is output when I execute attached PDFSample.java.&lt;br/&gt;
org.apache.pdfbox.pdmodel.font.PDFont &amp;lt;init&amp;gt;&lt;br/&gt;
WARN: Invalid ToUnicode CMap in font AAKCFF+IPAMincho&lt;br/&gt;
org.apache.pdfbox.pdmodel.font.PDType0Font toUnicode&lt;br/&gt;
WARN: No Unicode mapping for CID+598 (598) in font AAKCFF+IPAMincho&lt;br/&gt;
 :&lt;/p&gt;

&lt;p&gt;This program creates a simple japanese pdf and read the image.&lt;br/&gt;
This program reads a font file. You can download the file from the following URL.&lt;br/&gt;
&lt;a href=&quot;https://ipafont.ipa.go.jp/old/ipafont/download.html#en&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ipafont.ipa.go.jp/old/ipafont/download.html#en&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I investigated the problem and found a bug in ToUnicodeWriter class.&lt;br/&gt;
In writeTo method, a loop count in a operator is calculated by the following line. But the count will be 0 if the srcFrom size is just 100.&lt;br/&gt;
            int count = batch == batchCount - 1 ? srcFrom.size() % 100 : 100;&lt;/p&gt;

&lt;p&gt;I changed this line to below and I confirmed that the problem was resolved.&lt;br/&gt;
            int count = batch == batchCount - 1 ? srcFrom.size() - 100 * batch : 100;&lt;/p&gt;
</description>
                <environment>Windows10</environment>
        <key id="13181570">PDFBOX-4302</key>
            <summary>ToUnicode CMap is not written correctly when the entry count is just 100.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="Atsushi433">Atsushi Doita</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Aug 2018 09:50:14 +0000</created>
                <updated>Fri, 5 Oct 2018 04:53:34 +0000</updated>
                            <resolved>Thu, 30 Aug 2018 17:02:47 +0000</resolved>
                                    <version>2.0.11</version>
                                    <fixVersion>2.0.12</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16596572" author="tilman" created="Wed, 29 Aug 2018 16:29:39 +0000"  >&lt;p&gt;Good find, thank you! I&apos;ll commit your change and later create a failing test, probably based on your code. Our build server is currently down, so there won&apos;t be a snapshot for a long time.&#160;&lt;a href=&quot;https://status.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://status.apache.org/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16596574" author="jira-bot" created="Wed, 29 Aug 2018 16:31:56 +0000"  >&lt;p&gt;Commit 1839589 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1839589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1839589&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4302&quot; title=&quot;ToUnicode CMap is not written correctly when the entry count is just 100.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4302&quot;&gt;&lt;del&gt;PDFBOX-4302&lt;/del&gt;&lt;/a&gt;: fix bug that CMap was not written correctly when the entry count is 100, by Atsushi Doita&lt;/p&gt;</comment>
                            <comment id="16596575" author="jira-bot" created="Wed, 29 Aug 2018 16:32:01 +0000"  >&lt;p&gt;Commit 1839590 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1839590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1839590&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4302&quot; title=&quot;ToUnicode CMap is not written correctly when the entry count is just 100.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4302&quot;&gt;&lt;del&gt;PDFBOX-4302&lt;/del&gt;&lt;/a&gt;: fix bug that CMap was not written correctly when the entry count is 100, by Atsushi Doita&lt;/p&gt;</comment>
                            <comment id="16597147" author="atsushi433" created="Thu, 30 Aug 2018 07:29:20 +0000"  >&lt;p&gt;Thank you for your quick correspondence.&lt;br/&gt;
I&apos;m glad that my code and name was put in the SVN.&lt;/p&gt;</comment>
                            <comment id="16597629" author="jira-bot" created="Thu, 30 Aug 2018 16:27:45 +0000"  >&lt;p&gt;Commit 1839688 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1839688&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1839688&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4302&quot; title=&quot;ToUnicode CMap is not written correctly when the entry count is just 100.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4302&quot;&gt;&lt;del&gt;PDFBOX-4302&lt;/del&gt;&lt;/a&gt;: introduce constant for upcoming test&lt;/p&gt;</comment>
                            <comment id="16597630" author="jira-bot" created="Thu, 30 Aug 2018 16:27:50 +0000"  >&lt;p&gt;Commit 1839689 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1839689&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1839689&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4302&quot; title=&quot;ToUnicode CMap is not written correctly when the entry count is just 100.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4302&quot;&gt;&lt;del&gt;PDFBOX-4302&lt;/del&gt;&lt;/a&gt;: introduce constant for upcoming test&lt;/p&gt;</comment>
                            <comment id="16597667" author="jira-bot" created="Thu, 30 Aug 2018 16:53:28 +0000"  >&lt;p&gt;Commit 1839690 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1839690&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1839690&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4302&quot; title=&quot;ToUnicode CMap is not written correctly when the entry count is just 100.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4302&quot;&gt;&lt;del&gt;PDFBOX-4302&lt;/del&gt;&lt;/a&gt;: add test for corner case inspired by code from Atsushi Doita&lt;/p&gt;</comment>
                            <comment id="16597668" author="jira-bot" created="Thu, 30 Aug 2018 16:53:33 +0000"  >&lt;p&gt;Commit 1839691 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1839691&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1839691&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4302&quot; title=&quot;ToUnicode CMap is not written correctly when the entry count is just 100.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4302&quot;&gt;&lt;del&gt;PDFBOX-4302&lt;/del&gt;&lt;/a&gt;: add test for corner case inspired by code from Atsushi Doita&lt;/p&gt;</comment>
                            <comment id="16597682" author="tilman" created="Thu, 30 Aug 2018 17:02:47 +0000"  >&lt;p&gt;I added a test that fails with the old code, based on your test code. I used a different font which also fails/&lt;font color=&quot;#333333&quot;&gt;passes&lt;/font&gt; the test, but from the same website so we can use the existing download. Thank you again for your effort and your time!&lt;/p&gt;</comment>
                            <comment id="16598230" author="jira-bot" created="Fri, 31 Aug 2018 04:16:02 +0000"  >&lt;p&gt;Commit 1839725 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1839725&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1839725&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4302&quot; title=&quot;ToUnicode CMap is not written correctly when the entry count is just 100.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4302&quot;&gt;&lt;del&gt;PDFBOX-4302&lt;/del&gt;&lt;/a&gt;: test must have MAX_ENTRIES_PER_OPERATOR unique characters&lt;/p&gt;</comment>
                            <comment id="16598231" author="jira-bot" created="Fri, 31 Aug 2018 04:16:07 +0000"  >&lt;p&gt;Commit 1839726 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1839726&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1839726&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4302&quot; title=&quot;ToUnicode CMap is not written correctly when the entry count is just 100.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4302&quot;&gt;&lt;del&gt;PDFBOX-4302&lt;/del&gt;&lt;/a&gt;: test must have MAX_ENTRIES_PER_OPERATOR unique characters&lt;/p&gt;</comment>
                            <comment id="16598243" author="tilman" created="Fri, 31 Aug 2018 04:44:21 +0000"  >&lt;p&gt;Our build server is back, snapshot available:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.12-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.12-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12937406" name="PDFSample.java" size="2454" author="Atsushi433" created="Tue, 28 Aug 2018 09:46:28 +0000"/>
                            <attachment id="12937405" name="pdf_sample.pdf" size="23315" author="Atsushi433" created="Tue, 28 Aug 2018 09:46:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xhtr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>