<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:58:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2501] Page render without barcode</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2501</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I have tryed this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            PDDocument doc = PDDocument.load(f);
            PDPage page = (PDPage) doc.getDocumentCatalog().getAllPages().get(0);
            BufferedImage image;
            image = page.convertToImage();
            File outputfile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;/home/daniel/image.png&quot;&lt;/span&gt;);
            ImageIO.write(image, &lt;span class=&quot;code-quote&quot;&gt;&quot;png&quot;&lt;/span&gt;, outputfile);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException ex) {
            Logger.getLogger(Impresora.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName()).log(Level.SEVERE, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ex);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Using the PDF attached&lt;/p&gt;

&lt;p&gt;And get the PNG attached&lt;/p&gt;

&lt;p&gt;In the rendering process I get the following error... in the &apos;convertToImage()&apos; call&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2014-11-14 13:56:12,592 WARN [org.apache.pdfbox.util.PDFStreamEngine] - &amp;lt;java.lang.ArrayIndexOutOfBoundsException&amp;gt;
java.lang.ArrayIndexOutOfBoundsException
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.arraycopy(Native Method)
    at org.apache.pdfbox.pdmodel.graphics.xobject.PDInlinedImage.createImage(PDInlinedImage.java:218)
    at org.apache.pdfbox.util.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.pagedrawer.BeginInlineImage.process(BeginInlineImage.java:69)
    at org.apache.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:557)
    at org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:268)
    at org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:235)
    at org.apache.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:215)
    at org.apache.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:139)
    at org.apache.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:801)
    at org.apache.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:732)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;One for each of the 4 barcodes in PDF file&lt;/p&gt;

&lt;p&gt;As you can see, te page is rendered OK but without any barcode&lt;/p&gt;

&lt;p&gt;How could I render completily OK?&lt;/p&gt;</description>
                <environment>Ubuntu Linux, Java 8</environment>
        <key id="12755744">PDFBOX-2501</key>
            <summary>Page render without barcode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="degea">Daniel Egea</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Nov 2014 07:29:10 +0000</created>
                <updated>Thu, 23 Jul 2015 06:35:45 +0000</updated>
                            <resolved>Tue, 18 Nov 2014 17:50:08 +0000</resolved>
                                    <version>1.8.7</version>
                    <version>1.8.8</version>
                    <version>1.8.9</version>
                    <version>1.8.10</version>
                                    <fixVersion>1.8.10</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14214376" author="degea" created="Mon, 17 Nov 2014 07:30:36 +0000"  >&lt;p&gt;The original PDF&lt;/p&gt;</comment>
                            <comment id="14214377" author="degea" created="Mon, 17 Nov 2014 07:30:52 +0000"  >&lt;p&gt;The resulting render&lt;/p&gt;</comment>
                            <comment id="14214757" author="tilman" created="Mon, 17 Nov 2014 15:58:15 +0000"  >&lt;p&gt;Your file is malformed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;p215 of the 1.7 spec: &quot;Unless the image uses ASCIIHexDecode or ASCII85Decode as one of its filters, the ID operator shall be followed by a single white-space character, and the next character shall be interpreted as the first byte of image data.&quot;&lt;/li&gt;
	&lt;li&gt;p214 of the 1.7 spec: &quot;Because the inline format gives the reader less flexibility in managing the image data, it shall be used only for small images (4 KB or less).&quot; One of your inline images (which is blank, i.e. you&apos;re wasting space) has a size of 110KB. The 4 others (the barcodes) have sizes of 5KB and 13KB. Additionally, I don&apos;t think it is a good idea to encode barcodes in a JPEG. Barcodes should be b/w, and your barcodes have 34 different colors. You&apos;re wasting space, you are using a color format instead of a 1 bit b/w format.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The second point is mostly harmless, but the first one is not, the PDF stream has this: ...49 44 0d 0a ff d8 ff e0... 49 44 = &quot;ID&quot;. Then comes &quot;0d 0a&quot; which is CR LF. However the LF is already the first byte of data &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;(You can&apos;t see this yourself when editing your file, the PDF stream is compressed, I have attached an uncompressed version)&lt;/p&gt;

&lt;p&gt;Now I could of course add a check that the second byte is a LF and then skip it (I tried it and now your file can be rendered). However what if this is really data? This could be the case with a different filter than the one you have, which is DCT (= JPEG).&lt;/p&gt;

&lt;p&gt;So these are the options:&lt;br/&gt;
1) you contact those who created this file (Fast Reports, &lt;a href=&quot;http://www.fast-report.com/en/support/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.fast-report.com/en/support/&lt;/a&gt;), show them this issue, and ask them to fix it immediately. They can write here or contact me directly if they have more questions.&lt;br/&gt;
2) you build PDFBox from source and I tell you the change to do&lt;/p&gt;

&lt;p&gt;There are two possibilities that come to my mind for (2). One is to add a check in PDFStreamParser.java near &quot;case &apos;I&apos;&quot;, the second one is to change JPXFilter to use a PushbackInputStream to peek the first byte and unread it if it is not 0x0A. The first possibility brings the risk I mentioned above. The second possibility, which I&apos;d prefer, means a slightly slower performance and a slightly higher memory usage which is why I&apos;m reluctant to do it for 1.8.&lt;/p&gt;

&lt;p&gt;(In the trunk the change is easy and I&apos;ll do it, because DCTFilter already uses ImageInputStream which allows a seek. However you&apos;re using 1.8)&lt;/p&gt;</comment>
                            <comment id="14214763" author="jira-bot" created="Mon, 17 Nov 2014 16:02:57 +0000"  >&lt;p&gt;Commit 1640177 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1640177&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1640177&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2501&quot; title=&quot;Page render without barcode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2501&quot;&gt;&lt;del&gt;PDFBOX-2501&lt;/del&gt;&lt;/a&gt;: skip one LF if needed (malformed inline image syntax)&lt;/p&gt;</comment>
                            <comment id="14216008" author="degea" created="Tue, 18 Nov 2014 09:49:26 +0000"  >&lt;p&gt;Malformed PDF&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14216500" author="tilman" created="Tue, 18 Nov 2014 17:49:54 +0000"  >&lt;p&gt;Reopening to set to resolve instead, because I made a change already for 2.0. PDFBox does make an effort to handle many malformed PDFs. Your file, although it is malformed, can be opened by AR and three other viewers I tried. As I said, the change in 2.0 doesn&apos;t impact speed, but the change in 1.8 would, so it is a difficult decision. The change might be made in 1.8 if another in the project has a different opinion, or if there are more files like this coming.&lt;/p&gt;</comment>
                            <comment id="14237135" author="tilman" created="Sun, 7 Dec 2014 12:53:12 +0000"  >&lt;p&gt;I wrote to Fast Reports. Their answer: &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It seems you use FR VCL 5&lt;br/&gt;
FR 5.1.8 - 5.1.9 have a bug with image&apos;s export to PDF&lt;br/&gt;
Was fixed in the 5.1.10 &lt;br/&gt;
Ask your developer to upgrade FR and rebuild application&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14519649" author="tilman" created="Wed, 29 Apr 2015 16:19:29 +0000"  >&lt;p&gt;I will do the fix for 1.8 too, after receiving a file in the user mailing list with the same problem. That file was created by &quot;Pantheon PDF export&quot;. The only thing I could find on google was a bug in GS for the exact same reason:&lt;br/&gt;
&lt;a href=&quot;http://bugs.ghostscript.com/show_bug.cgi?format=multiple&amp;amp;id=690734&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.ghostscript.com/show_bug.cgi?format=multiple&amp;amp;id=690734&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14519661" author="jira-bot" created="Wed, 29 Apr 2015 16:23:54 +0000"  >&lt;p&gt;Commit 1676782 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1676782&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1676782&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2501&quot; title=&quot;Page render without barcode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2501&quot;&gt;&lt;del&gt;PDFBOX-2501&lt;/del&gt;&lt;/a&gt;: skip one LF if needed (malformed inline image syntax)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12681856" name="image.png" size="93726" author="degea" created="Mon, 17 Nov 2014 07:30:52 +0000"/>
                            <attachment id="12681855" name="iris2_4943659641078733308.pdf" size="14476" author="degea" created="Mon, 17 Nov 2014 07:30:36 +0000"/>
                            <attachment id="12681916" name="iris2_4943659641078733308_unc.pdf" size="159100" author="tilman" created="Mon, 17 Nov 2014 15:55:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 29 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22g33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>