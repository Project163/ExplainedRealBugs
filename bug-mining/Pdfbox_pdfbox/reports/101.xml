<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:52:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-578] NPE NullPointerException in PDPageNode.getCount</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-578</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
        at org.apache.pdfbox.pdmodel.PDPageNode.getCount(PDPageNode.java:102)&lt;br/&gt;
        at org.apache.pdfbox.pdmodel.PDDocument.getNumberOfPages(PDDocument.java:925)&lt;br/&gt;
        at us.fed.nmcourt.common.pdfbox.NmdLucenePDFDocument.addContent(NmdLucenePDFDocument.java:558)&lt;br/&gt;
        at us.fed.nmcourt.common.pdfbox.NmdLucenePDFDocument.convertDocument(NmdLucenePDFDocument.java:346)&lt;br/&gt;
        at us.fed.nmcourt.common.pdfbox.NmdLucenePDFDocument.getDocument(NmdLucenePDFDocument.java:444)&lt;br/&gt;
        at us.fed.nmcourt.common.pdfbox.NmdLucenePDFDocument.main(NmdLucenePDFDocument.java:758)&lt;/p&gt;

&lt;p&gt;Attached is an example of pdf that causes this exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442508">PDFBOX-578</key>
            <summary>NPE NullPointerException in PDPageNode.getCount</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adamnichols">Adam Nichols</assignee>
                                    <reporter username="orthello">James Wilson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Dec 2009 21:11:52 +0000</created>
                <updated>Fri, 4 Mar 2011 10:29:17 +0000</updated>
                            <resolved>Mon, 27 Dec 2010 21:16:58 +0000</resolved>
                                    <version>0.8.0-incubator</version>
                                    <fixVersion>1.5.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12786442" author="lehmi" created="Sat, 5 Dec 2009 16:36:57 +0000"  >&lt;p&gt;If I try to render the pdf using the PDFReader, I get the same error than described in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-276&quot; title=&quot;IOException on parsing a PDF file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-276&quot;&gt;&lt;del&gt;PDFBOX-276&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12802937" author="rdecampo" created="Wed, 20 Jan 2010 19:05:25 +0000"  >&lt;p&gt;FYI, I get the same error with this file.&lt;/p&gt;</comment>
                            <comment id="12861885" author="lehmi" created="Wed, 28 Apr 2010 18:28:39 +0000"  >&lt;p&gt;Moved attachment from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-707&quot; title=&quot;Add the current page and the number of pages to the title&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-707&quot;&gt;&lt;del&gt;PDFBOX-707&lt;/del&gt;&lt;/a&gt;. It triggers the same exception than FormI-9-English.pdf&lt;/p&gt;</comment>
                            <comment id="12861891" author="lehmi" created="Wed, 28 Apr 2010 18:35:05 +0000"  >&lt;p&gt;After solving &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-278&quot; title=&quot;Refactor some PageDrawer and Operator methods for .NET&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-278&quot;&gt;&lt;del&gt;PDFBOX-278&lt;/del&gt;&lt;/a&gt; 0000462526-0000000000-04cv00399.pdf works like a charm.&lt;/p&gt;</comment>
                            <comment id="12906764" author="valodim" created="Tue, 7 Sep 2010 10:59:32 +0000"  >&lt;p&gt;attached patch for this problem&lt;/p&gt;</comment>
                            <comment id="12906878" author="adamnichols" created="Tue, 7 Sep 2010 17:07:14 +0000"  >&lt;p&gt;Although the patch avoids the NPE, I think it hides the problem (which is that the PDF can&apos;t be parsed because it&apos;s non-conforming).  If we merge file xyz.pdf with SWMC_WarehouseAgreement-V1.pdf and no exception is thrown, we&apos;d naturally expect that the files were merged correctly, however that&apos;s not the case here.  I&apos;d rather see an exception be thrown if there was a critical error like this.  I was hoping that this task would lead to correcting the parser (or whatever it is that&apos;s wrong) so the document could be processed without error.&lt;/p&gt;

&lt;p&gt;I came back to this issue and tried to decompress it using pdftk and I found that could not handle the errors in this PDF either.  If I could get  	SWMC_WarehouseAgreement-V1.pdf in an uncompressed state (and the problem still exists), I could manually trace through the PDF to find out where the issue lies.  But unless someone can figure out some way to decompress it, I think we should consider this one closed.  The other PDF is working, which indicates that the issue was resolved for some PDFs.&lt;/p&gt;</comment>
                            <comment id="12906959" author="valodim" created="Tue, 7 Sep 2010 20:30:32 +0000"  >&lt;p&gt;I mostly didn&apos;t like the NullPointerException being thrown from a place where it isn&apos;t necessary or expected&lt;/p&gt;</comment>
                            <comment id="12965355" author="adamnichols" created="Tue, 30 Nov 2010 19:16:01 +0000"  >&lt;p&gt;Although I don&apos;t like hiding the fact that there were huge parsing problems, in retrospect, I think Vincent is right.  With his patch, along with adding a null check for the &quot;page&quot; variable at the very beginning of getAllKids(List result, COSDictionary page, boolean recurse), it will prevent the NPE.  It will, however, make getAllPages() return null.  If nobody objects, I&apos;m going to put this patch in here to try to gracefully deal with non-conforming PDFs.  I don&apos;t have time to look deep into SWMC_WarehouseAgreement-V1.pdf to get an uncompressed version so I can manually trace through it in a text editor right now, but that&apos;s what should be done to REALLY fix the issue at hand.  But at least this patch would avoid a NPE in the meantime.&lt;/p&gt;</comment>
                            <comment id="12965363" author="adamnichols" created="Tue, 30 Nov 2010 19:30:52 +0000"  >&lt;p&gt;I also found some other NPEs which were caused by poorly constructed PDFs which can also be avoided with null checks.  Again, the best solution is to dig into the specific document and determine what the issue is and how we can update the parser to deal with these cases.  The null checks just avoid unexpected exceptions from within the library.  Does anyone feel strongly that these null checks should (or should not) be added?&lt;/p&gt;</comment>
                            <comment id="12965452" author="martijn_brinkers" created="Tue, 30 Nov 2010 21:53:05 +0000"  >&lt;p&gt;I am able to open the attached PDFs with a build from trunk. The PDF documents are AES encrypted and since &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-872&quot; title=&quot;ERROR org.apache.pdfbox.filter.FlateFilter  - Stop reading corrupt stream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-872&quot;&gt;&lt;del&gt;PDFBOX-872&lt;/del&gt;&lt;/a&gt; AES is supported. Are you using a build from trunk?&lt;/p&gt;

&lt;p&gt;That said, I think it&apos;s important to try to try to parse as many documents as possible and graceful handle PDF document errors if possible, especially when forceParsing is enabled. I have added a couple of patches which gracefully handle certain PDF errors found in real life ebooks (see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-908&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PDFBOX-908&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="12975339" author="adamnichols" created="Mon, 27 Dec 2010 21:16:58 +0000"  >&lt;p&gt;Added a null pointer check to PDPageNode::getAllKids(List result, COSDictionary page, boolean recurse) in revision 1053191.  Confirmed that all three documents could be loaded and calling doc.getDocumentCatalog().getAllPages(); did not result in any errors.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12391310">PDFBOX-276</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12426966" name="0000462526-0000000000-04cv00399.pdf" size="61370" author="orthello" created="Fri, 4 Dec 2009 21:12:48 +0000"/>
                            <attachment id="12430914" name="FormI-9-English.pdf" size="387855" author="rdecampo" created="Wed, 20 Jan 2010 19:05:25 +0000"/>
                            <attachment id="12443107" name="SWMC_WarehouseAgreement-V1.pdf" size="471189" author="lehmi" created="Wed, 28 Apr 2010 18:28:39 +0000"/>
                            <attachment id="12454004" name="nullcount.patch" size="628" author="valodim" created="Tue, 7 Sep 2010 10:59:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163343</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zj93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>205421</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>