<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:52:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-897] NullPointerException PDFFont#getEncodingFromFont with a PDF book because Type1Encoding is null</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-897</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;A NullPointerException was thrown while extracting text from a PDF ebook. The exception was thrown in&lt;/p&gt;

&lt;p&gt;PDFFont#getEncodingFromFont  line:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;snip&amp;#93;&lt;/span&gt;&lt;br/&gt;
encoding.addCharacterEncoding(index, name.replace(&quot;/&quot;, &quot;&quot;));&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;snip&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;encoding was null. The line that was scanned was &quot;/Encoding 256 array 0 1 255 &lt;/p&gt;
{1 index exch /.notdef put}
&lt;p&gt; for&quot;. The array check however only checks for line.endsWith(&quot;array&quot;). The NPE was fixed when using line.contains(&quot;array&quot;) instead. &lt;/p&gt;

&lt;p&gt;I have added a patch. The PDF is a PDF book with copyright so it cannot be attached as an example. The meta data of the document was:&lt;/p&gt;

&lt;p&gt;Acrobat Distiller 7.0 (Windows)&lt;br/&gt;
PScript5.dll Version 5.2.2&lt;br/&gt;
PDF-1.6&lt;/p&gt;</description>
                <environment></environment>
        <key id="12480467">PDFBOX-897</key>
            <summary>NullPointerException PDFFont#getEncodingFromFont with a PDF book because Type1Encoding is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adamnichols">Adam Nichols</assignee>
                                    <reporter username="martijn_brinkers">Martijn Brinkers</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Nov 2010 23:45:06 +0000</created>
                <updated>Mon, 20 Dec 2010 09:38:23 +0000</updated>
                            <resolved>Mon, 22 Nov 2010 21:15:43 +0000</resolved>
                                    <version>1.3.1</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12934054" author="martijn_brinkers" created="Fri, 19 Nov 2010 23:45:56 +0000"  >&lt;p&gt;Patch for bug 897 added&lt;/p&gt;</comment>
                            <comment id="12934067" author="adamnichols" created="Sat, 20 Nov 2010 00:33:46 +0000"  >&lt;p&gt;I&apos;m looking at PDFont and the only place I see:&lt;br/&gt;
encoding.addCharacterEncoding(index, name.replace(&quot;/&quot;, &quot;&quot;));&lt;br/&gt;
is on line 832, which is within this block:&lt;br/&gt;
else if (line.startsWith(&quot;dup&quot;)) {&lt;/p&gt;

&lt;p&gt;Since your line doesn&apos;t begin with dup, I&apos;m not sure why this line would ever be executed, nor how your patch would fix anything.  Are you using the latest version of PDFBox?  Maybe someone changed this between the version you are using and the one I&apos;m looking at.  I&apos;m looking at the latest code from SVN.&lt;/p&gt;</comment>
                            <comment id="12934110" author="martijn_brinkers" created="Sat, 20 Nov 2010 08:40:41 +0000"  >&lt;p&gt;What happens is this:&lt;/p&gt;

&lt;p&gt;encoding is null until encoding is initialized when /Encoding ... array is found. However if the /Encoding...array line is not matched, which happens for example with this line &quot;/Encoding 256 array 0 1 255 &lt;/p&gt;
{1 index exch /.notdef put}
&lt;p&gt; for&quot; because the line does not end with array,  encoding remains null. When the line that starts with &quot;dup&quot; is found, a NullPointerException will be thrown because encoding is null. The patch makes sure that the encoding is detected even when &quot;array&quot; is somewhere in the middle&lt;/p&gt;</comment>
                            <comment id="12934598" author="adamnichols" created="Mon, 22 Nov 2010 21:15:43 +0000"  >&lt;p&gt;Thanks for the extra info, now I understand how it can be null.  I committed your patch and added an extra protection to avoid a NPE in case there&apos;s any exceptional case (i.e. a non-conforming, and/or corrupt PDF).  I also added some logging info so if there so if we ever come across one of these exceptional cases, it will at least be logged so users can track it down.  Committed in revision 1037891.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12460075" name="PDFBOX-897.patch" size="761" author="martijn_brinkers" created="Fri, 19 Nov 2010 23:45:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163561</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zkon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>205653</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>