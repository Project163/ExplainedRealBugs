<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:14:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5802] Black rectangle over image</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5802</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The attached PDF has a black rectangle in the upper right, at parts over an image.&lt;/p&gt;

&lt;p&gt;This appears since 2.0.27, probably through the mask rendering changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5403&quot; title=&quot;Blurry / distorted rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5403&quot;&gt;&lt;del&gt;PDFBOX-5403&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The image itself is rendered better after this change, still not perfect.&lt;/p&gt;

&lt;p&gt;2.0.27+:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13067964/13067964_image-2024-04-08-19-30-46-411.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;2.0.26:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13067963/13067963_image-2024-04-08-19-35-43-407.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Acrobat:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13067962/13067962_image-2024-04-08-19-38-22-778.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13575024">PDFBOX-5802</key>
            <summary>Black rectangle over image</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="Schmidor">Oliver Schmidtmer</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Mon, 8 Apr 2024 17:39:20 +0000</created>
                <updated>Wed, 24 Jul 2024 16:02:05 +0000</updated>
                            <resolved>Sat, 20 Apr 2024 10:31:21 +0000</resolved>
                                    <version>2.0.27</version>
                    <version>2.0.31</version>
                    <version>3.0.2 PDFBox</version>
                                    <fixVersion>2.0.32</fixVersion>
                    <fixVersion>3.0.3 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17835127" author="tilman" created="Tue, 9 Apr 2024 03:19:23 +0000"  >&lt;p&gt;in PageDrawer after dispose() and before the mask is applied, a 85x85 rectangle is white.&lt;br/&gt;
If we force the &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5403&quot; title=&quot;Blurry / distorted rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5403&quot;&gt;&lt;del&gt;PDFBOX-5403&lt;/del&gt;&lt;/a&gt; workaround (which is really just for the &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2171&quot; title=&quot;UnsupportedOperationException for stencil image / pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2171&quot;&gt;&lt;del&gt;PDFBOX-2171&lt;/del&gt;&lt;/a&gt; file) when the mask is 1x1 AND the pixel is -1, then the 85x85 rectangle is black and the result is good and so is the &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2171&quot; title=&quot;UnsupportedOperationException for stencil image / pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2171&quot;&gt;&lt;del&gt;PDFBOX-2171&lt;/del&gt;&lt;/a&gt; file.&lt;/p&gt;

&lt;p&gt;However...&lt;/p&gt;

&lt;p&gt;This image most likely comes from &quot;Root/Pages/Kids/&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;/Resources/Pattern/R24&quot; where there is a 1x1 inline image with content 00, i.e. black.&lt;/p&gt;

&lt;p&gt;So maybe the real problem isn&apos;t in pagedrawer at all, it&apos;s the colorspace of that image, there&apos;s an error message, and it uses DeviceGray instead.&lt;/p&gt;</comment>
                            <comment id="17835414" author="tilman" created="Tue, 9 Apr 2024 13:10:54 +0000"  >&lt;p&gt;I think I&apos;m wrong: I tried replacing /R11 with /DeviceGray and the result is the same.&lt;br/&gt;
 &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13068068/13068068_PDFBOX-5802_unc.pdf&quot; title=&quot;PDFBOX-5802_unc.pdf attached to PDFBOX-5802&quot;&gt;PDFBOX-5802_unc.pdf&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;br/&gt;
Sadly, I won&apos;t have time to work on this for a couple of weeks. This was my code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (mask.getWidth() == 1 &amp;amp;&amp;amp; mask.getHeight() == 1 &amp;amp;&amp;amp; mask.getRGB(0, 0) == -1)
{
	smallMask = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to insert just before &lt;tt&gt;if (!smallMask)&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17839207" author="jira-bot" created="Sat, 20 Apr 2024 10:02:40 +0000"  >&lt;p&gt;Commit 1917182 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1917182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1917182&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5802&quot; title=&quot;Black rectangle over image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5802&quot;&gt;&lt;del&gt;PDFBOX-5802&lt;/del&gt;&lt;/a&gt;: don&apos;t use the lookup table for 1x1 image&lt;/p&gt;</comment>
                            <comment id="17839208" author="jira-bot" created="Sat, 20 Apr 2024 10:02:44 +0000"  >&lt;p&gt;Commit 1917183 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1917183&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1917183&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5802&quot; title=&quot;Black rectangle over image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5802&quot;&gt;&lt;del&gt;PDFBOX-5802&lt;/del&gt;&lt;/a&gt;: don&apos;t use the lookup table for 1x1 image&lt;/p&gt;</comment>
                            <comment id="17839209" author="jira-bot" created="Sat, 20 Apr 2024 10:02:47 +0000"  >&lt;p&gt;Commit 1917184 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1917184&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1917184&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5802&quot; title=&quot;Black rectangle over image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5802&quot;&gt;&lt;del&gt;PDFBOX-5802&lt;/del&gt;&lt;/a&gt;: don&apos;t use the lookup table for 1x1 image&lt;/p&gt;</comment>
                            <comment id="17839210" author="jira-bot" created="Sat, 20 Apr 2024 10:05:33 +0000"  >&lt;p&gt;Commit 1917185 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1917185&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1917185&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5802&quot; title=&quot;Black rectangle over image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5802&quot;&gt;&lt;del&gt;PDFBOX-5802&lt;/del&gt;&lt;/a&gt;: remove commented code&lt;/p&gt;</comment>
                            <comment id="17839211" author="jira-bot" created="Sat, 20 Apr 2024 10:05:36 +0000"  >&lt;p&gt;Commit 1917186 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1917186&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1917186&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5802&quot; title=&quot;Black rectangle over image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5802&quot;&gt;&lt;del&gt;PDFBOX-5802&lt;/del&gt;&lt;/a&gt;: remove commented code&lt;/p&gt;</comment>
                            <comment id="17839212" author="jira-bot" created="Sat, 20 Apr 2024 10:05:40 +0000"  >&lt;p&gt;Commit 1917187 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1917187&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1917187&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5802&quot; title=&quot;Black rectangle over image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5802&quot;&gt;&lt;del&gt;PDFBOX-5802&lt;/del&gt;&lt;/a&gt;: remove commented code&lt;/p&gt;</comment>
                            <comment id="17839213" author="jira-bot" created="Sat, 20 Apr 2024 10:09:55 +0000"  >&lt;p&gt;Commit 1917188 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1917188&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1917188&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5802&quot; title=&quot;Black rectangle over image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5802&quot;&gt;&lt;del&gt;PDFBOX-5802&lt;/del&gt;&lt;/a&gt;: correct comment&lt;/p&gt;</comment>
                            <comment id="17839214" author="jira-bot" created="Sat, 20 Apr 2024 10:09:59 +0000"  >&lt;p&gt;Commit 1917189 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1917189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1917189&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5802&quot; title=&quot;Black rectangle over image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5802&quot;&gt;&lt;del&gt;PDFBOX-5802&lt;/del&gt;&lt;/a&gt;: correct comment&lt;/p&gt;</comment>
                            <comment id="17839215" author="jira-bot" created="Sat, 20 Apr 2024 10:10:02 +0000"  >&lt;p&gt;Commit 1917190 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1917190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1917190&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5802&quot; title=&quot;Black rectangle over image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5802&quot;&gt;&lt;del&gt;PDFBOX-5802&lt;/del&gt;&lt;/a&gt;: correct comment&lt;/p&gt;</comment>
                            <comment id="17839218" author="tilman" created="Sat, 20 Apr 2024 10:31:05 +0000"  >&lt;p&gt;So now the black rectangle has vanished. The solution is tailored for this image, so we may have to change this yet again if another image comes up with a corner case. Re the poor quality, that&apos;s a known problem of the stencil code.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13436477">PDFBOX-5403</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13067965" name="AR24-0275VS-1_0001.pdf" size="47965" author="Schmidor" created="Mon, 8 Apr 2024 17:28:36 +0000"/>
                            <attachment id="13068068" name="PDFBOX-5802_unc.pdf" size="681019" author="tilman" created="Tue, 9 Apr 2024 13:07:59 +0000"/>
                            <attachment id="13067964" name="image-2024-04-08-19-30-46-411.png" size="10818" author="Schmidor" created="Mon, 8 Apr 2024 17:30:52 +0000"/>
                            <attachment id="13067963" name="image-2024-04-08-19-35-43-407.png" size="9986" author="Schmidor" created="Mon, 8 Apr 2024 17:35:49 +0000"/>
                            <attachment id="13067962" name="image-2024-04-08-19-38-22-778.png" size="13987" author="Schmidor" created="Mon, 8 Apr 2024 17:38:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1oi94:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>