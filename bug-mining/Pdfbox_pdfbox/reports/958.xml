<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:59:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1234] NPE at org.apache.pdfbox.pdmodel.interactive.form.PDAppearance.calculateFontSize(PDAppearance.java:551)</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1234</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Using SVN trunk revision 1291094 (2012-02-18)&lt;br/&gt;
Getting the following stack trace when trying to call PDField.setValue() on a AcroForm field in the attached document;&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PDAppearance.calculateFontSize(PDAppearance.java:551)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PDAppearance.insertGeneratedAppearance(PDAppearance.java:371)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PDAppearance.setAppearanceValue(PDAppearance.java:281)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PDVariableText.setValue(PDVariableText.java:131)&lt;/p&gt;

&lt;p&gt;Reason seems to be that PDApperance.getFontAndUpdateResources() returns null, in turn because the font dictionary for the DA of the field (&quot;/Cour 11 Tf 0 g&quot;) is not present in the document.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12543580">PDFBOX-1234</key>
            <summary>NPE at org.apache.pdfbox.pdmodel.interactive.form.PDAppearance.calculateFontSize(PDAppearance.java:551)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="msahyoun">Maruan Sahyoun</assignee>
                                    <reporter username="cpalm">Christer Palm</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Feb 2012 22:20:22 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:52 +0000</updated>
                            <resolved>Wed, 4 Feb 2015 14:36:25 +0000</resolved>
                                    <version>1.8.4</version>
                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>AcroForm</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13947770" author="damonli" created="Wed, 26 Mar 2014 10:23:17 +0000"  >&lt;p&gt;I am working with the attached &apos;fw8bene--dft.pdf&apos; which throws the same error for when setting a value to a field.&lt;/p&gt;

&lt;p&gt;Has anyone solved this issue yet? I have attached a unit test which fails for me when trying to set a value for the first text field, the name of which is &apos;topmostSubform&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.Page1&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.f1_001&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&apos; I believe.&lt;/p&gt;</comment>
                            <comment id="14004521" author="damonli" created="Wed, 21 May 2014 09:24:05 +0000"  >&lt;p&gt;This issue for the &apos;fw8bene--dft.pdf&apos; seems to have been resolved for version 1.8.5&lt;/p&gt;</comment>
                            <comment id="14004849" author="tilman" created="Wed, 21 May 2014 16:14:47 +0000"  >&lt;p&gt;It failed for me with the trunk:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.io.IOException: Invalid field type: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PDFieldFactory.createField(PDFieldFactory.java:98)
	at org.apache.pdfbox.pdmodel.interactive.form.PDFieldFactory.createField(PDFieldFactory.java:98)
	at org.apache.pdfbox.pdmodel.interactive.form.PDField.getKids(PDField.java:546)
	at org.apache.pdfbox.pdmodel.interactive.form.PDFieldFactory.isButton(PDFieldFactory.java:105)
	at org.apache.pdfbox.pdmodel.interactive.form.PDFieldFactory.createField(PDFieldFactory.java:55)
	at org.apache.pdfbox.pdmodel.interactive.form.PDAcroForm.getField(PDAcroForm.java:293)
	at pdfboxpageimageextraction.ExtractImages.main(ExtractImages.java:76)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14304109" author="msahyoun" created="Tue, 3 Feb 2015 22:04:33 +0000"  >&lt;p&gt;The form is missing the resources necessary to create the fields appearance. Although &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1550&quot; title=&quot;Helv vs. Helvetica font names cause PDField.setValue to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1550&quot;&gt;&lt;del&gt;PDFBOX-1550&lt;/del&gt;&lt;/a&gt; added some handling around that in this particular case there is no improvement as there is no fallback.&lt;/p&gt;

&lt;p&gt;I&#8217;m closing it for now.&lt;/p&gt;</comment>
                            <comment id="14304505" author="cpalm" created="Wed, 4 Feb 2015 02:14:54 +0000"  >&lt;p&gt;Yes the PDF is of course an example of one of those widely circulated invalid PDF:s that are still rendered/repaired by Adobe Reader. I&apos;m sorry if that wasn&apos;t clear from the beginning.&lt;br/&gt;
I don&apos;t know what the PDFBOX policy is on invalid PDF:s, but as a minimum I&apos;d expect it to throw a meaningful exception, not a NPE.&lt;/p&gt;</comment>
                            <comment id="14304542" author="jahewson" created="Wed, 4 Feb 2015 02:46:35 +0000"  >&lt;p&gt;We aim for compatibility with Adobe Reader, challenging as that can be.&lt;/p&gt;</comment>
                            <comment id="14304601" author="cpalm" created="Wed, 4 Feb 2015 03:37:47 +0000"  >&lt;p&gt;By the way, I found some references on the web about the following font name aliases being used with AcroForms:&lt;/p&gt;

&lt;p&gt;Cour  -&amp;gt; Courier&lt;br/&gt;
CoBo -&amp;gt; Courier-Bold&lt;br/&gt;
CoOb -&amp;gt; Courier-Oblique&lt;br/&gt;
CoBO -&amp;gt; Courier-BoldOblique&lt;br/&gt;
Helv -&amp;gt; Helvetica&lt;br/&gt;
HeBo -&amp;gt; Helvetica-Bold&lt;br/&gt;
HeOb -&amp;gt; Helvetica-Oblique&lt;br/&gt;
HeBO -&amp;gt; Helvetica-BoldOblique&lt;br/&gt;
Symb -&amp;gt; Symbol&lt;br/&gt;
TiRo -&amp;gt; Times-Roman&lt;br/&gt;
TiBo -&amp;gt; Times-Bold&lt;br/&gt;
TiIt -&amp;gt; Times-Italic&lt;br/&gt;
TiBI -&amp;gt; Times-BoldItalic&lt;br/&gt;
ZaDb -&amp;gt; ZapfDingbats&lt;/p&gt;

&lt;p&gt;Unfortunately, I didn&apos;t find an authoritative source. It does seem to be quite widely implemented though.&lt;/p&gt;</comment>
                            <comment id="14304727" author="cpalm" created="Wed, 4 Feb 2015 07:12:27 +0000"  >&lt;p&gt;Program to generate an example form&lt;/p&gt;</comment>
                            <comment id="14304728" author="cpalm" created="Wed, 4 Feb 2015 07:12:50 +0000"  >&lt;p&gt;Example form&lt;/p&gt;</comment>
                            <comment id="14304734" author="cpalm" created="Wed, 4 Feb 2015 07:19:45 +0000"  >&lt;p&gt;If that is so, this issue should IMO be reopened.&lt;br/&gt;
I&apos;ve attached a test program and the output PDF it generates that can be used to demonstrate that in Adobe Reader, the Tf operator when used in a form field DA does indeed recognize several &quot;magic&quot; font names that doesn&apos;t need to exist in the font dict. When used in a normal stream though, Tf does not seem to recognize these names.&lt;/p&gt;</comment>
                            <comment id="14304747" author="msahyoun" created="Wed, 4 Feb 2015 07:45:01 +0000"  >&lt;p&gt;Reopening as the IOException has been swallowed&lt;/p&gt;</comment>
                            <comment id="14304762" author="jira-bot" created="Wed, 4 Feb 2015 08:02:06 +0000"  >&lt;p&gt;Commit 1657024 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1657024&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1657024&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1234&quot; title=&quot;NPE at org.apache.pdfbox.pdmodel.interactive.form.PDAppearance.calculateFontSize(PDAppearance.java:551)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1234&quot;&gt;&lt;del&gt;PDFBOX-1234&lt;/del&gt;&lt;/a&gt; don&apos;t swallow IOException when updating the fields appearance&lt;/p&gt;</comment>
                            <comment id="14304765" author="msahyoun" created="Wed, 4 Feb 2015 08:03:41 +0000"  >&lt;p&gt;With the fixes in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1550&quot; title=&quot;Helv vs. Helvetica font names cause PDField.setValue to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1550&quot;&gt;&lt;del&gt;PDFBOX-1550&lt;/del&gt;&lt;/a&gt; and the latest commit there is now an IOException for the sample files&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.io.IOException: Unable to generate field appearance - missing required font resources: COSName{HelveticaLTStd-Bold}
java.io.IOException: Unable to generate field appearance - missing required resources
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14304768" author="msahyoun" created="Wed, 4 Feb 2015 08:08:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpalm&quot; class=&quot;user-hover&quot; rel=&quot;cpalm&quot;&gt;cpalm&lt;/a&gt; thanks for coming back and explaining the issue a little more. There was an IOException but that has been swallowed which I changed. I&apos;d like to move the other part of the issue - coming up with a fallback if a resource is missing - to an enhancement request to be dealt with in a release after 2.0. WDYT?&lt;/p&gt;</comment>
                            <comment id="14304831" author="cpalm" created="Wed, 4 Feb 2015 09:34:00 +0000"  >&lt;p&gt;Thanks, sounds great to me.&lt;br/&gt;
It looks like there&apos;s actually a set of issues;&lt;br/&gt;
1. The NPE now fixed by this issue&lt;br/&gt;
2. The shorthand aliases recognized by Tf within a form field DA (not really a fallback as Adobe Reader does translate them into standard fonts) as demonstrated by fonts.pdf&lt;br/&gt;
3. Additional &quot;Tf within a form field DA&quot; weirdness. For example, &quot;CourierNewPSMT&quot; seems to be recognized&lt;br/&gt;
4. Otherwise fallback to Helvetica if a font resource is missing like Adobe Reader, also for plain text&lt;/p&gt;</comment>
                            <comment id="14304879" author="msahyoun" created="Wed, 4 Feb 2015 10:11:13 +0000"  >&lt;p&gt;Unfortunately there is a multitude of potential issues with regards to AcroForms and PDFBox if the form is incomplete or doesn&apos;t adhere to the specification. All of that can be fixed and there are workarounds but I agree that PDFBox should be able to handle these behind the scenes. I&apos;ll open enhancement requests for issues I see and feel free to do so too.&lt;br/&gt;
For 2.0 I&apos;m concentrating on getting some missing core features done like multiline textboxes.&lt;/p&gt;</comment>
                            <comment id="14304890" author="msahyoun" created="Wed, 4 Feb 2015 10:19:53 +0000"  >&lt;p&gt;I&apos;ve added &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2661&quot; title=&quot;Implement font fallback for AcroForms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2661&quot;&gt;PDFBOX-2661&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2662&quot; title=&quot;Implement fallback if there are no AcroForm default resources&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2662&quot;&gt;PDFBOX-2662&lt;/a&gt; to not forget about enhancements to AcroFoms to provide a fallback mechanism for incomplete/non compliant AcroForm/field resource definitions.&lt;/p&gt;</comment>
                            <comment id="14305164" author="msahyoun" created="Wed, 4 Feb 2015 14:36:25 +0000"  >&lt;p&gt;Resolving again as the NPE has been fixed. There are follow up enhancements (see above) to better align the resource resolution with Adobe Reader.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12515497" name="200221.pdf" size="18789" author="cpalm" created="Tue, 21 Feb 2012 22:21:43 +0000"/>
                            <attachment id="12696399" name="FontTest.java" size="2435" author="cpalm" created="Wed, 4 Feb 2015 07:12:27 +0000"/>
                            <attachment id="12696400" name="Fonts.pdf" size="4441" author="cpalm" created="Wed, 4 Feb 2015 07:12:50 +0000"/>
                            <attachment id="12636897" name="SetPDFFieldValueTest.java" size="1132" author="damonli" created="Wed, 26 Mar 2014 10:20:49 +0000"/>
                            <attachment id="12636895" name="fw8bene--dft.pdf" size="315751" author="damonli" created="Wed, 26 Mar 2014 10:17:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>228819</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14tsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236292</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>