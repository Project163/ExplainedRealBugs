<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:15:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5952] PDFRenderer causes endless loop</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5952</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Path path = Paths.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;ijms-25-00052-v2.pdf&quot;&lt;/span&gt;);		
PDDocument doc = Loader.loadPDF(path.toFile());		
PDFRenderer renderer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFRenderer(doc);		
BufferedImage image = renderer.renderImageWithDPI(0, 72, ImageType.RGB); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When trying to convert the attached pdf page to an image an endless loop occures and the following log statements repeats itself.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&lt;font color=&quot;#ff0000&quot;&gt;Feb. 11, 2025 5:42:10 NACHM. org.apache.pdfbox.pdmodel.graphics.color.PDICCBased ensureDisplayProfile&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt;WARNUNG: ICC profile is Perceptual, ignoring, treating as Display class&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13608150">PDFBOX-5952</key>
            <summary>PDFRenderer causes endless loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="omako">Andreas Koch</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Feb 2025 16:43:40 +0000</created>
                <updated>Thu, 24 Apr 2025 18:37:53 +0000</updated>
                            <resolved>Thu, 13 Feb 2025 11:18:12 +0000</resolved>
                                    <version>2.0.33</version>
                    <version>3.0.4 PDFBox</version>
                                    <fixVersion>2.0.34</fixVersion>
                    <fixVersion>3.0.5 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17926163" author="tilman" created="Tue, 11 Feb 2025 20:00:53 +0000"  >&lt;p&gt;The file has 74477 colorspaces, wow.&lt;/p&gt;

&lt;p&gt;Profiler:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13074649/13074649_image-2025-02-12-10-16-04-596.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17926285" author="JIRAUSER304094" created="Wed, 12 Feb 2025 06:52:40 +0000"  >&lt;p&gt;The file is created by third party.&lt;/p&gt;

&lt;p&gt;The use case is to process thousends of PDFs that a library has. Currently this PDFs breaks the process, because all the RAM gets used. Is there any way check in advance or to prevent this?&#160;&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;</comment>
                            <comment id="17926314" author="tilman" created="Wed, 12 Feb 2025 09:17:34 +0000"  >&lt;p&gt;Not really, because there are other (very different) ways to have a very slow PDF. And this extreme amount of elements could be anywhere. Maybe we can optimize and / or cache something.&lt;br/&gt;
The colorspaces are identical, although they are in different objects. Sadly our cache works with object numbers.&lt;/p&gt;</comment>
                            <comment id="17926518" author="JIRAUSER304094" created="Wed, 12 Feb 2025 17:52:37 +0000"  >&lt;p&gt;Thank Your for the explanation.&lt;/p&gt;</comment>
                            <comment id="17926538" author="tilman" created="Wed, 12 Feb 2025 18:30:45 +0000"  >&lt;p&gt;Please don&apos;t resolve it, because 1) it wasn&apos;t resolved, 2) there might be a solution in the future. I don&apos;t have a good idea, but maybe others in the team will. Another possible solution would be some sort of global weak cache for ICC profiles, because it&apos;s the ICC operations that are costly in time.&lt;/p&gt;</comment>
                            <comment id="17926691" author="lehmi" created="Thu, 13 Feb 2025 07:21:04 +0000"  >&lt;p&gt;How about using some sort of checksum of the binary data of the profile as key for a possible cache? The resource cache is already passed to the colorspace and could be extended to manage such a cache.&lt;/p&gt;

&lt;p&gt;I&apos;ve ran a test with a hacky &quot;cache&quot; and the rendering time is down to several seconds.&lt;/p&gt;</comment>
                            <comment id="17926705" author="tilman" created="Thu, 13 Feb 2025 08:14:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;The resource cache is already passed to the colorspace and could be extended to manage such a cache.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Wow thanks, I hadn&apos;t noticed that... despite that I had committed that one myself in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4411&quot; title=&quot;Support caching of ICC based color spaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4411&quot;&gt;&lt;del&gt;PDFBOX-4411&lt;/del&gt;&lt;/a&gt;. Rendering is now done in 10 seconds. It needs a change in 4 classes (not the ICC class, because it&apos;s always the same ICC colorspace object), I&apos;m going to run some tests first.&lt;/p&gt;</comment>
                            <comment id="17926720" author="jira-bot" created="Thu, 13 Feb 2025 09:19:23 +0000"  >&lt;p&gt;Commit 1923773 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923773&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923773&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5952&quot; title=&quot;PDFRenderer causes endless loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5952&quot;&gt;&lt;del&gt;PDFBOX-5952&lt;/del&gt;&lt;/a&gt;: pass resources to be able to use resource cache during creation of ICC colorspace, as suggested by Andreas Lehmk&#195;&#188;hler&lt;/p&gt;</comment>
                            <comment id="17926721" author="jira-bot" created="Thu, 13 Feb 2025 09:19:29 +0000"  >&lt;p&gt;Commit 1923774 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923774&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5952&quot; title=&quot;PDFRenderer causes endless loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5952&quot;&gt;&lt;del&gt;PDFBOX-5952&lt;/del&gt;&lt;/a&gt;: pass resources to be able to use resource cache during creation of ICC colorspace, as suggested by Andreas Lehmk&#195;&#188;hler&lt;/p&gt;</comment>
                            <comment id="17926722" author="jira-bot" created="Thu, 13 Feb 2025 09:19:35 +0000"  >&lt;p&gt;Commit 1923775 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923775&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923775&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5952&quot; title=&quot;PDFRenderer causes endless loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5952&quot;&gt;&lt;del&gt;PDFBOX-5952&lt;/del&gt;&lt;/a&gt;: pass resources to be able to use resource cache during creation of ICC colorspace, as suggested by Andreas Lehmk&#195;&#188;hler&lt;/p&gt;</comment>
                            <comment id="17926725" author="jira-bot" created="Thu, 13 Feb 2025 09:55:48 +0000"  >&lt;p&gt;Commit 1923777 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923777&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923777&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5952&quot; title=&quot;PDFRenderer causes endless loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5952&quot;&gt;&lt;del&gt;PDFBOX-5952&lt;/del&gt;&lt;/a&gt;: deprecate short constructor, use the long one&lt;/p&gt;</comment>
                            <comment id="17926726" author="jira-bot" created="Thu, 13 Feb 2025 09:55:57 +0000"  >&lt;p&gt;Commit 1923778 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923778&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923778&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5952&quot; title=&quot;PDFRenderer causes endless loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5952&quot;&gt;&lt;del&gt;PDFBOX-5952&lt;/del&gt;&lt;/a&gt;: deprecate short constructor, use the long one&lt;/p&gt;</comment>
                            <comment id="17926727" author="jira-bot" created="Thu, 13 Feb 2025 09:56:25 +0000"  >&lt;p&gt;Commit 1923779 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923779&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923779&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5952&quot; title=&quot;PDFRenderer causes endless loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5952&quot;&gt;&lt;del&gt;PDFBOX-5952&lt;/del&gt;&lt;/a&gt;: remove short constructor, use the long one&lt;/p&gt;</comment>
                            <comment id="17926747" author="tilman" created="Thu, 13 Feb 2025 11:18:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omako&quot; class=&quot;user-hover&quot; rel=&quot;omako&quot;&gt;omako&lt;/a&gt; a snapshot build is here:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/3.0.5-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/3.0.5-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; Thanks again&lt;/p&gt;</comment>
                            <comment id="17927065" author="JIRAUSER304094" created="Fri, 14 Feb 2025 08:34:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Thanks for the snapshot. It fixed the issue with ijms-25-00052-v2.pdf. &lt;br/&gt;
Yesterday I found another PDF where renderImageWithDPI causes a OutOfMemoryError and the snapshot does not help. I guess a different issue. I will create a new ticket.&lt;/p&gt;

&lt;p&gt;Thanks, Andreas&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13144127">PDFBOX-4149</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13205192">PDFBOX-4411</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13074624" name="ijms-25-00052-v2.pdf_12.pdf" size="7706271" author="omako" created="Tue, 11 Feb 2025 16:41:37 +0000"/>
                            <attachment id="13074649" name="image-2025-02-12-10-16-04-596.png" size="177846" author="tilman" created="Wed, 12 Feb 2025 09:16:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1u5og:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>