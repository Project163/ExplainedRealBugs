<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:03:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3441] NumberFormatException when loading large PDF file</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3441</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;If you trying to load very large PDF file (over 2GB), you get java.io.IOException: java.lang.NumberFormatException: For input string: &quot;2313730984&quot;. &lt;/p&gt;

&lt;p&gt;It fails in COSParser.java in parseXrefTable(long startByteOffset). On the line 2006, if Integer.parseInt(splitString&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;) reads number which is bigger than maximum int.&lt;/p&gt;

&lt;p&gt;//////&lt;br/&gt;
java.io.IOException: java.lang.NumberFormatException: For input string: &quot;2313730984&quot;&lt;br/&gt;
	at org.apache.pdfbox.pdfparser.COSParser.parseXrefTable(COSParser.java:2012)&lt;br/&gt;
	at org.apache.pdfbox.pdfparser.COSParser.parseXref(COSParser.java:223)&lt;br/&gt;
	at org.apache.pdfbox.pdfparser.PDFParser.initialParse(PDFParser.java:192)&lt;br/&gt;
	at org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:249)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:840)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:765)&lt;br/&gt;
	at Test.main(Test.java:17)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)&lt;br/&gt;
Caused by: java.lang.NumberFormatException: For input string: &quot;2313730984&quot;&lt;br/&gt;
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)&lt;br/&gt;
	at java.lang.Integer.parseInt(Integer.java:583)&lt;br/&gt;
	at java.lang.Integer.parseInt(Integer.java:615)&lt;br/&gt;
	at org.apache.pdfbox.pdfparser.COSParser.parseXrefTable(COSParser.java:2005)&lt;br/&gt;
	... 11 more&lt;/p&gt;</description>
                <environment>Win 10 Pro, 16GB RAM</environment>
        <key id="12993201">PDFBOX-3441</key>
            <summary>NumberFormatException when loading large PDF file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="p.fol">Pavel Fol</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jul 2016 10:11:13 +0000</created>
                <updated>Sat, 25 Mar 2017 18:12:24 +0000</updated>
                            <resolved>Fri, 29 Jul 2016 15:59:56 +0000</resolved>
                                    <version>2.0.2</version>
                    <version>2.0.3</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.3</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Parsing</component>
                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15397389" author="michaeldoswald" created="Thu, 28 Jul 2016 10:57:09 +0000"  >&lt;p&gt;The PDF Reference, sixth edition, chapter 3.4.3 &apos;Cross-Reference Table&apos; specifies a cross-reference entry as&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;nnnnnnnnnn ggggg n eol&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;where&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;nnnnnnnnnn&lt;/tt&gt; is a 10-digit byte offset&lt;/p&gt;

&lt;p&gt;The offset is currently parsed as an integer, which has a maximum value of 2147483647 (2 GB), but the reference allows a maximum value of 9999999999.&lt;/p&gt;

&lt;p&gt;Looking at the source code, the XrefTrailerResolver#setXRef method is already prepared to take a &apos;long&apos; value. So I guess it should only be a matter of parsing the currOffset as long instead of int. Maybe there will be more problems in other areas of pdfbox when using such big offsets though.&lt;/p&gt;</comment>
                            <comment id="15397780" author="jira-bot" created="Thu, 28 Jul 2016 16:35:09 +0000"  >&lt;p&gt;Commit 1754430 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1754430&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754430&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3441&quot; title=&quot;NumberFormatException when loading large PDF file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3441&quot;&gt;&lt;del&gt;PDFBOX-3441&lt;/del&gt;&lt;/a&gt;: use long instead of int to handle huge files, as suggested by Michael Doswald&lt;/p&gt;</comment>
                            <comment id="15397782" author="jira-bot" created="Thu, 28 Jul 2016 16:35:22 +0000"  >&lt;p&gt;Commit 1754431 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1754431&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754431&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3441&quot; title=&quot;NumberFormatException when loading large PDF file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3441&quot;&gt;&lt;del&gt;PDFBOX-3441&lt;/del&gt;&lt;/a&gt;: use long instead of int to handle huge files, as suggested by Michael Doswald&lt;/p&gt;</comment>
                            <comment id="15397788" author="tilman" created="Thu, 28 Jul 2016 16:38:54 +0000"  >&lt;p&gt;This should help somewhat... please test again as soon as a snapshot is available on&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.3-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.3-SNAPSHOT/&lt;/a&gt;&lt;br/&gt;
However it could still happen that you go out of memory.&lt;/p&gt;</comment>
                            <comment id="15398755" author="p.fol" created="Fri, 29 Jul 2016 05:50:34 +0000"  >&lt;p&gt;I can confirm that it works now. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thx.&lt;/p&gt;</comment>
                            <comment id="15398815" author="lehmi" created="Fri, 29 Jul 2016 06:37:54 +0000"  >&lt;p&gt;Seems to be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2920&quot; title=&quot;IndexOutOfBounds Exception when loading large PDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2920&quot;&gt;&lt;del&gt;PDFBOX-2920&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15398834" author="p.fol" created="Fri, 29 Jul 2016 06:48:05 +0000"  >&lt;p&gt;I think his problem is with low memory. If you want to load large PDFs, you must also use MemoryUsageSetting to set maximum main memory consume.&lt;/p&gt;</comment>
                            <comment id="15399563" author="tilman" created="Fri, 29 Jul 2016 15:59:47 +0000"  >&lt;p&gt;Wow!&lt;/p&gt;

&lt;p&gt;I&apos;ll set this issue to resolved. I&apos;ll comment in the other issue, I have added you there (you can easily &quot;unwatch&quot; the issue).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12852690">PDFBOX-2920</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12820688" name="exception.PNG" size="53001" author="p.fol" created="Thu, 28 Jul 2016 10:15:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31m93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>