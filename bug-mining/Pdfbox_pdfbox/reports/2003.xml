<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:07:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4298] NullPointerException when doing overlay</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4298</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;When&#160;input pdf file for overlay contains empty page (with contents == null) like NPE.pdf file we get NullPointerException in Overlay.addOriginalContent method. It occurres even if we overlay over other than this empty page.&lt;/p&gt;

&lt;p&gt;Here&apos;s some sample code to reproduce the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Overlay overlayObj = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Overlay();
File file1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;NPE.pdf&quot;&lt;/span&gt;);
PDDocument originalDoc = PDDocument.load(file1);
overlayObj.setOverlayPosition(Overlay.Position.FOREGROUND);
overlayObj.setInputPDF(originalDoc);
Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; ovmap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
File file2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;pdf2.pdf&quot;&lt;/span&gt;);
ovmap.put(2, file2.getPath());
overlayObj.overlay(ovmap);
originalDoc.save(&lt;span class=&quot;code-quote&quot;&gt;&quot;test__result.pdf&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13180462">PDFBOX-4298</key>
            <summary>NullPointerException when doing overlay</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="mikita.geer">Mikita Geer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Aug 2018 12:35:59 +0000</created>
                <updated>Fri, 5 Oct 2018 04:53:29 +0000</updated>
                            <resolved>Mon, 10 Sep 2018 17:40:10 +0000</resolved>
                                    <version>1.8.15</version>
                    <version>2.0.11</version>
                                    <fixVersion>1.8.16</fixVersion>
                    <fixVersion>2.0.12</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16589072" author="jira-bot" created="Wed, 22 Aug 2018 16:09:04 +0000"  >&lt;p&gt;Commit 1838652 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838652&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838652&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4298&quot; title=&quot;NullPointerException when doing overlay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4298&quot;&gt;&lt;del&gt;PDFBOX-4298&lt;/del&gt;&lt;/a&gt;: avoid NPE; use similar text&lt;/p&gt;</comment>
                            <comment id="16589073" author="jira-bot" created="Wed, 22 Aug 2018 16:09:10 +0000"  >&lt;p&gt;Commit 1838653 from tilman@apache.org in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838653&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838653&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4298&quot; title=&quot;NullPointerException when doing overlay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4298&quot;&gt;&lt;del&gt;PDFBOX-4298&lt;/del&gt;&lt;/a&gt;: avoid NPE; use similar text&lt;/p&gt;</comment>
                            <comment id="16589077" author="jira-bot" created="Wed, 22 Aug 2018 16:12:28 +0000"  >&lt;p&gt;Commit 1838654 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838654&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4298&quot; title=&quot;NullPointerException when doing overlay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4298&quot;&gt;&lt;del&gt;PDFBOX-4298&lt;/del&gt;&lt;/a&gt;: avoid NPE; use similar text&lt;/p&gt;</comment>
                            <comment id="16589117" author="tilman" created="Wed, 22 Aug 2018 16:57:34 +0000"  >&lt;p&gt;Could you please retest with the latest snapshot?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.12-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.12-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I tested only with the code that you provided, I didn&apos;t investigate &quot;It occurres even if we overlay over other than this empty page.&quot;&lt;/p&gt;</comment>
                            <comment id="16589932" author="mikita.geer" created="Thu, 23 Aug 2018 09:03:29 +0000"  >&lt;p&gt;Thank you, Tilman.&lt;/p&gt;

&lt;p&gt;I&apos;ve tried to download the latest snapshot via maven but there is a typo in parent pom &lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-parent/2.0.12-SNAPSHOT/maven-metadata.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-parent/2.0.12-SNAPSHOT/maven-metadata.xml&lt;/a&gt;&lt;br/&gt;
 2.0.12-20180822.22225*9*-66 should be 2.0.12-20180822.22225*8*-66 I guess.&lt;/p&gt;

&lt;p&gt;Anyway I&apos;ve seen that NullPointerException is fixed but now there is IOException thrown. The question is: why contentArray is built and page&apos;s content is checked even if this page isn&apos;t overlayed?&lt;/p&gt;</comment>
                            <comment id="16590445" author="tilman" created="Thu, 23 Aug 2018 16:16:34 +0000"  >&lt;p&gt;Ok, now I understand. You want to apply the overlay to page 2, but it is page 1 that doesn&apos;t have a content stream, so there shouldn&apos;t be a exception. I&apos;ll investigate,&lt;/p&gt;</comment>
                            <comment id="16590518" author="tilman" created="Thu, 23 Aug 2018 16:53:02 +0000"  >&lt;p&gt;Oh-oh. The current code adds q...Q around the new content even if there is nothing to do, that explains the effect.&lt;/p&gt;</comment>
                            <comment id="16590605" author="jira-bot" created="Thu, 23 Aug 2018 17:53:39 +0000"  >&lt;p&gt;Commit 1838744 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838744&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838744&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4298&quot; title=&quot;NullPointerException when doing overlay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4298&quot;&gt;&lt;del&gt;PDFBOX-4298&lt;/del&gt;&lt;/a&gt;: touch only pages that will be overlayed; refactor; improve javadoc&lt;/p&gt;</comment>
                            <comment id="16590606" author="jira-bot" created="Thu, 23 Aug 2018 17:53:45 +0000"  >&lt;p&gt;Commit 1838745 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838745&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838745&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4298&quot; title=&quot;NullPointerException when doing overlay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4298&quot;&gt;&lt;del&gt;PDFBOX-4298&lt;/del&gt;&lt;/a&gt;: touch only pages that will be overlayed; refactor; improve javadoc&lt;/p&gt;</comment>
                            <comment id="16590653" author="tilman" created="Thu, 23 Aug 2018 18:30:08 +0000"  >&lt;p&gt;It should work now. Please retest with the newly available snapshot.&lt;/p&gt;</comment>
                            <comment id="16591302" author="mikita.geer" created="Fri, 24 Aug 2018 08:05:05 +0000"  >&lt;p&gt;Thank you, now it works as I expect! So the ticket can be closed. Do you happen to know when 2.0.12 version will be released?&lt;/p&gt;</comment>
                            <comment id="16591928" author="tilman" created="Fri, 24 Aug 2018 17:09:14 +0000"  >&lt;p&gt;There is no release date but I expect it to happen this year. But you could just copy the class source code until release, get it here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/viewvc/pdfbox/branches/2.0/pdfbox/src/main/java/org/apache/pdfbox/multipdf/Overlay.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/viewvc/pdfbox/branches/2.0/pdfbox/src/main/java/org/apache/pdfbox/multipdf/Overlay.java?view=markup&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16607232" author="mikita.geer" created="Fri, 7 Sep 2018 15:09:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;&lt;br/&gt;
Hi, it turns out that sometimes we need to overlay over the empty page (with contents == null). Is it possible&#160;not to throw IOException in such cases but create&#160;empty blank page and overlay over it?&lt;/p&gt;</comment>
                            <comment id="16607963" author="jira-bot" created="Sat, 8 Sep 2018 09:00:25 +0000"  >&lt;p&gt;Commit 1840347 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1840347&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1840347&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4298&quot; title=&quot;NullPointerException when doing overlay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4298&quot;&gt;&lt;del&gt;PDFBOX-4298&lt;/del&gt;&lt;/a&gt;: allow pages without content stream, as suggested by Mikita Geer&lt;/p&gt;</comment>
                            <comment id="16607964" author="jira-bot" created="Sat, 8 Sep 2018 09:00:31 +0000"  >&lt;p&gt;Commit 1840348 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1840348&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1840348&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4298&quot; title=&quot;NullPointerException when doing overlay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4298&quot;&gt;&lt;del&gt;PDFBOX-4298&lt;/del&gt;&lt;/a&gt;: allow pages without content stream, as suggested by Mikita Geer&lt;/p&gt;</comment>
                            <comment id="16607978" author="tilman" created="Sat, 8 Sep 2018 09:34:04 +0000"  >&lt;p&gt;Snapshot available here:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.12-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.12-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please test and give feedback soon. Release is expected to be in about a month.&lt;/p&gt;</comment>
                            <comment id="16609092" author="mikita.geer" created="Mon, 10 Sep 2018 12:16:03 +0000"  >&lt;p&gt;Thank you! Now it works on empty pages as well.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12936645" name="NPE.pdf" size="13101" author="mikita.geer" created="Wed, 22 Aug 2018 12:28:26 +0000"/>
                            <attachment id="12936644" name="pdf2.pdf" size="29274" author="mikita.geer" created="Wed, 22 Aug 2018 12:28:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xb0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>