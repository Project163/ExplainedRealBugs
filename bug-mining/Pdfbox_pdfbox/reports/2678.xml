<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:12:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5402] POCIDFontType2 (Wingdings) encode throws a NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5402</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Problem;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;It is known that wingdings based fonts do not support encoding from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4714&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PDFBOX-4714&lt;/a&gt;. However it is unexpected that a call to encode on a wingdings POCIDFontType2 returns a NullPointerException.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Notes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The issue seems to lie within PDFont POCIDFontType2&lt;/li&gt;
	&lt;li&gt;The POCIDFontType2 encode function is only known to throw IOException or UnsupportedOperationException(s)&lt;/li&gt;
	&lt;li&gt;Please see the attached test file with the font in question that causes the NullPointerException to be thrown&lt;/li&gt;
	&lt;li&gt;Stacktrace:&#160;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException
	at org.apache.pdfbox.pdmodel.font.PDCIDFontType2.encode(PDCIDFontType2.java:359)
	at org.apache.pdfbox.pdmodel.font.PDType0Font.encode(PDType0Font.java:424)
	at org.apache.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:333)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>PDFBox 2.0.25 used via a gradle plugin (has been tested as far back as PDFBox 2.0.21)</environment>
        <key id="13435880">PDFBOX-5402</key>
            <summary>POCIDFontType2 (Wingdings) encode throws a NullPointerException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="mbayerPK">Matthew Bayer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Mar 2022 19:25:48 +0000</created>
                <updated>Thu, 21 Apr 2022 15:38:41 +0000</updated>
                            <resolved>Sat, 26 Mar 2022 04:22:05 +0000</resolved>
                                    <version>2.0.21</version>
                    <version>2.0.22</version>
                    <version>2.0.23</version>
                    <version>2.0.24</version>
                    <version>2.0.25</version>
                                    <fixVersion>2.0.26</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17512549" author="tilman" created="Fri, 25 Mar 2022 19:30:46 +0000"  >&lt;p&gt;Please post some minimal code. You mention &quot;encoding&quot;, but reusing fonts from a PDF doesn&apos;t work because these subsets are not meant to do that.&lt;/p&gt;</comment>
                            <comment id="17512552" author="JIRAUSER287130" created="Fri, 25 Mar 2022 19:34:44 +0000"  >&lt;p&gt;will do, give me a bit to get a sample posted here&lt;/p&gt;</comment>
                            <comment id="17512596" author="JIRAUSER287130" created="Fri, 25 Mar 2022 21:39:29 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
import org.apache.pdfbox.cos.COSName
import org.apache.pdfbox.pdmodel.PDDocument
import org.junit.jupiter.api.Test
import org.junit.jupiter.api.assertDoesNotThrow
import java.io.IOException
import java.nio.file.Files
import java.nio.file.Paths
import java.util.HashSet
import kotlin.io.path.div

class WingdingsTest {
    @Test
    fun `test for wingdings`() {
        // Get Wingdings.pdf from current working directory
        val path = Paths.get(&quot;&quot;).toAbsolutePath() / &quot;Wingdings.pdf&quot;

        val testChar = &apos;*&apos;
        val testSet = HashSet&amp;lt;COSName&amp;gt;()

        val inMemoryPdf = PDDocument.load(Files.newInputStream(path).buffered(64 * 1024))

        assertDoesNotThrow {
            inMemoryPdf.use { document -&amp;gt;

                for (page in document.pages) {
                    val resources = page.resources
                    for (name in resources.fontNames) {
                        val font = resources.getFont(name)
                        try {
                            if (font.encode(testChar.toString()) != null) testSet.add(name)
                        } catch (expected: IOException) {
                            // handled
                        } catch (expected: IllegalArgumentException) {
                            // handled
                        } catch (expected: UnsupportedOperationException) {
                            // handled
                        }
                        // NPE not handled
                    }
                }
            }
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the sample is a junit test written in kotlin&lt;/p&gt;</comment>
                            <comment id="17512672" author="jira-bot" created="Sat, 26 Mar 2022 04:18:25 +0000"  >&lt;p&gt;Commit 1899202 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1899202&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1899202&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5402&quot; title=&quot;POCIDFontType2 (Wingdings) encode throws a NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5402&quot;&gt;&lt;del&gt;PDFBOX-5402&lt;/del&gt;&lt;/a&gt;: avoid NPE&lt;/p&gt;</comment>
                            <comment id="17512673" author="jira-bot" created="Sat, 26 Mar 2022 04:18:29 +0000"  >&lt;p&gt;Commit 1899203 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1899203&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1899203&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5402&quot; title=&quot;POCIDFontType2 (Wingdings) encode throws a NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5402&quot;&gt;&lt;del&gt;PDFBOX-5402&lt;/del&gt;&lt;/a&gt;: avoid NPE&lt;/p&gt;</comment>
                            <comment id="17512674" author="tilman" created="Sat, 26 Mar 2022 04:22:05 +0000"  >&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                            <comment id="17513467" author="JIRAUSER287130" created="Mon, 28 Mar 2022 16:04:38 +0000"  >&lt;p&gt;Thank you for the fix!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13041623" name="Wingdings.pdf" size="145444" author="mbayerPK" created="Fri, 25 Mar 2022 19:23:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10u7c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>