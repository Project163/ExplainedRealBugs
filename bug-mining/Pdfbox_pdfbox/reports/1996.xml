<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:07:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4267] Incorrect rendering when /Matte entry</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4267</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The image softmask in the attached file has a &lt;tt&gt;/Matte 0 0 0&lt;/tt&gt; entry. PDFBox displays the PDF differently than Adobe Reader, the reflection shown by PDFBox is barely visible. When the /Matte entry is deleted, then it is barely visible in Adobe Reader too. So the /Matte entry does make some difference, although I don&apos;t understand how.&lt;/p&gt;

&lt;p&gt;In the PDF specification, the formula shown is c&apos; = m + &#945; x (c - m). So 0 should have no effect?!&lt;/p&gt;

&lt;p&gt;I looked at the code of PDF.js, they have a special handling when alpha is 0, don&apos;t know why.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13172715">PDFBOX-4267</key>
            <summary>Incorrect rendering when /Matte entry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Jul 2018 17:04:55 +0000</created>
                <updated>Fri, 5 Oct 2018 04:53:28 +0000</updated>
                            <resolved>Sat, 18 Aug 2018 16:51:03 +0000</resolved>
                                    <version>2.0.11</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.12</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16580066" author="janipe" created="Tue, 14 Aug 2018 16:57:59 +0000"  >&lt;p&gt;When decoding an image, you must reverse the operation by solving for c. You get: c = (c&apos; - m) / alpha + m. The variable c&apos; is the color stored in the PDF file. If alpha == 0, avoid division by zero and just set the alpha of the pixel to zero. Note that the equations assume all color components are in range 0.0-1.0. The code of PDF.js has colors in range 0-255.&lt;/p&gt;</comment>
                            <comment id="16584761" author="jira-bot" created="Sat, 18 Aug 2018 13:56:37 +0000"  >&lt;p&gt;Commit 1838327 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838327&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: consider /Matte entry when applying soft masks, as suggested by Jani Pehkonen&lt;/p&gt;</comment>
                            <comment id="16584762" author="jira-bot" created="Sat, 18 Aug 2018 13:56:44 +0000"  >&lt;p&gt;Commit 1838328 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838328&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: consider /Matte entry when applying soft masks, as suggested by Jani Pehkonen&lt;/p&gt;</comment>
                            <comment id="16584806" author="jira-bot" created="Sat, 18 Aug 2018 15:03:28 +0000"  >&lt;p&gt;Commit 1838332 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838332&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: SonarQube fix&lt;/p&gt;</comment>
                            <comment id="16584807" author="jira-bot" created="Sat, 18 Aug 2018 15:03:34 +0000"  >&lt;p&gt;Commit 1838333 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838333&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: SonarQube fix&lt;/p&gt;</comment>
                            <comment id="16584810" author="jira-bot" created="Sat, 18 Aug 2018 15:08:26 +0000"  >&lt;p&gt;Commit 1838334 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838334&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838334&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: refactor matte extraction into method&lt;/p&gt;</comment>
                            <comment id="16584811" author="jira-bot" created="Sat, 18 Aug 2018 15:08:32 +0000"  >&lt;p&gt;Commit 1838335 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838335&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: refactor matte extraction into method&lt;/p&gt;</comment>
                            <comment id="16584840" author="tilman" created="Sat, 18 Aug 2018 16:51:03 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janipe&quot; class=&quot;user-hover&quot; rel=&quot;janipe&quot;&gt;janipe&lt;/a&gt; for the help!&lt;/p&gt;</comment>
                            <comment id="16585060" author="jira-bot" created="Sun, 19 Aug 2018 07:50:39 +0000"  >&lt;p&gt;Commit 1838361 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838361&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838361&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: convert matte to RGB&lt;/p&gt;</comment>
                            <comment id="16585061" author="jira-bot" created="Sun, 19 Aug 2018 07:50:44 +0000"  >&lt;p&gt;Commit 1838362 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838362&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: convert matte to RGB&lt;/p&gt;</comment>
                            <comment id="16585089" author="jira-bot" created="Sun, 19 Aug 2018 09:15:10 +0000"  >&lt;p&gt;Commit 1838367 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838367&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838367&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: remove unused import&lt;/p&gt;</comment>
                            <comment id="16585090" author="jira-bot" created="Sun, 19 Aug 2018 09:15:17 +0000"  >&lt;p&gt;Commit 1838368 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838368&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838368&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: remove unused import&lt;/p&gt;</comment>
                            <comment id="16587552" author="janipe" created="Tue, 21 Aug 2018 14:59:48 +0000"  >&lt;p&gt;One small problem remaining. The Matte entry should use the color space of the image, not the color space of the SMask. This line in method PDImageXObject.extractMatte():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
matte = softMask.getColorSpace().toRGB(matte);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think it should be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
matte = getColorSpace().toRGB(matte);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This probably won&apos;t cause any visible difference in PDF rendering because typically the Matte entry is an array of zeros, so toRGB(matte) will be black.&lt;/p&gt;</comment>
                            <comment id="16587790" author="jira-bot" created="Tue, 21 Aug 2018 17:40:39 +0000"  >&lt;p&gt;Commit 1838574 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838574&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838574&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: matte entry should use the color space of the image, not the color space of the SMask, by Jani Pehkonen&lt;/p&gt;</comment>
                            <comment id="16587791" author="jira-bot" created="Tue, 21 Aug 2018 17:40:43 +0000"  >&lt;p&gt;Commit 1838575 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1838575&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1838575&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4267&quot; title=&quot;Incorrect rendering when /Matte entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4267&quot;&gt;&lt;del&gt;PDFBOX-4267&lt;/del&gt;&lt;/a&gt;: matte entry should use the color space of the image, not the color space of the SMask, by Jani Pehkonen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12931979" name="bugzilla888437.pdf" size="350533" author="tilman" created="Tue, 17 Jul 2018 17:06:03 +0000"/>
                            <attachment id="12931977" name="gs-bugzilla688797-reduced.pdf" size="23447" author="tilman" created="Tue, 17 Jul 2018 17:05:56 +0000"/>
                            <attachment id="12931978" name="gs-bugzilla688797.pdf" size="132234" author="tilman" created="Tue, 17 Jul 2018 17:05:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vzk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>