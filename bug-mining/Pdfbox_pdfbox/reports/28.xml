<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:52:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-738] Preserve transparency when converting to image with rgba</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-738</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;When converting a pdf page to an image, the transparency is lost because PDPage.drawImage() sets the background color to white: graphics.setBackground( Color.WHITE );&lt;/p&gt;

&lt;p&gt;The desired behavior is to preserve transparency when rgba color is set, and to fall back to white when rgb is used.&lt;/p&gt;

&lt;p&gt;The following change works with either color mode:&lt;/p&gt;

&lt;p&gt;+&lt;br/&gt;
+    /**&lt;br/&gt;
+     * Fully transparent that can fall back to white when image type has no alpha.&lt;br/&gt;
+     */&lt;br/&gt;
+    private static final Color TRANSPARENT_WHITE = new Color( 255, 255, 255, 0 );&lt;br/&gt;
+&lt;br/&gt;
    private COSDictionary page;&lt;/p&gt;

&lt;p&gt;    /**&lt;br/&gt;
@@ -706,7 +711,7 @@&lt;/p&gt;

&lt;p&gt;        BufferedImage retval = new BufferedImage( widthPx, heightPx, imageType );&lt;br/&gt;
        Graphics2D graphics = (Graphics2D)retval.getGraphics();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;graphics.setBackground( Color.WHITE );&lt;br/&gt;
+        graphics.setBackground( TRANSPARENT_WHITE );&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Attached is a patch and some sample pdfs and images.&lt;/p&gt;</description>
                <environment>all</environment>
        <key id="12465933">PDFBOX-738</key>
            <summary>Preserve transparency when converting to image with rgba</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="asinger">Armando Singer</reporter>
                        <labels>
                            <label>image</label>
                            <label>pdf</label>
                    </labels>
                <created>Wed, 2 Jun 2010 05:31:49 +0000</created>
                <updated>Thu, 1 Jul 2010 07:27:37 +0000</updated>
                            <resolved>Thu, 3 Jun 2010 10:59:41 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="300">5m</timeoriginalestimate>
                            <timeestimate seconds="300">5m</timeestimate>
                                        <comments>
                            <comment id="12874430" author="asinger" created="Wed, 2 Jun 2010 05:40:44 +0000"  >&lt;p&gt;Examples:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;convert to png image with rgba color -&amp;gt; image w/ transparent background (new)&lt;/li&gt;
	&lt;li&gt;convert to png image with rgb color -&amp;gt; image w/ white background (as before)&lt;/li&gt;
	&lt;li&gt;convert to jpg image with rgb image type -&amp;gt; image w/ white background (as before)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;test with:&lt;/p&gt;

&lt;p&gt;java -jar pdfbox-app-1.2.0-SNAPSHOT.jar PDFToImage -imageType png -startPage 1 -endPage 1 -color rgba -resolution 108 hello-DroidSans-Identity-H.pdf&lt;/p&gt;

&lt;p&gt;java -jar pdfbox-app-1.2.0-SNAPSHOT.jar PDFToImage -imageType png -startPage 1 -endPage 1 -color rgb -resolution 108 hello-DroidSans-Identity-H.pdf&lt;/p&gt;

&lt;p&gt;java -jar pdfbox-app-1.2.0-SNAPSHOT.jar PDFToImage -imageType jpg -startPage 1 -endPage 1 -color rgb -resolution 108 hello-DroidSans-Identity-H.pdf&lt;/p&gt;</comment>
                            <comment id="12875051" author="lehmi" created="Thu, 3 Jun 2010 10:59:41 +0000"  >&lt;p&gt;I&apos;ve applied the patch with version 950951.&lt;/p&gt;

&lt;p&gt;Thanks to Armando for the contribution.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446111" name="hello-DroidSans-Identity-H-rgba.png" size="3695" author="asinger" created="Wed, 2 Jun 2010 05:40:44 +0000"/>
                            <attachment id="12446110" name="hello-DroidSans-Identity-H.pdf" size="192095" author="asinger" created="Wed, 2 Jun 2010 05:40:44 +0000"/>
                            <attachment id="12446113" name="hello-DroidSans-Identity-H1-rgb.jpg" size="9826" author="asinger" created="Wed, 2 Jun 2010 05:41:25 +0000"/>
                            <attachment id="12446112" name="hello-DroidSans-Identity-H1-rgb.png" size="3851" author="asinger" created="Wed, 2 Jun 2010 05:41:25 +0000"/>
                            <attachment id="12446109" name="pdfbox-r945442.patch" size="1161" author="asinger" created="Wed, 2 Jun 2010 05:40:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163463</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 25 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zlo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>205813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>