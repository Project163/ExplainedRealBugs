<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:58:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2505] ArrayIndexOutOfBoundsException in PDColor constructor</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2505</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.ArrayIndexOutOfBoundsException: -1
        at java.util.ArrayList.elementData(Unknown Source)
        at java.util.ArrayList.get(Unknown Source)
        at org.apache.pdfbox.cos.COSArray.get(COSArray.java:210)
        at org.apache.pdfbox.pdmodel.graphics.color.PDColor.&amp;lt;init&amp;gt;(PDColor.java:54)
        at org.apache.pdfbox.contentstream.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.color.SetColor.process(SetColor.java:41)
        at org.apache.pdfbox.contentstream.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.color.SetNonStrokingDeviceCMYKColor.process(SetNonStrokingDeviceCMYKColor.java:38)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The attached file has a &quot;k&quot; without arguments.&lt;br/&gt;
This is only in 2.0, not in 1.8. In 1.8 SetNonStrokingCMYKColor initializes the array with size 4 (ok, it will crash if there are 5 arguments), in 2.0 SetNonStrokingDeviceCMYKColor / SetColor take what is there.&lt;/p&gt;

&lt;p&gt;Two possible solutions in SetColor:&lt;br/&gt;
1) initialize &quot;components&quot; with the initial colors of the colorspace&lt;br/&gt;
2) initialize &quot;components&quot; with empty array&lt;/p&gt;

&lt;p&gt;Both solutions get rid of the exception. Solution 2 is used in another constructor.&lt;/p&gt;

&lt;p&gt;Which one is better? (I&apos;d prefer solution 1 because it has the correct array size and would also change the other constructor)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12756156">PDFBOX-2505</key>
            <summary>ArrayIndexOutOfBoundsException in PDColor constructor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Nov 2014 17:32:49 +0000</created>
                <updated>Thu, 17 Mar 2016 19:08:01 +0000</updated>
                            <resolved>Thu, 27 Nov 2014 07:17:19 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14216779" author="jahewson" created="Tue, 18 Nov 2014 20:54:29 +0000"  >&lt;p&gt;Invalid operators/operands are usually just skipped. Unless the PDF fails to render, that&apos;s what I&apos;d do.&lt;/p&gt;</comment>
                            <comment id="14227332" author="jira-bot" created="Thu, 27 Nov 2014 07:01:53 +0000"  >&lt;p&gt;Commit 1642033 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642033&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642033&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2505&quot; title=&quot;ArrayIndexOutOfBoundsException in PDColor constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2505&quot;&gt;&lt;del&gt;PDFBOX-2505&lt;/del&gt;&lt;/a&gt;: parameter validation for the device colorspace operators; code cleanup&lt;/p&gt;</comment>
                            <comment id="14227857" author="jahewson" created="Thu, 27 Nov 2014 17:46:01 +0000"  >&lt;p&gt;The method checkArgumentSize doesn&apos;t really belong in OperatorProcessor as it isn&apos;t used elsewhere, it would be better to move it to SetColor to avoid unnecessary abstraction. Also what happens to colours which have &lt;em&gt;too many&lt;/em&gt; components, couldn&apos;t these be truncated rather than ignored?&lt;/p&gt;


&lt;p&gt;One last, thing, regarding the following change:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;     /**
      * Returns the name of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;, e.g. &lt;span class=&quot;code-quote&quot;&gt;&quot;BI&quot;&lt;/span&gt;.
+     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; name.
      */
     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getName();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;You don&apos;t need to worry about adding @return for simple getters, or any case where the text is essentially a duplicate of the description. The &lt;a href=&quot;https://google-styleguide.googlecode.com/svn/trunk/javaguide.html#s7.2-summary-fragment&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Google Java Style Guide&lt;/a&gt; briefly mentions this, and it&apos;s becoming a standard practice now in newer Java codebases.&lt;/p&gt;</comment>
                            <comment id="14227873" author="jira-bot" created="Thu, 27 Nov 2014 18:13:05 +0000"  >&lt;p&gt;Commit 1642196 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642196&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642196&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2505&quot; title=&quot;ArrayIndexOutOfBoundsException in PDColor constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2505&quot;&gt;&lt;del&gt;PDFBOX-2505&lt;/del&gt;&lt;/a&gt;: parameter validation&lt;/p&gt;</comment>
                            <comment id="14227875" author="jira-bot" created="Thu, 27 Nov 2014 18:16:14 +0000"  >&lt;p&gt;Commit 1642198 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642198&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642198&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2505&quot; title=&quot;ArrayIndexOutOfBoundsException in PDColor constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2505&quot;&gt;&lt;del&gt;PDFBOX-2505&lt;/del&gt;&lt;/a&gt;: parameter validation as minimum, code cleanup&lt;/p&gt;</comment>
                            <comment id="14227876" author="jira-bot" created="Thu, 27 Nov 2014 18:18:14 +0000"  >&lt;p&gt;Commit 1642199 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642199&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2505&quot; title=&quot;ArrayIndexOutOfBoundsException in PDColor constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2505&quot;&gt;&lt;del&gt;PDFBOX-2505&lt;/del&gt;&lt;/a&gt;: @return no longer needed&lt;/p&gt;</comment>
                            <comment id="14227877" author="tilman" created="Thu, 27 Nov 2014 18:19:16 +0000"  >&lt;p&gt;Thanks; I put checkArgumentSize in OperatorProcessor with the thought that we&apos;d have more such validators in the future.&lt;/p&gt;</comment>
                            <comment id="14227948" author="jahewson" created="Thu, 27 Nov 2014 20:30:16 +0000"  >&lt;p&gt;But it might not prove to be a good API choice for a future, more general problem, for example it&apos;s already changed from checking &lt;tt&gt;&amp;#33;=&lt;/tt&gt; to checking &lt;tt&gt;&amp;gt;=&lt;/tt&gt;. You can always add more abstraction when you need it, and move the method up to OperatorProcessor from SetColor, but going the other way is a breaking API change! So adding abstraction which you don&apos;t need yet is a code smell, as you can easily get stuck with an API which turns out not to be as general as you need it to be when you actually come to solve the future problem.&lt;/p&gt;</comment>
                            <comment id="14227972" author="tilman" created="Thu, 27 Nov 2014 21:27:14 +0000"  >&lt;p&gt;Are you aware that I just added a call to that validator in an operator that is unrelated to setColor?&lt;/p&gt;</comment>
                            <comment id="14228480" author="jahewson" created="Fri, 28 Nov 2014 19:15:39 +0000"  >&lt;p&gt;No, that&apos;s ok though, I&apos;m always happy to advocate the general principles of careful API design. Looks like we&apos;re on the same page already &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14239866" author="jira-bot" created="Tue, 9 Dec 2014 19:06:49 +0000"  >&lt;p&gt;Commit 1644156 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1644156&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1644156&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2505&quot; title=&quot;ArrayIndexOutOfBoundsException in PDColor constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2505&quot;&gt;&lt;del&gt;PDFBOX-2505&lt;/del&gt;&lt;/a&gt;: fix parameter validation from previous commit&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12682201" name="PDFBOX-2505-032618-p96.pdf" size="18481" author="tilman" created="Tue, 18 Nov 2014 17:34:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22ik7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>