<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:13:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5403] Blurry / distorted rendering</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5403</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The attached PDF uses many stripes with an image and a mask.&lt;/p&gt;

&lt;p&gt;There seems to be an issue when mask and image are combined.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13041733/13041733_image-2022-03-29-18-29-03-860.png&quot; height=&quot;91&quot; width=&quot;518&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13436477">PDFBOX-5403</key>
            <summary>Blurry / distorted rendering</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="Schmidor">Oliver Schmidtmer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Mar 2022 16:31:08 +0000</created>
                <updated>Sat, 20 Apr 2024 10:00:20 +0000</updated>
                            <resolved>Fri, 5 Aug 2022 03:21:32 +0000</resolved>
                                    <version>2.0.25</version>
                                    <fixVersion>2.0.27</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17514467" author="tilman" created="Wed, 30 Mar 2022 06:34:18 +0000"  >&lt;p&gt;It&apos;s the combination of stencil image and pattern &quot;color&quot;, that is a known weakness. Look for &quot;stencil&quot; in PageDrawer.java.&lt;/p&gt;</comment>
                            <comment id="17514676" author="schmidor" created="Wed, 30 Mar 2022 12:45:08 +0000"  >&lt;p&gt;There are alpha values between 0 and 255, so I tried adding interpolation.&lt;/p&gt;

&lt;p&gt;I think it improves somewhat, but I think there is still another issue. There are 1px lines which I think are caused by an offset between image and mask, which generally lowers the image quality. That is visible before and after my changes.&lt;/p&gt;

&lt;p&gt;I have another PDF, where this is more noticable. However, I am waiting whether our customer allows to share it.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13041775/13041775_image-2022-03-30-14-39-12-855.png&quot; height=&quot;352&quot; width=&quot;634&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17514762" author="tilman" created="Wed, 30 Mar 2022 15:04:52 +0000"  >&lt;p&gt;This doesn&apos;t really work, see e.g.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853106/gs-bugzilla692158-schleuse-veryslow.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853106/gs-bugzilla692158-schleuse-veryslow.pdf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17515215" author="schmidor" created="Thu, 31 Mar 2022 10:01:19 +0000"  >&lt;p&gt;I think there is some issue with placing the alpha mask.&lt;/p&gt;

&lt;p&gt;If I just set the pixels to &quot;&lt;font color=&quot;#000000&quot;&gt;raster&lt;/font&gt;.setPixel(x, y, &lt;font color=&quot;#0033b3&quot;&gt;new int&lt;/font&gt;[]{ &lt;font color=&quot;#1750eb&quot;&gt;0&lt;/font&gt;, &lt;font color=&quot;#1750eb&quot;&gt;0&lt;/font&gt;, &lt;font color=&quot;#1750eb&quot;&gt;0&lt;/font&gt;, alphaPixel&lt;span class=&quot;error&quot;&gt;&amp;#91;&lt;font color=&quot;#1750eb&quot;&gt;0&lt;/font&gt;&amp;#93;&lt;/span&gt;});&quot; there is a line, which hints on an offset in the&#160;&lt;font color=&quot;#000000&quot;&gt;renderedMask-images. &lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt;Setting &quot;raster.setPixel(x, y, &lt;font color=&quot;#0033b3&quot;&gt;&lt;/font&gt;new int&lt;/font&gt;[]{ &lt;font color=&quot;#1750eb&quot;&gt;0&lt;/font&gt;, &lt;font color=&quot;#1750eb&quot;&gt;0&lt;/font&gt;, &lt;font color=&quot;#1750eb&quot;&gt;0&lt;/font&gt;, 255});&quot; would cause a closed black.&lt;font color=&quot;&quot;&gt;&lt;br/&gt;
&lt;br/&gt;
&lt;font color=&quot;#000000&quot;&gt;&lt;/font&gt;This then also messes up &lt;span class=&quot;error&quot;&gt;&amp;#91;^gs-bugzilla692158-schleuse-veryslow.pdf&amp;#93;&lt;/span&gt; showing a grid pattern.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13041835/13041835_image-2022-03-31-11-55-36-061.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17515959" author="tilman" created="Fri, 1 Apr 2022 15:11:18 +0000"  >&lt;p&gt;I played around with our code... the bad stuff happens here:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// draw the mask
&lt;/span&gt;BufferedImage mask = pdImage.getImage();
BufferedImage renderedMask = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
g = (Graphics2D) renderedMask.getGraphics();
g.translate(-bounds.getMinX(), -bounds.getMinY());
AffineTransform imageTransform = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AffineTransform(at);
imageTransform.scale(1.0 / mask.getWidth(), -1.0 / mask.getHeight());
imageTransform.translate(0, -mask.getHeight());
g.setRenderingHints(graphics.getRenderingHints());
g.drawImage(mask, imageTransform, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
g.dispose();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Save mask and renderedMask to files, and you&apos;ll see that renderedMask looks terrible.&lt;/p&gt;

&lt;p&gt;I was able to create a better renderedMask by using &lt;tt&gt;getScaledInstance()&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
BufferedImage renderedMask = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
g = (Graphics2D) renderedMask.getGraphics();
g.translate(-bounds.getMinX(), -bounds.getMinY());
AffineTransform imageTransform = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AffineTransform(at);
imageTransform.scale(1.0 / mask.getWidth(), -1.0 / mask.getHeight());
imageTransform.translate(0, -mask.getHeight());
g.setRenderingHints(graphics.getRenderingHints());

&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; w2 = (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.round(mask.getWidth() * &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.abs(imageTransform.getScaleX()));
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; h2 = (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.round(mask.getHeight()* &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.abs(imageTransform.getScaleY()));
Image scaledMask = mask.getScaledInstance(w2, h2, Image.SCALE_SMOOTH);
imageTransform.scale(1f / &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.abs(imageTransform.getScaleY()), 1f / &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.abs(imageTransform.getScaleX()));
g.drawImage(scaledMask, imageTransform, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
g.dispose();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and modifying code further down to use that as a gray mask:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; y = 0; y &amp;lt; h; y++)
{
	&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; x = 0; x &amp;lt; w; x++)
	{
		alphaPixel = alpha.getPixel(x, y, alphaPixel);
		rasterPixel = raster.getPixel(x, y, rasterPixel);
		rasterPixel[3] = 255 - alphaPixel[0];
		raster.setPixel(x, y, rasterPixel);
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However that has the drawback that the getScaledInstance() call produces a black line in many images so the whole change is worthless.&lt;/p&gt;

&lt;p&gt;What we could do (but I haven&apos;t tested) is to color-flip the mask, and then scale, and modify the code later down, i.e. not to substract from 255. This way the black line wouldn&apos;t bother. But all this gets really too complex.&lt;/p&gt;</comment>
                            <comment id="17518337" author="schmidor" created="Wed, 6 Apr 2022 18:23:29 +0000"  >&lt;p&gt;Tried it with the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                BufferedImage mask = pdImage.getImage();
                &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] inv = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[256];
                &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; inv.length; i++) {
                    inv[i] = (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;) (255 - i);
                }
                LookupTable table = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteLookupTable(0, inv);
                BufferedImage tmp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedImage(mask.getWidth(), mask.getHeight(), BufferedImage.TYPE_INT_RGB);
                mask = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LookupOp(table, graphics.getRenderingHints()).filter(mask, tmp);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Indeed that looks good on my PDF: However it breaks, also without the invert, &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853106/gs-bugzilla692158-schleuse-veryslow.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853106/gs-bugzilla692158-schleuse-veryslow.pdf&lt;/a&gt; and another PDF I currently can&apos;t share.&lt;/p&gt;</comment>
                            <comment id="17518346" author="tilman" created="Wed, 6 Apr 2022 18:53:20 +0000"  >&lt;p&gt;Maybe I misapplied the change, your file isn&apos;t better (it is black), and it also fails for &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1958&quot; title=&quot;image mask outline with shading pattern is invisible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1958&quot;&gt;&lt;del&gt;PDFBOX-1958&lt;/del&gt;&lt;/a&gt;-cinnebar.pdf, PDFJS-9627.pdf, and gs-bugzilla690297.pdf&lt;/p&gt;</comment>
                            <comment id="17518504" author="schmidor" created="Wed, 6 Apr 2022 22:56:57 +0000"  >&lt;p&gt; A full patch file:&lt;br/&gt;
&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13042090/13042090_inver-smooth-scale.patch&quot; title=&quot;inver-smooth-scale.patch attached to PDFBOX-5403&quot;&gt;inver-smooth-scale.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;br/&gt;
I omitted removing the inversion when changing the pixel in my comment &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;For my other PDF and gs-bugzilla692158-schleuse-veryslow.pdf w2/h2 is 0 as imageTransform.getScaleX() / imageTransform.getScaleY() is 0.0. I suspect that this is causing problems with those.&lt;/p&gt;</comment>
                            <comment id="17519114" author="tilman" created="Thu, 7 Apr 2022 19:15:51 +0000"  >&lt;p&gt;Ah, you improved the code I proposed. (Btw there&apos;s a X-Y-mismatch bug in the &quot;imageTransform.scale(&quot; line)&lt;br/&gt;
This works really nicely with your file. Yeah, the &quot;Schleuse&quot; file is flawed. And &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2171&quot; title=&quot;UnsupportedOperationException for stencil image / pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2171&quot;&gt;&lt;del&gt;PDFBOX-2171&lt;/del&gt;&lt;/a&gt;-002-002710-p14.pdf (&quot;New Harmony Consolidated&quot; and &quot;Sailor Springs&quot; patterns).&lt;/p&gt;</comment>
                            <comment id="17520835" author="schmidor" created="Mon, 11 Apr 2022 23:20:41 +0000"  >&lt;p&gt;Next try  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;scaleX/scaleY (m00, m11) in the Matrix might be 0.0. In those the shearing (m01, m10) are non 0.0. That probably is a 90&#176; rotation. If those are used for scaling it works.&lt;br/&gt;
Then again, if the factor is too small, the result still gets too blurry. For that I added the &amp;lt;.25 -&amp;gt; *2 loop.&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13042270/13042270_inverse-smooth-scale-shear.patch&quot; title=&quot;inverse-smooth-scale-shear.patch attached to PDFBOX-5403&quot;&gt;inverse-smooth-scale-shear.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17521487" author="tilman" created="Wed, 13 Apr 2022 06:27:38 +0000"  >&lt;p&gt;Thanks, the Schleuse file is better, I don&apos;t mind that the grid is different than Adobe. However the pattern in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2171&quot; title=&quot;UnsupportedOperationException for stencil image / pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2171&quot;&gt;&lt;del&gt;PDFBOX-2171&lt;/del&gt;&lt;/a&gt;-002-002710-p14.pdf is still missing.&lt;/p&gt;</comment>
                            <comment id="17521755" author="schmidor" created="Wed, 13 Apr 2022 15:16:05 +0000"  >&lt;p&gt;In current head it looks like a pattern, but its also not like the original in Acrobat;&lt;br/&gt;
&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13042383/13042383_screenshot-1.png&quot; height=&quot;481&quot; width=&quot;372&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17521858" author="tilman" created="Wed, 13 Apr 2022 18:12:53 +0000"  >&lt;p&gt;Yeah I know it&apos;s far from perfect, but with your change there was nothing at all.&lt;/p&gt;</comment>
                            <comment id="17521892" author="schmidor" created="Wed, 13 Apr 2022 19:12:52 +0000"  >&lt;p&gt;Unfortunately, that what is visible seems to be the issue, which caused the black lines in the other PDFs.&lt;/p&gt;

&lt;p&gt;I don&apos;t think this is a good PDF. To me it seems even in Acrobat to be more a rendering issue than the intended result. If I remove setting the alpha value, it looks like that should have been diagonal lines like the other &quot;oil&quot; areas.&lt;/p&gt;</comment>
                            <comment id="17525152" author="tilman" created="Wed, 20 Apr 2022 17:57:01 +0000"  >&lt;p&gt;The main problem here is that I&apos;d like that improvements never make existing files worse. I don&apos;t really care about the &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2171&quot; title=&quot;UnsupportedOperationException for stencil image / pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2171&quot;&gt;&lt;del&gt;PDFBOX-2171&lt;/del&gt;&lt;/a&gt;-002-002710-p14.pdf file but if that one doesn&apos;t render properly anymore, who knows what other files won&apos;t?&lt;/p&gt;

&lt;p&gt;I&apos;m wondering if one could use a strategy that decides to use the old scaling method if something with pixels results in a blank pattern. Or if the pattern is very small / something that we assume will not turn out good.&lt;/p&gt;</comment>
                            <comment id="17568563" author="schmidor" created="Tue, 19 Jul 2022 13:34:55 +0000"  >&lt;p&gt;How about this version, which only does the scaling if the transform is not too small, but still always does the inversion for smoother rendering.&lt;br/&gt;
&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13046977/13046977_inverse-smooth-scale-shear-2.patch&quot; title=&quot;inverse-smooth-scale-shear-2.patch attached to PDFBOX-5403&quot;&gt;inverse-smooth-scale-shear-2.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;br/&gt;
The &quot;pattern&quot; in 002-002710-p14.pdf should be visible now, only not as dark as in current head. &quot;bad rendering.pdf&quot; and my other file do work with that.&lt;/p&gt;</comment>
                            <comment id="17568803" author="tilman" created="Wed, 20 Jul 2022 03:26:46 +0000"  >&lt;p&gt;Thanks, I&apos;ll investigate this when the heat wave is over, maybe earlier.&lt;/p&gt;</comment>
                            <comment id="17570314" author="tilman" created="Sat, 23 Jul 2022 14:53:15 +0000"  >&lt;p&gt;&quot;new harmony&quot; is barely visible now IMHO &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;gs-bugzilla692158-schleuse-veryslow.pdf: less blue, but acceptable&lt;/li&gt;
	&lt;li&gt;PATTYP2.pdf: slightly different, but ok&lt;/li&gt;
	&lt;li&gt;PDFJS-9627.pdf: much better&lt;/li&gt;
	&lt;li&gt;pop-bugzilla64892-p3-slow.pdf: different (but always wrong, this is a tricky file)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17570316" author="tilman" created="Sat, 23 Jul 2022 14:55:40 +0000"  >&lt;p&gt;Btw you can get the actual scaling by converting your &lt;tt&gt;AffineTransform&lt;/tt&gt; to a PDFBox &lt;tt&gt;Matrix&lt;/tt&gt; and using &lt;tt&gt;Matrix.getScalingFactorX()&lt;/tt&gt; and &lt;tt&gt;Matrix.getScalingFactorY()&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17571625" author="schmidor" created="Tue, 26 Jul 2022 21:16:03 +0000"  >&lt;p&gt;Switching for old/new by using the scaling value was a bit problematic for one of my files. Switching on mask size now works.&lt;/p&gt;

&lt;p&gt;I&apos;m a bit uncomfortable also deactivating the inversion by mask size, but otherwise this will not work for 002-002710-p14.pdf&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13047255/13047255_inverse-smooth-scale-shear-3.patch&quot; title=&quot;inverse-smooth-scale-shear-3.patch attached to PDFBOX-5403&quot;&gt;inverse-smooth-scale-shear-3.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the &lt;tt&gt;Matrix.getScalingFactorX()&lt;/tt&gt; hint &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17572085" author="tilman" created="Wed, 27 Jul 2022 18:45:16 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Schmidor&quot; class=&quot;user-hover&quot; rel=&quot;Schmidor&quot;&gt;Schmidor&lt;/a&gt; this is good now. The pattern is darker but this is better than barely having it at all. I will commit this before the next release.&lt;/p&gt;</comment>
                            <comment id="17573363" author="jira-bot" created="Sun, 31 Jul 2022 09:03:40 +0000"  >&lt;p&gt;Commit 1903135 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1903135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1903135&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5403&quot; title=&quot;Blurry / distorted rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5403&quot;&gt;&lt;del&gt;PDFBOX-5403&lt;/del&gt;&lt;/a&gt;: improve stencil masks, as suggested by Oliver Schmidtmer&lt;/p&gt;</comment>
                            <comment id="17573365" author="jira-bot" created="Sun, 31 Jul 2022 09:03:50 +0000"  >&lt;p&gt;Commit 1903136 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1903136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1903136&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5403&quot; title=&quot;Blurry / distorted rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5403&quot;&gt;&lt;del&gt;PDFBOX-5403&lt;/del&gt;&lt;/a&gt;: improve stencil masks, as suggested by Oliver Schmidtmer&lt;/p&gt;</comment>
                            <comment id="17573458" author="tilman" created="Sun, 31 Jul 2022 18:16:23 +0000"  >&lt;p&gt;I&apos;ve committed it and added my thoughts as a comment, despite knowing that code comments can&apos;t be trusted.&lt;/p&gt;</comment>
                            <comment id="17575540" author="tilman" created="Fri, 5 Aug 2022 03:21:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Schmidor&quot; class=&quot;user-hover&quot; rel=&quot;Schmidor&quot;&gt;Schmidor&lt;/a&gt; Thanks for your contribution and your patience!&lt;/p&gt;</comment>
                            <comment id="17575541" author="tilman" created="Fri, 5 Aug 2022 03:24:29 +0000"  >&lt;p&gt;I also tested using GRAY instead of RGB and it worked but I didn&apos;t modify that, because I remember that a long time ago during a crazy debug session I discovered that java is converting everything to RGB internally. There&apos;s probably a code comment or a JIRA comment somewhere.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13575024">PDFBOX-5802</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13041774" name="alpha_interpolation.patch" size="2056" author="Schmidor" created="Wed, 30 Mar 2022 12:38:59 +0000"/>
                            <attachment id="13041734" name="bad rendering.pdf" size="1070083" author="Schmidor" created="Tue, 29 Mar 2022 16:28:13 +0000"/>
                            <attachment id="13041733" name="image-2022-03-29-18-29-03-860.png" size="331164" author="Schmidor" created="Tue, 29 Mar 2022 16:29:04 +0000"/>
                            <attachment id="13041775" name="image-2022-03-30-14-39-12-855.png" size="600374" author="Schmidor" created="Wed, 30 Mar 2022 12:39:14 +0000"/>
                            <attachment id="13041835" name="image-2022-03-31-11-55-36-061.png" size="14971" author="Schmidor" created="Thu, 31 Mar 2022 09:55:36 +0000"/>
                            <attachment id="13042090" name="inver-smooth-scale.patch" size="3737" author="Schmidor" created="Wed, 6 Apr 2022 22:53:19 +0000"/>
                            <attachment id="13046977" name="inverse-smooth-scale-shear-2.patch" size="4561" author="Schmidor" created="Tue, 19 Jul 2022 13:21:04 +0000"/>
                            <attachment id="13047255" name="inverse-smooth-scale-shear-3.patch" size="4925" author="Schmidor" created="Tue, 26 Jul 2022 21:15:22 +0000"/>
                            <attachment id="13042270" name="inverse-smooth-scale-shear.patch" size="4507" author="Schmidor" created="Mon, 11 Apr 2022 23:13:24 +0000"/>
                            <attachment id="13042383" name="screenshot-1.png" size="699465" author="Schmidor" created="Wed, 13 Apr 2022 15:06:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10xuw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>