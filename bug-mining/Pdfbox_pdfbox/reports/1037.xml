<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:59:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2728] java.awt.geom.IllegalPathStateException: missing initial moveto in path definition</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2728</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I get this exception :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.awt.geom.IllegalPathStateException: missing initial moveto in path definition
	at java.awt.geom.Path2D$&lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt;.needRoom(Path2D.java:280)
	at java.awt.geom.Path2D.closePath(Path2D.java:1769)
	at org.apache.pdfbox.rendering.PageDrawer.closePath(PageDrawer.java:693)
	at org.apache.pdfbox.contentstream.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.graphics.ClosePath.process(ClosePath.java:35)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processOperator(PDFStreamEngine.java:788)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStreamOperators(PDFStreamEngine.java:454)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStream(PDFStreamEngine.java:425)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStream(PDFStreamEngine.java:398)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processPage(PDFStreamEngine.java:164)
	at org.apache.pdfbox.rendering.PageDrawer.drawPage(PageDrawer.java:164)
	at org.apache.pdfbox.rendering.PDFRenderer.renderPage(PDFRenderer.java:213)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2189&quot; title=&quot;java.awt.geom.IllegalPathStateException: missing initial moveto in path definition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2189&quot;&gt;&lt;del&gt;PDFBOX-2189&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I can&apos;t include the PDF file for privacy reason but I think a similar solution applied for the other bug could fix this problem too&lt;/p&gt;</description>
                <environment></environment>
        <key id="12785535">PDFBOX-2728</key>
            <summary>java.awt.geom.IllegalPathStateException: missing initial moveto in path definition</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="Macs75">Massimo Franzoni</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Mar 2015 14:46:33 +0000</created>
                <updated>Thu, 17 Mar 2016 19:08:03 +0000</updated>
                            <resolved>Mon, 30 Mar 2015 16:47:51 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14381483" author="jira-bot" created="Thu, 26 Mar 2015 07:08:38 +0000"  >&lt;p&gt;Commit 1669278 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1669278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1669278&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2728&quot; title=&quot;java.awt.geom.IllegalPathStateException: missing initial moveto in path definition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2728&quot;&gt;&lt;del&gt;PDFBOX-2728&lt;/del&gt;&lt;/a&gt;: fail gracefully if initial MoveTo is missing&lt;/p&gt;</comment>
                            <comment id="14383536" author="macs75" created="Fri, 27 Mar 2015 08:49:48 +0000"  >&lt;p&gt;unfortuaneelly the fix is not enough.. I get another NPE with the same PDF&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NullPointerException
	at org.apache.pdfbox.rendering.PageDrawer.getCurrentPoint(PageDrawer.java:652)
	at org.apache.pdfbox.contentstream.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.graphics.ClosePath.process(ClosePath.java:39)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processOperator(PDFStreamEngine.java:802)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStreamOperators(PDFStreamEngine.java:464)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStream(PDFStreamEngine.java:438)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processPage(PDFStreamEngine.java:149)
	at org.apache.pdfbox.rendering.PageDrawer.drawPage(PageDrawer.java:147)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14384302" author="jira-bot" created="Fri, 27 Mar 2015 18:24:11 +0000"  >&lt;p&gt;Commit 1669653 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1669653&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1669653&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2728&quot; title=&quot;java.awt.geom.IllegalPathStateException: missing initial moveto in path definition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2728&quot;&gt;&lt;del&gt;PDFBOX-2728&lt;/del&gt;&lt;/a&gt;: simplify API to avoid NPE&lt;/p&gt;</comment>
                            <comment id="14384309" author="tilman" created="Fri, 27 Mar 2015 18:26:25 +0000"  >&lt;p&gt;Sorry... the risks of not having a test file...&lt;/p&gt;

&lt;p&gt;I&apos;m changing the return type of getCurrentPoint() from Point2D.Float to Point2D because the current cast from double to float including a &quot;new&quot; slows down processing if the point exists. The cast to float is needed only in CurveToReplicateInitialPoint. The best is that now I don&apos;t even have to check for null pointer.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Macs75&quot; class=&quot;user-hover&quot; rel=&quot;Macs75&quot;&gt;Macs75&lt;/a&gt; tell me if it works this time.&lt;/p&gt;</comment>
                            <comment id="14386393" author="macs75" created="Mon, 30 Mar 2015 08:33:36 +0000"  >&lt;p&gt;Thank you Tilman, now it works fine.&lt;/p&gt;</comment>
                            <comment id="14386957" author="jira-bot" created="Mon, 30 Mar 2015 16:47:20 +0000"  >&lt;p&gt;Commit 1670142 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1670142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1670142&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2728&quot; title=&quot;java.awt.geom.IllegalPathStateException: missing initial moveto in path definition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2728&quot;&gt;&lt;del&gt;PDFBOX-2728&lt;/del&gt;&lt;/a&gt;: simplify API to avoid NPE&lt;/p&gt;</comment>
                            <comment id="14388897" author="jahewson" created="Tue, 31 Mar 2015 17:32:44 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I&apos;m changing the return type of getCurrentPoint() from Point2D.Float to Point2D because the current cast from double to float including a &quot;new&quot; slows down processing if the point exists.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Does it? Have you profiled that code? What makes you think the JVM&apos;s escape analysis doesn&apos;t eliminate the allocation entirely? (as I&apos;d expect it to). Point2D.Float is a stronger contact than Point2D, so on the surface it&apos;s not a desirable change (especially as the extra double precision is meaningless).&lt;/p&gt;</comment>
                            <comment id="14389018" author="tilman" created="Tue, 31 Mar 2015 17:59:36 +0000"  >&lt;p&gt;No I have not profiled that code and I won&apos;t, because I&apos;m unable to get reproductible time results on my computer. I doubt that the JVM would analyse this across classes to be absolutely sure that it isn&apos;t modified at a later time, so that the allocation can be skipped (and how would it know that the point is already float?). Point2D doesn&apos;t mean double precision, it just mean that the internal precision isn&apos;t known. The old code forced a float type, which isn&apos;t needed for a null check. I also consider it more flexible to return the base class instead of the derived class and only convert when really needed. And it makes shorter code and eliminates the NPE thanks to the redesign.&lt;/p&gt;

&lt;p&gt;Having said that, if you want Point2D.Float with the more complex code, I&apos;ll just do it.&lt;/p&gt;</comment>
                            <comment id="14480986" author="jahewson" created="Mon, 6 Apr 2015 06:32:54 +0000"  >&lt;p&gt;There&apos;s no need to actually change this, but the JVM does do some very sophisticated escape analysis, so it&apos;s worth thinking carefully about that when making assumptions about Java performance. It depends on the caller as to what the optimisation will be, but any case where a new object is created and used simply used to return fields which are immediately unpacked by the caller can be eliminated with escape analysis (i.e. the object will never be allocated, in this case the Point2D.Float is unlikely to be allocated - but I&apos;ve not checked this!).&lt;/p&gt;

&lt;p&gt;Not sure I agree about returning the base class being better - after all we wouldn&apos;t want all our APIs to return Object (not that that would be sensible).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27c87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>