<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:07:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4158] COSDocument and PDFMerger may not close all IO resources if closing of one fails</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4158</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;As observed on the users mailing list  &lt;tt&gt;COSDocument.close&lt;/tt&gt; and &lt;tt&gt;PDFMergerUtility.mergeDocuments&lt;/tt&gt; might not close all IO resources if closing of one of the resources fails&lt;/p&gt;</description>
                <environment></environment>
        <key id="13146282">PDFBOX-4158</key>
            <summary>COSDocument and PDFMerger may not close all IO resources if closing of one fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="msahyoun">Maruan Sahyoun</assignee>
                                    <reporter username="msahyoun">Maruan Sahyoun</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2018 16:04:49 +0000</created>
                <updated>Thu, 21 Jun 2018 20:27:55 +0000</updated>
                            <resolved>Mon, 9 Apr 2018 13:36:04 +0000</resolved>
                                    <version>2.0.4</version>
                    <version>2.0.9</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.10</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16405071" author="gary.potagal" created="Mon, 19 Mar 2018 16:20:46 +0000"  >&lt;p&gt;We tried using PDFBox 2.0.4 to merge PDF Documents, in order to allow the user Print all documents at once from the Browser.&#160; The resulting document is sent to the print window.&#160; In order to improve customer experience, documents are merged to the Servlet HTTP Output Stream.&#160; It&#8217;s possible for the user to close the window or network to time out, resulting in Exception below.&lt;/p&gt;

&lt;p&gt;We used JProfiler to diagnose the memory leak and followed instructions: &lt;a href=&quot;https://www.ej-technologies.com/resources/jprofiler/help/doc/#jprofiler.heapWalker.memoryLeaks&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.ej-technologies.com/resources/jprofiler/help/doc/#jprofiler.heapWalker.memoryLeaks&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;BiggestObject and Allocation Screen Captures are attached. &#160;&#160;We also observed that Scratch File is not cleaned up.&#160;&lt;/p&gt;

&lt;p&gt;&#160;In reviewing the code:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;org.apache.pdfbox.multipdf.PDFMergerUtility#mergeDocuments(MemoryUsageSetting memUsageSetting)&#160;finally{ } block loops over (PDDocument doc : tobeclosed) without catching Exception, probably causing the leak that we&#8217;re seeing.&lt;/li&gt;
	&lt;li&gt;org.apache.pdfbox.cos.COSDocument#close()&#160;&#160;if closing COSStream or COSObject results in IOException, close on scratchFile is never reached.&#160;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;As this is bringing down our production servers, I&#8217;ll try to add debugging and use try / catch / finally on every operation to see if the memory leak can be avoided and will submit a fix for your review&lt;/p&gt;

&lt;p&gt;======&lt;/p&gt;

&lt;p&gt;org.apache.catalina.connector.ClientAbortException: java.io.IOException: Broken pipe&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:396)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:426)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:283)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.catalina.connector.OutputBuffer.writeByte(OutputBuffer.java:440)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:81)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.catalina.filters.ExpiresFilter$XServletOutputStream.write(ExpiresFilter.java:1016)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.pdfwriter.COSStandardOutputStream.write(COSStandardOutputStream.java:144)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.cos.COSName.writePDF(COSName.java:702)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.pdfwriter.COSWriter.visitFromName(COSWriter.java:1155)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.cos.COSName.accept(COSName.java:672)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.pdfwriter.COSWriter.visitFromDictionary(COSWriter.java:995)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.cos.COSDictionary.accept(COSDictionary.java:1325)&lt;/p&gt;

&lt;p&gt;&#160; &#160;&#160;&#160;&#160;&#160;&#160;at org.apache.pdfbox.pdfwriter.COSWriter.doWriteObject(COSWriter.java:522)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.pdfwriter.COSWriter.doWriteObjects(COSWriter.java:460)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.pdfwriter.COSWriter.doWriteBody(COSWriter.java:444)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.pdfwriter.COSWriter.visitFromDocument(COSWriter.java:1096)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.cos.COSDocument.accept(COSDocument.java:419)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.pdfwriter.COSWriter.write(COSWriter.java:1367)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.pdfwriter.COSWriter.write(COSWriter.java:1254)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.pdmodel.PDDocument.save(PDDocument.java:1232)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.pdfbox.multipdf.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:280)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16405075" author="msahyoun" created="Mon, 19 Mar 2018 16:27:26 +0000"  >&lt;p&gt;Hi, what&apos;s the link going into the blue PDDocument box in &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12915154/12915154_BiggestObjectAllocationGraph.png&quot; title=&quot;BiggestObjectAllocationGraph.png attached to PDFBOX-4158&quot;&gt;BiggestObjectAllocationGraph.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;?&lt;/p&gt;</comment>
                            <comment id="16405082" author="msahyoun" created="Mon, 19 Mar 2018 16:33:08 +0000"  >&lt;p&gt;My proposal would be to capture the first exception, log all exceptions and rethrow the captured one at the end as &lt;tt&gt;IOException&lt;/tt&gt; is already declared to be thrown by the methods. I think there is no need to keep all of them and chain them together. WDYT?  If you&apos;re fine with that could you provide a patch along that approach?  &lt;/p&gt;

&lt;p&gt;Would do the logging at WARN level.&lt;/p&gt;</comment>
                            <comment id="16405110" author="gary.potagal" created="Mon, 19 Mar 2018 16:52:34 +0000"  >&lt;p&gt;Hi, changed the attached image:&#160; [^&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12915154/12915154_BiggestObjectAllocationGraph.png&quot; title=&quot;BiggestObjectAllocationGraph.png attached to PDFBOX-4158&quot;&gt;BiggestObjectAllocationGraph.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;] to show full picture.&lt;/p&gt;

&lt;p&gt;I was going to catch &#160;Throwable, log at WARN and throw IOException with the count of errors, something like &quot;Encountered N errors in attempt to close m documents&quot;, but I can re-throw first Exception if you prefer.&lt;/p&gt;

&lt;p&gt;Will take about a week to complete and validate in our test environment.&#160;&lt;/p&gt;

&lt;p&gt;Thanks!&#160;&lt;/p&gt;</comment>
                            <comment id="16405171" author="msahyoun" created="Mon, 19 Mar 2018 17:35:26 +0000"  >&lt;p&gt;Thanks for your help on that matter. &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;we try to avoid catching Throwable - in this case IOException should do&lt;/li&gt;
	&lt;li&gt;good idea with that message. We can throw a new IOException with that message and add the first Exception so we might get more information about the initial failure which might provide an idea about the subsequent ones.&lt;/li&gt;
&lt;/ol&gt;


</comment>
                            <comment id="16414464" author="gary.potagal" created="Mon, 26 Mar 2018 20:12:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; - ended up following your first advice to keep code consistent with the project.&#160; Patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12916252/12916252_PDFBOX-4158.patch&quot; title=&quot;PDFBOX-4158.patch attached to PDFBOX-4158&quot;&gt;PDFBOX-4158.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; is attached.&#160; Please let me know if I should do anything else.&#160; Thank you.&lt;/p&gt;</comment>
                            <comment id="16415292" author="msahyoun" created="Tue, 27 Mar 2018 09:14:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gary.potagal&quot; class=&quot;user-hover&quot; rel=&quot;gary.potagal&quot;&gt;gary.potagal&lt;/a&gt; thanks for the patch. I&apos;ll apply it within the next few hours.&lt;/p&gt;

&lt;p&gt;There is a minor mistake&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ioexc != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
    ioexc = ioe;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should be &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ioexc == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
    ioexc = ioe;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but as I have to apply manually anyway I&apos;ll take care of that. Maybe you&apos;d like to update your code accordingly.&lt;/p&gt;</comment>
                            <comment id="16415302" author="jira-bot" created="Tue, 27 Mar 2018 09:20:37 +0000"  >&lt;p&gt;Commit 1827817 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1827817&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1827817&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4158&quot; title=&quot;COSDocument and PDFMerger may not close all IO resources if closing of one fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4158&quot;&gt;&lt;del&gt;PDFBOX-4158&lt;/del&gt;&lt;/a&gt;: try closing all open IO ressources even if there is an error when closing one of these&lt;/p&gt;</comment>
                            <comment id="16415304" author="jira-bot" created="Tue, 27 Mar 2018 09:20:54 +0000"  >&lt;p&gt;Commit 1827818 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1827818&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1827818&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4158&quot; title=&quot;COSDocument and PDFMerger may not close all IO resources if closing of one fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4158&quot;&gt;&lt;del&gt;PDFBOX-4158&lt;/del&gt;&lt;/a&gt;: try closing all open IO ressources even if there is an error when closing one of these&lt;/p&gt;</comment>
                            <comment id="16415352" author="jira-bot" created="Tue, 27 Mar 2018 09:48:30 +0000"  >&lt;p&gt;Commit 1827821 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1827821&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1827821&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4158&quot; title=&quot;COSDocument and PDFMerger may not close all IO resources if closing of one fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4158&quot;&gt;&lt;del&gt;PDFBOX-4158&lt;/del&gt;&lt;/a&gt;: try closing all open IO ressources even if there is an error when closing one of these&lt;/p&gt;</comment>
                            <comment id="16415353" author="jira-bot" created="Tue, 27 Mar 2018 09:48:37 +0000"  >&lt;p&gt;Commit 1827822 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1827822&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1827822&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4158&quot; title=&quot;COSDocument and PDFMerger may not close all IO resources if closing of one fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4158&quot;&gt;&lt;del&gt;PDFBOX-4158&lt;/del&gt;&lt;/a&gt;: try closing all open IO ressources even if there is an error when closing one of these&lt;/p&gt;</comment>
                            <comment id="16415831" author="gary.potagal" created="Tue, 27 Mar 2018 15:54:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; - I see that you also added more info to the logging message.&#160; Thank you for the code review, I will merge your changes into our code&lt;/p&gt;</comment>
                            <comment id="16415912" author="jira-bot" created="Tue, 27 Mar 2018 16:50:38 +0000"  >&lt;p&gt;Commit 1827848 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1827848&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1827848&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4158&quot; title=&quot;COSDocument and PDFMerger may not close all IO resources if closing of one fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4158&quot;&gt;&lt;del&gt;PDFBOX-4158&lt;/del&gt;&lt;/a&gt;: try closing all open IO ressources even if there is an error when closing one of these&lt;/p&gt;</comment>
                            <comment id="16415913" author="jira-bot" created="Tue, 27 Mar 2018 16:50:44 +0000"  >&lt;p&gt;Commit 1827849 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1827849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1827849&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4158&quot; title=&quot;COSDocument and PDFMerger may not close all IO resources if closing of one fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4158&quot;&gt;&lt;del&gt;PDFBOX-4158&lt;/del&gt;&lt;/a&gt;: try closing all open IO ressources even if there is an error when closing one of these&lt;/p&gt;</comment>
                            <comment id="16416022" author="jira-bot" created="Tue, 27 Mar 2018 18:07:31 +0000"  >&lt;p&gt;Commit 1827850 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1827850&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1827850&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4158&quot; title=&quot;COSDocument and PDFMerger may not close all IO resources if closing of one fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4158&quot;&gt;&lt;del&gt;PDFBOX-4158&lt;/del&gt;&lt;/a&gt;: refactor; move common code to IOUtils&lt;/p&gt;</comment>
                            <comment id="16416023" author="jira-bot" created="Tue, 27 Mar 2018 18:07:44 +0000"  >&lt;p&gt;Commit 1827851 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1827851&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1827851&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4158&quot; title=&quot;COSDocument and PDFMerger may not close all IO resources if closing of one fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4158&quot;&gt;&lt;del&gt;PDFBOX-4158&lt;/del&gt;&lt;/a&gt;: refactor; move common code to IOUtils&lt;/p&gt;</comment>
                            <comment id="16416029" author="msahyoun" created="Tue, 27 Mar 2018 18:12:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gary.potagal&quot; class=&quot;user-hover&quot; rel=&quot;gary.potagal&quot;&gt;gary.potagal&lt;/a&gt; with the refactoring avoiding double code and making the closing more readable that should be it from my perspective. Let me know what you think. Many thanks for your patch.&lt;/p&gt;</comment>
                            <comment id="16416109" author="gary.potagal" created="Tue, 27 Mar 2018 19:14:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; - this is much cleaner - will copy your changes into our code.&#160; Thank you again.&lt;/p&gt;</comment>
                            <comment id="16416992" author="msahyoun" created="Wed, 28 Mar 2018 07:48:49 +0000"  >&lt;p&gt;I&apos;ll do another change later today or tomorrow which is factoring out the &lt;tt&gt;throw&lt;/tt&gt; within the &lt;tt&gt;finally&lt;/tt&gt; block in &lt;tt&gt;PDFMergerUtility&lt;/tt&gt;. Otherwise we might loose the initial exception e.g. from &lt;tt&gt;PDDocument.load&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16417321" author="gary.potagal" created="Wed, 28 Mar 2018 13:27:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; - what about not having a nested try{ } on line 294 and just having try, catch, finally.&#160; If IOException occurs anywhere in the try, it will be caught by catch and in finally, firstException will not be null.&#160; Otherwise, you might swallow an Exception that occurs in finally.&#160; It could be argued that method will not notify the caller if it gets errors closing assets, but than we&apos;re making presumptions on behalf of the caller.&#160; Thanks!&#160;&lt;/p&gt;</comment>
                            <comment id="16418759" author="jira-bot" created="Thu, 29 Mar 2018 10:52:17 +0000"  >&lt;p&gt;Commit 1827975 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1827975&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1827975&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4158&quot; title=&quot;COSDocument and PDFMerger may not close all IO resources if closing of one fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4158&quot;&gt;&lt;del&gt;PDFBOX-4158&lt;/del&gt;&lt;/a&gt;: don&apos;t throw exception in finally clause&lt;/p&gt;</comment>
                            <comment id="16418760" author="jira-bot" created="Thu, 29 Mar 2018 10:52:34 +0000"  >&lt;p&gt;Commit 1827976 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1827976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1827976&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4158&quot; title=&quot;COSDocument and PDFMerger may not close all IO resources if closing of one fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4158&quot;&gt;&lt;del&gt;PDFBOX-4158&lt;/del&gt;&lt;/a&gt;: don&apos;t throw exception in finally clause&lt;/p&gt;</comment>
                            <comment id="16429438" author="msahyoun" created="Sat, 7 Apr 2018 16:05:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gary.potagal&quot; class=&quot;user-hover&quot; rel=&quot;gary.potagal&quot;&gt;gary.potagal&lt;/a&gt; did you find the time for further testing? Can we close the issue?&lt;/p&gt;</comment>
                            <comment id="16430445" author="gary.potagal" created="Mon, 9 Apr 2018 12:23:14 +0000"  >&lt;p&gt;Yes, we completed testing Friday and are no longer seeing a memory leak / orphaned scratch files on disk.&#160; This ticket can be closed.&#160; Thank you.&lt;/p&gt;</comment>
                            <comment id="16430532" author="msahyoun" created="Mon, 9 Apr 2018 13:36:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gary.potagal&quot; class=&quot;user-hover&quot; rel=&quot;gary.potagal&quot;&gt;gary.potagal&lt;/a&gt; thank you for the feedback and testing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12915154" name="BiggestObjectAllocationGraph.png" size="155591" author="gary.potagal" created="Mon, 19 Mar 2018 16:40:11 +0000"/>
                            <attachment id="12915152" name="BiggestObjectList.png" size="151379" author="gary.potagal" created="Mon, 19 Mar 2018 16:21:45 +0000"/>
                            <attachment id="12916252" name="PDFBOX-4158.patch" size="6881" author="gary.potagal" created="Mon, 26 Mar 2018 20:09:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ri13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>