<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:06:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3887] Getting a &quot;DataFormatException: invalid distance too far back&quot; exception for the attached file</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3887</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;PdfBox throws the following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.io.IOException: java.util.zip.DataFormatException: invalid distance too far back
	at org.apache.pdfbox.filter.FlateFilter.decode(FlateFilter.java:82)
	at org.apache.pdfbox.cos.COSInputStream.create(COSInputStream.java:69)
	at org.apache.pdfbox.cos.COSStream.createInputStream(COSStream.java:162)
	at org.apache.pdfbox.pdfparser.PDFObjectStreamParser.&amp;lt;init&amp;gt;(PDFObjectStreamParser.java:55)
	at org.apache.pdfbox.pdfparser.COSParser.parseObjectStream(COSParser.java:847)
	at org.apache.pdfbox.pdfparser.COSParser.parseObjectDynamically(COSParser.java:753)
	at org.apache.pdfbox.pdfparser.COSParser.parseObjectDynamically(COSParser.java:678)
	at org.apache.pdfbox.pdfparser.COSParser.parseDictObjects(COSParser.java:638)
	at org.apache.pdfbox.pdfparser.PDFParser.initialParse(PDFParser.java:236)
	at org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:271)
	at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:984)
	at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:940)
	at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:888)
	at com.diligen.parser.pdf.PdfBoxHelper.getDocumentWithLineSegments(PdfBoxHelper.java:131)
	... 7 more
Caused by: java.util.zip.DataFormatException: invalid distance too far back
	at java.util.zip.Inflater.inflateBytes(Native Method)
	at java.util.zip.Inflater.inflate(Inflater.java:259)
	at java.util.zip.Inflater.inflate(Inflater.java:280)
	at org.apache.pdfbox.filter.FlateFilter.decompress(FlateFilter.java:107)
	at org.apache.pdfbox.filter.FlateFilter.decode(FlateFilter.java:73)
	... 20 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If there is no quick solution for this bug, is there a workaround? Can I somehow catch the exception and take some action?&lt;/p&gt;</description>
                <environment>Windows 10 64-bit, Ubuntu 14.04 64-bit. &lt;br/&gt;
&lt;br/&gt;
java version &amp;quot;1.8.0_141&amp;quot; &lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_141-b15) &lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.141-b15, mixed mode)</environment>
        <key id="13092279">PDFBOX-3887</key>
            <summary>Getting a &quot;DataFormatException: invalid distance too far back&quot; exception for the attached file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="hrzafer">Harun Re&#351;it Zafer</reporter>
                        <labels>
                            <label>extraction</label>
                            <label>parsing</label>
                    </labels>
                <created>Thu, 3 Aug 2017 19:39:46 +0000</created>
                <updated>Thu, 2 Nov 2017 21:00:58 +0000</updated>
                            <resolved>Fri, 4 Aug 2017 15:10:10 +0000</resolved>
                                    <version>2.0.7</version>
                                    <fixVersion>2.0.8</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Text extraction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16113398" author="tilman" created="Thu, 3 Aug 2017 20:10:47 +0000"  >&lt;p&gt;Something is messed up with that file... it starts with a wrong startxref value, then some bad stream lengths... it is able to recover from all that, until it hits an object stream and doesn&apos;t survive that. PDF.js can open the file, but gives up at page 8. A look at the file with NOTEPAD++ finds a lot weird spaces and CRs. &lt;del&gt;No, there is no quick solution.&lt;/del&gt; I tried opening with Adobe Reader and resave it, but that brought an error. &lt;del&gt;I suspect that they could open it because they do parse on demand and we don&apos;t, i.e. they didn&apos;t hit the bad part immediately.&lt;/del&gt; We parse the entire file. We&apos;re lenient on bad files, but this is not always successful.&lt;/p&gt;</comment>
                            <comment id="16113409" author="tilman" created="Thu, 3 Aug 2017 20:19:28 +0000"  >&lt;p&gt;Weird thing: the SEC has the same document as HTML, but the number of shares (bottom of page 1) is different.&lt;br/&gt;
&lt;a href=&quot;https://www.sec.gov/Archives/edgar/data/1139614/000151712615000204/form10q.htm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.sec.gov/Archives/edgar/data/1139614/000151712615000204/form10q.htm&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16113418" author="hrzafer" created="Thu, 3 Aug 2017 20:23:08 +0000"  >&lt;p&gt;I just realized that Adobe Reader on Windows 10 is also not able to display pages 8,9,10. &lt;/p&gt;</comment>
                            <comment id="16114475" author="jira-bot" created="Fri, 4 Aug 2017 15:03:43 +0000"  >&lt;p&gt;Commit 1804132 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1804132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1804132&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3887&quot; title=&quot;Getting a &amp;quot;DataFormatException: invalid distance too far back&amp;quot; exception for the attached file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3887&quot;&gt;&lt;del&gt;PDFBOX-3887&lt;/del&gt;&lt;/a&gt;: be lenient if loading object stream fails&lt;/p&gt;</comment>
                            <comment id="16114476" author="jira-bot" created="Fri, 4 Aug 2017 15:03:48 +0000"  >&lt;p&gt;Commit 1804133 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1804133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1804133&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3887&quot; title=&quot;Getting a &amp;quot;DataFormatException: invalid distance too far back&amp;quot; exception for the attached file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3887&quot;&gt;&lt;del&gt;PDFBOX-3887&lt;/del&gt;&lt;/a&gt;: be lenient if loading object stream fails&lt;/p&gt;</comment>
                            <comment id="16114486" author="tilman" created="Fri, 4 Aug 2017 15:09:23 +0000"  >&lt;p&gt;The last commit makes PDFBox even more lenient, it accepts the total loss of an object stream. I&apos;m now able to extract some of the text. It fails after some time. If the purpose of your application is to extract as much as possible e.g. for indexing, then do the extraction page by page and don&apos;t stop on exceptions. Apache Tika has such an option.&lt;/p&gt;

&lt;p&gt;This commit may be reverted if we find regressions on pre-release mass tests (which includes many corrupt files).&lt;/p&gt;

&lt;p&gt;You&apos;ll find a snapshot here in a few minutes:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.8-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.8-SNAPSHOT/&lt;/a&gt;&lt;br/&gt;
(at the bottom, look for the date)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12880291" name="non-contract_00025.pdf" size="292183" author="hrzafer" created="Thu, 3 Aug 2017 19:39:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ie1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>