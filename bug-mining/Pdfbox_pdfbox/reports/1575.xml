<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:04:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3531] LCMS error 13: Couldn&apos;t link the profiles</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3531</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I am also running against the error &quot;LCMS error 13: Couldn&apos;t link the profiles&quot;&lt;br/&gt;
The error occures frequent times, depending on which document to be displayed with PDFBox.&lt;/p&gt;

&lt;p&gt;Stack:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.awt.color.CMMException: LCMS error 13: Couldn&apos;t link the profiles
	at sun.java2d.cmm.lcms.LCMS.createNativeTransform(Native Method)
	at sun.java2d.cmm.lcms.LCMS.createTransform(Unknown Source)
	at sun.java2d.cmm.lcms.LCMSTransform.doTransform(Unknown Source)
	at sun.java2d.cmm.lcms.LCMSTransform.colorConvert(Unknown Source)
	at java.awt.image.ColorModel.getLinearGray16ToOtherGray8LUT(Unknown Source)
	at java.awt.image.ComponentColorModel.setupLUTs(Unknown Source)
	at java.awt.image.ComponentColorModel.&amp;lt;init&amp;gt;(Unknown Source)
	at java.awt.image.ComponentColorModel.&amp;lt;init&amp;gt;(Unknown Source)
	at org.apache.pdfbox.pdmodel.graphics.color.PDColorSpace.toRGBImageAWT(PDColorSpace.java:275)
	at org.apache.pdfbox.pdmodel.graphics.color.PDICCBased.toRGBImage(PDICCBased.java:200)
	at org.apache.pdfbox.pdmodel.graphics.image.SampledImageReader.from8bit(SampledImageReader.java:257)
	at org.apache.pdfbox.pdmodel.graphics.image.SampledImageReader.getRGBImage(SampledImageReader.java:143)
	at org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject.getImage(PDImageXObject.java:340)
	at org.apache.pdfbox.rendering.PageDrawer.drawImage(PageDrawer.java:793)
	at org.apache.pdfbox.contentstream.operator.graphics.DrawObject.process(DrawObject.java:62)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processOperator(PDFStreamEngine.java:815)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStreamOperators(PDFStreamEngine.java:472)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStream(PDFStreamEngine.java:446)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processPage(PDFStreamEngine.java:149)
	at org.apache.pdfbox.rendering.PageDrawer.drawPage(PageDrawer.java:189)
	at org.apache.pdfbox.rendering.PDFRenderer.renderImage(PDFRenderer.java:145)
	at org.apache.pdfbox.rendering.PDFRenderer.renderImageWithDPI(PDFRenderer.java:94)
	at org.apache.pdfbox.tools.PDFToImage.main(PDFToImage.java:236)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reproduced the bug with the 2.0.0-RC, and now also with the 2.0.3&lt;br/&gt;
Reason are the &quot;T&#220;V/QA&quot; certified images at the bottom of the pages.&lt;/p&gt;

&lt;p&gt;Created a document where it&apos;s clearly reproducible with pdfbox-app&lt;br/&gt;
So the &quot;final&quot; argument mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2454&quot; title=&quot;[PATCH] Couldn&amp;#39;t link the profiles error on multithreaded system&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2454&quot;&gt;&lt;del&gt;PDFBOX-2454&lt;/del&gt;&lt;/a&gt;, that it wasn&apos;t reproducible, now isn&apos;t valid any more.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;download PDF file from &lt;a href=&quot;http://www.igs.at/downloads/PDFBOX_LCMS_Error_13.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.igs.at/downloads/PDFBOX_LCMS_Error_13.pdf&lt;/a&gt; and save as C:\test.pdf&lt;/li&gt;
	&lt;li&gt;run the PDFBox image rendering app &quot;PDFToImage&quot;:&lt;br/&gt;
java -cp pdfbox-2.0.3.jar;pdfbox-app-2.0.3.jar;preflight-2.0.3.jar;preflight-app-2.0.3.jar org.apache.pdfbox.tools.PDFToImage C:\test.pdf&lt;br/&gt;
&amp;gt; you will immediately see the stack mentioned above, in console/error output.  &lt;/li&gt;
&lt;/ul&gt;


</description>
                <environment>Oracle JDK 1.8.0_112&lt;br/&gt;
Windows 10</environment>
        <key id="13012020">PDFBOX-3531</key>
            <summary>LCMS error 13: Couldn&apos;t link the profiles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="BIMMINGER">Christoph Bimminger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Oct 2016 14:47:55 +0000</created>
                <updated>Fri, 27 Sep 2019 17:46:50 +0000</updated>
                            <resolved>Fri, 14 Oct 2016 16:32:32 +0000</resolved>
                                    <version>2.0.3</version>
                                    <fixVersion>2.0.4</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15572745" author="tilman" created="Thu, 13 Oct 2016 18:13:03 +0000"  >&lt;p&gt;Did you use the &lt;tt&gt;-Dsun.java2d.cmm=sun.java2d.cmm.kcms.KcmsServiceProvider&lt;/tt&gt; option? Because when I don&apos;t, I get the exception you mention.&lt;/p&gt;</comment>
                            <comment id="15574616" author="bimminger" created="Fri, 14 Oct 2016 08:10:57 +0000"  >&lt;p&gt;Great - the option mentioned by &lt;span class=&quot;error&quot;&gt;&amp;#91;Tilman Hausherr&amp;#93;&lt;/span&gt; solves the problem. I just get a logging entry&lt;/p&gt;

&lt;p&gt;ERROR 14.10.16 10:08:39 156 org.apache.pdfbox.pdmodel.graphics.color.PDICCBased Can&apos;t read embedded ICC profile (Invalid profile sequence), using alternate color space: DeviceGray&lt;/p&gt;

&lt;p&gt;now, which is ok for me. It&apos;s now just logging output, rendering works ok.&lt;/p&gt;</comment>
                            <comment id="15575770" author="tilman" created="Fri, 14 Oct 2016 16:22:31 +0000"  >&lt;p&gt;I did some more investigation. LCMS throws at a later time than KCMS. We already use a trigger to detect such problems, since &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1295&quot; title=&quot;Unable to create the color instance / bg color inverted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1295&quot;&gt;&lt;del&gt;PDFBOX-1295&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Color(awtColorSpace, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;[getNumberOfComponents()], 1f);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However that one doesn&apos;t work for LCMS. I found a trigger that works for both:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;awtColorSpace.fromRGB(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;[3]);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And will make a change. However I still recommend to keep the setting for KCMS I mentioned earlier. I had a bad user experience some time ago with LCMS, it was extremely slow.&lt;/p&gt;</comment>
                            <comment id="15575776" author="jira-bot" created="Fri, 14 Oct 2016 16:24:44 +0000"  >&lt;p&gt;Commit 1764942 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1764942&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1764942&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3531&quot; title=&quot;LCMS error 13: Couldn&amp;#39;t link the profiles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3531&quot;&gt;&lt;del&gt;PDFBOX-3531&lt;/del&gt;&lt;/a&gt;: replace CMMException trigger with one that works for both KCMS and LittleCMS&lt;/p&gt;</comment>
                            <comment id="15575777" author="jira-bot" created="Fri, 14 Oct 2016 16:24:49 +0000"  >&lt;p&gt;Commit 1764943 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1764943&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1764943&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3531&quot; title=&quot;LCMS error 13: Couldn&amp;#39;t link the profiles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3531&quot;&gt;&lt;del&gt;PDFBOX-3531&lt;/del&gt;&lt;/a&gt;: replace CMMException trigger with one that works for both KCMS and LittleCMS&lt;/p&gt;</comment>
                            <comment id="15575781" author="tilman" created="Fri, 14 Oct 2016 16:27:25 +0000"  >&lt;p&gt;To reproduce the effect without pdfbox:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        ICC_Profile profile = ICC_Profile.getInstance(&lt;span class=&quot;code-quote&quot;&gt;&quot;gray.icc&quot;&lt;/span&gt;);
        ICC_ColorSpace cs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ICC_ColorSpace(profile);
        cs.fromRGB(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;[3]);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15575788" author="tilman" created="Fri, 14 Oct 2016 16:31:00 +0000"  >&lt;p&gt;Rendering tests with KCMS have two differences: &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2348&quot; title=&quot;NullPointerException regression Type0FontValidator.java:90&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2348&quot;&gt;&lt;del&gt;PDFBOX-2348&lt;/del&gt;&lt;/a&gt; page 3 (very slight), and &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2142&quot; title=&quot;some /ICCBased colorspaces not rendered correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2142&quot;&gt;&lt;del&gt;PDFBOX-2142&lt;/del&gt;&lt;/a&gt; (more visible, but that file has never rendered correctly anyway).&lt;/p&gt;</comment>
                            <comment id="15629585" author="jira-bot" created="Wed, 2 Nov 2016 16:57:35 +0000"  >&lt;p&gt;Commit 1767734 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1767734&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1767734&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3549&quot; title=&quot;Can&amp;#39;t read embedded ICC 4 profile (Invalid profile sequence)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3549&quot;&gt;&lt;del&gt;PDFBOX-3549&lt;/del&gt;&lt;/a&gt;: restore the test call deleted in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3531&quot; title=&quot;LCMS error 13: Couldn&amp;#39;t link the profiles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3531&quot;&gt;&lt;del&gt;PDFBOX-3531&lt;/del&gt;&lt;/a&gt; because we need both&lt;/p&gt;</comment>
                            <comment id="15629589" author="jira-bot" created="Wed, 2 Nov 2016 16:57:46 +0000"  >&lt;p&gt;Commit 1767735 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1767735&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1767735&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3549&quot; title=&quot;Can&amp;#39;t read embedded ICC 4 profile (Invalid profile sequence)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3549&quot;&gt;&lt;del&gt;PDFBOX-3549&lt;/del&gt;&lt;/a&gt;: restore the test call deleted in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3531&quot; title=&quot;LCMS error 13: Couldn&amp;#39;t link the profiles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3531&quot;&gt;&lt;del&gt;PDFBOX-3531&lt;/del&gt;&lt;/a&gt; because we need both&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12552846">PDFBOX-1295</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13259092">PDFBOX-4659</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13016600">PDFBOX-3549</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12833405" name="gray.icc" size="1912" author="tilman" created="Fri, 14 Oct 2016 16:27:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34u8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>