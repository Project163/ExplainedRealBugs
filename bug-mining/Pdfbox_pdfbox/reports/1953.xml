<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:07:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4097] Compressed object will lost when brute force search failed to handle compressed streams</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4097</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Compressed object described in cross-reference streams will lost when brute force search failed to handle such streams.&lt;/p&gt;

&lt;p&gt;The attached PDF has an object 1336, but it had a offset that referenced to object 1828. The inconsistency led to a brute force search. (Introduced by&#160;&lt;b&gt;COSParser.checkXrefOffsets&lt;/b&gt;)&lt;/p&gt;

&lt;p&gt;During the search (in &lt;b&gt;bfSearchForObjStreams&lt;/b&gt;), Object stream 1828, 1829, 1830 failed to decompress due to &quot;corrupted&quot; stream(yes, the &lt;b&gt;Params&lt;/b&gt; field was missing in the dictionary or the &lt;b&gt;Filter&lt;/b&gt;&#160;was wrong). Thus, 462 compressed objects described in&#160;cross-reference streams are lost. Since important objects (the Root, the Pages, etc.) referred to objects in 1828 or something, all resolved to null (because the corrected XRefOffsets doens&apos;t have them). Further parsing is impossible.&lt;/p&gt;

&lt;p&gt;However, when I tried to bypass&#160;&lt;b&gt;checkXrefOffsets&lt;/b&gt;, the PDF shows correctly without any (noticeable) error. It seemed that object 1336 is not used in the PDF.&lt;/p&gt;

&lt;p&gt;&quot;Corrupted&quot; 1828:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1828 0 obj
&amp;lt;&amp;lt;
/Length 2176
/Type /ObjStm
/N 200
/First 2103
/Filter /FlatDecode
&amp;gt;&amp;gt;
...&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It doesn&apos;t work well in&#160;&lt;b&gt;bfSearchForObjStreams&lt;/b&gt; but works in&#160;&lt;b&gt;parseObjectStream&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Would it be nice to have a fallback to preserve compressed stream object key offsets, when we some error in brute force search?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13136491">PDFBOX-4097</key>
            <summary>Compressed object will lost when brute force search failed to handle compressed streams</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="hust.zcheng">Cheng Zhong</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Feb 2018 07:39:00 +0000</created>
                <updated>Thu, 21 Jun 2018 20:27:52 +0000</updated>
                            <resolved>Thu, 5 Apr 2018 17:48:26 +0000</resolved>
                                    <version>2.0.8</version>
                                    <fixVersion>2.0.10</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16394166" author="lehmi" created="Sat, 10 Mar 2018 13:30:00 +0000"  >&lt;p&gt;This is not true for all compressed streams. The given pdf is encrypted and so are the compressed streams. The brute force mechanism can&apos;t handle such streams.&lt;/p&gt;</comment>
                            <comment id="16425867" author="jira-bot" created="Wed, 4 Apr 2018 17:05:44 +0000"  >&lt;p&gt;Commit 1828365 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1828365&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1828365&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4097&quot; title=&quot;Compressed object will lost when brute force search failed to handle compressed streams&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4097&quot;&gt;&lt;del&gt;PDFBOX-4097&lt;/del&gt;&lt;/a&gt;: try to decrypt encrypted object streams when rebuilding the trailer&lt;/p&gt;</comment>
                            <comment id="16425869" author="jira-bot" created="Wed, 4 Apr 2018 17:06:06 +0000"  >&lt;p&gt;Commit 1828366 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1828366&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1828366&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4097&quot; title=&quot;Compressed object will lost when brute force search failed to handle compressed streams&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4097&quot;&gt;&lt;del&gt;PDFBOX-4097&lt;/del&gt;&lt;/a&gt;: try to decrypt encrypted object streams when rebuilding the trailer&lt;/p&gt;</comment>
                            <comment id="16425879" author="lehmi" created="Wed, 4 Apr 2018 17:11:47 +0000"  >&lt;p&gt;I had to rearrange some code to be able to decrypt encrypted objectstreams when rebuilding the trailer information&lt;/p&gt;</comment>
                            <comment id="16427327" author="lehmi" created="Thu, 5 Apr 2018 17:48:26 +0000"  >&lt;p&gt;The attached file can be opened and I&apos;ve checked some other files as well. Set to resolved&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13128510">PDFBOX-4049</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12909386" name="&#22885;&#32654;&#21307;&#30103;-IPO.pdf" size="2282005" author="hust.zcheng" created="Tue, 6 Feb 2018 07:09:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pu4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>