<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:07:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4115] Problem creating PDF with German text using embedded Type1 (PFB) font</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4115</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;When creating a PDF and adding text using a PostScript Type1 font (e.g. the attached n019003l.pfb but also others), an error occurs when the text contains German characters.&lt;/p&gt;

&lt;p&gt;The error occurs with e.g. the character &quot;&#228;&quot; (adieresis) and other similar umlaut characters; it does not occur with &quot;&#223;&quot; (germandbls).&lt;/p&gt;

&lt;p&gt;Using an embedded TTF seems to work fine but when I load the PFB like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
InputStream pfb = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(fontFile);
font = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDType1Font(document, pfb);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I get an encoding error whenever I try to print an &quot;&#228;&quot; to the page:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalArgumentException: U+00E4 (&lt;span class=&quot;code-quote&quot;&gt;&apos;adieresis&apos;&lt;/span&gt;) is not available in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; font NimbusSanL-Regu (&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;: NimbusSanL-Regu) encoding: built-in (Type 1)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If I specify a different encoding (WinANSI) when loading the font:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
InputStream pfb = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(fontFile);
font = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDType1Font(document, pfb, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WinAnsiEncoding());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then the exception is not thrown, but I just have an empty space in place of the &quot;&#228;&quot;.&lt;/p&gt;

&lt;p&gt;I have tried to look into the code, in particular I have played around with the class PDType1FontEmbedder.&lt;/p&gt;

&lt;p&gt;When the FontBox object Type1Font is created by the parser in the following line of code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
type1 = Type1Font.createWithPFB(pfbBytes);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I have tried to look into the charstring dictionary:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
type1.getCharStringsDict()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and, by iterating through the set keys, can see that &quot;adieresis&quot; is in there.&lt;/p&gt;

&lt;p&gt;However, when using the default encoding from the font (i.e. by passing &quot;null&quot; to the PDType1FontEmbedder), the resulting encoding that is obtained by the following line of code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
fontEncoding = Type1Encoding.fromFontBox(type1.getEncoding());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;does not contain &quot;adieresis&quot; (or other &quot;compound&quot; characters), but just &quot;dieresis&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13139283">PDFBOX-4115</key>
            <summary>Problem creating PDF with German text using embedded Type1 (PFB) font</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tamirhassan">Tamir Hassan</reporter>
                        <labels>
                            <label>type1</label>
                            <label>type1font</label>
                    </labels>
                <created>Sun, 18 Feb 2018 07:54:48 +0000</created>
                <updated>Sat, 24 Mar 2018 09:41:31 +0000</updated>
                            <resolved>Sun, 18 Feb 2018 12:46:30 +0000</resolved>
                                    <version>2.0.8</version>
                                    <fixVersion>2.0.9</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16368506" author="tilman" created="Sun, 18 Feb 2018 10:04:50 +0000"  >&lt;p&gt;Here&apos;s a workaround until I&apos;ve found the cause:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
PDType1Font font = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDType1Font(document, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;n019003l.pfb&quot;&lt;/span&gt;), WinAnsiEncoding.INSTANCE);
....
font.getCOSObject().setItem(COSName.ENCODING, COSName.WIN_ANSI_ENCODING);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;How I found this: I searched for test files with a type1 non subsetted embedded font and looked at the font with PDFDebugger. &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1713&quot; title=&quot;[PATCH] Bullet character not rendered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1713&quot;&gt;&lt;del&gt;PDFBOX-1713&lt;/del&gt;&lt;/a&gt; has such a file. Note the slight difference in font construction (not relevant to the problem)&lt;/p&gt;</comment>
                            <comment id="16368515" author="jira-bot" created="Sun, 18 Feb 2018 10:52:18 +0000"  >&lt;p&gt;Commit 1824660 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1824660&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1824660&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4115&quot; title=&quot;Problem creating PDF with German text using embedded Type1 (PFB) font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4115&quot;&gt;&lt;del&gt;PDFBOX-4115&lt;/del&gt;&lt;/a&gt;: add encoding to font dictionary&lt;/p&gt;</comment>
                            <comment id="16368516" author="jira-bot" created="Sun, 18 Feb 2018 10:52:26 +0000"  >&lt;p&gt;Commit 1824661 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1824661&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1824661&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4115&quot; title=&quot;Problem creating PDF with German text using embedded Type1 (PFB) font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4115&quot;&gt;&lt;del&gt;PDFBOX-4115&lt;/del&gt;&lt;/a&gt;: add encoding to font dictionary&lt;/p&gt;</comment>
                            <comment id="16368518" author="jira-bot" created="Sun, 18 Feb 2018 11:09:36 +0000"  >&lt;p&gt;Commit 1824662 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1824662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1824662&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4115&quot; title=&quot;Problem creating PDF with German text using embedded Type1 (PFB) font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4115&quot;&gt;&lt;del&gt;PDFBOX-4115&lt;/del&gt;&lt;/a&gt;: load font for upcoming build test into repository&lt;/p&gt;</comment>
                            <comment id="16368519" author="jira-bot" created="Sun, 18 Feb 2018 11:09:55 +0000"  >&lt;p&gt;Commit 1824663 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1824663&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1824663&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4115&quot; title=&quot;Problem creating PDF with German text using embedded Type1 (PFB) font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4115&quot;&gt;&lt;del&gt;PDFBOX-4115&lt;/del&gt;&lt;/a&gt;: load font for upcoming build test into repository&lt;/p&gt;</comment>
                            <comment id="16368527" author="jira-bot" created="Sun, 18 Feb 2018 12:12:25 +0000"  >&lt;p&gt;Commit 1824664 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1824664&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1824664&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4115&quot; title=&quot;Problem creating PDF with German text using embedded Type1 (PFB) font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4115&quot;&gt;&lt;del&gt;PDFBOX-4115&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;</comment>
                            <comment id="16368528" author="jira-bot" created="Sun, 18 Feb 2018 12:12:38 +0000"  >&lt;p&gt;Commit 1824665 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1824665&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1824665&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4115&quot; title=&quot;Problem creating PDF with German text using embedded Type1 (PFB) font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4115&quot;&gt;&lt;del&gt;PDFBOX-4115&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;</comment>
                            <comment id="16368532" author="tilman" created="Sun, 18 Feb 2018 12:46:30 +0000"  >&lt;p&gt;Setting to resolved. You can try a snapshot from here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.9-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.9-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;or you keep using the workaround until 2.0.9 is released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12911053" name="n019003l.pfb" size="79155" author="tamirhassan" created="Sun, 18 Feb 2018 07:53:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qbcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>