<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:05:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3318] IllegalArgumentException in PDPageTree constructor: root cannot be null</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3318</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;When merging this pdf with another pdf, I get this exception. It looks similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2615&quot; title=&quot;IllegalArgumentException in PDPageTree constructor: root cannot be null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2615&quot;&gt;&lt;del&gt;PDFBOX-2615&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.IllegalArgumentException: root cannot be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.pdfbox.pdmodel.PDPageTree.&amp;lt;init&amp;gt;(PDPageTree.java:75)
	at org.apache.pdfbox.pdmodel.PDDocumentCatalog.getPages(PDDocumentCatalog.java:128)
	at org.apache.pdfbox.multipdf.PDFMergerUtility.appendDocument(PDFMergerUtility.java:484)
	at org.apache.pdfbox.multipdf.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:213)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12959529">PDFBOX-3318</key>
            <summary>IllegalArgumentException in PDPageTree constructor: root cannot be null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="aruld">Arul Dhesiaseelan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Apr 2016 03:44:09 +0000</created>
                <updated>Tue, 23 May 2017 19:54:05 +0000</updated>
                            <resolved>Mon, 1 May 2017 16:40:33 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.6</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15245098" author="aruld" created="Mon, 18 Apr 2016 03:47:30 +0000"  >&lt;p&gt;Could not upload the test file to issue as it is 23 MB file. Uploaded it to dropbox: &lt;a href=&quot;https://dl.dropboxusercontent.com/u/40975890/tools/large%20doc.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dl.dropboxusercontent.com/u/40975890/tools/large%20doc.pdf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15245106" author="aruld" created="Mon, 18 Apr 2016 03:59:50 +0000"  >&lt;p&gt;It works just fine in 1.8.11. It is broke in 2.0.0.&lt;/p&gt;</comment>
                            <comment id="15246114" author="lehmi" created="Mon, 18 Apr 2016 17:45:01 +0000"  >&lt;p&gt;The file is truncated and the 2.0 parser isn&apos;t able to repair the remaining part&lt;/p&gt;</comment>
                            <comment id="15963168" author="jaskren" created="Mon, 10 Apr 2017 16:51:32 +0000"  >&lt;p&gt;We are seeing this as well on files that open just fine in Acrobat.&lt;/p&gt;</comment>
                            <comment id="15963172" author="tilman" created="Mon, 10 Apr 2017 16:52:31 +0000"  >&lt;p&gt;Please attach them here.&lt;/p&gt;</comment>
                            <comment id="15963327" author="jaskren" created="Mon, 10 Apr 2017 18:46:49 +0000"  >&lt;p&gt;I attached an example.  It woks in 1.8.13, but not in 2.0.3.  We get the root cannot be null exception that was mentioned.&lt;/p&gt;</comment>
                            <comment id="15963347" author="tilman" created="Mon, 10 Apr 2017 18:57:41 +0000"  >&lt;p&gt;The file has a large number of 0 bytes at the end. Removing them with NOTEPAD++ makes it possible to open it with PDFBox.&lt;/p&gt;</comment>
                            <comment id="15963358" author="jaskren" created="Mon, 10 Apr 2017 19:04:57 +0000"  >&lt;p&gt;So from what you are saying, we could preprocess the file and remove all 0 bytes.  That sounds easy enough.  Could this functionality be added to PDFBox?&lt;/p&gt;
</comment>
                            <comment id="15964147" author="lehmi" created="Tue, 11 Apr 2017 10:26:05 +0000"  >&lt;p&gt;IMHO there are 2 possible solutions wrt the attached pdf:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;skip those extra bytes at the end of the pdf to find the startxref value&lt;/li&gt;
	&lt;li&gt;fix the rebuild mechanism which doesn&apos;t seem to work in this case (the self healing mechanism is triggered due to the fact that the parser can&apos;t find the startxref value at the end of the pdf)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m going to have a look at the second solution, as other malformed pdfs may be affected too&lt;/p&gt;</comment>
                            <comment id="15964563" author="jaskren" created="Tue, 11 Apr 2017 15:53:07 +0000"  >&lt;p&gt;If you can come up with a solution, that would be awesome.  I have a lot more pdfs that result in the same error.  I could test the solution for you.  Until then, we can just remove the null byte and see if that fixes the problem on the other pdfs.&lt;/p&gt;</comment>
                            <comment id="15985246" author="jira-bot" created="Wed, 26 Apr 2017 17:47:07 +0000"  >&lt;p&gt;Commit 1792784 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1792784&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1792784&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3318&quot; title=&quot;IllegalArgumentException in PDPageTree constructor: root cannot be null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3318&quot;&gt;&lt;del&gt;PDFBOX-3318&lt;/del&gt;&lt;/a&gt;: improve rebuilding trailer if a xref stream is present&lt;/p&gt;</comment>
                            <comment id="15985254" author="lehmi" created="Wed, 26 Apr 2017 17:51:04 +0000"  >&lt;p&gt;I&apos;ve implemented an improved rebuilding mechanism. I can think of cases where it may not work, but I&apos;m not sure. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Please double check with your test arena, for now 2.0.x only&lt;/p&gt;</comment>
                            <comment id="15985475" author="tilman" created="Wed, 26 Apr 2017 20:09:57 +0000"  >&lt;p&gt;all OK!&lt;/p&gt;</comment>
                            <comment id="15986038" author="jira-bot" created="Thu, 27 Apr 2017 05:24:08 +0000"  >&lt;p&gt;Commit 1792839 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1792839&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1792839&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3318&quot; title=&quot;IllegalArgumentException in PDPageTree constructor: root cannot be null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3318&quot;&gt;&lt;del&gt;PDFBOX-3318&lt;/del&gt;&lt;/a&gt;: don&apos;t stop searching, there might be other versions of the objects we are looking for&lt;/p&gt;</comment>
                            <comment id="15986066" author="lehmi" created="Thu, 27 Apr 2017 05:58:19 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;, I&apos;m going to merge those changes into the trunk as well.&lt;/p&gt;</comment>
                            <comment id="15990764" author="jira-bot" created="Mon, 1 May 2017 12:47:49 +0000"  >&lt;p&gt;Commit 1793321 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1793321&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1793321&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3318&quot; title=&quot;IllegalArgumentException in PDPageTree constructor: root cannot be null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3318&quot;&gt;&lt;del&gt;PDFBOX-3318&lt;/del&gt;&lt;/a&gt;: improve rebuilding trailer if a xref stream is present&lt;/p&gt;</comment>
                            <comment id="15990765" author="jira-bot" created="Mon, 1 May 2017 12:48:45 +0000"  >&lt;p&gt;Commit 1793322 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1793322&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1793322&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3318&quot; title=&quot;IllegalArgumentException in PDPageTree constructor: root cannot be null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3318&quot;&gt;&lt;del&gt;PDFBOX-3318&lt;/del&gt;&lt;/a&gt;: don&apos;t stop searching, there might be other versions of the objects we are looking for&lt;/p&gt;</comment>
                            <comment id="15990995" author="tilman" created="Mon, 1 May 2017 15:57:19 +0000"  >&lt;p&gt;In case you were waiting for me - that one works as well.&lt;/p&gt;</comment>
                            <comment id="15991057" author="lehmi" created="Mon, 1 May 2017 16:40:33 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; for double checking&lt;/p&gt;

&lt;p&gt;The interesting part is, that those changes fix the origin issue as well. At least PDFBox is able to open the linked pdf&lt;/p&gt;</comment>
                            <comment id="16003173" author="jira-bot" created="Tue, 9 May 2017 17:56:10 +0000"  >&lt;p&gt;Commit 1794620 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1794620&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1794620&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3783&quot; title=&quot;java.io.IOException: Expected root dictionary, but got this: COSNull{}&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3783&quot;&gt;&lt;del&gt;PDFBOX-3783&lt;/del&gt;&lt;/a&gt;: revert changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3318&quot; title=&quot;IllegalArgumentException in PDPageTree constructor: root cannot be null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3318&quot;&gt;&lt;del&gt;PDFBOX-3318&lt;/del&gt;&lt;/a&gt; and introduce a brute force search for the last startxref entry instead&lt;/p&gt;</comment>
                            <comment id="16003177" author="jira-bot" created="Tue, 9 May 2017 17:58:03 +0000"  >&lt;p&gt;Commit 1794621 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1794621&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1794621&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3783&quot; title=&quot;java.io.IOException: Expected root dictionary, but got this: COSNull{}&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3783&quot;&gt;&lt;del&gt;PDFBOX-3783&lt;/del&gt;&lt;/a&gt;: revert changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3318&quot; title=&quot;IllegalArgumentException in PDPageTree constructor: root cannot be null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3318&quot;&gt;&lt;del&gt;PDFBOX-3318&lt;/del&gt;&lt;/a&gt; and introduce a brute force search for the last startxref entry instead&lt;/p&gt;</comment>
                            <comment id="16003184" author="lehmi" created="Tue, 9 May 2017 18:01:59 +0000"  >&lt;p&gt;Bad news is, I&apos;ve removed this repair mechanism as it introduced a regression. Good news is, I&apos;ve found better solution, see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3783&quot; title=&quot;java.io.IOException: Expected root dictionary, but got this: COSNull{}&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3783&quot;&gt;&lt;del&gt;PDFBOX-3783&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16021730" author="jaskren" created="Tue, 23 May 2017 19:54:05 +0000"  >&lt;p&gt;I confirmed that this works.  Thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12862732" name="rootCannotBeNull.pdf" size="145024" author="jaskren" created="Mon, 10 Apr 2017 18:46:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w8o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>