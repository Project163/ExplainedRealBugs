<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:05:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3745] Wrong character width</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3745</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I tried to convert a PDF file to an image. But there is a error with the character width computation. As you can see inside the blue box, there are gaps after every umlaut mark (&#228; ,&#246; ,&#252;). Some characters in the font doesn&apos;t contain any width information. The distance between the character is handled by position adjustment. For example:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1., -278, ), -844, H, -722, &#228;, -556, u, -611, sliche P, -667, f, -333, lege&amp;#93;&lt;/span&gt; TJ&lt;/p&gt;

&lt;p&gt;I guess there is an error in the font.getWidth() implementation. If I call font.getWidth(&quot;&#228;&quot;) it returns 556. (Instead of 0, what would fit)&lt;/p&gt;

&lt;p&gt;I attached the PDF and the converted image.&lt;/p&gt;</description>
                <environment>Windows 10</environment>
        <key id="13061773">PDFBOX-3745</key>
            <summary>Wrong character width</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="ChSch">Ch. Schlatter</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Apr 2017 15:29:07 +0000</created>
                <updated>Mon, 15 May 2017 20:28:09 +0000</updated>
                            <resolved>Thu, 6 Apr 2017 17:57:49 +0000</resolved>
                                    <version>2.0.5</version>
                                    <fixVersion>2.0.6</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15957155" author="tilman" created="Wed, 5 Apr 2017 16:28:23 +0000"  >&lt;p&gt;Amusingly, our two main java competitors have the same problem.&lt;/p&gt;</comment>
                            <comment id="15957378" author="tilman" created="Wed, 5 Apr 2017 18:22:41 +0000"  >&lt;p&gt;The font has a /Width array that is too short. /Lastchar is 119, but the &quot;&#228;&quot; is higher. According to the PDF specification, in that case the value of /MissingWidth is to be used. That one doesn&apos;t exist. Its default value is 0, which coincidentally, is what you mentioned and what works for this file (I tested that in debugging).&lt;/p&gt;

&lt;p&gt;So I&apos;ve tested what happens with our many test files if I change the code in &lt;tt&gt;PDFont.getWidth()&lt;/tt&gt;...&lt;/p&gt;

&lt;p&gt;There is a difference in the rendering of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3125&quot; title=&quot;IndexOutOfBoundsException in PDFont.getWidth()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3125&quot;&gt;&lt;del&gt;PDFBOX-3125&lt;/del&gt;&lt;/a&gt;, but that one is also rendered badly by Adobe Reader. We&apos;re rendering it differently bad, so I don&apos;t have to investigate further. But there&apos;s a difference in text extraction for &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3061&quot; title=&quot;Word concatenation in 2.0 not in 1.8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3061&quot;&gt;&lt;del&gt;PDFBOX-3061&lt;/del&gt;&lt;/a&gt; and that one is more annoying because it is worse than with Adobe Reader.&lt;/p&gt;</comment>
                            <comment id="15959310" author="jira-bot" created="Thu, 6 Apr 2017 17:04:06 +0000"  >&lt;p&gt;Commit 1790428 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1790428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1790428&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3745&quot; title=&quot;Wrong character width&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3745&quot;&gt;&lt;del&gt;PDFBOX-3745&lt;/del&gt;&lt;/a&gt;: use 0 default of /MissingWidth, take space width from font if 0, update test result files&lt;/p&gt;</comment>
                            <comment id="15959314" author="jira-bot" created="Thu, 6 Apr 2017 17:06:29 +0000"  >&lt;p&gt;Commit 1790430 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1790430&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1790430&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3745&quot; title=&quot;Wrong character width&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3745&quot;&gt;&lt;del&gt;PDFBOX-3745&lt;/del&gt;&lt;/a&gt;: use 0 default of /MissingWidth, take space width from font if 0, update test result files&lt;/p&gt;</comment>
                            <comment id="15959330" author="tilman" created="Thu, 6 Apr 2017 17:12:16 +0000"  >&lt;p&gt;I did some more research. The regression in text extraction yesterday was because in that file, the space is missing from the /Widths array and the new code returned 0, which then resulted in an average being taken as fallback. So changed the code to take the space width from the font itself, which is what was done before.&lt;/p&gt;

&lt;p&gt;After this change there is a new difference in text extraction (cweb.pdf) but that one is a minor improvement, a space has appeared that wasn&apos;t there before, but Adobe has it too.&lt;/p&gt;</comment>
                            <comment id="15962683" author="chsch" created="Mon, 10 Apr 2017 10:13:53 +0000"  >&lt;p&gt;Works now as expected. Thank you for the fast fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13070939">PDFBOX-3789</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12862108" name="PDFBOX-3745-reduced.pdf" size="62183" author="tilman" created="Wed, 5 Apr 2017 16:24:16 +0000"/>
                            <attachment id="12862091" name="p42.pdf" size="631513" author="ChSch" created="Wed, 5 Apr 2017 15:29:07 +0000"/>
                            <attachment id="12862092" name="p421.jpg" size="416348" author="ChSch" created="Wed, 5 Apr 2017 15:29:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3d8rz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>