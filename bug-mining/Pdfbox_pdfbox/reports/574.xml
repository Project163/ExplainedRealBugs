<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:56:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2153] Setting the correct clipping path for shading</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2153</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;While doing tests with the file eci_altona-test-suite-v2_technical_H.pdf (uncompressed) of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1915&quot; title=&quot;Implement shading with Coons and tensor-product patch meshes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1915&quot;&gt;&lt;del&gt;PDFBOX-1915&lt;/del&gt;&lt;/a&gt; I noticed that by removing a &quot;W&quot; (modifies the clipping region) operator of a type 7 shading I got a lot more correct shadings (type 6 and lower). It looked like PDFBox had been using the clipping of the type 7 when drawing the type 6, which is just a rectangle above in that rendering. This resulted in a blank.&lt;/p&gt;

&lt;p&gt;By adding &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;graphics.setClip(getGraphicsState().getCurrentClippingPath());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;in PageDrawer.shfill() just before the graphics.fill() I get several files to render correctly that I hadn&apos;t before.&lt;/p&gt;

&lt;p&gt;(Setting null will probably do the same, didn&apos;t test that yet).&lt;/p&gt;

&lt;p&gt;The following PDFs are rendered correctly with the change:&lt;br/&gt;
McAfee-ShadingType7.pdf&lt;br/&gt;
eci_altona-test-suite-v2_technical_H.pdf&lt;br/&gt;
crestron-p9.pdf  (these three found in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1915&quot; title=&quot;Implement shading with Coons and tensor-product patch meshes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1915&quot;&gt;&lt;del&gt;PDFBOX-1915&lt;/del&gt;&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1451&quot; title=&quot;Error in converting a pdf to image using convertToImage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1451&quot;&gt;&lt;del&gt;PDFBOX-1451&lt;/del&gt;&lt;/a&gt;.pdf (&quot;alfresco&quot;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1940&quot; title=&quot;Faulty pdf-&amp;gt;image rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1940&quot;&gt;&lt;del&gt;PDFBOX-1940&lt;/del&gt;&lt;/a&gt;.pdf (&quot;chart&quot;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1861&quot; title=&quot;Line is incorrectly dashed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1861&quot;&gt;&lt;del&gt;PDFBOX-1861&lt;/del&gt;&lt;/a&gt;-tracemonkey.pdf p.11&lt;/p&gt;

&lt;p&gt;Not solved by the change:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2098&quot; title=&quot;Gouraud shading doesn&amp;#39;t appear&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2098&quot;&gt;&lt;del&gt;PDFBOX-2098&lt;/del&gt;&lt;/a&gt;-asyTUG.pdf p.6  (this one doesn&apos;t use shfill)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1861&quot; title=&quot;Line is incorrectly dashed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1861&quot;&gt;&lt;del&gt;PDFBOX-1861&lt;/del&gt;&lt;/a&gt;-tracemonkey.pdf p.6 (not shading)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1416&quot; title=&quot;Transparency Group: missing image in reader/image output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1416&quot;&gt;&lt;del&gt;PDFBOX-1416&lt;/del&gt;&lt;/a&gt;.pdf (not shading)&lt;br/&gt;
texample-rgb-triangle.pdf (John has an explanation about that one)&lt;/p&gt;

&lt;p&gt;WDYT? Is there any reason NOT to set the clipping path in PageDrawer.shFill() ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722715">PDFBOX-2153</key>
            <summary>Setting the correct clipping path for shading</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                            <label>shading</label>
                            <label>shadingpattern</label>
                    </labels>
                <created>Fri, 20 Jun 2014 07:01:21 +0000</created>
                <updated>Fri, 19 Sep 2014 14:40:39 +0000</updated>
                            <resolved>Sun, 22 Jun 2014 16:29:39 +0000</resolved>
                                    <version>1.8.5</version>
                    <version>1.8.6</version>
                    <version>1.8.7</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.7</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14038601" author="lehmi" created="Fri, 20 Jun 2014 08:55:01 +0000"  >&lt;p&gt;Hmmm, I thought that it would be sufficient to use the clipping path as argument when calling the fill method, but obviously it isn&apos;t. IMHO go ahead&lt;/p&gt;</comment>
                            <comment id="14038604" author="pslabycz" created="Fri, 20 Jun 2014 09:01:15 +0000"  >&lt;p&gt;Sounds reasonable. Current clipping path is passed to graphics.fill(), so if the graphics has a clipping path from a previous operation, it might interfere with that. I vote for setClip(null) because setClip() is a time and memory consuming operation if called with a complex path.&lt;/p&gt;

&lt;p&gt;The change does not show any effect on my test suite documents, it seems that I do not have an example that would be affected. &lt;/p&gt;</comment>
                            <comment id="14038925" author="tilman" created="Fri, 20 Jun 2014 15:40:52 +0000"  >&lt;p&gt;Fixed in rev &lt;a href=&quot;http://svn.apache.org/r1604192&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1604192&lt;/a&gt; for the trunk.&lt;/p&gt;</comment>
                            <comment id="14039024" author="tilman" created="Fri, 20 Jun 2014 16:55:59 +0000"  >&lt;p&gt;Fixed in rev 1604211 for the 1.8 branch.&lt;/p&gt;</comment>
                            <comment id="14039610" author="jahewson" created="Sat, 21 Jun 2014 00:57:04 +0000"  >&lt;p&gt;Yep, this fix makes sense because:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;graphics.fill(getGraphicsState().getCurrentClippingPath());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Fills a shape, which happens to be the current clipping path, but like any paint operation it&apos;s subject to the current clipping path of the Graphics2D which we haven&apos;t updated, so it&apos;s stale.&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;One nitpick: can we leave out comments like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;graphics.setClip(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;); &lt;span class=&quot;code-comment&quot;&gt;// PDFBOX-2153 don&apos;t use obsolete clipping path&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;because that&apos;s what &lt;em&gt;svn blame&lt;/em&gt; is for &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14039678" author="tilman" created="Sat, 21 Jun 2014 04:06:02 +0000"  >&lt;p&gt;Yes, but i always see a risk that people change code in the future without doing this. Someone, maybe 5 years from now, might delete setclip(null) with the thought &quot;this is useless!&quot;. The comment means &quot;don&apos;t touch this, read &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2153&quot; title=&quot;Setting the correct clipping path for shading&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2153&quot;&gt;&lt;del&gt;PDFBOX-2153&lt;/del&gt;&lt;/a&gt; first&quot;.&lt;/p&gt;</comment>
                            <comment id="14039720" author="jahewson" created="Sat, 21 Jun 2014 06:40:47 +0000"  >&lt;p&gt;Right but that&apos;s what I mean - someone who sees a line that seems to serve no purpose should run svn blame to see why it was put there in the first place, each commit is tagged with the relevant JIRA issue. I do this all the time. There&apos;s really no need for JIRA issue numbers in comments unless it&apos;s to link to a sample PDF for some really weird corrupt PDF or similar. Before long the code becomes littered with copycat comments saying &quot;PDFBOX - 1234: fixed a bug here once&quot;.&lt;/p&gt;</comment>
                            <comment id="14039829" author="tilman" created="Sat, 21 Jun 2014 13:56:53 +0000"  >&lt;p&gt;removed in rev 1604380. I don&apos;t like to use command line utilities (this is so &quot;80ies&quot;) but saw a similar feature in my IDE. This comment was a close decision by me anyway (the code is mostly self-explanatory), so I deleted it this time and will think about my position. My current position is that there should be a single point of information, especially considering that we lost the versioning and all commit comments from the sourceforge days. What will happen with the transition to the next &quot;must have&quot; versioning system?&lt;/p&gt;</comment>
                            <comment id="14039898" author="jahewson" created="Sat, 21 Jun 2014 17:12:58 +0000"  >&lt;blockquote&gt;
&lt;p&gt;this is so &quot;80ies&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That made me laugh &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Yes, I use the IntelliJ plugin for SVN, it adds a gutter next to each line labelling its commit. GitHub&apos;s &quot;history&quot; view is also very useful.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What will happen with the transition to the next &quot;must have&quot; versioning system?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Alternatively, what happens when we move to the next &quot;must have&quot; issue tracking system?&lt;/p&gt;

&lt;p&gt;Fortunately we now live in the future where loosing the history isn&apos;t necessary (if indeed it ever was) because of tools like &lt;a href=&quot;http://git-scm.com/book/en/Git-and-Other-Systems-Git-and-Subversion&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;git-svn&lt;/a&gt;. Given that CVS can be migrated to SVN I don&apos;t understand why all the sourceforge commits were lost in the first place - it was a long time ago.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12617321">PDFBOX-1451</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12697308">PDFBOX-1947</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400906</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x0db:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400991</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>