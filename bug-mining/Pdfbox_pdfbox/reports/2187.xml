<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:09:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4446] Tolerate some incorrect Xref in PDF file</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4446</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Some PDF file may not have correct Xref, and we should tolerate them. Or just log an error but not raise exception.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 pdfbox/src/main/java/org/apache/pdfbox/pdfparser/COSParser.java | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdfparser/COSParser.java b/pdfbox/src/main/java/org/apache/pdfbox/pdfparser/COSParser.java
index 8ca955ed2..b2b28b258 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdfparser/COSParser.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdfparser/COSParser.java
@@ -721,6 +721,9 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;COSParser &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; BaseParser
                                     }
                                 }
 
+                                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( fileOffset == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
+                                  &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+                                }
                                 List&amp;lt;COSObject&amp;gt; stmObjects = objToBeParsed.get(fileOffset);
                                 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stmObjects == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
                                 {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13212365">PDFBOX-4446</key>
            <summary>Tolerate some incorrect Xref in PDF file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="liu1985629">Derek Liu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Jan 2019 00:47:39 +0000</created>
                <updated>Thu, 28 Feb 2019 17:44:59 +0000</updated>
                            <resolved>Sun, 3 Feb 2019 07:59:58 +0000</resolved>
                                    <version>2.0.14</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.14</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16754600" author="tilman" created="Tue, 29 Jan 2019 04:54:19 +0000"  >&lt;p&gt;Can you attach a file that has the problem or is it confidential?&lt;/p&gt;</comment>
                            <comment id="16754683" author="tilman" created="Tue, 29 Jan 2019 07:26:34 +0000"  >&lt;p&gt;Also make sure you tested with the trunk - from what I saw in the source code, the exception should not occur there.&lt;/p&gt;</comment>
                            <comment id="16754853" author="liu1985629" created="Tue, 29 Jan 2019 10:33:30 +0000"  >&lt;p&gt;Yes, I tested it with latest trunk. The PDF generated by JReport 15.6, which it may lost some Xref.&lt;br/&gt;
The PDF file is confidential, so I can&apos;t put it at here.&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12956695/12956695_Reproduce_Step.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="16755103" author="mkl" created="Tue, 29 Jan 2019 15:13:10 +0000"  >&lt;p&gt;If you add some additional leniency, please only conditionally, e.g. only if &lt;tt&gt;isLenient&lt;/tt&gt;. Apparently the PDF in question is broken, and attempts to repair broken PDFs may change their contents (or more to the point, different PDF processors might fix the error differently resulting in different PDF contents).&lt;/p&gt;

&lt;p&gt;So the default behavior should be an exception, and only if the leading application explicitly allows a repaired version, a repair should be attempted.&lt;/p&gt;

&lt;p&gt;That being said, here that code implicitly is conditional, it only can make a difference if &lt;tt&gt;isLenient&lt;/tt&gt;, otherwise the exception in line 718 would have been thrown. But it should be more obvious that it is conditional, e.g. by making it an &lt;tt&gt;else continue&lt;/tt&gt; of the &lt;tt&gt;if( fileOffset != null ) {...&lt;/tt&gt;} from line 709 to line 714.&lt;/p&gt;</comment>
                            <comment id="16755311" author="tilman" created="Tue, 29 Jan 2019 19:18:40 +0000"  >&lt;p&gt;Agreed&#8230; and it also makes sense not to add a null key.&lt;/p&gt;

&lt;p&gt;Targeted to 2.0.14 but I&apos;d like that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; has a look at this one, I feel uncomfortable not having a test file. Creating one would be difficult.&lt;/p&gt;</comment>
                            <comment id="16755440" author="liu1985629" created="Tue, 29 Jan 2019 22:36:04 +0000"  >&lt;p&gt;If I use Adobe Acrobat Pro DC to open and save it again, it don&apos;t have this issue then. So If we can add a parameter for invoker to decide whether we should skip the null error? Especially for the Xref, it seems not affect the PDF UI. It does not make sense to not care the null point exception.&lt;/p&gt;</comment>
                            <comment id="16755767" author="tilman" created="Wed, 30 Jan 2019 07:13:13 +0000"  >&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkl&quot; class=&quot;user-hover&quot; rel=&quot;mkl&quot;&gt;mkl&lt;/a&gt; mentioned, that would be done as part of the lenient flag, which is set by default.&lt;/p&gt;</comment>
                            <comment id="16755777" author="liu1985629" created="Wed, 30 Jan 2019 07:27:53 +0000"  >&lt;p&gt;Thanks. &lt;br/&gt;
Another thing, do you know when is the next release(2.0.14, 3.0.0) time?&lt;/p&gt;</comment>
                            <comment id="16756939" author="lehmi" created="Thu, 31 Jan 2019 07:02:40 +0000"  >&lt;p&gt;I don&apos;t see any reason not to add that patch, as long as:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;it&apos;s active in lenient mode only&lt;/li&gt;
	&lt;li&gt;a null value isn&apos;t added&lt;/li&gt;
	&lt;li&gt;maybe some debug log should be added to identify such cases&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkl&quot; class=&quot;user-hover&quot; rel=&quot;mkl&quot;&gt;mkl&lt;/a&gt; already discussed that points.&lt;/p&gt;

&lt;p&gt;As always, this change might fix pdfs like Dereks, but in other cases it will just exchange the avoided exception with another one.&lt;/p&gt;</comment>
                            <comment id="16759310" author="jira-bot" created="Sun, 3 Feb 2019 06:33:26 +0000"  >&lt;p&gt;Commit 1852812 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1852812&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1852812&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4446&quot; title=&quot;Tolerate some incorrect Xref in PDF file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4446&quot;&gt;&lt;del&gt;PDFBOX-4446&lt;/del&gt;&lt;/a&gt;: tolerate some incorrect Xref in PDF file, as suggested by Derek Liu&lt;/p&gt;</comment>
                            <comment id="16759311" author="jira-bot" created="Sun, 3 Feb 2019 06:33:30 +0000"  >&lt;p&gt;Commit 1852813 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1852813&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1852813&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4446&quot; title=&quot;Tolerate some incorrect Xref in PDF file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4446&quot;&gt;&lt;del&gt;PDFBOX-4446&lt;/del&gt;&lt;/a&gt;: tolerate some incorrect Xref in PDF file, as suggested by Derek Liu&lt;/p&gt;</comment>
                            <comment id="16759317" author="tilman" created="Sun, 3 Feb 2019 07:05:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liu1985629&quot; class=&quot;user-hover&quot; rel=&quot;liu1985629&quot;&gt;liu1985629&lt;/a&gt; please test both with 2.0 and the trunk snapshots and give feedback:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.14-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.14-SNAPSHOT/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/3.0.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/3.0.0-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16759325" author="liu1985629" created="Sun, 3 Feb 2019 07:46:47 +0000"  >&lt;p&gt;Thanks, tested, works for me.&lt;/p&gt;</comment>
                            <comment id="16759329" author="tilman" created="Sun, 3 Feb 2019 07:59:58 +0000"  >&lt;p&gt;OK, thanks everybody!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12956695" name="Reproduce_Step.png" size="68395" author="liu1985629" created="Tue, 29 Jan 2019 11:21:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0emg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>