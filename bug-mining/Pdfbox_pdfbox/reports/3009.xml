<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:15:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5905] Many ZapfDingbats symbols do not appear when page is rendered.</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5905</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;We&apos;ve encountered some PDFs that have characters written using the ZapfDingbats symbol font. On Windows PdfBox recreates the symbols appropriately, but when testing on Ubuntu 22.04 we&apos;ve noticed that many symbols, such as the heavy checkmark (U+2714) are missing. Instead an empty character is produced.&#160;&lt;/p&gt;

&lt;p&gt;Upon debugging it appears that the PdfBox toolkit substitutes the ZapfDingbats font for some other font instead. In our observation, the code attempts to fallback to &quot;Helvetica,&quot; but because this font is not present the last-resort &quot;LiberationSans&quot; is selected instead. This font is not capable of displaying the heavy checkmark symbol (a20/U+2714) and hence it is missing when the PDF page is rendered to an image.&#160;The following appears in the Debug console:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;WARNING: Using fallback font LiberationSans for ZapfDingbats&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;While debugging, if we inject the font name &quot;DejaVuSans&quot; into the variable for &quot;fallbackName&quot; in the &lt;tt&gt;FontMapperImpl::getFontBoxFont(String, PDFontDescriptor)&lt;/tt&gt; method, then DejaVuSans is instead resolved as the base font and the heavy checkmark symbol (and others) is drawn correctly.&lt;/p&gt;

&lt;p&gt;It&apos;s not clear to us why a more appropriate font is not chosen in this instance. It results in many ZapfDingbats symbols missing when the page is rendered.  &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.w3.org/Style/XSL/TestSuite/contrib/XEP/Tests/zapf-dingbats.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;This PDF file&lt;/a&gt; demonstrates the problem.&lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;StepstoReproduce%3A&quot;&gt;&lt;/a&gt;Steps to Reproduce: &lt;/h2&gt;
&lt;ol&gt;
	&lt;li&gt;Create a Java project and import PdfBox v2.0.32&lt;/li&gt;
	&lt;li&gt;Execute the below code snippet, substituting the placeholder file paths for real ones on your system, on Ubuntu 22.04&lt;/li&gt;
	&lt;li&gt;Observe that the image file that is produced is missing many symbols.&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; inputPath = &lt;span class=&quot;code-quote&quot;&gt;&quot;zapf-dingbats.pdf&quot;&lt;/span&gt;;
File pdfFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(inputPath);
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (PDDocument pdfDoc = PDDocument.load(pdfFile)) {
    PDFRenderer renderer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFRenderer(pdfDoc);
    BufferedImage image = renderer.renderImage(0);

    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; outputPath = &lt;span class=&quot;code-quote&quot;&gt;&quot;zapf-dingbats.ubuntu.png&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (OutputStream outFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(outputPath)) {
        ImageIOUtil.writeImage(image, &lt;span class=&quot;code-quote&quot;&gt;&quot;PNG&quot;&lt;/span&gt;, outFile);
    }
}
&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
    e.printStackTrace();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Ubuntu 22.04</environment>
        <key id="13599406">PDFBOX-5905</key>
            <summary>Many ZapfDingbats symbols do not appear when page is rendered.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="rpa242">Robert Amidon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Nov 2024 14:43:59 +0000</created>
                <updated>Thu, 16 Jan 2025 16:44:19 +0000</updated>
                            <resolved>Wed, 18 Dec 2024 10:06:38 +0000</resolved>
                                    <version>2.0.32</version>
                    <version>3.0.3 PDFBox</version>
                                    <fixVersion>2.0.33</fixVersion>
                    <fixVersion>3.0.4 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17899838" author="tilman" created="Wed, 20 Nov 2024 18:21:52 +0000"  >&lt;p&gt;MS-Gothic can be used instead of ZapfDingbats. See also &lt;a href=&quot;https://stackoverflow.com/a/67437624/535646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this stackoverflow answer&lt;/a&gt; about getting ZapfDingbats from ghostscript fonts.&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://pdfbox.apache.org/3.0/faq.html#what-fonts-do-i-need-on-my-system%3F&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pdfbox.apache.org/3.0/faq.html#what-fonts-do-i-need-on-my-system%3F&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17901371" author="tilman" created="Wed, 27 Nov 2024 04:16:53 +0000"  >&lt;p&gt;Closing this, assuming/hoping that my answer helped. You can still reopen or comment.&lt;/p&gt;</comment>
                            <comment id="17904259" author="JIRAUSER307795" created="Mon, 9 Dec 2024 19:15:25 +0000"  >&lt;p&gt;I was able to confirm that installing &lt;tt&gt;MS-Gothic&lt;/tt&gt; does work in this instance, but the only way I&apos;ve found to reliably get it is to copy/paste the font file from an existing Windows installation. Unless I&apos;m missing something, &lt;tt&gt;ttf-mscorefonts-installer&lt;/tt&gt; does not include it.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Could the substitute list in &lt;tt&gt;FontMapperImpl.java&lt;/tt&gt; be expanded to include DejaVuSans? If not, is there some other convenient way to obtain MS-Gothic that you know of?&lt;/p&gt;</comment>
                            <comment id="17904338" author="tilman" created="Tue, 10 Dec 2024 04:04:16 +0000"  >&lt;p&gt;You could buy it from microsoft&lt;br/&gt;
&lt;a href=&quot;https://www.myfonts.com/a/font/form/microsoft-typography-licensing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.myfonts.com/a/font/form/microsoft-typography-licensing&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But you can also buy the Zapf Dingbats font &lt;a href=&quot;https://www.monotypefonts.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.monotypefonts.com&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Re DejaVuSans, did you test that this font does have the Dingbats glyphs? Or is your remark about including it similar to the Liberation fonts?&lt;/p&gt;</comment>
                            <comment id="17906497" author="JIRAUSER307795" created="Tue, 17 Dec 2024 18:34:26 +0000"  >&lt;p&gt;As far as I can tell, DejaVuSans can display all the glyphs. This is what the example file looks like when I add &quot;DejaVuSans&quot; to the substitute list for ZapfDingbats:&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13073539/13073539_image-2024-12-17-13-57-21-509.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;
</comment>
                            <comment id="17906498" author="JIRAUSER307795" created="Tue, 17 Dec 2024 18:35:52 +0000"  >&lt;p&gt;&lt;del&gt;For whatever reason Jira will not let me add another attachment&lt;/del&gt;. I was able to add another screenshot, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;. All the symbols appear correct in the output. &lt;/p&gt;</comment>
                            <comment id="17906501" author="tilman" created="Tue, 17 Dec 2024 18:41:04 +0000"  >&lt;p&gt;It&apos;s because it was closed, I have reopened it. I will make my own tests to see what happens and if it works I&apos;ll add it.&lt;/p&gt;</comment>
                            <comment id="17906521" author="tilman" created="Tue, 17 Dec 2024 20:03:45 +0000"  >&lt;p&gt;It works, except for a problem with a corner case, but that one will not prevent me adding this font.&lt;/p&gt;</comment>
                            <comment id="17906613" author="jira-bot" created="Wed, 18 Dec 2024 06:26:08 +0000"  >&lt;p&gt;Commit 1922573 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1922573&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1922573&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5905&quot; title=&quot;Many ZapfDingbats symbols do not appear when page is rendered.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5905&quot;&gt;&lt;del&gt;PDFBOX-5905&lt;/del&gt;&lt;/a&gt;: add DejaVu Sans font as fallback for Zapf Dingbats, as suggested by Robert Amidon&lt;/p&gt;</comment>
                            <comment id="17906614" author="jira-bot" created="Wed, 18 Dec 2024 06:26:12 +0000"  >&lt;p&gt;Commit 1922574 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1922574&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1922574&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5905&quot; title=&quot;Many ZapfDingbats symbols do not appear when page is rendered.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5905&quot;&gt;&lt;del&gt;PDFBOX-5905&lt;/del&gt;&lt;/a&gt;: add DejaVu Sans font as fallback for Zapf Dingbats, as suggested by Robert Amidon&lt;/p&gt;</comment>
                            <comment id="17906615" author="jira-bot" created="Wed, 18 Dec 2024 06:26:17 +0000"  >&lt;p&gt;Commit 1922575 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1922575&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1922575&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5905&quot; title=&quot;Many ZapfDingbats symbols do not appear when page is rendered.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5905&quot;&gt;&lt;del&gt;PDFBOX-5905&lt;/del&gt;&lt;/a&gt;: add DejaVu Sans font as fallback for Zapf Dingbats, as suggested by Robert Amidon&lt;/p&gt;</comment>
                            <comment id="17906679" author="tilman" created="Wed, 18 Dec 2024 10:06:38 +0000"  >&lt;p&gt;Thank you for the suggestion. I&apos;ll investigate the corner in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5924&quot; title=&quot;Icons of text annotations sometimes too large&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5924&quot;&gt;&lt;del&gt;PDFBOX-5924&lt;/del&gt;&lt;/a&gt; (annotation display of &lt;a href=&quot;https://mirrors.mit.edu/CTAN/macros/latex/contrib/pdfcomment/doc/pdfcomment.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://mirrors.mit.edu/CTAN/macros/latex/contrib/pdfcomment/doc/pdfcomment.pdf&lt;/a&gt; , page 6, I may have to use scaling).&lt;/p&gt;</comment>
                            <comment id="17906681" author="jira-bot" created="Wed, 18 Dec 2024 10:08:17 +0000"  >&lt;p&gt;Commit 5d4e6dd15d7152fbe9b56093eee8625a18a751d1 in pdfbox-docs&apos;s branch refs/heads/master from Tilman Hausherr&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=pdfbox-docs.git;h=5d4e6dd1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=pdfbox-docs.git;h=5d4e6dd1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5905&quot; title=&quot;Many ZapfDingbats symbols do not appear when page is rendered.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5905&quot;&gt;&lt;del&gt;PDFBOX-5905&lt;/del&gt;&lt;/a&gt;: add DejaVu Sans as alternative&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13602550">PDFBOX-5924</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13073539" name="image-2024-12-17-13-57-21-509.png" size="49244" author="rpa242" created="Tue, 17 Dec 2024 18:57:22 +0000"/>
                            <attachment id="13072964" name="missing_symbols.png" size="21706" author="rpa242" created="Wed, 20 Nov 2024 14:43:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1snz4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>