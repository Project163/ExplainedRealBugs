<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:00:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2786] PDPageDestination page index off by one</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2786</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;When creating a new bookmark with the same page number as an existing bookmark, the resulting destination is offset by 1 compared to the old destination.&lt;/p&gt;

&lt;p&gt;This results in the bookmark being set for the next page, which could be a non-existing page.&lt;/p&gt;

&lt;p&gt;I&apos;ve added a class with an example pdf and my own output pdf. Run with argument of a path to where you have the pdf, including a trailing slash.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12826930">PDFBOX-2786</key>
            <summary>PDPageDestination page index off by one</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="johanneke">Johanneke Lamberink</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 May 2015 14:32:41 +0000</created>
                <updated>Thu, 23 Jul 2015 06:35:47 +0000</updated>
                            <resolved>Thu, 7 May 2015 16:48:55 +0000</resolved>
                                    <version>1.8.9</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.10</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14527165" author="tilman" created="Mon, 4 May 2015 19:59:53 +0000"  >&lt;p&gt;I doubt whether what you do is correct, see this from the spec:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;12.3.2.2 Explicit Destinations&lt;br/&gt;
Table 151 shows the allowed syntactic forms for specifying a destination explicitly in a PDF file. In each case, page is an indirect reference to a page object (except in a remote go-to action; see 12.6.4.3, &#8220;Remote Go-To Actions&#8221;).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So you should put a page object there, not a page number. (Although I tested with an editor to put page number 1 and it worked). Here&apos;s some code that does what you need:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                COSArray destinationArray = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; COSArray();
                &lt;span class=&quot;code-comment&quot;&gt;//destinationArray.add(0, COSNumber.get(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.valueOf(pagenumber)));  // that was your code
&lt;/span&gt;                destinationArray.add(0, getPageForFirstBookmark(outline.getFirstChild()).getCOSObject()); &lt;span class=&quot;code-comment&quot;&gt;// that is &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;
&lt;/span&gt;                destinationArray.add(1, COSName.getPDFName(&lt;span class=&quot;code-quote&quot;&gt;&quot;Fit&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and here&apos;s getPageForFirst Bookmark&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; PDPage getPageForFirstBookmark(PDOutlineItem item) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
    {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (item != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
        {
            PDDestination destination = item.getDestination();
            PDAction action = item.getAction();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (action &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; PDActionGoTo &amp;amp;&amp;amp; destination == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
            {
                PDActionGoTo gotoAction = (PDActionGoTo) action;
                destination = gotoAction.getDestination();
            }
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
            {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; PDPageDestination)
                {
                    PDPageDestination pageDest = (PDPageDestination) destination;
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pageDest.getPage();
                }
            }
            &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
            {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getPageForFirstBookmark(item.getFirstChild());
            }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getPageForFirstBookmark(item.getNextSibling());
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and here&apos;s a segment from the PDF&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;4 0 obj
&amp;lt;&amp;lt;
/Count 2
/First 10 0 R
/Last 11 0 R
/Type /Outlines
&amp;gt;&amp;gt;
endobj
5 0 obj
&amp;lt;&amp;lt;
/Count 2
/Kids [12 0 R 13 0 R]
/Type /Pages
&amp;gt;&amp;gt;
endobj

...

10 0 obj
&amp;lt;&amp;lt;
/A 14 0 R
/Parent 4 0 R
/Title (Page 2)
/Next 11 0 R
&amp;gt;&amp;gt;
endobj
11 0 obj
&amp;lt;&amp;lt;
/Title (Bookmark test)
/A 15 0 R
/Parent 4 0 R
/Prev 10 0 R
&amp;gt;&amp;gt;
endobj
12 0 obj
&amp;lt;&amp;lt;
/Annots [16 0 R 17 0 R 18 0 R 19 0 R 20 0 R 21 0 R 22 0 R 23 0 R 24 0 R 25 0 R
26 0 R 27 0 R 28 0 R 29 0 R 30 0 R 31 0 R]
/Contents 32 0 R
/MediaBox [0 0 597.543 834.372]
/Parent 5 0 R
/Resources 33 0 R
/Type /Page
&amp;gt;&amp;gt;
endobj
13 0 obj
&amp;lt;&amp;lt;
/Annots [34 0 R 35 0 R 36 0 R 37 0 R]
/Contents 38 0 R
/MediaBox [0 0 597.543 834.372]
/Parent 5 0 R
/Resources 39 0 R
/Type /Page
&amp;gt;&amp;gt;
endobj
14 0 obj
&amp;lt;&amp;lt;
/D [13 0 R /FitH 1206]
/S /GoTo
&amp;gt;&amp;gt;
endobj
15 0 obj
&amp;lt;&amp;lt;
/S /GoTo
/D [13 0 R /Fit]
&amp;gt;&amp;gt;
endobj
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14527209" author="tilman" created="Mon, 4 May 2015 20:22:08 +0000"  >&lt;p&gt;Two more things:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I did not check whether your code is correct / does what you mentioned in the mailing list, I just modified your version to use a PDPage&lt;/li&gt;
	&lt;li&gt;did you create your code from one of our examples, or from stackoverflow? If yes, where?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14527972" author="tilman" created="Tue, 5 May 2015 05:50:00 +0000"  >&lt;p&gt;Oh-oh, it gets more complex... a look at the source code shows this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; getPageNumber()
    {
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; retval = -1;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( array.size() &amp;gt; 0 )
        {
            COSBase page = array.getObject( 0 );
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( page &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSNumber )
            {
                retval = ((COSNumber)page).intValue();
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; retval;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; findPageNumber()
    {
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; retval = -1;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( array.size() &amp;gt; 0 )
        {
            COSBase page = array.getObject( 0 );
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( page &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSNumber )
            {
                retval = ((COSNumber)page).intValue();
            }
            &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (page &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSDictionary)
            {
                COSBase parent = page;
                &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (((COSDictionary) parent).getDictionaryObject(COSName.PARENT, COSName.P) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
                {
                    parent = ((COSDictionary) parent).getDictionaryObject(COSName.PARENT, COSName.P);
                }
                &lt;span class=&quot;code-comment&quot;&gt;// now parent is the pages node
&lt;/span&gt;                PDPageTree pages = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDPageTree((COSDictionary) parent);
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pages.indexOf(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDPage((COSDictionary) page)) + 1;
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; retval;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So the first method is 0-based, the second one (introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-558&quot; title=&quot;PDPageDestination getPageNumber only returns page number when underlying COSArray has a page number&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-558&quot;&gt;&lt;del&gt;PDFBOX-558&lt;/del&gt;&lt;/a&gt; by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wulf&quot; class=&quot;user-hover&quot; rel=&quot;wulf&quot;&gt;wulf&lt;/a&gt;) is 1-based when the page is local (i.e. from an object), and 0-based if the page is remote (i.e. explicit).&lt;/p&gt;</comment>
                            <comment id="14530091" author="johanneke" created="Wed, 6 May 2015 07:34:03 +0000"  >&lt;p&gt;&quot;(Although I tested with an editor to put page number 1 and it worked)&quot;&lt;br/&gt;
What worked exactly? Putting page number 1 works to put a bookmark on the first page, but I need to be able to query the document for the page of the bookmark and then use that later on. So I need consistent behaviour when asking what the page number is, and setting it.&lt;/p&gt;

&lt;p&gt;Although, if my problem is solved by setting a PDPage instead of a page number, I guess that would be okay as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14530094" author="johanneke" created="Wed, 6 May 2015 07:34:44 +0000"  >&lt;p&gt;I created my code myself, no examples or stackoverflow used, just the API docs to see the available methods.&lt;/p&gt;</comment>
                            <comment id="14530095" author="johanneke" created="Wed, 6 May 2015 07:35:45 +0000"  >&lt;p&gt;That does seem like a bug, right? I&apos;m not sure it&apos;s the reason of my troubles, but it is something that should be consistent I think.&lt;/p&gt;</comment>
                            <comment id="14530103" author="johanneke" created="Wed, 6 May 2015 07:46:33 +0000"  >&lt;p&gt;Setting the PDPage seems to solve my problem &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14530815" author="tilman" created="Wed, 6 May 2015 16:26:47 +0000"  >&lt;p&gt;Yes it is a bug, it is the reason of your troubles, and I need to deprecate the method you have been using and create a new one that works properly. The reason is that people might be using it and expecting the (wrong) behavior you have complained about. The tricky part is to find a good name for the correct method &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14530817" author="tilman" created="Wed, 6 May 2015 16:27:32 +0000"  >&lt;p&gt;I meant that I put &quot;1&quot; with an editor, and clicking on the bookmark in Adobe reader then showed me the second page. This means that either Adobe has quietly allowed page numbers in local destinations, or that the specification is incomplete (there are some addenda and errata documents).&lt;/p&gt;</comment>
                            <comment id="14531074" author="jira-bot" created="Wed, 6 May 2015 18:09:54 +0000"  >&lt;p&gt;Commit 1678051 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1678051&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1678051&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2786&quot; title=&quot;PDPageDestination page index off by one&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2786&quot;&gt;&lt;del&gt;PDFBOX-2786&lt;/del&gt;&lt;/a&gt;: check GoTo action destination parameter&lt;/p&gt;</comment>
                            <comment id="14531076" author="jira-bot" created="Wed, 6 May 2015 18:10:14 +0000"  >&lt;p&gt;Commit 1678052 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1678052&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1678052&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2786&quot; title=&quot;PDPageDestination page index off by one&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2786&quot;&gt;&lt;del&gt;PDFBOX-2786&lt;/del&gt;&lt;/a&gt;: check GoTo action destination parameter&lt;/p&gt;</comment>
                            <comment id="14531220" author="jira-bot" created="Wed, 6 May 2015 19:13:24 +0000"  >&lt;p&gt;Commit 1678063 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1678063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1678063&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2576&quot; title=&quot;Improve code quality&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2576&quot;&gt;&lt;del&gt;PDFBOX-2576&lt;/del&gt;&lt;/a&gt;: use COSName constants&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2783&quot; title=&quot;Remove getCOSDictionary() method, adjust getCOSObject() return type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2783&quot;&gt;&lt;del&gt;PDFBOX-2783&lt;/del&gt;&lt;/a&gt;: Use getCOSObject() instead of getCOSArray()&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2786&quot; title=&quot;PDPageDestination page index off by one&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2786&quot;&gt;&lt;del&gt;PDFBOX-2786&lt;/del&gt;&lt;/a&gt;: deprecate findPageNumber(), new method retrievePageNumber()&lt;/p&gt;</comment>
                            <comment id="14531245" author="jira-bot" created="Wed, 6 May 2015 19:27:48 +0000"  >&lt;p&gt;Commit 1678070 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1678070&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1678070&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2576&quot; title=&quot;Improve code quality&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2576&quot;&gt;&lt;del&gt;PDFBOX-2576&lt;/del&gt;&lt;/a&gt;: use COSName constants&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2786&quot; title=&quot;PDPageDestination page index off by one&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2786&quot;&gt;&lt;del&gt;PDFBOX-2786&lt;/del&gt;&lt;/a&gt;: deprecate findPageNumber(), new method findDestPageNumber(), better javadoc&lt;/p&gt;</comment>
                            <comment id="14531258" author="jira-bot" created="Wed, 6 May 2015 19:34:20 +0000"  >&lt;p&gt;Commit 1678074 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1678074&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1678074&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2786&quot; title=&quot;PDPageDestination page index off by one&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2786&quot;&gt;&lt;del&gt;PDFBOX-2786&lt;/del&gt;&lt;/a&gt;: fix javadoc&lt;/p&gt;</comment>
                            <comment id="14531259" author="jira-bot" created="Wed, 6 May 2015 19:35:12 +0000"  >&lt;p&gt;Commit 1678075 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1678075&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1678075&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2786&quot; title=&quot;PDPageDestination page index off by one&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2786&quot;&gt;&lt;del&gt;PDFBOX-2786&lt;/del&gt;&lt;/a&gt;: fix javadoc&lt;/p&gt;</comment>
                            <comment id="14532984" author="tilman" created="Thu, 7 May 2015 16:48:55 +0000"  >&lt;p&gt;Setting to resolved; if anyone has a better name than &quot;retrieveDestPageNumber()&quot; for the &quot;new&quot; method, please speak out before 1.8.10 is released.&lt;/p&gt;</comment>
                            <comment id="14535660" author="jahewson" created="Fri, 8 May 2015 21:52:12 +0000"  >&lt;p&gt;Why not just fix getPageNumber()? That method isn&apos;t any use otherwise.&lt;/p&gt;</comment>
                            <comment id="14536355" author="tilman" created="Sat, 9 May 2015 10:44:19 +0000"  >&lt;p&gt;But that one is meant to return -1 if the destination is referenced by a page object.&lt;/p&gt;</comment>
                            <comment id="14540904" author="jahewson" created="Tue, 12 May 2015 22:24:50 +0000"  >&lt;p&gt;Right, but what use is that to anybody? We just had an e-mail on the mailing list where somebody was surprised about that -1 value. It&apos;s not useful.&lt;/p&gt;</comment>
                            <comment id="14540929" author="tilman" created="Tue, 12 May 2015 22:44:59 +0000"  >&lt;p&gt;I assume you mean the posting of Noam from last week. He got -1 because a named destination couldn&apos;t be looked up. And the method getPageNumber() he mentioned is not the one of PDPageDestination discussed here, but of PDFTextStripper in 1.8 (not in the trunk). The reason for the -1 was that we were not processing the /Dests document catalog entry. This has been fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2793&quot; title=&quot;/Dests dictionary isn&amp;#39;t supported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2793&quot;&gt;&lt;del&gt;PDFBOX-2793&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14542332" author="jahewson" created="Wed, 13 May 2015 18:02:35 +0000"  >&lt;p&gt;Yes, that&apos;s the one. Ok, so those are different methods, I see. Still, the question remains, what use are getPageNumber() or findPageNumber() in their current forms? They&apos;re both broken, so why keep them around in 2.0?&lt;/p&gt;</comment>
                            <comment id="14542439" author="tilman" created="Wed, 13 May 2015 18:54:38 +0000"  >&lt;p&gt;getPageNumber() isn&apos;t broken, it returns the page number if there is one. It is the counterpart of setPageNumber(), which sets a page number (needed for remote destinations). findPageNumber() is broken, but can&apos;t be fixed because this would break software that uses it, which is why I created a new method. Expanding getPageNumber() would mean that it would no longer be the counterpart of setPageNumber().&lt;/p&gt;</comment>
                            <comment id="14542761" author="jahewson" created="Wed, 13 May 2015 21:26:40 +0000"  >&lt;p&gt;I don&apos;t really see it as the counterpart of setPageNumber() anyway. setPageNumber() sets the page number. getPageNumber() &lt;em&gt;might&lt;/em&gt; return the page number, or it might not, so the behaviour isn&apos;t complementary. What&apos;s the point in getPageNumber(), why would anybody ever want to call it rather than retrievePageNumber()? Only someone interested in COS would do that... and we already have COS for that. What is the problem that getPageNumber() solves?&lt;/p&gt;</comment>
                            <comment id="14543489" author="tilman" created="Thu, 14 May 2015 11:10:17 +0000"  >&lt;p&gt;I haven&apos;t understood the 2nd part of your argument &quot;Only someone interested in COS would do that...&quot;?&lt;/p&gt;

&lt;p&gt;The problem that getPageNumber() solves is just what&apos;s in the javadoc. It returns a &quot;pure&quot; page number, if there is one and -1 if there isn&apos;t a page number.&lt;/p&gt;

&lt;p&gt;Of course I don&apos;t know what the users are doing, but it could be that people are using it to identify a page number based destination, and assign that number to another destination, and to a PDF. Your intended change of the behaviour would then result in an invalid PDF, as some destinations must be object based and not number based. (It still works properly with Adobe Reader, but fails PDF/A-1b checks)&lt;/p&gt;</comment>
                            <comment id="14543504" author="msahyoun" created="Thu, 14 May 2015 11:46:11 +0000"  >&lt;p&gt;I&apos;m using it to get the page numbers for documents which have been merged from individual documents into a common one and where I need to get the information about the boundaries of the former documents e.g. for adding paper handling marks (OMR, DataMatrix)&lt;/p&gt;</comment>
                            <comment id="14544089" author="jahewson" created="Thu, 14 May 2015 17:41:35 +0000"  >&lt;p&gt;Ok, I see, that&apos;s a use case which makes sense! Thanks, we&apos;re good here.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12730184" name="Archive.zip" size="100762" author="johanneke" created="Mon, 4 May 2015 14:33:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2e8vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>