<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:09:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4445] Language and Viewer Preferences are not properly merged</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4445</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Using Adobe Acrobat Pro DC to check the accessibility issue, it reported that:&lt;br/&gt;
Primary language	Failed	Text language is specified&lt;br/&gt;
Title	Failed	Document title is showing in title bar&lt;/p&gt;

&lt;p&gt;So we may need change the code to support it pass, could you please fix this?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 .../java/org/apache/pdfbox/multipdf/PDFMergerUtility.java | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

diff --git a/pdfbox/src/main/java/org/apache/pdfbox/multipdf/PDFMergerUtility.java b/pdfbox/src/main/java/org/apache/pdfbox/multipdf/PDFMergerUtility.java
index b0474f2b9..be01d32c9 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/multipdf/PDFMergerUtility.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/multipdf/PDFMergerUtility.java
@@ -72,6 +72,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.interactive.documentnavigation.outline.PDDocume
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.interactive.documentnavigation.outline.PDOutlineItem;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.interactive.form.PDAcroForm;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.interactive.form.PDField;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.interactive.viewerpreferences.PDViewerPreferences;
 
 /**
  * This &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;will take a list of pdf documents and merge them, saving the
@@ -422,12 +423,26 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PDFMergerUtility
                     }
                     tobeclosed.add(sourceDoc);
                     appendDocument(destination, sourceDoc);
+          
+                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( destinationDocumentInformation == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; sourceDoc.getDocumentInformation() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
+                      destinationDocumentInformation = sourceDoc.getDocumentInformation();
+                      destination.getDocumentCatalog().setLanguage( sourceDoc.getDocumentCatalog().getLanguage() );
+                    }
                 }
                 
                 &lt;span class=&quot;code-comment&quot;&gt;// optionally set meta data
&lt;/span&gt;                 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destinationDocumentInformation != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
                 {
                     destination.setDocumentInformation(destinationDocumentInformation);
+                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( destinationDocumentInformation.getTitle() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
+                      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( destination.getDocumentCatalog().getViewerPreferences() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
+                        destination.getDocumentCatalog().setViewerPreferences( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDViewerPreferences( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; COSDictionary() ) );
+                      }
+                      destination.getDocumentCatalog().getViewerPreferences().setDisplayDocTitle( &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; );
+                    }
+                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( destinationDocumentInformation.getCOSObject().getString( COSName.LANG ) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
+                      destination.getDocumentCatalog().setLanguage( destinationDocumentInformation.getCOSObject().getString( COSName.LANG ) );
+                    }
                 }
                 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destinationMetadata != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
                 {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13212132">PDFBOX-4445</key>
            <summary>Language and Viewer Preferences are not properly merged</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="liu1985629">Derek Liu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Jan 2019 02:40:50 +0000</created>
                <updated>Thu, 28 Feb 2019 17:45:00 +0000</updated>
                            <resolved>Tue, 29 Jan 2019 04:50:39 +0000</resolved>
                                    <version>2.0.13</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.14</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16753745" author="tilman" created="Mon, 28 Jan 2019 07:06:28 +0000"  >&lt;p&gt;The ViewerPreferences and DocumentInformation problem should be handled in appendDocument(). For people who call appendDocument() only. The language should be done independently from the documentinformation. I also don&apos;t see a reason to call setDisplayDocTitle unless one of the two has it set to true. The best would be to do some merge of ViewerPreferences.&lt;/p&gt;

&lt;p&gt;I&apos;ll look at this later, so don&apos;t go on vacation for a few days...&lt;/p&gt;</comment>
                            <comment id="16754099" author="jira-bot" created="Mon, 28 Jan 2019 16:09:46 +0000"  >&lt;p&gt;Commit 1852385 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1852385&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1852385&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4445&quot; title=&quot;Language and Viewer Preferences are not properly merged&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4445&quot;&gt;&lt;del&gt;PDFBOX-4445&lt;/del&gt;&lt;/a&gt;: also merge /Language and /ViewerPreferences&lt;/p&gt;</comment>
                            <comment id="16754100" author="jira-bot" created="Mon, 28 Jan 2019 16:09:51 +0000"  >&lt;p&gt;Commit 1852386 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1852386&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1852386&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4445&quot; title=&quot;Language and Viewer Preferences are not properly merged&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4445&quot;&gt;&lt;del&gt;PDFBOX-4445&lt;/del&gt;&lt;/a&gt;: also merge /Language and /ViewerPreferences&lt;/p&gt;</comment>
                            <comment id="16754448" author="liu1985629" created="Mon, 28 Jan 2019 23:45:23 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;You change fix my problem.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="16754597" author="tilman" created="Tue, 29 Jan 2019 04:49:52 +0000"  >&lt;p&gt;Thanks for the feedback, please don&apos;t close resolved issues, this is done at release time.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0d7s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>