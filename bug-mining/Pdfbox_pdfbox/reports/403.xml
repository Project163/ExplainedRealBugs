<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:54:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1861] Line is incorrectly dashed</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1861</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The line in the attached page should be dashed differently than it is in the rendering.&lt;/p&gt;</description>
                <environment>W7</environment>
        <key id="12690645">PDFBOX-1861</key>
            <summary>Line is incorrectly dashed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:38:05 +0000</created>
                <updated>Wed, 19 Feb 2014 19:29:42 +0000</updated>
                            <resolved>Wed, 19 Feb 2014 19:29:42 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>1.8.4</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13879494" author="tilman" created="Thu, 23 Jan 2014 06:40:06 +0000"  >&lt;p&gt;PDF file taken from &lt;a href=&quot;http://asymptote.sourceforge.net/gallery/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://asymptote.sourceforge.net/gallery/&lt;/a&gt; (clicking on the images brings the pdfs, clicking on the texts brings the source codes)&lt;/p&gt;</comment>
                            <comment id="13879498" author="tilman" created="Thu, 23 Jan 2014 06:45:49 +0000"  >&lt;p&gt;I had a look at other operators and notice that they do a transformation, but the dash pattern isn&apos;t transformed in org.apache.pdfbox.util.operator.pagedrawer.SetLineDashPattern, and using that dashArray result instead of lineDashPattern.getCOSDashPattern().toFloatArray() later down produces the attached image (which includes my change from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-615&quot; title=&quot;shfill operator needs implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-615&quot;&gt;&lt;del&gt;PDFBOX-615&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="13880100" author="jahewson" created="Thu, 23 Jan 2014 17:23:51 +0000"  >&lt;p&gt;You&apos;ll also need to multiply the phase in the same manner.&lt;/p&gt;

&lt;p&gt;P.S. I&apos;d leave out comments such as //TH &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1861&quot; title=&quot;Line is incorrectly dashed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1861&quot;&gt;&lt;del&gt;PDFBOX-1861&lt;/del&gt;&lt;/a&gt; as this is what svn blame is for.&lt;/p&gt;</comment>
                            <comment id="13880106" author="jahewson" created="Thu, 23 Jan 2014 17:27:24 +0000"  >&lt;p&gt;I found another example of the same problem fixed by this patch, see the diagram on page 2 of tracemonkey.pdf.&lt;/p&gt;</comment>
                            <comment id="13880180" author="tilman" created="Thu, 23 Jan 2014 18:22:43 +0000"  >&lt;p&gt;John: &lt;br/&gt;
1) Oops, yes, thanks, of course, new patch attached.&lt;br/&gt;
2) Andreas deletes these &quot;//TH&quot; anyway; I put them in the code for myself (and sometimes I forget to delete when submitting a patch), because not all changes are accepted and this helps me keeping track about what my change was for and where to find a test file&lt;br/&gt;
3) I notice that the dashing looks a bit poor when rendering your file, maybe there&apos;s another problem.&lt;/p&gt;</comment>
                            <comment id="13880246" author="jahewson" created="Thu, 23 Jan 2014 19:17:12 +0000"  >&lt;p&gt;The dashing in tracemonkey.pdf-2.png looks fine to me? The drop shadows look poor though.&lt;/p&gt;</comment>
                            <comment id="13880271" author="tilman" created="Thu, 23 Jan 2014 19:39:32 +0000"  >&lt;p&gt;Its mostly the curves at the right. They look much cleaner in the Adobe Viewer.&lt;/p&gt;</comment>
                            <comment id="13880405" author="jahewson" created="Thu, 23 Jan 2014 21:51:13 +0000"  >&lt;p&gt;Yes, you&apos;re right, perhaps the line width also needs to be transformed via the CTM?&lt;/p&gt;</comment>
                            <comment id="13880476" author="tilman" created="Thu, 23 Jan 2014 22:50:57 +0000"  >&lt;p&gt;I made the change you suggested, but it doesn&apos;t improve. I think its a java bug that nobody ever noticed, like nobody ever noticed this bug.&lt;/p&gt;</comment>
                            <comment id="13880543" author="jahewson" created="Fri, 24 Jan 2014 00:25:23 +0000"  >&lt;p&gt;I&apos;ve found the problem with the tracemonkey.pdf lines, PDFBox is trying to draw a zero-width line, which Java treats as 1px but we should treat as an implementation-specific minimum value, which is what Adobe Reader does.&lt;/p&gt;

&lt;p&gt;First, in SetLineWidth#process the code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lineWidth == 0) 
{
    lineWidth = 1;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;should be removed because 0 is an acceptable value to be stored in the graphics state.&lt;/p&gt;

&lt;p&gt;Then add the following code to StrokePath#process, after the line width is multiplied by the CTM:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// Adobe reader uses a similar minimum width
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lineWidth &amp;lt; 0.25)
{
    lineWidth = 0.25f;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This way the minimum line width we render is specific to the pagedrawer and not the pdmodel.&lt;/p&gt;</comment>
                            <comment id="13880547" author="jahewson" created="Fri, 24 Jan 2014 00:30:12 +0000"  >&lt;p&gt;It just occurred to me: your multiplying of the dash array/phase needs to be done in StrokePath#process instead of in SetLineDashPattern because otherwise the following sequence of instructions will produce the wrong dash:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;set ctm x-scale to 1
set dash pattern to 3 5 3
draw rect
stroke path &lt;span class=&quot;code-comment&quot;&gt;// dash pattern is 3 5 3
&lt;/span&gt;set ctm x-scale to 2
draw rect
stroke path &lt;span class=&quot;code-comment&quot;&gt;// dash pattern is 3 5 3 but should be 6 10 6&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That&apos;s why SetLineWidth doesn&apos;t do a CTM transformation, is is left until StrokePath.&lt;/p&gt;</comment>
                            <comment id="13880779" author="tilman" created="Fri, 24 Jan 2014 07:09:59 +0000"  >&lt;p&gt;Yes that works! Thanks!&lt;/p&gt;</comment>
                            <comment id="13881440" author="lehmi" created="Fri, 24 Jan 2014 21:28:17 +0000"  >&lt;p&gt;I&apos;ve added the pathc in revisions 1561191 (trunk) and 1561193 (1.8 branch) as proposed.&lt;/p&gt;

&lt;p&gt;Thanks for the contribution!&lt;/p&gt;</comment>
                            <comment id="13905904" author="tilman" created="Wed, 19 Feb 2014 19:11:12 +0000"  >&lt;p&gt;Reopening this one, because the change in StrokePath.java causes &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1917&quot; title=&quot;Rendering hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1917&quot;&gt;&lt;del&gt;PDFBOX-1917&lt;/del&gt;&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13905913" author="lehmi" created="Wed, 19 Feb 2014 19:16:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Please use &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1917&quot; title=&quot;Rendering hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1917&quot;&gt;&lt;del&gt;PDFBOX-1917&lt;/del&gt;&lt;/a&gt; to follow up as this one was already released as part of 1.8.4.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12695078">PDFBOX-1917</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12625002" name="SetLineWidth.patch" size="1090" author="tilman" created="Fri, 24 Jan 2014 07:11:39 +0000"/>
                            <attachment id="12625001" name="StrokePath.patch" size="3066" author="tilman" created="Fri, 24 Jan 2014 07:09:59 +0000"/>
                            <attachment id="12624584" name="asy-gouraud.pdf" size="11929" author="tilman" created="Thu, 23 Jan 2014 06:40:06 +0000"/>
                            <attachment id="12624586" name="asy-gouraud.pdf-1-good.png" size="212096" author="tilman" created="Thu, 23 Jan 2014 06:45:49 +0000"/>
                            <attachment id="12624585" name="asy-gouraud.pdf-1-trunk.png" size="10740" author="tilman" created="Thu, 23 Jan 2014 06:40:06 +0000"/>
                            <attachment id="12624832" name="tracemonkey.pdf" size="1016315" author="jahewson" created="Thu, 23 Jan 2014 17:27:24 +0000"/>
                            <attachment id="12624856" name="tracemonkey.pdf-2.png" size="989068" author="tilman" created="Thu, 23 Jan 2014 18:22:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369400</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ro2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369703</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>