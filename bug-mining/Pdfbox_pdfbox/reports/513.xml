<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:55:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2067] Error creating JPEG image with SMask</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2067</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;JPEGFactory.createFromImage() has problems with images with transparency (alpha data).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12712956">PDFBOX-2067</key>
            <summary>Error creating JPEG image with SMask</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="chupacabras">Juraj Lonc</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 May 2014 21:47:15 +0000</created>
                <updated>Thu, 17 Mar 2016 19:08:22 +0000</updated>
                            <resolved>Sat, 17 May 2014 12:35:34 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13992268" author="chupacabras" created="Wed, 7 May 2014 21:48:36 +0000"  >&lt;p&gt;this fix should do the job&lt;/p&gt;</comment>
                            <comment id="13992343" author="tilman" created="Wed, 7 May 2014 23:13:31 +0000"  >&lt;p&gt;Thanks, this makes sense, fixed in rev 1593157.&lt;/p&gt;

&lt;p&gt;What happened? Did the PDF just look weird, or did you get an exception when reading it? I&apos;m asking because I want to create a test too.&lt;/p&gt;</comment>
                            <comment id="13992498" author="tilman" created="Thu, 8 May 2014 04:32:38 +0000"  >&lt;p&gt;It is more complex... I gave up on that one in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1969&quot; title=&quot;JPEGFactory bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1969&quot;&gt;&lt;del&gt;PDFBOX-1969&lt;/del&gt;&lt;/a&gt; but since I solved it for lossless images, I will do so here.&lt;/p&gt;</comment>
                            <comment id="13992521" author="tilman" created="Thu, 8 May 2014 05:27:22 +0000"  >&lt;p&gt;Fixed for the trunk including a (previously disabled) test in rev 1593182. Please give feedback whether it works for you. Next thing to do is the 1.8 branch.&lt;/p&gt;</comment>
                            <comment id="13992584" author="chupacabras" created="Thu, 8 May 2014 08:01:09 +0000"  >&lt;p&gt;My problem was, that I was adding some images and then reading xobjects from page&apos;s resources. This gave me an exception:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.ClassCastException: java.awt.image.DataBufferInt cannot be cast to java.awt.image.DataBufferByte&lt;br/&gt;
	at org.apache.pdfbox.filter.DCTFilter.decode(DCTFilter.java:124)&lt;br/&gt;
	at org.apache.pdfbox.filter.Filter.decode(Filter.java:58)&lt;br/&gt;
	at org.apache.pdfbox.cos.COSStream.doDecode(COSStream.java:337)&lt;br/&gt;
	at org.apache.pdfbox.cos.COSStream.doDecode(COSStream.java:278)&lt;br/&gt;
	at org.apache.pdfbox.cos.COSStream.getDecodeResult(COSStream.java:235)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject.&amp;lt;init&amp;gt;(PDImageXObject.java:94)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.graphics.PDXObject.createXObject(PDXObject.java:65)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDResources.getXObjects(PDResources.java:247)&lt;/p&gt;

&lt;p&gt;It took me a half day to track the cause down to that single line &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
But I like brain teasers &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13992933" author="tilman" created="Thu, 8 May 2014 17:07:54 +0000"  >&lt;p&gt;Added a test for TYPE_4BYTE_ABGR in rev 1593333 for the trunk.&lt;/p&gt;</comment>
                            <comment id="13993001" author="tilman" created="Thu, 8 May 2014 18:36:40 +0000"  >&lt;p&gt;Added tests in the 1.8 branch in rev 1593370.&lt;/p&gt;</comment>
                            <comment id="13993095" author="tilman" created="Thu, 8 May 2014 20:52:43 +0000"  >&lt;p&gt;I added code to check that the masks have a certain amount of different colors - this way we can detect if a mask is black after a modification. I can&apos;t check for identity between the alpha values I set in the test and the values within a BufferedImage.TYPE_BYTE_GRAY because the raster values and the RGB values are not identical, the RGB values are calculated by java somehow. This was done in rev 1593414 for the trunk and rev 1593416 for the 1.8 branch.&lt;/p&gt;</comment>
                            <comment id="13993982" author="tilman" created="Fri, 9 May 2014 22:16:02 +0000"  >&lt;p&gt;I added code to throw an exception for BITMASK transparency (see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2057&quot; title=&quot;Importing BufferedImage into PDPixelMap is broken in 1.8.5&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2057&quot;&gt;&lt;del&gt;PDFBOX-2057&lt;/del&gt;&lt;/a&gt;) because it makes no sense to encode a binary mask in jpeg. I moved getAlphaImage() up one level because it is only used for jpeg; I optimized getColorImage() with ColorConvertOp instead of an xy-loop. All in rev 1593630 for the trunk.&lt;/p&gt;</comment>
                            <comment id="13994265" author="tilman" created="Sat, 10 May 2014 17:22:40 +0000"  >&lt;p&gt;Removed some duplicate tests in rev 1593709 for the trunk.&lt;/p&gt;</comment>
                            <comment id="13994278" author="tilman" created="Sat, 10 May 2014 18:54:43 +0000"  >&lt;p&gt;added throw exception for BITMASK transparent images in 1.8 branch in rev 1593713 (see above for the &quot;why&quot;).&lt;/p&gt;</comment>
                            <comment id="14003634" author="tilman" created="Tue, 20 May 2014 17:02:47 +0000"  >&lt;p&gt;Added creation of PDFs for some of the tests in rev 1596314.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12712190">PDFBOX-2057</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12699526">PDFBOX-1969</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12643853" name="PDFBOX-2067_JPEGFactory.diff" size="534" author="chupacabras" created="Wed, 7 May 2014 21:48:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391272</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ve13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391492</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>