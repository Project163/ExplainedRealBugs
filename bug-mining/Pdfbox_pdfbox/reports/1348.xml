<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:02:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3154] PDDocumentCatalog.getDocumentCatalog().getPages().getCount() returns 0 - first page is -1</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3154</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The attached PDF opens fine in the readers I have checked, but PDFBox has some issues with it. It apparently has 0 pages, but it is possible to get the first page by asking for page number -1.&lt;/p&gt;

&lt;p&gt;Code:&lt;/p&gt;

&lt;p&gt;       PDDocument pdDocument = PDDocument.load(inputStream);&lt;br/&gt;
       int pages = pdDocument.getDocumentCatalog().getPages().getCount();&lt;br/&gt;
       //pages == 0&lt;br/&gt;
       PDPage page = pdDocument.getDocumentCatalog().getPages().get(-1);&lt;br/&gt;
   //page != null&lt;/p&gt;

&lt;p&gt;This behaviour exists on version 2.0.0.rc2 and on trunk.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12919626">PDFBOX-3154</key>
            <summary>PDDocumentCatalog.getDocumentCatalog().getPages().getCount() returns 0 - first page is -1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jahewson">John Hewson</assignee>
                                    <reporter username="aleksabl">Aleksander Blomsk&#248;ld</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Dec 2015 09:43:30 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:10 +0000</updated>
                            <resolved>Fri, 11 Dec 2015 18:43:48 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15045238" author="tilman" created="Mon, 7 Dec 2015 17:00:55 +0000"  >&lt;p&gt;That file is an amazing mess:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;%PDF-1.4
%&#226;&#227;&#207;&#211;
%PDF-1.4
%&#226;&#227;&#207;&#211;
1 0 obj
...
endobj
2 0 obj
...
endstream
endobj
1 0 obj
...
endobj
2 0 obj
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I wonder if two threads were writing into the file at the same time. Did you create that one yourself?&lt;/p&gt;</comment>
                            <comment id="15045346" author="aleksabl" created="Mon, 7 Dec 2015 17:57:14 +0000"  >&lt;p&gt;No, I haven&apos;t created it myself. It&apos;s from a Norwegian netshop (&lt;a href=&quot;http://siba.no&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://siba.no&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="15053144" author="jahewson" created="Fri, 11 Dec 2015 18:26:14 +0000"  >&lt;p&gt;In this file the pages tree is in fact a page dictionary. Surprisingly, every PDF viewer I have tolerates this.&lt;/p&gt;</comment>
                            <comment id="15053154" author="jahewson" created="Fri, 11 Dec 2015 18:30:05 +0000"  >&lt;p&gt;It doesn&apos;t make any difference, but just so that you know, your sample code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDDocument pdDocument = PDDocument.load(inputStream);
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; pages = pdDocument.getDocumentCatalog().getPages().getCount();
PDPage page = pdDocument.getDocumentCatalog().getPages().get(-1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can be simplified to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDDocument pdDocument = PDDocument.load(inputStream);
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; pages = pdDocument.getNumberOfPages();
PDPage page = pdDocument.getPage(-1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15053175" author="jira-bot" created="Fri, 11 Dec 2015 18:41:28 +0000"  >&lt;p&gt;Commit 1719489 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1719489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1719489&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3154&quot; title=&quot;PDDocumentCatalog.getDocumentCatalog().getPages().getCount() returns 0 - first page is -1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3154&quot;&gt;&lt;del&gt;PDFBOX-3154&lt;/del&gt;&lt;/a&gt;: repair bad single-page page trees&lt;/p&gt;</comment>
                            <comment id="15053182" author="jahewson" created="Fri, 11 Dec 2015 18:43:42 +0000"  >&lt;p&gt;Detecting and repairing the corrupt page tree turned out to be pretty simple for this case. Everything should now be working.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12776061" name="siba.pdf" size="14733" author="aleksabl" created="Mon, 7 Dec 2015 09:44:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pitz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>