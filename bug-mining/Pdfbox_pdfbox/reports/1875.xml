<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:06:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4002] Layer Utility - Text not being displayed when overlaying</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4002</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I&apos;ve had some problems with the layer utility when trying to overlay two PDFs. Normally it works fine, but I&apos;ve encountered a type of PDF file on which it doesn&apos;t work properly. &lt;br/&gt;
Text elements are not being displayed (it can be selected, but it looks to be transparent), but images are.&lt;br/&gt;
I&apos;ve stripped down my code to the bare minimum and produced a maven project with a command line and provided some examples for the base, the overlay and the output I get.&lt;br/&gt;
I&apos;ve attached all below.&lt;br/&gt;
The usage for the command line is as follows:&lt;br/&gt;
java -jar Overlayer-1.0.jar -basePdf base.pdf -overlayPdf overlay.pdf -outPdf out.pdf -layerName overlay&lt;/p&gt;

&lt;p&gt;If I try to overlay the other way around, i.e. use the overlay.pdf in the -basePdf parameter and the base.pdf in the -overlayPdf parameter, it does do the overlaying, but obviously, that&apos;s not what I&apos;m looking for.&lt;/p&gt;

&lt;p&gt;Any hints as to why this might not work, or any particularities about the base PDF that might be causing this to be behaving differently would be helpful.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13117288">PDFBOX-4002</key>
            <summary>Layer Utility - Text not being displayed when overlaying</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="vmarchis">Vlad-Tudor Marchis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Nov 2017 14:33:13 +0000</created>
                <updated>Sat, 24 Mar 2018 09:41:35 +0000</updated>
                            <resolved>Sat, 11 Nov 2017 12:34:54 +0000</resolved>
                                    <version>2.0.8</version>
                                    <fixVersion>2.0.9</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16245950" author="tilman" created="Thu, 9 Nov 2017 16:22:47 +0000"  >&lt;p&gt;Please mention the pdfbox version.&lt;/p&gt;

&lt;p&gt;The cause of your problem: the text rendering mode isn&apos;t reset, it is stuck in mode 3 which is invisible.&lt;/p&gt;</comment>
                            <comment id="16245989" author="vmarchis" created="Thu, 9 Nov 2017 16:41:19 +0000"  >&lt;p&gt;Happened for me with 2.0.8, but also tried the latest trunk from github. So, the base PDF must have set the text rendering to mode 3 and when I apply the overlay, the text there is rendered in the same way? Can you point me to the method that resets that?&lt;/p&gt;</comment>
                            <comment id="16246046" author="vmarchis" created="Thu, 9 Nov 2017 17:03:56 +0000"  >&lt;p&gt;Update, I have solved it by adding this line before drawing the string:&lt;br/&gt;
contentStream.appendRawCommands(&quot;0 Tr &quot;);&lt;/p&gt;

&lt;p&gt;Feel free to close the issue. Thank you for the tip&lt;/p&gt;</comment>
                            <comment id="16246116" author="tilman" created="Thu, 9 Nov 2017 17:32:21 +0000"  >&lt;p&gt;I&apos;l keep it open for now... I just wanted to get the version so that I don&apos;t have to investigate a solved bug. In theory there should have been q...Q around the existing content stream data but there wasn&apos;t.&lt;/p&gt;</comment>
                            <comment id="16247827" author="tilman" created="Fri, 10 Nov 2017 17:41:20 +0000"  >&lt;p&gt;The q..Q wrap is done with the Overlay class, but not with LayerUtility class. This is available optionally with the call &lt;tt&gt;wrapInSaveRestore&lt;/tt&gt;. But this is obviously a pitfall so I&apos;ll deprecate that call and make it automatically. Please use that call until 2.0.9 and remove it after that. Add this on line 68:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
layerUtility.wrapInSaveRestore(inDocument.getPage(i));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16248492" author="tilman" created="Sat, 11 Nov 2017 12:32:21 +0000"  >&lt;p&gt;Just after writing the above I realized that it could be that people create several forms, so it wouldn&apos;t make sense to do the wrap each time. So I won&apos;t change the code but improve the documentation instead.&lt;/p&gt;</comment>
                            <comment id="16248494" author="jira-bot" created="Sat, 11 Nov 2017 12:34:21 +0000"  >&lt;p&gt;Commit 1814945 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1814945&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1814945&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4002&quot; title=&quot;Layer Utility - Text not being displayed when overlaying&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4002&quot;&gt;&lt;del&gt;PDFBOX-4002&lt;/del&gt;&lt;/a&gt;: improve javadoc with reference to wrapInSaveRestore()&lt;/p&gt;</comment>
                            <comment id="16248495" author="jira-bot" created="Sat, 11 Nov 2017 12:34:26 +0000"  >&lt;p&gt;Commit 1814946 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1814946&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1814946&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4002&quot; title=&quot;Layer Utility - Text not being displayed when overlaying&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4002&quot;&gt;&lt;del&gt;PDFBOX-4002&lt;/del&gt;&lt;/a&gt;: improve javadoc with reference to wrapInSaveRestore()&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12896880" name="Overlayer.zip" size="4392" author="vmarchis" created="Thu, 9 Nov 2017 14:27:07 +0000"/>
                            <attachment id="12896879" name="base.pdf" size="198985" author="vmarchis" created="Thu, 9 Nov 2017 14:27:20 +0000"/>
                            <attachment id="12896877" name="out.pdf" size="215482" author="vmarchis" created="Thu, 9 Nov 2017 14:28:34 +0000"/>
                            <attachment id="12896878" name="overlay.pdf" size="15309" author="vmarchis" created="Thu, 9 Nov 2017 14:27:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mlh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>