<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:59:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2653] Image extraction fails with attached PDF</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2653</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;ExtractImages failed with the following exception:&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.graphics.xobject.PDCcitt$TiffWrapper.buildHeader(PDCcitt.java:651)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.graphics.xobject.PDCcitt$TiffWrapper.&amp;lt;init&amp;gt;(PDCcitt.java:497)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.graphics.xobject.PDCcitt$TiffWrapper.&amp;lt;init&amp;gt;(PDCcitt.java:488)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.graphics.xobject.PDCcitt.write2OutputStream(PDCcitt.java:237)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.graphics.xobject.PDXObjectImage.write2file(PDXObjectImage.java:265)&lt;br/&gt;
	at org.apache.pdfbox.ExtractImages.processResources(ExtractImages.java:255)&lt;br/&gt;
	at org.apache.pdfbox.ExtractImages.extractImages(ExtractImages.java:180)&lt;br/&gt;
	at org.apache.pdfbox.ExtractImages.main(ExtractImages.java:80)&lt;br/&gt;
	at org.apache.pdfbox.PDFBox.main(PDFBox.java:62)&lt;/p&gt;</description>
                <environment>LinuxMint 1.7 64 bits</environment>
        <key id="12771584">PDFBOX-2653</key>
            <summary>Image extraction fails with attached PDF</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="monkiki">Paco Avila</reporter>
                        <labels>
                            <label>CCITTFaxDecode</label>
                    </labels>
                <created>Sun, 1 Feb 2015 08:46:55 +0000</created>
                <updated>Sat, 28 Mar 2015 14:10:33 +0000</updated>
                            <resolved>Wed, 18 Feb 2015 20:06:27 +0000</resolved>
                                    <version>1.8.8</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.9</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14300116" author="monkiki" created="Sun, 1 Feb 2015 08:48:01 +0000"  >&lt;p&gt;This PDF file has an TIFF image and fails.&lt;/p&gt;</comment>
                            <comment id="14300274" author="jira-bot" created="Sun, 1 Feb 2015 17:58:06 +0000"  >&lt;p&gt;Commit 1656342 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1656342&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1656342&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2653&quot; title=&quot;Image extraction fails with attached PDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2653&quot;&gt;&lt;del&gt;PDFBOX-2653&lt;/del&gt;&lt;/a&gt;: fix bug related to missing DECODE_PARMS&lt;/p&gt;</comment>
                            <comment id="14300277" author="jira-bot" created="Sun, 1 Feb 2015 18:00:44 +0000"  >&lt;p&gt;Commit 1656343 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1656343&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1656343&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2653&quot; title=&quot;Image extraction fails with attached PDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2653&quot;&gt;&lt;del&gt;PDFBOX-2653&lt;/del&gt;&lt;/a&gt;: fix bug related to missing DECODE_PARMS&lt;/p&gt;</comment>
                            <comment id="14300279" author="tilman" created="Sun, 1 Feb 2015 18:02:48 +0000"  >&lt;p&gt;Thanks for finding this. You can test with a snapshot version within a few hours:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox/1.8.9-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox/1.8.9-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14300923" author="monkiki" created="Mon, 2 Feb 2015 06:30:57 +0000"  >&lt;p&gt;I&apos;ve tried the snapshot and the exception is not thrown, but the extracted image has no content.&lt;/p&gt;</comment>
                            <comment id="14300974" author="tilman" created="Mon, 2 Feb 2015 07:36:43 +0000"  >&lt;p&gt;There&apos;s also an NPE when viewing the PDF in 1.8 only, the problem is similar to the one I fixed.&lt;/p&gt;

&lt;p&gt;About the extracted file: it is blank with IrfanView. It is not blank with other viewers. So I&apos;m wondering whether IrfanView is wrong, or whether all the other viewers maybe fix some flaw in the image.&lt;/p&gt;</comment>
                            <comment id="14300995" author="jira-bot" created="Mon, 2 Feb 2015 08:23:58 +0000"  >&lt;p&gt;Commit 1656405 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1656405&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1656405&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2653&quot; title=&quot;Image extraction fails with attached PDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2653&quot;&gt;&lt;del&gt;PDFBOX-2653&lt;/del&gt;&lt;/a&gt;: fix bug related to missing DECODE_PARMS&lt;/p&gt;</comment>
                            <comment id="14301006" author="jira-bot" created="Mon, 2 Feb 2015 08:39:14 +0000"  >&lt;p&gt;Commit 1656409 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1656409&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1656409&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2653&quot; title=&quot;Image extraction fails with attached PDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2653&quot;&gt;&lt;del&gt;PDFBOX-2653&lt;/del&gt;&lt;/a&gt;: fix bug related to missing DECODE_PARMS&lt;/p&gt;</comment>
                            <comment id="14301007" author="tilman" created="Mon, 2 Feb 2015 08:39:15 +0000"  >&lt;p&gt;The last two commits only fix the NPE I get when viewing the file.&lt;/p&gt;</comment>
                            <comment id="14301112" author="monkiki" created="Mon, 2 Feb 2015 10:17:01 +0000"  >&lt;p&gt;In Linux, with default GNOME image viewer and GIMP also appears empty, but in this case a warning is shown: Premature EOL at line 0 of strip 0 (got 0, expected 1728)&lt;/p&gt;</comment>
                            <comment id="14301487" author="tilman" created="Mon, 2 Feb 2015 17:29:49 +0000"  >&lt;p&gt;Also with ImageMagick: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;convert.exe: Premature EOL at line 0 of strip 0 (got 0, expected 1728). `Fax3Decode1D&apos; @ warning/tiff.c/TIFFWarnings/857.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;ve also e-mailed the author of IrfanView, but like ImageMagick, he uses libtiff.&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://www.ietf.org/rfc/rfc2301.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.ietf.org/rfc/rfc2301.txt&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;In conventional fax, an MH-compressed fax data stream for a page
consists of the following sequence:

   EOL, compressed data (first line), EOL, compressed data, ... ,
   EOL, compressed data (last line), RTC (6 consecutive EOL codes)

Baseline TIFF does not use EOL codes or Return to Control (RTC)
sequences for MH-compressed data. However, the TIFF extension field
T4Options used in this specification for MH compression (Compression
= 3) requires EOLs.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However the above is the specification of TIFF-FX. In TIFF&lt;br/&gt;
&lt;a href=&quot;https://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf&lt;/a&gt;&lt;br/&gt;
&quot;No EOL code words are used&quot;&lt;/p&gt;

&lt;p&gt;I&apos;ve also opened a &lt;a href=&quot;http://bugzilla.maptools.org/show_bug.cgi?id=2502&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;bug report at libtiff&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14303072" author="tilman" created="Tue, 3 Feb 2015 10:55:33 +0000"  >&lt;p&gt;Irfan Skiljan answered me and said he also gets the error message I mentioned, but displays the data that he gets (which is none). And that newer versions of libtiff are less forgiving on bad tiffs.&lt;/p&gt;

&lt;p&gt;Workaround: do ximage.getRGBImage() with the PDXObjectImage image, and then save that one in the format you want with ImageIOUtil.* utilities.&lt;/p&gt;</comment>
                            <comment id="14303124" author="monkiki" created="Tue, 3 Feb 2015 11:42:42 +0000"  >&lt;p&gt;Thanks for the workaround, but also fails:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.graphics.xobject.PDCcitt.getRGBImage(PDCcitt.java:152)&lt;/p&gt;</comment>
                            <comment id="14303253" author="tilman" created="Tue, 3 Feb 2015 13:31:16 +0000"  >&lt;p&gt;Please download the latest snapshot again, this one was fixed in rev 1656409, there is no code at PDCcitt.java:152.&lt;/p&gt;</comment>
                            <comment id="14304980" author="monkiki" created="Wed, 4 Feb 2015 11:34:54 +0000"  >&lt;p&gt;Yes, it works! Thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14324843" author="tilman" created="Tue, 17 Feb 2015 20:35:51 +0000"  >&lt;p&gt;The problem of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=monkiki&quot; class=&quot;user-hover&quot; rel=&quot;monkiki&quot;&gt;monkiki&lt;/a&gt; is solved, but that is just a workaround. I propose to get rid of TIFFInputStream and save with ImageIOUtil.* instead. The CCITT images don&apos;t have any meta info.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;in 2.0 only?&lt;/li&gt;
	&lt;li&gt;in 1.8 too? It is not the API, it is only an example&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Plus: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;less code&lt;/li&gt;
	&lt;li&gt;won&apos;t fail for the rare case that is the core of this issue&lt;/li&gt;
	&lt;li&gt;will always produce G4 compressed b/w TIFFs&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Minus:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;needs jai_imageio.jar&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14325717" author="lehmi" created="Wed, 18 Feb 2015 11:04:37 +0000"  >&lt;p&gt;I support to remove TIFFInputSTream as we are already using ImageIO. IMHO we should limit the changes to 2.0. BTW, ExtractImages isn&apos;t just an example but an &quot;official&quot; tool.&lt;/p&gt;</comment>
                            <comment id="14325722" author="msahyoun" created="Wed, 18 Feb 2015 11:16:19 +0000"  >&lt;p&gt;+1 to remove it&lt;/p&gt;</comment>
                            <comment id="14326469" author="jira-bot" created="Wed, 18 Feb 2015 20:02:21 +0000"  >&lt;p&gt;Commit 1660713 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1660713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1660713&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2653&quot; title=&quot;Image extraction fails with attached PDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2653&quot;&gt;&lt;del&gt;PDFBOX-2653&lt;/del&gt;&lt;/a&gt;: +3 consensus to remove TIFFInputStream as we are already using ImageIO&lt;/p&gt;</comment>
                            <comment id="14326475" author="jira-bot" created="Wed, 18 Feb 2015 20:04:53 +0000"  >&lt;p&gt;Commit 1660716 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1660716&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1660716&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2653&quot; title=&quot;Image extraction fails with attached PDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2653&quot;&gt;&lt;del&gt;PDFBOX-2653&lt;/del&gt;&lt;/a&gt;: +3 consensus to remove TIFFInputStream as we are already using ImageIO&lt;/p&gt;</comment>
                            <comment id="14326477" author="tilman" created="Wed, 18 Feb 2015 20:06:27 +0000"  >&lt;p&gt;Setting to resolved for both 1.8.9 and 2.0, as other errors were fixed for 1.8.9.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12695940" name="PDFBOX-2653-1.tiff" size="96767" author="tilman" created="Mon, 2 Feb 2015 17:30:30 +0000"/>
                            <attachment id="12695799" name="image.pdf" size="97559" author="monkiki" created="Sun, 1 Feb 2015 08:48:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i251un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>