<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:58:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2526] Arial black not black</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2526</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;java -jar ~/pdf-box-svn/app/target/pdfbox-app-2.0.0-SNAPSHOT.jar PDFToImage sample_fonts_solidconvertor.pdf&lt;/p&gt;</description>
                <environment></environment>
        <key id="12758228">PDFBOX-2526</key>
            <summary>Arial black not black</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ssteiner">Simon Steiner</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Nov 2014 14:30:15 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:42 +0000</updated>
                            <resolved>Thu, 27 Nov 2014 20:16:21 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14227703" author="ssteiner1" created="Thu, 27 Nov 2014 14:33:23 +0000"  >&lt;p&gt;Pdfbox should say what fallback font is being used&lt;/p&gt;</comment>
                            <comment id="14227852" author="jira-bot" created="Thu, 27 Nov 2014 17:37:18 +0000"  >&lt;p&gt;Commit 1642192 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642192&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642192&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2526&quot; title=&quot;Arial black not black&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2526&quot;&gt;&lt;del&gt;PDFBOX-2526&lt;/del&gt;&lt;/a&gt;: better fallback message&lt;/p&gt;</comment>
                            <comment id="14227854" author="jira-bot" created="Thu, 27 Nov 2014 17:41:35 +0000"  >&lt;p&gt;Commit 1642193 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642193&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2526&quot; title=&quot;Arial black not black&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2526&quot;&gt;&lt;del&gt;PDFBOX-2526&lt;/del&gt;&lt;/a&gt;: better fallback message&lt;/p&gt;</comment>
                            <comment id="14227855" author="jira-bot" created="Thu, 27 Nov 2014 17:42:23 +0000"  >&lt;p&gt;Commit 1642194 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642194&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642194&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2526&quot; title=&quot;Arial black not black&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2526&quot;&gt;&lt;del&gt;PDFBOX-2526&lt;/del&gt;&lt;/a&gt;: better fallback message&lt;/p&gt;</comment>
                            <comment id="14227856" author="jira-bot" created="Thu, 27 Nov 2014 17:42:46 +0000"  >&lt;p&gt;Commit 1642195 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642195&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642195&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2526&quot; title=&quot;Arial black not black&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2526&quot;&gt;&lt;del&gt;PDFBOX-2526&lt;/del&gt;&lt;/a&gt;: better fallback message&lt;/p&gt;</comment>
                            <comment id="14227870" author="tilman" created="Thu, 27 Nov 2014 18:01:24 +0000"  >&lt;p&gt;I have improved the fallback messages.&lt;/p&gt;

&lt;p&gt;I&apos;m also wondering why the Arial Black font that is in my font directory isn&apos;t used. &lt;/p&gt;</comment>
                            <comment id="14227905" author="jahewson" created="Thu, 27 Nov 2014 19:16:15 +0000"  >&lt;p&gt;You can dump the list of fonts which PDFBox knows about with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(ExternalFonts.getProvider().toDebugString());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This includes the line:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;TTF: Arial-Black: /Library/Fonts/Arial Black.ttf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So the PostScript name of the font is &lt;tt&gt;Arial-Black&lt;/tt&gt; but in the PDF file it is given as &lt;tt&gt;ArialBlack&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14227927" author="tilman" created="Thu, 27 Nov 2014 19:34:53 +0000"  >&lt;p&gt;Should we add&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;substitutes.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;ArialBlack&quot;&lt;/span&gt;, Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;Arial-Black&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to ExternalFonts.java?&lt;/p&gt;</comment>
                            <comment id="14227937" author="jahewson" created="Thu, 27 Nov 2014 19:57:22 +0000"  >&lt;p&gt;I don&apos;t think so, because it&apos;s not a standard 14 font, or a font which ships with Adobe Reader. We&apos;re  still going to have the problem with any other fonts which contains the same kind of naming error. I&apos;d rather improve our substitution mechanism to be aware of this issue.&lt;/p&gt;</comment>
                            <comment id="14227938" author="jira-bot" created="Thu, 27 Nov 2014 20:10:18 +0000"  >&lt;p&gt;Commit 1642226 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642226&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642226&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2526&quot; title=&quot;Arial black not black&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2526&quot;&gt;&lt;del&gt;PDFBOX-2526&lt;/del&gt;&lt;/a&gt;: Allow the FontProvider to perform reverse substitutions.&lt;/p&gt;</comment>
                            <comment id="14227942" author="jahewson" created="Thu, 27 Nov 2014 20:16:11 +0000"  >&lt;p&gt;The problem was that &quot;Arial-Black&quot; is the name of the font in the TTF file, and we can&apos;t map backwards from the name &quot;ArialBlack&quot; in the PDF to know where to insert the hyphen. Because this isn&apos;t a standard 14 / built-in font, we don&apos;t really want to add a manual substitution, because it won&apos;t solve the problem in general for other fonts.&lt;/p&gt;

&lt;p&gt;To solve this, I&apos;ve modified the FontProvider to perform &quot;reverse substitution&quot;, because only the FontProvider is in a position to know that the font on disk is called &quot;Arial-Black&quot; and can simply remove the comma to get the name &quot;ArialBlack&quot; which was specified in the PDF. Note that we aim to keep as much substitution logic as possible away from the font provider, but this logic must live within the provider. I&apos;ve changed FontProvider from an interface to an abstract class and placed the logic inside final protected methods so that subclasses have easy access to the reverse substitutions but the can&apos;t mess with the logic. This will allow us to add further reverse substitutions in future PDFBox releases without breaking anybody&apos;s custom FontProvider subclasses.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12684073" name="sample_fonts_solidconvertor.pdf" size="57107" author="ssteiner" created="Thu, 27 Nov 2014 14:31:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22uov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>