<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:55:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1147] Printing a PDF with an image inside show black.</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1147</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I have a PDF with a image inside.&lt;br/&gt;
When i print the PDF the image show corrupted similar a black area.&lt;br/&gt;
In the java console:&lt;/p&gt;

&lt;p&gt;25-oct-2011 13:12:39 org.apache.pdfbox.pdmodel.graphics.xobject.PDPixelMap getRGBImage&lt;br/&gt;
GRAVE: java.io.StreamCorruptedException: Error: data is null&lt;br/&gt;
java.io.StreamCorruptedException: Error: data is null&lt;br/&gt;
	at org.apache.pdfbox.filter.LZWFilter.decode(LZWFilter.java:82)&lt;br/&gt;
	at org.apache.pdfbox.cos.COSStream.doDecode(COSStream.java:301)&lt;br/&gt;
	at org.apache.pdfbox.cos.COSStream.doDecode(COSStream.java:229)&lt;/p&gt;</description>
                <environment>Windows XP SP3 32 bit &lt;br/&gt;
Java 1.6.0_27</environment>
        <key id="12528652">PDFBOX-1147</key>
            <summary>Printing a PDF with an image inside show black.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="rafher">Rafa Hernandez</reporter>
                        <labels>
                            <label>LZW</label>
                            <label>image</label>
                            <label>print</label>
                    </labels>
                <created>Tue, 25 Oct 2011 11:11:29 +0000</created>
                <updated>Fri, 2 May 2014 06:12:06 +0000</updated>
                            <resolved>Tue, 25 Feb 2014 20:07:03 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.8.5</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13134937" author="rafher" created="Tue, 25 Oct 2011 11:12:54 +0000"  >&lt;p&gt;This is an example PDF file.&lt;/p&gt;</comment>
                            <comment id="13136786" author="lehmi" created="Thu, 27 Oct 2011 05:28:36 +0000"  >&lt;p&gt;This issue seems to address the same problem then &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-205&quot; title=&quot;Miscellaneous errors on valid files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-205&quot;&gt;&lt;del&gt;PDFBOX-205&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13136968" author="rafher" created="Thu, 27 Oct 2011 11:23:59 +0000"  >&lt;p&gt;Ok. Seems the same problem.&lt;br/&gt;
Is there any solution?&lt;br/&gt;
Thx&lt;/p&gt;</comment>
                            <comment id="13464789" author="cggonzalez" created="Thu, 27 Sep 2012 14:47:51 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rafher&quot; class=&quot;user-hover&quot; rel=&quot;rafher&quot;&gt;rafher&lt;/a&gt;, I have the same problem... Do you have a solution for this ticket?&lt;/p&gt;

&lt;p&gt;Thx.&lt;/p&gt;</comment>
                            <comment id="13464799" author="rafher" created="Thu, 27 Sep 2012 15:04:11 +0000"  >&lt;p&gt;I&apos;m sorry Carlos.&lt;br/&gt;
We did not find any solution.&lt;br/&gt;
We are looking for an alternative to the problem we had.&lt;br/&gt;
Rafa&lt;/p&gt;</comment>
                            <comment id="13606650" author="pookieman" created="Tue, 19 Mar 2013 18:40:42 +0000"  >&lt;p&gt;Hi, was there any more progress made on this issue, I am similarly affected.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="13606851" author="msahyoun" created="Tue, 19 Mar 2013 21:27:30 +0000"  >&lt;p&gt;Hi Jinder,&lt;br/&gt;
could you attach a sample file to the ticket so we can see if it&apos;s the same issue?&lt;br/&gt;
Kind regards&lt;br/&gt;
Maruan&lt;/p&gt;</comment>
                            <comment id="13606858" author="pookieman" created="Tue, 19 Mar 2013 21:31:52 +0000"  >&lt;p&gt;Love to.. but the documents I have are confidential.. I&apos;ll try and see one that might be OK to attach.&lt;/p&gt;</comment>
                            <comment id="13909916" author="tilman" created="Sun, 23 Feb 2014 22:03:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rafher&quot; class=&quot;user-hover&quot; rel=&quot;rafher&quot;&gt;rafher&lt;/a&gt; If you created this file yourself, can you change an option? I notice that it is created for PDF 1.1. I wonder what happens if you try creating for a more current version.&lt;/p&gt;

&lt;p&gt;To all the other people having the same problem - can you build a version of PDFBOX from source? If yes, get the file LZWFilter.java, search for the line &quot;throw new StreamCorruptedException&quot; and change it to&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamCorruptedException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error: data is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + nextCommand + &lt;span class=&quot;code-quote&quot;&gt;&quot;; nextCode = &quot;&lt;/span&gt; + dic.getNextCode());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have a theory I&apos;d like to confirm or falsify.&lt;/p&gt;</comment>
                            <comment id="13910611" author="jahewson" created="Mon, 24 Feb 2014 18:26:54 +0000"  >&lt;p&gt;The posted PDF file was created with Oracle Reports according to its metadata.&lt;/p&gt;</comment>
                            <comment id="13910842" author="tilman" created="Mon, 24 Feb 2014 21:30:25 +0000"  >&lt;p&gt;The file is rendered by the Adobe reader, by pdf.js and by two other products without any warning. I haven&apos;t been able to understand the implementation of LZWFilter. I tried my own until I was able to decode the file. And the file of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-205&quot; title=&quot;Miscellaneous errors on valid files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-205&quot;&gt;&lt;del&gt;PDFBOX-205&lt;/del&gt;&lt;/a&gt;. There are two problems with the solution:&lt;br/&gt;
1) I don&apos;t have any other files to test&lt;br/&gt;
2) The test no longer passes. So either the current encoder is broken as well, or my solution is broken.&lt;/p&gt;</comment>
                            <comment id="13911937" author="tilman" created="Tue, 25 Feb 2014 19:33:19 +0000"  >&lt;p&gt;I rewrote the LZW encoder too. Surprise: when decoding the stream and encoding it myself, I got a smaller file than before. (I decoded it again to check). I attach the decoded and the encoded streams, if there&apos;s a need in the future. I found three more test files (hexnumberproblem.pdf, 205-T05140.pdf and welcome.pdf) with LZW encoding in the jar files that were removed from the project and they all pass.&lt;/p&gt;

&lt;p&gt;I am also removing 4 files that were only used by the LZW filter and won&apos;t be needed anymore.&lt;/p&gt;</comment>
                            <comment id="13911984" author="tilman" created="Tue, 25 Feb 2014 20:07:03 +0000"  >&lt;p&gt;Fixed in rev 1571801 for the trunk and rev 1571806 for the 1.8 branch. &lt;/p&gt;

&lt;p&gt;Sorry that it took so long. Most of the time, these types of errors are the result of broken PDFs. I changed my mind after noticing that the pdf.js viewer could display it.&lt;/p&gt;</comment>
                            <comment id="13912056" author="tilman" created="Tue, 25 Feb 2014 21:04:49 +0000"  >&lt;p&gt;Rev. 1571822 for the 1.8 branch committed because of JDK5 incompatibility. (Array.copyof())&lt;/p&gt;</comment>
                            <comment id="13961542" author="tilman" created="Sun, 6 Apr 2014 22:01:19 +0000"  >&lt;p&gt;I sometimes got this exception with my modified version (that uses more test files), and it is always for one of the files with LZW encoding:&lt;/p&gt;

&lt;p&gt;Tests run: 80, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 30.082 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.pdfbox.util.TestRendering&lt;br/&gt;
render&lt;span class=&quot;error&quot;&gt;&amp;#91;PDFBOX-205-hexnumberproblem.pdf&amp;#93;&lt;/span&gt;(org.apache.pdfbox.util.TestRendering)  Time elapsed: 0.046 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
	at org.apache.pdfbox.filter.LZWFilter.decode(LZWFilter.java:84)&lt;br/&gt;
	at org.apache.pdfbox.filter.Filter.decode(Filter.java:58)&lt;br/&gt;
(...)&lt;br/&gt;
	at org.apache.pdfbox.util.TestRendering.render(TestRendering.java:78)&lt;/p&gt;

&lt;p&gt;After looking at TestRendering I realized that it is a race condition /  parallel problem because that test uses several threads. We&apos;re using only one instance of each filter type, so it was wrong to use a class variable. I&apos;ve modified this in rev 1585353 for the trunk and rev 1585354 for the 1.8 branch.&lt;/p&gt;</comment>
                            <comment id="13987395" author="lehmi" created="Fri, 2 May 2014 06:12:06 +0000"  >&lt;p&gt;Closed after releasing PDFBox 1.8.5&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12391239">PDFBOX-205</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12391239">PDFBOX-205</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12500650" name="p1logo.pdf" size="7305" author="rafher" created="Tue, 25 Oct 2011 11:12:54 +0000"/>
                            <attachment id="12630804" name="pdfbox-1147.pdf-1.png" size="218526" author="tilman" created="Mon, 24 Feb 2014 21:30:25 +0000"/>
                            <attachment id="12631017" name="stream.decoded" size="30000" author="tilman" created="Tue, 25 Feb 2014 19:33:19 +0000"/>
                            <attachment id="12631018" name="stream.lzw" size="920" author="tilman" created="Tue, 25 Feb 2014 19:33:19 +0000"/>
                            <attachment id="12631019" name="stream2.lzw" size="711" author="tilman" created="Tue, 25 Feb 2014 19:33:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214512</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14tzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236324</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>