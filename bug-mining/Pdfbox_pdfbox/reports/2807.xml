<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:13:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5639] Password protected PDF opens in GUI apps but PDFbox says invalid password</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5639</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I am using PDFbox to test whether a password is correct for a protected PDF before handling it with a different process. This is working for the vast majority of files I receive but from one particular source PDFbox reports an invalid password when the files can be opened without complaint in GUI applications (Adobe Reader et. al.).&lt;/p&gt;

&lt;p&gt;These files are created by scanning to PDF on Xerox MFDs and using the MFD&apos;s menus to add a password to the document. As luck would have it I have access to the same MFDs in my location and my files created using the same method are correctly read by PDFbox.&lt;/p&gt;

&lt;p&gt;The issue can be seen using the command line utilities and the same is seen on v2.0.29 and v3.0.0-beta1 (I am using the 2.0 series in the application):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#10095; java -jar pdfbox-app-2.0.29.jar Decrypt -password JUL2023rfi invalid_password.pdf
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.pdfbox.pdmodel.encryption.InvalidPasswordException: Cannot decrypt PDF, the password is incorrect
&#160; &#160; &#160; &#160; at org.apache.pdfbox.pdmodel.encryption.StandardSecurityHandler.prepareForDecryption(StandardSecurityHandler.java:284)
&#160; &#160; &#160; &#160; at org.apache.pdfbox.pdfparser.COSParser.prepareDecryption(COSParser.java:2992)
&#160; &#160; &#160; &#160; at org.apache.pdfbox.pdfparser.COSParser.retrieveTrailer(COSParser.java:285)
&#160; &#160; &#160; &#160; at org.apache.pdfbox.pdfparser.PDFParser.initialParse(PDFParser.java:173)
&#160; &#160; &#160; &#160; at org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:226)
&#160; &#160; &#160; &#160; at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1110)
&#160; &#160; &#160; &#160; at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1093)
&#160; &#160; &#160; &#160; at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1070)
&#160; &#160; &#160; &#160; at org.apache.pdfbox.tools.Decrypt.decrypt(Decrypt.java:143)
&#160; &#160; &#160; &#160; at org.apache.pdfbox.tools.Decrypt.main(Decrypt.java:65)
&#160; &#160; &#160; &#160; at org.apache.pdfbox.tools.PDFBox.main(PDFBox.java:52)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#10095; java -jar pdfbox-app-3.0.0-beta1.jar Decrypt -password JUL2023rfi -i invalid_password.pdf
Error decrypting document [InvalidPasswordException]: Cannot decrypt PDF, the password is incorrect&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;A sample file is attached, the password is JUL2023rfi&lt;/p&gt;</description>
                <environment>Java 17 on both Linux and Windows</environment>
        <key id="13544014">PDFBOX-5639</key>
            <summary>Password protected PDF opens in GUI apps but PDFbox says invalid password</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="steev46">Steve Davies</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jul 2023 18:10:11 +0000</created>
                <updated>Fri, 18 Aug 2023 05:46:11 +0000</updated>
                            <resolved>Thu, 20 Jul 2023 17:41:20 +0000</resolved>
                                    <version>2.0.29</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.30</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Crypto</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17744330" author="tilman" created="Tue, 18 Jul 2023 18:50:53 +0000"  >&lt;p&gt;Your file has R=5 and I tried generating an AESV3 encrypted file, that one has R=6. Our code covers R=5, but now I wonder whether it has ever worked.&lt;/p&gt;</comment>
                            <comment id="17744354" author="mkl" created="Tue, 18 Jul 2023 20:52:50 +0000"  >&lt;p&gt;R=5 was an Adobe first shot at AES256 which they defined in an Adobe extension to ISO 32000-1 and which in ISO 32000-2 has been deprecated. Before this example here I&apos;ve only seen R=5 being used in Adobe PDFs.&lt;/p&gt;

&lt;p&gt;Interestingly, this scanner has copied an Adobe error, too: It fills the &lt;b&gt;O&lt;/b&gt; and &lt;b&gt;U&lt;/b&gt; value (which are specified to be 48 bytes long) with zeros to 128 bytes. In case of R=6 PDFBox repairs such values and cuts off any bytes in excess of the specified ones (see the &lt;tt&gt;computeHash2A&lt;/tt&gt; method) but it doesn&apos;t do so for R=5. Maybe it suffices to cut down the &lt;b&gt;O&lt;/b&gt; and &lt;b&gt;U&lt;/b&gt; values to 48 bytes here, too...&lt;/p&gt;</comment>
                            <comment id="17744738" author="jira-bot" created="Wed, 19 Jul 2023 17:58:00 +0000"  >&lt;p&gt;Commit 1911141 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1911141&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1911141&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5639&quot; title=&quot;Password protected PDF opens in GUI apps but PDFbox says invalid password&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5639&quot;&gt;&lt;del&gt;PDFBOX-5639&lt;/del&gt;&lt;/a&gt;: Check for length like in computeHash2A, as suggested by mkl; DRY refactor&lt;/p&gt;</comment>
                            <comment id="17744740" author="jira-bot" created="Wed, 19 Jul 2023 17:58:04 +0000"  >&lt;p&gt;Commit 1911142 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1911142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1911142&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5639&quot; title=&quot;Password protected PDF opens in GUI apps but PDFbox says invalid password&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5639&quot;&gt;&lt;del&gt;PDFBOX-5639&lt;/del&gt;&lt;/a&gt;: Check for length like in computeHash2A, as suggested by mkl; DRY refactor&lt;/p&gt;</comment>
                            <comment id="17744742" author="tilman" created="Wed, 19 Jul 2023 18:01:42 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkl&quot; class=&quot;user-hover&quot; rel=&quot;mkl&quot;&gt;mkl&lt;/a&gt;! That was the exact problem.&lt;/p&gt;</comment>
                            <comment id="17744743" author="JIRAUSER301403" created="Wed, 19 Jul 2023 18:02:52 +0000"  >&lt;p&gt;I&apos;ll test this out on some other (confidential) documents I have locally and report back in ~24 hours.&lt;/p&gt;</comment>
                            <comment id="17744744" author="tilman" created="Wed, 19 Jul 2023 18:05:38 +0000"  >&lt;p&gt;Snapshot version will be available here soon&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.30-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.30-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17744988" author="JIRAUSER301403" created="Thu, 20 Jul 2023 09:21:48 +0000"  >&lt;p&gt;Tested using snapshot version from 19/07/2023, this version works for my purpose. Thanks for your work on this.&lt;/p&gt;</comment>
                            <comment id="17747784" author="jira-bot" created="Thu, 27 Jul 2023 06:18:29 +0000"  >&lt;p&gt;Commit 1911307 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1911307&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1911307&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5639&quot; title=&quot;Password protected PDF opens in GUI apps but PDFbox says invalid password&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5639&quot;&gt;&lt;del&gt;PDFBOX-5639&lt;/del&gt;&lt;/a&gt;: load test file&lt;/p&gt;</comment>
                            <comment id="17747785" author="jira-bot" created="Thu, 27 Jul 2023 06:19:27 +0000"  >&lt;p&gt;Commit 1911308 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1911308&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1911308&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5639&quot; title=&quot;Password protected PDF opens in GUI apps but PDFbox says invalid password&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5639&quot;&gt;&lt;del&gt;PDFBOX-5639&lt;/del&gt;&lt;/a&gt;: load test file&lt;/p&gt;</comment>
                            <comment id="17747787" author="jira-bot" created="Thu, 27 Jul 2023 06:20:19 +0000"  >&lt;p&gt;Commit 1911309 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1911309&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1911309&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5639&quot; title=&quot;Password protected PDF opens in GUI apps but PDFbox says invalid password&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5639&quot;&gt;&lt;del&gt;PDFBOX-5639&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;</comment>
                            <comment id="17747788" author="jira-bot" created="Thu, 27 Jul 2023 06:20:39 +0000"  >&lt;p&gt;Commit 1911310 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1911310&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1911310&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5639&quot; title=&quot;Password protected PDF opens in GUI apps but PDFbox says invalid password&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5639&quot;&gt;&lt;del&gt;PDFBOX-5639&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13061409" name="incorrect_password.pdf" size="20926" author="steev46" created="Tue, 18 Jul 2023 18:04:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://lists.apache.org/thread/l06fr9b85y379npxccz9jp6j1kowrw5m]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1j874:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>