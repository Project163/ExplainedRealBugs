<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:06:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3999] Merge failed to clone tags</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3999</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;After merging two tagged documents, closing the source document causes the destination document to be closed, which prevents it from being saved. The following code demonstrates the bug with the attached flattened government PDF file. The original is available &lt;a href=&quot;https://studentloans.gov/myDirectLoan/downloadForm.action?searchType=library&amp;amp;shortName=general&amp;amp;localeCode=en-us&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; if you need it.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testMerge() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    PDFMergerUtility pdfMergerUtility = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFMergerUtility();
    PDDocument src = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;GovFormPreFlattened.pdf&quot;&lt;/span&gt;));
    PDDocument dest = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;GovFormPreFlattened.pdf&quot;&lt;/span&gt;));
    pdfMergerUtility.appendDocument(dest, src);
    src.close(); &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we don&lt;span class=&quot;code-quote&quot;&gt;&apos;t close the src then we don&apos;&lt;/span&gt;t have an error
&lt;/span&gt;    dest.save(File.createTempFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;MergeIssue&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;.PDF&quot;&lt;/span&gt;));
    dest.close();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The issue is resolved with the attached patch.&lt;/p&gt;

&lt;p&gt;Also I removed the &quot;if (mergeStructTree)&quot; is because mergeStructTree is always true here because this code is already inside an &quot;if (mergeStructTree)&quot;.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13117061">PDFBOX-3999</key>
            <summary>Merge failed to clone tags</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="DavesPlanet">Dave Hill</reporter>
                        <labels>
                            <label>StructureTree</label>
                            <label>merge</label>
                    </labels>
                <created>Wed, 8 Nov 2017 18:38:33 +0000</created>
                <updated>Thu, 21 Jun 2018 20:27:53 +0000</updated>
                            <resolved>Fri, 20 Apr 2018 15:38:07 +0000</resolved>
                                    <version>2.0.8</version>
                                    <fixVersion>2.0.10</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16245992" author="tilman" created="Thu, 9 Nov 2017 16:42:26 +0000"  >&lt;p&gt;1)&lt;br/&gt;
Your patch breaks the result document.&lt;/p&gt;

&lt;p&gt;The pages of the result document have the object numbers 14..21.&lt;/p&gt;

&lt;p&gt;In the result document created with the modified PDFBox version, have a look at&lt;br/&gt;
&lt;tt&gt;Root/StructTreeRoot/ParentTree/Nums/[85]/Pg&lt;/tt&gt; with PDFDebugger.&lt;/p&gt;

&lt;p&gt;That is a page and has the object number 496. I suspect that this is a run away clone.&lt;/p&gt;

&lt;p&gt;Cloning is risky and may need some post processing: &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3972&quot; title=&quot;Incorrect page after merge for OpenAction with GoTo page destination&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3972&quot;&gt;&lt;del&gt;PDFBOX-3972&lt;/del&gt;&lt;/a&gt;. And it&apos;s not just pages, but all elements.&lt;/p&gt;

&lt;p&gt;With the existing code that does not happen, the object number is 18.&lt;/p&gt;

&lt;p&gt;I&apos;m sorry that I mentioned cloning myself in the SO issue and maybe drove you into a dead end. I don&apos;t know cloning is the solution or not. I have opened two new issues (&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4003&quot; title=&quot;Can&amp;#39;t retrieve number tree from structure tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4003&quot;&gt;&lt;del&gt;PDFBOX-4003&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4004&quot; title=&quot;Elements in the structure tree are not removed or corrected when flattening&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4004&quot;&gt;&lt;del&gt;PDFBOX-4004&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Run this code to check your solution:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
    {
        PDFMergerUtility pdfMergerUtility = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFMergerUtility();
        PDDocument src = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;GovFormPreFlattened.pdf&quot;&lt;/span&gt;));
        PDDocument dst = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;GovFormPreFlattened.pdf&quot;&lt;/span&gt;));
        pdfMergerUtility.appendDocument(dst, src);
        src.close(); &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we don&lt;span class=&quot;code-quote&quot;&gt;&apos;t close the src then we don&apos;&lt;/span&gt;t have an error
&lt;/span&gt;        dst.save(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;GovFormPreFlattened-merged.pdf&quot;&lt;/span&gt;));
        dst.close();

        PDDocument doc = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;GovFormPreFlattened-merged.pdf&quot;&lt;/span&gt;));
        PDPageTree pageTree = doc.getPages();
        PDNumberTreeNode parentTree = doc.getDocumentCatalog().getStructureTreeRoot().getParentTree();
        COSArray numArray = (COSArray) parentTree.getCOSObject().getDictionaryObject(COSName.NUMS);
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (COSBase base : numArray)
        {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (base &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSObject)
            {
                base = ((COSObject) base).getObject();
            }
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (base &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSArray)
            {
                &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (COSBase base2 : (COSArray) base)
                {
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (base2 &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSObject)
                    {
                        base2 = ((COSObject) base2).getObject();
                    }
                    checkForPage(pageTree, base2);
                }
            }
            &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (base &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSDictionary)
            {
                checkForPage(pageTree, base);
            }
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void checkForPage(PDPageTree pageTree, COSBase base2)
    {
        COSDictionary dict = (COSDictionary) base2;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (dict.containsKey(COSName.PG))
        {
            PDPage page = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDPage((COSDictionary) dict.getDictionaryObject(COSName.PG));
            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; pageIndex = pageTree.indexOf(page);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pageIndex &amp;lt; 0)
            {
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Oh no!&quot;&lt;/span&gt;);
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;2)&lt;br/&gt;
Minor, unrelated - this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+                COSArray srcKArrayClone = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; COSArray();
+                &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (COSBase next : srcKArray) {
+                    srcKArrayClone.add(cloner.cloneForNewDocument(next));
+                }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;why not just do &lt;tt&gt;srcKArrayClone = cloner.cloneForNewDocument(srcKArray)&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="16246102" author="jira-bot" created="Thu, 9 Nov 2017 17:25:49 +0000"  >&lt;p&gt;Commit 1814753 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1814753&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1814753&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: added test that pages referenced in the structure tree number tree are part of the page tree&lt;/p&gt;</comment>
                            <comment id="16246103" author="jira-bot" created="Thu, 9 Nov 2017 17:25:54 +0000"  >&lt;p&gt;Commit 1814754 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1814754&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1814754&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: added test that pages referenced in the structure tree number tree are part of the page tree&lt;/p&gt;</comment>
                            <comment id="16246452" author="jira-bot" created="Thu, 9 Nov 2017 20:23:41 +0000"  >&lt;p&gt;Commit 1814771 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1814771&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1814771&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: download test file into the repository&lt;/p&gt;</comment>
                            <comment id="16246453" author="jira-bot" created="Thu, 9 Nov 2017 20:23:46 +0000"  >&lt;p&gt;Commit 1814772 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1814772&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1814772&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: download test file into the repository&lt;/p&gt;</comment>
                            <comment id="16246455" author="jira-bot" created="Thu, 9 Nov 2017 20:23:50 +0000"  >&lt;p&gt;Commit 1814773 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1814773&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1814773&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: download test file into the repository&lt;/p&gt;</comment>
                            <comment id="16246479" author="jira-bot" created="Thu, 9 Nov 2017 20:38:06 +0000"  >&lt;p&gt;Commit 1814774 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1814774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1814774&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: condition is always true, thanks Dave Hill&lt;/p&gt;</comment>
                            <comment id="16246480" author="jira-bot" created="Thu, 9 Nov 2017 20:38:10 +0000"  >&lt;p&gt;Commit 1814775 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1814775&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1814775&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: condition is always true, thanks Dave Hill&lt;/p&gt;</comment>
                            <comment id="16248439" author="jira-bot" created="Sat, 11 Nov 2017 10:20:19 +0000"  >&lt;p&gt;Commit 1814937 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1814937&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1814937&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: use PD instead of COS class for test to increase usage of that class in the project&lt;/p&gt;</comment>
                            <comment id="16248440" author="jira-bot" created="Sat, 11 Nov 2017 10:20:24 +0000"  >&lt;p&gt;Commit 1814938 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1814938&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1814938&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: use PD instead of COS class for test to increase usage of that class in the project&lt;/p&gt;</comment>
                            <comment id="16283770" author="jira-bot" created="Fri, 8 Dec 2017 16:07:47 +0000"  >&lt;p&gt;Commit 1817521 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1817521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1817521&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: improved search for orphan pages in /ParentTree number tree, search also in /K tree&lt;/p&gt;</comment>
                            <comment id="16283771" author="jira-bot" created="Fri, 8 Dec 2017 16:07:51 +0000"  >&lt;p&gt;Commit 1817522 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1817522&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1817522&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: improved search for orphan pages in /ParentTree number tree, search also in /K tree&lt;/p&gt;</comment>
                            <comment id="16319115" author="davesplanet" created="Tue, 9 Jan 2018 20:50:00 +0000"  >&lt;p&gt;Since there are a number of commits here I ran the  original code in the problem description against the current 3.0-SNAPSHOT development head and verified the bug does not seem to have changed.&lt;/p&gt;</comment>
                            <comment id="16319140" author="tilman" created="Tue, 9 Jan 2018 20:56:33 +0000"  >&lt;p&gt;Indeed, the changes made are mostly about the test. You mentioned in the other issue that you wanted to contribute something later. So it&apos;s TDD but without the real code being improved, only the tests.&lt;/p&gt;

&lt;p&gt;I haven&apos;t worked much on the merge myself because I haven&apos;t understood everything about tagged PDFs.&lt;/p&gt;</comment>
                            <comment id="16444344" author="jira-bot" created="Thu, 19 Apr 2018 16:27:33 +0000"  >&lt;p&gt;Commit 1829574 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829574&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829574&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: clone objects not in mapping to prevent them from remaining attached to the source document&lt;/p&gt;</comment>
                            <comment id="16444348" author="jira-bot" created="Thu, 19 Apr 2018 16:30:41 +0000"  >&lt;p&gt;Commit 1829575 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829575&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829575&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: clone objects not in mapping to prevent them from remaining attached to the source document&lt;/p&gt;</comment>
                            <comment id="16444429" author="jira-bot" created="Thu, 19 Apr 2018 17:29:57 +0000"  >&lt;p&gt;Commit 1829577 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829577&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829577&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: add test that closes one source file with flattened annotations after merging but before the destination file is saved&lt;/p&gt;</comment>
                            <comment id="16444430" author="jira-bot" created="Thu, 19 Apr 2018 17:30:10 +0000"  >&lt;p&gt;Commit 1829578 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829578&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829578&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: add test that closes one source file with flattened annotations after merging but before the destination file is saved&lt;/p&gt;</comment>
                            <comment id="16444509" author="jira-bot" created="Thu, 19 Apr 2018 18:09:14 +0000"  >&lt;p&gt;Commit 1829595 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829595&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829595&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: fix typo&lt;/p&gt;</comment>
                            <comment id="16444511" author="jira-bot" created="Thu, 19 Apr 2018 18:09:28 +0000"  >&lt;p&gt;Commit 1829596 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829596&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829596&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: fix typo&lt;/p&gt;</comment>
                            <comment id="16444515" author="jira-bot" created="Thu, 19 Apr 2018 18:10:48 +0000"  >&lt;p&gt;Commit 1829597 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829597&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829597&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: revert two accidentally committed segments&lt;/p&gt;</comment>
                            <comment id="16446236" author="jira-bot" created="Fri, 20 Apr 2018 19:19:52 +0000"  >&lt;p&gt;Commit 1829674 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829674&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829674&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: check count of structure elements in /K tree&lt;/p&gt;</comment>
                            <comment id="16446237" author="jira-bot" created="Fri, 20 Apr 2018 19:19:56 +0000"  >&lt;p&gt;Commit 1829675 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829675&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829675&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3999&quot; title=&quot;Merge failed to clone tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3999&quot;&gt;&lt;del&gt;PDFBOX-3999&lt;/del&gt;&lt;/a&gt;: check count of structure elements in /K tree&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13117330">PDFBOX-4004</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12896905" name="GeneralForbearance.pdf" size="676210" author="tilman" created="Thu, 9 Nov 2017 17:10:18 +0000"/>
                            <attachment id="12896702" name="GovFormPreFlattened.pdf" size="636971" author="DavesPlanet" created="Wed, 8 Nov 2017 18:29:30 +0000"/>
                            <attachment id="12896701" name="pdfbox.patch" size="1768" author="DavesPlanet" created="Wed, 8 Nov 2017 18:30:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mk33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>