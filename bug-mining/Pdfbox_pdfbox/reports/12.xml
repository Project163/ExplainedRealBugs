<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:52:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-465] invalid date formats </title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-465</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;This is with the latest from svn, Revision: 773978&lt;/p&gt;

&lt;p&gt;From a sample of 13304 pdf documents generated in a very wide variety of ways, I got 94 invalid date formats,&lt;/p&gt;

&lt;p&gt;It seems that all of these have the stack trace of,&lt;/p&gt;

&lt;p&gt;Caused by: java.io.IOException: Error converting date:Friday, July 11, 2008&lt;br/&gt;
	at org.apache.pdfbox.util.DateConverter.toCalendar(DateConverter.java:240)&lt;br/&gt;
	at org.apache.pdfbox.util.DateConverter.toCalendar(DateConverter.java:120)&lt;br/&gt;
	at org.apache.pdfbox.cos.COSDictionary.getDate(COSDictionary.java:783)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDDocumentInformation.getCreationDate(PDDocumentInformation.java:218)&lt;br/&gt;
	at message_analyzer.extractor.PDFExtractor.getContent(PDFExtractor.java:50)&lt;/p&gt;

&lt;p&gt;Some examples of invalid dates are,&lt;/p&gt;

&lt;p&gt;20070430193647+713&apos;00&apos;&lt;br/&gt;
Tue Aug 21 10:35:22 2007&lt;br/&gt;
Tuesday, November 04, 2008&lt;br/&gt;
200712172:2:3 &lt;br/&gt;
Unknown&lt;br/&gt;
20090319 200122&lt;br/&gt;
9:47 5/12/2008&lt;/p&gt;

&lt;p&gt;i don&apos;t think there is any hope of parsing all these date formats.  If would be nice if this was not a fatal error, and the parser could continue without a creation date. &lt;/p&gt;

&lt;p&gt;Is the policy of pdfbox to be as forgiving as possible when reading pdf documents?  Maybe toCalendar should return a new Calendar() if parsing fails, rather than throwing.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12425248">PDFBOX-465</key>
            <summary>invalid date formats </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="sgbridges">Sean Bridges</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 May 2009 18:06:44 +0000</created>
                <updated>Sat, 30 Nov 2013 17:02:08 +0000</updated>
                            <resolved>Mon, 11 Nov 2013 18:52:57 +0000</resolved>
                                    <version>0.8.0-incubator</version>
                                    <fixVersion>1.8.3</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12708550" author="danielwilson" created="Tue, 12 May 2009 18:28:53 +0000"  >&lt;p&gt;&amp;gt;&amp;gt;Is the policy of pdfbox to be as forgiving as possible when reading pdf documents?&lt;/p&gt;

&lt;p&gt;I won&apos;t claim to be able to state what the PDFBox policy may be.  But I will say we have been making it more and more forgiving in a LOT of areas.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; Maybe toCalendar should return a new Calendar() if parsing fails, rather than throwing.&lt;/p&gt;

&lt;p&gt;I like that idea, and unless other developers may present reasons against it, would happily implement it.&lt;/p&gt;

&lt;p&gt;I would certainly be interested in seeing some test case PDF&apos;s with these formats ... and if possible some code to parse some of them.&lt;/p&gt;</comment>
                            <comment id="12709455" author="sgbridges" created="Thu, 14 May 2009 16:11:49 +0000"  >&lt;p&gt;I&apos;m also getting,&lt;/p&gt;

&lt;p&gt;Caused by: java.io.IOException: Error: Invalid date format &apos;P8&apos;&apos;&lt;br/&gt;
	at org.apache.pdfbox.util.DateConverter.toCalendar(DateConverter.java:157)&lt;br/&gt;
	at org.apache.pdfbox.util.DateConverter.toCalendar(DateConverter.java:120)&lt;br/&gt;
	at org.apache.pdfbox.cos.COSDictionary.getDate(COSDictionary.java:784)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDDocumentInformation.getCreationDate(PDDocumentInformation.java:218)&lt;br/&gt;
	at message_analyzer.extractor.PDFExtractor.getContent(PDFExtractor.java:63)&lt;br/&gt;
	... 2 more&lt;/p&gt;

&lt;p&gt;The pdf is invalid, &lt;/p&gt;

&lt;p&gt;/CreationDate (P8&amp;lsquo;)&lt;/p&gt;

&lt;p&gt;It looks like they are trying to utf-16 encode the meta data properties for some reason.&lt;/p&gt;


&lt;p&gt;removing the length check fixes it,&lt;/p&gt;

&lt;p&gt;                     date = date.substring( 2, date.length() );&lt;br/&gt;
                 }&lt;br/&gt;
                 if( date.length() &amp;lt; 4 )&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;{&lt;/li&gt;
	&lt;li&gt;throw new IOException( &quot;Error: Invalid date format &apos;&quot; + date + &quot;&apos;&quot; );&lt;br/&gt;
+                
{                    
+                    return null;
                 }
&lt;p&gt;                 year = Integer.parseInt( date.substring( 0, 4 ) );&lt;br/&gt;
                 if( date.length() &amp;gt;= 6 )&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m not attaching the diffs as a file since my copy of the code has so many changes now you won&apos;t be able to simply apply the diff.  Most of my changes are trivial.&lt;/p&gt;</comment>
                            <comment id="12858741" author="peter_lenahan@ibi.com" created="Tue, 20 Apr 2010 01:10:47 +0000"  >&lt;p&gt;The POTENTIAL_FORMATS  array can have a few date formats added to resolve&lt;br/&gt;
2 reported issue and 1 issue that we hit, but didn&apos;t report because they were already reported by other bugs.&lt;/p&gt;

&lt;p&gt;I tested these date formats, the test program is below, can you can add them to the Tika code?&lt;/p&gt;


&lt;p&gt;Please update : org.apache.pdfbox.util.DateConverter.java to  include the additional format.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Peter Lenahan&lt;/p&gt;

&lt;p&gt;import java.io.IOException;&lt;br/&gt;
import java.text.ParseException;&lt;br/&gt;
import java.text.SimpleDateFormat;&lt;br/&gt;
import java.util.Calendar;&lt;br/&gt;
import java.util.Date;&lt;br/&gt;
import java.util.GregorianCalendar;&lt;/p&gt;


&lt;p&gt;public class SimpleDateParsingTest {&lt;/p&gt;

&lt;p&gt;	public SimpleDateParsingTest() {&lt;/p&gt;

&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;	private static final SimpleDateFormat[] POTENTIAL_FORMATS = new SimpleDateFormat[] &lt;/p&gt;
{
		new SimpleDateFormat(&quot;EEEE, dd MMM yyyy hh:mm:ss a&quot;),
		new SimpleDateFormat(&quot;EEEE, MMM dd, yyyy hh:mm:ss a&quot;),
		new SimpleDateFormat(&quot;MM/dd/yyyy hh:mm:ss&quot;),
		new SimpleDateFormat(&quot;MM/dd/yyyy&quot;),
		new SimpleDateFormat(&quot;yyyymmdd hh:mm:ss Z&quot;), // 
		new SimpleDateFormat(&quot;yyyymmdd hh:mm:ss&quot;), // 
		new SimpleDateFormat(&quot;yyyymmdd hh:mm:ss Z&quot;), // 

		new SimpleDateFormat(&quot;yyyymmdd&apos;+00&apos;&apos;00&apos;&apos;&apos;&quot;), //   There is a bug in parsing time zones
		new SimpleDateFormat(&quot;yyyymmdd&apos;+01&apos;&apos;00&apos;&apos;&apos;&quot;), //  when there is no time attached.
		new SimpleDateFormat(&quot;yyyymmdd&apos;+02&apos;&apos;00&apos;&apos;&apos;&quot;), //  this is a known java bug.
	    new SimpleDateFormat(&quot;yyyymmdd&apos;+03&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;+04&apos;&apos;00&apos;&apos;&apos;&quot;), //
	    new SimpleDateFormat(&quot;yyyymmdd&apos;+05&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;+06&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;+07&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;+08&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;+09&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;+10&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;+11&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;+12&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-01&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-02&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-03&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-04&apos;&apos;00&apos;&apos;&apos;&quot;), //
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-05&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-06&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-07&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-08&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-09&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-10&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-11&apos;&apos;00&apos;&apos;&apos;&quot;), // 
	    new SimpleDateFormat(&quot;yyyymmdd&apos;-12&apos;&apos;00&apos;&apos;&apos;&quot;), // 
		new SimpleDateFormat(&quot;yyyymmdd&quot;), // for 20090401+0200	    
		//I think you want to add this:
		//You should also add the format that is described in the bug report because that may also happen.
		new SimpleDateFormat(&quot;dd MMM yyyy hh:mm:ss&quot;),  // for 26 May 2000 11:25:00		
		new SimpleDateFormat(&quot;dd MMM yyyy hh:mm&quot;),  // for 26 May 2000 11:25 http://www.mail-archive.com/pdfbox-users@incubator.apache.org/msg00531.html
		new SimpleDateFormat(&quot;EEEEEEEEEE, MMMMMMMMMMMM dd, yyyy&quot;)  // Friday, July 11, 2008 https://issues.apache.org/jira/browse/PDFBOX-465
	}
&lt;p&gt;;&lt;br/&gt;
	public static void main (String [] args) {&lt;br/&gt;
		try &lt;/p&gt;
{
			Calendar cal=SimpleDateParsingTest.toCalendar(&quot;20090401+0200&quot;);
			System.out.println(cal.get(Calendar.YEAR));
			cal=SimpleDateParsingTest.toCalendar(&quot;Friday, January 11, 2008&quot;);
			System.out.println(cal.get(Calendar.YEAR));
			System.out.println(cal);

			cal=SimpleDateParsingTest.toCalendar(&quot;20090401+0200&quot;);
			System.out.println(cal.get(Calendar.YEAR));

			cal=SimpleDateParsingTest.toCalendar(&quot;20090401+02&apos;00&apos;&quot;);
			System.out.println(cal.get(Calendar.YEAR));
			cal=SimpleDateParsingTest.toCalendar(&quot;20090401+04&apos;00&apos;&quot;);
			System.out.println(cal.get(Calendar.YEAR));
			cal=SimpleDateParsingTest.toCalendar(&quot;20090401+09&apos;00&apos;&quot;);
			System.out.println(cal.get(Calendar.YEAR));
			cal=SimpleDateParsingTest.toCalendar(&quot;20090401-02&apos;00&apos;&quot;);
			System.out.println(cal.get(Calendar.YEAR));

			cal=SimpleDateParsingTest.toCalendar(&quot;20090401 01:01:01 -0500&quot;);
			System.out.println(cal.get(Calendar.YEAR));	//yyyymmdd hh:mm:ss Z
			cal=SimpleDateParsingTest.toCalendar(&quot;20090401&quot;);
			System.out.println(cal.get(Calendar.YEAR));
			System.out.println(SimpleDateParsingTest.toCalendar(&quot;20090401+0200&quot;));
			
			System.out.println(SimpleDateParsingTest.toCalendar(&quot;20090401+02&apos;00&apos;&quot;));
			

			System.out.println(SimpleDateParsingTest.toCalendar(&quot;26 May 2000 11:25:10&quot;));
			System.out.println(SimpleDateParsingTest.toCalendar(&quot;26 May 2000 11:25&quot;));
			System.out.println(&quot;Finished&quot;);

		}
&lt;p&gt; catch (IOException e) &lt;/p&gt;
{
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;	public static Calendar toCalendar( String date ) throws IOException&lt;br/&gt;
	{&lt;br/&gt;
		Calendar retval = null;&lt;/p&gt;


&lt;p&gt;		for( int i=0; retval == null &amp;amp;&amp;amp; i&amp;lt;POTENTIAL_FORMATS.length; i++ )&lt;br/&gt;
		{&lt;br/&gt;
			try&lt;/p&gt;
			{

				Date utilDate = POTENTIAL_FORMATS[i].parse( date );
				retval = new GregorianCalendar();
				retval.setTime( utilDate );
				System.out.println(&quot;i=========&quot;+i);
			}
&lt;p&gt;			catch( ParseException pe )&lt;/p&gt;
			{
				//ignore and move to next potential format
			}
&lt;p&gt;		}&lt;br/&gt;
		if( retval == null )&lt;/p&gt;
		{
			//we didn&apos;t find a valid date format so throw an exception
			throw new IOException( &quot;Error converting date:&quot; + date );
		}
&lt;p&gt;		return retval;&lt;br/&gt;
	}&lt;br/&gt;
}&lt;/p&gt;
</comment>
                            <comment id="13819211" author="lehmi" created="Mon, 11 Nov 2013 18:52:57 +0000"  >&lt;p&gt;Solved after solving &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1633&quot; title=&quot;DateConverter needs to work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1633&quot;&gt;&lt;del&gt;PDFBOX-1633&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13835800" author="lehmi" created="Sat, 30 Nov 2013 17:02:08 +0000"  >&lt;p&gt;Closed after releasing 1.8.3&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12457777">PDFBOX-643</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12462984">PDFBOX-701</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12651901">PDFBOX-1633</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12442250" name="SimpleDateParsingTest.java" size="4755" author="peter_lenahan@ibi.com" created="Tue, 20 Apr 2010 01:10:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84977</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1dxfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>289514</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>