<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:03:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3253] Close all COSStreams when creating a new pdf</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3253</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Peter Prusinowski posted on users@ that he got a lot of debug warnings about COSStreams which are not closed. He provided the following code to reproduce the effect:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void generate() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        PDDocument doc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDDocument();

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            PDPage page = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDPage();
            doc.addPage(page);
            PDPageContentStream content = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDPageContentStream(doc, page);
            BufferedImage bi = ImageIO.read(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;/tmp/test.png&quot;&lt;/span&gt;));
            PDImageXObject img = LosslessFactory.createFromImage(doc, bi);
            content.drawImage(img, 0, 0);
            content.close();
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (doc != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                doc.save(&lt;span class=&quot;code-quote&quot;&gt;&quot;/tmp/testPdf.pdf&quot;&lt;/span&gt;);
                doc.close();
            }
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        generate();
        generate();
        generate();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;ve got the same warnings using that specific code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12945281">PDFBOX-3253</key>
            <summary>Close all COSStreams when creating a new pdf</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="lehmi">Andreas Lehmk&#252;hler</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Feb 2016 16:10:25 +0000</created>
                <updated>Thu, 17 Mar 2016 19:08:18 +0000</updated>
                            <resolved>Fri, 11 Mar 2016 07:14:58 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15171083" author="lehmi" created="Sun, 28 Feb 2016 16:11:19 +0000"  >&lt;p&gt;All COSStreams should be closed when closing the COSDocument. This is true if an existing is loaded but doesn&apos; work if a new pdf is created. Those streams are closed within COSStream#finalize which triggers the debug warning.&lt;/p&gt;</comment>
                            <comment id="15171086" author="jira-bot" created="Sun, 28 Feb 2016 16:17:44 +0000"  >&lt;p&gt;Commit 1732763 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1732763&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1732763&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3253&quot; title=&quot;Close all COSStreams when creating a new pdf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3253&quot;&gt;&lt;del&gt;PDFBOX-3253&lt;/del&gt;&lt;/a&gt;: collect all COSStreams when creating a new pdf so that they can be closed when closing the COSDocument&lt;/p&gt;</comment>
                            <comment id="15171093" author="lehmi" created="Sun, 28 Feb 2016 16:28:36 +0000"  >&lt;p&gt;I&apos;ve extended COSDocument so that all COSStreams are collected which are created when creating a new pdf so that they can be closed when closing the COSDocument. COSStreams which are created when loading an existing pdf are already collected within objectPool and closed as well when closing COSDocument.&lt;/p&gt;</comment>
                            <comment id="15189803" author="lehmi" created="Thu, 10 Mar 2016 19:27:58 +0000"  >&lt;p&gt;Closing all streams introduced a regression when overlaying pdfs.&lt;/p&gt;</comment>
                            <comment id="15190561" author="lehmi" created="Fri, 11 Mar 2016 07:14:50 +0000"  >&lt;p&gt;I&apos;ve reverted my changes and the regression still persists. It looks like an issue with closing the scratch file. I&apos;m going to create another ticket&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2tvrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>