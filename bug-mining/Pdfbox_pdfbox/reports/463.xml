<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:55:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1958] image mask outline with shading pattern is invisible</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1958</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;This is also somewhat of a regression: two weeks ago, the attached file had the image rendered in b/w, now it is invisible. I was able to get the image in another (wrong) color by changing one line in BeginInlineImage.java, the one with TODO to&lt;/p&gt;

&lt;p&gt;            awtImage = image.getStencilImage(colorSpace.toPaint(color, image.getHeight())); // &amp;lt;--- TODO: pass page height?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12698360">PDFBOX-1958</key>
            <summary>image mask outline with shading pattern is invisible</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                            <label>Stencil</label>
                            <label>mask</label>
                            <label>shading</label>
                            <label>shadingpattern</label>
                    </labels>
                <created>Mon, 3 Mar 2014 06:31:07 +0000</created>
                <updated>Wed, 24 Jun 2020 16:29:52 +0000</updated>
                            <resolved>Tue, 24 Jan 2017 16:51:05 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.5</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13917773" author="tilman" created="Mon, 3 Mar 2014 06:32:23 +0000"  >&lt;p&gt;Source of the file:&lt;br/&gt;
&lt;a href=&quot;http://compgroups.net/comp.lang.postscript/shading-patterns-example/1827738&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://compgroups.net/comp.lang.postscript/shading-patterns-example/1827738&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13941470" author="tilman" created="Thu, 20 Mar 2014 07:09:03 +0000"  >&lt;p&gt;Did some tracing. These are four stencil images, but they are passed with the same Matrix and AffineTransform (identity). So it is somewhat related to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1936&quot; title=&quot;text outline with shading pattern is invisible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1936&quot;&gt;&lt;del&gt;PDFBOX-1936&lt;/del&gt;&lt;/a&gt; and of course to patterns.&lt;/p&gt;</comment>
                            <comment id="13944237" author="jahewson" created="Sat, 22 Mar 2014 21:08:58 +0000"  >&lt;p&gt;I&apos;m seeing the following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Mar 22, 2014 2:08:22 PM org.apache.pdfbox.util.PDFStreamEngine processOperator
WARNING: java.lang.UnsupportedOperationException
java.lang.UnsupportedOperationException
	at org.apache.pdfbox.pdmodel.graphics.color.PDPattern.toPaint(PDPattern.java:104)
	at org.apache.pdfbox.util.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.pagedrawer.BeginInlineImage.process(BeginInlineImage.java:53)
	at org.apache.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:529)
	at org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:254)
	at org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:221)
	at org.apache.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:203)
	at org.apache.pdfbox.rendering.PageDrawer.drawPage(PageDrawer.java:153)
	at org.apache.pdfbox.rendering.PDFRenderer.renderPage(PDFRenderer.java:199)
	at org.apache.pdfbox.rendering.PDFRenderer.renderImage(PDFRenderer.java:147)
	at org.apache.pdfbox.rendering.PDFRenderer.renderImageWithDPI(PDFRenderer.java:96)
	at org.apache.pdfbox.tools.PDFToImage.main(PDFToImage.java:248)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13944241" author="jahewson" created="Sat, 22 Mar 2014 21:13:12 +0000"  >&lt;p&gt;I&apos;ve fixed the exception in revision 1580326, it was caused by the page height not being passed to the toPaint method (there was a TODO in the code). However, the shading colors are now incorrect.&lt;/p&gt;</comment>
                            <comment id="13944242" author="tilman" created="Sat, 22 Mar 2014 21:22:13 +0000"  >&lt;p&gt;I know, I did that for &quot;my&quot; version &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; The incorrect colors are IMHO related to the CTM pattern problem.&lt;/p&gt;</comment>
                            <comment id="13944285" author="jahewson" created="Sun, 23 Mar 2014 00:46:43 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The incorrect colors are IMHO related to the CTM pattern problem.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Do you think that it&apos;s a red-purple gradient which is being scaled incorrectly? Makes sense...&lt;/p&gt;</comment>
                            <comment id="13944337" author="tilman" created="Sun, 23 Mar 2014 04:54:27 +0000"  >&lt;p&gt;Yes; the shading is hard to see even if shaded correctly, it&apos;s indeed more purple when viewed with Adobe Viewer. Rendered with the current trunk I get an image that has 34 colors according to irfanview and I can&apos;t see any the difference in colors, it all looks somewhat red to me.&lt;/p&gt;</comment>
                            <comment id="13944614" author="jahewson" created="Sun, 23 Mar 2014 22:35:57 +0000"  >&lt;p&gt;I&apos;ve attached cinnebar1.jpg which is the result I get on OS X with JDK 1.7, it&apos;s pretty much all red.&lt;/p&gt;</comment>
                            <comment id="14010198" author="jahewson" created="Tue, 27 May 2014 20:02:30 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The incorrect colors are IMHO related to the CTM pattern problem.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree, it could possibly be caused by the shading, but I suspect it&apos;s a pattern issue. No fixes in the works for this currently.&lt;/p&gt;</comment>
                            <comment id="15834978" author="tilman" created="Mon, 23 Jan 2017 18:13:51 +0000"  >&lt;p&gt;The problem is that the pattern color is rendered without any CTM applied. The code in SampledImageReader.SampledImageReader() works for simple colors only, not for patterns. More to come.&lt;/p&gt;

&lt;p&gt;Edit: here&apos;s a text I prepared in May 2014 &amp;#40;!) but never posted.&lt;/p&gt;

&lt;p&gt;The (shading) pattern is to be understood as something that goes over the whole page area, with the stencil being a &quot;window&quot; on this page. Thus it is wrong to paint a (usually smaller) BufferedImage in SampledImageReader.getStencilImage() without also considering the current ctm. Or rather, it is wrong to create the paint without also considering the current ctm. PattyP2.pdf has a stencil image that is in the middle of the page. So the shading should have negative translations because the (0,0) coordinates of the BufferedImage are not the (0,0) coordinates of the shading. Then there is the scale, this must also be taken into account, by using the dimensions of the image.&lt;/p&gt;</comment>
                            <comment id="15835201" author="jira-bot" created="Mon, 23 Jan 2017 21:02:14 +0000"  >&lt;p&gt;Commit 1779988 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1779988&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1779988&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1958&quot; title=&quot;image mask outline with shading pattern is invisible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1958&quot;&gt;&lt;del&gt;PDFBOX-1958&lt;/del&gt;&lt;/a&gt;: draw paint and mask separately and combine them and draw the result&lt;/p&gt;</comment>
                            <comment id="15835202" author="jira-bot" created="Mon, 23 Jan 2017 21:02:20 +0000"  >&lt;p&gt;Commit 1779989 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1779989&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1779989&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1958&quot; title=&quot;image mask outline with shading pattern is invisible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1958&quot;&gt;&lt;del&gt;PDFBOX-1958&lt;/del&gt;&lt;/a&gt;: draw paint and mask separately and combine them and draw the result&lt;/p&gt;</comment>
                            <comment id="15835211" author="tilman" created="Mon, 23 Jan 2017 21:12:07 +0000"  >&lt;p&gt;All three files are now rendered correctly for the first time, although only at 1:1 resolution, i.e. at higher resolutions the quality doesn&apos;t get better. Maybe later...&lt;/p&gt;</comment>
                            <comment id="15836304" author="jira-bot" created="Tue, 24 Jan 2017 16:48:43 +0000"  >&lt;p&gt;Commit 1780089 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1780089&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1780089&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1958&quot; title=&quot;image mask outline with shading pattern is invisible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1958&quot;&gt;&lt;del&gt;PDFBOX-1958&lt;/del&gt;&lt;/a&gt;: use int instead of float, remove TODO&lt;/p&gt;</comment>
                            <comment id="15836305" author="jira-bot" created="Tue, 24 Jan 2017 16:48:50 +0000"  >&lt;p&gt;Commit 1780090 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1780090&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1780090&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1958&quot; title=&quot;image mask outline with shading pattern is invisible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1958&quot;&gt;&lt;del&gt;PDFBOX-1958&lt;/del&gt;&lt;/a&gt;: use int instead of float, remove TODO&lt;/p&gt;</comment>
                            <comment id="15836308" author="tilman" created="Tue, 24 Jan 2017 16:51:05 +0000"  >&lt;p&gt;I&apos;ve slept over this and thought about it before going to work and decided not to put more work into this, the advantages are not worth the extra work. The only file I have that is not a test file but a real world file (gs-bugzilla690297.pdf) looks weird even when rendered with Adobe Reader.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12843571">PDFBOX-2864</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12696796">PDFBOX-1936</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13313290">PDFBOX-4898</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12848965" name="PATTYP2.pdf" size="85444" author="tilman" created="Mon, 23 Jan 2017 18:05:29 +0000"/>
                            <attachment id="12632189" name="cinnebar.pdf" size="3167" author="tilman" created="Mon, 3 Mar 2014 06:32:23 +0000"/>
                            <attachment id="12632190" name="cinnebar.ps" size="3066" author="tilman" created="Mon, 3 Mar 2014 06:32:23 +0000"/>
                            <attachment id="12636269" name="cinnebar1.jpg" size="47627" author="jahewson" created="Sun, 23 Mar 2014 22:35:57 +0000"/>
                            <attachment id="12848966" name="gs-bugzilla690297.pdf" size="584333" author="tilman" created="Mon, 23 Jan 2017 18:05:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376718</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1swyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377013</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>