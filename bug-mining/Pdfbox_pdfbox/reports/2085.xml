<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:08:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4408] Object StructParent property does not match entry in parent tree</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4408</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;After merging 2 documents together, the parent tree entries for the second page do not match their expected key.&#160; For the attached document you can look at the&#160;&quot;Date you are available&quot; field after the merge.&#160; In the parent tree the second page field is located with key of 15.&#160; However the object expects its key to be 21.&#160; The /StructParent value is 21 but it should be 15.&#160; This mismatch causes issues with a11y readers and the reading order in Adobe DC.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The fields brought from the destination document are correct, but fields from the source document do not match.&#160; They continue with the pattern, so the next field is located at key 16 but the /StructParent value is 22, 17 for 23, etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13205000">PDFBOX-4408</key>
            <summary>Object StructParent property does not match entry in parent tree</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tschusssl">Dan Anderson</reporter>
                        <labels>
                            <label>StructureTree</label>
                    </labels>
                <created>Mon, 17 Dec 2018 21:53:58 +0000</created>
                <updated>Thu, 28 Feb 2019 17:44:51 +0000</updated>
                            <resolved>Wed, 19 Dec 2018 08:31:13 +0000</resolved>
                                    <version>2.0.13</version>
                                    <fixVersion>2.0.14</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16724259" author="tilman" created="Tue, 18 Dec 2018 17:01:13 +0000"  >&lt;p&gt;In &lt;tt&gt;Root/StructTreeRoot/ParentTree/Nums&lt;/tt&gt; there is a &quot;hole&quot;, the numbers are 0, 7, 8, 9, 10, 11, 12, 13. The second page has 14, 15, 16, 17, 18, 19, 20, 21. Whatever goes wrong may be related to that. IMHO the mistake is that the assumption is made that the even elements (numbers) are continuous. So the copies should be related to the source number and not to the index, even if that one is usually i * 2.&lt;/p&gt;</comment>
                            <comment id="16724415" author="tschusssl" created="Tue, 18 Dec 2018 19:40:57 +0000"  >&lt;p&gt;The experimenting I&apos;ve done shows that it doesn&apos;t care if the numbers have gaps, only that the key matches the StructParent property.&lt;/p&gt;

&lt;p&gt;My attempt to fix this issue involved using a map to accumulate the objects with their keys, then iterating over it and adding them to the ParentTree.&lt;/p&gt;</comment>
                            <comment id="16724422" author="tilman" created="Tue, 18 Dec 2018 19:52:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tschusssl&quot; class=&quot;user-hover&quot; rel=&quot;tschusssl&quot;&gt;tschusssl&lt;/a&gt; could you please test the file I just attached?&lt;/p&gt;</comment>
                            <comment id="16724438" author="tschusssl" created="Tue, 18 Dec 2018 20:17:17 +0000"  >&lt;p&gt;Yes that appears correct.&#160; The reader still can&apos;t read it because of issue 4407, but this file appears to have a valid Parent Tree.&lt;/p&gt;</comment>
                            <comment id="16724460" author="tilman" created="Tue, 18 Dec 2018 20:54:33 +0000"  >&lt;p&gt;OK thanks. Before looking at the &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4407&quot; title=&quot;ParentTree Objects do not match KArray objects after merge&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4407&quot;&gt;&lt;del&gt;PDFBOX-4407&lt;/del&gt;&lt;/a&gt;, I&apos;ll create a previously-failing test, hopefully tomorrow. My current idea is your idea, i.e. look at the StructParent values in the field widgets and fail if they don&apos;t get found in the ParentTree.&lt;/p&gt;</comment>
                            <comment id="16724752" author="jira-bot" created="Wed, 19 Dec 2018 07:33:41 +0000"  >&lt;p&gt;Commit 1849269 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1849269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1849269&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: load test file&lt;/p&gt;</comment>
                            <comment id="16724753" author="jira-bot" created="Wed, 19 Dec 2018 07:33:45 +0000"  >&lt;p&gt;Commit 1849270 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1849270&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1849270&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: load test file&lt;/p&gt;</comment>
                            <comment id="16724771" author="jira-bot" created="Wed, 19 Dec 2018 07:47:53 +0000"  >&lt;p&gt;Commit 1849271 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1849271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1849271&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: test that StructParent values are found in the ParentTree&lt;/p&gt;</comment>
                            <comment id="16724772" author="jira-bot" created="Wed, 19 Dec 2018 07:48:02 +0000"  >&lt;p&gt;Commit 1849272 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1849272&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1849272&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: test that StructParent values are found in the ParentTree&lt;/p&gt;</comment>
                            <comment id="16724773" author="jira-bot" created="Wed, 19 Dec 2018 07:49:05 +0000"  >&lt;p&gt;Commit 1849273 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1849273&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1849273&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: don&apos;t assume that numbers in array are continuous&lt;/p&gt;</comment>
                            <comment id="16724774" author="jira-bot" created="Wed, 19 Dec 2018 07:49:09 +0000"  >&lt;p&gt;Commit 1849274 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1849274&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1849274&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: don&apos;t assume that numbers in array are continuous&lt;/p&gt;</comment>
                            <comment id="16724792" author="tilman" created="Wed, 19 Dec 2018 08:31:13 +0000"  >&lt;p&gt;Thanks for reporting this. Setting to resolved.&lt;/p&gt;</comment>
                            <comment id="16725943" author="jira-bot" created="Thu, 20 Dec 2018 15:37:14 +0000"  >&lt;p&gt;Commit 1849409 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1849409&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1849409&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: add orphan check&lt;/p&gt;</comment>
                            <comment id="16725944" author="jira-bot" created="Thu, 20 Dec 2018 15:37:18 +0000"  >&lt;p&gt;Commit 1849410 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1849410&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1849410&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: add orphan check&lt;/p&gt;</comment>
                            <comment id="16734778" author="jira-bot" created="Sat, 5 Jan 2019 05:41:04 +0000"  >&lt;p&gt;Commit 1850460 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1850460&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1850460&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: improve javadoc&lt;/p&gt;</comment>
                            <comment id="16734779" author="jira-bot" created="Sat, 5 Jan 2019 05:41:10 +0000"  >&lt;p&gt;Commit 1850461 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1850461&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1850461&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: improve javadoc&lt;/p&gt;</comment>
                            <comment id="16742464" author="jira-bot" created="Mon, 14 Jan 2019 20:01:25 +0000"  >&lt;p&gt;Commit 1851291 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1851291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1851291&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: check /StructParent for all annotations, not just widgets&lt;/p&gt;</comment>
                            <comment id="16742465" author="jira-bot" created="Mon, 14 Jan 2019 20:01:30 +0000"  >&lt;p&gt;Commit 1851292 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1851292&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1851292&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4408&quot; title=&quot;Object StructParent property does not match entry in parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4408&quot;&gt;&lt;del&gt;PDFBOX-4408&lt;/del&gt;&lt;/a&gt;: check /StructParent for all annotations, not just widgets&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12952238" name="form-merged-good.pdf" size="367562" author="tilman" created="Tue, 18 Dec 2018 19:51:07 +0000"/>
                            <attachment id="12952224" name="form-merged.pdf" size="367562" author="tilman" created="Tue, 18 Dec 2018 17:01:36 +0000"/>
                            <attachment id="12952086" name="form.pdf" size="46909" author="tschusssl" created="Mon, 17 Dec 2018 21:50:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u002fc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>