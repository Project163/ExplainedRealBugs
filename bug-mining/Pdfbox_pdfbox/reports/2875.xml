<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:14:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5754] PDF conversion in this format is very slow. Is there any room for optimization?</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5754</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;pdf&#65306; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13066074/13066074_image2.pdf&quot; title=&quot;image2.pdf attached to PDFBOX-5754&quot;&gt;image2.pdf&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;demo&#65306; &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
		File file = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;D:\\fcs\\test\\test6\\image2.pdf&quot;&lt;/span&gt;);

		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; PDDocument load = PDDocument.load(file, MemoryUsageSetting.setupTempFileOnly()
				.setTempDir(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;D:\\fcs\\test&quot;&lt;/span&gt;)));

		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
			PDFRenderer renderer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFRenderer(load);
&lt;span class=&quot;code-comment&quot;&gt;//			renderer.setSubsamplingAllowed(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/span&gt;			&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; pageIndex = 0;
			&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; scale = 2f;
			BufferedImage bufferedImage = renderer.renderImage(pageIndex, scale, ImageType.RGB);
			FileOutputStream fos = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
			&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
				fos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;D:\\fcs\\test/test6/image&quot;&lt;/span&gt; + pageIndex + &lt;span class=&quot;code-quote&quot;&gt;&quot;.jpg&quot;&lt;/span&gt;));
				ImageIO.write(bufferedImage, &lt;span class=&quot;code-quote&quot;&gt;&quot;jpg&quot;&lt;/span&gt;, fos);
			} &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
				&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fos != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
					fos.close();
				}
			}
		} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable e){
			e.printStackTrace();
		}
		&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(6000000);
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13565006">PDFBOX-5754</key>
            <summary>PDF conversion in this format is very slow. Is there any room for optimization?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="lycheng">liu</reporter>
                        <labels>
                            <label>optimization</label>
                    </labels>
                <created>Wed, 17 Jan 2024 05:00:45 +0000</created>
                <updated>Thu, 14 Mar 2024 20:57:40 +0000</updated>
                            <resolved>Wed, 17 Jan 2024 12:26:02 +0000</resolved>
                                    <version>2.0.30</version>
                    <version>3.0.1 PDFBox</version>
                                    <fixVersion>2.0.31</fixVersion>
                    <fixVersion>3.0.2 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17807607" author="tilman" created="Wed, 17 Jan 2024 07:31:14 +0000"  >&lt;p&gt;The file has 994 ExtGState (opacity level) and 1029 XObjects, most of which are forms, i.e. content streams. So it&apos;s just a complex PDF.&lt;/p&gt;</comment>
                            <comment id="17807608" author="JIRAUSER297279" created="Wed, 17 Jan 2024 07:33:51 +0000"  >&lt;p&gt;It seems that the browser opens very quickly. Is there any way to solve it?&lt;/p&gt;</comment>
                            <comment id="17807626" author="tilman" created="Wed, 17 Jan 2024 08:00:48 +0000"  >&lt;p&gt;Ok, I ran a profiler and there&apos;s some weirdness indeed, &lt;tt&gt;hasBlendMode()&lt;/tt&gt; is called very often, due to this weird resources usage. I&apos;ll make a change that might mitigate this.&lt;/p&gt;</comment>
                            <comment id="17807627" author="JIRAUSER297279" created="Wed, 17 Jan 2024 08:03:08 +0000"  >&lt;p&gt;thank you&lt;/p&gt;</comment>
                            <comment id="17807638" author="tilman" created="Wed, 17 Jan 2024 08:42:04 +0000"  >&lt;p&gt;This will take longer. My idea was to cache the second parameter of &lt;tt&gt;hasBlendMode()&lt;/tt&gt; in the PageDrawer class, but I get rendering differences with several of my test files.&lt;/p&gt;

&lt;p&gt;A-Designers-Guide-to-Transparency-2007.pdf p15&lt;br/&gt;
A-Designers-Guide-to-Transparency-2007.pdf p20&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5307&quot; title=&quot;Image lost on page render&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5307&quot;&gt;&lt;del&gt;PDFBOX-5307&lt;/del&gt;&lt;/a&gt;.pdf&lt;br/&gt;
PDFJS-4735.pdf&lt;br/&gt;
pop-bugzilla19670-2.pdf&lt;br/&gt;
Transparency_DesignGuide-2004.pdf p1&lt;br/&gt;
Transparency_DesignGuide-2004.pdf p3&lt;/p&gt;

&lt;p&gt;The cause is that &lt;tt&gt;groupsDone&lt;/tt&gt; can&apos;t be used as a cache because the code returns false when there&apos;s a &quot;hit&quot;, it&apos;s only designed to protect against endless recursions.&lt;/p&gt;</comment>
                            <comment id="17807677" author="jira-bot" created="Wed, 17 Jan 2024 10:20:00 +0000"  >&lt;p&gt;Commit 1915284 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1915284&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1915284&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5754&quot; title=&quot;PDF conversion in this format is very slow. Is there any room for optimization?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5754&quot;&gt;&lt;del&gt;PDFBOX-5754&lt;/del&gt;&lt;/a&gt;: cache hasBlendMode results&lt;/p&gt;</comment>
                            <comment id="17807678" author="jira-bot" created="Wed, 17 Jan 2024 10:20:03 +0000"  >&lt;p&gt;Commit 1915285 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1915285&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1915285&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5754&quot; title=&quot;PDF conversion in this format is very slow. Is there any room for optimization?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5754&quot;&gt;&lt;del&gt;PDFBOX-5754&lt;/del&gt;&lt;/a&gt;: cache hasBlendMode results&lt;/p&gt;</comment>
                            <comment id="17807679" author="jira-bot" created="Wed, 17 Jan 2024 10:20:07 +0000"  >&lt;p&gt;Commit 1915286 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1915286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1915286&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5754&quot; title=&quot;PDF conversion in this format is very slow. Is there any room for optimization?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5754&quot;&gt;&lt;del&gt;PDFBOX-5754&lt;/del&gt;&lt;/a&gt;: cache hasBlendMode results&lt;/p&gt;</comment>
                            <comment id="17807711" author="tilman" created="Wed, 17 Jan 2024 12:26:02 +0000"  >&lt;p&gt;Previously it took 65 seconds on my machine, now only 6.5 seconds. This is still slow but now I can&apos;t do anything about it, &lt;tt&gt;hasBlendMode()&lt;/tt&gt; must be called to find out whether a backdrop is needed, and this depends on the resources on all levels, so that takes time. Maybe the browsers are faster because their graphics engine is better. Anyway, thanks for reporting this file.&lt;/p&gt;</comment>
                            <comment id="17807786" author="lehmi" created="Wed, 17 Jan 2024 15:51:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; no need to worry, that is ten times faster, good catch. On my machine (Ryzen 5 7600 with 32GB RAM) it took one second, looks fast enough for me&lt;/p&gt;</comment>
                            <comment id="17807788" author="tilman" created="Wed, 17 Jan 2024 15:56:08 +0000"  >&lt;p&gt;&#128077;&lt;/p&gt;</comment>
                            <comment id="17807959" author="JIRAUSER297279" created="Thu, 18 Jan 2024 01:09:59 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13066074" name="image2.pdf" size="678783" author="lycheng" created="Wed, 17 Jan 2024 04:59:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1msyo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>