<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:15:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-6065] LZWFilter crashes, probably not handling the KwKwK special case</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-6065</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The parsing throws an exception when trying to parse an image with the words &quot;The Legend&quot; in the PDF.&lt;/p&gt;

&lt;p&gt;java.io.IOException: negative array index: -1 near offset 1&lt;br/&gt;
&#160; &#160; at org.apache.pdfbox.filter.LZWFilter.checkIndexBounds(LZWFilter.java:136)&lt;br/&gt;
&#160; &#160; at org.apache.pdfbox.filter.LZWFilter.doLZWDecode(LZWFilter.java:110)&lt;br/&gt;
&#160; &#160; at org.apache.pdfbox.filter.LZWFilter.decode(LZWFilter.java:70)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ve not looked into the Lempel-Ziv algorithm since the 90s, so I&apos;m not up to date with all the papers that have been published. And also, I&apos;ve never read the original welsh paper:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://courses.cs.duke.edu/spring03/cps296.5/papers/welch_1984_technique_for.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://courses.cs.duke.edu/spring03/cps296.5/papers/welch_1984_technique_for.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But it seems that ChatGPT was able to find this paper and suggest a patch by rewriting the function handling all cases, not needing the bounds check at all. Not saying that this is the right solution to the problem, but I ran it against our 50k pages from multiple publishers and newspapers without any visual artifacts, and it also works with the example provided in this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13628387">PDFBOX-6065</key>
            <summary>LZWFilter crashes, probably not handling the KwKwK special case</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="kalaspuffar">Daniel Persson</reporter>
                        <labels>
                            <label>LZW</label>
                    </labels>
                <created>Mon, 8 Sep 2025 15:10:21 +0000</created>
                <updated>Thu, 2 Oct 2025 17:40:21 +0000</updated>
                            <resolved>Tue, 9 Sep 2025 08:36:58 +0000</resolved>
                                    <version>2.0.34</version>
                    <version>3.0.5 PDFBox</version>
                                    <fixVersion>2.0.35</fixVersion>
                    <fixVersion>3.0.6 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="18018959" author="tilman" created="Tue, 9 Sep 2025 03:03:03 +0000"  >&lt;p&gt;Thank you, it also works with my test files and improves the rendering of the files from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2989&quot; title=&quot;LZW decode filter shouldn&amp;#39;t throw IndexOutOfBoundsException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2989&quot;&gt;&lt;del&gt;PDFBOX-2989&lt;/del&gt;&lt;/a&gt;. Amusingly I once asked ChatGPT (shortly after it came out) to optimize the LZW code and the code failed the unit test. So ChatGPT has evolved a lot.&lt;/p&gt;</comment>
                            <comment id="18019004" author="jira-bot" created="Tue, 9 Sep 2025 08:33:53 +0000"  >&lt;p&gt;Commit 1928313 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1928313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1928313&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-6065&quot; title=&quot;LZWFilter crashes, probably not handling the KwKwK special case&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-6065&quot;&gt;&lt;del&gt;PDFBOX-6065&lt;/del&gt;&lt;/a&gt;: handle KwKwK special case, by Daniel Persson with ChatGPT&lt;/p&gt;</comment>
                            <comment id="18019005" author="jira-bot" created="Tue, 9 Sep 2025 08:33:57 +0000"  >&lt;p&gt;Commit 1928314 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1928314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1928314&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-6065&quot; title=&quot;LZWFilter crashes, probably not handling the KwKwK special case&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-6065&quot;&gt;&lt;del&gt;PDFBOX-6065&lt;/del&gt;&lt;/a&gt;: handle KwKwK special case, by Daniel Persson with ChatGPT&lt;/p&gt;</comment>
                            <comment id="18019006" author="jira-bot" created="Tue, 9 Sep 2025 08:34:01 +0000"  >&lt;p&gt;Commit 1928315 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1928315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1928315&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-6065&quot; title=&quot;LZWFilter crashes, probably not handling the KwKwK special case&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-6065&quot;&gt;&lt;del&gt;PDFBOX-6065&lt;/del&gt;&lt;/a&gt;: handle KwKwK special case, by Daniel Persson with ChatGPT&lt;/p&gt;</comment>
                            <comment id="18019007" author="tilman" created="Tue, 9 Sep 2025 08:36:58 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13078297" name="elvis5.pdf" size="1345232" author="kalaspuffar" created="Mon, 8 Sep 2025 15:03:36 +0000"/>
                            <attachment id="13078296" name="lzwfilter.patch" size="7378" author="kalaspuffar" created="Mon, 8 Sep 2025 15:03:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1xlps:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>