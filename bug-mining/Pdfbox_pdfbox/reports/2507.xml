<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:11:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5150] 3.0.0-RC1: PDComboBox.setValue() throws IllegalArgumentException: /DA is a required entry</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5150</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;While porting openhtmltopdf to PDFBox 3.0.0-RC1 I got exceptions in some tests:&lt;/p&gt;

&lt;p&gt;The tests com.openhtmltopdf.nonvisualregressiontests.NonVisualRegressionTest#testInputWithoutNameAttribute, com.openhtmltopdf.testcases.CssPropertiesTest#testFormControls and com.openhtmltopdf.testcases.TestcaseRunnerTest#runTestcaseRunner causes the &#8222;field.setValue()&#8220; on a PDComboBox in &lt;a href=&quot;https://github.com/rototor/openhtmltopdf/blob/open-dev-v1-pdfbox-3.0.0/openhtmltopdf-pdfbox/src/main/java/com/openhtmltopdf/pdfboxout/PdfBoxForm.java#L363&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rototor/openhtmltopdf/blob/open-dev-v1-pdfbox-3.0.0/openhtmltopdf-pdfbox/src/main/java/com/openhtmltopdf/pdfboxout/PdfBoxForm.java#L363&lt;/a&gt; to throw this exception:&lt;/p&gt;

&lt;p&gt;java.lang.IllegalArgumentException: /DA is a required entry&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.interactive.form.PDDefaultAppearanceString.&amp;lt;init&amp;gt;(PDDefaultAppearanceString.java:78)&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.interactive.form.PDVariableText.getDefaultAppearanceString(PDVariableText.java:93)&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.interactive.form.AppearanceGeneratorHelper.&amp;lt;init&amp;gt;(AppearanceGeneratorHelper.java:115)&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.interactive.form.PDComboBox.constructAppearances(PDComboBox.java:82)&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.interactive.form.PDTerminalField.applyChange(PDTerminalField.java:210)&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.interactive.form.PDChoice.setValue(PDChoice.java:381)&lt;br/&gt;
 at com.openhtmltopdf.pdfboxout.PdfBoxForm.processSelectControl(PdfBoxForm.java:363)&lt;br/&gt;
 at com.openhtmltopdf.pdfboxout.PdfBoxForm.process(PdfBoxForm.java:807)&lt;br/&gt;
 at com.openhtmltopdf.pdfboxout.PdfBoxPerDocumentFormState.processControls(PdfBoxPerDocumentFormState.java:179)&lt;br/&gt;
 at com.openhtmltopdf.pdfboxout.PdfBoxFastOutputDevice.processControls(PdfBoxFastOutputDevice.java:299)&lt;br/&gt;
 at com.openhtmltopdf.pdfboxout.PdfBoxFastOutputDevice.finish(PdfBoxFastOutputDevice.java:904)&lt;/p&gt;

&lt;p&gt;You can get the project here:&#160;&lt;a href=&quot;https://github.com/rototor/openhtmltopdf/tree/open-dev-v1-pdfbox-3.0.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rototor/openhtmltopdf/tree/open-dev-v1-pdfbox-3.0.0&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;mvn test&lt;/p&gt;

&lt;p&gt;will show you the failing test cases.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13369414">PDFBOX-5150</key>
            <summary>3.0.0-RC1: PDComboBox.setValue() throws IllegalArgumentException: /DA is a required entry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="rototor">Emmeran Seehuber</reporter>
                        <labels>
                    </labels>
                <created>Sat, 3 Apr 2021 15:17:45 +0000</created>
                <updated>Fri, 11 Jun 2021 06:08:27 +0000</updated>
                            <resolved>Sun, 11 Apr 2021 07:04:27 +0000</resolved>
                                    <version>2.0.23</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.24</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>AcroForm</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17314397" author="tilman" created="Sun, 4 Apr 2021 03:59:02 +0000"  >&lt;p&gt;Seems to go away by adding&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; defaultAppearanceString = &lt;span class=&quot;code-quote&quot;&gt;&quot;/Helv 0 Tf 0 g&quot;&lt;/span&gt;;
acro.setDefaultAppearance(defaultAppearanceString);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to &lt;tt&gt;PdfBoxPerDocumentFormState.processControls()&lt;/tt&gt; after the PDAcroForm creation. I wonder why this didn&apos;t fail before.&lt;/p&gt;</comment>
                            <comment id="17314416" author="tilman" created="Sun, 4 Apr 2021 06:31:24 +0000"  >&lt;p&gt;Another (probably better, because it&apos;s using the correct font) solution would be to move &lt;tt&gt;field.setValue(selectedLabel);&lt;/tt&gt; to the bottom in &lt;tt&gt;PdfboxForm.processSelectControl()&lt;/tt&gt;. The first solution should still be done as a fallback.&lt;/p&gt;</comment>
                            <comment id="17315337" author="rototor" created="Tue, 6 Apr 2021 08:14:26 +0000"  >&lt;p&gt;I just tried your example default appearance string, but I then get this example&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.io.IOException: Could not process &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; appearance string &lt;span class=&quot;code-quote&quot;&gt;&apos;/Helv 0 Tf 0.0000 0.0000 0.0000 rg&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; field &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&apos;&lt;/span&gt;: Could not find font: /Helv
	at org.apache.pdfbox.pdmodel.interactive.form.AppearanceGeneratorHelper.&amp;lt;init&amp;gt;(AppearanceGeneratorHelper.java:121)
	at org.apache.pdfbox.pdmodel.interactive.form.PDTextField.constructAppearances(PDTextField.java:261)
	at org.apache.pdfbox.pdmodel.interactive.form.PDTerminalField.applyChange(PDTerminalField.java:210)
	at org.apache.pdfbox.pdmodel.interactive.form.PDTextField.setValue(PDTextField.java:218)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems Helv can not be resolved as font. Shouldn&apos;t this be a builtin font, which can always be found?&lt;/p&gt;

&lt;p&gt;I&apos;ve updated the branch open-dev-v1-pdfbox-3.0.0  with the changes to use Helv as default if no font is given and also set the appearance before the value.&lt;/p&gt;</comment>
                            <comment id="17315738" author="tilman" created="Tue, 6 Apr 2021 17:26:21 +0000"  >&lt;p&gt;Then add this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
resources.put(COSName.HELV, PDType1Font.HELVETICA);
resources.put(COSName.ZA_DB, PDType1Font.ZAPF_DINGBATS);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;with resources being the acroform default resources.&lt;/p&gt;</comment>
                            <comment id="17315781" author="rototor" created="Tue, 6 Apr 2021 18:50:32 +0000"  >&lt;p&gt;Ah ok, now it works. So this is fine for me now. Thanks!&lt;/p&gt;

&lt;p&gt;But I think this should be mentioned in the migration guide.&lt;/p&gt;

&lt;p&gt;Also changing the exception text from&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalArgumentException: /DA is a required entry
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalArgumentException: /DA is a required entry. Please set an appearance first.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;could avoid some future questions.&lt;/p&gt;</comment>
                            <comment id="17318670" author="jira-bot" created="Sun, 11 Apr 2021 07:03:52 +0000"  >&lt;p&gt;Commit 1888605 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1888605&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1888605&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5150&quot; title=&quot;3.0.0-RC1: PDComboBox.setValue() throws IllegalArgumentException: /DA is a required entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5150&quot;&gt;&lt;del&gt;PDFBOX-5150&lt;/del&gt;&lt;/a&gt;: improve exception message, as suggested by Emmeran Seehuber&lt;/p&gt;</comment>
                            <comment id="17318671" author="jira-bot" created="Sun, 11 Apr 2021 07:03:56 +0000"  >&lt;p&gt;Commit 1888606 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1888606&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1888606&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5150&quot; title=&quot;3.0.0-RC1: PDComboBox.setValue() throws IllegalArgumentException: /DA is a required entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5150&quot;&gt;&lt;del&gt;PDFBOX-5150&lt;/del&gt;&lt;/a&gt;: improve exception message, as suggested by Emmeran Seehuber&lt;/p&gt;</comment>
                            <comment id="17319585" author="mkl" created="Mon, 12 Apr 2021 16:56:39 +0000"  >&lt;p&gt;&amp;gt;It seems Helv can not be resolved as font. Shouldn&apos;t this be a builtin font, which can always be found?&lt;/p&gt;

&lt;p&gt;There are no such built-ins in the PDF specification.&lt;/p&gt;

&lt;p&gt;Adobe Reader, though, under certain conditions assumes a set of predefined fonts, &lt;b&gt;Helv&lt;/b&gt;, &lt;b&gt;HeBo&lt;/b&gt;, ...&lt;/p&gt;

&lt;p&gt;Beware, though, not to blindly always add them: If there already is a font named &lt;b&gt;Helv&lt;/b&gt;, that one should remain and not be replaced.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pi60:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>