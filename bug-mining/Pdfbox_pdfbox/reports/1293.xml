<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:02:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3083] Form fields are missing when rendering</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3083</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I was trying to convert my pdf file to image (jpg or png) but only the grey text (see my attached pdf) were successfully converted to an image file but the blue text cannot.&lt;/p&gt;

&lt;p&gt;I&apos;ve try to extract this pdf with several PdfBox versions : 2.0, 1.8.10, and 1.6 but it doesn&apos;t work. &lt;/p&gt;

&lt;p&gt;However, with 1.6, the generated image contains both grey and blue text but in an incorrect layout/alignment.&lt;/p&gt;

&lt;p&gt;Can you please verify this issue?&lt;/p&gt;

&lt;p&gt;Please also let me know if you have any quick fix for this issue.&lt;/p&gt;

&lt;p&gt;-------------------------------&lt;br/&gt;
Attached Sources : &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;mypdf.pdf : original pdf to be converted&lt;/li&gt;
	&lt;li&gt;out_bufferedimage_1.png : converted with PdfBox 2.0 and 1.8.10&lt;/li&gt;
	&lt;li&gt;myout_image_1.jpg :  converted with PdfBox 2.0 and 1.6&lt;br/&gt;
-------------------------------&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks a lot.&lt;/p&gt;

&lt;p&gt;Best,&lt;/p&gt;</description>
                <environment>JDK 1.7, Tomcat 7, Maven 3&lt;br/&gt;
Eclipse IDE (Mars)</environment>
        <key id="12909905">PDFBOX-3083</key>
            <summary>Form fields are missing when rendering</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="bugaonz@gmail.com">Atthapon Junpun-eak</reporter>
                        <labels>
                            <label>AcroForm</label>
                            <label>Annotations</label>
                    </labels>
                <created>Tue, 3 Nov 2015 06:25:14 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:43 +0000</updated>
                            <resolved>Tue, 3 Nov 2015 17:27:53 +0000</resolved>
                                    <version>1.6.0</version>
                    <version>1.8.10</version>
                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14986827" author="tilman" created="Tue, 3 Nov 2015 07:18:06 +0000"  >&lt;p&gt;The page has a 90&#176; rotation. For me, it works by changing one line in PDFStreamEngine.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Matrix aa = Matrix.concatenate(matrix, a);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Matrix aa = Matrix.concatenate(a, matrix);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This change has been sitting around locally for months, so long that I can&apos;t even remember why I had it in the first place. I need to test whether it produces any regressions.&lt;/p&gt;</comment>
                            <comment id="14987123" author="bugaonz@gmail.com" created="Tue, 3 Nov 2015 11:29:22 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Wow! Thanks for quick response.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;May I know when that line of code will be released ?&lt;br/&gt;
Can I have a built package/patch with this line of code ? &lt;br/&gt;
(I&apos;d like to have a quick fix for my project &lt;sup&gt;_&lt;/sup&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Do you have suggestions how I can use this line without having to modified PdfBox i.e. creating a new class which extends PDFStreamEngine class, possible ?&lt;/li&gt;
&lt;/ul&gt;




&lt;p&gt;Sorry for some more questions.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Did you test this with PdfBox version 2.0.0 ?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The code below is what I&apos;m using to convert pdf to image.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Can you help share your correct code to me also?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Converter Code&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDDocument pdfDoc = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            pdfDoc = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;D:/tmp/myout.pdf&quot;&lt;/span&gt;));
           
            PDFRenderer renderer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFRenderer(pdfDoc);

            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; pdfDoc.getNumberOfPages(); i++) 
            {
                &lt;span class=&quot;code-comment&quot;&gt;//----------------------- Buffered Image - PDFBOX 2.0----------------
&lt;/span&gt;                BufferedImage bufferedImage = renderer.renderImage(i, 1);
                File imageFile2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;D:/tmp/out_bufferedimage_&quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.toString(i + 1)+&lt;span class=&quot;code-quote&quot;&gt;&quot;.png&quot;&lt;/span&gt;);
                ImageIO.write(bufferedImage, &lt;span class=&quot;code-quote&quot;&gt;&quot;png&quot;&lt;/span&gt;, imageFile2);
            }
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;File myout_image could not be read.&quot;&lt;/span&gt;, e);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt;
        {
           &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( pdfDoc != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; )
           {
        	   pdfDoc.close();
           }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thanks a lot for your help&lt;/p&gt;</comment>
                            <comment id="14987597" author="tilman" created="Tue, 3 Nov 2015 16:53:01 +0000"  >&lt;p&gt;Your code is fine, although I recommend to use the ImageIOUtils methods to save images.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit the change (2.0 only) after more tests. Using the change without altering the source code would be difficult and overkill. The regression tests passed this morning, but this is because I didn&apos;t have any other file with similar characteristics. (Field or annotation with matrix in the appearance xform) While away I let run a tool to find more test files and I&apos;ll look at the results now and test these.&lt;/p&gt;</comment>
                            <comment id="14987621" author="tilman" created="Tue, 3 Nov 2015 17:07:23 +0000"  >&lt;p&gt;Added two more files with the problem. Not added, just a reminder for me:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;018012.pdf p41&lt;/li&gt;
	&lt;li&gt;098907.pdf (must be filled and saved)&lt;/li&gt;
	&lt;li&gt;107172.pdf p10&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14987668" author="jira-bot" created="Tue, 3 Nov 2015 17:22:57 +0000"  >&lt;p&gt;Commit 1712353 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1712353&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1712353&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3083&quot; title=&quot;Form fields are missing when rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3083&quot;&gt;&lt;del&gt;PDFBOX-3083&lt;/del&gt;&lt;/a&gt;: reverse concatenation order so that rotated pages with appearance streams (filled field or annotation) with a matrix are rendered correctly&lt;/p&gt;</comment>
                            <comment id="14987675" author="jira-bot" created="Tue, 3 Nov 2015 17:26:27 +0000"  >&lt;p&gt;Commit 1712354 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1712354&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1712354&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3083&quot; title=&quot;Form fields are missing when rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3083&quot;&gt;&lt;del&gt;PDFBOX-3083&lt;/del&gt;&lt;/a&gt;: add comment&lt;/p&gt;</comment>
                            <comment id="14987677" author="tilman" created="Tue, 3 Nov 2015 17:27:17 +0000"  >&lt;p&gt;So that&apos;s it... all files render correctly with the change and don&apos;t without. Unless I&apos;m terribly mistaken, this is the second error in the spec I found (the other was in encryption, see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2456&quot; title=&quot;create TestSymmetricKeyEncryption.java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2456&quot;&gt;&lt;del&gt;PDFBOX-2456&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14988854" author="bugaonz@gmail.com" created="Wed, 4 Nov 2015 04:27:43 +0000"  >&lt;p&gt;Great thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;I&apos;ll reload the dependency and test the 2.0 again.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14988960" author="bugaonz@gmail.com" created="Wed, 4 Nov 2015 06:10:00 +0000"  >&lt;p&gt;Tested with PdfBox2.0 -snapshot and worked perfectly !&lt;/p&gt;

&lt;p&gt;NOTE: PdfBox 2.0 doesn&apos;t have ImageIOUtils  ?&lt;/p&gt;</comment>
                            <comment id="14988961" author="bugaonz@gmail.com" created="Wed, 4 Nov 2015 06:11:00 +0000"  >&lt;p&gt;The snapshot worked perfectly even with &quot;ImageIO&quot; but PdfBox 2.0 doesn&apos;t have ImageIOUtils anymore?&lt;/p&gt;</comment>
                            <comment id="14988964" author="tilman" created="Wed, 4 Nov 2015 06:13:34 +0000"  >&lt;p&gt;Sorry, it&apos;s called ImageIOUtil. In org.apache.pdfbox.tools.imageio.ImageIOUtil.&lt;/p&gt;</comment>
                            <comment id="14989004" author="msahyoun" created="Wed, 4 Nov 2015 06:39:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; could you point me to the section(s) so I can check if that is corrected in PDF 2.0 (or at least I can comment on that)&lt;/p&gt;</comment>
                            <comment id="14989016" author="tilman" created="Wed, 4 Nov 2015 06:48:36 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;annotations: in 12.5.5 Appearance Streams. Text is &quot;Matrix shall be concatenated with A to form a matrix AA&quot; should be &quot;Matrix shall be concatenated to A to form a matrix AA&quot; and the formula below must be changed too.&lt;/li&gt;
	&lt;li&gt;encryption: see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2456?focusedCommentId=14205031&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14205031&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this comment&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14989032" author="msahyoun" created="Wed, 4 Nov 2015 06:59:15 +0000"  >&lt;p&gt;annotations: PDF 2.0&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Matrix shall be concatenated with A to form a matrix AA that maps from the appearance&#8217;s coordinate system to the annotation&#8217;s rectangle in default user space:&lt;/p&gt;

&lt;p&gt;&#119860;&#119860; = &#119872;&#119886;&#119905;&#119903;&#119894;&#119909; &#215; &#119860;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;so that&apos;s correct now&lt;/p&gt;</comment>
                            <comment id="14989042" author="msahyoun" created="Wed, 4 Nov 2015 07:07:52 +0000"  >&lt;p&gt;encryption: that isn&apos;t changed in PDF 2.0&lt;/p&gt;</comment>
                            <comment id="14989108" author="tilman" created="Wed, 4 Nov 2015 08:23:25 +0000"  >&lt;p&gt;But that is the same as now?!&lt;/p&gt;</comment>
                            <comment id="14989161" author="msahyoun" created="Wed, 4 Nov 2015 09:04:04 +0000"  >&lt;p&gt;sry - PDF 1.7 has it the other ways around&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;AA = A &#215; Matrix&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14992168" author="jahewson" created="Thu, 5 Nov 2015 18:19:20 +0000"  >&lt;p&gt;Yes, it&apos;s correct in ISO 32000. It was PDFBox which contained the mistake, which you&apos;ve now fixed.&lt;/p&gt;</comment>
                            <comment id="15000664" author="msahyoun" created="Wed, 11 Nov 2015 16:53:17 +0000"  >&lt;p&gt;I&apos;ve got confirmation that &lt;tt&gt;AA = Matrix x A&lt;/tt&gt; should be correct.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12770350" name="PDFBOX-3083-000826-p5.pdf" size="243892" author="tilman" created="Tue, 3 Nov 2015 17:07:23 +0000"/>
                            <attachment id="12770351" name="PDFBOX-3083-083478-p22.pdf" size="43346" author="tilman" created="Tue, 3 Nov 2015 17:07:23 +0000"/>
                            <attachment id="12770272" name="PDFBOX-3083-acroform90&#176;1.jpg" size="282514" author="tilman" created="Tue, 3 Nov 2015 07:41:33 +0000"/>
                            <attachment id="12770265" name="myout_image_1.jpg" size="145046" author="bugaonz@gmail.com" created="Tue, 3 Nov 2015 06:28:33 +0000"/>
                            <attachment id="12770263" name="mypdf.pdf" size="73395" author="bugaonz@gmail.com" created="Tue, 3 Nov 2015 06:26:23 +0000"/>
                            <attachment id="12770264" name="out_bufferedimage_1.png" size="34964" author="bugaonz@gmail.com" created="Tue, 3 Nov 2015 06:27:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nv47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>