<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:54:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1735] Convert page pdf to image</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1735</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I&apos;m in the fight to perfectly convert a PDF to an image.&lt;br/&gt;
But the stacktrace below breaks my application!&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;br/&gt;
Out 02, 2013 3:22:35 PM org.apache.pdfbox.pdmodel.graphics.xobject.PDPixelMap getRGBImage&lt;br/&gt;
SEVERE: Something went wrong ... the pixelmap doesn&apos;t contain any data.&lt;br/&gt;
Out 02, 2013 3:22:35 PM org.apache.pdfbox.util.operator.pagedrawer.Invoke process&lt;br/&gt;
WARNING: getRGBImage returned NULL&lt;br/&gt;
Out 02, 2013 3:22:35 PM org.apache.pdfbox.util.PDFStreamEngine processOperator&lt;br/&gt;
INFO: unsupported/disabled operation: i&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;br/&gt;
I really need to fix this problem in order to succeed in converting&lt;br/&gt;
You know why this error occurs?&lt;br/&gt;
You know how I can fix this error?&lt;br/&gt;
is some dependence of my environment that i forgot? or a failure of PDFBox framewor ?&lt;/p&gt;

&lt;p&gt;Follow my code below:&lt;br/&gt;
&amp;#8212;&lt;/p&gt;

&lt;p&gt;	public static List&amp;lt;BufferedImage&amp;gt; getPdfPagesAsImages(String pdfPath, int i)&lt;br/&gt;
			throws FileNotFoundException, IOException {&lt;br/&gt;
		List&amp;lt;BufferedImage&amp;gt; bImages = new ArrayList&amp;lt;BufferedImage&amp;gt;();&lt;/p&gt;

&lt;p&gt;		File f = new File(pdfPath);&lt;br/&gt;
		if (f.exists()) {&lt;br/&gt;
		int resolution = 185;&lt;br/&gt;
		PDDocument pdfDocument = null;&lt;/p&gt;

&lt;p&gt;		pdfDocument = PDDocument.loadNonSeq(f, null);&lt;/p&gt;

&lt;p&gt;		if (pdfDocument != null) {&lt;br/&gt;
			@SuppressWarnings(&quot;unchecked&quot;)&lt;br/&gt;
			List&amp;lt;PDPage&amp;gt; pages = (List&amp;lt;PDPage&amp;gt;) pdfDocument&lt;br/&gt;
					.getDocumentCatalog().getAllPages();&lt;br/&gt;
			int j = 1;&lt;br/&gt;
			for (PDPage p : pages) {&lt;br/&gt;
				System.out.println(j);&lt;br/&gt;
				BufferedImage convertedImage = p.convertToImage(&lt;br/&gt;
						BufferedImage.TYPE_INT_BGR , resolution);&lt;br/&gt;
				saveImageToRepository(i, j, convertedImage);			&lt;br/&gt;
				j++;&lt;br/&gt;
				if (isNegativeImage(convertedImage)) &lt;/p&gt;
{
					bImages.add(invertNegativeImage(convertedImage));
				}
&lt;p&gt; else &lt;/p&gt;
{
					bImages.add(convertedImage);
				}

&lt;p&gt;			}&lt;br/&gt;
			System.out.println(pdfPath +&quot; sucess&quot;);&lt;br/&gt;
		}	&lt;br/&gt;
		pdfDocument.close();&lt;br/&gt;
		}else&lt;/p&gt;
{
			System.out.println(pdfPath +&quot; nao existe&quot;);
		}
&lt;p&gt;		return bImages;&lt;br/&gt;
	}&lt;/p&gt;


&lt;p&gt;	private static void saveImageToRepository(int i, int j,&lt;br/&gt;
			BufferedImage convertedImage) throws IOException &lt;/p&gt;
{
		File outputfile = new File(&quot;C:/Desenvolvimento/bkp/convertido/&quot; + i + j+ &quot;.png&quot;);
		ImageIO.write(convertedImage, &quot;png&quot;, outputfile);


	}


&lt;p&gt;&amp;#8212;&lt;br/&gt;
I create a list of images&lt;br/&gt;
these images are saved to be loaded in the browser later on a JSF component.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</description>
                <environment>Windows 8&lt;br/&gt;
JDK 1.7&lt;br/&gt;
Jboss 7.1&lt;br/&gt;
</environment>
        <key id="12672014">PDFBOX-1735</key>
            <summary>Convert page pdf to image</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="paulocamargomello">Paulo R C Mello Junior</reporter>
                        <labels>
                            <label>JPEG2000</label>
                            <label>JPXDecode</label>
                    </labels>
                <created>Wed, 2 Oct 2013 19:46:02 +0000</created>
                <updated>Sat, 30 Nov 2013 17:02:05 +0000</updated>
                            <resolved>Thu, 3 Oct 2013 13:54:22 +0000</resolved>
                                    <version>1.8.2</version>
                                    <fixVersion>1.8.3</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13784350" author="paulocamargomello" created="Wed, 2 Oct 2013 19:49:58 +0000"  >&lt;p&gt;This is my file that is presenting this exception.&lt;br/&gt;
He and many other files have the same problem.&lt;br/&gt;
But not only in my Windows machine.&lt;br/&gt;
On the production server, which is a linux environment also presents the same problem.&lt;/p&gt;</comment>
                            <comment id="13784389" author="tilman" created="Wed, 2 Oct 2013 20:27:38 +0000"  >&lt;p&gt;Despite the error message, I still get a rendered image. It is inverted, I think thats a bug, because acrobat reader has it nicely.&lt;/p&gt;

&lt;p&gt;The error message indicates that an image there is encoded in the JPG2000 format. The source code looks conflicting whether it is supported or not. However its only that image on the botton left that is coded that way (&quot;assinado digitalmente&quot;), the image that indicates the electronic signature. Do you need it?&lt;/p&gt;</comment>
                            <comment id="13784459" author="tilman" created="Wed, 2 Oct 2013 21:32:00 +0000"  >&lt;p&gt;I see now that your error msg isn&apos;t the same as mine. You must add the java imaging library to your application.&lt;br/&gt;
jai_codec.jar, jai_core.jar and jai_imageio.jar.&lt;br/&gt;
&lt;a href=&quot;http://download.java.net/media/jai-imageio/builds/release/1.1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://download.java.net/media/jai-imageio/builds/release/1.1/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://download.java.net/media/jai/builds/release/1_1_3/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://download.java.net/media/jai/builds/release/1_1_3/&lt;/a&gt;&lt;br/&gt;
Maybe its already on your computer.&lt;/p&gt;</comment>
                            <comment id="13784952" author="tilman" created="Thu, 3 Oct 2013 09:53:35 +0000"  >&lt;p&gt;I was able to decode the JPEG2000 image and to render it. The problem is that the width and height in the PDF are incorrect, that it has no colorspace&lt;br/&gt;
&lt;a href=&quot;http://www.verypdf.com/document/pdf-format-reference/pg_0340.htm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.verypdf.com/document/pdf-format-reference/pg_0340.htm&lt;/a&gt;&lt;br/&gt;
So I took these from the image itself.&lt;br/&gt;
change 1:&lt;br/&gt;
in PDPixelMap.getRGBImage() add this after &quot;if (array.length == 0)&quot;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (COSName.JPX_DECODE.equals(getCOSStream().getItem(COSName.FILTER)))
{
     width = getWidth();
     height = getHeight();
     bpc = getBitsPerComponent();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(The &quot;if&quot; part here is probably not needed and just to make sure that my change doesn&apos;t affect anything else. It is probably enough to just move the three (same) assignments from above to here, I&apos;ll do more tests later.&lt;/p&gt;

&lt;p&gt;change 2)&lt;br/&gt;
in JPXFilter.java after the ImageIO.read() call, in the &quot;if&quot; branch, add this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (options.getItem(COSName.COLORSPACE) == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
    options.setItem(COSName.COLORSPACE, PDColorSpaceFactory.createColorSpace(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, bi.getColorModel().getColorSpace()));
options.setInt(COSName.BITS_PER_COMPONENT, bi.getColorModel().getPixelSize() / bi.getColorModel().getNumComponents());
options.setInt(COSName.BPC, bi.getColorModel().getPixelSize() / bi.getColorModel().getNumComponents());
options.setInt(COSName.HEIGHT, bi.getHeight());
options.setInt(COSName.WIDTH, bi.getWidth());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The intent of all this is to pass the info from the image itself to the layers above.&lt;/p&gt;

&lt;p&gt;Next thing I will try to find out why the image is rendered inverted.&lt;/p&gt;

&lt;p&gt;Paulo, please add the labels JPEG2000 and JPXDecode to this jira.&lt;/p&gt;</comment>
                            <comment id="13784995" author="lehmi" created="Thu, 3 Oct 2013 11:01:59 +0000"  >&lt;p&gt;I already found the reason for the inverted images, but I&apos;m still working on some sideeffects&lt;/p&gt;</comment>
                            <comment id="13785005" author="tilman" created="Thu, 3 Oct 2013 11:18:07 +0000"  >&lt;p&gt;The image is inverted because of this in the PDF:&lt;br/&gt;
&quot;ColorSpace/DeviceGray/Decode [ 1 0 ]&quot;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.verypdf.com/document/pdf-format-reference/pg_0345.htm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.verypdf.com/document/pdf-format-reference/pg_0345.htm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Because we&apos;re handling a bitonal image, any non default decode array means a swap of 1 and 0. I added this in PDCcitt.java after the first occurence of &quot;blackIsOne&quot;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;//TH &lt;span class=&quot;code-quote&quot;&gt;&quot;ColorSpace/DeviceGray/Decode [ 1 0 ]&quot;&lt;/span&gt; means we swap
&lt;/span&gt;COSBase decode = stream.getDictionaryObject(COSName.DECODE);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (decode != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; decode &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSArray &amp;amp;&amp;amp; ((COSArray) decode).getInt(0) == 1)
    blackIsOne = !blackIsOne;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13785009" author="tilman" created="Thu, 3 Oct 2013 11:21:55 +0000"  >&lt;p&gt;I see that once again messages crossed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13785040" author="lehmi" created="Thu, 3 Oct 2013 12:36:36 +0000"  >&lt;p&gt;I added the changes in revision 1528826 &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; as proposed by Tilman with some slight changes.&lt;/p&gt;

&lt;p&gt;Thanks for contribution!&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://svn.apache.org/r1528826&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1528826&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13785072" author="paulocamargomello" created="Thu, 3 Oct 2013 13:21:42 +0000"  >&lt;p&gt;Thank you&lt;/p&gt;</comment>
                            <comment id="13785076" author="paulocamargomello" created="Thu, 3 Oct 2013 13:24:04 +0000"  >&lt;p&gt;Solved with guidelines posted on the historical&lt;/p&gt;</comment>
                            <comment id="13785201" author="lehmi" created="Thu, 3 Oct 2013 13:54:16 +0000"  >&lt;p&gt;Please don&apos;t close issues yourself, I&apos;ll close it after releasing it as it&apos;s part of a new PDFBox version&lt;/p&gt;</comment>
                            <comment id="13824853" author="lehmi" created="Sun, 17 Nov 2013 14:33:23 +0000"  >&lt;p&gt;Merged into 1.8-branch in revision 1542735&lt;/p&gt;</comment>
                            <comment id="13835791" author="lehmi" created="Sat, 30 Nov 2013 17:02:05 +0000"  >&lt;p&gt;Closed after releasing 1.8.3&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351640</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ommn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351928</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>