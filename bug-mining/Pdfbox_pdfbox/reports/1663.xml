<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:05:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3668] COSParser can&apos;t detect length of stream and then PDFRenderer does not render pages at some files</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3668</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I have a lot of files when PDF Box can&apos;t render pages to PNG files.&lt;br/&gt;
Example with one of these files in attachement.&lt;/p&gt;

&lt;p&gt;In result I have console log:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;jan 30, 2017 4:45:07 PM org.apache.pdfbox.pdfparser.COSParser parseCOSStream
WARNING: The stream doesn&apos;t provide any stream length, using fallback readUntilEnd, at offset 764
jan 30, 2017 4:45:07 PM org.apache.pdfbox.pdfparser.COSParser parseCOSStream
WARNING: The stream doesn&apos;t provide any stream length, using fallback readUntilEnd, at offset 519350
jan 30, 2017 4:45:08 PM org.apache.pdfbox.contentstream.PDFStreamEngine operatorException
WARNING: Image stream is empty
jan 30, 2017 4:45:08 PM org.apache.pdfbox.contentstream.PDFStreamEngine operatorException
WARNING: Image stream is empty

&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; finished with exit code 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And white pages as result of rendering.&lt;/p&gt;</description>
                <environment>JRE 1.8</environment>
        <key id="13038875">PDFBOX-3668</key>
            <summary>COSParser can&apos;t detect length of stream and then PDFRenderer does not render pages at some files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="vsp">Vitaliy Parfenov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jan 2017 11:58:35 +0000</created>
                <updated>Thu, 8 Jun 2017 17:57:52 +0000</updated>
                            <resolved>Mon, 30 Jan 2017 20:02:58 +0000</resolved>
                                    <version>2.0.4</version>
                                    <fixVersion>2.0.5</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15845531" author="lehmi" created="Mon, 30 Jan 2017 17:32:10 +0000"  >&lt;p&gt;The length of the image streams is missing. PDFBox is able to repair that, but the calculated length is removed after that so that PDImage#isEmpty returns true. If it isn&apos;t removed everything works fine&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Do you have any idea why we remove the calculated length? (see COSParser#parseCOSStream)&lt;/p&gt;</comment>
                            <comment id="15845532" author="tilman" created="Mon, 30 Jan 2017 17:34:00 +0000"  >&lt;p&gt;Your file is incorrect, the streams don&apos;t have their mandatory /Length entry. But our code is incorrect too, it is able to read the stream, and createRawOutputStream() sets COSName.LENGTH in close() but then the caller does this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;stream.removeItem(COSName.LENGTH);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This has the effect later that an empty check is true.&lt;/p&gt;

&lt;p&gt;I suspect that I inserted this myself years ago elsewhere and it landed here in refactoring, but can&apos;t find out why. I&apos;ll remove that line in 2.0, and in the trunk I&apos;ll remove all these weird code segments with comment &quot;restore original (possibly incorrect) length&quot;. All I remember that we had some really weird problems with incorrect stream lengths. I&apos;ll run all the tests, will look at old issues (e.g. &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2296&quot; title=&quot;Wrong stream length&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2296&quot;&gt;&lt;del&gt;PDFBOX-2296&lt;/del&gt;&lt;/a&gt;) and then we&apos;ll see.&lt;/p&gt;

&lt;p&gt;Currently COSName.LENGTH is used only in getLength() and that one is used only to check if empty or not.&lt;/p&gt;</comment>
                            <comment id="15845571" author="tilman" created="Mon, 30 Jan 2017 17:59:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; I have no idea, but there was a lot of weirdness with the length a few years ago. It was introduced in rev 1694004. I thought that the comment was from me, but after looking at the full commit I can&apos;t see that it was deleted elsewhere.&lt;/p&gt;</comment>
                            <comment id="15845612" author="lehmi" created="Mon, 30 Jan 2017 18:19:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; I&apos;ve hoped you may remember some of the details. Let&apos;s see what happens if that code is removed&lt;/p&gt;</comment>
                            <comment id="15845661" author="jira-bot" created="Mon, 30 Jan 2017 18:45:31 +0000"  >&lt;p&gt;Commit 1780964 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1780964&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1780964&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3668&quot; title=&quot;COSParser can&amp;#39;t detect length of stream and then PDFRenderer does not render pages at some files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3668&quot;&gt;&lt;del&gt;PDFBOX-3668&lt;/del&gt;&lt;/a&gt;: don&apos;t delete /Length after successful reading&lt;/p&gt;</comment>
                            <comment id="15845662" author="jira-bot" created="Mon, 30 Jan 2017 18:45:37 +0000"  >&lt;p&gt;Commit 1780965 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1780965&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1780965&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3668&quot; title=&quot;COSParser can&amp;#39;t detect length of stream and then PDFRenderer does not render pages at some files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3668&quot;&gt;&lt;del&gt;PDFBOX-3668&lt;/del&gt;&lt;/a&gt;: don&apos;t delete /Length after successful reading&lt;/p&gt;</comment>
                            <comment id="15845694" author="tilman" created="Mon, 30 Jan 2017 19:03:21 +0000"  >&lt;p&gt;Tests successful... Now running tests after removing all weird code.&lt;/p&gt;</comment>
                            <comment id="15845815" author="jira-bot" created="Mon, 30 Jan 2017 19:59:43 +0000"  >&lt;p&gt;Commit 1780977 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1780977&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1780977&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3668&quot; title=&quot;COSParser can&amp;#39;t detect length of stream and then PDFRenderer does not render pages at some files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3668&quot;&gt;&lt;del&gt;PDFBOX-3668&lt;/del&gt;&lt;/a&gt;: remove the setting of possibly incorrect length&lt;/p&gt;</comment>
                            <comment id="15845818" author="tilman" created="Mon, 30 Jan 2017 20:02:38 +0000"  >&lt;p&gt;All tests good. I&apos;ve also added the file to my test set.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vsp&quot; class=&quot;user-hover&quot; rel=&quot;vsp&quot;&gt;vsp&lt;/a&gt; a snapshot will be available soon&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.5-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.5-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16042812" author="tom_1st" created="Thu, 8 Jun 2017 15:00:25 +0000"  >&lt;p&gt;I get this error in Version 2.0.6 - so is the PDF broken or the bug still there?&lt;br/&gt;
WARNING: The stream doesn&apos;t provide any stream length, using fallback readUntilEnd, at offset 1508&lt;/p&gt;</comment>
                            <comment id="16042836" author="tilman" created="Thu, 8 Jun 2017 15:16:33 +0000"  >&lt;p&gt;By itself, this WARNING only means that the PDF is broken (no stream length), and that PDFBox is doing a fallback by reading until &quot;endstream&quot;. It does not mean that the bug is still there. You can open the file with NOTEPAD++ and go to that offset to see what happened.&lt;/p&gt;</comment>
                            <comment id="16042880" author="tom_1st" created="Thu, 8 Jun 2017 15:37:33 +0000"  >&lt;p&gt;How do I do that? If I use the &quot;got to&quot; function I am in the middle of the xref table...&lt;/p&gt;</comment>
                            <comment id="16042893" author="tilman" created="Thu, 8 Jun 2017 15:46:55 +0000"  >&lt;p&gt;Did you switch from &quot;line&quot; to &quot;character&quot; in the goto dialog?&lt;/p&gt;</comment>
                            <comment id="16042919" author="tom_1st" created="Thu, 8 Jun 2017 16:00:14 +0000"  >&lt;p&gt;Yes I did. I in the middle of the xref table:&lt;br/&gt;
0000025279 00000 n&lt;/p&gt;

&lt;p&gt;Or should I follow that, too? Then I&apos;m at an form field element, which however has the length set...&lt;/p&gt;

&lt;p&gt;84 0 obj&lt;br/&gt;
&amp;lt;&amp;lt;/Subtype/Form/Length 26/ &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16042944" author="tilman" created="Thu, 8 Jun 2017 16:13:33 +0000"  >&lt;p&gt;Sounds messy. Better open a new issue, or upload the file somewhere and post the URL in the mailing list.&lt;/p&gt;</comment>
                            <comment id="16043146" author="tilman" created="Thu, 8 Jun 2017 17:57:52 +0000"  >&lt;p&gt;Explanation in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3817&quot; title=&quot;Signature form names not standard&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3817&quot;&gt;&lt;del&gt;PDFBOX-3817&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12849951" name="pdfbox-bug.zip" size="1094945" author="vsp" created="Mon, 30 Jan 2017 11:58:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39d5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>