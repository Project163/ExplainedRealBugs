<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:11:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5190] BaseParser: stack overflow when reading a corrupt pdf</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5190</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The attached file leads to a StackOverflowError while loading it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13377419">PDFBOX-5190</key>
            <summary>BaseParser: stack overflow when reading a corrupt pdf</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="lehmi">Andreas Lehmk&#252;hler</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 May 2021 10:44:42 +0000</created>
                <updated>Fri, 11 Jun 2021 06:08:14 +0000</updated>
                            <resolved>Tue, 11 May 2021 19:16:37 +0000</resolved>
                                    <version>2.0.23</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.24</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17341272" author="lehmi" created="Sat, 8 May 2021 10:47:16 +0000"  >&lt;p&gt;The given pdf is just a middle part of a pdf. The exception occurs when rebuilding the header using the brute force parser.&lt;/p&gt;

&lt;p&gt;Object 20 0 is a compressed object stream which was modified by adding a lot 0-bytes. That leads to an interesting stream when decompressing it using a FlateFilter. In the beginning the first part of the stream is repeated several times, which isn&apos;t a real issue at all, as those object aren&apos;t added to the corresponding COSDictionary as they are already there. But after some time the following content occurs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/Parent 0 R/Resources 13 0 R/MediaBox[0 0 595.2756 841.8898]/TrimBox [ox [ox [ox [ox [ox [ox [ox [ox [ox
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&quot;/Parent 0 R&quot; leads to a parser error but PDFBox is more or less able to recover from it. But after &quot;/TrimBox&quot; the parser tries to read a COSArray. As there are a lot of consecutive &quot;[ox&quot; strings PDFBox runs into a recursive loop and ended up in a stack overflow. &lt;/p&gt;</comment>
                            <comment id="17341276" author="jira-bot" created="Sat, 8 May 2021 11:09:50 +0000"  >&lt;p&gt;Commit 1889670 from lehmi@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1889670&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1889670&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5190&quot; title=&quot;BaseParser: stack overflow when reading a corrupt pdf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5190&quot;&gt;&lt;del&gt;PDFBOX-5190&lt;/del&gt;&lt;/a&gt;: don&apos;t create COSName instance for an empty string&lt;/p&gt;</comment>
                            <comment id="17341278" author="jira-bot" created="Sat, 8 May 2021 11:12:50 +0000"  >&lt;p&gt;Commit 1889671 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1889671&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1889671&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5190&quot; title=&quot;BaseParser: stack overflow when reading a corrupt pdf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5190&quot;&gt;&lt;del&gt;PDFBOX-5190&lt;/del&gt;&lt;/a&gt;: don&apos;t create COSName instance for an empty string&lt;/p&gt;</comment>
                            <comment id="17341280" author="jira-bot" created="Sat, 8 May 2021 11:15:51 +0000"  >&lt;p&gt;Commit 1889672 from lehmi@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1889672&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1889672&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5190&quot; title=&quot;BaseParser: stack overflow when reading a corrupt pdf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5190&quot;&gt;&lt;del&gt;PDFBOX-5190&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;</comment>
                            <comment id="17341281" author="jira-bot" created="Sat, 8 May 2021 11:15:59 +0000"  >&lt;p&gt;Commit 1889673 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1889673&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1889673&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5190&quot; title=&quot;BaseParser: stack overflow when reading a corrupt pdf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5190&quot;&gt;&lt;del&gt;PDFBOX-5190&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;</comment>
                            <comment id="17341495" author="tilman" created="Sun, 9 May 2021 11:22:52 +0000"  >&lt;p&gt;This brings problems with the two attached files which have empty names (isolated &quot;/&quot;).&lt;/p&gt;</comment>
                            <comment id="17341508" author="lehmi" created="Sun, 9 May 2021 12:47:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; What exactly is the issue?&lt;/p&gt;</comment>
                            <comment id="17341515" author="tilman" created="Sun, 9 May 2021 14:11:05 +0000"  >&lt;p&gt;Parser log messages and different renderings.&lt;/p&gt;</comment>
                            <comment id="17341673" author="jira-bot" created="Mon, 10 May 2021 05:57:12 +0000"  >&lt;p&gt;Commit 1889715 from lehmi@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1889715&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1889715&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5190&quot; title=&quot;BaseParser: stack overflow when reading a corrupt pdf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5190&quot;&gt;&lt;del&gt;PDFBOX-5190&lt;/del&gt;&lt;/a&gt;: revert changes as those were too strict&lt;/p&gt;</comment>
                            <comment id="17341674" author="jira-bot" created="Mon, 10 May 2021 05:57:45 +0000"  >&lt;p&gt;Commit 1889716 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1889716&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1889716&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5190&quot; title=&quot;BaseParser: stack overflow when reading a corrupt pdf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5190&quot;&gt;&lt;del&gt;PDFBOX-5190&lt;/del&gt;&lt;/a&gt;: revert changes as those were too strict&lt;/p&gt;</comment>
                            <comment id="17341678" author="lehmi" created="Mon, 10 May 2021 06:00:58 +0000"  >&lt;p&gt;I&apos;ve reverted the changes to COSNameas those were too strict. I didn&apos;t expect any real impact but Tilman, agaon, proved me wrong. Thanks for the point.&lt;/p&gt;

&lt;p&gt;BTW, those changes weren&apos;t part of my solution, I just saw tha glitch and thought it might be worth to improve it. &lt;/p&gt;</comment>
                            <comment id="17341687" author="tilman" created="Mon, 10 May 2021 06:17:26 +0000"  >&lt;p&gt;Thanks, all ok now&lt;/p&gt;</comment>
                            <comment id="17342052" author="tilman" created="Mon, 10 May 2021 17:57:41 +0000"  >&lt;p&gt;Oops, &quot;all&quot; here meant all renderings. One build test fails (testEmptyName)&lt;/p&gt;</comment>
                            <comment id="17342104" author="jira-bot" created="Mon, 10 May 2021 19:32:56 +0000"  >&lt;p&gt;Commit 1889733 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1889733&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1889733&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5190&quot; title=&quot;BaseParser: stack overflow when reading a corrupt pdf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5190&quot;&gt;&lt;del&gt;PDFBOX-5190&lt;/del&gt;&lt;/a&gt;: remove test due to reverting the changes on COSName&lt;/p&gt;</comment>
                            <comment id="17342105" author="jira-bot" created="Mon, 10 May 2021 19:33:46 +0000"  >&lt;p&gt;Commit 1889734 from lehmi@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1889734&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1889734&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5190&quot; title=&quot;BaseParser: stack overflow when reading a corrupt pdf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5190&quot;&gt;&lt;del&gt;PDFBOX-5190&lt;/del&gt;&lt;/a&gt;: remove test due to reverting the changes on COSName&lt;/p&gt;</comment>
                            <comment id="17342322" author="jira-bot" created="Tue, 11 May 2021 05:58:45 +0000"  >&lt;p&gt;Commit 1889740 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1889740&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1889740&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5190&quot; title=&quot;BaseParser: stack overflow when reading a corrupt pdf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5190&quot;&gt;&lt;del&gt;PDFBOX-5190&lt;/del&gt;&lt;/a&gt;: abort parsing a corrupt COSArray to avoid an infinite loop/stack overflow&lt;/p&gt;</comment>
                            <comment id="17342323" author="jira-bot" created="Tue, 11 May 2021 05:58:59 +0000"  >&lt;p&gt;Commit 1889741 from lehmi@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1889741&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1889741&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5190&quot; title=&quot;BaseParser: stack overflow when reading a corrupt pdf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5190&quot;&gt;&lt;del&gt;PDFBOX-5190&lt;/del&gt;&lt;/a&gt;: abort parsing a corrupt COSArray to avoid an infinite loop/stack overflow&lt;/p&gt;</comment>
                            <comment id="17342325" author="lehmi" created="Tue, 11 May 2021 06:02:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; I&apos;ve committed my fix and there might be some side effects. Please run your private test arena if possible. Thanks in advance&lt;/p&gt;</comment>
                            <comment id="17342662" author="tilman" created="Tue, 11 May 2021 15:27:31 +0000"  >&lt;p&gt;Build and rendering work fine!&lt;/p&gt;</comment>
                            <comment id="17342821" author="lehmi" created="Tue, 11 May 2021 19:16:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Thanks for the fast feedback and the good news. It looks like my patch is selective enough&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13025206" name="PDFBOX-1988.pdf" size="4233" author="tilman" created="Sun, 9 May 2021 11:21:13 +0000"/>
                            <attachment id="13025209" name="PDFBOX-1988.pdf-1.png" size="21205" author="tilman" created="Sun, 9 May 2021 14:10:58 +0000"/>
                            <attachment id="13025210" name="PDFBOX-1988.pdf-1.png-diff.png" size="33961" author="tilman" created="Sun, 9 May 2021 14:10:58 +0000"/>
                            <attachment id="13025205" name="PDFBOX-2158.pdf" size="113128" author="tilman" created="Sun, 9 May 2021 11:20:40 +0000"/>
                            <attachment id="13025211" name="PDFBOX-2158.pdf-1.png" size="85820" author="tilman" created="Sun, 9 May 2021 14:10:58 +0000"/>
                            <attachment id="13025212" name="PDFBOX-2158.pdf-1.png-diff.png" size="9931" author="tilman" created="Sun, 9 May 2021 14:10:58 +0000"/>
                            <attachment id="13025194" name="crash-23adb315cc495bfd4761b16f877639d73d124d5b.pdf" size="32124" author="lehmi" created="Sat, 8 May 2021 10:43:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0quu8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>