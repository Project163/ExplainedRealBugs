<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:57:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2364] CCITT image renders incorrectly</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2364</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The file from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2338&quot; title=&quot;IllegalStateException: recursive definition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2338&quot;&gt;&lt;del&gt;PDFBOX-2338&lt;/del&gt;&lt;/a&gt; has a CCITT image on p6 which renders incorrectly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12742826">PDFBOX-2364</key>
            <summary>CCITT image renders incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jahewson">John Hewson</reporter>
                        <labels>
                            <label>CCITTFaxDecode</label>
                            <label>ccitt</label>
                    </labels>
                <created>Fri, 19 Sep 2014 19:39:27 +0000</created>
                <updated>Thu, 17 Mar 2016 19:06:43 +0000</updated>
                            <resolved>Tue, 23 Sep 2014 17:59:23 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14141177" author="tilman" created="Fri, 19 Sep 2014 19:54:04 +0000"  >&lt;p&gt;How is your rendering wrong? Here is what I get, at 300dpi.&lt;/p&gt;</comment>
                            <comment id="14141456" author="jahewson" created="Fri, 19 Sep 2014 22:34:08 +0000"  >&lt;p&gt;Your rendering is fine, here&apos;s what I get at 100dpi.&lt;/p&gt;

&lt;p&gt;java -version&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java version &lt;span class=&quot;code-quote&quot;&gt;&quot;1.6.0_65&quot;&lt;/span&gt;
Java(TM) SE &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment (build 1.6.0_65-b14-462-11M4609)
Java HotSpot(TM) 64-Bit Server VM (build 20.65-b04-462, mixed mode)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14141460" author="jahewson" created="Fri, 19 Sep 2014 22:36:12 +0000"  >&lt;p&gt;I get the same bad rendering with JDK 7 too:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java version &lt;span class=&quot;code-quote&quot;&gt;&quot;1.7.0_67&quot;&lt;/span&gt;
Java(TM) SE &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment (build 1.7.0_67-b01)
Java HotSpot(TM) 64-Bit Server VM (build 24.65-b04, mixed mode)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14141463" author="jahewson" created="Fri, 19 Sep 2014 22:37:21 +0000"  >&lt;p&gt;Aha - it renders correctly (with both JDKs) at 300 dpi. So we have a scaling bug...&lt;/p&gt;</comment>
                            <comment id="14141777" author="tilman" created="Sat, 20 Sep 2014 05:51:13 +0000"  >&lt;p&gt;I remember I worked on a similar problem months ago and then gave up - apparently Java can&apos;t do scale-to-gray.&lt;/p&gt;</comment>
                            <comment id="14142091" author="jahewson" created="Sat, 20 Sep 2014 16:27:58 +0000"  >&lt;p&gt;Given the way that the image wraps/splits it&apos;s very likely that we&apos;re looking at a JVM bug. So you think it is due to scaling a grayscale image? (or maybe binary?). We might be able to work around that?&lt;/p&gt;</comment>
                            <comment id="14142150" author="tilman" created="Sat, 20 Sep 2014 18:29:25 +0000"  >&lt;p&gt;Here&apos;s a thread (in german) that it doesn&apos;t work:&lt;br/&gt;
&lt;a href=&quot;https://groups.google.com/forum/#!msg/de.comp.lang.java/v5vbtL955io/HUaFiZvScZwJ&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://groups.google.com/forum/#!msg/de.comp.lang.java/v5vbtL955io/HUaFiZvScZwJ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here an answer that doesn&apos;t really help:&lt;br/&gt;
&lt;a href=&quot;https://community.oracle.com/thread/1686209?start=0&amp;amp;tstart=0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://community.oracle.com/thread/1686209?start=0&amp;amp;tstart=0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This bug report suggests that scale to gray does exist:&lt;br/&gt;
&lt;a href=&quot;http://bugs.java.com/view_bug.do?bug_id=4325646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.java.com/view_bug.do?bug_id=4325646&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;However searching not for the term but for the purpose find this, which could be useful:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Class SubsampleBinaryToGrayDescriptor&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Image.getScaledInstance()&lt;br/&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/3967731/java-scale-image-best-practice&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/3967731/java-scale-image-best-practice&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I haven&apos;t tested it.&lt;/p&gt;</comment>
                            <comment id="14145091" author="jahewson" created="Tue, 23 Sep 2014 17:35:00 +0000"  >&lt;p&gt;We don&apos;t use IndexColorModel, so that bug report doesn&apos;t apply to us, also we&apos;re not scaling the image ourselves, Graphics2D is, so Image.getScaledInstance() isn&apos;t really a substitute.&lt;/p&gt;

&lt;p&gt;The image is 1bpc (i.e. binary) rather than grayscale, though the PDF colour space is DeviceGray. Ultimately the image which is rendered by Graphics2D is TYPE_INT_RGB because it&apos;s converted by DeviceGray#toRGBImage(). Dumping the image returned by this method shows that it is perfect, which means that the issues is with Java scaling a standard TYPE_INT_RGB image. Looking at the image&apos;s dictionary the &quot;Interpolate&quot; flag is not set, which means that we&apos;re using the VALUE_INTERPOLATION_NEAREST_NEIGHBOR hint to draw the image, this is correct, but Java&apos;s nearest neighbour scaling is particularly poor.&lt;/p&gt;</comment>
                            <comment id="14145130" author="jahewson" created="Tue, 23 Sep 2014 17:56:19 +0000"  >&lt;p&gt;Ok, I&apos;ve figured it out, the behaviour of the &quot;Interpolate&quot; flag isn&apos;t strictly specified and is left to the &quot;conforming reader&quot; to choose. Page 2 of mori-cvpr01.pdf from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2302&quot; title=&quot;Make better use of RenderingHints&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2302&quot;&gt;&lt;del&gt;PDFBOX-2302&lt;/del&gt;&lt;/a&gt; shows that Acrobat uses nearest-neighbour when scaling up small images on the page. However, the file from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2338&quot; title=&quot;IllegalStateException: recursive definition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2338&quot;&gt;&lt;del&gt;PDFBOX-2338&lt;/del&gt;&lt;/a&gt; which this issue is about, renders smoothly in Acrobat. In both cases, the &quot;Interpolate&quot; flag is not set, the difference is that the second PDF has images which are being scaled &lt;em&gt;down&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;It seems that Acrobat honours the Interpolate flag when scaling up, but not scaling down, which makes some sense.&lt;/p&gt;</comment>
                            <comment id="14145135" author="jira-bot" created="Tue, 23 Sep 2014 17:59:10 +0000"  >&lt;p&gt;Commit 1627103 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1627103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1627103&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2364&quot; title=&quot;CCITT image renders incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2364&quot;&gt;&lt;del&gt;PDFBOX-2364&lt;/del&gt;&lt;/a&gt;: Only honour the Interpolate flag when scaling up&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12670079" name="PDFBOX-2338-2038866.jpg" size="3066360" author="tilman" created="Fri, 19 Sep 2014 19:54:04 +0000"/>
                            <attachment id="12670125" name="PDFBOX-2338-p6.jpg" size="254761" author="jahewson" created="Fri, 19 Sep 2014 22:34:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i209sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>