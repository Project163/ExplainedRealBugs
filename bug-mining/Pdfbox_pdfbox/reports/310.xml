<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:54:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1601] java.lang.IllegalArgumentException: Width (4032) and height (-2880) cannot be &lt;= 0</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1601</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;We&apos;re using pdfbox-1.8.1.jar to convert PDF to JPGs.&lt;br/&gt;
Below is part of a stacktrace we see when converting a PDF of size 500Kb&lt;/p&gt;

&lt;p&gt;java.lang.IllegalArgumentException: Width (4032) and height (-2880) cannot be &amp;lt;= 0&lt;br/&gt;
        at java.awt.image.DirectColorModel.createCompatibleWritableRaster(Unknown Source)&lt;br/&gt;
        at java.awt.image.BufferedImage.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
        at org.apache.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:752)&lt;br/&gt;
        at org.apache.pdfbox.util.PDFImageWriter.writeImage(PDFImageWriter.java:115)&lt;/p&gt;

&lt;p&gt;We use PDDocument.load(File). As suggested, we tried with loadNonSeq and also the non sequential form of load as below. Also tried it with a FileInputStream and File. All these forms of load gave us the same error.&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
          raf = new RandomAccessFile(new File(&quot;/tmp/nonSeqPdfFile&quot;), &quot;rw&quot;);&lt;br/&gt;
          document = PDDocument.load(new FileInputStream(inputFile), raf);&lt;br/&gt;
            PDFImageWriter imageWriter = new PDFImageWriter();&lt;br/&gt;
            success = imageWriter.writeImage(document, imageFormat, password, startPage, endPage, pdfWorkFilePrefix, imageType, resolution);&lt;/p&gt;</description>
                <environment>Centos 6</environment>
        <key id="12648055">PDFBOX-1601</key>
            <summary>java.lang.IllegalArgumentException: Width (4032) and height (-2880) cannot be &lt;= 0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="asmitaj">Asmita Joshi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 May 2013 21:12:24 +0000</created>
                <updated>Tue, 11 Jun 2013 17:09:57 +0000</updated>
                            <resolved>Sat, 18 May 2013 11:02:53 +0000</resolved>
                                    <version>1.8.1</version>
                                    <fixVersion>1.8.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13660394" author="msahyoun" created="Fri, 17 May 2013 06:27:40 +0000"  >&lt;p&gt;Analysis:&lt;/p&gt;

&lt;p&gt;For the dimensions of the to be created image the pages CropBox is used. As the pdf doesn&apos;t define a CropBox the values are taken from the MediaBox. In case of the test document provided (failingtoload.pdf) the PDRectangle is &lt;span class=&quot;error&quot;&gt;&amp;#91;0.0,2160.0,3024.0,0.0&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;According to the PDF spec 7.9.5:&lt;/p&gt;

&lt;p&gt;Although rectangles are conventionally specified by their lower-left and upper-right corners, it is acceptable to specify any two diagonally opposite corners. Applications that process PDF should be prepared to normalize such rectangles in situations where specific corners are required.&lt;/p&gt;


&lt;p&gt;PDRectangle getWidth()/getHeight() always expect the upper value to be higher than the lower value which is not true in this case and not in line with the spec thus returning a negative value for height in this case.&lt;/p&gt;</comment>
                            <comment id="13660410" author="lehmi" created="Fri, 17 May 2013 06:54:07 +0000"  >&lt;p&gt;I came to the same conclusion. We have to adjust the PDRectangle class to handle swapped values. &lt;/p&gt;

&lt;p&gt;@Maruan: will you take care of this or should I?&lt;/p&gt;</comment>
                            <comment id="13660414" author="msahyoun" created="Fri, 17 May 2013 06:59:24 +0000"  >&lt;p&gt;Hi Andreas,&lt;/p&gt;

&lt;p&gt;if you could handle that this would be great as I don&apos;t have a complete dev environment atm.&lt;/p&gt;

&lt;p&gt;BR&lt;br/&gt;
Maruan &lt;/p&gt;</comment>
                            <comment id="13660562" author="keith2koool" created="Fri, 17 May 2013 11:15:54 +0000"  >&lt;p&gt;I too am facing the same issue. The same thing works for me in 0.7.3 version, but the output is not a right kind of image. So, I tried to check if latest version will work, but instead lead to a negative value width (IllegalArgumentException).&lt;/p&gt;</comment>
                            <comment id="13660565" author="keith2koool" created="Fri, 17 May 2013 11:17:49 +0000"  >&lt;p&gt;Giving me negative width in latest version, works in 0.7.3 but image is different than the pdf version.&lt;/p&gt;</comment>
                            <comment id="13661333" author="lehmi" created="Sat, 18 May 2013 11:02:53 +0000"  >&lt;p&gt;I added a fix in revision 1484089. The given coordinates are now swapped if necessary.&lt;/p&gt;

&lt;p&gt;The exception is gone for both of the attached pdfs.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                            <comment id="13661855" author="keith2koool" created="Mon, 20 May 2013 09:02:50 +0000"  >&lt;p&gt;Hi Andreas, &lt;/p&gt;

&lt;p&gt;   Thanks for the fix. Can you help me get the link to download 1.8.2 jar&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Keith&lt;/p&gt;</comment>
                            <comment id="13661874" author="lehmi" created="Mon, 20 May 2013 09:56:06 +0000"  >&lt;p&gt;1.8.2 isn&apos;t released and it isn&apos;t scheduled yet. Saying that you have to build it on your own using the current trunk.&lt;/p&gt;</comment>
                            <comment id="13680373" author="ssteiner1" created="Tue, 11 Jun 2013 11:06:12 +0000"  >&lt;p&gt;If i revert this change it fixes a pdf form issue when using fop&lt;/p&gt;</comment>
                            <comment id="13680376" author="lehmi" created="Tue, 11 Jun 2013 11:14:17 +0000"  >&lt;p&gt;Can you provide us with a sample pdf showing the issue?&lt;/p&gt;</comment>
                            <comment id="13680386" author="ssteiner1" created="Tue, 11 Jun 2013 13:52:03 +0000"  >&lt;p&gt;i added a sample at &lt;a href=&quot;https://issues.apache.org/jira/browse/FOP-2264&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FOP-2264&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;for fop users they need patch for pdfplugin in ^&lt;/p&gt;</comment>
                            <comment id="13680504" author="lehmi" created="Tue, 11 Jun 2013 17:09:57 +0000"  >&lt;p&gt;I&apos;ve created images for both pages of the given pdf using PDFBox 1.8.1 and 1.8.2 and I can&apos;t see any differences. Maybe I didn&apos;t get the point yet. Can you give us some more details?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12583544" name="failingtoload.pdf" size="458449" author="asmitaj" created="Thu, 16 May 2013 21:12:50 +0000"/>
                            <attachment id="12583643" name="try1.pdf" size="54559" author="keith2koool" created="Fri, 17 May 2013 11:17:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>328411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1knvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>328755</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>