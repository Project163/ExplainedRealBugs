<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:05:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3723] FDFField.getValue() doesn&apos;t return the values in line with the Javadoc.</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3723</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;For the 2.0.x releases &lt;tt&gt;FDFField.getValue()&lt;/tt&gt; doesn&apos;t neither return the documented &lt;tt&gt;PDTextStream&lt;/tt&gt; return type nor &lt;tt&gt;String&lt;/tt&gt; for values of type &lt;tt&gt;COSString&lt;/tt&gt; or &lt;tt&gt;COSStream&lt;/tt&gt;. This has somewhat be masked by another issue fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3596&quot; title=&quot;FDFDocument.loadXFDF not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3596&quot;&gt;&lt;del&gt;PDFBOX-3596&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;As &lt;tt&gt;PDTextStream&lt;/tt&gt; is no longer available we should return as &lt;tt&gt;String&lt;/tt&gt; (which is inline with &lt;tt&gt;PDField&lt;/tt&gt;) and adjust the javadoc accordingly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13057277">PDFBOX-3723</key>
            <summary>FDFField.getValue() doesn&apos;t return the values in line with the Javadoc.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="msahyoun">Maruan Sahyoun</assignee>
                                    <reporter username="msahyoun">Maruan Sahyoun</reporter>
                        <labels>
                    </labels>
                <created>Sat, 18 Mar 2017 18:56:46 +0000</created>
                <updated>Mon, 15 May 2017 20:28:07 +0000</updated>
                            <resolved>Thu, 23 Mar 2017 11:06:35 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.0.4</version>
                    <version>2.0.5</version>
                                    <fixVersion>2.0.6</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15931719" author="rtmartin@nycap.rr.com" created="Sun, 19 Mar 2017 14:42:51 +0000"  >&lt;p&gt;Maruan asked that I post a unit test for this.  I&apos;m a newbie so this might not be the right way to post it but I don&apos;t see any way to post an attachment.  I&apos;ve pasted the java source and the XFDF source below separated by a line of equal signs.  Let me know if there&apos;s a &quot;better way&quot;.  The loading of the XFDF file is configured to a path unique to my environment.  That would need to be changed for testing.&lt;br/&gt;
===============================================================&lt;br/&gt;
Java Source&lt;br/&gt;
/*&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Licensed to the Apache Software Foundation (ASF) under one or more&lt;/li&gt;
	&lt;li&gt;contributor license agreements.  See the NOTICE file distributed with&lt;/li&gt;
	&lt;li&gt;this work for additional information regarding copyright ownership.&lt;/li&gt;
	&lt;li&gt;The ASF licenses this file to You under the Apache License, Version 2.0&lt;/li&gt;
	&lt;li&gt;(the &quot;License&quot;); you may not use this file except in compliance with&lt;/li&gt;
	&lt;li&gt;the License.  You may obtain a copy of the License at&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;Unless required by applicable law or agreed to in writing, software&lt;/li&gt;
	&lt;li&gt;distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;/li&gt;
	&lt;li&gt;WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;/li&gt;
	&lt;li&gt;See the License for the specific language governing permissions and&lt;/li&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 */&lt;br/&gt;
package org.apache.pdfbox;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;import org.apache.pdfbox.pdmodel.PDDocument;&lt;br/&gt;
import org.apache.pdfbox.pdmodel.PDDocumentCatalog;&lt;br/&gt;
import org.apache.pdfbox.pdmodel.fdf.FDFDocument;&lt;br/&gt;
import org.apache.pdfbox.pdmodel.fdf.FDFField;&lt;br/&gt;
import org.apache.pdfbox.pdmodel.interactive.form.PDAcroForm;&lt;br/&gt;
import org.apache.pdfbox.pdmodel.interactive.form.PDField;&lt;br/&gt;
import org.apache.pdfbox.pdmodel.interactive.form.PDTextField;&lt;br/&gt;
import org.apache.pdfbox.pdmodel.interactive.form.PDVariableText;&lt;/p&gt;

&lt;p&gt;import java.io.File;&lt;br/&gt;
import java.io.IOException;&lt;br/&gt;
import java.util.List;&lt;/p&gt;

&lt;p&gt;//import org.apache.pdfbox.pdmodel.PDDocument;&lt;br/&gt;
//import org.apache.pdfbox.tools.*;&lt;/p&gt;


&lt;p&gt;/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;This example will take a PDF document and fill the fields with data from the&lt;/li&gt;
	&lt;li&gt;XFDF fields.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@author &amp;lt;a href=&quot;ben@benlitchfield.com&quot;&amp;gt;Ben Litchfield&amp;lt;/a&amp;gt;&lt;/li&gt;
	&lt;li&gt;@version $Revision: 1.2 $&lt;br/&gt;
 */ &lt;br/&gt;
public class ALS3122FormFillV2UnitTest&lt;br/&gt;
{&lt;br/&gt;
    /**&lt;/li&gt;
	&lt;li&gt;Creates a new instance of ImportFDF.&lt;br/&gt;
     */&lt;br/&gt;
    public ALS3122FormFillV2UnitTest()&lt;br/&gt;
    { &lt;br/&gt;
    } &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;This will takes the values from the fdf document and import them into the&lt;/li&gt;
	&lt;li&gt;PDF document.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param pdfDocument The document to put the fdf data into.&lt;/li&gt;
	&lt;li&gt;@param fdfDocument The FDF document to get the data from.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@throws IOException If there is an error setting the data in the field.&lt;br/&gt;
     */ &lt;br/&gt;
    public void importFDF( PDDocument pdfDocument, FDFDocument fdfDocument ) throws IOException 
    { 
        PDDocumentCatalog docCatalog = pdfDocument.getDocumentCatalog(); 
        PDAcroForm acroForm = docCatalog.getAcroForm(); 
        acroForm.setNeedAppearances(true);
     //   acroForm.setNeedAppearances(false);
        // see need for line above at: http://stackoverflow.com/questions/12198742/pdf-form-text-hidden-unless-clicked
        acroForm.setCacheFields( true ); 
        acroForm.importFDF( fdfDocument ); 
     //   acroForm.setNeedAppearances(true);
    } &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;This will import an fdf document and write out another pdf.&lt;/li&gt;
	&lt;li&gt;&amp;lt;br /&amp;gt;&lt;/li&gt;
	&lt;li&gt;see usage() for commandline&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param args command line arguments&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@throws Exception If there is an error importing the FDF document.&lt;br/&gt;
     */ &lt;br/&gt;
    public static void main(String[] args) throws Exception 
    { 
        ALS3122FormFillV2UnitTest importer = new ALS3122FormFillV2UnitTest();
        importer.importXFDF( args ); 
    } &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    private void importXFDF( String[] args ) throws Exception &lt;br/&gt;
    { &lt;br/&gt;
        PDDocument pdf = null; &lt;br/&gt;
        FDFDocument fdf = null; &lt;/p&gt;

&lt;p&gt;        try &lt;br/&gt;
        { &lt;br/&gt;
//            if( args.length != 3 ) &lt;br/&gt;
//            &lt;/p&gt;
{ 
//                usage(); 
//            }
&lt;p&gt; &lt;br/&gt;
//            else &lt;br/&gt;
            { &lt;/p&gt;

&lt;p&gt;                ALS3122FormFillV2UnitTest importer = new ALS3122FormFillV2UnitTest();&lt;br/&gt;
                fdf = FDFDocument.loadXFDF( &quot;/Users/richardmartin/Downloads/Tester-doh-31222012UnitTest.xfdf&quot; );&lt;br/&gt;
              // now let&apos;s look for fields to adjust font size if needed&lt;br/&gt;
                  List&amp;lt;?&amp;gt; fields = fdf.getCatalog().getFDF().getFields();&lt;br/&gt;
                  if( fields != null ) &lt;br/&gt;
                  { &lt;br/&gt;
                      String defaultAppearanceString = &quot;/Helv 0 Tf 0 g&quot;;&lt;br/&gt;
                      for (Object field : fields) &lt;br/&gt;
                      { &lt;br/&gt;
                          FDFField fdfField = (FDFField) field; &lt;br/&gt;
                          String fdfName, fdfValue;&lt;br/&gt;
                          Integer fdfNameLen;&lt;br/&gt;
                          Integer fdfValueLen;&lt;br/&gt;
                          fdfName =  fdfField.getPartialFieldName() ;&lt;br/&gt;
                   //       fdfValue = (String) fdfField.getValue() ;&lt;br/&gt;
                          fdfValue = String.valueOf(fdfField.getValue());&lt;br/&gt;
                          fdfNameLen = fdfName.length();&lt;br/&gt;
                          fdfValueLen = fdfValue.length();&lt;br/&gt;
                          boolean fontAutoSize = false;&lt;br/&gt;
                    	  String pdfName = null;&lt;br/&gt;
                    	  String pdfType = null;&lt;br/&gt;
               //     	  PDField pdfField = form.getField(fdfName) ;&lt;br/&gt;
               //     	  if (pdfField != null) &lt;/p&gt;
{
               //     		  pdfName = pdfField.getPartialName();
               //     		  pdfType = pdfField.getFieldType();
               //     	  }
&lt;p&gt;                          if (fdfName != null &amp;amp; fdfValue != null ) { //&amp;amp; pdfName != null) &lt;/p&gt;
{

                        	  System.out.println(&quot;fdfField  &quot; + fdfName + &quot;  &quot;  + &quot;  &quot; + fdfValue);

                      }
&lt;p&gt;                  } &lt;/p&gt;



&lt;p&gt;            } &lt;br/&gt;
        }&lt;br/&gt;
     }&lt;br/&gt;
        finally &lt;/p&gt;
        { 
            close( fdf ); 
        }
&lt;p&gt;    } &lt;/p&gt;

&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;This will print out a message telling how to use this example.&lt;br/&gt;
     */ &lt;br/&gt;
    private static void usage() 
    { 
        System.err.println( &quot;usage: org.apache.pdfbox.ImportXFDF &amp;lt;pdf-file&amp;gt; &amp;lt;fdf-file&amp;gt; &amp;lt;output-file&amp;gt;&quot; ); 
    } &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Close the document.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param doc The doc to close.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@throws IOException If there is an error closing the document.&lt;br/&gt;
     */ &lt;br/&gt;
    public void close( FDFDocument doc ) throws IOException 
    &lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {         if( doc != null )         { 
            doc.close(); 
        } &lt;br/&gt;
    } &lt;br/&gt;
 &lt;br/&gt;
    /**&lt;br/&gt;
     * Close the document. &lt;br/&gt;
     * &lt;br/&gt;
     * @param doc The doc to close. &lt;br/&gt;
     * &lt;br/&gt;
     * @throws IOException If there is an error closing the document. &lt;br/&gt;
     */ &lt;br/&gt;
    public void close( PDDocument doc ) throws IOException &lt;br/&gt;
    { &lt;br/&gt;
        if( doc != null ) &lt;br/&gt;
        {             doc.close();         }     }&lt;/span&gt; &lt;/div&gt; 
&lt;p&gt;}&lt;br/&gt;
===============================================================&lt;br/&gt;
XFDF source&lt;br/&gt;
&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
                      &amp;lt;xfdf xmlns=&quot;http://ns.adobe.com/xfdf/&quot; xml:space=&quot;preserve&quot;&amp;gt;&lt;br/&gt;
                      &amp;lt;f href=&quot;http://arlinprd3.adaptiveresults.com:5050/ALS/faces/pdf/doh-31222012.pdf&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;fields&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;MedEvalID&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;103&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;ResidentID&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;13&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;Residents_Name&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;Tester, Richard     (Dick)&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/field&amp;gt;&lt;br/&gt;
   &amp;lt;field name=&quot;Medication15&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;Ranitidine&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;Medic_Dosage15&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;150 mg&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;Medic_Type15&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;1/2 tab&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;Medic_Freq15&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;BID&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;Medic_Route15&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;PO&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;Medic_Diag15&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;GERD&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;Medic_Provider15&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;Evans, Robert&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/field&amp;gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&amp;lt;/fields&amp;gt;&lt;br/&gt;
&amp;lt;/xfdf&amp;gt;&lt;/p&gt;</comment>
                            <comment id="15931950" author="rtmartin@nycap.rr.com" created="Sun, 19 Mar 2017 20:34:43 +0000"  >&lt;p&gt;I have 2 workarounds for this:&lt;br/&gt;
1) I can use 2.0.4&lt;br/&gt;
2) I can use 2.0.5 and strip off the COSString content using code like this:&lt;br/&gt;
                              if (fdfValue.startsWith(&quot;COSString{&quot;)) {&lt;br/&gt;
                                  fdfValue = fdfValue.replace(&quot;COSString&lt;/p&gt;
{&quot;, &quot;&quot;);
                                  fdfValue = fdfValue.substring(0, fdfValue.lastIndexOf(&quot;}
&lt;p&gt;&quot;) ) ;&lt;br/&gt;
                              }&lt;/p&gt;</comment>
                            <comment id="15932947" author="msahyoun" created="Mon, 20 Mar 2017 16:18:23 +0000"  >&lt;p&gt;You can simplify your code by using  &lt;tt&gt;COSString.getString()&lt;/tt&gt; to get the content as &lt;tt&gt;String&lt;/tt&gt; like this&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fdfField.getValue() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSString)
{
    fdfValue = ((COSString)fdfField.getValue()).getString()
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15933095" author="jira-bot" created="Mon, 20 Mar 2017 17:15:56 +0000"  >&lt;p&gt;Commit 1787812 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1787812&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1787812&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3723&quot; title=&quot;FDFField.getValue() doesn&amp;#39;t return the values in line with the Javadoc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3723&quot;&gt;&lt;del&gt;PDFBOX-3723&lt;/del&gt;&lt;/a&gt;: ensure return values for getValue() are inline with the javadoc; add initial unit test&lt;/p&gt;</comment>
                            <comment id="15933115" author="msahyoun" created="Mon, 20 Mar 2017 17:24:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rtmartin%40nycap.rr.com&quot; class=&quot;user-hover&quot; rel=&quot;rtmartin@nycap.rr.com&quot;&gt;rtmartin@nycap.rr.com&lt;/a&gt; could you test with the latest snapshot which should be available in a few hours and let me know if that works for you.&lt;/p&gt;</comment>
                            <comment id="15933240" author="jira-bot" created="Mon, 20 Mar 2017 18:20:14 +0000"  >&lt;p&gt;Commit 1787824 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1787824&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1787824&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3723&quot; title=&quot;FDFField.getValue() doesn&amp;#39;t return the values in line with the Javadoc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3723&quot;&gt;&lt;del&gt;PDFBOX-3723&lt;/del&gt;&lt;/a&gt;: ensure return values for getValue() are inline with the javadoc; add initial unit test&lt;/p&gt;</comment>
                            <comment id="15933435" author="rtmartin@nycap.rr.com" created="Mon, 20 Mar 2017 20:09:40 +0000"  >&lt;p&gt;Maruan,&lt;br/&gt;
Thanks for the code improvement.  I&apos;ll be testing the latest snapshot&lt;br/&gt;
&quot;soon&quot;.  If it or some later version works, I shouldn&apos;t need this&lt;br/&gt;
workaround code; yours or mine.  I&apos;ll report back on my testing when&lt;br/&gt;
complete.&lt;br/&gt;
Thanks.&lt;br/&gt;
Dick&lt;/p&gt;

&lt;p&gt;On Mon, Mar 20, 2017 at 12:18 PM, Maruan Sahyoun (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="15933551" author="rtmartin@nycap.rr.com" created="Mon, 20 Mar 2017 21:02:40 +0000"  >&lt;p&gt;Maruan,&lt;br/&gt;
I tested with pdfbox-2.1.0-20170320.180628-811.jar.  I hope that&apos;s what you&lt;br/&gt;
intended.&lt;/p&gt;

&lt;p&gt;Good news, bad news.&lt;br/&gt;
Good news is that the fdf.values are no  onger enclosed in COSString().&lt;br/&gt;
Bad news is that I now get an error on pdfField.setValue(fdfValue) ;&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pdfbox.pdmodel.interactive.form.AppearanceGeneratorHelper.setAppearanceValue(AppearanceGeneratorHelper.java:137)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pdfbox.pdmodel.interactive.form.PDTextField.constructAppearances(PDTextField.java:263)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pdfbox.pdmodel.interactive.form.PDTerminalField.applyChange(PDTerminalField.java:226)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pdfbox.pdmodel.interactive.form.PDTextField.setValue(PDTextField.java:218)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pdfbox.ALS3122FormFillV2.importXFDF(ALS3122FormFillV2.java:321)&lt;br/&gt;
    at org.apache.pdfbox.ALS3122FormFillV2.main(ALS3122FormFillV2.java:110)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
In that, line 321 is the setValue line shown above.&lt;/p&gt;

&lt;p&gt;I don&apos;t get that error with 2.0.4 or 2.0.5.  I can provide test case&lt;br/&gt;
material but it&apos;s a bit more involved than before because I should provide&lt;br/&gt;
a PDF file to post against.&lt;/p&gt;

&lt;p&gt;I&apos;ll stick with 2.0.5 with my/our workaround for now.  My work is not yet&lt;br/&gt;
in production.&lt;br/&gt;
Thanks.&lt;br/&gt;
Dick&lt;/p&gt;

&lt;p&gt;On Mon, Mar 20, 2017 at 2:22 PM, Maruan Sahyoun (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="15933654" author="msahyoun" created="Mon, 20 Mar 2017 21:56:11 +0000"  >&lt;p&gt;That&apos;s a different issue and is related to the form definition - at least if I look at the form referenced from your sample XFDF.&lt;/p&gt;

&lt;p&gt;This is caused because now the value is correctly set and it&apos;s also trying to update the appearance stream for the form fields which is needed for the visual appearance of the form field with the updated value. That&apos;s where it&apos;s failing as the &lt;tt&gt;NormalAppearance&lt;/tt&gt; entry exists but is null.&lt;/p&gt;

&lt;p&gt;I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3726&quot; title=&quot;NPE when setting the field value in an AcroForm and the NormalAppearance entry exists but is COSNull&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3726&quot;&gt;&lt;del&gt;PDFBOX-3726&lt;/del&gt;&lt;/a&gt; for that.&lt;/p&gt;</comment>
                            <comment id="15933693" author="msahyoun" created="Mon, 20 Mar 2017 22:08:37 +0000"  >&lt;p&gt;With the latest commit to  &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3726&quot; title=&quot;NPE when setting the field value in an AcroForm and the NormalAppearance entry exists but is COSNull&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3726&quot;&gt;&lt;del&gt;PDFBOX-3726&lt;/del&gt;&lt;/a&gt; the NPE should be gone. I&apos;ve added you as a watcher there too. If you would be so kind and retest with a newer snapshot to pdfbox-2.1.0-20170320.180628-811.jar and let me know the results.&lt;/p&gt;</comment>
                            <comment id="15938111" author="jira-bot" created="Thu, 23 Mar 2017 11:05:41 +0000"  >&lt;p&gt;Commit 1788219 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1788219&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1788219&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3723&quot; title=&quot;FDFField.getValue() doesn&amp;#39;t return the values in line with the Javadoc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3723&quot;&gt;&lt;del&gt;PDFBOX-3723&lt;/del&gt;&lt;/a&gt;: fix javadoc&lt;/p&gt;</comment>
                            <comment id="15938113" author="msahyoun" created="Thu, 23 Mar 2017 11:06:35 +0000"  >&lt;p&gt;resolving issue inline with test results. Feel free to reopen if the issues persists.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ch1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>