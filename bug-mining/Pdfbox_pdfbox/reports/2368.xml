<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:10:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4825] PDPushButton.getOnValues() throws IllegalStateException</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4825</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Calling PDPushButton.getOnValues() results in an IllegalStateException in v2.0.19 and v2.0.20-SNAPSHOT).&#160;Not sure if prior versions exhibited this error.&#160;Line numbers are identical in both tested versions.&#160;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalStateException: This entry is not an appearance subdictionary
at org.apache.pdfbox.pdmodel.interactive.annotation.PDAppearanceEntry.getSubDictionary(PDAppearanceEntry.java:97)
at org.apache.pdfbox.pdmodel.interactive.form.PDButton.getOnValueForWidget(PDButton.java:349)
at org.apache.pdfbox.pdmodel.interactive.form.PDButton.getOnValues(PDButton.java:320)
at AppearanceSubdictionaryError.main(AppearanceSubdictionaryError.java:21)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Sample file attached to issue was created utilizing Adobe Acrobat Standard DC 20.6.20042.&lt;/p&gt;

&lt;p&gt;Sample code to reproduce:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.File;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.PDDocument;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.interactive.form.PDField;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.interactive.form.PDPushButton;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AppearanceSubdictionaryError
{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
    {
        PDDocument document = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
        {
            document = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;testimage.pdf&quot;&lt;/span&gt;));
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (PDField field : document.getDocumentCatalog().getAcroForm().getFields())
            {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (field &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; PDPushButton)
                {
                    ((PDPushButton) field).getOnValues();
                }
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e)
        {
            e.printStackTrace();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt;
        {
            document.close();
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Ran across this issue when pulling acro field information from a test document. This doesn&apos;t affect our use of the project. I am merely reporting it as it seems like it shouldn&apos;t happen.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>Windows 10 (v10.0.18363.778)&lt;br/&gt;
openjdk version &amp;quot;11.0.4&amp;quot; 2019-07-16&lt;br/&gt;
OpenJDK Runtime Environment AdoptOpenJDK (build 11.0.4+11)&lt;br/&gt;
OpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.4+11, mixed mode)</environment>
        <key id="13303704">PDFBOX-4825</key>
            <summary>PDPushButton.getOnValues() throws IllegalStateException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="jay.taylor">Jay Taylor</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 May 2020 18:08:28 +0000</created>
                <updated>Mon, 15 Jun 2020 04:54:11 +0000</updated>
                            <resolved>Sun, 17 May 2020 06:41:56 +0000</resolved>
                                    <version>2.0.19</version>
                    <version>2.0.20</version>
                                    <fixVersion>2.0.20</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>AcroForm</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17102817" author="tilman" created="Fri, 8 May 2020 18:30:40 +0000"  >&lt;p&gt;Thank you... this is a Pushbutton, this type of button retains no permanent value, so I think it shouldn&apos;t return any &quot;on&quot; values. I think we should a method in the class to return an empty set for getOnValues(), and maybe more.&lt;/p&gt;</comment>
                            <comment id="17109314" author="jira-bot" created="Sun, 17 May 2020 04:32:03 +0000"  >&lt;p&gt;Commit 1877843 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1877843&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1877843&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4825&quot; title=&quot;PDPushButton.getOnValues() throws IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4825&quot;&gt;&lt;del&gt;PDFBOX-4825&lt;/del&gt;&lt;/a&gt;: return empty set to avoid IllegalStateException when method of superclass is used&lt;/p&gt;</comment>
                            <comment id="17109315" author="jira-bot" created="Sun, 17 May 2020 04:32:07 +0000"  >&lt;p&gt;Commit 1877844 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1877844&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1877844&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4825&quot; title=&quot;PDPushButton.getOnValues() throws IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4825&quot;&gt;&lt;del&gt;PDFBOX-4825&lt;/del&gt;&lt;/a&gt;: return empty set to avoid IllegalStateException when method of superclass is used&lt;/p&gt;</comment>
                            <comment id="17109316" author="jira-bot" created="Sun, 17 May 2020 04:32:11 +0000"  >&lt;p&gt;Commit 1877845 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1877845&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1877845&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4825&quot; title=&quot;PDPushButton.getOnValues() throws IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4825&quot;&gt;&lt;del&gt;PDFBOX-4825&lt;/del&gt;&lt;/a&gt;: return empty set to avoid IllegalStateException when method of superclass is used&lt;/p&gt;</comment>
                            <comment id="17109351" author="tilman" created="Sun, 17 May 2020 06:41:00 +0000"  >&lt;p&gt;Should work now... all these calls work:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        PDPushButton field = (PDPushButton) acroForm.getField(&lt;span class=&quot;code-quote&quot;&gt;&quot;Image1_af_image&quot;&lt;/span&gt;);
        field.getDefaultValue();
        field.getExportValues();
        field.getOnValues();
        field.getValue();
        field.getWidgets();
        field.getValueAsString();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17109352" author="tilman" created="Sun, 17 May 2020 06:41:56 +0000"  >&lt;p&gt;Solved. Thanks for reporting!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13002436" name="testimage.pdf" size="6388" author="jay.taylor" created="Fri, 8 May 2020 17:56:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0eizs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>