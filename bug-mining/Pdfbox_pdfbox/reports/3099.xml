<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:15:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-6061] NullPointerException in COSDictionary</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-6061</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Load the attached PDF file and try to add some text, &lt;b&gt;reusing the PDFont object&lt;/b&gt;. This code would reproduce the problem:&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
    void convert(OutputStream outputStream) {&lt;br/&gt;
        PDDocument document = Loader.loadPDF(new File(&apos;C:\\path\\to&lt;br class=&quot;atl-forced-newline&quot; /&gt;empty-reproducer.pdf&apos;))&lt;br/&gt;
        PDPage page = document.getPage(0)&lt;br/&gt;
        new PDPageContentStream(document, page, PDPageContentStream.AppendMode.APPEND, false, false).withCloseable &lt;/p&gt;
{ contentStream -&amp;gt;
            String text = &apos;this is some text&apos;
            PDFont myFont = new PDType1Font(Standard14Fonts.FontName.HELVETICA)

            contentStream.beginText()
            contentStream.setFont(myFont, 12)
            contentStream.newLineAtOffset(25, 0)
            contentStream.showText(text)
            contentStream.endText()
            contentStream.beginText()
            contentStream.setFont(myFont, 12) // &amp;lt;-- Crash
            contentStream.newLineAtOffset(25, 25)
            contentStream.showText(text)
            contentStream.endText()
        }
&lt;p&gt;        document.save(outputStream)&lt;br/&gt;
    }&lt;br/&gt;
The second call to `setFont` will produce this error:&lt;/p&gt;


&lt;p&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;Object.equals(Object)&quot; because the return value of &quot;org.apache.pdfbox.cos.COSObject.getObject()&quot; is null&lt;br/&gt;
	at org.apache.pdfbox.cos.COSDictionary.getKeyForValue(COSDictionary.java:110)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDResources.add(PDResources.java:714)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDResources.add(PDResources.java:598)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDAbstractContentStream.setFont(PDAbstractContentStream.java:218)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDPageContentStream.setFont(PDPageContentStream.java:37)&lt;br/&gt;
The PDF file has been hand-crafted to produce this error, sadly I cannot share the original reproducer. The source of the problem is a null reference in the Font section of the Resources dictionary. The second time we run `setFont`, the font already exists in the dictionary, so it iterates all the elements trying to retrieve the item and crashes on the null reference.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13628107">PDFBOX-6061</key>
            <summary>NullPointerException in COSDictionary</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="jaragunde">Jacobo Aragunde</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Sep 2025 12:04:18 +0000</created>
                <updated>Thu, 2 Oct 2025 17:40:22 +0000</updated>
                            <resolved>Thu, 4 Sep 2025 12:33:17 +0000</resolved>
                                    <version>2.0.34</version>
                    <version>3.0.5 PDFBox</version>
                                    <fixVersion>2.0.35</fixVersion>
                    <fixVersion>3.0.6 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="18018105" author="jira-bot" created="Thu, 4 Sep 2025 12:29:07 +0000"  >&lt;p&gt;Commit 1928230 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1928230&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1928230&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-6061&quot; title=&quot;NullPointerException in COSDictionary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-6061&quot;&gt;&lt;del&gt;PDFBOX-6061&lt;/del&gt;&lt;/a&gt;: avoid NPE as suggested by Jacobo Aragunde; closes #243&lt;/p&gt;</comment>
                            <comment id="18018106" author="jira-bot" created="Thu, 4 Sep 2025 12:29:11 +0000"  >&lt;p&gt;Commit 1928231 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1928231&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1928231&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-6061&quot; title=&quot;NullPointerException in COSDictionary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-6061&quot;&gt;&lt;del&gt;PDFBOX-6061&lt;/del&gt;&lt;/a&gt;: avoid NPE as suggested by Jacobo Aragunde; closes #243&lt;/p&gt;</comment>
                            <comment id="18018107" author="jira-bot" created="Thu, 4 Sep 2025 12:29:15 +0000"  >&lt;p&gt;Commit 1928232 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1928232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1928232&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-6061&quot; title=&quot;NullPointerException in COSDictionary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-6061&quot;&gt;&lt;del&gt;PDFBOX-6061&lt;/del&gt;&lt;/a&gt;: avoid NPE as suggested by Jacobo Aragunde; closes #243&lt;/p&gt;</comment>
                            <comment id="18018113" author="tilman" created="Thu, 4 Sep 2025 12:33:17 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="18018151" author="mkl" created="Thu, 4 Sep 2025 16:06:10 +0000"  >&lt;p&gt;As an aside, I doubt that an empty indirect object is allowed by the spec. So strictly speaking this is a case of GIGO.&lt;/p&gt;</comment>
                            <comment id="18018354" author="JIRAUSER310892" created="Fri, 5 Sep 2025 11:11:45 +0000"  >&lt;p&gt;I suspected so, because it was hard to hand-craft a reproducer &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I would have preferred to report the problem to the software that generated that PDF in first place, unfortunately that&apos;s out of my reach.&lt;/p&gt;

&lt;p&gt;Thanks for your time!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13078239" name="empty-reproducer.pdf" size="596" author="jaragunde" created="Thu, 4 Sep 2025 11:56:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1xjzk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>