<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:07:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4197] PDStructureElement.getAttributes() ignores reference objects</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4197</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Attribute dictionaries attached to a structure element may be either direct or references.&#160; getAttributes() handles the direct case but ignores object references without error messages.&#160; This can also lead to invalid revision numbers attached to the attribute dictionaries it does handle properly.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The fix would be to add another branch to the iteration loop in PDStructureElement.getAttributes(), to handle object references.&lt;/p&gt;</description>
                <environment>N/A</environment>
        <key id="13153404">PDFBOX-4197</key>
            <summary>PDStructureElement.getAttributes() ignores reference objects</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="janssen">Bill Janssen</reporter>
                        <labels>
                            <label>StructureTree</label>
                    </labels>
                <created>Wed, 18 Apr 2018 16:31:18 +0000</created>
                <updated>Thu, 21 Jun 2018 20:27:59 +0000</updated>
                            <resolved>Thu, 19 Apr 2018 20:46:28 +0000</resolved>
                                    <version>1.8.13</version>
                    <version>2.0.9</version>
                                    <fixVersion>1.8.15</fixVersion>
                    <fixVersion>2.0.10</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="14400">4h</timeestimate>
                                        <comments>
                            <comment id="16442817" author="tilman" created="Wed, 18 Apr 2018 16:37:18 +0000"  >&lt;p&gt;Do you mean this part?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                COSBase item = it.next();
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (item &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSDictionary)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;d change it to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                COSBase item = it.next();
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (item &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSObject)
                {
                    item = ((COSObject) item).getObject();
                }
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (item &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; COSDictionary)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16442871" author="janssen" created="Wed, 18 Apr 2018 17:07:05 +0000"  >&lt;p&gt;Yes, that seems to work.&#160; Also need a test case.&lt;/p&gt;</comment>
                            <comment id="16442911" author="jira-bot" created="Wed, 18 Apr 2018 17:32:01 +0000"  >&lt;p&gt;Commit 1829462 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829462&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829462&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4197&quot; title=&quot;PDStructureElement.getAttributes() ignores reference objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4197&quot;&gt;&lt;del&gt;PDFBOX-4197&lt;/del&gt;&lt;/a&gt;: consider object references&lt;/p&gt;</comment>
                            <comment id="16442912" author="jira-bot" created="Wed, 18 Apr 2018 17:32:20 +0000"  >&lt;p&gt;Commit 1829463 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829463&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829463&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4197&quot; title=&quot;PDStructureElement.getAttributes() ignores reference objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4197&quot;&gt;&lt;del&gt;PDFBOX-4197&lt;/del&gt;&lt;/a&gt;: consider object references&lt;/p&gt;</comment>
                            <comment id="16442913" author="jira-bot" created="Wed, 18 Apr 2018 17:32:30 +0000"  >&lt;p&gt;Commit 1829464 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829464&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829464&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4197&quot; title=&quot;PDStructureElement.getAttributes() ignores reference objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4197&quot;&gt;&lt;del&gt;PDFBOX-4197&lt;/del&gt;&lt;/a&gt;: consider object references&lt;/p&gt;</comment>
                            <comment id="16442925" author="tilman" created="Wed, 18 Apr 2018 17:38:15 +0000"  >&lt;p&gt;I found another occurence and I fixed it too. I agree that a test case would be nice but I don&apos;t have a test file. If possible, please attach it here. Alternatively I could write some code that goes through our test files hoping to hit such an case.&lt;/p&gt;</comment>
                            <comment id="16443169" author="janssen" created="Wed, 18 Apr 2018 20:43:31 +0000"  >&lt;p&gt;I think any document with a table would work, but my example document had some table headers that spanned multiple columns, so there was an attribute dictionionary with &quot;colspan=3&quot; in it.&lt;/p&gt;</comment>
                            <comment id="16443400" author="janssen" created="Thu, 19 Apr 2018 00:59:01 +0000"  >&lt;p&gt;Attached sample file. &#160;This has a table with headers that have both Layout and Table attribute dictionaries.&lt;/p&gt;</comment>
                            <comment id="16443540" author="tilman" created="Thu, 19 Apr 2018 03:41:35 +0000"  >&lt;p&gt;thanks, I found at least two:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Root/StructTreeRoot/K/[0]/K/[11]/K/[0]/K/[0]/A
Root/StructTreeRoot/K/[0]/K/[11]/K/[0]/K/[1]/A
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;ll create a test from there later.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16444456" author="jira-bot" created="Thu, 19 Apr 2018 17:49:33 +0000"  >&lt;p&gt;Commit 1829583 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829583&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829583&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4197&quot; title=&quot;PDStructureElement.getAttributes() ignores reference objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4197&quot;&gt;&lt;del&gt;PDFBOX-4197&lt;/del&gt;&lt;/a&gt;: load test file into repository&lt;/p&gt;</comment>
                            <comment id="16444457" author="jira-bot" created="Thu, 19 Apr 2018 17:49:56 +0000"  >&lt;p&gt;Commit 1829584 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829584&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4197&quot; title=&quot;PDStructureElement.getAttributes() ignores reference objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4197&quot;&gt;&lt;del&gt;PDFBOX-4197&lt;/del&gt;&lt;/a&gt;: load test file into repository&lt;/p&gt;</comment>
                            <comment id="16444610" author="jira-bot" created="Thu, 19 Apr 2018 18:50:05 +0000"  >&lt;p&gt;Commit 1829601 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829601&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4197&quot; title=&quot;PDStructureElement.getAttributes() ignores reference objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4197&quot;&gt;&lt;del&gt;PDFBOX-4197&lt;/del&gt;&lt;/a&gt;: add test that object references in array attributes of a PDStructureElement are caught&lt;/p&gt;</comment>
                            <comment id="16444613" author="jira-bot" created="Thu, 19 Apr 2018 18:50:10 +0000"  >&lt;p&gt;Commit 1829602 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1829602&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1829602&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4197&quot; title=&quot;PDStructureElement.getAttributes() ignores reference objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4197&quot;&gt;&lt;del&gt;PDFBOX-4197&lt;/del&gt;&lt;/a&gt;: add test that object references in array attributes of a PDStructureElement are caught&lt;/p&gt;</comment>
                            <comment id="16444761" author="tilman" created="Thu, 19 Apr 2018 20:46:28 +0000"  >&lt;p&gt;Setting to resolved. Thanks for pointing out this bug.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12919726" name="sample.pdf" size="97529" author="janssen" created="Thu, 19 Apr 2018 00:58:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sprz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>