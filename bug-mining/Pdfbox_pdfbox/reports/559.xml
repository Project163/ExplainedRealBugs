<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:56:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2119] Possible printing bug for V2.00</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2119</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Printing seems to be using the window default printer paper size instead of selected printService papersize.&lt;/p&gt;

&lt;p&gt;Etc my default Printer is an A4 Printer, and the printer that i had choosen to print is a receipt printer.&lt;/p&gt;

&lt;p&gt;When i print to the receipt printer, it will print out a blown up version of the original pdf, and when i change my default printer to the receipt printer.. everything work fine.&lt;/p&gt;</description>
                <environment>Window 7 Professional SP1, JRE 8.</environment>
        <key id="12718792">PDFBOX-2119</key>
            <summary>Possible printing bug for V2.00</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yl">You Liang</reporter>
                        <labels>
                            <label>pdfbox</label>
                            <label>printer</label>
                            <label>printing</label>
                    </labels>
                <created>Fri, 6 Jun 2014 08:29:30 +0000</created>
                <updated>Fri, 8 May 2015 22:19:02 +0000</updated>
                            <resolved>Thu, 12 Jun 2014 07:37:20 +0000</resolved>
                                    <version>2.0.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14020926" author="tilman" created="Sat, 7 Jun 2014 19:04:13 +0000"  >&lt;p&gt;A look at the source code confirms the described behavior: if you use the default constructor, the variable printerjob is created through PrinterJob.getPrinterJob(), which according to javadoc &quot;Creates and returns a PrinterJob which is initially associated with the default printer.&quot; Later, the page format is retrieved through printerJob.defaultPage().&lt;/p&gt;

&lt;p&gt;How about using a PDFPrinter constructor that takes a printerJob that is set to your print service?&lt;/p&gt;</comment>
                            <comment id="14020962" author="lehmi" created="Sat, 7 Jun 2014 20:37:16 +0000"  >&lt;p&gt;I have a similar issue with the branch, maybe it&apos;s the same. I&apos;ll have to investigate further.&lt;/p&gt;</comment>
                            <comment id="14021551" author="yl" created="Mon, 9 Jun 2014 03:52:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Below is a snippet of my code, i got the PrinterJob through the PrinterJob.getPrinterJob(), afterward i set the printService to the printerJob. And then i pass in this printJob through the silentPrint method of the PDFPrinter instance.&lt;/p&gt;


&lt;p&gt;                         PrinterJob pj = PrinterJob.getPrinterJob();&lt;br/&gt;
                        PrintService pservices[] = PrintServiceLookup.lookupPrintServices(flavor, aset);&lt;br/&gt;
                         PDDocument doc = PDDocument.load(PathUtility.getInstance().getFileByPath(&quot;out/ResultFO2PDF.pdf&quot;));&lt;br/&gt;
                        //For eg, printService&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; is the printService i want&lt;br/&gt;
                        pj.setPrintService(printService&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;);                                                &lt;br/&gt;
                        Settings set = SettingsUtility.getInstance().getSettings();&lt;br/&gt;
                        Orientation orientation = Orientation.AUTO;                 &lt;br/&gt;
                        PDFPrinter printers;&lt;br/&gt;
                        printers = new PDFPrinter(doc, Scaling.ACTUAL_SIZE, orientation);                       &lt;br/&gt;
                        printers.silentPrint(pj); &lt;br/&gt;
                        doc.close();&lt;/p&gt;





</comment>
                            <comment id="14021667" author="tilman" created="Mon, 9 Jun 2014 06:33:33 +0000"  >&lt;p&gt;What happens if you use a different constructor, thus&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;printers = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFPrinter(doc, pj, Scaling.ACTUAL_SIZE, orientation, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, 0);
printers.silentPrint(); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;alternatively, if you&apos;re building with svn (i.e. compiling the sources), maybe try changing the &quot;print(PrinterJob job, boolean isSilent)&quot; by adding &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.printerJob = job;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;at the beginning. Also remove &quot;final&quot; from the class variable or it won&apos;t compile.&lt;/p&gt;</comment>
                            <comment id="14021710" author="yl" created="Mon, 9 Jun 2014 06:51:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; yup, your method works. it is working now. thanks!&lt;/p&gt;</comment>
                            <comment id="14021756" author="lehmi" created="Mon, 9 Jun 2014 08:56:33 +0000"  >&lt;p&gt;PDFPagable#getPageFormat doesn&apos;t provide the correct information. I&apos;ve already fixed it and have to run some final tests.&lt;/p&gt;</comment>
                            <comment id="14025411" author="lehmi" created="Mon, 9 Jun 2014 17:34:56 +0000"  >&lt;p&gt;Ive added my changes in revisions &lt;a href=&quot;http://svn.apache.org/r1601447&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1601447&lt;/a&gt; (1.8 branch) and &lt;a href=&quot;http://svn.apache.org/r1601450&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1601450&lt;/a&gt; (trunk) so that getPageFormat now provides the correct information for the page format. I had to remove some of the parameters in the trunk version as those aren&apos;t used anymore.&lt;/p&gt;</comment>
                            <comment id="14026787" author="jahewson" created="Tue, 10 Jun 2014 18:16:42 +0000"  >&lt;p&gt;Woa there! A lot of hard work has gone into improving the printing API in 2.0 recently and you patch just deletes it all... the orientation feature had only recently been added and the old (and incorrect approach) of having getPageFormat() set the paper size and imageable area was removed. This patch needs to be reverted, the new APIs are needed!&lt;/p&gt;

&lt;p&gt;The key issue is misunderstanding what Pageable#getPageFormat() does in PDFBox 2.0 - is &lt;em&gt;no longer responsible&lt;/em&gt; for setting the paper size, nor is it responsible for setting the &lt;em&gt;imageable area&lt;/em&gt;, unless the user happens to have the exact size paper and printer that was used in the PDF file (e.g. if it&apos;s a poster they&apos;ll need a poster printer). Note that the imageable area is &lt;em&gt;printer-specific&lt;/em&gt;, it&apos;s the margins which a given printer is physically able to print within, as no printer can print to the edge of the page. It is &lt;em&gt;not&lt;/em&gt; the size of the PDF image we want to print. You can see that it makes no sense for PDFBox to be trying to set the imageable area given that it is printer-specific! Likewise the paper format returned from getPageFormat() is &lt;em&gt;not&lt;/em&gt; the paper format of the original PDF file, it is the actual paper which the current job will print to - once again, PDFBox should not be choosing this.&lt;/p&gt;

&lt;p&gt;The only thing that getPageFormat() should be doing is returning the paper/layout information that has been passed to it from some other source, so it does seem like calling printerJob.defaultPage() might not quite the right thing to do... some thought will have to go into what the solution is. The only property of the PageFormat which PDFBox should modify is the orientation, because that is just metadata, it doesn&apos;t actually affect physical printing it just tells print-preview how to display the page.&lt;/p&gt;

&lt;p&gt;In conclusion: the existing 2.0 APIs were correct except for maybe printerJob.defaultPage(), now they&apos;re broken again &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14026855" author="lehmi" created="Tue, 10 Jun 2014 19:06:32 +0000"  >&lt;p&gt;Hmmm, maybe you didn&apos;t realize that my implementation doesn&apos;t simply create a PageFormat based on the pdf pagesize but uses PrinterJob#validatePage to adjust the pdf pagesize to the current printer settings.&lt;/p&gt;</comment>
                            <comment id="14026926" author="jahewson" created="Tue, 10 Jun 2014 20:11:31 +0000"  >&lt;p&gt;That&apos;s not what you want though. PDFBox should never be trying to set the imageable area of the page, it&apos;s defined by the printer. Likewise it shouldn&apos;t be trying to set the Paper, it&apos;s up to the user - they can already do this with the existing PDFPrinter class, as Tilman explained. No modifications needed.&lt;/p&gt;

&lt;p&gt;Your change breaks existing code because now PDFBox is trying to set the paper size, when we went to great effort recently to stop it doing that.&lt;/p&gt;

&lt;p&gt;Also, you removed the new API which allowed the page orientation to be overridden by the user, why? It was needed.&lt;/p&gt;</comment>
                            <comment id="14026953" author="tilman" created="Tue, 10 Jun 2014 20:32:17 +0000"  >&lt;p&gt;I don&apos;t know enough about java printing to have an opinion about what API is best (although I generally dislike API changes); the code from a few hours ago had IMHO the problem that the &quot;job&quot; variable is used differently depending whether it is passed at the beginning or at printing time, but I didn&apos;t want to fix this myself.&lt;/p&gt;

&lt;p&gt;Whatever the decision - there are several people here, in the mailing list and in stackoverflow who are printing to label printers and the API should accomodate this so that they have an easy job, or at least that the answer to their questions is easy.&lt;/p&gt;</comment>
                            <comment id="14026964" author="lehmi" created="Tue, 10 Jun 2014 20:39:39 +0000"  >&lt;p&gt;I didn&apos;t see the point why one should override the orientation? &lt;/p&gt;

&lt;p&gt;What exactly should be returned when calling getPageFormat? It can&apos;t be defaultPage() + orientation, that doesn&apos;t make sense either.&lt;/p&gt;

&lt;p&gt;Where exactly does the user provide a paper size in Tilmans explaination?&lt;/p&gt;

&lt;p&gt;BTW, I&apos;m printing to a zebra label printer using PDFBox 1.8.5 incl. that implementattion as patch&lt;/p&gt;</comment>
                            <comment id="14027279" author="jahewson" created="Wed, 11 Jun 2014 00:53:21 +0000"  >&lt;p&gt;So I took a look at this and printerJob.defaultPage() is correct, there are no bugs in existing code, the user was calling the wrong method on PDFPrinter. Note that the user&apos;s issue was fixed before Andreas&apos; commit was ever made.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I didn&apos;t see the point why one should override the orientation?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s for print preview and virtual printers such as XPS.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What exactly should be returned when calling getPageFormat? It can&apos;t be defaultPage() + orientation, that doesn&apos;t make sense either.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Using defaultPage() makes sense, because we also allowed a custom Paper to be set by the user, so that they can override it. Otherwise the paper format is the default available on the printer. Also, I just realised, you also removed the ability to use a custom Paper that was recently added - why?&lt;/p&gt;

&lt;p&gt;What you&apos;ve done with getPageFormat() is simply to return the size of the PDF&apos;s media box, which might not be supported by the printer, in which case validatePage() will return a smaller box. That smaller box will just be defaultPage() anyway so nothing is achieved. There&apos;s an additional problem: if the media box is smaller than defaultPage() then what does validatePage() return? In the best case it will return the closest available paper size with the pritable area shrunk to fit the crop box - but that&apos;s not what you want, because it breaks the STRETCH_TO_FIT scaling mode which was recently added, because now the page&apos;s actual printable area has been artificially reduced, so in print() we can no longer print at any scale other than 100% as was defined by the PDF&apos;s media box.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Where exactly does the user provide a paper size in Tilmans explaination?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry I meant PrinterJob, not Paper. Although custom Paper was available in the last revision...&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;BTW, I&apos;m printing to a zebra label printer using PDFBox 1.8.5 incl. that implementattion as patch&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;1.8.5 does things differently anyway, so it doesn&apos;t matter - it&apos;s 2.0 that I&apos;m referring to.&lt;/p&gt;</comment>
                            <comment id="14027312" author="yl" created="Wed, 11 Jun 2014 01:25:35 +0000"  >&lt;p&gt;i think we should still let the user override the orientation. For my case, i override the orientation when the printer has some weird paper size and print out landscape pdf in portrait and print out portrait in landscape. So i think its good to leave that option open.&lt;/p&gt;

</comment>
                            <comment id="14027445" author="lehmi" created="Wed, 11 Jun 2014 05:52:10 +0000"  >&lt;p&gt;I&apos;ve reverted my changes in revisions &lt;a href=&quot;http://svn.apache.org/r1601812&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1601812&lt;/a&gt; (1.8 branch) and &lt;a href=&quot;http://svn.apache.org/r1601813&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1601813&lt;/a&gt; (trunk). &lt;/p&gt;

&lt;p&gt;I&apos;m still not convinced about solution as it doesn&apos;t make sense in every situation at least to me. But maybe that&apos;s just me&lt;/p&gt;</comment>
                            <comment id="14028907" author="jahewson" created="Thu, 12 Jun 2014 07:37:20 +0000"  >&lt;p&gt;Thanks Andreas &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; We can always revisit this if a concrete example appears.&lt;/p&gt;</comment>
                            <comment id="14030146" author="jahewson" created="Fri, 13 Jun 2014 01:36:08 +0000"  >&lt;p&gt;I&apos;ve updated the JavaDoc in &lt;a href=&quot;http://svn.apache.org/r1602321&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1602321&lt;/a&gt; to better explain what each constructor does.&lt;/p&gt;</comment>
                            <comment id="14367295" author="cel1ne" created="Wed, 18 Mar 2015 15:25:30 +0000"  >&lt;p&gt;I think i&apos;m hit by this issue.&lt;/p&gt;

&lt;p&gt;I create PDFs in A4 from FOP. I used pdfbox 1.8.4 through 1.8.8 to print them fine.&lt;br/&gt;
Since the old pdfbox had an issues with loading fonts I switched to 2.0.0-20150317.130031-1178.jar.&lt;/p&gt;

&lt;p&gt;No matter how I try to print my PDF (to XPS or a real a4-printer), the margins end up different than in the loaded PDF.&lt;br/&gt;
First problem was that the printout was smaller and centered on the page. This was my code:&lt;/p&gt;

&lt;p&gt;PDDocument pdfDoc = PDDocument.load(pdfFile.toFile())) {&lt;br/&gt;
PrinterJob pjob = PrinterJob.getPrinterJob();&lt;br/&gt;
pjob.setJobName(jobTitle);&lt;br/&gt;
pjob.setCopies(count);&lt;br/&gt;
new PDFPrinter(pdfDoc, pjob).silentPrint();&lt;/p&gt;

&lt;p&gt;Now I&apos;ve changed it to this:&lt;/p&gt;

&lt;p&gt;PDDocument pdfDoc = PDDocument.load(pdfFile.toFile())) {&lt;br/&gt;
PrinterJob pjob = PrinterJob.getPrinterJob();&lt;br/&gt;
pjob.setJobName(jobTitle);&lt;br/&gt;
pjob.setCopies(count);&lt;br/&gt;
new PDFPrinter(pdfDoc, Scaling.ACTUAL_SIZE, Orientation.AUTO).silentPrint(pjob);&lt;/p&gt;

&lt;p&gt;The printout is now almost it&apos;s correct size, but all side-margins are smaller than in the PDF.&lt;/p&gt;

&lt;p&gt;Is there any documentation on how to print a pdf as-is?&lt;/p&gt;</comment>
                            <comment id="14535715" author="jahewson" created="Fri, 8 May 2015 22:19:02 +0000"  >&lt;p&gt;This particular issue never existed in the first place. Please open a new JIRA issue and attach the PDF file in question. I suspect the problem is that you&apos;re not taking into account that your default printer has margins - if you want to print at 100% scale, you&apos;ll need to set these to zero.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396991</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wchz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>397109</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>