<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:07:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4176] PDImageXObject doesn&apos;t support TIFF although JavaDoc says it does</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4176</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;This code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; PDImageXObject jpeg = PDImageXObject.createFromByteArray(doc, IOUtils.toByteArray(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(tiffFile)), &lt;span class=&quot;code-quote&quot;&gt;&quot;tiff.tif&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;throws:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalArgumentException: Image type not supported: tiff.tif
        at org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject.createFromByteArray(PDImageXObject.java:351)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13149446">PDFBOX-4176</key>
            <summary>PDImageXObject doesn&apos;t support TIFF although JavaDoc says it does</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="eximius">Kamil</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Apr 2018 09:32:28 +0000</created>
                <updated>Thu, 21 Jun 2018 20:27:53 +0000</updated>
                            <resolved>Tue, 3 Apr 2018 18:32:07 +0000</resolved>
                                    <version>2.0.9</version>
                                    <fixVersion>2.0.10</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16422065" author="tilman" created="Mon, 2 Apr 2018 09:44:24 +0000"  >&lt;p&gt;Could you please attach the file? The exception message only tells the name, and not the file type that is detected by content. Alternatively, call &lt;tt&gt;FileTypeDetector.detectFileType(byteArray)&lt;/tt&gt; and tell the result.&lt;/p&gt;</comment>
                            <comment id="16422066" author="msahyoun" created="Mon, 2 Apr 2018 09:45:30 +0000"  >&lt;p&gt;Could you test with &lt;tt&gt;PDImageXObject.createFromFileByContent&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;The message is generated because the content of the &lt;tt&gt;byte[]&lt;/tt&gt; is not detected to be a TIFF image by the &lt;tt&gt;FileTypeDetector&lt;/tt&gt;.  Are you sure that you are passing a TIFF image?&lt;/p&gt;

&lt;p&gt;If that doesn&apos;t help please attach the TIFF in question.&lt;/p&gt;</comment>
                            <comment id="16422067" author="tilman" created="Mon, 2 Apr 2018 09:46:15 +0000"  >&lt;p&gt;Alternatively, use &lt;tt&gt;PDImageXObject.createFromFileByExtension()&lt;/tt&gt; and see what happens.&lt;/p&gt;</comment>
                            <comment id="16422084" author="eximius" created="Mon, 2 Apr 2018 10:03:04 +0000"  >&lt;p&gt;To check it, you can use the code from this issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4177&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PDFBOX-4177&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;and file from the attachment&lt;/p&gt;</comment>
                            <comment id="16422088" author="eximius" created="Mon, 2 Apr 2018 10:06:43 +0000"  >&lt;p&gt;By the way - if I use this workaround, it works fine:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; BufferedImage workaround(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File file) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    BufferedImage imgIn = ImageIO.read(file);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(imgIn.getType() != BufferedImage.TYPE_INT_RGB){
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; BufferedImage newImage = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedImage(imgIn.getWidth(), imgIn.getHeight(), BufferedImage.TYPE_INT_RGB);
        newImage.createGraphics().drawImage(imgIn, 0, 0, Color.WHITE, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        imgIn = newImage;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; imgIn;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16422101" author="tilman" created="Mon, 2 Apr 2018 10:26:00 +0000"  >&lt;p&gt;The file is misidentified as ARW. Even if this bug would be fixed, it would still fail, because it is a color image&#160;&lt;/p&gt;
 &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.io.IOException: First image in tiff is not CCITT T4 or T6 compressed
	at org.apache.pdfbox.pdmodel.graphics.image.CCITTFactory.extractFromTiff(CCITTFactory.java:433)
	at org.apache.pdfbox.pdmodel.graphics.image.CCITTFactory.createFromRandomAccessImpl(CCITTFactory.java:214)
	at org.apache.pdfbox.pdmodel.graphics.image.CCITTFactory.createFromByteArray(CCITTFactory.java:132)
	at org.apache.pdfbox.pdmodel.graphics.image.CCITTFactory.createFromByteArray(CCITTFactory.java:109)
	at org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject.createFromByteArray(PDImageXObject.java:319)
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16422103" author="eximius" created="Mon, 2 Apr 2018 10:30:21 +0000"  >&lt;p&gt;So&#160;how&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ImageIO.read(file)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;can read it correctly?&lt;/p&gt;</comment>
                            <comment id="16422113" author="tilman" created="Mon, 2 Apr 2018 10:45:04 +0000"  >&lt;p&gt;Because there&apos;s a bug in the file type detector. The easiest way for you would either be to use&#160;&lt;tt&gt;PDImageXObject createFromFile()&lt;/tt&gt; or to use &lt;tt&gt;LosslessFactory.createFromImage(ImageIO.read(file))&lt;/tt&gt;. You&apos;ll have to use one of these anyway if your production TIFF files are not G3 or G4 encoded.&lt;/p&gt;</comment>
                            <comment id="16422115" author="tilman" created="Mon, 2 Apr 2018 10:46:42 +0000"  >&lt;p&gt;Ooops, I think you&apos;re asking about &quot;First image in tiff is not CCITT T4 or T6 compressed&quot;. That is because PDFBox can use the existing compression for TIFF files with these compressions, i.e. doesn&apos;t have to decompress first.&lt;/p&gt;</comment>
                            <comment id="16422117" author="tilman" created="Mon, 2 Apr 2018 10:48:13 +0000"  >&lt;p&gt;(&quot;CCITT T4 or T6&quot; is the same as &quot;G3 or G4 compression&quot;, just in case it is getting confusing)&lt;/p&gt;</comment>
                            <comment id="16422206" author="tilman" created="Mon, 2 Apr 2018 12:34:09 +0000"  >&lt;p&gt;There&apos;s an issue on github... if it hasn&apos;t been fixed by 2.0.10 release time, then I&apos;ll just remove a few file types from our code copy.&lt;/p&gt;</comment>
                            <comment id="16422921" author="eximius" created="Mon, 2 Apr 2018 18:25:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;Because there&apos;s a bug in the file type detector.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can bug in file type detector be fixed?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;There&apos;s an issue on github... if it hasn&apos;t been fixed by 2.0.10 release time, then I&apos;ll just remove a few file types from our code copy.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I didn&apos;t understand that. Does it mean that there is possibility to fix my issue?&lt;/p&gt;</comment>
                            <comment id="16422934" author="tilman" created="Mon, 2 Apr 2018 18:31:18 +0000"  >&lt;p&gt;The part that it is recognized as ARW can be fixed either by the person who wrote that part, or by me (by removing the ARW file type from the list). The part &quot;First image in tiff is not CCITT T4 or T6 compressed&quot; cannot because PDF doesn&apos;t support color in the CCITT filter. What it means is that even if I fix the part that it isn&apos;t detected as a TIF, you still can&apos;t use the method (unless your production images are G3 or G4 compressed b/w images.&lt;/p&gt;</comment>
                            <comment id="16422988" author="eximius" created="Mon, 2 Apr 2018 19:04:44 +0000"  >&lt;p&gt;Ok, this is even more tricky...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; PDImageXObject jpeg = PDImageXObject.createFromByteArray(doc, IOUtils.toByteArray(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(tiffFile)), &lt;span class=&quot;code-quote&quot;&gt;&quot;tiff.tif&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;fails on &quot;tiff.tif&quot;, but works on &quot;cmyk.jpeg&quot; (in attachment)&lt;br/&gt;
while:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; PDImageXObject jpeg = LosslessFactory.createFromImage(doc, ImageIO.read(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;cmyk.jpeg&quot;&lt;/span&gt;)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;works for &quot;tiff.tif&quot; but fails for &quot;cmyk.jpeg&quot; with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
javax.imageio.IIOException: Unsupported Image Type
        at java.desktop/com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(JPEGImageReader.java:1182)
        at java.desktop/com.sun.imageio.plugins.jpeg.JPEGImageReader.read(JPEGImageReader.java:1153)
        at java.desktop/javax.imageio.ImageIO.read(ImageIO.java:1468)
        at java.desktop/javax.imageio.ImageIO.read(ImageIO.java:1315)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
If &quot;LosslessFactory.createFromImage&quot; works for &quot;tiff.tif&quot; then maybe there is possibility, to make &quot;PDImageXObject.createFromByteArray&quot; work as well?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16423022" author="tilman" created="Mon, 2 Apr 2018 19:27:47 +0000"  >&lt;p&gt;ImageIO can&apos;t read CMYK jpeg images directly. You can use the twelvemonkeys library instead. Or use&#160;&lt;tt&gt;PDImageXObject.createFromByteArray&lt;/tt&gt; which works for that case (because PDFBox reads the raster).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/haraldk/TwelveMonkeys&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/haraldk/TwelveMonkeys&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16423032" author="tilman" created="Mon, 2 Apr 2018 19:36:27 +0000"  >&lt;p&gt;I have to admit that yes, a user would expect that &lt;tt&gt;PDImageXObject.createFromByteArray&lt;/tt&gt; can do all... what we could do is that if it is a TIF, then investigate the TIF tags (as done in &lt;tt&gt;CCITTFactory.extractFromTiff&lt;/tt&gt;) to check whether the TIF factory can handle it. If not, then handle it like &quot;other&quot;.&lt;/p&gt;</comment>
                            <comment id="16423064" author="eximius" created="Mon, 2 Apr 2018 20:09:49 +0000"  >&lt;p&gt;that would be great! Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16424296" author="jira-bot" created="Tue, 3 Apr 2018 17:02:55 +0000"  >&lt;p&gt;Commit 1828258 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1828258&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1828258&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4176&quot; title=&quot;PDImageXObject doesn&amp;#39;t support TIFF although JavaDoc says it does&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4176&quot;&gt;&lt;del&gt;PDFBOX-4176&lt;/del&gt;&lt;/a&gt;: support valid TIFF files that are not processed by the TIFF factory; disable buggy .ARW detection; improve exception message&lt;/p&gt;</comment>
                            <comment id="16424297" author="jira-bot" created="Tue, 3 Apr 2018 17:03:00 +0000"  >&lt;p&gt;Commit 1828259 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1828259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1828259&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4176&quot; title=&quot;PDImageXObject doesn&amp;#39;t support TIFF although JavaDoc says it does&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4176&quot;&gt;&lt;del&gt;PDFBOX-4176&lt;/del&gt;&lt;/a&gt;: support valid TIFF files that are not processed by the TIFF factory; disable buggy .ARW detection; improve exception message&lt;/p&gt;</comment>
                            <comment id="16424303" author="tilman" created="Tue, 3 Apr 2018 17:06:36 +0000"  >&lt;p&gt;It turned out to be easier than I thought - just catch the checked exception.&lt;/p&gt;</comment>
                            <comment id="16424403" author="tilman" created="Tue, 3 Apr 2018 18:32:07 +0000"  >&lt;p&gt;Snapshot available here... hope this helps!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.10-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.10-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16424409" author="eximius" created="Tue, 3 Apr 2018 18:33:35 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12921506">PDFBOX-3163</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3s1hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>