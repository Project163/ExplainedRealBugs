<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:59:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2687] ClassCastException when trying to get OutputIntents or add to it</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2687</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Form the users mailing list:&lt;/p&gt;

&lt;p&gt;Im trying to call &quot;List&amp;lt;PDOutputIntent&amp;gt; outputIntents = doc.getDocumentCatalog().getOutputIntent();&quot; on &lt;a href=&quot;https://www.dropbox.com/s/u7gwgxpq1656x4d/acme_invoice-42_a1b.pdf?dl=0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.dropbox.com/s/u7gwgxpq1656x4d/acme_invoice-42_a1b.pdf?dl=0&lt;/a&gt; &amp;lt;&lt;a href=&quot;https://www.dropbox.com/s/u7gwgxpq1656x4d/acme_invoice-42_a1b.pdf?dl=0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.dropbox.com/s/u7gwgxpq1656x4d/acme_invoice-42_a1b.pdf?dl=0&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;The Stacktrace is:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.ClassCastException: org.apache.pdfbox.cos.COSObject cannot be cast to org.apache.pdfbox.cos.COSArray&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDDocumentCatalog.addOutputIntent(PDDocumentCatalog.java:474)&lt;/p&gt;


&lt;p&gt;Should the code really contain a cast in PDDocumentCatalog.java:474&lt;/p&gt;</description>
                <environment></environment>
        <key id="12775660">PDFBOX-2687</key>
            <summary>ClassCastException when trying to get OutputIntents or add to it</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="msahyoun">Maruan Sahyoun</assignee>
                                    <reporter username="msahyoun">Maruan Sahyoun</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Feb 2015 17:25:32 +0000</created>
                <updated>Sat, 28 Mar 2015 14:10:34 +0000</updated>
                            <resolved>Thu, 19 Feb 2015 09:56:17 +0000</resolved>
                                    <version>1.8.6</version>
                    <version>1.8.8</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.9</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14324515" author="jira-bot" created="Tue, 17 Feb 2015 17:31:56 +0000"  >&lt;p&gt;Commit 1660451 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1660451&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1660451&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2687&quot; title=&quot;ClassCastException when trying to get OutputIntents or add to it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2687&quot;&gt;&lt;del&gt;PDFBOX-2687&lt;/del&gt;&lt;/a&gt; avoid ClassCastException when getting OutputIntents&lt;/p&gt;</comment>
                            <comment id="14324541" author="jira-bot" created="Tue, 17 Feb 2015 17:41:46 +0000"  >&lt;p&gt;Commit 1660456 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1660456&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1660456&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2687&quot; title=&quot;ClassCastException when trying to get OutputIntents or add to it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2687&quot;&gt;&lt;del&gt;PDFBOX-2687&lt;/del&gt;&lt;/a&gt; avoid ClassCastException when getting OutputIntents&lt;/p&gt;</comment>
                            <comment id="14324548" author="msahyoun" created="Tue, 17 Feb 2015 17:46:47 +0000"  >&lt;p&gt;From the spec&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The optional OutputIntents entry in the document catalogue (see 7.7.2, &#8220;Document Catalog&#8221;) holds an array of output intent &lt;b&gt;dictionaries&lt;/b&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;so casting to COSStream was wrong&lt;/p&gt;</comment>
                            <comment id="14324711" author="vadimbauer" created="Tue, 17 Feb 2015 19:16:44 +0000"  >&lt;p&gt;It is only partly fixed. If you take a look at getOutputIntent and addOutputIntent they implement the same logic.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;PDDocumentCatalog.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2	    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;PDOutputIntent&amp;gt; getOutputIntent () {
453	        List&amp;lt;PDOutputIntent&amp;gt; retval = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;PDOutputIntent&amp;gt;();
454	        COSArray array = (COSArray)root.getDictionaryObject(COSName.OUTPUT_INTENTS);
455	        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (array!=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
456	            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (COSBase cosBase : array)
457	            {
458	                PDOutputIntent oi = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDOutputIntent((COSDictionary)cosBase);
459	                retval.add(oi);
460	            }
461	        }
462	        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; retval;
463	    }
464	
465	    /**
466	     * Add an OutputIntent to the list.
467	     * 
468	     * If there is not OutputIntent, the list is created and the first
469	     * element added.
470	     * 
471	     * @param outputIntent the OutputIntent to add.
472	     */
473	    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void addOutputIntent (PDOutputIntent outputIntent) {
474	        COSArray array = (COSArray)root.getItem(COSName.OUTPUT_INTENTS);
475	        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (array==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
476	            array = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; COSArray();
477	            root.setItem(COSName.OUTPUT_INTENTS, array);
478	        }
479	        array.add(outputIntent.getCOSObject());
480	    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14324743" author="msahyoun" created="Tue, 17 Feb 2015 19:33:17 +0000"  >&lt;p&gt;Thanks for the feedback. I&apos;ll do the other changes too. For 2.0 only I will be changing the method call from getOutputIntent() to getOutputIntents() to be symmetric with the setter and reflect that this can contain multiple entries.&lt;/p&gt;</comment>
                            <comment id="14324756" author="jira-bot" created="Tue, 17 Feb 2015 19:43:06 +0000"  >&lt;p&gt;Commit 1660475 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1660475&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1660475&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2687&quot; title=&quot;ClassCastException when trying to get OutputIntents or add to it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2687&quot;&gt;&lt;del&gt;PDFBOX-2687&lt;/del&gt;&lt;/a&gt; avoid ClassCastException when adding an OutputIntent; rename getter for OutputIntents&lt;/p&gt;</comment>
                            <comment id="14324777" author="jira-bot" created="Tue, 17 Feb 2015 19:59:31 +0000"  >&lt;p&gt;Commit 1660481 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1660481&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1660481&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2687&quot; title=&quot;ClassCastException when trying to get OutputIntents or add to it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2687&quot;&gt;&lt;del&gt;PDFBOX-2687&lt;/del&gt;&lt;/a&gt; avoid ClassCastException when adding an OutputIntent&lt;/p&gt;</comment>
                            <comment id="14324822" author="jira-bot" created="Tue, 17 Feb 2015 20:26:58 +0000"  >&lt;p&gt;Commit 1660490 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1660490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1660490&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2687&quot; title=&quot;ClassCastException when trying to get OutputIntents or add to it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2687&quot;&gt;&lt;del&gt;PDFBOX-2687&lt;/del&gt;&lt;/a&gt; add unit test&lt;/p&gt;</comment>
                            <comment id="14324845" author="jira-bot" created="Tue, 17 Feb 2015 20:37:02 +0000"  >&lt;p&gt;Commit 1660492 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1660492&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1660492&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2687&quot; title=&quot;ClassCastException when trying to get OutputIntents or add to it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2687&quot;&gt;&lt;del&gt;PDFBOX-2687&lt;/del&gt;&lt;/a&gt; add unit test&lt;/p&gt;</comment>
                            <comment id="14325725" author="msahyoun" created="Wed, 18 Feb 2015 11:19:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vadimbauer&quot; class=&quot;user-hover&quot; rel=&quot;vadimbauer&quot;&gt;vadimbauer&lt;/a&gt; could you check again to verify if it works for you now?&lt;/p&gt;</comment>
                            <comment id="14327081" author="vadimbauer" created="Thu, 19 Feb 2015 07:46:24 +0000"  >&lt;p&gt;works now, great job&lt;/p&gt;</comment>
                            <comment id="14327180" author="msahyoun" created="Thu, 19 Feb 2015 09:56:17 +0000"  >&lt;p&gt;Resolving as user confirmed that the issue has been resolved. Supported by test case results.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25q8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>