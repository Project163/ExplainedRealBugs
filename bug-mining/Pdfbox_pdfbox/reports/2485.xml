<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:11:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5094] Wrong glyph when rendering a symbolic TTF font with WinANSIEncoding</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5094</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The attached PDF uses a TTF font (CourierNewPSMT) which isn&apos;t embedded. It&apos;s marked as symbolic but uses a WinANSIEncoding. Instead of the german umlaut &quot;&#252;&quot; another special character is rendered&lt;/p&gt;</description>
                <environment></environment>
        <key id="13356382">PDFBOX-5094</key>
            <summary>Wrong glyph when rendering a symbolic TTF font with WinANSIEncoding</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="lehmi">Andreas Lehmk&#252;hler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2021 07:11:39 +0000</created>
                <updated>Fri, 19 Mar 2021 15:42:08 +0000</updated>
                            <resolved>Sat, 6 Feb 2021 13:22:39 +0000</resolved>
                                    <version>2.0.22</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.23</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17277753" author="lehmi" created="Wed, 3 Feb 2021 07:23:15 +0000"  >&lt;p&gt;The current implementation uses the an internal font cmap for a symbolic font which maps the wrong glyph.&lt;/p&gt;

&lt;p&gt;Excerpt of the spec (9.6.6.4 Encodings for TrueType Fonts)&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;If the font has a named Encoding entry of either MacRomanEncoding or WinAnsiEncoding, or if the font&lt;br/&gt;
 descriptor&#8217;s Nonsymbolic flag (see Table 123) is set, the conforming reader shall create a table that maps from&lt;br/&gt;
 character codes to glyph names:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;If the Encoding entry is one of the names MacRomanEncoding or WinAnsiEncoding, the table shall be initialized&lt;br/&gt;
 with the mappings described in Annex D.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;I&apos;ve changed the implementation in &lt;tt&gt;org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.codeToGID(int)&lt;/tt&gt; and it works. But the described procedure was introduced in PDF 1.3 and I&apos;m not sure if my changes have some unwanted effects if it comes to PDFs &amp;lt; 1.3. WDYT?&lt;/p&gt;

</comment>
                            <comment id="17278584" author="jira-bot" created="Thu, 4 Feb 2021 06:47:15 +0000"  >&lt;p&gt;Commit 1886185 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1886185&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1886185&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5094&quot; title=&quot;Wrong glyph when rendering a symbolic TTF font with WinANSIEncoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5094&quot;&gt;&lt;del&gt;PDFBOX-5094&lt;/del&gt;&lt;/a&gt;: follow the spec if a symbolic true type font uses WinANSI or MacRoman as encdoing&lt;/p&gt;</comment>
                            <comment id="17278585" author="jira-bot" created="Thu, 4 Feb 2021 06:47:30 +0000"  >&lt;p&gt;Commit 1886186 from lehmi@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1886186&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1886186&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5094&quot; title=&quot;Wrong glyph when rendering a symbolic TTF font with WinANSIEncoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5094&quot;&gt;&lt;del&gt;PDFBOX-5094&lt;/del&gt;&lt;/a&gt;: follow the spec if a symbolic true type font uses WinANSI or MacRoman as encdoing&lt;/p&gt;</comment>
                            <comment id="17278600" author="lehmi" created="Thu, 4 Feb 2021 07:02:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; I&apos;ve committed my changes, do you have some cycles to run a rendering test to see if there are any issues? TIA&lt;/p&gt;</comment>
                            <comment id="17278608" author="tilman" created="Thu, 4 Feb 2021 07:17:56 +0000"  >&lt;p&gt;The bullet points are replaced with something else in the elvia file, also differences in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2215&quot; title=&quot;NPE in PDTrueTypeFont.makeFontDescriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2215&quot;&gt;&lt;del&gt;PDFBOX-2215&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2434&quot; title=&quot;ClassCastException in readVersionInTrailer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2434&quot;&gt;&lt;del&gt;PDFBOX-2434&lt;/del&gt;&lt;/a&gt; and the file from PDF.js issue 6353.&lt;/p&gt;</comment>
                            <comment id="17279159" author="lehmi" created="Thu, 4 Feb 2021 20:51:43 +0000"  >&lt;p&gt;Thanks, I&apos;m going to have look&lt;/p&gt;</comment>
                            <comment id="17280164" author="jira-bot" created="Sat, 6 Feb 2021 11:59:17 +0000"  >&lt;p&gt;Commit 1886253 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1886253&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1886253&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5094&quot; title=&quot;Wrong glyph when rendering a symbolic TTF font with WinANSIEncoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5094&quot;&gt;&lt;del&gt;PDFBOX-5094&lt;/del&gt;&lt;/a&gt;: removed first attempt for a fix, rearranged existing code to meet the spec&lt;/p&gt;</comment>
                            <comment id="17280165" author="jira-bot" created="Sat, 6 Feb 2021 11:59:55 +0000"  >&lt;p&gt;Commit 1886254 from lehmi@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1886254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1886254&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5094&quot; title=&quot;Wrong glyph when rendering a symbolic TTF font with WinANSIEncoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5094&quot;&gt;&lt;del&gt;PDFBOX-5094&lt;/del&gt;&lt;/a&gt;: removed first attempt for a fix, rearranged existing code to meet the spec&lt;/p&gt;</comment>
                            <comment id="17280170" author="lehmi" created="Sat, 6 Feb 2021 12:06:13 +0000"  >&lt;p&gt;I had some strange effects. I couldn&apos;t find differences in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2215&quot; title=&quot;NPE in PDTrueTypeFont.makeFontDescriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2215&quot;&gt;&lt;del&gt;PDFBOX-2215&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2434&quot; title=&quot;ClassCastException in readVersionInTrailer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2434&quot;&gt;&lt;del&gt;PDFBOX-2434&lt;/del&gt;&lt;/a&gt; and the elvia file doesn&apos;t work &lt;b&gt;without&lt;/b&gt; my patch which let me to the conclusion that the mapped font is somehow involved. In the end I&apos;ve realized that the solution was almost there, I&apos;ve simply rearranged the existing code to take the mapped font into account.&lt;/p&gt;</comment>
                            <comment id="17280174" author="tilman" created="Sat, 6 Feb 2021 12:37:22 +0000"  >&lt;p&gt;All good now, thanks!&lt;/p&gt;</comment>
                            <comment id="17280191" author="lehmi" created="Sat, 6 Feb 2021 13:22:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Thanks again for your valuable feedback!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13362584">PDFBOX-5114</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13019894" name="DokumentAusVorlage_Test_PdfBox-1.pdf" size="30806" author="lehmi" created="Wed, 3 Feb 2021 07:11:34 +0000"/>
                            <attachment id="13019968" name="ELVIA-Reiserucktritt-Vollschutz.pdf" size="104450" author="tilman" created="Thu, 4 Feb 2021 07:12:34 +0000"/>
                            <attachment id="13019969" name="PDFJS-6353-Wingdings.pdf" size="8116" author="tilman" created="Thu, 4 Feb 2021 07:17:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nalc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>