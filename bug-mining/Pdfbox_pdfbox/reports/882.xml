<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:58:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1242] Handle non ISO-8859-1 chars with drawString</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1242</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The PDPageContentStream.drawString take a String as argument, it construct a COSString of the input.&lt;br/&gt;
If the input contain chars above 255, the COSString is prefixed 0xFe, 0xff and the bytes are taken from the&lt;br/&gt;
input as &quot;UTF-16BE&quot; encoded.&lt;/p&gt;

&lt;p&gt;Back in the drawString method this unicode16 encoded COSString is appended as a &quot;ISO-8859-1&quot;        &lt;/p&gt;

&lt;p&gt;	appendRawCommands( new String( buffer.toByteArray(), &quot;ISO-8859-1&quot;));&lt;/p&gt;

&lt;p&gt;The result of this is that a line with UTF-16 chars is shown prefix with &#254;&#255;, and with double space between the other chars.&lt;br/&gt;
The chars above 255 are shown as the two corresponding ISO-8859-1 characters.&lt;/p&gt;

&lt;p&gt;As a side question to this observation, is there an alternative way to use Pdfbox, to support UTF16?&lt;/p&gt;



</description>
                <environment></environment>
        <key id="12544599">PDFBOX-1242</key>
            <summary>Handle non ISO-8859-1 chars with drawString</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jahewson">John Hewson</assignee>
                                    <reporter username="peterandersen">Peter Andersen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Feb 2012 12:32:22 +0000</created>
                <updated>Thu, 17 Mar 2016 19:08:30 +0000</updated>
                            <resolved>Fri, 12 Dec 2014 04:49:59 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.6.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Writing</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13588091" author="gerhardt" created="Wed, 27 Feb 2013 07:38:43 +0000"  >&lt;p&gt;This issue seems to be a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-922&quot; title=&quot;True type PDFont subclass only supports WinAnsiEncoding (hardcoded!)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-922&quot;&gt;&lt;del&gt;PDFBOX-922&lt;/del&gt;&lt;/a&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-922&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PDFBOX-922&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13588502" author="glen@organicdesign.org" created="Wed, 27 Feb 2013 16:46:53 +0000"  >&lt;p&gt;Please consider the following code to convert your characters as a work-around.  IMPORTANT: Please do NOT incorporate this into PDPageContentStream.drawString().  All transliteration must come before any line-breaking code because:&lt;br/&gt;
1. the new character may have a different width than the old one&lt;br/&gt;
2. the old or new character may be a line-breaking character and the other not or&lt;br/&gt;
3. the old character may be mapped to two or more new characters (there are currently only two cases of this, but there could be more).&lt;/p&gt;

&lt;p&gt;// Copyright 2012-01-10 PlanBase Inc. &amp;amp; Glen Peterson&lt;br/&gt;
//&lt;br/&gt;
// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);&lt;br/&gt;
// you may not use this file except in compliance with the License.&lt;br/&gt;
// You may obtain a copy of the License at&lt;br/&gt;
//&lt;br/&gt;
// &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
//&lt;br/&gt;
// Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
// See the License for the specific language governing permissions and&lt;br/&gt;
// limitations under the License.&lt;/p&gt;


&lt;p&gt;    private static final String ISO_8859_1 = &quot;ISO_8859_1&quot;;&lt;br/&gt;
    private static final String UNICODE_BULLET = &quot;\u2022&quot;;&lt;/p&gt;

&lt;p&gt;    // PDFBox uses an encoding that the PDF spec calls WinAnsiEncoding.  The spec says this is&lt;br/&gt;
    // Windows Code Page 1252.&lt;br/&gt;
    // &lt;a href=&quot;http://en.wikipedia.org/wiki/Windows-1252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://en.wikipedia.org/wiki/Windows-1252&lt;/a&gt;&lt;br/&gt;
    // It has a lot in common with ISO-8859-1, but it defines some additional characters such as&lt;br/&gt;
    // the Euro symbol.&lt;br/&gt;
    private static final Map&amp;lt;String,String&amp;gt; utf16ToWinAnsi;&lt;br/&gt;
    static {&lt;br/&gt;
        Map&amp;lt;String,String&amp;gt; tempMap = new HashMap&amp;lt;String,String&amp;gt;();&lt;/p&gt;

&lt;p&gt;        try {&lt;br/&gt;
            // 129, 141, 143, 144, and 157 are undefined in WinAnsi.&lt;br/&gt;
            // I had mapped A0-FF to 160-255 without noticing that that maps each character to&lt;br/&gt;
            // itself, meaning that Unicode and WinAnsii are the same in that range.&lt;/p&gt;

&lt;p&gt;            // Unicode characters with exact WinAnsi equivalents&lt;br/&gt;
            tempMap.put(&quot;\u0152&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)140}
&lt;p&gt;,ISO_8859_1)); // OE&lt;br/&gt;
            tempMap.put(&quot;\u0153&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)156}
&lt;p&gt;,ISO_8859_1)); // oe&lt;br/&gt;
            tempMap.put(&quot;\u0160&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)138},ISO_8859_1)); // S Acron&lt;br/&gt;
            tempMap.put(&quot;\u0161&quot;, new String(new byte[]{0,(byte)154},ISO_8859_1)); // s acron&lt;br/&gt;
            tempMap.put(&quot;\u0178&quot;, new String(new byte[]{0,(byte)159},ISO_8859_1)); // Y Diaeresis&lt;br/&gt;
            tempMap.put(&quot;\u017D&quot;, new String(new byte[]{0,(byte)142},ISO_8859_1)); // Capital Z-caron&lt;br/&gt;
            tempMap.put(&quot;\u017E&quot;, new String(new byte[]{0,(byte)158},ISO_8859_1)); // Lower-case Z-caron&lt;br/&gt;
            tempMap.put(&quot;\u0192&quot;, new String(new byte[]{0,(byte)131},ISO_8859_1)); // F with a hook (like jf put together)&lt;br/&gt;
            tempMap.put(&quot;\u02C6&quot;, new String(new byte[]{0,(byte)136},ISO_8859_1)); // circumflex (up-caret)&lt;br/&gt;
            tempMap.put(&quot;\u02DC&quot;, new String(new byte[]{0,(byte)152},ISO_8859_1)); // Tilde&lt;br/&gt;
&lt;br/&gt;
            // Cyrillic letters map to their closest Romanizations according to ISO 9:1995&lt;br/&gt;
            // &lt;a href=&quot;http://en.wikipedia.org/wiki/ISO_9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://en.wikipedia.org/wiki/ISO_9&lt;/a&gt;&lt;br/&gt;
            // &lt;a href=&quot;http://en.wikipedia.org/wiki/A_(Cyrillic&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://en.wikipedia.org/wiki/A_(Cyrillic&lt;/a&gt;)&lt;br/&gt;
&lt;br/&gt;
            // Cyrillic extensions&lt;br/&gt;
            // 0400 &#1024; Cyrillic capital letter IE WITH GRAVE&lt;br/&gt;
            // &#8801; 0415 &#1045;  0300 (left-accent)&lt;br/&gt;
            tempMap.put(&quot;\u0400&quot;, new String(new byte[]{0,(byte)200},ISO_8859_1));&lt;br/&gt;
            // 0401 &#1025; Cyrillic capital letter IO&lt;br/&gt;
            // &#8801; 0415 &#1045;  0308 (diuresis)&lt;br/&gt;
            tempMap.put(&quot;\u0401&quot;, new String(new byte[]{0,(byte)203},ISO_8859_1));&lt;br/&gt;
            // 0402 &#1026; Cyrillic capital letter DJE&lt;br/&gt;
            tempMap.put(&quot;\u0402&quot;, new String(new byte[]{0,(byte)208},ISO_8859_1));&lt;br/&gt;
            // 0403 &#1027; Cyrillic capital letter GJE&lt;br/&gt;
            // &#8801; 0413 &#1043;  0301 (accent)&lt;br/&gt;
            // Ghe only maps to G-acute, which is not in our charset.&lt;br/&gt;
            // 0404 &#1028; Cyrillic capital letter UKRAINIAN IE&lt;br/&gt;
            tempMap.put(&quot;\u0404&quot;, new String(new byte[]{0,(byte)202},ISO_8859_1));&lt;br/&gt;
            // 0405 &#1029; Cyrillic capital letter DZE&lt;br/&gt;
            tempMap.put(&quot;\u0405&quot;, &quot;S&quot;); //&lt;br/&gt;
            // 0406 &#1030; Cyrillic capital letter BYELORUSSIAN-&lt;br/&gt;
            // UKRAINIAN I&lt;br/&gt;
            // &#8594; 0049 I  latin capital letter i&lt;br/&gt;
            // &#8594; 0456 &#1110;  cyrillic small letter byelorussian-&lt;br/&gt;
            // ukrainian i&lt;br/&gt;
            // &#8594; 04C0 &#1216;  cyrillic letter palochka&lt;br/&gt;
            tempMap.put(&quot;\u0406&quot;, new String(new byte[]{0,(byte)204},ISO_8859_1));&lt;br/&gt;
            // 0407 &#1031; Cyrillic capital letter YI&lt;br/&gt;
            // &#8801; 0406 &#1030;  0308 (diuresis)&lt;br/&gt;
            tempMap.put(&quot;\u0407&quot;, new String(new byte[]{0,(byte)207},ISO_8859_1));&lt;br/&gt;
            // 0408 &#1032; Cyrillic capital letter JE&lt;br/&gt;
            // 0409 &#1033; Cyrillic capital letter LJE&lt;br/&gt;
            // 040A &#1034; Cyrillic capital letter NJE&lt;br/&gt;
            // 040B &#1035; Cyrillic capital letter TSHE&lt;br/&gt;
            // 040C &#1036; Cyrillic capital letter KJE&lt;br/&gt;
            // &#8801; 041A &#1050;  0301 (accent)&lt;br/&gt;
            // 040D &#1037; Cyrillic capital letter I WITH GRAVE&lt;br/&gt;
            // &#8801; 0418 &#1048;  0300 (accent)&lt;br/&gt;
            // 040E &#1038; Cyrillic capital letter SHORT U&lt;br/&gt;
            // &#8801; 0423 &#1059;  0306 (accent)&lt;br/&gt;
            // 040F &#1039; Cyrillic capital letter DZHE&lt;br/&gt;
&lt;br/&gt;
            // Basic Russian alphabet&lt;br/&gt;
            // See: &lt;a href=&quot;http://www.unicode.org/charts/PDF/U0400.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.unicode.org/charts/PDF/U0400.pdf&lt;/a&gt;&lt;br/&gt;
            // 0410 &#1040; Cyrillic capital letter A =&amp;gt; Latin A&lt;br/&gt;
            tempMap.put(&quot;\u0410&quot;, &quot;A&quot;);&lt;br/&gt;
            // 0411 &#1041; Cyrillic capital letter BE =&amp;gt; Latin B&lt;br/&gt;
            // &#8594; 0183 &#387;  latin small letter b with topbar&lt;br/&gt;
            tempMap.put(&quot;\u0411&quot;, &quot;B&quot;);&lt;br/&gt;
            // 0412 &#1042; Cyrillic capital letter VE =&amp;gt; Latin V&lt;br/&gt;
            tempMap.put(&quot;\u0412&quot;, &quot;V&quot;);&lt;br/&gt;
            // 0413 &#1043; Cyrillic capital letter GHE =&amp;gt; Latin G&lt;br/&gt;
            tempMap.put(&quot;\u0413&quot;, &quot;G&quot;);&lt;br/&gt;
            // 0414 &#1044; Cyrillic capital letter DE =&amp;gt; Latin D&lt;br/&gt;
            tempMap.put(&quot;\u0414&quot;, &quot;D&quot;);&lt;br/&gt;
            // 0415 &#1045; Cyrillic capital letter IE =&amp;gt; Latin E&lt;br/&gt;
            tempMap.put(&quot;\u0415&quot;, &quot;E&quot;);&lt;br/&gt;
            // 0416 &#1046; Cyrillic capital letter ZHE =&amp;gt; Z-caron&lt;br/&gt;
            tempMap.put(&quot;\u0416&quot;, new String(new byte[]{0,(byte)142},ISO_8859_1));&lt;br/&gt;
            // 0417 &#1047; Cyrillic capital letter ZE =&amp;gt; Latin Z&lt;br/&gt;
            tempMap.put(&quot;\u0417&quot;, &quot;Z&quot;);&lt;br/&gt;
            // 0418 &#1048; Cyrillic capital letter I =&amp;gt; Latin I&lt;br/&gt;
            tempMap.put(&quot;\u0418&quot;, &quot;I&quot;);&lt;br/&gt;
            // 0419 &#1049; Cyrillic capital letter SHORT I =&amp;gt; Latin J&lt;br/&gt;
            // &#8801; 0418 &#1048;  0306 (a little mark)&lt;br/&gt;
            // The two-character form (reversed N plus the mark) is not supported.&lt;br/&gt;
            tempMap.put(&quot;\u0419&quot;, &quot;J&quot;);&lt;br/&gt;
            // 041A &#1050; Cyrillic capital letter KA =&amp;gt; Latin K&lt;br/&gt;
            tempMap.put(&quot;\u041A&quot;, &quot;K&quot;);&lt;br/&gt;
            // 041B &#1051; Cyrillic capital letter EL =&amp;gt; Latin L&lt;br/&gt;
            tempMap.put(&quot;\u041B&quot;, &quot;L&quot;);&lt;br/&gt;
            // 041C &#1052; Cyrillic capital letter EM =&amp;gt; Latin M&lt;br/&gt;
            tempMap.put(&quot;\u041C&quot;, &quot;M&quot;);&lt;br/&gt;
            // 041D &#1053; Cyrillic capital letter EN =&amp;gt; Latin N&lt;br/&gt;
            tempMap.put(&quot;\u041D&quot;, &quot;N&quot;);&lt;br/&gt;
            // 041E &#1054; Cyrillic capital letter O =&amp;gt; Latin O&lt;br/&gt;
            tempMap.put(&quot;\u041E&quot;, &quot;O&quot;);&lt;br/&gt;
            // 041F &#1055; Cyrillic capital letter PE =&amp;gt; Latin P&lt;br/&gt;
            tempMap.put(&quot;\u041F&quot;, &quot;P&quot;);&lt;br/&gt;
            // 0420 &#1056; Cyrillic capital letter ER =&amp;gt; Latin R&lt;br/&gt;
            tempMap.put(&quot;\u0420&quot;, &quot;R&quot;);&lt;br/&gt;
            // 0421 &#1057; Cyrillic capital letter ES =&amp;gt; Latin S&lt;br/&gt;
            tempMap.put(&quot;\u0421&quot;, &quot;S&quot;);&lt;br/&gt;
            // 0422 &#1058; Cyrillic capital letter TE =&amp;gt; Latin T&lt;br/&gt;
            tempMap.put(&quot;\u0422&quot;, &quot;T&quot;);&lt;br/&gt;
            // 0423 &#1059; Cyrillic capital letter U =&amp;gt; Latin U&lt;br/&gt;
            // &#8594; 0478 &#1144;  cyrillic capital letter uk&lt;br/&gt;
            // &#8594; 04AF &#1199;  cyrillic small letter straight u&lt;br/&gt;
            // &#8594; A64A &#42570;  cyrillic capital letter monograph uk&lt;br/&gt;
            tempMap.put(&quot;\u0423&quot;, &quot;U&quot;);&lt;br/&gt;
            tempMap.put(&quot;\u0478&quot;, &quot;U&quot;); // Is this right?&lt;br/&gt;
            tempMap.put(&quot;\u04AF&quot;, &quot;U&quot;); // Is this right?&lt;br/&gt;
            tempMap.put(&quot;\uA64A&quot;, &quot;U&quot;); // Is this right?&lt;br/&gt;
            // 0424 &#1060; Cyrillic capital letter EF =&amp;gt; Latin F&lt;br/&gt;
            tempMap.put(&quot;\u0424&quot;, &quot;F&quot;);&lt;br/&gt;
            // 0425 &#1061; Cyrillic capital letter HA =&amp;gt; Latin H&lt;br/&gt;
            tempMap.put(&quot;\u0425&quot;, &quot;H&quot;);&lt;br/&gt;
            // 0426 &#1062; Cyrillic capital letter TSE =&amp;gt; Latin C&lt;br/&gt;
            tempMap.put(&quot;\u0426&quot;, &quot;C&quot;);&lt;br/&gt;
            // 0427 &#1063; Cyrillic capital letter CHE =&amp;gt; Mapping to &quot;Ch&quot; because there is no&lt;br/&gt;
            // C-caron - hope this is the best choice!  A also had this as &quot;CH&quot; but some make it&lt;br/&gt;
            // Tch as in Tchaikovsky, really didn&apos;t know what to do here.&lt;br/&gt;
            tempMap.put(&quot;\u0427&quot;, &quot;Ch&quot;);&lt;br/&gt;
            // 0428 &#1064; Cyrillic capital letter SHA =&amp;gt; S-caron&lt;br/&gt;
            tempMap.put(&quot;\u0428&quot;, new String(new byte[]{0,(byte)138}
&lt;p&gt;,ISO_8859_1));&lt;br/&gt;
            // 0429 &#1065; Cyrillic capital letter SHCHA =&amp;gt; Latin &quot;Shch&quot; because there is no&lt;br/&gt;
            // S-circumflex to map it to.  Should it go to S-caron like SHA?&lt;br/&gt;
            tempMap.put(&quot;\u0429&quot;, &quot;Shch&quot;);&lt;br/&gt;
            // 042A &#1066; Cyrillic capital letter HARD SIGN =&amp;gt; Latin double prime, or in this case,&lt;br/&gt;
            // right double-quote.&lt;br/&gt;
            tempMap.put(&quot;\u042A&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)148},ISO_8859_1));&lt;br/&gt;
            // 042B &#1067; Cyrillic capital letter YERU =&amp;gt; Latin Y&lt;br/&gt;
            tempMap.put(&quot;\u042B&quot;, &quot;Y&quot;);&lt;br/&gt;
            // 042C &#1068; Cyrillic capital letter SOFT SIGN =&amp;gt; Latin prime, or in this case,&lt;br/&gt;
            // the right-single-quote.&lt;br/&gt;
            tempMap.put(&quot;\u042C&quot;, new String(new byte[]{0,(byte)146},ISO_8859_1));&lt;br/&gt;
            // 042D &#1069; Cyrillic capital letter E =&amp;gt; Latin E-grave&lt;br/&gt;
            tempMap.put(&quot;\u042D&quot;, new String(new byte[]{0,(byte)200},ISO_8859_1));&lt;br/&gt;
            // 042E &#1070; Cyrillic capital letter YU =&amp;gt; Latin U-circumflex&lt;br/&gt;
            tempMap.put(&quot;\u042E&quot;, new String(new byte[]{0,(byte)219},ISO_8859_1));&lt;br/&gt;
            // 042F &#1071; Cyrillic capital letter YA =&amp;gt; A-circumflex&lt;br/&gt;
            tempMap.put(&quot;\u042F&quot;, new String(new byte[]{0,(byte)194},ISO_8859_1));&lt;br/&gt;
            // 0430 &#1072; Cyrillic small letter A&lt;br/&gt;
            tempMap.put(&quot;\u0430&quot;, &quot;a&quot;);&lt;br/&gt;
            // 0431 &#1073; Cyrillic small letter BE&lt;br/&gt;
            tempMap.put(&quot;\u0431&quot;, &quot;b&quot;);&lt;br/&gt;
            // 0432 &#1074; Cyrillic small letter VE&lt;br/&gt;
            tempMap.put(&quot;\u0432&quot;, &quot;v&quot;);&lt;br/&gt;
            // 0433 &#1075; Cyrillic small letter GHE&lt;br/&gt;
            tempMap.put(&quot;\u0433&quot;, &quot;g&quot;);&lt;br/&gt;
            // 0434 &#1076; Cyrillic small letter DE&lt;br/&gt;
            tempMap.put(&quot;\u0434&quot;, &quot;d&quot;);&lt;br/&gt;
            // 0435 &#1077; Cyrillic small letter IE&lt;br/&gt;
            tempMap.put(&quot;\u0435&quot;, &quot;e&quot;);&lt;br/&gt;
            // 0436 &#1078; Cyrillic small letter ZHE&lt;br/&gt;
            tempMap.put(&quot;\u0436&quot;, new String(new byte[]{0,(byte)158},ISO_8859_1));&lt;br/&gt;
            // 0437 &#1079; Cyrillic small letter ZE&lt;br/&gt;
            tempMap.put(&quot;\u0437&quot;, &quot;z&quot;);&lt;br/&gt;
            // 0438 &#1080; Cyrillic small letter I&lt;br/&gt;
            tempMap.put(&quot;\u0438&quot;, &quot;i&quot;);&lt;br/&gt;
            // 0439 &#1081; Cyrillic small letter SHORT I&lt;br/&gt;
            // &#8801; 0438 &#1080;  0306 (accent)&lt;br/&gt;
            tempMap.put(&quot;\u0439&quot;, &quot;j&quot;);&lt;br/&gt;
            // 043A &#1082; Cyrillic small letter KA&lt;br/&gt;
            tempMap.put(&quot;\u043A&quot;, &quot;k&quot;);&lt;br/&gt;
            // 043B &#1083; Cyrillic small letter EL&lt;br/&gt;
            tempMap.put(&quot;\u043B&quot;, &quot;l&quot;);&lt;br/&gt;
            // 043C &#1084; Cyrillic small letter EM&lt;br/&gt;
            tempMap.put(&quot;\u043C&quot;, &quot;m&quot;);&lt;br/&gt;
            // 043D &#1085; Cyrillic small letter EN&lt;br/&gt;
            tempMap.put(&quot;\u043D&quot;, &quot;n&quot;);&lt;br/&gt;
            // 043E &#1086; Cyrillic small letter O&lt;br/&gt;
            tempMap.put(&quot;\u043E&quot;, &quot;o&quot;);&lt;br/&gt;
            // 043F &#1087; Cyrillic small letter PE&lt;br/&gt;
            tempMap.put(&quot;\u043F&quot;, &quot;p&quot;);&lt;br/&gt;
            // 0440 &#1088; Cyrillic small letter ER&lt;br/&gt;
            tempMap.put(&quot;\u0440&quot;, &quot;r&quot;);&lt;br/&gt;
            // 0441 &#1089; Cyrillic small letter ES&lt;br/&gt;
            tempMap.put(&quot;\u0441&quot;, &quot;s&quot;);&lt;br/&gt;
            // 0442 &#1090; Cyrillic small letter TE&lt;br/&gt;
            tempMap.put(&quot;\u0442&quot;, &quot;t&quot;);&lt;br/&gt;
            // 0443 &#1091; Cyrillic small letter U&lt;br/&gt;
            tempMap.put(&quot;\u0443&quot;, &quot;u&quot;);&lt;br/&gt;
            // 0444 &#1092; Cyrillic small letter EF&lt;br/&gt;
            tempMap.put(&quot;\u0444&quot;, &quot;f&quot;);&lt;br/&gt;
            // 0445 &#1093; Cyrillic small letter HA&lt;br/&gt;
            tempMap.put(&quot;\u0445&quot;, &quot;h&quot;);&lt;br/&gt;
            // 0446 &#1094; Cyrillic small letter TSE&lt;br/&gt;
            tempMap.put(&quot;\u0446&quot;, &quot;c&quot;);&lt;br/&gt;
            // 0447 &#1095; Cyrillic small letter CHE - see notes on capital letter.&lt;br/&gt;
            tempMap.put(&quot;\u0447&quot;, &quot;ch&quot;);&lt;br/&gt;
            // 0448 &#1096; Cyrillic small letter SHA&lt;br/&gt;
            tempMap.put(&quot;\u0448&quot;, new String(new byte[]{0,(byte)154},ISO_8859_1));&lt;br/&gt;
            // 0449 &#1097; Cyrillic small letter SHCHA&lt;br/&gt;
            tempMap.put(&quot;\u0449&quot;, &quot;shch&quot;);&lt;br/&gt;
            // 044A &#1098; Cyrillic small letter HARD SIGN&lt;br/&gt;
            tempMap.put(&quot;\u044A&quot;, new String(new byte[]{0,(byte)148}
&lt;p&gt;,ISO_8859_1));&lt;br/&gt;
            // 044B &#1099; Cyrillic small letter YERU&lt;br/&gt;
            // &#8594; A651 &#42577;  cyrillic small letter yeru with back yer&lt;br/&gt;
            tempMap.put(&quot;\u044B&quot;, &quot;y&quot;);&lt;br/&gt;
            // 044C &#1100; Cyrillic small letter SOFT SIGN&lt;br/&gt;
            // &#8594; 0185 &#389;  latin small letter tone six&lt;br/&gt;
            // &#8594; A64F &#42575;  cyrillic small letter neutral yer&lt;br/&gt;
            tempMap.put(&quot;\u044C&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)146},ISO_8859_1));&lt;br/&gt;
            // 044D &#1101; Cyrillic small letter E&lt;br/&gt;
            tempMap.put(&quot;\u044D&quot;, new String(new byte[]{0,(byte)232},ISO_8859_1));&lt;br/&gt;
            // 044E &#1102; Cyrillic small letter YU&lt;br/&gt;
            // &#8594; A655 &#42581;  cyrillic small letter reversed yu&lt;br/&gt;
            tempMap.put(&quot;\u044E&quot;, new String(new byte[]{0,(byte)251},ISO_8859_1));&lt;br/&gt;
            tempMap.put(&quot;\uA655&quot;, new String(new byte[]{0,(byte)251},ISO_8859_1)); // is this right?&lt;br/&gt;
            // 044F &#1103; Cyrillic small letter YA =&amp;gt; a-circumflex&lt;br/&gt;
            tempMap.put(&quot;\u044F&quot;, new String(new byte[]{0,(byte)226},ISO_8859_1));&lt;br/&gt;
&lt;br/&gt;
            // Cyrillic extensions&lt;br/&gt;
            // 0450 &#1104; CYRILLIC SMALL LETTER IE WITH GRAVE&lt;br/&gt;
            // &#8226; Macedonian&lt;br/&gt;
            // &#8801; 0435 &#1077;  0300 $&#768;&lt;br/&gt;
            tempMap.put(&quot;\u0450&quot;, new String(new byte[]{0,(byte)232},ISO_8859_1)); // e-grave =&amp;gt; e-grave&lt;br/&gt;
            // 0451 &#1105; CYRILLIC SMALL LETTER IO&lt;br/&gt;
            // &#8226; Russian, ...&lt;br/&gt;
            // &#8801; 0435 &#1077;  0308 $&#776;&lt;br/&gt;
            tempMap.put(&quot;\u0451&quot;, new String(new byte[]{0,(byte)235},ISO_8859_1));&lt;br/&gt;
            // 0452 &#1106; CYRILLIC SMALL LETTER DJE&lt;br/&gt;
            // &#8226; Serbian&lt;br/&gt;
            // &#8594; 0111 &#273;  latin small letter d with stroke&lt;br/&gt;
            tempMap.put(&quot;\u0452&quot;, new String(new byte[]{0,(byte)240},ISO_8859_1));&lt;br/&gt;
            // 0453 &#1107; CYRILLIC SMALL LETTER GJE - only maps to g-acute, which is not in our charset.&lt;br/&gt;
            // &#8226; Macedonian&lt;br/&gt;
            // &#8801; 0433 &#1075;  0301 $&#769;&lt;br/&gt;
            // 0454 &#1108; CYRILLIC SMALL LETTER UKRAINIAN IE&lt;br/&gt;
            // = Old Cyrillic yest&lt;br/&gt;
            tempMap.put(&quot;\u0454&quot;, new String(new byte[]{0,(byte)234},ISO_8859_1));&lt;br/&gt;
            // 0455 &#1109; CYRILLIC SMALL LETTER DZE&lt;br/&gt;
            // &#8226; Macedonian&lt;br/&gt;
            // &#8594; A643 &#42563;  cyrillic small letter dzelo&lt;br/&gt;
            tempMap.put(&quot;\u0455&quot;, &quot;s&quot;);&lt;br/&gt;
            // 0456 CYRILLIC SMALL LETTER BYELORUSSIAN-&lt;br/&gt;
            // UKRAINIAN I&lt;br/&gt;
            // = Old Cyrillic i&lt;br/&gt;
            tempMap.put(&quot;\u0456&quot;, new String(new byte[]{0,(byte)236},ISO_8859_1));&lt;br/&gt;
            // 0457 &#1111; CYRILLIC SMALL LETTER YI&lt;br/&gt;
            // &#8226; Ukrainian&lt;br/&gt;
            // &#8801; 0456 &#1110;  0308 $&#776;&lt;br/&gt;
            tempMap.put(&quot;\u0457&quot;, new String(new byte[]{0,(byte)239},ISO_8859_1));&lt;br/&gt;
            // 0458 &#1112; CYRILLIC SMALL LETTER JE&lt;br/&gt;
            // &#8226; Serbian, Azerbaijani, Altay&lt;br/&gt;
            // 0459 &#1113; CYRILLIC SMALL LETTER LJE&lt;br/&gt;
            // &#8226; Serbian, Macedonian&lt;br/&gt;
            // &#8594; 01C9 lj  latin small letter lj&lt;br/&gt;
            // 045A &#1114; CYRILLIC SMALL LETTER NJE&lt;br/&gt;
            // &#8226; Serbian, Macedonian&lt;br/&gt;
            // &#8594; 01CC nj  latin small letter nj&lt;br/&gt;
            // 045B &#1115; CYRILLIC SMALL LETTER TSHE&lt;br/&gt;
            // &#8226; Serbian&lt;br/&gt;
            // &#8594; 0107 &#263;  latin small letter c with acute&lt;br/&gt;
            // &#8594; 0127 &#295;  latin small letter h with stroke&lt;br/&gt;
            // &#8594; 040B &#1035;  cyrillic capital letter tshe&lt;br/&gt;
            // &#8594; 210F &#295;  planck constant over two pi&lt;br/&gt;
            // &#8594; A649 &#42569;  cyrillic small letter djerv&lt;br/&gt;
            // 045C &#1116; CYRILLIC SMALL LETTER KJE&lt;br/&gt;
            // &#8226; Macedonian&lt;br/&gt;
            // &#8801; 043A &#1082;  0301 $&#769;&lt;br/&gt;
            // 045D &#1117; CYRILLIC SMALL LETTER I WITH GRAVE&lt;br/&gt;
            // &#8226; Macedonian, Bulgarian&lt;br/&gt;
            // &#8801; 0438 &#1080;  0300 $&#768;&lt;br/&gt;
            // 045E &#1118; CYRILLIC SMALL LETTER SHORT U&lt;br/&gt;
            // &#8226; Byelorussian, Uzbek&lt;br/&gt;
            // &#8801; 0443 &#1091;  0306 $&#774;&lt;br/&gt;
            // 045F &#1119; CYRILLIC SMALL LETTER DZHE&lt;br/&gt;
            // &#8226; Serbian, Macedonian, Abkhasian&lt;br/&gt;
            // &#8594; 01C6 d&#382;  latin small letter dz with caron&lt;br/&gt;
&lt;br/&gt;
            // Extended Cyrillic&lt;br/&gt;
            // ...&lt;br/&gt;
            // 0490 &#1168; CYRILLIC CAPITAL LETTER GHE WITH UPTURN =&amp;gt; G ?&lt;br/&gt;
            tempMap.put(&quot;\u0490&quot;, &quot;G&quot;); // Ghe with upturn&lt;br/&gt;
            // 0491 &#1169; CYRILLIC SMALL LETTER GHE WITH UPTURN&lt;br/&gt;
            // &#8226; Ukrainian&lt;br/&gt;
            tempMap.put(&quot;\u0491&quot;, &quot;g&quot;);&lt;br/&gt;
&lt;br/&gt;
            // Other commonly-used unicode characters with exact WinAnsi equivalents&lt;br/&gt;
            tempMap.put(&quot;\u2013&quot;, new String(new byte[]{0,(byte)150},ISO_8859_1)); // En-dash&lt;br/&gt;
            tempMap.put(&quot;\u2014&quot;, new String(new byte[]{0,(byte)151},ISO_8859_1)); // Em-dash&lt;br/&gt;
            tempMap.put(&quot;\u2018&quot;, new String(new byte[]{0,(byte)145},ISO_8859_1)); // Curved single open quote&lt;br/&gt;
            tempMap.put(&quot;\u2019&quot;, new String(new byte[]{0,(byte)146}
&lt;p&gt;,ISO_8859_1)); // Curved single close-quote&lt;br/&gt;
            tempMap.put(&quot;\u201A&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)130}
&lt;p&gt;,ISO_8859_1)); // Low single curved-quote&lt;br/&gt;
            tempMap.put(&quot;\u201C&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)147}
&lt;p&gt;,ISO_8859_1)); // Curved double open quote&lt;br/&gt;
            tempMap.put(&quot;\u201D&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)148}
&lt;p&gt;,ISO_8859_1)); // Curved double close-quote&lt;br/&gt;
            tempMap.put(&quot;\u201E&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)132}
&lt;p&gt;,ISO_8859_1)); // Low right double quote.&lt;br/&gt;
            tempMap.put(&quot;\u2020&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)134}
&lt;p&gt;,ISO_8859_1)); // Dagger&lt;br/&gt;
            tempMap.put(&quot;\u2021&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)135}
&lt;p&gt;,ISO_8859_1)); // Double dagger&lt;br/&gt;
            tempMap.put(UNICODE_BULLET, new String(new byte[]&lt;/p&gt;
{0,(byte)149}
&lt;p&gt;,ISO_8859_1)); // Bullet - use this as replacement character.&lt;br/&gt;
            tempMap.put(&quot;\u2026&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)133}
&lt;p&gt;,ISO_8859_1)); // Ellipsis&lt;br/&gt;
            tempMap.put(&quot;\u2030&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)137}
&lt;p&gt;,ISO_8859_1)); // Permille&lt;br/&gt;
            tempMap.put(&quot;\u2039&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)139}
&lt;p&gt;,ISO_8859_1)); // Left angle-quote&lt;br/&gt;
            tempMap.put(&quot;\u203A&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)155}
&lt;p&gt;,ISO_8859_1)); // Right angle-quote&lt;br/&gt;
            tempMap.put(&quot;\u20ac&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)128}
&lt;p&gt;,ISO_8859_1)); // Euro symbol&lt;br/&gt;
            tempMap.put(&quot;\u2122&quot;, new String(new byte[]&lt;/p&gt;
{0,(byte)153}
&lt;p&gt;,ISO_8859_1)); // Trademark symbol&lt;/p&gt;

&lt;p&gt;        } catch (UnsupportedEncodingException uee) &lt;/p&gt;
{
            Logger.getLogger(PdfPageMgr.class).error(&quot;Problem creating translation table&quot;, uee);
        }
&lt;p&gt;        utf16ToWinAnsi = Collections.unmodifiableMap(tempMap);&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;    // private static final Pattern whitespacePattern = Pattern.compile(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;p&lt;/p&gt;
{Z}
&lt;p&gt;+&quot;);&lt;br/&gt;
    // What about \u00ba??&lt;br/&gt;
    // \u00a0-\u00a9 \u00ab-\u00b9 \u00bb-\u00bf \u00d7 \u00f7&lt;br/&gt;
    private static final Pattern nonAsciiPattern = Pattern.compile(&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;^\u0000-\u00ff&amp;#93;&lt;/span&gt;&quot;);&lt;br/&gt;
    /**&lt;br/&gt;
     Expects a string in the standard Java UTF-16 encoding and returns one in Windows-1252&lt;br/&gt;
     (informally called ISO-8859-1)&lt;br/&gt;
     @param in&lt;br/&gt;
     @return&lt;br/&gt;
     */&lt;br/&gt;
    public static String convertJavaStringToWinAnsi(String in) {&lt;br/&gt;
        // return in;&lt;/p&gt;

&lt;p&gt;//        ByteBuffer bb = StandardCharsets.UTF_16.encode(CharBuffer.wrap(in));&lt;br/&gt;
//        // then decode those bytes as US-ASCII&lt;br/&gt;
//        return StandardCharsets.ISO_8859_1.decode(bb).toString();&lt;br/&gt;
        // return java.nio.charset.StandardCharsets.ISO_8859_1.encode(in);&lt;/p&gt;


&lt;p&gt;        Matcher m = nonAsciiPattern.matcher(in);&lt;/p&gt;

&lt;p&gt;        StringBuilder sB = new StringBuilder();&lt;br/&gt;
        int idx = 0;&lt;br/&gt;
        while (m.find()) {&lt;/p&gt;

&lt;p&gt;            int start = m.start(); // first character of match.&lt;br/&gt;
            if (idx &amp;lt; start) &lt;/p&gt;
{
                // Append everything from the last match up to this one.
                sB.append(in.subSequence(idx, start));
            }

&lt;p&gt;            String s = utf16ToWinAnsi.get(m.group());&lt;/p&gt;

&lt;p&gt;            // &quot;In WinAnsiEncoding, all unused codes greater than 40 map to the bullet character.&quot;&lt;br/&gt;
            // source: PDF spec, Annex D.3 PDFDocEncoding Character Set p. 656 footnote about&lt;br/&gt;
            // WinAnsiEncoding.&lt;br/&gt;
            //&lt;br/&gt;
            // I think the bullet is the closest thing to a &quot;replacement character&quot; in the&lt;br/&gt;
            // WinAnsi character set, so that&apos;s what I&apos;ll use it for.  It looks tons better than&lt;br/&gt;
            // nullnullnull...&lt;br/&gt;
            if (s == null) &lt;/p&gt;
{
                s = utf16ToWinAnsi.get(UNICODE_BULLET);
            }
&lt;p&gt;            sB.append(s);&lt;/p&gt;

&lt;p&gt;            idx = m.end(); // m.end() is exclusive&lt;br/&gt;
        }&lt;br/&gt;
        if (idx &amp;lt; in.length()) &lt;/p&gt;
{
            sB.append(in.subSequence(idx, in.length()));
        }
&lt;p&gt;        return sB.toString();&lt;br/&gt;
    }&lt;/p&gt;</comment>
                            <comment id="14240161" author="jahewson" created="Tue, 9 Dec 2014 22:18:32 +0000"  >&lt;p&gt;Yes, this is a bug in PDFBox, but it&apos;s one we know about already. What does the code you&apos;ve posted do?&lt;/p&gt;

&lt;p&gt;Please use file attachments to post code, JIRA uses markup so your code is unusable when posted in this manner. You can delete the previous comment and attach it as a file with More &amp;gt; Attach Files.&lt;/p&gt;</comment>
                            <comment id="14240184" author="jahewson" created="Tue, 9 Dec 2014 22:35:31 +0000"  >&lt;p&gt;This is not a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-922&quot; title=&quot;True type PDFont subclass only supports WinAnsiEncoding (hardcoded!)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-922&quot;&gt;&lt;del&gt;PDFBOX-922&lt;/del&gt;&lt;/a&gt;, however both need to be fixed before Unicode text will work. &lt;/p&gt;</comment>
                            <comment id="14240282" author="glen@organicdesign.org" created="Tue, 9 Dec 2014 23:27:44 +0000"  >&lt;p&gt;If I remember correctly, the PDF file format uses it&apos;s own very special 14-bit character encoding.  If you use anything outside of what the PDF spec calles WinAnsi you may have to embed a font that handles those characters in the PDF file to ensure readability.&lt;/p&gt;

&lt;p&gt;I have not submitted any patches, nor am I likely to any time soon.  What I did submit was a very partial work-around.  The mangled code above is now publicly available under the Apache 2.0 license on GitHub where it should be much more readable.  There is a Unicode to WinAnsi translation table here (I&apos;ll explain in a moment):&lt;br/&gt;
&lt;a href=&quot;https://github.com/GlenKPeterson/PdfLayoutManager/blob/master/src/main/java/com/planbase/pdf/layoutmanager/PdfLayoutMgr.java#L651&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/GlenKPeterson/PdfLayoutManager/blob/master/src/main/java/com/planbase/pdf/layoutmanager/PdfLayoutMgr.java#L651&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The code that uses that table is here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/GlenKPeterson/PdfLayoutManager/blob/master/src/main/java/com/planbase/pdf/layoutmanager/PdfLayoutMgr.java#L972&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/GlenKPeterson/PdfLayoutManager/blob/master/src/main/java/com/planbase/pdf/layoutmanager/PdfLayoutMgr.java#L972&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;High-level overview for each input character&lt;/p&gt;

&lt;p&gt;1. The characters up to 127 are the same in UTF-16 and ISO-8859-1, so it leaves them unchanged&lt;/p&gt;

&lt;p&gt;2. If one of the higher than 127 input UTF-16 characters has an ISO-8859-1 equivalent, it is converted directly/exactly.&lt;/p&gt;

&lt;p&gt;3. If the input character is Cyrillic, there are somewhat standard, &quot;Romanized&quot; transliterations, where you can substitute one or more Roman characters that have a similar phonetic sound to the Cyrillic character.  So this lets us support an additional set of languages (Russian in particular) without embedding any fonts or otherwise dealing with the root issue.&lt;/p&gt;

&lt;p&gt;4. If the above rules do not cover the character in question, a bullet is written to the output stream, so that the end user can see that there is a character there that didn&apos;t print.&lt;/p&gt;

&lt;p&gt;OK, so I lied.  The &quot;while&quot; loop at line 1006 doesn&apos;t actually work one character at a time.  It finds instances of characters that need to be substituted.  Then it copies what chunks of raw input it can to the output unchanged.  It only drops to a character-by-character algorithm when it finds a character that actually needs to be substituted.  This means that any length string of modern English characters will pass through unchanged.&lt;/p&gt;

&lt;p&gt;Most of that is in comments in the code on GitHub, but is probably easier to read knowing this overview. I hope that helps.&lt;/p&gt;</comment>
                            <comment id="14243685" author="jahewson" created="Fri, 12 Dec 2014 04:31:23 +0000"  >&lt;p&gt;Ok, so you&apos;re doing effectively doing a WinAnsiEncoding and doing some automated transliteration for other languages. &lt;/p&gt;

&lt;p&gt;Looking at the code for drawString, one key problem is that COSString should not be used at all, as it is for the &quot;text strings&quot; and &quot;byte strings&quot; which appear in PDF dictionaries, but not &quot;content strings&quot; which appear in the content stream, which is why the BOM appears in the text as &quot;&#254;&#255;&quot;. The other problem is that the font&apos;s encoding needs to be used, see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-922&quot; title=&quot;True type PDFont subclass only supports WinAnsiEncoding (hardcoded!)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-922&quot;&gt;&lt;del&gt;PDFBOX-922&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14243692" author="jira-bot" created="Fri, 12 Dec 2014 04:39:38 +0000"  >&lt;p&gt;Commit 1644828 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1644828&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1644828&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1242&quot; title=&quot;Handle non ISO-8859-1 chars with drawString&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1242&quot;&gt;&lt;del&gt;PDFBOX-1242&lt;/del&gt;&lt;/a&gt;: Remove usage of COSString with content streams&lt;/p&gt;</comment>
                            <comment id="14243706" author="jahewson" created="Fri, 12 Dec 2014 04:49:59 +0000"  >&lt;p&gt;This rather large commit removes the usage of COSString when handling content streams. It also overhauls the internals of COSString, restricting where and when encoding or decoding occurs. There are actually three types of COSString in the PDF spec &quot;text strings&quot; &quot;ascii strings&quot; and &quot;byte strings&quot;, all of which COSString now handles. The previous code assumed that all strings were &quot;text strings&quot; which have PDFDocEncoding or UTF-16BE, but this is not the case.&lt;/p&gt;

&lt;p&gt;However, the modified drawString method still uses ISO-8859-1 and needs to be changed to use the font&apos;s encoding. For simple encodings this is being addressed in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-922&quot; title=&quot;True type PDFont subclass only supports WinAnsiEncoding (hardcoded!)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-922&quot;&gt;&lt;del&gt;PDFBOX-922&lt;/del&gt;&lt;/a&gt;, and for full Unicode in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2524&quot; title=&quot;[PATCH] Two PDFont to create PDF documents in CJK and non-ISO-8859-1 languages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2524&quot;&gt;&lt;del&gt;PDFBOX-2524&lt;/del&gt;&lt;/a&gt;. I&apos;m going to resolve this issue as &quot;Fixed&quot;, as there was work done here, but remaining work will be done in those other two issues.&lt;/p&gt;</comment>
                            <comment id="14254933" author="jira-bot" created="Sat, 20 Dec 2014 19:24:26 +0000"  >&lt;p&gt;Commit 1647039 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1647039&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1647039&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2576&quot; title=&quot;Improve code quality&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2576&quot;&gt;&lt;del&gt;PDFBOX-2576&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1242&quot; title=&quot;Handle non ISO-8859-1 chars with drawString&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1242&quot;&gt;&lt;del&gt;PDFBOX-1242&lt;/del&gt;&lt;/a&gt;: simplify write ASCII string; code cleanup&lt;/p&gt;</comment>
                            <comment id="14304403" author="jira-bot" created="Wed, 4 Feb 2015 00:46:32 +0000"  >&lt;p&gt;Commit 1656960 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1656960&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1656960&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1242&quot; title=&quot;Handle non ISO-8859-1 chars with drawString&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1242&quot;&gt;&lt;del&gt;PDFBOX-1242&lt;/del&gt;&lt;/a&gt;: Added ToString() to COSString&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12493366">PDFBOX-922</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229785</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14trz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236289</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>