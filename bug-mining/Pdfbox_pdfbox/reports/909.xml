<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:58:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2525] Overlay: data black &amp; white after import</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2525</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;After overlaying two documents, everything in the source is black &amp;amp; white only. I uploaded a screenshot to &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://oc.evopark.de/public.php?service=files&amp;amp;t=0d7e4e172c30c23b260d3c96cc4986b5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://oc.evopark.de/public.php?service=files&amp;amp;t=0d7e4e172c30c23b260d3c96cc4986b5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;May relate to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2401&quot; title=&quot;Image has wrong colors after Merge&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2401&quot;&gt;&lt;del&gt;PDFBOX-2401&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Some more details: I&apos;m doing everything in-memory, not operating on files. This is the sample code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] mergeOntoLetterhead(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] originalPdf) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, COSVisitorException {
        PDDocument pdf = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(originalPdf));
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pdf.getNumberOfPages() == 0) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; originalPdf;
        }
        PDDocument template = readTemplate();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; != template) {
            Overlay overlay = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Overlay();
            pdf = overlay.overlay(template, pdf);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            logger.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not load letterhead PDF&quot;&lt;/span&gt;);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; originalPdf;
        }
        ByteArrayOutputStream outputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();
        pdf.save(outputStream);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; outputStream.toByteArray();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12758206">PDFBOX-2525</key>
            <summary>Overlay: data black &amp; white after import</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="milgner">Marcus Ilgner</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Nov 2014 12:24:40 +0000</created>
                <updated>Sat, 28 Mar 2015 14:10:33 +0000</updated>
                            <resolved>Tue, 23 Dec 2014 17:13:32 +0000</resolved>
                                    <version>1.8.7</version>
                    <version>1.8.8</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.9</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14227899" author="jahewson" created="Thu, 27 Nov 2014 19:03:07 +0000"  >&lt;p&gt;Please can you attach &lt;em&gt;both&lt;/em&gt; PDF files to this issue with &lt;b&gt;More &amp;gt; Attach Files&lt;/b&gt;.&lt;/p&gt;</comment>
                            <comment id="14227973" author="lehmi" created="Thu, 27 Nov 2014 21:30:52 +0000"  >&lt;p&gt;It looks like you are using the old and deprecated overlay class. &lt;/p&gt;

&lt;p&gt;Have a look at the new one OverlayPDF &lt;a href=&quot;http://svn.apache.org/viewvc/pdfbox/branches/1.8/pdfbox/src/main/java/org/apache/pdfbox/OverlayPDF.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1.8-branch&lt;/a&gt; or &lt;a href=&quot;http://svn.apache.org/viewvc/pdfbox/trunk/tools/src/main/java/org/apache/pdfbox/tools/OverlayPDF.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14228171" author="milgner" created="Fri, 28 Nov 2014 09:12:44 +0000"  >&lt;p&gt;Just attached the two versions. Before (letterhead) and after (rechnung). To make things easy, I used an empty PDF document as the base to overlay on.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; I actually did look at OverlayPDF, too, but it uses the &lt;tt&gt;org.apache.pdfbox.util.Overlay&lt;/tt&gt; class which only works with files, not in-memory. If push comes to shove, I&apos;ll need to write things to temporary files but would like to avoid the disk I/O if possible. Otherwise I&apos;ll look at the source and check whether it can be adapted to work with &lt;tt&gt;PDDocument&lt;/tt&gt;, too.&lt;/p&gt;
</comment>
                            <comment id="14229091" author="lehmi" created="Sun, 30 Nov 2014 12:19:34 +0000"  >&lt;p&gt;OverlayPDF is definitely the better approach and it shouldn&apos;t be that complicated to extend &lt;tt&gt;org.apache.pdfbox.util.Overlay&lt;/tt&gt; to handle instances of &lt;tt&gt;PDDocument&lt;/tt&gt; instead of &lt;tt&gt;String&lt;/tt&gt; for the filename.&lt;/p&gt;</comment>
                            <comment id="14230282" author="jira-bot" created="Mon, 1 Dec 2014 19:22:57 +0000"  >&lt;p&gt;Commit 1642737 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642737&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642737&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2525&quot; title=&quot;Overlay: data black &amp;amp; white after import&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2525&quot;&gt;&lt;del&gt;PDFBOX-2525&lt;/del&gt;&lt;/a&gt;: added the usage of PDDocuments as input&lt;/p&gt;</comment>
                            <comment id="14230308" author="jira-bot" created="Mon, 1 Dec 2014 19:40:16 +0000"  >&lt;p&gt;Commit 1642742 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642742&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642742&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2525&quot; title=&quot;Overlay: data black &amp;amp; white after import&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2525&quot;&gt;&lt;del&gt;PDFBOX-2525&lt;/del&gt;&lt;/a&gt;: added the usage of PDDocuments as input&lt;/p&gt;</comment>
                            <comment id="14230309" author="lehmi" created="Mon, 1 Dec 2014 19:41:45 +0000"  >&lt;p&gt;I&apos;ve extended &lt;tt&gt;org.apache.pdfbox.util.Overlay&lt;/tt&gt; so that one can use PDDocuments as input as well.&lt;/p&gt;

&lt;p&gt;Please give it a try.&lt;/p&gt;</comment>
                            <comment id="14257220" author="jira-bot" created="Tue, 23 Dec 2014 17:02:56 +0000"  >&lt;p&gt;Commit 1647619 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1647619&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1647619&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2525&quot; title=&quot;Overlay: data black &amp;amp; white after import&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2525&quot;&gt;&lt;del&gt;PDFBOX-2525&lt;/del&gt;&lt;/a&gt;: avoid floating point representation when writing matrix values&lt;/p&gt;</comment>
                            <comment id="14257225" author="jira-bot" created="Tue, 23 Dec 2014 17:08:54 +0000"  >&lt;p&gt;Commit 1647620 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1647620&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1647620&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2525&quot; title=&quot;Overlay: data black &amp;amp; white after import&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2525&quot;&gt;&lt;del&gt;PDFBOX-2525&lt;/del&gt;&lt;/a&gt;: avoid floating point representation when writing matrix values&lt;/p&gt;</comment>
                            <comment id="14257232" author="lehmi" created="Tue, 23 Dec 2014 17:13:32 +0000"  >&lt;p&gt;The solution is to use the new overlay class instead of the deprecated one.&lt;/p&gt;

&lt;p&gt;The new class had an issue with very small float values. The new class used under some circumstances a floating point representation of small float values which led to a malformed pdf. I&apos;ve fixed that and now everything works fine.&lt;/p&gt;

&lt;p&gt;Thanks for the report&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12684152" name="evopark_rechnung_14_10-2.pdf" size="45978" author="milgner" created="Fri, 28 Nov 2014 09:12:44 +0000"/>
                            <attachment id="12684153" name="letterhead.pdf" size="84561" author="milgner" created="Fri, 28 Nov 2014 09:12:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22ujz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>