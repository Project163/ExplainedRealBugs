<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:52:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-788] PrintPDF does not take the windows default printer orientation into account</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-788</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;We have 2 printers, the first one is defined to print in Portrait by default in Windows, the other one is defined to print in Landscape by default in Windows.&lt;br/&gt;
PrintPDF does not take the default configuration into account.&lt;/p&gt;

&lt;p&gt;I wrote a little patch that seems to solve this bug&lt;/p&gt;</description>
                <environment>Windows XP at least</environment>
        <key id="12470903">PDFBOX-788</key>
            <summary>PrintPDF does not take the windows default printer orientation into account</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jukkaz">Jukka Zitting</assignee>
                                    <reporter username="cborivant">Christophe Borivant</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Aug 2010 13:54:40 +0000</created>
                <updated>Tue, 26 Oct 2010 09:33:47 +0000</updated>
                            <resolved>Fri, 3 Sep 2010 13:05:05 +0000</resolved>
                                    <version>1.2.1</version>
                                    <fixVersion>1.3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12895682" author="cborivant" created="Thu, 5 Aug 2010 13:58:08 +0000"  >&lt;p&gt;Add the patch content&lt;/p&gt;</comment>
                            <comment id="12895683" author="cborivant" created="Thu, 5 Aug 2010 14:00:26 +0000"  >&lt;p&gt;Add the patch file&lt;/p&gt;</comment>
                            <comment id="12895685" author="cborivant" created="Thu, 5 Aug 2010 14:01:34 +0000"  >&lt;p&gt;Removed the patch content from the description as the patch file has been attached&lt;/p&gt;</comment>
                            <comment id="12896531" author="jukkaz" created="Mon, 9 Aug 2010 13:08:57 +0000"  >&lt;p&gt;Thanks! Patch committed in revision 983627.&lt;/p&gt;</comment>
                            <comment id="12896839" author="cborivant" created="Tue, 10 Aug 2010 10:26:54 +0000"  >&lt;p&gt;As we added a new instance property, we should have written a new setter ( perhaps a new getter to ).&lt;br/&gt;
The caller should be responsible for attaching the PrintJob to the Document.&lt;/p&gt;

&lt;p&gt;I also added the name of the job to replace the default &quot;java printing&quot; default job name.&lt;br/&gt;
This way you will see something like &quot;PDFBox - document.pdf&quot; in your printer spool.&lt;/p&gt;

&lt;p&gt;So here a new patch against rev 983635 ( You can apply it from the root of the trunk ).&lt;/p&gt;</comment>
                            <comment id="12896840" author="cborivant" created="Tue, 10 Aug 2010 10:28:55 +0000"  >&lt;p&gt;Attach the new patch against rev 983635&lt;/p&gt;</comment>
                            <comment id="12901866" author="jukkaz" created="Tue, 24 Aug 2010 13:13:46 +0000"  >&lt;p&gt;I don&apos;t really see the need for a new setter, as the print() method already sets the currentPrinterJob variable. Is there some other need for a client application to set (or get) the printer job?&lt;/p&gt;</comment>
                            <comment id="12901883" author="cborivant" created="Tue, 24 Aug 2010 13:51:36 +0000"  >&lt;p&gt;It&apos;s only a matter of view.&lt;br/&gt;
I think the caller, PrintPDF in our case, should be responsible of the PrintJob instantiation.&lt;br/&gt;
The caller needs to tell the document: &quot;print yourself on this printer with this jobname&quot;.&lt;br/&gt;
This way the caller knows the PrintJob and has full control on it.&lt;br/&gt;
Especially, one could need to cancel the PrintJob if it is not finished.&lt;/p&gt;</comment>
                            <comment id="12901887" author="jukkaz" created="Tue, 24 Aug 2010 13:58:55 +0000"  >&lt;p&gt;&amp;gt; I think the caller, PrintPDF in our case, should be responsible of the PrintJob instantiation. &lt;br/&gt;
&amp;gt; The caller needs to tell the document: &quot;print yourself on this printer with this jobname&quot;.&lt;/p&gt;

&lt;p&gt;Isn&apos;t that already covered by the PDDocument.print(PrinterJob) method call? The current code in PrintPDF is essentially:&lt;/p&gt;

&lt;p&gt;    PrinterJob printJob = PrinterJob.getPrinterJob();&lt;br/&gt;
    ...; // configure the printJob&lt;br/&gt;
    document.print( printJob );&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what extra value a setCurrentPrinterJob() setter would give us here.&lt;/p&gt;

&lt;p&gt;PS. In revision 988523 I committed the suggested improvement to explicitly set the print job name. And in revision 988524 I simplified the PDDocument print methods a bit by removing duplicate code.&lt;/p&gt;</comment>
                            <comment id="12901923" author="cborivant" created="Tue, 24 Aug 2010 15:32:28 +0000"  >&lt;p&gt;PrinterJob printJob = PrinterJob.getPrinterJob(); &lt;/p&gt;

&lt;p&gt;If I&apos;m not wrong, printJob would only be visible from print method because it is not an instance attribute.&lt;br/&gt;
getPageFormat needs to be able to access the original PrintJob to access to the printService and get the printer default configuration.&lt;/p&gt;

&lt;p&gt;It&apos;s probably possible not to use a setter but it sound like a &quot;best pratice&quot; or a &quot;design pattern&quot; to me (remember I&apos;m not really a developper, but the discussion is interesting &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;</comment>
                            <comment id="12901940" author="jukkaz" created="Tue, 24 Aug 2010 16:03:39 +0000"  >&lt;p&gt;The currentPrinterJob variable is mostly an internal implementation detail that&apos;s only accessed during the print() method. It needs to be an instance variable instead of a local method variable because otherwise the getPageFormat method can&apos;t access it. A more ideal design would probably be to use an inner class for the Pageable implementation instead of implementing the interface directly in PDDocument, but since that would break backwards-compatibility we need to keep the currentPrinterJob as an instance variable of PDDocument.&lt;/p&gt;

&lt;p&gt;To summarize, there isn&apos;t really any need for anyone outside the PDDocument class to access the currentPrinterJob variable, so to maintain proper encapsulation of implementation details it&apos;s best not to expose it through a setter or a getter.&lt;/p&gt;</comment>
                            <comment id="12901945" author="cborivant" created="Tue, 24 Aug 2010 16:16:47 +0000"  >&lt;p&gt;Ok, you convince me.&lt;br/&gt;
+, if we need a getter or a setter for any reason, it will never be too late to add it.&lt;/p&gt;</comment>
                            <comment id="12901947" author="cborivant" created="Tue, 24 Aug 2010 16:17:27 +0000"  >&lt;p&gt;The bug should be closed&lt;/p&gt;</comment>
                            <comment id="12901951" author="jukkaz" created="Tue, 24 Aug 2010 16:22:26 +0000"  >&lt;p&gt;Exactly, resolving as fixed.&lt;/p&gt;</comment>
                            <comment id="12902844" author="tchojecki" created="Thu, 26 Aug 2010 12:52:18 +0000"  >&lt;p&gt;Got some problems with this patch.&lt;/p&gt;

&lt;p&gt;Our Application need to know the PageFormat for some pages. So we called PDDocument.getPageFormat(...)&lt;/p&gt;

&lt;p&gt;Now with the changes we got a NPE in Rev 988524 Line 1194&lt;/p&gt;

&lt;p&gt;currentPrinterJob is null by default. Hope this will give enought reason for a setter.&lt;/p&gt;</comment>
                            <comment id="12903807" author="jukkaz" created="Sat, 28 Aug 2010 09:13:58 +0000"  >&lt;p&gt;Reopening for the reported NPE.&lt;/p&gt;</comment>
                            <comment id="12903809" author="jukkaz" created="Sat, 28 Aug 2010 09:35:53 +0000"  >&lt;p&gt;The attached patch (PDPageable.patch) addresses the NPE issue in a relatively clean fashion by introducing a new PDPageable adapter class that should be used instead of directly accessing the Pageable methods in PDDocument.&lt;/p&gt;</comment>
                            <comment id="12904544" author="lehmi" created="Tue, 31 Aug 2010 07:31:21 +0000"  >&lt;p&gt;+1, I already had the same idea, but in another context. &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-586&quot; title=&quot;Text Extraction on Android&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-586&quot;&gt;&lt;del&gt;PDFBOX-586&lt;/del&gt;&lt;/a&gt; adresses text extraction on android and the main approach to achieve that seems to split PDFBox in several components and to minimize (in the ong run avoid) the usage of java.awt stuff within the text extraction part. If it comes to printing I&apos;d like to move the affected code into separate classes. In addition to Jukka&apos;s proposal we should also move the implementation of the java.awt.print.Printable interface from PDPage to a second class(PDPrintable) or to a new class combining both interfaces.&lt;/p&gt;</comment>
                            <comment id="12905879" author="jukkaz" created="Fri, 3 Sep 2010 13:05:05 +0000"  >&lt;p&gt;I committed the proposed patch in revision 992282 and extended it to cover Andreas&apos; idea in revision 992284.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12451330" name="PDDocument.patch" size="2851" author="cborivant" created="Thu, 5 Aug 2010 14:00:26 +0000"/>
                            <attachment id="12451662" name="PDFBOX-788.diff" size="2684" author="cborivant" created="Tue, 10 Aug 2010 10:28:55 +0000"/>
                            <attachment id="12453348" name="PDPageable.patch" size="11551" author="jukkaz" created="Sat, 28 Aug 2010 09:35:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zjhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>205459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>