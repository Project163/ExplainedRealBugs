<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:56:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-908] Gracefull handle corrupt PDFs</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-908</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I will use PDFBox for text extraction and one of the main requirements are that it should extract as much text as possible. If the PDF document contains something that isn&apos;t strictly correct according to the PDF specs it should try recover gracefully and continue scanning if possible if forceParsing is enabled. While testing against a large batch of PDF documents (including large ebooks) I found that the parser sometimes stops parsing and/or extracting text even with forceParsing enabled.  I have attached a patch to make PDFBox handle some PDF problems more gracefully when  forceParsing is enabled.&lt;/p&gt;

&lt;p&gt;Some of my patches tries to handle certain situations differently from the existing code. For example the existing code to handle cases when an endobj is missing seems to be very complex. In all of my tests it seems to work better when the code just assumes that the endobj was missing. Whether or not assuming that endobj is missing or whether the existing way to cope with this is better is of course debatable. &lt;/p&gt;

&lt;p&gt;A patch is included to handle situations where the data (DI) for an inline image contains the EI keyword. The EI is now only accepted if the char before EI is an end-of-line marker instead of whitespace.&lt;/p&gt;

&lt;p&gt;I have added the method #isContinueOnError to PDFParser.  By default it returns forceParsing but implementors can override it to stop parsing when a certain limit is reached (for example on a timeout).  This can be helpful to stop parsing when the parser gets stuck in an unlimited loop.&lt;/p&gt;

&lt;p&gt;BaseParser#readInt unread the data when a NumberFormatException was thrown. This resulted in an unlimited loop when forcParsing was enabled when testing with test-integer-too-large.pdf (see attached file). I think it&apos;s better to not unread data when an exception will be thrown because the risks are higher that you run into an unlimited loop.&lt;/p&gt;

&lt;p&gt;The other patches are just minor like checks for null values etc.&lt;/p&gt;

&lt;p&gt;I have attached four test PDF documents. These PDF documents are PDFs which I corrupted by hand to try to replicate similar situations I found in existing (copyrighted) ebooks.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12480976">PDFBOX-908</key>
            <summary>Gracefull handle corrupt PDFs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="martijn_brinkers">Martijn Brinkers</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Nov 2010 15:20:40 +0000</created>
                <updated>Thu, 17 Mar 2016 19:08:09 +0000</updated>
                            <resolved>Fri, 29 Jan 2016 10:55:32 +0000</resolved>
                                    <version>1.3.1</version>
                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="12936027" author="martijn_brinkers" created="Fri, 26 Nov 2010 15:21:35 +0000"  >&lt;p&gt;patches&lt;/p&gt;</comment>
                            <comment id="12936028" author="martijn_brinkers" created="Fri, 26 Nov 2010 15:22:16 +0000"  >&lt;p&gt;test files&lt;/p&gt;</comment>
                            <comment id="12936029" author="martijn_brinkers" created="Fri, 26 Nov 2010 15:22:41 +0000"  >&lt;p&gt;test pdf&lt;/p&gt;</comment>
                            <comment id="13914187" author="tilman" created="Thu, 27 Feb 2014 07:56:16 +0000"  >&lt;p&gt;Could you please try again with the copyrighted files, not the test files, and loadNonSeq() with the 2nd parameter being null?&lt;/p&gt;</comment>
                            <comment id="14025183" author="tilman" created="Mon, 9 Jun 2014 13:30:01 +0000"  >&lt;p&gt;I improved the error messages (offset) in rev 1601374 &amp;amp; 1601377 for the 1.8 branch and rev 1601375 &amp;amp; 1601378 for the trunk.&lt;/p&gt;</comment>
                            <comment id="14025398" author="tilman" created="Mon, 9 Jun 2014 17:28:22 +0000"  >&lt;p&gt;The missing endobj was handled in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1811&quot; title=&quot;java.io.IOException: Object at offset does not end with &amp;#39;endobj&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1811&quot;&gt;&lt;del&gt;PDFBOX-1811&lt;/del&gt;&lt;/a&gt;. The ID / EI problem is hopefully also solved, see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1164&quot; title=&quot;Inline image parsing error causes RuntimeException + FIX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1164&quot;&gt;&lt;del&gt;PDFBOX-1164&lt;/del&gt;&lt;/a&gt;. About the rest - I&apos;m undecided.&lt;/p&gt;</comment>
                            <comment id="15123345" author="lehmi" created="Fri, 29 Jan 2016 10:55:32 +0000"  >&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; already mentioned, most of the files should be handled by the improved parser, at least in 2.0.0.&lt;/p&gt;

&lt;p&gt;Due to the lack of a feedback I&apos;m resolving this as solved in 2.0.0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12460500" name="PDFBOX-908.patch" size="13385" author="martijn_brinkers" created="Fri, 26 Nov 2010 15:21:35 +0000"/>
                            <attachment id="12460502" name="test-corrupt-R.pdf" size="5915" author="martijn_brinkers" created="Fri, 26 Nov 2010 15:22:16 +0000"/>
                            <attachment id="12460503" name="test-integer-too-large.pdf" size="5940" author="martijn_brinkers" created="Fri, 26 Nov 2010 15:22:16 +0000"/>
                            <attachment id="12460501" name="test-obj-missing-bj.pdf" size="5915" author="martijn_brinkers" created="Fri, 26 Nov 2010 15:22:16 +0000"/>
                            <attachment id="12460504" name="test-stream-missing-endobj.pdf" size="5950" author="martijn_brinkers" created="Fri, 26 Nov 2010 15:22:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>85060</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14uk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236416</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>