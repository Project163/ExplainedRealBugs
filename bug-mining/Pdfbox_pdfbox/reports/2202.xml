<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:09:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4478] Import XFDF stamp annotation has malformed appearance</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4478</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;As reported by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=k.keggenhoff&quot; class=&quot;user-hover&quot; rel=&quot;k.keggenhoff&quot;&gt;k.keggenhoff&lt;/a&gt; in the &lt;a href=&quot;https://mail-archives.apache.org/mod_mbox/pdfbox-users/201903.mbox/%3C1ab6958a898b406f8a0446e9e1d8e524%40conclude.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;user mailing list&lt;/a&gt;, when using code like below one gets warnings and the result file&#160;&lt;font color=&quot;#333333&quot;&gt;doesn&apos;t open properly on Adobe Reader.&lt;/font&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: Group =&amp;gt; NOT handling child element: BOOL
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: Group =&amp;gt; NOT handling child element: BOOL
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: GS0 =&amp;gt; NOT handling child element: BOOL
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: GS0 =&amp;gt; NOT handling child element: FIXED
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: GS0 =&amp;gt; NOT handling child element: FIXED
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: GS1 =&amp;gt; NOT handling child element: BOOL
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: GS1 =&amp;gt; NOT handling child element: INT
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: GS1 =&amp;gt; NOT handling child element: INT
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: P0 =&amp;gt; NOT handling child element: ARRAY
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: P0 =&amp;gt; NOT handling child element: INT
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: Shading =&amp;gt; NOT handling child element: ARRAY
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: Shading =&amp;gt; NOT handling child element: ARRAY
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: Function =&amp;gt; NOT handling child element: ARRAY
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: Function =&amp;gt; NOT handling child element: ARRAY
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: Function =&amp;gt; NOT handling child element: ARRAY
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: Function =&amp;gt; NOT handling child element: INT
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: Function =&amp;gt; NOT handling child element: ARRAY
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseDictElement
WARNUNG: Shading =&amp;gt; NOT handling child element: INT
M&#228;r 01, 2019 9:35:12 AM org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp parseStreamElement
WARNUNG: N =&amp;gt; Not handling element DATA encoding: ASCII&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            File pdfFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;lorem_1.pdf&quot;&lt;/span&gt;);

            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Load pdf into PDDocument: &quot;&lt;/span&gt; + pdfFile);
            doc = PDDocument.load(pdfFile);
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Loaded pdf\n&quot;&lt;/span&gt;);

            File xfdfFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;lorem.xfdf&quot;&lt;/span&gt;);
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;\tLoad xfdf into FDFDocument: &quot;&lt;/span&gt; + xfdfFile);
            fdf = FDFDocument.loadXFDF(xfdfFile);

            &lt;span class=&quot;code-comment&quot;&gt;// Lookup with annotations exists
&lt;/span&gt;            List&amp;lt;FDFAnnotation&amp;gt; fdfAnnots = fdf.getCatalog().getFDF().getAnnotations();
            &lt;span class=&quot;code-comment&quot;&gt;// add each annotation in the xfdf into the document
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (FDFAnnotation fdfAnnot : fdfAnnots)
            {
                PDPage page = doc.getPage(fdfAnnot.getPage());
                List&amp;lt;PDAnnotation&amp;gt; pageAnnots = page.getAnnotations();
                annot = PDAnnotation.createAnnotation(fdfAnnot.getCOSObject());
                annot.setLocked(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
                pageAnnots.add(annot);
            }
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;\tAdded into PDF&quot;&lt;/span&gt;);
            fdf.close();

            doc.save(&lt;span class=&quot;code-quote&quot;&gt;&quot;lorem_stamp_markup.pdf&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;My first impression: The shading dictionary in the annotation is incomplete. The code in FDFAnnotationStamp.parseDictElement() is incomplete, possibly also the code in parseArrayElement.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13218853">PDFBOX-4478</key>
            <summary>Import XFDF stamp annotation has malformed appearance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                            <label>Annotations</label>
                            <label>xfdf</label>
                            <label>xml</label>
                    </labels>
                <created>Fri, 1 Mar 2019 09:57:34 +0000</created>
                <updated>Fri, 12 Apr 2019 14:39:51 +0000</updated>
                            <resolved>Fri, 1 Mar 2019 12:54:20 +0000</resolved>
                                    <version>2.0.14</version>
                                    <fixVersion>2.0.15</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16781577" author="tilman" created="Fri, 1 Mar 2019 11:06:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=k.keggenhoff&quot; class=&quot;user-hover&quot; rel=&quot;k.keggenhoff&quot;&gt;k.keggenhoff&lt;/a&gt; is the file I just attached what you&apos;d expect?&lt;/p&gt;</comment>
                            <comment id="16781589" author="k.keggenhoff" created="Fri, 1 Mar 2019 11:30:27 +0000"  >&lt;p&gt;Yes. There are no error messages and visibly, this PDF and the PDF from which the XFDF was produced, look identically in both Foxit and Adobe Reader.&lt;/p&gt;</comment>
                            <comment id="16781591" author="jira-bot" created="Fri, 1 Mar 2019 11:36:51 +0000"  >&lt;p&gt;Commit 1854575 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1854575&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1854575&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4478&quot; title=&quot;Import XFDF stamp annotation has malformed appearance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4478&quot;&gt;&lt;del&gt;PDFBOX-4478&lt;/del&gt;&lt;/a&gt;: add missing types in arrays and dictionaries&lt;/p&gt;</comment>
                            <comment id="16781592" author="jira-bot" created="Fri, 1 Mar 2019 11:37:19 +0000"  >&lt;p&gt;Commit 1854576 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1854576&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1854576&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4478&quot; title=&quot;Import XFDF stamp annotation has malformed appearance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4478&quot;&gt;&lt;del&gt;PDFBOX-4478&lt;/del&gt;&lt;/a&gt;: add missing types in arrays and dictionaries&lt;/p&gt;</comment>
                            <comment id="16781639" author="tilman" created="Fri, 1 Mar 2019 12:54:20 +0000"  >&lt;p&gt;Thanks for the feedback! Snapshot is here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.15-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.15-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16815998" author="tilman" created="Fri, 12 Apr 2019 06:08:25 +0000"  >&lt;p&gt;Please create a new issue if this is a bug.&lt;/p&gt;</comment>
                            <comment id="16815999" author="k.keggenhoff" created="Fri, 12 Apr 2019 06:08:48 +0000"  >&lt;p&gt;Unfortunately, some stamps still cause issues in 2.0.15. I attached &quot;bad_stamp-2.0.15.xfdf&quot;, which produces this error when I merge it :&lt;/p&gt;

&lt;p&gt;Apr 12, 2019 7:46:34 AM org.apache.pdfbox.util.Hex decodeHex&lt;br/&gt;
SCHWERWIEGEND: Can&apos;t parse&lt;br/&gt;
0, aborting decode&lt;br/&gt;
java.lang.NumberFormatException: For input string: &quot;&lt;br/&gt;
0&quot;&lt;br/&gt;
 at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)&lt;br/&gt;
 at java.lang.Integer.parseInt(Integer.java:569)&lt;br/&gt;
 at org.apache.pdfbox.util.Hex.decodeHex(Hex.java:279)&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp.parseStreamElement(FDFAnnotationStamp.java:253)&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp.parseStampAnnotationAppearanceXML(FDFAnnotationStamp.java:175)&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.fdf.FDFAnnotationStamp.&amp;lt;init&amp;gt;(FDFAnnotationStamp.java:134)&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.fdf.FDFDictionary.&amp;lt;init&amp;gt;(FDFDictionary.java:211)&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.fdf.FDFCatalog.&amp;lt;init&amp;gt;(FDFCatalog.java:63)&lt;br/&gt;
 at org.apache.pdfbox.pdmodel.fdf.FDFDocument.&amp;lt;init&amp;gt;(FDFDocument.java:90)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;it looks like the attribute value contains a LF/CR. When this error occurs, the appearance is missing and only the outline of the stamp is shown when the user selects the element.&lt;/p&gt;

&lt;p&gt;I found two of the default stamps in Adobe Reader (german version) to cause this :&lt;/p&gt;

&lt;p&gt;-&#160;SBPreliminaryResults (&quot;Vorl&#228;ufige Ergebnisse&quot;)&lt;/p&gt;

&lt;p&gt;-&#160;SBNotForPublicRelease (&quot;Nicht zur Ver&#246;ffentlichung&quot;)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16816000" author="k.keggenhoff" created="Fri, 12 Apr 2019 06:10:36 +0000"  >&lt;p&gt;Ok, sure. I missed your comment while writing this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13210450">PDFBOX-4437</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12960756" name="AP.xml" size="8066" author="tilman" created="Fri, 1 Mar 2019 10:04:25 +0000"/>
                            <attachment id="12965677" name="bad_stamp-2.0.15.xfdf" size="15908" author="k.keggenhoff" created="Fri, 12 Apr 2019 06:01:21 +0000"/>
                            <attachment id="12960753" name="lorem.xfdf" size="11357" author="tilman" created="Fri, 1 Mar 2019 09:55:15 +0000"/>
                            <attachment id="12960755" name="lorem_1.pdf" size="250474" author="tilman" created="Fri, 1 Mar 2019 09:55:16 +0000"/>
                            <attachment id="12960754" name="lorem_3_merged.pdf" size="251637" author="tilman" created="Fri, 1 Mar 2019 09:55:16 +0000"/>
                            <attachment id="12960763" name="lorem_stamp_markup-NEW.pdf" size="254066" author="tilman" created="Fri, 1 Mar 2019 11:05:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 31 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0084w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>