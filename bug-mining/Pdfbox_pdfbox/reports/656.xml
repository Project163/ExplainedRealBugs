<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:56:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1511] pdfMerger App produces Garbage</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1511</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;pdfbox Utility pdfMerger produces a merged document containing garbage. All merged pdf files are contained but Strings are destroyed.&lt;/p&gt;

&lt;p&gt;The source pdf files are created with graphviz and are readable without error or disturbance both with Acrobat X and pdfbox pdfDebug Utility.&lt;/p&gt;

&lt;p&gt;Another astounding thing is that a handcoded merger using pdfMergerUtility class works fine when run within Eclipse Juno and creates same garbage when run from cmd line (pls. see attached source PdfRenderer.java)&lt;/p&gt;

&lt;p&gt;I checked everything that comes in mind to find the differences, e.g. Java version, encoding/codepage issues, memory settings, found nothing.&lt;/p&gt;</description>
                <environment>Win XP; Windows Server 2008 R2; java version &amp;quot;1.6.0_21&amp;quot;, </environment>
        <key id="12631214">PDFBOX-1511</key>
            <summary>pdfMerger App produces Garbage</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pdfbox_mike">Michael Huber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Feb 2013 08:03:27 +0000</created>
                <updated>Fri, 19 Sep 2014 14:40:40 +0000</updated>
                            <resolved>Tue, 9 Sep 2014 10:48:51 +0000</resolved>
                                    <version>1.7.1</version>
                                    <fixVersion>1.8.7</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13573296" author="pdfbox_mike" created="Thu, 7 Feb 2013 08:05:02 +0000"  >&lt;p&gt;Source pdf files&lt;/p&gt;</comment>
                            <comment id="13573299" author="pdfbox_mike" created="Thu, 7 Feb 2013 08:06:25 +0000"  >&lt;p&gt;The merged files&lt;/p&gt;</comment>
                            <comment id="13573300" author="pdfbox_mike" created="Thu, 7 Feb 2013 08:08:59 +0000"  >&lt;p&gt;Handcoded java pdf Merger. Both &quot;addToMainPdf&quot; methods produce the same results. Fine output with Juno, garbage from cmd line.&lt;/p&gt;</comment>
                            <comment id="13573405" author="msahyoun" created="Thu, 7 Feb 2013 11:38:42 +0000"  >&lt;p&gt;as a quick hack you can add the line&lt;/p&gt;

&lt;p&gt;newPage.setResources(new PDResources((COSDictionary) cloner.cloneForNewDocument(srcResources)));&lt;/p&gt;

&lt;p&gt;in the appendDocument method of PDFMergerUtility around line 410 after newPage.setRotation( page.findRotation() ); As this creates a new resource for each page the resulting PDF file will be large than necessary.&lt;/p&gt;</comment>
                            <comment id="13573439" author="pdfbox_mike" created="Thu, 7 Feb 2013 12:52:41 +0000"  >&lt;p&gt;Yep, did it on cmd line.&lt;/p&gt;

&lt;p&gt;Consequently now it fails when run from Eclipse, the first page is rendered, all following pages are inserted with correct size but are blank.&lt;/p&gt;

&lt;p&gt;Thanks for saving my project time!&lt;/p&gt;

&lt;p&gt;Kind regards,&lt;/p&gt;

&lt;p&gt;Michael&lt;/p&gt;</comment>
                            <comment id="13721174" author="kirk.haines" created="Fri, 26 Jul 2013 20:26:29 +0000"  >&lt;p&gt;I have also experienced this (Windows 7, Java 1.6.0_35-b10 64-bit) in PDFBox 1.7.1 thru the current trunk.  I tried Maruan&apos;s suggestion and it resolved the issue, at the expense of creating unnecessary duplicate resources.  However, it did not create extra copies of these resources for each page.  Once a Resources object was cloned the first time, it was reused.  Consequently there is only one copy of the Resources from each input file, with a reference to the appropriate Resources object on each page.  My documents did not have existing page level Resources, so I am not sure how Maruan&apos;s suggestion would work in those cases.  Creating a PageGroup to hold all pages from a given input document may be a better option to avoid this issue.&lt;/p&gt;

&lt;p&gt;I had noticed that the corruption in subsequent documents resulted in those pages having their formatting preserved, but the text content had many letters substituted (all &apos;d&apos; replaced by &apos;f&apos;, all &apos;y&apos; replaced by &apos;d&apos;, etc.)  I also found that the degree of corruption depended on how similar the beginning text content of each input document was.  When there was a common header in the documents being merged, there were only a few substitutions.  When it was merging a document with itself, there were no errors.  When the document header was very different, the resulting text was undecipherable garbage.  This made me suspect that it may be a problem with a compression dictionary, using the dictionary from the first file on subsequent files.  At first I thought this dictionary was in the flate compression being applied to the stream, but found that it was in the CMap of a font resource.  Both documents used the same name for the font, so the PDFMerger only retained the copy from the first PDF in the merged PDF.  When subsequent pages from subsequent input documents referenced the font, they used the CMap dictionary from the first input document, resulting in various degrees of garbled text.  Lesson learned, Font resources may have content that is dependent on the strings they were used to display.&lt;/p&gt;</comment>
                            <comment id="14063803" author="kirk.haines" created="Wed, 16 Jul 2014 17:58:30 +0000"  >&lt;p&gt;This version of PDFMergerUtility.java (based on 1.7.1 iirc) removes the shared resources section and instead applies resources on the page level.  The cloner will create references for resources used on multiple pages, so there is not excessive resource duplication.  The previous method assumed resources with the same name were identical, which is not valid (see prior comment about Font resource CMaps).&lt;/p&gt;</comment>
                            <comment id="14064170" author="jahewson" created="Wed, 16 Jul 2014 21:51:23 +0000"  >&lt;p&gt;Hi Kirk, can you attach a patch using &quot;svn diff&quot; please.&lt;/p&gt;</comment>
                            <comment id="14064243" author="kirk.haines" created="Wed, 16 Jul 2014 22:24:16 +0000"  >&lt;p&gt;Diff version of changes.&lt;/p&gt;</comment>
                            <comment id="14072175" author="tilman" created="Wed, 23 Jul 2014 19:14:58 +0000"  >&lt;p&gt;Although you made a diff to the wrong version, I think I see what would have to be changed. The previous strategy is indeed risky, and I wonder why there haven&apos;t been any complaints except here? Many PDF files name their images &quot;Im1&quot;, &quot;Im2&quot;, etc. Is there anybody here who does a lot of merging, and could test a modification?&lt;/p&gt;</comment>
                            <comment id="14072875" author="msahyoun" created="Thu, 24 Jul 2014 06:19:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; I could test a modification against a set of files we are using for a customer where we are merging banking documents. I&apos;m not using PDFMergerUtility though. &lt;/p&gt;

</comment>
                            <comment id="14072902" author="tilman" created="Thu, 24 Jul 2014 06:57:16 +0000"  >&lt;p&gt;Ok, committed for the trunk only as rev 1613017. NOT done for the 1.8 branch yet.&lt;/p&gt;</comment>
                            <comment id="14072923" author="tilman" created="Thu, 24 Jul 2014 07:15:19 +0000"  >&lt;p&gt;Michael: even if you&apos;re not using the trunk version, you can try the command line app by downloading the latest snapshot here:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.0-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14073076" author="msahyoun" created="Thu, 24 Jul 2014 10:48:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; did some testing using the latests pdfbox-app snapshot as well as an older one prior to the patch and pdfbox-app-1.8.6. Works fine and improves the file size. OTOH with the test files I have all results were OK i.e. Adobe Reader displays them correctly and there are no issues reported by Acrobats Preflight Tool.&lt;/p&gt;</comment>
                            <comment id="14073371" author="tilman" created="Thu, 24 Jul 2014 16:47:19 +0000"  >&lt;p&gt;Thanks... what we&apos;d also need, would be a test that fails with the old version and succeeds with the new one:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;two files, either created by somebody who has filed a CLA, or with no copyright (e.g. government files)&lt;/li&gt;
	&lt;li&gt;a java test, i.e. not just &quot;human looking at it&quot; but some java call that can find whether two identically named resources are different.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14073376" author="msahyoun" created="Thu, 24 Jul 2014 16:52:58 +0000"  >&lt;p&gt;I can create such files but that would need to wait as I&#8217;m offline the next two weeks. If someone beats me to it fine, otherwise I&#8217;ll take care of it upon my return.&lt;/p&gt;</comment>
                            <comment id="14073512" author="tilman" created="Thu, 24 Jul 2014 18:46:58 +0000"  >&lt;p&gt;Thanks... I have set the fix version to 1.8.7 so if we forget (there are currently about 20 new issues per week!), Andreas will catch it before releasing the next version.&lt;/p&gt;</comment>
                            <comment id="14095353" author="lehmi" created="Wed, 13 Aug 2014 11:00:34 +0000"  >&lt;p&gt;Identically named resources are problematic if 2 or more of the pdfs to be merged are using global resources and if the merger merges the page related resources and the global resources separately as it did befroe the patch. &lt;br/&gt;
The proposed patch &lt;del&gt;merges&lt;/del&gt; doesn&apos;t use global resources by using &quot;findResources()&quot; instead of &quot;getResources()&quot; &lt;del&gt;the global and the page specific resources &lt;em&gt;before&lt;/em&gt; adding them to the page itself,&lt;/del&gt; if page specific resources are present, so that there aren&apos;t any duplicted names anymore. &lt;del&gt;I don&apos;t know if that was intended in the first place but it solves the problem&lt;/del&gt;&lt;br/&gt;
OTOH pdfs using global resources &lt;del&gt;will grow after merging as all resources are multiplied.&lt;/del&gt; still have that issue. &lt;del&gt;But AFAIKT global resources aren&apos;t used that often.&lt;/del&gt;&lt;/p&gt;
</comment>
                            <comment id="14095996" author="tilman" created="Wed, 13 Aug 2014 19:37:06 +0000"  >&lt;p&gt;To verify this we need&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a file with global resources&lt;/li&gt;
	&lt;li&gt;to create an uncompressed copy where we shuffle the names of the resources&lt;/li&gt;
	&lt;li&gt;merge it and see what happens.&lt;br/&gt;
I did try it and no mayhem followed, there were no longer global resources in the merged file. However I can&apos;t share the file (&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2048&quot; title=&quot;TextExtraction only working after uncompressing with pdftk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2048&quot;&gt;&lt;del&gt;PDFBOX-2048&lt;/del&gt;&lt;/a&gt;) but I need one that I can attach it here so that Michael and Kirk can also have a look. Now that GSoC2014 is done and weather is less warm I&apos;ll run my tests on the digitalcorpora site until I hit a file with global resources.&lt;/li&gt;
&lt;/ul&gt;




&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDResources globalRes = document.getDocumentCatalog().getPages().getResources();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (globalRes != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
{
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println (&lt;span class=&quot;code-quote&quot;&gt;&quot;global resources size: &quot;&lt;/span&gt; + globalRes.getXObjects().size());
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key : globalRes.getXObjects().keySet())
    {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println (&lt;span class=&quot;code-quote&quot;&gt;&quot;global resource: &quot;&lt;/span&gt; + key);
    }
}
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println (&lt;span class=&quot;code-quote&quot;&gt;&quot;no global resources&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14096029" author="tilman" created="Wed, 13 Aug 2014 20:07:31 +0000"  >&lt;p&gt;The two 078117*.pdf files have global resources. The difference between the two files is that I have swapped /F1 with F9, and /Im11 with /Im14 everywhere in the second file. I can&apos;t attach the result file after merge because it is too large, but it displays fine, try it yourself. The merged file has no global resources.&lt;/p&gt;</comment>
                            <comment id="14096071" author="tilman" created="Wed, 13 Aug 2014 20:33:19 +0000"  >&lt;p&gt;Another file (078118.pdf), with global xobject resources:&lt;br/&gt;
global resource: Im78&lt;br/&gt;
global resource: Im79&lt;br/&gt;
global resource: Im60&lt;br/&gt;
global resource: Im61&lt;br/&gt;
global resource: Im75&lt;br/&gt;
global resource: Im39&lt;br/&gt;
global resource: Im11&lt;br/&gt;
global resource: Im12&lt;br/&gt;
global resource: Im36&lt;br/&gt;
global resource: Im80&lt;br/&gt;
global resource: Im53&lt;br/&gt;
global resource: Im83&lt;br/&gt;
global resource: Im16&lt;br/&gt;
global resource: Im33&lt;br/&gt;
global resource: Im32&lt;br/&gt;
global resource: Im31&lt;br/&gt;
global resource: Im57&lt;br/&gt;
global resource: Im19&lt;br/&gt;
global resource: Im56&lt;br/&gt;
global resource: Im68&lt;br/&gt;
global resource: Im84&lt;br/&gt;
global resource: Im65&lt;br/&gt;
global resource: Im62&lt;br/&gt;
global resource: Im50&lt;br/&gt;
global resource: Im4&lt;br/&gt;
global resource: Im49&lt;br/&gt;
global resource: Im27&lt;br/&gt;
global resource: Im26&lt;br/&gt;
global resource: Im3&lt;br/&gt;
global resource: Im28&lt;br/&gt;
global resource: Im72&lt;br/&gt;
global resource: Im71&lt;br/&gt;
global resource: Im43&lt;br/&gt;
global resource: Im42&lt;/p&gt;

&lt;p&gt;The 078117u1.pdf file has these global xobject resources:&lt;/p&gt;

&lt;p&gt;global resource: Im96&lt;br/&gt;
global resource: Im73&lt;br/&gt;
global resource: Im59&lt;br/&gt;
global resource: Im14&lt;br/&gt;
global resource: Tr22&lt;br/&gt;
global resource: Im11&lt;br/&gt;
global resource: Im17&lt;br/&gt;
global resource: Im18&lt;br/&gt;
global resource: Im35&lt;br/&gt;
global resource: Im53&lt;br/&gt;
global resource: Im15&lt;br/&gt;
global resource: Im34&lt;br/&gt;
global resource: Im83&lt;br/&gt;
global resource: Im16&lt;br/&gt;
global resource: Im82&lt;br/&gt;
global resource: Im58&lt;br/&gt;
global resource: Im57&lt;br/&gt;
global resource: Im30&lt;br/&gt;
global resource: Im87&lt;br/&gt;
global resource: Im84&lt;br/&gt;
global resource: Im66&lt;br/&gt;
global resource: Im67&lt;br/&gt;
global resource: Im88&lt;br/&gt;
global resource: Im89&lt;br/&gt;
global resource: Im5&lt;br/&gt;
global resource: Im6&lt;br/&gt;
global resource: Im29&lt;br/&gt;
global resource: Im28&lt;br/&gt;
global resource: Im23&lt;br/&gt;
global resource: Im41&lt;br/&gt;
global resource: Im90&lt;br/&gt;
global resource: Im72&lt;br/&gt;
global resource: Im40&lt;br/&gt;
global resource: Im71&lt;br/&gt;
global resource: Im24&lt;br/&gt;
global resource: Im45&lt;br/&gt;
global resource: Im21&lt;br/&gt;
global resource: Im46&lt;/p&gt;

&lt;p&gt;Merging them works too.&lt;/p&gt;</comment>
                            <comment id="14096098" author="lehmi" created="Wed, 13 Aug 2014 20:49:01 +0000"  >&lt;p&gt;The solution will work if a pdf has either global resources or page specific resources. But what about pdfs with both global and page related resources? Is that possible? IMO those pdfs won&apos;t work.&lt;/p&gt;</comment>
                            <comment id="14096208" author="msahyoun" created="Wed, 13 Aug 2014 22:09:10 +0000"  >&lt;p&gt;If I understand the spec correctly&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Resources (Required; inheritable) A dictionary containing any resources required by the page (see 7.8.3, &quot;Resource Dictionaries&quot;). If the page requires no resources, the value of this entry shall be an empty dictionary. Omitting the entry entirely indicates that the resources shall be inherited from an ancestor node in the page tree.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;for a specific page it has either it&#8217;s own resources, uses ancestor resources or none but there is no mix.&lt;/p&gt;</comment>
                            <comment id="14096653" author="tilman" created="Thu, 14 Aug 2014 06:39:39 +0000"  >&lt;p&gt;Thats also how PDFBox is implemented, processStream is called with findResources() as parameter, and the code for findResources is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        PDResources retval = getResources();
        PDPageNode parentNode = getParent();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (retval == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; parentNode != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
        {
            retval = parentNode.findResources();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; retval;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14096665" author="lehmi" created="Thu, 14 Aug 2014 06:48:36 +0000"  >&lt;p&gt;I know how PDFBox handles resources but that doesn&apos;t have to be correct, but after Maruans clarification my concerns are obsolet. &lt;/p&gt;

&lt;p&gt;So, to sum it up, everything is fine and we should merge these changes into the 1.8 branch as well. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Are you going to do that or should I?&lt;/p&gt;</comment>
                            <comment id="14096670" author="tilman" created="Thu, 14 Aug 2014 06:51:20 +0000"  >&lt;p&gt;I&apos;ll do it tonight.&lt;/p&gt;</comment>
                            <comment id="14097173" author="jira-bot" created="Thu, 14 Aug 2014 16:29:14 +0000"  >&lt;p&gt;Commit 1617990 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1617990&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1617990&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1511&quot; title=&quot;pdfMerger App produces Garbage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1511&quot;&gt;&lt;del&gt;PDFBOX-1511&lt;/del&gt;&lt;/a&gt;: don&apos;t share resources between different source files, as suggested by Kirk Haines&lt;/p&gt;</comment>
                            <comment id="14097184" author="tilman" created="Thu, 14 Aug 2014 16:38:09 +0000"  >&lt;p&gt;What we need now is a test. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; can you create the two files I mentioned? Even one is enough, I could edit it to create the second i.e. by shuffling the names. The file must have global resources. Either with two different looking fonts or with different sized images. I can create the test, the simplest would be to render the merged file, and to check that its two pages are identical. (And check that they are not identical with the &quot;bad&quot; code). This would be an insurance against incorrect changes in the future.&lt;/p&gt;</comment>
                            <comment id="14097192" author="msahyoun" created="Thu, 14 Aug 2014 16:46:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Just to ensure that I understand you correctly. You mean the files according to&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a file with global resources&lt;/li&gt;
	&lt;li&gt;to create an uncompressed copy where we shuffle the names of the resources&lt;/li&gt;
	&lt;li&gt;merge it and see what happens.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;correct?&lt;/p&gt;</comment>
                            <comment id="14097200" author="tilman" created="Thu, 14 Aug 2014 16:54:21 +0000"  >&lt;p&gt;Yes. The resources that we shuffle should be of the same kind, i.e. only fonts, or only images.&lt;/p&gt;</comment>
                            <comment id="14099081" author="msahyoun" created="Fri, 15 Aug 2014 20:33:32 +0000"  >&lt;p&gt;Testfiles&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Doc01 original file&lt;/li&gt;
	&lt;li&gt;Doc02 file with global resource names swapped&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Resultfiles&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Merged-1.8.6.pdf merged using 1.8.6 showing an issue on page 3 onwards&lt;/li&gt;
	&lt;li&gt;Merged-1.8.7.pdf merged using 1.8.7-SNAPSHOT wo any issues&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14099085" author="msahyoun" created="Fri, 15 Aug 2014 20:35:55 +0000"  >&lt;p&gt;There is a small issue with the .Doc02.pdf file which has a wrong length for a stream maybe because of my editor. Works anyway. I&#8217;ll try to fix it so the testfiles are clean. Thought I share it anyway to validate that the issue is fixed.&lt;/p&gt;</comment>
                            <comment id="14099182" author="tilman" created="Fri, 15 Aug 2014 21:35:56 +0000"  >&lt;p&gt;Thanks, I will fix or recreate the 2nd file, then write the test and test the test this weekend. And yes, the merge succeeds with the new version and looks bad with the old version, so it is what we need &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14099513" author="msahyoun" created="Sat, 16 Aug 2014 05:46:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; I&#8217;ve already fixed the length issue for the stream. I&#8217;m looking to slightly enhance the test files to &#8218;pdfbox&#8216; brand them and add a license note so it&#8217;s clear they can be distributed.&lt;/p&gt;

&lt;p&gt;For completeness would we also need test files where &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;one page uses the global resource and the other a local one&lt;/li&gt;
	&lt;li&gt;both pages use a local resource&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This might pick up issues where getResources()/findResources() doesn&#8217;t work as expected. WDYT?&lt;/p&gt;</comment>
                            <comment id="14099570" author="jira-bot" created="Sat, 16 Aug 2014 08:47:59 +0000"  >&lt;p&gt;Commit 1618314 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1618314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1618314&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1511&quot; title=&quot;pdfMerger App produces Garbage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1511&quot;&gt;&lt;del&gt;PDFBOX-1511&lt;/del&gt;&lt;/a&gt;: Test for PDFMergerUtility, thanks Maruan Sahyoun for the PDF test files&lt;/p&gt;</comment>
                            <comment id="14099573" author="tilman" created="Sat, 16 Aug 2014 08:52:10 +0000"  >&lt;p&gt;One can never have too many tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; The ones I created for the XImage objects have already prevented me from creating regressions several times.&lt;/p&gt;</comment>
                            <comment id="14099596" author="jira-bot" created="Sat, 16 Aug 2014 11:15:32 +0000"  >&lt;p&gt;Commit 1618330 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1618330&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1618330&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1511&quot; title=&quot;pdfMerger App produces Garbage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1511&quot;&gt;&lt;del&gt;PDFBOX-1511&lt;/del&gt;&lt;/a&gt;: Test for PDFMergerUtility, thanks Maruan Sahyoun for the PDF test files&lt;/p&gt;</comment>
                            <comment id="14099598" author="jira-bot" created="Sat, 16 Aug 2014 11:15:57 +0000"  >&lt;p&gt;Commit 1618331 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1618331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1618331&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1511&quot; title=&quot;pdfMerger App produces Garbage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1511&quot;&gt;&lt;del&gt;PDFBOX-1511&lt;/del&gt;&lt;/a&gt;: Test for PDFMergerUtility, thanks Maruan Sahyoun for the PDF test files&lt;/p&gt;</comment>
                            <comment id="14099604" author="jira-bot" created="Sat, 16 Aug 2014 11:27:42 +0000"  >&lt;p&gt;Commit 1618335 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1618335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1618335&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1511&quot; title=&quot;pdfMerger App produces Garbage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1511&quot;&gt;&lt;del&gt;PDFBOX-1511&lt;/del&gt;&lt;/a&gt;: corrected revision in comment&lt;/p&gt;</comment>
                            <comment id="14126819" author="lehmi" created="Tue, 9 Sep 2014 10:16:45 +0000"  >&lt;p&gt;Are we done here?&lt;/p&gt;</comment>
                            <comment id="14126855" author="tilman" created="Tue, 9 Sep 2014 10:48:34 +0000"  >&lt;p&gt;Yes, although we could still add more tests per Maruans comment on August 16 but this can be added later.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12661523" name="078117u1.pdf" size="6760378" author="tilman" created="Wed, 13 Aug 2014 20:07:31 +0000"/>
                            <attachment id="12661524" name="078117u2.pdf" size="6760378" author="tilman" created="Wed, 13 Aug 2014 20:07:31 +0000"/>
                            <attachment id="12661534" name="078118.pdf" size="1055983" author="tilman" created="Wed, 13 Aug 2014 20:33:19 +0000"/>
                            <attachment id="12568379" name="1.pdf" size="86574" author="pdfbox_mike" created="Thu, 7 Feb 2013 08:05:02 +0000"/>
                            <attachment id="12568380" name="2.pdf" size="92849" author="pdfbox_mike" created="Thu, 7 Feb 2013 08:05:02 +0000"/>
                            <attachment id="12662149" name="PDFBox.GlobalResourceMergeTest.Doc01.decoded.pdf" size="14336" author="msahyoun" created="Fri, 15 Aug 2014 20:33:32 +0000"/>
                            <attachment id="12662148" name="PDFBox.GlobalResourceMergeTest.Doc02.decoded.pdf" size="14336" author="msahyoun" created="Fri, 15 Aug 2014 20:33:32 +0000"/>
                            <attachment id="12662147" name="PDFBox.GlobalResourceMergeTest.Merged-1.8.6.pdf" size="21243" author="msahyoun" created="Fri, 15 Aug 2014 20:33:32 +0000"/>
                            <attachment id="12662146" name="PDFBox.GlobalResourceMergeTest.Merged-1.8.7.pdf" size="21450" author="msahyoun" created="Fri, 15 Aug 2014 20:33:32 +0000"/>
                            <attachment id="12656088" name="PDFMergerUtility.java" size="16039" author="kirk.haines" created="Wed, 16 Jul 2014 17:58:30 +0000"/>
                            <attachment id="12656162" name="PDFMergerUtility.java.diff" size="2783" author="kirk.haines" created="Wed, 16 Jul 2014 22:24:16 +0000"/>
                            <attachment id="12568384" name="PdfRenderer.java" size="1716" author="pdfbox_mike" created="Thu, 7 Feb 2013 08:08:59 +0000"/>
                            <attachment id="12568382" name="targetPdfMergeJava.pdf" size="107637" author="pdfbox_mike" created="Thu, 7 Feb 2013 08:06:25 +0000"/>
                            <attachment id="12568383" name="targetPdfMergeUtilityApp.pdf" size="107637" author="pdfbox_mike" created="Thu, 7 Feb 2013 08:06:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311710</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hskn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312056</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>