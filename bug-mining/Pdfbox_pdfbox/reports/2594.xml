<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:12:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4831] Rounding errors when rendering non-interleaved binary CCITT image at 1:1 scale cause gray pixels in output</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4831</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I have a 300dpi scanned PDF file with a single CCITT-encoded black-and-white image in each page, spanning the whole page. The images all have a resolution of 2480x3504.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;When I try to render a page from this PDF into a PNG at 300DPI, the resulting PNG has some pixels with colors #010101 and #fefefe. The PNG has the same 2480x3504 dimensions as the embedded CCITT images, but stepping through the PDFBox code reveals it&apos;s trying to downscale the image by a tiny fraction of a pixel (e.g. to 2479.999964573x3503.9999537378) using bicubic interpolation, introducing these &quot;near-black&quot; and &quot;near-white&quot; pixels due to rounding errors. Additionally, the actual image conversion code goes to a slow path intended for &quot;proper&quot; interpolated scaling, rather than hitting the fast path for copying 1:1-scale images.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For now, we worked around this by treating images containing only #000000, #010101, #fefefe and #ffffff as binary, but the performance hit from the slow path is still there.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13304332">PDFBOX-4831</key>
            <summary>Rounding errors when rendering non-interleaved binary CCITT image at 1:1 scale cause gray pixels in output</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="Googulator">G&#225;bor Stefanik</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 May 2020 09:54:15 +0000</created>
                <updated>Fri, 18 Aug 2023 05:46:08 +0000</updated>
                            <resolved>Fri, 12 Nov 2021 04:41:25 +0000</resolved>
                                    <version>2.0.19</version>
                    <version>2.0.22</version>
                                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17105628" author="tilman" created="Tue, 12 May 2020 17:35:34 +0000"  >&lt;p&gt;Could you please tell which &quot;slow path&quot; you mean? Please try also the latest changes (which may make some of the renderings even slower)&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.20-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.20-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17294979" author="googulator" created="Thu, 4 Mar 2021 03:49:51 +0000"  >&lt;p&gt;This is still an issue on 2.0.22.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The core issue is this code in PageDrawer.drawImage():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!pdImage.getInterpolate())
        {
            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the image is scaled down, we use smooth interpolation, eg PDFBOX-2364
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// only when scaled up &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; we use nearest neighbour, eg PDFBOX-2302 / mori-cvpr01.pdf
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// PDFBOX-4930: we use the sizes of the ARGB image. These can be different
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// than the original sizes of the base image, when the mask is bigger.
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isScaledUp = pdImage.getImage().getWidth() &amp;lt; &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.round(at.getScaleX()) ||
                                 pdImage.getImage().getHeight() &amp;lt; &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.round(at.getScaleY());

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isScaledUp)
            {
                graphics.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                        RenderingHints.VALUE_INTERPOLATION_NEAREST_NEIGHBOR);
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Semantically, an image is &quot;scaled up&quot; if the canvas area it&apos;s being drawn on is bigger (higher resolution) than the image itself. However, this compares the image&apos;s resolution not to the size of the actual canvas we&apos;re drawing onto (which would be given by a combination of the &quot;at&quot; affine transform and the transform inside this.graphics), but the PDF&apos;s canonical 72DPI canvas. In the context of renderImageWithDPI, rather than checking if the image, at its present scale, has a higher DPI than the value passed to renderImageWithDPI, we&apos;re checking if it has a DPI higher than 72. So any time we&apos;re actually trying to render this image in &amp;gt;72DPI, this logic may report that an image is scaled down when in reality it&apos;s being scaled up.&lt;/p&gt;

&lt;p&gt;Additionally, in this scenario, checking for &quot;not scaled down&quot; would make more sense than strictly &quot;scaled up&quot;, i.e. we shouldn&apos;t force interpolation if the image isn&apos;t being scaled at all. Care also must be taken to disregard any negligible &quot;downscaling&quot; resulting from floating point rounding errors, e.g. trying to render a 500px wide image onto an apparently 499.998472px canvas area shouldn&apos;t be considered downscaling, and later, the image should simply be drawn 1:1.&lt;/p&gt;

&lt;p&gt;Because of this, we end up drawing the image with bicubic interpolation, overriding the lack of an interpolate flag on the image.&lt;/p&gt;

&lt;p&gt;The &quot;slow path&quot; subsequently happens inside graphics.drawImage() (sun.java2d.SunGraphics2d.drawImage()). As we enter drawBufferedImage, imageTransform already suffers from visible rounding errors due to the use of single-precision floats in the code leading up to here (AffineTransform is double-precision internally, and SunGraphics2d.drawImage() assumes that any AffineTransform was computed from double-precision inputs, and then uses limits appropriate for double precision to detect &quot;almost-integer&quot; values with a rounding error). drawImage() then hands off to sun.java2d.pipe.DrawImage.transformImage(), where the &quot;checkfinalxform&quot; path is taken, and imageTransform is concatenated with the graphics canvas&apos;s previously set transform, which itself has rounding errors. The errors in the 2 transforms are thus compounded. (In my case, trying to effectively draw an image 1:1, I end up with AffineTransform[&lt;span class=&quot;error&quot;&gt;&amp;#91;0.999999982362152, 0.0, 0.0&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;-0.0, 0.999999915403138, 2.5431314134E-4&amp;#93;&lt;/span&gt;], which is almost AffineTransform[&lt;span class=&quot;error&quot;&gt;&amp;#91;1.0, 0.0, 0.0&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;0.0, 1.0, 0.0&amp;#93;&lt;/span&gt;], but off by just enough to cause problems.)&lt;/p&gt;

&lt;p&gt;In the inner transformImage() call, the &quot;coords&quot; array is assembled, and then it&apos;s transformed using the badly rounded &quot;almost-identity&quot; AffineTransform above. Prior to this transformation, coords&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; == coords&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; and coords&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; == coords&lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt;, so optimizations inside tryCopyOrScale() would be taken (this would be the &quot;fast path&quot;), avoiding the need to call renderImageXform(), which actually performs the interpolated scaling. After coords is transformed, it&apos;s still &quot;close enough&quot; that we enter tryCopyOrScale(), but then inside, the error on the width coordinate exceeds MAX_TX_ERROR (0.0001), so the renderImageCopy() path for 1:1 output isn&apos;t taken. Instead, we drop into renderImageScale(), which would still be an optimization, and yield a pure black-and-white image, though somewhat slower than renderImageCopy(). However, renderImageScale() only applies if the scaling mode is nearest neighbor, and because of the earlier wrong determination that the image is being &quot;scaled down&quot;, the scaling mode is instead bicubic, forcing DrawImage to bail out of the optimized path, and fall back to the slowest path of renderImageXform() with bicubic interpolation. As a result, we not only waste resources performing a needless interpolation, but also introduce blurryness to the image, and in the case of pure black-and-white images, introduce unwanted grayscale pixels into the output.&lt;/p&gt;

&lt;p&gt;So, in summary, two things go wrong to produce this outcome:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;First, isScaledUp is determined wrongly (comparison to wrong canvas, and wrong handling of equality case), causing the &quot;no interpolation&quot; setting on the image to be ignored in an effort to avoid &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2364&quot; title=&quot;CCITT image renders incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2364&quot;&gt;&lt;del&gt;PDFBOX-2364&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;Then, due to careless use of single-precision math, we accumulate enough error in the affine transform matrices to make the Java graphics stack think it&apos;s seeing a request to rescale the image, rather than just rounding errors.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I would suggest the following fixes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Introduce a new version of PDFRenderer.renderImage() that takes a double for the &quot;scale&quot; parameter. Call this from renderImageWithDPI(), rather than the single precision float version.&lt;/li&gt;
	&lt;li&gt;Take the graphics-side affine transform into account when checking if an image is being scaled up or down.&lt;/li&gt;
	&lt;li&gt;Treat an image that&apos;s not being scaled at all (1:1 scale) as if it were upscaled, and allow nearest-neighbor rendering. It may also make sense to add some tolerance for rounding errors here, e.g. allow nearest-neighbor if the canvas width/height, rounded up to the nearest integer, is no less than the corresponding image dimension (which is guaranteed to be an integer).&lt;/li&gt;
	&lt;li&gt;Consider storing COSFloat values internally as double precision.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17295408" author="tilman" created="Thu, 4 Mar 2021 16:53:32 +0000"  >&lt;p&gt;Please change the segment in PageDrawer.java to this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            Matrix xformMatrix = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Matrix(xform);
            &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isScaledUp = bim.getWidth() &amp;lt;= &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.round(ctm.getScalingFactorX() * xformMatrix.getScalingFactorX()) ||
                                 bim.getHeight() &amp;lt;= &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.round(ctm.getScalingFactorY() * xformMatrix.getScalingFactorY());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This takes two of your suggestions and also considers rotations.&lt;/p&gt;

&lt;p&gt;When rendering your file at 300 dpi &lt;tt&gt;isScaledUp&lt;/tt&gt; is now true, and the number of unique colors changes from 4 to 2, and the rendering gets faster, so I guess that&apos;s what you wanted.&lt;/p&gt;

&lt;p&gt;However the rendering of a lot of files changes, sometimes worse. But it looks closer to Adobe Reader. A good example is gs-bugzilla688728.pdf, where the new rendering is now the same as in Adobe. An example for &quot;worse&quot; is K_UPMEYER_SPRING10.pdf, the image at the lower right of page 1, or outside-in.pdf the &quot;MARKET NOTE&quot; top right. (But Adobe is also bad there).&lt;/p&gt;

&lt;p&gt;(Files mentioned are available by googling, if not, mention them and I&apos;ll upload them)&lt;/p&gt;

&lt;p&gt;Update 9.10.2021:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Also the file from &lt;a href=&quot;https://github.com/mozilla/pdf.js/issues/9540&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mozilla/pdf.js/issues/9540&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;gs-bugzilla688354.pdf page 3&lt;/li&gt;
	&lt;li&gt;gs-bugzilla695910.pdf&lt;/li&gt;
	&lt;li&gt;jpeg_demo.pdf&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2376&quot; title=&quot;Small regression in text extraction with PDFBox 1.8.7 vs. 1.8.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2376&quot;&gt;&lt;del&gt;PDFBOX-2376&lt;/del&gt;&lt;/a&gt;-466070.pdf page 24 (this one is better)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17295430" author="googulator" created="Thu, 4 Mar 2021 17:17:36 +0000"  >&lt;p&gt;We are importing PDFBox via Maven, so I don&apos;t see how I could change those lines myself. Subclassing PageDrawer is of no help, because PageDrawer.drawImage() has package-private dependencies.&lt;/p&gt;</comment>
                            <comment id="17295502" author="googulator" created="Thu, 4 Mar 2021 18:28:46 +0000"  >&lt;p&gt;Neither K_UPMEYER_SPRING10.pdf, nor outside-in.pdf are available on the Web anymore, all I can find are dead links.&lt;/p&gt;</comment>
                            <comment id="17295546" author="tilman" created="Thu, 4 Mar 2021 19:38:19 +0000"  >&lt;p&gt;For some reason JIRA won&apos;t let me upload the Upmeyer file, and she no longer has her website and it&apos;s not on the web archive.&lt;/p&gt;

&lt;p&gt;Get the source code of PDFBox and build from there, this is easier.&lt;/p&gt;</comment>
                            <comment id="17295557" author="googulator" created="Thu, 4 Mar 2021 19:54:56 +0000"  >&lt;p&gt;Looking into outside-in.pdf in PDFXplorer, Adobe Reader and the proposed patch are doing the right thing, as far as accurately rendering the PDF goes. The embedded images are both marked as not to be interpolated when scaling. The result may be less visually pleasing to a typical viewer, but it is indeed what the author intended, or at least what the document actually necodes.&lt;/p&gt;

&lt;p&gt;While a good argument can be made for ignoring the author&apos;s intent for better visual results in this case, such a decision needs to be restricted to grayscale and true-color images, with indexed-color and binary images excluded, so as to avoid introducing unintended colors and transitions into an image (see mori-cvpr01.pdf for a rather extreme example). Either way, it doesn&apos;t make sense to base that decision on whether the image&apos;s resolution is higher than 72DPI, and such a decision should be made separately and explicitly in the code, and not as a side effect of another check intended to stop nearest-neighbor downscaling (and thus information loss) in CCITT images.&lt;/p&gt;</comment>
                            <comment id="17295561" author="googulator" created="Thu, 4 Mar 2021 19:59:02 +0000"  >&lt;p&gt;About building PDFBox from source - the application we&apos;re integrating PDFBox into can &lt;em&gt;only&lt;/em&gt; be built using Maven. It has no Ant or Gradle build files, or manual build script. The best I can do is to build PDFBox separately, and then replace the PDFBox JAR inside the main application&apos;s WAR image by hand - but that&apos;s only acceptable for private testing; there is no way such a step would be accepted for our release build process.&lt;/p&gt;</comment>
                            <comment id="17295788" author="tilman" created="Fri, 5 Mar 2021 06:15:47 +0000"  >&lt;p&gt;Oh, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3523&quot; title=&quot;PDFBox renders images 5 times slower and bigger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3523&quot;&gt;&lt;del&gt;PDFBOX-3523&lt;/del&gt;&lt;/a&gt; is a similar issue. That one was given up for lack of feedback. I need to have a look at those files too.&lt;/p&gt;

&lt;p&gt;I haven&apos;t really understood the second paragraph of your first comment yesterday. Do you want it to be improved and if yes, how? I prefer a solution that isn&apos;t user-configurable. Hard-to-understand settings like &lt;tt&gt;PDFRenderer.setImageDownscalingOptimizationThreshold()&lt;/tt&gt; is what I&apos;d like to avoid. (Despite that I introduced that one)&lt;/p&gt;

&lt;p&gt;Usually I&apos;d just commit, but we&apos;re close to a release so I prefer to wait until after the release so there is enough time to evaluate this.&lt;/p&gt;

&lt;p&gt;A commit before a release would mean you&apos;d have to get a snapshot, this is possible through maven.&lt;/p&gt;</comment>
                            <comment id="17295799" author="tilman" created="Fri, 5 Mar 2021 06:28:22 +0000"  >&lt;p&gt;I could also commit to the trunk. You could test with the command line utilities (the syntax is different) or directly (however you have to use Loader.loadPDF()) to open a file.&lt;/p&gt;</comment>
                            <comment id="17295803" author="tilman" created="Fri, 5 Mar 2021 06:43:44 +0000"  >&lt;p&gt;What is the document about, is it copyrighted? Is it a court case? Or a private contract? I&apos;m asking because I&apos;m thinking of making a test case.&lt;/p&gt;</comment>
                            <comment id="17371517" author="googulator" created="Tue, 29 Jun 2021 16:28:30 +0000"  >&lt;p&gt;The original is publicly available: &lt;a href=&quot;https://www.dombovar.hu/media/files/13._Korona_szallo_vegzes_13.09.26..pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.dombovar.hu/media/files/13._Korona_szallo_vegzes_13.09.26..pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17426673" author="tilman" created="Sat, 9 Oct 2021 18:40:23 +0000"  >&lt;p&gt;I still want to commit the three lines, but for 3.0 only so that beta users can decide. I need to review 300 files with rendering differences to make sure that there are no surprises.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17426679" author="tilman" created="Sat, 9 Oct 2021 18:43:37 +0000"  >&lt;p&gt;I don&apos;t understand Hungarian so I can&apos;t decide on the copyright. But I can also do the test with remote loading.&lt;/p&gt;</comment>
                            <comment id="17426741" author="jira-bot" created="Sun, 10 Oct 2021 03:09:22 +0000"  >&lt;p&gt;Commit 1894084 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1894084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1894084&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4831&quot; title=&quot;Rounding errors when rendering non-interleaved binary CCITT image at 1:1 scale cause gray pixels in output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4831&quot;&gt;&lt;del&gt;PDFBOX-4831&lt;/del&gt;&lt;/a&gt;: remote loading of test file (unclear if copyrighted)&lt;/p&gt;</comment>
                            <comment id="17426742" author="jira-bot" created="Sun, 10 Oct 2021 03:40:32 +0000"  >&lt;p&gt;Commit 1894085 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1894085&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1894085&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4831&quot; title=&quot;Rounding errors when rendering non-interleaved binary CCITT image at 1:1 scale cause gray pixels in output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4831&quot;&gt;&lt;del&gt;PDFBOX-4831&lt;/del&gt;&lt;/a&gt;: add test (not fully active); make utility method public&lt;/p&gt;</comment>
                            <comment id="17426763" author="jira-bot" created="Sun, 10 Oct 2021 06:59:13 +0000"  >&lt;p&gt;Commit 1894090 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1894090&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1894090&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4831&quot; title=&quot;Rounding errors when rendering non-interleaved binary CCITT image at 1:1 scale cause gray pixels in output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4831&quot;&gt;&lt;del&gt;PDFBOX-4831&lt;/del&gt;&lt;/a&gt;: improve test and disable it&lt;/p&gt;</comment>
                            <comment id="17426784" author="jira-bot" created="Sun, 10 Oct 2021 10:09:39 +0000"  >&lt;p&gt;Commit 1894101 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1894101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1894101&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4831&quot; title=&quot;Rounding errors when rendering non-interleaved binary CCITT image at 1:1 scale cause gray pixels in output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4831&quot;&gt;&lt;del&gt;PDFBOX-4831&lt;/del&gt;&lt;/a&gt;: also consider rendering resolution when investigating whether the image is scaled up, as suggested by G&#225;bor Stefanik&lt;/p&gt;</comment>
                            <comment id="17426789" author="jira-bot" created="Sun, 10 Oct 2021 10:18:48 +0000"  >&lt;p&gt;Commit 1894102 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1894102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1894102&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4831&quot; title=&quot;Rounding errors when rendering non-interleaved binary CCITT image at 1:1 scale cause gray pixels in output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4831&quot;&gt;&lt;del&gt;PDFBOX-4831&lt;/del&gt;&lt;/a&gt;: enable unit test&lt;/p&gt;</comment>
                            <comment id="17426795" author="tilman" created="Sun, 10 Oct 2021 10:33:06 +0000"  >&lt;p&gt;That&apos;s all the time I have for today; some more thoughts:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;store the xform scales in variables so it doesn&apos;t have to be calculated again (update: done in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5293&quot; title=&quot;Store x and y scaling factor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5293&quot;&gt;&lt;del&gt;PDFBOX-5293&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;can we use the matrix determinant as the scale? &lt;tt&gt;getSubsampling()&lt;/tt&gt; does it (update: no, the values are different)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17428329" author="tilman" created="Wed, 13 Oct 2021 16:27:18 +0000"  >&lt;p&gt;Please try with the snapshot&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/3.0.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/3.0.0-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m reluctant to do the same change in 2.0 because I partly feel like it&apos;s a major thing, some people might be upset. It&apos;s more acceptable for 3.0 because we changed a lot of things and people can test it before release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13304341">PDFBOX-4832</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13009783">PDFBOX-3523</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13021595" name="13._Korona_szallo_vegzes_13.09.26.eredeti-1.png" size="195171" author="tilman" created="Thu, 4 Mar 2021 16:53:37 +0000"/>
                            <attachment id="13002695" name="13._Korona_szallo_vegzes_13.09.26.eredeti.pdf" size="708821" author="Googulator" created="Tue, 12 May 2020 10:02:28 +0000"/>
                            <attachment id="13021607" name="outside-in.pdf" size="144733" author="tilman" created="Thu, 4 Mar 2021 19:29:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0emv4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>