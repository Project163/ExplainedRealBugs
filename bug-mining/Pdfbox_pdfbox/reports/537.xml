<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:55:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2079] Extra new line characters extracted in 1.8.5 for embedded files leading to ZipFile exception in Java 1.6</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2079</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;For the test file I&apos;ll attach shortly, PDFBox 1.8.4 extracts 17660 bytes from an embedded zip (well, docx) file.  PDFBox 1.8.5 extracts 17662 bytes &amp;#8211; &quot;\r\n&quot; at the end of the stream.  This leads to a ZipException for ZipFile(s) in Java 1.6, but not Java 1.7. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12714489">PDFBOX-2079</key>
            <summary>Extra new line characters extracted in 1.8.5 for embedded files leading to ZipFile exception in Java 1.6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tallison">Tim Allison</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Thu, 15 May 2014 13:43:06 +0000</created>
                <updated>Thu, 28 Aug 2014 22:25:42 +0000</updated>
                            <resolved>Sun, 25 May 2014 15:00:18 +0000</resolved>
                                    <version>1.8.5</version>
                    <version>1.8.6</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.6</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13998775" author="tallison@mitre.org" created="Thu, 15 May 2014 13:46:22 +0000"  >&lt;p&gt;test file (from &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1124&quot; title=&quot;Nested documents not extracted if a PDF file is in the chain&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1124&quot;&gt;&lt;del&gt;TIKA-1124&lt;/del&gt;&lt;/a&gt;) and test case attached&lt;/p&gt;</comment>
                            <comment id="13998925" author="tilman" created="Thu, 15 May 2014 17:20:43 +0000"  >&lt;p&gt;I can confirm the wrong length &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; and will investigate this.&lt;/p&gt;</comment>
                            <comment id="13998936" author="tilman" created="Thu, 15 May 2014 17:31:34 +0000"  >&lt;p&gt;One good news: it does not happen with loadNonSeq(). Only with load().&lt;/p&gt;</comment>
                            <comment id="13999128" author="tallison@mitre.org" created="Thu, 15 May 2014 19:13:01 +0000"  >&lt;p&gt;Good to know.  Thank you for confirming and taking a look so quickly!&lt;/p&gt;</comment>
                            <comment id="13999265" author="tilman" created="Thu, 15 May 2014 21:10:53 +0000"  >&lt;p&gt;The bug happens since rev 1585781, which fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2016&quot; title=&quot;Stream parsing still incorrect if length value is wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2016&quot;&gt;&lt;del&gt;PDFBOX-2016&lt;/del&gt;&lt;/a&gt;, which was another bug with lengths. I suspect that because of the sequential parsing, the correct length wasn&apos;t available when reading the PDF, so we were reading &quot;endstream&quot; (although the length is available downwards!). That length read was wrong because of what you mentioned in the beginning. &lt;/p&gt;

&lt;p&gt;I will need to find out why the sequential parser reads CR LF, whether this is correct or not, and whether it can be changed.&lt;/p&gt;

&lt;p&gt;Anyway, it shows once again that you shouldn&apos;t use load(). There&apos;s an useNonSequentialParser config option in TIKA.&lt;/p&gt;</comment>
                            <comment id="14006455" author="tilman" created="Thu, 22 May 2014 20:50:03 +0000"  >&lt;p&gt;The bug is in BaseParser.readUntilEndStream(). I have written a solution that removes the 1-2 bytes if they are there, even if the endstream sequence is across a boundary. I will have to do more tests first.&lt;/p&gt;</comment>
                            <comment id="14008359" author="tilman" created="Sun, 25 May 2014 14:59:16 +0000"  >&lt;p&gt;I wrote a writer that swallows a final CR LF or LF (but not a final CR) when writing the stream, and this one wraps around the stream that is used by readUntilEndStream(). Ideally, there should exist something like a &quot;PullbackOutputStream&quot; class but there isn&apos;t.&lt;/p&gt;

&lt;p&gt;readUntilEndStream() exists twice in PDFBox; however they are slightly different and I didn&apos;t do any DRY refactoring this time. I&apos;m not sure if the one from BaseParser is correct; the one from NonsequentialParser had a bugfix in rev 1551220.&lt;/p&gt;

&lt;p&gt;This was done in rev 1597428 and 1597431 for the trunk and rev 1597429 and 1597435 for the 1.8 branch.&lt;/p&gt;</comment>
                            <comment id="14011067" author="tallison@mitre.org" created="Wed, 28 May 2014 13:06:43 +0000"  >&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12737579">PDFBOX-2296</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12714447">TIKA-1298</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12645013" name="PDFBOX-2079-TEST_CASE.patch" size="2440" author="tallison" created="Thu, 15 May 2014 13:46:22 +0000"/>
                            <attachment id="12645012" name="embedded_zip.pdf" size="19068" author="tallison" created="Thu, 15 May 2014 13:46:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>392802</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vn5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>392976</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>