<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:10:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4958] AcroForm flatten - correct calculation of appearence position</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4958</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;As discussed in &lt;a href=&quot;https://stackoverflow.com/a/54091766/1729265&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/54091766/1729265&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4955&quot; title=&quot;Flattened form-fields are rendered at the bottom of the page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4955&quot;&gt;&lt;del&gt;PDFBOX-4955&lt;/del&gt;&lt;/a&gt; the calculation of the appearance position is wrong and works only under certain conditions which are not in line with the spec.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13327282">PDFBOX-4958</key>
            <summary>AcroForm flatten - correct calculation of appearence position</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="msahyoun">Maruan Sahyoun</assignee>
                                    <reporter username="msahyoun">Maruan Sahyoun</reporter>
                        <labels>
                            <label>Appearance</label>
                    </labels>
                <created>Sun, 13 Sep 2020 09:57:16 +0000</created>
                <updated>Sun, 20 Dec 2020 18:47:55 +0000</updated>
                            <resolved>Wed, 30 Sep 2020 10:33:19 +0000</resolved>
                                    <version>2.0.21</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.22</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>AcroForm</component>
                    <component>Rendering</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17203479" author="jira-bot" created="Mon, 28 Sep 2020 19:37:51 +0000"  >&lt;p&gt;Commit 1882099 from Maruan Sahyoun in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1882099&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1882099&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4958&quot; title=&quot;AcroForm flatten - correct calculation of appearence position&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4958&quot;&gt;&lt;del&gt;PDFBOX-4958&lt;/del&gt;&lt;/a&gt; change calculation of transformation as suggested by mkl&lt;/p&gt;</comment>
                            <comment id="17203480" author="msahyoun" created="Mon, 28 Sep 2020 19:40:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkl&quot; class=&quot;user-hover&quot; rel=&quot;mkl&quot;&gt;mkl&lt;/a&gt; I&apos;ve changed the calculation of the transformations as suggested (I hope) and enabled most of the test cases. Would be good if you can review that change. If it&apos;s OK I&apos;ll also apply to 2.0&#160;&lt;/p&gt;</comment>
                            <comment id="17203505" author="jira-bot" created="Mon, 28 Sep 2020 20:24:12 +0000"  >&lt;p&gt;Commit 1882100 from Maruan Sahyoun in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1882100&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1882100&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4958&quot; title=&quot;AcroForm flatten - correct calculation of appearence position&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4958&quot;&gt;&lt;del&gt;PDFBOX-4958&lt;/del&gt;&lt;/a&gt; disable failing tests; enable locally for manual review&lt;/p&gt;</comment>
                            <comment id="17203688" author="tilman" created="Tue, 29 Sep 2020 06:26:47 +0000"  >&lt;p&gt;It fails with &quot;mypdf.pdf&quot;, &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4693&quot; title=&quot;PDF documents with rotated form field(90&#176; degrees in my case) that apply form flattening appear squ&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4693&quot;&gt;&lt;del&gt;PDFBOX-4693&lt;/del&gt;&lt;/a&gt;-filled.pdf&quot; and with &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4958&quot; title=&quot;AcroForm flatten - correct calculation of appearence position&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4958&quot;&gt;&lt;del&gt;PDFBOX-4958&lt;/del&gt;&lt;/a&gt;-flattened.pdf&quot;. The rotated field inputs are missing.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Differences can be seen in &lt;br/&gt;
pdfbox/target/test-output/flatten/out&lt;/p&gt;</comment>
                            <comment id="17204481" author="jira-bot" created="Wed, 30 Sep 2020 06:18:34 +0000"  >&lt;p&gt;Commit 1882142 from Maruan Sahyoun in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1882142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1882142&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4958&quot; title=&quot;AcroForm flatten - correct calculation of appearence position&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4958&quot;&gt;&lt;del&gt;PDFBOX-4958&lt;/del&gt;&lt;/a&gt;: remove Matrix concatenation with transformed appearance BBox&lt;/p&gt;</comment>
                            <comment id="17204483" author="msahyoun" created="Wed, 30 Sep 2020 06:24:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; could you have another look?&lt;/p&gt;

&lt;p&gt;I&apos;ve removed the last transformation of the appearance stream Matrix with the transformed BBox although that was described in the spec but transformed yet again the already transformed content which doesn&apos;t seem to be neccessary (compared the previously failing tests with the &lt;tt&gt;cm&lt;/tt&gt; entry Adobe generated) .&lt;/p&gt;

&lt;p&gt;There are still test failures for which I disabled the test and commented accordingly but I couldn&apos;t see a visual difference but I might be missing something.&lt;/p&gt;</comment>
                            <comment id="17204498" author="tilman" created="Wed, 30 Sep 2020 07:08:54 +0000"  >&lt;p&gt;It works fine now. The three invisible differences were there before, they don&apos;t matter.&lt;/p&gt;</comment>
                            <comment id="17204560" author="jira-bot" created="Wed, 30 Sep 2020 08:19:46 +0000"  >&lt;p&gt;Commit 1882149 from Maruan Sahyoun in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1882149&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1882149&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4958&quot; title=&quot;AcroForm flatten - correct calculation of appearence position&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4958&quot;&gt;&lt;del&gt;PDFBOX-4958&lt;/del&gt;&lt;/a&gt; apply changes from trunk to 2.0 branch&lt;/p&gt;</comment>
                            <comment id="17204582" author="jira-bot" created="Wed, 30 Sep 2020 08:49:59 +0000"  >&lt;p&gt;Commit 1882152 from Maruan Sahyoun in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1882152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1882152&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4958&quot; title=&quot;AcroForm flatten - correct calculation of appearence position&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4958&quot;&gt;&lt;del&gt;PDFBOX-4958&lt;/del&gt;&lt;/a&gt; disable tests failing on ci-builds because of minimal non visual differences&lt;/p&gt;</comment>
                            <comment id="17204593" author="jira-bot" created="Wed, 30 Sep 2020 09:12:21 +0000"  >&lt;p&gt;Commit 1882153 from Maruan Sahyoun in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1882153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1882153&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4958&quot; title=&quot;AcroForm flatten - correct calculation of appearence position&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4958&quot;&gt;&lt;del&gt;PDFBOX-4958&lt;/del&gt;&lt;/a&gt; disable tests failing on ci-builds because of minimal non visual differences&lt;/p&gt;</comment>
                            <comment id="17204635" author="msahyoun" created="Wed, 30 Sep 2020 10:33:19 +0000"  >&lt;p&gt;Fix applied - disabled some tests as they will fail on ci-builds because on invisible rendering differences&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkl&quot; class=&quot;user-hover&quot; rel=&quot;mkl&quot;&gt;mkl&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;&#160; Thank you for your support on that matter&lt;/p&gt;</comment>
                            <comment id="17204745" author="mkl" created="Wed, 30 Sep 2020 13:54:53 +0000"  >&lt;p&gt;I will have an in-detail look at some later time but at first glance it looks much more sensible now than before.&lt;/p&gt;</comment>
                            <comment id="17214076" author="jira-bot" created="Wed, 14 Oct 2020 17:17:58 +0000"  >&lt;p&gt;Commit 1882501 from Maruan Sahyoun in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1882501&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1882501&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4958&quot; title=&quot;AcroForm flatten - correct calculation of appearence position&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4958&quot;&gt;&lt;del&gt;PDFBOX-4958&lt;/del&gt;&lt;/a&gt;: disable tests failing on jdk15 test server&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13173593">PDFBOX-4270</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13208842">PDFBOX-4430</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13012246" name="PDFBOX-4958-flatten-js.pdf" size="40574" author="msahyoun" created="Mon, 28 Sep 2020 14:24:20 +0000"/>
                            <attachment id="13012247" name="PDFBOX-4958-flatten-preflight.pdf" size="72993" author="msahyoun" created="Mon, 28 Sep 2020 14:24:20 +0000"/>
                            <attachment id="13012242" name="PDFBOX-4958.pdf" size="78784" author="msahyoun" created="Mon, 28 Sep 2020 14:04:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ijyo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>