<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:52:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-667] Last characters in a line overlap when a PDF is printed</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-667</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;When printing a PDF every last character in a line overlaps it&apos;s leading character.&lt;br/&gt;
This problem appears in v1.0.0&lt;/p&gt;

&lt;p&gt;Printing the same PDF with v 0.7.3 works fine. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12459962">PDFBOX-667</key>
            <summary>Last characters in a line overlap when a PDF is printed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cybersausage">Peter Deter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Mar 2010 08:24:40 +0000</created>
                <updated>Tue, 26 Oct 2010 09:33:42 +0000</updated>
                            <resolved>Thu, 30 Sep 2010 18:26:34 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.3.1</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12848621" author="lehmi" created="Tue, 23 Mar 2010 08:46:10 +0000"  >&lt;p&gt;Can you provide us with an example?&lt;/p&gt;</comment>
                            <comment id="12848623" author="cybersausage" created="Tue, 23 Mar 2010 08:52:12 +0000"  >&lt;p&gt;raw.pdf is the PDF file I&apos;m printing, out.ps is what&apos;s actually printed&lt;/p&gt;</comment>
                            <comment id="12848653" author="msahyoun" created="Tue, 23 Mar 2010 10:54:24 +0000"  >&lt;p&gt;The document prints fine on Max and Linux using the latest trunk (see raw.out.pdf). On Windows a warning occurs and one line is missing from the output (see raw.out.win.pdf). In all cases there is no overlapping of chars.&lt;/p&gt;

&lt;p&gt;Warning on Windows:&lt;/p&gt;

&lt;p&gt;23.03.2010 11:52:50 org.apache.pdfbox.util.PDFStreamEngine processOperator&lt;br/&gt;
WARNUNG: java.lang.ArrayIndexOutOfBoundsException: 1&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 1&lt;br/&gt;
	at sun.awt.windows.WPrinterJob.setTextColor(Unknown Source)&lt;br/&gt;
	at sun.awt.windows.WPathGraphics.drawString(Unknown Source)&lt;br/&gt;
	at sun.awt.windows.WPathGraphics.drawString(Unknown Source)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.font.PDSimpleFont.writeFont(PDSimpleFont.java:350)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.font.PDType1Font.drawString(PDType1Font.java:248)&lt;br/&gt;
	at org.apache.pdfbox.pdfviewer.PageDrawer.processTextPosition(PageDrawer.java:183)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processEncodedText(PDFStreamEngine.java:494)&lt;br/&gt;
	at org.apache.pdfbox.util.operator.ShowText.process(ShowText.java:45)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:552)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:248)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:207)&lt;br/&gt;
	at org.apache.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:106)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDPage.print(PDPage.java:801)&lt;br/&gt;
	at sun.print.RasterPrinterJob.printPage(Unknown Source)&lt;br/&gt;
	at sun.print.RasterPrinterJob.print(Unknown Source)&lt;br/&gt;
	at sun.print.RasterPrinterJob.print(Unknown Source)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDDocument.print(PDDocument.java:993)&lt;br/&gt;
	at PrintPDF.main(PrintPDF.java:128)&lt;/p&gt;</comment>
                            <comment id="12849115" author="lehmi" created="Wed, 24 Mar 2010 09:18:03 +0000"  >&lt;p&gt;Works fine with the current trunk (926714) on winXP with JDK1.6.18&lt;/p&gt;

&lt;p&gt;@Peter: Can you rerun the test with the current trunk version?&lt;/p&gt;</comment>
                            <comment id="12849163" author="cybersausage" created="Wed, 24 Mar 2010 12:39:03 +0000"  >&lt;p&gt;Well, I retried with the current trunk version on Linux (JDK 1.6). Unfortunately the Problem still occurs. &lt;br/&gt;
Quite fishy that it worked just well with PDFBox 0.7.3.&lt;/p&gt;</comment>
                            <comment id="12849192" author="msahyoun" created="Wed, 24 Mar 2010 14:02:35 +0000"  >&lt;p&gt;The misplacement of the last char in the line occured because the last char was printed individually although the COSString contained the complete line. The patch resolves that issue. Please review and apply if you see fit.&lt;/p&gt;</comment>
                            <comment id="12849617" author="cybersausage" created="Thu, 25 Mar 2010 08:48:59 +0000"  >&lt;p&gt;By and large the patch fixes the problem. Enough to sate me.&lt;br/&gt;
However there still appears to be a problem with the last character on the document (see attached out_patch.ps) which is still misplaced slightly.&lt;/p&gt;</comment>
                            <comment id="12849634" author="msahyoun" created="Thu, 25 Mar 2010 09:39:58 +0000"  >&lt;p&gt;The reason the last character is still misplaced is related to the fact that the character is drawn independently from the rest of the line already within the pdf i.e. it&apos;s a different object. The patch handled the fact that for the other lines the last character was output by PDFBox as a separate Object although it belonged to the same string in the PDF.&lt;/p&gt;

&lt;p&gt;The PDF is defining Helvetica for rendering the text.  To which printer/driver are you printing? &lt;/p&gt;</comment>
                            <comment id="12849638" author="vfed" created="Thu, 25 Mar 2010 09:46:30 +0000"  >&lt;p&gt;Maruan has correctly spotted that the current loop termination condition is wrong, but it is not the root cause of the problem.&lt;/p&gt;

&lt;p&gt;The sample file raw.pdf uses external TrueType font &quot;Helvetica&quot;. Unlike Acrobat Reader and other &quot;native&quot; PDF viewer programs, PDFBox does not have a built-in support for this font and uses &quot;Arial-MT&quot; instead. All in all this results in incorrect font metrics.&lt;/p&gt;

&lt;p&gt;The good news is that &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-663&quot; title=&quot;Ensuring non-null FontDescriptor for external TrueType fonts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-663&quot;&gt;&lt;del&gt;PDFBOX-663&lt;/del&gt;&lt;/a&gt; provides remedy here - the text is still drawn using &quot;Arial&quot; instead of &quot;Helvetica&quot;, but the font metrics is correct. Please see the sample image &quot;raw_pagedraw.png&quot;.&lt;/p&gt;

&lt;p&gt;Peter, please check out the SVN trunk one more time (&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-663&quot; title=&quot;Ensuring non-null FontDescriptor for external TrueType fonts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-663&quot;&gt;&lt;del&gt;PDFBOX-663&lt;/del&gt;&lt;/a&gt; was committed yesterday) and see if it solves your problem.&lt;/p&gt;</comment>
                            <comment id="12862107" author="lehmi" created="Thu, 29 Apr 2010 06:28:42 +0000"  >&lt;p&gt;I&apos;ve applied Maruans Patch with version 939208.&lt;/p&gt;

&lt;p&gt;Thanks for the contribution.&lt;/p&gt;</comment>
                            <comment id="12864843" author="lehmi" created="Thu, 6 May 2010 17:15:27 +0000"  >&lt;p&gt;Due to some sideeffects within textextraction (see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-718&quot; title=&quot;TestTestStripper fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-718&quot;&gt;&lt;del&gt;PDFBOX-718&lt;/del&gt;&lt;/a&gt;) I&apos;ve reverted the patch with version 941807.&lt;/p&gt;

&lt;p&gt;We have to dig deeper into the textextraction part to see what&apos;s causing the sideeffect.&lt;/p&gt;</comment>
                            <comment id="12916593" author="lehmi" created="Thu, 30 Sep 2010 18:26:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-828&quot; title=&quot;Spaces dissapear and text is shifted left&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-828&quot;&gt;&lt;del&gt;PDFBOX-828&lt;/del&gt;&lt;/a&gt; solves this issue. Text extraction, rendering and printing work fine.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12461523">PDFBOX-686</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12439662" name="PDFStreamEngine.patch" size="1017" author="msahyoun" created="Wed, 24 Mar 2010 14:02:35 +0000"/>
                            <attachment id="12439558" name="out.ps" size="66411" author="cybersausage" created="Tue, 23 Mar 2010 08:52:12 +0000"/>
                            <attachment id="12439759" name="out_patch.ps" size="68562" author="cybersausage" created="Thu, 25 Mar 2010 08:48:58 +0000"/>
                            <attachment id="12439563" name="raw.out.pdf" size="15660" author="msahyoun" created="Tue, 23 Mar 2010 10:54:20 +0000"/>
                            <attachment id="12439564" name="raw.out.win.pdf" size="6088" author="msahyoun" created="Tue, 23 Mar 2010 10:54:24 +0000"/>
                            <attachment id="12439557" name="raw.pdf" size="1378" author="cybersausage" created="Tue, 23 Mar 2010 08:52:12 +0000"/>
                            <attachment id="12439763" name="raw_pagedraw.png" size="46321" author="vfed" created="Thu, 25 Mar 2010 09:46:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163410</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 8 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zjbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>205431</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>