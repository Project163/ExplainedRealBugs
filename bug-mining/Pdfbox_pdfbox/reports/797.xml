<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:58:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2453] Building on OpenJDK throws javax.imageio.IIOException</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2453</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Originally captured here: &lt;a href=&quot;http://stackoverflow.com/questions/26531191/pdfbox-throws-writeimage-error-when-building-on-openjdk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/26531191/pdfbox-throws-writeimage-error-when-building-on-openjdk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I get this error when building with OpenJDK:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-------------------------------------------------------------------------------
Test set: org.apache.pdfbox.pdmodel.graphics.image.JPEGFactoryTest
-------------------------------------------------------------------------------
Tests run: 6, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.804 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.pdfbox.pdmodel.graphics.image.JPEGFactoryTest
testCreateFromImageINT_ARGB(org.apache.pdfbox.pdmodel.graphics.image.JPEGFactoryTest)  Time elapsed: 0.387 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
javax.imageio.IIOException: Invalid argument to &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; writeImage
        at com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeImage(Native Method)
        at com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeOnThread(JPEGImageWriter.java:1058)
        at com.sun.imageio.plugins.jpeg.JPEGImageWriter.write(JPEGImageWriter.java:360)
        at javax.imageio.ImageWriter.write(ImageWriter.java:615)
        at javax.imageio.ImageIO.doWrite(ImageIO.java:1612)
        at javax.imageio.ImageIO.write(ImageIO.java:1578)
        at org.apache.pdfbox.pdmodel.graphics.image.ValidateXImage.validate(ValidateXImage.java:63)
        at org.apache.pdfbox.pdmodel.graphics.image.JPEGFactoryTest.testCreateFromImageINT_ARGB(JPEGFactoryTest.java:141)

testCreateFromImage4BYTE_ABGR(org.apache.pdfbox.pdmodel.graphics.image.JPEGFactoryTest)  Time elapsed: 0.147 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
javax.imageio.IIOException: Invalid argument to &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; writeImage
        at com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeImage(Native Method)
        at com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeOnThread(JPEGImageWriter.java:1058)
        at com.sun.imageio.plugins.jpeg.JPEGImageWriter.write(JPEGImageWriter.java:360)
        at javax.imageio.ImageWriter.write(ImageWriter.java:615)
        at javax.imageio.ImageIO.doWrite(ImageIO.java:1612)
        at javax.imageio.ImageIO.write(ImageIO.java:1578)
        at org.apache.pdfbox.pdmodel.graphics.image.ValidateXImage.validate(ValidateXImage.java:63)
        at org.apache.pdfbox.pdmodel.graphics.image.JPEGFactoryTest.testCreateFromImage4BYTE_ABGR(JPEGFactoryTest.java:182)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;I&apos;m aware OpenJDK does not have a native JPEG encoder, and I can build with Oracle JDK:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;JAVA_HOME=&lt;span class=&quot;code-quote&quot;&gt;&quot;/path/to/oracle/jdk&quot;&lt;/span&gt; mvn clean compile
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>DISTRIB_ID=Ubuntu&lt;br/&gt;
DISTRIB_RELEASE=12.04&lt;br/&gt;
DISTRIB_CODENAME=precise&lt;br/&gt;
DISTRIB_DESCRIPTION=&amp;quot;Ubuntu 12.04.5 LTS&amp;quot;&lt;br/&gt;
java version &amp;quot;1.7.0_65&amp;quot;&lt;br/&gt;
OpenJDK Runtime Environment (IcedTea 2.5.3) (7u71-2.5.3-0ubuntu0.12.04.1)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 24.65-b04, mixed mode)&lt;br/&gt;
</environment>
        <key id="12750334">PDFBOX-2453</key>
            <summary>Building on OpenJDK throws javax.imageio.IIOException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="opyate">Juan Uys</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Oct 2014 11:50:28 +0000</created>
                <updated>Wed, 8 Jul 2020 06:43:47 +0000</updated>
                            <resolved>Fri, 24 Oct 2014 19:17:01 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14182716" author="ssteiner1" created="Fri, 24 Oct 2014 12:05:16 +0000"  >&lt;p&gt;To just build use:&lt;br/&gt;
mvn clean install -DskipTests&lt;/p&gt;</comment>
                            <comment id="14182718" author="opyate" created="Fri, 24 Oct 2014 12:06:42 +0000"  >&lt;p&gt;Sure, but I&apos;m planning to hack on PDFBox and want the tests.&lt;/p&gt;</comment>
                            <comment id="14182997" author="tilman" created="Fri, 24 Oct 2014 16:14:28 +0000"  >&lt;p&gt;When you first wrote this on stackoverflow and before you added the exception, I had hoped that this was about a &lt;b&gt;missing&lt;/b&gt; JPEG encoder (and my thought was about checking whether the encoder is there, as we already do at some places), but now that the full stack trace is there, obviously it is not a missing encoder, it is a problem with a broken encoder, that happens with JPEGs that have an Alpha:&lt;br/&gt;
&lt;a href=&quot;http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7044758&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7044758&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Amusingly, I had forgotten that I had posted about this myself earlier:&lt;br/&gt;
&lt;a href=&quot;https://mail-archives.apache.org/mod_mbox/incubator-pdfbox-dev/201406.mbox/%3C53A1F2CB.7090809@t-online.de%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://mail-archives.apache.org/mod_mbox/incubator-pdfbox-dev/201406.mbox/%3C53A1F2CB.7090809@t-online.de%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The only idea I have now is to include a comment &quot; &apos;invalid argument to native writeImage&apos; can happen with some OpenJDK versions&quot;.&lt;/p&gt;</comment>
                            <comment id="14183064" author="lehmi" created="Fri, 24 Oct 2014 17:18:27 +0000"  >&lt;p&gt;There is already a workaround for 1.6 OpenJDK in place, maybe we should simply extend it to 1.7 &lt;/p&gt;</comment>
                            <comment id="14183318" author="jira-bot" created="Fri, 24 Oct 2014 19:11:28 +0000"  >&lt;p&gt;Commit 1634121 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1634121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1634121&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2453&quot; title=&quot;Building on OpenJDK throws javax.imageio.IIOException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2453&quot;&gt;&lt;del&gt;PDFBOX-2453&lt;/del&gt;&lt;/a&gt;: skip tests which trigger OpenJDK 7 bug&lt;/p&gt;</comment>
                            <comment id="14183325" author="tilman" created="Fri, 24 Oct 2014 19:17:01 +0000"  >&lt;p&gt;Ok, done, although I don&apos;t really like it, as this is just moving the problem to a later time, i.e. when PDFBox will use JPEGs with alpha. Weird thing is that the previous change (which I can&apos;t remember) was done as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2150&quot; title=&quot;Add Travis CI configuration file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2150&quot;&gt;&lt;del&gt;PDFBOX-2150&lt;/del&gt;&lt;/a&gt;, but that one doesn&apos;t mention it.&lt;/p&gt;</comment>
                            <comment id="14183354" author="ssteiner1" created="Fri, 24 Oct 2014 19:32:10 +0000"  >&lt;p&gt;Is openjdk 8 working?&lt;/p&gt;</comment>
                            <comment id="14183365" author="tilman" created="Fri, 24 Oct 2014 19:44:20 +0000"  >&lt;p&gt;Probably not, the bug report mentions that it would be fixed in 9. I&apos;d change it as soon as somebody reports about 8 not working.&lt;/p&gt;</comment>
                            <comment id="14361106" author="oneiros" created="Fri, 13 Mar 2015 21:14:20 +0000"  >&lt;p&gt;I have the same problem with OpenJDK 8.&lt;/p&gt;</comment>
                            <comment id="14361115" author="oneiros" created="Fri, 13 Mar 2015 21:20:09 +0000"  >&lt;p&gt;Disable broken JPEG tests in OpenJDK 1.8&lt;/p&gt;</comment>
                            <comment id="14361212" author="jira-bot" created="Fri, 13 Mar 2015 22:33:24 +0000"  >&lt;p&gt;Commit 1666599 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1666599&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1666599&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2453&quot; title=&quot;Building on OpenJDK throws javax.imageio.IIOException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2453&quot;&gt;&lt;del&gt;PDFBOX-2453&lt;/del&gt;&lt;/a&gt;: : skip tests which trigger OpenJDK 8 bug&lt;/p&gt;</comment>
                            <comment id="14361217" author="tilman" created="Fri, 13 Mar 2015 22:34:36 +0000"  >&lt;p&gt;Thanks, done. Note that we don&apos;t do package imports, see&lt;br/&gt;
&lt;a href=&quot;http://pdfbox.apache.org/codingconventions.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pdfbox.apache.org/codingconventions.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14361241" author="oneiros" created="Fri, 13 Mar 2015 22:50:17 +0000"  >&lt;p&gt;Ah. I&apos;ve fixed my Eclipse settings (I let it organize the imports on save).&lt;/p&gt;</comment>
                            <comment id="14361265" author="tilman" created="Fri, 13 Mar 2015 23:02:55 +0000"  >&lt;p&gt;It would be interesting to hear whether it works with twelvemonkeys on OpenJDK. You need to add this in the pom.xml of the pdfbox subproject:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;com.twelvemonkeys.imageio&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;imageio-jpeg&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;3.0.2&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;    
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(You have to reenable the test too, of course)&lt;/p&gt;

&lt;p&gt;If it works, please mention it in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2694&quot; title=&quot;Evaluate twelvemonkeys for JPEG&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2694&quot;&gt;PDFBOX-2694&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14361287" author="oneiros" created="Fri, 13 Mar 2015 23:12:55 +0000"  >&lt;p&gt;No luck.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13315541">PDFBOX-4910</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12704508" name="JPEGFactoryTest.patch" size="2226" author="oneiros" created="Fri, 13 Mar 2015 21:20:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21jif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>