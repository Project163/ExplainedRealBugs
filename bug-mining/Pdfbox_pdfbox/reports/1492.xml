<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:03:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3411] Incorrect embedding of non-subset fonts.</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3411</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The following code produces a broken PDF.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; DIR = &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/user/Documents/pdf/&quot;&lt;/span&gt;;
PDDocument doc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDDocument();
PDPage pg = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDPage();
PDPageContentStream con = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDPageContentStream(doc, pg);
con.beginText();
&lt;span class=&quot;code-comment&quot;&gt;// Working fine when below is &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, not when it is &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;.
&lt;/span&gt;con.setFont(PDType0Font.load(doc, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(DIR + &lt;span class=&quot;code-quote&quot;&gt;&quot;NotoSans-Regular.ttf&quot;&lt;/span&gt;), &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;), 16);
con.setTextMatrix(Matrix.getTranslateInstance(50, 600));
con.showText(&lt;span class=&quot;code-quote&quot;&gt;&quot;Hello World&quot;&lt;/span&gt;);
con.endText();
con.close();
doc.addPage(pg);
doc.save(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(DIR + &lt;span class=&quot;code-quote&quot;&gt;&quot;out.pdf&quot;&lt;/span&gt;));
doc.close();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As mentioned in the code, it works fine when the subset is true. I&apos;ve tried it with a few fonts. The referenced font is downloadable from here:&lt;br/&gt;
&lt;a href=&quot;https://www.google.com/fonts#UsePlace:use/Collection:Noto+Sans&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.google.com/fonts#UsePlace:use/Collection:Noto+Sans&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Behavior in Chrome: Shows random characters.&lt;br/&gt;
Behavior in Mac Preview: Shows selectable whitespace.&lt;br/&gt;
Behavior in Acrobat Reader: Shows message on open (Cannot find or create the font &apos;NotoSans&apos;. Some characters may not display or print correctly). Shows dots instead of characters.&lt;br/&gt;
Behavior in Safari: Same as preview.&lt;/p&gt;

&lt;p&gt;Tested with 2.0.0 and 2.0.2.&lt;/p&gt;

&lt;p&gt;Why does this matter? We need a complete font to embed to use in text acro form fields.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12986411">PDFBOX-3411</key>
            <summary>Incorrect embedding of non-subset fonts.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="danfickle">Dan Fickling</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Jul 2016 14:16:28 +0000</created>
                <updated>Sat, 25 Mar 2017 18:12:46 +0000</updated>
                            <resolved>Wed, 6 Jul 2016 05:13:21 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.0.2</version>
                    <version>2.0.3</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.3</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15360246" author="tilman" created="Sat, 2 Jul 2016 16:36:26 +0000"  >&lt;p&gt;What really happened is that the font has not been embedded at all.&lt;/p&gt;</comment>
                            <comment id="15360288" author="tilman" created="Sat, 2 Jul 2016 18:56:55 +0000"  >&lt;p&gt;Porposed change in TrueTypeEmbedder:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    TrueTypeEmbedder(PDDocument document, COSDictionary dict, TrueTypeFont ttf,
                     &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; embedSubset) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
    {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.document = document;
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.embedSubset = embedSubset;
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.ttf = ttf;
        fontDescriptor = createFontDescriptor(ttf);

        &lt;span class=&quot;code-comment&quot;&gt;// these 3 lines are &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;
&lt;/span&gt;        PDStream stream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDStream(document, ttf.getOriginalData(), COSName.FLATE_DECODE);
        stream.getCOSObject().setInt(COSName.LENGTH1, stream.toByteArray().length);
        fontDescriptor.setFontFile2(stream);

        dict.setName(COSName.BASE_FONT, ttf.getName());

        &lt;span class=&quot;code-comment&quot;&gt;// choose a Unicode &lt;span class=&quot;code-quote&quot;&gt;&quot;cmap&quot;&lt;/span&gt;
&lt;/span&gt;        cmap = ttf.getUnicodeCmap();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15363062" author="jira-bot" created="Tue, 5 Jul 2016 19:22:05 +0000"  >&lt;p&gt;Commit 1751540 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1751540&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1751540&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3411&quot; title=&quot;Incorrect embedding of non-subset fonts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3411&quot;&gt;&lt;del&gt;PDFBOX-3411&lt;/del&gt;&lt;/a&gt;: fix embedding of non subsetted font&lt;/p&gt;</comment>
                            <comment id="15363063" author="jira-bot" created="Tue, 5 Jul 2016 19:22:09 +0000"  >&lt;p&gt;Commit 1751541 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1751541&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1751541&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3411&quot; title=&quot;Incorrect embedding of non-subset fonts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3411&quot;&gt;&lt;del&gt;PDFBOX-3411&lt;/del&gt;&lt;/a&gt;: fix embedding of non subsetted font&lt;/p&gt;</comment>
                            <comment id="15363067" author="tilman" created="Tue, 5 Jul 2016 19:24:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danfickle&quot; class=&quot;user-hover&quot; rel=&quot;danfickle&quot;&gt;danfickle&lt;/a&gt; please test your application with the change, a snapshot should be available within a few hours.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; please review this change.&lt;/p&gt;</comment>
                            <comment id="15363553" author="jahewson" created="Wed, 6 Jul 2016 00:45:07 +0000"  >&lt;p&gt;Yep, looks great.&lt;/p&gt;</comment>
                            <comment id="15363785" author="tilman" created="Wed, 6 Jul 2016 05:13:21 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="15369547" author="danfickle" created="Sun, 10 Jul 2016 10:22:46 +0000"  >&lt;p&gt;Thanks heaps. It works perfectly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30gvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>