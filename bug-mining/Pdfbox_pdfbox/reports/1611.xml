<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:04:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3396] flattening AcroForm with visible sign field ETSI.CAdES.detached</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3396</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Hallo,&lt;br/&gt;
I&apos;ve got a problem with the flattaning function of AcroForm class of a PDSignatureField. I&apos;ve a signed pdf document with ETSI.CAdES.detached visible image at bottom of the file. I want to flattan the PDSignatureField of the sign to eliminate sign cryptography element of the field and to embad the sign marker immage of the sign, in the same position of the original immage that is a part of the marker sign ETSI.CAdES.detached. I try this way(pseudo code similare to real code):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDDocument pdDoc = PDDocument.load(&lt;span class=&quot;code-quote&quot;&gt;&quot;signed-document.pdf&quot;&lt;/span&gt;);

PDDocumentCatalog pdCatalog = pdDoc.getDocumentCatalog();
PDAcroForm acroForm = pdCatalog.getAcroForm();

List&amp;lt;PDField&amp;gt; fields = acroForm.getFields();

fields.stream().filter(pf -&amp;gt; pf.getFieldType().toLowerCase().contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;sig&quot;&lt;/span&gt;)).forEach(pf -&amp;gt; {
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      PDSignatureField pfs = ((PDSignatureField)(pf));
      
       log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;START remove Sign Flags&quot;&lt;/span&gt;);
       pfs.setReadOnly(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
       pfs.setRequired(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
       pfs.setNoExport(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
       log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;END remove Sign Flags&quot;&lt;/span&gt;);
       
       log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;START flatten field&quot;&lt;/span&gt;);
       pfs.getAcroForm().flatten();
       pfs.getAcroForm().refreshAppearances();
       log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;END flatten field&quot;&lt;/span&gt;);
					
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
   log.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;flattenFile --&amp;gt; Error: &quot;&lt;/span&gt; + ex.getMessage());
   &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(ex);
}
});

ByteArrayOutputStream baos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();
pdDoc.save(baos);
.
.
.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;		
&lt;p&gt;At the and of the process, the pdf file in output, has no sign cryptography element, but the visible marker immage of the sign is placed in a wrong position, on top of sign above paragraph of the document and not in original position of the signed marker immage. That&apos;s happen when i call the following method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;       pfs.getAcroForm().flatten();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In other words, the flattened pdf of the original signed pdf, has in a correct way no more sign inside but, the immage of the ETSI.CAdES.detached signe is embedded in a wrong position, over the text of the nearest above paragraph of the pdf document.&lt;/p&gt;

&lt;p&gt;My questions are: &lt;/p&gt;

&lt;p&gt;1-My way, is the correct way to flattan a signed ETSI.CAdES.detached file?&lt;/p&gt;

&lt;p&gt;2-Is there a method to remove CadES/PadES sign with a official visible marker image and, embad immage in the acctual original position in pdf file?&lt;/p&gt;

&lt;p&gt;Thank you for your support and sorry for my poor English.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Fabio Evangelista&lt;/p&gt;</description>
                <environment>Java 8 - Spring Boot</environment>
        <key id="12982335">PDFBOX-3396</key>
            <summary>flattening AcroForm with visible sign field ETSI.CAdES.detached</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="msahyoun">Maruan Sahyoun</assignee>
                                    <reporter username="Shinobi75">Fabio</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jun 2016 14:05:40 +0000</created>
                <updated>Fri, 11 Sep 2020 14:55:15 +0000</updated>
                            <resolved>Mon, 12 Dec 2016 06:01:31 +0000</resolved>
                                    <version>2.0.1</version>
                    <version>2.0.2</version>
                                    <fixVersion>2.0.4</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>AcroForm</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15346491" author="msahyoun" created="Thu, 23 Jun 2016 14:13:00 +0000"  >&lt;p&gt;would it be possible to attach a sample PDF?&lt;/p&gt;</comment>
                            <comment id="15346516" author="shinobi75" created="Thu, 23 Jun 2016 14:34:01 +0000"  >&lt;p&gt;Hallo,&lt;br/&gt;
I&apos;ve attached files:&lt;/p&gt;

&lt;p&gt;1-Signed-Document.pdf is an example of an original signed document before flattaning.&lt;/p&gt;

&lt;p&gt;2-Signed-Document-Flattened.pdf is an example of a printout document after flattaning process(the flattened file is the second page of the file).&lt;/p&gt;

&lt;p&gt;Thank you for your support.&lt;/p&gt;</comment>
                            <comment id="15356652" author="shinobi75" created="Thu, 30 Jun 2016 07:12:12 +0000"  >&lt;p&gt;Hallo,&lt;br/&gt;
have you got something new about that problem?&lt;/p&gt;

&lt;p&gt;Thank you for your support and patience.&lt;/p&gt;</comment>
                            <comment id="15356757" author="msahyoun" created="Thu, 30 Jun 2016 08:44:37 +0000"  >&lt;p&gt;Yes, I&apos;ve something in the works which I hope to be able to commit tonight.&lt;/p&gt;</comment>
                            <comment id="15356796" author="shinobi75" created="Thu, 30 Jun 2016 09:16:12 +0000"  >&lt;p&gt;Oh....thank you!&lt;br/&gt;
Very nice to listen this... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15360892" author="jira-bot" created="Mon, 4 Jul 2016 06:27:19 +0000"  >&lt;p&gt;Commit 1751213 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1751213&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1751213&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3396&quot; title=&quot;flattening AcroForm with visible sign field ETSI.CAdES.detached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3396&quot;&gt;&lt;del&gt;PDFBOX-3396&lt;/del&gt;&lt;/a&gt;: don&apos;t add a transformation if there is a XObject&lt;/p&gt;</comment>
                            <comment id="15360905" author="jira-bot" created="Mon, 4 Jul 2016 06:36:18 +0000"  >&lt;p&gt;Commit 1751214 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1751214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1751214&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3396&quot; title=&quot;flattening AcroForm with visible sign field ETSI.CAdES.detached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3396&quot;&gt;&lt;del&gt;PDFBOX-3396&lt;/del&gt;&lt;/a&gt;: don&apos;t add a transformation if there is a XObject&lt;/p&gt;</comment>
                            <comment id="15360909" author="msahyoun" created="Mon, 4 Jul 2016 06:38:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Shinobi75&quot; class=&quot;user-hover&quot; rel=&quot;Shinobi75&quot;&gt;Shinobi75&lt;/a&gt; I&apos;ve checked in the changes to 2.0.3 and 2.1.0 which should be available later today. Could you verify if it works for you.&lt;/p&gt;</comment>
                            <comment id="15360938" author="shinobi75" created="Mon, 4 Jul 2016 07:03:30 +0000"  >&lt;p&gt;Maruan, &lt;br/&gt;
thank you very much for your work!&lt;br/&gt;
I&apos;ll try soon the new artifact, in both of versions that you indicate.&lt;br/&gt;
I&apos;ll then, notify to you the results of my tests.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Fabio.&lt;/p&gt;</comment>
                            <comment id="15361152" author="shinobi75" created="Mon, 4 Jul 2016 10:48:31 +0000"  >&lt;p&gt;Maruan, &lt;br/&gt;
I&apos;m happy! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; everything is fine now, with your new version of PDAcroForm.java file!&lt;br/&gt;
I&apos;ve just built a new version of the pdfbox-2.0.2.jar from branch &apos;pdfbox/branches/2.0&apos; and use the new jar &lt;br/&gt;
with my existing code and everything works fine!&lt;br/&gt;
I&apos;ve attached some files from my last tests:&lt;/p&gt;

&lt;p&gt;1-Signed-Document-1.pdf and Signed-Document-2.pdf are examples of originals signed documents before flattening.&lt;/p&gt;

&lt;p&gt;2-Signed-Document-Flattened-1.pdf and Signed-Document-Flattened-2.pdf are examples of a printout documents after flattening process(the flattened file is the second page of the file).&lt;/p&gt;

&lt;p&gt;Now, my flattened files are OK!&lt;br/&gt;
Thank you very much for your precious support.&lt;/p&gt;

&lt;p&gt;Now, which Maven version of the artifact should I use, to fix the problem in my production environment?&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Fabio.&lt;/p&gt;</comment>
                            <comment id="15361402" author="msahyoun" created="Mon, 4 Jul 2016 14:41:21 +0000"  >&lt;p&gt;that&apos;s either &lt;tt&gt;2.0.3-SNAPSHOT&lt;/tt&gt; or &lt;tt&gt;2.1.0-SNAPSHOT&lt;/tt&gt; like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;dependency&amp;gt;
  &amp;lt;groupId&amp;gt;org.apache.pdfbox&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;pdfbox&amp;lt;/artifactId&amp;gt;
  &amp;lt;version&amp;gt;2.0.3-SNAPSHOT&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;no specific release dates have been set yet for the final versions.&lt;/p&gt;</comment>
                            <comment id="15361411" author="msahyoun" created="Mon, 4 Jul 2016 14:52:19 +0000"  >&lt;p&gt;I&apos;ve also looked at above code which can be shortened to&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDDocument pdDoc = PDDocument.load(&lt;span class=&quot;code-quote&quot;&gt;&quot;signed-document.pdf&quot;&lt;/span&gt;);
PDDocumentCatalog pdCatalog = pdDoc.getDocumentCatalog();
PDAcroForm acroForm = pdCatalog.getAcroForm();
acroForm.flatten();
ByteArrayOutputStream baos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();
pdDoc.save(baos);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;specifically the following lines are not ideal&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;pfs.getAcroForm().flatten();
pfs.getAcroForm().refreshAppearances();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
	&lt;li&gt;after the first &lt;tt&gt;pfs.getAcroForm().flatten()&lt;/tt&gt; there are no more fields and as a result subsequent calls do not make any sense&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;pfs.getAcroForm().refreshAppearances()&lt;/tt&gt; should be done prior to &lt;tt&gt;flatten()&lt;/tt&gt; if you want to make sure that all appearances were properly generated by PDFBox (which you don&apos;t need to do at all if the form filling application already took care of). Calling it after &lt;tt&gt;flatten()&lt;/tt&gt; wouldn&apos;t have any effect as there are no more fields.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Please also note that appearance generation is always specific by the filling application as the details of the look &amp;amp; feel are not part of the PDF specification. In addition PDFBox support for appearance generation of signature fields.&lt;/p&gt;

&lt;p&gt;If you would only like to flatten specific fields use &lt;tt&gt;PDAcroForm.flatten(List&amp;lt;PDField&amp;gt; boolean refreshAppearances)&lt;/tt&gt; instead.&lt;/p&gt;</comment>
                            <comment id="15361415" author="msahyoun" created="Mon, 4 Jul 2016 14:52:52 +0000"  >&lt;p&gt;setting to fixed as per users feedback&lt;/p&gt;</comment>
                            <comment id="15361456" author="shinobi75" created="Mon, 4 Jul 2016 15:23:45 +0000"  >&lt;p&gt;Maruan,&lt;br/&gt;
Thank you very much for your work, support and code revisions too!&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Fabio Evangelista.&lt;/p&gt;</comment>
                            <comment id="15401854" author="shinobi75" created="Mon, 1 Aug 2016 11:05:29 +0000"  >&lt;p&gt;Hallo,&lt;br/&gt;
sorry for my reopen of this issue but, last week, I&apos;d got another problem with function flattening of the AcroForm class, similar about of previous problem that I met. &lt;br/&gt;
Currently, We&apos;re using the following version of the PDFBox artifact: &lt;/p&gt;

&lt;p&gt;2.0.3-SNAPSHOT&lt;/p&gt;

&lt;p&gt;And every signed document printed out, generates an excellent print. Everything thanks to the fix published after the close of JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3396&quot; title=&quot;flattening AcroForm with visible sign field ETSI.CAdES.detached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3396&quot;&gt;&lt;del&gt;PDFBOX-3396&lt;/del&gt;&lt;/a&gt;. Now, We&apos;ve got another strange situation: when I&apos;m using &lt;br/&gt;
getAcroForm().flatten(); method on documents with three signs ETSI.CAdES.detached, the printed out pdf files, are generated with only one sign printed. In other words, two signs on total of three disappear on printed pdf files. &lt;br/&gt;
That situation, is sistematically on a lot of signed documents, recently printed with our procedure that use PDFBox. &lt;br/&gt;
The code is the same of the last time(after the good revisione of Maruan! With no refreshAppearances method call) and now, I&apos;ll attach example pdf files like last time.&lt;/p&gt;

&lt;p&gt;Thank you for your patience, support and sorry for my poor English.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Fabio Evangelista&lt;/p&gt;</comment>
                            <comment id="15401862" author="shinobi75" created="Mon, 1 Aug 2016 11:11:56 +0000"  >&lt;p&gt;Hallo,&lt;br/&gt;
 I&apos;ve attached files:&lt;/p&gt;

&lt;p&gt;1-Signed-Document-3.pdf and Signed-Document-4.pdf are examples of an original signed documents before flattening.&lt;/p&gt;

&lt;p&gt;2-Signed-Document-Flattened-3+4.pdf is an example of a printout document after flattening process(the flattened files are the second and third page of the file).&lt;/p&gt;

&lt;p&gt;Thank you for your support.&lt;/p&gt;</comment>
                            <comment id="15405900" author="shinobi75" created="Wed, 3 Aug 2016 13:15:34 +0000"  >&lt;p&gt;Hello,&lt;br/&gt;
Is there someone could help me, with the reopen situation of that issue?&lt;br/&gt;
Sorry, but I&apos;ve got that problem in a production environment, and I&apos;m very preoccupied about the right resolution of the issue.&lt;/p&gt;

&lt;p&gt;Thank you very much for any support.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Fabio Evangelista&lt;/p&gt;</comment>
                            <comment id="15408879" author="msahyoun" created="Fri, 5 Aug 2016 05:03:27 +0000"  >&lt;p&gt;I was able to reproduce the issue. As I&apos;m currently on travel it will be another day or two to fix the issue.&lt;/p&gt;</comment>
                            <comment id="15408953" author="shinobi75" created="Fri, 5 Aug 2016 06:18:04 +0000"  >&lt;p&gt;Thank you very much for your attention and patience.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Fabio Evangelista&lt;/p&gt;</comment>
                            <comment id="15415109" author="shinobi75" created="Wed, 10 Aug 2016 10:51:21 +0000"  >&lt;p&gt;Hello,&lt;br/&gt;
my company will close for summer holiday from tomorrow 11-08 to next 26-08.&lt;br/&gt;
During this period, I&apos;ll can read e-mail and check status of the JIRA on web but, I&apos;ll can&apos;t use IT structure of the company. Then, if you have need about some feedback, I&apos;ll can&apos;t support you till 26-08. I&apos;ll be back in office on 29-08 and I&apos;ll be able to give you any support and feedback, that you need for the resolution of the issue.&lt;/p&gt;

&lt;p&gt;Thank you very much, for your support and patience.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Fabio Evangelista&lt;/p&gt;</comment>
                            <comment id="15415143" author="msahyoun" created="Wed, 10 Aug 2016 11:34:50 +0000"  >&lt;p&gt;Just to let you know that I&apos;m working on it. Unfortunately it will take more work as a more general approach is needed. A quick fix will work for the new files but invalidates the old workaround. There is also a general design decision I&apos;ll need to discuss with my colleagues.&lt;/p&gt;</comment>
                            <comment id="15415218" author="shinobi75" created="Wed, 10 Aug 2016 12:45:15 +0000"  >&lt;p&gt;OK Maruan! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Thank you very much for everything.&lt;/p&gt;</comment>
                            <comment id="15485076" author="msahyoun" created="Mon, 12 Sep 2016 19:38:45 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12828093/12828093_Signed-Document-3.flatten.20160912.pdf&quot; title=&quot;Signed-Document-3.flatten.20160912.pdf attached to PDFBOX-3396&quot;&gt;Signed-Document-3.flatten.20160912.pdf&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; flattened document with improved scaling and translation&lt;/p&gt;</comment>
                            <comment id="15485091" author="msahyoun" created="Mon, 12 Sep 2016 19:47:30 +0000"  >&lt;p&gt;I&apos;ve managed to improve the result for &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12821307/12821307_Signed-Document-3.pdf&quot; title=&quot;Signed-Document-3.pdf attached to PDFBOX-3396&quot;&gt;Signed-Document-3.pdf&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; but at the cost of a no longer as expected result for &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12812835/12812835_Signed-Document.pdf&quot; title=&quot;Signed-Document.pdf attached to PDFBOX-3396&quot;&gt;Signed-Document.pdf&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. This is due to the fact that there is already a translation for the signature image in Signed-Document.pdf (3 levels up in the content stream so not directly to be found) so in that special case there shouldn&apos;t be a translation applied. I&apos;d also need to test the results for regular fields.&lt;/p&gt;

&lt;p&gt;If I manage to make it in time I&apos;ll only apply the changes to 2.0.3 as working on it there are other potential issues which I&apos;d like to address in a future release (e.g. the current code processes per field where it should process per page to correctly handle the pages graphics state).&lt;/p&gt;</comment>
                            <comment id="15488034" author="shinobi75" created="Tue, 13 Sep 2016 18:38:57 +0000"  >&lt;p&gt;Hi Maruan,&lt;br/&gt;
Thank you for your great job!&lt;br/&gt;
I&apos;m currently out of the office for  a  my  personal travel.&lt;br/&gt;
I&apos;ll backup in office next  monday and I&apos;ll feedback you  about  my  test on new 2.0.3 version.&lt;/p&gt;

&lt;p&gt;Thank you very much for your attention!&lt;br/&gt;
I&apos;ll write you soon.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Fabio.&lt;/p&gt;</comment>
                            <comment id="15488386" author="msahyoun" created="Tue, 13 Sep 2016 20:51:48 +0000"  >&lt;p&gt;I have to move it to 2.0.4 as I&apos;m not able to complete the tests and implement the special handling for Signed-Document.pdf. BTW two other libs I&apos;ve tested have also issues with the correct position of the signature image after flattening, so this seems to be a very special case.  &lt;/p&gt;</comment>
                            <comment id="15513728" author="shinobi75" created="Thu, 22 Sep 2016 16:21:09 +0000"  >&lt;p&gt;Hi Maruan,&lt;br/&gt;
I&apos;ve tryed the 2.0.4 version. It&apos;s ok to fix the new Issue but, as you just say, it doesn&apos;t fit very well for the position of the signature image after flattening. For me that situation it&apos;s ok, because after some attempts, I&apos;ve changed strategy. Now, I&apos;m using the PDFRenderer class of PDFBox to convert each page of a signed file into a compress image(the file &apos;Signed-Document-Image-Printed.pdf&apos; just uploaded is an example). With this technique, every signature image appear and remain in the correct position. The size of the printed pdf is big, but for us that isn&apos;t a real problem. For me, you can close the reopened issue. Thank you very much for you patience, time, great job and attention about my issues.&lt;/p&gt;

&lt;p&gt;Best regardes,&lt;br/&gt;
Fabio.&lt;/p&gt;</comment>
                            <comment id="15725164" author="lehmi" created="Tue, 6 Dec 2016 11:01:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; Any chance to get this done for 2.0.4, or should we postpone?&lt;/p&gt;</comment>
                            <comment id="15725192" author="msahyoun" created="Tue, 6 Dec 2016 11:16:34 +0000"  >&lt;p&gt;I&apos;m currently working on that as well as on &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3587&quot; title=&quot;Flatten not working on attached pdf form&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3587&quot;&gt;&lt;del&gt;PDFBOX-3587&lt;/del&gt;&lt;/a&gt; which is somehow related. Should be resolved by the end of the week.&lt;/p&gt;</comment>
                            <comment id="15736076" author="jira-bot" created="Fri, 9 Dec 2016 19:28:37 +0000"  >&lt;p&gt;Commit 1773457 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1773457&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1773457&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3396&quot; title=&quot;flattening AcroForm with visible sign field ETSI.CAdES.detached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3396&quot;&gt;&lt;del&gt;PDFBOX-3396&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3587&quot; title=&quot;Flatten not working on attached pdf form&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3587&quot;&gt;&lt;del&gt;PDFBOX-3587&lt;/del&gt;&lt;/a&gt;: always translate the appearance, apply scaling if the appearance is using an XForm&lt;/p&gt;</comment>
                            <comment id="15736162" author="jira-bot" created="Fri, 9 Dec 2016 19:53:37 +0000"  >&lt;p&gt;Commit 1773458 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1773458&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1773458&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3396&quot; title=&quot;flattening AcroForm with visible sign field ETSI.CAdES.detached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3396&quot;&gt;&lt;del&gt;PDFBOX-3396&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3587&quot; title=&quot;Flatten not working on attached pdf form&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3587&quot;&gt;&lt;del&gt;PDFBOX-3587&lt;/del&gt;&lt;/a&gt;: always translate the appearance, apply scaling if the appearance is using an XForm&lt;/p&gt;</comment>
                            <comment id="15736228" author="jira-bot" created="Fri, 9 Dec 2016 20:11:19 +0000"  >&lt;p&gt;Commit 1773459 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1773459&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1773459&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3396&quot; title=&quot;flattening AcroForm with visible sign field ETSI.CAdES.detached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3396&quot;&gt;&lt;del&gt;PDFBOX-3396&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3587&quot; title=&quot;Flatten not working on attached pdf form&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3587&quot;&gt;&lt;del&gt;PDFBOX-3587&lt;/del&gt;&lt;/a&gt;: add unit test to compare rendering before and after flattening. Individual test disabled per default.&lt;/p&gt;</comment>
                            <comment id="15739409" author="msahyoun" created="Sun, 11 Dec 2016 09:10:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; two of the sample files are fine now with only minimal differences. There is still one issue common in 2 other files for the location of the signature image. I hope to be able to fix that today otherwise I&apos;ll postpone to 2.0.5.&lt;/p&gt;</comment>
                            <comment id="15741058" author="jira-bot" created="Mon, 12 Dec 2016 05:48:22 +0000"  >&lt;p&gt;Commit 1773738 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1773738&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1773738&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3396&quot; title=&quot;flattening AcroForm with visible sign field ETSI.CAdES.detached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3396&quot;&gt;&lt;del&gt;PDFBOX-3396&lt;/del&gt;&lt;/a&gt;: dont applay a transformation if the PDFormXObject has a BBox not starting at 0,0&lt;/p&gt;</comment>
                            <comment id="15741067" author="jira-bot" created="Mon, 12 Dec 2016 05:53:49 +0000"  >&lt;p&gt;Commit 1773739 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1773739&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1773739&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3396&quot; title=&quot;flattening AcroForm with visible sign field ETSI.CAdES.detached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3396&quot;&gt;&lt;del&gt;PDFBOX-3396&lt;/del&gt;&lt;/a&gt;: dont applay a transformation if the PDFormXObject has a BBox not starting at 0,0&lt;/p&gt;</comment>
                            <comment id="15741075" author="msahyoun" created="Mon, 12 Dec 2016 06:00:25 +0000"  >&lt;p&gt;This fixes the remaining issues for &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12816014/12816014_Signed-Document-1.pdf&quot; title=&quot;Signed-Document-1.pdf attached to PDFBOX-3396&quot;&gt;Signed-Document-1.pdf&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; and &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12816016/12816016_Signed-Document-2.pdf&quot; title=&quot;Signed-Document-2.pdf attached to PDFBOX-3396&quot;&gt;Signed-Document-2.pdf&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; which are now rendered identical before and after flattening.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Shinobi75&quot; class=&quot;user-hover&quot; rel=&quot;Shinobi75&quot;&gt;Shinobi75&lt;/a&gt; if you like please test with the latest version. I hope that this resolves not only the files provided but others you have. I&apos;m closing this issue as we are about to release &lt;tt&gt;2.0.4&lt;/tt&gt;. Further issues and enhancements should be tracked in a new issue. If the issue is not resolved for the files you already provided we can reopen this ticket. But please don&apos;t attach new ones.&lt;/p&gt;</comment>
                            <comment id="15741079" author="msahyoun" created="Mon, 12 Dec 2016 06:01:31 +0000"  >&lt;p&gt;with identical renderings/close to identical renderings for the test files provided before and after flattening I&apos;m closing.&lt;/p&gt;</comment>
                            <comment id="15741297" author="shinobi75" created="Mon, 12 Dec 2016 08:22:46 +0000"  >&lt;p&gt;Hello Maruan,&lt;br/&gt;
OK, I&apos;ll try the new committed 2.0.4 version and then I&apos;ll feedback you, I hope soon.&lt;br/&gt;
Thank you very much for your attention and job.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Fabio.&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13327069">PDFBOX-4955</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12816014" name="Signed-Document-1.pdf" size="967273" author="Shinobi75" created="Mon, 4 Jul 2016 10:26:57 +0000"/>
                            <attachment id="12816016" name="Signed-Document-2.pdf" size="177525" author="Shinobi75" created="Mon, 4 Jul 2016 10:27:51 +0000"/>
                            <attachment id="12828093" name="Signed-Document-3.flatten.20160912.pdf" size="248845" author="msahyoun" created="Mon, 12 Sep 2016 19:38:45 +0000"/>
                            <attachment id="12821307" name="Signed-Document-3.pdf" size="352531" author="Shinobi75" created="Mon, 1 Aug 2016 11:07:21 +0000"/>
                            <attachment id="12821308" name="Signed-Document-4.pdf" size="220563" author="Shinobi75" created="Mon, 1 Aug 2016 11:07:40 +0000"/>
                            <attachment id="12816015" name="Signed-Document-Flattened-1.pdf" size="3418429" author="Shinobi75" created="Mon, 4 Jul 2016 10:27:32 +0000"/>
                            <attachment id="12816017" name="Signed-Document-Flattened-2.pdf" size="2626097" author="Shinobi75" created="Mon, 4 Jul 2016 10:28:15 +0000"/>
                            <attachment id="12821309" name="Signed-Document-Flattened-3+4.pdf" size="2834427" author="Shinobi75" created="Mon, 1 Aug 2016 11:07:56 +0000"/>
                            <attachment id="12812836" name="Signed-Document-Flattened.pdf" size="3418579" author="Shinobi75" created="Thu, 23 Jun 2016 14:28:41 +0000"/>
                            <attachment id="12829877" name="Signed-Document-Image-Printed.pdf" size="11937096" author="Shinobi75" created="Thu, 22 Sep 2016 15:53:18 +0000"/>
                            <attachment id="12812835" name="Signed-Document.pdf" size="967273" author="Shinobi75" created="Thu, 23 Jun 2016 14:27:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zz2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>