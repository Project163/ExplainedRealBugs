<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:03:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3165] Tab characters in PDTextField cause error when using .flatten()</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3165</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;pdf form gets filled in, then call I call .flatten(fields, true) which last I knew was undocumented, but anyway I needed the refreshAppearences for pdfViewers that don&apos;t support acroForms like pdf.js&lt;/p&gt;

&lt;p&gt;If a tab character some how gets entered into the PDTextField it chokes. I am worried other somewhat common characters might have similar issues, but haven&apos;t experimented so far.&lt;/p&gt;

&lt;p&gt;Using RC2 of pdfBox and fontBox. and fonts in pdfForm elements were all set to Arial.&lt;/p&gt;

&lt;p&gt;Relavent stacktrace:&lt;/p&gt;

&lt;p&gt;U+0009 is not available in this font&apos;s Encoding. Stacktrace follows:&lt;br/&gt;
java.lang.IllegalArgumentException: U+0009 is not available in this font&apos;s Encoding&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.encode(PDTrueTypeFont.java:358)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:283)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.font.PDFont.getStringWidth(PDFont.java:312)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PlainTextFormatter.format(PlainTextFormatter.java:193)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.AppearanceGeneratorHelper.insertGeneratedAppearance(AppearanceGeneratorHelper.java:373)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.AppearanceGeneratorHelper.setAppearanceContent(AppearanceGeneratorHelper.java:237)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.AppearanceGeneratorHelper.setAppearanceValue(AppearanceGeneratorHelper.java:144)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PDTextField.constructAppearances(PDTextField.java:263)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PDAcroForm.refreshAppearances(PDAcroForm.java:287)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.interactive.form.PDAcroForm.flatten(PDAcroForm.java:211)&lt;/p&gt;</description>
                <environment>Ubuntu, JDK7</environment>
        <key id="12921803">PDFBOX-3165</key>
            <summary>Tab characters in PDTextField cause error when using .flatten()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="msahyoun">Maruan Sahyoun</assignee>
                                    <reporter username="aeischeid">Aaron Eischeid</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Dec 2015 22:34:48 +0000</created>
                <updated>Sat, 25 Mar 2017 18:12:56 +0000</updated>
                            <resolved>Thu, 1 Sep 2016 17:43:26 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.3</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>AcroForm</component>
                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15056871" author="msahyoun" created="Mon, 14 Dec 2015 22:43:28 +0000"  >&lt;p&gt;That&apos;s a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3161&quot; title=&quot;No glyph for U+0009 in font ArialUnicodeMS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3161&quot;&gt;&lt;del&gt;PDFBOX-3161&lt;/del&gt;&lt;/a&gt;. What we might be able to do is ignore (some) special characters. Would you have a sample form to replicate the issue?&lt;/p&gt;</comment>
                            <comment id="15056904" author="aeischeid" created="Mon, 14 Dec 2015 23:01:49 +0000"  >&lt;p&gt;I do have a form that replicates but probably can&apos;t upload that one, I would suspect any form with a PDTextField with arial font setting would reproduce though. If you like I can try to spit a simple one out tomorrow. I would think ignoring at least these invisible characters might be good. In our case they are getting in there via users copy and pasting, and it is not at all clear they are tab characters rather than spaces.&lt;/p&gt;

&lt;p&gt;For a textField that isn&apos;t multi line substituting a space for a tab seems like it might work as well.&lt;/p&gt;</comment>
                            <comment id="15056914" author="msahyoun" created="Mon, 14 Dec 2015 23:05:38 +0000"  >&lt;p&gt;If you could provide a simple one that would be fine. &lt;/p&gt;</comment>
                            <comment id="15061122" author="aeischeid" created="Wed, 16 Dec 2015 23:28:05 +0000"  >&lt;p&gt;I haven&apos;t had time to test this file specifically, but it is just a very stripped down version of the one we were having the issue with&lt;/p&gt;</comment>
                            <comment id="15061139" author="aeischeid" created="Wed, 16 Dec 2015 23:36:34 +0000"  >&lt;p&gt;is there a specific way maybe to use a font file that has more characters in it? What we are doing is using Libre Office to work on the doc and export to PDF. I have noticed is that if we do this on a Ubuntu machine then after PdfBox handles the PDF some windows users will see black circles instead of letters. That problem goes away if we do the export from a windows machine. The error we encountered with the missing tab char was on a PDF that had been generated on a windows machine. &lt;/p&gt;

&lt;p&gt;So the question is is there a way to tell Libre Office or whatever PDF generating thing to use/declare/embed a font that has a broader set of characters? Or should I use a different font setting in the form elements? Arial as a font choice feels pretty safe really. If that one doesn&apos;t work it is hard to imagine what would do better.&lt;/p&gt;</comment>
                            <comment id="15456095" author="jira-bot" created="Thu, 1 Sep 2016 17:35:48 +0000"  >&lt;p&gt;Commit 1758817 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1758817&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1758817&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3165&quot; title=&quot;Tab characters in PDTextField cause error when using .flatten()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3165&quot;&gt;&lt;del&gt;PDFBOX-3165&lt;/del&gt;&lt;/a&gt;: replace Tab character with space. Proper handling to follow in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3469&quot; title=&quot;Improve handling of tab character when setting AcroForm field values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3469&quot;&gt;PDFBOX-3469&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15456105" author="jira-bot" created="Thu, 1 Sep 2016 17:38:55 +0000"  >&lt;p&gt;Commit 1758818 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1758818&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1758818&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3165&quot; title=&quot;Tab characters in PDTextField cause error when using .flatten()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3165&quot;&gt;&lt;del&gt;PDFBOX-3165&lt;/del&gt;&lt;/a&gt;: replace Tab character with space. Proper handling to follow in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3469&quot; title=&quot;Improve handling of tab character when setting AcroForm field values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3469&quot;&gt;PDFBOX-3469&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15456120" author="msahyoun" created="Thu, 1 Sep 2016 17:43:27 +0000"  >&lt;p&gt;fixed by replacing tab with space. As Acrobat handles tab characters by jumping to specific positions that should be improved. See &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3469&quot; title=&quot;Improve handling of tab character when setting AcroForm field values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3469&quot;&gt;PDFBOX-3469&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12778131" name="Sample_Template.pdf" size="26261" author="aeischeid" created="Wed, 16 Dec 2015 23:28:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pvqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>