<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:55:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2021] PDFPrinter problem with landscape and rotated pages </title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2021</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;PDFPrinter does not correctly print landscape or rotated pages, there is code which attempts to do both these things, however the results is wrong. There are three main issues:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the centering code does*not* center the image correctly because it assumes that imageableArea is the Graphics2D origin, but it is actually the page margin size and the Graphics2D origin remains the physical top-left edge of the paper.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;auto portrait/landcape is actually sets the imageableArea, so it is actually setting the page margins, instead of the Graphics2D origin. This is actually overwriting the user&apos;s desired margins as well as placing the image incorrectly on the page.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the Page dictionary &quot;Rotate&quot; key is not taken into account, so rotated pages appear incorrectly.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12707290">PDFBOX-2021</key>
            <summary>PDFPrinter problem with landscape and rotated pages </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jahewson">John Hewson</assignee>
                                    <reporter username="jahewson">John Hewson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Apr 2014 22:59:36 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:34 +0000</updated>
                            <resolved>Sat, 12 Apr 2014 05:49:50 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13963577" author="jahewson" created="Tue, 8 Apr 2014 23:01:57 +0000"  >&lt;p&gt;Attached a sample file.&lt;/p&gt;</comment>
                            <comment id="13963584" author="jahewson" created="Tue, 8 Apr 2014 23:04:45 +0000"  >&lt;p&gt;Fixed in revision 1585861, I also added options to allow the user to choose the page scaling mode and orientation as well as setting custom paper sizes.&lt;/p&gt;</comment>
                            <comment id="13963861" author="tilman" created="Wed, 9 Apr 2014 06:17:05 +0000"  >&lt;p&gt;The rendering of the landscape test of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-758&quot; title=&quot;Rotated images aren&amp;#39;t placed and rendered correctly while converting PDF pages to images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-758&quot;&gt;&lt;del&gt;PDFBOX-758&lt;/del&gt;&lt;/a&gt; now comes out empty &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Same for the files of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-427&quot; title=&quot;ArrayIndexOutOfBoundsException in drawString&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-427&quot;&gt;&lt;del&gt;PDFBOX-427&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1435&quot; title=&quot;text is obscured by the Images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1435&quot;&gt;&lt;del&gt;PDFBOX-1435&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1693&quot; title=&quot;The images have rotated 90 degrees&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1693&quot;&gt;&lt;del&gt;PDFBOX-1693&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Update: with the diff tests I do, some of the images mentioned above aren&apos;t empty, but moved to the left or to the right. Maybe it depends on the dpi. The tests above were done at 300dpi, the diff tests are done at 96dpi.&lt;/p&gt;</comment>
                            <comment id="13964377" author="jahewson" created="Wed, 9 Apr 2014 17:00:16 +0000"  >&lt;p&gt;Hi Tilman, thanks for spotting this, I had expected &lt;em&gt;something&lt;/em&gt; to not quite work, as page rotation is handled with great inconsistency throughout the various rendering APIs provided by PDFBox. It might be the case that image rendering and printing need slightly different API entry points into PDFRenderer/PageDrawer. I&apos;ll push out a fix for PDFRenderer in the next day or so.&lt;/p&gt;</comment>
                            <comment id="13964678" author="tilman" created="Wed, 9 Apr 2014 21:18:20 +0000"  >&lt;p&gt;Joseph wrote on the dev list:&lt;br/&gt;
I&apos;m using pdfbox 2.0.0 to print pdfs of size 4x6&quot; to label printers.&lt;br/&gt;
On windows 7 I try to print a 2 page pdf. It prints successfully however the second page is completely black when it should be a table with some text.&lt;/p&gt;

&lt;p&gt;My answer follows in the next comment&lt;/p&gt;</comment>
                            <comment id="13964680" author="tilman" created="Wed, 9 Apr 2014 21:21:47 +0000"  >&lt;p&gt;I was able to reproduce it with the app and using the PDFReader parameter and then print from the GUI. I get the effect both  when printing to a printer (there goes the toner...) and printing to a PDF driver. &lt;/p&gt;

&lt;p&gt;(...)&lt;/p&gt;

&lt;p&gt;I did some debugging. I found out that I also got the &quot;mostly black&quot; image by doing a renderPageToGraphics() into the graphics context of a BufferedImage and save that one. This means that it is not a printer problem.&lt;/p&gt;

&lt;p&gt;The solution:&lt;/p&gt;

&lt;p&gt;g.setBackground(Color.WHITE);&lt;/p&gt;

&lt;p&gt;was missing in PDFPrintable, or in a later method. If I use this, I get a clean image. And also a clean print. I fixed this in rev 1586149. I suspected the line should rather go to the PDFRenderer but I&apos;m going to sleep.&lt;/p&gt;</comment>
                            <comment id="13964786" author="jahewson" created="Wed, 9 Apr 2014 23:06:33 +0000"  >&lt;p&gt;I get perfect printing on OS X with or without this fix, so I suspect that the JDK on Windows is still the root cause. The fix for PDFPrintable looks good, I don&apos;t think that the call to setBackground should be in PDFRenderer as renderPageToGraphics needs to be able to render onto a Graphics2D which has alpha support. I think we&apos;ve nailed it.&lt;/p&gt;</comment>
                            <comment id="13965023" author="tilman" created="Thu, 10 Apr 2014 05:33:58 +0000"  >&lt;p&gt;Uhm - you have set this to resolved, but what about the regressions? Or are you doing these in a separate issue?&lt;/p&gt;</comment>
                            <comment id="13965152" author="jahewson" created="Thu, 10 Apr 2014 09:11:41 +0000"  >&lt;p&gt;Good point...&lt;/p&gt;</comment>
                            <comment id="13965576" author="tilman" created="Thu, 10 Apr 2014 17:33:42 +0000"  >&lt;p&gt;To get rid of the regressions, I made a change in rev 1586380 so that the printing uses the new code, the &quot;normal&quot; rendering uses &quot;the old code&quot;. This way the &quot;normal&quot; rendering (with renderPage)  will be as before, and the printing will use the new code (renderPageToGraphics). I assume that sooner or later, both &quot;leaf&quot; methods will be merged.&lt;/p&gt;</comment>
                            <comment id="13965795" author="jahewson" created="Thu, 10 Apr 2014 20:15:04 +0000"  >&lt;p&gt;I fixed the underlying cause of the regression in revision 1586460, both printing and rendering to a bitmap should now work with the same code.&lt;/p&gt;</comment>
                            <comment id="13966225" author="tilman" created="Fri, 11 Apr 2014 04:37:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-758&quot; title=&quot;Rotated images aren&amp;#39;t placed and rendered correctly while converting PDF pages to images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-758&quot;&gt;&lt;del&gt;PDFBOX-758&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-427&quot; title=&quot;ArrayIndexOutOfBoundsException in drawString&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-427&quot;&gt;&lt;del&gt;PDFBOX-427&lt;/del&gt;&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1435&quot; title=&quot;text is obscured by the Images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1435&quot;&gt;&lt;del&gt;PDFBOX-1435&lt;/del&gt;&lt;/a&gt; now OK; but &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1693&quot; title=&quot;The images have rotated 90 degrees&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1693&quot;&gt;&lt;del&gt;PDFBOX-1693&lt;/del&gt;&lt;/a&gt; is still empty.&lt;/p&gt;</comment>
                            <comment id="13966688" author="tilman" created="Fri, 11 Apr 2014 16:09:39 +0000"  >&lt;p&gt;My diff tests show that the files that come out right are shifted by maybe 1 pixel. I wouldn&apos;t count this as a bug, one could as well argue that the previous rendering was wrong &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I took some time to look at the old and the new code. The old code does translate, rotate, scale. The new code does scale, translate, rotate. The translation values are different in the new code but they are adjusted to the scale factor so that is OK. However the translations are on the wrong axis. The old code is weird (my understanding is that two translations would be needed, see &lt;a href=&quot;http://mindprod.com/jgloss/affinetransform.html#ROTATING&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;), 90 and 270 rotations are translated on different axes, but it works (I suspect that there is more done elsewhere in the code). Thus, the new code must also be weird &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I have test files for 90 and for 270, and both render correctly after the change. I created a test file for 180 and it rendered correctly without a change.&lt;/p&gt;</comment>
                            <comment id="13966696" author="tilman" created="Fri, 11 Apr 2014 16:13:02 +0000"  >&lt;p&gt;Did this in rev 1586706.&lt;/p&gt;</comment>
                            <comment id="13967414" author="tilman" created="Sat, 12 Apr 2014 05:49:41 +0000"  >&lt;p&gt;Reopen to set to resolved, not to closed.&lt;/p&gt;</comment>
                            <comment id="13967460" author="jahewson" created="Sat, 12 Apr 2014 09:58:53 +0000"  >&lt;p&gt;Looks good.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12659278">PDFBOX-1670</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12639290" name="usps.pdf" size="221267" author="jahewson" created="Tue, 8 Apr 2014 23:01:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385613</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ufi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385878</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>