<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:12:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5401] A carefully crafted pdf can trigger an infinite loop while parsing</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5401</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Hi, I found a crafted pdf that can trigger an infinite loop while parsing using PDFBOX. I have tested on the latest commit of PDFBOX on Github.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This bug can be triggered by the following code.&lt;/p&gt;

&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;File ff = new File(&quot;path/to/the/sample&quot;);&lt;/p&gt;

&lt;p&gt;PDDocument document = Loader.loadPDF(ff);&lt;/p&gt;

&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I found that the root cause of this infinite loop resides in the while-loop at line 321 of&#160; &lt;a href=&quot;#L321&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;COSParse.java&lt;/a&gt;.]. When parsing the provided PDF files, the variable $prev is never changed during this loop.&lt;/p&gt;</description>
                <environment>Mac OS 12.1 &amp;amp; Ubuntu Linux 16.04 (4.15.0-163-generic)</environment>
        <key id="13435822">PDFBOX-5401</key>
            <summary>A carefully crafted pdf can trigger an infinite loop while parsing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="Han0nly">Xiaohan Zhang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Mar 2022 12:52:05 +0000</created>
                <updated>Thu, 21 Apr 2022 15:38:40 +0000</updated>
                            <resolved>Mon, 28 Mar 2022 06:22:26 +0000</resolved>
                                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.26</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Parsing</component>
                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17512397" author="tallison@mitre.org" created="Fri, 25 Mar 2022 14:07:16 +0000"  >&lt;p&gt;I confirmed this behavior with the last 2.0.26-SNAPSHOT I used for regression tests (from earlier this week?) with 3 of the 4 files (&lt;tt&gt;bda2803...&lt;/tt&gt; does not cause problems for me).&lt;/p&gt;</comment>
                            <comment id="17512432" author="JIRAUSER287118" created="Fri, 25 Mar 2022 15:19:09 +0000"  >&lt;p&gt;Hi, I didn&apos;t test these samples on PDFBOX 2.0. I only tested them on &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3&quot; title=&quot;Migrate FontBox sources to Apache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3&quot;&gt;&lt;del&gt;PDFBOX-3&lt;/del&gt;&lt;/a&gt;.0.0-alpha2 release and also the latest commit of trunk branch.&lt;/p&gt;</comment>
                            <comment id="17512453" author="tilman" created="Fri, 25 Mar 2022 15:53:59 +0000"  >&lt;p&gt;Maybe we should add both positions to the set? Or have two sets?&lt;/p&gt;</comment>
                            <comment id="17512474" author="tallison@mitre.org" created="Fri, 25 Mar 2022 16:38:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;Hi, I didn&apos;t test these samples on PDFBOX 2.0&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry, my comment above was a finding, not a question.&lt;/p&gt;</comment>
                            <comment id="17512489" author="mkl" created="Fri, 25 Mar 2022 17:24:08 +0000"  >&lt;p&gt;Indeed, there is an inconsistency in &lt;tt&gt;org.apache.pdfbox.pdfparser.COSParser.parseXref(long)&lt;/tt&gt;, in the &lt;tt&gt;prevSet&lt;/tt&gt; the &lt;em&gt;actual&lt;/em&gt; start positions of the cross reference tables are stored but the tests to prevent recursions are done by checking the &lt;em&gt;claimed&lt;/em&gt; start positions (the &lt;b&gt;Prev&lt;/b&gt; values).&lt;/p&gt;</comment>
                            <comment id="17513168" author="jira-bot" created="Mon, 28 Mar 2022 06:20:00 +0000"  >&lt;p&gt;Commit 1899278 from lehmi@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1899278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1899278&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5401&quot; title=&quot;A carefully crafted pdf can trigger an infinite loop while parsing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5401&quot;&gt;&lt;del&gt;PDFBOX-5401&lt;/del&gt;&lt;/a&gt;: save expected prev position as well as proposed by Tilman Hausherr&lt;/p&gt;</comment>
                            <comment id="17513169" author="jira-bot" created="Mon, 28 Mar 2022 06:20:12 +0000"  >&lt;p&gt;Commit 1899279 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1899279&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1899279&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5401&quot; title=&quot;A carefully crafted pdf can trigger an infinite loop while parsing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5401&quot;&gt;&lt;del&gt;PDFBOX-5401&lt;/del&gt;&lt;/a&gt;: save expected prev position as well as proposed by Tilman Hausherr&lt;/p&gt;</comment>
                            <comment id="17513171" author="lehmi" created="Mon, 28 Mar 2022 06:22:26 +0000"  >&lt;p&gt;I&apos;ve followed &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; proposal and added the expected prev position to the set as well.&lt;/p&gt;

&lt;p&gt;Now the loop protection works as expected and the infinite loop vanished&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Han0nly&quot; class=&quot;user-hover&quot; rel=&quot;Han0nly&quot;&gt;Han0nly&lt;/a&gt; thanks for reporting this&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13041607" name="verified.zip" size="1691" author="Han0nly" created="Fri, 25 Mar 2022 12:44:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10tv4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>