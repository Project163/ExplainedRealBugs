<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:13:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5470] PDActionEmbeddedGoTo does not accept a Destination with a page number or string</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5470</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;According to Table 202 of the PDF 32000-1:2008 specs, the P key under the Target Directory of an Embedded Go-To Action is an &quot;integer or byte string&quot;, with the following description &quot;If the value is an integer, it specifies the page number (zero-based) in the current document containing the file attachment annotation. If the value is a string, it specifies a named destination in the current document that provides the page number of the file attachment annotation.&quot;&lt;/p&gt;


&lt;p&gt;However, the current implementation of PDActionEmbeddedGoTo does not accept using the setPageNumber command by itself when setting the Destination dictionary, and throws an IllegalArgumentException unless setPage is used to set the target page as a PDPage object, which is not specified in the documentation. Also, there doesn&apos;t seem to be a way to specify the target as a string, if a named destination is to be used.&lt;br/&gt;
This applies to both the Destination dictionary and the Target Directory, but when creating such a link in Acrobat the Target Directory does not contain a P value at all, only the Destination dictionary does, and in the form of a number. This should be possible to replicate using PDFBox.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Attached are a sample file with a pre-existing link and a PDF attachment, the code trying to set that link&apos;s action to open the attachment on page 3, and the resulting error message stack trace.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13469801">PDFBOX-5470</key>
            <summary>PDActionEmbeddedGoTo does not accept a Destination with a page number or string</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="giladd">Gilad Denneboom</reporter>
                        <labels>
                    </labels>
                <created>Sun, 3 Jul 2022 09:50:52 +0000</created>
                <updated>Thu, 29 Sep 2022 17:57:14 +0000</updated>
                            <resolved>Wed, 6 Jul 2022 03:43:25 +0000</resolved>
                                    <version>2.0.26</version>
                                    <fixVersion>2.0.27</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>AcroForm</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17561850" author="jira-bot" created="Sun, 3 Jul 2022 11:12:58 +0000"  >&lt;p&gt;Commit 1902426 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1902426&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1902426&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5470&quot; title=&quot;PDActionEmbeddedGoTo does not accept a Destination with a page number or string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5470&quot;&gt;&lt;del&gt;PDFBOX-5470&lt;/del&gt;&lt;/a&gt;: fix check of GoToE destination, as suggested by Gilad Denneboom&lt;/p&gt;</comment>
                            <comment id="17561851" author="jira-bot" created="Sun, 3 Jul 2022 11:13:18 +0000"  >&lt;p&gt;Commit 1902427 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1902427&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1902427&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5470&quot; title=&quot;PDActionEmbeddedGoTo does not accept a Destination with a page number or string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5470&quot;&gt;&lt;del&gt;PDFBOX-5470&lt;/del&gt;&lt;/a&gt;: fix check of GoToE destination, as suggested by Gilad Denneboom&lt;/p&gt;</comment>
                            <comment id="17561855" author="tilman" created="Sun, 3 Jul 2022 11:46:00 +0000"  >&lt;p&gt;Thanks, should work now, here&apos;s a snapshot&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.27-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.27-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I tried your code and it works that there is no exception. I wasn&apos;t able to click and that the 2nd page was displayed, but I have some &quot;strong&quot; security settings on my Adobe Reader and I don&apos;t want to change them.&lt;/p&gt;</comment>
                            <comment id="17561856" author="giladd" created="Sun, 3 Jul 2022 12:07:08 +0000"  >&lt;p&gt;Thanks a lot, Tilman! I updated the jar file in my project, and it&apos;s indeed not throwing an Exception any longer, but the link still doesn&apos;t work. I compared the A dictionary of a link created in Acrobat with that created using PDFBox (I used the PDF Debugger) and am not seeing any differences that would explain why this is happening.&lt;/p&gt;

&lt;p&gt;I attached the output created by the code, and the same file edited by Acrobat.&#160; Any insight would be welcome!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;PS. I added the following line to the code, just in case:&lt;/p&gt;

&lt;p&gt;dest.setTop(0);&lt;/p&gt;</comment>
                            <comment id="17561858" author="tilman" created="Sun, 3 Jul 2022 12:38:13 +0000"  >&lt;p&gt;The difference is that Adobe has encoded the name in UTF8 in the GoToE action and you didn&apos;t. You&apos;d have to because the name is in UTF8 in the Names/EmbeddedFiles/Names array. We don&apos;t support this. If you really need the original string, you&apos;d have to get the COSString object and then use this as a reference. (not sure if this will work at all)&lt;/p&gt;</comment>
                            <comment id="17561864" author="tilman" created="Sun, 3 Jul 2022 13:10:51 +0000"  >&lt;p&gt;It should work if you generate the EmbeddedFiles segment yourself.&lt;/p&gt;</comment>
                            <comment id="17561876" author="giladd" created="Sun, 3 Jul 2022 15:07:21 +0000"  >&lt;p&gt;Strange... Where do you see that&apos;s it&apos;s UTF8 encoded? And do you mean that if I created the attachments using PDFBox, instead of doing it in Acrobat, it would work? Could I extract them from the PDF as separate files, reset the EmbeddedFiles array, and then re-attach them?&lt;/p&gt;</comment>
                            <comment id="17561877" author="giladd" created="Sun, 3 Jul 2022 15:12:35 +0000"  >&lt;p&gt;I changed the setFilename line to:&lt;/p&gt;

&lt;p&gt;target.setFilename(new String(key.getBytes(), StandardCharsets.UTF_8));&lt;/p&gt;

&lt;p&gt;But the results are the same.&lt;/p&gt;</comment>
                            <comment id="17561878" author="tilman" created="Sun, 3 Jul 2022 15:12:37 +0000"  >&lt;p&gt;I saw it with PDFDebugger; yes; yes. (But I didn&apos;t test it myself)&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13046190/13046190_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17561879" author="tilman" created="Sun, 3 Jul 2022 15:13:12 +0000"  >&lt;p&gt;Oops, it&apos;s not UTF8, it&apos;s unicode.&lt;/p&gt;</comment>
                            <comment id="17561883" author="tilman" created="Sun, 3 Jul 2022 15:23:12 +0000"  >&lt;p&gt;&quot;target&quot; isn&apos;t the one that needs to be changed, it&apos;s the names in EmbeddedFiles that is to be changed. I&apos;ll see if I can do something.&lt;/p&gt;</comment>
                            <comment id="17561887" author="giladd" created="Sun, 3 Jul 2022 15:24:41 +0000"  >&lt;p&gt;Could it be the Zero Width No-Break Space (\uFEFF) character before the file-name, do you think?&lt;/p&gt;</comment>
                            <comment id="17561888" author="tilman" created="Sun, 3 Jul 2022 15:31:05 +0000"  >&lt;p&gt;I added this line&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
doc.getDocumentCatalog().getNames().getEmbeddedFiles().setNames(names);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and now it works, although it shows page 4 instead of page 2.&lt;/p&gt;</comment>
                            <comment id="17561889" author="giladd" created="Sun, 3 Jul 2022 15:31:13 +0000"  >&lt;p&gt;I added it manually and it converted the whole string to Unicode, but also inserted the space character twice, for some reason...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Code: target.setFilename(&quot;\uFEFF&quot; + key);&lt;/p&gt;

&lt;p&gt;Result:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13046192/13046192_image-2022-07-03-17-31-04-424.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17561890" author="giladd" created="Sun, 3 Jul 2022 15:33:26 +0000"  >&lt;p&gt;&amp;gt; and now it works, although it shows page 4 instead of page 2.&lt;/p&gt;

&lt;p&gt;That worked for me too! And yeah, it seems the page numbers start with -1, which is very odd. At least it works!&lt;/p&gt;</comment>
                            <comment id="17561938" author="giladd" created="Sun, 3 Jul 2022 20:27:09 +0000"  >&lt;p&gt;PS. I tested it in another file and there the page numbers were 0-based, as expected.&lt;/p&gt;</comment>
                            <comment id="17562938" author="tilman" created="Wed, 6 Jul 2022 03:43:25 +0000"  >&lt;p&gt;Setting this one to resolved. We should create a new issue about this page addressing problem if this can be reproduced reliably (I don&apos;t get a &quot;-1&quot;) but it jumps to the wrong page.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13139487">PDFBOX-4117</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13046184" name="EmbeddedActionTest-1.java" size="2734" author="giladd" created="Sun, 3 Jul 2022 09:50:29 +0000"/>
                            <attachment id="13046185" name="LinkTest.pdf" size="7796" author="giladd" created="Sun, 3 Jul 2022 09:48:49 +0000"/>
                            <attachment id="13046189" name="LinkTest_Acrobat.pdf" size="7844" author="giladd" created="Sun, 3 Jul 2022 12:06:05 +0000"/>
                            <attachment id="13046188" name="LinkTest_edited.pdf" size="9572" author="giladd" created="Sun, 3 Jul 2022 12:06:05 +0000"/>
                            <attachment id="13046186" name="StackTrace.txt" size="300" author="giladd" created="Sun, 3 Jul 2022 09:48:49 +0000"/>
                            <attachment id="13046191" name="image-2022-07-03-17-30-29-113.png" size="23799" author="giladd" created="Sun, 3 Jul 2022 15:30:29 +0000"/>
                            <attachment id="13046192" name="image-2022-07-03-17-31-04-424.png" size="23948" author="giladd" created="Sun, 3 Jul 2022 15:31:04 +0000"/>
                            <attachment id="13046190" name="screenshot-1.png" size="144001" author="tilman" created="Sun, 3 Jul 2022 15:12:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z16k74:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>