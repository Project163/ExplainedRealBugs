<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:01:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2946] Symbol glyphs not aligned</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2946</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Symbol glyphs not aligned in rendering&lt;/p&gt;</description>
                <environment>W7, JDK7</environment>
        <key id="12858711">PDFBOX-2946</key>
            <summary>Symbol glyphs not aligned</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Aug 2015 18:41:38 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:33 +0000</updated>
                            <resolved>Thu, 3 Sep 2015 06:31:40 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14711765" author="jahewson" created="Tue, 25 Aug 2015 18:47:16 +0000"  >&lt;p&gt;Eek. A glyph rendering bug... I thought we were done with those!&lt;/p&gt;</comment>
                            <comment id="14711845" author="tilman" created="Tue, 25 Aug 2015 19:45:11 +0000"  >&lt;p&gt;Surprisingly, the other two java based products have the same bug.&lt;/p&gt;</comment>
                            <comment id="14725624" author="tilman" created="Tue, 1 Sep 2015 16:04:38 +0000"  >&lt;p&gt;It&apos;s the leftsidebearing.&lt;/p&gt;

&lt;p&gt;I did have some suspicion because of the &quot;contradiction&quot; between leftsidebearing and the bbox (see table below) after reading the TT font specification but wasn&apos;t sure what to do. So I had a look at the ghostscript sources (base/ttfmain.c), because it displays the file correctly, and these guys are usually 10 years ahead of us &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-comment&quot;&gt;/*  Lets &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; X */&lt;/span&gt;
        {   &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; coord = (self-&amp;gt;bVertical ? 0 : sideBearing - subglyph.bbox.xMin);
            F26Dot6* x = pts-&amp;gt;org_x;
            onCurve = pts-&amp;gt;touch;
            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (onCurve &amp;lt; stop) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((flag = *onCurve++) &amp;amp; XSHORT) {
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (flag &amp;amp; SHORT_X_IS_POS)
                        coord += ttfReader__Byte(r);
                    &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
                    coord -= ttfReader__Byte(r);
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!(flag &amp;amp; NEXT_X_IS_ZERO))
                    coord += ttfReader__Short(r);
                *x++ = Scale_X(&amp;amp;exec-&amp;gt;metrics, coord);
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Our code for &quot;Lets do X&quot; is in GlyfSimpleDescript.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; x = 0;
        &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; y = 0;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; count; i++)
        {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((flags[i] &amp;amp; X_DUAL) != 0)
            {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((flags[i] &amp;amp; X_SHORT_VECTOR) != 0)
                {
                    x += (&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;) bais.readUnsignedByte();
                }
            }
            &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
            {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((flags[i] &amp;amp; X_SHORT_VECTOR) != 0)
                {
                    x += (&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;) -((&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;) bais.readUnsignedByte());
                }
                &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
                {
                    x += bais.readSignedShort();
                }
            }
            xCoordinates[i] = x;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The main difference is this line:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; coord = (self-&amp;gt;bVertical ? 0 : sideBearing - subglyph.bbox.xMin);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;some font data for the test file:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;leftSideBearing   boundingBox
bracelefttp: 420  [0.0,-167.0,490.0,1897.0]
braceleftmid: 28  [0.0,-166.0,490.0,1897.0]
braceleftbt: 420  [420.0,-167.0,910.0,1897.0]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;bracelefttp is the &quot;wrong&quot; one, drawing starts at 0 despire having a left side bearing of 420.&lt;/p&gt;

&lt;p&gt;(Btw fontforge &lt;del&gt;sucks&lt;/del&gt; is not helpful. It shows the (correct) path without showing the raw data leading to it).&lt;/p&gt;

&lt;p&gt;Proposed patch attached.&lt;/p&gt;</comment>
                            <comment id="14726572" author="jahewson" created="Wed, 2 Sep 2015 01:47:27 +0000"  >&lt;p&gt;Nice work. Patch looks good.&lt;/p&gt;</comment>
                            <comment id="14728568" author="jira-bot" created="Thu, 3 Sep 2015 06:29:36 +0000"  >&lt;p&gt;Commit 1700937 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1700937&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1700937&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2946&quot; title=&quot;Symbol glyphs not aligned&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2946&quot;&gt;&lt;del&gt;PDFBOX-2946&lt;/del&gt;&lt;/a&gt;: use left side bearing when rendering TT fonts&lt;/p&gt;</comment>
                            <comment id="14731989" author="jira-bot" created="Sat, 5 Sep 2015 14:22:12 +0000"  >&lt;p&gt;Commit 1701391 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1701391&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1701391&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2946&quot; title=&quot;Symbol glyphs not aligned&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2946&quot;&gt;&lt;del&gt;PDFBOX-2946&lt;/del&gt;&lt;/a&gt;: replace test file due to slightly changed rendering&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12753543" name="PDFJS-3599.pdf-1-bad.png" size="14600" author="tilman" created="Tue, 1 Sep 2015 15:53:53 +0000"/>
                            <attachment id="12753542" name="PDFJS-3599.pdf-1-good.png" size="14549" author="tilman" created="Tue, 1 Sep 2015 15:53:53 +0000"/>
                            <attachment id="12752285" name="PDFJS-3599_reduced.pdf" size="44098" author="tilman" created="Tue, 25 Aug 2015 18:42:13 +0000"/>
                            <attachment id="12752286" name="PDFJS-3599_reduced1.png" size="33304" author="tilman" created="Tue, 25 Aug 2015 18:42:13 +0000"/>
                            <attachment id="12753544" name="leftsidebearing.diff" size="4658" author="tilman" created="Tue, 1 Sep 2015 15:53:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jctj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>