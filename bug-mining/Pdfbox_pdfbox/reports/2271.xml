<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:09:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4581] Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4581</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;When trying to render certain PDFs on a swing Graphics object, I get the following Exception on Linux:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;AWT-EventQueue-0&quot;&lt;/span&gt; java.lang.InternalError: not implemented yet
at java.desktop/sun.java2d.xr.XRSurfaceData.getRaster(XRSurfaceData.java:91)
at java.desktop/sun.java2d.loops.Blit$AnyBlit.Blit(Blit.java:163)
at java.desktop/sun.java2d.pipe.DrawImage.blitSurfaceData(DrawImage.java:972)
at java.desktop/sun.java2d.pipe.DrawImage.renderImageCopy(DrawImage.java:583)
at java.desktop/sun.java2d.pipe.DrawImage.copyImage(DrawImage.java:67)
at java.desktop/sun.java2d.pipe.DrawImage.copyImage(DrawImage.java:1027)
at java.desktop/sun.java2d.pipe.ValidatePipe.copyImage(ValidatePipe.java:186)
at java.desktop/sun.java2d.SunGraphics2D.drawImage(SunGraphics2D.java:3415)
at java.desktop/sun.java2d.SunGraphics2D.drawImage(SunGraphics2D.java:3545)
at org.apache.pdfbox.rendering.PageDrawer.showTransparencyGroup(PageDrawer.java:1570)
at org.apache.pdfbox.contentstream.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.graphics.DrawObject.process(DrawObject.java:66)
at org.apache.pdfbox.contentstream.PDFStreamEngine.processOperator(PDFStreamEngine.java:869)
at org.apache.pdfbox.contentstream.PDFStreamEngine.processStreamOperators(PDFStreamEngine.java:505)
at org.apache.pdfbox.contentstream.PDFStreamEngine.processStream(PDFStreamEngine.java:479)
at org.apache.pdfbox.contentstream.PDFStreamEngine.processPage(PDFStreamEngine.java:152)
at org.apache.pdfbox.rendering.PageDrawer.drawPage(PageDrawer.java:265)
at org.apache.pdfbox.rendering.PDFRenderer.renderPageToGraphics(PDFRenderer.java:401)
at org.apache.pdfbox.rendering.PDFRenderer.renderPageToGraphics(PDFRenderer.java:370)
at org.apache.pdfbox.rendering.PDFRenderer.renderPageToGraphics(PDFRenderer.java:355)
at org.apache.pdfbox.rendering.PDFRenderer.renderPageToGraphics(PDFRenderer.java:342)
at de.abm.bug.App$PDFView.paint(App.java:29)
at java.desktop/javax.swing.JComponent.paintChildren(JComponent.java:907)
at java.desktop/javax.swing.JComponent.paint(JComponent.java:1083)
at java.desktop/javax.swing.JComponent.paintChildren(JComponent.java:907)
at java.desktop/javax.swing.JComponent.paint(JComponent.java:1083)
at java.desktop/javax.swing.JLayeredPane.paint(JLayeredPane.java:590)
at java.desktop/javax.swing.JComponent.paintChildren(JComponent.java:907)
at java.desktop/javax.swing.JComponent.paintToOffscreen(JComponent.java:5262)
at java.desktop/javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:246)
at java.desktop/javax.swing.RepaintManager.paint(RepaintManager.java:1323)
at java.desktop/javax.swing.JComponent.paint(JComponent.java:1060)
at java.desktop/java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:39)
at java.desktop/sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:78)
at java.desktop/sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:115)
at java.desktop/java.awt.Container.paint(Container.java:2002)
at java.desktop/java.awt.Window.paint(Window.java:3940)
at java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:876)
at java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:848)
at java.base/java.security.AccessController.doPrivileged(Native Method)
at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)
at java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:848)
at java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:823)
at java.desktop/javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:772)
at java.desktop/javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1890)
at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:313)
at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:770)
at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)
at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:715)
at java.base/java.security.AccessController.doPrivileged(Native Method)
at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)
at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:740)
at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)
at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)
at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)
at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)
at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This does not happen on Windows 10.&lt;/p&gt;

&lt;p&gt;The same exception came up in the comments to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2905&quot; title=&quot;Replace PDFReader with PDFDebugger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2905&quot;&gt;&lt;del&gt;PDFBOX-2905&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Seems to be the same problem as in &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-6689349&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JDK-6689349.&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;I reproduced this with PDFBox 2.0.13, 2.0.15 and 3.0.0-SNAPSHOT. And also with an oracle jdk.1.8.0_201, open jdk 1.8.0_212 and open jdk 11.0.1.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached an example maven project using the same PDF as in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2905&quot; title=&quot;Replace PDFReader with PDFDebugger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2905&quot;&gt;&lt;del&gt;PDFBOX-2905&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment>Ubuntu 18.04.2 LTS</environment>
        <key id="13241652">PDFBOX-4581</key>
            <summary>Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="jbuschtoens">Jan Buscht&#246;ns</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Jun 2019 07:01:50 +0000</created>
                <updated>Tue, 30 Jun 2020 06:13:26 +0000</updated>
                            <resolved>Fri, 12 Jul 2019 17:36:50 +0000</resolved>
                                    <version>2.0.15</version>
                                    <fixVersion>2.0.17</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16874464" author="tilman" created="Thu, 27 Jun 2019 19:50:33 +0000"  >&lt;p&gt;I have updated the related JDK issue. Does this problem also happen when running PDFDebugger on Ubuntu, or only when updating to swing?&lt;/p&gt;

&lt;p&gt;There isn&apos;t much we can do, we could catch the exception and then the transparency group would simply not appear.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16874746" author="jbuschtoens" created="Fri, 28 Jun 2019 07:48:19 +0000"  >&lt;p&gt;I tried opening the PDF in PDFDebugger and there is no problem. Does PDFDebugger render into a BufferedImage?&lt;/p&gt;

&lt;p&gt;In my application, drawing into a BufferedImage and then drawing the buffered image on to swing is a tested workaround. I assume that&apos;s not the most efficient way to in a paint method. But I probaly should change the code to prerender the PDF in to a BufferedImage once (or every time the size/dpi changes) and then just use that BufferedImage in the paint method. In fact, there already is an option in my application to do something like this, it&apos;s just very broken.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if it&apos;s ever a good idea to render a PDF directly in a swing Graphics object instead of prerendering it.&lt;/p&gt;

&lt;p&gt;In my application I currently use a different PDF renderer. That one doesn&apos;t handle transparency correct, either. It&apos;s drawn, but wrong. I&apos;m not aware that any user ever complained or noticed. I don&apos;t think it&apos;s something that&apos;s used very much for certain types of documents. Not seeing the transparency group would probably be much better than an exception.&lt;/p&gt;</comment>
                            <comment id="16874996" author="tilman" created="Fri, 28 Jun 2019 15:26:15 +0000"  >&lt;p&gt;Yes PDFDebugger renders into a BufferedImage.&lt;/p&gt;


&lt;blockquote&gt;
&lt;p&gt;In my application I currently use a different PDF renderer.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Which one?&lt;/p&gt;

&lt;p&gt;Transparency groups are very difficult and it took us many years to get them mostly right (&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3000&quot; title=&quot;Transparency Group issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3000&quot;&gt;&lt;del&gt;PDFBOX-3000&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;


&lt;p&gt;I could catch the exception just so that you can see how it looks.&lt;/p&gt;

&lt;p&gt;In the meantime, I was asked to provide a stand alone case. Could you please run this test code on your machine and tell if the error occurs?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CompositeTest
{
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; JPanel getTestPanel()
    {
        JPanel panel = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JPanel()
        {
            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void paintComponent(Graphics g)
            {
                g.setColor(Color.white);
                g.fillRect(0, 0, getWidth(), getHeight());
                BufferedImage bim = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedImage(getWidth() / 2, getHeight() / 2, BufferedImage.TYPE_INT_ARGB);
                drawFlag(bim);
                Graphics2D g2d = (Graphics2D) g;
                g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC));
                g2d.drawImage(bim, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, getWidth() / 4, getHeight() / 4);
            }

            &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void drawFlag(BufferedImage bim)
            {
                Graphics2D g = (Graphics2D) bim.getGraphics();
                g.setColor(Color.black);
                g.fillRect(0, 0, bim.getWidth(), bim.getHeight() / 3 + 2);
                g.setColor(Color.red);
                g.fillRect(0, bim.getHeight() / 3, bim.getWidth(), bim.getHeight() / 3 + 2);
                g.setColor(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Color(0xFFD700));
                g.fillRect(0, bim.getHeight() / 3 * 2, bim.getWidth(), bim.getHeight() / 3 + 2);
                g.dispose();
            }
        };
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; panel;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
    {
        SwingUtilities.invokeLater(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt;()
        {
            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run()
            {
                JFrame frame = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JFrame();
                frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                frame.add(getTestPanel());
                frame.pack();
                frame.setSize(600, 600);
                Dimension paneSize = frame.getSize();
                Dimension screenSize = frame.getToolkit().getScreenSize();
                frame.setLocation((screenSize.width - paneSize.width) / 2, (screenSize.height - paneSize.height) / 2);
                frame.setTitle(&lt;span class=&quot;code-quote&quot;&gt;&quot;Test&quot;&lt;/span&gt;);
                frame.setVisible(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
            }
        });
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;My initial code was drawing a cross in some arbitrary color, but then I realized that it might be some evil symbol that I haven&apos;t heard about. So now it draws a German flag. This can easily be changed into e.g. a French flag or an Italian flag.&lt;/p&gt;</comment>
                            <comment id="16875984" author="jbuschtoens" created="Mon, 1 Jul 2019 07:18:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;Which one?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That one: &lt;a href=&quot;https://www.intarsys.de/pdf-produkte/jpod.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.intarsys.de/pdf-produkte/jpod.&lt;/a&gt; Most of our applications are already switched to PDFBox because it&apos;s being actively maintained.&lt;/p&gt;

&lt;p&gt;Your example code did not reproduce the error. However, the following does:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CompositeTest2
{
&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; JPanel getTestPanel()
&#160;&#160;&#160; {
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JPanel panel = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JPanel()
&#160;&#160;&#160;&#160;&#160;&#160;&#160; {
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; @Override
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void paintComponent(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Graphics g)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Graphics2D gfx = (Graphics2D) g;

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-comment&quot;&gt;//This next line of code sets the compositing rule.
&lt;/span&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-comment&quot;&gt;//If &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; line is commented out, the program will
&lt;/span&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-comment&quot;&gt;//run normally.
&lt;/span&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Composite composite = (srcColorModel, dstColorModel, hints) -&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; gfx.setComposite(composite);

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; gfx.setColor(Color.RED);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; gfx.fillRect(4, 4, 10, 10);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }
&#160;&#160;&#160;&#160;&#160;&#160;&#160; };
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; panel;
&#160;&#160;&#160; }

&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
&#160;&#160;&#160; {
&#160;&#160;&#160;&#160;&#160;&#160;&#160; SwingUtilities.invokeLater(() -&amp;gt; {
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JFrame frame = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JFrame();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; frame.add(getTestPanel());
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; frame.pack();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; frame.setSize(600, 600);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Dimension paneSize = frame.getSize();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Dimension screenSize = frame.getToolkit().getScreenSize();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; frame.setLocation((screenSize.width - paneSize.width) / 2, (screenSize.height - paneSize.height) / 2);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; frame.setTitle(&lt;span class=&quot;code-quote&quot;&gt;&quot;Test&quot;&lt;/span&gt;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; frame.setVisible(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160; });
&#160;&#160;&#160; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The difference is in the Composite that is being set.&lt;/p&gt;</comment>
                            <comment id="16875993" author="tilman" created="Mon, 1 Jul 2019 08:00:00 +0000"  >&lt;p&gt;That one brings an NPE on windows &#128550;&lt;/p&gt;
</comment>
                            <comment id="16876003" author="jbuschtoens" created="Mon, 1 Jul 2019 08:20:03 +0000"  >&lt;p&gt;That seems reasonable. I just copy pasted the code from the original &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-6689349&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JDK-6689349 &lt;/a&gt;report and added an implementaion of the custom Composite. But I didn&apos;t bother to implement anything, the method just returns null instead of a non-null CompositeContext. I&apos;m not sure what a CompositeContext even is or how to create one. But what if we try an empty interface implementation again?&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Composite composite = (srcColorModel, dstColorModel, hints) -&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CompositeContext() {
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; @Override
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void dispose() {
&#160; &#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; @Override
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void compose(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Raster src, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Raster dstIn, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; WritableRaster dstOut) {
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; };
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; g2d.setComposite(composite);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That produces the same error on linux, but maybe it doesn&apos;t produce an NPE on windows?&lt;/p&gt;</comment>
                            <comment id="16876291" author="tilman" created="Mon, 1 Jul 2019 15:51:57 +0000"  >&lt;p&gt;Thank you, that one works on windows. I&apos;ll have added it to the jdk issue. They have set a target to 14.&lt;/p&gt;

&lt;p&gt;I wonder if it is possible at all to solve? My understanding is that the missing part is about reading pixels from the output device. Does the X11 protocol support this at all?&lt;/p&gt;</comment>
                            <comment id="16877961" author="jira-bot" created="Wed, 3 Jul 2019 16:28:23 +0000"  >&lt;p&gt;Commit 1862489 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862489&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4581&quot; title=&quot;Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4581&quot;&gt;&lt;del&gt;PDFBOX-4581&lt;/del&gt;&lt;/a&gt;: catch InternalError&lt;/p&gt;</comment>
                            <comment id="16878036" author="tilman" created="Wed, 3 Jul 2019 17:54:41 +0000"  >&lt;p&gt;Please try the latest 2.0 snapshot and run with a file that has transparencies. It should recover from the exception but it will probably look bad.&lt;/p&gt;</comment>
                            <comment id="16878393" author="jbuschtoens" created="Thu, 4 Jul 2019 07:26:18 +0000"  >&lt;p&gt;The transparent elements (e.g. shadows) are missing, but it looks fine otherwise. I&apos;ve also problems that are probably due to changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4583&quot; title=&quot;Drawing only a portion of a PDF (Graphics.clip is ignored/overwritten)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4583&quot;&gt;PDFBOX-4583&lt;/a&gt; where only some of the PDF is being drawn, depending on where I position the PDF.&lt;/p&gt;</comment>
                            <comment id="16883510" author="tilman" created="Fri, 12 Jul 2019 04:06:05 +0000"  >&lt;p&gt;Bad news - they have removed the &quot;target 14&quot; to &quot;tbd&quot; which seems like &quot;never&quot; to me.&lt;/p&gt;</comment>
                            <comment id="16883511" author="jira-bot" created="Fri, 12 Jul 2019 04:09:24 +0000"  >&lt;p&gt;Commit 1862944 from Tilman Hausherr in branch &apos;pdfbox/branches/issue4569&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862944&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862944&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4581&quot; title=&quot;Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4581&quot;&gt;&lt;del&gt;PDFBOX-4581&lt;/del&gt;&lt;/a&gt;: catch InternalError&lt;/p&gt;</comment>
                            <comment id="16883512" author="jira-bot" created="Fri, 12 Jul 2019 04:09:29 +0000"  >&lt;p&gt;Commit 1862945 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862945&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862945&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4581&quot; title=&quot;Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4581&quot;&gt;&lt;del&gt;PDFBOX-4581&lt;/del&gt;&lt;/a&gt;: catch InternalError&lt;/p&gt;</comment>
                            <comment id="16883513" author="jira-bot" created="Fri, 12 Jul 2019 04:09:34 +0000"  >&lt;p&gt;Commit 1862946 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862946&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862946&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4581&quot; title=&quot;Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4581&quot;&gt;&lt;del&gt;PDFBOX-4581&lt;/del&gt;&lt;/a&gt;: catch InternalError&lt;/p&gt;</comment>
                            <comment id="16883514" author="jira-bot" created="Fri, 12 Jul 2019 04:10:40 +0000"  >&lt;p&gt;Commit 1862947 from Tilman Hausherr in branch &apos;pdfbox/branches/issue4569&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862947&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862947&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4581&quot; title=&quot;Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4581&quot;&gt;&lt;del&gt;PDFBOX-4581&lt;/del&gt;&lt;/a&gt;: catch InternalError&lt;/p&gt;</comment>
                            <comment id="16883515" author="jira-bot" created="Fri, 12 Jul 2019 04:10:46 +0000"  >&lt;p&gt;Commit 1862948 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862948&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862948&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4581&quot; title=&quot;Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4581&quot;&gt;&lt;del&gt;PDFBOX-4581&lt;/del&gt;&lt;/a&gt;: catch InternalError&lt;/p&gt;</comment>
                            <comment id="16883516" author="jira-bot" created="Fri, 12 Jul 2019 04:10:51 +0000"  >&lt;p&gt;Commit 1862949 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862949&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862949&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4581&quot; title=&quot;Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4581&quot;&gt;&lt;del&gt;PDFBOX-4581&lt;/del&gt;&lt;/a&gt;: catch InternalError&lt;/p&gt;</comment>
                            <comment id="16883995" author="jira-bot" created="Fri, 12 Jul 2019 17:12:17 +0000"  >&lt;p&gt;Commit 1862990 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862990&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862990&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4581&quot; title=&quot;Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4581&quot;&gt;&lt;del&gt;PDFBOX-4581&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4583&quot; title=&quot;Drawing only a portion of a PDF (Graphics.clip is ignored/overwritten)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4583&quot;&gt;PDFBOX-4583&lt;/a&gt;: improve javadoc&lt;/p&gt;</comment>
                            <comment id="16883998" author="jira-bot" created="Fri, 12 Jul 2019 17:18:59 +0000"  >&lt;p&gt;Commit 1862991 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862991&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4581&quot; title=&quot;Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4581&quot;&gt;&lt;del&gt;PDFBOX-4581&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4583&quot; title=&quot;Drawing only a portion of a PDF (Graphics.clip is ignored/overwritten)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4583&quot;&gt;PDFBOX-4583&lt;/a&gt;: improve javadoc&lt;/p&gt;</comment>
                            <comment id="16884000" author="jira-bot" created="Fri, 12 Jul 2019 17:19:06 +0000"  >&lt;p&gt;Commit 1862992 from Tilman Hausherr in branch &apos;pdfbox/branches/issue4569&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862992&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862992&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4581&quot; title=&quot;Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4581&quot;&gt;&lt;del&gt;PDFBOX-4581&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4583&quot; title=&quot;Drawing only a portion of a PDF (Graphics.clip is ignored/overwritten)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4583&quot;&gt;PDFBOX-4583&lt;/a&gt;: improve javadoc&lt;/p&gt;</comment>
                            <comment id="16884002" author="jira-bot" created="Fri, 12 Jul 2019 17:19:12 +0000"  >&lt;p&gt;Commit 1862993 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862993&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862993&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4581&quot; title=&quot;Exception XRSurfaceData.getRaster not implemented yet on Swing, Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4581&quot;&gt;&lt;del&gt;PDFBOX-4581&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4583&quot; title=&quot;Drawing only a portion of a PDF (Graphics.clip is ignored/overwritten)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4583&quot;&gt;PDFBOX-4583&lt;/a&gt;: improve javadoc&lt;/p&gt;</comment>
                            <comment id="16884014" author="tilman" created="Fri, 12 Jul 2019 17:36:50 +0000"  >&lt;p&gt;So that&apos;s all we can do... the exception is caught and the javadoc has been improved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12972931" name="notYetImplemented_PDFBox_FORMGEN-2185-master.zip" size="948182" author="jbuschtoens" created="Wed, 26 Jun 2019 07:01:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0441k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>