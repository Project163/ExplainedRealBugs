<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:08:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3646] Annotations parsed from XFDF containing ampersand characters are not properly imported</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3646</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Annotations containing &quot;&amp;amp;&quot; in their text are displayed incorrectly when parsed unmodified from XFDF (the ampersands are encoded as &quot;&amp;amp;&quot; there) and added to a PDF document.&lt;br/&gt;
 This occurs for both &quot;text comment&quot; and &quot;text box&quot; type annotations.&lt;br/&gt;
 However, if the XFDF is modified by replacing &quot;&amp;amp;&quot; with &quot;&amp;amp;amp;&quot; prior to parsing, the imported annotations are then displayed correctly.&lt;/p&gt;

&lt;p&gt;The attached code produces two pdf files. One is the PDF with the unmodified XFDF imported, two the PDF with the modifed XFDF.&lt;/p&gt;

&lt;p&gt;A XFDF containing both a text box and text comment annotation is embedded in the source and attached as a separated file.&lt;/p&gt;

&lt;p&gt;Update 23.03.2017 : This problem persists in 2.0.5 and we noticed the same corruption of merged annotations occur, if the annotation text contains a &quot;&amp;lt;&quot; (encoded as &quot;lt&quot; entity)&lt;/p&gt;

&lt;p&gt;Update 17.10.2018 : This corruption is caused by FDFAnnotation.richContentsToString. This method reads &quot;&amp;lt;&quot; and &quot;&amp;amp;&quot; from the parsed values in the document and puts them as such into the markup, but these characters must be replaced with their entities.&lt;/p&gt;

&lt;p&gt;I&apos;ll add this substitution to my proposed bugfix of 4345, please refer to &lt;a href=&quot;https://issues.apache.org/jira/projects/PDFBOX/issues/PDFBOX-4345&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/PDFBOX/issues/PDFBOX-4345&lt;/a&gt;&lt;/p&gt;</description>
                <environment>java 1.8.0_112</environment>
        <key id="13033034">PDFBOX-3646</key>
            <summary>Annotations parsed from XFDF containing ampersand characters are not properly imported</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="k.keggenhoff">Kai Keggenhoff</reporter>
                        <labels>
                            <label>xfdf</label>
                    </labels>
                <created>Mon, 9 Jan 2017 10:46:18 +0000</created>
                <updated>Sun, 2 Dec 2018 17:06:06 +0000</updated>
                            <resolved>Sat, 20 Oct 2018 13:07:31 +0000</resolved>
                                    <version>2.0.3</version>
                    <version>2.0.4</version>
                    <version>2.0.5</version>
                    <version>2.0.6</version>
                                    <fixVersion>2.0.13</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>AcroForm</component>
                    <component>PDModel</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16657210" author="jira-bot" created="Fri, 19 Oct 2018 17:59:08 +0000"  >&lt;p&gt;Commit 1844361 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1844361&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1844361&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3646&quot; title=&quot;Annotations parsed from XFDF containing ampersand characters are not properly imported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3646&quot;&gt;&lt;del&gt;PDFBOX-3646&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4345&quot; title=&quot;FDFAnnotation.richContentsToString does not evaluate text nodes which have siblings in the XML&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4345&quot;&gt;&lt;del&gt;PDFBOX-4345&lt;/del&gt;&lt;/a&gt;: fix problems with missing text and improper handling of special characters, by Kai Keggenhoff:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Instead of traversing the children of an element with the XPath &quot;*&quot; expression, simply iterate the children obtained from Node.getChildNodes(), process Text and CDATASection nodes directly and call richContentsToString for any elements&lt;/li&gt;
	&lt;li&gt;escape &quot;&amp;lt;&quot; and &quot;&amp;amp;&quot; in the text values read from the node values&lt;/li&gt;
	&lt;li&gt;added quoting &quot; as &quot; to the attribute values to avoid possible corruption&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16657212" author="jira-bot" created="Fri, 19 Oct 2018 17:59:14 +0000"  >&lt;p&gt;Commit 1844362 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1844362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1844362&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3646&quot; title=&quot;Annotations parsed from XFDF containing ampersand characters are not properly imported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3646&quot;&gt;&lt;del&gt;PDFBOX-3646&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4345&quot; title=&quot;FDFAnnotation.richContentsToString does not evaluate text nodes which have siblings in the XML&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4345&quot;&gt;&lt;del&gt;PDFBOX-4345&lt;/del&gt;&lt;/a&gt;: fix problems with missing text and improper handling of special characters, by Kai Keggenhoff:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Instead of traversing the children of an element with the XPath &quot;*&quot; expression, simply iterate the children obtained from Node.getChildNodes(), process Text and CDATASection nodes directly and call richContentsToString for any elements&lt;/li&gt;
	&lt;li&gt;escape &quot;&amp;lt;&quot; and &quot;&amp;amp;&quot; in the text values read from the node values&lt;/li&gt;
	&lt;li&gt;added quoting &quot; as &quot; to the attribute values to avoid possible corruption&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16657853" author="jira-bot" created="Sat, 20 Oct 2018 12:59:23 +0000"  >&lt;p&gt;Commit 1844415 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1844415&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1844415&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3646&quot; title=&quot;Annotations parsed from XFDF containing ampersand characters are not properly imported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3646&quot;&gt;&lt;del&gt;PDFBOX-3646&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4345&quot; title=&quot;FDFAnnotation.richContentsToString does not evaluate text nodes which have siblings in the XML&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4345&quot;&gt;&lt;del&gt;PDFBOX-4345&lt;/del&gt;&lt;/a&gt;: add test based on XML by Kai Keggenhoff&lt;/p&gt;</comment>
                            <comment id="16657855" author="jira-bot" created="Sat, 20 Oct 2018 12:59:29 +0000"  >&lt;p&gt;Commit 1844416 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1844416&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1844416&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3646&quot; title=&quot;Annotations parsed from XFDF containing ampersand characters are not properly imported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3646&quot;&gt;&lt;del&gt;PDFBOX-3646&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4345&quot; title=&quot;FDFAnnotation.richContentsToString does not evaluate text nodes which have siblings in the XML&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4345&quot;&gt;&lt;del&gt;PDFBOX-4345&lt;/del&gt;&lt;/a&gt;: add test based on XML by Kai Keggenhoff&lt;/p&gt;</comment>
                            <comment id="16657858" author="tilman" created="Sat, 20 Oct 2018 13:07:31 +0000"  >&lt;p&gt;Sorry that it took so long! Setting to resolved.&lt;/p&gt;</comment>
                            <comment id="16658350" author="jira-bot" created="Sun, 21 Oct 2018 19:43:39 +0000"  >&lt;p&gt;Commit 1844512 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1844512&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1844512&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3646&quot; title=&quot;Annotations parsed from XFDF containing ampersand characters are not properly imported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3646&quot;&gt;&lt;del&gt;PDFBOX-3646&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4345&quot; title=&quot;FDFAnnotation.richContentsToString does not evaluate text nodes which have siblings in the XML&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4345&quot;&gt;&lt;del&gt;PDFBOX-4345&lt;/del&gt;&lt;/a&gt;: remove println&lt;/p&gt;</comment>
                            <comment id="16658352" author="jira-bot" created="Sun, 21 Oct 2018 19:43:43 +0000"  >&lt;p&gt;Commit 1844513 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1844513&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1844513&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3646&quot; title=&quot;Annotations parsed from XFDF containing ampersand characters are not properly imported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3646&quot;&gt;&lt;del&gt;PDFBOX-3646&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4345&quot; title=&quot;FDFAnnotation.richContentsToString does not evaluate text nodes which have siblings in the XML&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4345&quot;&gt;&lt;del&gt;PDFBOX-4345&lt;/del&gt;&lt;/a&gt;: remove println&lt;/p&gt;</comment>
                            <comment id="16688466" author="jlammetje" created="Thu, 15 Nov 2018 18:18:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; I switched jobs last year and no longer work with PDFBox. Kudos on fixing the issue though &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13192158">PDFBOX-4345</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12846303" name="MergeTest.java" size="4232" author="k.keggenhoff" created="Mon, 9 Jan 2017 10:46:18 +0000"/>
                            <attachment id="12846300" name="output1.pdf" size="2576" author="k.keggenhoff" created="Mon, 9 Jan 2017 10:46:18 +0000"/>
                            <attachment id="12846301" name="output2.pdf" size="2616" author="k.keggenhoff" created="Mon, 9 Jan 2017 10:46:18 +0000"/>
                            <attachment id="12846302" name="sample.xfdf" size="2049" author="k.keggenhoff" created="Mon, 9 Jan 2017 10:46:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38frz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>