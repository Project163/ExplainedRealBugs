<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:01:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2844] Printing has bigger margins than expected</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2844</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Printing the attached file from PDFReader brings larger margins than expected, and larger than with Adobe Reader. Doing the same with 1.8 has the expected margins (but bad fonts).&lt;/p&gt;

&lt;p&gt;From &#1040;&#1083;&#1077;&#1082;&#1089;&#1072;&#1085;&#1076;&#1088; &#1057;&#1074;&#1080;&#1088;&#1080;&#1076;&#1086;&#1074; / Alex Sviridov in the mailing list:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I printed this pdf file with Adobe Reader in mode 100%. And as expected left and right margins are about 2cm. In comparison when I print using pdfbox left margin is 4.5cm, right about 3.5cm.&lt;/p&gt;

&lt;p&gt;The code I use :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PrinterJob job = PrinterJob.getPrinterJob();
Paper paper=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Paper();
paper.setSize(72d*8.267d, 72d*11.692);
PDFPrinter pDFPrinter=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFPrinter(document,Scaling.SCALE_TO_FIT, Orientation.PORTRAIT,paper);
pDFPrinter.silentPrint(job);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12841191">PDFBOX-2844</key>
            <summary>Printing has bigger margins than expected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jahewson">John Hewson</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Jun 2015 17:37:32 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:57 +0000</updated>
                            <resolved>Fri, 10 Jul 2015 07:17:16 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14604819" author="tilman" created="Sun, 28 Jun 2015 18:14:28 +0000"  >&lt;p&gt;Update: he has written in the mailing list &quot;I have finally made it to work. The following code prints with normal margins:&quot;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            PrinterJob job = PrinterJob.getPrinterJob();
            Paper paper=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Paper();
            paper.setSize(72d*8.267d, 72d*11.692d);
            paper.setImageableArea(0,0,72d*8.267d, 72d*11.692d);
            
            PrintRequestAttributeSet attr_set = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashPrintRequestAttributeSet();
            attr_set.add(MediaSizeName.ISO_A4);
            attr_set.add(Sides.ONE_SIDED);
            
            PDFPrinter pDFPrinter=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFPrinter(document,Scaling.SCALE_TO_FIT, Orientation.PORTRAIT,paper);
            pDFPrinter.silentPrint(attr_set);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Nevertheless, I wonder why it works differently in PDFReader.&lt;/p&gt;</comment>
                            <comment id="14604929" author="tilman" created="Sun, 28 Jun 2015 21:31:24 +0000"  >&lt;p&gt;The default paper Imageable area is this:&lt;br/&gt;
X:      72.0&lt;br/&gt;
Y:      72.0&lt;br/&gt;
width:  451.33&lt;br/&gt;
height: 697.91&lt;/p&gt;

&lt;p&gt;The actual default paper size is:&lt;br/&gt;
width:   595.33&lt;br/&gt;
height:  841.91&lt;/p&gt;

&lt;p&gt;In other words, we lose an inch on each side &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14605103" author="jahewson" created="Mon, 29 Jun 2015 04:26:44 +0000"  >&lt;p&gt;These are your printer&apos;s margins. They&apos;re always less than the size of the paper, though one inch is very large - Java&apos;s printing API is being over-cautious here. Our task is to print within the imageable area, not to decided what that area is - because it varies from printer to printer.&lt;/p&gt;

&lt;p&gt;1.8 actually overwrites the imageable area with its own size (which is the wrong thing to do) because it could cause ink to appear off the edge of the printable area. So the behaviour in 2.0 looks to me to be correct. Users who want to print beyond Java&apos;s default margins need to set the imageable area themselves first. This code should do the trick:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Paper paper = printerJob.defaultPage().getPaper();
paper.setImageableArea(0, 0, paper.getWidth(), paper.getHeight());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then use Scaling.ACTUAL_SIZE to make sure that extra content is cropped, rather than causing the page to be scaled.&lt;/p&gt;</comment>
                            <comment id="14605792" author="tilman" created="Mon, 29 Jun 2015 15:50:47 +0000"  >&lt;p&gt;I&apos;d like to provide a good default user experience, and at the same time, have a source code that can be used as an example on how to make changes. So I&apos;d like to change the code in the PrintPDF and PDFReader applications as you described, or alternatively change it to set margins to a small value (e.g. 1/5 of an inch ~= 5mm) and shrink if needed. WDYT?&lt;/p&gt;</comment>
                            <comment id="14609608" author="jahewson" created="Wed, 1 Jul 2015 06:13:31 +0000"  >&lt;p&gt;I&apos;m thinking we need to make some changes to PDFPrinter, because it&apos;s fairly clear from the mailing list that the current API is confusing. As you say, not a good user experience. The code I posted actually requires the custom paper to then be passed to PDFPrinter, as the result of defaultPage() is a new object each time - but our custom paper API is confusing too, so I think we should fix the whole thing.&lt;/p&gt;

&lt;p&gt;As far as I can tell the issue which confuses people is that our print() and silentPrint() methods are non-standard and obscure the underlying Java API. I think we should simply provide a PDFPageable class and have that be all. That way users can use the Java printing APIs and understand what they&apos;re doing, and it will be very easy for them to do custom stuff if they wish. We can include some code to set the margins to a minimum too, in our example, which users can copy if they wish. Thoughts?&lt;/p&gt;</comment>
                            <comment id="14609821" author="tilman" created="Wed, 1 Jul 2015 09:31:18 +0000"  >&lt;p&gt;My comment about a poor user experience wasn&apos;t about PDFPrinter, it was about the applications. I don&apos;t mind how it is now, but I don&apos;t use it daily. My wish is that it be easy to use and not force people ask questions. At most, they should be pointed to our own applications. And yes, there should be a silent print and a non silent print possibility out-of-the-box. And we can&apos;t expect people to implement something like the logic in PDFPrintable themselves.&lt;/p&gt;</comment>
                            <comment id="14616314" author="jahewson" created="Tue, 7 Jul 2015 07:26:16 +0000"  >&lt;p&gt;You&apos;ve misunderstood... I&apos;m saying that we should provide PDFPageable (which in turn requires PDFPrintable) but not provide our &quot;helper&quot; APIs in PDFPrinter, because they do more harm than good. If you look at the logic in PDFPrinter and exclude the code for PDFPageable and PDFPrintable, then the remaining code is almost entirely devoted to wrapping the various Java printing APIs with unnecessary complexity.&lt;/p&gt;

&lt;p&gt;The Java printing APIs are not actually that hard to use, we&apos;ve made it far more complex than it needs to be.&lt;/p&gt;

&lt;p&gt;We should of course provide an example of how to use these APIs.&lt;/p&gt;</comment>
                            <comment id="14619881" author="tilman" created="Thu, 9 Jul 2015 04:47:38 +0000"  >&lt;p&gt;If I understand correctly, you want to remove the print() and silentPrint() calls. This would make it even more difficult for users to migrate from 1.8.* than it already is &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14620185" author="jahewson" created="Thu, 9 Jul 2015 09:32:19 +0000"  >&lt;p&gt;Those methods are fundamentally broken in 1.8 (they only use the default printer, don&apos;t allow print attributes to be set), and we&apos;ve already removed both print() and silentPrint() from PDDocument, so I&apos;m not worried about 1.8 compatibility, because it&apos;s already gone. Printing in 2.0 currently uses this highly non-standard and opaque code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDFPrinter printer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFPrinter(document);
printer.silentPrint();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;d like to replace it with this, completely standard Java printing API code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PrinterJob job = PrinterJob.getPrinterJob();
job.setPageable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFPageable(document));
job.print();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So our silentPrint() method saves one line of code, while creating endless confusion. Not a net win. Equivalent code for print() is pretty simple too and a lot easier to understand:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PrinterJob job = PrinterJob.getPrinterJob();
job.setPageable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFPageable(document));
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (job.printDialog())
{
    job.print();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14620208" author="tilman" created="Thu, 9 Jul 2015 09:45:52 +0000"  >&lt;p&gt;But wasn&apos;t it you who introduced that &quot;highly non-standard and opaque code&quot;? Why was it good last year and now no more?&lt;/p&gt;

&lt;p&gt;Whatever you do, I&apos;d like to keep that Orientation / Scaling / paper / dpi setting.&lt;/p&gt;</comment>
                            <comment id="14620223" author="jahewson" created="Thu, 9 Jul 2015 09:55:09 +0000"  >&lt;p&gt;I didn&apos;t introduce print() or standardPrint(), they&apos;ve been around since the pre-Apache days, at least 5 years, if not more. Andreas moved them to PDFPrinter as part of the push to move AWT code out of the PD model. I&apos;ve enhanced our Printable and Pageable implementations, but those are standard Java stuff. I&apos;ve also attempted to patch some of the shortcomings of print() and silentPrint() but to little avail... they&apos;re still inflexible and confusing.&lt;/p&gt;

&lt;p&gt;It&apos;s the recent activity on the mailing list, with users frequently confused about printing and how to customise it that have really convinced me that the &quot;one size fits all&quot; wrapper methods of print() and silentPrint() cause more problems than they solve.&lt;/p&gt;

&lt;p&gt;All of the Orientation / Scaling / paper / dpi is part of our Pageable and Printable implementations, so this will remain - the constructor parameters will just be on those classes instead of PDFPrinter.&lt;/p&gt;</comment>
                            <comment id="14620282" author="tilman" created="Thu, 9 Jul 2015 10:26:29 +0000"  >&lt;p&gt;Sorry, my remark &quot;highly non-standard and opaque code&quot; applied to the use of PDFPrinter, which you did introduce, although this did already exist before in RenderUtil. Please go ahead.&lt;/p&gt;</comment>
                            <comment id="14621756" author="jahewson" created="Fri, 10 Jul 2015 05:23:46 +0000"  >&lt;p&gt;Yes, that&apos;s right, it was RenderUtil which Andreas created, which I later renamed. I forgot about that. Ok, I will go ahead with my changes and also create a new printing example program.&lt;/p&gt;</comment>
                            <comment id="14621872" author="jira-bot" created="Fri, 10 Jul 2015 07:14:17 +0000"  >&lt;p&gt;Commit 1690215 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1690215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1690215&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2844&quot; title=&quot;Printing has bigger margins than expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2844&quot;&gt;&lt;del&gt;PDFBOX-2844&lt;/del&gt;&lt;/a&gt;: Replace PDFPrinter with PDFPageable and PDFPrintable&lt;/p&gt;</comment>
                            <comment id="14621875" author="jahewson" created="Fri, 10 Jul 2015 07:17:09 +0000"  >&lt;p&gt;This makes the changes discussed above. Instead of wrapping the Java APIs with PDFPrinter, we now expose our Printable and Pageable implementations directly, allowing users to use the standard Java APIs. I&apos;ve included a full example of the various ways in which printing can be customised. Printing to the original paper size with no margins is now the default and is as simple as this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PrinterJob job = PrinterJob.getPrinterJob();
job.setPageable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFPageable(document));
job.print();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12742407" name="PDFBOX-2844.pdf" size="26544" author="tilman" created="Sun, 28 Jun 2015 17:39:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2glnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>