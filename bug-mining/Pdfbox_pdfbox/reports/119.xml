<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:52:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-958] convertToImage mangles images which were in the PDF</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-958</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Of the PDFs we&apos;ve tried running through PDFBox and generating page images, a number of them (coming from disparate sources and method of creation) seem to produce images where an image that was embedded in the page of the PDF shows somewhat mangled. It seems to be divided by horizontal stripes, where some stripes look normal, others seem to have some kind of &quot;smearing&quot; effect going on. See attached images and original PDF (image is of page 13).&lt;/p&gt;

&lt;p&gt;I marked this as critical as we are trying to use PDFBox in a project where page images are crucial, and inability to produce reasonable looking page images is pretty much a deal breaker. &lt;/p&gt;

&lt;p&gt;The code we use to extract the images looks more or less like the following:&lt;/p&gt;

&lt;p&gt;					BufferedImage image = page.convertToImage();&lt;/p&gt;

&lt;p&gt;					SmartDeferredFileOutputStream outStream = new SmartDeferredFileOutputStream();&lt;br/&gt;
					String[] writerFormatNames = ImageIO.getWriterFormatNames();&lt;br/&gt;
					ImageIO.write(image, &quot;jpeg&quot;, outStream);&lt;br/&gt;
					outStream.close()&lt;/p&gt;

&lt;p&gt;We&apos;ve also tried specifying &quot;png&quot;. In both &quot;jpg&quot; and &quot;png&quot; cases we get an image file that is indeed the correct format, and both images look exactly the same. &lt;/p&gt;</description>
                <environment>RHEL5 and WinXP, java version &amp;quot;1.6.0_23&amp;quot;</environment>
        <key id="12498303">PDFBOX-958</key>
            <summary>convertToImage mangles images which were in the PDF</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="ericjs">Eric Schwarzenbach</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Feb 2011 00:05:36 +0000</created>
                <updated>Thu, 15 May 2014 16:43:14 +0000</updated>
                            <resolved>Thu, 15 May 2014 16:43:14 +0000</resolved>
                                    <version>1.2.1</version>
                    <version>1.4.0</version>
                    <version>1.5.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13002812" author="davidn" created="Fri, 4 Mar 2011 20:58:13 +0000"  >&lt;p&gt;I&apos;ve been looking at this myself - it&apos;s not a problem across all PDFs, and the given example is actually the only PDF that I&apos;ve been able to get it to happen in. I don&apos;t see anything remarkable about the data from the image given in the PDFDebugger tool:&lt;/p&gt;

&lt;p&gt;I2:Stream (XObject:Image)&lt;br/&gt;
BitsPerComponent: 8&lt;br/&gt;
ColorSpace: DeviceRGB&lt;br/&gt;
DecodeParms: Dictionary&lt;br/&gt;
   Colors: 3&lt;br/&gt;
   Columns: 500&lt;br/&gt;
   Predictor: 15&lt;br/&gt;
Filter: FlateDecode&lt;br/&gt;
Height: 667&lt;br/&gt;
Length: 820037&lt;br/&gt;
Subtype: Image&lt;br/&gt;
Type: XObject&lt;br/&gt;
Width: 500&lt;/p&gt;

&lt;p&gt;If this hasn&apos;t been looked at yet, can anyone provide an idea of what might be different about this document that causes its images to be converted wrongly? I&apos;ve found that the image is already mangled just after calling the getRGBImage() method of the PDJpeg object, so it isn&apos;t happening when drawing the image to the page.&lt;/p&gt;</comment>
                            <comment id="13002813" author="davidn" created="Fri, 4 Mar 2011 20:58:52 +0000"  >&lt;p&gt;I should add that this is happening with PDFBox 1.5.0 as well as the versions listed in the issue details.&lt;/p&gt;</comment>
                            <comment id="13002882" author="davidn" created="Sat, 5 Mar 2011 00:34:19 +0000"  >&lt;p&gt;I&apos;m beginning to find some other documents that indicate this is a wider problem... the DITA Open Toolkit tutorial is one document that also shows this behaviour for most of its images, when converted through the command line tool: &lt;a href=&quot;http://dita-ot.sourceforge.net/doc/ot-userguide131/ditaotug131-18042007-pdf.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://dita-ot.sourceforge.net/doc/ot-userguide131/ditaotug131-18042007-pdf.pdf&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;The properties for these images in PDFDebugger look very similar to those in my first comment.&lt;/p&gt;</comment>
                            <comment id="13002898" author="ericjs" created="Sat, 5 Mar 2011 01:04:53 +0000"  >&lt;p&gt;We also have another document (from a client so I can&apos;t share it), with a number of black and white photos in it, all of which come out with the colors inverted (like a negative). There is also a non-photographic image, a map, which gets messed up in an entirely different way. In general our success rate just trying random PDFs had not been great for images. Could one of the PDFBox developers comment? Is this an area of the tool that is in rudimentary state?&lt;/p&gt;</comment>
                            <comment id="13006220" author="lehmi" created="Sun, 13 Mar 2011 16:52:30 +0000"  >&lt;p&gt;The problem was a buggy implementation of the FlateFilter with a predictor value &amp;gt;= 10.&lt;br/&gt;
I fixed that in revision 1081149.&lt;/p&gt;</comment>
                            <comment id="13986546" author="tilman" created="Thu, 1 May 2014 12:50:22 +0000"  >&lt;p&gt;Is there anybody who can access the PDF of this issue, and if yes, what URL works? I get an error. I suspect it has something to do with url-encoding of the &quot;(R)&quot;.&lt;/p&gt;</comment>
                            <comment id="13998738" author="lehmi" created="Thu, 15 May 2014 12:57:17 +0000"  >&lt;p&gt;Hi Tilman,&lt;/p&gt;

&lt;p&gt;I&apos;ve sent the pdf via pm.&lt;/p&gt;

&lt;p&gt;BR&lt;br/&gt;
Andreas Lehmk&#252;hler&lt;/p&gt;

</comment>
                            <comment id="13998889" author="lehmi" created="Thu, 15 May 2014 16:43:14 +0000"  >&lt;p&gt;Reopened to replace a missing attachment&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12470812" name="Image of Page 13.jpeg" size="272840" author="ericjs" created="Fri, 11 Feb 2011 00:07:38 +0000"/>
                            <attachment id="12470813" name="Image of Page 13.png" size="770335" author="ericjs" created="Fri, 11 Feb 2011 00:07:38 +0000"/>
                            <attachment id="12645033" name="PDFBOX958-WrycanLoremIpsumTest.pdf" size="1923329" author="lehmi" created="Thu, 15 May 2014 16:42:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>69397</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zfw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>