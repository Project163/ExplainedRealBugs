<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:11:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5243] Second signature not visible when signing twice</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5243</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;As reported by Victor Sterpu on the mailing list and on SO.&lt;/p&gt;

&lt;p&gt;The second file has only one annotation, but both signature fields are visible.&lt;/p&gt;

&lt;p&gt;Reproduced using the CreateVisibleSignature2 example and changing &lt;tt&gt;humanRect&lt;/tt&gt; for the second signing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13391238">PDFBOX-5243</key>
            <summary>Second signature not visible when signing twice</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Thu, 22 Jul 2021 03:14:20 +0000</created>
                <updated>Fri, 18 Aug 2023 05:46:10 +0000</updated>
                            <resolved>Fri, 23 Jul 2021 03:31:52 +0000</resolved>
                                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Signing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17385237" author="tilman" created="Thu, 22 Jul 2021 03:49:23 +0000"  >&lt;p&gt;I suspect some problem with COSArrayList. In PDDocument, moving &lt;tt&gt;page.setAnnotations(annotations);&lt;/tt&gt; after the &quot;if&quot; block solves this.&lt;/p&gt;</comment>
                            <comment id="17385620" author="tilman" created="Thu, 22 Jul 2021 15:41:13 +0000"  >&lt;p&gt;The problem is r1883898 from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4954&quot; title=&quot;Reduce the usage of COSArrayList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4954&quot;&gt;&lt;del&gt;PDFBOX-4954&lt;/del&gt;&lt;/a&gt; which changed&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setAnnotations(List&amp;lt;PDAnnotation&amp;gt; annotations)
{
	page.setItem(COSName.ANNOTS, COSArrayList.converterToCOSArray(annotations));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setAnnotations(List&amp;lt;PDAnnotation&amp;gt; annotations)
{
	page.setItem(COSName.ANNOTS, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; COSArray(annotations));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so the previous behaviour which would check whether it was a COSArrayList is gone.&lt;/p&gt;

&lt;p&gt;However &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4954&quot; title=&quot;Reduce the usage of COSArrayList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4954&quot;&gt;&lt;del&gt;PDFBOX-4954&lt;/del&gt;&lt;/a&gt; was about reducing the usage of COSArrayList so I&apos;ll just do the solution from this morning and also adapt the test.&lt;/p&gt;</comment>
                            <comment id="17385626" author="jira-bot" created="Thu, 22 Jul 2021 15:49:49 +0000"  >&lt;p&gt;Commit 1891725 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1891725&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1891725&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5243&quot; title=&quot;Second signature not visible when signing twice&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5243&quot;&gt;&lt;del&gt;PDFBOX-5243&lt;/del&gt;&lt;/a&gt;: reassign annotations AFTER the element has been added because the early setAnnotation &quot;broke&quot; the COSArrayList &quot;backed by&quot; behavior of the list&lt;/p&gt;</comment>
                            <comment id="17385895" author="jira-bot" created="Fri, 23 Jul 2021 03:12:04 +0000"  >&lt;p&gt;Commit 1891744 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1891744&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1891744&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5243&quot; title=&quot;Second signature not visible when signing twice&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5243&quot;&gt;&lt;del&gt;PDFBOX-5243&lt;/del&gt;&lt;/a&gt;: check that there are two annotations on the page&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13326158">PDFBOX-4954</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13391467">PDFBOX-5244</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13030937" name="5172.pdf" size="90867" author="tilman" created="Thu, 22 Jul 2021 03:08:36 +0000"/>
                            <attachment id="13030938" name="5172_signed.pdf" size="111371" author="tilman" created="Thu, 22 Jul 2021 03:08:36 +0000"/>
                            <attachment id="13030939" name="5172_signed_signed.pdf" size="131883" author="tilman" created="Thu, 22 Jul 2021 03:08:36 +0000"/>
                            <attachment id="13030941" name="5172_signed_signed_good.pdf" size="131890" author="tilman" created="Thu, 22 Jul 2021 03:44:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://stackoverflow.com/questions/68474598/java-apachepdfbox-2-visual-signatures-on-the-same-page-the-second-signature-is]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0t7xs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>