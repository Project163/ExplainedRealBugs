<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:05:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3674] Incorrect ordering of fatha -- potentially indicative of larger issue with RTL</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3674</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;On &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2257&quot; title=&quot;Arabic vowel marks displaced when reading from PDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2257&quot;&gt;TIKA-2257&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ccreutzig&quot; class=&quot;user-hover&quot; rel=&quot;ccreutzig&quot;&gt;ccreutzig&lt;/a&gt; shared a file that triggers PDFBox to flip the order of the fatha.  I suspect this is happening in &lt;tt&gt;normalizeAdd&lt;/tt&gt; within PDFTextStripper, but I&apos;m not familiar enough with the code to diagnose and fix.&lt;/p&gt;

&lt;p&gt;I confirmed this is still happening in trunk.&lt;/p&gt;

&lt;p&gt;Triggering file and the start of a diagnosis is available on the Tika issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13039472">PDFBOX-3674</key>
            <summary>Incorrect ordering of fatha -- potentially indicative of larger issue with RTL</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="tallison">Tim Allison</reporter>
                        <labels>
                            <label>diacritic</label>
                    </labels>
                <created>Wed, 1 Feb 2017 14:04:21 +0000</created>
                <updated>Wed, 21 Jun 2017 16:55:03 +0000</updated>
                                                                            <component>Text extraction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15999956" author="jira-bot" created="Sun, 7 May 2017 17:18:22 +0000"  >&lt;p&gt;Commit 1794229 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1794229&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1794229&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3674&quot; title=&quot;Incorrect ordering of fatha -- potentially indicative of larger issue with RTL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3674&quot;&gt;PDFBOX-3674&lt;/a&gt;: fixed if clause to handle 2 ranges correct&lt;/p&gt;</comment>
                            <comment id="15999957" author="lehmi" created="Sun, 7 May 2017 17:19:30 +0000"  >&lt;p&gt;The following code is suspicous&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-comment&quot;&gt;// We only normalize &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the codepoint is in a given range.
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// Otherwise, NFKC converts too many things that would cause
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// confusion. For example, it converts the micro symbol in
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// extended Latin to the value in the Greek script. We normalize
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// the Unicode Alphabetic and Arabic A&amp;amp;B Presentation forms.
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; c = word.charAt(q);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (0xFB00 &amp;lt;= c &amp;amp;&amp;amp; c &amp;lt;= 0xFDFF || 0xFE70 &amp;lt;= c &amp;amp;&amp;amp; c &amp;lt;= 0xFEFF)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The comment is about ranges, but the if clause doesn&apos;t work that way. It should be as follows&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((0xFB00 &amp;lt;= c &amp;amp;&amp;amp; c &amp;lt;= 0xFDFF) || (0xFE70 &amp;lt;= c &amp;amp;&amp;amp; c &amp;lt;= 0xFEFF))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can someone please double check if this is ok. At least the linked TIKA pdf is correct now&lt;/p&gt;</comment>
                            <comment id="15999971" author="tilman" created="Sun, 7 May 2017 17:59:36 +0000"  >&lt;p&gt;Isn&apos;t that the same? &lt;a href=&quot;https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html&lt;/a&gt; And if not, why not?&lt;/p&gt;</comment>
                            <comment id="15999992" author="jira-bot" created="Sun, 7 May 2017 18:45:32 +0000"  >&lt;p&gt;Commit 1794256 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1794256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1794256&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3674&quot; title=&quot;Incorrect ordering of fatha -- potentially indicative of larger issue with RTL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3674&quot;&gt;PDFBOX-3674&lt;/a&gt;: revert commit&lt;/p&gt;</comment>
                            <comment id="15999993" author="lehmi" created="Sun, 7 May 2017 18:46:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; you&apos;re right my &quot;fix&quot; was nonsense and it doesn&apos;t fix anything &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16057760" author="tilman" created="Wed, 21 Jun 2017 16:13:25 +0000"  >&lt;p&gt;Here&apos;s a reduced file.... it allowed me to have a look despite having no clue about arabic.&lt;/p&gt;

&lt;p&gt;To clarify:&lt;/p&gt;

&lt;p&gt;&quot;fatha&quot; = 064E = looks like an accent, the diacritic&lt;br/&gt;
&quot;reh final&quot; = FEAE, the non diacritic: &lt;a href=&quot;http://www.fileformat.info/info/unicode/char/feae/index.htm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.fileformat.info/info/unicode/char/feae/index.htm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Doing an output character by character at the beginning and at the end of &lt;tt&gt;handleDirection&lt;/tt&gt; shows that the order gets reversed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="13038903">TIKA-2257</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12873894" name="PDFBOX-3674-reduced.pdf" size="19345" author="tilman" created="Wed, 21 Jun 2017 16:11:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39gt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>