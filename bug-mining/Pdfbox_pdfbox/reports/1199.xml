<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:01:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2936] javax.crypto.BadPaddingException: Given final block not properly padded</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2936</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I get the following stack trace when trying to parse certain pdfs:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.pdfbox.preflight.exception.SyntaxValidationException
        at org.apache.pdfbox.preflight.parser.PreflightParser.parse(PreflightParser.java:203)
        at org.apache.pdfbox.preflight.parser.PreflightParser.parse(PreflightParser.java:180)
        at org.apache.pdfbox.preflight.parser.PreflightParser.parse(PreflightParser.java:168)
        at PDFBoxTest.main(hello.java:11)
Caused by: org.apache.pdfbox.exceptions.WrappedIOException
        at org.apache.pdfbox.pdmodel.encryption.SecurityHandler.encryptData(SecurityHandler.java:376)
        at org.apache.pdfbox.pdmodel.encryption.SecurityHandler.decryptString(SecurityHandler.java:578)
        at org.apache.pdfbox.pdfparser.NonSequentialPDFParser.decryptString(NonSequentialPDFParser.java:1571)
        at org.apache.pdfbox.pdfparser.NonSequentialPDFParser.decryptDictionary(NonSequentialPDFParser.java:1535)
        at org.apache.pdfbox.pdfparser.NonSequentialPDFParser.decrypt(NonSequentialPDFParser.java:1596)
        at org.apache.pdfbox.preflight.parser.PreflightParser.parseObjectDynamically(PreflightParser.java:797)
        at org.apache.pdfbox.pdfparser.NonSequentialPDFParser.parseObjectDynamically(NonSequentialPDFParser.java:1343)
        at org.apache.pdfbox.preflight.parser.PreflightParser.initialParse(PreflightParser.java:273)
        at org.apache.pdfbox.pdfparser.NonSequentialPDFParser.parse(NonSequentialPDFParser.java:886)
        at org.apache.pdfbox.preflight.parser.PreflightParser.parse(PreflightParser.java:198)
        ... 3 more
Caused by: javax.crypto.BadPaddingException: Given final block not properly padded
        at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:966)
        at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:824)
        at com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:436)
        at javax.crypto.Cipher.doFinal(Cipher.java:2004)
        at org.apache.pdfbox.pdmodel.encryption.SecurityHandler.encryptData(SecurityHandler.java:352)
        ... 12 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The parsing code looks something like:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;FileDataSource fd = new FileDataSource(&quot;i-129.pdf&quot;);
PreflightParser parser = new PreflightParser(fd);
parser.parse();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>java version &amp;quot;1.8.0_25&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_25-b17)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)</environment>
        <key id="12856325">PDFBOX-2936</key>
            <summary>javax.crypto.BadPaddingException: Given final block not properly padded</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="dwwoelfel">Daniel Woelfel</reporter>
                        <labels>
                            <label>DHS</label>
                    </labels>
                <created>Sat, 15 Aug 2015 01:35:26 +0000</created>
                <updated>Thu, 13 Apr 2017 13:48:35 +0000</updated>
                            <resolved>Tue, 18 Aug 2015 16:20:30 +0000</resolved>
                                    <version>1.8.10</version>
                    <version>1.8.11</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.11</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Crypto</component>
                    <component>Preflight</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14698633" author="tilman" created="Sun, 16 Aug 2015 11:43:51 +0000"  >&lt;p&gt;Seems that decryption is not done correctly if the preflight parser is used, because it works fine if loadNonSeq() is used.&lt;/p&gt;

&lt;p&gt;On the other hand, encrypted files are not valid PDF/A anyway, so you would still get an error message if we fix that bug. Try the same file at&lt;br/&gt;
&lt;a href=&quot;http://www.pdf-tools.com/pdf/validate-pdfa-online.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.pdf-tools.com/pdf/validate-pdfa-online.aspx&lt;/a&gt;&lt;br/&gt;
So is this really important to you? &lt;/p&gt;</comment>
                            <comment id="14701508" author="jira-bot" created="Tue, 18 Aug 2015 16:16:11 +0000"  >&lt;p&gt;Commit 1696449 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1696449&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1696449&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2936&quot; title=&quot;javax.crypto.BadPaddingException: Given final block not properly padded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2936&quot;&gt;&lt;del&gt;PDFBOX-2936&lt;/del&gt;&lt;/a&gt;: avoid orphan /CF dictionaries found in US govt &quot;I-&quot; files&lt;/p&gt;</comment>
                            <comment id="14701511" author="jira-bot" created="Tue, 18 Aug 2015 16:17:21 +0000"  >&lt;p&gt;Commit 1696450 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1696450&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1696450&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2936&quot; title=&quot;javax.crypto.BadPaddingException: Given final block not properly padded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2936&quot;&gt;&lt;del&gt;PDFBOX-2936&lt;/del&gt;&lt;/a&gt;: avoid orphan /CF dictionaries found in US govt &quot;I-&quot; files&lt;/p&gt;</comment>
                            <comment id="14701513" author="tilman" created="Tue, 18 Aug 2015 16:20:30 +0000"  >&lt;p&gt;Here&apos;s what&apos;s happening:&lt;br/&gt;
PreflightParser.initialParse() first calls the super method and then searches for objects that haven&apos;t been parsed. In this case, it is &quot;6813 0 obj&quot;. That is a weird one: it identical to &quot;6883 0 obj&quot;. &quot;6883 0 obj&quot; is not decrypted because it is part of the encryption dictionary &quot;6884 0 obj&quot;. However &quot;6813 0 obj&quot; is not referenced anywhere. My change prevents such a dictionary to be decrypted. Your files are still not PDF/A, but you&apos;ll get a less annoying output.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12750636" name="i-129.pdf" size="1881447" author="dwwoelfel" created="Sat, 15 Aug 2015 01:36:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2iyfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>