<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:12:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5372] *LOADS of* &quot;WARNING: key node000xxxxx already exists in destination IDTree&quot;</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5372</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I&apos;ve been using PDFBox since very very long, and it&apos;s been working very well &#128077;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;However, for 2 sets of PDFs I&apos;m trying to merge in the past day, for some reason I&apos;m always getting LOADS of these Warnings, with a &quot;out of memory&quot; crash at the end.&lt;/p&gt;

&lt;p&gt;I believe (but could be wrong) that the &quot;out of memory&quot; is due to these endless Warnings.&lt;br/&gt;
(heap is currently 15g)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;But, does anyone know what could be causing these warnings? (anything in specific you&apos;d suggest me to look at, in these PDFs?)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you very much!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;(... LOADS of these, redacted ...)&lt;br/&gt;
Jan 31, 2022 2:41:48 AM org.apache.pdfbox.multipdf.PDFMergerUtility mergeIDTree&lt;br/&gt;
WARNING: key node00018714 already exists in destination IDTree&lt;br/&gt;
Jan 31, 2022 2:41:48 AM org.apache.pdfbox.multipdf.PDFMergerUtility mergeIDTree&lt;br/&gt;
WARNING: key node00018715 already exists in destination IDTree&lt;br/&gt;
Jan 31, 2022 2:41:48 AM org.apache.pdfbox.multipdf.PDFMergerUtility mergeIDTree&lt;br/&gt;
WARNING: key node00018716 already exists in destination IDTree&lt;br/&gt;
Jan 31, 2022 2:41:48 AM org.apache.pdfbox.multipdf.PDFMergerUtility mergeIDTree&lt;br/&gt;
WARNING: key node00018717 already exists in destination IDTree&lt;br/&gt;
Jan 31, 2022 2:41:48 AM org.apache.pdfbox.multipdf.PDFMergerUtility mergeIDTree&lt;br/&gt;
WARNING: key node00018718 already exists in destination IDTree&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.io.ScratchFileBuffer.addPage(ScratchFileBuffer.java:132)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.io.ScratchFileBuffer.ensureAvailableBytesInPage(ScratchFileBuffer.java:184)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.io.ScratchFileBuffer.write(ScratchFileBuffer.java:236)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.io.RandomAccessOutputStream.write(RandomAccessOutputStream.java:46)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.cos.COSStream$2.write(COSStream.java:281)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.io.IOUtils.copy(IOUtils.java:70)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:127)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:109)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:146)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:146)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:146)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:109)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:117)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:146)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:109)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:117)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:146)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:109)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:117)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:146)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:109)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:146)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:109)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:146)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:109)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFCloneUtility.cloneForNewDocument(PDFCloneUtility.java:146)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFMergerUtility.appendDocument(PDFMergerUtility.java:800)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFMergerUtility.legacyMergeDocuments(PDFMergerUtility.java:459)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.multipdf.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:346)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.tools.PDFMerger.merge(PDFMerger.java:70)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.tools.PDFMerger.main(PDFMerger.java:49)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.pdfbox.tools.PDFBox.main(PDFBox.java:81)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#8211;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;EDIT - Increased the heap, and seems I got something new too:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Jan 31, 2022 10:50:46 AM org.apache.pdfbox.multipdf.PDFMergerUtility mergeIDTree&lt;br/&gt;
WARNING: key node00018714 already exists in destination IDTree&lt;br/&gt;
Jan 31, 2022 10:51:29 AM org.apache.pdfbox.cos.COSDocument finalize&lt;br/&gt;
&lt;b&gt;WARNING: Warning: You did not close a PDF Document&lt;/b&gt;&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Not sure if this means something is actually wrong with one of the PDFs, or a consequence of going out of memory.&lt;/p&gt;

&lt;p&gt;(and how do I know what&apos;s the PDF it&apos;s referring to? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;

&lt;p&gt;I&apos;m using Pupeteer to generate the PDFs, so I assume it generated them well... (also, it&apos;s consistently failing even if I re-generate all of them)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13425753">PDFBOX-5372</key>
            <summary>*LOADS of* &quot;WARNING: key node000xxxxx already exists in destination IDTree&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="nunop5">nunop5</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Jan 2022 10:41:56 +0000</created>
                <updated>Thu, 26 Dec 2024 13:52:29 +0000</updated>
                            <resolved>Sat, 19 Mar 2022 12:41:11 +0000</resolved>
                                    <version>2.0.25</version>
                                    <fixVersion>2.0.26</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17484840" author="tilman" created="Mon, 31 Jan 2022 18:19:46 +0000"  >&lt;p&gt;What PDFBox version are you using?&lt;/p&gt;

&lt;p&gt;The name warning means that these names are in both files, so your result structure tree might be useless.&lt;/p&gt;</comment>
                            <comment id="17485145" author="JIRAUSER284477" created="Tue, 1 Feb 2022 09:49:06 +0000"  >&lt;p&gt;Hey - thanks for the reply.&lt;/p&gt;

&lt;p&gt;Using the latest stable version.&lt;/p&gt;</comment>
                            <comment id="17485413" author="tilman" created="Tue, 1 Feb 2022 18:37:36 +0000"  >&lt;p&gt;No idea without having the files. Either there&apos;s some sort of recursion (but these should be caught) or the file is really huge.&lt;/p&gt;</comment>
                            <comment id="17496246" author="jira-bot" created="Tue, 22 Feb 2022 17:30:34 +0000"  >&lt;p&gt;Commit 1898324 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1898324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1898324&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5372&quot; title=&quot;*LOADS of* &amp;quot;WARNING: key node000xxxxx already exists in destination IDTree&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5372&quot;&gt;&lt;del&gt;PDFBOX-5372&lt;/del&gt;&lt;/a&gt;: check for recursion&lt;/p&gt;</comment>
                            <comment id="17496247" author="tilman" created="Tue, 22 Feb 2022 17:31:31 +0000"  >&lt;p&gt;I wanted to close this but had a closer look at the line numbers. This is a stream dictionary that has a value that is an object reference, that references the dictionary itself. I don&apos;t see how we catch this. I&apos;m adding a check, please test with a snapshot (at &lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.26-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.26-SNAPSHOT/&lt;/a&gt; )&lt;/p&gt;</comment>
                            <comment id="17501647" author="jira-bot" created="Sat, 5 Mar 2022 03:43:58 +0000"  >&lt;p&gt;Commit 1898615 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1898615&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1898615&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5372&quot; title=&quot;*LOADS of* &amp;quot;WARNING: key node000xxxxx already exists in destination IDTree&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5372&quot;&gt;&lt;del&gt;PDFBOX-5372&lt;/del&gt;&lt;/a&gt;: check for recursion&lt;/p&gt;</comment>
                            <comment id="17501648" author="tilman" created="Sat, 5 Mar 2022 03:46:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nunop5&quot; class=&quot;user-hover&quot; rel=&quot;nunop5&quot;&gt;nunop5&lt;/a&gt; please test your files again. You can use the command line tool.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://pdfbox.apache.org/2.0/commandline.html#pdfmerger&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pdfbox.apache.org/2.0/commandline.html#pdfmerger&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17507801" author="jira-bot" created="Wed, 16 Mar 2022 18:44:40 +0000"  >&lt;p&gt;Commit 1898968 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1898968&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1898968&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5372&quot; title=&quot;*LOADS of* &amp;quot;WARNING: key node000xxxxx already exists in destination IDTree&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5372&quot;&gt;&lt;del&gt;PDFBOX-5372&lt;/del&gt;&lt;/a&gt;: optimize, as suggested by Valery Bokov&lt;/p&gt;</comment>
                            <comment id="17507802" author="jira-bot" created="Wed, 16 Mar 2022 18:44:44 +0000"  >&lt;p&gt;Commit 1898969 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1898969&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1898969&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5372&quot; title=&quot;*LOADS of* &amp;quot;WARNING: key node000xxxxx already exists in destination IDTree&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5372&quot;&gt;&lt;del&gt;PDFBOX-5372&lt;/del&gt;&lt;/a&gt;: optimize, as suggested by Valery Bokov&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12762216">PDFBOX-2574</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13443653">PDFBOX-5429</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0z42g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>