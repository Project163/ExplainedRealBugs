<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:13:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5587] NullPointerException in PDTrueTypeFont.java getPath( )</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5587</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Since April we get the following NPE in our software.&lt;/p&gt;

&lt;p&gt;PDFBox is used to convert PDFs to images.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&#160; &#160; at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.getPath(PDTrueTypeFont.java:470) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.rendering.TTFGlyph2D.getPathForGID(TTFGlyph2D.java:144) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.rendering.TTFGlyph2D.getPathForCharacterCode(TTFGlyph2D.java:93) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.rendering.PageDrawer.drawGlyph2D(PageDrawer.java:514) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.rendering.PageDrawer.showFontGlyph(PageDrawer.java:495) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.contentstream.PDFStreamEngine.showGlyph(PDFStreamEngine.java:793) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.contentstream.PDFStreamEngine.showGlyph(PDFStreamEngine.java:811) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.contentstream.PDFStreamEngine.showText(PDFStreamEngine.java:749) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.contentstream.PDFStreamEngine.showTextString(PDFStreamEngine.java:608) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.contentstream.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.text.ShowText.process(ShowText.java:56) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.contentstream.PDFStreamEngine.processOperator(PDFStreamEngine.java:939) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.contentstream.PDFStreamEngine.processStreamOperators(PDFStreamEngine.java:514) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.contentstream.PDFStreamEngine.processStream(PDFStreamEngine.java:492) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.contentstream.PDFStreamEngine.processPage(PDFStreamEngine.java:155) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.rendering.PageDrawer.drawPage(PageDrawer.java:282) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.rendering.PDFRenderer.renderImage(PDFRenderer.java:355) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.rendering.PDFRenderer.renderImage(PDFRenderer.java:272) ~[pdfbox-2.0.25.jar:2.0.25]
&#160; &#160; at org.apache.pdfbox.rendering.PDFRenderer.renderImageWithDPI(PDFRenderer.java:258) ~[pdfbox-2.0.25.jar:2.0.25]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is a bit strange, since I thought that this bug was fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3488&quot; title=&quot;NullPointerException in PDTrueTypeFont.java if glyf table is missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3488&quot;&gt;&lt;del&gt;PDFBOX-3488&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;PdfBox is running on a linux server but when I tried to access the PDFs I failed to find the right one (over 1 million docs on that server).&lt;/p&gt;

&lt;p&gt;On the other hand the fix linked in the ticket points to the following implementation:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 @Override
&#160;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; GeneralPath getPath(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; code) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException{
&#160; &#160;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ttf.getGlyph() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;){
&#160; &#160; &#160;&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;glyf table is missing in font &quot;&lt;/span&gt; + getName());
&#160; &#160;} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which does not exist anymore in 2.0.3 or higher:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Override
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; GeneralPath getPath(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; code) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException{
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; gid = codeToGID(code);
&#160; &#160; &#160; &#160; GlyphData glyph = ttf.getGlyph().getGlyph(gid); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Any idea why an NPE might occur?&lt;/p&gt;

&lt;p&gt;`ttf` might be null or `getGlyph` returns null?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>Linux server</environment>
        <key id="13532545">PDFBOX-5587</key>
            <summary>NullPointerException in PDTrueTypeFont.java getPath( )</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="TeeWeTee">Lonzak</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Apr 2023 17:18:59 +0000</created>
                <updated>Sat, 1 Jul 2023 17:22:23 +0000</updated>
                            <resolved>Thu, 13 Apr 2023 18:23:30 +0000</resolved>
                                    <version>2.0.25</version>
                                    <fixVersion>2.0.29</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17712005" author="tilman" created="Thu, 13 Apr 2023 18:09:17 +0000"  >&lt;p&gt;Yes it was fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3488&quot; title=&quot;NullPointerException in PDTrueTypeFont.java if glyf table is missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3488&quot;&gt;&lt;del&gt;PDFBOX-3488&lt;/del&gt;&lt;/a&gt; but also reverted. John wrote that this shouldn&apos;t happen because it should have been caught earlier and he made a change to catch it earlier. I&apos;ll put it back in the hope that somebody will submit a file with the problem and then we&apos;ll know why it happens.&lt;/p&gt;</comment>
                            <comment id="17712009" author="jira-bot" created="Thu, 13 Apr 2023 18:20:28 +0000"  >&lt;p&gt;Commit 1909122 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1909122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1909122&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5587&quot; title=&quot;NullPointerException in PDTrueTypeFont.java getPath( )&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5587&quot;&gt;&lt;del&gt;PDFBOX-5587&lt;/del&gt;&lt;/a&gt;: avoid NullPointerException if glyf table is missing&lt;/p&gt;</comment>
                            <comment id="17712010" author="jira-bot" created="Thu, 13 Apr 2023 18:20:32 +0000"  >&lt;p&gt;Commit 1909123 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1909123&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1909123&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5587&quot; title=&quot;NullPointerException in PDTrueTypeFont.java getPath( )&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5587&quot;&gt;&lt;del&gt;PDFBOX-5587&lt;/del&gt;&lt;/a&gt;: avoid NullPointerException if glyf table is missing&lt;/p&gt;</comment>
                            <comment id="17712415" author="teewetee" created="Fri, 14 Apr 2023 14:28:36 +0000"  >&lt;p&gt;I identified several documents where it (according to the log) did happen. I tried it again and it didn&apos;t.&#160; I tried several documents but somehow we only got the error for two weeks and now it is gone. That is really strange. &lt;/p&gt;

&lt;p&gt;Could this be a concurrency issue? E.g. I found the following comment on the getGlyph() method:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// PDFBOX-4219: synchronize on data because it is accessed by several threads
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// when PDFBox is accessing a standard 14 font &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the first time&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I thus tried the image conversion using several threads but couldn&apos;t reproduce it.&lt;/p&gt;

&lt;p&gt;Out of curiosity: Is the code related to the system fonts or to the (missing/invalid) font definition inside the PDF?&lt;/p&gt;</comment>
                            <comment id="17712441" author="tilman" created="Fri, 14 Apr 2023 15:32:51 +0000"  >&lt;p&gt;I remember we had more concurrency issues, but I can&apos;t remember when it was fixed. It was related to standard 14 fonts.&lt;/p&gt;</comment>
                            <comment id="17712457" author="teewetee" created="Fri, 14 Apr 2023 16:28:12 +0000"  >&lt;p&gt;Was it fixed a long time ago (&amp;gt;2.25.0) or in 2.0.26 / 2.0.27 / 2.0.28 / 2.0.29?&lt;/p&gt;</comment>
                            <comment id="17712476" author="tilman" created="Fri, 14 Apr 2023 17:23:07 +0000"  >&lt;p&gt;I really don&apos;t know. My sense of time isn&apos;t very good.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1h9uo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>