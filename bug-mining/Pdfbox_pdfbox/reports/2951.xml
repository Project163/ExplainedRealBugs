<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:14:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5841] First split result document misses metadata after split</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5841</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;This happens with the test file of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5840&quot; title=&quot;When splitting, keep named page destinations that are part of target document(s)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5840&quot;&gt;&lt;del&gt;PDFBOX-5840&lt;/del&gt;&lt;/a&gt; and can also be reproduced with the command line utility: the first split result file doesn&apos;t have the metadata.&lt;/p&gt;

&lt;p&gt;Alternatively it can be reproduced programmatically by adding this code below &lt;tt&gt;assertEquals(5, pageTree.indexOf(pd5.getPage()));&lt;/tt&gt; in &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
assertNotNull(dstDoc.getDocumentCatalog().getMetadata());
ByteArrayOutputStream baos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();
dstDoc.save(baos);
PDDocument reloadedDoc = Loader.loadPDF(baos.toByteArray());
assertNotNull(reloadedDoc.getDocumentCatalog().getMetadata());
reloadedDoc.close();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I believe this is another writing problem, because the metadata exists, but gets lost during the first save, not during a second one (not part of the test code). It is expected to be object 116. It doesn&apos;t happen with 2.0. Attached: two saved files by splitting so that the entire file is the result.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13582757">PDFBOX-5841</key>
            <summary>First split result document misses metadata after split</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Jun 2024 09:26:07 +0000</created>
                <updated>Sat, 10 Aug 2024 07:18:10 +0000</updated>
                            <resolved>Thu, 25 Jul 2024 06:11:16 +0000</resolved>
                                    <version>3.0.3 PDFBox</version>
                    <version>4.0.0</version>
                                    <fixVersion>3.0.3 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>Writing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17855694" author="jira-bot" created="Mon, 17 Jun 2024 18:19:11 +0000"  >&lt;p&gt;Commit 1918391 from lehmi@apache.org in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1918391&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1918391&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5841&quot; title=&quot;First split result document misses metadata after split&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5841&quot;&gt;&lt;del&gt;PDFBOX-5841&lt;/del&gt;&lt;/a&gt;: copy COSObject instead of PDMetadata to avoid a malformed result&lt;/p&gt;</comment>
                            <comment id="17855697" author="jira-bot" created="Mon, 17 Jun 2024 18:23:24 +0000"  >&lt;p&gt;Commit 1918392 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1918392&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1918392&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5841&quot; title=&quot;First split result document misses metadata after split&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5841&quot;&gt;&lt;del&gt;PDFBOX-5841&lt;/del&gt;&lt;/a&gt;: copy COSObject instead of PDMetadata to avoid a malformed result&lt;/p&gt;</comment>
                            <comment id="17855700" author="lehmi" created="Mon, 17 Jun 2024 18:27:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; your assumption was correct. We have to use the COSObject when it comes to COStreams instead of the resuklting PD-object in this case a PDMetadata object. Otherwise the writer may mix up the keys if the stream object in indirect&lt;/p&gt;</comment>
                            <comment id="17855787" author="tilman" created="Tue, 18 Jun 2024 05:03:21 +0000"  >&lt;p&gt;I&apos;m worried because this is unexpected for an average user wanting to do similar manipulations. So the point of this change is that we assign the indirect object? I&apos;m wondering if the problem would happen with the other assignments, e.g. ViewerPreferences if they exist.&lt;/p&gt;</comment>
                            <comment id="17855796" author="lehmi" created="Tue, 18 Jun 2024 05:47:13 +0000"  >&lt;p&gt;Maybe it is the other way around. Have a look at &quot;PDDocument#importPage&quot;, it doesn&apos;t re-use PD-objects at all, they are recreated. However, I&apos;m going to investigate why the first write attempt doesn&apos;t work, but all following ones do&lt;/p&gt;</comment>
                            <comment id="17868565" author="lehmi" created="Thu, 25 Jul 2024 06:08:38 +0000"  >&lt;p&gt;I mixed up the ticket numbers, so that the notifications were added to the wrong ticket. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Here they are&lt;/p&gt;

&lt;p&gt;Commit 1919510 from lehmi@apache.org in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1919510&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1919510&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5481&quot; title=&quot;Add module-info to the project&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5481&quot;&gt;PDFBOX-5481&lt;/a&gt;: wrap indirect objects whenever they are added directly to a COSDictionary or COSArray&lt;/p&gt;

&lt;p&gt;Commit 1919511 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1919511&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1919511&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5481&quot; title=&quot;Add module-info to the project&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5481&quot;&gt;PDFBOX-5481&lt;/a&gt;: wrap indirect objects whenever they are added directly to a COSDictionary or COSArray&lt;/p&gt;</comment>
                            <comment id="17868566" author="lehmi" created="Thu, 25 Jul 2024 06:10:12 +0000"  >&lt;p&gt;I&apos;ve found a more generic way to fix the issue, so that the user doesn&apos;t have to keep that in mind when doing similar stuff&lt;/p&gt;</comment>
                            <comment id="17868567" author="lehmi" created="Thu, 25 Jul 2024 06:11:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; thanks for the intervention.&lt;/p&gt;

&lt;p&gt;Set to resolved&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13069519" name="splitresult1.pdf" size="11979" author="tilman" created="Sat, 15 Jun 2024 09:17:11 +0000"/>
                            <attachment id="13069518" name="splitresult2.pdf" size="15305" author="tilman" created="Sat, 15 Jun 2024 09:17:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1pthc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>