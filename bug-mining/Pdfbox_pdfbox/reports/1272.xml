<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:01:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3038] Text extraction shows glyphs with zero height</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3038</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;This happens with file 001033.pdf:&lt;br/&gt;
2.0:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[108.0,663.6 fs=6.96 xscale=6.96 height=0.0 space=12.1104 width=3.4800034]1
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[144.0,668.4 fs=9.0 xscale=9.0 height=0.0 space=20.25 width=2.996994]I
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[147.417,668.4 fs=9.0 xscale=9.0 height=0.0 space=20.25 width=4.5]n
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[152.337,668.4 fs=9.0 xscale=9.0 height=0.0 space=20.25 width=2.25] 
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[154.88701,668.4 fs=9.0 xscale=9.0 height=0.0 space=20.25 width=2.501999]t
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[157.809,668.4 fs=9.0 xscale=9.0 height=0.0 space=20.25 width=4.5]h
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[162.729,668.4 fs=9.0 xscale=9.0 height=0.0 space=20.25 width=3.9960022]e
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[167.145,668.4 fs=9.0 xscale=9.0 height=0.0 space=20.25 width=2.25] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;1.8:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[108.0,663.6 fs=6.96 xscale=6.96 height=4.57272 space=1.74 width=3.4800034]1
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[144.0,668.4 fs=9.0 xscale=9.0 height=5.913 space=2.25 width=2.996994]I
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[147.417,668.4 fs=9.0 xscale=9.0 height=5.913 space=2.25 width=4.5]n
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[152.337,668.4 fs=9.0 xscale=9.0 height=5.913 space=2.25 width=2.25] 
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[154.88701,668.4 fs=9.0 xscale=9.0 height=5.913 space=2.25 width=2.501999]t
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[157.809,668.4 fs=9.0 xscale=9.0 height=5.913 space=2.25 width=4.5]h
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[162.729,668.4 fs=9.0 xscale=9.0 height=5.913 space=2.25 width=3.9960022]e
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[167.145,668.4 fs=9.0 xscale=9.0 height=5.913 space=2.25 width=2.25] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The font has an empty bbox:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def
/FontBBox {0 0 0 0}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;1.8 had this code to get the height (in PDSimpleFont):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                PDRectangle fontBBox = desc.getFontBoundingBox();
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fontBBox != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
                {
                    retval = fontBBox.getHeight() / 2;
                }
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( retval == 0 )
                {
                    retval = desc.getCapHeight();
                }
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( retval == 0 )
                {
                    retval = desc.getAscent();
                }
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( retval == 0 )
                {
                    retval = desc.getXHeight();
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (retval &amp;gt; 0)
                    {
                        retval -= desc.getDescent();
                    }
                }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2.0 has only this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; glyphHeight = font.getBoundingBox().getHeight() / 2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So 2.0 takes the height from the font itself, and has no Plan B.&lt;/p&gt;

&lt;p&gt;Getting the BBox from the font descriptor brings correct heights. (And a better text extraction)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12906293">PDFBOX-3038</key>
            <summary>Text extraction shows glyphs with zero height</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Tue, 20 Oct 2015 16:16:33 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:06 +0000</updated>
                            <resolved>Tue, 20 Oct 2015 17:23:31 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Text extraction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14965397" author="jira-bot" created="Tue, 20 Oct 2015 17:02:54 +0000"  >&lt;p&gt;Commit 1709646 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1709646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1709646&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3038&quot; title=&quot;Text extraction shows glyphs with zero height&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3038&quot;&gt;&lt;del&gt;PDFBOX-3038&lt;/del&gt;&lt;/a&gt;: add test files&lt;/p&gt;</comment>
                            <comment id="14965403" author="jira-bot" created="Tue, 20 Oct 2015 17:04:03 +0000"  >&lt;p&gt;Commit 1709647 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1709647&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1709647&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3038&quot; title=&quot;Text extraction shows glyphs with zero height&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3038&quot;&gt;&lt;del&gt;PDFBOX-3038&lt;/del&gt;&lt;/a&gt;: return BBox from font descriptor if font BBox empty&lt;/p&gt;</comment>
                            <comment id="14965404" author="tilman" created="Tue, 20 Oct 2015 17:06:30 +0000"  >&lt;p&gt;Content is not under copyright (speech by FTC head).&lt;/p&gt;</comment>
                            <comment id="14965410" author="tilman" created="Tue, 20 Oct 2015 17:14:30 +0000"  >&lt;p&gt;new output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[108.0,663.6 fs=6.96 xscale=6.96 height=4.57272 space=12.1104 width=3.4800034]1
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[144.0,668.4 fs=9.0 xscale=9.0 height=5.913 space=20.25 width=2.996994]I
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[147.417,668.4 fs=9.0 xscale=9.0 height=5.913 space=20.25 width=4.5]n
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[152.337,668.4 fs=9.0 xscale=9.0 height=5.913 space=20.25 width=2.25] 
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[154.88701,668.4 fs=9.0 xscale=9.0 height=5.913 space=20.25 width=2.501999]t
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[157.809,668.4 fs=9.0 xscale=9.0 height=5.913 space=20.25 width=4.5]h
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[162.729,668.4 fs=9.0 xscale=9.0 height=5.913 space=20.25 width=3.9960022]e
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[167.145,668.4 fs=9.0 xscale=9.0 height=5.913 space=20.25 width=2.25] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14965422" author="tilman" created="Tue, 20 Oct 2015 17:23:31 +0000"  >&lt;p&gt;Setting to resolved;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Text extraction for this file is now identical between 1.8 and 2.0&lt;/li&gt;
	&lt;li&gt;Space width output is not identical. I&apos;m gonna think about this and open another issue if useful&lt;/li&gt;
	&lt;li&gt;Same problem may exist for other font types, but I prefer not changing anything before I have a test file.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12906790">PDFBOX-3042</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12767623" name="PDFBOX-3038-001033-p2.pdf" size="56750" author="tilman" created="Tue, 20 Oct 2015 16:57:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2n8vr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>