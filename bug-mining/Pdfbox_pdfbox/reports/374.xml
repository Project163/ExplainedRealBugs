<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:54:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1808] PDFTextStripper.getText - hight memory usage</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1808</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;i&apos;m trying to extract text from pdfs but i can find that the PDFTextStripper use a lot of memory.&lt;br/&gt;
With a pdf that have 2676 pages (for a 4.6Mo size) it use 1.5Go memory.&lt;br/&gt;
I also constat that the memory is&apos;nt free after the getText method is called.&lt;/p&gt;

&lt;p&gt;You can see my code bellow:&lt;br/&gt;
double virgule = Math.pow(10, 2);&lt;br/&gt;
		System.out.println(&quot;START - Total memory (Mo): &quot; + Math.round((Runtime.getRuntime().totalMemory()/1000000) * virgule) / virgule);&lt;br/&gt;
PDDocument cd = PDDocument.load(file);&lt;br/&gt;
		System.out.println(&quot;PDDocument getNumberOfPages - Nombre de pages: &quot; + cd.getNumberOfPages());&lt;br/&gt;
		System.out.println(&quot;PDDocument load - Total memory (Mo): &quot; + Math.round((Runtime.getRuntime().totalMemory()/1000000) * virgule) / virgule);&lt;br/&gt;
String pdfText = &quot;&quot;;&lt;br/&gt;
try{&lt;br/&gt;
	PDFTextStripper stripper = new PDFTextStripper();&lt;br/&gt;
	pdfText = stripper.getText(cd);&lt;br/&gt;
			System.out.println(&quot;PDFTextStripper getText - Total memory (Mo): &quot; + Math.round((Runtime.getRuntime().totalMemory()/1000000) * virgule) / virgule);&lt;br/&gt;
	stripper.resetEngine();&lt;br/&gt;
	stripper = null;&lt;br/&gt;
			System.out.println(&quot;PDFTextStripper resetEngine - Total memory (Mo): &quot; + Math.round((Runtime.getRuntime().totalMemory()/1000000) * virgule) / virgule);&lt;br/&gt;
}&lt;br/&gt;
finally{&lt;br/&gt;
	if( cd!=null )&lt;/p&gt;
{
		cd.close();
		cd = null;
				System.out.println(&quot;PDDocument close - Total memory (Mo): &quot; + Math.round((Runtime.getRuntime().totalMemory()/1000000) * virgule) / virgule);
	}
&lt;p&gt;}&lt;br/&gt;
retour = new TextField(fieldName, pdfText, Field.Store.NO);&lt;br/&gt;
		System.out.println(&quot;TextField - Total memory (Mo): &quot; + Math.round((Runtime.getRuntime().totalMemory()/1000000) * virgule) / virgule);&lt;/p&gt;


&lt;p&gt;And the result into my output window:&lt;br/&gt;
START - Total memory (Mo): 95.0&lt;br/&gt;
PDDocument getNumberOfPages - Nombre de pages: 2676&lt;br/&gt;
PDDocument load - Total memory (Mo): 121.0&lt;br/&gt;
PDFTextStripper getText - Total memory (Mo): 757.0&lt;br/&gt;
PDFTextStripper resetEngine - Total memory (Mo): 757.0&lt;br/&gt;
PDDocument close - Total memory (Mo): 757.0&lt;br/&gt;
TextField - Total memory (Mo): 757.0&lt;br/&gt;
pdfText - Total memory (Mo): 757.0&lt;/p&gt;

&lt;p&gt;I also try to call System.gc() but the memory use is the same.&lt;/p&gt;</description>
                <environment>Windows 7&lt;br/&gt;
Java jdk 1.7.0_45</environment>
        <key id="12684034">PDFBOX-1808</key>
            <summary>PDFTextStripper.getText - hight memory usage</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="jguyenot">Guyenot Jeremy</reporter>
                        <labels>
                            <label>performance</label>
                    </labels>
                <created>Wed, 11 Dec 2013 13:50:38 +0000</created>
                <updated>Sun, 10 May 2015 13:37:33 +0000</updated>
                            <resolved>Sun, 26 Jan 2014 18:48:40 +0000</resolved>
                                    <version>1.8.2</version>
                    <version>1.8.3</version>
                                    <fixVersion>1.8.4</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Text extraction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="259200">72h</timeoriginalestimate>
                            <timeestimate seconds="259200">72h</timeestimate>
                                        <comments>
                            <comment id="13847891" author="tilman" created="Fri, 13 Dec 2013 20:53:06 +0000"  >&lt;p&gt;What happens if you extract from several PDFs in the software, or of the same PDF several times? Is there more and more memory used? Or does it stay the same?&lt;/p&gt;

&lt;p&gt;I&apos;m asking this to clarify wether 1) pdfbox is just using a lot of memory or 2) pdfbox has memory leaks.&lt;/p&gt;

&lt;p&gt;If you are using netbeans, the profiler has some cool features. It helped me find a bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1694&quot; title=&quot;Bug in org.apache.pdfbox.io.Ascii85InputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1694&quot;&gt;&lt;del&gt;PDFBOX-1694&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13848342" author="jguyenot" created="Sat, 14 Dec 2013 12:14:54 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;after more tests i find some case where the memory leaks:&lt;br/&gt;
1) after extracting text from certain pdf the memory is not free&lt;br/&gt;
START - Total memory (Mo): 468.0&lt;br/&gt;
&amp;#8211; File : D:\Armoires\DEVEARM\mphh\image\167\83545\DOSSIER DE CANDIDATURE_001.pdf&lt;br/&gt;
&amp;#8211; File size (ko): 4975.0&lt;br/&gt;
----- PDDocument.load - Total memory (Mo): 468.0&lt;br/&gt;
----- PDDocument.getNumberOfPages : 2676&lt;br/&gt;
----- PDFTextStripper.getText - Total memory (Mo): 747.0&lt;br/&gt;
START - Total memory (Mo): 745.0&lt;br/&gt;
&amp;#8211; File : D:\Armoires\DEVEARM\mphh\image\167\83545\4 - EVALUATION ET BILANS\BILAN SOCIAL\Reprise adulte_001.pdf&lt;br/&gt;
&amp;#8211; File size (ko): 79.0&lt;br/&gt;
&amp;#8211; File size (Mo): 0.0&lt;br/&gt;
----- PDDocument.load - Total memory (Mo): 745.0&lt;br/&gt;
----- PDDocument.getNumberOfPages : 2&lt;br/&gt;
----- PDFTextStripper.getText - Total memory (Mo): 745.0&lt;/p&gt;

&lt;p&gt;2) on certain other i find this:&lt;br/&gt;
START - Total memory (Mo): 268.0&lt;br/&gt;
&amp;#8211; File : D:\Armoires\DEVEARM\mphh\ocr\188\94458\4 - EVALUATION ET BILANS\ADMISSION URGENCE\Reprise adulte_003.pdf&lt;br/&gt;
&amp;#8211; File size (ko): 1183.0&lt;br/&gt;
&amp;#8211; File size (Mo): 1.0&lt;br/&gt;
d&#233;c. 14, 2013 12:55:43 PM org.apache.pdfbox.pdfparser.BaseParser parseCOSStream&lt;br/&gt;
WARNING: Specified stream length 2110 is wrong. Fall back to reading stream until &apos;endstream&apos;.&lt;br/&gt;
d&#233;c. 14, 2013 12:55:43 PM org.apache.pdfbox.pdfparser.BaseParser parseCOSStream&lt;br/&gt;
WARNING: Specified stream length 1286 is wrong. Fall back to reading stream until &apos;endstream&apos;.&lt;br/&gt;
d&#233;c. 14, 2013 12:55:43 PM org.apache.pdfbox.pdfparser.BaseParser parseCOSStream&lt;br/&gt;
WARNING: Specified stream length 706 is wrong. Fall back to reading stream until &apos;endstream&apos;.&lt;br/&gt;
d&#233;c. 14, 2013 12:55:43 PM org.apache.pdfbox.pdfparser.BaseParser parseCOSStream&lt;br/&gt;
WARNING: Specified stream length 420 is wrong. Fall back to reading stream until &apos;endstream&apos;.&lt;br/&gt;
d&#233;c. 14, 2013 12:55:43 PM org.apache.pdfbox.pdfparser.BaseParser parseCOSStream&lt;br/&gt;
WARNING: Specified stream length 936 is wrong. Fall back to reading stream until &apos;endstream&apos;.&lt;br/&gt;
----- PDDocument.load - Total memory (Mo): 268.0&lt;br/&gt;
----- PDDocument.getNumberOfPages : 41&lt;br/&gt;
----- PDFTextStripper.getText - Total memory (Mo): 469.0&lt;br/&gt;
START - Total memory (Mo): 469.0&lt;br/&gt;
&amp;#8211; File : D:\Armoires\DEVEARM\mphh\image\167\83545\0 - INSTRUCTION\RECEVABILITE\AR Complet_001.pdf&lt;br/&gt;
&amp;#8211; File size (ko): 115.0&lt;br/&gt;
&amp;#8211; File size (Mo): 0.0&lt;br/&gt;
----- PDDocument.load - Total memory (Mo): 469.0&lt;br/&gt;
----- PDDocument.getNumberOfPages : 3&lt;br/&gt;
----- PDFTextStripper.getText - Total memory (Mo): 469.0&lt;/p&gt;

&lt;p&gt;You can see that the memory is not free after use.&lt;br/&gt;
I can&apos;t give you my pdf files because they contained some personnals informations.&lt;/p&gt;</comment>
                            <comment id="13848343" author="jguyenot" created="Sat, 14 Dec 2013 12:16:19 +0000"  >&lt;p&gt;4Mo&lt;br/&gt;
2676 pages&lt;br/&gt;
after getText the memory up to more 200Mo&lt;/p&gt;</comment>
                            <comment id="13848464" author="tilman" created="Sat, 14 Dec 2013 21:29:56 +0000"  >&lt;p&gt;I did a test with the PDF specification PDF, running it 5 times, freeing everything and then just idling. &lt;/p&gt;

&lt;p&gt;START - Total memory (Mo): 128.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 947.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 1093.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 1091.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 1169.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 1192.0&lt;br/&gt;
After sleep - Total memory (Mo): 1192.0&lt;br/&gt;
After sleep - Total memory (Mo): 1192.0&lt;br/&gt;
After sleep - Total memory (Mo): 1192.0&lt;br/&gt;
After sleep - Total memory (Mo): 1192.0&lt;br/&gt;
After sleep - Total memory (Mo): 1192.0&lt;/p&gt;


&lt;p&gt;Yes, there&apos;s a lot. I looked at it with the profiler. I believe its all static objects. I made screenshots of the count of pdfbox objects, and then did a run with 50 strips. I compared the amount of org.apache.* objects after doing a gc, and its the same.&lt;/p&gt;

&lt;p&gt;That java itself is using more and more memory, has to do with poor memory management of the java runtime.&lt;/p&gt;</comment>
                            <comment id="13848465" author="tilman" created="Sat, 14 Dec 2013 21:31:30 +0000"  >&lt;p&gt;Screenshots after 5 and after 50 text strips&lt;/p&gt;</comment>
                            <comment id="13849138" author="jguyenot" created="Mon, 16 Dec 2013 13:15:29 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;i give you some print screen of the execution results.&lt;/p&gt;

&lt;p&gt;I you need other.&lt;/p&gt;

&lt;p&gt;Best regards&lt;/p&gt;</comment>
                            <comment id="13849213" author="tilman" created="Mon, 16 Dec 2013 14:54:54 +0000"  >&lt;p&gt;The nps file is the most interesting: look at the &quot;live&quot; columns only. Yes you&apos;ll find much strings and chars. Most, I believe, are the strings from the text stripping. Now sort by name and look at org.apache.fontbox* and org.apache.pdfbox.*, again only at the &quot;live&quot; colums. At the few places where the number was != 0, I was able to find static declarations, e.g. maps to keep objects to speed things up. What I also found (and is related to what you found) is that there are static maps, they are found in COSName and in PDFont. IF MY THEORY is correct - then you might want to try to call COSName.clearResources() and PDFont.clearResources() after strips to see if it gets better. Of course your software will be slower.&lt;/p&gt;

&lt;p&gt;(The sad news, for me, is that the NB profiler isn&apos;t telling the whole story - it claims that createFont is calling PDFont&amp;lt;clinit&amp;gt; but doesn&apos;t tell the calls between)&lt;/p&gt;</comment>
                            <comment id="13849257" author="jguyenot" created="Mon, 16 Dec 2013 16:06:16 +0000"  >&lt;p&gt;I try this:&lt;br/&gt;
	PDDocument cd = PDDocument.load(file);&lt;br/&gt;
	PDFTextStripper stripper = new PDFTextStripper();&lt;br/&gt;
	retour = stripper.getText(cd);&lt;br/&gt;
	COSName.clearResources();&lt;br/&gt;
	PDFont.clearResources();&lt;/p&gt;

&lt;p&gt;But this is the result:&lt;br/&gt;
	PDDocument.load - Total memory (Mo): 747.0&lt;br/&gt;
	PDFTextStripper.getText - Total memory (Mo): 747.0&lt;br/&gt;
	COSName.clearResources - Total memory (Mo): 747.0&lt;br/&gt;
	PDFont.clearResources - Total memory (Mo): 747.0&lt;/p&gt;</comment>
                            <comment id="13849340" author="jguyenot" created="Mon, 16 Dec 2013 17:06:28 +0000"  >&lt;p&gt;When a file get me this message into the output window of netbeans:&lt;br/&gt;
d&#233;c. 16, 2013 5:39:54 PM org.apache.pdfbox.pdfparser.BaseParser parseCOSStream&lt;br/&gt;
WARNING: Specified stream length 1550 is wrong. Fall back to reading stream until &apos;endstream&apos;.&lt;/p&gt;

&lt;p&gt;the memory is increase. Do you know why?&lt;/p&gt;


&lt;p&gt;Logs:&lt;br/&gt;
&amp;#8211; START - Total memory (Mo): 95.0&lt;br/&gt;
&amp;#8211; File : D:\Armoires\DEVEARM\mphh\ocr\2\1450\2 - SITUATION\AUTRES ELEMENTS DE SITUATION\Reprise adulte_001.pdf&lt;br/&gt;
d&#233;c. 16, 2013 5:39:54 PM org.apache.pdfbox.pdfparser.BaseParser parseCOSStream&lt;br/&gt;
WARNING: Specified stream length 1550 is wrong. Fall back to reading stream until &apos;endstream&apos;.&lt;br/&gt;
----- PDFParser.getPDDocument - Total memory (Mo): 95.0&lt;br/&gt;
----- PDFTextStripper.getText - Total memory (Mo): 121.0&lt;br/&gt;
----- ALL closes - Total memory (Mo): 121.0&lt;/p&gt;</comment>
                            <comment id="13849344" author="msahyoun" created="Mon, 16 Dec 2013 17:12:09 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;could you try using PDDocument.loadNonSeq instead of PDDocument.load? loadNonSeq parses PDFs following the Xref entries (which is inline with the PDF spec) whereas load parses sequentially which can lead to errors such as the last one you are reporting.&lt;/p&gt;

&lt;p&gt;BR&lt;br/&gt;
Maruan&lt;/p&gt;</comment>
                            <comment id="13849353" author="tilman" created="Mon, 16 Dec 2013 17:17:53 +0000"  >&lt;p&gt;Re your comment after having tried clearResources() - you didn&apos;t clean up the stripper itself and all the rest, which you did in your test program. Plus, you should look at it with the profiler like you did last time.&lt;/p&gt;</comment>
                            <comment id="13849737" author="jguyenot" created="Mon, 16 Dec 2013 21:28:38 +0000"  >&lt;p&gt;I try the PDDocument.loadNonSeq with an randomaccessfile in the second parameter.&lt;br/&gt;
No change in the memory.&lt;br/&gt;
When i load the file &quot;DOSSIER DE CANDIDATURE_001.pdf&quot; the memory is up from 120Mo to 750Mo and the memory keep this size.&lt;/p&gt;</comment>
                            <comment id="13855238" author="lehmi" created="Sun, 22 Dec 2013 18:56:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1777&quot; title=&quot;memory leak in org.apache.pdfbox.cos.COSDocument&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1777&quot;&gt;&lt;del&gt;PDFBOX-1777&lt;/del&gt;&lt;/a&gt; should already release some of the resources at the end of parsing.&lt;/p&gt;</comment>
                            <comment id="13855253" author="tilman" created="Sun, 22 Dec 2013 20:22:01 +0000"  >&lt;p&gt;I repeated the test mentioned in &quot;14/Dec/13 22:29&quot;, the output is slightly better:&lt;/p&gt;

&lt;p&gt;START - Total memory (Mo): 128.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 903.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 914.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 1020.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 1070.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 1074.0&lt;br/&gt;
After sleep - Total memory (Mo): 1076.0&lt;br/&gt;
After sleep - Total memory (Mo): 1076.0&lt;br/&gt;
After sleep - Total memory (Mo): 1076.0&lt;/p&gt;</comment>
                            <comment id="13855294" author="lehmi" created="Sun, 22 Dec 2013 21:56:06 +0000"  >&lt;p&gt;I made some other changes ready to be committed but I have some issues with my local repository. Those changes will definitely improve the memory footprint.&lt;/p&gt;</comment>
                            <comment id="13855838" author="lehmi" created="Mon, 23 Dec 2013 18:51:36 +0000"  >&lt;p&gt;I removed some cached values which are only used one time in revision 1553174. In revision 1553175 a added some code to release used resources when those are no longer needed.&lt;/p&gt;</comment>
                            <comment id="13855891" author="jguyenot" created="Mon, 23 Dec 2013 20:00:13 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;thank you for your work on this problem.&lt;/p&gt;

&lt;p&gt;I am currently on vacation but when I returned to work I test your changes and you&apos;d be back.&lt;/p&gt;

&lt;p&gt;Have a great holiday.&lt;/p&gt;</comment>
                            <comment id="13855917" author="tilman" created="Mon, 23 Dec 2013 20:35:02 +0000"  >&lt;p&gt;@Andreas: it no longer builds. I believe that the problem is in testCreateEmptyPdf(), &quot;pdfDoc.close();&quot; is too early.&lt;/p&gt;</comment>
                            <comment id="13855947" author="lehmi" created="Mon, 23 Dec 2013 21:35:57 +0000"  >&lt;p&gt;Yes, I missed that, sorry my fault. I&apos;ll have a look&lt;/p&gt;</comment>
                            <comment id="13855952" author="lehmi" created="Mon, 23 Dec 2013 21:41:52 +0000"  >&lt;p&gt;I fixed the test in revision 1553220. Thanks for the pointer!&lt;/p&gt;</comment>
                            <comment id="13861759" author="lehmi" created="Fri, 3 Jan 2014 18:36:46 +0000"  >&lt;p&gt;Can anybody confirm, that my changes are working well? I&apos;d like to add those to the 1.8 branch as well.&lt;/p&gt;</comment>
                            <comment id="13862257" author="tilman" created="Sat, 4 Jan 2014 10:46:34 +0000"  >&lt;p&gt;Lets just wait until Jeremy is back from vacation. My own tests show a higher usage (?!) but I don&apos;t trust java on telling the truth, and there were other changes since then. I didn&apos;t save my own memory &quot;.nps&quot; snapshot so I can&apos;t compare. Your code changes looked like it should have improved.&lt;/p&gt;

&lt;p&gt;START - Total memory (Mo): 128.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 926.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 1026.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 1027.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 1021.0&lt;br/&gt;
strip size: 2595883&lt;br/&gt;
PDDocument close - Total memory (Mo): 1171.0&lt;br/&gt;
After sleep - Total memory (Mo): 1174.0&lt;br/&gt;
After sleep - Total memory (Mo): 1174.0&lt;/p&gt;</comment>
                            <comment id="13862278" author="lehmi" created="Sat, 4 Jan 2014 12:11:43 +0000"  >&lt;p&gt;I&apos;m using Java VisualVM (it&apos;s part of the jdk) as profiler. It has a lot of monitoring features, e.g. one can see all living objects so that it is simply possible to see if those can be finalized or not.&lt;/p&gt;

&lt;p&gt;In my environment all objects were released, at least after triggering the GC.&lt;/p&gt;</comment>
                            <comment id="13868761" author="lehmi" created="Sat, 11 Jan 2014 12:51:41 +0000"  >&lt;p&gt;I added a null check to PDDocument#close in revision 1557374 to avoid a NPE when splitting a pdf&lt;/p&gt;</comment>
                            <comment id="13870503" author="jguyenot" created="Tue, 14 Jan 2014 08:02:49 +0000"  >&lt;p&gt;Hello,&lt;br/&gt;
thank you for your response.&lt;br/&gt;
I try to integrate your changes into my project but i use the &quot;.jar&quot;.&lt;br/&gt;
Is it possible to have version &quot;jar&quot; of all changes to the Netbeans integrated into my project?&lt;/p&gt;</comment>
                            <comment id="13870556" author="tilman" created="Tue, 14 Jan 2014 09:19:47 +0000"  >&lt;p&gt;Can you access the svn repository from where you are now, or is your firewall preventing to do it? The url is &lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/repos/asf/pdfbox/trunk/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/pdfbox/trunk/&lt;/a&gt;&lt;br/&gt;
(see &lt;a href=&quot;http://pdfbox.apache.org/downloads.html#scm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pdfbox.apache.org/downloads.html#scm&lt;/a&gt; )&lt;/p&gt;</comment>
                            <comment id="13870566" author="lehmi" created="Tue, 14 Jan 2014 09:35:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jguyenot&quot; class=&quot;user-hover&quot; rel=&quot;jguyenot&quot;&gt;jguyenot&lt;/a&gt; There is no official release containing those changes and we don&apos;t have any plans to release one yet. If you are using maven, you can adress the SNAPSHOT versions (1.8.4-SNAPSHOT or 2.0.0-SNAPSHOT) of PDFBox or simply download the latest SNAPSHOT build from &lt;a href=&quot;https://repository.apache.org/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;nexus&lt;/a&gt;. But be aware that these are unstable builds.&lt;/p&gt;

&lt;p&gt;EDIT:&lt;br/&gt;
I forgot to mention that you have to adress our &lt;a href=&quot;https://repository.apache.org/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;maven repository&lt;/a&gt; if you want to use the SNAPHOT builds within your maven environment.&lt;br/&gt;
Please post any further questions related to this general topic to our &lt;a href=&quot;http://pdfbox.apache.org/mailinglists.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;mailing list&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13873111" author="lehmi" created="Thu, 16 Jan 2014 07:13:42 +0000"  >&lt;p&gt;I added most of the changes (excluding 1553174 as it introduces an api incompatibility) to the 1.8 branch in revision 1558705.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jguyenot&quot; class=&quot;user-hover&quot; rel=&quot;jguyenot&quot;&gt;jguyenot&lt;/a&gt; Any luck with your test? Do you need some additional help/information?&lt;/p&gt;</comment>
                            <comment id="13876343" author="jguyenot" created="Mon, 20 Jan 2014 11:07:52 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;my netbeans project is like in &quot;netbeans_project.jpg&quot;.&lt;br/&gt;
So how can i integrated the sources of &quot;http://svn.apache.org/repos/asf/pdfbox/trunk/&quot; in place of the &quot;pdfbox-app-1.8.3.jar&quot;?&lt;/p&gt;</comment>
                            <comment id="13876401" author="tilman" created="Mon, 20 Jan 2014 12:29:51 +0000"  >&lt;p&gt;With netbeans, do &quot;Team&quot;, &quot;subversion&quot;, &quot;checkout&quot;&lt;/p&gt;

&lt;p&gt;enter &lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/repos/asf/pdfbox/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/pdfbox/trunk&lt;/a&gt;&lt;br/&gt;
next&lt;br/&gt;
replace &quot;pdfbox/trunk&quot; with &quot;pdfbox/branches/1.8&quot;&lt;br/&gt;
finish&lt;/p&gt;

&lt;p&gt;...wait some time...&lt;/p&gt;

&lt;p&gt;netbeans will ask you to create a project, do so. At the next question, click on &quot;pdfbox reactor&quot; only. It will create a project &quot;pdfbox reactor&quot;. Then do a &quot;build&quot; on that one.&lt;/p&gt;

&lt;p&gt;The jar files you need will be in the &quot;xxx\target&quot; directories. Or all together in &lt;br/&gt;
1.8\war\target\pdfbox-war-2.0.0-SNAPSHOT\WEB-INF\lib&lt;/p&gt;


&lt;p&gt;If you can&apos;t do it at work because of firewall, do it from home.&lt;/p&gt;</comment>
                            <comment id="13876438" author="jguyenot" created="Mon, 20 Jan 2014 13:13:59 +0000"  >&lt;p&gt;Thanks Tilman Hausherr,&lt;/p&gt;

&lt;p&gt;I create a project and compile.&lt;br/&gt;
I added the new jar files to my library folder and i test.&lt;/p&gt;

&lt;p&gt;This is the result:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;File : DOSSIER DE CANDIDATURE_001.pdf&lt;/li&gt;
	&lt;li&gt;START - Total memory (Mo): 167.0&lt;/li&gt;
	&lt;li&gt;PDDocument getNumberOfPages - Nombre de pages: 2676&lt;/li&gt;
	&lt;li&gt;PDDocument load - Total memory (Mo): 167.0&lt;/li&gt;
	&lt;li&gt;PDFTextStripper getText - Total memory (Mo): 706.0&lt;/li&gt;
	&lt;li&gt;PDDocument close - Total memory (Mo): 706.0&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;You can see that the memory is not released after treatment.&lt;/p&gt;</comment>
                            <comment id="13877740" author="lehmi" created="Tue, 21 Jan 2014 19:01:29 +0000"  >&lt;p&gt;I ran another test and came to the same result. I used ExtractText (unmodified, current trunk) to extract the text of the attached pdf. &lt;/p&gt;

&lt;p&gt;The attached graphic shows the heap space during the execution and you might notice that all the allocated memory was freed at 19:51:16 when I performed a System.gc after closing the pdf.&lt;/p&gt;

&lt;p&gt;Maybe you should du/use something else to monitor the memory usage.&lt;/p&gt;
</comment>
                            <comment id="13878461" author="tboehme" created="Wed, 22 Jan 2014 09:39:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jguyenot&quot; class=&quot;user-hover&quot; rel=&quot;jguyenot&quot;&gt;jguyenot&lt;/a&gt; please inform yourself about the meaning of the memory statistics provided by Java. &lt;b&gt;Total memory&lt;/b&gt; is (as the name says) all the memory the VM uses. What you want is the used memory (by your application). This has to be calculated by totalMem - freeMem (see e.g. &lt;a href=&quot;http://stackoverflow.com/questions/3571203/what-is-the-exact-meaning-of-runtime-getruntime-totalmemory-and-freememory&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/3571203/what-is-the-exact-meaning-of-runtime-getruntime-totalmemory-and-freememory&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13878466" author="tboehme" created="Wed, 22 Jan 2014 09:43:22 +0000"  >&lt;p&gt;one addition to my last comment: it is JVM implementation dependent if in case of large free memory the JVM will release memory to the operating system. In case of server VMs they typically keep the allocated memory - independent if the Java application still needs it.&lt;/p&gt;</comment>
                            <comment id="13882380" author="lehmi" created="Sun, 26 Jan 2014 18:48:40 +0000"  >&lt;p&gt;I ran a lot of tests and couldn&apos;t find any issue. The allocated memory is released after closing the pdf and running the gc.&lt;br/&gt;
I set this to resolved, as I want to cut a new 1.8 release soon.&lt;/p&gt;

&lt;p&gt;We should open a new issue If something is still missing.&lt;/p&gt;

&lt;p&gt;Thanks for all your input and help!&lt;/p&gt;</comment>
                            <comment id="13893517" author="jguyenot" created="Thu, 6 Feb 2014 16:42:02 +0000"  >&lt;p&gt;When i use my windows task manager this is the same result.&lt;br/&gt;
After a long moment the memory is release.&lt;/p&gt;

&lt;p&gt;I try with the 1.8.4.SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="13893672" author="jahewson" created="Thu, 6 Feb 2014 19:10:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jguyenot&quot; class=&quot;user-hover&quot; rel=&quot;jguyenot&quot;&gt;jguyenot&lt;/a&gt;, perhaps the JVM settings in &lt;a href=&quot;http://stackoverflow.com/a/4625142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/a/4625142&lt;/a&gt; will help you.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12828641">PDFBOX-2792</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12678568">PDFBOX-1777</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12618897" name="1808-java char copyof.jpg" size="526950" author="jguyenot" created="Mon, 16 Dec 2013 13:15:29 +0000"/>
                            <attachment id="12618898" name="1808-java char copyofrange.jpg" size="615485" author="jguyenot" created="Mon, 16 Dec 2013 13:15:29 +0000"/>
                            <attachment id="12618899" name="1808-java usage.jpg" size="208107" author="jguyenot" created="Mon, 16 Dec 2013 13:15:29 +0000"/>
                            <attachment id="12618900" name="1808-pdfbox usage.jpg" size="603260" author="jguyenot" created="Mon, 16 Dec 2013 13:15:29 +0000"/>
                            <attachment id="12618901" name="1808-snapshot.nps" size="326091" author="jguyenot" created="Mon, 16 Dec 2013 13:15:29 +0000"/>
                            <attachment id="12618770" name="DOSSIER DE CANDIDATURE_001.pdf" size="5095283" author="jguyenot" created="Sat, 14 Dec 2013 12:16:19 +0000"/>
                            <attachment id="12624179" name="Screenshot2014-01-21-19-51-24.png" size="126406" author="lehmi" created="Tue, 21 Jan 2014 19:01:29 +0000"/>
                            <attachment id="12623934" name="netbeans_project.jpg" size="289295" author="jguyenot" created="Mon, 20 Jan 2014 11:06:11 +0000"/>
                            <attachment id="12618789" name="s5-1.png" size="204429" author="tilman" created="Sat, 14 Dec 2013 21:31:30 +0000"/>
                            <attachment id="12618790" name="s5-2.png" size="205340" author="tilman" created="Sat, 14 Dec 2013 21:31:30 +0000"/>
                            <attachment id="12618791" name="s50-1.png" size="216914" author="tilman" created="Sat, 14 Dec 2013 21:31:30 +0000"/>
                            <attachment id="12618792" name="s50-2.png" size="213698" author="tilman" created="Sat, 14 Dec 2013 21:31:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363106</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ql9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363412</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>