<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:01:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2252] PDFTextStripper has problem with documents with mixed language directions</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2252</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;When the input document of PDFTextStripper is a combination of right-to-left and left-to-right languages, the output characters of one language is reversed. &lt;br/&gt;
A sample bilingual pdf document is attached.&lt;br/&gt;
PDFTextStripper has a variable &quot;isRtlDominant&quot; in &quot;writePage&quot; function, which is defined as follows:     boolean isRtlDominant = rtlCount &amp;gt; ltrCount;&lt;br/&gt;
This class clearly count the number of rtl characters and decide if the whole content should be revered or not. It&apos;s not true, it must operate on each word, not the whole document.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12731590">PDFBOX-2252</key>
            <summary>PDFTextStripper has problem with documents with mixed language directions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="msahyoun">Maruan Sahyoun</assignee>
                                    <reporter username="amirjadidi">Amir</reporter>
                        <labels>
                            <label>Bidi</label>
                    </labels>
                <created>Sun, 3 Aug 2014 04:43:59 +0000</created>
                <updated>Mon, 20 Mar 2017 11:14:34 +0000</updated>
                            <resolved>Tue, 3 Jan 2017 07:37:23 +0000</resolved>
                                    <version>1.8.6</version>
                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Text extraction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14084020" author="lehmi" created="Sun, 3 Aug 2014 16:13:57 +0000"  >&lt;p&gt;Please attach a sample pdf &lt;/p&gt;</comment>
                            <comment id="14084048" author="amirjadidi" created="Sun, 3 Aug 2014 17:45:15 +0000"  >&lt;p&gt;Dear Andreas,&lt;br/&gt;
Unfortunately I can&apos;t attach the sample pdf file. The error message is attached (error.png). Also, the sample bilingual pdf (test.pdf) is attached.&lt;br/&gt;
Kind regards,&lt;br/&gt;
Amir&lt;/p&gt;


</comment>
                            <comment id="14084533" author="lehmi" created="Mon, 4 Aug 2014 10:54:52 +0000"  >&lt;p&gt;The attached file is there even though you got that error. However, I&apos;ve deleted the error message.&lt;/p&gt;</comment>
                            <comment id="14086823" author="amirjadidi" created="Tue, 5 Aug 2014 21:33:44 +0000"  >&lt;p&gt;Dear Andreas,&lt;br/&gt;
I think RTL should be checked when writing each line (currently it checked in each page).&lt;br/&gt;
&quot;writeLine&quot; function is defined as: void writeLine(List&amp;lt;WordWithTextPositions&amp;gt; line, boolean isRtlDominant)&lt;br/&gt;
but the body of function does not any leverage of &quot;isRtlDominant&quot;. &lt;/p&gt;</comment>
                            <comment id="14086875" author="jahewson" created="Tue, 5 Aug 2014 22:07:43 +0000"  >&lt;p&gt;Flipping the lines would seem problematic too (though still an improvement), how would it handle:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A line with an Arabic &#1575;&#1604;&#1593;&#1585;&#1576;&#1610;&#1577; word embedded.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14126161" author="amirjadidi" created="Mon, 8 Sep 2014 21:45:39 +0000"  >&lt;p&gt;Any help?&lt;/p&gt;</comment>
                            <comment id="14126816" author="lehmi" created="Tue, 9 Sep 2014 10:07:47 +0000"  >&lt;p&gt;The signature of the method PDFTextStripper#writeLine should be changed. The boolean parameter is no longer needed, the whole LTR/RTL stuff is done in PDFTextStripper#normalize.&lt;/p&gt;

&lt;p&gt;And yes, we need an implementation which handles LTR/RTL for each single word separately. Any patches are welcome.&lt;/p&gt;</comment>
                            <comment id="14629760" author="andreasmeier" created="Thu, 16 Jul 2015 13:54:03 +0000"  >&lt;p&gt;I am currently reworking the PDFTextStripper and did some changes for the whole RTL/LTR problem.&lt;/p&gt;

&lt;p&gt;Unfortunately I had some technical Problems with my IDE, so the rework of my code was in another style format and the requests of two tickets from PDFBox run into each other. For this reason I copied the RTL/LTR changes from my working space to a pulled instance of PDFTextStripper (from pdfbox svn)&lt;/p&gt;

&lt;p&gt;Can you check if the patch I posted resolves this problem?&lt;/p&gt;

&lt;p&gt;In my default workspace the extraction of the text works.&lt;/p&gt;

&lt;p&gt;Regards&lt;/p&gt;

&lt;p&gt;Andreas&lt;/p&gt;</comment>
                            <comment id="14630600" author="jahewson" created="Fri, 17 Jul 2015 00:35:40 +0000"  >&lt;p&gt;w.r.t the large number of LTR and RTL marks, my first question would be, what does Acrobat do? We need a few more sample files to test this out on.&lt;/p&gt;</comment>
                            <comment id="14630834" author="andreasmeier" created="Fri, 17 Jul 2015 06:12:18 +0000"  >&lt;p&gt;After some investigation I can say: Acrobat uses nearly no markers. It strictly relies on strong characters, affecting surrounded neutrals so they will be written in the correct direction.&lt;/p&gt;

&lt;p&gt;I also found out, that acrobat got a problem extracting arabic dates. In one case I got a document with&lt;/p&gt;

&lt;p&gt;&quot;number text number&quot; ( all arabic,  my guess this is a date:  year text/month day ), where acrobat extracted the date in the wrong order: &quot;number number text&quot;. In this special case acrobat would have needed one or more RTL/LTR marks to provide the correct result.&lt;/p&gt;

&lt;p&gt;I guess there is a lot of &quot;know how&quot; in acrobats text extraction mechanism, because normally it handles text very well without using many marks, but it also got bugs with mixed language directions.&lt;/p&gt;

&lt;p&gt;If we want to provide a really good text extraction without the amount of LTR/RTL marks I used (while having good or even better 1-to-1 text extraction than acrobat), we need to do this in many steps: &lt;br/&gt;
1. Extract the text and set the LTR/RTL marks I already set, so we got the correct order and layout of the text&lt;br/&gt;
2. Check whether RTL/LTR marks are not needed, due to Strong characters (at that time we need to check words/characters or tuples around the markers&lt;br/&gt;
3. Remove not needed marks&lt;br/&gt;
4. Add a few new marks to remove many others&lt;/p&gt;

&lt;p&gt;The above patch is only my first approach to extract the text of pdf&apos;s 1-to-1. It could be seen as the first step in our long way to the perfect text extraction... (some things are better than the acrobat text extration, some things are worse...)&lt;/p&gt;

&lt;p&gt;For more information about how acrobat works, I need to know the internals of acrobat.&lt;br/&gt;
Does Adobe provide any papers for acrobat?&lt;/p&gt;</comment>
                            <comment id="14631622" author="tilman" created="Fri, 17 Jul 2015 17:24:32 +0000"  >&lt;p&gt;We need a google search that contains a common english term and a common term in a language that is written right-to-left to find some test PDFs. Preferable on some government page so that it can be used as a test in the repository (no copyright). However it should be something non controversial, i.e. not political and not religious. Maybe a chicken recipe or a weather forecast.&lt;/p&gt;</comment>
                            <comment id="14631705" author="jahewson" created="Fri, 17 Jul 2015 18:25:46 +0000"  >&lt;p&gt;We could also generate some test cases with PDFBox...&lt;/p&gt;</comment>
                            <comment id="14631791" author="tilman" created="Fri, 17 Jul 2015 19:37:34 +0000"  >&lt;p&gt;Yes, but it is risky to create something ourselves in a foreign language that we don&apos;t understand. Other have failed at a similar task, see &lt;a href=&quot;http://www.deseretnews.com/article/358133/MCDONALDS-NEW-BURGER-BAG-ANGERS-MUSLIMS.html?pg=all&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;http://www.independent.co.uk/news/world/europe/chanel-apologises-to-muslims-for-satanic-breasts-dress-1409011.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. I also like taking PDF files &quot;from the wild&quot;, they are more realistic and can bring interesting surprises.&lt;/p&gt;</comment>
                            <comment id="14632570" author="jahewson" created="Sat, 18 Jul 2015 19:04:34 +0000"  >&lt;p&gt;Ha, yes, though I wasn&apos;t suggesting we start selling something to the general public. Look at my sentence from  05/Aug/14, I managed it just fine. It just takes a little care, that&apos;s all.&lt;/p&gt;

&lt;p&gt;To test out the LTL and RTL embedding levels, we really need a carefully crafted test PDF which demonstrates all of these cases. It has to be simple, else we won&apos;t be able to debug it. There&apos;s no need for large amounts of text - a few words is sufficient. Wikipedia is a good source of benign phrases.&lt;/p&gt;</comment>
                            <comment id="14633613" author="andreasmeier" created="Mon, 20 Jul 2015 13:46:57 +0000"  >&lt;p&gt;I created a small test: atest.pdf&lt;/p&gt;


&lt;p&gt;By the way: I also tried to use wikipedia as source for testcases(wikipedia_dl_lyric_test.pdf), but I couldn&apos;t evaluate the file since there is a problem with the extraction of (non-visual) overlapping characters. Is there already a ticket for (non-visual) overlapping character extraction problem?&lt;br/&gt;
(see: &quot;This is the story of my life and = (wa&#7717;abb&#299; my love&quot;.  The end of the extracted text is mixed up)&lt;/p&gt;

&lt;p&gt;Sorry for my bad english...&lt;/p&gt;
</comment>
                            <comment id="14634121" author="jahewson" created="Mon, 20 Jul 2015 21:38:40 +0000"  >&lt;p&gt;How did you create atest.pdf? The Arabic words are not typeset correctly... they are illegible.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Is there already a ticket for (non-visual) overlapping character extraction problem?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t know what you mean my &quot;non-visual&quot;. There are many invisible Unicode characters, can you be more specific? What exactly is the problem?&lt;/p&gt;</comment>
                            <comment id="14634565" author="andreasmeier" created="Tue, 21 Jul 2015 06:07:12 +0000"  >&lt;p&gt;I copied the single parts of atest.pdf together in LibreOffice.&lt;/p&gt;

&lt;p&gt;The dates are not typeset correctly, that&apos;s true.&lt;br/&gt;
The reason to create this document was, that I got some arabic documents where this is the case.&lt;br/&gt;
Even if this is only a reconstruction of an original text, I think this is what Tilman Hausherr meant with:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Yes, but it is risky to create something ourselves in a foreign language that we don&apos;t understand.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I don&apos;t know why this happens in text of arabic newspapers, whether it is a bug in any conversion software or copied together by hand but this happens in different documents I got for testing.&lt;br/&gt;
Unfortunately I can&apos;t provide these files to you.&lt;/p&gt;

&lt;p&gt;If you think we should not address that problem, it would be better to delete the atest.pdf so it won&apos;t confuse others.&lt;/p&gt;


&lt;p&gt;The problem is, that characters from the line&lt;br/&gt;
&quot;This is the story of my life and = (wa&#7717;abb&#299;&quot;&lt;br/&gt;
and the following line&lt;br/&gt;
&quot;my love&quot;&lt;/p&gt;

&lt;p&gt;are mixed up at extraction:&lt;/p&gt;

&lt;p&gt;&quot;This &#8206;is &#8206;the &#8206;storyofmy &#8206;life &#8206;and=(mway&#7717;laobvbe&#299;&quot;&lt;/p&gt;

&lt;p&gt;With &quot;non-visual&quot; overlapping I meant, that the characters from &quot;wa&#7717;abb&#299;&quot; and &quot;my love&quot; don&apos;t touch each other. See the red fields in overlap.jpg&lt;/p&gt;
</comment>
                            <comment id="14634576" author="tilman" created="Tue, 21 Jul 2015 06:16:44 +0000"  >&lt;p&gt;Yeah, I&apos;m confused: when copying from Adobe Reader, I get this:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;test &#1575;&#1604;&#1582;&#1578;&#1576;&#1575;&#1585;&lt;br/&gt;
14 april &#1633;&#1636; &#1573;&#1576;&#1585;&#1610;&#1604; 1434 &#1633;&#1636;&#1635;&#1636;&lt;br/&gt;
14-april- &#1633;&#1636; &lt;del&gt;&#1573;&#1576;&#1585;&#1610;&#1604;&lt;/del&gt; 1434 &#1633;&#1636;&#1635;&#1636;&lt;br/&gt;
(january) ( (&#1610;&#1606;&#1575;&#1610;&#1585;&lt;br/&gt;
&#171;self test&#187; &#171; &#1573;&#1582;&#1578;&#1576;&#1575;&#1585; &#1584;&#1575;&#1578;&#1610; &#187;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So the 1434 is at a different place than visually expected.&lt;/p&gt;

&lt;p&gt;And do I understand this correctly, that in arabic, numbers are written ltr?&lt;/p&gt;</comment>
                            <comment id="14634577" author="andreasmeier" created="Tue, 21 Jul 2015 06:17:27 +0000"  >&lt;p&gt;Yes, numbers are written ltr&lt;/p&gt;

&lt;p&gt;Everything happening in this case depends on the strong LTR and RTL characters.&lt;/p&gt;

&lt;p&gt;For example:&lt;br/&gt;
The (( occurs, because Adobe Reader notices the strong RTL characters and extracts them. The strong RTL characters will then turn the direction of the trailing &quot;)&quot; and write it to the left of the RTL-word.&lt;/p&gt;

&lt;p&gt;A simple approach without markers (which relies on the direction of strong RTL/LTR characters) will not handle this problem.&lt;/p&gt;

&lt;p&gt;That&apos;s the reason why I suggested the multi-stage approach:&lt;/p&gt;

&lt;p&gt;We can&apos;t rely on the person who creates a pdf or on the integrity of the software that converts a text to pdf&apos;s.&lt;/p&gt;</comment>
                            <comment id="14636008" author="jahewson" created="Tue, 21 Jul 2015 23:28:33 +0000"  >&lt;blockquote&gt;
&lt;p&gt;We can&apos;t rely on the person who creates a pdf or on the integrity of the software that converts a text to pdf&apos;s.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I wholeheartedly agree with that statement.&lt;/p&gt;</comment>
                            <comment id="14904040" author="andreasmeier" created="Wed, 23 Sep 2015 06:21:23 +0000"  >&lt;p&gt;I want provide a new patch to address this Problem, unfortunately the layout/format of my code is different than the one in the pdfbox svn trunk. I have already added and activated pdfbox-eclipse-formatter.xml to my IDE, but I am still missing something.&lt;/p&gt;

&lt;p&gt;Is there a cleanup configuration or some other formatting configuration I missed?&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;PDFTextStripper.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; /**
  * a list of regular expressions that match commonly used
  * list item formats, i.e. bullets, numbers, letters,
  * Roman numerals, etc. Not meant to be
  * comprehensive.
  */
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] LIST_ITEM_EXPRESSIONS = {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;\\.&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;\\d+\\.&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;\\[\\d+\\]&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;\\d+\\)&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;[A-Z]\\.&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;[a-z]\\.&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;[A-Z]\\)&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;[a-z]\\)&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;[IVXL]+\\.&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;[ivxl]+\\.&quot;&lt;/span&gt;,
};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; is formatted to sth. like that:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;PDFTextStripper.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; /**
  * a list of regular expressions that match commonly used list item formats, i.e. bullets, numbers, letters,
  * Roman numerals, etc. Not meant to be comprehensive.
  */
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] LIST_ITEM_EXPRESSIONS = { &lt;span class=&quot;code-quote&quot;&gt;&quot;\\.&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\\d+\\.&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\\[\\d+\\]&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;\\d+\\)&quot;&lt;/span&gt;,  &lt;span class=&quot;code-quote&quot;&gt;&quot;[A-Z]\\.&quot;&lt;/span&gt;,  &lt;span class=&quot;code-quote&quot;&gt;&quot;[a-z]\\.&quot;&lt;/span&gt;,  &lt;span class=&quot;code-quote&quot;&gt;&quot;[A-Z]\\)&quot;&lt;/span&gt;,  &lt;span class=&quot;code-quote&quot;&gt;&quot;[a-z]\\)&quot;&lt;/span&gt;,  &lt;span class=&quot;code-quote&quot;&gt;&quot;[IVXL]+\\.&quot;&lt;/span&gt;,   &lt;span class=&quot;code-quote&quot;&gt;&quot;[ivxl]+\\.&quot;&lt;/span&gt;, };
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14904787" author="tilman" created="Wed, 23 Sep 2015 16:42:54 +0000"  >&lt;p&gt;The problem is that some old code doesn&apos;t follow the conventions. The best is not to change the formatting of code that you don&apos;t touch. If you did so anyway, try using your IDE to revert the reformatting on parts where you know that you didn&apos;t touch anything.&lt;/p&gt;

&lt;p&gt;The &quot;only&quot; problem left is that nobody (including me) has reviewed your code. My own reason is that I know almost nothing of the text extraction code. The changes I did in the class a few months ago didn&apos;t touch the core &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14905915" author="andreasmeier" created="Thu, 24 Sep 2015 06:57:42 +0000"  >&lt;p&gt;Even if the patch doesn&apos;t look like it, I had a hard time reverting and merging the changes.&lt;br/&gt;
Would be great if you could try to format the old code so it follows the conventions.&lt;/p&gt;

&lt;p&gt;Here is a short introduction to the patch I posted:&lt;/p&gt;

&lt;p&gt;The reason for the patch is, that the old code did not respect the writing direction of words, when RTL and LTR words were mixed in one line.&lt;br/&gt;
The new code tries to address this problem.&lt;br/&gt;
Furthermore pdf does not care about the direction of mirrorable neutrals with their counterpart.&lt;br/&gt;
For this reason symbols like &quot;&lt;/p&gt;
{&quot; or &quot;[&quot; will have the wrong direction (&quot;}
&lt;p&gt;&quot; or &quot;]&quot;), if embedded in RTL text.&lt;br/&gt;
Therefore the BidiMirroring.txt ( which has to be placed in  &quot;org.apache.pdfbox.text.bidi&quot; ) will exchange mirrorable characters in RTL code so the neutral got the correct direction.&lt;/p&gt;

&lt;p&gt;Since we rely on the position of characters, setSortByPosition has to be set to &quot;true&quot;, so the code works properly&lt;/p&gt;</comment>
                            <comment id="14905928" author="tilman" created="Thu, 24 Sep 2015 07:10:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; could you reformat and commit the existing PDFTextStripper.java ? You use Eclipse, so your formatting would be more perfect than mine.&lt;/p&gt;</comment>
                            <comment id="14905954" author="msahyoun" created="Thu, 24 Sep 2015 07:38:32 +0000"  >&lt;p&gt;I&apos;ll do&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; 1.8 and 2.0 versions or only 2.0?&lt;/p&gt;</comment>
                            <comment id="14905967" author="msahyoun" created="Thu, 24 Sep 2015 07:51:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AndreasMeier&quot; class=&quot;user-hover&quot; rel=&quot;AndreasMeier&quot;&gt;AndreasMeier&lt;/a&gt; I quickly looked through the patch and the old code. Is there a reason that the Bidi classes in Java are not being used?&lt;/p&gt;</comment>
                            <comment id="14905973" author="jira-bot" created="Thu, 24 Sep 2015 07:57:17 +0000"  >&lt;p&gt;Commit 1705010 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1705010&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1705010&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2252&quot; title=&quot;PDFTextStripper has problem with documents with mixed language directions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2252&quot;&gt;&lt;del&gt;PDFBOX-2252&lt;/del&gt;&lt;/a&gt;: reformat source to match new conventions&lt;/p&gt;</comment>
                            <comment id="14906004" author="tilman" created="Thu, 24 Sep 2015 08:30:12 +0000"  >&lt;p&gt;Only 2.0.&lt;/p&gt;</comment>
                            <comment id="14906244" author="andreasmeier" created="Thu, 24 Sep 2015 11:49:26 +0000"  >&lt;p&gt;In fact I don&apos;t know if there are some build-in classes that I could have used.&lt;br/&gt;
I just took some existing RTL/LTR checks from the old PDFTextStripper.java and enhanced it by code I needed.&lt;br/&gt;
I guess java.text.Bidi isMixed(), isLeftToRight() andisRightToLeft() could have been used for the detection, but for the replacement I didn&apos;t find anything.&lt;br/&gt;
Maybe I missed some existing Bidi classes that might have been useful for that purpose.&lt;/p&gt;

&lt;p&gt;To put it in a nutshell, there is no reason.&lt;/p&gt;</comment>
                            <comment id="14906440" author="msahyoun" created="Thu, 24 Sep 2015 14:47:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AndreasMeier&quot; class=&quot;user-hover&quot; rel=&quot;AndreasMeier&quot;&gt;AndreasMeier&lt;/a&gt; sorry for all the question given the fact you already put so much effort into the patch. Would it be possible to &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;generate a set of sample files and unit test to confirm the current issue&lt;/li&gt;
	&lt;li&gt;verify how that has been resolved by the patch&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I would like to put in some time to verify if the java classes could be used as a replacement of some of the custom code. E.g. &lt;tt&gt;Character.isMirrored()&lt;/tt&gt; might be used instead of the custom code/pattern (we&apos;d still need to use the BidiMirroring properties as there is no method to get the corresponding char in the standard classes). That might be done in a second step but there the unit tests are important in order to make sure nothing breaks.&lt;/p&gt;</comment>
                            <comment id="14906847" author="msahyoun" created="Thu, 24 Sep 2015 19:08:58 +0000"  >&lt;p&gt;differences from Characters.isMirrored() compared to proposed MIRRORING_PATTERN_ARRAY&lt;/p&gt;</comment>
                            <comment id="14906851" author="msahyoun" created="Thu, 24 Sep 2015 19:11:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AndreasMeier&quot; class=&quot;user-hover&quot; rel=&quot;AndreasMeier&quot;&gt;AndreasMeier&lt;/a&gt; I uploaded a text file for you where the output for Characters.isMirrored() differs from the MIRRORING_PATTERN_ARRAY. Maybe you can have a look at it if that could be valid as this was quickly generated from&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Pattern p = Pattern.compile(MIRRORING_PATTERN_ARRAY);

&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i&amp;lt; &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.MAX_CODE_POINT; i++)
{
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.isValidCodePoint(i))
    {
        Matcher m = p.matcher(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.toChars(i)));
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.isMirrored(i) || m.matches())
        {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.isMirrored(i) == &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &amp;amp;&amp;amp; m.matches() == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; || &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.isMirrored(i) == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; &amp;amp;&amp;amp; m.matches() == &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
            {
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.printf(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt; %s isMirrored %s matches pattern %s%n&quot;&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.toChars(i)), &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.isMirrored(i), m.matches());
            }
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to get an idea of possible differences. &lt;/p&gt;</comment>
                            <comment id="14907997" author="msahyoun" created="Fri, 25 Sep 2015 13:05:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;tallison@apache.org&lt;/a&gt; would you have some mixed language PDFs we can use to create a testbed?&lt;/p&gt;</comment>
                            <comment id="14908004" author="tallison@mitre.org" created="Fri, 25 Sep 2015 13:09:06 +0000"  >&lt;p&gt;I&apos;ll take a look, probably not in govdocs1, but might be in our slice of Common Crawl.  Prob won&apos;t have an answer until early next week. Argh...&lt;/p&gt;</comment>
                            <comment id="14908016" author="msahyoun" created="Fri, 25 Sep 2015 13:16:56 +0000"  >&lt;p&gt;thanks in advance - no need to rush - wanted to make sure that when touching the code (and the patch looks really promising) we also create a testbed to surround the code.&lt;/p&gt;</comment>
                            <comment id="14908107" author="msahyoun" created="Fri, 25 Sep 2015 14:47:56 +0000"  >&lt;p&gt;I applied the patch in my working copy and it&apos;s breaking the unit tests for the allah2.pdf file.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;junit.framework.AssertionFailedError: FAILURE: Line mismatch &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; file allah2.pdf (sort = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;) at expected line: 2 at actual line: 2
expected line was: &lt;span class=&quot;code-quote&quot;&gt;&quot; &#1575;&#1604;&#1604;&#1607;&quot;&lt;/span&gt;
actual line was:   &lt;span class=&quot;code-quote&quot;&gt;&quot; &#1607;&#1604;&#1604;&#1575;&quot;&lt;/span&gt;

	at junit.framework.Assert.fail(Assert.java:57)
	at junit.framework.TestCase.fail(TestCase.java:227)
	at org.apache.pdfbox.text.TestTextStripper.doTestFile(TestTextStripper.java:312)
	at org.apache.pdfbox.text.TestTextStripper.doTestDir(TestTextStripper.java:481)
	at org.apache.pdfbox.text.TestTextStripper.testExtract(TestTextStripper.java:502)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at junit.framework.TestCase.runTest(TestCase.java:176)
	at junit.framework.TestCase.runBare(TestCase.java:141)
	at junit.framework.TestResult$1.protect(TestResult.java:122)
	at junit.framework.TestResult.runProtected(TestResult.java:142)
	at junit.framework.TestResult.run(TestResult.java:125)
	at junit.framework.TestCase.run(TestCase.java:129)
	at junit.framework.TestSuite.runTest(TestSuite.java:255)
	at junit.framework.TestSuite.run(TestSuite.java:250)
	at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:84)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14908359" author="tilman" created="Fri, 25 Sep 2015 17:26:46 +0000"  >&lt;p&gt;Page 52 and 56 of bugzilla867751.pdf might help. I&apos;ll attach it.&lt;/p&gt;

&lt;p&gt;We&apos;d need to search more of such files on the web. Maybe we could find pdfs of home appliance user manuals. We&apos;d need some words that are common for such a manual in an RTL language. In german the words would be e.g. &quot;einschalten&quot;, &quot;reinigen&quot;, &quot;&#214;ffnen&quot;, &quot;Bedienungsanleitung&quot; (which mean switch on, clean, open, user manual) and we&apos;d need some similar words in an RTL language but that are not too short, i.e. they don&apos;t have to be translations of the words I mention, just to be specific to a home appliance user manual.&lt;/p&gt;</comment>
                            <comment id="14909771" author="msahyoun" created="Sun, 27 Sep 2015 15:25:08 +0000"  >&lt;p&gt;I&apos;ve tested the patch with the string &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; suggested. Creating a test file with&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;A line with an Arabic &#1575;&#1604;&#1593;&#1585;&#1576;&#1610;&#1577; word embedded.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;produces&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;A line with an Arabic  &#1575;&#1604;&#1593;&#1585;&#1576;&#1610;&#1577;word embedded.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The previous version produces&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;A line with an Arabic &#1577;&#1610;&#1576;&#1585;&#1593;&#1604;&#1575; word embedded.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So there is an improvement for that situation.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AndreasMeier&quot; class=&quot;user-hover&quot; rel=&quot;AndreasMeier&quot;&gt;AndreasMeier&lt;/a&gt; I&apos;ll attach the patch with some adjustments to match the current trunk for your convenience.&lt;/p&gt;
</comment>
                            <comment id="14909772" author="msahyoun" created="Sun, 27 Sep 2015 15:29:11 +0000"  >&lt;p&gt;patch to match the current trunk version so it&apos;s easier to apply and work on. The file &lt;tt&gt;BidiMirroring.txt&lt;/tt&gt; is now expected in &lt;tt&gt;org/apache/pdfbox/resources/text/&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14909830" author="msahyoun" created="Sun, 27 Sep 2015 18:14:47 +0000"  >&lt;p&gt;I&apos;ll add a new patch. With that the result of the text extraction for test.pdf is&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;test  &#1575;&#1604;&#1582;&#1578;&#1576;&#1575;&#1585;
14 april 1434 &#1633;&#1636;  &#1573;&#1576;&#1585;&#1610;&#1604; &#1633;&#1636;&#1635;&#1636;
14-april-1434 &#1633;&#1636;-&#1573;&#1576;&#1585;&#1610;&#1604;-&#1633;&#1636;&#1635;&#1636;
(january) (&#1610;&#1606;&#1575;&#1610;&#1585;)
&#171;self test&#187; &#171;&#1573;&#1582;&#1578;&#1576;&#1575;&#1585; &#1584;&#1575;&#1578;&#1610;&#187;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the above sample has the space between &lt;tt&gt;&#1575;&#1604;&#1593;&#1585;&#1576;&#1610;&#1577;&lt;/tt&gt; and &lt;tt&gt;word&lt;/tt&gt; corrected so the result is now&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;A line with an Arabic &#1575;&#1604;&#1593;&#1585;&#1576;&#1610;&#1577; word embedded.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14909833" author="msahyoun" created="Sun, 27 Sep 2015 18:20:03 +0000"  >&lt;p&gt;patch utilizing Bidi classes for visual reordering&lt;/p&gt;</comment>
                            <comment id="14909835" author="msahyoun" created="Sun, 27 Sep 2015 18:21:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AndreasMeier&quot; class=&quot;user-hover&quot; rel=&quot;AndreasMeier&quot;&gt;AndreasMeier&lt;/a&gt; maybe you can test the latest patch with the documents you have and let me know the results.&lt;/p&gt;</comment>
                            <comment id="14910107" author="andreasmeier" created="Mon, 28 Sep 2015 06:56:09 +0000"  >&lt;p&gt;I tested the latest patch with the documents.&lt;br/&gt;
There are only small differences, but the files with the differences are so complex that I don&apos;t want to judge anything.&lt;/p&gt;

&lt;p&gt;I think you&apos;ve done a great job, rewriting the code. Thanks, that you took hands on the code.&lt;/p&gt;

&lt;p&gt;The only problem of this implementation is that &quot;setSortByPosition&quot; must be set to true at the moment.&lt;br/&gt;
This will lead to problems with text that is ordered in two or more column blocks, since it will not be handled in the correct way anymore.&lt;br/&gt;
Do you know if there is already a ticket for that problem?&lt;br/&gt;
Furthermore it would be nice to know your opinion about document layout analysis programs. Is something planned in that direction?&lt;/p&gt;

</comment>
                            <comment id="14910170" author="jira-bot" created="Mon, 28 Sep 2015 08:28:26 +0000"  >&lt;p&gt;Commit 1705610 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1705610&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1705610&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2252&quot; title=&quot;PDFTextStripper has problem with documents with mixed language directions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2252&quot;&gt;&lt;del&gt;PDFBOX-2252&lt;/del&gt;&lt;/a&gt;: remove old test files; add new test files with Bidi text&lt;/p&gt;</comment>
                            <comment id="14910171" author="jira-bot" created="Mon, 28 Sep 2015 08:30:07 +0000"  >&lt;p&gt;Commit 1705611 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1705611&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1705611&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2252&quot; title=&quot;PDFTextStripper has problem with documents with mixed language directions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2252&quot;&gt;&lt;del&gt;PDFBOX-2252&lt;/del&gt;&lt;/a&gt;: initial support for mixed language directions (bidi) text&lt;/p&gt;</comment>
                            <comment id="14910177" author="msahyoun" created="Mon, 28 Sep 2015 08:34:44 +0000"  >&lt;p&gt;thx - but the credit goes to you. I was only enhancing it a little using the Bidi classes. I&apos;ve committed the code as is - some further refinements are needed.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Furthermore it would be nice to know your opinion about document layout analysis programs. Is something planned in that direction?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If the input file has article information then this will be respected (optional). If there is no such information there are currently no plans for something like document layout analysis. I came across some projects in the past which are doing this on a PDF basis. Might be usable as a starting point.&lt;/p&gt;</comment>
                            <comment id="14910194" author="jira-bot" created="Mon, 28 Sep 2015 08:52:41 +0000"  >&lt;p&gt;Commit 1705619 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1705619&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1705619&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2252&quot; title=&quot;PDFTextStripper has problem with documents with mixed language directions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2252&quot;&gt;&lt;del&gt;PDFBOX-2252&lt;/del&gt;&lt;/a&gt;: add BidiMirroring.txt to rat excludes&lt;/p&gt;</comment>
                            <comment id="14910200" author="msahyoun" created="Mon, 28 Sep 2015 08:55:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; could you take a look at src/main/resources/org/apache/pdfbox/resources/text/BidiMirroring.txt and check the license header. Looked fine for me. For now I excluded it from rat. If we can&apos;t use it please let me know.&lt;/p&gt;</comment>
                            <comment id="14933076" author="andreasmeier" created="Mon, 28 Sep 2015 09:32:14 +0000"  >&lt;p&gt;Most of the files I see do not provide any article information.&lt;/p&gt;

&lt;p&gt;I think a basic document layout analysis will be needed to solve some of the existing problems in the text extraction.&lt;/p&gt;

&lt;p&gt;If you can remember some of the projects, let me know.&lt;/p&gt;

&lt;p&gt;The projects I have discovered so far, were either not in Java or implemented for a specific Java version.&lt;br/&gt;
Haven&apos;t found a stable and fast Java solution yet.&lt;/p&gt;</comment>
                            <comment id="14933085" author="jira-bot" created="Mon, 28 Sep 2015 09:41:45 +0000"  >&lt;p&gt;Commit 1705636 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1705636&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1705636&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2252&quot; title=&quot;PDFTextStripper has problem with documents with mixed language directions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2252&quot;&gt;&lt;del&gt;PDFBOX-2252&lt;/del&gt;&lt;/a&gt;: add unit test&lt;/p&gt;</comment>
                            <comment id="14933115" author="jira-bot" created="Mon, 28 Sep 2015 10:13:45 +0000"  >&lt;p&gt;Commit 1705645 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1705645&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1705645&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2252&quot; title=&quot;PDFTextStripper has problem with documents with mixed language directions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2252&quot;&gt;&lt;del&gt;PDFBOX-2252&lt;/del&gt;&lt;/a&gt;: define encoding for Reader&lt;/p&gt;</comment>
                            <comment id="14933140" author="lehmi" created="Mon, 28 Sep 2015 10:43:37 +0000"  >&lt;p&gt;IMHO the license itself is ok. Please add a note about that file to the NOTICE file in pdfbox/src/main/appended-resources/META-INF&lt;/p&gt;</comment>
                            <comment id="14933147" author="jira-bot" created="Mon, 28 Sep 2015 10:49:34 +0000"  >&lt;p&gt;Commit 1705654 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1705654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1705654&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2252&quot; title=&quot;PDFTextStripper has problem with documents with mixed language directions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2252&quot;&gt;&lt;del&gt;PDFBOX-2252&lt;/del&gt;&lt;/a&gt;: add copyright information for BidiMirroring.txt&lt;/p&gt;</comment>
                            <comment id="14933171" author="msahyoun" created="Mon, 28 Sep 2015 11:14:34 +0000"  >&lt;p&gt;please find enclosed some articles:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://staff.icar.cnr.it/staff/ruffolo/public_html/progetti/projects/03.PDFBox-based%20tree%20model--2/no/2002-Two%20Geometric%20Algorithms%20for%20Layout%20Analysis--breuel-das.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://staff.icar.cnr.it/staff/ruffolo/public_html/progetti/projects/03.PDFBox-based%20tree%20model--2/no/2002-Two%20Geometric%20Algorithms%20for%20Layout%20Analysis--breuel-das.pdf&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.scfbm.org/content/pdf/1751-0473-7-7.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.scfbm.org/content/pdf/1751-0473-7-7.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and a software based on the latter article&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/BMKEG/lapdftextProject&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/BMKEG/lapdftextProject&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Feel free to log an enhancement request but note that this is not an easy task so it&apos;s unlikely that this will be done by the current committers without some initial contribution. We could use the task though to collect information about research articles and implementations so one can get started easier.&lt;/p&gt;</comment>
                            <comment id="14933277" author="andreasmeier" created="Mon, 28 Sep 2015 13:22:58 +0000"  >&lt;p&gt;I have already browsed one of the two papers you posted and did some tests with lapdftext a week ago.&lt;br/&gt;
(using the PDFTextStripperByArea.java and lapdftext 1.7.2-SNAPSHOT)&lt;/p&gt;

&lt;p&gt;The results were pretty good and lapdftext would be the tool of choice in my opinion&lt;br/&gt;
Unfortunately I also discovered that it relies on Java 1.6, any other Java Version breaks the dependencies and will not work.&lt;/p&gt;

&lt;p&gt;That&apos;s the reason, why I mentioned the &quot;specific Java Version&quot; in my post.&lt;/p&gt;

&lt;p&gt;The layout analysis algorithm of lapdftext combined with pdfbox would be amazing.&lt;/p&gt;

&lt;p&gt;I have not taken an in-depth look at papers or the lapdftext-code, but I guess it would be hard work to re-code the algorithm.&lt;/p&gt;

&lt;p&gt;I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2998&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PDFBOX-2998&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="14933564" author="msahyoun" created="Mon, 28 Sep 2015 16:54:05 +0000"  >&lt;p&gt;lapdftext is GPLed software - we can&apos;t reuse the code.&lt;/p&gt;</comment>
                            <comment id="14934883" author="tilman" created="Tue, 29 Sep 2015 09:02:53 +0000"  >&lt;p&gt;Seems that this happens only on windows, as nobody else complained:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Running org.apache.pdfbox.text.BidiTest
Tests run: 2, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 0.737 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.pdfbox.text.BidiTest
testSorted(org.apache.pdfbox.text.BidiTest)  Time elapsed: 0.687 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
org.junit.ComparisonFailure: expected:&amp;lt;...????? word embedded.[
]
&amp;gt; but was:&amp;lt;...????? word embedded.[]
&amp;gt;
	at org.junit.Assert.assertEquals(Assert.java:115)
	at org.junit.Assert.assertEquals(Assert.java:144)
	at org.apache.pdfbox.text.BidiTest.testSorted(BidiTest.java:80)

testNotSorted(org.apache.pdfbox.text.BidiTest)  Time elapsed: 0.001 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
org.junit.ComparisonFailure: expected:&amp;lt;...????? word embedded.[
]
&amp;gt; but was:&amp;lt;...????? word embedded.[]
&amp;gt;
	at org.junit.Assert.assertEquals(Assert.java:115)
	at org.junit.Assert.assertEquals(Assert.java:144)
	at org.apache.pdfbox.text.BidiTest.testNotSorted(BidiTest.java:105)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14940796" author="jira-bot" created="Fri, 2 Oct 2015 06:01:03 +0000"  >&lt;p&gt;Commit 1706348 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1706348&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1706348&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2252&quot; title=&quot;PDFTextStripper has problem with documents with mixed language directions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2252&quot;&gt;&lt;del&gt;PDFBOX-2252&lt;/del&gt;&lt;/a&gt;: revised unit test to deal with platform differences&lt;/p&gt;</comment>
                            <comment id="14940815" author="msahyoun" created="Fri, 2 Oct 2015 06:31:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; could you give it another try?&lt;/p&gt;</comment>
                            <comment id="14940868" author="tilman" created="Fri, 2 Oct 2015 07:57:52 +0000"  >&lt;p&gt;Now it works, thanks!&lt;/p&gt;</comment>
                            <comment id="14940948" author="jira-bot" created="Fri, 2 Oct 2015 09:24:10 +0000"  >&lt;p&gt;Commit 1706365 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1706365&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1706365&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2252&quot; title=&quot;PDFTextStripper has problem with documents with mixed language directions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2252&quot;&gt;&lt;del&gt;PDFBOX-2252&lt;/del&gt;&lt;/a&gt;: remove specific rtl handling - handled by Bidi now&lt;/p&gt;</comment>
                            <comment id="14940949" author="msahyoun" created="Fri, 2 Oct 2015 09:26:15 +0000"  >&lt;p&gt;I&apos;ve removed the code block which was still left for detecting RTL text as this is now always handled using the Bidi classes so was redundant&lt;/p&gt;</comment>
                            <comment id="14940950" author="msahyoun" created="Fri, 2 Oct 2015 09:28:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; could you check with Tim if he&apos;s able to run some text extraction tests to see if we are introducing a regression given the changes to the text extraction made. &lt;/p&gt;</comment>
                            <comment id="14941401" author="tilman" created="Fri, 2 Oct 2015 17:04:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;tallison@apache.org&lt;/a&gt; are you able to run some text extraction tests to see if we are introducing a regression given the changes to the text extraction made? I suggest comparing to a revision two weeks ago.&lt;/p&gt;</comment>
                            <comment id="14942253" author="tallison@mitre.org" created="Sat, 3 Oct 2015 11:56:46 +0000"  >&lt;p&gt;Y. Should I compare 2.0 trunk to 1.8.10 perhaps? &lt;/p&gt;

&lt;p&gt;Apologies... I still need to look for bidi docs in our corpus....still on my todo list.&lt;/p&gt;</comment>
                            <comment id="14942255" author="tilman" created="Sat, 3 Oct 2015 12:00:43 +0000"  >&lt;p&gt;No, that would be a separate thing, related to the 2.0 release, and would bring tons of differences (hopefully improvements). The wish now would only be to find out whether any new bugs were created in 2.0 text extraction recently.&lt;/p&gt;

&lt;p&gt;To be more specific: compare the output of rev 1702171 against now.&lt;/p&gt;</comment>
                            <comment id="14942341" author="tallison@mitre.org" created="Sat, 3 Oct 2015 14:59:25 +0000"  >&lt;p&gt;Y, I agree that 1.x vs 2.x would yield too broad of a comparison...separate run later. r1702171 it is. Thank you!&lt;/p&gt;</comment>
                            <comment id="14943765" author="tilman" created="Mon, 5 Oct 2015 18:08:11 +0000"  >&lt;p&gt;Here&apos;s an excellent test for mixed text extraction, this is an arabic translation of the german constitution:&lt;br/&gt;
&lt;a href=&quot;http://www.fes.de/international/nahost/pdf/GGArabisch.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.fes.de/international/nahost/pdf/GGArabisch.pdf&lt;/a&gt;&lt;br/&gt;
Use page 112, see e.g. near &quot;August&quot; and &quot;Richard&quot;, the &quot;)&quot; is different to Adobe Reader.&lt;/p&gt;

&lt;p&gt;Sadly I don&apos;t know if there&apos;s a copyright for the translation, or a license. Maybe the arabic text on page 113 has more.&lt;/p&gt;

&lt;p&gt;Another one can be found here:&lt;br/&gt;
&lt;a href=&quot;https://www.spd.de/linkableblob/12354/data/artikel1_20_arab.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.spd.de/linkableblob/12354/data/artikel1_20_arab.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And a third one:&lt;br/&gt;
&lt;a href=&quot;https://www.btg-bestellservice.de/pdf/80209000.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.btg-bestellservice.de/pdf/80209000.pdf&lt;/a&gt;&lt;br/&gt;
this is probably public domain, but has only very few mixed content (on page 3).&lt;/p&gt;</comment>
                            <comment id="14943864" author="tallison@mitre.org" created="Mon, 5 Oct 2015 19:17:24 +0000"  >&lt;p&gt;Table with counts of ltr and rtl tokens per pdf in a large portion of our combined Common Crawl (subset) and govdocs1.  Text was extracted with Tika 1.10=pdfbox 1.8.10.  Can&apos;t vouch for licensing on any of these.&lt;/p&gt;

&lt;p&gt;Good candidates seem to have &amp;gt; 100 tokens and a balance of &amp;gt; 20%...e.g. : govdocs1/302/302975.pdf&lt;/p&gt;</comment>
                            <comment id="14944575" author="msahyoun" created="Tue, 6 Oct 2015 06:36:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;tallison@apache.org&lt;/a&gt; Thanks for the samples. I had a quick look at govdocs1/302/302975.pdf.&lt;/p&gt;

&lt;p&gt;The 1.8.10 extraction has this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&#1589;&#1610;&#1582;&#1604;&#1578; Abbreviation
...
tnuomA &#1605;&#1576;&#1604;&#1594;, &#1603;&#1605;&#1610;&#1577;&#1548; &#1602;&#1610;&#1605;&#1577;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;where the current 2.0.0-SNAPSHOT has this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&#1578;&#1604;&#1582;&#1610;&#1589; Abbreviation
...
&#1605;&#1576;&#1604;&#1594;, &#1603;&#1605;&#1610;&#1577;&#1548; &#1602;&#1610;&#1605;&#1577; Amount
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Although there is still some work to be done for Bidi it seems that the current snapshot at least has the text right where 1.8.10 has either the LTR correct and the RTL wrong or the other way around which makes the text extraction of 1.8.10 for Bidi text of limited use. I&apos;ll do some more testing later today.&lt;/p&gt;

&lt;p&gt;What I probably would like to do is keep the functionality at the current state for 2.0.0, create new tickets for possible enhancements and not do any further changes to the extraction if there are no regressions prior to releasing 2.0.0 - WDYT?&lt;/p&gt;</comment>
                            <comment id="14945375" author="tallison@mitre.org" created="Tue, 6 Oct 2015 17:12:56 +0000"  >&lt;p&gt;Sounds good to me.  Given current workload on other stuff, I doubt I&apos;ll have a chance to finish major regression testing before Friday, and it may have to go &lt;del&gt;into next week&lt;/del&gt;. until 23 Oct. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14945379" author="tallison@mitre.org" created="Tue, 6 Oct 2015 17:14:13 +0000"  >&lt;p&gt;Slightly updated full run (without OOM).  I selected records with &amp;gt; 30 LTR and &amp;gt; 30 RTL tokens.&lt;/p&gt;</comment>
                            <comment id="14945490" author="msahyoun" created="Tue, 6 Oct 2015 18:09:44 +0000"  >&lt;p&gt;The effort you put into that is of great help. No need to be sorry that it takes a little longer.&lt;/p&gt;</comment>
                            <comment id="14945494" author="msahyoun" created="Tue, 6 Oct 2015 18:10:26 +0000"  >&lt;p&gt;Thanks a lot - very valuable resource to look for test candidates&lt;/p&gt;</comment>
                            <comment id="14970116" author="tallison@mitre.org" created="Thu, 22 Oct 2015 23:43:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;, thank you for the ping.  I&apos;ve just re-kicked off r1702171 on all docs that had rtl and ~100k others.  Should have results by tomorrow noonish EDT.  Is it ok to use trunk from last time I looked at this (didn&apos;t record rev #) or should I rebuild with a fresh pull of trunk?&lt;/p&gt;</comment>
                            <comment id="14970456" author="tilman" created="Fri, 23 Oct 2015 05:14:51 +0000"  >&lt;p&gt;Uhm - the ping was in another issue, related to the release of 2.0. This time the best would be to compare 2.0 trunk (not RC1 - I fixed some regressions recently) against last 1.8 release (1.8.10).&lt;/p&gt;

&lt;p&gt;I expect many differences, but the amount of &quot;good&quot; tokens (known words) should increase.&lt;/p&gt;</comment>
                            <comment id="14970772" author="tallison@mitre.org" created="Fri, 23 Oct 2015 10:20:18 +0000"  >&lt;p&gt;Ha!  I still feel guilty about this one so I&apos;ll finish this first and then go with 2.0 trunk v 1.8.10 on the same set.  Both should be done today...at least on 100k docs.&lt;/p&gt;</comment>
                            <comment id="14971031" author="tallison@mitre.org" created="Fri, 23 Oct 2015 14:04:49 +0000"  >&lt;p&gt;This compares r1702171 (A) against trunk last time I pulled it (~ 6 October) (B).  I ran this against all docs with rtl and then more totaling ~100k documents.&lt;/p&gt;

&lt;p&gt; No diffs in exceptions, metadata or attachments.  Some content diffs.  There are some apparent corrections in LTR words...let me know what you find and if you have any questions.&lt;/p&gt;</comment>
                            <comment id="14971210" author="msahyoun" created="Fri, 23 Oct 2015 15:48:55 +0000"  >&lt;p&gt;Thank you very much for your effort! &lt;/p&gt;</comment>
                            <comment id="14971238" author="msahyoun" created="Fri, 23 Oct 2015 16:06:19 +0000"  >&lt;p&gt;From a quick scan the results for bidi text improved a lot as it now seems to correctly handle the mixed text:&lt;/p&gt;

&lt;p&gt;govdocs1/302/302975.pdf&lt;br/&gt;
before: &lt;tt&gt;fo: 65 | &#1601;&#1610;: 37 | &#1605;&#1606;: 34 | ot: 33 | &#1571;&#1608;: 31 | &#1594;&#1610;&#1585;: 30 | of: 27 | &#1593;&#1604;&#1609;: 22 | &#1593;&#1605;&#1604;: 18 | dna: 18&lt;/tt&gt;&lt;br/&gt;
after: &lt;tt&gt;of: 92 | &#1601;&#1610;: 47 | &#1571;&#1608;: 45 | &#1605;&#1606;: 45 | to: 42 | and: 28 | &#1593;&#1604;&#1609;: 28 | &#1594;&#1610;&#1585;: 24 | &#1591;&#1576;&#1610;&#1577;: 20 | &#1593;&#1606;: 18&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;commoncrawl2/ZN/ZNWHQ7WJSR3NCQVIHEXAMKZC47LAJURT&lt;br/&gt;
before: &lt;tt&gt;e&#231;kr&#252;t: 1 | &#1588;&#1605;&#1585;&#1608;&#1578;&#1603;&#1606;&#1575;&#1588;&#1608;&#1575;&#1591;: 1 | abak: 1 | &#1609;&#1606;&#1575;&#1605;&#1579;&#1593;&#1606;&#1575;&#1587;&#1604;: 1&lt;/tt&gt;&lt;br/&gt;
after: &lt;tt&gt;&#1588;&#1605;&#1585;&#1608;&#1578;&#1603;&#1606;&#1575;&#1588;&#1608;&#1575;&#1591;: 1 | kaba: 1 | t&#252;rk&#231;e: 1 | &#1609;&#1606;&#1575;&#1605;&#1579;&#1593;&#1606;&#1575;&#1587;&#1604;: 1&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;commoncrawl2/PA/PANWJVU76BPMA4BF2OGO74ZPRLDWGNBA&lt;br/&gt;
before: &lt;tt&gt;&#1610;&#1601;: 29 | the: 27 | in: 23 | and: 22 | &#1606;&#1605;: 13 | for: 12 | of: 11 | 2009: 11 | 2010: 10 | &#1583;&#1606;&#1593;: 10&lt;/tt&gt;&lt;br/&gt;
after: &lt;tt&gt;&#1601;&#1610;: 29 | the: 27 | in: 23 | and: 22 | &#1605;&#1606;: 13 | for: 12 | of: 11 | 2009: 11 | at: 10 | &#1575;&#1604;&#1608;&#1575;&#1604;&#1583;&#1577;: 10&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14989943" author="tilman" created="Wed, 4 Nov 2015 17:14:09 +0000"  >&lt;p&gt;A fourth mixed document can be found here:&lt;br/&gt;
&lt;a href=&quot;http://www.konto.org/download/merkblatt-basiskonto-asylbewerber-arabisch.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.konto.org/download/merkblatt-basiskonto-asylbewerber-arabisch.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Text extraction is weird with PDFBox and Adobe Reader. Near the third occurence of the word &quot;Duldung&quot; there is a &quot;2&quot; at the wrong place. Adobe has it twice.&lt;/p&gt;

&lt;p&gt;more mixed documents:&lt;br/&gt;
&lt;a href=&quot;http://www.arabisch-online.com/Lektionen/DieZahlen.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.arabisch-online.com/Lektionen/DieZahlen.pdf&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://www.slrg.ch/fileadmin/user_upload/SLRG_CH_2015/Pr%C3%A4vention/4x6_Regeln/Baderegeln/Baderegeln_auf_Arabisch.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.slrg.ch/fileadmin/user_upload/SLRG_CH_2015/Pr%C3%A4vention/4x6_Regeln/Baderegeln/Baderegeln_auf_Arabisch.pdf&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.berlinerbaeder.de/fileadmin/user_upload/Baderegeln/Arabisch_Somali.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.berlinerbaeder.de/fileadmin/user_upload/Baderegeln/Arabisch_Somali.pdf&lt;/a&gt; (this one would have to be rotated first)&lt;/p&gt;</comment>
                            <comment id="15083519" author="jira-bot" created="Tue, 5 Jan 2016 18:25:33 +0000"  >&lt;p&gt;Commit 1723145 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1723145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1723145&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2252&quot; title=&quot;PDFTextStripper has problem with documents with mixed language directions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2252&quot;&gt;&lt;del&gt;PDFBOX-2252&lt;/del&gt;&lt;/a&gt;: restore original comment format for clarity&lt;/p&gt;</comment>
                            <comment id="15312092" author="lehmi" created="Thu, 2 Jun 2016 10:20:11 +0000"  >&lt;p&gt;What is the status of this ticket? AFAIU everything is done and already released as part of 2.0.0 and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; wanted to create a new ticket for further improvements. Am I right? Should we close this as resolved?&lt;/p&gt;</comment>
                            <comment id="15312109" author="msahyoun" created="Thu, 2 Jun 2016 10:32:53 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15312597" author="tilman" created="Thu, 2 Jun 2016 16:29:26 +0000"  >&lt;p&gt;I&apos;m neutral on this, but the any new issue should point to this one and/or copy the patches.&lt;/p&gt;</comment>
                            <comment id="15794412" author="msahyoun" created="Tue, 3 Jan 2017 07:37:23 +0000"  >&lt;p&gt;As discussed I&apos;m closing this ticket and opened &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3643&quot; title=&quot;Improve text extraction for mixed language documents &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3643&quot;&gt;PDFBOX-3643&lt;/a&gt; to track further enhancement to text extraction wrt to BIDI languages&lt;/p&gt;</comment>
                            <comment id="15932502" author="lehmi" created="Mon, 20 Mar 2017 11:14:34 +0000"  >&lt;p&gt;Fixed the &quot;Fix version/s&quot; to 2.0.0 and closed&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13031598">PDFBOX-3643</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12762064" name="BidiMirroring.txt" size="24691" author="AndreasMeier" created="Thu, 24 Sep 2015 06:43:33 +0000"/>
                            <attachment id="12762208" name="IsMirroredDeviations.txt" size="9520" author="msahyoun" created="Thu, 24 Sep 2015 19:08:58 +0000"/>
                            <attachment id="12762603" name="PDFTextStripper-201709271718.patch" size="14786" author="msahyoun" created="Sun, 27 Sep 2015 15:29:11 +0000"/>
                            <attachment id="12762612" name="PDFTextStripper-201709272018.patch" size="7719" author="msahyoun" created="Sun, 27 Sep 2015 18:20:03 +0000"/>
                            <attachment id="12762063" name="PDFTextStripper.java.patch" size="17024" author="AndreasMeier" created="Thu, 24 Sep 2015 06:43:33 +0000"/>
                            <attachment id="12745628" name="PDFTextStripper.java.patch" size="19468" author="AndreasMeier" created="Thu, 16 Jul 2015 13:49:26 +0000"/>
                            <attachment id="12746104" name="atest.pdf" size="21738" author="AndreasMeier" created="Mon, 20 Jul 2015 13:30:43 +0000"/>
                            <attachment id="12762414" name="bugzilla867751.pdf" size="7259642" author="tilman" created="Fri, 25 Sep 2015 17:28:30 +0000"/>
                            <attachment id="12768300" name="content_diffs.xlsx" size="89724" author="tallison" created="Fri, 23 Oct 2015 14:04:49 +0000"/>
                            <attachment id="12746273" name="overlap.jpg" size="13367" author="AndreasMeier" created="Tue, 21 Jul 2015 06:07:35 +0000"/>
                            <attachment id="12765049" name="pdfs_directionality.xlsx" size="49369" author="tallison" created="Mon, 5 Oct 2015 19:17:24 +0000"/>
                            <attachment id="12765202" name="pdfs_directionality3.xlsx" size="25090" author="tallison" created="Tue, 6 Oct 2015 17:14:13 +0000"/>
                            <attachment id="12659557" name="test.pdf" size="43719" author="amirjadidi" created="Sun, 3 Aug 2014 17:45:15 +0000"/>
                            <attachment id="12746105" name="wikipedia_dl_lyric_test.pdf" size="123028" author="AndreasMeier" created="Mon, 20 Jul 2015 13:32:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409619</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yh73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>