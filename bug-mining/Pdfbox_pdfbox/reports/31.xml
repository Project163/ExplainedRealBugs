<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:52:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-739] Problem converting pdf page w/ fully embedded TTF font, Identity-H (CID)</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-739</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I&apos;m running into an issue when trying to convert a pdf page to an image. Conditions:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Pdf file with TrueType font fully embedded&lt;/li&gt;
	&lt;li&gt;Encoding: Identity-H (CID)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Although the FontFile2 stream is present, I get (I added extra info logging):&lt;/p&gt;

&lt;p&gt;Jun 1, 2010 12:44:38 PM org.apache.pdfbox.pdmodel.font.PDFontFactory createFont&lt;br/&gt;
INFO: subType: COSName&lt;/p&gt;
{Type0}
&lt;p&gt;Jun 1, 2010 12:44:38 PM org.apache.pdfbox.pdmodel.font.PDFontFactory createFont&lt;br/&gt;
INFO: subType: COSName&lt;/p&gt;
{CIDFontType2}
&lt;p&gt;Jun 1, 2010 12:44:39 PM org.apache.pdfbox.pdmodel.font.PDType1Font getawtFont&lt;br/&gt;
INFO: Can&apos;t find the specified basefont DroidSansFallback&lt;br/&gt;
java.lang.Throwable&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.font.PDType1Font.getawtFont(PDType1Font.java:234)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.font.PDSimpleFont.drawString(PDSimpleFont.java:97)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.font.PDType0Font.drawString(PDType0Font.java:68)&lt;br/&gt;
	at org.apache.pdfbox.pdfviewer.PageDrawer.processTextPosition(PageDrawer.java:190)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processEncodedText(PDFStreamEngine.java:498)&lt;br/&gt;
	at org.apache.pdfbox.util.operator.ShowText.process(ShowText.java:45)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:556)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:250)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:208)&lt;br/&gt;
	at org.apache.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:111)&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:718)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFImageWriter.writeImage(PDFImageWriter.java:137)&lt;br/&gt;
	at org.apache.pdfbox.PDFToImage.main(PDFToImage.java:204)&lt;br/&gt;
INFO: Using font ArialMT instead&lt;/p&gt;

&lt;p&gt;test with:&lt;/p&gt;

&lt;p&gt;java -jar pdfbox-app-1.2.0-SNAPSHOT.jar PDFToImage -imageType png -startPage 1 -endPage 1 -color rgba -resolution 108 hello-DroidSans-Identity-H.pdf&lt;/p&gt;

&lt;p&gt;Attached is a sample pdf with one of the droid fonts fully embedded in the above manner (free, Apache 2 license):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://android.git.kernel.org/?p=platform/frameworks/base.git;a=tree;f=data/fonts;hb=HEAD&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://android.git.kernel.org/?p=platform/frameworks/base.git;a=tree;f=data/fonts;hb=HEAD&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(The attached file has DroidSans instead of DroidSansFallback as in the log to keep the file size down, but it has the same result)&lt;/p&gt;

&lt;p&gt;(I was able to hack fix by changing PDType0 to extends PDTrueTypeFont, but that seems like a terrible hack).&lt;/p&gt;

&lt;p&gt;Below are the relevant parts of the pdf that cause the getawtFont issue:&lt;/p&gt;

&lt;p&gt;1 0 obj&lt;br/&gt;
&amp;lt;&amp;lt;/DescendantFonts&lt;span class=&quot;error&quot;&gt;&amp;#91;7 0 R&amp;#93;&lt;/span&gt;&lt;br/&gt;
/BaseFont/DroidSans/Type/Font/Encoding/Identity-H/Subtype/Type0/ToUnicode 8 0 R&amp;gt;&amp;gt;&lt;br/&gt;
endobj&lt;/p&gt;

&lt;p&gt;4 0 obj&lt;br/&gt;
&amp;lt;&amp;lt;/Parent 3 0 R/Contents 2 0 R/Type/Page/Resources&amp;lt;&amp;lt;/ProcSet &lt;span class=&quot;error&quot;&gt;&amp;#91;/PDF /Text /ImageB /ImageC /ImageI&amp;#93;&lt;/span&gt;&lt;br/&gt;
/Font&amp;lt;&amp;lt;/F1 1 0 R&amp;gt;&amp;gt;&lt;br/&gt;
/MediaBox&lt;span class=&quot;error&quot;&gt;&amp;#91;0 0 328.5 449.28&amp;#93;&lt;/span&gt;&amp;gt;&amp;gt;&lt;br/&gt;
endobj&lt;/p&gt;

&lt;p&gt;5 0 obj&lt;br/&gt;
&amp;lt;&amp;lt;/Length1 190044/Length 190044&amp;gt;&amp;gt;stream&lt;br/&gt;
-&lt;del&gt;snip TTF stream&lt;/del&gt;-&lt;br/&gt;
endstream&lt;/p&gt;

&lt;p&gt;6 0 obj&lt;br/&gt;
&amp;lt;&amp;lt;/FontBBox&lt;span class=&quot;error&quot;&gt;&amp;#91;-558 -270 1168 1047&amp;#93;&lt;/span&gt;/CapHeight 713/Type/FontDescriptor/FontFile2 5 0 R/StemV 80/Descent -240/Flags 32/FontName/DroidSans/Ascent 765/ItalicAngle 0&amp;gt;&amp;gt;&lt;br/&gt;
endobj&lt;/p&gt;

&lt;p&gt;7 0 obj&lt;br/&gt;
&amp;lt;&amp;lt;/BaseFont/DroidSans/CIDSystemInfo&amp;lt;&amp;lt;/Ordering(Identity)/Registry(Adobe)/Supplement 0&amp;gt;&amp;gt;/W [3&lt;span class=&quot;error&quot;&gt;&amp;#91;259 269&amp;#93;&lt;/span&gt;43&lt;span class=&quot;error&quot;&gt;&amp;#91;701&amp;#93;&lt;/span&gt;58&lt;span class=&quot;error&quot;&gt;&amp;#91;883&amp;#93;&lt;/span&gt;71&lt;span class=&quot;error&quot;&gt;&amp;#91;585 535&amp;#93;&lt;/span&gt;79&lt;span class=&quot;error&quot;&gt;&amp;#91;258&amp;#93;&lt;/span&gt;82&lt;span class=&quot;error&quot;&gt;&amp;#91;577&amp;#93;&lt;/span&gt;85&lt;span class=&quot;error&quot;&gt;&amp;#91;398&amp;#93;&lt;/span&gt;]/Type/Font/Subtype/CIDFontType2/FontDescriptor 6 0 R/DW 1000/CIDToGIDMap/Identity&amp;gt;&amp;gt;&lt;br/&gt;
endobj&lt;/p&gt;

&lt;p&gt;8 0 obj&lt;br/&gt;
&amp;lt;&amp;lt;/Length 485&amp;gt;&amp;gt;stream&lt;br/&gt;
/CIDInit /ProcSet findresource begin&lt;br/&gt;
12 dict begin&lt;br/&gt;
begincmap&lt;br/&gt;
/CIDSystemInfo&lt;br/&gt;
&amp;lt;&amp;lt; /Registry (TTX+0)&lt;br/&gt;
/Ordering (T42UV)&lt;br/&gt;
/Supplement 0&lt;br/&gt;
def&lt;br/&gt;
/CMapName /TTX+0 def&lt;br/&gt;
/CMapType 2 def&lt;br/&gt;
1 begincodespacerange&lt;br/&gt;
&amp;lt;0000&amp;gt;&amp;lt;FFFF&amp;gt;&lt;br/&gt;
endcodespacerange&lt;br/&gt;
9 beginbfrange&lt;br/&gt;
&amp;lt;0003&amp;gt;&amp;lt;0003&amp;gt;&amp;lt;0020&amp;gt;&lt;br/&gt;
&amp;lt;0004&amp;gt;&amp;lt;0004&amp;gt;&amp;lt;0021&amp;gt;&lt;br/&gt;
&amp;lt;002b&amp;gt;&amp;lt;002b&amp;gt;&amp;lt;0048&amp;gt;&lt;br/&gt;
&amp;lt;003a&amp;gt;&amp;lt;003a&amp;gt;&amp;lt;0057&amp;gt;&lt;br/&gt;
&amp;lt;0047&amp;gt;&amp;lt;0047&amp;gt;&amp;lt;0064&amp;gt;&lt;br/&gt;
&amp;lt;0048&amp;gt;&amp;lt;0048&amp;gt;&amp;lt;0065&amp;gt;&lt;br/&gt;
&amp;lt;004f&amp;gt;&amp;lt;004f&amp;gt;&amp;lt;006c&amp;gt;&lt;br/&gt;
&amp;lt;0052&amp;gt;&amp;lt;0052&amp;gt;&amp;lt;006f&amp;gt;&lt;br/&gt;
&amp;lt;0055&amp;gt;&amp;lt;0055&amp;gt;&amp;lt;0072&amp;gt;&lt;br/&gt;
endbfrange&lt;br/&gt;
endcmap&lt;br/&gt;
CMapName currentdict /CMap defineresource pop&lt;br/&gt;
end end&lt;/p&gt;

&lt;p&gt;endstream&lt;br/&gt;
endobj&lt;/p&gt;</description>
                <environment>all</environment>
        <key id="12465941">PDFBOX-739</key>
            <summary>Problem converting pdf page w/ fully embedded TTF font, Identity-H (CID)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="asinger">Armando Singer</reporter>
                        <labels>
                            <label>image</label>
                            <label>pdf</label>
                    </labels>
                <created>Wed, 2 Jun 2010 07:53:05 +0000</created>
                <updated>Thu, 1 Jul 2010 07:27:38 +0000</updated>
                            <resolved>Thu, 10 Jun 2010 19:52:03 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12874480" author="asinger" created="Wed, 2 Jun 2010 07:55:24 +0000"  >&lt;p&gt;The attached file is the same as for &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-738&quot; title=&quot;Preserve transparency when converting to image with rgba&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-738&quot;&gt;&lt;del&gt;PDFBOX-738&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12877548" author="lehmi" created="Thu, 10 Jun 2010 19:52:03 +0000"  >&lt;p&gt;I&apos;ve fixed this issue with version 953431. We have to use the descendant font instead of the base font.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446125" name="hello-DroidSans-Identity-H.pdf" size="192095" author="asinger" created="Wed, 2 Jun 2010 07:55:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163464</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zlhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>205782</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>