<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:52:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-978] unreading of trailing content after &apos;endobj&apos; is missing new line byte (fix included)</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-978</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I have several journal PDFs where the last xref section starts like&lt;/p&gt;

&lt;p&gt;endobj xref&lt;br/&gt;
0 92&lt;br/&gt;
0000000000 65535 f&lt;br/&gt;
0000000044 00000 n&lt;/p&gt;

&lt;p&gt;in this cases the PDF parser reads the endobj line completely and unreads &quot; xref&quot;.&lt;br/&gt;
However the newline (in this case ^D) is lost. This is already documented in the&lt;br/&gt;
method readline() within PDFParser:&lt;br/&gt;
&quot;Note: if you later unread the results of this function, you&apos;ll&lt;br/&gt;
need to add a newline character to the end of the string.&quot;&lt;/p&gt;

&lt;p&gt;Currently I get an error like: &quot;expected=&apos;obj&apos; actual=&apos;655&apos;&quot; because the &apos;xref&apos; is read as &apos;xref0&apos;.&lt;/p&gt;

&lt;p&gt;The fix:&lt;br/&gt;
in PDFParser insert before line 579 (the unreading of trailing characters after &apos;endobj&apos;) the lines:&lt;/p&gt;

&lt;p&gt;// add a space first in place of the newline consumed by readline()&lt;br/&gt;
pdfSource.unread( SPACE_BYTE );&lt;/p&gt;

&lt;p&gt;thus we get:&lt;br/&gt;
                if (endObjectKey.startsWith( &quot;endobj&quot; ) ) &lt;/p&gt;
                {
                    /*
                     * Some PDF files don&apos;t contain a new line after endobj so we 
                     * need to make sure that the next object number is getting read separately
                     * and not part of the endobj keyword. Ex. Some files would have &quot;endobj28&quot;
                     * instead of &quot;endobj&quot;
                     */
                    // add a space first in place of the newline consumed by readline()
                    pdfSource.unread( SPACE_BYTE );
                    pdfSource.unread( endObjectKey.substring( 6 ).getBytes(&quot;ISO-8859-1&quot;) );
                } </description>
                <environment></environment>
        <key id="12501436">PDFBOX-978</key>
            <summary>unreading of trailing content after &apos;endobj&apos; is missing new line byte (fix included)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adamnichols">Adam Nichols</assignee>
                                    <reporter username="tboehme">Timo Boehme</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Mar 2011 08:31:08 +0000</created>
                <updated>Thu, 27 Feb 2014 07:28:55 +0000</updated>
                            <resolved>Wed, 16 Mar 2011 16:46:28 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="300">5m</timeoriginalestimate>
                            <timeestimate seconds="300">5m</timeestimate>
                                        <comments>
                            <comment id="13007545" author="adamnichols" created="Wed, 16 Mar 2011 16:46:28 +0000"  >&lt;p&gt;Patch committed in revision 1082195.  This patch is a good, safe fix given the current implementation.&lt;/p&gt;

&lt;p&gt;I&apos;d argue that the code should really be reading in one object (i.e. discard leading white space, read until whitespace) instead of reading the entire line, but since I don&apos;t have time to make and test that, we&apos;ll just stick to the current method with this patch.  I don&apos;t want to break anything just because I was in a hurry.&lt;/p&gt;</comment>
                            <comment id="13009055" author="tboehme" created="Mon, 21 Mar 2011 08:47:45 +0000"  >&lt;p&gt;The patch was applied to another code block as intended by me. The patched region is ok, but the problem stated in my report persists.&lt;br/&gt;
Thus the patch should also be applied 2 blocks above within block starting with&lt;br/&gt;
if (endObjectKey.startsWith( &quot;endobj&quot; ) ) &lt;/p&gt;</comment>
                            <comment id="13009197" author="adamnichols" created="Mon, 21 Mar 2011 16:28:17 +0000"  >&lt;p&gt;Fixed in revision 1083858.  Thanks again.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12473392">PDFBOX-818</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>69417</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zhrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>205181</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>