<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:10:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4763] Can&apos;t get inline image raw data</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4763</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I&apos;m trying to &quot;clone&quot; an inline image (having the original &lt;tt&gt;PDInlineImage&lt;/tt&gt; object) and I can&apos;t find a way to access the raw image data. The reason I want the raw data is because I&apos;m copying the dictionary as it is, including the filters, and using the &lt;tt&gt;PDInlineImage&lt;/tt&gt; constructor (not going via a &lt;tt&gt;BufferdImage&lt;/tt&gt; and &lt;tt&gt;LosslessFactory&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;It would seem to me that &lt;tt&gt;createInputStream(List&amp;lt;String&amp;gt; stopFilters)&lt;/tt&gt; should return the un-decoded stream when provided with a list blocking all filters, but all it returns is an empty stream. The source code suggests that &lt;tt&gt;PDImageXObject&lt;/tt&gt; has the same behavior. This should not be the case. When decoding is blocked, the raw data should be returned.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13283231">PDFBOX-4763</key>
            <summary>Can&apos;t get inline image raw data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="cdokolas">Constantine Dokolas</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Feb 2020 11:52:57 +0000</created>
                <updated>Tue, 30 Jun 2020 06:13:28 +0000</updated>
                            <resolved>Wed, 5 Feb 2020 19:02:39 +0000</resolved>
                                    <version>2.0.15</version>
                                    <fixVersion>2.0.19</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17030089" author="tilman" created="Tue, 4 Feb 2020 19:58:21 +0000"  >&lt;p&gt;Yeah something is wrong, from looking at the source code, it would indeed return an empty stream if hitting a filter&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; InputStream createInputStream(List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; stopFilters) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
{
    List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; filters = getFilters();
    ByteArrayInputStream in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(rawData);
    ByteArrayOutputStream out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream(rawData.length);
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; filters != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; i &amp;lt; filters.size(); i++)
    {
        &lt;span class=&quot;code-comment&quot;&gt;// TODO handling of abbreviated names belongs here, rather than in other classes
&lt;/span&gt;        out.reset();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stopFilters.contains(filters.get(i)))
        {
            &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
        {
            Filter filter = FilterFactory.INSTANCE.getFilter(filters.get(i));
            filter.decode(in, out, parameters, i);
            in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(out.toByteArray());
        }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(out.toByteArray());
}
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17030354" author="tilman" created="Wed, 5 Feb 2020 04:46:27 +0000"  >&lt;p&gt;Code from PDStream.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; InputStream createInputStream(List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; stopFilters) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
{
    InputStream is = stream.createRawInputStream();
    ByteArrayOutputStream os = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();
    List&amp;lt;COSName&amp;gt; filters = getFilters();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (filters != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; filters.size(); i++)
        {
            COSName nextFilter = filters.get(i);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((stopFilters != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &amp;amp;&amp;amp; stopFilters.contains(nextFilter.getName()))
            {
                &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
            }
            &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
            {
                Filter filter = FilterFactory.INSTANCE.getFilter(nextFilter);
                filter.decode(is, os, stream, i);
                IOUtils.closeQuietly(is);
                is = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(os.toByteArray());
                os.reset();
            }
        }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; is;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think we should just change the last line in the PDInlineImage.java method to &quot;return in&quot;.&lt;/p&gt;</comment>
                            <comment id="17030458" author="cdokolas" created="Wed, 5 Feb 2020 08:52:25 +0000"  >&lt;p&gt;The way I imagine it is, to first get the raw data and then pass it through each applicable filter, replacing the data each time with the new data until we hit a filter that&apos;s excluded (I hope you get what I&apos;m loosely describing). This way we, at least, get the raw data.&lt;/p&gt;</comment>
                            <comment id="17030883" author="jira-bot" created="Wed, 5 Feb 2020 18:01:46 +0000"  >&lt;p&gt;Commit 1873661 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1873661&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1873661&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4763&quot; title=&quot;Can&amp;#39;t get inline image raw data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4763&quot;&gt;&lt;del&gt;PDFBOX-4763&lt;/del&gt;&lt;/a&gt;: make code similar to PDStream.createInputStream(), this fixes bug that result is empty when there is a match&lt;/p&gt;</comment>
                            <comment id="17030884" author="jira-bot" created="Wed, 5 Feb 2020 18:01:50 +0000"  >&lt;p&gt;Commit 1873662 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1873662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1873662&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4763&quot; title=&quot;Can&amp;#39;t get inline image raw data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4763&quot;&gt;&lt;del&gt;PDFBOX-4763&lt;/del&gt;&lt;/a&gt;: make code similar to PDStream.createInputStream(), this fixes bug that result is empty when there is a match&lt;/p&gt;</comment>
                            <comment id="17030885" author="jira-bot" created="Wed, 5 Feb 2020 18:01:54 +0000"  >&lt;p&gt;Commit 1873663 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1873663&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1873663&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4763&quot; title=&quot;Can&amp;#39;t get inline image raw data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4763&quot;&gt;&lt;del&gt;PDFBOX-4763&lt;/del&gt;&lt;/a&gt;: make code similar to PDStream.createInputStream(), this fixes bug that result is empty when there is a match&lt;/p&gt;</comment>
                            <comment id="17030886" author="tilman" created="Wed, 5 Feb 2020 18:03:12 +0000"  >&lt;p&gt;The fix can be tested with the file from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-52&quot; title=&quot;DCTFilter is not implemented yet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-52&quot;&gt;&lt;del&gt;PDFBOX-52&lt;/del&gt;&lt;/a&gt; with the ExtractImages tool. The FAG logo comes directly from the image. (The 2.0.18 version does not fail, this is because &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4766&quot; title=&quot;PDInlineImage.getSuffix() returns null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4766&quot;&gt;&lt;del&gt;PDFBOX-4766&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="17030922" author="tilman" created="Wed, 5 Feb 2020 19:02:40 +0000"  >&lt;p&gt;Snapshot available:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.19-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.19-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310360">
                    <name>Dependent</name>
                                            <outwardlinks description="Dependent">
                                        <issuelink>
            <issuekey id="13283524">PDFBOX-4766</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0b52w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>