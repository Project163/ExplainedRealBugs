<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:11:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5170] Compression creates issue with Page structure</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5170</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Hi Team.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;PDFBox version 3.0.0-RC1&lt;/p&gt;

&lt;p&gt;pdftoppm version 21.04.0&lt;/p&gt;

&lt;p&gt;mupdf-gl version 1.18.0&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This might be an unusual issue but might needs to be checked. The simple code below creates a PDF that can&apos;t be viewed with Poppler because of&#160;&quot;error: malformed page tree&quot;&#8203;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
PDDocument testPdf = Loader.loadPDF(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;input.pdf&quot;&lt;/span&gt;));
testPdf.save(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;output.pdf&quot;&lt;/span&gt;));
testPdf.close();
PDDocument testPdf2 = Loader.loadPDF(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;input.pdf&quot;&lt;/span&gt;));
testPdf2.save(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;output2.pdf&quot;&lt;/span&gt;), CompressParameters.NO_COMPRESSION);
testPdf2.close();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is not a content issue because all PDFs from the same producer have the same problem, I&apos;ve just picked an example.&lt;/p&gt;

&lt;p&gt;Best regards&lt;/p&gt;

&lt;p&gt;Daniel&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13373804">PDFBOX-5170</key>
            <summary>Compression creates issue with Page structure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="kalaspuffar">Daniel Persson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Apr 2021 08:59:27 +0000</created>
                <updated>Fri, 18 Aug 2023 05:46:13 +0000</updated>
                            <resolved>Sun, 20 Jun 2021 13:32:03 +0000</resolved>
                                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Writing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17325622" author="kalaspuffar" created="Tue, 20 Apr 2021 09:01:16 +0000"  >&lt;p&gt;Still problem with uploading larger PDFs so added it to an old directory for incorrect PDFs.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://drive.google.com/drive/folders/1mddhI_rpvyNojj4MKMyunRBrBOQe54HF?usp=sharing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://drive.google.com/drive/folders/1mddhI_rpvyNojj4MKMyunRBrBOQe54HF?usp=sharing&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17326242" author="tilman" created="Wed, 21 Apr 2021 04:15:11 +0000"  >&lt;p&gt;Can you retry with the current snapshot build (we fixed some really nasty bugs), and clarify whether it is with both results or only the compressed one?&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/3.0.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/3.0.0-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17326282" author="kalaspuffar" created="Wed, 21 Apr 2021 06:04:11 +0000"  >&lt;p&gt;Hi Tilman.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ve tested it now with SNAPSHOT pdfbox-3.0.0-20210420.210105-2628.jar.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The issue still exists. Compressing the file makes it not readable. If I turn compression off, it will be readable.&lt;/p&gt;

&lt;p&gt;In the example above, output.pdf is not readable, but output2.pdf is.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Best regards&lt;/p&gt;

&lt;p&gt;Daniel&lt;/p&gt;</comment>
                            <comment id="17326506" author="mkl" created="Wed, 21 Apr 2021 12:53:44 +0000"  >&lt;p&gt;The problem here is that the original file is a hybrid reference file. That makes &lt;tt&gt;PDDocument.save&lt;/tt&gt; attempt to create a hybrid file, too, and fail horribly while doing so.&lt;br/&gt;
 If one hides the fact that the original file was hybrid, &lt;tt&gt;PDDocument.save&lt;/tt&gt; creates a proper PDF with a pure cross reference stream:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
PDDocument testPdf = Loader.loadPDF(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;input.pdf&quot;&lt;/span&gt;));
testPdf.getDocument().getTrailer().removeItem(COSName.XREF_STM);
testPdf.save(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;output-fixed.pdf&quot;&lt;/span&gt;));
testPdf.close();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;hr /&gt;
&lt;p&gt;By the way, the fact that PDFBox does not stumble while parsing the file saved without the fix, implies that PDFBox incorrectly parses hybrid reference documents: Parsing them as described in the specification results in particular in a &lt;tt&gt;null&lt;/tt&gt; &lt;b&gt;Pages&lt;/b&gt; entry in the catalog of the broken example while PDFBox instead finds a &lt;b&gt;Pages&lt;/b&gt; dictionary.&lt;/p&gt;</comment>
                            <comment id="17326553" author="kalaspuffar" created="Wed, 21 Apr 2021 13:59:07 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkl&quot; class=&quot;user-hover&quot; rel=&quot;mkl&quot;&gt;mkl&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I can verify that your fix solves the issue. Another thing that might be related when reading the specification about Cross-Reference Stream (new knowledge for me) is that they may not be encrypted and need a different flag if compressed.&lt;/p&gt;

&lt;p&gt;But do I understand the specification correctly that this is extra information for performance and not required to present the document correctly?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Best regards&lt;/p&gt;

&lt;p&gt;Daniel&lt;/p&gt;</comment>
                            <comment id="17326594" author="mkl" created="Wed, 21 Apr 2021 14:44:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;But do I understand the specification correctly that this is extra information for performance and not required to present the document correctly?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;By &lt;em&gt;this&lt;/em&gt; you mean the cross reference tables and streams? In that case you understand it incorrectly: The correct way to parse a PDF is by the cross references. Parsing from start to end and trying to recognize the objects on the run, is very error prone. &lt;/p&gt;</comment>
                            <comment id="17327107" author="kalaspuffar" created="Thu, 22 Apr 2021 05:26:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkl&quot; class=&quot;user-hover&quot; rel=&quot;mkl&quot;&gt;mkl&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;No, I thought there where a difference between tables and streams and that you only needed one of them.&lt;/p&gt;

&lt;p&gt;&quot;Applications that do not support PDF 1.5 cannot access objects that are referenced by cross-reference streams. If a file uses cross-reference streams exclusively, it cannot be opened by such applications.&quot;&lt;/p&gt;

&lt;p&gt;So my understanding was that you only needed the table to read the document, but the streams were more efficient but not supported by older readers. But I&apos;m still trying to figure this out.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Best regards&lt;/p&gt;

&lt;p&gt;Daniel&lt;/p&gt;</comment>
                            <comment id="17327252" author="mkl" created="Thu, 22 Apr 2021 10:17:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;No, I thought there where a difference between tables and streams and that you only needed one of them.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ah, ok.&lt;br/&gt;
 Well, as long as all the cross references are present in one type of cross reference structure (table or stream), only that structure is needed.&lt;br/&gt;
 &lt;b&gt;But&lt;/b&gt; in case of hybrid reference documents some information may only be present in table form and some in stream form. To understand the whole document, therefore, you need to read both structures and combine the data from them according to the specification.&lt;br/&gt;
 &lt;em&gt;(The original idea here was that the objects needed for features present only in PDF 1.5 and higher can be referenced by streams while objects needed for features already present before PDF 1.5 must be referenced in tables; this in particular allows to put the objects needed for features present only in PDF 1.5 and higher into object streams which allows for substantially better compression.)&lt;/em&gt;&lt;/p&gt;</comment>
                            <comment id="17354236" author="jira-bot" created="Mon, 31 May 2021 06:23:38 +0000"  >&lt;p&gt;Commit 1890334 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1890334&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1890334&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5170&quot; title=&quot;Compression creates issue with Page structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5170&quot;&gt;&lt;del&gt;PDFBOX-5170&lt;/del&gt;&lt;/a&gt;: avoid mixing up cross reference tables with cross reference streams&lt;/p&gt;</comment>
                            <comment id="17354239" author="lehmi" created="Mon, 31 May 2021 06:28:40 +0000"  >&lt;p&gt;PDFBox doesn&apos;t support writing hybrid cross reference information and the current implementation stumbles upon such a hybrid pdf. I&apos;ve fixed COSWriter so that it writes either cross reference tables (pdfs without compression) or cross reference streams (pdfs with compression or hybrid pdfs which are &quot;converted&quot; to use cross reference streams only).&lt;/p&gt;

&lt;p&gt;The resulting cross reference table isn&apos;t optimal as it has a lot of unused object numbers in the beginning. I&apos;m going to have a look&lt;/p&gt;</comment>
                            <comment id="17357840" author="jira-bot" created="Sat, 5 Jun 2021 11:46:30 +0000"  >&lt;p&gt;Commit 1890497 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1890497&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1890497&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5170&quot; title=&quot;Compression creates issue with Page structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5170&quot;&gt;&lt;del&gt;PDFBOX-5170&lt;/del&gt;&lt;/a&gt;: preserve the information whether a parsed COSDicionary is direct or not so that COSWriter can take this into account when saving the pdf&lt;/p&gt;</comment>
                            <comment id="17357843" author="jira-bot" created="Sat, 5 Jun 2021 11:48:20 +0000"  >&lt;p&gt;Commit 1890500 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1890500&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1890500&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5170&quot; title=&quot;Compression creates issue with Page structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5170&quot;&gt;&lt;del&gt;PDFBOX-5170&lt;/del&gt;&lt;/a&gt;: reuse existing object key of a COSObject instead of creating a new one&lt;/p&gt;</comment>
                            <comment id="17357853" author="jira-bot" created="Sat, 5 Jun 2021 12:43:19 +0000"  >&lt;p&gt;Commit 1890502 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1890502&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1890502&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5170&quot; title=&quot;Compression creates issue with Page structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5170&quot;&gt;&lt;del&gt;PDFBOX-5170&lt;/del&gt;&lt;/a&gt;: revert last changes due to some issue with the overlay test&lt;/p&gt;</comment>
                            <comment id="17358101" author="jira-bot" created="Sun, 6 Jun 2021 12:08:49 +0000"  >&lt;p&gt;Commit 1890527 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1890527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1890527&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5170&quot; title=&quot;Compression creates issue with Page structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5170&quot;&gt;&lt;del&gt;PDFBOX-5170&lt;/del&gt;&lt;/a&gt;: sonar fix&lt;/p&gt;</comment>
                            <comment id="17362409" author="jira-bot" created="Sat, 12 Jun 2021 21:53:55 +0000"  >&lt;p&gt;Commit 1890741 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1890741&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1890741&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5170&quot; title=&quot;Compression creates issue with Page structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5170&quot;&gt;&lt;del&gt;PDFBOX-5170&lt;/del&gt;&lt;/a&gt;: use PDFCloneUtility to clone the resources of the overlaid page to avoid double object keys within the resulting pdf&lt;/p&gt;</comment>
                            <comment id="17362529" author="jira-bot" created="Sun, 13 Jun 2021 11:23:33 +0000"  >&lt;p&gt;Commit 1890748 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1890748&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1890748&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5170&quot; title=&quot;Compression creates issue with Page structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5170&quot;&gt;&lt;del&gt;PDFBOX-5170&lt;/del&gt;&lt;/a&gt;: reuse existing object key of a COSObject instead of creating a new one&lt;/p&gt;</comment>
                            <comment id="17362603" author="jira-bot" created="Sun, 13 Jun 2021 20:33:33 +0000"  >&lt;p&gt;Commit 1890759 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1890759&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1890759&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5170&quot; title=&quot;Compression creates issue with Page structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5170&quot;&gt;&lt;del&gt;PDFBOX-5170&lt;/del&gt;&lt;/a&gt;: sonar fix&lt;/p&gt;</comment>
                            <comment id="17362715" author="lehmi" created="Mon, 14 Jun 2021 05:36:25 +0000"  >&lt;p&gt;I&apos;ve solved the remaining issue with lots of unused objects within the cross reference table. COSWriter now reuses already assigned object keys instead of creating new ones. But first I had to solve an issue with the overlay code. There were objects using the very same object numbers which led to an issue when COSWriter reuses the assigned numbers. I fixed that by using &lt;tt&gt;PDFCloneUtility&lt;/tt&gt; which was introduced to merge pdfs.&lt;/p&gt;</comment>
                            <comment id="17363144" author="tilman" created="Mon, 14 Jun 2021 18:41:35 +0000"  >&lt;p&gt;There is a problem with the page structure in an old test I haven&apos;t committed (I will later) and also in an existing test, but that isn&apos;t detected. To detect it, add this code in &lt;tt&gt;TestCreateSignature.checkSignature()&lt;/tt&gt; in the beginning of the block where the signed file is read &lt;tt&gt;Loader.loadPDF(signedFile))&lt;/tt&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// early detection of problems in the page structure
&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; p = 0;
PDPageTree pageTree = document.getPages();
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (PDPage page : document.getPages())
{
	assertEquals(p, pageTree.indexOf(page));
	++p;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This will show a failure of &lt;tt&gt;testPDFBox3978&lt;/tt&gt; after r1890748. However this happens only if TestCreateSignature runs alone, not if the build tests are done (see also &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="17363381" author="jira-bot" created="Tue, 15 Jun 2021 05:02:25 +0000"  >&lt;p&gt;Commit 1890794 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1890794&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1890794&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5170&quot; title=&quot;Compression creates issue with Page structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5170&quot;&gt;&lt;del&gt;PDFBOX-5170&lt;/del&gt;&lt;/a&gt;: sonar fix&lt;/p&gt;</comment>
                            <comment id="17365921" author="jira-bot" created="Sat, 19 Jun 2021 11:54:44 +0000"  >&lt;p&gt;Commit 1890907 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1890907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1890907&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5170&quot; title=&quot;Compression creates issue with Page structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5170&quot;&gt;&lt;del&gt;PDFBOX-5170&lt;/del&gt;&lt;/a&gt;: don&apos;t reuse when writing an incremental update&lt;/p&gt;</comment>
                            <comment id="17366179" author="jira-bot" created="Sun, 20 Jun 2021 13:11:15 +0000"  >&lt;p&gt;Commit 1890928 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1890928&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1890928&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5170&quot; title=&quot;Compression creates issue with Page structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5170&quot;&gt;&lt;del&gt;PDFBOX-5170&lt;/del&gt;&lt;/a&gt;: disable compressed object streams explicitly when writing incremental updates which includes signing&lt;/p&gt;</comment>
                            <comment id="17366180" author="lehmi" created="Sun, 20 Jun 2021 13:32:03 +0000"  >&lt;p&gt;COSWriter tries to reuse object keys to avoid too many unused object numbers within the cross reference table. This works fine for new pdfs and existing pdfs which are loaded, manipulated and saved using &quot;save&quot; as COSWriter &quot;knows&quot; the highest object number from the loaded pdf so that it is easy to avoid reusing an already used object number. &lt;br/&gt;
It gets complicated when is comes to incremental updates and signing. Such pdfs are written in several steps and COSWriter doesn&apos;t have all information it needs to avoid overlapping object numbers. I&apos;ve simply disabled the reusage-part in such cases as a sort of workaround. Furthermore I&apos;ve realized that compressed object streams don&apos;t work for the incremental/signing part of such pdfs so that I&apos;ve explicitly disabled compression (it was already disabled implicitly by not setting any value for &lt;tt&gt;compressParameters&lt;/tt&gt;) Saying that, there seems to be a some room for improvements, but that is another story.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13383784">PDFBOX-5215</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0q8ko:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>