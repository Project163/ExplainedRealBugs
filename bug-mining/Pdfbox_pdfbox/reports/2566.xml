<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:11:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5214] File generated differently depending on test call</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5214</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Something weird is happening in &lt;tt&gt;TestCreateSignature.testPDFBox3978&lt;/tt&gt;. The file &lt;tt&gt;EmptySignatureForm.pdf&lt;/tt&gt; that is generated has different object streams depending on whether it is generated within a full test of the examples package, or if the &lt;tt&gt;TestCreateSignature&lt;/tt&gt; class is tested. The two files should be identical except for the ID.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13383782">PDFBOX-5214</key>
            <summary>File generated differently depending on test call</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Jun 2021 18:40:12 +0000</created>
                <updated>Fri, 18 Aug 2023 05:46:15 +0000</updated>
                            <resolved>Sat, 4 Sep 2021 11:12:36 +0000</resolved>
                                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Writing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17364352" author="mkl" created="Wed, 16 Jun 2021 15:40:19 +0000"  >&lt;p&gt;The files are equivalent, they merely use different object numbers (from different object number ranges) for the objects.&lt;/p&gt;

&lt;p&gt;A possible issue, though: The first cross reference table in a PDF may not be segmented. It might be analogously assumed that in a PDF with cross reference streams only the equivalent shall hold for the first cross reference stream.&lt;/p&gt;

&lt;p&gt;In both files, though, there is a more or less large gap between two sections.&lt;/p&gt;</comment>
                            <comment id="17365255" author="lehmi" created="Fri, 18 Jun 2021 05:59:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkl&quot; class=&quot;user-hover&quot; rel=&quot;mkl&quot;&gt;mkl&lt;/a&gt; the test should be deterministic and should always end up with the same result but it doesn&apos;t depending on how one calls the test case&lt;/p&gt;</comment>
                            <comment id="17370205" author="lehmi" created="Sun, 27 Jun 2021 11:56:35 +0000"  >&lt;p&gt;I ran into some other strange things and I&apos;m not sure if those are maybe somehow connected. &lt;tt&gt;PDAcroFormFlattenTest&lt;/tt&gt; fails in about 3 times out of 4 whenever I run it separately within eclipse. If I run the test using &lt;tt&gt;mvn test&lt;/tt&gt; everything is fine. It looks like it is an concurrency issue. If I switch from &lt;tt&gt;@Execution(ExecutionMode.CONCURRENT)&lt;/tt&gt; to &lt;tt&gt;@Execution(ExecutionMode.SAME_THREAD)&lt;/tt&gt; everything is fine. I dug deeper into it and it seems related to the logging. If I remove the logging from &lt;tt&gt;TestPDFToImage&lt;/tt&gt; everything works fine even independent of the execution mode. I&apos;ve no idea how the logging can interfere with the generation of the pdfs but it is somehow connected.&lt;br/&gt;
The same happens with &lt;tt&gt;TestCreateSignature&lt;/tt&gt; but it fails not that often.&lt;/p&gt;</comment>
                            <comment id="17398118" author="lehmi" created="Thu, 12 Aug 2021 15:05:11 +0000"  >&lt;p&gt;It isn&apos;t related to the logging and has nothing to do with TestPDFToImage. In my case the fonts of the &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12816016/Signed-Document-2.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;pdf&lt;/a&gt; from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3396&quot; title=&quot;flattening AcroForm with visible sign field ETSI.CAdES.detached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3396&quot;&gt;&lt;del&gt;PDFBOX-3396&lt;/del&gt;&lt;/a&gt; are replaced after flattening. That leads to different rendering results.&lt;/p&gt;

&lt;p&gt;After some debugging I&apos;ve found the reason. The static instances of the 14 standard fonts within PDType1Font aren&apos;t threadsafe. Those fonts are backed by a COSDictionary which isn&apos;t supposed to be stable.&lt;/p&gt;</comment>
                            <comment id="17398489" author="jira-bot" created="Fri, 13 Aug 2021 07:55:53 +0000"  >&lt;p&gt;Commit 1892294 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892294&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892294&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: introduce enum for the 14 standard fonts, make PDType1Font constructor public&lt;/p&gt;</comment>
                            <comment id="17398490" author="jira-bot" created="Fri, 13 Aug 2021 07:58:26 +0000"  >&lt;p&gt;Commit 1892295 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892295&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892295&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace static standard14font with a newly created one&lt;/p&gt;</comment>
                            <comment id="17398499" author="jira-bot" created="Fri, 13 Aug 2021 08:09:20 +0000"  >&lt;p&gt;Commit 1892297 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892297&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace static standard14font with a newly created one&lt;/p&gt;</comment>
                            <comment id="17398502" author="jira-bot" created="Fri, 13 Aug 2021 08:13:41 +0000"  >&lt;p&gt;Commit 1892299 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892299&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892299&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace static standard14font with a newly created one&lt;/p&gt;</comment>
                            <comment id="17398507" author="jira-bot" created="Fri, 13 Aug 2021 08:33:02 +0000"  >&lt;p&gt;Commit 1892302 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892302&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892302&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace static standard14font with a newly created one&lt;/p&gt;</comment>
                            <comment id="17398508" author="jira-bot" created="Fri, 13 Aug 2021 08:33:57 +0000"  >&lt;p&gt;Commit 1892303 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892303&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892303&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: use GlyphList directly&lt;/p&gt;</comment>
                            <comment id="17398514" author="jira-bot" created="Fri, 13 Aug 2021 08:46:28 +0000"  >&lt;p&gt;Commit 1892304 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892304&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892304&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace existing enum with new one to avoid using static instances of the 14 standard fonts&lt;/p&gt;</comment>
                            <comment id="17398522" author="jira-bot" created="Fri, 13 Aug 2021 09:06:57 +0000"  >&lt;p&gt;Commit 1892305 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892305&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: added toString to enum&lt;/p&gt;</comment>
                            <comment id="17398523" author="jira-bot" created="Fri, 13 Aug 2021 09:07:51 +0000"  >&lt;p&gt;Commit 1892306 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892306&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: remove no longer needed trigger for premature initialization of PDType1Font&lt;/p&gt;</comment>
                            <comment id="17398612" author="lehmi" created="Fri, 13 Aug 2021 11:57:23 +0000"  >&lt;p&gt;I&apos;ve introduced a new enum for the names of the 14 standard fonts to make its usage easier and safer. Furthermore I&apos;ve replaced the usage of the static instances of PDType1Fonts with a newly created one at several places.&lt;/p&gt;

&lt;p&gt;The idea is to remove all static instances from PDType1Font. I now that is a big change with a lot of consequences but IMHO there is no alternative. :-|&lt;/p&gt;
</comment>
                            <comment id="17398669" author="jira-bot" created="Fri, 13 Aug 2021 13:50:24 +0000"  >&lt;p&gt;Commit 1892310 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892310&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892310&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: deleted accidentally committed class&lt;/p&gt;</comment>
                            <comment id="17398672" author="jira-bot" created="Fri, 13 Aug 2021 13:55:01 +0000"  >&lt;p&gt;Commit 1892311 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892311&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace HashMap with EnumMap, sonar fix&lt;/p&gt;</comment>
                            <comment id="17398846" author="tilman" created="Fri, 13 Aug 2021 18:17:17 +0000"  >&lt;p&gt;Was this part of the commit intended?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-                return Loader.loadPDF(file, password);
+                return Loader.loadPDF(new FileInputStream(file), password);
+                // return Loader.loadPDF(file, password);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17398907" author="jira-bot" created="Fri, 13 Aug 2021 20:36:05 +0000"  >&lt;p&gt;Commit 1892317 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892317&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892317&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: revert accidentally committed change&lt;/p&gt;</comment>
                            <comment id="17398908" author="lehmi" created="Fri, 13 Aug 2021 20:37:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; thanks for the pointer. I&apos;ve double checked every committed but obviously overlooked that. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17406627" author="jira-bot" created="Mon, 30 Aug 2021 08:42:08 +0000"  >&lt;p&gt;Commit 1892720 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892720&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892720&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace static standard14font with a newly created one&lt;/p&gt;</comment>
                            <comment id="17406631" author="jira-bot" created="Mon, 30 Aug 2021 08:47:59 +0000"  >&lt;p&gt;Commit 1892721 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892721&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892721&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: provide a getter to get a FontBoxFont for all Standard 14 fonts&lt;/p&gt;</comment>
                            <comment id="17406639" author="jira-bot" created="Mon, 30 Aug 2021 08:57:52 +0000"  >&lt;p&gt;Commit 1892722 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892722&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892722&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace static standard14font with a newly created one&lt;/p&gt;</comment>
                            <comment id="17406641" author="jira-bot" created="Mon, 30 Aug 2021 09:05:27 +0000"  >&lt;p&gt;Commit 1892723 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892723&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892723&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace static standard14font with a newly created one, use Standard14Fonts.getAFM to load FontMetrics&lt;/p&gt;</comment>
                            <comment id="17406652" author="jira-bot" created="Mon, 30 Aug 2021 09:33:45 +0000"  >&lt;p&gt;Commit 1892725 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892725&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892725&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace static standard14font within test&lt;/p&gt;</comment>
                            <comment id="17406653" author="jira-bot" created="Mon, 30 Aug 2021 09:34:38 +0000"  >&lt;p&gt;Commit 1892726 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892726&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892726&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: remove static standard14font instances&lt;/p&gt;</comment>
                            <comment id="17406654" author="jira-bot" created="Mon, 30 Aug 2021 09:35:40 +0000"  >&lt;p&gt;Commit 1892727 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892727&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892727&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace static standard14font with a newly created one&lt;/p&gt;</comment>
                            <comment id="17406794" author="jira-bot" created="Mon, 30 Aug 2021 15:57:06 +0000"  >&lt;p&gt;Commit 4ee4b5b55865dbd3f43d25f2d14fe6ebb2ccc4a6 in pdfbox-docs&apos;s branch refs/heads/master from Andreas Lehmk&#252;hler&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=pdfbox-docs.git;h=4ee4b5b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=pdfbox-docs.git;h=4ee4b5b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5030&quot; title=&quot;Create Migration guide for 3.0.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5030&quot;&gt;&lt;del&gt;PDFBOX-5030&lt;/del&gt;&lt;/a&gt;: add section about the removal of the static instances of the standard 14 fonts&lt;/p&gt;</comment>
                            <comment id="17407473" author="lehmi" created="Tue, 31 Aug 2021 15:32:49 +0000"  >&lt;p&gt;I&apos;m done here.  I&apos;ve implemented the following changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;all static instances of PDType1Font were removed for the given reasons&lt;/li&gt;
	&lt;li&gt;the new enum &lt;tt&gt;org.apache.pdfbox.pdmodel.font.Standard14Fonts.FontName&lt;/tt&gt; represents all possible names for a Standard 14 font&lt;/li&gt;
	&lt;li&gt;the new constructor &lt;tt&gt;org.apache.pdfbox.pdmodel.font.PDType1Font.PDType1Font(FontName)&lt;/tt&gt; can be used to create an instance of a Standard 14 font. Such instances aren&apos;t singletons any more and have to be recreated/cached if needed/suitable&lt;/li&gt;
	&lt;li&gt;the AFM-files are loaded on demand and are cached to avoid a reload&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.pdfbox.pdmodel.font.Standard14Fonts.getMappedFont(FontName)&lt;/tt&gt; returns a mapped font for all Standard 14 fonts. All found mappings are cached.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="17408270" author="tilman" created="Wed, 1 Sep 2021 16:34:25 +0000"  >&lt;p&gt;I&apos;m getting fails / differences rendering annotations.&lt;/p&gt;

&lt;p&gt;AnnotationSample.Standard.pdf (NPE)&lt;br/&gt;
CTAN-example-Annotations.pdf (NPE)&lt;br/&gt;
pdf_commenting_new.pdf p5 (differences)&lt;br/&gt;
PDFJS-1973-Annotations-pdfcomment.pdf (differences)&lt;/p&gt;

&lt;p&gt;1.&lt;br/&gt;
Standard14Fonts.getMappedFont() will sometimes return null because put() returns the previous value. That is easy to fix.&lt;/p&gt;

&lt;p&gt;2.&lt;br/&gt;
Less easy: &lt;tt&gt;Standard14Fonts.getMappedFont(FontName.HELVETICA_BOLD).getPath(&quot;question&quot;)&lt;/tt&gt; will not return the correct path for me with the file AnnotationSample.Standard.pdf .&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FontBoxFont font1 = Standard14Fonts.getMappedFont(FontName.HELVETICA_BOLD);
FontBoxFont font2 = Standard14Fonts.getMappedFont(FontName.ZAPF_DINGBATS);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Helvetica is a org.apache.fontbox.ttf.TrueTypeFont, Zapf Dingbats is a org.apache.fontbox.type1.Type1Font. Helvetica won&apos;t work because the Windows 10 default fonts don&apos;t have a postscript table. I suspect that &lt;tt&gt;Standard14Fonts.getMappedFont()&lt;/tt&gt; can&apos;t be used in &lt;tt&gt;PDTextAppearanceHandler&lt;/tt&gt; at all, we need to use PDType1Font directly.&lt;/p&gt;</comment>
                            <comment id="17408362" author="jira-bot" created="Wed, 1 Sep 2021 20:25:18 +0000"  >&lt;p&gt;Commit 1892793 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892793&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892793&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: don&apos;t return the previous value&lt;/p&gt;</comment>
                            <comment id="17408363" author="lehmi" created="Wed, 1 Sep 2021 20:28:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; thanks again for your valuable feedback. I&apos;ve fixed the first issue. I&apos;m going to check the second one soon&lt;/p&gt;</comment>
                            <comment id="17408563" author="lehmi" created="Thu, 2 Sep 2021 06:16:42 +0000"  >&lt;p&gt;Looks like I missed a possible name mapping by calling &lt;tt&gt;PDType1Font.getNameInFont(String)&lt;/tt&gt;. Maybe I&apos;m able to replace it with something else ...&lt;/p&gt;</comment>
                            <comment id="17409294" author="jira-bot" created="Fri, 3 Sep 2021 06:20:37 +0000"  >&lt;p&gt;Commit 1892838 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892838&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892838&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: add additional mapping for the glyph names for standard 14 fonts&lt;/p&gt;</comment>
                            <comment id="17409295" author="lehmi" created="Fri, 3 Sep 2021 06:21:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; I&apos;ve reimplemented the relevant part of the missing code. Your issue should be solved&lt;/p&gt;</comment>
                            <comment id="17409316" author="tilman" created="Fri, 3 Sep 2021 07:08:54 +0000"  >&lt;p&gt;Yes it is, thank you!&lt;/p&gt;</comment>
                            <comment id="17409943" author="jira-bot" created="Sat, 4 Sep 2021 11:11:52 +0000"  >&lt;p&gt;Commit 1892896 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1892896&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1892896&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: replace ConcurrentHashMap with HashMap as it is no longer needed for standard 14 fonts&lt;/p&gt;</comment>
                            <comment id="17409944" author="lehmi" created="Sat, 4 Sep 2021 11:12:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Thanks for the fast feedback!&lt;/p&gt;

&lt;p&gt;Set to reolved&lt;/p&gt;</comment>
                            <comment id="17415328" author="jira-bot" created="Wed, 15 Sep 2021 05:51:49 +0000"  >&lt;p&gt;Commit 1893350 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1893350&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1893350&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5214&quot; title=&quot;File generated differently depending on test call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5214&quot;&gt;&lt;del&gt;PDFBOX-5214&lt;/del&gt;&lt;/a&gt;: sonar fix&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13233232">PDFBOX-4548</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13482892">PDFBOX-5517</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13032866" name="AnnotationSample.Standard.pdf" size="195569" author="tilman" created="Wed, 1 Sep 2021 16:34:56 +0000"/>
                            <attachment id="13026815" name="EmptySignatureForm_FullPackageTest.pdf" size="739" author="tilman" created="Mon, 14 Jun 2021 18:38:29 +0000"/>
                            <attachment id="13026814" name="EmptySignatureForm_SingleClassTest.pdf" size="740" author="tilman" created="Mon, 14 Jun 2021 18:38:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ry0o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>