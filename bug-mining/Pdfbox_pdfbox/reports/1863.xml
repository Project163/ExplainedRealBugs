<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:06:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3950] NPE in PageIterator.enqueueKids</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3950</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.NullPointerException
	at java.util.ArrayDeque.addLast(ArrayDeque.java:244)
	at java.util.ArrayDeque.add(ArrayDeque.java:418)
	at org.apache.pdfbox.pdmodel.PDPageTree$PageIterator.enqueueKids(PDPageTree.java:178)
	at org.apache.pdfbox.pdmodel.PDPageTree$PageIterator.enqueueKids(PDPageTree.java:173)
	at org.apache.pdfbox.pdmodel.PDPageTree$PageIterator.&amp;lt;init&amp;gt;(PDPageTree.java:159)
	at org.apache.pdfbox.pdmodel.PDPageTree$PageIterator.&amp;lt;init&amp;gt;(PDPageTree.java:153)
	at org.apache.pdfbox.pdmodel.PDPageTree.iterator(PDPageTree.java:123)
	at org.apache.pdfbox.text.PDFTextStripper.processPages(PDFTextStripper.java:282)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This worked in 2.0.7. There are about 200 occurences of this exception in the tests by Tim.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13106543">PDFBOX-3950</key>
            <summary>NPE in PageIterator.enqueueKids</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Mon, 2 Oct 2017 21:07:52 +0000</created>
                <updated>Thu, 2 Nov 2017 21:01:07 +0000</updated>
                            <resolved>Sun, 8 Oct 2017 15:39:56 +0000</resolved>
                                    <version>2.0.8</version>
                                    <fixVersion>2.0.8</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16190326" author="lehmi" created="Tue, 3 Oct 2017 20:45:55 +0000"  >&lt;p&gt;This issue is similar as &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3950&quot; title=&quot;NPE in PageIterator.enqueueKids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3950&quot;&gt;&lt;del&gt;PDFBOX-3950&lt;/del&gt;&lt;/a&gt;. But instead of empty page content streams the pages itself are missing.&lt;br/&gt;
I&apos;m thinking about removing null-pages after rebuild the trailer to avoid this specific NPE&lt;/p&gt;</comment>
                            <comment id="16195798" author="jira-bot" created="Sat, 7 Oct 2017 17:15:52 +0000"  >&lt;p&gt;Commit 1811443 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1811443&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1811443&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3950&quot; title=&quot;NPE in PageIterator.enqueueKids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3950&quot;&gt;&lt;del&gt;PDFBOX-3950&lt;/del&gt;&lt;/a&gt;: added a checker for not dereferenced entries within the pages dictionaries, null-objects are removed&lt;/p&gt;</comment>
                            <comment id="16195801" author="lehmi" created="Sat, 7 Oct 2017 17:21:01 +0000"  >&lt;p&gt;I&apos;ve added a checker for the pages dictionary. Those entries which are not dereferenced will be removed. This avoids exception like the attached one. But there may be some other not dereferenced objects which may lead to other exceptions, e.g. the attached pdf can be opened now, but throws an exception if one tries to render page 4&lt;/p&gt;</comment>
                            <comment id="16195872" author="tilman" created="Sat, 7 Oct 2017 19:56:41 +0000"  >&lt;p&gt;Very good. Are you also making the change for the trunk?&lt;/p&gt;</comment>
                            <comment id="16196067" author="lehmi" created="Sun, 8 Oct 2017 11:08:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Did you run your test, or did you just like it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ? And yes, I&apos;m going to include the change into the trunk as well&lt;/p&gt;</comment>
                            <comment id="16196068" author="tilman" created="Sun, 8 Oct 2017 11:12:41 +0000"  >&lt;p&gt;No I didn&apos;t, the test files are only for the trunk (although I create a temporary copy shortly before release). However I looked at the code and it looked good to me.&lt;/p&gt;</comment>
                            <comment id="16196071" author="jira-bot" created="Sun, 8 Oct 2017 11:36:13 +0000"  >&lt;p&gt;Commit 1811473 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1811473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1811473&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3950&quot; title=&quot;NPE in PageIterator.enqueueKids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3950&quot;&gt;&lt;del&gt;PDFBOX-3950&lt;/del&gt;&lt;/a&gt;: moved PDFParser#checkPages to COSParser, introduced COSParser#retrieveTrailer&lt;/p&gt;</comment>
                            <comment id="16196072" author="jira-bot" created="Sun, 8 Oct 2017 11:37:52 +0000"  >&lt;p&gt;Commit 1811474 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1811474&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1811474&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3950&quot; title=&quot;NPE in PageIterator.enqueueKids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3950&quot;&gt;&lt;del&gt;PDFBOX-3950&lt;/del&gt;&lt;/a&gt;: added a checker for not dereferenced entries within the pages dictionaries, null-objects are removed&lt;/p&gt;</comment>
                            <comment id="16196074" author="lehmi" created="Sun, 8 Oct 2017 11:44:26 +0000"  >&lt;p&gt;I&apos;ve refactored my solution for the 2.0 branch and added it to the trunk&lt;/p&gt;</comment>
                            <comment id="16196100" author="tilman" created="Sun, 8 Oct 2017 12:59:57 +0000"  >&lt;p&gt;Tests are fine with the trunk. I&apos;ll retest 2.0 later today.&lt;/p&gt;</comment>
                            <comment id="16196171" author="tilman" created="Sun, 8 Oct 2017 15:33:01 +0000"  >&lt;p&gt;2.0 is fine too.&lt;/p&gt;</comment>
                            <comment id="16196173" author="lehmi" created="Sun, 8 Oct 2017 15:39:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;tallison@mitre.org&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; thanks for the finding and the retest. Set to resolved&lt;/p&gt;</comment>
                            <comment id="16223402" author="tilman" created="Sat, 28 Oct 2017 10:41:15 +0000"  >&lt;p&gt;I&apos;m being lenient on the missing /gs name too because it gives us an advantage in text extraction, see page 4 of attached file 6MNJMPJVZMZRSTE5A4ENHP3F5SIOG27T.pdf. I&apos;ll have to adjust the test too and fix an NPE in font processing that happens with the original file (where my fix won&apos;t improve anything).&lt;/p&gt;</comment>
                            <comment id="16223403" author="jira-bot" created="Sat, 28 Oct 2017 10:42:06 +0000"  >&lt;p&gt;Commit 1813601 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1813601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1813601&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3950&quot; title=&quot;NPE in PageIterator.enqueueKids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3950&quot;&gt;&lt;del&gt;PDFBOX-3950&lt;/del&gt;&lt;/a&gt;: be lenient if resource is missing&lt;/p&gt;</comment>
                            <comment id="16223405" author="jira-bot" created="Sat, 28 Oct 2017 10:42:11 +0000"  >&lt;p&gt;Commit 1813602 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1813602&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1813602&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3950&quot; title=&quot;NPE in PageIterator.enqueueKids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3950&quot;&gt;&lt;del&gt;PDFBOX-3950&lt;/del&gt;&lt;/a&gt;: be lenient if resource is missing&lt;/p&gt;</comment>
                            <comment id="16223407" author="jira-bot" created="Sat, 28 Oct 2017 10:44:56 +0000"  >&lt;p&gt;Commit 1813604 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1813604&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1813604&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3950&quot; title=&quot;NPE in PageIterator.enqueueKids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3950&quot;&gt;&lt;del&gt;PDFBOX-3950&lt;/del&gt;&lt;/a&gt;: avoid NPE or CCE&lt;/p&gt;</comment>
                            <comment id="16223408" author="jira-bot" created="Sat, 28 Oct 2017 10:45:02 +0000"  >&lt;p&gt;Commit 1813605 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1813605&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1813605&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3950&quot; title=&quot;NPE in PageIterator.enqueueKids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3950&quot;&gt;&lt;del&gt;PDFBOX-3950&lt;/del&gt;&lt;/a&gt;: avoid NPE or CCE&lt;/p&gt;</comment>
                            <comment id="16223410" author="jira-bot" created="Sat, 28 Oct 2017 10:47:46 +0000"  >&lt;p&gt;Commit 1813606 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1813606&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1813606&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3950&quot; title=&quot;NPE in PageIterator.enqueueKids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3950&quot;&gt;&lt;del&gt;PDFBOX-3950&lt;/del&gt;&lt;/a&gt;: adjust test for new exception&lt;/p&gt;</comment>
                            <comment id="16223412" author="jira-bot" created="Sat, 28 Oct 2017 10:47:51 +0000"  >&lt;p&gt;Commit 1813607 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1813607&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1813607&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3950&quot; title=&quot;NPE in PageIterator.enqueueKids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3950&quot;&gt;&lt;del&gt;PDFBOX-3950&lt;/del&gt;&lt;/a&gt;: adjust test for new exception&lt;/p&gt;</comment>
                            <comment id="16223567" author="tilman" created="Sat, 28 Oct 2017 15:14:35 +0000"  >&lt;p&gt;I just did a test with the 48 files that had the missing resource exception to check whether a further but new exception would occur. The only exception that occured is the missing descendent font array that is caught.&lt;/p&gt;</comment>
                            <comment id="16224074" author="lehmi" created="Sun, 29 Oct 2017 16:09:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; good idea, especially as it avoid some exceptions which aren&apos;t relevant when performing text extraction&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13109960">PDFBOX-3966</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12890042" name="23EGDHXSBBYQLKYOKGZUOVYVNE675PRD.pdf" size="1048576" author="tilman" created="Mon, 2 Oct 2017 21:07:41 +0000"/>
                            <attachment id="12894547" name="6MNJMPJVZMZRSTE5A4ENHP3F5SIOG27T.pdf" size="466944" author="tilman" created="Sat, 28 Oct 2017 10:39:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ksrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>