<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:01:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3042] Bad space calculation in text extraction</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3042</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Some debug output from attached reduced file:&lt;/p&gt;

&lt;p&gt;2.0:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
spaceWidthText: 0.25
fontSizeText: 12.0
horizontalScalingText: 1.0
textRenderingMatrix.getScalingFactorX(): 12.0, textRenderingMatrix: [12.0,0.0,0.0,12.0,100.0,700.0]
ctm.getScalingFactorX(): 1.0
spaceWidthDisplay: 36.0

&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[100.0,91.0 fs=12.0 xscale=12.0 height=7.8808603 space=36.0 width=8.003998]B
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;1.8:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;spaceWidthText: 0.25
fontSizeText: 12.0
horizontalScalingText: 1.0
textMatrix.getXScale(): 1.0, textMatrix: [[1.0,0.0,0.0][0.0,1.0,0.0][100.0,700.0,1.0]]
ctm.getXScale(): 1.0
spaceWidthDisp: 3.0

&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[100.0,91.0 fs=12.0 xscale=12.0 height=7.884 space=3.0 width=8.003998]B
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;stream content is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;1 0 0 1 0 0 cm
n
BT
/F12 12 Tf
1 0 0 1 100 700 Tm
(B) Tj
ET
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The cause is somewhat similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3019&quot; title=&quot;Unwanted spaces in text extraction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3019&quot;&gt;&lt;del&gt;PDFBOX-3019&lt;/del&gt;&lt;/a&gt;, a factor is used twice. In 2.0, the fontSize is already calculated into the &quot;parameters&quot; Matrix object, which is used to calculate &quot;textRenderingMatrix&quot;. In 1.8, textStateParameters is set similarly, but not used in the calculation of spaceWidthDisp.&lt;/p&gt;

&lt;p&gt;The problem was discovered because of different text extractions. &lt;/p&gt;

&lt;p&gt;The problem did not appear in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3019&quot; title=&quot;Unwanted spaces in text extraction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3019&quot;&gt;&lt;del&gt;PDFBOX-3019&lt;/del&gt;&lt;/a&gt; because fontSizeText was 1. &lt;/p&gt;

&lt;p&gt;The fix also solves the problem I mentioned at the end of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3038&quot; title=&quot;Text extraction shows glyphs with zero height&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3038&quot;&gt;&lt;del&gt;PDFBOX-3038&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12906790">PDFBOX-3042</key>
            <summary>Bad space calculation in text extraction</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Wed, 21 Oct 2015 16:46:42 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:21 +0000</updated>
                            <resolved>Wed, 21 Oct 2015 17:05:34 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Text extraction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14967458" author="jira-bot" created="Wed, 21 Oct 2015 17:00:05 +0000"  >&lt;p&gt;Commit 1709883 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1709883&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1709883&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3042&quot; title=&quot;Bad space calculation in text extraction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3042&quot;&gt;&lt;del&gt;PDFBOX-3042&lt;/del&gt;&lt;/a&gt;: don&apos;t multiply with fontSize, as this has already been done before&lt;/p&gt;</comment>
                            <comment id="14967472" author="jira-bot" created="Wed, 21 Oct 2015 17:04:42 +0000"  >&lt;p&gt;Commit 1709886 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1709886&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1709886&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3042&quot; title=&quot;Bad space calculation in text extraction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3042&quot;&gt;&lt;del&gt;PDFBOX-3042&lt;/del&gt;&lt;/a&gt;: add test files&lt;/p&gt;</comment>
                            <comment id="14969390" author="jira-bot" created="Thu, 22 Oct 2015 16:22:31 +0000"  >&lt;p&gt;Commit 1710057 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1710057&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1710057&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3042&quot; title=&quot;Bad space calculation in text extraction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3042&quot;&gt;&lt;del&gt;PDFBOX-3042&lt;/del&gt;&lt;/a&gt;: remove dead code&lt;/p&gt;</comment>
                            <comment id="14978790" author="jira-bot" created="Wed, 28 Oct 2015 17:16:04 +0000"  >&lt;p&gt;Commit 1711070 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1711070&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1711070&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3042&quot; title=&quot;Bad space calculation in text extraction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3042&quot;&gt;&lt;del&gt;PDFBOX-3042&lt;/del&gt;&lt;/a&gt;: don&apos;t multiply with horizontalScalingText, as this has already been done before&lt;/p&gt;</comment>
                            <comment id="14978798" author="tilman" created="Wed, 28 Oct 2015 17:19:31 +0000"  >&lt;p&gt;Ignore this, it belongs to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3067&quot; title=&quot;Text strings being returned as single characters, regression from version 1.8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3067&quot;&gt;&lt;del&gt;PDFBOX-3067&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12904010">PDFBOX-3019</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12906293">PDFBOX-3038</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12767808" name="PDFBOX-3042-003177-p2-reduced.pdf" size="672288" author="tilman" created="Wed, 21 Oct 2015 16:49:32 +0000"/>
                            <attachment id="12767807" name="PDFBOX-3042-003177-p2.pdf" size="394897" author="tilman" created="Wed, 21 Oct 2015 16:49:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nbx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>