<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:58:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2546] IllegalArgumentException: resourceDictionary is null in PDFMerger</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2546</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;This was first mentioned on the user mailing list by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=giladd&quot; class=&quot;user-hover&quot; rel=&quot;giladd&quot;&gt;giladd&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;When merging the PDF 1.7 spec with another PDF file this exception appears:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.IllegalArgumentException: resourceDictionary is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.pdfbox.pdmodel.PDResources.&amp;lt;init&amp;gt;(PDResources.java:68)
	at org.apache.pdfbox.util.PDFMergerUtility.appendDocument(PDFMergerUtility.java:448)
	at org.apache.pdfbox.util.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:190)
	at org.apache.pdfbox.tools.PDFMerger.merge(PDFMerger.java:70)
	at org.apache.pdfbox.tools.PDFMerger.main(PDFMerger.java:46)
	at org.apache.pdfbox.tools.PDFBox.main(PDFBox.java:76)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I did some debugging, it happens on the very first page. The resources is indeed null, but it exists when viewing with PDFDebugger. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12759977">PDFBOX-2546</key>
            <summary>IllegalArgumentException: resourceDictionary is null in PDFMerger</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jahewson">John Hewson</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Sat, 6 Dec 2014 15:35:24 +0000</created>
                <updated>Wed, 24 Aug 2016 16:37:51 +0000</updated>
                            <resolved>Mon, 8 Dec 2014 21:31:39 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14236885" author="tilman" created="Sat, 6 Dec 2014 16:49:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; srcCatalog.getPages() as an iterator brings different PDPage objects than srcCatalog.getPages.get ( n ).&lt;/p&gt;</comment>
                            <comment id="14238412" author="jahewson" created="Mon, 8 Dec 2014 20:15:58 +0000"  >&lt;p&gt;Well, this is a fun bug &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14238492" author="jira-bot" created="Mon, 8 Dec 2014 21:31:25 +0000"  >&lt;p&gt;Commit 1643933 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1643933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1643933&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2546&quot; title=&quot;IllegalArgumentException: resourceDictionary is null in PDFMerger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2546&quot;&gt;&lt;del&gt;PDFBOX-2546&lt;/del&gt;&lt;/a&gt;: PageIterator should be recursive&lt;/p&gt;</comment>
                            <comment id="15434672" author="mkrivan" created="Wed, 24 Aug 2016 10:38:17 +0000"  >&lt;p&gt;The problem still exists in version 2.0.2 see my small example below:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Caused by: java.lang.IllegalArgumentException: resourceDictionary is null&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.PDResources.&amp;lt;init&amp;gt;(PDResources.java:70)&lt;br/&gt;
	at org.apache.pdfbox.multipdf.PDFMergerUtility.appendDocument(PDFMergerUtility.java:559)&lt;br/&gt;
	at org.apache.pdfbox.multipdf.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:261)&lt;/p&gt;&lt;/blockquote&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-comment&quot;&gt;// T is my document object type
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;T&amp;gt; ByteArrayOutputStream createDocumentStream(List&amp;lt;T&amp;gt; documents) {
        PDFMergerUtility mergedDoc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFMergerUtility();
        ByteArrayOutputStream mergedOutputstream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();

        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (T doc : documents) {
            ByteArrayOutputStream baos = createDocumentStream(doc);
            &lt;span class=&quot;code-comment&quot;&gt;// I use Apache FOP 2.1 to generate PDF document
&lt;/span&gt;
            &lt;span class=&quot;code-comment&quot;&gt;// when odd number of pages exists I want to add one &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; empty page
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (PDDocument currentDoc = PDDocument.load(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(baos.toByteArray()),
                    MemoryUsageSetting.setupMainMemoryOnly())) {
                &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numberOfPages = currentDoc.getNumberOfPages();
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (numberOfPages % 2 == 1) { &lt;span class=&quot;code-comment&quot;&gt;// when odd number of pages
&lt;/span&gt;                    PDPage lastPage = currentDoc.getPage(numberOfPages - 1);
                    PDPage emptyPage = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDPage(lastPage.getMediaBox());

                    emptyPage.setResources(lastPage.getResources());
                    &lt;span class=&quot;code-comment&quot;&gt;// without the above line IllegalArgumentException: resourceDictionary is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; raised
&lt;/span&gt;                    &lt;span class=&quot;code-comment&quot;&gt;// at mergeDocuments method call below
&lt;/span&gt;
                    currentDoc.addPage(emptyPage);
                    baos.reset();
                    currentDoc.save(baos);
                }
            }

            mergedDoc.addSource(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(baos.toByteArray()));
        }

        mergedDoc.setDestinationStream(mergedOutputstream);
        mergedDoc.mergeDocuments(MemoryUsageSetting.setupMainMemoryOnly());
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; mergedOutputstream;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15435235" author="tilman" created="Wed, 24 Aug 2016 16:37:51 +0000"  >&lt;p&gt;Here&apos;s what the PDF specification tells about page resources:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(Required; inheritable) A dictionary containing any resources required by the page (see 7.8.3, &quot;Resource Dictionaries&quot;). If the page requires no resources, the value of this entry shall be an empty dictionary. Omitting the entry entirely indicates that the resources shall be inherited from an ancestor node in the page tree.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So I&apos;d say that your PDF is broken, but throwing an NPE isn&apos;t nice either. I&apos;ll create a new issue for that later tonight and add you there.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i235ef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>