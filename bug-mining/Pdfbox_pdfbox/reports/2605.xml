<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:12:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5312] Decryption for V4 fails when no Length entry is set in Encryption Dictionary</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5312</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The PDF standard defines the &quot;Length&quot; entry in the encryption dictionary to only have an effect in V2 or V3.&lt;/p&gt;

&lt;p&gt;However, PDFBox relies on that value for V4 as well and fails to decrypt files that do not define this length entry. It does not consider the length entry in the crypt filter dictionary instead that could be used to get information about the length:&lt;br/&gt;
 &amp;lt;&amp;lt;/StdCF&lt;br/&gt;
 &amp;lt;&amp;lt;/CFM&lt;br/&gt;
 /AESV2/Length&lt;br/&gt;
 16&amp;gt;&amp;gt;&amp;gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;It should be noted that Adobe Acrobat generates files with the required &quot;Length&quot; entry in the encryption dictionary even when V4 is used. Therefore PDFBox correctly processes output from Adobe Acrobat. It would however be desirable for PDFBox to also handle other output that conforms to the PDF-Standard.&lt;/p&gt;

&lt;p&gt;I attached a file that is encrypted with an empty password and fails to be decrypted by pdfbox. However, you can open it with SumatraPDF, Acrobat Reader, Okular etc. (ignore the text on the actual page of the pdf-file ... our application read an RC4 file and wrote the output as AES 128Bit)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13410079">PDFBOX-5312</key>
            <summary>Decryption for V4 fails when no Length entry is set in Encryption Dictionary</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="moritzf">Moritz Fl&#246;ter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Nov 2021 15:06:22 +0000</created>
                <updated>Fri, 17 Dec 2021 06:50:05 +0000</updated>
                            <resolved>Wed, 8 Dec 2021 09:38:17 +0000</resolved>
                                    <version>2.0.24</version>
                                    <fixVersion>2.0.25</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Crypto</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17438882" author="tilman" created="Thu, 4 Nov 2021 18:34:19 +0000"  >&lt;p&gt;From the PDF 2.0 specification draft:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When CFM is AESV2, the Length key shall be ignored and a value of 128 bits used. When CFM is AESV3, the Length key shall be ignored and a value of 256 bits used.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="17438890" author="jira-bot" created="Thu, 4 Nov 2021 18:51:37 +0000"  >&lt;p&gt;Commit 1894740 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1894740&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1894740&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5312&quot; title=&quot;Decryption for V4 fails when no Length entry is set in Encryption Dictionary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5312&quot;&gt;&lt;del&gt;PDFBOX-5312&lt;/del&gt;&lt;/a&gt;: set key lengths per PDF specification, as suggested by Moritz Fl&#246;ter&lt;/p&gt;</comment>
                            <comment id="17438891" author="jira-bot" created="Thu, 4 Nov 2021 18:51:41 +0000"  >&lt;p&gt;Commit 1894741 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1894741&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1894741&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5312&quot; title=&quot;Decryption for V4 fails when no Length entry is set in Encryption Dictionary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5312&quot;&gt;&lt;del&gt;PDFBOX-5312&lt;/del&gt;&lt;/a&gt;: set key lengths per PDF specification, as suggested by Moritz Fl&#246;ter&lt;/p&gt;</comment>
                            <comment id="17438892" author="mkl" created="Thu, 4 Nov 2021 18:54:44 +0000"  >&lt;p&gt;From the ISO 32000-2:2020 update:&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Table 25 &#8212; Entries common to all crypt filter dictionaries &#8212; &lt;b&gt;Length&lt;/b&gt; entry&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;When &lt;b&gt;CFM&lt;/b&gt; is &lt;em&gt;AESV2&lt;/em&gt;, the &lt;b&gt;Length&lt;/b&gt; key shall have the value of 128. When &lt;b&gt;CFM&lt;/b&gt; is &lt;em&gt;AESV3&lt;/em&gt;, the &lt;b&gt;Length&lt;/b&gt; key shall have a value of 256.&lt;br/&gt;
NOTE (2020) The Length key was corrected to be required and the descriptive text updated.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17440362" author="moritzf" created="Mon, 8 Nov 2021 10:42:37 +0000"  >&lt;p&gt;thanks for the quick fix and references to the pdf specification. Looks good to me.&lt;/p&gt;</comment>
                            <comment id="17455080" author="jira-bot" created="Wed, 8 Dec 2021 09:37:06 +0000"  >&lt;p&gt;Commit 1895686 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1895686&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1895686&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5312&quot; title=&quot;Decryption for V4 fails when no Length entry is set in Encryption Dictionary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5312&quot;&gt;&lt;del&gt;PDFBOX-5312&lt;/del&gt;&lt;/a&gt;: improve javadoc&lt;/p&gt;</comment>
                            <comment id="17455081" author="jira-bot" created="Wed, 8 Dec 2021 09:37:10 +0000"  >&lt;p&gt;Commit 1895688 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1895688&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1895688&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5312&quot; title=&quot;Decryption for V4 fails when no Length entry is set in Encryption Dictionary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5312&quot;&gt;&lt;del&gt;PDFBOX-5312&lt;/del&gt;&lt;/a&gt;: improve javadoc&lt;/p&gt;</comment>
                            <comment id="17455082" author="tilman" created="Wed, 8 Dec 2021 09:38:17 +0000"  >&lt;p&gt;Thanks for reporting this!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13417864">PDFBOX-5345</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13035701" name="ausdat.pdf" size="23062" author="moritzf" created="Thu, 4 Nov 2021 15:04:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0wg54:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>