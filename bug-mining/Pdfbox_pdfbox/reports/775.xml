<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:58:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2293] NonSequential parser gives an error</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2293</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I get the following error when using the sequential parse with Pdfbox 1.8.5.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;expected=&lt;span class=&quot;code-quote&quot;&gt;&apos;endstream&apos;&lt;/span&gt; actual=&apos;&apos; org.apache.pdfbox.io.PushBackInputStream@eb43bd5: java.io.IOException:  at org.apache.pdfbox.pdfparser.BaseParser.parseCOSStream(BaseParser.java:628) [pdfbox-1.8.5.jar:]
        at org.apache.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java:605) [pdfbox-1.8.5.jar:]
        at org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:194) [pdfbox-1.8.5.jar:]
        at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1220) [pdfbox-1.8.5.jar:]
        at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1187) [pdfbox-1.8.5.jar:]
        at org.apache.pdfbox.util.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:236) [pdfbox-1.8.5.jar:]
        at org.apache.pdfbox.util.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:185) [pdfbox-1.8.5.jar:]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After looking at some of the fixed issues reported for similar problem(s), I have tried using PDFBox 2.0.0 built from the latest repository code and the nonsequential parser for the pdf processing. However, the file created as randomAccessFile  seems to  get damaged (cannot be opened in Acrobat Reader after the run) when I use PDFbox 2.0.0  for my processing. &lt;br/&gt;
I am unable to attach a sample file because of privacy concerns for the content. I also get an error and am not able to generate the merged output. &lt;br/&gt;
The code snippet is as follows-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fName : fileList) {
	pd = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        File pdFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(fName);
	fNameStr = fName.substring(0, fName.lastIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&apos;.&apos;&lt;/span&gt;))
					+ &lt;span class=&quot;code-quote&quot;&gt;&quot;_new.pdf&quot;&lt;/span&gt;;

	InputStream is = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(pdFile);
        RandomAccessFile raf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RandomAccessFile(pdFileNew, &lt;span class=&quot;code-quote&quot;&gt;&quot;rws&quot;&lt;/span&gt;);
			pd = PDDocument.loadNonSeq(is, raf );
        pd.getDocumentCatalog();
        pd.save(fNameStr);
        pd.close();
	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (is != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
	   is.close();
	}
	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(raf != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
	  raf.close();
	}

	ut.addSource(fNameStr);
}
FileOutputStream fos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(outFileName);
ut.setDestinationStream(fos);
ut.setIgnoreAcroFormErrors(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
ut.mergeDocuments();
fos.close();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thank You.&lt;/p&gt;</description>
                <environment>Linux, JDK 1.6</environment>
        <key id="12737257">PDFBOX-2293</key>
            <summary>NonSequential parser gives an error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apacheusr">v gangolli</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Aug 2014 23:29:33 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:56 +0000</updated>
                            <resolved>Wed, 22 Oct 2014 06:48:39 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14113370" author="tilman" created="Thu, 28 Aug 2014 05:44:19 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The current production version is 1.8.6, not 1.8.5&lt;/li&gt;
	&lt;li&gt;You&apos;re already using loadNonSeq(), this is good, but you&apos;re not using mergeDocumentsNonSeq().&lt;/li&gt;
	&lt;li&gt;Merge had a nasty bug, which is solved only in the trunk and in the upcoming 1.8.7 version (however the exception isn&apos;t related to that)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Having said that, it could still be that the PDF you have is malformed.&lt;/p&gt;

&lt;p&gt;The latest trunk outputs an offset for the exception you mention. Use NOTEPAD++ to open the PDF, then press CTRL-G, then click &quot;character&quot; and enter the offset to see where you are.&lt;/p&gt;</comment>
                            <comment id="14123468" author="tilman" created="Fri, 5 Sep 2014 19:52:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apacheusr&quot; class=&quot;user-hover&quot; rel=&quot;apacheusr&quot;&gt;apacheusr&lt;/a&gt; any update on this?&lt;/p&gt;

&lt;p&gt;Re privacy - if it isn&apos;t &quot;company confidential&quot; or &quot;really sensitive to you&quot; (e.g. medical), you can still send it to me if you want. I can either keep it among committers, or keep it for myself and delete it after solving the issue (if it can be solved, which I doubt, there are many such malformed files).&lt;/p&gt;</comment>
                            <comment id="14128688" author="apacheusr" created="Wed, 10 Sep 2014 16:31:04 +0000"  >&lt;p&gt;The documents are  confidential information and as such I cannot share.&lt;br/&gt;
I have switched to using 1.8.6 in stead of 2.0.0. With non-sequential parser, I am able to get the problem documents to merge with some warnings etc.,  however, I see that some of the content gets lost. The document in question may be malformed, as you have suggested, however, pdftk is able to merge these documents without the content loss.&lt;br/&gt;
I have tried to build the source code for 1.8.6, however, I get the following error and am not able to build. Could you please take a look?  I am also looking into if I can build some sample files that can reproduce the behavior seen with the problem documents that pdftk is able to process successfully.&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
Failed to execute goal on project pdfbox: Could not resolve dependencies for project org.apache.pdfbox:pdfbox:bundle:1.8.6: Failed to collect dependencies for &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.pdfbox:fontbox:jar:1.8.6 (compile), org.apache.pdfbox:jempbox:jar:1.8.6 (compile), commons-logging:commons-logging:jar:1.1.1 (compile), org.bouncycastle:bcmail-jdk15:jar:1.44 (compile?), org.bouncycastle:bcprov-jdk15:jar:1.44 (compile?), com.ibm.icu:icu4j:jar:3.8 (compile?), junit:junit:jar:4.8.1 (test), com.levigo.jbig2:levigo-jbig2-imageio:jar:1.6.2 (test), net.java.dev.jai-imageio:jai-imageio-core-standalone:jar:1.2-pre-dr-b04-2011-07-04 (test)&amp;#93;&lt;/span&gt;: Failed to read artifact descriptor for net.java.dev.jai-imageio:jai-imageio-core-standalone:jar:1.2-pre-dr-b04-2011-07-04: Could not transfer artifact net.java.dev.jai-imageio:jai-imageio-core-standalone:pom:1.2-pre-dr-b04-2011-07-04 from/to mygrid-repository (&lt;a href=&quot;http://www.mygrid.org.uk/maven/repository):&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mygrid.org.uk/maven/repository):&lt;/a&gt; Failed to transfer &lt;a href=&quot;http://www.mygrid.org.uk/maven/repository/net/java/dev/jai-imageio/jai-imageio-core-standalone/1.2-pre-dr-b04-2011-07-04/jai-imageio-core-standalone-1.2-pre-dr-b04-2011-07-04.pom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mygrid.org.uk/maven/repository/net/java/dev/jai-imageio/jai-imageio-core-standalone/1.2-pre-dr-b04-2011-07-04/jai-imageio-core-standalone-1.2-pre-dr-b04-2011-07-04.pom&lt;/a&gt;. Error code 503, Service Temporarily Unavailable -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
===&lt;/p&gt;</comment>
                            <comment id="14128714" author="tilman" created="Wed, 10 Sep 2014 16:50:56 +0000"  >&lt;p&gt;That is a problem with the mygrid repository, see workarounds in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2336&quot; title=&quot;Problem with building pdfbox 1.8.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2336&quot;&gt;&lt;del&gt;PDFBOX-2336&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14128721" author="tilman" created="Wed, 10 Sep 2014 16:58:16 +0000"  >&lt;p&gt;You don&apos;t have to build from source. You can get 1.8.6 here:&lt;br/&gt;
&lt;a href=&quot;https://pdfbox.apache.org/downloads.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pdfbox.apache.org/downloads.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and 1.8.7 here:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/1.8.7-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/1.8.7-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14128813" author="tilman" created="Wed, 10 Sep 2014 18:00:20 +0000"  >&lt;p&gt;The mygrid repository is back up now.&lt;/p&gt;</comment>
                            <comment id="14128993" author="apacheusr" created="Wed, 10 Sep 2014 19:51:39 +0000"  >&lt;p&gt;Thanks, MyGrid repository access worked this time.&lt;/p&gt;</comment>
                            <comment id="14129125" author="apacheusr" created="Wed, 10 Sep 2014 21:17:57 +0000"  >&lt;p&gt;Since 18.6 is currently showing as production version, when  is either Pdfbox 1.8.7 or Pdfbox2.0.0  expected to be released?&lt;/p&gt;</comment>
                            <comment id="14129184" author="tilman" created="Wed, 10 Sep 2014 21:49:44 +0000"  >&lt;p&gt;1.8.7 is expected this month. 2.0 don&apos;t know. But does the 1.8.7 snapshot solve the problem that you had?&lt;/p&gt;</comment>
                            <comment id="14143059" author="lehmi" created="Mon, 22 Sep 2014 09:56:26 +0000"  >&lt;p&gt;1.8.7 is available now. Does the issue still persist?&lt;/p&gt;</comment>
                            <comment id="14143948" author="apacheusr" created="Mon, 22 Sep 2014 22:27:12 +0000"  >&lt;p&gt;Thank you for the 1.8.7 release update. We will test the problem files with that version and will update.&lt;/p&gt;</comment>
                            <comment id="14144930" author="apacheusr" created="Tue, 23 Sep 2014 15:46:34 +0000"  >&lt;p&gt;I tested the documents tested earlier with 1.8.6  with PDFBox 1.8.7 using the Merge utility with the nonsequential parser. I basically get a similar result.&lt;br/&gt;
Message: SEVERE: The end of the stream is out of range, using workaround to read the stream&lt;br/&gt;
The output file is created however, some content is missing (blacked out)  in the resulting document.&lt;br/&gt;
The same set of documents can be merged using pdftk without any loss of content.&lt;/p&gt;</comment>
                            <comment id="14145529" author="tilman" created="Tue, 23 Sep 2014 22:03:47 +0000"  >&lt;p&gt;&quot;The end of the stream is out of range, using workaround to read the stream&quot; means that a stream length is incorrect. PDFBox is then trying a &quot;Plan B&quot; which is to guess where the stream is ending in the PDF, by searching for &quot;endstream&quot;. This works most of the time.&lt;/p&gt;</comment>
                            <comment id="14168252" author="jira-bot" created="Sat, 11 Oct 2014 16:50:18 +0000"  >&lt;p&gt;Commit 1631080 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1631080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1631080&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2293&quot; title=&quot;NonSequential parser gives an error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2293&quot;&gt;&lt;del&gt;PDFBOX-2293&lt;/del&gt;&lt;/a&gt;: improve log message&lt;/p&gt;</comment>
                            <comment id="14168253" author="jira-bot" created="Sat, 11 Oct 2014 16:51:22 +0000"  >&lt;p&gt;Commit 1631081 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1631081&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1631081&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2293&quot; title=&quot;NonSequential parser gives an error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2293&quot;&gt;&lt;del&gt;PDFBOX-2293&lt;/del&gt;&lt;/a&gt;: improve log message&lt;/p&gt;</comment>
                            <comment id="14168254" author="tilman" created="Sat, 11 Oct 2014 16:54:00 +0000"  >&lt;p&gt;I&apos;ve improved the log message. Please test your file with a snapshot version (will be available in a few hours) and then open the PDF file with an editor like NOTEPAD++. With CTRL-G you can jump to an offset and look there for further investigation (that only you can do).&lt;/p&gt;</comment>
                            <comment id="14179646" author="tilman" created="Wed, 22 Oct 2014 06:48:39 +0000"  >&lt;p&gt;I&apos;m setting this one to resolved (because I made a slight change in the logs) after not getting an answer. However, the problem is probably fixed too thanks to the changes Andreas made in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2250&quot; title=&quot;Improve XRef self healing mechanism&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2250&quot;&gt;&lt;del&gt;PDFBOX-2250&lt;/del&gt;&lt;/a&gt;. Please reopen if you still get an error, but then do also set yourself as a watcher on &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2441&quot; title=&quot;Improve XRef self healing mechanism when more than one xref table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2441&quot;&gt;&lt;del&gt;PDFBOX-2441&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zf33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>