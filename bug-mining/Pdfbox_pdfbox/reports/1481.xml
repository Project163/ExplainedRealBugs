<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:03:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3375] Use a static lock for a singleton</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3375</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Our build is failing from time to time throwing the following exception&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.awt.color.CMMException: Invalid profile data
	at sun.java2d.cmm.kcms.CMM.checkStatus(CMM.java:180)
	at sun.java2d.cmm.kcms.CMM.createTransform(CMM.java:134)
	at java.awt.color.ICC_ColorSpace.toRGB(ICC_ColorSpace.java:166)
	at org.apache.pdfbox.pdmodel.graphics.color.PDDeviceRGB.init(PDDeviceRGB.java:69)
	at org.apache.pdfbox.pdmodel.graphics.color.PDDeviceRGB.toRGB(PDDeviceRGB.java:103)
	at org.apache.pdfbox.rendering.PageDrawer.getPaint(PageDrawer.java:237)
	at org.apache.pdfbox.rendering.PageDrawer.getNonStrokingPaint(PageDrawer.java:529)
	at org.apache.pdfbox.rendering.PageDrawer.fillPath(PageDrawer.java:600)
	at org.apache.pdfbox.contentstream.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.graphics.FillNonZeroRule.process(FillNonZeroRule.java:36)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processOperator(PDFStreamEngine.java:815)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStreamOperators(PDFStreamEngine.java:472)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStream(PDFStreamEngine.java:446)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.showForm(PDFStreamEngine.java:178)
	at org.apache.pdfbox.contentstream.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.graphics.DrawObject.process(DrawObject.java:70)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processOperator(PDFStreamEngine.java:815)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStreamOperators(PDFStreamEngine.java:472)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processStream(PDFStreamEngine.java:446)
	at org.apache.pdfbox.contentstream.PDFStreamEngine.processPage(PDFStreamEngine.java:149)
	at org.apache.pdfbox.rendering.PageDrawer.drawPage(PageDrawer.java:189)
	at org.apache.pdfbox.rendering.PDFRenderer.renderImage(PDFRenderer.java:145)
	at org.apache.pdfbox.rendering.PDFRenderer.renderImage(PDFRenderer.java:68)
	at org.apache.pdfbox.rendering.PDFRenderer.renderImage(PDFRenderer.java:55)
	at org.apache.pdfbox.rendering.TestRendering.render(TestRendering.java:79)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In PDDeviceRGB the non-static init method is synchronized using the instance of the class as lock object. So far so good. But as the class is used a singleton a static object has to be used as lock object.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12977326">PDFBOX-3375</key>
            <summary>Use a static lock for a singleton</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="lehmi">Andreas Lehmk&#252;hler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jun 2016 18:24:27 +0000</created>
                <updated>Sat, 25 Mar 2017 18:12:22 +0000</updated>
                            <resolved>Tue, 6 Dec 2016 10:59:03 +0000</resolved>
                                    <version>2.0.2</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.4</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15323044" author="jira-bot" created="Thu, 9 Jun 2016 18:26:21 +0000"  >&lt;p&gt;Commit 1747574 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1747574&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1747574&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: use a static lock object to synchronize the initialization of a singleton&lt;/p&gt;</comment>
                            <comment id="15323074" author="lehmi" created="Thu, 9 Jun 2016 18:44:00 +0000"  >&lt;p&gt;Hmm, after a lot of working builds, the one right after my checkin fails again with the same exception &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15323128" author="tilman" created="Thu, 9 Jun 2016 19:00:16 +0000"  >&lt;p&gt;But your change wasn&apos;t included according to&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PDFBox-trunk/2893/changes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PDFBox-trunk/2893/changes&lt;/a&gt;&lt;br/&gt;
your change should be in the next one&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PDFBox-trunk/2894/changes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PDFBox-trunk/2894/changes&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15323130" author="lehmi" created="Thu, 9 Jun 2016 19:01:39 +0000"  >&lt;p&gt;Sorry, but I was talking about my local build.&lt;/p&gt;</comment>
                            <comment id="15346998" author="jira-bot" created="Thu, 23 Jun 2016 19:07:31 +0000"  >&lt;p&gt;Commit 1749976 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1749976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1749976&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: revert changes of r1747574 as it doesn&apos;t work&lt;/p&gt;</comment>
                            <comment id="15346999" author="lehmi" created="Thu, 23 Jun 2016 19:08:09 +0000"  >&lt;p&gt;I&apos;ve reverted my changes as it doesn&apos;t work&lt;/p&gt;</comment>
                            <comment id="15369195" author="jira-bot" created="Sat, 9 Jul 2016 17:03:30 +0000"  >&lt;p&gt;Commit 1752026 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1752026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1752026&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: my own attempt at this - initalize that part before all else&lt;/p&gt;</comment>
                            <comment id="15369196" author="tilman" created="Sat, 9 Jul 2016 17:04:25 +0000"  >&lt;p&gt;If this doesn&apos;t work, the next thing to try is this:&lt;br/&gt;
&lt;a href=&quot;http://www.oracle.com/technetwork/articles/javase/bloch-effective-08-qa-140880.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.oracle.com/technetwork/articles/javase/bloch-effective-08-qa-140880.html&lt;/a&gt;&lt;br/&gt;
(&quot;Double-check idiom for lazy initialization of instance fields&quot;)&lt;/p&gt;</comment>
                            <comment id="15394123" author="jira-bot" created="Tue, 26 Jul 2016 17:19:30 +0000"  >&lt;p&gt;Commit 1754160 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1754160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754160&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: revert my own attempt at this, didn&apos;t work&lt;/p&gt;</comment>
                            <comment id="15394237" author="phax" created="Tue, 26 Jul 2016 18:10:23 +0000"  >&lt;p&gt;Patch with explicit lock object. Maybe this helps.&lt;/p&gt;</comment>
                            <comment id="15394359" author="jira-bot" created="Tue, 26 Jul 2016 19:12:23 +0000"  >&lt;p&gt;Commit 1754170 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1754170&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754170&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: use explicit lock object, as suggested by Philip Helger a&lt;/p&gt;</comment>
                            <comment id="15394361" author="tilman" created="Tue, 26 Jul 2016 19:12:52 +0000"  >&lt;p&gt;I don&apos;t see how this is different than Andreas&apos; solution, but lets try it anyway.&lt;/p&gt;</comment>
                            <comment id="15396012" author="jira-bot" created="Wed, 27 Jul 2016 17:19:31 +0000"  >&lt;p&gt;Commit 1754317 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1754317&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754317&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: sonar fix&lt;/p&gt;</comment>
                            <comment id="15410933" author="tilman" created="Sun, 7 Aug 2016 12:14:26 +0000"  >&lt;p&gt;Build 2977 has failed for the usual reason, thus I&apos;ll revert again.&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PDFBox-trunk/2977/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PDFBox-trunk/2977/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve also removed 2.0.3 target, this bug is resisting being fixed.&lt;/p&gt;</comment>
                            <comment id="15410934" author="jira-bot" created="Sun, 7 Aug 2016 12:16:24 +0000"  >&lt;p&gt;Commit 1755437 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1755437&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1755437&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: revert solution of Philip Helger, didn&apos;t work either&lt;/p&gt;</comment>
                            <comment id="15417763" author="phax" created="Thu, 11 Aug 2016 19:10:09 +0000"  >&lt;p&gt;Try setting the system property &lt;tt&gt;sun.java2d.cmm&lt;/tt&gt; to &lt;tt&gt;sun.java2d.cmm.lcms.LcmsServiceProvider&lt;/tt&gt; for Oracle JDK 7 to use the Little CMS instead of the Kodak CMS. For JDK 6 there is no such option.&lt;/p&gt;

&lt;p&gt;As far as I found out, in JDK 8 the default was switched to LCMS - &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8011622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8011622&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Which JDK versions does this bug effect?&lt;/p&gt;</comment>
                            <comment id="15417780" author="jira-bot" created="Thu, 11 Aug 2016 19:18:27 +0000"  >&lt;p&gt;Commit 1756031 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1756031&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1756031&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: disable LittleCMS for tests, as suggested by Philip Helger&lt;/p&gt;</comment>
                            <comment id="15417796" author="jira-bot" created="Thu, 11 Aug 2016 19:25:25 +0000"  >&lt;p&gt;Commit 1756032 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1756032&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1756032&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: force LittleCMS for tests, as suggested by Philip Helger&lt;/p&gt;</comment>
                            <comment id="15417799" author="tilman" created="Thu, 11 Aug 2016 19:27:44 +0000"  >&lt;p&gt;It&apos;s worth a test... although LCMS is meant to be disabled in production, because it is slower.&lt;/p&gt;

&lt;p&gt;The trunk build is done on JDK7.&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PDFBox-trunk/2992/injectedEnvVars/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PDFBox-trunk/2992/injectedEnvVars/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15419000" author="phax" created="Fri, 12 Aug 2016 15:30:17 +0000"  >&lt;p&gt;So looks good, doesn&apos;t it?&lt;/p&gt;</comment>
                            <comment id="15419053" author="tilman" created="Fri, 12 Aug 2016 15:59:10 +0000"  >&lt;p&gt;We should wait at least 10 builds before opening the Champagne bottle. The error does not happen all the time.&lt;/p&gt;</comment>
                            <comment id="15423119" author="phax" created="Tue, 16 Aug 2016 17:34:19 +0000"  >&lt;p&gt;5 builds to Champagne &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15433330" author="tilman" created="Tue, 23 Aug 2016 18:15:28 +0000"  >&lt;p&gt;fail:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PDFBox-trunk/org.apache.pdfbox$pdfbox/3007/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PDFBox-trunk/org.apache.pdfbox$pdfbox/3007/testReport/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15433335" author="jira-bot" created="Tue, 23 Aug 2016 18:17:45 +0000"  >&lt;p&gt;Commit 1757415 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1757415&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1757415&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: revert solution of Philip Helger, didn&apos;t work either&lt;/p&gt;</comment>
                            <comment id="15433372" author="phax" created="Tue, 23 Aug 2016 18:44:14 +0000"  >&lt;p&gt;Found also this:&lt;br/&gt;
&lt;a href=&quot;https://netbeans.org/bugzilla/show_bug.cgi?id=253037&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://netbeans.org/bugzilla/show_bug.cgi?id=253037&lt;/a&gt;&lt;br/&gt;
Supposed to be fixed by &lt;a href=&quot;http://bugs.java.com/view_bug.do?bug_id=6245283&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.java.com/view_bug.do?bug_id=6245283&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Apache commons-imaging has its own ICC parser - maybe that is worth a look?&lt;/p&gt;</comment>
                            <comment id="15433463" author="jahewson" created="Tue, 23 Aug 2016 19:42:03 +0000"  >&lt;p&gt;Commons Imaging can parse the tags (the easy bit) but that&apos;s it. They don&apos;t parse any of the color data (the hard bit) or implement any of the color transforms (the really hard bit). We&apos;ve looked into using commons-imaging in the past but none of there code is complete enough for PDFBox and the project has only a handful of minimally active maintainers.&lt;/p&gt;

&lt;p&gt;What&apos;s needed is not just an ICC parser, but a Color Management System.&lt;/p&gt;</comment>
                            <comment id="15434559" author="phax" created="Wed, 24 Aug 2016 09:14:20 +0000"  >&lt;p&gt;As this seems to be a JDK 7 only bug, can&apos;t we state: please update your JDK?&lt;br/&gt;
Or does is also appear in JDK 6?&lt;/p&gt;</comment>
                            <comment id="15458807" author="tilman" created="Fri, 2 Sep 2016 15:21:18 +0000"  >&lt;p&gt;Just for the record, I got a CMMException on JDK8 (1.8.0_102) on Windows 7 today when running a test.&lt;/p&gt;</comment>
                            <comment id="15467999" author="gsexton@mhsoftware.com" created="Tue, 6 Sep 2016 17:34:21 +0000"  >&lt;p&gt;I&apos;m getting something very similar going through &lt;/p&gt;

&lt;p&gt;org.apache.pdfbox.pdmodel.graphics.color.PDDeviceRGB.toRGB(PDDeviceRGB.java:104)&lt;/p&gt;

&lt;p&gt;Using PDFBox Snapshot dated 2016-09-02. In my case, the code is multi-threaded and the issue doesn&apos;t happen consistently. My complete stack trace is:&lt;/p&gt;

&lt;p&gt;java.awt.color.CMMException: LCMS error 13: Couldn&apos;t link the profiles&lt;br/&gt;
    at sun.java2d.cmm.lcms.LCMS.createNativeTransform(Native Method)&lt;br/&gt;
    at sun.java2d.cmm.lcms.LCMS.createTransform(LCMS.java:156)&lt;br/&gt;
    at sun.java2d.cmm.lcms.LCMSTransform.doTransform(LCMSTransform.java:155)&lt;br/&gt;
    at sun.java2d.cmm.lcms.LCMSTransform.colorConvert(LCMSTransform.java:629)&lt;br/&gt;
    at java.awt.color.ICC_ColorSpace.toRGB(ICC_ColorSpace.java:182)&lt;br/&gt;
    at org.apache.pdfbox.pdmodel.graphics.color.PDDeviceRGB.toRGB(PDDeviceRGB.java:104)&lt;br/&gt;
    at org.apache.pdfbox.rendering.PageDrawer.getPaint(PageDrawer.java:237)&lt;br/&gt;
    at org.apache.pdfbox.rendering.PageDrawer.getNonStrokingPaint(PageDrawer.java:529)&lt;br/&gt;
    at org.apache.pdfbox.rendering.PageDrawer.drawGlyph2D(PageDrawer.java:374)&lt;br/&gt;
    at org.apache.pdfbox.rendering.PageDrawer.showFontGlyph(PageDrawer.java:334)&lt;br/&gt;
    at org.apache.pdfbox.contentstream.PDFStreamEngine.showGlyph(PDFStreamEngine.java:744)&lt;br/&gt;
    at org.apache.pdfbox.contentstream.PDFStreamEngine.showText(PDFStreamEngine.java:701)&lt;br/&gt;
    at org.apache.pdfbox.contentstream.PDFStreamEngine.showTextString(PDFStreamEngine.java:564)&lt;br/&gt;
    at org.apache.pdfbox.contentstream.operator.text.ShowText.process(ShowText.java:55)&lt;br/&gt;
    at org.apache.pdfbox.contentstream.PDFStreamEngine.processOperator(PDFStreamEngine.java:815)&lt;br/&gt;
    at org.apache.pdfbox.contentstream.PDFStreamEngine.processStreamOperators(PDFStreamEngine.java:472)&lt;br/&gt;
    at org.apache.pdfbox.contentstream.PDFStreamEngine.processStream(PDFStreamEngine.java:446)&lt;br/&gt;
    at org.apache.pdfbox.contentstream.PDFStreamEngine.processPage(PDFStreamEngine.java:149)&lt;br/&gt;
    at org.apache.pdfbox.rendering.PageDrawer.drawPage(PageDrawer.java:189)&lt;br/&gt;
    at org.apache.pdfbox.rendering.PDFRenderer.renderImage(PDFRenderer.java:145)&lt;br/&gt;
    at org.apache.pdfbox.rendering.PDFRenderer.renderImageWithDPI(PDFRenderer.java:94)&lt;br/&gt;
    at com.mhsoftware.graphics.ImageHelper.getPDFThumbnail(ImageHelper.java:583)&lt;br/&gt;
    at com.mhsoftware.cdaily.business.attachments.getPDFMetaData(attachments.java:267)&lt;br/&gt;
    at com.mhsoftware.cdaily.business.attachments.getMetaData(attachments.java:229)&lt;br/&gt;
    at com.mhsoftware.cdaily.support.misc.AttachmentRepairer$MetaDataGenerator.run(AttachmentRepairer.java:167)&lt;br/&gt;
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&lt;br/&gt;
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&lt;br/&gt;
    at java.lang.Thread.run(Thread.java:745) &lt;/p&gt;

&lt;p&gt;The issue happens even if I specify -Dsun.java2d.cmm=sun.java2d.cmm.kcms.KcmsServiceProvider using JDK 1.8. &lt;/p&gt;</comment>
                            <comment id="15474819" author="c.hoeflake" created="Thu, 8 Sep 2016 19:47:22 +0000"  >&lt;p&gt;I added&lt;/p&gt;

&lt;p&gt;    static {&lt;br/&gt;
    	PDDeviceRGB.INSTANCE.toRGB(new float[]&lt;/p&gt;
{1,1,1,1}
&lt;p&gt;);&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;into PDDocument, that solves my concurrency issues. Please check if that solves the problem for others too.&lt;/p&gt;</comment>
                            <comment id="15474835" author="jira-bot" created="Thu, 8 Sep 2016 19:55:30 +0000"  >&lt;p&gt;Commit 1759898 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1759898&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1759898&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: another attempt to solve concurrency issues with PDDeviceRGB, as suggested by Cornelis Hoeflake&lt;/p&gt;</comment>
                            <comment id="15555860" author="jira-bot" created="Fri, 7 Oct 2016 18:25:09 +0000"  >&lt;p&gt;Commit 1763808 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1763808&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1763808&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3375&quot; title=&quot;Use a static lock for a singleton&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3375&quot;&gt;&lt;del&gt;PDFBOX-3375&lt;/del&gt;&lt;/a&gt;: another attempt to solve concurrency issues with PDDeviceRGB, as suggested by Cornelis Hoeflake&lt;/p&gt;</comment>
                            <comment id="15702929" author="tilman" created="Mon, 28 Nov 2016 19:49:20 +0000"  >&lt;p&gt;It&apos;s been quiet here. Has anybody else had build problems? We haven&apos;t sine the last changes (thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=c.hoeflake&quot; class=&quot;user-hover&quot; rel=&quot;c.hoeflake&quot;&gt;c.hoeflake&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15702998" author="lehmi" created="Mon, 28 Nov 2016 20:14:33 +0000"  >&lt;p&gt;No further issues so far on my side&lt;/p&gt;</comment>
                            <comment id="15725160" author="lehmi" created="Tue, 6 Dec 2016 10:59:03 +0000"  >&lt;p&gt;Set to resolved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12820217" name="pdfbox3375.patch" size="1513" author="phax" created="Tue, 26 Jul 2016 18:10:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z8n3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>