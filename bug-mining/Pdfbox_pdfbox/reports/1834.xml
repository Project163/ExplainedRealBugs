<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:06:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3923] Expected a long type at offset 52152, instead got &apos;xref&apos;</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3923</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;This reads as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2441&quot; title=&quot;Improve XRef self healing mechanism when more than one xref table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2441&quot;&gt;&lt;del&gt;PDFBOX-2441&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3179&quot; title=&quot;PDDocument.load() Error: Expected a long type at offset 2, instead got &amp;#39;DF-1.4&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3179&quot;&gt;&lt;del&gt;PDFBOX-3179&lt;/del&gt;&lt;/a&gt; and several others marked as resolved in 2.0.0 however this bug is reproducible in PDFBOX 2.0.0 as well as PDFBOX 2.0.7.&lt;/p&gt;

&lt;p&gt;The attached PDF file is parsable by Chrome (PDFium), Mozilla (pdf.js), Edge, Windows 10 Reader and Adobe Acrobat but fails using PDFBOX 2.0.0 and PDFBOX 2.0.7 with the following error.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.io.IOException: Error: Expected a &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; type at offset 52152, instead got &lt;span class=&quot;code-quote&quot;&gt;&apos;xref&apos;&lt;/span&gt;
        at org.apache.pdfbox.pdfparser.BaseParser.readLong(BaseParser.java:1358)
        at org.apache.pdfbox.pdfparser.BaseParser.readObjectNumber(BaseParser.java:1286)
        at org.apache.pdfbox.pdfparser.COSParser.parseFileObject(COSParser.java:760)
        at org.apache.pdfbox.pdfparser.COSParser.parseObjectDynamically(COSParser.java:742)
        at org.apache.pdfbox.pdfparser.COSParser.parseObjectDynamically(COSParser.java:673)
        at org.apache.pdfbox.pdfparser.COSParser.parseDictObjects(COSParser.java:633)
        at org.apache.pdfbox.pdfparser.PDFParser.initialParse(PDFParser.java:241)
        at org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:276)
        at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1011)
        at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:949)
        at org.apache.pdfbox.tools.PrintPDF.main(PrintPDF.java:140)
        at org.apache.pdfbox.tools.PDFBox.main(PDFBox.java:72)
Caused by: java.lang.NumberFormatException: For input string: &lt;span class=&quot;code-quote&quot;&gt;&quot;xref&quot;&lt;/span&gt;
        at java.lang.NumberFormatException.forInputString(Unknown Source)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.parseLong(Unknown Source)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.parseLong(Unknown Source)
        at org.apache.pdfbox.pdfparser.BaseParser.readLong(BaseParser.java:1353)
        ... 11 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We do not generate this PDF file so we are unaware of the origin but the creator has given permission to share this file publicly for troubleshooting purposes.  We can ask any questions to the creator upon request.&lt;/p&gt;</description>
                <environment>Java 1.8.0_144-b01</environment>
        <key id="13100144">PDFBOX-3923</key>
            <summary>Expected a long type at offset 52152, instead got &apos;xref&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tresf">Tres Finocchiaro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Sep 2017 13:32:57 +0000</created>
                <updated>Thu, 2 Nov 2017 21:01:15 +0000</updated>
                            <resolved>Sat, 30 Sep 2017 13:08:51 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.0.7</version>
                                    <fixVersion>2.0.8</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16155655" author="lehmi" created="Wed, 6 Sep 2017 16:47:03 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;xref
0 39
0000000000 65535 f 
0000000015 00000 n 
0000000256 00000 n 
.... other entries
0000048836 00000 n 
0000052152 00000 n 
trailer
&amp;lt;&amp;lt;
/Root 2 0 R
/Size 39
/Info 1 0 R
&amp;gt;&amp;gt;
startxref
52152
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There is a loop in the xref table. The last entry points to the beginning of the xref table. I guess the other readers are able to read the pdf as they parse on demand. PDFBox still parses all objects first and stumbles upon that object reference. We have to wait for the parse on demand feature&lt;/p&gt;</comment>
                            <comment id="16157117" author="tilman" created="Thu, 7 Sep 2017 15:48:47 +0000"  >&lt;p&gt;I&apos;ll abort the xref parsing to trigger the trailer rebuild.&lt;/p&gt;</comment>
                            <comment id="16157126" author="jira-bot" created="Thu, 7 Sep 2017 15:55:50 +0000"  >&lt;p&gt;Commit 1807626 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1807626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1807626&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3923&quot; title=&quot;Expected a long type at offset 52152, instead got &amp;#39;xref&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3923&quot;&gt;&lt;del&gt;PDFBOX-3923&lt;/del&gt;&lt;/a&gt;: abort xref table parsing if object points within the table&lt;/p&gt;</comment>
                            <comment id="16157127" author="jira-bot" created="Thu, 7 Sep 2017 15:55:54 +0000"  >&lt;p&gt;Commit 1807627 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1807627&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1807627&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3923&quot; title=&quot;Expected a long type at offset 52152, instead got &amp;#39;xref&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3923&quot;&gt;&lt;del&gt;PDFBOX-3923&lt;/del&gt;&lt;/a&gt;: abort xref table parsing if object points within the table&lt;/p&gt;</comment>
                            <comment id="16157148" author="tilman" created="Thu, 7 Sep 2017 16:11:14 +0000"  >&lt;p&gt;The file was created by Telerik Reporting 4.1.10.921. Please ask your client to pass the URL of this issue to the vendor. To clarify: they should open the PDF with NOTEPAD++. The last entry of the xref table is 0000052152 00000 n, and 52152 is the offset of &quot;xref&quot;. This is a software bug, it should point to &quot;38 0 obj&quot; (which doesn&apos;t even exist). &lt;/p&gt;</comment>
                            <comment id="16157321" author="lehmi" created="Thu, 7 Sep 2017 17:46:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Thanks for the workaround&lt;/p&gt;</comment>
                            <comment id="16185377" author="tilman" created="Fri, 29 Sep 2017 05:34:10 +0000"  >&lt;p&gt;Reopen because of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3935&quot; title=&quot;DataFormatException: invalid stored block lengths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3935&quot;&gt;&lt;del&gt;PDFBOX-3935&lt;/del&gt;&lt;/a&gt;, will probably revert and modify.&lt;/p&gt;</comment>
                            <comment id="16185907" author="jira-bot" created="Fri, 29 Sep 2017 14:31:10 +0000"  >&lt;p&gt;Commit 1810112 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1810112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1810112&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3923&quot; title=&quot;Expected a long type at offset 52152, instead got &amp;#39;xref&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3923&quot;&gt;&lt;del&gt;PDFBOX-3923&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3935&quot; title=&quot;DataFormatException: invalid stored block lengths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3935&quot;&gt;&lt;del&gt;PDFBOX-3935&lt;/del&gt;&lt;/a&gt;: don&apos;t abort xref parsing table when hitting bad offset, just skip bad entry&lt;/p&gt;</comment>
                            <comment id="16185909" author="jira-bot" created="Fri, 29 Sep 2017 14:31:22 +0000"  >&lt;p&gt;Commit 1810113 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1810113&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1810113&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3923&quot; title=&quot;Expected a long type at offset 52152, instead got &amp;#39;xref&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3923&quot;&gt;&lt;del&gt;PDFBOX-3923&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3935&quot; title=&quot;DataFormatException: invalid stored block lengths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3935&quot;&gt;&lt;del&gt;PDFBOX-3935&lt;/del&gt;&lt;/a&gt;: don&apos;t abort xref parsing table when hitting bad offset, just skip bad entry&lt;/p&gt;</comment>
                            <comment id="16187077" author="jira-bot" created="Sat, 30 Sep 2017 13:08:10 +0000"  >&lt;p&gt;Commit 1810201 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1810201&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1810201&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3923&quot; title=&quot;Expected a long type at offset 52152, instead got &amp;#39;xref&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3923&quot;&gt;&lt;del&gt;PDFBOX-3923&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3935&quot; title=&quot;DataFormatException: invalid stored block lengths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3935&quot;&gt;&lt;del&gt;PDFBOX-3935&lt;/del&gt;&lt;/a&gt;: add comment about alternative to last change&lt;/p&gt;</comment>
                            <comment id="16187079" author="jira-bot" created="Sat, 30 Sep 2017 13:08:15 +0000"  >&lt;p&gt;Commit 1810202 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1810202&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1810202&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3923&quot; title=&quot;Expected a long type at offset 52152, instead got &amp;#39;xref&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3923&quot;&gt;&lt;del&gt;PDFBOX-3923&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3935&quot; title=&quot;DataFormatException: invalid stored block lengths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3935&quot;&gt;&lt;del&gt;PDFBOX-3935&lt;/del&gt;&lt;/a&gt;: add comment about alternative to last change&lt;/p&gt;</comment>
                            <comment id="16187115" author="jira-bot" created="Sat, 30 Sep 2017 14:34:01 +0000"  >&lt;p&gt;Commit 1810209 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1810209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1810209&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3923&quot; title=&quot;Expected a long type at offset 52152, instead got &amp;#39;xref&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3923&quot;&gt;&lt;del&gt;PDFBOX-3923&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3935&quot; title=&quot;DataFormatException: invalid stored block lengths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3935&quot;&gt;&lt;del&gt;PDFBOX-3935&lt;/del&gt;&lt;/a&gt;: remove code that is no longer needed, due to the change in checkXrefOffsets()&lt;/p&gt;</comment>
                            <comment id="16187117" author="jira-bot" created="Sat, 30 Sep 2017 14:34:07 +0000"  >&lt;p&gt;Commit 1810210 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1810210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1810210&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3923&quot; title=&quot;Expected a long type at offset 52152, instead got &amp;#39;xref&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3923&quot;&gt;&lt;del&gt;PDFBOX-3923&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3935&quot; title=&quot;DataFormatException: invalid stored block lengths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3935&quot;&gt;&lt;del&gt;PDFBOX-3935&lt;/del&gt;&lt;/a&gt;: remove code that is no longer needed, due to the change in checkXrefOffsets()&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13103030">PDFBOX-3935</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12885592" name="P17090403580.pdf" size="53011" author="tresf" created="Wed, 6 Sep 2017 13:28:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jpiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>