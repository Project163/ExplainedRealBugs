<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:10:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4878] Call to DictionaryEncoding.getEncoding () throws NullPointerException for some PDF&apos;s</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4878</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Wenn iterating all fonts in a PDF a call to PDSimpleFont.getEncoding().getEncodingName () throws a NullPointerException inside the library code for the attached sample-PDF.&lt;/p&gt;

&lt;p&gt;The situation can be reproduced, when running the following loop for the attached PDF (test.pdf):&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        PDDocument document = PDDocument.load (file);
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; pages = document.getNumberOfPages ();
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; pages; ++i)
        {
            PDPage page = document.getPage (i);
            PDResources resources = page.getResources ();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (resources == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
                &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
            Iterator&amp;lt;COSName&amp;gt; iter = resources.getFontNames ().iterator ();
            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (iter.hasNext ())
            {
                COSName cos = iter.next ();
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
                {
                    PDFont font = resources.getFont (cos);
                    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println (font.getName ());
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (font &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; PDSimpleFont)
                    {
                        PDSimpleFont simpleFont = (PDSimpleFont) font;
                        Encoding encoding = simpleFont.getEncoding ();
                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (encoding != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
                        {
                            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
                            {
                                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println (&lt;span class=&quot;code-quote&quot;&gt;&quot;* encoding=&quot;&lt;/span&gt;+encoding.getEncodingName ());
                            }
                            &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e)
                            {
                                e.printStackTrace ();
                            }
                        }
                    }
                }
                &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e)
                {
                    e.printStackTrace ();
                }
            }
        }
        document.close ();

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13311145">PDFBOX-4878</key>
            <summary>Call to DictionaryEncoding.getEncoding () throws NullPointerException for some PDF&apos;s</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tgawehn">Thomas Gawehn</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Jun 2020 13:58:53 +0000</created>
                <updated>Fri, 21 Aug 2020 04:54:22 +0000</updated>
                            <resolved>Fri, 10 Jul 2020 07:01:19 +0000</resolved>
                                    <version>2.0.20</version>
                                    <fixVersion>2.0.21</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17134416" author="tilman" created="Fri, 12 Jun 2020 17:30:29 +0000"  >&lt;p&gt;about &quot;Encoding&quot;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;An encoding dictionary whose Differences array shall specify the complete character encoding for this font (see 9.6.6, &quot;Character Encoding&quot;).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;About &quot;BaseEncoding&quot;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If this entry is absent, the &lt;b&gt;Differences&lt;/b&gt; entry shall describe differences from an implicit base encoding. For a font program that is embedded in the PDF file, the implicit base encoding shall be the font program&#8217;s built-in encoding, as described in 9.6.6, &quot;Character Encoding&quot; and further elaborated in the sub-clauses on specific font types. Otherwise, for a nonsymbolic font, it shall be StandardEncoding, and for a symbolic font, it shall be the font&#8217;s built-in encoding.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The second segment is confusing; but I think that the word &quot;complete&quot; in the first segment is to be understood that it is a &quot;difference&quot; from nothing, i.e. there is no base encoding.&lt;/p&gt;</comment>
                            <comment id="17134418" author="tilman" created="Fri, 12 Jun 2020 17:34:09 +0000"  >&lt;p&gt;So my proposal is that if &quot;baseEncoding&quot; in the DictionaryEncoding class is null, we return &quot;differences&quot;. This happens with type 3 fonts. (Which are PDF operators). I&apos;ll commit this for 2.0 for you to test.&lt;/p&gt;</comment>
                            <comment id="17134419" author="jira-bot" created="Fri, 12 Jun 2020 17:36:37 +0000"  >&lt;p&gt;Commit 1878776 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878776&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878776&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4878&quot; title=&quot;Call to DictionaryEncoding.getEncoding () throws NullPointerException for some PDF&amp;#39;s&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4878&quot;&gt;&lt;del&gt;PDFBOX-4878&lt;/del&gt;&lt;/a&gt;: avoid NPE and return something meaningful&lt;/p&gt;</comment>
                            <comment id="17134450" author="tilman" created="Fri, 12 Jun 2020 18:13:25 +0000"  >&lt;p&gt;Snapshot here:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.21-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.21-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17134707" author="jira-bot" created="Sat, 13 Jun 2020 09:28:16 +0000"  >&lt;p&gt;Commit 1878799 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878799&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878799&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4878&quot; title=&quot;Call to DictionaryEncoding.getEncoding () throws NullPointerException for some PDF&amp;#39;s&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4878&quot;&gt;&lt;del&gt;PDFBOX-4878&lt;/del&gt;&lt;/a&gt;: avoid NPE and return something meaningful&lt;/p&gt;</comment>
                            <comment id="17134708" author="jira-bot" created="Sat, 13 Jun 2020 09:28:20 +0000"  >&lt;p&gt;Commit 1878800 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1878800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1878800&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4878&quot; title=&quot;Call to DictionaryEncoding.getEncoding () throws NullPointerException for some PDF&amp;#39;s&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4878&quot;&gt;&lt;del&gt;PDFBOX-4878&lt;/del&gt;&lt;/a&gt;: avoid NPE and return something meaningful&lt;/p&gt;</comment>
                            <comment id="17155213" author="tilman" created="Fri, 10 Jul 2020 07:01:19 +0000"  >&lt;p&gt;Setting this one to resolved. Re the discussion we had off-ticket - I don&apos;t want to return null or empty because this seems inaccurate. I can return &quot;Differences only&quot; if you prefer.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13005565" name="test.pdf" size="7311" author="tgawehn" created="Fri, 12 Jun 2020 13:51:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fstc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>