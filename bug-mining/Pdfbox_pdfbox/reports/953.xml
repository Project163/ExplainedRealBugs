<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:59:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1550] Helv vs. Helvetica font names cause PDField.setValue to fail</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1550</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I have a PDF form using AcroForm that generates a &quot;Don&apos;t know how to calculate the position for non-simple fonts&quot; exception when calling setValue on a textbox field. After running it in a debugger, it appears the problem is that the font inside the AcroForm resources is named &quot;Helv&quot; but PDFBox gets &quot;Helvetica&quot; as the cosFontName on line 434 of PDAppearance.java. So then when it tries to get the font from the formResources on line 439 (formResources.getFonts().get( fontName )&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, it returns null because there is no &quot;Helvetica&quot; font, only &quot;Helv&quot;. I changed the fontName variable&apos;s value to &quot;Helv&quot; in the debugger and that allowed setValue to complete without error.&lt;/p&gt;

&lt;p&gt;Is this a problem with the form? I didn&apos;t see any way to fix it in Acrobat Pro&apos;s UI.&lt;/p&gt;</description>
                <environment>Mac OS X 10.8.3&lt;br/&gt;
Oracle Java 1.7.0_15-b03</environment>
        <key id="12638728">PDFBOX-1550</key>
            <summary>Helv vs. Helvetica font names cause PDField.setValue to fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="msahyoun">Maruan Sahyoun</assignee>
                                    <reporter username="cap10morgan">Wes Morgan</reporter>
                        <labels>
                            <label>Appearance</label>
                    </labels>
                <created>Sun, 24 Mar 2013 17:19:36 +0000</created>
                <updated>Thu, 17 Mar 2016 19:08:38 +0000</updated>
                            <resolved>Tue, 3 Feb 2015 23:10:14 +0000</resolved>
                                    <version>1.8.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>AcroForm</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14174094" author="msahyoun" created="Thu, 16 Oct 2014 19:00:24 +0000"  >&lt;p&gt;This is somewhat related to appearance generation although at that point in time although I&apos;m unsure if that will be addressed there. Might point to a wrong handling of resources&lt;/p&gt;</comment>
                            <comment id="14303121" author="msahyoun" created="Tue, 3 Feb 2015 11:40:46 +0000"  >&lt;p&gt;As already outlined the issue with the file is that the default appearance DA for the field(s) is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/Helvetica 12 Tf 0 g
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where the font resource itself is named /Helv which points to a font dictionary with /Helvetica being the base font name.&lt;/p&gt;

&lt;p&gt;The correct DA would be &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/Helv 12 Tf 0 g
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the PDF spec:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The specified font value shall match a resource name in the Font entry of the default resource dictionary&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14304053" author="msahyoun" created="Tue, 3 Feb 2015 21:37:09 +0000"  >&lt;p&gt;Filled out form field &amp;lt;first&amp;gt;&lt;/p&gt;</comment>
                            <comment id="14304059" author="jira-bot" created="Tue, 3 Feb 2015 21:39:02 +0000"  >&lt;p&gt;Commit 1656926 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1656926&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1656926&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1550&quot; title=&quot;Helv vs. Helvetica font names cause PDField.setValue to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1550&quot;&gt;&lt;del&gt;PDFBOX-1550&lt;/del&gt;&lt;/a&gt; use font name as fallback to resolve font&lt;/p&gt;</comment>
                            <comment id="14304080" author="jira-bot" created="Tue, 3 Feb 2015 21:52:29 +0000"  >&lt;p&gt;Commit 1656930 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1656930&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1656930&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1550&quot; title=&quot;Helv vs. Helvetica font names cause PDField.setValue to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1550&quot;&gt;&lt;del&gt;PDFBOX-1550&lt;/del&gt;&lt;/a&gt; add missing classes&lt;/p&gt;</comment>
                            <comment id="14304276" author="msahyoun" created="Tue, 3 Feb 2015 23:10:14 +0000"  >&lt;p&gt;Implemented lookup mechanism to use the reference to the font resource from the default appearance as the font name if the resource does not exist and try finding that font.&lt;/p&gt;

&lt;p&gt;This is a workaround to a wrong definition in the form. The default appearance shall point to the resource name and not names within the resource.&lt;/p&gt;</comment>
                            <comment id="14319797" author="damien.cuvillier" created="Fri, 13 Feb 2015 09:42:03 +0000"  >&lt;p&gt;Maruan, What do you mean saying &quot;The default appearance shall point to the resource name and not names within the resource.&quot;&lt;/p&gt;

&lt;p&gt;Is there anything to do in PDFbox code itself or in our code ?&lt;/p&gt;</comment>
                            <comment id="14319808" author="msahyoun" created="Fri, 13 Feb 2015 09:56:54 +0000"  >&lt;p&gt;From the spec.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The specified font value shall match a resource name in the Font entry of the default resource dictionary&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So the correct DA value would be /Helv for the font name and not /Helvetica.&lt;/p&gt;

&lt;p&gt;There is no issue if you use that with Adobe Reader as there are some internal font mappings. We are looking to implement something similar. See &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2661&quot; title=&quot;Implement font fallback for AcroForms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2661&quot;&gt;PDFBOX-2661&lt;/a&gt; for a more complete discussion around selecting the font.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12740152">PDFBOX-2333</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12696287" name="co_absentee.en.filled.pdf" size="70601" author="msahyoun" created="Tue, 3 Feb 2015 21:37:09 +0000"/>
                            <attachment id="12674314" name="co_absentee.en.pdf" size="59414" author="jahewson" created="Sat, 11 Oct 2014 00:44:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319203</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j2s7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319544</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>