<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:03:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3292] Error reading stream, expected=&apos;endstream&apos; actual=&apos;&apos; in non-truncated files</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3292</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;When PDF files are truncated, one of the most common exceptions in PDFBox 2.0.0 is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: Error reading stream, expected=&apos;endstream&apos; actual=&apos;&apos; at offset 165888
	at org.apache.pdfbox.pdfparser.COSParser.parseCOSStream(COSParser.java:999)
	at org.apache.pdfbox.pdfparser.COSParser.parseXrefObjStream(COSParser.java:326)
	at org.apache.pdfbox.pdfparser.COSParser.parseXref(COSParser.java:287)
	at org.apache.pdfbox.pdfparser.PDFParser.initialParse(PDFParser.java:192)
	at org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:249)
	at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:847)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are two files in govdocs1 that are NOT truncated and trigger this exception in 2.0.0, but were parsed by PDFBox 1.8.11 with the classic parser.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12954058">PDFBOX-3292</key>
            <summary>Error reading stream, expected=&apos;endstream&apos; actual=&apos;&apos; in non-truncated files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="tallison">Tim Allison</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Mar 2016 19:27:58 +0000</created>
                <updated>Sat, 25 Mar 2017 18:12:56 +0000</updated>
                            <resolved>Tue, 12 Apr 2016 10:30:10 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15214733" author="tallison@mitre.org" created="Mon, 28 Mar 2016 19:30:59 +0000"  >&lt;p&gt;links: &lt;a href=&quot;http://162.242.228.174/docs/govdocs1/051/051987.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;051987&lt;/a&gt; and &lt;a href=&quot;http://162.242.228.174/docs/govdocs1/869/869772.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;869772.pdf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15214748" author="tallison@mitre.org" created="Mon, 28 Mar 2016 19:40:04 +0000"  >&lt;p&gt;I finally had a chance to apply Tilman&apos;s recommendation on &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3058&quot; title=&quot;Support TIKA Migration to PDFBox 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3058&quot;&gt;&lt;del&gt;PDFBOX-3058&lt;/del&gt;&lt;/a&gt; and move all PDF files that don&apos;t contain &apos;%%EOF&apos; into a folder called &quot;truncated_pdfs&quot;.  There was only one pdf in govdocs1 that was truncated.&lt;/p&gt;

&lt;p&gt;The above files were &quot;masked&quot; by the vast majority (I think!) of files that are actually truncated.&lt;/p&gt;</comment>
                            <comment id="15235912" author="lehmi" created="Mon, 11 Apr 2016 20:23:15 +0000"  >&lt;p&gt;I&apos;ve found the problem, the self repair mechanism doesn&apos;t correctly recognize the xref table. Now, I have to find a suitable solution ...&lt;/p&gt;</comment>
                            <comment id="15236960" author="jira-bot" created="Tue, 12 Apr 2016 10:19:44 +0000"  >&lt;p&gt;Commit 1738755 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1738755&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1738755&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3292&quot; title=&quot;Error reading stream, expected=&amp;#39;endstream&amp;#39; actual=&amp;#39;&amp;#39; in non-truncated files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3292&quot;&gt;&lt;del&gt;PDFBOX-3292&lt;/del&gt;&lt;/a&gt;: check the dictionary of a possible xref-stream to avoid false positives&lt;/p&gt;</comment>
                            <comment id="15236962" author="jira-bot" created="Tue, 12 Apr 2016 10:22:24 +0000"  >&lt;p&gt;Commit 1738756 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1738756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1738756&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3292&quot; title=&quot;Error reading stream, expected=&amp;#39;endstream&amp;#39; actual=&amp;#39;&amp;#39; in non-truncated files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3292&quot;&gt;&lt;del&gt;PDFBOX-3292&lt;/del&gt;&lt;/a&gt;: check the dictionary of a possible xref-stream to avoid false positives&lt;/p&gt;</comment>
                            <comment id="15236969" author="lehmi" created="Tue, 12 Apr 2016 10:30:10 +0000"  >&lt;p&gt;COSParser#checkXRefStreamOffset simply checked if a dictionary can be found at the given offset. I rare case, such as the given pdfs, there is a dictionary but not the one we are looking for. Saying that, I&apos;ve implemented an additional check to see if the dictionary at the given offset is the right one or not and now everything works fine.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;tallison@mitre.org&lt;/a&gt; Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vaxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>