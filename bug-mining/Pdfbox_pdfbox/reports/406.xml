<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:55:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1442] bar chart converted from PDF is totally a black area.</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1442</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;The bar charts converted from PDF is totally a black area. The code is as following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                 
PDFImageWriter imageWriter = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFImageWriter();
&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; success = imageWriter.writeImage(document, imageFormat, password, startPage, endPage, outputPrefix, imageType, resolution);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!success)
{
	 logger.error( &lt;span class=&quot;code-quote&quot;&gt;&quot;Error: no writer found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; image format &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + imageFormat + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt;&quot;&lt;/span&gt; );
         &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(1);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I will attach the ppt and PNG files later&lt;/p&gt;</description>
                <environment></environment>
        <key id="12615436">PDFBOX-1442</key>
            <summary>bar chart converted from PDF is totally a black area.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="zmingsh">James Zhou</reporter>
                        <labels>
                            <label>shading</label>
                            <label>shadingpattern</label>
                    </labels>
                <created>Fri, 9 Nov 2012 08:25:45 +0000</created>
                <updated>Thu, 17 Mar 2016 19:08:17 +0000</updated>
                            <resolved>Sat, 30 Aug 2014 19:04:07 +0000</resolved>
                                    <version>1.7.1</version>
                    <version>1.8.0</version>
                    <version>1.8.2</version>
                    <version>1.8.3</version>
                    <version>1.8.4</version>
                    <version>1.8.5</version>
                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13493822" author="lehmi" created="Fri, 9 Nov 2012 08:37:30 +0000"  >&lt;p&gt;The pdf heavily uses shading patters which are not yet fully supported, see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1094&quot; title=&quot;Pattern colorspace support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1094&quot;&gt;&lt;del&gt;PDFBOX-1094&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13883143" author="tilman" created="Mon, 27 Jan 2014 19:14:35 +0000"  >&lt;p&gt;That file has several problems, one of them are lines like this one:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;&amp;lt;/Coords[0 240 0 240]/ColorSpace/DeviceRGB/ShadingType 2/Extend[&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]/Function 3 0 R&amp;gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The coords entry has identical coordinates. See p. 310 of the 1.7 spec, it will result in a divide by zero. As a first step, I added this before &quot;new AxialShadingPaint&quot; at two places:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; [] coords = ((PDShadingType2) shading).getCoords().toFloatArray();
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (coords[0] == coords[2] &amp;amp;&amp;amp; coords[1] == coords[3])
  {
      LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;ShadingType2: coordinates are identical&quot;&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
  }                
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After this change, the image is less bad (but still useless &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;</comment>
                            <comment id="13888954" author="tilman" created="Sun, 2 Feb 2014 15:46:11 +0000"  >&lt;p&gt;A possible clue? &lt;br/&gt;
While searching for problems with a different file (ch14.pdf) I noticed that the shading parameters were always the same. Here&apos;s an output for this file:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDShadingResources:296 - &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDShadingTypeShading: org.apache.pdfbox.pdmodel.graphics.shading.PDShadingType2@528f1577
PDShadingResources:297 - &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDShadingTypeCOSDictionary{(COSName{Coords}:COSArray{[COSInt{0}, COSInt{240}, COSInt{0}, COSInt{240}]}) (COSName{ColorSpace}:COSName{DeviceRGB}) (COSName{ShadingType}:COSInt{2}) (COSName{Extend}:COSArray{[&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]}) (COSName{Function}:COSDictionary{(COSName{Domain}:COSArray{[COSInt{0}, COSInt{1}]}) (COSName{FunctionType}:COSInt{2}) (COSName{N}:COSInt{1}) (COSName{C1}:COSArray{[COSInt{1}, COSInt{1}, COSInt{1}]}) (COSName{C0}:COSArray{[COSInt{1}, COSInt{1}, COSInt{1}]}) }) }
PDShadingResources:296 - &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDShadingTypeShading: org.apache.pdfbox.pdmodel.graphics.shading.PDShadingType2@5a4bb836
PDShadingResources:297 - &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDShadingTypeCOSDictionary{(COSName{Coords}:COSArray{[COSInt{0}, COSInt{240}, COSInt{0}, COSInt{240}]}) (COSName{ColorSpace}:COSName{DeviceRGB}) (COSName{ShadingType}:COSInt{2}) (COSName{Extend}:COSArray{[&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]}) (COSName{Function}:COSDictionary{(COSName{Domain}:COSArray{[COSInt{0}, COSInt{1}]}) (COSName{FunctionType}:COSInt{2}) (COSName{N}:COSInt{1}) (COSName{C1}:COSArray{[COSInt{1}, COSInt{1}, COSInt{1}]}) (COSName{C0}:COSArray{[COSInt{1}, COSInt{1}, COSInt{1}]}) }) }
PDShadingResources:296 - &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDShadingTypeShading: org.apache.pdfbox.pdmodel.graphics.shading.PDShadingType2@48a5598d
PDShadingResources:297 - &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDShadingTypeCOSDictionary{(COSName{Coords}:COSArray{[COSInt{0}, COSInt{240}, COSInt{0}, COSInt{240}]}) (COSName{ColorSpace}:COSName{DeviceRGB}) (COSName{ShadingType}:COSInt{2}) (COSName{Extend}:COSArray{[&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]}) (COSName{Function}:COSDictionary{(COSName{Domain}:COSArray{[COSInt{0}, COSInt{1}]}) (COSName{FunctionType}:COSInt{2}) (COSName{N}:COSInt{1}) (COSName{C1}:COSArray{[COSInt{1}, COSInt{1}, COSInt{1}]}) (COSName{C0}:COSArray{[COSInt{1}, COSInt{1}, COSInt{1}]}) }) }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So new PDShadingTypeShading() is called only 3 times for this file, although there are 66 shading objects in the PDF.&lt;/p&gt;

&lt;p&gt;Same observation for the file FUNSH01.pdf, files to be found in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-615&quot; title=&quot;shfill operator needs implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-615&quot;&gt;&lt;del&gt;PDFBOX-615&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13888968" author="lehmi" created="Sun, 2 Feb 2014 17:06:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; the paint value was cached even if a new pattern was choosen. I fixed that in revision 1563662. &lt;/p&gt;</comment>
                            <comment id="13888988" author="tilman" created="Sun, 2 Feb 2014 17:53:12 +0000"  >&lt;p&gt;Its getting better... the file that started this issue now has bars in the diagrams, but the (axial?) shading isn&apos;t there. The funsh file is correct. The ch14 file too (except a color problem for which I&apos;ll open a new issue).&lt;/p&gt;</comment>
                            <comment id="13925157" author="tilman" created="Sun, 9 Mar 2014 09:09:26 +0000"  >&lt;p&gt;I committed Andreas&apos; modification about not caching the paint value in rev 1575682 for the 1.8 branch.&lt;/p&gt;</comment>
                            <comment id="13986145" author="tilman" created="Wed, 30 Apr 2014 21:57:43 +0000"  >&lt;p&gt;I got this perfect rendering by using the initial CTM of the substream (as mentioned by John in March 2014 in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1094&quot; title=&quot;Pattern colorspace support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1094&quot;&gt;&lt;del&gt;PDFBOX-1094&lt;/del&gt;&lt;/a&gt;). However many other shading PDFs no longer worked, unless I took the local shading matrix when the initial substream CTM was the identity matrix.&lt;/p&gt;</comment>
                            <comment id="14112667" author="tilman" created="Wed, 27 Aug 2014 19:13:16 +0000"  >&lt;p&gt;A better solution is to take both into account, i.e. to multiply the pattern matrix with the substream matrix. For the first time, I also get a good rendering on &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2098&quot; title=&quot;Gouraud shading doesn&amp;#39;t appear&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2098&quot;&gt;&lt;del&gt;PDFBOX-2098&lt;/del&gt;&lt;/a&gt; p. 6 (will attach it there), and a better rendering on PATTYP1.pdf. PATTYP1.pdf is not perfect (&quot;P&quot; and &quot;S&quot;), but this could be because transforms other than x-y-identical-scales are not correctly handled for shading types 2 and 3 (&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2217&quot; title=&quot;Matrix transform ignored in axial and radial shadings (in PDFToImage output)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2217&quot;&gt;&lt;del&gt;PDFBOX-2217&lt;/del&gt;&lt;/a&gt;), and these use a shear.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; Matrix patternMatrix = shadingPattern.getMatrix();
 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (patternMatrix == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
 {
     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; shading.toPaint(substreamMatrix);
 }
 &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; shading.toPaint(patternMatrix.multiply(substreamMatrix));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14113417" author="jahewson" created="Thu, 28 Aug 2014 06:25:51 +0000"  >&lt;p&gt;Yes, the pattern matrix (if present) is concatenated to the stream&apos;s initial matrix to get the transformation from pattern space to device space.&lt;/p&gt;</comment>
                            <comment id="14116528" author="tilman" created="Sat, 30 Aug 2014 19:04:07 +0000"  >&lt;p&gt;Last problem (the shadings / gradient) fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1094&quot; title=&quot;Pattern colorspace support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1094&quot;&gt;&lt;del&gt;PDFBOX-1094&lt;/del&gt;&lt;/a&gt; in &lt;a href=&quot;https://svn.apache.org/r1621508&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1621508&lt;/a&gt;. This seemingly harmless powerpoint file really showed us an amazing number of different problems in our code.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12455970">PDFBOX-615</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12518829">PDFBOX-1094</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12664713" name="PATTYP1.pdf-1.png" size="55175" author="tilman" created="Wed, 27 Aug 2014 19:15:03 +0000"/>
                            <attachment id="12552793" name="clientfocus.PNG" size="200264" author="zmingsh" created="Fri, 9 Nov 2012 08:26:59 +0000"/>
                            <attachment id="12552794" name="clientfocus.pdf" size="31623" author="zmingsh" created="Fri, 9 Nov 2012 08:26:59 +0000"/>
                            <attachment id="12626542" name="funsh01.pdf-1.png" size="5823740" author="tilman" created="Sun, 2 Feb 2014 17:53:12 +0000"/>
                            <attachment id="12642735" name="pdfbox-1442.pdf-1.png" size="239722" author="tilman" created="Wed, 30 Apr 2014 21:57:43 +0000"/>
                            <attachment id="12626543" name="pdfbox-1442.pdf-1.png" size="211396" author="tilman" created="Sun, 2 Feb 2014 17:53:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256714</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0iqlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>107404</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>