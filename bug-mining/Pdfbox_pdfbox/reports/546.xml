<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:55:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2102] Characters swallowed on COSString.getString()</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2102</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1437&quot; title=&quot;Title invalidly read in DocumentInformation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1437&quot;&gt;&lt;del&gt;PDFBOX-1437&lt;/del&gt;&lt;/a&gt; seems to have introduced a regression that causes characters like \n to be swallowed when COSString.getString() is called. PDFDocEncoding doesn&apos;t handle all valid characters.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;testStr = &lt;span class=&quot;code-quote&quot;&gt;&quot;Line1\nLine2\nLine3\n&quot;&lt;/span&gt;;
COSString lineFeedString = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; COSString(testStr);
assertEquals(testStr, lineFeedString.getString());

&lt;span class=&quot;code-comment&quot;&gt;//Same as previous but &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; time as a dictionary value
&lt;/span&gt;lineFeedString = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; COSString(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; testStr.length(); i++) {
    lineFeedString.append(testStr.charAt(i));
}
assertEquals(testStr, lineFeedString.getString()); &lt;span class=&quot;code-comment&quot;&gt;//currently fails&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Direct link to the change causing the regression:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1406628&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1406628&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12717248">PDFBOX-2102</key>
            <summary>Characters swallowed on COSString.getString()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeremias@apache.org">Jeremias Maerki</assignee>
                                    <reporter username="jeremias@apache.org">Jeremias Maerki</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 May 2014 10:12:08 +0000</created>
                <updated>Sun, 22 Jun 2014 14:34:52 +0000</updated>
                            <resolved>Sun, 1 Jun 2014 17:53:39 +0000</resolved>
                                    <version>1.8.5</version>
                    <version>1.8.6</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.6</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14012267" author="jeremias@apache.org" created="Thu, 29 May 2014 10:37:36 +0000"  >&lt;p&gt;Fixed in Branch 1.8 with &lt;a href=&quot;http://svn.apache.org/r1598250&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1598250&lt;/a&gt;. Merge into 2.x coming shortly.&lt;/p&gt;</comment>
                            <comment id="14012355" author="lehmi" created="Thu, 29 May 2014 13:33:47 +0000"  >&lt;p&gt;I&apos;ve added another rat exclude rule in revision 1598289 as the new spi config file within the resources triggers a rat issue because of a missing license information&lt;/p&gt;</comment>
                            <comment id="14012401" author="jeremias@apache.org" created="Thu, 29 May 2014 14:32:18 +0000"  >&lt;p&gt;Thanks, Andreas. Those rats....&lt;/p&gt;</comment>
                            <comment id="14012424" author="jeremias@apache.org" created="Thu, 29 May 2014 15:06:58 +0000"  >&lt;p&gt;And fixed in Trunk, too: &lt;a href=&quot;http://svn.apache.org/r1598316&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1598316&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14014295" author="pslabycz" created="Fri, 30 May 2014 22:19:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeremias%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;jeremias@apache.org&quot;&gt;jeremias@apache.org&lt;/a&gt;: After the change in 1598316, I am getting IllegalArgumentExceptions on some of the documents in my test suite. The culprit seems to be a missing in.position(in.position() - 1); at the line 141 in SingleByteCharset. You might also consider using something like&lt;br/&gt;
int mark = src.position();&lt;br/&gt;
try &lt;br/&gt;
{&lt;br/&gt;
 mark++; // in front of out.put()&lt;br/&gt;
}&lt;br/&gt;
finally &lt;br/&gt;
{&lt;br/&gt;
src.position(mark);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;This pattern is used in single byte encoding implementation of OpenJVM. Also, it has a better performing implementation for the case that both the byte and char buffer are based on an array (which is the most usual case).&lt;/p&gt;

&lt;p&gt;The test document (coming from &lt;a href=&quot;http://www.stillhq.com/pdfdb/db.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.stillhq.com/pdfdb/db.html&lt;/a&gt;) and stack trace is attached, but the missing call of position() seems to be obvious, anyway.&lt;/p&gt;
</comment>
                            <comment id="14014961" author="tilman" created="Sun, 1 Jun 2014 11:22:36 +0000"  >&lt;p&gt;Are you sure that it is that pdf document? I see you called openProtection but the document isn&apos;t encrypted.&lt;/p&gt;</comment>
                            <comment id="14015047" author="jeremias@apache.org" created="Sun, 1 Jun 2014 17:53:39 +0000"  >&lt;p&gt;Thanks, Petr! I fixed the problem:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/r1599016&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1599016&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/r1599019&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1599019&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14015076" author="pslabycz" created="Sun, 1 Jun 2014 20:15:12 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Are you sure that it is that pdf document? I see you called openProtection but the document isn&apos;t encrypted.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;After the years in business I learned not to be sure about anything &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; But I downloaded my upload again, Acrobat says it is protected via password, PDDocument.isEncrypted() returns true and there is the exception I have reported.&lt;/p&gt;

&lt;p&gt;And, I can confirm that the latest commit from Jeremias fixes the problem, the exception vanished now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12614637">PDFBOX-1437</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12647703" name="000059.pdf" size="740091" author="pslabycz" created="Fri, 30 May 2014 22:23:19 +0000"/>
                            <attachment id="12647701" name="iae.txt" size="1677" author="pslabycz" created="Fri, 30 May 2014 22:21:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395452</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w333:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395580</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>