<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:07:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4306] Image clipping area rounding error</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4306</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Creating images with PDFBox and merging them together when you have two pages that connect will create a white line between the images.&lt;/p&gt;

&lt;p&gt;We have looked into the issue and tried to fix it and found that the clipping area is a bit to tight so the images will not be rendered correctly. My guess is that this is due to a rounding error when using floats.&#160;&lt;/p&gt;

&lt;p&gt;Most of the graphics functions in java use double precision and PDFBox uses floats so when using layer upon layer of bounding boxes intersecting the clipping area it might get skewed&#160;to a bad bounding box.&lt;/p&gt;

&lt;p&gt;I&apos;ve added a patch to this issue with the code we use as a workaround today. It&apos;s by no means the&#160;final solution to the problem but&#160;it resolves the white line issue.&lt;/p&gt;

&lt;p&gt;To be sure that you get the error when generating the images use the following command&lt;/p&gt;

&lt;p&gt;```&lt;br/&gt;
java -jar&#160;pdfbox-app-3.0.0-SNAPSHOT.jar PDFToImage -dpi 150 -quality 0.95 -format jpg page-1.pdf&lt;br/&gt;
```&lt;/p&gt;

&lt;p&gt;We run java 8 on our machines.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13182321">PDFBOX-4306</key>
            <summary>Image clipping area rounding error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="kalaspuffar">Daniel Persson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Aug 2018 09:42:49 +0000</created>
                <updated>Fri, 5 Oct 2018 04:53:32 +0000</updated>
                            <resolved>Wed, 19 Sep 2018 06:08:02 +0000</resolved>
                                    <version>2.0.11</version>
                                    <fixVersion>2.0.12</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>Rendering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16598736" author="kalaspuffar" created="Fri, 31 Aug 2018 13:37:33 +0000"  >&lt;p&gt;Hi again.&lt;/p&gt;

&lt;p&gt;We noticed that the result of smaller images in other pages created artifacts so we realized that patch.diff was not a solution we could use going forward.&#160;&lt;/p&gt;

&lt;p&gt;Patch2.diff is a hackier solution but seems to solve the immediate&#160;problem for us at least but there must be a better way.&lt;/p&gt;

&lt;p&gt;best regards&lt;/p&gt;

&lt;p&gt;Daniel&lt;/p&gt;</comment>
                            <comment id="16599602" author="tilman" created="Sat, 1 Sep 2018 10:26:57 +0000"  >&lt;p&gt;I didn&apos;t even test the first solution yet and it looked weird to me, the second solution makes much more sense: the existing code would add a pixel row if the real dimensions are smaller that integer + 0.5. Why did you think it is &quot;hacky&quot;?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The only improvement I&apos;d make is to make both result values a minimum of 1.&lt;/p&gt;</comment>
                            <comment id="16599636" author="kalaspuffar" created="Sat, 1 Sep 2018 13:40:53 +0000"  >&lt;p&gt;Well, if it&apos;s a rounding error when drawing elements then I feel that you should ensure to increase the precision instead of changing the image ratio.&lt;/p&gt;

&lt;p&gt;With this solution we create images that are 1 pixel narrower than the same produced by Poppler. Then again that might not be the correct resolution. &lt;/p&gt;

&lt;p&gt;The thing that worries me is that when you create a spread of multiple images you could introduce a jagged edge between the images if one pixel is missing.&lt;/p&gt;

&lt;p&gt;Best regards&lt;br/&gt;
Daniel&lt;/p&gt;</comment>
                            <comment id="16617769" author="kalaspuffar" created="Mon, 17 Sep 2018 16:28:42 +0000"  >&lt;p&gt;Hi @tilman&lt;/p&gt;

&lt;p&gt;Well, after some consideration and no other response to this issue I would ask you to include the last patch in the next release if possible. &lt;/p&gt;

&lt;p&gt;Best regards&lt;br/&gt;
Daniel&lt;/p&gt;</comment>
                            <comment id="16619607" author="jira-bot" created="Tue, 18 Sep 2018 19:22:45 +0000"  >&lt;p&gt;Commit 1841250 from tilman@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1841250&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1841250&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4306&quot; title=&quot;Image clipping area rounding error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4306&quot;&gt;&lt;del&gt;PDFBOX-4306&lt;/del&gt;&lt;/a&gt;: avoid single blank pixel line on the right or on the bottom, as suggested by Daniel Persson&lt;/p&gt;</comment>
                            <comment id="16619608" author="jira-bot" created="Tue, 18 Sep 2018 19:22:51 +0000"  >&lt;p&gt;Commit 1841251 from tilman@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1841251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1841251&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4306&quot; title=&quot;Image clipping area rounding error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4306&quot;&gt;&lt;del&gt;PDFBOX-4306&lt;/del&gt;&lt;/a&gt;: avoid single blank pixel line on the right or on the bottom, as suggested by Daniel Persson&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12424452">PDFBOX-460</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12937888" name="page-1.pdf" size="440783" author="kalaspuffar" created="Fri, 31 Aug 2018 09:28:33 +0000"/>
                            <attachment id="12937887" name="page-2.pdf" size="614100" author="kalaspuffar" created="Fri, 31 Aug 2018 09:28:34 +0000"/>
                            <attachment id="12937886" name="patch.diff" size="1201" author="kalaspuffar" created="Fri, 31 Aug 2018 09:28:57 +0000"/>
                            <attachment id="12937919" name="patch2.diff" size="854" author="kalaspuffar" created="Fri, 31 Aug 2018 13:35:18 +0000"/>
                            <attachment id="12937885" name="test.jpg" size="1062400" author="kalaspuffar" created="Fri, 31 Aug 2018 09:39:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xmg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>