<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:55:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-1164] Inline image parsing error causes RuntimeException + FIX</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-1164</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Inline images start with BI operator, followed by some parameters and ID operator. Then the binary image data with a trailing EI operator follows. The problem is the detection of the EI operator. The current code in PDFStreamParser requires the operator to be surrounded by whitespaces. However I have a document where the sequence EI with preceding 0x09 and following 0x20 occurs in the image data. Thus PDFBOX wrongly assumes the end of image data and the parsing later fails with a RuntimeException (from PDFStreamParser#getTokenIterator - this should be changed to throw IOException; will file another issue) because the following binary data is interpreted as operator.&lt;/p&gt;

&lt;p&gt;In earlier versions a heuristic was used to test the expected byte count of the image to circumvent this problem, however it was disabled because the data could also be compressed.&lt;/p&gt;

&lt;p&gt;To fix the problem I have added a test involving the following X (with X=5) bytes after the &apos;WS EI WS&apos;. In order to treat the EI as operator all of the bytes must be printable ASCII characters because it can only be followed by PDF operators. If 5 bytes are too many because a comment with non ASCII character could follow this could be reduced to 3 bytes which in most cases should be enough.&lt;/p&gt;

&lt;p&gt;Diff of fix is added to this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12531030">PDFBOX-1164</key>
            <summary>Inline image parsing error causes RuntimeException + FIX</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tboehme">Timo Boehme</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Nov 2011 17:31:30 +0000</created>
                <updated>Fri, 2 May 2014 06:12:03 +0000</updated>
                            <resolved>Fri, 7 Mar 2014 22:06:38 +0000</resolved>
                                    <version>1.7.0</version>
                                    <fixVersion>1.8.5</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Parsing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13147846" author="tboehme" created="Thu, 10 Nov 2011 17:33:17 +0000"  >&lt;p&gt;fix for this issue&lt;/p&gt;</comment>
                            <comment id="13915170" author="tilman" created="Thu, 27 Feb 2014 23:11:52 +0000"  >&lt;p&gt;I assume you are running your own version with the change but wanted another opinion before committing and then maybe forgot about it. The change makes sense. I have set it for myself now, and will let it run for a week or two. I still haven&apos;t had the time to merge Johns changes in my own version, but after that I will make diff tests for about 100 files, and if all is good I&apos;ll commit your change.&lt;/p&gt;</comment>
                            <comment id="13916260" author="jahewson" created="Fri, 28 Feb 2014 19:49:00 +0000"  >&lt;p&gt;LGTM&lt;/p&gt;</comment>
                            <comment id="13924390" author="tilman" created="Fri, 7 Mar 2014 22:06:38 +0000"  >&lt;p&gt;Fixed in rev 1575426 for the trunk and rev 1575427 for the 1.8 branch. Good change, and sorry that it took so long!&lt;/p&gt;</comment>
                            <comment id="13925689" author="tboehme" created="Mon, 10 Mar 2014 12:06:20 +0000"  >&lt;p&gt;I have to beg pardon that I haven&apos;t commit this fix when getting a committer. Thanks for doing it.&lt;/p&gt;</comment>
                            <comment id="13987380" author="lehmi" created="Fri, 2 May 2014 06:12:03 +0000"  >&lt;p&gt;Closed after releasing PDFBox 1.8.5&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12503260" name="PDFStreamParser.diff" size="2116" author="tboehme" created="Thu, 10 Nov 2011 17:33:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216768</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14txb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236313</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>