<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:05:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3740] Standard 14 and Encoding</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3740</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;before I attempted to become PDF/A compatible, I was happy with just an Encoding entry for the standard 14...&lt;br/&gt;
I have made a few tests:&lt;br/&gt;
1 - full embedding of font&lt;br/&gt;
2 - just Encoding&lt;br/&gt;
3 - complete font descriptor&lt;br/&gt;
rendering results and preflight warnings&lt;br/&gt;
gs   acro   xpdf   preflight&lt;br/&gt;
ok   ok      bad    many&lt;br/&gt;
ok   ok      ok      2&lt;br/&gt;
ok   bad    ok      1&lt;/p&gt;</description>
                <environment>linux</environment>
        <key id="13060891">PDFBOX-3740</key>
            <summary>Standard 14 and Encoding</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="musicman">Wolfgang Hamann</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Apr 2017 12:34:24 +0000</created>
                <updated>Mon, 15 May 2017 20:28:15 +0000</updated>
                            <resolved>Thu, 6 Apr 2017 08:07:54 +0000</resolved>
                                    <version>2.0.5</version>
                                    <fixVersion>2.0.6</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                    <component>Preflight</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15952216" author="tilman" created="Sat, 1 Apr 2017 13:11:20 +0000"  >&lt;p&gt;Strategy 1 is the correct one, you must embed the font or a subset. It isn&apos;t the count of errors that is important, it is the content. Test3 has only one font related error but that one is a major one, &quot;FontFile entry is missing&quot;, so it can&apos;t go further.&lt;/p&gt;

&lt;p&gt;Your problem in test1 is &quot;3.3.1 : Glyph error, The character code .... in the font program &quot;Times-Roman&quot; is missing from the Character Encoding on page 1&quot;, and yes, when looking at it with PDFDebugger, the glyphs are missing. Open your file and look at &lt;tt&gt;Root/Pages/Kids/[0]/Resources/Font/F55&lt;/tt&gt; . So either it is really missing, or there&apos;s a bug so that the glyphs aren&apos;t found in the binary part of the type1 font. Or this isa &quot;how to&quot; question, these are better asked on the user mailing list.&lt;/p&gt;</comment>
                            <comment id="15952223" author="musicman" created="Sat, 1 Apr 2017 13:27:59 +0000"  >&lt;p&gt;About strategy one: do you say that pdf/A means the standard 14 should not be utilized at all? (which would sort of make sense - how could I know whether the fonts are the original ones or have been updated with an Euro sign) However, citations from the standard seem to allow them.&lt;/p&gt;

&lt;p&gt;Well, all three versions render correctly with ghostscript, and test1 also renders correctly with Acrobat reader. So these tools must use a different way of getting at the glyphs.&lt;/p&gt;</comment>
                            <comment id="15952226" author="tilman" created="Sat, 1 Apr 2017 13:39:13 +0000"  >&lt;p&gt;There is no exception for the standard 14 fonts, all must be embedded:&lt;br/&gt;
&lt;a href=&quot;http://blog.pdf-tools.com/2014/12/handling-embedded-and-non-embedded.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://blog.pdf-tools.com/2014/12/handling-embedded-and-non-embedded.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;test1 does render correctly with Adobe Reader but it brings a font related error message.&lt;/p&gt;

&lt;p&gt;Yes all viewers (including ours) do a lot of tricks to display files with missing data.&lt;/p&gt;</comment>
                            <comment id="15952233" author="tilman" created="Sat, 1 Apr 2017 13:56:36 +0000"  >&lt;p&gt;Btw your file has an additional error (the default text color /DeviceGray 0 needs an output intent) that isn&apos;t detected by preflight, but by VeraPDF, I&apos;ll open an issue later.&lt;/p&gt;

&lt;p&gt;Update: fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3741&quot; title=&quot;usage of default colorspace not checked by preflight&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3741&quot;&gt;&lt;del&gt;PDFBOX-3741&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15952552" author="musicman" created="Sun, 2 Apr 2017 06:28:19 +0000"  >&lt;p&gt;This file is about the same as test1 - only the font name has been slightly changed not to match standard14.&lt;br/&gt;
I was a bit curious about what is actually going on....&lt;br/&gt;
Sequence of events:&lt;br/&gt;
1. PDResources looks at both embedded fonts with the encoding from the pdf&lt;br/&gt;
2. PDType1Font is called for the 14 fonts&lt;br/&gt;
3. PDType1Font is called for both embedded fonts - but for the Times-Roman has reverted to StdEncoding&lt;/p&gt;</comment>
                            <comment id="15952555" author="musicman" created="Sun, 2 Apr 2017 06:34:57 +0000"  >&lt;p&gt;About the OutputIntent - somebody at verapdf already has helped me to add suitable data. This is one of the points where I would like to understand what I am doing and why. After all the intent of the document is just to apply black colorant to white(ish) paper - be it ink, toner, or even oven soot.&lt;br/&gt;
The other one I am somewhat in doubt about is the document ID: I am not creating PDF by hand, obviously. So for the intial/changed IDs to have a real meaning the application creating the files would need to implement an initial / revised system. What about systems that treat pdf creation as a print driver?&lt;/p&gt;</comment>
                            <comment id="15952570" author="msahyoun" created="Sun, 2 Apr 2017 07:23:07 +0000"  >&lt;p&gt;The main topic about PDF/A is to ensure the PDF can be reproduced visually in a consistent way, there are no external dependencies which you may not be able to resolve in the future, there is no protection/encryption you may not be able to resolve in the future and there is no use of restricted patents. To ensure that  PDF/A restricts or enforces several PDF properties. The PDF/A-1 spec together with the corrigendum&apos;s is a quick read (the spec being approx. 40 pages) which lists all requirements which were agreed on so you might want to grab a copy from ISO.&lt;/p&gt;

&lt;p&gt;For the OutputIntent&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;All colours, except where used for a thumbnail image (PDF Reference, 8.2.3), shall be specified in a device-independent manner, either directly by the use of a device-independent colour space, indirectly through the use of default colour spaces (PDF Reference 4.5), or indirectly by the use of an OutputIntent. A conforming file may use any colour space specified in PDF Reference, except as restricted in 6.2.3.2 to 6.2.3.4.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;As you can see &lt;b&gt;device independence&lt;/b&gt; is the key to this requirement as PDF is not only to represent a document on paper but also on other devices such as screens.&lt;/p&gt;</comment>
                            <comment id="15952583" author="tilman" created="Sun, 2 Apr 2017 08:02:28 +0000"  >&lt;p&gt;Re font name: I&apos;ll investigate that. Yes, in test4, just changing the font name back to &quot;Times-Roman&quot; makes the error message come back - weird.&lt;/p&gt;

&lt;p&gt;Re output intent - see how it is done in the CreatePDFA.java example. You do not really need to understand what this is about, just attach the output intent.&lt;/p&gt;

&lt;p&gt;Re ID - if you don&apos;t use PDFBox to create your files, search for COSName.ID in the source code, you&apos;ll hit a method in COSWriter.java, this should answer your question somewhat.&lt;/p&gt;</comment>
                            <comment id="15952601" author="musicman" created="Sun, 2 Apr 2017 09:31:36 +0000"  >&lt;p&gt;Re: ID - your reference suggests that an &quot;edited&quot; version might be an incremental update of PDF file. My usage is more like a print driver, so I would always have two identical IDs (and printing the same document again would generate fresh IDs)&lt;/p&gt;

&lt;p&gt;Re: Embedding: the example file says to embed even the standard14 fonts (I believe the wording in the verapdf results was less strict, I will have to look at that in the office). Now, since from the 3 viewers I have at hand, one did not like the embedding, I fear I would find a few more like that ...&lt;br/&gt;
I will probably make the renaming as in test4 part of my program&lt;/p&gt;</comment>
                            <comment id="15952621" author="tilman" created="Sun, 2 Apr 2017 10:46:29 +0000"  >&lt;p&gt;About that century font that Adobe is complaining about, what&apos;s this in the binary segment?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  /Private 8 dict dup begin
    /RD {string currentfile exch readstring pop} executeonly def
    /ND {noaccess def} executeonly def
    /NP {noaccess put} executeonly def
    /BlueValues [] def
    /lenIV 4 def
    /MinFeature { 16 16 } def
    /password 5839 def
    /UniqueID 4711 def
  2 index /CharStrings 154 dict dup begin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Shouldn&apos;t there be some sort of end before the /CharStrings?&lt;/p&gt;</comment>
                            <comment id="15952622" author="tilman" created="Sun, 2 Apr 2017 10:56:27 +0000"  >&lt;p&gt;The Times-Roman binary segment is also weird:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  /Private 9 dict dup begin
    /RD {string currentfile exch readstring pop} executeonly def
    /ND {noaccess def} executeonly def
    /NP {noaccess put} executeonly def
    /BlueValues [] def
    /lenIV 4 def
    /MinFeature { 16 16 } def
    /password 5839 def
    /UniqueID 4711 def
	/Subrs 196 array
	dup 0 15 RD Y&#166;&#8218;z&#162;&#165;H&#168;&#242;�
....
	dup 195 25 RD Y&#166;&#8218;z&#212;&#179;@&#8216;&#195;&#225;�o&amp;lt;y&#192;Y&#352;]&#176;Ch&#201;&amp;lt;�&#205;NP
ND
  2 index /CharStrings 202 dict dup begin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so there&apos;s only one thing that terminates, although I&apos;d expected two.&lt;/p&gt;</comment>
                            <comment id="15952630" author="musicman" created="Sun, 2 Apr 2017 11:41:40 +0000"  >&lt;p&gt;Well, the &quot;2 index&quot; construct seems to be pretty common.&lt;br/&gt;
We have the new fontdict on the value stack, private is open dict and on the stack.&lt;br/&gt;
Before closing Private, Charstrings is created (inside the main dict) and opened too. This is required to execute ND and friends, because they are defined in Private. The Charstrings will be closed after all strings have been defined, and the Private is closed. There will be two occurrences of &quot;end&quot;, therefore.&lt;br/&gt;
The value stack still holds the maindict, private and charstrings. Depending on the details before (the code leading to private resp. charstrings),there will be one def or put for the charstrings and another def or put for private&lt;/p&gt;</comment>
                            <comment id="15952687" author="tilman" created="Sun, 2 Apr 2017 14:00:59 +0000"  >&lt;p&gt;test42-Romax.pdf and test42-Roman.pdf with some things added for PDF/A-1b.&lt;/p&gt;</comment>
                            <comment id="15952701" author="tilman" created="Sun, 2 Apr 2017 14:24:17 +0000"  >&lt;p&gt;Some news:&lt;br/&gt;
1) both fonts have the symbolic flag set - why?&lt;br/&gt;
2) the reason why the files are rendered differently in PDFBox is because in &lt;tt&gt;PDType1Font.readEncodingFromFont&lt;/tt&gt; the standard 14 AFM is used if the name matches. However you are using your own names, like &quot;char_141&quot;. After changing this logic, both files render properly and validate too.&lt;/p&gt;</comment>
                            <comment id="15952732" author="jira-bot" created="Sun, 2 Apr 2017 15:49:25 +0000"  >&lt;p&gt;Commit 1789889 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1789889&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1789889&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3740&quot; title=&quot;Standard 14 and Encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3740&quot;&gt;&lt;del&gt;PDFBOX-3740&lt;/del&gt;&lt;/a&gt;: don&apos;t get standard 14 AFM if font is embedded&lt;/p&gt;</comment>
                            <comment id="15952733" author="jira-bot" created="Sun, 2 Apr 2017 15:49:30 +0000"  >&lt;p&gt;Commit 1789890 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1789890&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1789890&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3740&quot; title=&quot;Standard 14 and Encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3740&quot;&gt;&lt;del&gt;PDFBOX-3740&lt;/del&gt;&lt;/a&gt;: don&apos;t get standard 14 AFM if font is embedded&lt;/p&gt;</comment>
                            <comment id="15952762" author="tilman" created="Sun, 2 Apr 2017 16:33:27 +0000"  >&lt;p&gt;Re your last comment, I can&apos;t really argue with you, you know PostScript better. The problems don&apos;t appear with PDFBox, it can render both fonts. But Adobe has a problem, and PDF.js too.&lt;/p&gt;

&lt;p&gt;The commits solve the problem with preflight reporting errors that aren&apos;t, and the two files I uploaded hopefully help you reaching your PDF/A-1b goals.&lt;/p&gt;

&lt;p&gt;Can I set this issue to resolved? (You&apos;re welcome to open new ones)&lt;/p&gt;</comment>
                            <comment id="15958387" author="musicman" created="Thu, 6 Apr 2017 06:41:14 +0000"  >&lt;p&gt;Well, things look fine now - test page shows blue bar in acro reader 9 and gets green vote in verapdf...&lt;br/&gt;
Thank you for the sample files&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12861599" name="test1.pdf" size="112525" author="musicman" created="Sat, 1 Apr 2017 12:34:24 +0000"/>
                            <attachment id="12861600" name="test2.pdf" size="72435" author="musicman" created="Sat, 1 Apr 2017 12:34:24 +0000"/>
                            <attachment id="12861601" name="test3.pdf" size="73515" author="musicman" created="Sat, 1 Apr 2017 12:34:24 +0000"/>
                            <attachment id="12861614" name="test4.pdf" size="112525" author="musicman" created="Sun, 2 Apr 2017 06:28:19 +0000"/>
                            <attachment id="12861628" name="test42-Roman.pdf" size="116104" author="tilman" created="Sun, 2 Apr 2017 14:00:59 +0000"/>
                            <attachment id="12861627" name="test42-Romax.pdf" size="116104" author="tilman" created="Sun, 2 Apr 2017 14:00:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3d3bz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>