<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:13:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5513] getPageLayout throws IllegalArgumentException for empty mode</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5513</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;getPageLayout() method in PDDocumentCatalog can throw an exception IllegalArgumentException when the PageLayout mode is not one of defined in the PageLayout class. In my case the mode is simply an empty string.The PDF documents which contain such unexpected Page Layout value are all rendered by quite old Adobe PDF library 7.0 from 2014 (I can&apos;t share the document, it is confidential....).&lt;/p&gt;

&lt;p&gt;My suggestion is to modify the method so that, similarly to getPageMode() method, the eventual exception is caught and the method returns the default PageLayout.&lt;font color=&quot;#9876aa&quot;&gt;SINGLE_PAGE &lt;/font&gt;mode.&lt;font color=&quot;#9876aa&quot;&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This problem affects the current version in trunk, as well as at least 2.0.25 and 2.0.26.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have created very simple patch which fixes the problem, please consider applying it to the trunk and 2.0.x branch.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13481387">PDFBOX-5513</key>
            <summary>getPageLayout throws IllegalArgumentException for empty mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="karolbe">Karol Bryd</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Sep 2022 21:05:40 +0000</created>
                <updated>Thu, 29 Sep 2022 17:57:14 +0000</updated>
                            <resolved>Wed, 14 Sep 2022 03:54:06 +0000</resolved>
                                    <version>2.0.25</version>
                    <version>2.0.26</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.27</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17603869" author="jira-bot" created="Wed, 14 Sep 2022 03:48:04 +0000"  >&lt;p&gt;Commit 1904053 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1904053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1904053&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5513&quot; title=&quot;getPageLayout throws IllegalArgumentException for empty mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5513&quot;&gt;&lt;del&gt;PDFBOX-5513&lt;/del&gt;&lt;/a&gt;: avoid IllegalArgumentException, as suggested by Karol Bryd&lt;/p&gt;</comment>
                            <comment id="17603870" author="jira-bot" created="Wed, 14 Sep 2022 03:48:09 +0000"  >&lt;p&gt;Commit 1904054 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1904054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1904054&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5513&quot; title=&quot;getPageLayout throws IllegalArgumentException for empty mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5513&quot;&gt;&lt;del&gt;PDFBOX-5513&lt;/del&gt;&lt;/a&gt;: avoid IllegalArgumentException, as suggested by Karol Bryd&lt;/p&gt;</comment>
                            <comment id="17603871" author="jira-bot" created="Wed, 14 Sep 2022 03:50:41 +0000"  >&lt;p&gt;Commit 1904055 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1904055&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1904055&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5513&quot; title=&quot;getPageLayout throws IllegalArgumentException for empty mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5513&quot;&gt;&lt;del&gt;PDFBOX-5513&lt;/del&gt;&lt;/a&gt;: no warning when empty&lt;/p&gt;</comment>
                            <comment id="17603872" author="jira-bot" created="Wed, 14 Sep 2022 03:50:45 +0000"  >&lt;p&gt;Commit 1904056 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1904056&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1904056&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5513&quot; title=&quot;getPageLayout throws IllegalArgumentException for empty mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5513&quot;&gt;&lt;del&gt;PDFBOX-5513&lt;/del&gt;&lt;/a&gt;: no warning when empty&lt;/p&gt;</comment>
                            <comment id="17603873" author="tilman" created="Wed, 14 Sep 2022 03:54:06 +0000"  >&lt;p&gt;Thanks I have committed your suggestion slightly modified; I prefer warning but not for empty strings.&lt;/p&gt;</comment>
                            <comment id="17603884" author="tilman" created="Wed, 14 Sep 2022 05:31:57 +0000"  >&lt;p&gt;Please test with a snapshot&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.27-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.27-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17605276" author="mkl" created="Thu, 15 Sep 2022 11:20:31 +0000"  >&lt;p&gt;I&apos;m a bit skeptical seeing a &lt;b&gt;get&lt;/b&gt;ter that reports a value different from what&apos;s really there. This makes the &lt;b&gt;get&lt;/b&gt;ter unusable when one wants to check the value...&lt;/p&gt;</comment>
                            <comment id="17605288" author="msahyoun" created="Thu, 15 Sep 2022 11:51:21 +0000"  >&lt;p&gt;@mkl SinglePage is the default value. So in this case I think that returning SinglePage only reflects that. &lt;/p&gt;</comment>
                            <comment id="17605460" author="mkl" created="Thu, 15 Sep 2022 17:29:30 +0000"  >&lt;p&gt;Yes, one can argue along that line. If PDFBox users want to get default values instead of invalid ones or exceptions, then go ahead.&lt;/p&gt;

&lt;p&gt;Nonetheless, it feels wrong to me.&lt;/p&gt;</comment>
                            <comment id="17605632" author="msahyoun" created="Fri, 16 Sep 2022 06:24:58 +0000"  >&lt;p&gt;What&apos;s your proposal?&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;no page mode et all or empty -&amp;gt; SinglePage&lt;/li&gt;
	&lt;li&gt;one of the pages modes defined -&amp;gt; return the PageMode&lt;/li&gt;
	&lt;li&gt;not empty but none of the defined ones -&amp;gt; exception&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;?&lt;/p&gt;

&lt;p&gt;Added note -  one can always check the value using the COS model.&lt;/p&gt;

&lt;p&gt;BR&lt;br/&gt;
Maruan&lt;/p&gt;</comment>
                            <comment id="17606354" author="mkl" created="Sun, 18 Sep 2022 21:31:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;What&apos;s your proposal? ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Something along those lines, I&apos;m merely not sure why one should default for the empty name; the empty name is a name after all.&lt;/p&gt;

&lt;p&gt;An alternative to the exception could be a new &lt;tt&gt;PageLayout&lt;/tt&gt; value UNSPECIFIED. People could then decide whether to handle this situation like the default value, as an error, or whether to retrieve the actual value and look at it more closely.&lt;/p&gt;

&lt;p&gt;The OP mentions that &lt;tt&gt;getPageMode&lt;/tt&gt; already caught a `IllegalArgumentException` and returned the default instead. It think that handling these situations alike is even mode important than the approach used.&lt;/p&gt;</comment>
                            <comment id="17606535" author="msahyoun" created="Mon, 19 Sep 2022 10:35:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; thoughts? &lt;/p&gt;</comment>
                            <comment id="17606695" author="tilman" created="Mon, 19 Sep 2022 17:49:15 +0000"  >&lt;p&gt;If we create a PageMode.UNSPECIFIED then what would be its value? Also empty string? I think this is now evolving into something complex. And what would be done if we reassign PageMode.UNSPECIFIED after it was created for an &quot;exotic&quot; value? It would no longer contain the same string.&lt;/p&gt;</comment>
                            <comment id="17607906" author="mkl" created="Wed, 21 Sep 2022 17:37:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;If we create a PageMode.UNSPECIFIED then what would be its value?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Most appropriately an attempt to retrieve its value should cause an exception. Thus, this enumeration member would essentially shift the exception to a later time.&lt;/p&gt;

&lt;p&gt;Also an attempt to set the document page mode to PageMode.UNSPECIFIED should be rejected.&lt;/p&gt;

&lt;p&gt;Oh well, maybe not a good alternative after all...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think this is now evolving into something complex.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Indeed, and that wasn&apos;t my intention at all. I just wanted to express that a plain getter IMO should not return a value clearly different from the actual value.&lt;/p&gt;

&lt;p&gt;If the method name had indicated that some interpretation takes place (e.g. &lt;tt&gt;interpretPageMode&lt;/tt&gt; or &lt;tt&gt;getBestPageModeMatch&lt;/tt&gt; or &lt;tt&gt;getEffectivePageMode&lt;/tt&gt;), I probably wouldn&apos;t have started such an argument at all &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. But as the method with that name has been around for so many years, one also shouldn&apos;t rename it on a whim.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13049249" name="page_layout_issue.patch" size="1126" author="karolbe" created="Tue, 13 Sep 2022 20:58:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 7 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z18j8g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>