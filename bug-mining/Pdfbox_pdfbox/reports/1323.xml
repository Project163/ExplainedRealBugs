<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:02:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3110] Extract by beads doesn&apos;t work</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3110</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Text extraction by beads has never worked, or (more likely) has been broken years ago, when/if the code was changed so that text positions are in image coordinates (y=0 is top) and not in PDF coordinates (y=0 is bottom).&lt;/p&gt;

&lt;p&gt;todos:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;adjust bead rectangles (done)&lt;/li&gt;
	&lt;li&gt;adjust for cropbox (done)&lt;/li&gt;
	&lt;li&gt;separate output from different beads with a newline (will open a different issue if I don&apos;t find solution)&lt;/li&gt;
	&lt;li&gt;optimize (done)&lt;/li&gt;
	&lt;li&gt;implement in 1.8.11&lt;/li&gt;
	&lt;li&gt;find a non copyrighted test file (done)&lt;/li&gt;
&lt;/ul&gt;

</description>
                <environment></environment>
        <key id="12913315">PDFBOX-3110</key>
            <summary>Extract by beads doesn&apos;t work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                            <label>beads</label>
                    </labels>
                <created>Mon, 16 Nov 2015 13:43:09 +0000</created>
                <updated>Mon, 18 Jan 2016 12:01:43 +0000</updated>
                            <resolved>Tue, 17 Nov 2015 19:13:33 +0000</resolved>
                                    <version>1.8.10</version>
                    <version>1.8.11</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.11</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Text extraction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15006692" author="msahyoun" created="Mon, 16 Nov 2015 14:05:19 +0000"  >&lt;p&gt;I can create a test file for you later today if needed&lt;/p&gt;</comment>
                            <comment id="15006697" author="tilman" created="Mon, 16 Nov 2015 14:12:03 +0000"  >&lt;p&gt;Oh yes, thanks. Then please make it 3 beads, layout like in the attached file 003422. Not Lorem Ipsum, but one bead with Hamlet (&lt;a href=&quot;https://de.wikipedia.org/wiki/To_Be_or_Not_to_Be&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://de.wikipedia.org/wiki/To_Be_or_Not_to_Be&lt;/a&gt; ), one with Goethe ( &lt;a href=&quot;https://de.wikipedia.org/wiki/Erlk%C3%B6nig_%28Ballade%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://de.wikipedia.org/wiki/Erlk%C3%B6nig_%28Ballade%29&lt;/a&gt; ) and one with Moli&#232;re ( &lt;a href=&quot;http://clicnet.swarthmore.edu/litterature/classique/moliere/mi/mi.I.1.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://clicnet.swarthmore.edu/litterature/classique/moliere/mi/mi.I.1.html&lt;/a&gt; ) so that the texts are different from each others.&lt;/p&gt;</comment>
                            <comment id="15006709" author="jira-bot" created="Mon, 16 Nov 2015 14:20:40 +0000"  >&lt;p&gt;Commit 1714590 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1714590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1714590&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3110&quot; title=&quot;Extract by beads doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3110&quot;&gt;&lt;del&gt;PDFBOX-3110&lt;/del&gt;&lt;/a&gt;: adjust bead rectangles for flip and cropbox&lt;/p&gt;</comment>
                            <comment id="15006727" author="tilman" created="Mon, 16 Nov 2015 14:39:24 +0000"  >&lt;p&gt;This commit improves the 003422 file, but not fully the file from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3109&quot; title=&quot;DrawPrintTextLocations with incorrect coordinates when cropbox&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3109&quot;&gt;&lt;del&gt;PDFBOX-3109&lt;/del&gt;&lt;/a&gt;. That one has the problem that the bead coordinates are too close to the text. Substracting 1 from the lower left X rectangle coordinate solves this, but I&apos;m not sure if this is a general solution.&lt;/p&gt;</comment>
                            <comment id="15006853" author="msahyoun" created="Mon, 16 Nov 2015 16:18:57 +0000"  >&lt;p&gt;Text with article beads. &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;articles are cross pages&lt;/li&gt;
	&lt;li&gt;articles overlap&lt;/li&gt;
	&lt;li&gt;some beads are a little smaller than the text&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15006898" author="tilman" created="Mon, 16 Nov 2015 16:42:29 +0000"  >&lt;p&gt;Thanks. The &quot;some beads are a little smaller than the text&quot; doesn&apos;t seem to make trouble, because the (0,0) glyph coordinate is inside. Cross page extraction isn&apos;t supported by PDFBox yet because it works page by page - that is something for a far future. But your test case shows nicely that the patch improves things.&lt;/p&gt;</comment>
                            <comment id="15006902" author="jira-bot" created="Mon, 16 Nov 2015 16:46:18 +0000"  >&lt;p&gt;Commit 1714630 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1714630&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1714630&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3110&quot; title=&quot;Extract by beads doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3110&quot;&gt;&lt;del&gt;PDFBOX-3110&lt;/del&gt;&lt;/a&gt;: add test files by Maruan Sahyoun&lt;/p&gt;</comment>
                            <comment id="15009182" author="jira-bot" created="Tue, 17 Nov 2015 18:23:04 +0000"  >&lt;p&gt;Commit 1714845 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1714845&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1714845&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3110&quot; title=&quot;Extract by beads doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3110&quot;&gt;&lt;del&gt;PDFBOX-3110&lt;/del&gt;&lt;/a&gt;: optimize bead rectangle handling&lt;/p&gt;</comment>
                            <comment id="15009184" author="jira-bot" created="Tue, 17 Nov 2015 18:24:18 +0000"  >&lt;p&gt;Commit 1714846 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1714846&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1714846&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3110&quot; title=&quot;Extract by beads doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3110&quot;&gt;&lt;del&gt;PDFBOX-3110&lt;/del&gt;&lt;/a&gt;: add copy of test files from Maruan Sahyoun with cropbox&lt;/p&gt;</comment>
                            <comment id="15009194" author="tilman" created="Tue, 17 Nov 2015 18:30:03 +0000"  >&lt;p&gt;Text output is identical to non-cropbox file with current code, without the cropbox adjustment code it is a mess.&lt;/p&gt;</comment>
                            <comment id="15009196" author="tilman" created="Tue, 17 Nov 2015 18:31:38 +0000"  >&lt;p&gt;The missing newline problem can be seen at many places, but the most obvious is where the Goethe text ends and the Moli&#232;re text starts:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In seinen Armen das Kind war tot.ARGAN, seul dans sa chambre, assis, une table devant lui, compte des parties d&apos;apothicaire avec &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The solution would be to set articleEnd to LINE_SEPARATOR, but 1) this would result in two newlines at the end; 2) the current code specifically does this when &quot;addMoreFormatting&quot; is set so it means that it wasn&apos;t wanted at the time it was implemented so I&apos;ll just do nothing for now, unless others see it differently.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;tallison@apache.org&lt;/a&gt; please check whether you like the output in TIKA with Maruans poem test file when using the latest PDFBox trunk. Search your output for ARGAN, it should be separated from the previous text.&lt;/p&gt;</comment>
                            <comment id="15009291" author="jira-bot" created="Tue, 17 Nov 2015 19:12:01 +0000"  >&lt;p&gt;Commit 1714852 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1714852&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1714852&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3110&quot; title=&quot;Extract by beads doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3110&quot;&gt;&lt;del&gt;PDFBOX-3110&lt;/del&gt;&lt;/a&gt;: fix handling of beads as in 2.0 + test files by Maruan Sahyoun&lt;/p&gt;</comment>
                            <comment id="15011383" author="jira-bot" created="Wed, 18 Nov 2015 16:51:14 +0000"  >&lt;p&gt;Commit 1715020 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1715020&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1715020&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3110&quot; title=&quot;Extract by beads doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3110&quot;&gt;&lt;del&gt;PDFBOX-3110&lt;/del&gt;&lt;/a&gt;: split large method&lt;/p&gt;</comment>
                            <comment id="15011384" author="jira-bot" created="Wed, 18 Nov 2015 16:51:42 +0000"  >&lt;p&gt;Commit 1715021 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1715021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1715021&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3110&quot; title=&quot;Extract by beads doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3110&quot;&gt;&lt;del&gt;PDFBOX-3110&lt;/del&gt;&lt;/a&gt;: split large method&lt;/p&gt;</comment>
                            <comment id="15013606" author="tallison@mitre.org" created="Thu, 19 Nov 2015 14:27:23 +0000"  >&lt;p&gt;Looks good:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;In seinen Armen das Kind war tot.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;ARGAN, seul dans sa chambre, assis,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12772495" name="003422-1-bad.txt" size="5575" author="tilman" created="Mon, 16 Nov 2015 14:17:09 +0000"/>
                            <attachment id="12772496" name="003422-1-good.txt" size="5493" author="tilman" created="Mon, 16 Nov 2015 14:17:09 +0000"/>
                            <attachment id="12772493" name="003422-1.pdf" size="140863" author="tilman" created="Mon, 16 Nov 2015 14:12:48 +0000"/>
                            <attachment id="12772494" name="003422-marked-1.png" size="117925" author="tilman" created="Mon, 16 Nov 2015 14:12:48 +0000"/>
                            <attachment id="12772520" name="PDFBOX-3110-poems-beads-bad.txt" size="5586" author="tilman" created="Mon, 16 Nov 2015 16:38:20 +0000"/>
                            <attachment id="12772519" name="PDFBOX-3110-poems-beads-good.txt" size="5576" author="tilman" created="Mon, 16 Nov 2015 16:38:20 +0000"/>
                            <attachment id="12772517" name="poems-marked-1.png" size="668864" author="tilman" created="Mon, 16 Nov 2015 16:38:20 +0000"/>
                            <attachment id="12772518" name="poems-marked-2.png" size="447668" author="tilman" created="Mon, 16 Nov 2015 16:38:20 +0000"/>
                            <attachment id="12772510" name="poems.pdf" size="45598" author="msahyoun" created="Mon, 16 Nov 2015 16:18:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ofy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>