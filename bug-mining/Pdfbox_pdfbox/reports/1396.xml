<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:02:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3203] Fractional font sizes are reported scaled</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3203</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Non-integer font sizes are apparently reported by PDFBox scaled by a factor of 10. For example, a font size of &quot;32.1&quot; comes out as 321.&lt;/p&gt;</description>
                <environment>Mac OS X</environment>
        <key id="12933158">PDFBOX-3203</key>
            <summary>Fractional font sizes are reported scaled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="dirkgr">Dirk Groeneveld</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Thu, 21 Jan 2016 20:06:29 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:32 +0000</updated>
                            <resolved>Fri, 22 Jan 2016 11:11:10 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15111209" author="dirkgr" created="Thu, 21 Jan 2016 20:07:36 +0000"  >&lt;p&gt;In this file, the first word of the title comes out with a font size of 321.&lt;/p&gt;</comment>
                            <comment id="15111214" author="dirkgr" created="Thu, 21 Jan 2016 20:10:43 +0000"  >&lt;p&gt;Another example with the same problem. Title has a font size of 321.&lt;/p&gt;</comment>
                            <comment id="15111220" author="tilman" created="Thu, 21 Jan 2016 20:15:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;Non-integer font sizes are apparently reported by PDFBox scaled by a factor of 10.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Could you please share this report with us, so that we know what you mean?&lt;/p&gt;</comment>
                            <comment id="15111347" author="dirkgr" created="Thu, 21 Jan 2016 21:44:23 +0000"  >&lt;p&gt;I&apos;m not sure what you mean by &quot;report&quot;, but this is what I mean: For the two attached PDFs, I get a TextPosition object for the words in the title. When I call getFontSizeInPt() on that TextPosition, it comes back with 321.&lt;/p&gt;</comment>
                            <comment id="15111357" author="dirkgr" created="Thu, 21 Jan 2016 21:50:49 +0000"  >&lt;p&gt;The instances of TextPosition come from PDFTextStripper::writeString().&lt;/p&gt;

&lt;p&gt;The debugger shows that TextPosition.fontSize is 17.9328, and TextPosition.fontSizePt is 321.&lt;/p&gt;</comment>
                            <comment id="15111374" author="tilman" created="Thu, 21 Jan 2016 21:58:16 +0000"  >&lt;p&gt;You claim that the font size is 32.1. But here&apos;s the content stream of the first file:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/Part &amp;lt;&amp;lt; /MCID 0 &amp;gt;&amp;gt; BDC
  BT
    /T1_0 17.933 Tf
    130.407 706.689 Td
    [ (An) -278 (Ar) 20 (c) 10 (hitecture) -278 (f) 20 (or) -278 (P) 30 (arallel) -278 (T) 80 (opic) -278 (Models) ] TJ
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So the font size is 17.933, not 32.1. And here&apos;s the output of the PrintTextLocations tool:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[130.407,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=12.947632]A
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[143.35463,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=10.957062]n
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[159.29706,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=12.947632]A
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[172.24469,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=6.975937]r
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[178.86197,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=9.970749]c
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[188.65338,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=10.957062]h
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[199.61044,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=4.985367]i
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[204.59581,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=5.971695]t
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[210.5675,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=9.970749]e
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[220.53825,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=9.970749]c
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[230.509,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=5.971695]t
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[236.4807,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=10.957062]u
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[247.43776,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=6.975937]r
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[254.4137,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=9.970734]e
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And here&apos;s the javadoc of the method you mention - note the second sentence!&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * This will get the font size in pt. To get &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; size we have to multiply the pdf-fontsize
     * and the scaling from the textmatrix
     *
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; The font size in pt.
     */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15111393" author="tilman" created="Thu, 21 Jan 2016 22:07:59 +0000"  >&lt;p&gt;Ah, I got it:&lt;/p&gt;

&lt;p&gt;2.0:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[130.407,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=12.947632]A
text.getFontSizeInPt(): 321.0
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[143.35463,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=10.957062]n
text.getFontSizeInPt(): 321.0
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[159.29706,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=12.947632]A
text.getFontSizeInPt(): 321.0
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[172.24469,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=6.975937]r
text.getFontSizeInPt(): 321.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;1.8:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[130.407,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=10.593328 width=12.947632]A
text.getFontSizeInPt(): 17.0
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[143.35463,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=10.593328 width=10.957062]n
text.getFontSizeInPt(): 17.0
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[159.29706,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=10.593328 width=12.947632]A
text.getFontSizeInPt(): 17.0
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[172.24469,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=10.593328 width=6.975937]r
text.getFontSizeInPt(): 17.0
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[178.86197,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=10.593328 width=9.970749]c
text.getFontSizeInPt(): 17.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15111401" author="tilman" created="Thu, 21 Jan 2016 22:12:55 +0000"  >&lt;p&gt;Looks like the font size is multiplied with itself in 2.0.&lt;/p&gt;</comment>
                            <comment id="15111414" author="dirkgr" created="Thu, 21 Jan 2016 22:20:03 +0000"  >&lt;p&gt;I read up a bit on what a text matrix is. Let me see if I understand this correctly: Whatever tool they used to create this PDF, they set an enormous font size, and then use text matrix to scale it down to something that fits on a page. In the content stream, it comes out the other way, where the font size they set is 17.933, and the text matrix scales it up to 321.&lt;/p&gt;

&lt;p&gt;As a consumer of the PDF, I don&apos;t care about how they created it and how it&apos;s scaled. To get the font size in points in the final output, I have to use fontSize, not fontSizePt. Correct?&lt;/p&gt;</comment>
                            <comment id="15111498" author="dirkgr" created="Thu, 21 Jan 2016 22:24:17 +0000"  >&lt;p&gt;Given your other comment, I assume what I said here is incorrect.&lt;/p&gt;</comment>
                            <comment id="15111509" author="jira-bot" created="Thu, 21 Jan 2016 22:29:27 +0000"  >&lt;p&gt;Commit 1726121 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1726121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1726121&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3203&quot; title=&quot;Fractional font sizes are reported scaled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3203&quot;&gt;&lt;del&gt;PDFBOX-3203&lt;/del&gt;&lt;/a&gt;: use text matrix, not text rendering matrix for fontSizeInPt parameter&lt;/p&gt;</comment>
                            <comment id="15111521" author="tilman" created="Thu, 21 Jan 2016 22:36:29 +0000"  >&lt;p&gt;Output now:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[130.407,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=12.947632]A
text.getFontSizeInPt(): 17.0
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[143.35463,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=10.957062]n
text.getFontSizeInPt(): 17.0
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[159.29706,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=12.947632]A
text.getFontSizeInPt(): 17.0
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[172.24469,85.310974 fs=17.933 xscale=17.933 height=11.261925 space=4.9853745 width=6.975937]r
text.getFontSizeInPt(): 17.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15111533" author="tilman" created="Thu, 21 Jan 2016 22:43:28 +0000"  >&lt;p&gt;It all depends what you want. If you want the number that is used for &quot;Tf&quot;, then call getFontSize(). If you want to know the actual font size (which may be scaled up or down through &quot;cm&quot; or &quot;Tm&quot;), you&apos;ll need other methods. I suggest you also look at the DrawPrintTextLocations example.&lt;/p&gt;

&lt;p&gt;Some PDF creators use a Tf value of 1 and them use the Tm value, or the cm scaling value to adjust the size.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12783663" name="senellart10.pdf" size="585469" author="dirkgr" created="Thu, 21 Jan 2016 20:10:43 +0000"/>
                            <attachment id="12783662" name="smola10.pdf" size="859130" author="dirkgr" created="Thu, 21 Jan 2016 20:07:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 43 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rtaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>