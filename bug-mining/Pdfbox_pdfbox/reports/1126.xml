<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:00:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2830] Can&apos;t draw color border around a PDTextBox + create example</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2830</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;There&apos;s a thread &quot;Setting a border color on a PDTextBox&quot; in the user mailing list. This relates to version 1.8.*, but I wanted to create an example for 2.0. After doing this for 2.0 with this code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PDAppearanceCharacteristicsDictionary fieldAppearance = 
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDAppearanceCharacteristicsDictionary(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; COSDictionary());
        PDColor green = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDColor(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;[] { 0, 1, 0 }, PDDeviceRGB.INSTANCE);
        fieldAppearance.setBorderColour(green);
        widget.setAppearanceCharacteristics(fieldAppearance);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it didn&apos;t work. The reason is this in the PDF:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;5 0 obj
&amp;lt;&amp;lt;
/FT /Tx
/T (SampleField)
/Type /Annot
/Subtype /Widget
/Rect [50.0 750.0 250.0 800.0]
/MK 7 0 R
/V (English form contents)
/AP 8 0 R
&amp;gt;&amp;gt;
endobj
6 0 obj
&amp;lt;&amp;lt;
/Font 9 0 R
&amp;gt;&amp;gt;
endobj
7 0 obj
&amp;lt;&amp;lt;
/BC [0.0 1.0 0.0 &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]  &amp;lt;===================
&amp;gt;&amp;gt;
endobj
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The /BC color array has an extra null element which comes from a &quot;patternName&quot; in PDColor:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; COSArray toCOSArray()
    {
        COSArray array = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; COSArray();
        array.setFloatArray(components);
        array.add(patternName);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; array;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Removing it in the PDF brings a &quot;good&quot; file. I believe this is a regression that came from changing PDGamma to PDColor some time ago in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2629&quot; title=&quot;PDAnnotation should not use PDGamma for colors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2629&quot;&gt;&lt;del&gt;PDFBOX-2629&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12837502">PDFBOX-2830</key>
            <summary>Can&apos;t draw color border around a PDTextBox + create example</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Fri, 12 Jun 2015 19:55:02 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:55 +0000</updated>
                            <resolved>Sat, 13 Jun 2015 11:49:58 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>AcroForm</component>
                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14583977" author="jira-bot" created="Fri, 12 Jun 2015 19:56:34 +0000"  >&lt;p&gt;Commit 1685151 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1685151&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1685151&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2830&quot; title=&quot;Can&amp;#39;t draw color border around a PDTextBox + create example&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2830&quot;&gt;&lt;del&gt;PDFBOX-2830&lt;/del&gt;&lt;/a&gt;: add color border to example&lt;/p&gt;</comment>
                            <comment id="14584029" author="tilman" created="Fri, 12 Jun 2015 20:31:29 +0000"  >&lt;p&gt;toCOSArray() is used in:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;PDBoxStyle.setGuideLineColor()&lt;/li&gt;
	&lt;li&gt;PDAnnotation.setColor()&lt;/li&gt;
	&lt;li&gt;PDAnnotationLine.setInteriorColor()&lt;/li&gt;
	&lt;li&gt;PDAnnotationSquareCircle.setInteriorColor()&lt;/li&gt;
	&lt;li&gt;PDAppearanceCharacteristicsDictionary.setBorderColour() and setBackground()&lt;/li&gt;
	&lt;li&gt;PDOutlineItem.setTextColor()&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14584569" author="tilman" created="Sat, 13 Jun 2015 11:28:57 +0000"  >&lt;p&gt;I also looked at version 1654337, which is the one before the &quot;gamma&quot; change. There are only two uses of PDDcolor.toCOSArray():&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;PDOutlineItem: for /C, it doesn&apos;t require the extra aray element&lt;/li&gt;
	&lt;li&gt;PDBoxStyle: for /C, it doesn&apos;t require the extra array element&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I also found out when the extra element is used: it is used to specify the color of an uncoloured tiling pattern in content streams, like this: &lt;tt&gt;0.30 0.75 0.21 /P2 scn&lt;/tt&gt;. However this is only relevant for the constructor. All the uses mentioned earlier allow only the Gray, RGB and CMYK. The extra array element is not used in PDPageContentStream.setStrokingColor(), or in setNonStrokingColor(), intead the color components are used with color.getComponents() and then the pattern (if needed) is used with color.getPatternName().&lt;/p&gt;

&lt;p&gt;Thus I&apos;m removing &quot;array.add(patternName);&quot; from toCOSArray().&lt;/p&gt;</comment>
                            <comment id="14584571" author="jira-bot" created="Sat, 13 Jun 2015 11:33:07 +0000"  >&lt;p&gt;Commit 1685240 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1685240&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1685240&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2830&quot; title=&quot;Can&amp;#39;t draw color border around a PDTextBox + create example&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2830&quot;&gt;&lt;del&gt;PDFBOX-2830&lt;/del&gt;&lt;/a&gt;: don&apos;t return pattern name in toCOSArray()&lt;/p&gt;</comment>
                            <comment id="14584575" author="tilman" created="Sat, 13 Jun 2015 11:49:03 +0000"  >&lt;p&gt;Form generated after the bug fix.&lt;/p&gt;</comment>
                            <comment id="14585186" author="jahewson" created="Sun, 14 Jun 2015 18:40:34 +0000"  >&lt;p&gt;Hmm... the pattern name &lt;em&gt;is&lt;/em&gt; the last element of a color array in a PDF, so it&apos;s not correct for toCOSArray() to remove it. The mistake was adding it when it is null, so instead a null-check is needs to be placed around that last line.&lt;/p&gt;</comment>
                            <comment id="14585188" author="jira-bot" created="Sun, 14 Jun 2015 18:44:07 +0000"  >&lt;p&gt;Commit 1685435 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1685435&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1685435&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2830&quot; title=&quot;Can&amp;#39;t draw color border around a PDTextBox + create example&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2830&quot;&gt;&lt;del&gt;PDFBOX-2830&lt;/del&gt;&lt;/a&gt;: return pattern name in toCOSArray() only if non null&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12769722">PDFBOX-2629</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12739416" name="exampleForm.pdf" size="217316" author="tilman" created="Sat, 13 Jun 2015 11:49:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fzon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>