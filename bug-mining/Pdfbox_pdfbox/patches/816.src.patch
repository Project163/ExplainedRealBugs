diff --git a/pdfbox/src/main/java/org/apache/pdfbox/contentstream/PDFStreamEngine.java b/pdfbox/src/main/java/org/apache/pdfbox/contentstream/PDFStreamEngine.java
index e084a0dd56..b87bddf618 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/contentstream/PDFStreamEngine.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/contentstream/PDFStreamEngine.java
@@ -478,6 +478,12 @@ public class PDFStreamEngine
         {
             resources = currentPage.getResources();
         }
+
+        // resources are required in PDF
+        if (resources == null)
+        {
+            resources = new PDResources();
+        }
         return parentResources;
     }
 
diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/PDResources.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/PDResources.java
index 4d12ccb9f4..63ca6c974a 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/PDResources.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/PDResources.java
@@ -108,18 +108,30 @@ public final class PDResources implements COSObjectable
             name = COSName.DEFAULT_RGB;
         }
         else if (name.equals(COSName.DEVICEGRAY) &&
-                 get(COSName.COLORSPACE, COSName.DEFAULT_RGB) != null)
+                 get(COSName.COLORSPACE, COSName.DEFAULT_GRAY) != null)
         {
             name = COSName.DEFAULT_GRAY;
         }
+        else if (name.equals(COSName.DEVICECMYK) ||
+                 name.equals(COSName.DEVICERGB) ||
+                 name.equals(COSName.DEVICEGRAY))
+        {
+            // built-in device color spaces
+            return PDColorSpace.create(name, this);
+        }
 
         COSBase object = get(COSName.COLORSPACE, name);
-        if (object == null)
+        if (object == null &&
+            name.equals(COSName.DEVICECMYK) ||
+            name.equals(COSName.DEVICERGB) ||
+            name.equals(COSName.DEVICEGRAY))
         {
+            // the named color space does not exist, but it's built-in
             return PDColorSpace.create(name, this);
         }
         else
         {
+            // finally handle named color spaces
             return PDColorSpace.create(object, this);
         }
     }
