diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/font/PDType1CFont.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/font/PDType1CFont.java
index c172266580..da6fb6511c 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/font/PDType1CFont.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/font/PDType1CFont.java
@@ -321,7 +321,12 @@ public class PDType1CFont extends PDSimpleFont implements PDVectorFont
         float height;
         if (!glyphHeights.containsKey(name))
         {
-            height = (float)cffFont.getType1CharString(name).getBounds().getHeight(); // todo: cffFont could be null
+            if (cffFont == null)
+            {
+                LOG.warn("No embedded CFF font, returning 0");
+                return 0;
+            }
+            height = (float) cffFont.getType1CharString(name).getBounds().getHeight();
             glyphHeights.put(name, height);
         }
         else
@@ -359,6 +364,11 @@ public class PDType1CFont extends PDSimpleFont implements PDVectorFont
     @Override
     public float getStringWidth(String string) throws IOException
     {
+        if (cffFont == null)
+        {
+            LOG.warn("No embedded CFF font, returning 0");
+            return 0;
+        }
         float width = 0;
         for (int i = 0; i < string.length(); i++)
         {
diff --git a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/PDFontTest.java b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/PDFontTest.java
index 3cb181ee8f..090c60a852 100644
--- a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/PDFontTest.java
+++ b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/PDFontTest.java
@@ -248,6 +248,25 @@ class PDFontTest
         assertEquals("Full embedding of TrueType font collections not supported", ex.getMessage());
     }
 
+    /**
+     * Test using broken Type1C font.
+     *
+     * @throws IOException 
+     */
+    @Test
+    void testPDFox5048() throws IOException
+    {
+        try (InputStream is = new URL("https://issues.apache.org/jira/secure/attachment/13017227/stringwidth.pdf").openStream();
+             PDDocument doc = Loader.loadPDF(is))
+        {
+            PDPage page = doc.getPage(0);
+            PDFont font = page.getResources().getFont(COSName.getPDFName("F70"));
+            assertTrue(font.isDamaged());
+            assertEquals(0, font.getHeight(0));
+            assertEquals(0, font.getStringWidth("Pa"));
+        }
+    }
+
     private void testPDFBox3826checkFonts(byte[] byteArray, File fontFile) throws IOException
     {
         try (PDDocument doc = Loader.loadPDF(byteArray))
