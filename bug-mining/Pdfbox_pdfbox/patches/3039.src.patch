diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDColorSpace.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDColorSpace.java
index dfc1ac271b..6981b4091a 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDColorSpace.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDColorSpace.java
@@ -181,7 +181,7 @@ public abstract class PDColorSpace implements COSObjectable
             }
             else if (name == COSName.DEVICEN)
             {
-                return new PDDeviceN(array);
+                return new PDDeviceN(array, resources);
             }
             else if (name == COSName.INDEXED)
             {
@@ -189,7 +189,7 @@ public abstract class PDColorSpace implements COSObjectable
             }
             else if (name == COSName.SEPARATION)
             {
-                return new PDSeparation(array);
+                return new PDSeparation(array, resources);
             }
             else if (name == COSName.ICCBASED)
             {
diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDDeviceN.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDDeviceN.java
index dbae00411b..7afe328fe7 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDDeviceN.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDDeviceN.java
@@ -34,6 +34,7 @@ import org.apache.pdfbox.cos.COSBase;
 import org.apache.pdfbox.cos.COSDictionary;
 import org.apache.pdfbox.cos.COSName;
 import org.apache.pdfbox.cos.COSNull;
+import org.apache.pdfbox.pdmodel.PDResources;
 import org.apache.pdfbox.pdmodel.common.function.PDFunction;
 
 /**
@@ -83,20 +84,21 @@ public class PDDeviceN extends PDSpecialColorSpace
      * Creates a new DeviceN color space from the given COS array.
      * 
      * @param deviceN an array containing the color space information
+     * @param resources resources, can be null.
      * 
      * @throws IOException if the colorspace could not be created
      */
-    public PDDeviceN(COSArray deviceN) throws IOException
+    public PDDeviceN(COSArray deviceN, PDResources resources) throws IOException
     {
         array = deviceN;
-        alternateColorSpace = PDColorSpace.create(array.getObject(ALTERNATE_CS));
+        alternateColorSpace = PDColorSpace.create(array.getObject(ALTERNATE_CS), resources);
         tintTransform = PDFunction.create(array.getObject(TINT_TRANSFORM));
 
         if (array.size() > DEVICEN_ATTRIBUTES)
         {
             attributes = new PDDeviceNAttributes((COSDictionary)array.getObject(DEVICEN_ATTRIBUTES));
         }
-        initColorConversionCache();
+        initColorConversionCache(resources);
 
         // set initial color space
         int n = getNumberOfComponents();
@@ -105,8 +107,20 @@ public class PDDeviceN extends PDSpecialColorSpace
         initialColor = new PDColor(initial, this);
     }
 
+    /**
+     * Creates a new DeviceN color space from the given COS array.
+     * 
+     * @param deviceN an array containing the color space information
+     * 
+     * @throws IOException if the colorspace could not be created
+     */
+    public PDDeviceN(COSArray deviceN) throws IOException
+    {
+        this(deviceN, null);
+    }
+
     // initializes the color conversion cache
-    private void initColorConversionCache() throws IOException
+    private void initColorConversionCache(PDResources resources) throws IOException
     {
         // there's nothing to cache for non-attribute spaces
         if (attributes == null)
@@ -124,7 +138,7 @@ public class PDDeviceN extends PDSpecialColorSpace
         {
             List<String> components = attributes.getProcess().getComponents();
 
-            // map each colorant to the corresponding process component (if any)
+            // map each colorant name to the corresponding process component name (if any)
             for (int c = 0; c < numColorants; c++)
             {
                 colorantToComponent[c] = components.indexOf(colorantNames.get(c));
@@ -145,7 +159,7 @@ public class PDDeviceN extends PDSpecialColorSpace
         spotColorSpaces = new PDSeparation[numColorants];
 
         // spot color spaces
-        Map<String, PDSeparation> spotColorants = attributes.getColorants();
+        Map<String, PDSeparation> spotColorants = attributes.getColorants(resources);
 
         // map each colorant to the corresponding spot color space
         for (int c = 0; c < numColorants; c++)
diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDDeviceNAttributes.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDDeviceNAttributes.java
index 5c0f35d526..a49815421f 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDDeviceNAttributes.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDDeviceNAttributes.java
@@ -27,6 +27,7 @@ import java.util.Map;
 
 import org.apache.logging.log4j.Logger;
 import org.apache.logging.log4j.LogManager;
+import org.apache.pdfbox.pdmodel.PDResources;
 
 /**
  * Contains additional information about the components of colour space.
@@ -72,10 +73,11 @@ public final class PDDeviceNAttributes
 
     /**
      * Returns a map of colorants and their associated Separation color space.
+     * @param resources resources, can be null.
      * @return map of colorants to color spaces, never null.
      * @throws IOException If there is an error reading a color space
      */
-    public Map<String, PDSeparation> getColorants() throws IOException
+    public Map<String, PDSeparation> getColorants(PDResources resources) throws IOException
     {
         Map<String,PDSeparation> actuals = new HashMap<>();
         COSDictionary colorants = dictionary.getCOSDictionary(COSName.COLORANTS);
@@ -89,12 +91,22 @@ public final class PDDeviceNAttributes
             for (COSName name : colorants.keySet())
             {
                 COSBase value = colorants.getDictionaryObject(name);
-                actuals.put(name.getName(), (PDSeparation) PDColorSpace.create(value));
+                actuals.put(name.getName(), (PDSeparation) PDColorSpace.create(value, resources));
             }
         }
         return new COSDictionaryMap<>(actuals, colorants);
     }
 
+    /**
+     * Returns a map of colorants and their associated Separation color space.
+     * @return map of colorants to color spaces, never null.
+     * @throws IOException If there is an error reading a color space
+     */
+    public Map<String, PDSeparation> getColorants() throws IOException
+    {
+        return getColorants(null);
+    }
+
     /**
      * Returns the DeviceN Process Dictionary, or null if it is missing.
      * @return the DeviceN Process Dictionary, or null if it is missing.
diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDSeparation.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDSeparation.java
index 95036384ae..f97b0c508f 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDSeparation.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDSeparation.java
@@ -30,6 +30,7 @@ import org.apache.pdfbox.cos.COSArray;
 import org.apache.pdfbox.cos.COSBase;
 import org.apache.pdfbox.cos.COSName;
 import org.apache.pdfbox.cos.COSNull;
+import org.apache.pdfbox.pdmodel.PDResources;
 import org.apache.pdfbox.pdmodel.common.function.PDFunction;
 
 /**
@@ -78,12 +79,13 @@ public class PDSeparation extends PDSpecialColorSpace
     /**
      * Creates a new Separation color space from a PDF color space array.
      * @param separation an array containing all separation information.
+     * @param resources resources, can be null.
      * @throws IOException if the color space or the function could not be created.
      */
-    public PDSeparation(COSArray separation) throws IOException
+    public PDSeparation(COSArray separation, PDResources resources) throws IOException
     {
         array = separation;
-        alternateColorSpace = PDColorSpace.create(array.getObject(ALTERNATE_CS));
+        alternateColorSpace = PDColorSpace.create(array.getObject(ALTERNATE_CS), resources);
         tintTransform = PDFunction.create(array.getObject(TINT_TRANSFORM));
         int numberOfOutputParameters = tintTransform.getNumberOfOutputParameters();
         if (numberOfOutputParameters > 0 &&
@@ -95,6 +97,16 @@ public class PDSeparation extends PDSpecialColorSpace
         }
     }
 
+    /**
+     * Creates a new Separation color space from a PDF color space array.
+     * @param separation an array containing all separation information.
+     * @throws IOException if the color space or the function could not be created.
+     */
+    public PDSeparation(COSArray separation) throws IOException
+    {
+        this(separation, null);
+    }
+
     @Override
     public String getName()
     {
