diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/form/PDAcroForm.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/form/PDAcroForm.java
index e4cfef2bce..594cd901f5 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/form/PDAcroForm.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/form/PDAcroForm.java
@@ -347,6 +347,10 @@ public final class PDAcroForm implements COSObjectable
                         transformed = true;
                     }
 
+                    Matrix m = appearanceStream.getMatrix();
+                    int angle = (int) Math.round(Math.toDegrees(Math.atan2(m.getShearY(), m.getScaleY())));
+                    int rotation = (angle + 360) % 360;
+
                     if (needsScaling)
                     {
                         PDRectangle bbox = appearanceStream.getBBox();
@@ -354,7 +358,7 @@ public final class PDAcroForm implements COSObjectable
 
                         float xScale;
                         float yScale;
-                        if (page.getRotation() == 90 || page.getRotation() == 270)
+                        if (rotation == 90 || rotation == 270)
                         {
                             xScale = fieldRect.getWidth() / bbox.getHeight();
                             yScale = fieldRect.getHeight() / bbox.getWidth();
diff --git a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/form/PDAcroFormFlattenTest.java b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/form/PDAcroFormFlattenTest.java
index 988f9f5eaa..7495744d9d 100644
--- a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/form/PDAcroFormFlattenTest.java
+++ b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/form/PDAcroFormFlattenTest.java
@@ -245,6 +245,18 @@ public class PDAcroFormFlattenTest {
         flattenAndCompare(sourceUrl, targetFileName);
     }
 
+    /**
+     * PDFBOX-4693: page is not rotated, but the appearance stream is.
+     */
+    // @Test
+    public void testFlattenPDFBox4693() throws IOException
+    {
+        String sourceUrl = "https://issues.apache.org/jira/secure/attachment/12986337/stenotypeTest-3_rotate_no_flatten.pdf";
+        String targetFileName = "PDFBOX-4693-filled.pdf";
+
+        flattenAndCompare(sourceUrl, targetFileName);
+    }
+
     /*
      * Flatten and compare with generated image samples.
      */
