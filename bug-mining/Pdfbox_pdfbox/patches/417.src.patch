diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdfviewer/PageDrawer.java b/pdfbox/src/main/java/org/apache/pdfbox/pdfviewer/PageDrawer.java
index 65cd4a8c98..b026e15165 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdfviewer/PageDrawer.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdfviewer/PageDrawer.java
@@ -66,8 +66,6 @@ import org.apache.pdfbox.pdmodel.font.PDType1Font;
 import org.apache.pdfbox.pdmodel.font.PDType3Font;
 import org.apache.pdfbox.pdmodel.graphics.PDGraphicsState;
 import org.apache.pdfbox.pdmodel.graphics.PDShading;
-import org.apache.pdfbox.pdmodel.graphics.color.PDColorSpace;
-import org.apache.pdfbox.pdmodel.graphics.color.PDPattern;
 import org.apache.pdfbox.pdmodel.graphics.shading.AxialShadingPaint;
 import org.apache.pdfbox.pdmodel.graphics.shading.PDShadingResources;
 import org.apache.pdfbox.pdmodel.graphics.shading.PDShadingType2;
@@ -102,6 +100,8 @@ public class PageDrawer extends PDFStreamEngine
 
     private GeneralPath linePath = new GeneralPath();
 
+    private BasicStroke stroke = null;
+
     private Map<PDFont, Glyph2D> fontGlyph2D = new HashMap<PDFont, Glyph2D>();
     private Map<PDFont, Font> awtFonts = new HashMap<PDFont, Font>();
 
@@ -654,7 +654,7 @@ public class PageDrawer extends PDFStreamEngine
      */
     public void setStroke(BasicStroke newStroke)
     {
-        getGraphics().setStroke(newStroke);
+        stroke = newStroke;
     }
 
     /**
@@ -665,7 +665,50 @@ public class PageDrawer extends PDFStreamEngine
      */
     public BasicStroke getStroke()
     {
-        return (BasicStroke) getGraphics().getStroke();
+        return stroke;
+    }
+
+    /**
+     * Create a new stroke based on the current ctm and the current stroke.
+     * 
+     * @return the transformed stroke
+     */
+    private BasicStroke calculateStroke()
+    {
+        float lineWidth = (float)getGraphicsState().getLineWidth();
+        Matrix ctm = getGraphicsState().getCurrentTransformationMatrix();
+        if (ctm != null && ctm.getXScale() > 0)
+        {
+            lineWidth = lineWidth * ctm.getXScale();
+        }
+        if (lineWidth < 0.25)
+        {
+            lineWidth = 0.25f;
+        }
+        BasicStroke currentStroke = null;
+        if (stroke == null)
+        {
+            currentStroke = new BasicStroke(lineWidth);
+        }
+        else
+        {
+            float phaseStart = stroke.getDashPhase();
+            float[] dashArray = stroke.getDashArray();
+            if (dashArray != null)
+            {
+                if (ctm != null && ctm.getXScale() > 0)
+                {
+                    for (int i = 0; i < dashArray.length; ++i)
+                    {
+                        dashArray[i] *= ctm.getXScale();
+                    }
+                }
+                phaseStart *= ctm.getXScale();
+            }
+            currentStroke = new BasicStroke(lineWidth, stroke.getEndCap(), stroke.getLineJoin(),
+                    stroke.getMiterLimit(), dashArray, phaseStart);
+        }
+        return currentStroke;
     }
 
     /**
@@ -684,6 +727,7 @@ public class PageDrawer extends PDFStreamEngine
             strokingPaint = Color.WHITE;
         }
         graphics.setPaint(strokingPaint);
+        graphics.setStroke(calculateStroke());
         graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_OFF);
         graphics.setClip(getGraphicsState().getCurrentClippingPath());
         GeneralPath path = getLinePath();
diff --git a/pdfbox/src/main/java/org/apache/pdfbox/util/operator/pagedrawer/StrokePath.java b/pdfbox/src/main/java/org/apache/pdfbox/util/operator/pagedrawer/StrokePath.java
index d6bf57dcf3..affd8b7a23 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/util/operator/pagedrawer/StrokePath.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/util/operator/pagedrawer/StrokePath.java
@@ -18,31 +18,22 @@ package org.apache.pdfbox.util.operator.pagedrawer;
 
 import java.util.List;
 
-import org.apache.commons.logging.Log;
-import org.apache.commons.logging.LogFactory;
 import org.apache.pdfbox.cos.COSBase;
 import org.apache.pdfbox.pdfviewer.PageDrawer;
-import org.apache.pdfbox.util.Matrix;
 import org.apache.pdfbox.util.PDFOperator;
 import org.apache.pdfbox.util.operator.OperatorProcessor;
 
-import java.awt.BasicStroke;
 import java.io.IOException;
 
 /**
  * Implementation of content stream operator for page drawer.
  *
  * @author <a href="mailto:ben@benlitchfield.com">Ben Litchfield</a>
- * @version $Revision: 1.3 $
+ * 
  */
 public class StrokePath extends OperatorProcessor
 {
 
-    /**
-     * Log instance.
-     */
-    private static final Log log = LogFactory.getLog(StrokePath.class);
-
     /**
      * S stroke the path.
      *
@@ -53,51 +44,6 @@ public class StrokePath extends OperatorProcessor
      */
     public void process(PDFOperator operator, List<COSBase> arguments) throws IOException
     {
-        ///dwilson 3/19/07 refactor
-        try
-        {
-            PageDrawer drawer = (PageDrawer) context;
-    
-            float lineWidth = (float) context.getGraphicsState().getLineWidth();
-            Matrix ctm = context.getGraphicsState().getCurrentTransformationMatrix();
-            if (ctm != null && ctm.getXScale() > 0)
-            {
-                lineWidth = lineWidth * ctm.getXScale();
-            }
-            
-            if (lineWidth < 0.25)
-            {
-                lineWidth = 0.25f;
-            }
-
-            BasicStroke stroke = drawer.getStroke();
-            if (stroke == null)
-            {
-                drawer.setStroke(new BasicStroke(lineWidth));
-            }
-            else
-            {
-                float phaseStart = stroke.getDashPhase();
-                float[] dashArray = stroke.getDashArray();
-                if (dashArray != null)
-                {
-                    if (ctm != null && ctm.getXScale() > 0)
-                    {
-                        for (int i = 0; i < dashArray.length; ++i)
-                        {
-                            dashArray[i] *= ctm.getXScale();
-                        }
-                    }
-                    phaseStart *= ctm.getXScale();
-                }
-                drawer.setStroke(new BasicStroke(lineWidth, stroke.getEndCap(), stroke.getLineJoin(),
-                        stroke.getMiterLimit(), dashArray, phaseStart));
-            }
-            drawer.strokePath();
-        }
-        catch (Exception exception)
-        {
-            log.warn(exception, exception);
-        }
+        ((PageDrawer)context).strokePath();
     }
 }
