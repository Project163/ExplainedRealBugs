diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/form/AppearanceGeneratorHelper.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/form/AppearanceGeneratorHelper.java
index bbb034a974..a5e03f43ae 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/form/AppearanceGeneratorHelper.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/form/AppearanceGeneratorHelper.java
@@ -106,6 +106,15 @@ class AppearanceGeneratorHelper
 
         for (PDAnnotationWidget widget : field.getWidgets())
         {
+        	
+        	PDRectangle rect = widget.getRectangle();
+            if (rect == null)
+            {
+            	widget.getCOSObject().removeItem(COSName.AP);
+                LOG.warn("widget of field " + field.getFullyQualifiedName() + " has no rectangle, no appearance stream created");
+                continue;
+            }
+        	
             PDFormFieldAdditionalActions actions = field.getActions();
 
             // in case all tests fail the field will be formatted by acrobat
@@ -130,13 +139,6 @@ class AppearanceGeneratorHelper
                 }
                 else
                 {
-                    PDRectangle rect = widget.getRectangle();
-                    if (rect == null)
-                    {
-                        LOG.warn("widget of field " + field.getFullyQualifiedName() + " has no rectangle, no appearance stream created");
-                        continue;
-                    }
-                    
                     appearanceStream = new PDAppearanceStream(field.getAcroForm().getDocument());
                     
                     // Calculate the entries for the bounding box and the transformation matrix
diff --git a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/form/TestFields.java b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/form/TestFields.java
index 99142b7c97..def03e371b 100644
--- a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/form/TestFields.java
+++ b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/form/TestFields.java
@@ -24,6 +24,7 @@ import junit.framework.TestSuite;
 import org.apache.pdfbox.cos.COSName;
 import org.apache.pdfbox.cos.COSString;
 import org.apache.pdfbox.pdmodel.PDDocument;
+import org.apache.pdfbox.pdmodel.interactive.annotation.PDAnnotationWidget;
 
 /**
  * This will test the form fields in PDFBox.
@@ -192,4 +193,42 @@ public class TestFields extends TestCase
             }
         }
     }
+    
+    
+    /**
+     * This will test the handling of a widget with a missing (required) /Rect entry.
+     *
+     * @throws IOException If there is an error loading the form or the field.
+     */
+    public void testWidgetMissingRect() throws IOException
+    {
+        PDDocument doc = null;
+        
+        try
+        {
+            doc = PDDocument.load(new File(PATH_OF_PDF));
+            
+            PDAcroForm form = doc.getDocumentCatalog().getAcroForm();
+            
+            PDTextField textField = (PDTextField)form.getField("TextField-DefaultValue");
+            PDAnnotationWidget widget = textField.getWidgets().get(0);
+
+            // initially there is an Appearance Entry in the form
+            assertNotNull(widget.getCOSObject().getDictionaryObject(COSName.AP));
+            widget.getCOSObject().removeItem(COSName.RECT);
+            textField.setValue("field value");
+            
+            // There shall be no appearance entry if there is no /Rect to
+            // behave as Adobe Acrobat does
+            assertNull(widget.getCOSObject().getDictionaryObject(COSName.AP));
+             
+        }
+        finally
+        {
+            if( doc != null )
+            {
+                doc.close();
+            }
+        }
+    }
 }
\ No newline at end of file
