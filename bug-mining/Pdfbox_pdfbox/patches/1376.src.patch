diff --git a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/graphics/image/LosslessFactoryTest.java b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/graphics/image/LosslessFactoryTest.java
index 6912325385..91334c2e47 100644
--- a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/graphics/image/LosslessFactoryTest.java
+++ b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/graphics/image/LosslessFactoryTest.java
@@ -198,6 +198,15 @@ public class LosslessFactoryTest extends TestCase
             }
         }
 
+        // extra for PDFBOX-3181: check for exception due to different sizes of 
+        // alphaRaster.getSampleModel().getWidth()
+        // and
+        // alphaRaster.getWidth()
+        // happens with image returned by BufferedImage.getSubimage()
+        argbImage = argbImage.getSubimage(1, 1, argbImage.getWidth() - 2, argbImage.getHeight() - 2);
+        w -= 2;
+        h -= 2;
+
         PDImageXObject ximage = LosslessFactory.createFromImage(document, argbImage);
 
         validate(ximage, 8, w, h, "png", PDDeviceRGB.INSTANCE.getName());
