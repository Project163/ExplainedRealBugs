diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/blend/SoftMaskPaint.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/blend/SoftMaskPaint.java
deleted file mode 100644
index 212180aa64..0000000000
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/blend/SoftMaskPaint.java
+++ /dev/null
@@ -1,183 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.pdfbox.pdmodel.graphics.blend;
-
-import java.awt.Graphics;
-import java.awt.Paint;
-import java.awt.PaintContext;
-import java.awt.Point;
-import java.awt.Rectangle;
-import java.awt.RenderingHints;
-import java.awt.Transparency;
-import java.awt.geom.AffineTransform;
-import java.awt.geom.Rectangle2D;
-import java.awt.image.BufferedImage;
-import java.awt.image.ColorConvertOp;
-import java.awt.image.ColorModel;
-import java.awt.image.ComponentColorModel;
-import java.awt.image.DataBuffer;
-import java.awt.image.Raster;
-import java.awt.image.WritableRaster;
-import java.io.IOException;
-
-/**
- * AWT Paint that adds a soft mask to the alpha channel of the existing parent paint. If the parent
- * paint does not have an alpha channel, a new raster is created.
- * 
- * @author KÃ¼hn &amp; Weyh Software GmbH
- */
-public final class SoftMaskPaint implements Paint
-{
-    private final Paint parentPaint;
-    private final Raster softMaskRaster;
-
-    /**
-     * Applies the soft mask to the parent.
-     */
-    public SoftMaskPaint(Paint parentPaint, Raster softMaskRaster)
-    {
-        this.parentPaint = parentPaint;
-        this.softMaskRaster = softMaskRaster;
-    }
-
-    @Override
-    public int getTransparency()
-    {
-        return Transparency.TRANSLUCENT;
-    }
-
-    @Override
-    public PaintContext createContext(ColorModel cm, Rectangle deviceBounds,
-            Rectangle2D userBounds, AffineTransform at, RenderingHints hints)
-    {
-        try
-        {
-            PaintContext parentContext = parentPaint.createContext(null, deviceBounds, userBounds,
-                    at, hints);
-            return new Context(parentContext);
-        }
-        catch (IOException e)
-        {
-            return null; // context cannot be created
-        }
-    }
-
-    private class Context implements PaintContext
-    {
-        private final PaintContext parentContext;
-        private final ColorModel colorModel;
-        private final int numColorComponents;
-        private final ColorModel parentColorModel;
-
-        Context(PaintContext parentContext) throws IOException
-        {
-            this.parentContext = parentContext;
-            parentColorModel = parentContext.getColorModel();
-            if (parentContext.getColorModel().hasAlpha())
-            {
-                colorModel = parentColorModel;
-            }
-            else
-            {
-                colorModel = new ComponentColorModel(parentContext.getColorModel()
-                        .getColorSpace(), true, false, Transparency.OPAQUE, DataBuffer.TYPE_BYTE);
-            }
-            numColorComponents = colorModel.getNumColorComponents();
-        }
-
-        @Override
-        public ColorModel getColorModel()
-        {
-            return colorModel;
-        }
-
-        @Override
-        public Raster getRaster(int x, int y, int w, int h)
-        {
-            Raster parentRaster = parentContext.getRaster(x, y, w, h);
-
-            // getRaster can return the raster with origin (0,0) even if we applied for (x,y)
-            int parentMinX = parentRaster.getMinX();
-            int parentMinY = parentRaster.getMinY();
-
-            WritableRaster result;
-            if (parentRaster instanceof WritableRaster)
-            {
-                if (parentColorModel.equals(colorModel))
-                {
-                    result = parentRaster.createCompatibleWritableRaster();
-                    result.setDataElements(-parentMinX, -parentMinY, parentRaster);
-                }
-                else
-                {
-                    BufferedImage parentImage = new BufferedImage(parentColorModel,
-                            (WritableRaster) parentRaster,
-                            parentColorModel.isAlphaPremultiplied(), null);
-                    result = Raster.createWritableRaster(
-                            colorModel.createCompatibleSampleModel(w, h), new Point(0, 0));
-                    BufferedImage resultImage = new BufferedImage(colorModel, result, false, null);
-                    Graphics graphics = resultImage.getGraphics();
-                    graphics.drawImage(parentImage, 0, 0, null);
-                    graphics.dispose();
-                }
-            }
-            else
-            {
-                result = Raster.createInterleavedRaster(DataBuffer.TYPE_BYTE, w, h, getColorModel()
-                        .getNumComponents(), new Point(0, 0));
-                ColorConvertOp colorConvertOp = new ColorConvertOp(
-                        parentColorModel.getColorSpace(), colorModel.getColorSpace(), null);
-                colorConvertOp.filter(parentRaster, result);
-            }
-
-            int softMaskMinX = softMaskRaster.getMinX();
-            int softMaskMinY = softMaskRaster.getMinY();
-            int softMaskMaxX = softMaskMinX + softMaskRaster.getWidth();
-            int softMaskMaxY = softMaskMinY + softMaskRaster.getHeight();
-
-            for (int j = 0; j < h; j++)
-            {
-                for (int i = 0; i < w; i++)
-                {
-                    int rx = x + i;
-                    int ry = y + j;
-
-                    int alpha;
-                    if ((rx >= softMaskMinX) && (rx < softMaskMaxX) && (ry >= softMaskMinY)
-                            && (ry < softMaskMaxY))
-                    {
-                        alpha = softMaskRaster.getSample(rx, ry, 0);
-                    }
-                    else
-                    {
-                        alpha = 0;
-                    }
-                    alpha = alpha * result.getSample(i, j, numColorComponents) / 255;
-                    result.setSample(i, j, numColorComponents, alpha);
-                }
-            }
-
-            return result;
-        }
-
-        @Override
-        public void dispose()
-        {
-            // do nothing
-        }
-    }
-}
diff --git a/pdfbox/src/main/java/org/apache/pdfbox/rendering/PageDrawer.java b/pdfbox/src/main/java/org/apache/pdfbox/rendering/PageDrawer.java
index d017508748..488bf7631e 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/rendering/PageDrawer.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/rendering/PageDrawer.java
@@ -33,7 +33,6 @@ import java.awt.geom.PathIterator;
 import java.awt.geom.Point2D;
 import java.awt.geom.Rectangle2D;
 import java.awt.image.BufferedImage;
-import java.awt.image.Raster;
 import java.io.IOException;
 import java.util.HashMap;
 import java.util.Map;
@@ -50,7 +49,6 @@ import org.apache.pdfbox.pdmodel.common.function.PDFunction;
 import org.apache.pdfbox.pdmodel.font.PDFont;
 import org.apache.pdfbox.pdmodel.font.PDVectorFont;
 import org.apache.pdfbox.pdmodel.graphics.PDLineDashPattern;
-import org.apache.pdfbox.pdmodel.graphics.blend.SoftMaskPaint;
 import org.apache.pdfbox.pdmodel.graphics.color.PDColor;
 import org.apache.pdfbox.pdmodel.graphics.color.PDColorSpace;
 import org.apache.pdfbox.pdmodel.graphics.color.PDDeviceGray;
@@ -412,47 +410,31 @@ public class PageDrawer extends PDFGraphicsStreamEngine
         linePath.closePath();
     }
 
-    /**
-     * Generates AWT raster for a soft mask
-     * 
-     * @param softMask soft mask
-     * @return AWT raster for soft mask
-     * @throws IOException
-     */
-    private Raster createSoftMaskRaster(PDSoftMask softMask) throws IOException
+    //TODO: move soft mask apply to getPaint()?
+    private Paint applySoftMaskToPaint(Paint parentPaint, PDSoftMask softMask) throws IOException
     {
+        if (softMask == null)
+        {
+            return parentPaint;
+        }
         TransparencyGroup transparencyGroup = new TransparencyGroup(softMask.getGroup(), true);
-        COSName subtype = softMask.getSubType();
-        if (COSName.ALPHA.equals(subtype))
+        BufferedImage image = transparencyGroup.getImage();
+        BufferedImage gray = new BufferedImage(image.getWidth(), image.getHeight(), BufferedImage.TYPE_BYTE_GRAY);
+        if (COSName.ALPHA.equals(softMask.getSubType()))
         {
-            return transparencyGroup.getAlphaRaster();
+            gray.setData(image.getAlphaRaster());
         }
-        else if (COSName.LUMINOSITY.equals(subtype))
+        else if (COSName.LUMINOSITY.equals(softMask.getSubType()))
         {
-            return transparencyGroup.getLuminosityRaster();
+            Graphics g = gray.getGraphics();
+            g.drawImage(image, 0, 0, null);
+            g.dispose();
         }
         else
         {
             throw new IOException("Invalid soft mask subtype.");
         }
-    }
-
-    private Paint applySoftMaskToPaint(Paint parentPaint, PDSoftMask softMask) throws IOException
-    {
-        if (softMask != null) 
-        {
-            //TODO PDFBOX-2934
-            if (COSName.ALPHA.equals(softMask.getSubType()))
-            {
-                LOG.info("alpha smask not implemented yet, is ignored");
-                return parentPaint;
-            }
-            return new SoftMaskPaint(parentPaint, createSoftMaskRaster(softMask));
-        }
-        else 
-        {
-            return parentPaint;
-        }
+        return new SoftMask(parentPaint, gray, transparencyGroup.getBounds());
     }
 
     // returns the stroking AWT Paint
@@ -466,6 +448,7 @@ public class PageDrawer extends PDFGraphicsStreamEngine
     // returns the non-stroking AWT Paint
     private Paint getNonStrokingPaint() throws IOException
     {
+        //TODO why no soft mask?
         return getPaint(getGraphicsState().getNonStrokingColor());
     }
 
@@ -722,6 +705,7 @@ public class PageDrawer extends PDFGraphicsStreamEngine
         if (pdImage.isStencil())
         {
             // fill the image with paint
+            //TODO why no soft mask?
             BufferedImage image = pdImage.getStencilImage(getNonStrokingPaint());
 
             // draw the image
@@ -1115,6 +1099,8 @@ public class PageDrawer extends PDFGraphicsStreamEngine
         private final BufferedImage image;
         private final PDRectangle bbox;
 
+        private final int minX;
+        private final int minY;
         private final int width;
         private final int height;
 
@@ -1146,8 +1132,8 @@ public class PageDrawer extends PDFGraphicsStreamEngine
             Shape deviceClip = dpiTransform.createTransformedShape(clip);
             Rectangle2D bounds = deviceClip.getBounds2D();
 
-            int minX = (int) Math.floor(bounds.getMinX());
-            int minY = (int) Math.floor(bounds.getMinY());
+            minX = (int) Math.floor(bounds.getMinX());
+            minY = (int) Math.floor(bounds.getMinY());
             int maxX = (int) Math.floor(bounds.getMaxX()) + 1;
             int maxY = (int) Math.floor(bounds.getMaxY()) + 1;
 
@@ -1210,19 +1196,15 @@ public class PageDrawer extends PDFGraphicsStreamEngine
             return bbox;
         }
 
-        public Raster getAlphaRaster()
+        public Rectangle2D getBounds()
         {
-            return image.getAlphaRaster();
-        }
-
-        public Raster getLuminosityRaster()
-        {
-            BufferedImage gray = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY);
-            Graphics g = gray.getGraphics();
-            g.drawImage(image, 0, 0, null);
-            g.dispose();
-
-            return gray.getRaster();
+            Point2D size = new Point2D.Double(pageSize.getWidth(), pageSize.getHeight());
+            // apply the underlying Graphics2D device's DPI transform and y-axis flip
+            Matrix m = new Matrix(xform);
+            AffineTransform dpiTransform = AffineTransform.getScaleInstance(Math.abs(m.getScalingFactorX()), Math.abs(m.getScalingFactorY()));
+            size = dpiTransform.transform(size, size);
+            // Flip y
+            return new Rectangle2D.Double(minX, size.getY() - minY - height, width, height);
         }
     }
 }
diff --git a/pdfbox/src/main/java/org/apache/pdfbox/rendering/SoftMask.java b/pdfbox/src/main/java/org/apache/pdfbox/rendering/SoftMask.java
new file mode 100644
index 0000000000..36c49b3306
--- /dev/null
+++ b/pdfbox/src/main/java/org/apache/pdfbox/rendering/SoftMask.java
@@ -0,0 +1,137 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.apache.pdfbox.rendering;
+
+import java.awt.Paint;
+import java.awt.PaintContext;
+import java.awt.Rectangle;
+import java.awt.RenderingHints;
+import java.awt.geom.AffineTransform;
+import java.awt.geom.Rectangle2D;
+import java.awt.image.BufferedImage;
+import java.awt.image.ColorModel;
+import java.awt.image.Raster;
+import java.awt.image.WritableRaster;
+
+/**
+ * A Paint which applies a soft mask to an underlying Paint.
+ * 
+ * @author John Hewson
+ */
+class SoftMask implements Paint
+{
+    private static final ColorModel ARGB_COLOR_MODEL =
+            new BufferedImage(1, 1, BufferedImage.TYPE_INT_ARGB).getColorModel();
+
+    private final Paint paint;
+    private final BufferedImage mask;
+    private final Rectangle2D bboxDevice;
+
+    /**
+     * Creates a new soft mask paint.
+     *
+     * @param paint underlying paint.
+     * @param mask soft mask
+     * @param bboxDevice bbox of the soft mask in the underlying Graphics2D device space
+     */
+    SoftMask(Paint paint, BufferedImage mask, Rectangle2D bboxDevice)
+    {
+        this.paint = paint;
+        this.mask = mask;
+        this.bboxDevice = bboxDevice;
+    }
+
+    @Override
+    public PaintContext createContext(ColorModel cm, Rectangle deviceBounds,
+                                      Rectangle2D userBounds, AffineTransform xform,
+                                      RenderingHints hints)
+    {
+        PaintContext ctx = paint.createContext(cm, deviceBounds, userBounds, xform, hints);
+        return new SoftPaintContext(cm, deviceBounds, userBounds, xform, hints, ctx);
+    }
+
+    @Override
+    public int getTransparency()
+    {
+        return TRANSLUCENT;
+    }
+
+    private class SoftPaintContext implements PaintContext
+    {
+        private final PaintContext context;
+
+        SoftPaintContext(ColorModel cm, Rectangle deviceBounds, Rectangle2D userBounds,
+                         AffineTransform xform, RenderingHints hints, PaintContext context)
+        {
+            this.context = context;
+        }
+
+        @Override
+        public ColorModel getColorModel()
+        {
+            return ARGB_COLOR_MODEL;
+        }
+
+        @Override
+        public Raster getRaster(int x1, int y1, int w, int h)
+        {
+            WritableRaster raster = (WritableRaster)context.getRaster(x1, y1, w, h);
+
+            // buffer
+            BufferedImage image = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
+            WritableRaster output = image.getRaster();
+
+            // the soft mask has its own bbox
+            x1 = x1 - (int)bboxDevice.getX();
+            y1 = y1 - (int)bboxDevice.getY();
+
+            int[] gray = new int[4];
+            int[] rgba = new int[4];
+            for (int y = 0; y < h; y++)
+            {
+                for (int x = 0; x < w; x++)
+                {
+                    raster.getPixel(x, y, rgba);
+
+                    // get the alpha value from the gray mask, if within mask bounds
+                    gray[0] = 0;
+                    if (x1 + x < mask.getWidth() && y1 + y < mask.getHeight())
+                    {
+                        try
+                        {
+                            mask.getRaster().getPixel(x1 + x, y1 + y, gray);
+                        }
+                        catch (ArrayIndexOutOfBoundsException e)
+                        {
+                            //TODO bounds check not yet correct
+                        }
+                    }
+                    rgba[3] = Math.round(rgba[3] * (gray[0] / 255f)); // multiply alpha
+                    output.setPixel(x, y, rgba);
+                }
+            }
+
+            return output;
+        }
+
+        @Override
+        public void dispose()
+        {
+        }
+    }
+}
