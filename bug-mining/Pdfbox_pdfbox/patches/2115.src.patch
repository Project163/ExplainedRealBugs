diff --git a/pdfbox/src/test/java/org/apache/pdfbox/multipdf/PDFMergerUtilityTest.java b/pdfbox/src/test/java/org/apache/pdfbox/multipdf/PDFMergerUtilityTest.java
index 39cb311966..5d4ba849e0 100644
--- a/pdfbox/src/test/java/org/apache/pdfbox/multipdf/PDFMergerUtilityTest.java
+++ b/pdfbox/src/test/java/org/apache/pdfbox/multipdf/PDFMergerUtilityTest.java
@@ -325,6 +325,39 @@ public class PDFMergerUtilityTest extends TestCase
         checkStructTreeRootCount(new File(TARGETTESTDIR, "PDFBOX-4417-054080-merged.pdf"));
     }
 
+    /**
+     * PDFBOX-4416: Test merging of /IDTree
+     *
+     * @throws IOException 
+     */
+    public void testStructureTreeMergeIDTree() throws IOException
+    {
+        PDFMergerUtility pdfMergerUtility = new PDFMergerUtility();
+        PDDocument src = PDDocument.load(new File(SRCDIR, "PDFBOX-4417-001031.pdf"));
+        PDDocument dst = PDDocument.load(new File(SRCDIR, "PDFBOX-4417-054080.pdf"));
+
+        PDNameTreeNode<PDStructureElement> srcIDTree = src.getDocumentCatalog().getStructureTreeRoot().getIDTree();
+        Map<String, PDStructureElement> srcIDTreeMap = PDFMergerUtility.getIDTreeAsMap(srcIDTree);
+        PDNameTreeNode<PDStructureElement> dstIDTree = dst.getDocumentCatalog().getStructureTreeRoot().getIDTree();
+        Map<String, PDStructureElement> dstIDTreeMap = PDFMergerUtility.getIDTreeAsMap(dstIDTree);
+        int expectedTotal = srcIDTreeMap.size() + dstIDTreeMap.size();
+
+        pdfMergerUtility.appendDocument(dst, src);
+        src.close();
+        dst.save(new File(TARGETTESTDIR, "IDTree-merged.pdf"));
+        dst.close();
+        dst = PDDocument.load(new File(TARGETTESTDIR, "IDTree-merged.pdf"));
+        checkWithNumberTree(dst);
+        checkForPageOrphans(dst);
+
+        dstIDTree = dst.getDocumentCatalog().getStructureTreeRoot().getIDTree();
+        dstIDTreeMap = PDFMergerUtility.getIDTreeAsMap(dstIDTree);
+        assertEquals(expectedTotal, dstIDTreeMap.size());
+
+        dst.close();
+        checkStructTreeRootCount(new File(TARGETTESTDIR, "IDTree-merged.pdf"));
+    }
+
     // PDFBOX-4417: check for multiple /StructTreeRoot entries that was due to
     // incorrect merging of /K entries
     private void checkStructTreeRootCount(File file) throws IOException
