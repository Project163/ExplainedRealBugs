diff --git a/pdfbox/pom.xml b/pdfbox/pom.xml
index 7f8d82a5a1..d5109226d6 100644
--- a/pdfbox/pom.xml
+++ b/pdfbox/pom.xml
@@ -633,6 +633,19 @@
                             <sha512>42a61d0061b0b3b0bcc92c9f3ddc78daca79e9d5ea56c19796270316fb7cf3858db9f51efafa3776e1fef17f85202b35c8eed0e88ba6b7ebc7bb05c6014b9fc8</sha512>
                         </configuration>
                     </execution>
+                    <execution>
+                        <id>PDFBOX-4517</id>
+                        <phase>generate-test-resources</phase>
+                        <goals>
+                            <goal>wget</goal>
+                        </goals>
+                        <configuration>
+                            <url>https://issues.apache.org/jira/secure/attachment/12966453/cryptfilter.pdf</url>
+                            <outputDirectory>${project.build.directory}/pdfs</outputDirectory>
+                            <outputFileName>PDFBOX-4517-cryptfilter.pdf</outputFileName>
+                            <sha512>ed55a65bad6f91104846d28e9e7dcb18b11efbf980a74781350551428bbaecba375d9e22af02edf0f91263c7f668e93ec7c52d397898b7640c2d60e7dd3ae940</sha512>
+                        </configuration>
+                    </execution>
                 </executions>
             </plugin>
         </plugins>
diff --git a/pdfbox/src/test/java/org/apache/pdfbox/filter/TestFilters.java b/pdfbox/src/test/java/org/apache/pdfbox/filter/TestFilters.java
index e487b0528b..6fdb57f410 100644
--- a/pdfbox/src/test/java/org/apache/pdfbox/filter/TestFilters.java
+++ b/pdfbox/src/test/java/org/apache/pdfbox/filter/TestFilters.java
@@ -18,6 +18,7 @@ package org.apache.pdfbox.filter;
 
 import java.io.ByteArrayInputStream;
 import java.io.ByteArrayOutputStream;
+import java.io.File;
 import java.io.IOException;
 import java.util.Arrays;
 import java.util.Random;
@@ -27,6 +28,7 @@ import junit.framework.TestCase;
 import org.apache.pdfbox.cos.COSDictionary;
 import org.apache.pdfbox.cos.COSName;
 import org.apache.pdfbox.io.IOUtils;
+import org.apache.pdfbox.pdmodel.PDDocument;
 
 /**
  * This will test all of the filters in the PDFBox system.
@@ -115,6 +117,17 @@ public class TestFilters extends TestCase
         }
     }
     
+    /**
+     * This will test the use of identity filter to decode stream and string.
+     * This test threw an IOException before the correction.
+     * 
+     * @throws IOException
+     */
+    public void testPDFBOX4517() throws IOException
+    {
+        PDDocument.load(new File("target/pdfs/PDFBOX-4517-cryptfilter.pdf"),
+                "userpassword1234");
+    }
 
     /**
      * This will test the LZW filter with the sequence that failed in PDFBOX-1777.
