diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDColorSpace.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDColorSpace.java
index e40a6f5d19..74b264493c 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDColorSpace.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/color/PDColorSpace.java
@@ -99,15 +99,15 @@ public abstract class PDColorSpace implements COSObjectable
             }
 
             // built-in color spaces
-            if (name == COSName.DEVICECMYK || name == COSName.CMYK)
+            if (name == COSName.DEVICECMYK)
             {
                 return PDDeviceCMYK.INSTANCE;
             }
-            else if (name == COSName.DEVICERGB || name == COSName.RGB)
+            else if (name == COSName.DEVICERGB)
             {
                 return PDDeviceRGB.INSTANCE;
             }
-            else if (name == COSName.DEVICEGRAY || name == COSName.G)
+            else if (name == COSName.DEVICEGRAY)
             {
                 return PDDeviceGray.INSTANCE;
             }
diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/image/PDInlineImage.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/image/PDInlineImage.java
index 013ad132d6..9320071ea0 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/image/PDInlineImage.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/image/PDInlineImage.java
@@ -132,8 +132,7 @@ public final class PDInlineImage implements PDImage
 
         if (cs != null)
         {
-            // TODO: handling of abbreviated color space names belongs here, not in the factory
-            return PDColorSpace.create(cs, resources);
+            return create(cs);
         }
         else if (isStencil())
         {
@@ -146,6 +145,61 @@ public final class PDInlineImage implements PDImage
             throw new IOException("could not determine color space");
         }
     }
+    
+    private PDColorSpace create(COSBase cs) throws IOException
+    {
+        if (cs instanceof COSName)
+        {
+            if (COSName.RGB.equals(cs))
+            {
+                return PDColorSpace.create(COSName.DEVICERGB, resources);
+            }
+            else if (COSName.CMYK.equals(cs))
+            {
+                return PDColorSpace.create(COSName.DEVICECMYK, resources);
+            }
+            else if (COSName.G.equals(cs))
+            {
+                return PDColorSpace.create(COSName.DEVICEGRAY, resources);
+            }
+            else
+            {
+                return PDColorSpace.create(cs, resources);
+            }
+        }
+        else if (cs instanceof COSArray && ((COSArray) cs).size() > 1)
+        {
+            COSBase csType = ((COSArray) cs).get(0);
+            if (COSName.I.equals(csType) || COSName.INDEXED.equals(csType))
+            {
+                COSArray array = new COSArray();
+                array.addAll((COSArray) cs);
+                array.set(0, COSName.INDEXED);
+                COSBase cs1 = ((COSArray) cs).get(1);
+                if (COSName.RGB.equals(cs1))
+                {
+                    array.set(1, COSName.DEVICERGB);
+                }
+                else if (COSName.CMYK.equals(cs1))
+                {
+                    array.set(1, COSName.DEVICECMYK);
+                }
+                else if (COSName.G.equals(cs1))
+                {
+                    array.set(1, COSName.DEVICEGRAY);
+                }
+                return PDColorSpace.create(array, resources);
+            }
+            else
+            {
+                throw new IOException("Illegal type of color space in inline image: " + csType);
+            }
+        }
+        else
+        {
+            throw new IOException("Illegal type of object for color space: " + cs);
+        }
+    }
 
     @Override
     public void setColorSpace(PDColorSpace colorSpace)
