diff --git a/pdfbox/src/main/java/org/apache/pdfbox/filter/JPXFilter.java b/pdfbox/src/main/java/org/apache/pdfbox/filter/JPXFilter.java
index 3af0c7f540..d0b3e97d9f 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/filter/JPXFilter.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/filter/JPXFilter.java
@@ -91,7 +91,10 @@ public final class JPXFilter extends Filter
 
             // "If the image stream uses the JPXDecode filter, this entry is optional
             // and shall be ignored if present"
-            parameters.setInt(COSName.BITS_PER_COMPONENT, image.getColorModel().getComponentSize(0));
+            //
+            // note that indexed color spaces make the BPC logic tricky, see PDFBOX-2204
+            int bpc = image.getColorModel().getPixelSize() / image.getRaster().getNumBands();
+            parameters.setInt(COSName.BITS_PER_COMPONENT, bpc);
 
             // "Decode shall be ignored, except in the case where the image is treated as a mask"
             if (!parameters.getBoolean(COSName.IMAGE_MASK, false))
