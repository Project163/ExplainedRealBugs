diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/PDAbstractContentStream.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/PDAbstractContentStream.java
index 27b4f15fdb..e49ba02ca9 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/PDAbstractContentStream.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/PDAbstractContentStream.java
@@ -1636,18 +1636,18 @@ abstract class PDAbstractContentStream implements Closeable
 
     private List<Integer> applyGSUBRules(GsubWorker gsubWorker, ByteArrayOutputStream out, PDType0Font font, String word) throws IOException
     {
-        char[] charArray = word.toCharArray();
-        List<Integer> originalGlyphIds = new ArrayList<>(charArray.length);
+        int[] codePointArray = word.codePoints().toArray();
+        List<Integer> originalGlyphIds = new ArrayList<>(word.codePointCount(0, word.length()));
         CmapLookup cmapLookup = font.getCmapLookup();
 
         // convert characters into glyphIds
-        for (char unicodeChar : charArray)
+        for (int codePoint : codePointArray)
         {
-            int glyphId = cmapLookup.getGlyphId(unicodeChar);
+            int glyphId = cmapLookup.getGlyphId(codePoint);
             if (glyphId <= 0)
             {
                 throw new IllegalStateException(
-                        "could not find the glyphId for the character: " + unicodeChar);
+                        "could not find the glyphId for the character: " + codePoint);
             }
             originalGlyphIds.add(glyphId);
         }
diff --git a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/TestFontEmbedding.java b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/TestFontEmbedding.java
index 950f8b57e8..d8cabac03a 100644
--- a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/TestFontEmbedding.java
+++ b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/TestFontEmbedding.java
@@ -592,4 +592,49 @@ class TestFontEmbedding
 
         // no test for 1111
     }
+
+    /**
+     * PDFBOX-5812: Atka Mackerel in Japanese kanji. (surrogate pair)
+     */
+    @Test
+    void testSurrogatePairCharacter() throws IOException
+    {
+        final String message = "ð©¸½\uD867\uDE3D";
+        File pdf = new File(OUT_DIR, "PDFBOX-5812.pdf");
+        File IN_DIR = new File("src/test/resources/org/apache/pdfbox/ttf");
+
+        ByteArrayOutputStream baos;
+        try (PDDocument doc = new PDDocument())
+        {
+            PDPage page = new PDPage();
+            doc.addPage(page);
+            File ipafont = new File("target/fonts/ipag00303", "ipag.ttf");
+            PDFont font = PDType0Font.load(doc, ipafont);
+            try (PDPageContentStream contents = new PDPageContentStream(doc, page))
+            {
+                contents.beginText();
+                contents.setFont(font, 64);
+                contents.newLineAtOffset(100, 700);
+                contents.showText(message);
+                contents.endText();
+            }
+
+            baos = new ByteArrayOutputStream();
+            doc.save(baos);
+            doc.save(pdf);
+        }
+        try (PDDocument doc = Loader.loadPDF(baos.toByteArray()))
+        {
+            PDFTextStripper stripper = new PDFTextStripper();
+            String text = stripper.getText(doc).trim();
+            assertEquals(message, text);
+        }
+        
+        // compare rendering
+        if (!TestPDFToImage.doTestFile(pdf, IN_DIR.getAbsolutePath(), OUT_DIR.getAbsolutePath()))
+        {
+            // don't fail, rendering is different on different systems, result must be viewed manually
+            System.err.println("Rendering of " + pdf + " failed or is not identical to expected rendering in " + IN_DIR + " directory");
+        }
+    }
 }
diff --git a/pdfbox/src/test/resources/org/apache/pdfbox/ttf/PDFBOX-5812.pdf-1.png b/pdfbox/src/test/resources/org/apache/pdfbox/ttf/PDFBOX-5812.pdf-1.png
new file mode 100644
index 0000000000..a76f31447f
Binary files /dev/null and b/pdfbox/src/test/resources/org/apache/pdfbox/ttf/PDFBOX-5812.pdf-1.png differ
