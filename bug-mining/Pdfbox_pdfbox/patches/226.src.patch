diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/xobject/PDPixelMap.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/xobject/PDPixelMap.java
index 7919a5ccaa..404e6e5cb4 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/xobject/PDPixelMap.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/xobject/PDPixelMap.java
@@ -210,7 +210,7 @@ public class PDPixelMap extends PDXObjectImage
                 int size = Math.min(numberOfColorValues-1, highValue);
                 byte[] index = csIndexed.getLookupData();
                 boolean hasAlpha = baseColorModel.hasAlpha();
-                COSArray maskArray = getMask();
+                COSBase maskArray = getMask();
                 if( baseColorModel.getTransferType() != DataBuffer.TYPE_BYTE )
                 {
                     throw new IOException( "Not implemented" );
@@ -235,9 +235,9 @@ public class PDPixelMap extends PDXObjectImage
                     }
                     bufferIndex += numberOfComponents;
                 }
-                if (maskArray != null)
+                if (maskArray != null && maskArray instanceof COSArray)
                 {
-                    cm = new IndexColorModel(bpc, size+1, colorValues, 0, hasAlpha, maskArray.getInt(0));
+                    cm = new IndexColorModel(bpc, size+1, colorValues, 0, hasAlpha, ((COSArray)maskArray).getInt(0));
                 }
                 else
                 {
diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/xobject/PDXObjectImage.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/xobject/PDXObjectImage.java
index 873c6b9f2f..f903b8c758 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/xobject/PDXObjectImage.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/xobject/PDXObjectImage.java
@@ -354,15 +354,16 @@ public abstract class PDXObjectImage extends PDXObject
     /**
      * Returns the optional mask of a XObjectImage if there is one.
      *
-     * @return The mask as COSArray otherwise null.
+     * @return The mask otherwise null.
      */
-    public COSArray getMask()
+    public COSBase getMask()
     {
         COSBase mask = getCOSStream().getDictionaryObject(COSName.MASK);
         if (mask != null)
         {
-            return (COSArray)mask;
+            return mask;
         }
         return null;
     }
+
 }
