diff --git a/pdfbox/src/main/java/org/apache/pdfbox/filter/Filter.java b/pdfbox/src/main/java/org/apache/pdfbox/filter/Filter.java
index 6b9a7bd1e8..cb8ce97ca1 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/filter/Filter.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/filter/Filter.java
@@ -118,7 +118,7 @@ public abstract class Filter
         while (readers.hasNext())
         {
             reader = readers.next();
-            if (reader.canReadRaster())
+            if (reader != null && reader.canReadRaster())
             {
                 break;
             }
diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/image/JPEGFactory.java b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/image/JPEGFactory.java
index 5333f741e2..b4e401dd2f 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/image/JPEGFactory.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/graphics/image/JPEGFactory.java
@@ -253,6 +253,10 @@ public final class JPEGFactory
                 writer.dispose();
             }
             writer = writers.next();
+            if (writer == null)
+            {
+                continue;
+            }
             // PDFBOX-3566: avoid CLibJPEGImageWriter, which is not a JPEGImageWriteParam
             if (writer.getDefaultWriteParam() instanceof JPEGImageWriteParam)
             {
