diff --git a/pdfbox/src/test/java/org/apache/pdfbox/util/TestQuickSort.java b/pdfbox/src/test/java/org/apache/pdfbox/util/TestQuickSort.java
index 25fb465db3..db3b7ca008 100644
--- a/pdfbox/src/test/java/org/apache/pdfbox/util/TestQuickSort.java
+++ b/pdfbox/src/test/java/org/apache/pdfbox/util/TestQuickSort.java
@@ -18,6 +18,7 @@ package org.apache.pdfbox.util;
 
 import java.util.Arrays;
 import java.util.List;
+import java.util.Random;
 import junit.framework.TestCase;
 
 /**
@@ -79,5 +80,19 @@ public class TestQuickSort extends TestCase
             doTest(input, expected);
         }
 
+        Random rnd = new Random(12345);
+        for (int cnt = 0; cnt < 100; ++cnt)
+        {
+            int len = rnd.nextInt(20000) + 2;
+            Integer[] input = new Integer[len];
+            Integer[] expected = new Integer[len];
+            for (int i = 0; i < len; ++i)
+            {
+                // choose values so that there are some duplicates
+                expected[i] = input[i] = rnd.nextInt(rnd.nextInt(100)+1);
+            }
+            Arrays.sort(expected);
+            doTest(input, expected);
+        }
     }
 }
