diff --git a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/TestFontEmbedding.java b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/TestFontEmbedding.java
index 3fc77eca00..27fdfad904 100644
--- a/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/TestFontEmbedding.java
+++ b/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/font/TestFontEmbedding.java
@@ -218,6 +218,42 @@ public class TestFontEmbedding extends TestCase
         //assertEquals(expectedExtractedtext, extracted.replaceAll("\r", "").trim());
     }
 
+    /**
+     * Test corner case of PDFBOX-4302.
+     *
+     * @throws java.io.IOException
+     */
+    public void testMaxEntries() throws IOException
+    {
+        File file;
+        String text;
+        text = "あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわをん" +
+                "アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン" +
+                "１２３４５６７８";
+        assertEquals(ToUnicodeWriter.MAX_ENTRIES_PER_OPERATOR, text.length());
+        try (PDDocument document = new PDDocument())
+        {
+            PDPage page = new PDPage(PDRectangle.A0);
+            document.addPage(page);
+            File ipafont = new File("target/fonts/ipag00303", "ipag.ttf");
+            PDType0Font font = PDType0Font.load(document, ipafont);
+            try (PDPageContentStream contentStream = new PDPageContentStream(document, page))
+            {
+                contentStream.beginText();
+                contentStream.setFont(font, 20);
+                contentStream.newLineAtOffset(50, 3000);
+                contentStream.showText(text);
+                contentStream.endText();
+            }
+            file = new File(OUT_DIR, "PDFBOX-4302-test.pdf");
+            document.save(file);
+        }
+
+        // check that the extracted text matches what we wrote
+        String extracted = getUnicodeText(file);
+        assertEquals(text, extracted.trim());
+    }
+
     private void validateCIDFontType2(boolean useSubset) throws IOException
     {
         String text;
