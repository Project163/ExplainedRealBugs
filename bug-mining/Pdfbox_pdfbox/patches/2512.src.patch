diff --git a/pdfbox/src/main/java/org/apache/pdfbox/contentstream/operator/state/SetLineDashPattern.java b/pdfbox/src/main/java/org/apache/pdfbox/contentstream/operator/state/SetLineDashPattern.java
index 6ff0684806..bc9a64186c 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/contentstream/operator/state/SetLineDashPattern.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/contentstream/operator/state/SetLineDashPattern.java
@@ -58,7 +58,6 @@ public class SetLineDashPattern extends OperatorProcessor
         COSArray dashArray = (COSArray) base0;
         int dashPhase = ((COSNumber) base1).intValue();
         
-        boolean allZero = true;
         for (COSBase base : dashArray)
         {
             if (base instanceof COSNumber)
@@ -66,7 +65,6 @@ public class SetLineDashPattern extends OperatorProcessor
                 COSNumber num = (COSNumber) base;
                 if (Float.compare(num.floatValue(), 0) != 0)
                 {
-                    allZero = false;
                     break;
                 }
             }
@@ -77,11 +75,6 @@ public class SetLineDashPattern extends OperatorProcessor
                 break;
             }
         }
-        if (dashArray.size() > 0 && allZero)
-        {
-            LOG.warn("dash lengths all zero, ignored");
-            dashArray = new COSArray();
-        }
         context.setLineDashPattern(dashArray, dashPhase);
     }
 
diff --git a/pdfbox/src/main/java/org/apache/pdfbox/rendering/PageDrawer.java b/pdfbox/src/main/java/org/apache/pdfbox/rendering/PageDrawer.java
index f0325bfb8e..9a8e656605 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/rendering/PageDrawer.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/rendering/PageDrawer.java
@@ -681,6 +681,7 @@ public class PageDrawer extends PDFGraphicsStreamEngine
         float phaseStart = dashPattern.getPhase();
         float[] dashArray = getDashArray(dashPattern);
         phaseStart = transformWidth(phaseStart);
+        boolean allZero = true;
 
         // empty dash array is illegal
         // avoid also infinite and NaN values (PDFBOX-3360)
@@ -692,11 +693,22 @@ public class PageDrawer extends PDFGraphicsStreamEngine
         {
             for (int i = 0; i < dashArray.length; ++i)
             {
-                if (Float.isInfinite(dashArray[i]) || Float.isNaN(dashArray[i]))
+                float dash = dashArray[i];
+                if (Float.isInfinite(dash) || Float.isNaN(dash))
                 {
                     dashArray = null;
+                    allZero = false;
                     break;
                 }
+                if (dash != 0)
+                {
+                    allZero = false;
+                }
+            }
+            if (allZero)
+            {
+                // PDFBOX-5168: make it invisible like Adobe
+                return (Shape p) -> new Area();
             }
         }
         int lineCap = Math.min(2, Math.max(0, state.getLineCap())); // legal values 0..2
