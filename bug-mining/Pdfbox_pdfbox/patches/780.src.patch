diff --git a/pdfbox/src/main/java/org/apache/pdfbox/pdfwriter/COSWriter.java b/pdfbox/src/main/java/org/apache/pdfbox/pdfwriter/COSWriter.java
index 3e5fa46e93..6dc91d89d1 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/pdfwriter/COSWriter.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/pdfwriter/COSWriter.java
@@ -1368,10 +1368,10 @@ public class COSWriter implements ICOSVisitor, Closeable
                     md5.update( values.next().toString().getBytes("ISO-8859-1") );
                 }
             }
-            idArray = new COSArray();
             // reuse origin documentID if available as first value
             COSString firstID = missingID ? new COSString( md5.digest() ) : (COSString)idArray.get(0);
             COSString secondID = new COSString( md5.digest() );
+            idArray = new COSArray();
             idArray.add( firstID );
             idArray.add( secondID );
             trailer.setItem( COSName.ID, idArray );
