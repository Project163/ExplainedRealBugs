diff --git a/core/src/main/java/com/google/googlejavaformat/java/JavaOutput.java b/core/src/main/java/com/google/googlejavaformat/java/JavaOutput.java
index 3c22480..c059318 100644
--- a/core/src/main/java/com/google/googlejavaformat/java/JavaOutput.java
+++ b/core/src/main/java/com/google/googlejavaformat/java/JavaOutput.java
@@ -18,6 +18,7 @@ import static java.util.Comparator.comparing;
 
 import com.google.common.base.CharMatcher;
 import com.google.common.base.MoreObjects;
+import com.google.common.base.Strings;
 import com.google.common.collect.DiscreteDomain;
 import com.google.common.collect.ImmutableList;
 import com.google.common.collect.Range;
@@ -55,9 +56,9 @@ public final class JavaOutput extends Output {
   private final int kN; // The number of tokens or comments in the input, excluding the EOF.
   private int iLine = 0; // Closest corresponding line number on input.
   private int lastK = -1; // Last {@link Tok} index output.
-  private int spacesPending = 0;
   private int newlinesPending = 0;
   private StringBuilder lineBuilder = new StringBuilder();
+  private StringBuilder spacesPending = new StringBuilder();
 
   /**
    * {@code JavaOutput} constructor.
@@ -121,7 +122,7 @@ public final class JavaOutput extends Output {
       if (newlinesPending == 0) {
         ++newlinesPending;
       }
-      spacesPending = 0;
+      spacesPending = new StringBuilder();
     } else {
       boolean rangesSet = false;
       int textN = text.length();
@@ -129,7 +130,10 @@ public final class JavaOutput extends Output {
         char c = text.charAt(i);
         switch (c) {
           case ' ':
-            ++spacesPending;
+            spacesPending.append(' ');
+            break;
+          case '\t':
+            spacesPending.append('\t');
             break;
           case '\r':
             if (i + 1 < text.length() && text.charAt(i + 1) == '\n') {
@@ -137,7 +141,7 @@ public final class JavaOutput extends Output {
             }
             // falls through
           case '\n':
-            spacesPending = 0;
+            spacesPending = new StringBuilder();
             ++newlinesPending;
             break;
           default:
@@ -150,9 +154,9 @@ public final class JavaOutput extends Output {
               rangesSet = false;
               --newlinesPending;
             }
-            while (spacesPending > 0) {
-              lineBuilder.append(' ');
-              --spacesPending;
+            if (spacesPending.length() > 0) {
+              lineBuilder.append(spacesPending);
+              spacesPending = new StringBuilder();
             }
             lineBuilder.append(c);
             if (!range.isEmpty()) {
@@ -174,7 +178,7 @@ public final class JavaOutput extends Output {
 
   @Override
   public void indent(int indent) {
-    spacesPending = indent;
+    spacesPending.append(Strings.repeat(" ", indent));
   }
 
   /** Flush any incomplete last line, then add the EOF token into our data structures. */
@@ -387,7 +391,7 @@ public final class JavaOutput extends Output {
     return MoreObjects.toStringHelper(this)
         .add("iLine", iLine)
         .add("lastK", lastK)
-        .add("spacesPending", spacesPending)
+        .add("spacesPending", spacesPending.toString().replace("\t", "\\t"))
         .add("newlinesPending", newlinesPending)
         .add("blankLines", blankLines)
         .add("super", super.toString())
diff --git a/core/src/test/java/com/google/googlejavaformat/java/FormatterTest.java b/core/src/test/java/com/google/googlejavaformat/java/FormatterTest.java
index 9527278..3f6e974 100644
--- a/core/src/test/java/com/google/googlejavaformat/java/FormatterTest.java
+++ b/core/src/test/java/com/google/googlejavaformat/java/FormatterTest.java
@@ -472,4 +472,24 @@ public final class FormatterTest {
                 + " chance to interrupt;\n"
                 + "}\n");
   }
+
+  @Test
+  public void removeTrailingTabsInComments() throws Exception {
+    assertThat(
+            new Formatter()
+                .formatSource(
+                    "class Foo {\n"
+                        + "  void f() {\n"
+                        + "    int x = 0; // comment\t\t\t\n"
+                        + "    return;\n"
+                        + "  }\n"
+                        + "}\n"))
+        .isEqualTo(
+            "class Foo {\n"
+                + "  void f() {\n"
+                + "    int x = 0; // comment\n"
+                + "    return;\n"
+                + "  }\n"
+                + "}\n");
+  }
 }
