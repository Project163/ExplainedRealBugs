diff --git a/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java b/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java
index 413836f..6b700d5 100644
--- a/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java
+++ b/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java
@@ -943,9 +943,7 @@ public final class JavaInputAstVisitor extends TreePathScanner<Void, Void> {
           annotationDirection,
           Optional.of(fragment.getModifiers()),
           fragment.getType(),
-          VarArgsOrNot.fromVariable(fragment),
-          /* varargsAnnotations= */ ImmutableList.of(),
-          fragment.getName(),
+          /* name= */ fragment.getName(),
           "",
           "=",
           Optional.fromNullable(fragment.getInitializer()),
@@ -1838,9 +1836,7 @@ public final class JavaInputAstVisitor extends TreePathScanner<Void, Void> {
               fieldAnnotationDirection(variableTree.getModifiers()),
               Optional.of(variableTree.getModifiers()),
               variableTree.getType(),
-              VarArgsOrNot.NO,
-              /* varargsAnnotations= */ ImmutableList.of(),
-              variableTree.getName(),
+              /* name= */ variableTree.getName(),
               "",
               "=",
               Optional.fromNullable(variableTree.getInitializer()),
@@ -2283,9 +2279,7 @@ public final class JavaInputAstVisitor extends TreePathScanner<Void, Void> {
         Direction.HORIZONTAL,
         /* modifiers= */ Optional.absent(),
         last,
-        VarArgsOrNot.NO,
-        /* varargsAnnotations= */ ImmutableList.of(),
-        declaration.getName(),
+        /* name= */ declaration.getName(),
         /* op= */ "",
         "=",
         Optional.fromNullable(declaration.getInitializer()),
@@ -2329,9 +2323,7 @@ public final class JavaInputAstVisitor extends TreePathScanner<Void, Void> {
           Direction.HORIZONTAL,
           Optional.of(receiver.get().getModifiers()),
           receiver.get().getType(),
-          VarArgsOrNot.NO,
-          /* varargsAnnotations= */ ImmutableList.of(),
-          receiver.get().getName(),
+          /* name= */ receiver.get().getName(),
           "",
           "",
           /* initializer= */ Optional.absent(),
@@ -2520,16 +2512,11 @@ public final class JavaInputAstVisitor extends TreePathScanner<Void, Void> {
       String equals,
       Optional<String> trailing) {
     sync(node);
-    boolean varargs = VarArgsOrNot.fromVariable(node).isYes();
-    List<? extends AnnotationTree> varargsAnnotations = ImmutableList.of();
-    Tree type = node.getType();
     declareOne(
         kind,
         annotationsDirection,
         Optional.of(node.getModifiers()),
-        type,
-        VarArgsOrNot.valueOf(varargs),
-        varargsAnnotations,
+        node.getType(),
         node.getName(),
         "",
         equals,
@@ -3183,8 +3170,6 @@ public final class JavaInputAstVisitor extends TreePathScanner<Void, Void> {
       Direction annotationsDirection,
       Optional<ModifiersTree> modifiers,
       Tree type,
-      VarArgsOrNot isVarargs,
-      List<? extends AnnotationTree> varargsAnnotations,
       Name name,
       String op,
       String equals,
@@ -3236,10 +3221,6 @@ public final class JavaInputAstVisitor extends TreePathScanner<Void, Void> {
             } else {
               scan(type, null);
             }
-            if (isVarargs.isYes()) {
-              visitAnnotations(varargsAnnotations, BreakOrNot.YES, BreakOrNot.YES);
-              builder.op("...");
-            }
           }
           builder.close();
 
@@ -3342,6 +3323,15 @@ public final class JavaInputAstVisitor extends TreePathScanner<Void, Void> {
           token("]");
           lastWasAnnotation = false;
           break;
+        case ".":
+          if (lastWasAnnotation) {
+            builder.breakToFill(" ");
+          } else {
+            builder.breakToFill();
+          }
+          builder.op("...");
+          lastWasAnnotation = false;
+          break;
         default:
           return;
       }
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B38203081.output b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B38203081.output
index 1241987..39bb11a 100644
--- a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B38203081.output
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B38203081.output
@@ -1,5 +1,5 @@
 class B38203081 {
   void f(int @A []... xs) {}
 
-  void g(int @A [] @B... xs) {}
+  void g(int @A [] @B ... xs) {}
 }
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/i282.input b/core/src/test/resources/com/google/googlejavaformat/java/testdata/i282.input
new file mode 100644
index 0000000..2c5d119
--- /dev/null
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/i282.input
@@ -0,0 +1,9 @@
+public class ArrayVsVarargs {
+
+  void f(String[] arg) {}
+  void g(String... arg) {}
+  void h(String @A [] arg) {}
+  void i(String @B... arg) {}
+  void j(String @C [] @D [] arg) {}
+  void k(String @E [] @F... arg) {}
+}
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/i282.output b/core/src/test/resources/com/google/googlejavaformat/java/testdata/i282.output
new file mode 100644
index 0000000..bfe4016
--- /dev/null
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/i282.output
@@ -0,0 +1,14 @@
+public class ArrayVsVarargs {
+
+  void f(String[] arg) {}
+
+  void g(String... arg) {}
+
+  void h(String @A [] arg) {}
+
+  void i(String @B ... arg) {}
+
+  void j(String @C [] @D [] arg) {}
+
+  void k(String @E [] @F ... arg) {}
+}
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/i95.output b/core/src/test/resources/com/google/googlejavaformat/java/testdata/i95.output
index 1fa23a8..624664e 100644
--- a/core/src/test/resources/com/google/googlejavaformat/java/testdata/i95.output
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/i95.output
@@ -1,3 +1,3 @@
 class I95 {
-  public void format2(Object @Nullable... a2) {}
+  public void format2(Object @Nullable ... a2) {}
 }
