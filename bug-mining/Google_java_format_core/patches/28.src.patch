diff --git a/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java b/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java
index 144516e..630571b 100644
--- a/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java
+++ b/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java
@@ -1225,7 +1225,7 @@ public final class JavaInputAstVisitor extends TreePathScanner<Void, Void> {
     token("@");
     scan(node.getAnnotationType(), null);
     if (!node.getArguments().isEmpty()) {
-      builder.open(plusTwo);
+      builder.open(plusFour);
       token("(");
       builder.breakOp();
       boolean first = true;
@@ -1250,9 +1250,8 @@ public final class JavaInputAstVisitor extends TreePathScanner<Void, Void> {
         }
         first = false;
       }
-      builder.breakOp(UNIFIED, "", minusTwo, /* optionalTag= */ Optional.absent());
+      token(")");
       builder.close();
-      token(")", plusTwo);
       builder.close();
       return null;
 
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B20128588.output b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B20128588.output
index bf097ba..273fa79 100644
--- a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B20128588.output
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B20128588.output
@@ -98,24 +98,22 @@ class Test {
   Object var;
 
   @Deprecated(
-    x = 42,
-    y = {
-      XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
-      XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
-      XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
-      XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
-    }
-  )
+      x = 42,
+      y = {
+        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
+        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
+        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
+        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
+      })
   Object var;
 
   @Deprecated(
-    y = {
-      XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
-      XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
-      XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
-      XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
-    }
-  )
+      y = {
+        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
+        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
+        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,
+        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
+      })
   Object var;
 }
 
@@ -123,19 +121,17 @@ class Test {
   @Mirror(in = edu.oswego.cs.dl.util.concurrent.F.class, methods = "foo"),
   @Mirror(in = edu.oswego.cs.dl.util.concurrent.F.class, methods = "foo"),
   @Mirror(
-    in = edu.oswego.cs.dl.util.concurrent.F.class,
-    enable = false,
-    methods = {
-      "foo", "foo", "foo", "foo", "foo",
-      "foo", "foo", "foo", "foo", "foo",
-      "foo", "foo", "foo", "foo", "foo",
-    }
-  ),
+      in = edu.oswego.cs.dl.util.concurrent.F.class,
+      enable = false,
+      methods = {
+        "foo", "foo", "foo", "foo", "foo",
+        "foo", "foo", "foo", "foo", "foo",
+        "foo", "foo", "foo", "foo", "foo",
+      }),
   @Mirror(
-    in = edu.oswego.cs.dl.util.concurrent.F.class,
-    enable = false,
-    methods = {"foo", "foo", "foo", "foo", "foo", "foo", "foo", "foo", "foo", "foo", "foo"}
-  ),
+      in = edu.oswego.cs.dl.util.concurrent.F.class,
+      enable = false,
+      methods = {"foo", "foo", "foo", "foo", "foo", "foo", "foo", "foo", "foo", "foo", "foo"}),
   @Mirror(in = edu.oswego.cs.dl.util.concurrent.F.class, methods = "foo"),
 })
 class C {}
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B20529113.output b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B20529113.output
index 76a7426..de0c052 100644
--- a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B20529113.output
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B20529113.output
@@ -1,19 +1,17 @@
 @BugPattern(category = GUAVA, severity = NOT_A_PROBLEM, maturity = EXPERIMENTAL)
 @BugPattern(
-  name = "AsyncFunctionReturnsImmediate",
-  summary = SIMPLIFY,
-  category = GUAVA,
-  severity = NOT_A_PROBLEM,
-  maturity = EXPERIMENTAL
-)
+    name = "AsyncFunctionReturnsImmediate",
+    summary = SIMPLIFY,
+    category = GUAVA,
+    severity = NOT_A_PROBLEM,
+    maturity = EXPERIMENTAL)
 @BugPattern(
-  name = "AsyncFunctionReturnsImmediate",
-  summary = SIMPLIFY,
-  explanation =
-      "If an AsyncFunction always returns immediateFuture() and never throws, it can "
-          + "be replaced with a Function.",
-  category = GUAVA,
-  severity = NOT_A_PROBLEM,
-  maturity = EXPERIMENTAL
-)
+    name = "AsyncFunctionReturnsImmediate",
+    summary = SIMPLIFY,
+    explanation =
+        "If an AsyncFunction always returns immediateFuture() and never throws, it can "
+            + "be replaced with a Function.",
+    category = GUAVA,
+    severity = NOT_A_PROBLEM,
+    maturity = EXPERIMENTAL)
 class Test {}
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B21305044.output b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B21305044.output
index 32296d2..3273809 100644
--- a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B21305044.output
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B21305044.output
@@ -16,12 +16,11 @@ class B21305044 {
     List<
             ? super
                 @Crazy(
-                  key = value,
-                  other =
-                      @Crazier({
-                        1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20
-                      })
-                )
+                    key = value,
+                    other =
+                        @Crazier({
+                          1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20
+                        }))
                 Object>
         c;
   }
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B21608216.output b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B21608216.output
index eec500b..93b3f86 100644
--- a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B21608216.output
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B21608216.output
@@ -1,64 +1,56 @@
 @PluginInfo(
-  shortName = "chromesuggestions",
-  owner = "mathp",
-  demoLink = "unspecified",
-  modules = {
-    BackendsModule.class,
-    CommonBackendsModule.class,
-    ChromeSuggestionsPlugin.ChromeSuggestionsModule.class
-  }
-)
+    shortName = "chromesuggestions",
+    owner = "mathp",
+    demoLink = "unspecified",
+    modules = {
+      BackendsModule.class,
+      CommonBackendsModule.class,
+      ChromeSuggestionsPlugin.ChromeSuggestionsModule.class
+    })
 @Module(library = true, complete = false)
 @Module(
-  library = true,
-  complete = false,
-  injects = {ClassInfoTracker.class, JslayoutMetaProto.class}
-)
+    library = true,
+    complete = false,
+    injects = {ClassInfoTracker.class, JslayoutMetaProto.class})
 @Module(
-  library = true,
-  complete = false,
-  injects = {
-    ClassInfoTracker.class,
-    JslayoutMetaProto.class,
-    JslayoutMetaProto.class,
-    JslayoutMeta.class
-  }
-)
+    library = true,
+    complete = false,
+    injects = {
+      ClassInfoTracker.class,
+      JslayoutMetaProto.class,
+      JslayoutMetaProto.class,
+      JslayoutMeta.class
+    })
 @Module(
-  library = true,
-  complete = false,
-  injects = {
-    ClassInfoTracker.class,
-    JslayoutMetaProto.class,
-    JslayoutMetaProto.class,
-    JslayoutMeta.class,
-    JslayoutMeta.class
-  }
-)
+    library = true,
+    complete = false,
+    injects = {
+      ClassInfoTracker.class,
+      JslayoutMetaProto.class,
+      JslayoutMetaProto.class,
+      JslayoutMeta.class,
+      JslayoutMeta.class
+    })
 @Module(
-  injects = {One.class, Two.class},
-  includes = {Three.class, Four.class}
-)
+    injects = {One.class, Two.class},
+    includes = {Three.class, Four.class})
 @Module(
-  library = true,
-  complete = false,
-  numbers = {1, 2, 3}
-)
+    library = true,
+    complete = false,
+    numbers = {1, 2, 3})
 @Module(
-  library = true,
-  complete = false,
-  numbers = {
-    1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26
-  }
-)
+    library = true,
+    complete = false,
+    numbers = {
+      1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26
+    })
 @Module(
-  library = true,
-  complete = false,
-  numbers = {
-    1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26,
-    27, 28, 29, 30
-  }
-)
+    library = true,
+    complete = false,
+    numbers = {
+      1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26,
+      27, 28, 29, 30
+    })
 @Module({ClassInfoTracker.class, JslayoutMetaProto.class, JslayoutMetaProto.class})
 @Module({
   ClassInfoTracker.class,
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B22848286.output b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B22848286.output
index a2a7d17..e073fb3 100644
--- a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B22848286.output
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B22848286.output
@@ -1,13 +1,11 @@
 class B22848286 {
 
   @FxxxSxxx(
-    xxxx = "xxxxxx_xxxxxxx_xxxxxxxxx_xxxx",
-    xxxx = "Xxxxx xxxx xx xxxxxx xxxxxxx xxxxxxxxx."
-  )
+      xxxx = "xxxxxx_xxxxxxx_xxxxxxxxx_xxxx",
+      xxxx = "Xxxxx xxxx xx xxxxxx xxxxxxx xxxxxxxxx.")
   int x;
 
   @FxxxGxxxxxxxx(
-    xxxx = "Xxx xxxxxx xxxxxxxxy xxx xxx xxxxxxxxx, x.x. xxx xxxxxx xxxxxxxx xxxxxxxxy"
-  )
+      xxxx = "Xxx xxxxxx xxxxxxxxy xxx xxx xxxxxxxxx, x.x. xxx xxxxxx xxxxxxxx xxxxxxxxy")
   int y;
 }
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B30764810.output b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B30764810.output
index 87b9fb7..94f0f9b 100644
--- a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B30764810.output
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B30764810.output
@@ -1,16 +1,16 @@
 class B30764810 {
   @Foo(
-    x = {0},
-    y = 0
-    // comment
-  )
+      x = {0},
+      y = 0
+      // comment
+      )
   int a;
 
   @Foo(
-    x = {0},
-    y = 0
-    /* comment
-     */
-  )
+      x = {0},
+      y = 0
+      /* comment
+       */
+      )
   int b;
 }
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B65214682.input b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B65214682.input
new file mode 100644
index 0000000..d6e22f6
--- /dev/null
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B65214682.input
@@ -0,0 +1,17 @@
+@BugPattern(
+  name = "AsyncFunctionReturnsImmediate",
+  summary = SIMPLIFY,
+  category = GUAVA,
+  severity = NOT_A_PROBLEM,
+  maturity = EXPERIMENTAL
+)
+@BugPattern(
+    name = "AsyncFunctionReturnsImmediate",
+    summary = SIMPLIFY,
+    explanation =
+        "If an AsyncFunction always returns immediateFuture() and never throws, it can "
+            + "be replaced with a Function.",
+    category = GUAVA,
+    severity = NOT_A_PROBLEM,
+    maturity = EXPERIMENTAL)
+class Test {}
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/B65214682.output b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B65214682.output
new file mode 100644
index 0000000..ba49493
--- /dev/null
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/B65214682.output
@@ -0,0 +1,16 @@
+@BugPattern(
+    name = "AsyncFunctionReturnsImmediate",
+    summary = SIMPLIFY,
+    category = GUAVA,
+    severity = NOT_A_PROBLEM,
+    maturity = EXPERIMENTAL)
+@BugPattern(
+    name = "AsyncFunctionReturnsImmediate",
+    summary = SIMPLIFY,
+    explanation =
+        "If an AsyncFunction always returns immediateFuture() and never throws, it can "
+            + "be replaced with a Function.",
+    category = GUAVA,
+    severity = NOT_A_PROBLEM,
+    maturity = EXPERIMENTAL)
+class Test {}
diff --git a/core/src/test/resources/com/google/googlejavaformat/java/testdata/N.output b/core/src/test/resources/com/google/googlejavaformat/java/testdata/N.output
index ba61005..764390a 100644
--- a/core/src/test/resources/com/google/googlejavaformat/java/testdata/N.output
+++ b/core/src/test/resources/com/google/googlejavaformat/java/testdata/N.output
@@ -3,33 +3,32 @@ package com.google.googlejavaformat.java.test;
 /** Tests for NameQualifiedTypes, Names, NormalAnnotations, NullLiterals, and NumberLiterals. */
 class N {
   @NormalAnnotation(
-    a = 1,
-    b = 2,
-    c = 3,
-    d = 4,
-    e = 5,
-    f = 6,
-    g = 7,
-    h = 8,
-    i = 9,
-    j = 10,
-    k = 11,
-    l = 12,
-    m = 13,
-    n = 14,
-    o = 15,
-    p = 16,
-    q = 17,
-    r = 18,
-    s = 19,
-    t = 20,
-    u = 21,
-    v = 22,
-    w = 23,
-    x = 24,
-    y = 25,
-    z = 26
-  )
+      a = 1,
+      b = 2,
+      c = 3,
+      d = 4,
+      e = 5,
+      f = 6,
+      g = 7,
+      h = 8,
+      i = 9,
+      j = 10,
+      k = 11,
+      l = 12,
+      m = 13,
+      n = 14,
+      o = 15,
+      p = 16,
+      q = 17,
+      r = 18,
+      s = 19,
+      t = 20,
+      u = 21,
+      v = 22,
+      w = 23,
+      x = 24,
+      y = 25,
+      z = 26)
   void f() {
     assert 00 == 0 && 0x0 == 0 && 1.0e0f == 1.00e0f && 0.2D == .2D;
     java.lang./* @MarkerAnnotation */ String s = null;
