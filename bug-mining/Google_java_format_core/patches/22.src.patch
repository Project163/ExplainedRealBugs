diff --git a/core/pom.xml b/core/pom.xml
index 9e154ea..96e423e 100644
--- a/core/pom.xml
+++ b/core/pom.xml
@@ -41,7 +41,7 @@
     </dependency>
     <dependency>
       <groupId>com.google.errorprone</groupId>
-      <artifactId>javac</artifactId>
+      <artifactId>javac-shaded</artifactId>
     </dependency>
 
     <!-- Compile-time dependencies -->
diff --git a/core/src/main/java/com/google/googlejavaformat/FormattingError.java b/core/src/main/java/com/google/googlejavaformat/FormattingError.java
index 09c7a97..1a77c0f 100644
--- a/core/src/main/java/com/google/googlejavaformat/FormattingError.java
+++ b/core/src/main/java/com/google/googlejavaformat/FormattingError.java
@@ -20,8 +20,8 @@ import com.google.common.base.Function;
 import com.google.common.base.Joiner;
 import com.google.common.collect.ImmutableList;
 import com.google.common.collect.Iterables;
-import javax.tools.Diagnostic;
-import javax.tools.JavaFileObject;
+import org.openjdk.javax.tools.Diagnostic;
+import org.openjdk.javax.tools.JavaFileObject;
 
 /** An unchecked formatting error. */
 public class FormattingError extends Error {
diff --git a/core/src/main/java/com/google/googlejavaformat/java/Formatter.java b/core/src/main/java/com/google/googlejavaformat/java/Formatter.java
index 90d0f4b..81e02b4 100644
--- a/core/src/main/java/com/google/googlejavaformat/java/Formatter.java
+++ b/core/src/main/java/com/google/googlejavaformat/java/Formatter.java
@@ -40,12 +40,12 @@ import java.util.ArrayList;
 import java.util.Collection;
 import java.util.Collections;
 import java.util.List;
-import javax.tools.Diagnostic;
-import javax.tools.DiagnosticCollector;
-import javax.tools.DiagnosticListener;
-import javax.tools.JavaFileObject;
-import javax.tools.SimpleJavaFileObject;
-import javax.tools.StandardLocation;
+import org.openjdk.javax.tools.Diagnostic;
+import org.openjdk.javax.tools.DiagnosticCollector;
+import org.openjdk.javax.tools.DiagnosticListener;
+import org.openjdk.javax.tools.JavaFileObject;
+import org.openjdk.javax.tools.SimpleJavaFileObject;
+import org.openjdk.javax.tools.StandardLocation;
 import org.openjdk.tools.javac.file.JavacFileManager;
 import org.openjdk.tools.javac.parser.JavacParser;
 import org.openjdk.tools.javac.parser.ParserFactory;
diff --git a/core/src/main/java/com/google/googlejavaformat/java/JavaInput.java b/core/src/main/java/com/google/googlejavaformat/java/JavaInput.java
index 35ec4de..366de48 100644
--- a/core/src/main/java/com/google/googlejavaformat/java/JavaInput.java
+++ b/core/src/main/java/com/google/googlejavaformat/java/JavaInput.java
@@ -39,12 +39,12 @@ import java.util.ArrayList;
 import java.util.Collection;
 import java.util.Iterator;
 import java.util.List;
-import javax.tools.Diagnostic;
-import javax.tools.DiagnosticCollector;
-import javax.tools.DiagnosticListener;
-import javax.tools.JavaFileObject;
-import javax.tools.JavaFileObject.Kind;
-import javax.tools.SimpleJavaFileObject;
+import org.openjdk.javax.tools.Diagnostic;
+import org.openjdk.javax.tools.DiagnosticCollector;
+import org.openjdk.javax.tools.DiagnosticListener;
+import org.openjdk.javax.tools.JavaFileObject;
+import org.openjdk.javax.tools.JavaFileObject.Kind;
+import org.openjdk.javax.tools.SimpleJavaFileObject;
 import org.openjdk.tools.javac.file.JavacFileManager;
 import org.openjdk.tools.javac.parser.Tokens.TokenKind;
 import org.openjdk.tools.javac.tree.JCTree.JCCompilationUnit;
diff --git a/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java b/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java
index 5bce89e..44f57eb 100644
--- a/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java
+++ b/core/src/main/java/com/google/googlejavaformat/java/JavaInputAstVisitor.java
@@ -74,7 +74,7 @@ import java.util.Deque;
 import java.util.List;
 import java.util.Map;
 import java.util.regex.Pattern;
-import javax.lang.model.element.Name;
+import org.openjdk.javax.lang.model.element.Name;
 import org.openjdk.source.tree.AnnotatedTypeTree;
 import org.openjdk.source.tree.AnnotationTree;
 import org.openjdk.source.tree.ArrayAccessTree;
diff --git a/core/src/main/java/com/google/googlejavaformat/java/ModifierOrderer.java b/core/src/main/java/com/google/googlejavaformat/java/ModifierOrderer.java
index 4e0f37d..6eac0bc 100644
--- a/core/src/main/java/com/google/googlejavaformat/java/ModifierOrderer.java
+++ b/core/src/main/java/com/google/googlejavaformat/java/ModifierOrderer.java
@@ -30,7 +30,7 @@ import java.util.Iterator;
 import java.util.List;
 import java.util.Map;
 import java.util.Map.Entry;
-import javax.lang.model.element.Modifier;
+import org.openjdk.javax.lang.model.element.Modifier;
 import org.openjdk.tools.javac.parser.Tokens.TokenKind;
 
 /** Fixes sequences of modifiers to be in JLS order. */
diff --git a/core/src/main/java/com/google/googlejavaformat/java/RemoveUnusedImports.java b/core/src/main/java/com/google/googlejavaformat/java/RemoveUnusedImports.java
index 5904917..b8746d7 100644
--- a/core/src/main/java/com/google/googlejavaformat/java/RemoveUnusedImports.java
+++ b/core/src/main/java/com/google/googlejavaformat/java/RemoveUnusedImports.java
@@ -36,12 +36,12 @@ import java.net.URI;
 import java.util.LinkedHashSet;
 import java.util.Map;
 import java.util.Set;
-import javax.tools.Diagnostic;
-import javax.tools.DiagnosticCollector;
-import javax.tools.DiagnosticListener;
-import javax.tools.JavaFileObject;
-import javax.tools.SimpleJavaFileObject;
-import javax.tools.StandardLocation;
+import org.openjdk.javax.tools.Diagnostic;
+import org.openjdk.javax.tools.DiagnosticCollector;
+import org.openjdk.javax.tools.DiagnosticListener;
+import org.openjdk.javax.tools.JavaFileObject;
+import org.openjdk.javax.tools.SimpleJavaFileObject;
+import org.openjdk.javax.tools.StandardLocation;
 import org.openjdk.source.doctree.DocCommentTree;
 import org.openjdk.source.doctree.ReferenceTree;
 import org.openjdk.source.tree.IdentifierTree;
diff --git a/core/src/main/java/com/google/googlejavaformat/java/Trees.java b/core/src/main/java/com/google/googlejavaformat/java/Trees.java
index 79ae50e..0280424 100644
--- a/core/src/main/java/com/google/googlejavaformat/java/Trees.java
+++ b/core/src/main/java/com/google/googlejavaformat/java/Trees.java
@@ -16,7 +16,7 @@ package com.google.googlejavaformat.java;
 
 import java.io.IOError;
 import java.io.IOException;
-import javax.lang.model.element.Name;
+import org.openjdk.javax.lang.model.element.Name;
 import org.openjdk.source.tree.ClassTree;
 import org.openjdk.source.tree.CompoundAssignmentTree;
 import org.openjdk.source.tree.ExpressionTree;
