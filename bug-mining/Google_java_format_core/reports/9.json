{"url":"https://api.github.com/repos/google/google-java-format/issues/58","repository_url":"https://api.github.com/repos/google/google-java-format","labels_url":"https://api.github.com/repos/google/google-java-format/issues/58/labels{/name}","comments_url":"https://api.github.com/repos/google/google-java-format/issues/58/comments","events_url":"https://api.github.com/repos/google/google-java-format/issues/58/events","html_url":"https://github.com/google/google-java-format/issues/58","id":165260528,"node_id":"MDU6SXNzdWUxNjUyNjA1Mjg=","number":58,"title":"NullPointerException when removing unused imports","user":{"login":"gabrielittner","id":1358105,"node_id":"MDQ6VXNlcjEzNTgxMDU=","avatar_url":"https://avatars.githubusercontent.com/u/1358105?v=4","gravatar_id":"","url":"https://api.github.com/users/gabrielittner","html_url":"https://github.com/gabrielittner","followers_url":"https://api.github.com/users/gabrielittner/followers","following_url":"https://api.github.com/users/gabrielittner/following{/other_user}","gists_url":"https://api.github.com/users/gabrielittner/gists{/gist_id}","starred_url":"https://api.github.com/users/gabrielittner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabrielittner/subscriptions","organizations_url":"https://api.github.com/users/gabrielittner/orgs","repos_url":"https://api.github.com/users/gabrielittner/repos","events_url":"https://api.github.com/users/gabrielittner/events{/privacy}","received_events_url":"https://api.github.com/users/gabrielittner/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"cushon","id":478458,"node_id":"MDQ6VXNlcjQ3ODQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/478458?v=4","gravatar_id":"","url":"https://api.github.com/users/cushon","html_url":"https://github.com/cushon","followers_url":"https://api.github.com/users/cushon/followers","following_url":"https://api.github.com/users/cushon/following{/other_user}","gists_url":"https://api.github.com/users/cushon/gists{/gist_id}","starred_url":"https://api.github.com/users/cushon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cushon/subscriptions","organizations_url":"https://api.github.com/users/cushon/orgs","repos_url":"https://api.github.com/users/cushon/repos","events_url":"https://api.github.com/users/cushon/events{/privacy}","received_events_url":"https://api.github.com/users/cushon/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"cushon","id":478458,"node_id":"MDQ6VXNlcjQ3ODQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/478458?v=4","gravatar_id":"","url":"https://api.github.com/users/cushon","html_url":"https://github.com/cushon","followers_url":"https://api.github.com/users/cushon/followers","following_url":"https://api.github.com/users/cushon/following{/other_user}","gists_url":"https://api.github.com/users/cushon/gists{/gist_id}","starred_url":"https://api.github.com/users/cushon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cushon/subscriptions","organizations_url":"https://api.github.com/users/cushon/orgs","repos_url":"https://api.github.com/users/cushon/repos","events_url":"https://api.github.com/users/cushon/events{/privacy}","received_events_url":"https://api.github.com/users/cushon/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2016-07-13T08:02:05Z","updated_at":"2016-07-13T17:41:57Z","closed_at":"2016-07-13T17:41:57Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The stacktrace:\n\n```\njava.lang.NullPointerException\n        at com.google.googlejavaformat.java.RemoveUnusedImports$UnusedImportScanner.recordSimpleName(RemoveUnusedImports.java:123)\n        at com.google.googlejavaformat.java.RemoveUnusedImports$UnusedImportScanner.recordReference(RemoveUnusedImports.java:118)\n        at com.google.googlejavaformat.java.RemoveUnusedImports$UnusedImportScanner.recordTag(RemoveUnusedImports.java:105)\n        at com.google.googlejavaformat.java.RemoveUnusedImports$UnusedImportScanner.access$000(RemoveUnusedImports.java:77)\n        at com.google.googlejavaformat.java.RemoveUnusedImports$UnusedImportScanner$1.visit(RemoveUnusedImports.java:88)\n        at org.eclipse.jdt.core.dom.TagElement.accept0(TagElement.java:278)\n        at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711)\n        at org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2782)\n        at org.eclipse.jdt.core.dom.TagElement.accept0(TagElement.java:280)\n        at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711)\n        at org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2782)\n        at org.eclipse.jdt.core.dom.Javadoc.accept0(Javadoc.java:205)\n        at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711)\n        at com.google.googlejavaformat.java.RemoveUnusedImports$UnusedImportScanner.visit(RemoveUnusedImports.java:84)\n        at org.eclipse.jdt.core.dom.Javadoc.accept0(Javadoc.java:202)\n        at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711)\n        at org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:2759)\n        at org.eclipse.jdt.core.dom.MethodDeclaration.accept0(MethodDeclaration.java:614)\n        at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711)\n        at org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2782)\n        at org.eclipse.jdt.core.dom.TypeDeclaration.accept0(TypeDeclaration.java:470)\n        at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711)\n        at org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2782)\n        at org.eclipse.jdt.core.dom.CompilationUnit.accept0(CompilationUnit.java:212)\n        at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711)\n        at com.google.googlejavaformat.java.RemoveUnusedImports.removeUnusedImports(RemoveUnusedImports.java:153)\n        at com.google.googlejavaformat.java.FormatFileCallable.call(FormatFileCallable.java:44)\n        at com.google.googlejavaformat.java.FormatFileCallable.call(FormatFileCallable.java:28)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n```\n\nThe class where it happens: \n\n```\npackage com.gabrielittner.db;\n\nimport java.io.Closeable;\nimport java.util.concurrent.TimeUnit;\n\n/**\n * An in-progress database transaction.\n */\npublic interface Transaction extends Closeable {\n    /**\n     * End a transaction. See {@link ReactiveDatabase#newTransaction()} for notes about how to\n     * use this and when transactions are committed and rolled back.\n     */\n    void end();\n\n    /**\n     * Marks the current transaction as successful. Do not do any more database work between\n     * calling this and calling {@link #end()}. Do as little non-database work as possible in that\n     * situation too. If any errors are encountered between this and {@link #end()} the transaction\n     * will still be committed.\n     */\n    void markSuccessful();\n\n    /**\n     * Temporarily end the transaction to let other threads run. The transaction is assumed to be\n     * successful so far. Do not call {@link #markSuccessful()} before calling this. When this\n     * returns a new transaction will have been created but not marked as successful. This assumes\n     * that there are no nested transactions (newTransaction has only been called once) and will\n     * throw an exception if that is not the case.\n     *\n     * @return true if the transaction was yielded\n     */\n    boolean yieldIfContendedSafely();\n\n    /**\n     * Temporarily end the transaction to let other threads run. The transaction is assumed to be\n     * successful so far. Do not call {@link #markSuccessful()} before calling this. When this\n     * returns a new transaction will have been created but not marked as successful. This assumes\n     * that there are no nested transactions (newTransaction has only been called once) and will\n     * throw an exception if that is not the case.\n     *\n     * @param sleepAmount if > 0, sleep this long before starting a new transaction if\n     *                    the lock was actually yielded. This will allow other background threads\n     *                    to make some more progress than they would if we started the transaction\n     *                    immediately.\n     * @return true if the transaction was yielded\n     */\n    boolean yieldIfContendedSafely(long sleepAmount, TimeUnit sleepUnit);\n\n    /**\n     * Equivalent to calling {@link #end()}\n     */\n    @Override\n    void close();\n}\n```\n\nI've used a jar built from the latest commit 70ab4ac.\n","closed_by":{"login":"cushon","id":478458,"node_id":"MDQ6VXNlcjQ3ODQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/478458?v=4","gravatar_id":"","url":"https://api.github.com/users/cushon","html_url":"https://github.com/cushon","followers_url":"https://api.github.com/users/cushon/followers","following_url":"https://api.github.com/users/cushon/following{/other_user}","gists_url":"https://api.github.com/users/cushon/gists{/gist_id}","starred_url":"https://api.github.com/users/cushon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cushon/subscriptions","organizations_url":"https://api.github.com/users/cushon/orgs","repos_url":"https://api.github.com/users/cushon/repos","events_url":"https://api.github.com/users/cushon/events{/privacy}","received_events_url":"https://api.github.com/users/cushon/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/google/google-java-format/issues/58/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google/google-java-format/issues/58/timeline","performed_via_github_app":null,"state_reason":"completed"}