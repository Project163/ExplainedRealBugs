<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:47:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3367] getClassloader permission</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3367</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;When I deny getClassloader with conditional permission admin for a specific bundle the bundle throws a securityexception when starting the bundle. &lt;/p&gt;

&lt;p&gt;org.osgi.framework.BundleException: Activator start error in bundle HelloBundle &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;.&lt;br/&gt;
        at org.apache.felix.framework.Felix.activateBundle (Felix.java:1908)&lt;br/&gt;
        at org.apache.felix.framework.Felix.startBundle (Felix.java:1783)&lt;br/&gt;
        at org.apache.felix.framework.BundleImpl.start (BundleImpl.java:919)&lt;br/&gt;
        at com.technicolor.osgi.bundle.bm.tasks.StartTask.run (StartTask.java:77)&lt;br/&gt;
        at com.technicolor.osgi.bundle.bm.TaskQueue$1.run (TaskQueue.java:92)&lt;br/&gt;
        at java.lang.Thread.run (Unknown Source, bco=16)&lt;br/&gt;
Caused by: java.lang.SecurityException: java.security.AccessControlException: permission failure&lt;br/&gt;
        at org.apache.felix.framework.Felix$1.checkPermission (Felix.java:586)&lt;br/&gt;
        at java.lang.ClassLoader.getParent (Unknown Source, bco=36)&lt;br/&gt;
        at org.apache.felix.framework.ModuleImpl.getBootDelegationClassLoader (ModuleImpl.java:1654)&lt;br/&gt;
        at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation (ModuleImpl.java:697)&lt;br/&gt;
        at org.apache.felix.framework.ModuleImpl.access$400 (ModuleImpl.java:71)&lt;br/&gt;
        at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass (ModuleImpl.java:1768)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass (Native Method)&lt;br/&gt;
        at java.lang.ClassLoader.handleLoadClass (Native Method)&lt;br/&gt;
        at java.lang.ClassLoader.handleLoadClass (Native Method)&lt;br/&gt;
        at HelloBundle.Activator.&amp;lt;init&amp;gt; (Activator.java:12)&lt;br/&gt;
        at org.apache.felix.framework.Felix.createBundleActivator (Felix.java:3716)&lt;br/&gt;
        at org.apache.felix.framework.Felix.activateBundle (Felix.java:1856)&lt;br/&gt;
        ... 5 more&lt;br/&gt;
Caused by: java.security.AccessControlException: permission failure&lt;br/&gt;
        at java.security.AccessControlContext.checkPermission (Unknown Source, bco=47)&lt;br/&gt;
        at java.security.AccessController.checkPermission (Unknown Source, bco=21)&lt;br/&gt;
        at java.lang.SecurityManager.checkPermission (Unknown Source, bco=4)&lt;br/&gt;
        at org.apache.felix.framework.Felix$1.checkPermission (Felix.java:587)&lt;br/&gt;
        ... 16 more&lt;/p&gt;

&lt;p&gt;shouldn&apos;t &quot;activator = (BundleActivator) clazz.newInstance();&quot; in createBundleActivator happen in doPrivileged ? For example:&lt;br/&gt;
            try {&lt;br/&gt;
              activator = (BundleActivator) AccessController.doPrivileged(new PrivilegedExceptionAction() {&lt;br/&gt;
              public Object run() throws Exception &lt;/p&gt;
{
                return (BundleActivator) clazz.newInstance();
              }
&lt;p&gt;            });&lt;br/&gt;
            } catch (PrivilegedActionException e) &lt;/p&gt;
{
              throw e.getException();
            }
&lt;p&gt;     &lt;br/&gt;
works.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12544596">FELIX-3367</key>
            <summary>getClassloader permission</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="slimmy">Andie Similon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Feb 2012 12:10:13 +0000</created>
                <updated>Fri, 1 Feb 2013 21:14:59 +0000</updated>
                            <resolved>Fri, 1 Feb 2013 21:14:59 +0000</resolved>
                                    <version>framework-3.2.2</version>
                                    <fixVersion>framework-4.2.0</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13219496" author="rickhall" created="Wed, 29 Feb 2012 20:14:04 +0000"  >&lt;p&gt;It looks like the issue is in getBootDelegationClassLoader(), we should be have a privileged block around getting the parent class loader, which is what is causing the issue. Putting the privileged block around creating the instance is probably too broad.&lt;/p&gt;</comment>
                            <comment id="13393372" author="rickhall" created="Sat, 16 Jun 2012 19:21:35 +0000"  >&lt;p&gt;Karl, take a look and see if my suggested fix is correct, thanks.&lt;/p&gt;</comment>
                            <comment id="13569089" author="karlpauls" created="Fri, 1 Feb 2013 21:14:59 +0000"  >&lt;p&gt;I made it so that we call getParent in a secure action. This should fix this issues. Please close if it works for you. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229782</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1avd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>271547</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>