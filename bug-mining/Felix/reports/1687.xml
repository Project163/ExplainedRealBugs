<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:44:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3675] [DS] NPE shutting down a component due to service already removed</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3675</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Stack trace looks like this:&lt;/p&gt;

&lt;p&gt;&amp;gt;Stack Dump = java.lang.NullPointerException&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.helper.BindMethod.getParameters(BindMethod.java:610)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:233)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:611)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:492)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.DependencyManager.invokeUnbindMethod(DependencyManager.java:1276)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.DependencyManager.unbind(DependencyManager.java:1131)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.DependencyManager.close(DependencyManager.java:970)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.ImmediateComponentManager.disposeImplementationObject(ImmediateComponentManager.java:274)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.ImmediateComponentManager.deleteComponent(ImmediateComponentManager.java:147)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.AbstractComponentManager$Active.ungetService(AbstractComponentManager.java:1697)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.ImmediateComponentManager.ungetService(ImmediateComponentManager.java:692)&lt;/p&gt;


&lt;p&gt;I think that one thread is ungetting a service supplied by a DS component, and another thread is removing one of the dependencies of the DS component.  The shutdown thread (a) gets all the service references and then (b) goes through and tries to unbind them.  The parameter info for a service reference can be removed if another thread removes the service reference between (a) and (b). &lt;/p&gt;</description>
                <environment></environment>
        <key id="12608722">FELIX-3675</key>
            <summary>[DS] NPE shutting down a component due to service already removed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djencks">David Jencks</assignee>
                                    <reporter username="djencks">David Jencks</reporter>
                        <labels>
                    </labels>
                <created>Sat, 22 Sep 2012 00:31:40 +0000</created>
                <updated>Tue, 20 Nov 2012 10:58:15 +0000</updated>
                            <resolved>Thu, 18 Oct 2012 06:24:58 +0000</resolved>
                                    <version>scr-1.8.0</version>
                                    <fixVersion>scr-1.6.2</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13477243" author="djencks" created="Tue, 16 Oct 2012 18:23:03 +0000"  >&lt;p&gt;Original NPE fixed in rev 1381408.  There are a couple more opportunities for problems in update and unbind methods, such as&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.helper.BindMethod.getParameters(BindMethod.java:610)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:233)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:611)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:492)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.DependencyManager.invokeUnbindMethod(DependencyManager.java:1276)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.DependencyManager.unbind(DependencyManager.java:1131)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.DependencyManager.close(DependencyManager.java:970)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.ImmediateComponentManager.disposeImplementationObject(ImmediateComponentManager.java:274)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.ImmediateComponentManager.deleteComponent(ImmediateComponentManager.java:147)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.AbstractComponentManager$Active.ungetService(AbstractComponentManager.java:1697)&lt;br/&gt;
&amp;gt;	at org.apache.felix.scr.impl.manager.ImmediateComponentManager.ungetService(ImmediateComponentManager.java:692)&lt;/p&gt;

&lt;p&gt;these should be fixed in r1398912.&lt;/p&gt;</comment>
                            <comment id="13478725" author="djencks" created="Thu, 18 Oct 2012 06:24:58 +0000"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                            <comment id="13501029" author="fmeschbe" created="Tue, 20 Nov 2012 10:58:15 +0000"  >&lt;p&gt;Close after release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249091</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a4pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57035</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>