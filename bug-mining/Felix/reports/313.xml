<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:08:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-660] &quot;Class in different directory than declared&quot; error when bundle classes in a directory other than bundle root</title>
                <link>https://issues.apache.org/jira/browse/FELIX-660</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Per the message &lt;a href=&quot;http://www.mail-archive.com/users@felix.apache.org/msg01814.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/users@felix.apache.org/msg01814.html&lt;/a&gt; in Felix mailing list, &lt;/p&gt;

&lt;p&gt;When classes are not in a subdirectory under bundle root bundle:bundle fail with the error like:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;bundle:bundle&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Error building bundle test:test:bundle:0.0.1-SNAPSHOT : Class in different directory than declared. Path from class name is test/Test.class but the path in the jar is /test/Test.class from Jar:dot&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Error building bundle test:test:bundle:0.0.1-SNAPSHOT : Class in different directory than declared. Path from class name is test/Test.class but the path in the jar is /test/Test.class from Jar:dot&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Error(s) found in bundle configuration&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;My maven-bundle-plugin configuration is :&lt;/p&gt;

&lt;p&gt;  &amp;lt;plugins&amp;gt;&lt;br/&gt;
            &amp;lt;plugin&amp;gt;&lt;br/&gt;
                &amp;lt;groupId&amp;gt;org.apache.felix&amp;lt;/groupId&amp;gt;&lt;br/&gt;
                &amp;lt;artifactId&amp;gt;maven-bundle-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
                &amp;lt;extensions&amp;gt;true&amp;lt;/extensions&amp;gt;&lt;br/&gt;
                &amp;lt;configuration&amp;gt;&lt;br/&gt;
                    &amp;lt;instructions&amp;gt;                        &lt;br/&gt;
                        &amp;lt;Include-Resource&amp;gt;&lt;/p&gt;
{maven-resources}
&lt;p&gt;,classes=target/classes&amp;lt;/Include-Resource&amp;gt;&lt;br/&gt;
                        &amp;lt;Implementation-Title&amp;gt;Test&amp;lt;/Implementation-Title&amp;gt;&lt;br/&gt;
                        &amp;lt;Implementation-Version&amp;gt;${pom.version}&amp;lt;/Implementation-Version&amp;gt;&lt;br/&gt;
                        &amp;lt;Implementation-Vendor&amp;gt;XXX&amp;lt;/Implementation-Vendor&amp;gt;&lt;br/&gt;
                        &amp;lt;Implementation-Vendor-Id&amp;gt;XXX&amp;lt;/Implementation-Vendor-Id&amp;gt;&lt;br/&gt;
                        &amp;lt;Private-Package&amp;gt;test*&amp;lt;/Private-Package&amp;gt;&lt;br/&gt;
                        &amp;lt;Bundle-ClassPath&amp;gt;classes&amp;lt;/Bundle-ClassPath&amp;gt;&lt;br/&gt;
                    &amp;lt;/instructions&amp;gt;&lt;br/&gt;
                &amp;lt;/configuration&amp;gt;&lt;br/&gt;
            &amp;lt;/plugin&amp;gt;   &lt;br/&gt;
        &amp;lt;/plugins&amp;gt;  &lt;/p&gt;

&lt;p&gt;A simple test project is attached. Run &quot;mvn install&quot; to recreate the problem.&lt;/p&gt;</description>
                <environment>Maven version: 2.0.9&lt;br/&gt;
Java version: 1.6.0_04&lt;br/&gt;
OS name: &amp;quot;windows xp&amp;quot; version: &amp;quot;5.1&amp;quot; arch: &amp;quot;x86&amp;quot; Family: &amp;quot;windows&amp;quot;</environment>
        <key id="12401614">FELIX-660</key>
            <summary>&quot;Class in different directory than declared&quot; error when bundle classes in a directory other than bundle root</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pkriens">Peter Kriens</assignee>
                                    <reporter username="ugopalak@in.ibm.com">Gopalakrishnan U</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Aug 2008 16:55:41 +0000</created>
                <updated>Thu, 12 Mar 2009 08:05:00 +0000</updated>
                            <resolved>Mon, 2 Feb 2009 10:05:09 +0000</resolved>
                                    <version>maven-bundle-plugin-1.4.0</version>
                    <version>maven-bundle-plugin-1.4.1</version>
                                    <fixVersion>maven-bundle-plugin-2.0.0</fixVersion>
                                    <component>Maven Bundle Plugin</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12619584" author="ugopalak@in.ibm.com" created="Mon, 4 Aug 2008 17:00:25 +0000"  >&lt;p&gt;A simple test eclipse project to recreate the problem. Unzip/Import the project into eclipse and run &quot;mvn install&apos; to recreate the problem.&lt;/p&gt;</comment>
                            <comment id="12619693" author="ncampion" created="Mon, 4 Aug 2008 20:43:20 +0000"  >&lt;p&gt;Verified on linux (SLES 10 2.6.16.60), arch &quot;x86&quot;, java version java 1.5.0 SR7&lt;/p&gt;</comment>
                            <comment id="12619800" author="mcculls" created="Tue, 5 Aug 2008 06:44:35 +0000"  >&lt;p&gt;Thanks for the testcase - setting fix target to 1.4.3 because this will require a change to the Bnd library, specifically the analyzeJar method in Processor.java:127 where it removes the prefix from the path, but doesn&apos;t check for leftover slashes at the beginning. This causes the failing check, because the relative path still has a slash at the beginning but the path computed from the class doesn&apos;t.&lt;/p&gt;</comment>
                            <comment id="12628231" author="topping" created="Thu, 4 Sep 2008 02:06:45 +0000"  >&lt;p&gt;For some reason, adding &lt;/p&gt;

&lt;p&gt;           &amp;lt;Include-Resource&amp;gt;src/main/resources&amp;lt;/Include-Resource&amp;gt;&lt;/p&gt;

&lt;p&gt;avoids this problem.&lt;/p&gt;</comment>
                            <comment id="12653228" author="mcculls" created="Thu, 4 Dec 2008 08:54:21 +0000"  >&lt;p&gt;The following patch to Bnd 0.0.295 fixes two problems:&lt;/p&gt;

&lt;p&gt;1) path entries on the Bundle-ClassPath won&apos;t end in &apos;/&apos;, but analyzeJar expects the given path prefix to end in &apos;/&apos; - so we need to either add it before analyzeJar (as done in this patch) or make analyzeJar more forgiving of path prefixes that don&apos;t end in &apos;/&apos;&lt;/p&gt;

&lt;p&gt;2) the Verifier class has a bug where embedded directories always cause a NPE because there is no embedded resource (possible copy-paste error as the TODO comment suggests this is not finished, so have just removed that line for now)&lt;/p&gt;</comment>
                            <comment id="12653230" author="mcculls" created="Thu, 4 Dec 2008 08:57:05 +0000"  >&lt;p&gt;Hi Peter, please see attached patch for Bnd 0.0.295&lt;/p&gt;</comment>
                            <comment id="12668401" author="mcculls" created="Thu, 29 Jan 2009 11:17:18 +0000"  >&lt;p&gt;Updated patch based on Bnd 0.0.308&lt;/p&gt;</comment>
                            <comment id="12669545" author="pkriens" created="Mon, 2 Feb 2009 10:05:09 +0000"  >&lt;p&gt;Applied the patch in bnd-310&lt;/p&gt;</comment>
                            <comment id="12681192" author="mcculls" created="Thu, 12 Mar 2009 08:05:00 +0000"  >&lt;p&gt;Closing as maven-bundle-plugin 2.0.0 has been released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12398997" name="FELIX-660-20090129.patch" size="691" author="mcculls" created="Thu, 29 Jan 2009 11:17:17 +0000"/>
                            <attachment id="12395274" name="FELIX-660-BND-PATCH.txt" size="1389" author="mcculls" created="Thu, 4 Dec 2008 08:54:21 +0000"/>
                            <attachment id="12387495" name="test_felix_660.zip" size="2935" author="ugopalak@in.ibm.com" created="Mon, 4 Aug 2008 17:00:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>44016</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1apj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>270602</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>