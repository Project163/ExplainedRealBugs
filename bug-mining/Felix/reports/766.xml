<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:14:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1838] PackageAdmin.getExportedPackages() duplicates output for packages with different version</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1838</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I noticed that when you have a bundle that exports the same package twice, but with different versions, the PackageAdmin returns the package twice for each version.&lt;/p&gt;

&lt;p&gt;Assume the following code in BundleActivator.start():&lt;/p&gt;

&lt;p&gt;ServiceTracker tracker = new ServiceTracker(context, PackageAdmin.class.getName(), null);&lt;br/&gt;
tracker.open();&lt;br/&gt;
PackageAdmin admin = (PackageAdmin) tracker.waitForService(5000);&lt;br/&gt;
tracker.close();&lt;/p&gt;

&lt;p&gt;ExportedPackage[] exportedPackages = admin.getExportedPackages(context.getBundle());&lt;br/&gt;
for (ExportedPackage exportedPackage : exportedPackages) {&lt;br/&gt;
    System.out.println(exportedPackage.getName()+&quot;:&quot;+exportedPackage.getVersion());&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;And the corresponding manifest file of the same bundle&lt;/p&gt;

&lt;p&gt;Manifest-Version: 1.0&lt;br/&gt;
Bundle-ManifestVersion: 2&lt;br/&gt;
Bundle-Name: Packge Admin test&lt;br/&gt;
Bundle-Version: 1.0.0&lt;br/&gt;
Bundle-SymbolicName: package-admin-test&lt;br/&gt;
Bundle-Activator: pkg.admin.test.Activator&lt;br/&gt;
Import-Package: org.osgi.framework,org.osgi.util.tracker,org.osgi.serv&lt;br/&gt;
 ice.packageadmin&lt;br/&gt;
Export-Package: pkg.admin.test.foo;version=1.0.0,pkg.admin.test.foo;ve&lt;br/&gt;
 rsion=2.0.0&lt;/p&gt;



&lt;p&gt;When I start the bundle in Felix 2.0.2 I get the following output:&lt;/p&gt;

&lt;p&gt;Welcome to Felix&lt;br/&gt;
================&lt;/p&gt;

&lt;p&gt;-&amp;gt; ps&lt;br/&gt;
START LEVEL 1&lt;br/&gt;
   ID   State         Level  Name&lt;br/&gt;
[   0] &lt;span class=&quot;error&quot;&gt;&amp;#91;Active     &amp;#93;&lt;/span&gt; [    0] System Bundle (2.0.2)&lt;br/&gt;
[   1] &lt;span class=&quot;error&quot;&gt;&amp;#91;Active     &amp;#93;&lt;/span&gt; [    1] Apache Felix Bundle Repository (1.4.2)&lt;br/&gt;
[   2] &lt;span class=&quot;error&quot;&gt;&amp;#91;Active     &amp;#93;&lt;/span&gt; [    1] Apache Felix Shell Service (1.4.1)&lt;br/&gt;
[   3] &lt;span class=&quot;error&quot;&gt;&amp;#91;Active     &amp;#93;&lt;/span&gt; [    1] Apache Felix Shell TUI (1.4.1)&lt;br/&gt;
-&amp;gt; install &lt;a href=&quot;file:/home/wtreur/Desktop/package-admin-test.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/home/wtreur/Desktop/package-admin-test.jar&lt;/a&gt;&lt;br/&gt;
Bundle ID: 4&lt;br/&gt;
-&amp;gt; start 4&lt;br/&gt;
pkg.admin.test.foo:1.0.0&lt;br/&gt;
pkg.admin.test.foo:1.0.0&lt;br/&gt;
pkg.admin.test.foo:2.0.0&lt;br/&gt;
pkg.admin.test.foo:2.0.0&lt;/p&gt;


&lt;p&gt;Note that this problem didn&apos;t exist in felix 2.0.1&lt;/p&gt;</description>
                <environment></environment>
        <key id="12439736">FELIX-1838</key>
            <summary>PackageAdmin.getExportedPackages() duplicates output for packages with different version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="waltertreur">Walter Treur</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Nov 2009 08:32:27 +0000</created>
                <updated>Fri, 29 Jan 2010 21:38:36 +0000</updated>
                            <resolved>Tue, 3 Nov 2009 21:27:19 +0000</resolved>
                                                    <fixVersion>framework-2.0.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12773209" author="rickhall" created="Tue, 3 Nov 2009 21:27:19 +0000"  >&lt;p&gt;Missed this fix when refactoring ICapability. Should be working now. Please close this issue if you are satisfied. Thanks.&lt;/p&gt;</comment>
                            <comment id="12773526" author="waltertreur" created="Wed, 4 Nov 2009 15:37:11 +0000"  >&lt;p&gt;I ran the test in in the latest build. It seems to work fine now.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57203</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vxv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>