<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:05:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-352] Caught ZipException with &apos;manifest&apos; goal</title>
                <link>https://issues.apache.org/jira/browse/FELIX-352</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I&apos;m using the maven-bundle-plugin version 1.0 from the releases/bundleplugin-1.0.0 branch.&lt;/p&gt;

&lt;p&gt;The following command fails on a clean project:&lt;br/&gt;
mvn org.apache.felix:maven-bundle-plugin:manifest &lt;/p&gt;

&lt;p&gt;The error message is:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Configuring mojo &apos;org.apache.felix:maven-bundle-plugin:1.0.0:manifest&apos; --&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt;   (f) baseDir = /home/t/work/test&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt;   (f) buildDirectory = /home/t/work/test/target&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt;   (f) instructions = &lt;/p&gt;
{Bundle-Activator=de.example.main.Activator, Export-Package=de.example.main.*}
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt;   (f) manifestLocation = /home/t/work/test/target/classes/META-INF&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt;   (f) outputDirectory = /home/t/work/test/target/classes&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt;   (f) project = org.apache.maven.project.MavenProject@ee7372e9&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; &amp;#8211; end configuration &amp;#8211;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;bundle:manifest&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; BUILD ERROR&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Error trying to generate Manifest&lt;/p&gt;

&lt;p&gt;Embedded error: error in opening zip file&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Trace&lt;br/&gt;
org.apache.maven.lifecycle.LifecycleExecutionException: Error trying to generate Manifest&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:564)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:493)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:463)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:311)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:278)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:143)&lt;br/&gt;
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:334)&lt;br/&gt;
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:125)&lt;br/&gt;
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:280)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)&lt;br/&gt;
Caused by: org.apache.maven.plugin.MojoExecutionException: Error trying to generate Manifest&lt;br/&gt;
        at org.apache.felix.bundleplugin.ManifestPlugin.execute(ManifestPlugin.java:63)&lt;br/&gt;
        at org.apache.felix.bundleplugin.BundlePlugin.execute(BundlePlugin.java:123)&lt;br/&gt;
        at org.apache.felix.bundleplugin.BundlePlugin.execute(BundlePlugin.java:118)&lt;br/&gt;
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:443)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:539)&lt;br/&gt;
        ... 16 more&lt;br/&gt;
Caused by: java.util.zip.ZipException: error in opening zip file&lt;br/&gt;
        at java.util.zip.ZipFile.open(Native Method)&lt;br/&gt;
        at java.util.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:114)&lt;br/&gt;
        at java.util.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:131)&lt;br/&gt;
        at aQute.lib.osgi.ZipResource.build(ZipResource.java:39)&lt;br/&gt;
        at aQute.lib.osgi.ZipResource.build(ZipResource.java:32)&lt;br/&gt;
        at aQute.lib.osgi.Jar.&amp;lt;init&amp;gt;(Jar.java:31)&lt;br/&gt;
        at aQute.lib.osgi.Jar.&amp;lt;init&amp;gt;(Jar.java:50)&lt;br/&gt;
        at aQute.lib.osgi.Analyzer.setJar(Analyzer.java:619)&lt;br/&gt;
        at org.apache.felix.bundleplugin.ManifestPlugin.getAnalyzer(ManifestPlugin.java:116)&lt;br/&gt;
        at org.apache.felix.bundleplugin.ManifestPlugin.getManifest(ManifestPlugin.java:87)&lt;br/&gt;
        at org.apache.felix.bundleplugin.ManifestPlugin.execute(ManifestPlugin.java:59)&lt;br/&gt;
        ... 20 more&lt;/p&gt;

&lt;p&gt;After running &apos;mvn package&apos; the same call of the goal will succeed. &lt;/p&gt;

&lt;p&gt;Quick workarround: log a better error message reporting which zip/jar file was tried to read, when the exception occured.&lt;/p&gt;

&lt;p&gt;This problem occurs in a more advanced setup, too. E.g. when configuring the maven-bundle-plugin inside the pom.xml like the following:&lt;br/&gt;
&amp;lt;plugin&amp;gt;&lt;br/&gt;
  &amp;lt;groupId&amp;gt;org.apache.felix&amp;lt;/groupId&amp;gt;&lt;br/&gt;
  &amp;lt;artifactId&amp;gt;maven-bundle-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
  &amp;lt;configuration&amp;gt;&lt;br/&gt;
    &amp;lt;instructions&amp;gt;&lt;br/&gt;
      &amp;lt;Export-Package&amp;gt;de.example.main.*&amp;lt;/Export-Package&amp;gt;&lt;br/&gt;
      &amp;lt;Bundle-Activator&amp;gt;de.example.main.Activator&amp;lt;/Bundle-Activator&amp;gt;&lt;br/&gt;
    &amp;lt;/instructions&amp;gt;&lt;br/&gt;
  &amp;lt;/configuration&amp;gt;&lt;br/&gt;
  &amp;lt;executions&amp;gt;&lt;br/&gt;
    &amp;lt;execution&amp;gt;&lt;br/&gt;
      &amp;lt;id&amp;gt;export-Manifest-for-Eclipse-PDE&amp;lt;/id&amp;gt;&lt;br/&gt;
      &amp;lt;phase&amp;gt;generate-resources&amp;lt;/phase&amp;gt;&lt;br/&gt;
      &amp;lt;goals&amp;gt;&lt;br/&gt;
        &amp;lt;goal&amp;gt;manifest&amp;lt;/goal&amp;gt;&lt;br/&gt;
      &amp;lt;/goals&amp;gt;&lt;br/&gt;
      &amp;lt;configuration&amp;gt;&lt;br/&gt;
        &amp;lt;manifestLocation&amp;gt;${basedir}/META-INF&amp;lt;/manifestLocation&amp;gt;&lt;br/&gt;
       &amp;lt;/configuration&amp;gt;&lt;br/&gt;
    &amp;lt;/execution&amp;gt;&lt;br/&gt;
  &amp;lt;/executions&amp;gt;&lt;br/&gt;
&amp;lt;/plugin&amp;gt;&lt;/p&gt;

&lt;p&gt;This construct will always fail in the project.&lt;/p&gt;

&lt;p&gt;Sidenote: The above configuration works in another project, so maybe it is an issue in the dependencies declared in the pom.xml. The error message dosn&apos;t help in any way to prevent this problem. I can not find out, which Jar/Zip-File is corrupt or missing when the error occurs.&lt;/p&gt;</description>
                <environment>Linux t-quad 2.6.22-gentoo-r5 #1 SMP Thu Aug 23 09:53:07 CEST 2007 i686 Intel(R) Core(TM)2 Quad CPU @ 2.40GHz GenuineIntel GNU/Linux&lt;br/&gt;
Sun JDK 1.6.0.02 [sun-jdk-1.6]&lt;br/&gt;
$ mvn -version&lt;br/&gt;
Maven version: 2.0.7&lt;br/&gt;
Java version: 1.6.0_02&lt;br/&gt;
OS name: &amp;quot;linux&amp;quot; version: &amp;quot;2.6.22-gentoo-r5&amp;quot; arch: &amp;quot;i386&amp;quot;</environment>
        <key id="12377531">FELIX-352</key>
            <summary>Caught ZipException with &apos;manifest&apos; goal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mcculls">Stuart McCulloch</assignee>
                                    <reporter username="lefou">Tobias Roeser</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Sep 2007 08:30:04 +0000</created>
                <updated>Wed, 30 Jan 2008 10:39:26 +0000</updated>
                            <resolved>Tue, 11 Sep 2007 08:01:36 +0000</resolved>
                                    <version>framework-1.0.0</version>
                                                    <component>Maven Bundle Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12525043" author="lefou" created="Wed, 5 Sep 2007 10:02:07 +0000"  >&lt;p&gt;After more investigation on this issue, I figured out, that the method throwing the Exception is ManifestPlugin.getAnalyzer(). this method doen&apos;t ensures, that the output directory retrieved with getOutputDirectory() exists. After a &apos;mvn clean&apos; the default output directory &apos;target/classes&apos; doesn&apos;t exists. A call to PackageVersionAnalyzer.setJar() with an non existing directory as argument will throw the Exception mentioned above.&lt;/p&gt;

&lt;p&gt;The manifest goal should ensure, that the directory exists before using it, at least if the output directory is the default one.&lt;/p&gt;</comment>
                            <comment id="12526384" author="mcculls" created="Tue, 11 Sep 2007 08:01:36 +0000"  >&lt;p&gt;OK, I&apos;ve added a check that will report a better error message if the file being analyzed is missing:&lt;/p&gt;

&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; BUILD ERROR&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Cannot find /tmp/myProject/myBundle/target/classes (manifest goal must be run after compile phase)&lt;/p&gt;

&lt;p&gt;the error message gives the path to the file, along with the probable reason why it&apos;s missing.&lt;/p&gt;

&lt;p&gt;Note that the manifest goal expects to be executed &lt;em&gt;after&lt;/em&gt; the compile phase, because otherwise&lt;br/&gt;
it has no bundle or classes to analyze (the mojo is marked with &quot;@phase process-classes&quot; but this&lt;br/&gt;
doesn&apos;t stop people from attaching it to earlier phases or running it on empty projects).&lt;/p&gt;

&lt;p&gt;Hope this helps.&lt;/p&gt;</comment>
                            <comment id="12529500" author="mcculls" created="Fri, 21 Sep 2007 17:02:29 +0000"  >&lt;p&gt;can this issue be closed?&lt;/p&gt;</comment>
                            <comment id="12552227" author="mcculls" created="Sun, 16 Dec 2007 16:07:50 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;d like to get all resolved defects verified before releasing the 1.1.0 version of the bundleplugin - so I&apos;d really appreciate it if you could check things are still ok with the current snapshot, and if so close off the defect.&lt;/p&gt;

&lt;p&gt;Thanks in advance!&lt;/p&gt;</comment>
                            <comment id="12563949" author="mcculls" created="Wed, 30 Jan 2008 10:39:26 +0000"  >&lt;p&gt;Closing issue, as the 1.2.0 version of the bundleplugin which contains the fix is now released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1aozz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>270516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>