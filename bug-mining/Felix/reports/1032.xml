<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:18:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2344] DM / callback method is not invoked when an extra dependency is defined within an &quot;init&quot; component method.</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2344</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;This issue applies to the trunk version of dependency manager.&lt;/p&gt;

&lt;p&gt;So, it seems that when a component defines custom dependencies from its &quot;init&quot; method, then such extra dependencies only support auto configuration mode, and not callbacks.&lt;br/&gt;
I have attached to this issue a sample maven project which reproduces the problem:&lt;/p&gt;

&lt;p&gt;In the sample, a &quot;MyClient&quot; component is defining (from its init() method) an extra required dependency over a &quot;MyService&quot; service, using a &quot;bind&quot; callback. So, the start() method is invoked, but the bind method has not been called.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464663">FELIX-2344</key>
            <summary>DM / callback method is not invoked when an extra dependency is defined within an &quot;init&quot; component method.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pderop">Pierre De Rop</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 May 2010 10:04:13 +0000</created>
                <updated>Tue, 10 May 2011 08:34:29 +0000</updated>
                            <resolved>Fri, 11 Jun 2010 06:59:31 +0000</resolved>
                                                                    <component>Dependency Manager</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12868204" author="pderop" created="Mon, 17 May 2010 12:44:44 +0000"  >&lt;p&gt;Just committed a testcase for this issue here:&lt;/p&gt;

&lt;p&gt;dependencymanager/test/src/test/java/org/apache/felix/dm/test/FELIX2344_ExtraDependencyWithCallback.java&lt;/p&gt;</comment>
                            <comment id="12871040" author="marrs" created="Tue, 25 May 2010 07:43:24 +0000"  >&lt;p&gt;Follow up: this only happens when the dependency is required. I&apos;ll extend the test case to demonstrate that, and work on a fix.&lt;/p&gt;</comment>
                            <comment id="12872151" author="pderop" created="Thu, 27 May 2010 09:02:44 +0000"  >&lt;p&gt;The last commit from core/src/main/java/org/apache/felix/dm/impl/dependencies/ServiceDependencyImpl.java (revision r948403)&lt;br/&gt;
seems to partially resolve the problem.&lt;/p&gt;

&lt;p&gt;Indeed, if an extra/required dependency is defined in the Service&apos;s init method, but if the dependency is not available at the time the dependency is added, then&lt;br/&gt;
the bind() method seems to not be called, while the start method is called.&lt;/p&gt;</comment>
                            <comment id="12872471" author="marrs" created="Thu, 27 May 2010 22:06:01 +0000"  >&lt;p&gt;Added a test case and a fix for that scenario.&lt;/p&gt;</comment>
                            <comment id="12872899" author="pderop" created="Fri, 28 May 2010 08:52:01 +0000"  >&lt;p&gt;Marcel,&lt;br/&gt;
The last commit seems to resolve every callback issues.&lt;br/&gt;
But, now, in my environment, I went further on and I think I came across another issue: this time it concerns optional/autoconfig dependencies:&lt;br/&gt;
So, if you define an optional/autoconfig extra dependency from the init() method, then the autoconfig field seems to not be injected with a NullObject.&lt;/p&gt;

&lt;p&gt;I have attached to this issue a modified version of the testcase (see the &quot;sc5&quot; consumer).&lt;/p&gt;</comment>
                            <comment id="12877736" author="pderop" created="Fri, 11 Jun 2010 06:59:31 +0000"  >&lt;p&gt;Committed a fix in revision 953572/953573, which seems to resolve the problem.&lt;br/&gt;
Added new testcase FELIX2344_ExtraDependencyWithAutoConfigTest.java for testing extra/autoconfig dependencies.&lt;br/&gt;
Modified FELIX2344_ExtraDependencyWithCallbackTest.java in order to check that optional dependency callbacks are invoked after the start method call.&lt;/p&gt;</comment>
                            <comment id="13031086" author="marrs" created="Tue, 10 May 2011 08:34:29 +0000"  >&lt;p&gt;Part of the 3.0.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12445760" name="FELIX2344_ExtraDependencyWithCallbackTest.java" size="6330" author="pderop" created="Fri, 28 May 2010 08:52:01 +0000"/>
                            <attachment id="12444658" name="sample.instancebound.tgz" size="7094" author="pderop" created="Mon, 17 May 2010 10:05:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56398</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vy2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184493</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>