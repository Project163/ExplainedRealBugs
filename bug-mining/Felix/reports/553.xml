<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:11:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1481] When performing variable substitution, fileinstall throws an exception if there is a start or stop delimiter without the other one</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1481</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;This is a real problem as there is no way to escape the delimiters currently.&lt;br/&gt;
I think silently discard any malformed substitution would be much better, else any value containing a &apos;}&apos; will cause the config to not be loaded at all.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432945">FELIX-1481</key>
            <summary>When performing variable substitution, fileinstall throws an exception if there is a start or stop delimiter without the other one</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="gnodet">Guillaume Nodet</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Aug 2009 06:54:32 +0000</created>
                <updated>Tue, 8 Sep 2009 13:19:11 +0000</updated>
                            <resolved>Fri, 14 Aug 2009 07:13:46 +0000</resolved>
                                                    <fixVersion>fileinstall-2.0.0</fixVersion>
                                    <component>File Install</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12742746" author="gnt" created="Thu, 13 Aug 2009 06:55:28 +0000"  >&lt;p&gt;I propose the following patch:&lt;/p&gt;

&lt;p&gt;&amp;#8212; a/fileinstall/src/main/java/org/apache/felix/fileinstall/util/Util.java&lt;br/&gt;
+++ b/fileinstall/src/main/java/org/apache/felix/fileinstall/util/Util.java&lt;br/&gt;
@@ -111,16 +111,10 @@ public class Util&lt;/p&gt;

&lt;p&gt;         // If we do not have a start or stop delimiter, then just&lt;br/&gt;
         // return the existing value.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if ((startDelim &amp;lt; 0) &amp;amp;&amp;amp; (stopDelim &amp;lt; 0))&lt;br/&gt;
+        if ((startDelim &amp;lt; 0) || (stopDelim &amp;lt; 0))
         {
             return val;
         }&lt;/li&gt;
	&lt;li&gt;// At this point, we found a stop delimiter without a start,&lt;/li&gt;
	&lt;li&gt;// so throw an exception.&lt;/li&gt;
	&lt;li&gt;else if (((startDelim &amp;lt; 0) || (startDelim &amp;gt; stopDelim)) &amp;amp;&amp;amp; (stopDelim &amp;gt;= 0))&lt;/li&gt;
	&lt;li&gt;{
-            throw new IllegalArgumentException(&quot;stop delimiter with no start delimiter: &quot; + val);
-        }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         // At this point, we have found a variable placeholder so&lt;br/&gt;
         // we must perform a variable substitution on it.&lt;/p&gt;</comment>
                            <comment id="12742747" author="gnt" created="Thu, 13 Aug 2009 07:00:17 +0000"  >&lt;p&gt;In addition, I think fileinstall is 1.4 compatible, so we could change the whole substition code with something derived from:&lt;/p&gt;

&lt;p&gt;            Matcher matcher = Pattern.compile(&quot;\\$&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
{([^}
&lt;p&gt;]+)&lt;br class=&quot;atl-forced-newline&quot; /&gt;}&quot;).matcher(val);&lt;br/&gt;
            while (matcher.find()) {&lt;br/&gt;
                String rep = System.getProperty(matcher.group(1));&lt;br/&gt;
                if (rep != null) &lt;/p&gt;
{
                    val = val.replace(matcher.group(0), rep);
                    matcher.reset(val);
                }
&lt;p&gt;            }&lt;/p&gt;</comment>
                            <comment id="12742771" author="gnt" created="Thu, 13 Aug 2009 08:49:42 +0000"  >&lt;p&gt;Attached is a patch against trunk i&apos;ll apply soon if there&apos;s no objections.&lt;/p&gt;</comment>
                            <comment id="12742828" author="rickhall" created="Thu, 13 Aug 2009 14:03:42 +0000"  >&lt;p&gt;I don&apos;t think the pattern matcher you mention would work, because I don&apos;t think it handles nesting like the current code does, e.g., &quot;${jre-${java.specification.version}}&quot;. It is necessary to start at the innermost match.&lt;/p&gt;

&lt;p&gt;However, I think not throwing an exception for unmatched delimiters is probably fine.&lt;/p&gt;</comment>
                            <comment id="12743101" author="gnt" created="Fri, 14 Aug 2009 06:48:44 +0000"  >&lt;p&gt;RIght, I spotted that after posting my comment.&lt;br/&gt;
Not throwing an exception is imho a requirement, as i have some config values which include some { } without the $, so those cause failures.&lt;/p&gt;</comment>
                            <comment id="12743114" author="gnt" created="Fri, 14 Aug 2009 07:13:46 +0000"  >&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=804096&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=804096&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12416417" name="FELIX-1481.patch" size="1847" author="gnodet" created="Thu, 13 Aug 2009 08:49:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57543</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vyxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184631</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>