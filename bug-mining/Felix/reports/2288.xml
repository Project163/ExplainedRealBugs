<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:55:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4640] missing (&amp;(osgi.ee=JavaSE)(version=1.8)) when embedding in org.apache.felix.framework</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4640</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;When I try to deploy a bundle from a OBRepo occur the below error &apos;Unsatisfied requirement&apos;.&lt;/p&gt;

&lt;p&gt;g! obr:deploy any.bundle&lt;/p&gt;

&lt;p&gt;Unsatisfied requirement(s):&lt;br/&gt;
---------------------------&lt;br/&gt;
   (&amp;amp;(osgi.ee=JavaSE)(version=1.8))&lt;/p&gt;

&lt;p&gt;I would expect that this capability will be provided by system-bundle.&lt;/p&gt;

&lt;p&gt;g! felix:inspect capability osgi.ee&lt;br/&gt;
org.apache.felix.framework &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; provides:&lt;br/&gt;
----------------------------------------&lt;br/&gt;
osgi.ee; OSGi/Minimum &lt;span class=&quot;error&quot;&gt;&amp;#91;1.0.0, 1.1.0, 1.2.0&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;UNUSED&amp;#93;&lt;/span&gt;&lt;br/&gt;
osgi.ee; JavaSE &lt;span class=&quot;error&quot;&gt;&amp;#91;1.0.0, 1.1.0, 1.2.0, 1.3.0, 1.4.0, 1.5.0, 1.6.0, 1.7.0, 1.8.0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;My full runtime environment is.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;g! lb &lt;br/&gt;
START LEVEL 1&lt;br/&gt;
   ID|State      |Level|Name&lt;br/&gt;
    0|Active     |    0|System Bundle (4.4.0)&lt;br/&gt;
    1|Active     |    1|Apache Felix Bundle Repository (2.0.2)&lt;br/&gt;
    2|Active     |    1|bndlib (2.3.0.201405100607)&lt;br/&gt;
    3|Active     |    1|biz.aQute.repository (2.1.0.062515_230REL)&lt;br/&gt;
    4|Active     |    1|Java XML Streaming API (1.0.1.v201004272200)&lt;br/&gt;
    5|Active     |    1|JAXP XML (1.3.4.v201005080400)&lt;br/&gt;
    6|Active     |    1|Apache Felix Gogo Command (0.14.0)&lt;br/&gt;
    7|Active     |    1|Apache Felix Gogo Runtime (0.12.1)&lt;br/&gt;
    8|Active     |    1|Apache Felix Gogo Shell (0.10.0.v201212101605)&lt;/p&gt;

&lt;p&gt;I found one related fact in &apos;org.apache.felix.bundlerepository-2.0.2/org.apache.felix.bundlerepository.impl.LocalResourceImpl.java&apos;.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;declared &apos;osgi.ee&apos; capabilities from framework-bundle will realized as &apos;ee=JavaSE-1.8&apos; capability&lt;/li&gt;
	&lt;li&gt;but the filter require 1 spitted capability (&amp;lt;java-ee-name&amp;gt; and &amp;lt;java-ee-version&amp;gt;) &apos;(&amp;amp;(osgi.ee=JavaSE)(version=1.8))&apos;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Here the patch who works for me.&lt;/b&gt;&lt;br/&gt;
85c85,86&lt;br/&gt;
&amp;lt;                     cap.addProperty(Capability.EXECUTIONENVIRONMENT, tokens.nextToken().trim());&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&amp;gt;                     String eeValue = tokens.nextToken().trim();&lt;br/&gt;
&amp;gt; 					cap.addProperty(Capability.EXECUTIONENVIRONMENT, eeValue);&lt;br/&gt;
86a88,100&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt;                     String[] split = eeValue.split(&quot;-&quot;);&lt;br/&gt;
&amp;gt;                     switch (split.length) {&lt;br/&gt;
&amp;gt; 					case 2:&lt;br/&gt;
&amp;gt; 						String osgi_ee = &quot;osgi.&quot; + Capability.EXECUTIONENVIRONMENT;&lt;br/&gt;
&amp;gt; 						CapabilityImpl cap2 = new CapabilityImpl(osgi_ee, new PropertyImpl[]&lt;/p&gt;
{
&amp;gt; 							new PropertyImpl(osgi_ee, null, split[0]),
&amp;gt; 							new PropertyImpl(&quot;version&quot;, null, split[1])
&amp;gt; 						}
&lt;p&gt;);&lt;br/&gt;
&amp;gt; 						addCapability(cap2);&lt;br/&gt;
&amp;gt; 						break;&lt;br/&gt;
&amp;gt; 					}&lt;/p&gt;
</description>
                <environment>any</environment>
        <key id="12741801">FELIX-4640</key>
            <summary>missing (&amp;(osgi.ee=JavaSE)(version=1.8)) when embedding in org.apache.felix.framework</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="jwausle">Jan Winter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Sep 2014 14:30:03 +0000</created>
                <updated>Wed, 18 Mar 2015 12:50:59 +0000</updated>
                            <resolved>Wed, 24 Sep 2014 12:11:31 +0000</resolved>
                                                    <fixVersion>bundlerepository-2.0.4</fixVersion>
                                    <component>Bundle Repository (OBR)</component>
                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14135527" author="jwausle" created="Tue, 16 Sep 2014 14:34:42 +0000"  >&lt;p&gt;Related discussions: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://groups.google.com/forum/#!topic/bndtools-users/PccjjZMbE6U&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://groups.google.com/forum/#!topic/bndtools-users/PccjjZMbE6U&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://groups.google.com/forum/#!topic/bndtools-users/VRNZoorZKWU&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://groups.google.com/forum/#!topic/bndtools-users/VRNZoorZKWU&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14144737" author="bosschaert" created="Tue, 23 Sep 2014 12:40:17 +0000"  >&lt;p&gt;While looking at it, I realized that we&apos;re basically constructing the &lt;tt&gt;osgi.ee&lt;/tt&gt; capability here for the system bundle, but the system bundle already has this capability, so I thought it might be easier to copy it. For example you can find the &lt;tt&gt;osgi.ee&lt;/tt&gt; capability of the system bundle with the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        Bundle b = context.getBundle(0);
        BundleRevision br = b.adapt(BundleRevision.class);
        List&amp;lt;Capability&amp;gt; caps = br.getCapabilities(&lt;span class=&quot;code-quote&quot;&gt;&quot;osgi.ee&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&quot;caps);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which prints out:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;osgi.ee; {osgi.ee=OSGi/Minimum, version=[1.0.0, 1.1.0, 1.2.0]}, [0] osgi.ee; {osgi.ee=JavaSE, version=[1.0.0, 1.1.0, 1.2.0, 1.3.0, 1.4.0, 1.5.0, 1.6.0]}]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So I started thinking, would it not be better to simply copy &lt;em&gt;all&lt;/em&gt; the capabilities from the system bundle? I&apos;ve attached &lt;tt&gt;cap.diff&lt;/tt&gt; patch that does this to this issue. This would create a &lt;b&gt;lot&lt;/b&gt; of capabilities (e.g. every exported package from the system bundle is also represented as a capability) but I have the feeling that this is more generic and more complete...&lt;/p&gt;

&lt;p&gt;Thoughts anyone?&lt;/p&gt;</comment>
                            <comment id="14144835" author="jwausle" created="Tue, 23 Sep 2014 14:30:41 +0000"  >&lt;p&gt;I tested Your patch. (works fine &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ) &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;with a little hint:  append 
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (..) { ... addCapability(bcap);} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14145367" author="bosschaert" created="Tue, 23 Sep 2014 20:25:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;with a little hint: append for (..) { ... addCapability(bcap);} &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;doh! yes adding that would be useful. I hope you tested it with that addition &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14146254" author="bosschaert" created="Wed, 24 Sep 2014 12:11:31 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1627285&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1627285&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jwausle&quot; class=&quot;user-hover&quot; rel=&quot;jwausle&quot;&gt;jwausle&lt;/a&gt; it would be great if you could double-check once more that this fixes the issue for you.&lt;/p&gt;</comment>
                            <comment id="14364858" author="jwausle" created="Tue, 17 Mar 2015 10:04:59 +0000"  >&lt;p&gt;Where can I download a jar with fix?&lt;/p&gt;</comment>
                            <comment id="14367085" author="bosschaert" created="Wed, 18 Mar 2015 12:50:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jwausle&quot; class=&quot;user-hover&quot; rel=&quot;jwausle&quot;&gt;jwausle&lt;/a&gt; it has been released last week. You can download it from Maven central here: &lt;a href=&quot;http://search.maven.org/#artifactdetails%7Corg.apache.felix%7Corg.apache.felix.bundlerepository%7C2.0.4%7Cbundle&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://search.maven.org/#artifactdetails%7Corg.apache.felix%7Corg.apache.felix.bundlerepository%7C2.0.4%7Cbundle&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I noticed that the Felix download area has not yet been updated with this artifact. Hopefully that will be soon.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12670705" name="cap.diff" size="1845" author="bosschaert" created="Tue, 23 Sep 2014 12:40:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i203nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>