<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:04:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-198] Build of trunk fails</title>
                <link>https://issues.apache.org/jira/browse/FELIX-198</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Encountering maven bug&lt;br/&gt;
 &lt;a href=&quot;http://jira.codehaus.org/browse/MNG-1682&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/MNG-1682&lt;/a&gt; when building the trunk with pom-old-plugin.xml called from the ant build.xml.&lt;/p&gt;

&lt;p&gt;This bug occurs when more than two packaging types are used in a multiproject build.  In this case ipojo does a  &amp;lt;packaging&amp;gt;ipojo-bundle&amp;lt;/packaging&amp;gt; which triggers the bug for all subsequent module builds.&lt;/p&gt;

&lt;p&gt;These module builds will only occur when running with a jdk1.5, as this will trigger the mosgi module builds. &lt;/p&gt;

&lt;p&gt;&amp;lt;profiles&amp;gt;&lt;br/&gt;
    &amp;lt;profile&amp;gt;&lt;br/&gt;
      &amp;lt;id&amp;gt;jdk1.5&amp;lt;/id&amp;gt;&lt;br/&gt;
      &amp;lt;activation&amp;gt;&lt;br/&gt;
        &amp;lt;jdk&amp;gt;1.5&amp;lt;/jdk&amp;gt;&lt;br/&gt;
      &amp;lt;/activation&amp;gt;&lt;br/&gt;
      &amp;lt;modules&amp;gt;&lt;br/&gt;
        &amp;lt;module&amp;gt;mosgi.console.xxx...&lt;/p&gt;</description>
                <environment>java version &amp;quot;1.5.0_06&amp;quot;</environment>
        <key id="12361671">FELIX-198</key>
            <summary>Build of trunk fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="jconlon">John E. Conlon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Jan 2007 17:54:40 +0000</created>
                <updated>Tue, 6 Oct 2009 14:01:52 +0000</updated>
                            <resolved>Mon, 12 Feb 2007 15:46:45 +0000</resolved>
                                    <version>framework-1.0.0</version>
                                    <fixVersion>framework-1.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12469136" author="jconlon" created="Wed, 31 Jan 2007 18:06:29 +0000"  >&lt;p&gt;Patch to build.xml and old-plugin.xml.&lt;/p&gt;</comment>
                            <comment id="12470205" author="rickhall" created="Mon, 5 Feb 2007 13:09:34 +0000"  >&lt;p&gt;Since iPOJO is causing the issue, since it introduces a second plugin, doesn&apos;t it make more sense to create a pom-ipojo.xml file that contains that separates all of the iPOJO-related projects into a single pom file? This is effectively what we did with pom-new-plugin.xml, which separates the new plugin and the projects that use it from the ones that don&apos;t. I assume that this approach would solve the issue too, no?&lt;/p&gt;</comment>
                            <comment id="12470288" author="jconlon" created="Mon, 5 Feb 2007 17:42:42 +0000"  >&lt;p&gt;Your right two split poms are better than three. I think one is still better, if it can be done. &lt;/p&gt;

&lt;p&gt;But I was wrong in &apos;blaming&apos; my favorite dep manager iPojo. On closer examination of our sequence of module executions it appears that this bug manifests after N number of packaging types are used.  From what I see N=3. &lt;/p&gt;

&lt;p&gt;Once N=3 all subsequent modules will deploy with that packaging name as the extension.&lt;/p&gt;

&lt;p&gt;So it is not only the iPojo packaging but our two other maven plugins also must be factored into the problem.&lt;/p&gt;

&lt;p&gt;Been looking at the use of profiles to fix this so we could use a single pom again but this would require the segregation of all modules that use the different plugins as well as the jdk 1.5 profile we have for the mosgi modules.&lt;/p&gt;

&lt;p&gt;Building then would require a couple of steps but they would all be maven oriented.&lt;/p&gt;

&lt;p&gt;WDYT?&lt;/p&gt;</comment>
                            <comment id="12470312" author="rickhall" created="Mon, 5 Feb 2007 18:44:14 +0000"  >&lt;p&gt;Yeah, this is not an iPOJO issue, this is directly related to having more than one maven packaging plugin...we have three in Felix, so we get bit by this maven bug.&lt;/p&gt;

&lt;p&gt;However, I was not proposing two pom files, I was proposing three...essentially one for each plugin (and the subprojects that use them). I am not against searching for other (possibly better) solutions, but three separate pom files is the only solution that I know of that will definitely work.&lt;/p&gt;

&lt;p&gt;If you have a proposal, let&apos;s definitely hear it...&lt;/p&gt;</comment>
                            <comment id="12470387" author="jconlon" created="Mon, 5 Feb 2007 22:48:35 +0000"  >&lt;p&gt;Propose using one pom.xml and multiple profiles to segregate the modules by plugin type.  &lt;/p&gt;

&lt;p&gt;To build the entire project would require calling maven more than once using different profiles.&lt;/p&gt;

&lt;p&gt;For example:&lt;br/&gt;
mvn clean install  &lt;br/&gt;
   (Note: type1 would probably be defaulted as true here)&lt;br/&gt;
mvn -Ptype2 clean install&lt;br/&gt;
mvn -Ptype3 clean install&lt;/p&gt;
</comment>
                            <comment id="12470556" author="clement.escoffier" created="Tue, 6 Feb 2007 12:57:38 +0000"  >&lt;p&gt;For me this solution make sense. &lt;br/&gt;
However iPOJO Plugin, metadata and core should be in &quot;type2&quot; (old maven plugin, I guess), only iPOJO Arch needs to be separated (it is the only bundle on the trunk using the iPOJO Plugin) in a &quot;type3&quot;.&lt;/p&gt;</comment>
                            <comment id="12470559" author="rickhall" created="Tue, 6 Feb 2007 13:11:48 +0000"  >&lt;p&gt;I am ok with that approach, because we can still have the ant.xml file that builds all three profiles if we want, which makes it no worse than the current situation.&lt;/p&gt;

&lt;p&gt;I guess as far as how to segregate the subprojects, it depends on the nature of the bug. If it is purely based on separating them so no single pom file uses more than one packaging plugin at a time (as opposed to declaring more than one packaging plugin at a time), then I guess Clement&apos;s suggestion would be sufficient.&lt;/p&gt;

&lt;p&gt;At this point, every subproject that uses the new plugin and/or no plugin can be put into the first profile. Every subproject that uses the old plugin can be put into the second profile. And then ipojo.arch should be put into the last profile.&lt;/p&gt;

&lt;p&gt;It is my goal to see us move all subprojects using the old plugin to the new plugin, so once this happens we should just have two separate groups. Then once the maven bug is fixed we can get back to a single pom file!&lt;/p&gt;

&lt;p&gt;John, is this something you are going to contribute?&lt;/p&gt;</comment>
                            <comment id="12470611" author="jconlon" created="Tue, 6 Feb 2007 15:31:33 +0000"  >&lt;p&gt;Yes I will do this and attach pom.xml to this issue.  &lt;/p&gt;

&lt;p&gt;Should be able to get to this in a couple of days.&lt;/p&gt;</comment>
                            <comment id="12471841" author="jconlon" created="Fri, 9 Feb 2007 22:02:22 +0000"  >&lt;p&gt;Care must be taken to separate packaging types.  If a project uses too many types of plugins the bug will manifest.  This pom-bug.xml &lt;/p&gt;

&lt;p&gt;mvn -Dpackaging=bug -f pom-bug.xml install&lt;br/&gt;
will execute three modules of different packaging types (they all still use a jar extension)&lt;/p&gt;

&lt;p&gt;&amp;lt;module&amp;gt;ipojo&amp;lt;/module&amp;gt;            &amp;lt;!-&lt;del&gt;a osgi-bundle&lt;/del&gt;-&amp;gt;&lt;br/&gt;
&amp;lt;module&amp;gt;ipojo.plugin&amp;lt;/module&amp;gt;&amp;lt;!-&lt;del&gt;a maven-plugin&lt;/del&gt;-&amp;gt;&lt;br/&gt;
&amp;lt;module&amp;gt;ipojo.arch&amp;lt;/module&amp;gt;   &amp;lt;!-&lt;del&gt;a ipojo-bundle&lt;/del&gt;-&amp;gt;&lt;/p&gt;

&lt;p&gt;Observe the last artifact copied to the repository.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Installing /home/jconlon/projects/svns/felix/trunk/ipojo.arch/target/org.apache.felix.ipojo.arch-0.7.0-incubator-SNAPSHOT.jar to /home/jconlon/.m2/repository/org/apache/felix/org.apache.felix.ipojo.arch/0.7.0-incubator-SNAPSHOT/org.apache.felix.ipojo.arch-0.7.0-incubator-SNAPSHOT.ipojo-bundle&lt;/p&gt;

&lt;p&gt;mvn -Dpackaging=nobug -f pom-bug.xml install&lt;br/&gt;
will execute only the last of the above three modules.&lt;/p&gt;

&lt;p&gt;Now look at the artifact copied to the repo.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Installing /home/jconlon/projects/svns/felix/trunk/ipojo.arch/target/org.apache.felix.ipojo.arch-0.7.0-incubator-SNAPSHOT.jar to /home/jconlon/.m2/repository/org/apache/felix/org.apache.felix.ipojo.arch/0.7.0-incubator-SNAPSHOT/org.apache.felix.ipojo.arch-0.7.0-incubator-SNAPSHOT.jar&lt;/p&gt;
</comment>
                            <comment id="12471848" author="jconlon" created="Fri, 9 Feb 2007 22:14:06 +0000"  >&lt;p&gt;As a work around to the maven bug, this single pom uses different profiles for building the different types of felix modules. &lt;/p&gt;

&lt;p&gt;Usage:&lt;br/&gt;
    mvn -Dpackaging=&amp;lt;type&amp;gt;  install&lt;/p&gt;

&lt;p&gt;Examples:&lt;br/&gt;
    mvn -Dpackaging=osgi-bundle install&lt;br/&gt;
    mvn -Dpackaging=osgi-bundle-mosgi install&lt;br/&gt;
    mvn -Dpackaging=bundle install&lt;br/&gt;
    mvn -Dpackaging=ipojo-bundle install&lt;/p&gt;</comment>
                            <comment id="12471855" author="carlos" created="Fri, 9 Feb 2007 22:43:03 +0000"  >&lt;p&gt;I was able to reproduce the bug with three modules&lt;/p&gt;

&lt;p&gt;    &amp;lt;module&amp;gt;ipojo.arch&amp;lt;/module&amp;gt;&lt;br/&gt;
    &amp;lt;module&amp;gt;mosgi.console.ifc&amp;lt;/module&amp;gt;&lt;br/&gt;
    &amp;lt;module&amp;gt;mosgi.console.component&amp;lt;/module&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12472330" author="rickhall" created="Mon, 12 Feb 2007 15:46:45 +0000"  >&lt;p&gt;I applied this patch and updated the build.xml to use it...I also converted the tabs to spaces...&lt;/p&gt;</comment>
                            <comment id="12762627" author="sahoo" created="Tue, 6 Oct 2009 14:01:52 +0000"  >&lt;p&gt;The related maven bug has been fixed in mvn 2.2.1. Should we think of removing the work around from our pom.xml?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12350055" name="mychanges.patch" size="2451" author="jconlon" created="Wed, 31 Jan 2007 18:06:29 +0000"/>
                            <attachment id="12350794" name="pom-bug.xml" size="8506" author="jconlon" created="Fri, 9 Feb 2007 22:02:22 +0000"/>
                            <attachment id="12350056" name="pom-old-pluginA.xml" size="8673" author="jconlon" created="Wed, 31 Jan 2007 18:06:29 +0000"/>
                            <attachment id="12350797" name="pom.xml" size="10943" author="jconlon" created="Fri, 9 Feb 2007 22:14:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58785</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vwhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>