<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:14:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1726] SCR Annotations - Enhance error messages in case of missing project dependencies</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1726</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;in rev. 821022 felix removed some dependencies that where unneeded for the code that existed in the scr plugin itself.&lt;br/&gt;
there where unneeded to compile the plugin, but they are needed in some usecases for annotation parsing.&lt;br/&gt;
e.g. if a project&apos;s class is annotated with SCR annotations, and at the same time declares a static field with a slf4j Logger class, reading other static string field values fails with a ClassNotFound exception pointing to a slf4j class.&lt;/p&gt;

&lt;p&gt;re-adding the slf4j dependencies again solves the problem.&lt;/p&gt;

&lt;p&gt;unfortunately the exception handling in this case is not good - the message is only &quot;Somehing went wrong.&quot;, because the ClassNotFound exception was swallowed in ClassUtil.getInitializationExpression method.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12437663">FELIX-1726</key>
            <summary>SCR Annotations - Enhance error messages in case of missing project dependencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Oct 2009 23:48:33 +0000</created>
                <updated>Thu, 29 Jul 2010 10:30:11 +0000</updated>
                            <resolved>Mon, 16 Nov 2009 12:22:20 +0000</resolved>
                                    <version>maven-scr-plugin-1.4.0</version>
                                    <fixVersion>maven-scr-plugin-1.4.2</fixVersion>
                                    <component>SCR Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12763961" author="fmeschbe" created="Fri, 9 Oct 2009 10:31:00 +0000"  >&lt;p&gt;Can this not be solved by adding a compile dependency on the project ?&lt;/p&gt;

&lt;p&gt;After all it is project code which has the dependency and not the annotations library or the maven plugin.&lt;/p&gt;</comment>
                            <comment id="12763962" author="fmeschbe" created="Fri, 9 Oct 2009 10:31:41 +0000"  >&lt;p&gt;... and: ClassUtil.getInitializationExpression should probably not swallow this exception like this, right ?&lt;/p&gt;</comment>
                            <comment id="12764048" author="sseifert@pro-vision.de" created="Fri, 9 Oct 2009 15:21:24 +0000"  >&lt;p&gt;yes, it is possible to solve it with a project-specifc dependency - but the normaler user will never supsect this from the error message &quot;something went wrong&quot;.. perhaps we should a a specific error message that points into this direction in the ClassUtil method instead of swallowing the exception.&lt;/p&gt;</comment>
                            <comment id="12764303" author="fmeschbe" created="Sat, 10 Oct 2009 05:42:30 +0000"  >&lt;p&gt;Changing issue summary to indicate that error message must be improved to hint the user at potential missing dependencies.&lt;/p&gt;</comment>
                            <comment id="12773261" author="cziegeler" created="Tue, 3 Nov 2009 22:53:41 +0000"  >&lt;p&gt;Does ClassUtil really fail with a CNFE?&lt;/p&gt;</comment>
                            <comment id="12773279" author="sseifert@pro-vision.de" created="Tue, 3 Nov 2009 23:31:06 +0000"  >&lt;p&gt;in my usecase above, yes. the CNFE was thrown because the class was loaded when accessing the property, and the class depended on a slf4j class, which was not found in the classpath.&lt;/p&gt;

&lt;p&gt;i think best solution would be to rethrow the error in classutil, perhaps wrapped in a runtimeexception with information about class name and property name.&lt;/p&gt;</comment>
                            <comment id="12773284" author="cziegeler" created="Tue, 3 Nov 2009 23:37:00 +0000"  >&lt;p&gt;The reason why I&apos;m asking is that a CNFE is a checked exception and I don&apos;t see a method in the code which declares them to be thrown.&lt;/p&gt;</comment>
                            <comment id="12773293" author="sseifert@pro-vision.de" created="Tue, 3 Nov 2009 23:52:35 +0000"  >&lt;p&gt;example stacktrace:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NoClassDefFoundError: org/slf4j/impl/StaticLoggerBinder&lt;br/&gt;
        at org.slf4j.LoggerFactory.&amp;lt;clinit&amp;gt;(LoggerFactory.java:60)&lt;br/&gt;
        at vwg.wcm.vwd4.base.components.global.AbstractStreamComponent.&amp;lt;clinit&amp;gt;(AbstractStreamComponent.java:37)&lt;br/&gt;
        at sun.misc.Unsafe.ensureClassInitialized(Native Method)&lt;br/&gt;
        at sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAccessorFactory.java:25)&lt;br/&gt;
        at sun.reflect.ReflectionFactory.newFieldAccessor(ReflectionFactory.java:122)&lt;br/&gt;
        at java.lang.reflect.Field.acquireFieldAccessor(Field.java:918)&lt;br/&gt;
        at java.lang.reflect.Field.getFieldAccessor(Field.java:899)&lt;br/&gt;
        at java.lang.reflect.Field.get(Field.java:358)&lt;br/&gt;
        at org.apache.felix.scrplugin.tags.ClassUtil.getInitializationExpression(ClassUtil.java:41)&lt;br/&gt;
        ... 32 more&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.slf4j.impl.StaticLoggerBinder&lt;br/&gt;
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252)&lt;br/&gt;
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)&lt;br/&gt;
        ... 41 more&lt;/p&gt;

&lt;p&gt;it&apos;s line 41 in ClassUtil.&lt;br/&gt;
and you&apos;re right - the CFNE was translated to a NoClassDefFoundError, and thats what i meant.&lt;/p&gt;</comment>
                            <comment id="12773306" author="cziegeler" created="Wed, 4 Nov 2009 00:31:24 +0000"  >&lt;p&gt;Proposed patch&lt;/p&gt;</comment>
                            <comment id="12773307" author="cziegeler" created="Wed, 4 Nov 2009 00:31:49 +0000"  >&lt;p&gt;Ok &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;ve just attached a potential patch - what do you think about it?&lt;/p&gt;</comment>
                            <comment id="12773340" author="sseifert@pro-vision.de" created="Wed, 4 Nov 2009 01:48:07 +0000"  >&lt;p&gt;i like it!&lt;/p&gt;</comment>
                            <comment id="12778317" author="cziegeler" created="Mon, 16 Nov 2009 12:22:20 +0000"  >&lt;p&gt;I&apos;ve applied the patch in Revision 880725&lt;/p&gt;</comment>
                            <comment id="12778319" author="sseifert@pro-vision.de" created="Mon, 16 Nov 2009 12:27:35 +0000"  >&lt;p&gt;thanks&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12470427">FELIX-2492</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12423980" name="felix.patch" size="2918" author="cziegeler" created="Wed, 4 Nov 2009 00:31:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57304</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1arzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>271002</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>