<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:32:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3172] Error when calling BundleContext.register(Class, Object, Dictionary)</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3172</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I have an error when I try to call the simple BundleContext.register(Class, Object, Dictionary) method (note the type of the first argument).&lt;br/&gt;
It seems that the new signature of the BundleContext.register() method is not recognised by the IPojoContext.&lt;/p&gt;

&lt;p&gt;This simple example reproduces the issue:&lt;/p&gt;

&lt;p&gt;@Component&lt;br/&gt;
@Instantiate&lt;br/&gt;
public class Test{&lt;/p&gt;

&lt;p&gt;	public Test(BundleContext bundleContext) &lt;/p&gt;
{
		bundleContext.registerService(String.class, &quot;test&quot;, null);
	}

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;With the following trace:&lt;/p&gt;

&lt;p&gt;g! &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;  : &lt;span class=&quot;error&quot;&gt;&amp;#91;com.fornacif.osgi.manager.internal.Manager-0&amp;#93;&lt;/span&gt; createInstance -&amp;gt; Cannot invoke the constructor method - the constructor throws an except&lt;br/&gt;
ion : org.apache.felix.ipojo.IPojoContext.registerService(Ljava/lang/Class;Ljava/lang/Object;Ljava/util/Dictionary;)Lorg/osgi/framework/ServiceRegistr&lt;br/&gt;
ation;&lt;br/&gt;
java.lang.AbstractMethodError: org.apache.felix.ipojo.IPojoContext.registerService(Ljava/lang/Class;Ljava/lang/Object;Ljava/util/Dictionary;)Lorg/osgi&lt;br/&gt;
/framework/ServiceRegistration;&lt;br/&gt;
        at com.fornacif.osgi.manager.internal.Manager.&amp;lt;init&amp;gt;(Manager.java:12)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)&lt;br/&gt;
        at java.lang.reflect.Constructor.newInstance(Unknown Source)&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceManager.createObject(InstanceManager.java:656)&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceManager.getPojoObject(InstanceManager.java:844)&lt;br/&gt;
        at org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.__stateChanged(LifecycleCallbackHandler.java:156)&lt;br/&gt;
        at org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.stateChanged(LifecycleCallbackHandler.java)&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceManager.setState(InstanceManager.java:471)&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceManager.start(InstanceManager.java:353)&lt;br/&gt;
        at org.apache.felix.ipojo.ComponentFactory.createInstance(ComponentFactory.java:166)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:301)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:238)&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceCreator$ManagedInstance.create(InstanceCreator.java:343)&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceCreator.addInstance(InstanceCreator.java:89)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender.parse(Extender.java:269)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender.startManagementFor(Extender.java:208)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender.access$600(Extender.java:52)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender$CreatorThread.run(Extender.java:682)&lt;br/&gt;
        at java.lang.Thread.run(Unknown Source)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; com.fornacif.osgi.manager.internal.Manager : Cannot create a POJO instance, the POJO constructor has thrown an exception: org.apache.felix.ipo&lt;br/&gt;
jo.IPojoContext.registerService(Ljava/lang/Class;Ljava/lang/Object;Ljava/util/Dictionary;)Lorg/osgi/framework/ServiceRegistration;&lt;br/&gt;
java.lang.RuntimeException: Cannot create a POJO instance, the POJO constructor has thrown an exception: org.apache.felix.ipojo.IPojoContext.registerS&lt;br/&gt;
ervice(Ljava/lang/Class;Ljava/lang/Object;Ljava/util/Dictionary;)Lorg/osgi/framework/ServiceRegistration;&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceManager.createObject(InstanceManager.java:696)&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceManager.getPojoObject(InstanceManager.java:844)&lt;br/&gt;
        at org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.__stateChanged(LifecycleCallbackHandler.java:156)&lt;br/&gt;
        at org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.stateChanged(LifecycleCallbackHandler.java)&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceManager.setState(InstanceManager.java:471)&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceManager.start(InstanceManager.java:353)&lt;br/&gt;
        at org.apache.felix.ipojo.ComponentFactory.createInstance(ComponentFactory.java:166)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:301)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:238)&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceCreator$ManagedInstance.create(InstanceCreator.java:343)&lt;br/&gt;
        at org.apache.felix.ipojo.InstanceCreator.addInstance(InstanceCreator.java:89)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender.parse(Extender.java:269)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender.startManagementFor(Extender.java:208)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender.access$600(Extender.java:52)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender$CreatorThread.run(Extender.java:682)&lt;br/&gt;
        at java.lang.Thread.run(Unknown Source)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; com.fornacif.osgi.manager.internal.Manager : Cannot create a POJO instance, the POJO constructor has thrown an exception: org.apache.felix.ipo&lt;br/&gt;
jo.IPojoContext.registerService(Ljava/lang/Class;Ljava/lang/Object;Ljava/util/Dictionary;)Lorg/osgi/framework/ServiceRegistration;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; iPOJO Instance Creator : A matching factory was found for &lt;/p&gt;
{component=com.fornacif.osgi.manager.internal.Manager, instance.name=com.fornacif.os
gi.manager.internal.Manager-0}
&lt;p&gt;, but the instantiation failed : The configuration is not correct for the type com.fornacif.osgi.manager.internal.Manage&lt;br/&gt;
r : Cannot create a POJO instance, the POJO constructor has thrown an exception: org.apache.felix.ipojo.IPojoContext.registerService(Ljava/lang/Class;&lt;br/&gt;
Ljava/lang/Object;Ljava/util/Dictionary;)Lorg/osgi/framework/ServiceRegistration;&lt;/p&gt;</description>
                <environment>Java 1.6, Apache Felix 4.0.1</environment>
        <key id="12527635">FELIX-3172</key>
            <summary>Error when calling BundleContext.register(Class, Object, Dictionary)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="clement.escoffier">Clement Escoffier</assignee>
                                    <reporter username="fornacif">Fran&#231;ois Fornaciari</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Oct 2011 18:20:25 +0000</created>
                <updated>Mon, 14 May 2012 14:58:28 +0000</updated>
                            <resolved>Wed, 19 Oct 2011 15:11:51 +0000</resolved>
                                    <version>iPOJO-1.8.0</version>
                                    <fixVersion>ipojo-core-1.8.2</fixVersion>
                                    <component>iPOJO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13130677" author="clement.escoffier" created="Wed, 19 Oct 2011 15:11:51 +0000"  >&lt;p&gt;Fixed in trunk.&lt;br/&gt;
Implements the new API&lt;br/&gt;
Updates service registration to avoid the cast issue&lt;br/&gt;
Propagates changes to iPOJO Service Context (and implementations)&lt;br/&gt;
Configures the maven-compiler-plugin to generate 1.4 bytecode (same trick as for the Felix framework)&lt;/p&gt;

&lt;p&gt;Could you check ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13131356" author="fornacif" created="Thu, 20 Oct 2011 04:24:11 +0000"  >&lt;p&gt;Thanks Cl&#233;ment for fixing this issue.&lt;/p&gt;

&lt;p&gt;Unfortunately, after having updated all Felix projects from the trunk, I can&apos;t build the iPOJO modules due to compilation errors and specially the core module.&lt;br/&gt;
I tried while Maven 2 or 3.&lt;/p&gt;

&lt;p&gt;Below one of the error I have : &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; D:\dev\programs\felix\ipojo\core\src\main\java\org\apache\felix\ipojo\IPojoContext.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;268,44&amp;#93;&lt;/span&gt; error: type ServiceReference does not take pa&lt;br/&gt;
rameters&lt;/p&gt;

&lt;p&gt;It&apos;s been a while I didn&apos;t compile iPOJO modules from trunk so I don&apos;t know if my configuration is ok.&lt;br/&gt;
Any idea ?&lt;/p&gt;

&lt;p&gt;Otherwise, is there a location where I can find the snapshot artifact?&lt;/p&gt;</comment>
                            <comment id="13131429" author="clement.escoffier" created="Thu, 20 Oct 2011 07:39:45 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Weird error as it should compile using Java 5 and the ServiceReference&amp;lt;S&amp;gt; class from OSGi Core 4.3. Will update the whole trunk and check.&lt;/p&gt;

&lt;p&gt;The snapshot is available from &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/felix/org.apache.felix.ipojo/1.9.0-SNAPSHOT/org.apache.felix.ipojo-1.9.0-20111020.073814-3.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/felix/org.apache.felix.ipojo/1.9.0-SNAPSHOT/org.apache.felix.ipojo-1.9.0-20111020.073814-3.jar&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13131840" author="fornacif" created="Thu, 20 Oct 2011 17:58:58 +0000"  >&lt;p&gt;Replacing the iPOJO core bundle (1.8.0) by the trunk version (1.9.0-SNAPSHOT) fixed the issue.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13274656" author="clement.escoffier" created="Mon, 14 May 2012 14:58:28 +0000"  >&lt;p&gt;iPOJO Core 1.8.2 was released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>88886</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vybj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184533</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>