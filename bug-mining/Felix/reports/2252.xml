<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:54:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4585] SCR will create an additional component instance when ComponentContext.enableComponent is called</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4585</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;In the OSGi CT, the testActivateDeactivate(org.osgi.test.cases.component.junit.DeclarativeServicesControl) method tests that that component activate and deactivate methods are properly called. It uses ComponentContext.disableComponent and enableComponent to cause component instances to be disposed and created.&lt;/p&gt;

&lt;p&gt;If ComponentContext.enableComponent is called on an already enabled component, SCR will improperly create an additional instance of the component.&lt;/p&gt;

&lt;p&gt;See the following log messages:&lt;/p&gt;

&lt;p&gt;org.osgi.test.cases.component.tb6.CcBcMapIntNS110@1048641931 activate&lt;br/&gt;
org.osgi.test.cases.component.tb6.ContExp@339127939 activate&lt;br/&gt;
configuration update org.osgi.test.cases.component.tb6.CcBcMapIntNS110&lt;br/&gt;
configuration updated org.osgi.test.cases.component.tb6.CcBcMapIntNS110&lt;br/&gt;
org.osgi.test.cases.component.tb6.CcBcMapIntNS110@1048641931 deactCcBcMapInt&lt;br/&gt;
org.osgi.test.cases.component.tb6.CcBcMapIntNS110@855459426 activate&lt;br/&gt;
enable org.osgi.test.cases.component.tb6.CcBcMapIntNS110&lt;br/&gt;
enabled org.osgi.test.cases.component.tb6.CcBcMapIntNS110&lt;br/&gt;
org.osgi.test.cases.component.tb6.CcBcMapIntNS110@232400695 activate&lt;/p&gt;


&lt;p&gt;We can see that CcBcMapIntNS110 is activated initially. Then in response to a configuration change, the component instance is deactivated and a new instance it activated. Then ComponentContext.enableComponent is called on the already enabled component and another instance is created in error.&lt;/p&gt;

&lt;p&gt;This error is creating problems passing the OSGi CT.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12729923">FELIX-4585</key>
            <summary>SCR will create an additional component instance when ComponentContext.enableComponent is called</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djencks">David Jencks</assignee>
                                    <reporter username="bjhargrave">BJ Hargrave</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Jul 2014 20:55:43 +0000</created>
                <updated>Tue, 11 Aug 2015 05:09:37 +0000</updated>
                            <resolved>Sat, 2 Aug 2014 03:25:45 +0000</resolved>
                                                    <fixVersion>scr-2.0.0</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14083317" author="djencks" created="Sat, 2 Aug 2014 03:25:45 +0000"  >&lt;p&gt;Thanks for finding this, fixing it revealed several other problems with factory components. Fixed in revs r1615283 and r1615284&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>407996</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1y7e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>408005</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>