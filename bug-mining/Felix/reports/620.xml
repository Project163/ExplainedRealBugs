<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:12:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1539] generated-classes not included in bundle</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1539</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;We have a project using the xmlbeans-maven-plugin to generate some sources.  When I change the packaging type to bundle the generated-sources are still compiled into target/generated-classes/xmlbeans but they are not included in the jar.&lt;/p&gt;

&lt;p&gt;An example of such a project is at &lt;a href=&quot;https://svn.apache.org/repos/asf/geronimo/server/trunk/framework/modules/geronimo-service-builder&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/geronimo/server/trunk/framework/modules/geronimo-service-builder&lt;/a&gt;.  The maven-bundle-plugin is configured in an ancestor pom so all you should need to do is change the packaging to bundle and look at the jar.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12434342">FELIX-1539</key>
            <summary>generated-classes not included in bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mcculls">Stuart McCulloch</assignee>
                                    <reporter username="djencks">David Jencks</reporter>
                        <labels>
                    </labels>
                <created>Sat, 29 Aug 2009 08:35:03 +0000</created>
                <updated>Fri, 24 Jun 2011 12:36:55 +0000</updated>
                            <resolved>Wed, 16 Sep 2009 10:16:37 +0000</resolved>
                                    <version>maven-bundle-plugin-2.0.0</version>
                                    <fixVersion>maven-bundle-plugin-2.0.1</fixVersion>
                                    <component>Maven Bundle Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12749089" author="mcculls" created="Sat, 29 Aug 2009 08:52:25 +0000"  >&lt;p&gt;This is similar to the generated source issue - we need to discover all the attached directories (for both source and classes) using the Maven project API, rather than rely on the standard single source and single build output directory defined in the POM model.&lt;/p&gt;</comment>
                            <comment id="12750788" author="mcculls" created="Thu, 3 Sep 2009 02:15:55 +0000"  >&lt;p&gt;Fixed in trunk.&lt;/p&gt;</comment>
                            <comment id="12751984" author="djencks" created="Mon, 7 Sep 2009 00:22:13 +0000"  >&lt;p&gt;The java classes from the xmlbeans plugin are now included, but not the binary files that get generated into target/generated-classes/xmlbeans/&lt;/p&gt;

&lt;p&gt;e.g.&lt;/p&gt;

&lt;p&gt;target/generated-classes/xmlbeans/schemaorg_apache_xmlbeans/system/s465C16165F2451560A5F5A06D89553B9/dependencieselement.xsb &lt;/p&gt;

&lt;p&gt;&amp;lt;peanut-gallery&amp;gt;&lt;br/&gt;
Personally I think that trying to duplicate the functionality of such a major maven component as the jar plugin in a third party non-maven-aware project such as bnd is doomed to failure.  I&apos;ve never understood why the bundle plugin doesn&apos;t just specify what needs to get into the jar and add stuff to the manifest.&lt;br/&gt;
&amp;lt;/peanut-gallery&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12752022" author="gnt" created="Mon, 7 Sep 2009 06:45:20 +0000"  >&lt;p&gt;Well, you can use the maven bundle plugin to only generate the manifest metadata and tell the jar plugin to use this generated manifest.&lt;br/&gt;
That would solve your problem I guess.&lt;/p&gt;</comment>
                            <comment id="12753536" author="mcculls" created="Thu, 10 Sep 2009 10:03:39 +0000"  >&lt;p&gt;Sigh, I knew I should have retyped the explanation that disappeared when I had to log back in...&lt;/p&gt;

&lt;p&gt;Anyway here goes - the Bnd tool used by the maven-bundle-plugin was specifically designed&lt;br/&gt;
so you could pull classes and resources into a bundle based on a selected set of packages.&lt;br/&gt;
It therefore does not simply zip up the contents of &quot;target/classes&quot; like the maven-jar-plugin.&lt;/p&gt;

&lt;p&gt;However, we try to make it as easy as possible for people to migrate projects over to bundle&lt;br/&gt;
packaging. We turn resource settings into Include-Resource instructions, add dependencies&lt;br/&gt;
using Embed-Dependency (also updates the Bundle-ClassPath), and scan the local source&lt;br/&gt;
code to select a default set of packages.&lt;/p&gt;

&lt;p&gt;All of which means it is now possible to take most Maven projects, flip the packaging from jar&lt;br/&gt;
to bundle, and have the same project but with OSGi metadata and added Bnd tool verification.&lt;/p&gt;

&lt;p&gt;Unfortunately there will always be projects where this won&apos;t be be enough - for example for&lt;br/&gt;
xmlbean, we detect the generated source and generate the appropriate package defaults to&lt;br/&gt;
pull in the extra classes. But we miss the extra files under &quot;schemaorg_apache_xmlbeans&quot;&lt;br/&gt;
because there&apos;s no correlation between their location and any specified package.&lt;/p&gt;

&lt;p&gt;In such situations you need to add instructions (in this case Include-Resource) to tell Bnd&lt;br/&gt;
about these additional files. There&apos;s no other way it can find out about them - they&apos;re just an&lt;br/&gt;
arbitrary path under &quot;target/classes&quot;.&lt;/p&gt;

&lt;p&gt;We&apos;ve also had this discussion many times in the past on the Felix lists (ie. should we just&lt;br/&gt;
grab everything under &quot;target/classes&quot;?) and the consensus from the committers has been&lt;br/&gt;
that the bundleplugin should primarily behave like Bnd - ie. you could take your instructions&lt;br/&gt;
and use them with Bnd outside of Maven without too much trouble. In that regard we want&lt;br/&gt;
to keep using Bnd to generate the final bundle rather than just using jar.&lt;/p&gt;

&lt;p&gt;But we also support people who do want to keep using the maven-jar-plugin - just use the&lt;br/&gt;
&quot;bundle:manifest&quot; goal to generate the manifest, and configure the jarplugin to pick it up...&lt;/p&gt;

&lt;p&gt;We could maybe make this easier to use (ie. another packaging type or a switch) so you&lt;br/&gt;
wouldn&apos;t need to add the extra build executions - anyone out there willing to come up with&lt;br/&gt;
a patch or even a suggested process?&lt;/p&gt;

&lt;p&gt;In summary I&apos;ll mark this issue as resolved, as it is working as designed - you just need&lt;br/&gt;
an Include-Resource instruction to pull in the extra &quot;schemaorg_apache_xmlbeans&quot; files&lt;/p&gt;</comment>
                            <comment id="12753538" author="mcculls" created="Thu, 10 Sep 2009 10:04:48 +0000"  >&lt;p&gt;As mentioned above, this is the expected behaviour.&lt;/p&gt;</comment>
                            <comment id="12755967" author="mcculls" created="Wed, 16 Sep 2009 10:15:15 +0000"  >&lt;p&gt;re-opening to reflect final resolution&lt;/p&gt;</comment>
                            <comment id="12755968" author="mcculls" created="Wed, 16 Sep 2009 10:16:37 +0000"  >&lt;p&gt;Marking as fixed because classes from generated sources are now included, but we can&apos;t automatically capture random binary files&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57487</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vy5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184507</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>