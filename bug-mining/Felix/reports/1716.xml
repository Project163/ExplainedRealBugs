<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:46:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3734] MetaType: NPE in ServiceTracker for fragment bundle</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3734</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;An NPE occurs when calling up the &quot;Config&quot; page of Felix WebConsole 4.0.0 when there are fragment bundles:&lt;/p&gt;

&lt;p&gt;10:20:08,839|ERROR| qtp521679231-100 | ?                                   ? | 249 | %configMgr.pluginTitle: listFactoryConfigurations: Unexpected problem encountered&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.osgi.util.tracker.ServiceTracker.&amp;lt;init&amp;gt;(ServiceTracker.java:197)&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.felix.framework-4.0.3.jar:&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.osgi.util.tracker.ServiceTracker.&amp;lt;init&amp;gt;(ServiceTracker.java:268)&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.felix.framework-4.0.3.jar:&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.felix.metatype.internal.MetaTypeProviderTracker.&amp;lt;init&amp;gt;(MetaTypeProviderTracker.java:36)&lt;br/&gt;
        at org.apache.felix.metatype.internal.MetaTypeInformationImpl.&amp;lt;init&amp;gt;(MetaTypeInformationImpl.java:74)&lt;br/&gt;
        at org.apache.felix.metatype.internal.ServiceMetaTypeInformation.&amp;lt;init&amp;gt;(ServiceMetaTypeInformation.java:79)&lt;br/&gt;
        at org.apache.felix.metatype.internal.MetaTypeServiceImpl.getMetaTypeInformation(MetaTypeServiceImpl.java:130)&lt;br/&gt;
        at org.apache.felix.webconsole.internal.compendium.ConfigManagerBase.getObjectClassDefinitions(ConfigManagerBase.java:121)&lt;span class=&quot;error&quot;&gt;&amp;#91;263:org.apache.felix.webconsole:4.0.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.felix.webconsole.internal.compendium.ConfigManagerBase.getFactoryPidObjectClasses(ConfigManagerBase.java:95)&lt;span class=&quot;error&quot;&gt;&amp;#91;263:org.apache.felix.webconsole:4.0.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.felix.webconsole.internal.compendium.ConfigManager.listFactoryConfigurations(ConfigManager.java:437)&lt;span class=&quot;error&quot;&gt;&amp;#91;263:org.apache.felix.webconsole:4.0.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.felix.webconsole.internal.compendium.ConfigManager.renderContent(ConfigManager.java:375)&lt;span class=&quot;error&quot;&gt;&amp;#91;263:org.apache.felix.webconsole:4.0.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.felix.webconsole.AbstractWebConsolePlugin.doGet(AbstractWebConsolePlugin.java:155)&lt;span class=&quot;error&quot;&gt;&amp;#91;263:org.apache.felix.webconsole:4.0.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.felix.webconsole.internal.compendium.ConfigManager.doGet(ConfigManager.java:309)&lt;span class=&quot;error&quot;&gt;&amp;#91;263:org.apache.felix.webconsole:4.0.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:693)&lt;span class=&quot;error&quot;&gt;&amp;#91;32:org.apache.geronimo.specs.geronimo-servlet_2.5_spec:1.1.2&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12613454">FELIX-3734</key>
            <summary>MetaType: NPE in ServiceTracker for fragment bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="jeremias@apache.org">Jeremias Maerki</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Oct 2012 08:54:28 +0000</created>
                <updated>Tue, 20 Nov 2012 11:00:51 +0000</updated>
                            <resolved>Thu, 25 Oct 2012 14:48:32 +0000</resolved>
                                    <version>metatype-1.0.4</version>
                                    <fixVersion> metatype-1.0.6</fixVersion>
                                    <component>Metatype Service</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13483988" author="jeremias@apache.org" created="Thu, 25 Oct 2012 08:55:04 +0000"  >&lt;p&gt;Attached a patch to fix the problem.&lt;/p&gt;</comment>
                            <comment id="13484006" author="fmeschbe" created="Thu, 25 Oct 2012 09:37:56 +0000"  >&lt;p&gt;Thanks for reporting.&lt;/p&gt;

&lt;p&gt;Looking at this a bit more in-depth, it looks like there are two issues lingering actually:&lt;/p&gt;

&lt;p&gt;(1) The MetaTypeService.getMetaTypeInformation(Bundle) implementation should probably return null for fragments any way. Respective information provided by the fragment should be exposed through the host bundle to which the fragment binds.&lt;/p&gt;

&lt;p&gt;(2) The MetaTypeProviderTracker should not use the MetaTypeInformation bundle&apos;s context to listen for services but the Meta Type Service implementation bundle context. Same as is done for the ServiceMetaTypeInformation listener for ManagedService&lt;span class=&quot;error&quot;&gt;&amp;#91;Factory&amp;#93;&lt;/span&gt; services.&lt;/p&gt;</comment>
                            <comment id="13484171" author="fmeschbe" created="Thu, 25 Oct 2012 14:48:32 +0000"  >&lt;p&gt;Fixed in Rev. 1402162:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Don&apos;t try to get MetaTypeInformation for fragments&lt;/li&gt;
	&lt;li&gt;Use the MetaTypeService implementation bundle context  instead of the MetaTypeInformation&apos;s bundle context to track MetaTypeProvider services&lt;/li&gt;
	&lt;li&gt;Downgrade OSGi Core Dependency to 4.0 again&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13501086" author="fmeschbe" created="Tue, 20 Nov 2012 11:00:51 +0000"  >&lt;p&gt;Close after release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12550756" name="felix-metatype-npe-fix-for-fragments.diff" size="1641" author="jeremias@apache.org" created="Thu, 25 Oct 2012 08:55:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250992</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b33r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>