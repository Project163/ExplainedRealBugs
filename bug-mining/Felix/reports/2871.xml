<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:10:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5662] SSLFilterRequest returns the server port of the underlying request instead of the default port of the protocol.</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5662</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5259&quot; title=&quot;SslFilterRequest always returns -1 when X-Forwarded-Port header is not present&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5259&quot;&gt;&lt;del&gt;FELIX-5259&lt;/del&gt;&lt;/a&gt; made it so that the sslfilter request returns the underlying requests getServerPort() if no X-Forwarded-Port header is present on a call to getServerPort().&lt;/p&gt;

&lt;p&gt;The problem that it tries to address is that the sslfilter returned -1 from getServerPort() when no X-Forwarded-Port header is set. As the javadoc does say:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;int getServerPort()&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Returns the port number to which the request was sent. It is the value of the part after &quot;:&quot; in the Host header value, if any, or the server port where the client connection was accepted on.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;that is not allowed but the intention was correct namely, it should be the default port for the forwarded protocol.&lt;/p&gt;

&lt;p&gt;However, the fix is wrong. It basically makes it so that if no X-Forwarded-Port header is set the wrapped request will use the port of the connection. That doesn&apos;t make sense. It should default to the default port of the forwarded protocol (it just can&apos;t fall back to simply return -1 - it has to figure out the correct default port).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13084200">FELIX-5662</key>
            <summary>SSLFilterRequest returns the server port of the underlying request instead of the default port of the protocol.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Jul 2017 09:46:31 +0000</created>
                <updated>Tue, 4 Jul 2017 13:34:29 +0000</updated>
                            <resolved>Tue, 4 Jul 2017 13:34:29 +0000</resolved>
                                    <version>http.sslfilter-1.2.0</version>
                                    <fixVersion>http.sslfilter-1.2.2</fixVersion>
                                    <component>HTTP Service</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16073645" author="karlpauls" created="Tue, 4 Jul 2017 13:12:53 +0000"  >&lt;p&gt;After looking at the sslfilter, it appears that we only wrap the request in case of a https offload anyways - hence, it should be enough to hardcode the getServerPort() default to 443 (as we already the https protocol anyways). In other words, if we don&apos;t get a (parseable) X-Forwarded-Port header we fallback to returning 443 as the default port. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, unless you disagree, I&apos;ll go ahead and make that change as well as follow-up with a 1.2.2 release.&lt;/p&gt;</comment>
                            <comment id="16073654" author="cziegeler" created="Tue, 4 Jul 2017 13:17:06 +0000"  >&lt;p&gt;Sounds fine to me, we could think about using the port of the request if it is not 80 though - but always usign 443 in that case is as good or as bad I think&lt;/p&gt;</comment>
                            <comment id="16073669" author="karlpauls" created="Tue, 4 Jul 2017 13:34:29 +0000"  >&lt;p&gt;Done in r1800786.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12971176">FELIX-5259</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3h0s7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>