<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:28:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2962] SCR doesn&apos;t detect invalid XML</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2962</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The XML parser (kxml2) used by SCR doesn&apos;t detect many forms of incorrect XML, even basic errors like mismatched start and end tags.  This makes diagnosing component load errors very frustrating.  Please use a real XML parser.  It will save developers a lot of pain.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12507912">FELIX-2962</key>
            <summary>SCR doesn&apos;t detect invalid XML</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="pimlott">Andrew Pimlott</reporter>
                        <labels>
                            <label>xml</label>
                    </labels>
                <created>Fri, 20 May 2011 19:00:16 +0000</created>
                <updated>Tue, 20 Nov 2012 10:58:13 +0000</updated>
                            <resolved>Sun, 5 Jun 2011 13:03:37 +0000</resolved>
                                    <version> scr-1.6.0</version>
                                    <fixVersion>scr-1.6.2</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13037870" author="fmeschbe" created="Mon, 23 May 2011 10:18:43 +0000"  >&lt;p&gt;Thanks for reporting.&lt;/p&gt;

&lt;p&gt;We use a &quot;real&quot; parser since KXml is a fast, light-weight, real parser. Hence I do not consider replacing the parser at this point in time.&lt;/p&gt;

&lt;p&gt;But, I admit, that error reporting my be improved and you could help us do that !&lt;/p&gt;

&lt;p&gt;If you could provide invalid XML and state the expected behaviour (in terms of logging, I would assume), this would help use improving error reporting. Thanks alot !&lt;/p&gt;
</comment>
                            <comment id="13038180" author="pimlott" created="Mon, 23 May 2011 20:09:28 +0000"  >&lt;p&gt;I can immediately offer (each line a complete example of a malformed XML file accepted by Felix SCR):&lt;/p&gt;

&lt;p&gt;&amp;lt;a&amp;gt;&lt;br/&gt;
&amp;lt;/a&amp;gt;&lt;br/&gt;
&amp;lt;a&amp;gt;&amp;lt;b&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/b&amp;gt;&lt;/p&gt;

&lt;p&gt;The XML 1.1 spec says that XML processors &quot;must report violations of this specification&apos;s well-formedness constraints&quot;.  I would expect that if any of these were used as a Service-Component, I would get an exception about malformed XML from Bundle.start.&lt;/p&gt;

&lt;p&gt;Beyond the correctness issue, quality of diagnostics is a key differentiator between implementations of OSGi, since they all follow the same spec.  I filed this issue because I got a totally misleading error message when I tried to start my bundle, where the root cause was malformed XML.  Worse, I want to write a program on top of Felix that accepts bundles.  If I can&apos;t provide accurate diagnostics to users about errors in their bundles, it hurts the quality of my program.&lt;/p&gt;</comment>
                            <comment id="13038422" author="fmeschbe" created="Tue, 24 May 2011 07:18:44 +0000"  >&lt;p&gt;Thanks for the samples. We can see what we can do.&lt;/p&gt;

&lt;p&gt;&amp;gt;  I filed this issue because I got a totally misleading error message when I tried to start my bundle, where the root cause was malformed XML&lt;/p&gt;

&lt;p&gt;Understandable. But you have to also understand that we cannot fix things if you don&apos;t show what is broken.&lt;/p&gt;

&lt;p&gt;For example &quot;attached file xxx is broken XML and the message I got logged was yyy.&quot;&lt;/p&gt;

&lt;p&gt;Thanks for your comprehension.&lt;/p&gt;</comment>
                            <comment id="13038756" author="pimlott" created="Tue, 24 May 2011 20:00:23 +0000"  >&lt;p&gt;You&apos;re right, I should give a real-world example.  The one that tripped me is copy-n-pasted from page 145 of the OSGi 4.2 Enterprise Specification:&lt;/p&gt;

&lt;p&gt;  &amp;lt;xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;scr:component name=&quot;example.handler&quot;&lt;br/&gt;
     xmlns:scr=&quot;http://www.osgi.org/xmlns/scr/v1.1.0&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;implementation class=&quot;com.acme.HandlerImpl&quot;/&amp;gt;&lt;br/&gt;
     &amp;lt;property name=&quot;event.topics&quot;&amp;gt;some/topic&amp;lt;/property&amp;gt;&lt;br/&gt;
     &amp;lt;service&amp;gt;&lt;br/&gt;
        &amp;lt;provide interface=&lt;br/&gt;
           &quot;org.osgi.service.event.EventHandler&quot;/&amp;gt;&lt;br/&gt;
     &amp;lt;/service&amp;gt;&lt;br/&gt;
  &amp;lt;scr:component&amp;gt;&lt;/p&gt;

&lt;p&gt;Note the typo where the final tag is an open tag instead of a close.  (I reported this to OSGi: &lt;a href=&quot;https://www.osgi.org/bugzilla/show_bug.cgi?id=120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.osgi.org/bugzilla/show_bug.cgi?id=120&lt;/a&gt;.)&lt;/p&gt;

&lt;p&gt;When I started the service, I got this error:&lt;br/&gt;
ERROR: org.example.bundle (3): &lt;span class=&quot;error&quot;&gt;&amp;#91;null&amp;#93;&lt;/span&gt; Cannot register Component&lt;br/&gt;
org.osgi.service.component.ComponentException: Component null validation failed: Implementation class name missing&lt;br/&gt;
        at org.apache.felix.scr.impl.metadata.ComponentMetadata.validationFailure(ComponentMetadata.java:777)&lt;br/&gt;
        at org.apache.felix.scr.impl.metadata.ComponentMetadata.validate(ComponentMetadata.java:645)&lt;br/&gt;
        at org.apache.felix.scr.impl.BundleComponentActivator.loadDescriptor(BundleComponentActivator.java:241)&lt;br/&gt;
        at org.apache.felix.scr.impl.BundleComponentActivator.initialize(BundleComponentActivator.java:147)&lt;br/&gt;
        at org.apache.felix.scr.impl.BundleComponentActivator.&amp;lt;init&amp;gt;(BundleComponentActivator.java:111)&lt;br/&gt;
        at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:285)&lt;br/&gt;
        at org.apache.felix.scr.impl.Activator.bundleChanged(Activator.java:203)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:807)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:729)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:610)&lt;br/&gt;
        at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:3833)&lt;br/&gt;
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1803)&lt;br/&gt;
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:927)&lt;br/&gt;
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:914)&lt;br/&gt;
        at Try.main(Try.java:78)&lt;/p&gt;

&lt;p&gt;Actually, my component was successfully registered.  The error is about the empty component started by the second &amp;lt;scr:component&amp;gt; tag.  But due to this message, I went crazy trying to figure out what was wrong with my &amp;lt;implementation&amp;gt; tag.&lt;/p&gt;</comment>
                            <comment id="13041083" author="fmeschbe" created="Mon, 30 May 2011 11:07:18 +0000"  >&lt;p&gt;Excellent. Thanks, this helps.&lt;/p&gt;</comment>
                            <comment id="13041116" author="fmeschbe" created="Mon, 30 May 2011 12:44:42 +0000"  >&lt;p&gt;Added some checking code to ensure certain situations cause an Exception being thrown in Rev. 1129144:&lt;/p&gt;

&lt;p&gt;  &amp;lt;a&amp;gt;  &amp;#8211; new: throws a ParseException now, used to be silently ignored&lt;br/&gt;
  &amp;lt;/a&amp;gt;  &amp;#8211; already threw an exception&lt;br/&gt;
  &amp;lt;a&amp;gt;&amp;lt;b&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/b&amp;gt; &amp;#8211; already threw an exception&lt;/p&gt;

&lt;p&gt;the new check mechanism particularly should prevent cases like&lt;br/&gt;
   &amp;lt;scr:component ....&amp;gt;&lt;br/&gt;
      ....&lt;br/&gt;
   &amp;lt;scr:component&amp;gt;&lt;/p&gt;

&lt;p&gt;Does this work for you ?&lt;/p&gt;</comment>
                            <comment id="13044422" author="pimlott" created="Sun, 5 Jun 2011 01:38:35 +0000"  >&lt;p&gt;This solves my case, thank you.&lt;/p&gt;</comment>
                            <comment id="13044522" author="fmeschbe" created="Sun, 5 Jun 2011 13:03:37 +0000"  >&lt;p&gt;Thanks for the feedback. Thus resolving fixed.&lt;/p&gt;</comment>
                            <comment id="13501006" author="fmeschbe" created="Tue, 20 Nov 2012 10:58:13 +0000"  >&lt;p&gt;Close after release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l4af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>