<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:54:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4281] Security Warning: Felix with Java Web Start</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4281</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Since the release of Java 7 update 40 the following warning occurs when you try to execute a signed (with valid certificate) Java Web Start application: &lt;/p&gt;

&lt;p&gt;-----------------------------&lt;br/&gt;
Security Warning&lt;/p&gt;

&lt;p&gt;Do you want to run this application?&lt;br/&gt;
An unsigned application from the location below is requesting permission to run.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://&lt;/a&gt;......&lt;/p&gt;

&lt;p&gt;Running unsigned applications like this will be blocked in a future&lt;br/&gt;
release because it is potentially unsafe and a security risk&lt;br/&gt;
-----------------------------&lt;/p&gt;

&lt;p&gt;Although the Java recognizes the certificate in the first dialog, it shows the warning message when the Felix&apos;s init method is invoked.&lt;/p&gt;

&lt;p&gt;I have tested a same application over Java 7 update 21 and everything is ok.&lt;/p&gt;</description>
                <environment>Windows 7 with Java 7 update 40, 64 bits</environment>
        <key id="12673474">FELIX-4281</key>
            <summary>Security Warning: Felix with Java Web Start</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="bilaco">Cesar Souza</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Oct 2013 18:50:43 +0000</created>
                <updated>Wed, 30 Jul 2014 07:16:57 +0000</updated>
                            <resolved>Wed, 9 Jul 2014 14:36:36 +0000</resolved>
                                                    <fixVersion>framework-4.4.1</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13803269" author="nroduit" created="Wed, 23 Oct 2013 20:18:39 +0000"  >&lt;p&gt;The viewer.jnlp file show the security message with JRE 1.7.0_45.&lt;/p&gt;

&lt;p&gt;The strange thing is when you click cancel on the dialog, the application continues to load correctly!&lt;/p&gt;

&lt;p&gt;... And in command line, the funny thing:&lt;br/&gt;
javaws viewer.jnlp (=&amp;gt; shows the security message)&lt;br/&gt;
javaws -verbose viewer.jnlp (=&amp;gt; don&apos;t show the security message)&lt;/p&gt;</comment>
                            <comment id="13803334" author="bilaco" created="Wed, 23 Oct 2013 21:09:44 +0000"  >&lt;p&gt;thanks, Nicolas&lt;/p&gt;


</comment>
                            <comment id="13803985" author="nroduit" created="Thu, 24 Oct 2013 08:35:57 +0000"  >&lt;p&gt;There are new specifications:&lt;br/&gt;
&lt;a href=&quot;https://blogs.oracle.com/java-platform-group/entry/7u45_caller_allowable_codebase_and&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://blogs.oracle.com/java-platform-group/entry/7u45_caller_allowable_codebase_and&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I haven&apos;t read it carefully yet.&lt;/p&gt;</comment>
                            <comment id="13806304" author="nroduit" created="Sun, 27 Oct 2013 10:44:51 +0000"  >&lt;p&gt;I made a very simple test case (see message.zip in attachment) which try to load a class that doesn&apos;t exist with different classloaders:&lt;br/&gt;
1) mvn clean package  -Djarsigner.alias=&quot;your alias&quot; -Djarsigner.storepass=&quot;your pwd&quot; -Djarsigner.keystore=&quot;/your_path/keystore.jks&quot;&lt;br/&gt;
2) javaws /path/launcher.jnlp (=&amp;gt; don&apos;t show the security message)&lt;/p&gt;

&lt;p&gt;But with Felix Framework Distribution 4.2.1 (or  4.3):&lt;br/&gt;
1) Download distribution&lt;br/&gt;
2) Edit the manifest to add the new required attributes:&lt;br/&gt;
Codebase=*&lt;br/&gt;
Permissions=all-permissions&lt;br/&gt;
Trusted-Only=true&lt;br/&gt;
Application-Name=Felix&lt;br/&gt;
2) sign jars&lt;br/&gt;
3) Adapt launcher.jnlp&lt;br/&gt;
4) javaws /path/launcher.jnlp (=&amp;gt; show the security message, when it tries to get the class &quot;dalvik.system.DexFile&quot;)&lt;/p&gt;</comment>
                            <comment id="13947032" author="nroduit" created="Tue, 25 Mar 2014 19:33:03 +0000"  >&lt;p&gt;&lt;a href=&quot;http://www.mail-archive.com/users%40felix.apache.org/msg14643.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/users%40felix.apache.org/msg14643.html&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.mail-archive.com/users%40felix.apache.org/msg14670.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/users%40felix.apache.org/msg14670.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Would it be possible to have an option for not using framework extension.&lt;/p&gt;</comment>
                            <comment id="14018837" author="walkerr" created="Thu, 5 Jun 2014 14:58:10 +0000"  >&lt;p&gt;Just hit the exact same problem - very ugly since our app is otherwise 100% correct, proper manifest entries, and properly signed.&lt;/p&gt;

&lt;p&gt;As an interim, can I propose a new System property which allows this code to be skipped e.g. felix.DexFile.skip&lt;/p&gt;

&lt;p&gt;Default would be to process as present if the property is set absent or not set to true.&lt;/p&gt;</comment>
                            <comment id="14019139" author="walkerr" created="Thu, 5 Jun 2014 19:35:12 +0000"  >&lt;p&gt;Still digging into this one. &lt;/p&gt;

&lt;p&gt;In fact adding the property check as I suggested above does cure the initial problem, which also has a fuller investigation described here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/felix-users/201310.mbox/%3C526CFA1E.3060009@jmicrovision.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/felix-users/201310.mbox/%3C526CFA1E.3060009@jmicrovision.com%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But it moves the problem on to a second case, which is the URLHandlers issue, also noted in the above:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.mail-archive.com/users%40felix.apache.org/msg14643.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/users%40felix.apache.org/msg14643.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I don&apos;t believe the System property check workaround I proposed is the right model. I&apos;d say something better would be to test whether we&apos;re on Android (the first case) or JNLP (the second case) and avoid the errant code if so, always assuming there&apos;s no actual wa to code more defensively around the issue.&lt;/p&gt;

&lt;p&gt;FWIW - the use of a static initializer in BundleWiringImpl also feels a poor choice. Anything that can cause issues such as this might be more gracefully handled in a method that was explicitly called (or not as the case may be).&lt;/p&gt;

</comment>
                            <comment id="14019145" author="karlpauls" created="Thu, 5 Jun 2014 19:39:37 +0000"  >&lt;p&gt;I don&apos;t think this issue has to do with the dexfile stuff. That is just a symptom of the problem namely, if you hit the urlclassloader that loaded felix with a request for a class it can&apos;t find it&apos;ll hit the fake url we add to it to make framework extensions work. Due to the problematic change in how the jvm is doing this security check that is what makes the issue appear - hence, it will not really help you to skip the dexfile loading. We would have to make it so that we don&apos;t register the framework extension url.&lt;/p&gt;</comment>
                            <comment id="14019160" author="walkerr" created="Thu, 5 Jun 2014 19:58:11 +0000"  >&lt;p&gt;Karl&lt;/p&gt;

&lt;p&gt;It goes a little deeper than that I believe. The dexfile stuff is one instance of the root problem. If you patch around that code (which I have) you hit the next instance of the same problem, which occurs when registering URLHandlers.&lt;/p&gt;

&lt;p&gt;Both of these cases use Class.forName() calls - which are documented in several articles as problematic in a JNLP environment where the JNLP classloader is being used. &lt;/p&gt;

&lt;p&gt;So at present, I now have 2 cases which cause the same problem. What I&apos;ve yet to find is a common solution. The 1st one (the dexfile case) can be gotten around with a simple property check - even though I don&apos;t believe that&apos;s the right solution. The second one I&apos;ll dig more into tomorrow - getting late here!&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Edit:&lt;/em&gt; I should add, I don&apos;t believe the dexfle case goes back into the felix extension url handling, I think it&apos;s a standalone case. The stack trace (below) shows no Felix classes after BundleWiringImpl.&lt;/p&gt;

&lt;p&gt;That said, I think the URLHandlers one is the nastier and trickier one to try and deal with&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
&quot;Thread-15&quot; #51 prio=6 os_prio=0 tid=0x000000002ba37000 nid=0x228c in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x000000002a89a000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (on object monitor)&lt;br/&gt;
	at java.lang.Object.wait(Native Method)&lt;br/&gt;
	at java.lang.Object.wait(Unknown Source)&lt;br/&gt;
	at com.sun.javaws.ui.JavawsSysRun.delegate(Unknown Source)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00000005c0f987e8&amp;gt; (a java.lang.Object)&lt;br/&gt;
	at com.sun.deploy.util.DeploySysRun.execute(Unknown Source)&lt;br/&gt;
	at com.sun.deploy.util.DeploySysRun$1.run(Unknown Source)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at com.sun.deploy.util.DeploySysRun.executePrivileged(Unknown Source)&lt;br/&gt;
	at com.sun.deploy.ui.UIFactory.showPublisherInfo(Unknown Source)&lt;br/&gt;
	at com.sun.deploy.uitoolkit.impl.awt.ui.UIFactoryImpl.showPublisherInfo(Unknown Source)&lt;br/&gt;
	at com.sun.deploy.security.SandboxSecurity.showBlockedDialog(Unknown Source)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00000005c141c9e0&amp;gt; (a java.lang.Object)&lt;br/&gt;
	at com.sun.deploy.security.SandboxSecurity.checkRunUntrusted(Unknown Source)&lt;br/&gt;
	at com.sun.deploy.security.SandboxSecurity.checkUnsignedSandboxSecurity(Unknown Source)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00000005c142ebe0&amp;gt; (a com.sun.deploy.util.SessionProperties)&lt;br/&gt;
	at com.sun.deploy.security.SandboxSecurity.isPermissionGranted(Unknown Source)&lt;br/&gt;
	at com.sun.javaws.security.AppPolicy.grantRestrictedAccess(Unknown Source)&lt;br/&gt;
	at com.sun.javaws.security.AppPolicy.addPermissions(Unknown Source)&lt;br/&gt;
	at com.sun.jnlp.JNLPClassLoader.getTrustedCodeSources(Unknown Source)&lt;br/&gt;
	at com.sun.deploy.security.CPCallbackHandler$ParentCallback.strategy(Unknown Source)&lt;br/&gt;
	at com.sun.deploy.security.CPCallbackHandler$ParentCallback.openClassPathElement(Unknown Source)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00000005c0f1f390&amp;gt; (a com.sun.deploy.security.CPCallbackHandler$ParentCallback)&lt;br/&gt;
	at com.sun.deploy.security.DeployURLClassPath$UrlLoader.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at com.sun.deploy.security.DeployURLClassPath$3.run(Unknown Source)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at com.sun.deploy.security.DeployURLClassPath.getLoader(Unknown Source)&lt;br/&gt;
	at com.sun.deploy.security.DeployURLClassPath.getLoader(Unknown Source)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00000005c0f1f160&amp;gt; (a com.sun.deploy.security.DeployURLClassPath)&lt;br/&gt;
	at com.sun.deploy.security.DeployURLClassPath.getResource(Unknown Source)&lt;br/&gt;
	at java.net.URLClassLoader$1.run(Unknown Source)&lt;br/&gt;
	at java.net.URLClassLoader$1.run(Unknown Source)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.net.URLClassLoader.findClass(Unknown Source)&lt;br/&gt;
	at com.sun.jnlp.JNLPClassLoader.findClass(Unknown Source)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(Unknown Source)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00000005c0f1dfc0&amp;gt; (a com.sun.jnlp.JNLPClassLoader)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(Unknown Source)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00000005c0f1df48&amp;gt; (a com.sun.jnlp.JNLPClassLoader)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(Unknown Source)&lt;br/&gt;
	at java.lang.Class.forName0(Native Method)&lt;br/&gt;
	at java.lang.Class.forName(Unknown Source)&lt;br/&gt;
	at org.apache.felix.framework.BundleWiringImpl.&amp;lt;clinit&amp;gt;(BundleWiringImpl.java:1339)&lt;br/&gt;
	at org.apache.felix.framework.StatefulResolver.markResolvedRevisions(StatefulResolver.java:990)&lt;br/&gt;
	at org.apache.felix.framework.StatefulResolver.resolve(StatefulResolver.java:429)&lt;br/&gt;
	at org.apache.felix.framework.Felix.init(Felix.java:692)&lt;br/&gt;
	at com.ascert.vt.launch.VtLauncher.launchFelix(VtLauncher.java:1011)&lt;br/&gt;
	at com.ascert.vt.launch.VtLauncher.launchProfile(VtLauncher.java:983)&lt;br/&gt;
	at com.ascert.vt.launch.VtLauncher.start(VtLauncher.java:675)&lt;br/&gt;
	at com.ascert.vt.launch.VersionCheckLaunchPanel$2.run(VersionCheckLaunchPanel.java:161)&lt;br/&gt;
	at java.lang.Thread.run(Unknown Source)&lt;br/&gt;
===&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="14019194" author="karlpauls" created="Thu, 5 Jun 2014 20:24:18 +0000"  >&lt;p&gt;Really, what we need to do is to introduce a felix.extensions.disable property which makes it so that we don&apos;t register our extension url. That should fix the issue.&lt;/p&gt;</comment>
                            <comment id="14019200" author="karlpauls" created="Thu, 5 Jun 2014 20:29:13 +0000"  >&lt;p&gt;Allow to disable extensions.&lt;/p&gt;</comment>
                            <comment id="14019201" author="karlpauls" created="Thu, 5 Jun 2014 20:30:32 +0000"  >&lt;p&gt;Ok. I attached a patch to this issue which hopefully makes this work if you set felix.extensions.disable=true. Can you please test it for me? If it does work I&apos;ll commit it to trunk (we should have a release soon now anyways so I could make it part of that as well). &lt;/p&gt;</comment>
                            <comment id="14019591" author="walkerr" created="Fri, 6 Jun 2014 05:14:11 +0000"  >&lt;p&gt;Thanks Karl - will give it a try today. I suspect the Extension manager may actually be a 3rd instance of the same forName() case rather than the underlying root cause, but it will be quick to test with your patch thanks.&lt;/p&gt;

&lt;p&gt;Have the day set aside to dig further into this - will report back. Coincidentally, last time I was this deep in the Sun source code for Java was about 10 years ago working with Richard on a classloader issue on a little project called Oscar ... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14019605" author="nroduit" created="Fri, 6 Jun 2014 05:50:35 +0000"  >&lt;p&gt;Thanks Karl, I also think that having an option to disable the extension framework seems to be the only way to fix the issue at the moment.&lt;/p&gt;</comment>
                            <comment id="14019672" author="walkerr" created="Fri, 6 Jun 2014 08:34:43 +0000"  >&lt;p&gt;Patch does work Karl, thanks. There are some adaptations needed (noted below) ... guess it goes to prove that I don&apos;t understand how the ExtensionManager code works or rather what it clashes with in a JNLP!&lt;/p&gt;

&lt;p&gt;If we assume people will only ever use Felix embedded, the mod will work provided they use setProperty to force this property set before launching Felix. But if we want to allow that new property in a JNLP file, we also need to support the required syntax which is that properties in there must be prefixed &quot;jnlp.&quot; to be accessible as System properties e.g.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   &amp;lt;resources&amp;gt;
   ...
      &amp;lt;property name=&quot;jnlp.felix.extensions.disable&quot; value=&quot;true&quot;/&amp;gt; 
   &amp;lt;/resources&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve attached a patch with one implementation approach for this - a mod to SecureAction to check for a &quot;jnlp,&quot; version of a property before falling back to System properties or the supplied default.&lt;/p&gt;

&lt;p&gt;An alternative would be additional init code in Felix or FelixConstants to test each property that we wish to expose to JNLP files and push any non-null value into System properties. This would be more transparent, but also more maintenance whenever new FelixConstants are added.&lt;/p&gt;

&lt;p&gt;An observations I found along the way was that you can launch javaws from the command line with a -silent option. This bypasses the dialog box much like -verbose / -noWebJava but without any other prompting. I don&apos;t think this helps much at this stage, but it definitely shows there is some inner switch that the lower code is testing before putting up the dialog.&lt;/p&gt;

&lt;p&gt;I&apos;m still troubled that I don&apos;t understand exactly what happens lower down in the JNLP classes/classloaders to cause it to decide to put up a blocking dialog rather than just throwing a CNFE. So I may carry on digging to see if I can figure it out for myself. I&apos;d like to believe there may be some other more seamless solution in terms of combinations of attributes, signing and/or built in code checks. We could definitely detect the presence of a JNLP class loader - trouble there is that it&apos;s a com.sun class, and hence implementation dependent. It could differ in other Java implementations I guess.&lt;/p&gt;</comment>
                            <comment id="14019674" author="walkerr" created="Fri, 6 Jun 2014 08:35:52 +0000"  >&lt;p&gt;Patch to SecureAction to test JNLP form of system properties&lt;/p&gt;</comment>
                            <comment id="14019822" author="walkerr" created="Fri, 6 Jun 2014 13:10:46 +0000"  >&lt;p&gt;Well I got to a better understanding, even if that didn&apos;t lead me (yet) to a more graceful solution&lt;/p&gt;

&lt;p&gt;We hit the issue in this part of JNLPClassLoader&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;//----------------------------------------------------------------------
    // CPCallbackClassLoaderIf methods
    //
    public CodeSource[] getTrustedCodeSources(CodeSource[] sources) {
        List list = new ArrayList();

        Policy policy = (Policy) AccessController.doPrivileged(new PrivilegedAction() {
            public Object run() {
                return Policy.getPolicy();
            }
        });

        for (int i=0; i &amp;lt; sources.length; i++) {
            CodeSource cs = sources[i];
            boolean trusted = false;
            PermissionCollection perms;

            perms = policy.getPermissions(cs);
            /* Get permissions based on JNLP file that defines code resource */
            try {
                trusted = _appPolicy.addPermissions(JNLPClassLoader.getInstance(), perms, cs, true);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That last part I think is trying to add/check a permission for the Extension url we added to the classpath of the URLClassLoader. This fails because &quot;http://felix.extensions:9/&quot; is not a trusted location. I tried seeing if adding that to the permitted sites configured in Java Control would remove the error - half expected it would, but for some reason it did not.&lt;/p&gt;

&lt;p&gt;Without some way of either marking that URL as trusted, or allowing it&apos;s use untrusted, I suspect our only option is to skip around the Extension manager as per Karl&apos;s mod - with some form of jnlp specific property handling as noted above. &lt;/p&gt;

&lt;p&gt;In passing, I did notice that SecureAction uses a fixed URLClassLoader.class in the reflection call. This struck me as possibly incorrect. In the JNLP case I wondered if it would result in the super addUrl() method and not any overloaded method being called. I&apos;m not exactly sure how using Reflection to overcome protected method access works - whether it would call the subclass method as per normal overloading, or just call the super class one.&lt;/p&gt;

&lt;p&gt;I adapted the code as follows:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;                case ADD_EXTENSION_URL_ACTION:
                    if (arg2 instanceof URLClassLoader)
                    {
                        Method addURL = arg2.getClass().getDeclaredMethod(&quot;addURL&quot;, new Class[] {URL.class});
                        addURL.setAccessible(true);
                        addURL.invoke(arg2, new Object[]{arg1});
                    }
                    return null;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I had hoped it may alter the behaviour for this case, but sadly not. Depending on the reflection handling though, it may be safer coding. JNLPClassLoader does overload this method in some small way:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    protected void addURL(URL url)
    {
        if (_jclParent != null) {
            /* Also in parent... */
            _jclParent.addURL(url);
        }
        super.addURL(url);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Whilst this has no major effect, there could be other cases of sub-classes of URLClassLoader where this would matter.&lt;/p&gt;</comment>
                            <comment id="14019831" author="walkerr" created="Fri, 6 Jun 2014 13:18:48 +0000"  >&lt;p&gt;One other curiosity - a Q for Karl.&lt;/p&gt;

&lt;p&gt;In the patched code, I noticed the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;            Felix.m_secureAction.addURLToURLClassLoader(Felix.m_secureAction.createURL(
                Felix.m_secureAction.createURL(null, &quot;http:&quot;, extensionManager),
                &quot;http://felix.extensions:9/&quot;, extensionManager),
                Felix.class.getClassLoader());

                extensionManager = new ExtensionManager();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Was curious why the extensionManager  is only set non-null after the addURLToURLClassLoader() call. In the original version this would not have been a null value, the new ExtensionManager() would have been supplied to this call.&lt;/p&gt;

&lt;p&gt;Is there a specific reason to pass null for extensionManager into addURLToURLClassLoader()?&lt;/p&gt;</comment>
                            <comment id="14020033" author="nroduit" created="Fri, 6 Jun 2014 16:51:39 +0000"  >&lt;p&gt;I agree that it would be necessary to have the property jnlp.felix.extensions.disable to be compliant with the new Java Web Start restrictions. It could be both: felix.extensions.disable  and jnlp.felix.extensions.disable&lt;/p&gt;</comment>
                            <comment id="14020356" author="karlpauls" created="Fri, 6 Jun 2014 20:55:46 +0000"  >&lt;p&gt;I commited a modified version of my patch to trunk (to deal with the null value that Rob pointed out - thanks) in r1601009. Please close this issue if it works for you.&lt;/p&gt;

&lt;p&gt;Regarding the jnlp prefix for the property I don&apos;t think we should deal with that inside the framework - the launcher of the framework can deal with it or the jnlp file has to be signed (to make insecure properties work). Regardless, however, even if we have to support something like that please open another issue and propose it there.&lt;/p&gt;</comment>
                            <comment id="14020373" author="karlpauls" created="Fri, 6 Jun 2014 21:06:07 +0000"  >&lt;p&gt;@Rob: this is what the javadoc has to say (hence, we don&apos;t need to worry): &lt;/p&gt;

&lt;p&gt;&quot;If the underlying method is an instance method, it is invoked using dynamic method lookup as documented in The Java Language Specification, Second Edition, section 15.12.4.4; in particular, overriding based on the runtime type of the target object will occur.&quot;&lt;/p&gt;
</comment>
                            <comment id="14020730" author="walkerr" created="Sat, 7 Jun 2014 06:15:28 +0000"  >&lt;p&gt;Will test it when back Monday Karl - sure it&apos;s all good, functionally same as what I was running yesterday which works fine.&lt;/p&gt;

&lt;p&gt;New JIRA raised for JNLP properties:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-4528&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FELIX-4528&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="14021877" author="walkerr" created="Mon, 9 Jun 2014 11:02:17 +0000"  >&lt;p&gt;Working my side.&lt;/p&gt;

&lt;p&gt;Nicolas do you want to do any more tests before we close this one?&lt;/p&gt;

&lt;p&gt;I&apos;ll leave &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-4528&quot; title=&quot;Felix properties cannot be used in unsigned JNLP files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-4528&quot;&gt;&lt;del&gt;FELIX-4528&lt;/del&gt;&lt;/a&gt; open for a week or two for comments/feedback, and if no objections will commit that also since without it Felix is still not really WebStart friendly.&lt;/p&gt;</comment>
                            <comment id="14042562" author="nroduit" created="Tue, 24 Jun 2014 19:27:18 +0000"  >&lt;p&gt;It is OK for me. I let Cesar Souza close the issue.&lt;/p&gt;</comment>
                            <comment id="14042653" author="bilaco" created="Tue, 24 Jun 2014 20:41:39 +0000"  >&lt;p&gt;thank you, guys&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12610469" name="message.zip" size="2397" author="nroduit" created="Sun, 27 Oct 2013 10:18:42 +0000"/>
                            <attachment id="12648615" name="sec_action.patch" size="1097" author="walkerr" created="Fri, 6 Jun 2014 08:35:52 +0000"/>
                            <attachment id="12609914" name="viewer.jnlp" size="3917" author="nroduit" created="Wed, 23 Oct 2013 20:18:39 +0000"/>
                            <attachment id="12648542" name="webstart.patch" size="1763" author="karlpauls" created="Thu, 5 Jun 2014 20:29:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353097</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ovkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353384</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>