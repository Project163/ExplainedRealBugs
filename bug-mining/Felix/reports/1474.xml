<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:33:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3337] DependencyManager/Updated configuration dependency does not propagate to provided service properties</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3337</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;This issue is related to the following post:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;http://www.mail-archive.com/users@felix.apache.org/msg11711.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/users@felix.apache.org/msg11711.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The problem is the following; it seems that when a service S1 depends on a ConfigurationDependency with propagate = true, then the configuration is propagated to the service properties provided by S1, but when the configuration is changed (by ConfigAdmin), then the S1 service properties are not updated.&lt;/p&gt;

&lt;p&gt;For example, here is the service S1 which depends on a Configuratin pid &quot;test&quot;:&lt;/p&gt;

&lt;p&gt;         Component s1 = m.createComponent()&lt;br/&gt;
                .setImplementation(new S1()))&lt;br/&gt;
                .setInterface(S1.class.getName(), null)&lt;br/&gt;
                .add(m.createConfigurationDependency()&lt;br/&gt;
                     .setPid(&quot;test&quot;)&lt;br/&gt;
                     .setPropagate(true));&lt;/p&gt;

&lt;p&gt;We assume that the configuration pid &quot;test&quot; contains &quot;testkey=testvalue&quot;&lt;/p&gt;

&lt;p&gt;Now, we have S2, which depends on S1 like this:&lt;/p&gt;

&lt;p&gt;        Component s2 = m.createComponent()&lt;br/&gt;
                .setImplementation(new S2())&lt;br/&gt;
                .add(m.createServiceDependency()&lt;br/&gt;
                     .setService(S1.class, (&quot;(testkey=testvalue)&quot;))&lt;br/&gt;
                     .setRequired(true)&lt;br/&gt;
                     .setCallbacks(&quot;add&quot;, &quot;change&quot;, null));&lt;/p&gt;

&lt;p&gt;So, at initialization, S2 is properly injected with S1 (in its &quot;add&quot; method).&lt;br/&gt;
But when the configuration is updated, S2 is not called back in its &quot;change&quot; method (I think that it should be, because the ConfigurationDependency&lt;br/&gt;
declared in S1 is using propagate=true flag.&lt;/p&gt;

&lt;p&gt;I will manage to commit a testcase which reproduce this issue.&lt;/p&gt;

&lt;p&gt;/pierre&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12541086">FELIX-3337</key>
            <summary>DependencyManager/Updated configuration dependency does not propagate to provided service properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pderop">Pierre De Rop</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Feb 2012 15:24:48 +0000</created>
                <updated>Sat, 4 Feb 2012 09:02:10 +0000</updated>
                            <resolved>Sat, 4 Feb 2012 09:02:09 +0000</resolved>
                                    <version>dependencymanager-3.0.0</version>
                                                    <component>Dependency Manager</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13199773" author="pderop" created="Fri, 3 Feb 2012 15:32:28 +0000"  >&lt;p&gt;I committed a new test which seems to reproduce the issue:&lt;/p&gt;

&lt;p&gt;src/test/java/org/apache/felix/dm/test/FELIX3337_UpdatedConfigurationDependencyWithPropagationTest.java&lt;/p&gt;</comment>
                            <comment id="13200366" author="pderop" created="Sat, 4 Feb 2012 09:02:10 +0000"  >&lt;p&gt;Sorry Marcel for this useless jira issue: there is absolutely no bugs, and the problem was actually in the junit test, not in the dependencymanager. &lt;/p&gt;

&lt;p&gt;The problem was the following: the S2 service was depending on S1 using a service filter &quot;(testkey=testvalue)&quot;. And from config admin, the testkey property was removed, that&apos;s why S2 was losing its dependendency from S1, which was not provided anymore with the property &quot;testkey=testvalue&quot;.&lt;/p&gt;

&lt;p&gt;I&apos;m cancelling this issue (as it is invalid), and will update the testcase I committed yesterday.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07gvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>41500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>