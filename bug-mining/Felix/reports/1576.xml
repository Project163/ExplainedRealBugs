<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:41:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3414] BundleException: Unable to acquire global lock for resolve</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3414</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;After trying to use latest org.apache.felix.fileinstall-3.2.0 I always get the following error. The bundle that fails it not always the same. It changes.Downgrading back to org.apache.felix.fileinstall-3.1.10 always works fine.&lt;/p&gt;

&lt;p&gt;Installed C:\Users\user\install\versions\strategy-server-1.0-SNAPSHOT\instances\1-a\strategies\example-1.0-SNAPSHOT.jar&lt;br/&gt;
...&lt;br/&gt;
Error while starting bundle: &lt;a href=&quot;file:/C:/Users/user/install/versions/strategy-server-1.0-SNAPSHOT/instances/1-a/strategies/example-1.0-SNAPSHOT.jar:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/C:/Users/user/install/versions/strategy-server-1.0-SNAPSHOT/instances/1-a/strategies/example-1.0-SNAPSHOT.jar:&lt;/a&gt; org.osgi.framework.BundleException: Unable to acquire global lock for resolve.&lt;br/&gt;
org.osgi.framework.BundleException: Unable to acquire global lock for resolve.&lt;br/&gt;
	at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:3832)&lt;br/&gt;
	at org.apache.felix.framework.Felix.startBundle(Felix.java:1868)&lt;br/&gt;
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:944)&lt;br/&gt;
	at org.apache.felix.fileinstall.internal.DirectoryWatcher.startBundle(DirectoryWatcher.java:1232)&lt;br/&gt;
	at org.apache.felix.fileinstall.internal.DirectoryWatcher.startBundles(DirectoryWatcher.java:1206)&lt;br/&gt;
	at org.apache.felix.fileinstall.internal.DirectoryWatcher.process(DirectoryWatcher.java:491)&lt;br/&gt;
	at org.apache.felix.fileinstall.internal.DirectoryWatcher.start(DirectoryWatcher.java:219)&lt;br/&gt;
	at org.apache.felix.fileinstall.internal.FileInstall.updated(FileInstall.java:247)&lt;br/&gt;
	at org.apache.felix.fileinstall.internal.FileInstall.start(FileInstall.java:150)&lt;br/&gt;
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:641)&lt;br/&gt;
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:1977)&lt;br/&gt;
	at org.apache.felix.framework.Felix.startBundle(Felix.java:1895)&lt;br/&gt;
	at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1191)&lt;br/&gt;
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:295)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-29 23:24:37,788&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;FelixDispatchQueue&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;server.osgi.StrategyEngineHost&amp;#93;&lt;/span&gt; FrameworkEvent: org.apache.felix.framework &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; PACKAGES_REFRESHED null&lt;/p&gt;</description>
                <environment>Windows 7. org.apache.felix.framework:4.0.2</environment>
        <key id="12548779">FELIX-3414</key>
            <summary>BundleException: Unable to acquire global lock for resolve</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="felix_user">Leon</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Mar 2012 03:35:57 +0000</created>
                <updated>Tue, 17 Mar 2015 06:59:01 +0000</updated>
                            <resolved>Mon, 11 Jun 2012 16:04:34 +0000</resolved>
                                    <version>fileinstall-3.2.0</version>
                                    <fixVersion>fileinstall-3.2.4</fixVersion>
                                    <component>File Install</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13252372" author="albertdevs" created="Thu, 12 Apr 2012 12:13:39 +0000"  >&lt;p&gt;I believe I&apos;ve seen a similar problem when I use FileInstall on Equinox.&lt;/p&gt;

&lt;p&gt;Due to the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-2066&quot; title=&quot;File Install fails to move fragment bundle into RESOLVED state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-2066&quot;&gt;&lt;del&gt;FELIX-2066&lt;/del&gt;&lt;/a&gt; the component calls refreshPackages on a number of bundles. The refresh happens in another thread (per the OSGi spec), but the FileInstall component does not wait until the refresh is complete. Result: the bundle states are inconsistent, and the startBundle calls later on will trigger all sorts of errors.&lt;/p&gt;

&lt;p&gt;This might be fixed by registering a FrameworkListener and then blocking the DirectoryWatcher thread untill a PACKAGES_REFRESHED event is received. This might be unpredictable though, as we don&apos;t know if this event will ever happen, just as we can&apos;t conclude that the refresh failed if an ERROR event happens because some other framework component might have failed.&lt;/p&gt;

&lt;p&gt;The best approach is for the refresh to happen through the OSGi 4.3 FrameworkWiring service: this service allows one to pass FrameworkListeners to correctly signal if the operation completed or failed. This does break compatibility with older Felix and Equinox versions, but I believe it&apos;s either that or the improved refresh which must be thrown out.&lt;/p&gt;</comment>
                            <comment id="13269395" author="adrian2k7" created="Mon, 7 May 2012 06:17:05 +0000"  >&lt;p&gt;We&apos;ve got the same problem after upgrading. We also sometimes see that bundles are &quot;deadlocked&quot; in &quot;stopping&quot; when trying to redeploy the bundle. Might this have something to do with this issue?&lt;/p&gt;</comment>
                            <comment id="13292857" author="gnt" created="Mon, 11 Jun 2012 16:04:34 +0000"  >&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1348921&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1348921&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Simple workaround until we can upgrade to the osgi wiring api.&lt;br/&gt;
If this is not sufficient, we may want to introduce a flag to disable the refresh completely.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12560188">FELIX-3543</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233876</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 24 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07h7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>41555</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>