<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:51:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4325] [DS] Synchronization issue when activating component</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4325</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt; When activating a component, the AbstractComponentManager#activateInternal method checks some properties, then grab the lock and actually activate the component, leaving a gap between the check and the lock being acquired, which can result in the component being deactivated in the mean time, ultimately leading to NPE because m_tracker has been nulled.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680235">FELIX-4325</key>
            <summary>[DS] Synchronization issue when activating component</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="gnodet">Guillaume Nodet</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Nov 2013 09:48:33 +0000</created>
                <updated>Wed, 6 Aug 2014 02:21:51 +0000</updated>
                            <resolved>Wed, 20 Nov 2013 09:52:47 +0000</resolved>
                                    <version>scr-1.8.0</version>
                                    <fixVersion>scr-1.8.2</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13827490" author="gnt" created="Wed, 20 Nov 2013 09:49:22 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR: Bundle org.fusesource.fabric.fabric-git [80] EventDispatcher: Error during dispatch. (java.lang.NullPointerException)
java.lang.NullPointerException
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.prebind(DependencyManager.java:376)
	at org.apache.felix.scr.impl.manager.DependencyManager.prebind(DependencyManager.java:1392)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.collectDependencies(AbstractComponentManager.java:1099)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:804)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:827)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:907)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:871)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1477)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1398)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:1210)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:1148)


ERROR: Bundle org.fusesource.fabric.fabric-zookeeper [48] EventDispatcher: Error during dispatch. (java.lang.NullPointerException)
java.lang.NullPointerException
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.prebind(DependencyManager.java:954)
	at org.apache.felix.scr.impl.manager.DependencyManager.prebind(DependencyManager.java:1392)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.collectDependencies(AbstractComponentManager.java:1099)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:804)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:827)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:907)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:871)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1477)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1398)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:1210)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:1148)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1429)
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:934)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:795)
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:544)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4666)
	at org.apache.felix.framework.Felix.registerService(Felix.java:3674)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:347)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:320)
	at org.apache.felix.cm.impl.ConfigurationManager.start(ConfigurationManager.java:318)
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:645)
	at org.apache.felix.framework.Felix.doActivateBundle(Felix.java:2387)
	at org.apache.felix.framework.Felix$7.call(Felix.java:2325)
	at org.apache.felix.framework.Felix$6.call(Felix.java:2208)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
	at java.util.concurrent.FutureTask.run(FutureTask.java:166)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:722)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13827493" author="gnt" created="Wed, 20 Nov 2013 09:51:35 +0000"  >&lt;p&gt;Proposed patch to implement the double-check-locking pattern to close the gap.  The use of this pattern is valid because the 3 properties checked are all flagged as volatile.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/scr/src/main/java/org/apache/felix/scr/impl/manager/AbstractComponentManager.java b/scr/src/main/java/org/apache/felix/scr/impl/manager/AbstractComponentManager.
index dacad1b..a3322bd 100644
--- a/scr/src/main/java/org/apache/felix/scr/impl/manager/AbstractComponentManager.java
+++ b/scr/src/main/java/org/apache/felix/scr/impl/manager/AbstractComponentManager.java
@@ -807,6 +807,24 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AbstractComponentManager&amp;lt;S&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Component, SimpleLo
         obtainActivationReadLock( &lt;span class=&quot;code-quote&quot;&gt;&quot;activateInternal&quot;&lt;/span&gt; );
         &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
         {
+            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; check conditions now that we have obtained the lock
&lt;/span&gt;+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( m_disposed )
+            {
+                log( LogService.LOG_DEBUG, &lt;span class=&quot;code-quote&quot;&gt;&quot;ActivateInternal: disposed&quot;&lt;/span&gt;,
+                        &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; );
+                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
+            }
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( m_activated ) {
+                log( LogService.LOG_DEBUG, &lt;span class=&quot;code-quote&quot;&gt;&quot;ActivateInternal: already activated&quot;&lt;/span&gt;,
+                        &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; );
+                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
+            }
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( !isEnabled() )
+            {
+                log( LogService.LOG_DEBUG, &lt;span class=&quot;code-quote&quot;&gt;&quot;Component is not enabled; not activating component&quot;&lt;/span&gt;,
+                        &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; );
+                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
+            }
             &lt;span class=&quot;code-comment&quot;&gt;// Before creating the implementation object, we are going to
&lt;/span&gt;             &lt;span class=&quot;code-comment&quot;&gt;// test &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; all the mandatory dependencies are satisfied
&lt;/span&gt;             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( !verifyDependencyManagers() )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13827494" author="gnt" created="Wed, 20 Nov 2013 09:52:47 +0000"  >&lt;p&gt;Committing to &lt;a href=&quot;https://svn.apache.org/repos/asf/felix/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/felix/trunk&lt;/a&gt; ...&lt;br/&gt;
	M	scr/src/main/java/org/apache/felix/scr/impl/manager/AbstractComponentManager.java&lt;br/&gt;
Committed r1543743&lt;/p&gt;</comment>
                            <comment id="14087148" author="djencks" created="Wed, 6 Aug 2014 02:21:51 +0000"  >&lt;p&gt;closing remaining 1.8.2 resolved issues&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12678984">FELIX-4313</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359498</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pz2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>