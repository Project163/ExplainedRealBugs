<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:46:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3762] NPE in UpdateConfiguration#run</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3762</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;During startup I sometimes see a set of these NPE&apos;s :&lt;br/&gt;
16.11.2012 04:48:47.004 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;CM Configuration Updater (Update: pid=org.apache.sling.servlets.resolver.SlingServletResolver)&amp;#93;&lt;/span&gt; org.apache.felix.configadmin Service &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.felix.cm.ConfigurationAdmin,48&amp;#93;&lt;/span&gt; Unexpected problem executing task (java.lang.NullPointerException) java.lang.NullPointerException&lt;br/&gt;
	at org.apache.felix.cm.impl.ConfigurationManager$UpdateConfiguration.run(ConfigurationManager.java:1701)&lt;br/&gt;
	at org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:103)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
16.11.2012 04:48:47.005 &lt;b&gt;INFO&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;FelixStartLevel&amp;#93;&lt;/span&gt; org.apache.felix.configadmin BundleEvent STARTED&lt;/p&gt;

&lt;p&gt;Looking at the code, it seems the configuration update thread is started before managedServiceTracker or managedServiceFactoryTracker are set in the start() method of the ConfigurationManager&lt;/p&gt;</description>
                <environment></environment>
        <key id="12616405">FELIX-3762</key>
            <summary>NPE in UpdateConfiguration#run</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Nov 2012 13:11:18 +0000</created>
                <updated>Sat, 28 Sep 2013 15:26:59 +0000</updated>
                            <resolved>Tue, 20 Nov 2012 10:56:17 +0000</resolved>
                                    <version>configadmin-1.6.0</version>
                                    <fixVersion>configadmin-1.8.0</fixVersion>
                                    <component>Configuration Admin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13498815" author="cziegeler" created="Fri, 16 Nov 2012 13:25:33 +0000"  >&lt;p&gt;Looking more into the code, I&apos;m really wondering how this could happen?&lt;/p&gt;</comment>
                            <comment id="13498918" author="fmeschbe" created="Fri, 16 Nov 2012 16:55:02 +0000"  >&lt;p&gt;This is probably what happens:&lt;/p&gt;

&lt;p&gt;1 Thread created (not started)&lt;br/&gt;
2 ConfigurationAdmin service is registered and a ServiceListener is creating or updating configuration&lt;br/&gt;
3 An UpdateTask is created which sets the &quot;helper&quot; field in the constructor&lt;br/&gt;
4 The managedService&lt;span class=&quot;error&quot;&gt;&amp;#91;Factory&amp;#93;&lt;/span&gt;Trackers are created&lt;br/&gt;
5 The threads are started and the UpdateTask executed&lt;/p&gt;

&lt;p&gt;The problem is step 3 where the helper field is set as a reference to the appropriate managedService&lt;span class=&quot;error&quot;&gt;&amp;#91;Factory&amp;#93;&lt;/span&gt;Tracker. Since this is still null, this fails.&lt;/p&gt;</comment>
                            <comment id="13498971" author="fmeschbe" created="Fri, 16 Nov 2012 17:54:32 +0000"  >&lt;p&gt;Proposing to set the helper on-demand when the task is executed, which will always be after the trackers have been set and started.&lt;/p&gt;

&lt;p&gt;WDYT ?&lt;/p&gt;</comment>
                            <comment id="13499424" author="cziegeler" created="Sat, 17 Nov 2012 13:50:32 +0000"  >&lt;p&gt;Yes, looks good to me - so far I couldn&apos;t reproduce the problem just saw it once,&lt;/p&gt;</comment>
                            <comment id="13499859" author="fmeschbe" created="Sun, 18 Nov 2012 18:03:22 +0000"  >&lt;p&gt;Applied the patch in Rev. 1410944.&lt;/p&gt;

&lt;p&gt;Tests and CT still pass.&lt;/p&gt;

&lt;p&gt;&amp;gt; so far I couldn&apos;t reproduce the problem just saw it once&lt;/p&gt;

&lt;p&gt;Other concurrency issues only showed up on Linux systems, maybe this is a similar case ?&lt;/p&gt;</comment>
                            <comment id="13500998" author="fmeschbe" created="Tue, 20 Nov 2012 10:56:17 +0000"  >&lt;p&gt;I think this can be resolved.&lt;/p&gt;</comment>
                            <comment id="13780871" author="fmeschbe" created="Sat, 28 Sep 2013 15:26:59 +0000"  >&lt;p&gt;Close after release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12553806" name="FELIX-3762.patch" size="5968" author="fmeschbe" created="Fri, 16 Nov 2012 17:54:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>258186</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0knmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>118645</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>