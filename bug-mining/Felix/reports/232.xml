<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:07:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-676] Mandatory attribute matching not working for  DynamicImport-Package</title>
                <link>https://issues.apache.org/jira/browse/FELIX-676</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Section #3.8.2 of R4 spec says the following:&lt;/p&gt;

&lt;p&gt;/All mandatory arbitrary attributes (as specified by the exporter, see Mandatory Attributes on page 45) must be specified in the dynamic import definition and match./&lt;/p&gt;

&lt;p&gt;I suspect it is &lt;b&gt;not&lt;/b&gt; working in Felix yet. I am using Felix v1.0.4. Mandatory attributes are considered while resolving static imports, but not for dynamic imports. I have two bundles that have identical contents, except that bundle #10 uses regular import, where as bundle #11 uses dynamic import. They both are trying to load a class foo.A. Package foo is exported by bundle #12 and it has a mandatory attribute defined like this:&lt;br/&gt;
/&lt;br/&gt;
Export-Package = foo;password=foo;mandatory:=password/&lt;/p&gt;

&lt;p&gt;As shown below, when I start bundle #10, I get resolution error, where as bundle #11 happily wires to bundle #12.&lt;/p&gt;

&lt;p&gt;-&amp;gt; start 10&lt;br/&gt;
org.osgi.framework.BundleException: Unresolved package in bundle 10: package; (package=foo)&lt;br/&gt;
-&amp;gt; start 11&lt;br/&gt;
DEBUG: WIRE: 11.0 -&amp;gt; org.osgi.framework -&amp;gt; 0&lt;br/&gt;
DEBUG: WIRE: 12.0 -&amp;gt; foo -&amp;gt; 12.0&lt;br/&gt;
DEBUG: WIRE: 11.0 -&amp;gt; foo -&amp;gt; 12.0&lt;br/&gt;
class foo.A is loaded by 12.0&lt;/p&gt;

&lt;p&gt;The diff between manifest files of bundle #10 and #11 is supplied below:&lt;/p&gt;

&lt;p&gt;diff dynamic-importer/target/classes/META-INF/MANIFEST.MF static-importer/target/classes/META-INF/MANIFEST.MF&lt;br/&gt;
5,6c5,6&lt;br/&gt;
&amp;lt; Import-Package: org.osgi.framework;version=&quot;1.3&quot;&lt;br/&gt;
&amp;lt; Bnd-LastModified: 1218274803828&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&amp;gt; Import-Package: foo,org.osgi.framework;version=&quot;1.3&quot;&lt;br/&gt;
&amp;gt; Bnd-LastModified: 1218274805799&lt;br/&gt;
8c8&lt;br/&gt;
&amp;lt; Bundle-Name: dynamic-importer&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&amp;gt; Bundle-Name: static-importer&lt;br/&gt;
12,13c12,13&lt;br/&gt;
&amp;lt; Bundle-SymbolicName: sahoo.dynamic-import-mandatory-attr.dynamic-impor&lt;br/&gt;
&amp;lt;  ter&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&amp;gt; Bundle-SymbolicName: sahoo.dynamic-import-mandatory-attr.static-import&lt;br/&gt;
&amp;gt;  er&lt;br/&gt;
15d14&lt;br/&gt;
&amp;lt; DynamicImport-Package: *&lt;/p&gt;

&lt;p&gt;I am attaching a simple test case demonstrating the same.&lt;/p&gt;

&lt;p&gt;I suspect it has to do with the way filters are used to match requirements with capabilities. The filter is not aware of mandatory attributes, so it matches even when they are not specified.&lt;/p&gt;</description>
                <environment>NA</environment>
        <key id="12402059">FELIX-676</key>
            <summary>Mandatory attribute matching not working for  DynamicImport-Package</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="sahoo">Sanjeeb Kumar Sahoo</reporter>
                        <labels>
                    </labels>
                <created>Sat, 9 Aug 2008 14:33:37 +0000</created>
                <updated>Tue, 12 Aug 2008 05:08:57 +0000</updated>
                            <resolved>Mon, 11 Aug 2008 18:08:50 +0000</resolved>
                                    <version>framework-1.0.4</version>
                                    <fixVersion>framework-1.2.0</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12621142" author="sahoo" created="Sat, 9 Aug 2008 14:36:31 +0000"  >&lt;p&gt;Unzip. Read README&lt;/p&gt;</comment>
                            <comment id="12621532" author="rickhall" created="Mon, 11 Aug 2008 18:08:50 +0000"  >&lt;p&gt;I applied a patch to resolve this issue. The short explanation is that we were just ignoring matching attributes altogether when it came to dynamic import resolution. The supplied example now works as expected. I even got around to fixing our diagnostic message for dynamic imports, which has been broken since we added support for require-bundle.&lt;/p&gt;

&lt;p&gt;Sahoo, please see if trunk resolves your issues. If so, please close this bug. Thanks.&lt;/p&gt;</comment>
                            <comment id="12621682" author="sahoo" created="Tue, 12 Aug 2008 03:57:48 +0000"  >&lt;p&gt;Richard,&lt;/p&gt;

&lt;p&gt;Yes, I have now verified the fix in my environment. Thanks for the quick turn around.&lt;/p&gt;

&lt;p&gt;Sahoo&lt;/p&gt;</comment>
                            <comment id="12621694" author="rickhall" created="Tue, 12 Aug 2008 05:08:57 +0000"  >&lt;p&gt;Closing since Sahoo says it works for him.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12387876" name="dynamic-import-mandatory-attr.zip" size="7377" author="sahoo" created="Sat, 9 Aug 2008 14:36:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58313</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1411r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>