<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:08:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-734] Remote shell bundle can prevent felix shutdown</title>
                <link>https://issues.apache.org/jira/browse/FELIX-734</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>
&lt;p&gt;On one of our PCs, issuing a shutdown command to felix remote shell would hang indefinitely.  We could go to the console window and still type in commands to the local shell, and a &apos;ps&apos; showed that bundle 0 and the remote-shell bundle were in &quot;stopping&quot; states.&lt;/p&gt;

&lt;p&gt;The problem was in remote.shell&apos;s Listener.java.  The deactivate method seemed to be expecting the m_ServerSocket.close() call on line 70 to cause an exception in the waiting thread at line 104, the  m_ServerSocket.accept() call.&lt;/p&gt;

&lt;p&gt;For most of our machines, this seems to work as expected.  But the one that did waited forever for the thread join to happen, and could never shutdown.&lt;/p&gt;

&lt;p&gt;To address this, we set the serverSocket&apos;s SOTimeout field, so that it it will timeout, go through the do/while loop, and reevaluate the m_stop variable.  The timeout is configurable via the bundle context property &quot;osgi.shell.telnet.SocketTimeout&quot; and defaults to 0, the current behavior.&lt;/p&gt;

&lt;p&gt;Patch will be attached shortly.&lt;/p&gt;</description>
                <environment>Sun JDK 1.6.0_02,&lt;br/&gt;
Windows XP Pro,&lt;br/&gt;
felix 1.2.1, shell-remote 1.0.2</environment>
        <key id="12405080">FELIX-734</key>
            <summary>Remote shell bundle can prevent felix shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="pforhan">Patrick Forhan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Sep 2008 14:41:41 +0000</created>
                <updated>Mon, 2 Feb 2009 07:09:00 +0000</updated>
                            <resolved>Mon, 2 Feb 2009 07:09:00 +0000</resolved>
                                    <version>shell.remote-1.0.2</version>
                                    <fixVersion>shell.remote-1.0.4</fixVersion>
                                    <component>Remote Shell</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12634773" author="fmeschbe" created="Fri, 26 Sep 2008 07:01:39 +0000"  >&lt;p&gt;Thanks for the supplied patch. I will look into applying it shortly.&lt;/p&gt;

&lt;p&gt;Can you please tell me the Java runtime version and vendor as well as possibly the OS platform you used, where you encountered the issue. Thanks.&lt;/p&gt;</comment>
                            <comment id="12635329" author="fmeschbe" created="Mon, 29 Sep 2008 10:05:50 +0000"  >&lt;p&gt;I can only reproduce a similar behaviour when running inside Cygwin. What I see is, that it takes a long time for the ServerSocket constructor to return. Sometime it even does not return, thus the listener thread remains &quot;active&quot; in the constructor. It seems that the VM hangs loading some native library. When shutting down the framework in this situation, the thread cannot be stopped and the framework just seems to be hanging.&lt;/p&gt;

&lt;p&gt;Interestingly, when removing the shell.tui bundle, this does not happen and everything works just fine ..&lt;/p&gt;

&lt;p&gt;Maybe someone more knowledgeable in windows networking has some clue ??&lt;/p&gt;

&lt;p&gt;Unfortunately, at least in my case, applying the patch won&apos;t help, because it is the ServerSocket constructor blocking the stuff ...&lt;/p&gt;</comment>
                            <comment id="12669517" author="fmeschbe" created="Mon, 2 Feb 2009 07:09:00 +0000"  >&lt;p&gt;I have applied your patch, since it makes sense, regardless of my ability to reproduce the original issue.&lt;/p&gt;

&lt;p&gt;Note, though, that for consisency  I modified the property name to &quot;osgi.shell.telnet.socketTimeout&quot; (lower case&lt;br/&gt;
s in socketTimeout).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12390840" name="RemoteShellListenerPatch.txt" size="2137" author="pforhan" created="Wed, 24 Sep 2008 14:43:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58255</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vumn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183935</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>