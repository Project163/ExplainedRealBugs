<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:09:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5568] SCR contains compact3 profile code</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5568</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;blockquote&gt;
&lt;p&gt;$ jdeps -P *.jar |grep compact3&lt;br/&gt;
org.apache.felix.scr-2.0.8.jar -&amp;gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.121-1.b14.fc25.x86_64/jre/lib/rt.jar (compact3)&lt;br/&gt;
      -&amp;gt; java.lang.management                               compact3&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Maybe split off the compact3 part as an optional extension/fragment?&lt;/p&gt;</description>
                <environment>Fedora 25 x64</environment>
        <key id="13046280">FELIX-5568</key>
            <summary>SCR contains compact3 profile code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="mailings@hupie.com">Ferry Huberts</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Feb 2017 08:41:59 +0000</created>
                <updated>Fri, 28 Apr 2017 08:39:51 +0000</updated>
                            <resolved>Fri, 31 Mar 2017 12:05:38 +0000</resolved>
                                    <version>scr-2.0.8</version>
                                    <fixVersion>scr-2.0.10</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15884156" author="mailings@hupie.com" created="Sat, 25 Feb 2017 08:59:09 +0000"  >&lt;p&gt;on master (git-svn-id: &lt;a href=&quot;http://svn.apache.org/repos/asf/felix/trunk@1784269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/felix/trunk@1784269&lt;/a&gt; 13f79535-47bb-0310-9956-ffa450edef68):&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;$ grep -nri import *|grep java.lang.management&lt;br/&gt;
impl/manager/ThreadDump.java:21:import java.lang.management.ManagementFactory;&lt;br/&gt;
impl/manager/ThreadDump.java:22:import java.lang.management.ThreadInfo;&lt;br/&gt;
impl/manager/ThreadDump.java:23:import java.lang.management.ThreadMXBean;&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="15888042" author="mailings@hupie.com" created="Tue, 28 Feb 2017 13:53:21 +0000"  >&lt;p&gt;It does run under compact1.&lt;br/&gt;
However, trying to connect with jconsole to it (obviously) crashes it since jconsole uses JMX (compact3)&lt;/p&gt;</comment>
                            <comment id="15888418" author="djencks" created="Tue, 28 Feb 2017 16:46:37 +0000"  >&lt;p&gt;Do you have any idea why trying to connect jconsole would have any effect?  AFAIK the JMX related code has nothing to do with actual JMX usage, it is the only way I could figure out to log a thread dump.  It should only get called in case of lock timeout in a deadlock situation.  Do you have any stack trace information or other logging output?&lt;/p&gt;</comment>
                            <comment id="15888444" author="mailings@hupie.com" created="Tue, 28 Feb 2017 17:00:24 +0000"  >&lt;p&gt;Quick-and-Dirty:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;    final ThreadGroup currentGroup = Thread.currentThread().getThreadGroup();&lt;br/&gt;
    final int noThreads = currentGroup.activeCount();&lt;br/&gt;
    final Thread[] lstThreads = new Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;noThreads&amp;#93;&lt;/span&gt;;&lt;br/&gt;
    currentGroup.enumerate(lstThreads);&lt;br/&gt;
    for (int i = 0; i &amp;lt; noThreads; i++) {&lt;br/&gt;
      System.out.println();&lt;br/&gt;
      System.out.println(&quot;Thread No:&quot; + i + &quot; = &quot; + lstThreads&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.getName());&lt;br/&gt;
      final StackTraceElement[] st = lstThreads&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.getStackTrace();&lt;br/&gt;
      for (final StackTraceElement element : st) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {        System.out.println(&amp;quot;  &amp;quot; + element);      }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;    }&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="15888446" author="mailings@hupie.com" created="Tue, 28 Feb 2017 17:01:35 +0000"  >&lt;p&gt;Well, we tried connecting with jconsole to our app and it blew up.&lt;br/&gt;
Might also be EventAdmin, might be SCR, we didn&apos;t actually look that deep into it.&lt;/p&gt;</comment>
                            <comment id="15929465" author="cziegeler" created="Fri, 17 Mar 2017 06:07:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djencks&quot; class=&quot;user-hover&quot; rel=&quot;djencks&quot;&gt;djencks&lt;/a&gt; Does anything speak against replacing the JMX code with something similar to what Ferry posted above?&lt;/p&gt;</comment>
                            <comment id="15930183" author="djencks" created="Fri, 17 Mar 2017 15:47:05 +0000"  >&lt;p&gt;I foresee no problems replacing the code with something like Ferry&apos;s proposal.&lt;/p&gt;</comment>
                            <comment id="15932223" author="cziegeler" created="Mon, 20 Mar 2017 06:42:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mailings%40hupie.com&quot; class=&quot;user-hover&quot; rel=&quot;mailings@hupie.com&quot;&gt;mailings@hupie.com&lt;/a&gt; The current code using JMX also prints lock info about a thread which I believe is not available through any other means&lt;/p&gt;</comment>
                            <comment id="15933071" author="djencks" created="Mon, 20 Mar 2017 17:03:51 +0000"  >&lt;p&gt;I think we should keep the current code then: I&apos;ve found the lock info essential when diagnosing problems.  I certainly tried to make the current code fail gracefully when the jmx classes aren&apos;t available, is there any evidence that there is an actual problem in this case (other than not getting the thread dump)?&lt;/p&gt;</comment>
                            <comment id="15933086" author="mailings@hupie.com" created="Mon, 20 Mar 2017 17:12:13 +0000"  >&lt;p&gt;Like before:&lt;/p&gt;

&lt;p&gt;&amp;gt; Maybe split off the compact3 part as an optional extension/fragment?&lt;/p&gt;

&lt;p&gt;For our embedded product we would &lt;em&gt;very&lt;/em&gt; much like to run on profile1, which we now could theoretically do but there is zero guarantee that it will work since it uses profile3 classes.&lt;/p&gt;

&lt;p&gt;I have no testcase to test it, also because I (obviously) don&apos;t know the internals of SCR.&lt;br/&gt;
I can only see an import of profile3 classes and therefore &lt;em&gt;have&lt;/em&gt; to conclude that it will not work on profile1 (or even profile2).&lt;/p&gt;

&lt;p&gt;Splitting off that part so that SCR only imports profile1 classes ensures me it will all work.&lt;/p&gt;

&lt;p&gt;I am not interested in a thread dump so having it in SCR actually bothers me, having it in an extension/fragment allows me to not deploy that part.&lt;/p&gt;</comment>
                            <comment id="15933286" author="djencks" created="Mon, 20 Mar 2017 18:49:57 +0000"  >&lt;p&gt;I&apos;ve never worked with the profiles and don&apos;t have a setup where I can plausibly experiment. The jmx class use is very confined and AFAICT (from code inspection) if the classes are missing nothing bad happens. Is java.util.concurrent.Callable a proflle1 class?&lt;/p&gt;

&lt;p&gt;What actually happens when you run current felix SCR in your profile1 environment?&lt;/p&gt;

&lt;p&gt;Since no one expects to run into a deadlock, and they are generally difficult to reproduce, I don&apos;t think that requiring a fragment to be installed to get the data needed to diagnose the problem is a good idea.&lt;/p&gt;</comment>
                            <comment id="15934167" author="cziegeler" created="Tue, 21 Mar 2017 06:38:33 +0000"  >&lt;p&gt;I agree, putting this into an extension makes it really difficult to use; and I agree the lock info is really valuable.&lt;br/&gt;
As David points out, the code should even run in profile1 when those jmx classes are not available.&lt;br/&gt;
So the only thing I see we could do is marking the import as optional&lt;/p&gt;</comment>
                            <comment id="15934190" author="djencks" created="Tue, 21 Mar 2017 07:15:08 +0000"  >&lt;p&gt;I&apos;m confused.  The ThreadDump class uses java import statements for the java.lang.management classes needed but since these are java. packages there are no osgi  imports involved.  What could we possibly mark optional?&lt;/p&gt;

&lt;p&gt;The only problem I can see is if java.util.concurrent.Callable is not a profile1 class, in which case we could more or less copy it.&lt;/p&gt;

&lt;p&gt;I still want to know what actual problem Ferry is having.&lt;/p&gt;</comment>
                            <comment id="15934194" author="gnt" created="Tue, 21 Mar 2017 07:20:49 +0000"  >&lt;p&gt;Fwiw, I think there&apos;s a way out.&lt;br/&gt;
IIUC, the goal is to make sure SCR can run on compact1 profile, but there is this JMX access which requires compact3 profile.&lt;br/&gt;
I&apos;ve had a similar use case for JLine and I solved it using a multi-step compilation.&lt;br/&gt;
See  &lt;a href=&quot;https://github.com/jline/jline3/blob/master/builtins/pom.xml#L46-L86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jline/jline3/blob/master/builtins/pom.xml#L46-L86&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The idea is to build all but the compact3 dependent classes first with a compact1 profile, and on the second run, build only the compact3 classes.  This has proved to work in my case.&lt;/p&gt;</comment>
                            <comment id="15934202" author="cziegeler" created="Tue, 21 Mar 2017 07:34:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djencks&quot; class=&quot;user-hover&quot; rel=&quot;djencks&quot;&gt;djencks&lt;/a&gt; Sorry for the confusion, I thought it was javax. - no need for optional in this case of course&lt;/p&gt;</comment>
                            <comment id="15935401" author="githubbot" created="Tue, 21 Mar 2017 21:53:33 +0000"  >&lt;p&gt;GitHub user fhuberts opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/99&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/99&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5568&quot; title=&quot;SCR contains compact3 profile code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5568&quot;&gt;&lt;del&gt;FELIX-5568&lt;/del&gt;&lt;/a&gt;: mark java.lang.management as an optional import&lt;/p&gt;

&lt;p&gt;    The import is used by the thread dump code, but the SCR can handle&lt;br/&gt;
    the import not being there (which is the case when run on profile1 or&lt;br/&gt;
    profile2).&lt;/p&gt;

&lt;p&gt;    Signed-off-by: Ferry Huberts &amp;lt;ferry.huberts@pelagic.nl&amp;gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/fhuberts/felix&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fhuberts/felix&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5568&quot; title=&quot;SCR contains compact3 profile code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5568&quot;&gt;&lt;del&gt;FELIX-5568&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/99.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/99.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #99&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 20a9d5a09d0fd378baacb04677776c18c14ba658&lt;br/&gt;
Author: Ferry Huberts &amp;lt;ferry.huberts@pelagic.nl&amp;gt;&lt;br/&gt;
Date:   2017-03-21T21:52:35Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5568&quot; title=&quot;SCR contains compact3 profile code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5568&quot;&gt;&lt;del&gt;FELIX-5568&lt;/del&gt;&lt;/a&gt;: mark java.lang.management as an optional import&lt;/p&gt;

&lt;p&gt;    The import is used by the thread dump code, but the SCR can handle&lt;br/&gt;
    the import not being there (which is the case when run on profile1 or&lt;br/&gt;
    profile2).&lt;/p&gt;

&lt;p&gt;    Signed-off-by: Ferry Huberts &amp;lt;ferry.huberts@pelagic.nl&amp;gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15935405" author="githubbot" created="Tue, 21 Mar 2017 21:54:54 +0000"  >&lt;p&gt;Github user fhuberts closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/99&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/99&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15935698" author="djencks" created="Wed, 22 Mar 2017 02:51:54 +0000"  >&lt;p&gt;Could someone please explain to me why marking a java. package that has no  osgi import in the manifest as resolution optional has any effect? (cf Ferry&apos;s commit)&lt;/p&gt;

&lt;p&gt;I&apos;d still like to know what the actual problem Ferry is seeing is, we&apos;ve seen a lot of complaining but no evidence there is a problem.&lt;/p&gt;
</comment>
                            <comment id="15935831" author="mailings@hupie.com" created="Wed, 22 Mar 2017 06:48:26 +0000"  >&lt;p&gt;The &lt;em&gt;actual&lt;/em&gt; problem is that scr uses profile3 packages but there is no way for me - the end user - to know that this is optional.&lt;br/&gt;
I didn&apos;t know it is optional when I filed the issue. Now I know but it is not clear at all, nor documented anywhere.&lt;br/&gt;
A simple jdeps tells me I can&apos;t use SCR on profile1 or profile2.&lt;br/&gt;
If it was made clear somewhere that SCR is explicitly compatible with profile1 then I would not have filed the issue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Doesn&apos;t seem to me like a lot of complaining, just a lot of confusion&lt;/p&gt;</comment>
                            <comment id="15935866" author="cziegeler" created="Wed, 22 Mar 2017 07:26:31 +0000"  >&lt;p&gt;Ok, so we agree that SCR will run with profile1 or profile2 with the current code. So the only problem seems to be documenting this fact.&lt;br/&gt;
Using an optional import for a a java.lang package does not look like the best solution.&lt;br/&gt;
We could just add a documentation header with that info, not sure how that one could look like though&lt;/p&gt;</comment>
                            <comment id="15936247" author="gnt" created="Wed, 22 Mar 2017 12:56:21 +0000"  >&lt;p&gt;Imho, I don&apos;t think the problem is about documentation, it&apos;s about making sure the code can run on compact1 profile, which is what the change I suggested above does.  There are tools to check which profile a jar requires, but in this case, it will report compact3 because of the JMX access.  The pom change at least ensures that all the remaining code is compact1 compliant and gives the user some confidence.&lt;/p&gt;</comment>
                            <comment id="15936358" author="cziegeler" created="Wed, 22 Mar 2017 14:01:00 +0000"  >&lt;p&gt;Well, I think we all inspected the code now and are confident that it runs with profile1 and doing this in a pom/build time does not help anyone downloading the final jar. The final jar still tries to use the profile3 code.&lt;br/&gt;
I&apos;m not arguing against doing such a check at build time in general, but I think it does not really help for end users.&lt;/p&gt;</comment>
                            <comment id="15942767" author="cziegeler" created="Mon, 27 Mar 2017 07:23:58 +0000"  >&lt;p&gt;It&apos;s unclear to me how we can solve this in a useful way&lt;/p&gt;</comment>
                            <comment id="15942798" author="mailings@hupie.com" created="Mon, 27 Mar 2017 08:01:28 +0000"  >&lt;p&gt;What?&lt;br/&gt;
How can that be unclear?&lt;br/&gt;
The &lt;em&gt;very&lt;/em&gt; least is to document it that SCR is profile1 compatible since the profile3 import is actually optional.&lt;br/&gt;
Better is to split off that code, but it appears that you&apos;re now willing to do that.&lt;/p&gt;</comment>
                            <comment id="15942806" author="cziegeler" created="Mon, 27 Mar 2017 08:05:34 +0000"  >&lt;p&gt;Well, no one could come up with a clear good way of documenting this so far. Again, it&apos;s not unclear &quot;what&quot; to do but &quot;how&quot;!&lt;br/&gt;
As explained, splitting of the code does not make sense at all&lt;/p&gt;</comment>
                            <comment id="15942811" author="mailings@hupie.com" created="Mon, 27 Mar 2017 08:10:18 +0000"  >&lt;p&gt;&amp;gt; Well, no one could come up with a clear good way of documenting this so far. Again, it&apos;s not unclear &quot;what&quot; to do but &quot;how&quot;!&lt;/p&gt;

&lt;p&gt;Well, you could add a pseudo manifest header, something like:&lt;/p&gt;

&lt;p&gt;Bundle-Profile-Compatibility: profile1&lt;/p&gt;

&lt;p&gt;&amp;gt; As explained, splitting of the code does not make sense at all&lt;/p&gt;

&lt;p&gt;Not to you, it does to me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15945874" author="tjwatson" created="Tue, 28 Mar 2017 20:17:51 +0000"  >&lt;p&gt;Why not document it in the requirement for osgi.ee?&lt;/p&gt;

&lt;p&gt;Require-Capability: osgi.ee; filter:=&quot;(| (&amp;amp;(osgi.ee=JavaSE)(version=1.6)) (&amp;amp;(osgi.ee=JavaSE/compact1)(version=1.8)) )&quot;&lt;/p&gt;</comment>
                            <comment id="15945889" author="mailings@hupie.com" created="Tue, 28 Mar 2017 20:25:10 +0000"  >&lt;p&gt;Even better!&lt;/p&gt;

&lt;p&gt;Thanks Thomas&lt;/p&gt;</comment>
                            <comment id="15945891" author="mailings@hupie.com" created="Tue, 28 Mar 2017 20:26:16 +0000"  >&lt;p&gt;BTW I have filed &apos;the same&apos; issue on EventAdmin: &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FELIX-5567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15950756" author="cziegeler" created="Fri, 31 Mar 2017 12:05:38 +0000"  >&lt;p&gt;I used Tom&apos;s suggestion, applied in 1789663&lt;/p&gt;</comment>
                            <comment id="15950935" author="mailings@hupie.com" created="Fri, 31 Mar 2017 13:58:10 +0000"  >&lt;p&gt;Upon better inspection of the requirement it seems wrong.&lt;br/&gt;
It appears to exclude Java 1.7.&lt;/p&gt;

&lt;p&gt;should probably be:&lt;/p&gt;

&lt;p&gt;Require-Capability: osgi.ee; filter:=&quot;(| (&amp;amp;(osgi.ee=JavaSE)(version=1.6)) (&amp;amp;(osgi.ee=JavaSE)(version=1.7)) (&amp;amp;(osgi.ee=JavaSE/compact1)(version=1.8)) )&quot;&lt;/p&gt;

&lt;p&gt;But what to do with Java 1.9 (and up) ?&lt;/p&gt;</comment>
                            <comment id="15950962" author="tjwatson" created="Fri, 31 Mar 2017 14:11:22 +0000"  >&lt;p&gt;As a bundle you do not explicitly list each and every version of an execution environment you support.  Instead the framework is supposed to provide an osgi.ee capability that has a version list containing all the versions supported for a specific osgi.ee name.  For example, on Java 7 the framework capability should look something like this for the JavaSE name:&lt;/p&gt;

&lt;p&gt;osgi.ee; osgi.ee=&quot;JavaSE&quot;; version:List&amp;lt;Version&amp;gt;=&quot;1.0, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7&quot;&lt;/p&gt;

&lt;p&gt;That should match the (&amp;amp;(osgi.ee=JavaSE)(version=1.6)) filter.  On Java 9 things are a bit more complicated given Java 9 modules.  But I suspect the capability JavaSE to look like this on Java 9 since they changed the version scheme to remove the 1.x Major version.&lt;/p&gt;

&lt;p&gt;osgi.ee; osgi.ee=&quot;JavaSE&quot;; version:List&amp;lt;Version&amp;gt;=&quot;1.0, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 9.0&quot;&lt;/p&gt;

&lt;p&gt;Also note that a framework running on Java 8 must provide the following JavaSE related osgi.ee named capabilities:&lt;/p&gt;

&lt;p&gt; osgi.ee; osgi.ee=&quot;JavaSE&quot;; version:List&amp;lt;Version&amp;gt;=&quot;1.0, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8&quot;&lt;br/&gt;
 osgi.ee; osgi.ee=&quot;JavaSE/compact1&quot;; version:List&amp;lt;Version&amp;gt;=&quot;1.8&quot;&lt;br/&gt;
 osgi.ee; osgi.ee=&quot;JavaSE/compact2&quot;; version:List&amp;lt;Version&amp;gt;=&quot;1.8&quot;&lt;br/&gt;
 osgi.ee; osgi.ee=&quot;JavaSE/compact3&quot;; version:List&amp;lt;Version&amp;gt;=&quot;1.8&quot;&lt;/p&gt;

&lt;p&gt;A bundle that needs Java 8 and supports compact1 should only have to list the filter &quot;(&amp;amp;(osgi.ee=JavaSE/compact1)(version=1.8))&quot;.  It should not have to also OR a separate filter for JavaSE-1.8 version &quot;(&amp;amp;(osgi.ee=JavaSE)(version=1.8))&quot;&lt;/p&gt;</comment>
                            <comment id="15950984" author="mailings@hupie.com" created="Fri, 31 Mar 2017 14:16:52 +0000"  >&lt;p&gt;Ah yes, thanks for reminding me.&lt;br/&gt;
I did know that, but it didn&apos;t pop up when replying &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3amhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>