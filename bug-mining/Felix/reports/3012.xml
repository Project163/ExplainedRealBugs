<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:12:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5897] org.apache.felix.http.proxy.ProxyServlet NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5897</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I have equinox embedded in a war, using http.proxy 3.0.2 to proxy traffic from WAR context into OSGi container.&lt;/p&gt;

&lt;p&gt;When deploying an updated WAR, all servlets including ProxyServlet will have the destroy() method invoked.&lt;/p&gt;

&lt;p&gt;An NPE will be generated by ProxyServlet if the servlet has not serviced any requests:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
03-Aug-2018 20:01:35.386 SEVERE [ContainerBackgroundProcessor[StandardEngine[Catalina]]] org.apache.catalina.core.ApplicationContext.log Servlet [proxy] threw unload() exception
 javax.servlet.ServletException: Servlet.destroy() &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; servlet [proxy] threw exception
 at org.apache.catalina.core.StandardWrapper.unload(StandardWrapper.java:1312)
 at org.apache.catalina.core.StandardWrapper.stopInternal(StandardWrapper.java:1635)
 at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:226)
 at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5466)
 at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:226)
 at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:845)
 at org.apache.catalina.startup.HostConfig.undeploy(HostConfig.java:1433)
 at org.apache.catalina.startup.HostConfig.checkResources(HostConfig.java:1341)
 at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1619)
 at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:314)
 at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:94)
 at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1166)
 at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1390)
 at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1394)
 at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1362)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Caused by: java.lang.NullPointerException
 at org.apache.felix.http.proxy.ProxyServlet.destroy(ProxyServlet.java:132)
 at org.apache.catalina.core.StandardWrapper.unload(StandardWrapper.java:1301)
 ... 15 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The relevant code is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void destroy()
{
 &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.tracker.close();
 &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.destroy();
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The ProxyServlet does a lazy call to doInit() on the first incoming service() call.&#160; doInit() will create the tracker instance, otherwise this value is null.&lt;/p&gt;

&lt;p&gt;The fix is to wrap the tracker.close() line with a check to see that the tracker is not null before invoking the close() method.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13176854">FELIX-5897</key>
            <summary>org.apache.felix.http.proxy.ProxyServlet NullPointerException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="dnebing">David Nebinger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Aug 2018 23:54:44 +0000</created>
                <updated>Thu, 20 Sep 2018 18:32:29 +0000</updated>
                            <resolved>Mon, 20 Aug 2018 07:26:23 +0000</resolved>
                                    <version>http.proxy-3.0.2</version>
                                    <fixVersion>http.proxy-3.0.4</fixVersion>
                                    <component>HTTP Service</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16568944" author="dnebing" created="Sat, 4 Aug 2018 00:10:26 +0000"  >&lt;p&gt;Submitted patch file to resolve the NPE.&lt;/p&gt;</comment>
                            <comment id="16585531" author="cziegeler" created="Mon, 20 Aug 2018 07:26:23 +0000"  >&lt;p&gt;Thanks for your patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dnebing&quot; class=&quot;user-hover&quot; rel=&quot;dnebing&quot;&gt;dnebing&lt;/a&gt; It&apos;s applied in rev 1838410&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12934352" name="FELIX-5897.patch" size="548" author="dnebing" created="Sat, 4 Aug 2018 00:09:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wos7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>