<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:08:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-842] Linkage-Error when embedding Felix inside Tomcat 6</title>
                <link>https://issues.apache.org/jira/browse/FELIX-842</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;When embedding Felix in Tomcat I get the following Exception on Felix-Startup:&lt;/p&gt;

&lt;p&gt;ERROR: Unable to start system bundle. (java.lang.LinkageError: org/osgi/service/url/URLStreamHandlerService)&lt;br/&gt;
java.lang.LinkageError: org/osgi/service/url/URLStreamHandlerService&lt;br/&gt;
   at java.lang.Class.forName0(Native Method)&lt;br/&gt;
   at java.lang.Class.forName(Class.java:164)&lt;br/&gt;
   at org.apache.felix.framework.URLHandlersStreamHandlerProxy.class$(URLHandlersStreamHandlerProxy.java:77)&lt;br/&gt;
   at org.apache.felix.framework.URLHandlersStreamHandlerProxy.getStreamHandlerService(URLHandlersStreamHandlerProxy.java:391)&lt;br/&gt;
   at org.apache.felix.framework.URLHandlersStreamHandlerProxy.parseURL(URLHandlersStreamHandlerProxy.java:267)&lt;br/&gt;
   at java.net.URL.&amp;lt;init&amp;gt;(URL.java:596)&lt;br/&gt;
   at java.net.URL.&amp;lt;init&amp;gt;(URL.java:464)&lt;br/&gt;
   at java.net.URL.&amp;lt;init&amp;gt;(URL.java:413)&lt;br/&gt;
   at java.net.URI.toURL(URI.java:1081)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.getURI(WebappClassLoader.java:2355)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.findResourceInternal(WebappClassLoader.java:2008)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1786)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:890)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1354)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)&lt;br/&gt;
   at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)&lt;br/&gt;
   at java.lang.Class.forName0(Native Method)&lt;br/&gt;
   at java.lang.Class.forName(Class.java:164)&lt;br/&gt;
   at org.apache.felix.framework.URLHandlersStreamHandlerProxy.class$(URLHandlersStreamHandlerProxy.java:77)&lt;br/&gt;
   at org.apache.felix.framework.URLHandlersStreamHandlerProxy.getStreamHandlerService(URLHandlersStreamHandlerProxy.java:391)&lt;br/&gt;
   at org.apache.felix.framework.URLHandlersStreamHandlerProxy.parseURL(URLHandlersStreamHandlerProxy.java:267)&lt;br/&gt;
   at java.net.URL.&amp;lt;init&amp;gt;(URL.java:596)&lt;br/&gt;
   at java.net.URL.&amp;lt;init&amp;gt;(URL.java:464)&lt;br/&gt;
   at java.net.URL.&amp;lt;init&amp;gt;(URL.java:413)&lt;br/&gt;
   at java.net.URI.toURL(URI.java:1081)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.getURI(WebappClassLoader.java:2355)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.findResourceInternal(WebappClassLoader.java:2008)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1786)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:890)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1354)&lt;br/&gt;
   at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)&lt;br/&gt;
   at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)&lt;br/&gt;
   at org.apache.felix.framework.Felix.registerService(Felix.java:2694)&lt;br/&gt;
   at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:252)&lt;br/&gt;
   at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:230)&lt;br/&gt;
   at org.apache.felix.framework.StartLevelActivator.start(StartLevelActivator.java:39)&lt;br/&gt;
   at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:589)&lt;br/&gt;
   at org.apache.felix.framework.Felix$SystemBundleActivator.start(Felix.java:3761)&lt;br/&gt;
   at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:589)&lt;br/&gt;
   at org.apache.felix.framework.Felix.init(Felix.java:849)&lt;br/&gt;
   at org.apache.felix.framework.Felix.start(Felix.java:881)&lt;br/&gt;
   at ... osgi.FelixStartupServlet.init(FelixStartupServlet.java:118)&lt;br/&gt;
   at javax.servlet.GenericServlet.init(GenericServlet.java:212)&lt;br/&gt;
   at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1172)&lt;br/&gt;
   at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:992)&lt;br/&gt;
   at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4058)&lt;br/&gt;
   at org.apache.catalina.core.StandardContext.start(StandardContext.java:4371)&lt;br/&gt;
   at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)&lt;br/&gt;
   at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)&lt;br/&gt;
   at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)&lt;br/&gt;
   at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)&lt;br/&gt;
   at org.apache.catalina.core.StandardService.start(StandardService.java:516)&lt;br/&gt;
   at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)&lt;br/&gt;
   at org.apache.catalina.startup.Catalina.start(Catalina.java:578)&lt;br/&gt;
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
   at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
   at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)&lt;br/&gt;
   at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413) &lt;/p&gt;</description>
                <environment>Windows XP SP3, Java 1.5.0, Tomcat 6.0</environment>
        <key id="12410050">FELIX-842</key>
            <summary>Linkage-Error when embedding Felix inside Tomcat 6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="dbremer-tonn">Daniel Bremer-Tonn</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Dec 2008 09:28:07 +0000</created>
                <updated>Tue, 6 Jan 2009 13:18:52 +0000</updated>
                            <resolved>Fri, 19 Dec 2008 22:10:21 +0000</resolved>
                                    <version>framework-1.4.0</version>
                                    <fixVersion>framework-1.4.1</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12653710" author="dbremer-tonn" created="Fri, 5 Dec 2008 09:29:12 +0000"  >&lt;p&gt;Workaround: Disabling URLHandlersservice&lt;/p&gt;</comment>
                            <comment id="12653736" author="karlpauls" created="Fri, 5 Dec 2008 10:32:01 +0000"  >&lt;p&gt;This looks bad. The issue is that the tomcat WebappClassLoader is creating URL&apos;s while doing a classload. Now, what happens is that when we set our URLHandlers it is asked to get  a handler for a URL needed for a classload. Getting the handler involves loading classes which triggers another classload via the WebappClassLoader and there we go... &lt;/p&gt;

&lt;p&gt;As mentioned, one solution is to diable URLHandlers for now if you run into this. Another could be to do what I will do internally to resolve this issue externally namely, preload all classes that we need inside a handlers lookup. I will add a comment with all the classes you need to preload soon. &lt;/p&gt;

&lt;p&gt;Thanks for reporting! &lt;/p&gt;</comment>
                            <comment id="12658202" author="karlpauls" created="Fri, 19 Dec 2008 22:10:21 +0000"  >&lt;p&gt;The WebAppClassloader is creating urls during a classload while we are creating url handlers which gets us into a recursive attempt to create a handler resulting in the error. I addressed this in trunk by creating a couple of known built-in handlers up front (i.e., http, https, ftp, jar, file) which we can fallback to in case we get a Linkage-Error while trying to create the handler. Furthermore, a couple of classes are forced to be loaded eagerly. &lt;/p&gt;

&lt;p&gt;Thanks again for reporting. This will make it into the upcoming 1.4.1 release. Please close this issue if it works for you.&lt;/p&gt;</comment>
                            <comment id="12661126" author="dbremer-tonn" created="Tue, 6 Jan 2009 13:18:52 +0000"  >&lt;p&gt;With Felix 1.4.1 we can start Felix within Tomcat 6 without any problems. Thank you for the fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58147</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1aqhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>270756</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>