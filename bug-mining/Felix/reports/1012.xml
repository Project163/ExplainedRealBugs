<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:18:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2296] iPojo : Unable to get a ServiceProperty change in an anonymous class</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2296</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;@ServiceProperty(value = &quot;false&quot;)&lt;br/&gt;
private boolean                                   ready;&lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;

&lt;p&gt;SwingUtilities.invokeLater(new Runnable() {&lt;br/&gt;
public void run() &lt;/p&gt;
{
ready =  true;
}}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;is not equivalent to :&lt;/p&gt;

&lt;p&gt;SwingUtilities.invokeLater(new Runnable() {&lt;br/&gt;
public void run() &lt;/p&gt;
{
connect();
}}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;public void connect() {&lt;br/&gt;
ready = true;&lt;br/&gt;
}&lt;/p&gt;



&lt;p&gt;(I use a @Require(filter = &quot;(ready=true)) to start an another service instance)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12462669">FELIX-2296</key>
            <summary>iPojo : Unable to get a ServiceProperty change in an anonymous class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="clement.escoffier">Clement Escoffier</assignee>
                                    <reporter username="brian_fr">Brian Tribondeau</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Apr 2010 14:54:42 +0000</created>
                <updated>Mon, 21 Jun 2010 08:24:36 +0000</updated>
                            <resolved>Mon, 21 Jun 2010 08:24:36 +0000</resolved>
                                    <version>iPOJO-1.4.0</version>
                    <version>iPOJO-1.6.0</version>
                                    <fixVersion>iPOJO-1.6.0</fixVersion>
                                    <component>iPOJO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12859383" author="brian_fr" created="Wed, 21 Apr 2010 14:56:27 +0000"  >&lt;p&gt;The original code is longer, but that&apos;s the spirit ...&lt;/p&gt;</comment>
                            <comment id="12860876" author="brian_fr" created="Mon, 26 Apr 2010 09:26:35 +0000"  >&lt;p&gt;D&apos;ailleurs merci pour iPojo !&lt;/p&gt;

&lt;p&gt; Je n&apos;aurais probablement jamais utilis&#233; OSGi dans mon projet pro si j&apos;avais du vendre l&apos;usage brut d&apos;OSGi. Et d&#233;sormais on a plus qu&apos;une seule application capable de charger toutes les briques fonctionnelles de notre domaine. Un gain de temps et de maintenance &#233;norme.&lt;/p&gt;

&lt;p&gt;Bonne continuation.&lt;/p&gt;</comment>
                            <comment id="12862232" author="clement.escoffier" created="Thu, 29 Apr 2010 15:48:51 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;It seems to work...&lt;br/&gt;
I did that:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;       &lt;span class=&quot;code-comment&quot;&gt;// Service properties
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; intProp;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; strProp;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] strAProp;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] intAProp;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; boolProp;

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; foo() {
		&lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt; runnable = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt;() {
			&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
				intProp = 3;
				boolProp = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
				&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(strProp.equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;)) { strProp = &lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;; }
				&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; { strProp = &lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;; }
				strAProp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;baz&quot;&lt;/span&gt;};
				intAProp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] {3, 2, 1};
			}
		};
		&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(runnable).start();

		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
			&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(500);
		} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
			e.printStackTrace();
		}

		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The service properties are correctly updated inside the method. Could you give me more details ? If you have a small bundle reproducing the issue, I would be happy to check that.&lt;/p&gt;</comment>
                            <comment id="12862253" author="brian_fr" created="Thu, 29 Apr 2010 16:53:21 +0000"  >&lt;p&gt;Hello&lt;/p&gt;


&lt;p&gt;I am currently on vacation. I will post the code in two weeks.&lt;/p&gt;

&lt;p&gt;Fyi, I used ipojo 1.4, annotations only (@ServiceProperty &amp;amp; @Requires with filter) except for instance creation, and the OSGi runtime is Equinox.&lt;/p&gt;

&lt;p&gt;The problem is using the filter property of @Requires in two separate bundles. The instance using the filter is not created.&lt;/p&gt;

&lt;p&gt;Bundle A :&lt;/p&gt;

&lt;p&gt;@ServiceProperty(value = &quot;false&quot;) &lt;br/&gt;
private boolean ready; &lt;/p&gt;

&lt;p&gt;... &lt;/p&gt;

&lt;p&gt;SwingUtilities.invokeLater(new Runnable() { &lt;br/&gt;
public void run() &lt;/p&gt;
{ 
ready = true; 
}}
&lt;p&gt;); &lt;/p&gt;

&lt;p&gt;Bundle B :&lt;/p&gt;

&lt;p&gt;@Require(filter = &quot;(ready=true))&lt;/p&gt;

&lt;p&gt;BundleConstructor() {&lt;br/&gt;
   sysout(&quot;You will not see me&quot;)&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;By the way, there is no Runnable variable created, the anonymous function is invoked immediately.&lt;/p&gt;</comment>
                            <comment id="12864675" author="clement.escoffier" created="Thu, 6 May 2010 06:50:03 +0000"  >&lt;p&gt;I also tried with:&lt;br/&gt;
SwingUtilities.invokeLater(new Runnable() {&lt;br/&gt;
			public void run() {&lt;br/&gt;
				intProp = 3;&lt;br/&gt;
				boolProp = true;&lt;br/&gt;
				if(strProp.equals(&quot;foo&quot;)) &lt;/p&gt;
{ strProp = &quot;bar&quot;; }
&lt;p&gt;				else &lt;/p&gt;
{ strProp = &quot;foo&quot;; }
&lt;p&gt;				strAProp = new String[] &lt;/p&gt;
{&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;}
&lt;p&gt;;&lt;br/&gt;
				intAProp = new int[] &lt;/p&gt;
{3, 2, 1}
&lt;p&gt;;&lt;br/&gt;
			}&lt;br/&gt;
		});&lt;/p&gt;

&lt;p&gt;		try &lt;/p&gt;
{
			Thread.sleep(500);
		}
&lt;p&gt; catch (InterruptedException e) &lt;/p&gt;
{
			e.printStackTrace();
		}

&lt;p&gt;But, it also works.&lt;/p&gt;</comment>
                            <comment id="12869044" author="brian_fr" created="Wed, 19 May 2010 07:35:47 +0000"  >&lt;p&gt;Hello&lt;/p&gt;

&lt;p&gt;I have sent you a few files on your gmail adress. I hope this will help you.&lt;/p&gt;
</comment>
                            <comment id="12880745" author="brian_fr" created="Mon, 21 Jun 2010 08:23:53 +0000"  >&lt;p&gt;The problem didn&apos;t occur with 1.6.2 release of iPojo... Solved but I am still puzzled&lt;br/&gt;
This ticket it is not relevant anymore so I close it.&lt;/p&gt;

&lt;p&gt;Thanks Clement for your support !&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1asuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>271141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>