<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:12:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1573] Occasional NPE in URLHandlersBundleStreamHandler</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1573</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I&apos;m occasionally seeing startup failures in my integration tests due to an NPE in URLHandlersBundleStreamHandler that looks like some sort of race condition: &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Started bundle org.springframework (5)&lt;br/&gt;
08-Sep-2009 02:54:37 	- Loading XML bean definitions from OSGi resource&lt;span class=&quot;error&quot;&gt;&amp;#91;bundle://6.0:0/META-INF/spring/extender/spring-event-bridge.xml|bnd.id=6|bnd.sym=org.springframework.osgi.extender&amp;#93;&lt;/span&gt;&lt;br/&gt;
08-Sep-2009 02:54:37 	- Unable to process extender configuration&lt;br/&gt;
08-Sep-2009 02:54:37 	org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from OSGi resource&lt;span class=&quot;error&quot;&gt;&amp;#91;bundle://6.0:0/META-INF/spring/extender/spring-event-bridge.xml|bnd.id=6|bnd.sym=org.springframework.osgi.extender&amp;#93;&lt;/span&gt;; nested exception is java.io.IOException: No framework context found&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:349)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.osgi.context.support.OsgiBundleXmlApplicationContext.loadBeanDefinitions(OsgiBundleXmlApplicationContext.java:176)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.osgi.context.support.OsgiBundleXmlApplicationContext.loadBeanDefinitions(OsgiBundleXmlApplicationContext.java:142)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.access$301(AbstractDelegatedExecutionApplicationContext.java:69)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$1.run(AbstractDelegatedExecutionApplicationContext.java:186)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.normalRefresh(AbstractDelegatedExecutionApplicationContext.java:182)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$NoDependenciesWaitRefreshExecutor.refresh(AbstractDelegatedExecutionApplicationContext.java:89)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.refresh(AbstractDelegatedExecutionApplicationContext.java:175)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.osgi.extender.internal.support.ExtenderConfiguration.&amp;lt;init&amp;gt;(ExtenderConfiguration.java:169)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.osgi.extender.internal.activator.ContextLoaderListener.start(ContextLoaderListener.java:380)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:589)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.apache.felix.framework.Felix.startBundle(Felix.java:1461)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:984)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.apache.felix.framework.StartLevelImpl.run(StartLevelImpl.java:263)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at java.lang.Thread.run(Thread.java:595)&lt;br/&gt;
08-Sep-2009 02:54:37 	Caused by: java.io.IOException: No framework context found&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.apache.felix.framework.URLHandlersBundleStreamHandler.openConnection(URLHandlersBundleStreamHandler.java:72)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at java.net.URL.openConnection(URL.java:943)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.osgi.io.OsgiBundleResource.getInputStream(OsgiBundleResource.java:180)&lt;br/&gt;
08-Sep-2009 02:54:37 	        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)&lt;br/&gt;
08-Sep-2009 02:54:37 	        ... 22 more&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12435169">FELIX-1573</key>
            <summary>Occasional NPE in URLHandlersBundleStreamHandler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="mrdon">Donald J. Brown</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Sep 2009 23:46:40 +0000</created>
                <updated>Wed, 11 Nov 2009 18:11:49 +0000</updated>
                            <resolved>Wed, 11 Nov 2009 18:11:49 +0000</resolved>
                                    <version>framework-1.8.1</version>
                    <version>framework-2.0.0</version>
                                    <fixVersion>framework-2.0.1</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12752872" author="mrdon" created="Wed, 9 Sep 2009 02:45:48 +0000"  >&lt;p&gt;I can&apos;t reproduce this on OSX (1.5 or 1.6), but can reliably on Linux (1.6.0_13)&lt;/p&gt;</comment>
                            <comment id="12752950" author="mrdon" created="Wed, 9 Sep 2009 06:45:32 +0000"  >&lt;p&gt;While there does seem to be a race condition here, there is fallback code that should handle the situation.  In URLHandlers.getFrameworkFromContext(), if it can&apos;t determine the framework, it should go through the callstack to find a class loaded by the bundle class loader.  Unfortunately, it matches based on the class name, which it mistakenly thinks should be &quot;org.apache.felix.framework.searchpolicy.ModuleImpl.ModuleClassLoader&quot;.  After much debugging, I realized the actual class name that will be returned from the classloader is &quot;org.apache.felix.framework.searchpolicy.ModuleImpl$ModuleClassLoader&quot;.  Since changing this string, I haven&apos;t seen the error occur again.&lt;/p&gt;</comment>
                            <comment id="12753052" author="karlpauls" created="Wed, 9 Sep 2009 12:07:57 +0000"  >&lt;p&gt;Yeah, it sounds like this is an oversight from the refactoring. It used to be different but now the ModuleClassLoader is an inner class so that doesn&apos;t get used correctly. I will fix it asap. &lt;/p&gt;</comment>
                            <comment id="12753056" author="karlpauls" created="Wed, 9 Sep 2009 12:21:14 +0000"  >&lt;p&gt;I just committed a fix for this. As I said, its an oversight from the refactoring. Please test and let us know whether it works for you. Thanks for reporting.&lt;/p&gt;</comment>
                            <comment id="12772419" author="mrdon" created="Mon, 2 Nov 2009 04:56:34 +0000"  >&lt;p&gt;I don&apos;t know how I missed this, but the class name is still wrong - should be:&lt;/p&gt;

&lt;p&gt;  org.apache.felix.framework.ModuleImpl$ModuleClassLoader&lt;/p&gt;

&lt;p&gt;not, as it is now,&lt;/p&gt;

&lt;p&gt;  org.apache.felix.framework.searchpolicy.ModuleImpl$ModuleClassLoader&lt;/p&gt;</comment>
                            <comment id="12772457" author="karlpauls" created="Mon, 2 Nov 2009 08:28:56 +0000"  >&lt;p&gt;Did you try with the current trunk/2.0.2? This should be fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-1834&quot; title=&quot;java.io.IOException: No framework context found when embedding felix frameworks as bundles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-1834&quot;&gt;&lt;del&gt;FELIX-1834&lt;/del&gt;&lt;/a&gt; (as well as the other issue you mentioned on the 2.0.1 release - I hope).&lt;/p&gt;</comment>
                            <comment id="12772495" author="mrdon" created="Mon, 2 Nov 2009 11:43:52 +0000"  >&lt;p&gt;Yeah, seems fixed in trunk, but it is still broken in 2.0.1, so maybe just close this ticket against 2.0.2 instead.&lt;/p&gt;</comment>
                            <comment id="12776554" author="rickhall" created="Wed, 11 Nov 2009 18:11:49 +0000"  >&lt;p&gt;Closing this issue since there was a commit against 2.0.1 for this issue, so there is no reason to move this issue to 2.0.2 because it didn&apos;t fully resolve the bug. We have &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-1834&quot; title=&quot;java.io.IOException: No framework context found when embedding felix frameworks as bundles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-1834&quot;&gt;&lt;del&gt;FELIX-1834&lt;/del&gt;&lt;/a&gt; for the complete fix in 2.0.2.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12439556">FELIX-1834</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57454</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vyun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184619</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>