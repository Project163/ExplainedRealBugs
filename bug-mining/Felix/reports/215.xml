<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:07:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-649] &quot;Expecting to find object/array on stack&quot; Error when asking for instance of an iPOJO component</title>
                <link>https://issues.apache.org/jira/browse/FELIX-649</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Here is my case, I have these two classes in a bundle&lt;br/&gt;
public class A {&lt;/p&gt;

&lt;p&gt;    private String name;&lt;/p&gt;

&lt;p&gt;    public A(final String n) &lt;/p&gt;
{
        name = n;
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;public class B extends A {&lt;/p&gt;

&lt;p&gt;    public B() &lt;/p&gt;
{
        super(&quot;test&quot;);
        System.out.println(&quot;plop&quot;);
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;What I want to do is to create a component with class B and ask for an instance, this is the content of metadata.xml :&lt;/p&gt;

&lt;p&gt;&amp;lt;iPOJO&amp;gt;&lt;br/&gt;
  &amp;lt;component className=&quot;myPackage.B&quot; immediate=&quot;true&quot; factory=&quot;false&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;/component&amp;gt;&lt;br/&gt;
  &amp;lt;instance component=&quot;myPackage.B&quot; name=&quot;b&quot;&amp;gt;&amp;lt;/instance&amp;gt;&lt;br/&gt;
&amp;lt;/iPOJO&amp;gt;&lt;/p&gt;

&lt;p&gt;When I try to install this bundle on a felix gateway I get the following error : &lt;/p&gt;

&lt;p&gt;ERROR: EventDispatcher: Error during dispatch. (java.lang.VerifyError: (class: org/ow2/shelbie/cli/B, method: &amp;lt;init&amp;gt; signature: (Lorg/apache/felix/ipojo/InstanceManager;)V) Expecting to find object/array on stack)&lt;br/&gt;
java.lang.VerifyError: (class: org/ow2/shelbie/cli/B, method: &amp;lt;init&amp;gt; signature: (Lorg/apache/felix/ipojo/InstanceManager;)V) Expecting to find object/array on stack&lt;br/&gt;
	at java.lang.Class.getDeclaredConstructors0(Native Method)&lt;br/&gt;
	at java.lang.Class.privateGetDeclaredConstructors(Class.java:2357)&lt;br/&gt;
	at java.lang.Class.getConstructor0(Class.java:2671)&lt;br/&gt;
	at java.lang.Class.getDeclaredConstructor(Class.java:1953)&lt;br/&gt;
	at org.apache.felix.ipojo.InstanceManager.createPojoObject(InstanceManager.java:538)&lt;br/&gt;
	at org.apache.felix.ipojo.InstanceManager.getPojoObject(InstanceManager.java:698)&lt;br/&gt;
	at org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.__stateChanged(LifecycleCallbackHandler.java:157)&lt;br/&gt;
	at org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.stateChanged(LifecycleCallbackHandler.java)&lt;br/&gt;
	at org.apache.felix.ipojo.InstanceManager.setState(InstanceManager.java:409)&lt;br/&gt;
	at org.apache.felix.ipojo.InstanceManager.start(InstanceManager.java:299)&lt;br/&gt;
	at org.apache.felix.ipojo.ComponentFactory.createInstance(ComponentFactory.java:146)&lt;br/&gt;
	at org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:250)&lt;br/&gt;
	at org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:194)&lt;br/&gt;
	at org.apache.felix.ipojo.InstanceCreator$ManagedInstance.create(InstanceCreator.java:316)&lt;br/&gt;
	at org.apache.felix.ipojo.InstanceCreator.addInstance(InstanceCreator.java:76)&lt;br/&gt;
	at org.apache.felix.ipojo.Extender.parse(Extender.java:238)&lt;br/&gt;
	at org.apache.felix.ipojo.Extender.startManagementFor(Extender.java:180)&lt;br/&gt;
	at org.apache.felix.ipojo.Extender.bundleChanged(Extender.java:101)&lt;br/&gt;
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:690)&lt;br/&gt;
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:619)&lt;br/&gt;
	at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:532)&lt;br/&gt;
	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:3568)&lt;br/&gt;
	at org.apache.felix.framework.Felix._startBundle(Felix.java:1591)&lt;br/&gt;
	at org.apache.felix.framework.Felix.startBundle(Felix.java:1519)&lt;br/&gt;
	at org.apache.felix.framework.Felix.setFrameworkStartLevel(Felix.java:1104)&lt;br/&gt;
	at org.apache.felix.framework.StartLevelImpl.run(StartLevelImpl.java:258)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:595)&lt;/p&gt;
</description>
                <environment>iPOJO 0.8.0&lt;br/&gt;
felix 1.0.3</environment>
        <key id="12401166">FELIX-649</key>
            <summary>&quot;Expecting to find object/array on stack&quot; Error when asking for instance of an iPOJO component</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="clement.escoffier">Clement Escoffier</assignee>
                                    <reporter username="strappab">Benjamin Strappazzon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Jul 2008 15:44:38 +0000</created>
                <updated>Wed, 22 Oct 2008 14:00:39 +0000</updated>
                            <resolved>Mon, 28 Jul 2008 17:23:21 +0000</resolved>
                                    <version>iPOJO-0.8.0</version>
                                    <fixVersion>iPOJO-1.0.0</fixVersion>
                                    <component>iPOJO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12617478" author="clement.escoffier" created="Mon, 28 Jul 2008 17:23:21 +0000"  >&lt;p&gt;Nice catch !&lt;br/&gt;
The issue comes from the super constructor arguments that were not loaded. This corrupts the class, as the super constructor cannot be called (linked) correctly.&lt;/p&gt;

&lt;p&gt;I commit a fix in the trunk version (revision 680406).&lt;br/&gt;
I also add your test case in my test suite.&lt;/p&gt;</comment>
                            <comment id="12641855" author="clement.escoffier" created="Wed, 22 Oct 2008 14:00:39 +0000"  >&lt;p&gt;Issue fixed included in the iPOJO 1.0.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58339</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1apkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>270609</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>