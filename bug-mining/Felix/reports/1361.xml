<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:31:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2963] scr annotations @Activate @Deactivate @Modified are not detected with class inheritance</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2963</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;// 1)  when I use a base component with scr lifecycle annotations:&lt;/p&gt;

&lt;p&gt;@Component(componentAbstract = true)&lt;br/&gt;
public abstract class BasePluginEDT {&lt;/p&gt;

&lt;p&gt;	@Activate&lt;br/&gt;
	protected final void activateEDT(final Map&amp;lt;String, String&amp;gt; config) {&lt;/p&gt;

&lt;p&gt;	@Deactivate&lt;br/&gt;
	protected final void deactivateEDT(final Map&amp;lt;String, String&amp;gt; config) {&lt;/p&gt;

&lt;p&gt;	@Modified&lt;br/&gt;
	protected final void modifiedEDT(final Map&amp;lt;String, String&amp;gt; config) {&lt;/p&gt;

&lt;p&gt;// 2) which is inherited by a derived component:&lt;/p&gt;

&lt;p&gt;@Service&lt;br/&gt;
@Component(name = PluginSpaceService.PID, policy = ConfigurationPolicy.REQUIRE, immediate = true)&lt;br/&gt;
public class BucketPlugin extends BasePluginEDT implements PluginSpaceService {&lt;/p&gt;


&lt;p&gt;// 3) then xml for the derived component does not show annotated methods from the parent&lt;/p&gt;

&lt;p&gt;    &amp;lt;scr:component enabled=&quot;true&quot; immediate=&quot;true&quot; name=&quot;barchart.service.space&quot; configuration-policy=&quot;require&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;implementation class=&quot;com.ddfplus.core.space.BucketPlugin&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;service servicefactory=&quot;false&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;provide interface=&quot;com.ddfplus.api.plugin.PluginSpaceService&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/service&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;service.pid&quot; type=&quot;String&quot; value=&quot;barchart.service.space&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;reference name=&quot;beanService&quot; interface=&quot;com.ddfplus.api.host.HostBeanService&quot; cardinality=&quot;1..1&quot; policy=&quot;static&quot; bind=&quot;bind&quot; unbind=&quot;unbind&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;reference name=&quot;dispService&quot; interface=&quot;com.ddfplus.api.host.HostDisplayService&quot; cardinality=&quot;1..1&quot; policy=&quot;static&quot; bind=&quot;bind&quot; unbind=&quot;unbind&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/scr:component&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12507953">FELIX-2963</key>
            <summary>scr annotations @Activate @Deactivate @Modified are not detected with class inheritance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="andrei.pozolotin">Andrei Pozolotin</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 May 2011 02:22:00 +0000</created>
                <updated>Tue, 15 Nov 2011 16:19:04 +0000</updated>
                            <resolved>Tue, 16 Aug 2011 07:45:24 +0000</resolved>
                                    <version>maven-scr-plugin-1.7.0</version>
                    <version>maven-scr-plugin-1.7.2</version>
                    <version>scr ant task 1.0.0</version>
                    <version>scr ant task 1.1.2</version>
                    <version>scr generator 1.1.0</version>
                    <version>scr generator 1.1.2</version>
                                    <fixVersion>maven-scr-plugin-1.7.4</fixVersion>
                    <fixVersion>scr ant task 1.1.4</fixVersion>
                    <fixVersion>scr generator 1.1.4</fixVersion>
                                    <component>SCR Tooling</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13044803" author="cziegeler" created="Mon, 6 Jun 2011 11:31:46 +0000"  >&lt;p&gt;Can you please strip down the example and either attach the complete project to this bug or send it to me directly?&lt;/p&gt;</comment>
                            <comment id="13044942" author="andrei.pozolotin" created="Mon, 6 Jun 2011 16:40:10 +0000"  >&lt;p&gt;Carsten:&lt;/p&gt;

&lt;p&gt;here is a project:&lt;br/&gt;
&lt;a href=&quot;https://github.com/carrot-garden/carrot-bugger/tree/master/carrot-bug-FELIX-2963-001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/carrot-garden/carrot-bugger/tree/master/carrot-bug-FELIX-2963-001&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;base class:&lt;br/&gt;
&lt;a href=&quot;https://github.com/carrot-garden/carrot-bugger/blob/master/carrot-bug-FELIX-2963-001/src/main/java/bench/CompBase.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/carrot-garden/carrot-bugger/blob/master/carrot-bug-FELIX-2963-001/src/main/java/bench/CompBase.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;class inherited from base:&lt;br/&gt;
&lt;a href=&quot;https://github.com/carrot-garden/carrot-bugger/blob/master/carrot-bug-FELIX-2963-001/src/main/java/bench/CompInherited.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/carrot-garden/carrot-bugger/blob/master/carrot-bug-FELIX-2963-001/src/main/java/bench/CompInherited.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;result xml:&lt;br/&gt;
&lt;a href=&quot;https://github.com/carrot-garden/carrot-bugger/blob/master/carrot-bug-FELIX-2963-001/example/serviceComponents.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/carrot-garden/carrot-bugger/blob/master/carrot-bug-FELIX-2963-001/example/serviceComponents.xml&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;steps to reproduce:&lt;br/&gt;
&lt;a href=&quot;https://github.com/carrot-garden/carrot-bugger/blob/master/carrot-bug-FELIX-2963-001/launch/reproduce.sh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/carrot-garden/carrot-bugger/blob/master/carrot-bug-FELIX-2963-001/launch/reproduce.sh&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;problem:&lt;br/&gt;
activate / deactivate annotations are present on the base class, but they do not make it into xml when inherited;&lt;/p&gt;

&lt;p&gt;thanks again,&lt;/p&gt;

&lt;p&gt;Andrei.&lt;/p&gt;</comment>
                            <comment id="13045324" author="cziegeler" created="Tue, 7 Jun 2011 08:40:06 +0000"  >&lt;p&gt;Thanks for the test project! I&apos;ve committed a patch in revision 1132907 - I think everything is working fine. Could you please verify this?&lt;/p&gt;</comment>
                            <comment id="13045988" author="andrei.pozolotin" created="Wed, 8 Jun 2011 14:52:40 +0000"  >&lt;p&gt;still does not work for me; probably I have wrong snapshot: maven-scr-plugin-1.7.1-20110517.073734-2.jar (latest from the repo) ?&lt;/p&gt;</comment>
                            <comment id="13049431" author="andrei.pozolotin" created="Tue, 14 Jun 2011 21:19:17 +0000"  >&lt;p&gt;wow! getting close! &lt;br/&gt;
(after update to the latest snapshot of scr plugin)&lt;br/&gt;
it DOES work, when @Component(componentAbstract = true) is located in the same bundle as derived component;&lt;br/&gt;
but it does NOT work if the parent is located in a different bundle; thank you.&lt;/p&gt;</comment>
                            <comment id="13049440" author="andrei.pozolotin" created="Tue, 14 Jun 2011 21:30:14 +0000"  >&lt;p&gt;probably again has to do with exploded jar:&lt;/p&gt;

&lt;p&gt;this error happens when building derived project only in eclipse with m2e:&lt;/p&gt;

&lt;p&gt;6/14/11 4:24:32 PM CDT: Maven Builder: AUTO_BUILD &lt;br/&gt;
6/14/11 4:24:32 PM CDT: &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Using &apos;UTF-8&apos; encoding to copy filtered resources.&lt;br/&gt;
6/14/11 4:24:32 PM CDT: &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Copying 8 resources&lt;br/&gt;
6/14/11 4:24:32 PM CDT: &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Copying 8 resources&lt;br/&gt;
6/14/11 4:24:32 PM CDT: &lt;span class=&quot;error&quot;&gt;&amp;#91;WARN&amp;#93;&lt;/span&gt; Unable to read SCR descriptor file from JAR File /home/user1/Workspaces/barchart-3.6-work/barchart-platform/barchart-backend/barchart-backend-api/target/classes at OSGI-INF/serviceComponents.xml&lt;br/&gt;
6/14/11 4:24:32 PM CDT: &lt;span class=&quot;error&quot;&gt;&amp;#91;WARN&amp;#93;&lt;/span&gt; Unable to read SCR descriptor file from JAR File /home/user1/Workspaces/barchart-3.6-work/barchart-platform/barchart-backend/barchart-backend-api/target/classes at OSGI-INF/serviceComponents.xml&lt;br/&gt;
6/14/11 4:24:33 PM CDT: &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Writing abstract service descriptor /home/user1/Workspaces/barchart-3.6-work/barchart-platform/barchart-plugin-core/target/classes/OSGI-INF/scr-plugin/scrinfo.xml with 22 entries.&lt;br/&gt;
6/14/11 4:24:33 PM CDT: &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Generating 22 Service Component Descriptors to /home/user1/Workspaces/barchart-3.6-work/barchart-platform/barchart-plugin-core/target/classes/OSGI-INF/serviceComponents.xml&lt;br/&gt;
6/14/11 4:24:33 PM CDT: &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Using &apos;UTF-8&apos; encoding to copy filtered resources.&lt;br/&gt;
6/14/11 4:24:33 PM CDT: &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Copying 0 resource&lt;/p&gt;


&lt;p&gt;this project contains parent:&lt;/p&gt;

&lt;p&gt;6/14/11 4:24:32 PM CDT: &lt;span class=&quot;error&quot;&gt;&amp;#91;WARN&amp;#93;&lt;/span&gt; Unable to read SCR descriptor file from JAR File /home/user1/Workspaces/barchart-3.6-work/barchart-platform/barchart-backend/barchart-backend-api/target/classes at OSGI-INF/serviceComponents.xml&lt;/p&gt;

&lt;p&gt;this project  contains derived:&lt;/p&gt;

&lt;p&gt;6/14/11 4:24:33 PM CDT: &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Generating 22 Service Component Descriptors to /home/user1/Workspaces/barchart-3.6-work/barchart-platform/barchart-plugin-core/target/classes/OSGI-INF/serviceComponents.xml&lt;/p&gt;

&lt;p&gt;and in the parent - the serviceComponents.xml is present, but it contains no entries for @Component(componentAbstract = true) &lt;br/&gt;
(only for some other non-abstract components)&lt;/p&gt;

&lt;p&gt;so, basically scr plugin is either not able to find parent abstarct component descriptor or can not read parent xml at all&lt;/p&gt;</comment>
                            <comment id="13049442" author="andrei.pozolotin" created="Tue, 14 Jun 2011 21:38:57 +0000"  >&lt;p&gt;idea: another possible cause:&lt;/p&gt;

&lt;p&gt;I use these method names in derived:&lt;/p&gt;

&lt;p&gt;	protected abstract void activate(Map&amp;lt;String, String&amp;gt; config)&lt;br/&gt;
			throws Exception;&lt;/p&gt;

&lt;p&gt;	protected abstract void deactivate(Map&amp;lt;String, String&amp;gt; config)&lt;br/&gt;
			throws Exception;&lt;/p&gt;

&lt;p&gt;	protected abstract void modified(Map&amp;lt;String, String&amp;gt; config)&lt;br/&gt;
			throws Exception;&lt;/p&gt;

&lt;p&gt;chances are, since they are default names of these methods, (only w/o annotations)&lt;br/&gt;
they might overshadow something somewhere &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13053701" author="cziegeler" created="Thu, 23 Jun 2011 08:20:10 +0000"  >&lt;p&gt;Hi Andrei, can you turn on debug logging - this should show the exception when trying to read the serviceComponents.xml&lt;/p&gt;</comment>
                            <comment id="13064607" author="cziegeler" created="Wed, 13 Jul 2011 14:40:00 +0000"  >&lt;p&gt;I think this is fixed now. If not we can track the new problem with a new issue&lt;/p&gt;</comment>
                            <comment id="13082205" author="chetanm" created="Wed, 10 Aug 2011 07:22:13 +0000"  >&lt;p&gt;I am facing the same issue. I tried to debug it and following flow is happening&lt;/p&gt;

&lt;p&gt;1. org.apache.felix.scrplugin.SCRDescriptorGenerator#checkLifecycleMethod is called with &quot;activate&quot;&lt;br/&gt;
2. It invokes the desc.getTagByName( Constants.COMPONENT )&lt;br/&gt;
3. The desc in this case is org.apache.felix.scrplugin.tags.cl.ClassLoaderJavaClassDescription#getTagByName&lt;/p&gt;

&lt;p&gt;This method implementation is currently empty. However the component field has the required activate method name populated. So may be we need to use logic as done in getTagsByName&lt;/p&gt;</comment>
                            <comment id="13082207" author="cziegeler" created="Wed, 10 Aug 2011 07:23:47 +0000"  >&lt;p&gt;Reopening&lt;/p&gt;</comment>
                            <comment id="13082239" author="chetanm" created="Wed, 10 Aug 2011 08:58:28 +0000"  >&lt;p&gt;Sample Maven project. If you build it then you can see the serviceComponents.xml in the moduleB has a reference entry (inherited from parent) but no entry for activate method.&lt;/p&gt;

&lt;p&gt;However  if you see scrinfo.xml in moduleA then it has entry for activate method&lt;/p&gt;</comment>
                            <comment id="13083075" author="cziegeler" created="Thu, 11 Aug 2011 11:53:12 +0000"  >&lt;p&gt;Hi Chetan,&lt;/p&gt;

&lt;p&gt;thanks for the information and sample project. I&apos;ve implemented the getTagByName method in revision 1156580 and at least your test project runs fine now. I think we should give it some test drives before closing this.&lt;/p&gt;</comment>
                            <comment id="13085573" author="chetanm" created="Tue, 16 Aug 2011 07:04:32 +0000"  >&lt;p&gt;Thanks Carsten for the fix. I verified the fix by setting org.apache.felix:org.apache.felix.scr.generator:1.1.3-SNAPSHOT as the dependency on maven-bundle-plugin and it works as expected&lt;/p&gt;</comment>
                            <comment id="13085580" author="cziegeler" created="Tue, 16 Aug 2011 07:45:24 +0000"  >&lt;p&gt;Thanks Chetan, so I set this to resolved &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12489953" name="scr-bug2.zip" size="25469" author="chetanm" created="Wed, 10 Aug 2011 08:58:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56022</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1auf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>271394</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>