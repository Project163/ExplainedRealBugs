<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:10:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1124] ResourceNotFoundException too verbose</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1124</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;ModuleImpl logs stack traces for every resource that cannot be found. Often resources are optional or may be located at different locations. &lt;/p&gt;

&lt;p&gt;    public URL getResourceByDelegation(String name)&lt;br/&gt;
    {&lt;br/&gt;
        try&lt;/p&gt;
        {
            return (URL) findClassOrResourceByDelegation(name, false);
        }
&lt;p&gt;        catch (ClassNotFoundException ex)&lt;/p&gt;
        {
            // This should never be thrown because we are loading resources.
        }
&lt;p&gt;        catch (ResourceNotFoundException ex)&lt;/p&gt;
        {
            m_logger.log(
                Logger.LOG_DEBUG,
                ex.getMessage(),
                ex);
        }
&lt;p&gt;        return null;&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;Please consider a log message without stack trace and leave it to the client to be more verbose when appropriate. &lt;/p&gt;

&lt;p&gt;To log no message at all and simply return null would also be consistent with &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://java.sun.com/javase/6/docs/api/java/lang/ClassLoader.html#getResource(java.lang.String&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/javase/6/docs/api/java/lang/ClassLoader.html#getResource(java.lang.String&lt;/a&gt;)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12424668">FELIX-1124</key>
            <summary>ResourceNotFoundException too verbose</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="tdiesler">Thomas Diesler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 May 2009 06:55:00 +0000</created>
                <updated>Tue, 14 Jul 2009 14:28:25 +0000</updated>
                            <resolved>Mon, 13 Jul 2009 13:40:18 +0000</resolved>
                                    <version>framework-1.6.1</version>
                    <version>framework-1.8.0</version>
                    <version>framework-1.8.1</version>
                                    <fixVersion>framework-2.0.0</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12708143" author="rickhall" created="Mon, 11 May 2009 18:28:56 +0000"  >&lt;p&gt;Looking at the code for Logger, it looks like it doesn&apos;t print the stack trace for LOG_DEBUG, only LOG_ERROR. Are you sure the stack trace is getting printed from this call to log?&lt;/p&gt;</comment>
                            <comment id="12721201" author="tdiesler" created="Thu, 18 Jun 2009 11:25:21 +0000"  >&lt;p&gt;Yes, this should be place. I verified this with framework-1.8.0&lt;/p&gt;

&lt;p&gt;Here a sample stacktrace&lt;/p&gt;

&lt;p&gt;2009-06-18 13:19:45,074 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.osgi.felix.framework.FelixLogger&amp;#93;&lt;/span&gt; META-INF/services/org.apache.xerces.xni.parser.XMLParserConfiguration&lt;br/&gt;
org.apache.felix.moduleloader.ResourceNotFoundException: META-INF/services/org.apache.xerces.xni.parser.XMLParserConfiguration&lt;br/&gt;
	at org.apache.felix.framework.searchpolicy.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:622)&lt;br/&gt;
	at org.apache.felix.framework.searchpolicy.ModuleImpl.getResourceByDelegation(ModuleImpl.java:488)&lt;br/&gt;
	at org.apache.felix.framework.searchpolicy.ModuleImpl$ModuleClassLoader.getResource(ModuleImpl.java:1631)&lt;br/&gt;
	at java.lang.ClassLoader.getResourceAsStream(ClassLoader.java:1168)&lt;/p&gt;</comment>
                            <comment id="12725540" author="tdiesler" created="Tue, 30 Jun 2009 09:28:43 +0000"  >&lt;p&gt;Also affects 1.8.1&lt;/p&gt;</comment>
                            <comment id="12725650" author="rickhall" created="Tue, 30 Jun 2009 14:41:32 +0000"  >&lt;p&gt;Thomas, I created the following bundle activator:&lt;/p&gt;

&lt;p&gt;public class Activator implements BundleActivator&lt;br/&gt;
{&lt;br/&gt;
    public void start(final BundleContext context) throws Exception&lt;/p&gt;
    {
        getClass().getClassLoader().getResourceAsStream(&quot;does/not/exist.txt&quot;);
    }

&lt;p&gt;    public void stop(BundleContext context)&lt;br/&gt;
    {&lt;br/&gt;
    }&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;When I run this in Felix I get:&lt;/p&gt;

&lt;p&gt;-&amp;gt; ps&lt;br/&gt;
START LEVEL 1&lt;br/&gt;
   ID   State         Level  Name&lt;br/&gt;
[   0] &lt;span class=&quot;error&quot;&gt;&amp;#91;Active     &amp;#93;&lt;/span&gt; [    0] System Bundle (1.9.0.SNAPSHOT)&lt;br/&gt;
[   1] &lt;span class=&quot;error&quot;&gt;&amp;#91;Active     &amp;#93;&lt;/span&gt; [    1] Apache Felix Shell Service (1.3.0.SNAPSHOT)&lt;br/&gt;
[   2] &lt;span class=&quot;error&quot;&gt;&amp;#91;Active     &amp;#93;&lt;/span&gt; [    1] Apache Felix Shell TUI (1.3.0.SNAPSHOT)&lt;br/&gt;
[   3] &lt;span class=&quot;error&quot;&gt;&amp;#91;Active     &amp;#93;&lt;/span&gt; [    1] Apache Felix Bundle Repository (1.5.0.SNAPSHOT)&lt;br/&gt;
[   5] &lt;span class=&quot;error&quot;&gt;&amp;#91;Installed  &amp;#93;&lt;/span&gt; [    1] test.logger&lt;br/&gt;
-&amp;gt; start 5&lt;br/&gt;
DEBUG: WIRE: 5.0 -&amp;gt; org.osgi.framework -&amp;gt; 0&lt;br/&gt;
DEBUG: does/not/exist.txt (org.apache.felix.moduleloader.ResourceNotFoundException: does/not/exist.txt)&lt;br/&gt;
-&amp;gt;&lt;/p&gt;

&lt;p&gt;I do not get a stack trace, which is what I would expect from the code for Logger. Are you passing in a Logger instance to Felix when you construct it or are you just using Felix&apos; launcher? If the former, I would have to assume that the passed in logger is printing the stack trace.&lt;/p&gt;

&lt;p&gt;Let me know if I am missing something.&lt;/p&gt;</comment>
                            <comment id="12730236" author="tdiesler" created="Mon, 13 Jul 2009 07:12:07 +0000"  >&lt;p&gt;Yes, I confirmed (with the debugger) the stack trace is indeed thrown at the location that I mentioned above.&lt;/p&gt;

&lt;p&gt;Here the full stack trace for the example that you show.&lt;/p&gt;

&lt;p&gt;2009-07-13 08:55:16,446 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.osgi.felix.framework.FelixLogger&amp;#93;&lt;/span&gt; does/not/exist.txt&lt;br/&gt;
org.apache.felix.moduleloader.ResourceNotFoundException: does/not/exist.txt&lt;br/&gt;
	at org.apache.felix.framework.searchpolicy.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:631)&lt;br/&gt;
	at org.apache.felix.framework.searchpolicy.ModuleImpl.getResourceByDelegation(ModuleImpl.java:497)&lt;br/&gt;
	at org.apache.felix.framework.searchpolicy.ModuleImpl$ModuleClassLoader.getResource(ModuleImpl.java:1654)&lt;br/&gt;
	at java.lang.ClassLoader.getResourceAsStream(ClassLoader.java:1168)&lt;br/&gt;
	at org.jboss.test.osgi.example.simple.bundle.SimpleActivator.start(SimpleActivator.java:46)&lt;br/&gt;
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:589)&lt;br/&gt;
	at org.apache.felix.framework.Felix.startBundle(Felix.java:1461)&lt;br/&gt;
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:779)&lt;br/&gt;
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:760)&lt;/p&gt;


&lt;p&gt;Perhaps you do not have a LogService installed, which would show you the stack trace of the ResourceNotFoundException.&lt;/p&gt;

&lt;p&gt;My suggested fix would be &lt;/p&gt;

&lt;p&gt;ModuleImpl:503&lt;/p&gt;

&lt;p&gt;        catch (ResourceNotFoundException ex)&lt;/p&gt;
        {  
            // [FELIX-1124] ResourceNotFoundException too verbose
            m_logger.log(Logger.LOG_DEBUG, ex.getMessage());
        }

</comment>
                            <comment id="12730319" author="rickhall" created="Mon, 13 Jul 2009 12:44:56 +0000"  >&lt;p&gt;Sorry for being confusing and/or confused. I know the exception is being thrown from there, my point is that the framework is not responsible for printing the verbose message. So now it seems clear the LogService impl is printing the information. So, in your original description you ask to let the client decide how verbose to be, so isn&apos;t this an issue of the LogService impl being too verbose, not the framework?&lt;/p&gt;

&lt;p&gt;If we don&apos;t include the exception, then no logger would be able to get the information even if they wanted it.&lt;/p&gt;</comment>
                            <comment id="12730340" author="tdiesler" created="Mon, 13 Jul 2009 13:23:53 +0000"  >&lt;p&gt;I see what you are saying, on the other hand can a LogService really choose not to log Exceptions in level debug even if a client explicitly asks the LogService to do so? &lt;/p&gt;

&lt;p&gt;IMHO, the client of the LogService should decide whether the Exception stack trace is relevant (i.e. should go to the log file) or not. The LogService cannot make this decision based on the level alone.&lt;/p&gt;

&lt;p&gt;Yes, indeed I pass in a Felix logger when I construct the framework. All messages (from the LogService as well as from the Framework itself) get routed to the configured Log4J file. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://anonsvn.jboss.org/repos/jbossas/projects/jboss-osgi/projects/runtime/felix/trunk/src/main/java/org/jboss/osgi/felix/framework/FelixLogger.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://anonsvn.jboss.org/repos/jbossas/projects/jboss-osgi/projects/runtime/felix/trunk/src/main/java/org/jboss/osgi/felix/framework/FelixLogger.java&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="12730345" author="rickhall" created="Mon, 13 Jul 2009 13:40:17 +0000"  >&lt;p&gt;Ok, I removed the exception from the logged information.&lt;/p&gt;

&lt;p&gt;My original confusion was that I thought you were saying that Felix was printing the information, but it doesn&apos;t since Felix&apos; default logger doesn&apos;t print stack traces for debug logs.&lt;/p&gt;

&lt;p&gt;I am still not convinced that this isn&apos;t a lack of configurability in the log service impl, but I removed the exception since it probably doesn&apos;t provide much value any way.&lt;/p&gt;

&lt;p&gt;Also, make sure your logger doesn&apos;t make calls back into Felix, since we witnessed deadlocking, which is why we disabled that by default.&lt;/p&gt;

&lt;p&gt;Please close this issue if you are satisfied. Thanks.&lt;/p&gt;</comment>
                            <comment id="12730869" author="tdiesler" created="Tue, 14 Jul 2009 14:28:25 +0000"  >&lt;p&gt;merci&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57893</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vz0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184647</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>