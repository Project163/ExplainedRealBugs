<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:21:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2578] Declarative Services bundle does not start without Configuration Admin API wired</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2578</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The Declarative Services bundle imports the Configuration Admin package (org.osgi.service.cm) optionally with the intent to be able to operate without the Configuration Admin Service and its API present.&lt;/p&gt;

&lt;p&gt;In reality, the bundle does not start without the API being wired with the following exception:&lt;/p&gt;

&lt;p&gt;org.osgi.framework.BundleException: Activator start error in bundle org.apache.felix.scr &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt;.&lt;br/&gt;
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:1864)&lt;br/&gt;
	at org.apache.felix.framework.Felix.startBundle(Felix.java:1734)&lt;br/&gt;
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:905)&lt;br/&gt;
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:892)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: java.lang.NoClassDefFoundError: org/osgi/service/cm/ConfigurationListener&lt;br/&gt;
	at java.lang.ClassLoader.defineClass1(Native Method)&lt;br/&gt;
	at java.lang.ClassLoader.defineClass(ClassLoader.java:621)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.findClass(ModuleImpl.java:1829)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:716)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.access$200(ModuleImpl.java:73)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1690)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:252)&lt;br/&gt;
	at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)&lt;br/&gt;
	at java.lang.Class.getDeclaredConstructors0(Native Method)&lt;br/&gt;
	at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)&lt;br/&gt;
	at java.lang.Class.getConstructor0(Class.java:2699)&lt;br/&gt;
	at java.lang.Class.newInstance0(Class.java:326)&lt;br/&gt;
	at java.lang.Class.newInstance(Class.java:308)&lt;br/&gt;
	at org.apache.felix.framework.Felix.createBundleActivator(Felix.java:3659)&lt;br/&gt;
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:1812)&lt;br/&gt;
	... 31 more&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.osgi.service.cm.ConfigurationListener&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:772)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.access$200(ModuleImpl.java:73)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1690)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:252)&lt;br/&gt;
	at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)&lt;br/&gt;
	... 46 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473318">FELIX-2578</key>
            <summary>Declarative Services bundle does not start without Configuration Admin API wired</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="fmeschbe">Felix Meschberger</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Sep 2010 19:06:05 +0000</created>
                <updated>Tue, 20 Nov 2012 10:58:17 +0000</updated>
                            <resolved>Fri, 4 Feb 2011 10:56:03 +0000</resolved>
                                    <version> scr-1.6.0</version>
                                    <fixVersion>scr-1.6.2</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12930115" author="alex.blewitt" created="Tue, 9 Nov 2010 13:12:21 +0000"  >&lt;p&gt;I found this as well. The problem is that the Felix-SCR has Import-Package: org.osgi.service.cm;resolution:=optional, but since the Activator implements the ConfigurationListener interface, the Activator can&apos;t be resolved (and so the bundle can&apos;t be started)&lt;/p&gt;</comment>
                            <comment id="12930116" author="alex.blewitt" created="Tue, 9 Nov 2010 13:21:26 +0000"  >&lt;p&gt;Until the code is fixed, the import should be changed from optional to non-optional, so that people know it will work if it resolves.&lt;/p&gt;</comment>
                            <comment id="12930117" author="alex.blewitt" created="Tue, 9 Nov 2010 13:23:41 +0000"  >&lt;p&gt;NB this same problem appears for 1.4.0 as well.&lt;/p&gt;</comment>
                            <comment id="12974688" author="fmeschbe" created="Thu, 23 Dec 2010 18:29:13 +0000"  >&lt;p&gt;Temporarily marked the Configuration Admin API import required (as proposed) in Rev. 1052351&lt;/p&gt;</comment>
                            <comment id="12990523" author="fmeschbe" created="Fri, 4 Feb 2011 10:56:03 +0000"  >&lt;p&gt;Refactored Configuration Admin Support in Rev. 1067145:&lt;/p&gt;

&lt;p&gt;The ConfigurationAdmin (and Metatype) APIs are dynamically bound on demand&lt;/p&gt;

&lt;p&gt;The bundle&apos;s own configuration is now retrieved using a ManagedService registered as using the ServiceFactory pattern.&lt;/p&gt;

&lt;p&gt;The component configuration is refactored in that there is a support class interface between the component registry and Configuration Admin. The support class is only instantiated once the Configuration Admin service is available. Once the service is unregistered the support class is removed again. This support class not only provides initial component configuration but also configuration updates by registering a ConfigurationListener.&lt;/p&gt;

&lt;p&gt;I have tested it in a Sling environment and so far all looks good.&lt;/p&gt;</comment>
                            <comment id="13501056" author="fmeschbe" created="Tue, 20 Nov 2012 10:58:17 +0000"  >&lt;p&gt;Close after release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12459154" name="patch" size="942" author="alex.blewitt" created="Tue, 9 Nov 2010 13:21:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40433</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i035p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16356</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>