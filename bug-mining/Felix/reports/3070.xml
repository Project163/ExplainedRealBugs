<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:13:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-6044] Component deactivation does not cause reference services to be ungotten</title>
                <link>https://issues.apache.org/jira/browse/FELIX-6044</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The fix to &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5974&quot; title=&quot;Prototype scope references are not released on deactivation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5974&quot;&gt;&lt;del&gt;FELIX-5974&lt;/del&gt;&lt;/a&gt; has caused an issue for the default reference scope of bundle.  When a component has a simple @Reference and that component is deactivated the services that it references will not be ungotten by SCR.  This causes all kinds of issues for use counting of the consumed service.&lt;/p&gt;

&lt;p&gt;The issue is that org.apache.felix.scr.impl.manager.DependencyManager.close(ComponentContextImpl&amp;lt;S&amp;gt;, EdgeInfo) is calling RefPair.unsetServiceObject now for all RefPair types.  The RefPair types MultiplePrototypeRefPair and SinglePrototypeRefPair were updated to have unsetServiceObject to also have that service be ungotten.  But the default SingleRefPair type was not.  This causes issues when ultimately the DependencyManagers are deactivated later which then closes the customizer for the dependency and org.apache.felix.scr.impl.manager.DependencyManager.AbstractCustomizer.ungetService(RefPair&amp;lt;S, T&amp;gt;) is called.  By this time there will now be a null service and it will not be ungotten.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13213366">FELIX-6044</key>
            <summary>Component deactivation does not cause reference services to be ungotten</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tjwatson">Tom Watson</assignee>
                                    <reporter username="tjwatson">Tom Watson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Feb 2019 17:21:35 +0000</created>
                <updated>Fri, 1 Mar 2019 14:26:44 +0000</updated>
                            <resolved>Tue, 5 Feb 2019 16:39:09 +0000</resolved>
                                    <version>scr-2.1.14</version>
                                    <fixVersion>scr-2.1.16</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16758550" author="githubbot" created="Fri, 1 Feb 2019 18:15:18 +0000"  >&lt;p&gt;GitHub user tjwatson opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/180&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/180&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6044&quot; title=&quot;Component deactivation does not cause reference services to be ungotten&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6044&quot;&gt;&lt;del&gt;FELIX-6044&lt;/del&gt;&lt;/a&gt; - avoid calling ungetServiceObject too early for simple case of SingleRefPair&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tjwatson/felix&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tjwatson/felix&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6044&quot; title=&quot;Component deactivation does not cause reference services to be ungotten&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6044&quot;&gt;&lt;del&gt;FELIX-6044&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/180.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/180.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #180&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit bf7f727dc812458133e1f8814a9f4ae6b5df3988&lt;br/&gt;
Author: Tom Watson &amp;lt;tjwatson@...&amp;gt;&lt;br/&gt;
Date:   2019-02-01T17:28:38Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6044&quot; title=&quot;Component deactivation does not cause reference services to be ungotten&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6044&quot;&gt;&lt;del&gt;FELIX-6044&lt;/del&gt;&lt;/a&gt; - avoid calling ungetServiceObject too early for simple case&lt;br/&gt;
    of SingleRefPair&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16761007" author="githubbot" created="Tue, 5 Feb 2019 16:38:32 +0000"  >&lt;p&gt;Github user tjwatson closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/180&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/180&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0ks0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>