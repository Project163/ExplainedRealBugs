<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:09:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5627] Class loading issues while finding fields causes an NPE</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5627</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;See eclipse bug &lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=515873&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=515873&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The following snippet of an NPE can happen&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.felix.scr.impl.inject.FieldHandler.validateField(FieldHandler.java:279)&lt;br/&gt;
	at org.apache.felix.scr.impl.inject.FieldHandler.access$500(FieldHandler.java:51)&lt;br/&gt;
	at org.apache.felix.scr.impl.inject.FieldHandler$NotResolved.resolve(FieldHandler.java:839)&lt;br/&gt;
	at org.apache.felix.scr.impl.inject.FieldHandler$NotResolved.fieldExists(FieldHandler.java:864)&lt;br/&gt;
	at org.apache.felix.scr.impl.inject.FieldHandler.fieldExists(FieldHandler.java:918)&lt;/p&gt;

&lt;p&gt;This is because org.apache.felix.scr.impl.inject.FieldHandler.findField(SimpleLogger) can return null.  In this case it is returning null because of a NoClassDefFoundError which is caught in org.apache.felix.scr.impl.inject.FieldHandler.getField(Class&amp;lt;?&amp;gt;, boolean, boolean, SimpleLogger) and null ultimately is returned.  It seems a null check is the correct fix here since later on it appears that null may be used when things are not as expected.&lt;/p&gt;

&lt;p&gt;While investigating this issue I found the field handler implementation suffers from the same global lock strategy as the BaseMethod implementation did in &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5615&quot; title=&quot;Global lock in BaseMethod.NotResolved::resolve method can cause deadlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5615&quot;&gt;&lt;del&gt;FELIX-5615&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13067488">FELIX-5627</key>
            <summary>Class loading issues while finding fields causes an NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="tjwatson">Tom Watson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Apr 2017 20:00:22 +0000</created>
                <updated>Fri, 22 Sep 2017 08:55:20 +0000</updated>
                            <resolved>Mon, 1 May 2017 16:16:42 +0000</resolved>
                                                    <fixVersion>scr-2.0.12</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15988249" author="cziegeler" created="Fri, 28 Apr 2017 05:41:54 +0000"  >&lt;p&gt;I&apos;ve added a null check in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1792985&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1792985&amp;amp;view=rev&lt;/a&gt; &lt;br/&gt;
I think the R7 branch is not affected as the code has been refactored there&lt;br/&gt;
But we still should fix the global lock problem for fields&lt;/p&gt;</comment>
                            <comment id="15991016" author="tjwatson" created="Mon, 1 May 2017 16:16:42 +0000"  >&lt;p&gt;I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5628&quot; title=&quot;Global lock in FieldHandler.NotResolved::resolve method can cause deadlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5628&quot;&gt;&lt;del&gt;FELIX-5628&lt;/del&gt;&lt;/a&gt; to track the global lock problem as a separate issue. Marking this issue as resolved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://bugs.eclipse.org/bugs/show_bug.cgi?id=515873]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3e7ev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>