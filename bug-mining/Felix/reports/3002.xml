<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:12:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5858] Additional server configured through OSGi factory configurations starts and stops immediately</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5858</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;When I disable a default server&#160;specifying a negative port and configure an additional server &#160;through OSGi factory configurations i get a server started and immediately stopped:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2018-05-18 08:15:11.149:INFO:oejsh.ContextHandler:CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.felix.http]): Started o.e.j.s.ServletContextHandler@4aefeb72{/,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,AVAILABLE}
2018-05-18 08:15:11.150:INFO:oejs.Server:CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.felix.http]): Started @1448ms
2018-05-18 08:15:11.150:INFO:oejs.session:CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.felix.http]): node0 Scavenging every 660000ms
2018-05-18 08:15:11.194:INFO:oejs.AbstractConnector:CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.felix.http]): Started ServerConnector@6dfbaedd{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}
2018-05-18 08:15:11.240:INFO:oejus.SslContextFactory:CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.felix.http]): x509=X509@17c0c47f(budget,h=[],w=[]) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; SslContextFactory@4d9ec6f9[provider=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,keyStore=bundleresource:&lt;span class=&quot;code-comment&quot;&gt;//4.fwk1864230087/etc/keystore/keystore,trustStore=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]
&lt;/span&gt;2018-05-18 08:15:11.517:INFO:oejs.AbstractConnector:CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.felix.http]): Started ServerConnector@feb016f{SSL,[ssl, http/1.1]}{0.0.0.0:8443}
2018-05-18 08:15:12.102:INFO:oejs.AbstractConnector:CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.felix.http]): Stopped ServerConnector@6dfbaedd{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}
2018-05-18 08:15:12.104:INFO:oejs.AbstractConnector:CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.felix.http]): Stopped ServerConnector@feb016f{SSL,[ssl, http/1.1]}{0.0.0.0:8443}
2018-05-18 08:15:12.104:INFO:oejs.session:CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.felix.http]): node0 Stopped scavenging
2018-05-18 08:15:12.105:INFO:oejsh.ContextHandler:CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.felix.http]): Stopped o.e.j.s.ServletContextHandler@4aefeb72{/,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,UNAVAILABLE}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Checking code of Jetty activator I see, that it stops factory on ungetting it.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; factoryProps = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Hashtable&amp;lt;&amp;gt;();
factoryProps.put(Constants.SERVICE_PID, JettyService.PID);
factoryProps.put(Constants.SERVICE_VENDOR, &lt;span class=&quot;code-quote&quot;&gt;&quot;The Apache Software Foundation&quot;&lt;/span&gt;);
factoryProps.put(Constants.SERVICE_DESCRIPTION, &lt;span class=&quot;code-quote&quot;&gt;&quot;Managed Service Factory &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the Jetty Http Service&quot;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.jettyServiceFactoryReg = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getBundleContext().registerService(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.osgi.service.cm.ManagedServiceFactory&quot;&lt;/span&gt;,
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ServiceFactory()
{

@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getService(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Bundle bundle,
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ServiceRegistration registration)
{
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JettyManagedServiceFactory(getBundleContext());
}

@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void ungetService(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Bundle bundle,
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ServiceRegistration registration,
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; service)
{
((JettyManagedServiceFactory)service).stop();
}
}, factoryProps);

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It should not happen actually, because&#160;it&#160;shutdowns the server.&lt;/p&gt;

&lt;p&gt;Please fix it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13160266">FELIX-5858</key>
            <summary>Additional server configured through OSGi factory configurations starts and stops immediately</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="Smushkevich">Roman</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Fri, 18 May 2018 06:25:41 +0000</created>
                <updated>Mon, 6 Aug 2018 15:08:19 +0000</updated>
                            <resolved>Thu, 2 Aug 2018 14:05:44 +0000</resolved>
                                    <version>http.jetty-4.0.0</version>
                                    <fixVersion>http.jetty-4.0.4</fixVersion>
                                    <component>HTTP Service</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16566717" author="cziegeler" created="Thu, 2 Aug 2018 12:38:28 +0000"  >&lt;p&gt;Thanks for reporting, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Smushkevich&quot; class=&quot;user-hover&quot; rel=&quot;Smushkevich&quot;&gt;Smushkevich&lt;/a&gt; I&apos;ve committed a potential fix in rev 1837292, could you please test based on the latest source code?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13171714">FELIX-5884</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tvhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>