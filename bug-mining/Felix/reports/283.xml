<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:07:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-729] Shell-TUI causes 100% CPU load when using javaw launcher</title>
                <link>https://issues.apache.org/jira/browse/FELIX-729</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I ran into this issue at work with Felix 1.0.4 on Win2k SP4 and reproduced it at home with Felix 1.2.1 on Vista Enterprise, both on JDK 1.6. I only discovered it by accident, as I normally use the console during development. I suspect the people reading this do, too &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;When using the javaw.exe launcher rather than the java.exe launcher, Felix-shell-TUI permanently draws 100% CPU (divide by the number of cores, home PC reports 50%). After removing shell-TUI from the autostart list, Felix can be run with the javaw launcher without issue, demonstrating that the problem originates from that bundle.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;br/&gt;
1)  unzip a fresh copy of Felix-1.2.1.zip&lt;br/&gt;
2)  in the install dir, create two batch files: felix-console.bat and felix-noconsole.bat, one executes `java -Dfelix.cache.profile=consoletest -jar bin\felix.jar`, the other executes `javaw -Dfelix.cache.profile=consoletest -jar bin\felix.jar`&lt;br/&gt;
3) double-click either from Windows Explorer, note that when you run the &quot;javaw&quot; one, CPU shoots to 100% and stays there.&lt;/p&gt;

&lt;p&gt;Running them from within Windows Explorer isn&apos;t strictly necessary to reproduce the issue, the problem will also show when you start the batch file from the command line.&lt;/p&gt;</description>
                <environment>Windows 2000 SP4, Windows Vista Enterprise, JDK 1.6</environment>
        <key id="12404688">FELIX-729</key>
            <summary>Shell-TUI causes 100% CPU load when using javaw launcher</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="doejohn">Barend Garvelink</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Sep 2008 22:22:29 +0000</created>
                <updated>Tue, 31 Mar 2009 14:56:15 +0000</updated>
                            <resolved>Fri, 26 Sep 2008 16:08:53 +0000</resolved>
                                    <version>framework-1.0.4</version>
                    <version>framework-1.2.0</version>
                                    <fixVersion>shell.tui-1.2.0</fixVersion>
                                    <component>Shell TUI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12633746" author="rickhall" created="Tue, 23 Sep 2008 14:28:31 +0000"  >&lt;p&gt;I was not able to test this under windows, but I was able to recreate a similar situation under Linux by redirecting stdin to /dev/null. As a result, I modified Shell TUI to look for a null input line, in which case it now assumes that there is no stdin and exits its thread&apos;s run() method.&lt;/p&gt;

&lt;p&gt;Barend, I deployed a snapshot of ShellTUI 1.1.0 into the maven snapshot repo, could you please test it to see if it solves the issue for you? If so, please close this JIRA issue. Thanks.&lt;/p&gt;</comment>
                            <comment id="12634630" author="doejohn" created="Thu, 25 Sep 2008 21:19:07 +0000"  >&lt;p&gt;Using org.apache.felix.shell.tui-1.1.0-20080923.140259-2.jar, the problem is still present on Vista. I haven&apos;t checked at work, but I assume it&apos;s the same thing. I wrote a quick little Java class that dumps the vm properties to a text file then pokes at System.in a bit and logs those results as well. Ran it with both launchers. &lt;/p&gt;

&lt;p&gt;The system properties are identical with both launchers, but I found that invoking `System.in.available()` returns 0 using the java launcher but throws an IOException using the javaw launcher, so the two launchers can be distinguished:&lt;/p&gt;

&lt;p&gt;java.io.IOException: The handle is invalid&lt;br/&gt;
	at java.io.FileInputStream.available(Native Method)&lt;br/&gt;
	at java.io.BufferedInputStream.available(BufferedInputStream.java:381)&lt;br/&gt;
	at foo.StdinTest.main(StdinTest.java:47)&lt;/p&gt;

&lt;p&gt;Aside from this, invoking System.console() returns non-null for the `java` launcher and null for the `javaw` launcher. That&apos;d be cleaner, but since that&apos;s a Java 1.6 feature, it&apos;s of no use here.&lt;/p&gt;</comment>
                            <comment id="12634670" author="rickhall" created="Thu, 25 Sep 2008 22:36:16 +0000"  >&lt;p&gt;Ok, I just committed and deployed a new snapshot that exits if it gets an IOException while reading from stdin...if this doesn&apos;t work, then I am not sure what will. I am not sure if it will impact any other scenarios, but I don&apos;t think I have too many other options at this point. Barend, please try again and see if it makes any difference. Thanks.&lt;/p&gt;</comment>
                            <comment id="12634784" author="mcculls" created="Fri, 26 Sep 2008 08:19:46 +0000"  >&lt;p&gt;FYI, &quot;checking for an IOException from System.in.available()&quot; is what we ended up using in Pax-Runner for a similar problem (and it did fix it)&lt;/p&gt;</comment>
                            <comment id="12634913" author="doejohn" created="Fri, 26 Sep 2008 16:08:53 +0000"  >&lt;p&gt;That last change fixed the problem. Thank you for your time, Richard.&lt;/p&gt;</comment>
                            <comment id="12634914" author="doejohn" created="Fri, 26 Sep 2008 16:09:04 +0000"  >&lt;p&gt;closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58260</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0w0t3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184936</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>