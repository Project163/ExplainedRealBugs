<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:03:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5316] Updating from SCR 2.0.2 to SCR 2.0.4 leads to nullpointers</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5316</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Our Application works fine with org.apache.felix.scr 2.0.2.&lt;br/&gt;
If we update to org.apache.felix.scr 2.0.4 it doesn&apos;t work any more.&lt;/p&gt;

&lt;p&gt;Several bundles fail to load their components. &lt;br/&gt;
The failure is displayed as stack trace(&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12821570/12821570_felixScrNullpointer.txt&quot; title=&quot;felixScrNullpointer.txt attached to FELIX-5316&quot;&gt;felixScrNullpointer.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;) on the console.&lt;br/&gt;
The failing components all have the same pattern in their definitions. &lt;br/&gt;
They all provide the same interface and are defined as immediate=true. &lt;br/&gt;
There is another component, which defines a dynamic 0..n reference to this interface.&lt;/p&gt;

&lt;p&gt;I suspect, there has been introduced a bug with issue &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-4417&quot; title=&quot;Circular references detected but not resolved if one of the references in the cycle has optional cardinality&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-4417&quot;&gt;&lt;del&gt;FELIX-4417&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment>org.apache.felix.main 5.4.0&lt;br/&gt;
org.apache.felix.scr 2.0.4</environment>
        <key id="12994255">FELIX-5316</key>
            <summary>Updating from SCR 2.0.2 to SCR 2.0.4 leads to nullpointers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djencks">David Jencks</assignee>
                                    <reporter username="maxurech">max urech</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2016 11:38:35 +0000</created>
                <updated>Sat, 6 Aug 2016 07:10:01 +0000</updated>
                            <resolved>Tue, 2 Aug 2016 21:08:56 +0000</resolved>
                                    <version>scr-2.0.4</version>
                                    <fixVersion>scr-2.0.6</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15403814" author="maxurech" created="Tue, 2 Aug 2016 11:39:28 +0000"  >&lt;p&gt;The typical stack trace shown for each failing component(&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12821570/12821570_felixScrNullpointer.txt&quot; title=&quot;felixScrNullpointer.txt attached to FELIX-5316&quot;&gt;felixScrNullpointer.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;).&lt;/p&gt;</comment>
                            <comment id="15404393" author="mjameswh" created="Tue, 2 Aug 2016 17:04:10 +0000"  >&lt;p&gt;The bug has been introduced in r1744739 (&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5243&quot; title=&quot;Make the code more reusable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5243&quot;&gt;&lt;del&gt;FELIX-5243&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Here are the key items of the stack trace:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException
	at org.osgi.util.tracker.ServiceTracker.&amp;lt;init&amp;gt;(ServiceTracker.java:184)
	at org.apache.felix.scr.impl.inject.ClassUtils.getPackageAdmin(ClassUtils.java:187)
	at org.apache.felix.scr.impl.inject.ClassUtils.getClassFromComponentClassLoader(ClassUtils.java:118)
        [...]
	at org.apache.felix.scr.impl.Activator.start(Activator.java:108)
        [...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the first three lines, we get that the static field &lt;tt&gt;ClassUtils.m_context&lt;/tt&gt; is &lt;tt&gt;null&lt;/tt&gt;. The value of that field is set in &lt;tt&gt;Activator.start()&lt;/tt&gt;, at line 110. But the method is called a little bit too early: we are currently at line 108 of that very same method.&lt;/p&gt;

&lt;p&gt;It should be possible to fix the bug by simply moving lines 109-110 of Activator.jave before the current line 108.&lt;/p&gt;</comment>
                            <comment id="15404790" author="djencks" created="Tue, 2 Aug 2016 21:08:56 +0000"  >&lt;p&gt;Applied James&apos;s suggested fix in r1755004&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12821570" name="felixScrNullpointer.txt" size="8027" author="maxurech" created="Tue, 2 Aug 2016 11:39:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31srb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>