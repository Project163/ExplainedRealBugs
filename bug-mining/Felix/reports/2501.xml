<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:58:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5027] SSL Filter URL Decoding Issues</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5027</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;In SslFilterResponse, call to uri.getQuery() newly introduced with following &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-4920&quot; title=&quot;sslfilter does not preserve fragment in redirect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-4920&quot;&gt;&lt;del&gt;FELIX-4920&lt;/del&gt;&lt;/a&gt; commit is creating URL decoding issues:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/felix/commit/57819578b1b26f40a1f1d3c9f07fa928a395d0a9#diff-00202663cae410b17b36aa25e60ba6cb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/commit/57819578b1b26f40a1f1d3c9f07fa928a395d0a9#diff-00202663cae410b17b36aa25e60ba6cb&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;#L188 &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;return new URI(this.clientProto,null, this.serverName, this.clientPort, uri.getPath(),uri.getQuery(),uri.getFragment()).toURL();&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The uri.getQuery() will remove the decoding from the &#8220;resource&#8221; parameter  causing a 302 with a location which is not decoded.&lt;/p&gt;

&lt;p&gt;So for example, it causes URLs to appear like &lt;br/&gt;
&lt;a href=&quot;https://www.abc.com/?resource=https://mypage-1.abc.com:80/en.html?pbOpen=true&amp;amp;$$login$$=$$login$$&amp;amp;j_reason=errors.login.account.not.found&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.abc.com/?resource=https://mypage-1.abc.com:80/en.html?pbOpen=true&amp;amp;$$login$$=$$login$$&amp;amp;j_reason=errors.login.account.not.found&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When the expected URL for example is: &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.abc.com/en/login.html?resource=%2Fen.html%3FpbOpen%3Dtrue&amp;amp;$$login$$=%24%24login%24%24&amp;amp;j_reason=errors.login.account.not.found&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.abc.com/en/login.html?resource=%2Fen.html%3FpbOpen%3Dtrue&amp;amp;$$login$$=%24%24login%24%24&amp;amp;j_reason=errors.login.account.not.found&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This creates problems when we have multiple domain URL mappings using sling resource and apache mod_rewrite.&lt;br/&gt;
Also, important to note that the problem especially persists when the &#8220;resource&#8221; parameter contains a URL with URL parameters (and thus with &#8220;?&#8221; in it).&lt;/p&gt;

&lt;p&gt;It may be good to utilize StringBuilder in this method instead of using uri.getQuery() in combination with the URI and URL classes. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12863053">FELIX-5027</key>
            <summary>SSL Filter URL Decoding Issues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="kmrobin">Robin KM</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Sep 2015 13:46:18 +0000</created>
                <updated>Thu, 17 Sep 2015 13:20:18 +0000</updated>
                            <resolved>Fri, 11 Sep 2015 06:28:39 +0000</resolved>
                                    <version>http.sslfilter-1.0.2</version>
                                    <fixVersion>http.sslfilter-1.0.4</fixVersion>
                                    <component>HTTP Service</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14740281" author="cziegeler" created="Fri, 11 Sep 2015 06:28:39 +0000"  >&lt;p&gt;Fixed in rev 1702383 by using a string builder and appending the raw query string (and also raw fragment).&lt;br/&gt;
Added a test case to verify the correct behaviour&lt;/p&gt;</comment>
                            <comment id="14802897" author="kmrobin" created="Thu, 17 Sep 2015 13:20:18 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jzwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>