<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:58:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4964] [DS] Reactivate component at most once per service event</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4964</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;When a component has several references to the same service (most likely scenario is field references for object, properties, service ref all for the same service) and a service event results in the component being deactivated and activated (such as a static reference being replaced by another) then we should only reactivate the component instance once.&lt;/p&gt;

&lt;p&gt;The solution I have in mind involves distributing events to the service trackers for the components in a bundle through the BundleComponentActivator and tracking the components that need to be activated with the event.  Once all the relevant service trackers have been notified, we can try to activate all the components relevant to that service event.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12845981">FELIX-4964</key>
            <summary>[DS] Reactivate component at most once per service event</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djencks">David Jencks</assignee>
                                    <reporter username="djencks">David Jencks</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Jul 2015 20:33:22 +0000</created>
                <updated>Tue, 11 Aug 2015 05:09:33 +0000</updated>
                            <resolved>Sat, 18 Jul 2015 18:13:38 +0000</resolved>
                                    <version>scr-2.0.0</version>
                                    <fixVersion>scr-2.0.0</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14632355" author="cziegeler" created="Sat, 18 Jul 2015 09:57:23 +0000"  >&lt;p&gt;I&apos;m not sure if your idea is similar to my thoughts: right now we have a separate tracker for each reference, this are informed asynchronously and independently on a change. What about having a single tracker tracking all changes and this one knows the internal trackers we have right now. Once a change comes in, it goes through the list of all these internal trackers, calculates the change set and then acts on that set. So basically instead of letting the framework service reg do the dispatching, we do it ourselfs.&lt;/p&gt;</comment>
                            <comment id="14632459" author="djencks" created="Sat, 18 Jul 2015 14:38:51 +0000"  >&lt;p&gt;You&apos;ll be able to see my idea soon.... it seems to be working.&lt;br/&gt;
Trackers are much much more complicated than service listeners, and the initial query part is not part of this problem.&lt;br/&gt;
We have to do this per bundle, since we have no practical way of replicating the service hooks that determine which events are visible to which bundles.&lt;br/&gt;
Sending an event to the outside world involves a security check, so I&apos;d prefer to reduce the number of events shown to a bundle if practical.&lt;/p&gt;

&lt;p&gt;So my solution is for the BundleComponentActivator to register a ServiceListener for each service class for which there is at least one dependency manager, and to distribute the events received to the dependency managers for that bundle after filtering and creating appropriate endmatch events from modified events.  Since the service tracker already doesn&apos;t propagate events to unknown service refs, we don&apos;t need to worry about only generating endmatch events for refs that previously actually matched, so this path is slightly simpler than the one in the service registry.&lt;/p&gt;</comment>
                            <comment id="14632521" author="cziegeler" created="Sat, 18 Jul 2015 16:55:47 +0000"  >&lt;p&gt;Ok, got it - sounds great to me&lt;/p&gt;</comment>
                            <comment id="14632551" author="djencks" created="Sat, 18 Jul 2015 18:13:38 +0000"  >&lt;p&gt;r1691760&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hei7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>