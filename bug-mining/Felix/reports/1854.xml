<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:48:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3891] [DS] synchronization around registerService can create deadlocks</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3891</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;We&apos;ve found a deadlock from the synchronization around the service registration.  This particular one comes from two threads trying to activate the service concurrently.  The losing thread came from PackageAdmin refresh bundles thread, whereas the winning thread triggered another component creation whose activate method calls Package admin to do some work.  (this is eclipse package admin, not sure if felix has the same problem).&lt;/p&gt;

&lt;p&gt;Thinking about it some more I don&apos;t think we need to synchronize, it doesn&apos;t matter which thread wins the service registration as long as it&apos;s registered soon.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630816">FELIX-3891</key>
            <summary>[DS] synchronization around registerService can create deadlocks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djencks">David Jencks</assignee>
                                    <reporter username="djencks">David Jencks</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2013 07:11:08 +0000</created>
                <updated>Thu, 4 Sep 2014 08:04:11 +0000</updated>
                            <resolved>Tue, 19 Mar 2013 21:46:55 +0000</resolved>
                                    <version>scr-1.8.0</version>
                                    <fixVersion>scr-1.8.0</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13575384" author="djencks" created="Sun, 10 Feb 2013 08:05:58 +0000"  >&lt;p&gt;rev 1444488, 1444489, 1444490, 1444492, 1444493&lt;/p&gt;</comment>
                            <comment id="13591312" author="djencks" created="Sat, 2 Mar 2013 05:32:10 +0000"  >&lt;p&gt;original solution really doesn&apos;t work for concurrent register/unregister requests.&lt;/p&gt;</comment>
                            <comment id="13591675" author="djencks" created="Sun, 3 Mar 2013 08:04:33 +0000"  >&lt;p&gt;New fix in rev 1452019.  This one keeps a deque of concurrent registration state change requests and uses the first thread to process all of them.  It also discards requests that duplicate the previous state change request.&lt;/p&gt;</comment>
                            <comment id="13591847" author="djencks" created="Sun, 3 Mar 2013 19:50:10 +0000"  >&lt;p&gt;Use in real software reveals something is wrong.... get stuff like registration change queue &lt;span class=&quot;error&quot;&gt;&amp;#91;unregistered, unregistered, unregistered&amp;#93;&lt;/span&gt; whereas consecutive elements are supposed to be different.&lt;/p&gt;</comment>
                            <comment id="13606879" author="djencks" created="Tue, 19 Mar 2013 21:46:55 +0000"  >&lt;p&gt;Last set of fixes seem to work OK&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311312</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hq47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311658</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>