<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:55:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4660] Security problem in WebConsoleUtil.getParameter() method</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4660</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The mentioned method is used to get simple parameters as well FileItems, if the request is multipart.&lt;/p&gt;

&lt;p&gt;If a big file has been uploaded Apache File Upload will store the file in a temporary folder, instead of keeping it in memory. That folder is specified by system property &apos;java.io.tmpdir&apos;.&lt;/p&gt;

&lt;p&gt;When running with security the file upload will require the bundle to have the following permission:&lt;br/&gt;
(java.util.PropertyPermission &quot;java.io.tmpdir&quot; &quot;read&quot;)&lt;/p&gt;

&lt;p&gt;But in order to read/write/delete to that folder the bundle will require&lt;br/&gt;
(java.io.FilePermission &quot;&amp;lt;&amp;lt;ALL FILES&amp;gt;&amp;gt;&quot; &quot;read,write,delete&quot;)&lt;/p&gt;

&lt;p&gt;Because we don&apos;t know where the file will be stored and cannot express that using system properties, we need to give permission to read any file on system and that is well .. bad.&lt;/p&gt;

&lt;p&gt;In OSGi however, it&apos;s guaranteed that the bundle will have permission to read/write/delete files in it&apos;s data folder. So all we need is to set the repository path:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;DiskFileItemFactory factory
factory.setRepository( 256000 );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;To keep compatibility with existing version(s) I suggest that we add a new constant:&lt;br/&gt;
AbstractWebConsolePlugin.ATTR_FILEUPLOAD_DIR&lt;/p&gt;

&lt;p&gt;The value of that attribute is a File object - a folder, which plugins obtain using BundleContext.getDataFile().&lt;/p&gt;

&lt;p&gt;So if the attribute is set, the getParameter() method will set that file as repository to the DiskFileItemFactory. That wouldn&apos;t require any changes to the API, though any plugins, that use FileUpload are recommended to update their code and set that attribute.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12745272">FELIX-4660</key>
            <summary>Security problem in WebConsoleUtil.getParameter() method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="v_valchev">Valentin Valchev</assignee>
                                    <reporter username="v_valchev">Valentin Valchev</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Oct 2014 14:55:01 +0000</created>
                <updated>Mon, 16 Mar 2015 08:17:16 +0000</updated>
                            <resolved>Fri, 3 Oct 2014 08:00:01 +0000</resolved>
                                    <version>webconsole-4.2.2</version>
                                    <fixVersion>webconsole-4.2.4</fixVersion>
                                    <component>Web Console</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14157774" author="v_valchev" created="Fri, 3 Oct 2014 08:00:01 +0000"  >&lt;p&gt;Fixed in rev. 1629129&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20otb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>