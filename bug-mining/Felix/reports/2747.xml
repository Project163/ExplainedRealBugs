<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:04:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5436] Log message &apos;callback not found on component instances&apos; incorrectly shown if exception occurs during calling of callback method</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5436</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;In the method ComponentImpl.invokeCallbackMethod(Object[], String, Class&amp;lt;?&amp;gt;[][], Object[][], boolean) a message is logged when an exception occurs during call of the callback method, because in that case the &apos;callbackFound&apos; variable is not set.&lt;br/&gt;
This is confusing when reading error log.&lt;/p&gt;

&lt;p&gt;Suggestion for code change:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void invokeCallbackMethod(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] instances, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; methodName, &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt;[][] signatures,
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[][] parameters, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; logIfNotFound) {
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; callbackFound = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; exceptionOccurredInCallback = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; instances.length; i++) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                InvocationUtil.invokeCallbackMethod(instances[i], methodName, signatures, parameters);
                callbackFound |= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
            }
            &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NoSuchMethodException e) {
                &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the method does not exist, ignore it
&lt;/span&gt;            }
            &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InvocationTargetException e) {
                &lt;span class=&quot;code-comment&quot;&gt;// the method itself threw an exception, log that
&lt;/span&gt;                m_logger.log(Logger.LOG_ERROR, &lt;span class=&quot;code-quote&quot;&gt;&quot;Invocation of &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + methodName + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt; failed.&quot;&lt;/span&gt;, e.getCause());
                exceptionOccurredInCallback = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
            }
            &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable e) {
                m_logger.log(Logger.LOG_ERROR, &lt;span class=&quot;code-quote&quot;&gt;&quot;Could not invoke &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + methodName + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt;.&quot;&lt;/span&gt;, e);
                exceptionOccurredInCallback = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
            }
        }
        
        &lt;span class=&quot;code-comment&quot;&gt;// If the callback is not found, we don&apos;t log &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the method is on an AbstractDecorator.
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// (Aspect or Adapter are not interested in user dependency callbacks)        
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (logIfNotFound &amp;amp;&amp;amp; ! exceptionOccurredInCallback &amp;amp;&amp;amp; ! callbackFound &amp;amp;&amp;amp; ! (getInstance() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; AbstractDecorator)) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (m_logger == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot; + methodName + &quot;&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot; callback not found on component instances &quot;&lt;/span&gt;
                    + Arrays.toString(instances));
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                m_logger.log(LogService.LOG_ERROR, &lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot; + methodName + &quot;&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot; callback not found on component instances &quot;&lt;/span&gt;
                    + Arrays.toString(instances));
            }

        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13024728">FELIX-5436</key>
            <summary>Log message &apos;callback not found on component instances&apos; incorrectly shown if exception occurs during calling of callback method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pderop">Pierre De Rop</assignee>
                                    <reporter username="JeroenDaanen">Jeroen Daanen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Dec 2016 10:07:16 +0000</created>
                <updated>Sun, 4 Dec 2016 23:31:36 +0000</updated>
                            <resolved>Sun, 4 Dec 2016 23:31:36 +0000</resolved>
                                    <version>org.apache.felix.dependencymanager-r8</version>
                                                    <component>Dependency Manager</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15720795" author="pderop" created="Sun, 4 Dec 2016 23:31:36 +0000"  >&lt;p&gt;Hi Jeroen;&lt;/p&gt;

&lt;p&gt;I committed the patch in revision 1772584. and slightly modified it in order to reuse the &quot;callbackFound&quot; variable, which I have reset to true in case an invocation target occurs. Also, I think the other exceptions (IllegalArgumentException , or IllegalAccessException) can be considered as a  callback not found.&lt;/p&gt;

&lt;p&gt;thank you&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i370jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>