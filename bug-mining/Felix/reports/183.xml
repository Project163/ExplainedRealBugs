<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:06:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-599] Service Registration Lock: Do not release not-owned lock and don&apos;t wait so long for the lock</title>
                <link>https://issues.apache.org/jira/browse/FELIX-599</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;While fixing a asynchronicity issue in the AbstractComponentManager class, I introduced a locking mechanism for the service registration field. This implementation has two issues:&lt;/p&gt;

&lt;p&gt;(1) The unlockServiceRegistration lock simply releases the lock regardless of who is calling the method. This causes wrong threads to be able to release the lock of other threads. A secondary to this issue is, that the unlockServiceRegistration method is called by the getServiceReference() and unregisterComponentService methods, regardless of whether the lock could be acquired or not.&lt;/p&gt;

&lt;p&gt;(2) When trying to acquire the lock, the lockServiceRegistration method tries to acquire the lock and if not possible waits for 10 * 10 seconds (at most) until giving up. This is probably too much. If the lock cannot be acquired within a short time frame, chances are, the lock will never be acquirable. Therefore, this time frame is cut down to 10 * 1 second before failing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12397674">FELIX-599</key>
            <summary>Service Registration Lock: Do not release not-owned lock and don&apos;t wait so long for the lock</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="fmeschbe">Felix Meschberger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jun 2008 13:10:30 +0000</created>
                <updated>Tue, 10 Jun 2008 08:40:14 +0000</updated>
                            <resolved>Tue, 10 Jun 2008 08:40:14 +0000</resolved>
                                    <version>scr-1.0.2</version>
                                    <fixVersion>scr-1.0.2</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12603037" author="fmeschbe" created="Fri, 6 Jun 2008 13:22:10 +0000"  >&lt;p&gt;Mutliple changes to service registration locking:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;only log once (at info level) when waiting for the lock release&lt;/li&gt;
	&lt;li&gt;wait at most 10 * 1 seconds&lt;/li&gt;
	&lt;li&gt;unlock only allowed for the lock owner&lt;/li&gt;
	&lt;li&gt;prevent calling the unlock method if lock acquisition failed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Fixed in Rev. 663930.&lt;/p&gt;</comment>
                            <comment id="12603804" author="fmeschbe" created="Tue, 10 Jun 2008 08:40:14 +0000"  >&lt;p&gt;This has been implemented and can be closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58389</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0w1l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>185062</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>