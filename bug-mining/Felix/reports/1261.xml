<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:22:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2851] Resolution problems after a fragment can&apos;t be resolved</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2851</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;When a fragment can&apos;t be resolved correctly, his removal isn&apos;t properly handled.&lt;br/&gt;
The following patch seems to fix the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/framework/src/main/java/org/apache/felix/framework/FelixResolverState.java b/framework/src/main/java/org/apache/felix/framework/FelixResolverState.java
index 534d56f..ca74100 100644
--- a/framework/src/main/java/org/apache/felix/framework/FelixResolverState.java
+++ b/framework/src/main/java/org/apache/felix/framework/FelixResolverState.java
@@ -157,8 +157,9 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FelixResolverState &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Resolver.ResolverState
 
     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void detachFragment(Module host, Module fragment)
     {
-        List&amp;lt;Module&amp;gt; fragments = ((ModuleImpl) host).getFragments();
+        List&amp;lt;Module&amp;gt; fragments = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;Module&amp;gt;(((ModuleImpl) host).getFragments());
         fragments.remove(fragment);
+        removeFragment(fragment);
         &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
         {
             ((ModuleImpl) host).attachFragments(fragments);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first line is needed as the attachFragments() processing is screwed because the original list of modified.&lt;br/&gt;
The second line will actually remove packages exported by the fragment from the capabilities set.&lt;/p&gt;

&lt;p&gt;I&apos;d like to apply that on to the 3.0.x branch and trunk (eventually), so please review.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12499094">FELIX-2851</key>
            <summary>Resolution problems after a fragment can&apos;t be resolved</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="gnodet">Guillaume Nodet</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Feb 2011 22:45:31 +0000</created>
                <updated>Mon, 21 Feb 2011 09:28:13 +0000</updated>
                            <resolved>Mon, 21 Feb 2011 09:28:13 +0000</resolved>
                                                    <fixVersion>framework-3.0.9</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12996633" author="rickhall" created="Fri, 18 Feb 2011 22:52:42 +0000"  >&lt;p&gt;Again, this code won&apos;t even exist next week, so I&apos;m not sure it makes sense to bother with it right now. However, if you have some use case that is impacted by this bug, keep it around so we can test it on the new resolver next week.&lt;/p&gt;</comment>
                            <comment id="12996653" author="gnt" created="Fri, 18 Feb 2011 23:27:45 +0000"  >&lt;p&gt; I do get that point. However, I  I think the resolver rewrite is quite a big change, so it may introduce different behaviors.  We already had problems when trying to upgrade from 3.0.2 to 3.0.8 so I wonder if creating a 3.0.9 bug fix release before you put in the new resolver would be a good idea.&lt;/p&gt;</comment>
                            <comment id="12996661" author="rickhall" created="Fri, 18 Feb 2011 23:49:32 +0000"  >&lt;p&gt;I am certain there will be different behavior. Still, if we end up needing to do a bug fix release for some reason, we can always branch from the 3.0.8 release tag.&lt;/p&gt;

&lt;p&gt;However, I&apos;m not against a 3.0.9 release. We can branch trunk right now temporarily to prepare a 3.0.9 release. Once 3.0.9 is released, the branch can be deleted and if any subsequent bug fix releases are needed, they can be branched from the 3.0.9 release tag.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40410</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aqb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60535</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>