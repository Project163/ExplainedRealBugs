<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:55:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4571] NullPointerException when using Repository impl with Aries subsystem impl</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4571</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I get the following while trying to use the OSGi  Repository service  implementation with Apache Aries subsystems implementation:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.felix.bundlerepository.impl.LazyHashMap.put(LazyHashMap.java:88)&lt;br/&gt;
	at org.apache.felix.bundlerepository.impl.OSGiRepositoryImpl.newOSGiContentCapability(OSGiRepositoryImpl.java:155)&lt;br/&gt;
	at org.apache.felix.bundlerepository.impl.FelixResourceAdapter.getCapabilities(FelixResourceAdapter.java:50)&lt;br/&gt;
	at org.apache.felix.resolver.Util.isFragment(Util.java:62)&lt;br/&gt;
	at org.apache.felix.resolver.Candidates.processCandidates(Candidates.java:606)&lt;br/&gt;
	at org.apache.felix.resolver.Candidates.populateResource(Candidates.java:273)&lt;br/&gt;
	at org.apache.felix.resolver.Candidates.populate(Candidates.java:161)&lt;br/&gt;
	at org.apache.felix.resolver.ResolverImpl.resolve(ResolverImpl.java:146)&lt;br/&gt;
	at org.apache.aries.subsystem.core.internal.SubsystemResource.computeDependencies(SubsystemResource.java:410)&lt;br/&gt;
	at org.apache.aries.subsystem.core.internal.SubsystemResource.computeDependencies(SubsystemResource.java:393)&lt;br/&gt;
	at org.apache.aries.subsystem.core.internal.SubsystemResource.&amp;lt;init&amp;gt;(SubsystemResource.java:101)&lt;br/&gt;
	at org.apache.aries.subsystem.core.internal.SubsystemResource.&amp;lt;init&amp;gt;(SubsystemResource.java:92)&lt;br/&gt;
	at org.apache.aries.subsystem.core.internal.InstallAction.createSubsystemResource(InstallAction.java:114)&lt;br/&gt;
	at org.apache.aries.subsystem.core.internal.InstallAction.run(InstallAction.java:52)&lt;/p&gt;

&lt;p&gt;It appears a null capability size attribute is causing the exception:&lt;/p&gt;

&lt;p&gt; contentAttrs.put(ContentNamespace.CAPABILITY_SIZE_ATTRIBUTE, resource.getSize());&lt;/p&gt;

&lt;p&gt;I&apos;m not sure why it is null or if it is not allowed to be null.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12728592">FELIX-4571</key>
            <summary>NullPointerException when using Repository impl with Aries subsystem impl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="tjwatson">Tom Watson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Jul 2014 14:34:47 +0000</created>
                <updated>Tue, 17 Mar 2015 06:52:04 +0000</updated>
                            <resolved>Mon, 22 Sep 2014 14:57:48 +0000</resolved>
                                                    <fixVersion>bundlerepository-2.0.4</fixVersion>
                                    <component>Bundle Repository (OBR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14068577" author="bosschaert" created="Mon, 21 Jul 2014 14:42:46 +0000"  >&lt;p&gt;I&apos;ve used it successfully with Aries Subsystems, so you&apos;re probably doing something a little differently than me. Do you have any specific instructions to reproduce?&lt;/p&gt;

&lt;p&gt;BTW I assume this is with bundlerepository 2.0.2?&lt;/p&gt;</comment>
                            <comment id="14070199" author="tjwatson" created="Tue, 22 Jul 2014 12:31:02 +0000"  >&lt;p&gt;Yes, bundlerepository 2.0.2.  I will have to get an isolated testcase to reproduce.  I&apos;m pretty sure it involves using the org.osgi.service.obr.RepositoryAdmin.addRepository(URL) method.  I need to investigate the scenario more and figure out what the inputs are that cause the NPE.&lt;/p&gt;</comment>
                            <comment id="14073556" author="tjwatson" created="Thu, 24 Jul 2014 19:32:26 +0000"  >&lt;p&gt;Here is a test bundle to reproduce.  It uses a very simple old style obr XML file and then does a search for all resources uses the osgi.identity namespace and then simply calls getCapabilities(null) on each resource.  The NPE happens when trying to fill out the information for the osgi.content capability.&lt;/p&gt;</comment>
                            <comment id="14073567" author="tjwatson" created="Thu, 24 Jul 2014 19:48:05 +0000"  >&lt;p&gt;Attach test again, this time including the necessary resource bundle embedded in the test bundle.&lt;/p&gt;</comment>
                            <comment id="14143271" author="bosschaert" created="Mon, 22 Sep 2014 14:57:48 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1626798&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1626798&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tjwatson&quot; class=&quot;user-hover&quot; rel=&quot;tjwatson&quot;&gt;tjwatson&lt;/a&gt; could you please double check that this fixes it for your scenario?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12657656" name="obr.test_1.0.0.201407241433.jar" size="6950" author="tjwatson" created="Thu, 24 Jul 2014 19:48:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xzb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406687</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>