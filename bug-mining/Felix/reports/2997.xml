<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:12:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5866] scr does not respect the log level set in LoggerAdmin</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5866</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;With R7 logging, configuration of logging levels takes place through the LoggerAdmin.&lt;/p&gt;

&lt;p&gt;SCR first checks it&apos;s own log level configuration ignoring the level set in LoggerAdmin.&lt;/p&gt;

&lt;p&gt;I believe that when r7 logging is enabled, the SCR should first check the LoggerAdmin level and only then fallback to the SCR configuration.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13165623">FELIX-5866</key>
            <summary>scr does not respect the log level set in LoggerAdmin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="rotty3000">Raymond Aug&#233;</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jun 2018 17:05:07 +0000</created>
                <updated>Mon, 6 Aug 2018 15:06:27 +0000</updated>
                            <resolved>Wed, 13 Jun 2018 13:58:05 +0000</resolved>
                                                    <fixVersion>scr-2.1.2</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16510107" author="cziegeler" created="Tue, 12 Jun 2018 19:56:09 +0000"  >&lt;p&gt;I&apos;m not sure if it should work this way. It has always been like this, a two level check, first the SCR config is checked and then the logger is checked. So if the logger is set to DEBUG and the SCR config is set to INFO, you won&apos;t get debug messages.&lt;/p&gt;</comment>
                            <comment id="16510119" author="rotty3000" created="Tue, 12 Jun 2018 20:05:44 +0000"  >&lt;p&gt;But my understanding of LogService 1.4 LoggerAdmin is to control the logging configuration. It doesn&apos;t make sense to me to have to configure logging in two different places. I also don&apos;t think it will make sense to others.&lt;/p&gt;

&lt;p&gt;BTW, ConfigurationAdmin is working perfectly with Log service 1.4 with no external configuration needed so I don&apos;t think SCR is a common case.&lt;/p&gt;</comment>
                            <comment id="16510123" author="rotty3000" created="Tue, 12 Jun 2018 20:07:07 +0000"  >&lt;p&gt;I&apos;m also not suggesting changing how pre r7 logging works, just r7+.&lt;/p&gt;</comment>
                            <comment id="16510125" author="rotty3000" created="Tue, 12 Jun 2018 20:07:57 +0000"  >&lt;p&gt;In fact SCR could use LoggerAdmin to set it&apos;s log level from it&apos;s configuration if it so chooses, as long as it uses LoggerAdmin to handle the level checking.&lt;/p&gt;</comment>
                            <comment id="16510128" author="cziegeler" created="Tue, 12 Jun 2018 20:08:32 +0000"  >&lt;p&gt;But it&apos;s the same issue with pre r7 logging - why should it work different in the two cases?&lt;/p&gt;</comment>
                            <comment id="16510134" author="rotty3000" created="Tue, 12 Jun 2018 20:10:32 +0000"  >&lt;p&gt;Because prior to r7 there was no management API for logging, which is why SCR had to have it&apos;s own configuration setting in the first place.&lt;/p&gt;</comment>
                            <comment id="16510140" author="cziegeler" created="Tue, 12 Jun 2018 20:13:53 +0000"  >&lt;p&gt;But it is using log levels and uses those in pre r7 with the LogService and if the LogService is not blindly logging everything, it&apos;s exactly the same&lt;/p&gt;</comment>
                            <comment id="16510150" author="rotty3000" created="Tue, 12 Jun 2018 20:20:05 +0000"  >&lt;p&gt;I understand that it&apos;s using the same levels. It&apos;s not the levels which are the issue, the issue is that if I use LoggerAdmin to set the log level for SCR, it&apos;s ignored completely, which is unexpected.&lt;/p&gt;</comment>
                            <comment id="16510154" author="rotty3000" created="Tue, 12 Jun 2018 20:25:50 +0000"  >&lt;p&gt;for example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;&#160;&#160; @Reference
&#160;&#160; &#160;void setLoggerAdmin(LoggerAdmin loggerAdmin) {
&#160;&#160; &#160;&#160;&#160; &#160;LoggerContext loggerContext = loggerAdmin.getLoggerContext(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.felix.scr&quot;&lt;/span&gt;);
&#160;&#160; &#160;&#160;&#160; &#160;
&#160;&#160; &#160;&#160;&#160; &#160;Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, LogLevel&amp;gt; levels = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, LogLevel&amp;gt;();
&#160;&#160; &#160;&#160;&#160; &#160;levels.put(Logger.ROOT_LOGGER_NAME, LogLevel.DEBUG);
&#160;&#160; &#160;&#160;&#160; &#160;
&#160;&#160; &#160;&#160;&#160; &#160;loggerContext.setLogLevels(levels);
&#160;&#160; &#160;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;this should put SCR into debug, but it doesn&apos;t.&lt;/p&gt;</comment>
                            <comment id="16510158" author="rotty3000" created="Tue, 12 Jun 2018 20:28:32 +0000"  >&lt;p&gt;I could certainly understand if SCR was not bound to a r7 log service, but it is!&lt;/p&gt;</comment>
                            <comment id="16510161" author="cziegeler" created="Tue, 12 Jun 2018 20:29:37 +0000"  >&lt;p&gt;oh I see, now I understand &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ...yes makes sense&lt;/p&gt;</comment>
                            <comment id="16510181" author="githubbot" created="Tue, 12 Jun 2018 20:44:07 +0000"  >&lt;p&gt;GitHub user rotty3000 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/142&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5866&quot; title=&quot;scr does not respect the log level set in LoggerAdmin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5866&quot;&gt;&lt;del&gt;FELIX-5866&lt;/del&gt;&lt;/a&gt; scr does not respect the log level set in LoggerAdmin&lt;/p&gt;

&lt;p&gt;    Signed-off-by: Raymond Auge &amp;lt;rotty3000@apache.org&amp;gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rotty3000/felix&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rotty3000/felix&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5866&quot; title=&quot;scr does not respect the log level set in LoggerAdmin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5866&quot;&gt;&lt;del&gt;FELIX-5866&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/142.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/142.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #142&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ec5bd8e0d2b4b87207a2b176912c948b882d4332&lt;br/&gt;
Author: Raymond Auge &amp;lt;rotty3000@...&amp;gt;&lt;br/&gt;
Date:   2018-06-12T17:33:52Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5866&quot; title=&quot;scr does not respect the log level set in LoggerAdmin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5866&quot;&gt;&lt;del&gt;FELIX-5866&lt;/del&gt;&lt;/a&gt; scr does not respect the log level set in LoggerAdmin&lt;/p&gt;

&lt;p&gt;    Signed-off-by: Raymond Auge &amp;lt;rotty3000@apache.org&amp;gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16510669" author="cziegeler" created="Wed, 13 Jun 2018 06:10:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rotty3000&quot; class=&quot;user-hover&quot; rel=&quot;rotty3000&quot;&gt;rotty3000&lt;/a&gt; I&apos;ve committed a slightly different variant in rev 1833438 . Please cross check. It&apos;s not necessary a better solution but keeps the reference to the scr config in a single place&lt;/p&gt;</comment>
                            <comment id="16511176" author="rotty3000" created="Wed, 13 Jun 2018 13:58:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; that worked for me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16511178" author="githubbot" created="Wed, 13 Jun 2018 13:58:46 +0000"  >&lt;p&gt;Github user rotty3000 closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/142&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3us33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>