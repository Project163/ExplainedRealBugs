<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:08:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-807] conversion of JAR into bundle fails if there are classes is the default name space</title>
                <link>https://issues.apache.org/jira/browse/FELIX-807</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The conversion of JAR into bundle fails if there are classes is the default name space, like hsqldb does.&lt;/p&gt;

&lt;p&gt;Try this pom.xml:&lt;/p&gt;

&lt;p&gt;&amp;lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;br/&gt;
  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 &lt;a href=&quot;http://maven.apache.org/maven-v4_0_0.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/maven-v4_0_0.xsd&lt;/a&gt;&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;&lt;br/&gt;
  &amp;lt;groupId&amp;gt;bug.maven.plugin&amp;lt;/groupId&amp;gt;&lt;br/&gt;
  &amp;lt;artifactId&amp;gt;felix-bundle&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
  &amp;lt;packaging&amp;gt;bundle&amp;lt;/packaging&amp;gt;&lt;br/&gt;
  &amp;lt;version&amp;gt;1.0-SNAPSHOT&amp;lt;/version&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;hsqldb&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;url&amp;gt;&lt;a href=&quot;http://maven.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org&lt;/a&gt;&amp;lt;/url&amp;gt;&lt;br/&gt;
  &amp;lt;build&amp;gt;&lt;br/&gt;
    &amp;lt;plugins&amp;gt;&lt;br/&gt;
      &amp;lt;plugin&amp;gt;&lt;br/&gt;
        &amp;lt;artifactId&amp;gt;maven-dependency-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
        &amp;lt;executions&amp;gt;&lt;br/&gt;
          &amp;lt;execution&amp;gt;&lt;br/&gt;
            &amp;lt;id&amp;gt;copy-dependencies&amp;lt;/id&amp;gt;&lt;br/&gt;
            &amp;lt;phase&amp;gt;package&amp;lt;/phase&amp;gt;&lt;br/&gt;
            &amp;lt;goals&amp;gt;&lt;br/&gt;
              &amp;lt;goal&amp;gt;copy-dependencies&amp;lt;/goal&amp;gt;&lt;br/&gt;
            &amp;lt;/goals&amp;gt;&lt;br/&gt;
          &amp;lt;/execution&amp;gt;&lt;br/&gt;
        &amp;lt;/executions&amp;gt;&lt;br/&gt;
      &amp;lt;/plugin&amp;gt;&lt;br/&gt;
      &amp;lt;plugin&amp;gt;&lt;br/&gt;
        &amp;lt;groupId&amp;gt;org.apache.felix&amp;lt;/groupId&amp;gt;&lt;br/&gt;
        &amp;lt;artifactId&amp;gt;maven-bundle-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
        &amp;lt;executions&amp;gt;&lt;br/&gt;
          &amp;lt;execution&amp;gt;&lt;br/&gt;
            &amp;lt;id&amp;gt;bundle-manifest&amp;lt;/id&amp;gt;&lt;br/&gt;
            &amp;lt;phase&amp;gt;process-classes&amp;lt;/phase&amp;gt;&lt;br/&gt;
            &amp;lt;goals&amp;gt;&lt;br/&gt;
              &amp;lt;goal&amp;gt;manifest&amp;lt;/goal&amp;gt;&lt;br/&gt;
            &amp;lt;/goals&amp;gt;&lt;br/&gt;
          &amp;lt;/execution&amp;gt;&lt;br/&gt;
        &amp;lt;/executions&amp;gt;&lt;br/&gt;
        &amp;lt;extensions&amp;gt;true&amp;lt;/extensions&amp;gt;&lt;br/&gt;
        &amp;lt;configuration&amp;gt;&lt;br/&gt;
          &amp;lt;manifestLocation&amp;gt;META-INF&amp;lt;/manifestLocation&amp;gt;&lt;br/&gt;
          &amp;lt;instructions&amp;gt;&lt;br/&gt;
            &amp;lt;Bundle-ClassPath&amp;gt;target/dependency/hsqldb-1.8.0.7.jar&amp;lt;/Bundle-ClassPath&amp;gt;&lt;br/&gt;
            &amp;lt;Import-Package&amp;gt;*&amp;lt;/Import-Package&amp;gt;&lt;br/&gt;
            &amp;lt;Export-Package&amp;gt;*&amp;lt;/Export-Package&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-Dependency&amp;gt;*;scope=compile|runtime;inline=false&amp;lt;/Embed-Dependency&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-Directory&amp;gt;target/dependency&amp;lt;/Embed-Directory&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-StripGroup&amp;gt;true&amp;lt;/Embed-StripGroup&amp;gt;&lt;br/&gt;
          &amp;lt;/instructions&amp;gt;&lt;br/&gt;
        &amp;lt;/configuration&amp;gt;&lt;br/&gt;
      &amp;lt;/plugin&amp;gt;&lt;br/&gt;
    &amp;lt;/plugins&amp;gt;&lt;br/&gt;
  &amp;lt;/build&amp;gt;&lt;br/&gt;
  &amp;lt;dependencies&amp;gt;&lt;br/&gt;
    &amp;lt;dependency&amp;gt;&lt;br/&gt;
      &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;&lt;br/&gt;
      &amp;lt;artifactId&amp;gt;junit&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
      &amp;lt;version&amp;gt;3.8.1&amp;lt;/version&amp;gt;&lt;br/&gt;
      &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
    &amp;lt;dependency&amp;gt;&lt;br/&gt;
      &amp;lt;groupId&amp;gt;hsqldb&amp;lt;/groupId&amp;gt;&lt;br/&gt;
      &amp;lt;artifactId&amp;gt;hsqldb&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
      &amp;lt;version&amp;gt;1.8.0.7&amp;lt;/version&amp;gt;&lt;br/&gt;
      &amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;&lt;br/&gt;
    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
  &amp;lt;/dependencies&amp;gt;&lt;br/&gt;
&amp;lt;/project&amp;gt; &lt;/p&gt;

&lt;p&gt;To fix this I suggest a modification inside biz.aQute.bndlib.bndlib-0.0.255.jar inside class aQute.lib.osgiProcessor:&lt;/p&gt;

&lt;p&gt;	private void analyzeJar(Jar jar, String prefix, Map classSpace,&lt;br/&gt;
			Map contained, Map referred, Map uses) throws IOException {&lt;br/&gt;
		next: for (Iterator r = jar.getResources().keySet().iterator(); r&lt;br/&gt;
				.hasNext()&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; {&lt;br/&gt;
			String path = (String) r.next();&lt;br/&gt;
			if (path.startsWith(prefix)) {&lt;br/&gt;
				String relativePath = path.substring(prefix.length());&lt;br/&gt;
				String pack = getPackage(relativePath);&lt;/p&gt;

&lt;p&gt;				if (pack != null &amp;amp;&amp;amp; !contained.containsKey(pack)) {&lt;br/&gt;
					if (!(pack.equals(&quot;.&quot;) || isMetaData(relativePath))) {&lt;/p&gt;

&lt;p&gt;The last line is the line where the default name space &quot;.&quot; is expicit excluded. I don&apos;t understand why, but for class files it must be enabled. I suggest&lt;/p&gt;

&lt;p&gt;				if (pack != null &amp;amp;&amp;amp; !contained.containsKey(pack)) {&lt;br/&gt;
					if (!(pack.equals(&quot;.&quot;) || realtivePath.endsWith(&quot;.class&quot;) || isMetaData(relativePath))) {&lt;/p&gt;

&lt;p&gt;to solve this issue.&lt;/p&gt;</description>
                <environment>any</environment>
        <key id="12407958">FELIX-807</key>
            <summary>conversion of JAR into bundle fails if there are classes is the default name space</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pkriens">Peter Kriens</assignee>
                                    <reporter username="bebbo">Stefan Franke</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Nov 2008 20:42:02 +0000</created>
                <updated>Thu, 12 Mar 2009 08:05:00 +0000</updated>
                            <resolved>Mon, 2 Feb 2009 10:06:49 +0000</resolved>
                                    <version>maven-bundle-plugin-1.4.3</version>
                                    <fixVersion>maven-bundle-plugin-2.0.0</fixVersion>
                                    <component>Maven Bundle Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="1800">0.5h</timeoriginalestimate>
                            <timeestimate seconds="1800">0.5h</timeestimate>
                                        <comments>
                            <comment id="12645685" author="mcculls" created="Fri, 7 Nov 2008 04:46:50 +0000"  >&lt;p&gt;I have not looked at this closely, but please note that it&apos;s a bad idea for a bundle to export the default package.&lt;br/&gt;
This is why Peter explicitly checks the default namespace - probably it should be a warning, not an error, and&lt;br/&gt;
it should definitely allow adding of classes in the default namespace if you&apos;re &lt;em&gt;not&lt;/em&gt; going to export them.&lt;/p&gt;

&lt;p&gt;but exporting of classes in the default namespace should definitely be flagged, so your patch isn&apos;t quite right&lt;/p&gt;

&lt;p&gt;if you want to workaround this error, you can tell BND to ignore it and create the bundle anyway:&lt;/p&gt;

&lt;p&gt;   &amp;lt;_failok&amp;gt;true&amp;lt;/_failok&amp;gt;&lt;/p&gt;

&lt;p&gt;BTW, the bundleplugin docs:&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html#ApacheFelixMavenBundlePlugin(BND)-EmbedDependencyandExportPackage&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html#ApacheFelixMavenBundlePlugin(BND)-EmbedDependencyandExportPackage&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;clearly state why you shouldn&apos;t use &amp;lt;Export-Package&amp;gt;*&amp;lt;/Export-Package&amp;gt; if you&apos;re embedding dependencies,&lt;br/&gt;
because you &lt;em&gt;will&lt;/em&gt; end up duplicating content, especially when you&apos;re embedding jar files with &quot;inline=false&quot;.&lt;/p&gt;

&lt;p&gt;if you look at the jar generated by your original pom it contains both the embedded jar files and their contents,&lt;br/&gt;
because the Embed-Dependency instruction tells BND to embed the jars and the Export-Package instruction&lt;br/&gt;
tells it to pull in everything on the compilation classpath (ie. inline all classfiles)&lt;/p&gt;

&lt;p&gt;few other things: I don&apos;t think you need the extra bundle:manifest goal, the Import-Package defaults to * so you&lt;br/&gt;
can remove that, and Embed-Dependency takes care of updating Bundle-ClassPath with any embedded jars.&lt;/p&gt;

&lt;p&gt;so you could trim your instructions to something like the following, perhaps:&lt;/p&gt;

&lt;p&gt;          &amp;lt;instructions&amp;gt;&lt;br/&gt;
            &amp;lt;_exportcontents&amp;gt;org.hsqldb.*&amp;lt;/_exportcontents&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-Dependency&amp;gt;*;scope=compile|runtime;type=!pom;inline=false&amp;lt;/Embed-Dependency&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-Directory&amp;gt;target/dependency&amp;lt;/Embed-Directory&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-StripGroup&amp;gt;true&amp;lt;/Embed-StripGroup&amp;gt;&lt;br/&gt;
            &amp;lt;_failok&amp;gt;true&amp;lt;/_failok&amp;gt;&lt;br/&gt;
          &amp;lt;/instructions&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12645694" author="bebbo" created="Fri, 7 Nov 2008 06:04:30 +0000"  >&lt;p&gt;since there is a workaround using&lt;/p&gt;

&lt;p&gt;  &amp;lt;_failok&amp;gt;true&amp;lt;/_failok&amp;gt; &lt;/p&gt;

&lt;p&gt;this is no longer urgent.&lt;/p&gt;</comment>
                            <comment id="12645696" author="bebbo" created="Fri, 7 Nov 2008 06:14:51 +0000"  >&lt;p&gt;Thanks for your input Stuart.&lt;/p&gt;

&lt;p&gt;I agree on the default namespace, but there are JARs haveing classes in the default name space like hsqldb and I would like to have one pom.xml to convert all into a bundle. And I even dont want to export the default name space!&lt;/p&gt;

&lt;p&gt;The   &amp;lt;_failok&amp;gt;true&amp;lt;/_failok&amp;gt; suppresses the abortion and thus it works now. And _failok is not mentioned in   &lt;a href=&quot;http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html#ApacheFelixMavenBundlePlugin(BND)-EmbedDependencyandExportPackage&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html#ApacheFelixMavenBundlePlugin(BND)-EmbedDependencyandExportPackage&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;so I will use now either&lt;/p&gt;

&lt;p&gt;            &amp;lt;Import-Package&amp;gt;!*&amp;lt;/Import-Package&amp;gt;&lt;br/&gt;
            &amp;lt;Export-Package&amp;gt;org.hsqldb.*&amp;lt;/Export-Package&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-Dependency&amp;gt;hsqldb*;scope=compile|runtime;inline=true&amp;lt;/Embed-Dependency&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-Directory&amp;gt;target/dependency&amp;lt;/Embed-Directory&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-StripGroup&amp;gt;true&amp;lt;/Embed-StripGroup&amp;gt;&lt;br/&gt;
            &amp;lt;_failok&amp;gt;true&amp;lt;/_failok&amp;gt;&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;            &amp;lt;Import-Package&amp;gt;!*&amp;lt;/Import-Package&amp;gt;&lt;br/&gt;
            &amp;lt;_exportcontents&amp;gt;org.hsqldb.*&amp;lt;/_exportcontents&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-Dependency&amp;gt;hsqldb*;scope=compile|runtime;inline=false&amp;lt;/Embed-Dependency&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-Directory&amp;gt;target/dependency&amp;lt;/Embed-Directory&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-StripGroup&amp;gt;true&amp;lt;/Embed-StripGroup&amp;gt;&lt;br/&gt;
            &amp;lt;_failok&amp;gt;true&amp;lt;/_failok&amp;gt;&lt;/p&gt;

&lt;p&gt;and the tags starting with an underscore still look wrong.&lt;/p&gt;

&lt;p&gt;IMHO there should be no need for &amp;lt;_exportcontents&amp;gt;: The hint &quot;inline=false&quot; is enough information to avoid unpacking the JAR(s)&lt;br/&gt;
Also &amp;lt;_failok&amp;gt; is ugly. It should run smooth without.&lt;/p&gt;</comment>
                            <comment id="12645709" author="mcculls" created="Fri, 7 Nov 2008 07:50:28 +0000"  >&lt;p&gt;&amp;gt; I agree on the default namespace, but there are JARs haveing classes in the default name space like hsqldb and I would like to have one pom.xml to convert all into a bundle. And I even dont want to export the default name space!&lt;/p&gt;

&lt;p&gt;yes - I totally agree that you should be allowed to have classes in the default namespace, as long as you don&apos;t export them&lt;/p&gt;

&lt;p&gt;btw, if you don&apos;t want to export the default namespace then definitely don&apos;t use &amp;lt;Export-Package&amp;gt;*&amp;lt;/Export-Package&amp;gt; as that exports everything!&lt;/p&gt;

&lt;p&gt;&amp;gt; The   &amp;lt;_failok&amp;gt;true&amp;lt;/_failok&amp;gt; suppresses the abortion and thus it works now. And _failok is not mentioned in   &lt;a href=&quot;http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html#ApacheFelixMavenBundlePlugin(BND)-EmbedDependencyandExportPackage&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html#ApacheFelixMavenBundlePlugin(BND)-EmbedDependencyandExportPackage&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;true, the bundleplugin docs don&apos;t describe all of the possible BND instructions (as more are added over time) - it does point to the BND docs at &lt;a href=&quot;http://aqute.biz/Code/Bnd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://aqute.biz/Code/Bnd&lt;/a&gt; in the first paragraph of the page and later on when it discusses certain instructions, but failok is one that should probably be mentioned explicitly&lt;/p&gt;

&lt;p&gt;&amp;gt; so I will use now either&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt;            &amp;lt;Import-Package&amp;gt;!*&amp;lt;/Import-Package&amp;gt;&lt;/p&gt;

&lt;p&gt;hmm, here you&apos;re telling BND not to import anything at all, which means you&apos;ll get exceptions at runtime because hsqldb needs various javax.* packages to work - the OSGi framework only boot delegates java.* packages, so you need to import javax.* to see the JVM packages exported via the system bundle&lt;/p&gt;

&lt;p&gt;FYI, unless you&apos;re adding attributes (like resolution:=optional for optional imports) or version ranges (to limit resolution to a specific API level) then it&apos;s often best to keep the default Import-Package instruction to * ... then BND will automatically calculate the correct imports for you (see &lt;a href=&quot;http://aqute.biz/Code/Bnd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://aqute.biz/Code/Bnd&lt;/a&gt; for details)&lt;/p&gt;

&lt;p&gt;&amp;gt;            &amp;lt;Export-Package&amp;gt;org.hsqldb.*&amp;lt;/Export-Package&amp;gt;&lt;br/&gt;
&amp;gt;            &amp;lt;Embed-Dependency&amp;gt;hsqldb*;scope=compile|runtime;inline=true&amp;lt;/Embed-Dependency&amp;gt;&lt;/p&gt;

&lt;p&gt;again, please do not use overlapping Export-Package and Embed-Dependency instructions!&lt;/p&gt;

&lt;p&gt;  &amp;lt;Export-Package&amp;gt; tells BND to add matching packages to the bundle and export them (ie. make them visible to other bundles)&lt;/p&gt;

&lt;p&gt;  &amp;lt;Private-Package&amp;gt; adds matching packages to the bundle but doesn&apos;t export them (ie. they are not then visible to other bundles)&lt;/p&gt;

&lt;p&gt;  &amp;lt;Embed-Dependency&amp;gt; tells BND to embed or inline the contents of matching dependencies, but doesn&apos;t specify their visibility&lt;/p&gt;

&lt;p&gt;  &amp;lt;_exportcontents&amp;gt; tells BND to make certain packages visible from the bundle &lt;b&gt;without&lt;/b&gt; changing the contents of the bundle &lt;/p&gt;

&lt;p&gt;so if you&apos;re using Embed-Dependency then just use exportcontents to mark which packages you want to export ... unless you have classes in the compilation classpath (for example locally compiled classes) that you also want to add to the bundle, in which case you use Private-Package or Export-Package with the relevant package name to pull them in as well&lt;/p&gt;

&lt;p&gt;&amp;gt;            &amp;lt;Embed-Directory&amp;gt;target/dependency&amp;lt;/Embed-Directory&amp;gt;&lt;br/&gt;
&amp;gt;            &amp;lt;Embed-StripGroup&amp;gt;true&amp;lt;/Embed-StripGroup&amp;gt;&lt;br/&gt;
&amp;gt;            &amp;lt;_failok&amp;gt;true&amp;lt;/_failok&amp;gt;&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; or&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt;            &amp;lt;Import-Package&amp;gt;!*&amp;lt;/Import-Package&amp;gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;see above&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&amp;gt;            &amp;lt;_exportcontents&amp;gt;org.hsqldb.*&amp;lt;/_exportcontents&amp;gt;&lt;br/&gt;
&amp;gt;            &amp;lt;Embed-Dependency&amp;gt;hsqldb*;scope=compile|runtime;inline=false&amp;lt;/Embed-Dependency&amp;gt;&lt;/p&gt;

&lt;p&gt;this is correct - you can also use &quot;inline=true&quot; and exportcontents, because exportcontents acts just like Export-Package except it doesn&apos;t change the actual content of the bundle (doesn&apos;t pull in classes)&lt;/p&gt;

&lt;p&gt;&amp;gt;            &amp;lt;Embed-Directory&amp;gt;target/dependency&amp;lt;/Embed-Directory&amp;gt;&lt;br/&gt;
&amp;gt;            &amp;lt;Embed-StripGroup&amp;gt;true&amp;lt;/Embed-StripGroup&amp;gt;&lt;br/&gt;
&amp;gt;            &amp;lt;_failok&amp;gt;true&amp;lt;/_failok&amp;gt;&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; and the tags starting with an underscore still look wrong.&lt;/p&gt;

&lt;p&gt;wrong in what way?  bundleplugin works on top of BND, and a number of BND instructions like failok happen to start with a dash &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/forbidden.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; like -failok&lt;/p&gt;

&lt;p&gt;unfortunately in XML &amp;lt;-failok&amp;gt; is not a valid tag because of the leading dash, so we are forced to use &amp;lt;_failok&amp;gt; instead... it&apos;s the same with -exportcontents / &amp;lt;_exportcontents&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;gt; IMHO there should be no need for &amp;lt;_exportcontents&amp;gt;: The hint &quot;inline=false&quot; is enough information to avoid unpacking the JAR(s)&lt;/p&gt;

&lt;p&gt;this has nothing to do with unpacking the jar... exportcontents just says what packages you want to make visible to other bundles without changing the contents (see above for the full description of what the different instructions do). If you just use Embed-Dependency then you&apos;re telling BND to add the contents of the jar (or the jar itself) but don&apos;t say which packages should be made public&lt;/p&gt;

&lt;p&gt;so you can leave out exportcontents, but then you won&apos;t be exporting any packages (this is ok if you&apos;re not expecting other bundles to use the packages)&lt;/p&gt;

&lt;p&gt;&amp;gt; Also &amp;lt;_failok&amp;gt; is ugly. It should run smooth without.&lt;/p&gt;

&lt;p&gt;of course, that&apos;s why it&apos;s called a workaround &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12645783" author="rickhall" created="Fri, 7 Nov 2008 15:02:06 +0000"  >&lt;p&gt;In OSGi there is no way to export the default package, since it has no name and exports need a name.&lt;/p&gt;</comment>
                            <comment id="12654473" author="bebbo" created="Mon, 8 Dec 2008 17:31:11 +0000"  >&lt;p&gt;Again:&lt;/p&gt;

&lt;p&gt;1. I don&apos;t want to export something on the default scope.&lt;br/&gt;
2. But if there is a class on the dfault scope - which is not exported - the plugin fails.&lt;/p&gt;

&lt;p&gt;The plugin MUST never fail on classes it MUST ignore.&lt;/p&gt;</comment>
                            <comment id="12668462" author="mcculls" created="Thu, 29 Jan 2009 13:01:20 +0000"  >&lt;p&gt;Suggested patch, based on 0.0.308 - it keeps the default package in the list of contained packages, but disallows its export.&lt;br/&gt;
For a simple testcase, create a class in the default package and use Private-Package: . to include the class but not export it.&lt;/p&gt;</comment>
                            <comment id="12669547" author="pkriens" created="Mon, 2 Feb 2009 10:06:49 +0000"  >&lt;p&gt;Applied the patch in bnd-310&lt;/p&gt;</comment>
                            <comment id="12681198" author="mcculls" created="Thu, 12 Mar 2009 08:05:00 +0000"  >&lt;p&gt;Closing as maven-bundle-plugin 2.0.0 has been released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12399004" name="FELIX-807-20090129.patch" size="1128" author="mcculls" created="Thu, 29 Jan 2009 13:01:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58182</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1aptr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>270650</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>