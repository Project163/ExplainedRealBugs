<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:12:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5911] [Configurator] Too restrictive permissions.perm file</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5911</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Configurator currently requests&lt;/p&gt;

&lt;p&gt;(java.io.FilePermission &quot;-&quot; &quot;read,write,execute,delete&quot;)&lt;/p&gt;

&lt;p&gt;in its permissions.perm file (the &quot;-&quot; means all files and subfolders within and below the current working dir). However, the bundle tries to access files in the bundle storage area as well, whose location we cannot anticipate here. It can be configured by means of a framework property, for instance. The correct permission would be&lt;/p&gt;

&lt;p&gt;(java.io.FilePermission &quot;&amp;lt;&amp;lt;ALL FILES&amp;gt;&amp;gt;&quot; &quot;read,write,execute,delete&quot;)&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13180106">FELIX-5911</key>
            <summary>[Configurator] Too restrictive permissions.perm file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cnoelle">Christoph N&#246;lle</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Aug 2018 01:04:53 +0000</created>
                <updated>Sun, 18 Nov 2018 09:57:43 +0000</updated>
                            <resolved>Wed, 26 Sep 2018 14:06:25 +0000</resolved>
                                    <version>configurator-1.0.4</version>
                    <version>configurator-1.0.6</version>
                                    <fixVersion>configurator-1.0.8</fixVersion>
                                    <component>Configurator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16591439" author="cnoelle" created="Fri, 24 Aug 2018 10:18:54 +0000"  >&lt;p&gt;In addition, when setting the property&lt;/p&gt;

&lt;p&gt;configurator.initial=&lt;a href=&quot;file:/path/to/file.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/path/to/file.json&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;it will try to access a file at arbitrary locations on the disk. What&apos;s worse: if a protocol different from &quot;file&quot; is used the access is likely to fail, for instance because Configurator does not have the appropriate network permission. There might be even custom permissions involved, when a custom protocol is used. From my point of view the only solution is to remove the permissions.perm file entirely. This should be fine; the system administrator can still restrict the set of applicable permissions for the bundle, if so desired. At compile time however we do not know which permissions will be needed.&#160;&lt;/p&gt;</comment>
                            <comment id="16592152" author="cnoelle" created="Fri, 24 Aug 2018 20:48:25 +0000"  >&lt;p&gt;And, just in case the permissions.perm file is not removed, the permission&lt;br/&gt;
(&quot;java.lang.reflect.ReflectPermission&quot; &quot;suppressAccessChecks&quot;)&lt;br/&gt;
is missing too. Needed for Field#setAccessible(true) in ReflectionUtil.&lt;/p&gt;</comment>
                            <comment id="16628491" author="cnoelle" created="Wed, 26 Sep 2018 09:50:44 +0000"  >&lt;p&gt;What do you think, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16628685" author="cziegeler" created="Wed, 26 Sep 2018 12:35:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnoelle&quot; class=&quot;user-hover&quot; rel=&quot;cnoelle&quot;&gt;cnoelle&lt;/a&gt; Thanks for reporting, somehow I missed this one for the 1.0.6 release &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I agree, the best option is to remove the permissions.perm file as we really don&apos;t know what permissons are required&lt;/p&gt;</comment>
                            <comment id="16628697" author="timothyjward" created="Wed, 26 Sep 2018 12:44:06 +0000"  >&lt;p&gt;This permission request seems wrong. By default the OSGi framework should grant access to the bundle storage area (&lt;a href=&quot;#framework.security.impliedpermissions]).&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;see&#160;the security section in the core specification&#160;title&lt;/a&gt;&#160;I&apos;m not sure why the bundle should need to request other file permissions at all.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I would also really like to see reflection removed as it really shouldn&apos;t be necessary. The bundle is in complete control of the serialization, so I&apos;m not sure why it hasn&apos;t been written purely using DataInput/DataOutput. There aren&apos;t any cycles, and none of the default serialisation behaviour is in use. To my mind this could (and should) all be re-implemented without any need for reflection, even while maintaining backward compatibility with existing saved data.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Finally, the additional permissions needed when the &quot;configurator.initial&quot; property is set need to be granted by the person launching the framework. They know that they have set security on, and what they have sent the configurator.initial property to. The Configurator bundle&#160;shouldn&apos;t be opening up the base options for this.&lt;/p&gt;</comment>
                            <comment id="16628724" author="cnoelle" created="Wed, 26 Sep 2018 13:00:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=timothyjward&quot; class=&quot;user-hover&quot; rel=&quot;timothyjward&quot;&gt;timothyjward&lt;/a&gt;: as far as I understand the set of permissions granted by the system admin/the person launching the framework can only be a subset of the permissions requested in the permissions.perm file. More precisely, the effective set of permissions is the intersection of the ones in permissions.perm and the ones granted by the admin. It is hence not possible to configure additional permissions. Did I get this wrong?&lt;/p&gt;</comment>
                            <comment id="16628732" author="cnoelle" created="Wed, 26 Sep 2018 13:05:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=timothyjward&quot; class=&quot;user-hover&quot; rel=&quot;timothyjward&quot;&gt;timothyjward&lt;/a&gt;: you are right regarding the bundle storage location, it does not require a permission request. The original issue description is wrong, but the issues mentioned in the first two comments probably remain.&lt;/p&gt;</comment>
                            <comment id="16628819" author="cziegeler" created="Wed, 26 Sep 2018 14:06:25 +0000"  >&lt;p&gt;Removed the file in rev 1842027&lt;/p&gt;</comment>
                            <comment id="16628825" author="cziegeler" created="Wed, 26 Sep 2018 14:09:07 +0000"  >&lt;p&gt;I changed the title, I hope it fits better now.&lt;br/&gt;
For other things like the use of reflection we should create different issues&lt;/p&gt;</comment>
                            <comment id="16628970" author="timothyjward" created="Wed, 26 Sep 2018 15:47:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=timothyjward&quot; class=&quot;user-hover&quot; rel=&quot;timothyjward&quot;&gt;timothyjward&lt;/a&gt;: as far as I understand the set of permissions granted by the system admin/the person launching the framework can only be a subset of the permissions requested in the permissions.perm file. More precisely, the effective set of permissions is the intersection of the ones in permissions.perm and the ones granted by the admin. It is hence not possible to configure additional permissions. Did I get this wrong?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;You can still use PermissionAdmin/ConditionalPermissionAdmin to control the permissions of a bundle and grant them wider permissions than they would otherwise have. You are correct, however that the permissions for a bundle cannot expand beyond those of the Java runtime as a whole.&lt;/p&gt;</comment>
                            <comment id="16629185" author="cnoelle" created="Wed, 26 Sep 2018 17:41:03 +0000"  >&lt;p&gt;I was not referring to the permissions of the Java runtime. According to the security spec (50.2.1 Local Permissions):&lt;br/&gt;
&lt;a href=&quot;https://osgi.org/specification/osgi.core/7.0.0/service.condpermadmin.html#i1534520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/specification/osgi.core/7.0.0/service.condpermadmin.html#i1534520&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;cite&gt;Local permissions are defined by a Bundle Permission Resource that is contained in the bundle; this resource defines a set of&#160;&lt;em&gt;permissions&lt;/em&gt;. These permissions must be enforced by the Framework for the given bundle. That is, a bundle can get less permissions than the local permissions but it can never get more permissions.&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;The remainder of the section is also very clear about it: adding a permission to ConditionalPermissionAdmin does not overwrite the local perms.&lt;/p&gt;</comment>
                            <comment id="16629226" author="karlpauls" created="Wed, 26 Sep 2018 18:23:40 +0000"  >&lt;p&gt;yup&lt;/p&gt;</comment>
                            <comment id="16688072" author="cnoelle" created="Thu, 15 Nov 2018 13:36:43 +0000"  >&lt;p&gt;&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, any chance for a release in the near future?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x8tb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>