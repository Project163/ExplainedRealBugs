<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:05:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-333] &lt;Include_Resouce&gt; can create a corrupt manifest file.</title>
                <link>https://issues.apache.org/jira/browse/FELIX-333</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Please see the attached maven project. It should demonstrate the issue. The generated manifest file is in the root directory as an example of the bad manifest syntax.&lt;/p&gt;

&lt;p&gt;Whitespace is not being stripped from the contents of the &amp;lt;Include-Resource&amp;gt; tag. These end up in the manifest file, and corrupt it so the bundle cannot load.&lt;/p&gt;</description>
                <environment>Confirmed on Win32. Not sure about *nix.</environment>
        <key id="12375301">FELIX-333</key>
            <summary>&lt;Include_Resouce&gt; can create a corrupt manifest file.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="tomdewire">Thomas Dewire</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Aug 2007 14:23:19 +0000</created>
                <updated>Mon, 1 Oct 2007 06:36:51 +0000</updated>
                            <resolved>Mon, 13 Aug 2007 16:48:04 +0000</resolved>
                                    <version>framework-1.0.0</version>
                                    <fixVersion>framework-1.0.0</fixVersion>
                                    <component>Maven Bundle Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12517546" author="tomdewire" created="Fri, 3 Aug 2007 14:24:31 +0000"  >&lt;p&gt;A boiled-down maven project that should demonstrate the issue.&lt;/p&gt;</comment>
                            <comment id="12517557" author="cziegeler" created="Fri, 3 Aug 2007 15:18:40 +0000"  >&lt;p&gt;I think, bnd should not include this header at all in the manifest. It is just used for the generation process.&lt;/p&gt;</comment>
                            <comment id="12519384" author="pkriens" created="Mon, 13 Aug 2007 08:17:33 +0000"  >&lt;p&gt;Why is the manifest corrupted? It seems ok to me?&lt;/p&gt;</comment>
                            <comment id="12519449" author="mcculls" created="Mon, 13 Aug 2007 15:44:39 +0000"  >&lt;p&gt;Actually there is a problem with the manifest, but it&apos;s not initially obvious unless you open it using Linux.&lt;br/&gt;
Here&apos;s a similar example, note that there&apos;s a Unix newline that&apos;s not followed by a space on the next line:&lt;/p&gt;

&lt;p&gt;   Include-Resource: foo=bar,&lt;br/&gt;
                           zzz=bar^M&lt;/p&gt;

&lt;p&gt;The exception thrown from Java is as follows:&lt;/p&gt;

&lt;p&gt;   org.osgi.framework.BundleException: The manifest line&lt;br/&gt;
      &quot;                 zzz=bar&quot; is invalid; it has no colon : character after the header key.&lt;br/&gt;
        at org.eclipse.osgi.framework.util.Headers.parseManifest(Headers.java:283)&lt;br/&gt;
        at org.eclipse.osgi.internal.baseadaptor.AdaptorUtil.loadManifestFrom(AdaptorUtil.java:193)&lt;/p&gt;

&lt;p&gt;and the standard Jar utility class also barfs with this exception:&lt;/p&gt;

&lt;p&gt;   java.io.IOException: invalid header field&lt;br/&gt;
        at java.util.jar.Attributes.read(Attributes.java:383)&lt;br/&gt;
        at java.util.jar.Manifest.read(Manifest.java:167)&lt;br/&gt;
        at java.util.jar.JarInputStream.&amp;lt;init&amp;gt;(JarInputStream.java:66)&lt;br/&gt;
        at java.util.jar.JarInputStream.&amp;lt;init&amp;gt;(JarInputStream.java:43)&lt;/p&gt;

&lt;p&gt;The easy solution is to strip newlines from properties in the bundle-plugin before passing them to BND.&lt;br/&gt;
Of course Peter might prefer to handle this inside BND instead, as it might also be caused when using&lt;br/&gt;
BND from ant, etc. and a more robust library is always good &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;BTW, this only seems to happen with instructions passed in via the pom.xml, possibly because extra&lt;br/&gt;
whitespace is automatically removed when they&apos;re read in from a properties file using &amp;lt;_include&amp;gt;...&lt;br/&gt;
whereas with XML the whitespace is preserved.&lt;/p&gt;</comment>
                            <comment id="12519453" author="mcculls" created="Mon, 13 Aug 2007 16:15:29 +0000"  >&lt;p&gt;after discussions with Peter, these values can only come from the XML so we&apos;ll fix it in the bundle-plugin.&lt;/p&gt;</comment>
                            <comment id="12519469" author="mcculls" created="Mon, 13 Aug 2007 16:36:22 +0000"  >&lt;p&gt;Suggested patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-333&quot; title=&quot;&amp;lt;Include_Resouce&amp;gt; can create a corrupt manifest file.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-333&quot;&gt;&lt;del&gt;FELIX-333&lt;/del&gt;&lt;/a&gt;_20070814.txt) removes any new-lines / form-feeds from the properties.&lt;br/&gt;
I didn&apos;t want to remove all whitespace, as filenames may contain spaces and shouldn&apos;t be trimmed.&lt;/p&gt;</comment>
                            <comment id="12519471" author="rickhall" created="Mon, 13 Aug 2007 16:48:04 +0000"  >&lt;p&gt;I applied the patch, please close this issue if everything is ok.&lt;/p&gt;</comment>
                            <comment id="12529499" author="mcculls" created="Fri, 21 Sep 2007 17:02:29 +0000"  >&lt;p&gt;can this issue be closed?&lt;/p&gt;</comment>
                            <comment id="12531416" author="mcculls" created="Mon, 1 Oct 2007 06:36:51 +0000"  >&lt;p&gt;Received email from reporter: &quot;I was the original filer. Everything seems fine after the fix.&quot; so closing issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12363709" name="FELIX-333_20070814.txt" size="593" author="mcculls" created="Mon, 13 Aug 2007 16:36:22 +0000"/>
                            <attachment id="12363125" name="felix-bug-example.zip" size="5490" author="tomdewire" created="Fri, 3 Aug 2007 14:24:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0w0an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>