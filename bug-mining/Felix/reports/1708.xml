<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:45:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3723] ClassCastException on ConfigurationAdmin service creating components </title>
                <link>https://issues.apache.org/jira/browse/FELIX-3723</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Consider this situation:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Felix SCR 1.6&lt;br/&gt;
        Import-Package: org.osgi.service.cm;version=[1.2,2.0);resolution:=optional&lt;/li&gt;
	&lt;li&gt;OSGi Enterprise R5 API bundle&lt;br/&gt;
        Export-Package: org.osgi.service.cm;version=1.5&lt;/li&gt;
	&lt;li&gt;Felix Configuration Admin 1.4.0&lt;br/&gt;
        Export-Package: org.osgi.service.cm;version=1.4&lt;br/&gt;
        Import-Package: org.osgi.service.cm;version=[1.4,1.5)&lt;/li&gt;
	&lt;li&gt;Component Bundle&lt;br/&gt;
        Import-Package: org.osgi.service.cm;version=[1.4,1.5)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A component from the &quot;Component Bundle&quot; is registered and SCR happily starts creating it. SCR uses the Component Bundle&apos;s context to get the Configuration Admin serivce. Since the Component Bundle is wired tothe Felix Configuration Admin bundle it has an appropriate service implementation and the reference can be returned.&lt;/p&gt;

&lt;p&gt;SCR then uses the Component Bundle&apos;s BundleContext to get the service. This succeeds.&lt;/p&gt;

&lt;p&gt;Now SCR tries to cast the service Object to a ConfigurationAdmin object. But since the SCR bundle itself is wired to another API (the Enterprise one), the ConfugurationAdmin interface class objects are not the same and the cast fails.&lt;/p&gt;

&lt;p&gt;Consequently, since this is not expected (but should be in this case), component creation fails.&lt;/p&gt;

&lt;p&gt;The returned service should be checked, whether it can be cast to prevent this kind of failure.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12612431">FELIX-3723</key>
            <summary>ClassCastException on ConfigurationAdmin service creating components </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="fmeschbe">Felix Meschberger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Oct 2012 14:26:46 +0000</created>
                <updated>Tue, 20 Nov 2012 10:58:18 +0000</updated>
                            <resolved>Fri, 19 Oct 2012 13:23:29 +0000</resolved>
                                    <version> scr-1.6.0</version>
                                    <fixVersion>scr-1.6.2</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13480013" author="fmeschbe" created="Fri, 19 Oct 2012 13:23:29 +0000"  >&lt;p&gt;Fixed Rev. 1400089&lt;/p&gt;

&lt;p&gt;The ConfigurationAdmin service retrieved with the component&apos;s bundle context is checked against the ConfigurationAdmin API to which the DS bundle is wired. If it is not the same a WARN message is logged. Otherwise the component is configured as expected.&lt;/p&gt;</comment>
                            <comment id="13501063" author="fmeschbe" created="Tue, 20 Nov 2012 10:58:18 +0000"  >&lt;p&gt;Close after release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0afmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58805</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>