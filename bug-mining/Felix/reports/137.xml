<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:05:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-426] Bundle-Classpath is not working with directories as expected.</title>
                <link>https://issues.apache.org/jira/browse/FELIX-426</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The manifest entry Bundle-Classpath is not working as expected when directories are specified.&lt;/p&gt;</description>
                <environment>Windows XP / Ubuntu Linux</environment>
        <key id="12383579">FELIX-426</key>
            <summary>Bundle-Classpath is not working with directories as expected.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="lgalfaso">Lucas Galfaso</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Nov 2007 01:39:08 +0000</created>
                <updated>Fri, 4 Jan 2008 16:28:14 +0000</updated>
                            <resolved>Fri, 4 Jan 2008 16:28:14 +0000</resolved>
                                    <version>framework-1.0.0</version>
                                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12546961" author="lgalfaso" created="Fri, 30 Nov 2007 01:42:40 +0000"  >&lt;p&gt;Attaching patch for this issue. This patch should make the class ContentDirectoryContent unnecesary (unless it is used outside the framework.)&lt;/p&gt;</comment>
                            <comment id="12546968" author="lgalfaso" created="Fri, 30 Nov 2007 02:25:59 +0000"  >&lt;p&gt;Better patch.&lt;/p&gt;</comment>
                            <comment id="12555615" author="rickhall" created="Thu, 3 Jan 2008 17:31:56 +0000"  >&lt;p&gt;Lucas, could you be more precise about the issue you were seeing?&lt;/p&gt;

&lt;p&gt;I am not sure your patch will work in general since it modifies JarContent directly, which will likely mean that it will only work for bundles that are packaged as a JAR file. Felix also supports bundles as exploded directories (i.e., DirectoryContent), which is why we have ContentDirectoryContent (dumb name, I know) in the first place, which is used so that content can be provided from the directory of another content.&lt;/p&gt;

&lt;p&gt;So, I think we need to fix ContentDirectoryContent if there is a bug in it, not eliminate it.&lt;/p&gt;</comment>
                            <comment id="12555641" author="rickhall" created="Thu, 3 Jan 2008 19:18:31 +0000"  >&lt;p&gt;I created a simple bundle with the following structure:&lt;/p&gt;

&lt;p&gt;   META-INF/MANIFEST.MF&lt;br/&gt;
   org/apache/felix/test/classloading/Activator.class&lt;br/&gt;
   classpath/org/apache/felix/test/classloading/directory/Hello.class&lt;/p&gt;

&lt;p&gt;And with:&lt;/p&gt;

&lt;p&gt;   Bundle-ClassPath: .,classpath&lt;/p&gt;

&lt;p&gt;My activator was able to create an instance of Hello, so the simple case appears to be working. I definitely need more help to reproduce any issues.&lt;/p&gt;</comment>
                            <comment id="12555647" author="lgalfaso" created="Thu, 3 Jan 2008 19:32:32 +0000"  >&lt;p&gt;Hi Richard,&lt;br/&gt;
  If you set&lt;/p&gt;

&lt;p&gt;Bundle-Classpath: .,/classpath&lt;/p&gt;

&lt;p&gt;then it fails. Also ContentDirectoryContent::EntriesEnumeration is really broken as it returns a lot of false positives. I am attaching a patch for both issues in five minutes.&lt;/p&gt;</comment>
                            <comment id="12555670" author="rickhall" created="Thu, 3 Jan 2008 20:35:15 +0000"  >&lt;p&gt;Lucas, I agree it looks like it would return false positives, but were you actually running into this issue? I am trying to think of the case when someone would actually see the error, since I don&apos;t think it is used by Felix...or did you just happen to notice that it was in error?&lt;/p&gt;</comment>
                            <comment id="12555673" author="rickhall" created="Thu, 3 Jan 2008 20:41:09 +0000"  >&lt;p&gt;Lucas, I attached a modified version of your patch. Let me know if it sufficiently resolves the issues you discovered. If so, I will commit it. Thanks.&lt;/p&gt;</comment>
                            <comment id="12555677" author="lgalfaso" created="Thu, 3 Jan 2008 20:48:01 +0000"  >&lt;p&gt;I am not running into the ContentDirectoryContent::EntriesEnumeration issue (I was running into the other issue) it just happened that I notice the bug while checking ContentDirectoryContent. Anyhow, I think I can force the issue, but I am not sure.&lt;/p&gt;

&lt;p&gt;The patch to ContentDirectoryContent::EntriesEnumeration does not look right as&lt;br/&gt;
public boolean hasMoreElements()&lt;br/&gt;
might return true when there are no elements left.&lt;/p&gt;</comment>
                            <comment id="12555678" author="lgalfaso" created="Thu, 3 Jan 2008 20:49:30 +0000"  >&lt;p&gt;The patch does solve the other issue, thanks&lt;/p&gt;</comment>
                            <comment id="12555848" author="fmeschbe" created="Fri, 4 Jan 2008 08:36:45 +0000"  >&lt;p&gt;Sorry, to jump in here, but:&lt;/p&gt;

&lt;p&gt;&amp;gt; The patch to ContentDirectoryContent::EntriesEnumeration does not look right as&lt;br/&gt;
&amp;gt; public boolean hasMoreElements()&lt;br/&gt;
&amp;gt; might return true when there are no elements left.&lt;/p&gt;

&lt;p&gt;According to the JavaDoc of Enumeration.hasMoreElements(), which is AFAIK normative: &lt;/p&gt;

&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Tests if this enumeration contains more elements.&lt;br/&gt;
     *&lt;/li&gt;
	&lt;li&gt;@return  &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt; if and only if this enumeration object&lt;/li&gt;
	&lt;li&gt;contains at least one more element to provide;&lt;/li&gt;
	&lt;li&gt;&amp;lt;code&amp;gt;false&amp;lt;/code&amp;gt; otherwise.&lt;br/&gt;
     */&lt;br/&gt;
    boolean hasMoreElements();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;this method only returns true, if there is at least one more element to be retreived by Enumeration.nextElement(). If this would not be the case, the respective implementation would be wrong .... (and not the use of it)&lt;/p&gt;</comment>
                            <comment id="12555944" author="rickhall" created="Fri, 4 Jan 2008 15:34:05 +0000"  >&lt;p&gt;Yes, Lucas, you are definitely correct, my patch didn&apos;t fix that from the original. I have attached a modified patch, which I believe is correct with respect to hasMoreElements() and will correctly throw an exception in nextElement() when there are no more elements.&lt;/p&gt;</comment>
                            <comment id="12555970" author="rickhall" created="Fri, 4 Jan 2008 16:28:14 +0000"  >&lt;p&gt;I have committed the v4 patch for this. Lucas, please close it if you are satisfied with the solution. Thanks for the help.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12372460" name="FELIX-426.v2.patch" size="3324" author="lgalfaso" created="Thu, 3 Jan 2008 19:37:45 +0000"/>
                            <attachment id="12372464" name="FELIX-426.v3.patch" size="3262" author="rickhall" created="Thu, 3 Jan 2008 20:39:56 +0000"/>
                            <attachment id="12372509" name="FELIX-426.v4.patch" size="4474" author="rickhall" created="Fri, 4 Jan 2008 15:32:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58560</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vuef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183898</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>