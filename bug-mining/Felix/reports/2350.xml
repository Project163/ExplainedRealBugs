<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:56:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4734] Web Console RESTful API should wait for asynchonous operations until they complete </title>
                <link>https://issues.apache.org/jira/browse/FELIX-4734</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Currently the RESTful API (&lt;a href=&quot;http://felix.apache.org/documentation/subprojects/apache-felix-web-console/web-console-restful-api.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://felix.apache.org/documentation/subprojects/apache-felix-web-console/web-console-restful-api.html&lt;/a&gt;) adds a delay of 800ms to the response to give the asynchronous operations enough time to complete successfully (&lt;a href=&quot;https://github.com/apache/felix/blob/trunk/webconsole/src/main/java/org/apache/felix/webconsole/internal/core/BundlesServlet.java#L412&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/blob/trunk/webconsole/src/main/java/org/apache/felix/webconsole/internal/core/BundlesServlet.java#L412&lt;/a&gt;).&lt;br/&gt;
Instead the according listeners should be used which are notified upon completion of an asynchronous task.&lt;br/&gt;
For &lt;tt&gt;refresh&lt;/tt&gt; &lt;tt&gt;FrameworkWiring.refreshBundles&lt;/tt&gt; can be used (&lt;a href=&quot;http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/wiring/FrameworkWiring.html#refreshBundles%28java.util.Collection,%20org.osgi.framework.FrameworkListener...%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/wiring/FrameworkWiring.html#refreshBundles%28java.util.Collection,%20org.osgi.framework.FrameworkListener...%29&lt;/a&gt;). A similar approach should be used for the other actions like uninstall, install, update, start, stop, ...&lt;/p&gt;</description>
                <environment></environment>
        <key id="12762026">FELIX-4734</key>
            <summary>Web Console RESTful API should wait for asynchonous operations until they complete </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Dec 2014 15:29:23 +0000</created>
                <updated>Thu, 23 Feb 2017 10:29:05 +0000</updated>
                            <resolved>Mon, 26 Jan 2015 07:40:17 +0000</resolved>
                                    <version>webconsole-4.2.4</version>
                                    <fixVersion>webconsole-4.2.6</fixVersion>
                                    <component>Web Console</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14253147" author="v_valchev" created="Fri, 19 Dec 2014 08:32:30 +0000"  >&lt;p&gt;IMHO the web console shouldn&apos;t way at all, but you might be right, that it&apos;s more convenient that way.&lt;/p&gt;

&lt;p&gt;Looking at the code, I think that web console waits all the time, but that completely unnecessary for install, start, stop..&lt;/p&gt;

&lt;p&gt;But for sure - we should wait for refresh(bundle) and refreshPackages and probably update(bundle). And blind waiting is really not enough. So I&apos;ll think about it and propose a patch.&lt;/p&gt;</comment>
                            <comment id="14253468" author="v_valchev" created="Fri, 19 Dec 2014 14:38:49 +0000"  >&lt;p&gt;I&apos;m attaching a patch that:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;removes all unnecessary waits&lt;/li&gt;
	&lt;li&gt;always waits for refresh package to complete
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;at most 5 seconds for a single bundle packages refresh&lt;/li&gt;
		&lt;li&gt;at most 15 seconds for the whole framework packages refresh&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;it doesn&apos;t uses the wiring, since I&apos;m trying to keep webconsole OSGi 4.0 compliant&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I didn&apos;t make update to do refresh packages. Considering that web console is developer tool, for me it&apos;s better to update the bundle(s) I need, and then to refresh the packages. &lt;/p&gt;


&lt;p&gt;Looking forward for your review.&lt;/p&gt;</comment>
                            <comment id="14253471" author="v_valchev" created="Fri, 19 Dec 2014 14:39:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-600&quot; title=&quot;Insert Delay before refreshing packages after install/update&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-600&quot;&gt;&lt;del&gt;FELIX-600&lt;/del&gt;&lt;/a&gt; is somehow related to this issue&lt;/p&gt;</comment>
                            <comment id="14253481" author="cziegeler" created="Fri, 19 Dec 2014 14:47:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=v_valchev&quot; class=&quot;user-hover&quot; rel=&quot;v_valchev&quot;&gt;v_valchev&lt;/a&gt; Patch lgtm and I agree to not use the wiring api; and I also agree to not change the behaviour of the &quot;refresh packages&quot; button. Thanks&lt;/p&gt;</comment>
                            <comment id="14253595" author="fmeschbe" created="Fri, 19 Dec 2014 16:17:09 +0000"  >&lt;p&gt;Please make sure to not cause deadlocks ! We had situations in the past where the web console bundle itself was involved in the update and refreshPackage operations and when not properly handling this, this may cause a deadlock !&lt;/p&gt;</comment>
                            <comment id="14291541" author="cziegeler" created="Mon, 26 Jan 2015 07:40:17 +0000"  >&lt;p&gt;I&apos;ve applied a slighty modified version of the patch in rev 1654733&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12761850">SLING-4249</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13045574">FELIX-5562</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12397678">FELIX-600</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12688333" name="FELIX-4734.patch" size="7646" author="v_valchev" created="Fri, 19 Dec 2014 14:38:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23hdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>