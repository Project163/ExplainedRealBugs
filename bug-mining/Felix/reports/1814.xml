<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:47:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3852] InstallBundle throws ClassCastException: java.util.jar.Attributes$Name cannot be cast to java.lang.String</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3852</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Caused by: org.osgi.framework.BundleException: Could not create bundle object.&lt;br/&gt;
    at org.apache.felix.framework.Felix.installBundle(Felix.java:2885)&lt;br/&gt;
    at org.apache.felix.framework.BundleContextImpl.installBundle(BundleContextImpl.java:165)&lt;br/&gt;
    at org.apache.felix.framework.BundleContextImpl.installBundle(BundleContextImpl.java:138)&lt;br/&gt;
    at org.glassfish.extras.osgicontainer.OSGiDeployer.installBundle(OSGiDeployer.java:114)&lt;br/&gt;
    ... 47 more&lt;br/&gt;
Caused by: java.lang.ClassCastException: java.util.jar.Attributes$Name cannot be cast to java.lang.String&lt;br/&gt;
    at org.apache.felix.framework.util.StringMap.putAll(StringMap.java:89)&lt;br/&gt;
    at org.apache.felix.framework.util.StringMap.&amp;lt;init&amp;gt;(StringMap.java:43)&lt;br/&gt;
    at org.apache.felix.framework.cache.DirectoryRevision.getManifestHeader(DirectoryRevision.java:92)&lt;br/&gt;
    at org.apache.felix.framework.BundleImpl.createRevision(BundleImpl.java:1188)&lt;br/&gt;
    at org.apache.felix.framework.BundleImpl.&amp;lt;init&amp;gt;(BundleImpl.java:95)&lt;br/&gt;
    at org.apache.felix.framework.Felix.installBundle(Felix.java:2832)&lt;br/&gt;
    ... 50 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12628062">FELIX-3852</key>
            <summary>InstallBundle throws ClassCastException: java.util.jar.Attributes$Name cannot be cast to java.lang.String</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="sahoo">Sanjeeb Kumar Sahoo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Jan 2013 16:22:57 +0000</created>
                <updated>Thu, 31 Jan 2013 15:27:24 +0000</updated>
                            <resolved>Thu, 31 Jan 2013 15:27:24 +0000</resolved>
                                    <version>framework-4.2.0</version>
                                    <fixVersion>framework-4.2.0</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13556353" author="sahoo" created="Thu, 17 Jan 2013 16:28:29 +0000"  >&lt;p&gt;Please review the patch.&lt;/p&gt;</comment>
                            <comment id="13560231" author="rickhall" created="Wed, 23 Jan 2013 00:31:29 +0000"  >&lt;p&gt;Yeah, I think that was the intent to begin with, so go ahead and commit your patch.&lt;/p&gt;</comment>
                            <comment id="13560387" author="sahoo" created="Wed, 23 Jan 2013 04:40:16 +0000"  >&lt;p&gt;svn #1437269&lt;/p&gt;</comment>
                            <comment id="13561644" author="rickhall" created="Thu, 24 Jan 2013 14:37:56 +0000"  >&lt;p&gt;I believe there is an issue with this patch. The StringMap not only converts keys to strings, but it always deals with case insensitivity of keys too. That is why we override all of the methods. To make matters worse, we not only deal with case insensitivity, we also maintain the original key so that the user gets back the keys in the case they put them with.&lt;/p&gt;

&lt;p&gt;I think we need to revert to what we had, but modify putAll() to call toString() on the keys it is putting.&lt;/p&gt;</comment>
                            <comment id="13561673" author="rickhall" created="Thu, 24 Jan 2013 15:15:21 +0000"  >&lt;p&gt;It looks like we no longer handle the case sensitivity, but the rest of what I said was valid.&lt;/p&gt;

&lt;p&gt;Proposed patch. Sahoo, can you check that this still works for you.&lt;/p&gt;

&lt;p&gt;Technically, I still don&apos;t think this is 100% correct if this was compiled with target jsr14 for older smaller VMs. I guess it depends on how smart the compiler is when compiling for jsr14.&lt;/p&gt;</comment>
                            <comment id="13561745" author="sahoo" created="Thu, 24 Jan 2013 16:40:59 +0000"  >&lt;p&gt;Richard,&lt;/p&gt;

&lt;p&gt;I am getting lots of compilation errors with your patch even after I updated my workspace?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /space/ss141213/WS/felix/trunk/framework/src/main/java/org/apache/felix/framework/BundleImpl.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;340,21&amp;#93;&lt;/span&gt; error: no suitable constructor found for StringMap(Map,boolean)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; constructor StringMap.StringMap(Map&amp;lt;? extends Object,? extends Object&amp;gt;) is not applicable&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; (actual and formal argument lists differ in length)&lt;/p&gt;

&lt;p&gt;Do you have any other change in your workspace that&apos;s a prerequisite for using this patch? It seems so.&lt;/p&gt;

&lt;p&gt;Sahoo&lt;/p&gt;</comment>
                            <comment id="13561806" author="rickhall" created="Thu, 24 Jan 2013 18:07:53 +0000"  >&lt;p&gt;Sorry, my mistake. I changed the constructor and forgot to edit where it was being used. I&apos;ve updated the patch.&lt;/p&gt;</comment>
                            <comment id="13561809" author="rickhall" created="Thu, 24 Jan 2013 18:09:19 +0000"  >&lt;p&gt;The main issue that needs to be addressed here is that this code also has to work safely when used in jsr14 mode, which means that we get no type safety. So, we just need to make sure that all entry points will convert keys to strings, I guess.&lt;/p&gt;</comment>
                            <comment id="13562344" author="sahoo" created="Fri, 25 Jan 2013 03:57:23 +0000"  >&lt;p&gt;Yes, your latest patch works. I will reassign the issue to you now. Thanks.&lt;/p&gt;</comment>
                            <comment id="13567718" author="rickhall" created="Thu, 31 Jan 2013 15:27:24 +0000"  >&lt;p&gt;Applied patch, marking as closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12566335" name="FELIX-3852-updated.txt" size="8152" author="rickhall" created="Thu, 24 Jan 2013 18:07:53 +0000"/>
                            <attachment id="12565342" name="Felix-3852.patch" size="965" author="sahoo" created="Thu, 17 Jan 2013 16:28:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>304913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17wuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>254290</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>