<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:32:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3070] SCR Plugin and dependencies with classifier cause issue depending on the order of dependency in pom.xml</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3070</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Here is the scenario. I have two modules &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ModuleA - It generates two artifact. One the main artifact and other a client artifact which has classifier set to &apos;client&apos; i.e.
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;scr-bug:moduleA:jar:1.0.0-SNAPSHOT&lt;/li&gt;
		&lt;li&gt;scr-bug:moduleA:jar:client:1.0.0-SNAPSHOT&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Module B - Has dependency on both artifacts.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Module A has a abstract service class which has Component &apos;s componentAbstract set to true. This class has a service reference entry i.e. a variable with @Reference marked. Module B has a ExampleService which extends the AbstractService and it has been marked aith Component annotation&lt;/p&gt;

&lt;p&gt;Now when ModuleB has dependencies defined in order &lt;br/&gt;
&amp;#8211; scr-bug:moduleA:jar:client:1.0.0-SNAPSHOT&lt;br/&gt;
&amp;#8211; scr-bug:moduleA:jar:1.0.0-SNAPSHOT&lt;/p&gt;

&lt;p&gt;Then SCR Plugin is able to locate the abstract component configuration and adds dependency on the required service (referred in AbstractService). However if the order is changed (i.e. classifier entry comes later) then SCR plguin ignores the config.&lt;/p&gt;

&lt;p&gt;I have also attached the debug log. &lt;/p&gt;

&lt;p&gt;If you see scr-bug-log.txt (when dependency entry with classifier comes later) then it has entries which indicates that dependency without classifier has been ignored &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Checking artifact org.apache.felix:org.apache.felix.scr.annotations:jar:1.6.0:provided&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Resolving artifact org.apache.felix:org.apache.felix.scr.annotations:jar:1.6.0:provided&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Checking artifact scr-bug:moduleA:jar:client:1.0.0-SNAPSHOT:compile&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Resolving artifact scr-bug:moduleA:jar:client:1.0.0-SNAPSHOT:compile&lt;/p&gt;

&lt;p&gt;Seeing the code of MavenJavaClassDescriptorManager then it uses MavenProject.getArtifactMap() in the getDependencies method. It internally uses org.apache.maven.artifact.ArtifactUtils.artifactMapByVersionlessId &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. This method only uses artifactId and groupId to create the map key and does not take into account the classifier. So the getDependencies logic should use some other method to obtain the depndencies&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518116">FELIX-3070</key>
            <summary>SCR Plugin and dependencies with classifier cause issue depending on the order of dependency in pom.xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Sat, 6 Aug 2011 17:00:29 +0000</created>
                <updated>Tue, 15 Nov 2011 16:20:41 +0000</updated>
                            <resolved>Tue, 27 Sep 2011 12:58:36 +0000</resolved>
                                    <version>maven-scr-plugin-1.7.2</version>
                                    <fixVersion>maven-scr-plugin-1.7.4</fixVersion>
                                    <component>SCR Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13080427" author="chetanm" created="Sat, 6 Aug 2011 17:02:51 +0000"  >&lt;p&gt;Maven project to demonstrate the issue&lt;/p&gt;</comment>
                            <comment id="13080428" author="chetanm" created="Sat, 6 Aug 2011 17:03:24 +0000"  >&lt;p&gt;SCR Plugin output logs depending on the scenario&lt;/p&gt;</comment>
                            <comment id="13115461" author="cziegeler" created="Tue, 27 Sep 2011 12:58:36 +0000"  >&lt;p&gt;Thanks for reporting and especially for the test case, Chetan!&lt;/p&gt;

&lt;p&gt;I&apos;ve fixed this in revision 1176365&lt;/p&gt;

&lt;p&gt;The code was a little bit strange and I guess we had a wrong idea of the maven api at the time of writing. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12489576" name="scr-bug-log.txt" size="6542" author="chetanm" created="Sat, 6 Aug 2011 17:03:24 +0000"/>
                            <attachment id="12489574" name="scr-bug.zip" size="5716" author="chetanm" created="Sat, 6 Aug 2011 17:02:51 +0000"/>
                            <attachment id="12489575" name="scr-log.txt" size="6411" author="chetanm" created="Sat, 6 Aug 2011 17:03:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1autz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>271461</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>