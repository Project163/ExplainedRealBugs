<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:54:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4565] Occasional ArrayIndexOutOfBoundException in iPOJO&apos;s ProvidedServiceHandler</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4565</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I have an iPOJO (1.11.2) component using the @ServiceController annotation to control the service publishing. Most of the time this works perfectly fine, but occasionally I get an ArrayIndexOutOfBoundsException.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.ArrayIndexOutOfBoundsException: 4
               at org.apache.felix.ipojo.handlers.providedservice.ProvidedServiceHandler.__M_onSet(ProvidedServiceHandler.java:416)[83:org.apache.felix.ipojo:1.11.2]
               at org.apache.felix.ipojo.handlers.providedservice.ProvidedServiceHandler.onSet(ProvidedServiceHandler.java)[83:org.apache.felix.ipojo:1.11.2]
               at org.apache.felix.ipojo.InstanceManager.onSet(InstanceManager.java:1401)[83:org.apache.felix.ipojo:1.11.2]
               [..] (My own code following, where the service controller &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; is manipulated)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately I cannot share the consumer code nor reproduce the problem. I looked into &lt;a href=&quot;http://grepcode.com/file/repo1.maven.org/maven2/org.apache.felix/org.apache.felix.ipojo/1.11.2/org/apache/felix/ipojo/handlers/providedservice/ProvidedServiceHandler.java#416&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;iPOJOs code&lt;/a&gt; to see what&apos;s going on, and there we have:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; j = 0; j &amp;lt; svc.getProperties().length; j++) { Property prop = svc.getProperties()[j];
               [...]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which looks like a proper race condition to me, if svc.getProperties() changes its value in the meantime because of missing synchronizations. I don&apos;t see any synchronizations there, but I also don&apos;t know if they would be appropriate in the first place.&lt;/p&gt;</description>
                <environment>Karaf 2.3.3 / Windows 7 64 bit</environment>
        <key id="12728016">FELIX-4565</key>
            <summary>Occasional ArrayIndexOutOfBoundException in iPOJO&apos;s ProvidedServiceHandler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="clement.escoffier">Clement Escoffier</assignee>
                                    <reporter username="benjamindebeerst">Benjamin Debeerst</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Jul 2014 18:54:51 +0000</created>
                <updated>Wed, 24 Dec 2014 16:27:41 +0000</updated>
                            <resolved>Mon, 25 Aug 2014 08:41:13 +0000</resolved>
                                    <version>ipojo-runtime-1.11.2</version>
                                    <fixVersion>ipojo-runtime-1.12.1</fixVersion>
                                    <component>iPOJO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14108895" author="clement.escoffier" created="Mon, 25 Aug 2014 08:41:13 +0000"  >&lt;p&gt;Fixed in trunk.&lt;/p&gt;</comment>
                            <comment id="14119675" author="benjamindebeerst" created="Wed, 3 Sep 2014 09:13:43 +0000"  >&lt;p&gt;Is there a way to see the commits/diff that belonged to this fix?&lt;/p&gt;</comment>
                            <comment id="14119774" author="clement.escoffier" created="Wed, 3 Sep 2014 11:34:14 +0000"  >&lt;p&gt;Here it is: &lt;a href=&quot;https://github.com/apache/felix/commit/d142625f2bb30d8c723114edfb66322c55240687&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/commit/d142625f2bb30d8c723114edfb66322c55240687&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14258357" author="benjamin.debeerst@younicos.com" created="Wed, 24 Dec 2014 16:27:41 +0000"  >&lt;p&gt;Sorry, I am currently not in the office and will be back on January 5, 2015.&lt;/p&gt;

&lt;p&gt;Please note, your email has not been forwarded.&lt;/p&gt;

&lt;p&gt;In urgent cases please contact:&lt;br/&gt;
For issues regarding the WEMAG project: Niels Majer (niels.majer@younicos.com).&lt;br/&gt;
For issues regarding the UKPN project and other topics: Udo Berninger (udo.berninger@younicos.com).&lt;/p&gt;

&lt;p&gt;Let the fossils rest in peace.&lt;br/&gt;
Benjamin Debeerst&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406121</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xvz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>