<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:42:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3548] Concurrent access during startup</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3548</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;We use the configuration admin to create iPojo instances at runtime. During Felix startup, an error may happen because 2 threads (one from iPOJO Instance Creator, the other from Configuration Admin) are accessing a list at the same time:&lt;/p&gt;

&lt;p&gt;2012-06-07 05:13:11,490 GMT+0200 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; (ipojo.?:?): &lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; iPOJO Instance Creator : Add the factory FailureHandler&lt;br/&gt;
2012-06-07 05:13:11,490 GMT+0200 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;CM Configuration Updater (ManagedServiceFactory Update: factoryPid=FailureHandler)&amp;#93;&lt;/span&gt; (ipojo.?:?): &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; requires : Instance requires-1 from factory requires created&lt;br/&gt;
2012-06-07 05:13:11,505 GMT+0200 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; (ipojo.?:?): &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; requires : Instance requires-2 from factory requires created&lt;br/&gt;
2012-06-07 05:13:11,505 GMT+0200 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;CM Configuration Updater (ManagedServiceFactory Update: factoryPid=FailureHandler)&amp;#93;&lt;/span&gt; (ipojo.?:?): &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; properties : Instance properties-1 from factory properties created&lt;br/&gt;
2012-06-07 05:13:11,505 GMT+0200 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;CM Configuration Updater (ManagedServiceFactory Update: factoryPid=FailureHandler)&amp;#93;&lt;/span&gt; (ipojo.?:?): &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; provides : Instance provides-2 from factory provides created&lt;br/&gt;
2012-06-07 05:13:11,505 GMT+0200 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; (ipojo.?:?): &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; IPOJO-Extender : An error occurs when analyzing the content or starting the management of 99&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 10&lt;br/&gt;
        at java.util.ArrayList.add(ArrayList.java:352)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:302)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.getHandler(IPojoFactory.java:801)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.computeDescription(IPojoFactory.java:695)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.computeFactoryState(IPojoFactory.java:731)&lt;br/&gt;
        at org.apache.felix.ipojo.ComponentFactory.addedService(ComponentFactory.java:394)&lt;br/&gt;
        at org.apache.felix.ipojo.util.Tracker$Tracked.trackAdding(Tracker.java:725)&lt;br/&gt;
        at org.apache.felix.ipojo.util.Tracker$Tracked.trackInitialServices(Tracker.java:610)&lt;br/&gt;
        at org.apache.felix.ipojo.util.Tracker.open(Tracker.java:210)&lt;br/&gt;
        at org.apache.felix.ipojo.ComponentFactory.starting(ComponentFactory.java:246)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.start(IPojoFactory.java:583)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender.createAbstractFactory(Extender.java:439)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender.parse(Extender.java:264)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender.startManagementFor(Extender.java:208)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender.access$600(Extender.java:52)&lt;br/&gt;
        at org.apache.felix.ipojo.Extender$CreatorThread.run(Extender.java:682)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
2012-06-07 05:13:11,505 GMT+0200 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;CM Configuration Updater (ManagedServiceFactory Update: factoryPid=FailureHandler)&amp;#93;&lt;/span&gt; (configadmin.?:?): &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.felix.ipojo.Factory, org.osgi.service.cm.ManagedServiceFactory, id=19, bundle=99&amp;#93;&lt;/span&gt;: Unexpected problem updating Configuration PID=FailureHandler.0bb38d10-b99b-4326-ac36-1717c48f38de, factoryPID=FailureHandler, bundleLocation=&lt;a href=&quot;file:D:distribrepositoryfailurehandler-4.0.0-SNAPSHOT.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:D:\distrib\repository\failurehandler-4.0.0-SNAPSHOT.jar&lt;/a&gt;&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 10&lt;br/&gt;
        at java.util.ArrayList.indexOf(ArrayList.java:216)&lt;br/&gt;
        at java.util.ArrayList.contains(ArrayList.java:199)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.generateName(IPojoFactory.java:830)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:279)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.getHandler(IPojoFactory.java:801)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:297)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:238)&lt;br/&gt;
        at org.apache.felix.ipojo.IPojoFactory.updated(IPojoFactory.java:634)&lt;br/&gt;
        at org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceFactoryUpdate.run(ConfigurationManager.java:1366)&lt;br/&gt;
        at org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:104)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:662) &lt;/p&gt;</description>
                <environment>Felix distribution 4.0.2, iPojo 1.8.2, Oracle JVM 1.6.0_29, Windows XP 32</environment>
        <key id="12560458">FELIX-3548</key>
            <summary>Concurrent access during startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="clement.escoffier">Clement Escoffier</assignee>
                                    <reporter username="ccasenove">C&#233;dric Casenove</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jun 2012 08:11:08 +0000</created>
                <updated>Mon, 4 Feb 2013 12:34:33 +0000</updated>
                            <resolved>Thu, 28 Jun 2012 07:52:42 +0000</resolved>
                                    <version>ipojo-core-1.8.2</version>
                                    <fixVersion>ipojo-core-1.8.4</fixVersion>
                                    <component>iPOJO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13399287" author="ggezer" created="Fri, 22 Jun 2012 12:33:09 +0000"  >&lt;p&gt;I faced the same issue while creating instance using API where component has its own instance declaration too. Fixed it by synchronizing access to INSTANCE_NAME field on everywhere it is touched. I&apos;m not sure if this is complete solution though !&lt;/p&gt;</comment>
                            <comment id="13402913" author="clement.escoffier" created="Thu, 28 Jun 2012 07:51:41 +0000"  >&lt;p&gt;Looks to be the issue. The INSTANCE_NAME is a static member wrongly protected against concurrent accesses. Another lock (global, shared by all factories) must be used to protect the list from concurrent modification.&lt;/p&gt;

&lt;p&gt;I&apos;ve implemented a fix acquiring the lock on INSTANCE_NAME before each operation. The &apos;createComponentInstance&apos; has a large part of is code synchronized too. &lt;/p&gt;</comment>
                            <comment id="13402914" author="clement.escoffier" created="Thu, 28 Jun 2012 07:52:44 +0000"  >&lt;p&gt;Patch applied on trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>246024</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07g1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>41364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>