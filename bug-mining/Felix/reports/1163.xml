<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:21:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2644] cannot disable plugin</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2644</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Something went terribly wrong! I cannot disable a plugin from the configuration.&lt;/p&gt;

&lt;p&gt;The reason for this is that the plugins are initialized during startup. In the constructor, the Web Console will lookup the configuration and see if plugin is disable. If so, it will be ignored, otherwise the plugin will be instantiated and ready to use.&lt;/p&gt;

&lt;p&gt;However, configuration delivery is asynchronous, so you don&apos;t know when the configuration dictionary is delivered and in my case, it is &apos;updated&apos; a little bit after the initialization. So initially, when the web console is initialized, it has &apos;null&apos; - default configuration and all plugins are enabled. Then later on, after updating the configuration I disable as example the &apos;shell&apos; plugin.&lt;/p&gt;

&lt;p&gt;Unfortunately, the web console will not check if the plugin is disabled, when the browser is opened and the &apos;shell&apos; plugin remains visible.&lt;/p&gt;

&lt;p&gt;Putting the plugin initialization in the constructor, means, that there is no way to actually disable a plugin and all internal plugin will be instantiate and visible by default, Even if they are not needed, there is no browser request for them or disabled by the configuration.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12476832">FELIX-2644</key>
            <summary>cannot disable plugin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="v_valchev">Valentin Valchev</assignee>
                                    <reporter username="v_valchev">Valentin Valchev</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Oct 2010 07:13:10 +0000</created>
                <updated>Tue, 9 Nov 2010 09:46:54 +0000</updated>
                            <resolved>Mon, 25 Oct 2010 11:53:15 +0000</resolved>
                                    <version>webconsole-3.1.2</version>
                                    <fixVersion>webconsole-3.1.6</fixVersion>
                                    <component>Web Console</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12919256" author="fmeschbe" created="Fri, 8 Oct 2010 12:14:42 +0000"  >&lt;p&gt;Yes, this is caused by my refactoring of the OSGiManager setup.&lt;/p&gt;

&lt;p&gt;Maybe we should enhance the PluginHolder and its internal classes Plugin/ServletPlugin addding an &quot;enabled&quot; flag and changing the getPlugins() and getPlugin(String) method to respect this enabled flag.&lt;/p&gt;

&lt;p&gt;WDYT ?&lt;/p&gt;</comment>
                            <comment id="12919260" author="fmeschbe" created="Fri, 8 Oct 2010 12:18:00 +0000"  >&lt;p&gt;In addition to plugin enablement, we also have an issue with the WebConsoleSecurityProvider.authorize method, which is not used yet. So if we touch the PluginHolder class for the enablement class, it would probably make sense to add support for the authorize() method as well.&lt;/p&gt;</comment>
                            <comment id="12919728" author="v_valchev" created="Mon, 11 Oct 2010 06:25:20 +0000"  >&lt;p&gt;And maybe that Plugin can be given a class name, so it can create the &quot;internal plugin&quot; instance on demand. Just like the external plugins registered as services.&lt;/p&gt;</comment>
                            <comment id="12922869" author="v_valchev" created="Wed, 20 Oct 2010 06:31:26 +0000"  >&lt;p&gt;Attached quick and dirty patch for fixing the problem&lt;/p&gt;

&lt;p&gt;Now the internal plugins are created by class-name, so the plugins are instantiated when they are requested.&lt;/p&gt;

&lt;p&gt;This theoretically should decrease the startup time of the bundle.&lt;/p&gt;

&lt;p&gt;Unfortunately there is a small problem with the metatype - I need to show the titles, but since I don&apos;t have the plugin instances I don&apos;t know the titles. So I assume, that the title is a resource key which is made as &quot;&amp;lt;label&amp;gt;.pluginTitle&quot;, which of course is not true &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; And if the title is missing, then the label is used.&lt;/p&gt;
</comment>
                            <comment id="12924481" author="fmeschbe" created="Mon, 25 Oct 2010 07:41:46 +0000"  >&lt;p&gt;Patch basically looks good.&lt;/p&gt;

&lt;p&gt;Some comments:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Can you please commit the &quot;$NON-NLS-1$&quot; changes in a separate commit ? (just to keep the history clean &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/li&gt;
	&lt;li&gt;Instead of making the OsgiManager.enabledPlugins field package private I suggest:&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;to add an OsgiManager.isEnabled(String classNameOrLabel) returning whether the plugin is enabled&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;How about making InternalPlugin.isEnabled() a method of the Plugin class ? This makes all plugins eligible for disablement and allows us to not do stuff like &quot;if plugin instanceof InternalPlugin&quot;&lt;/li&gt;
	&lt;li&gt;ConfigurationListener2: Currently only built-in plugins support enablement. By movind the isEnabled method to the Plugin class, this class could be extended to go to the registered plugins to extend the list of plugins, which may be enabled/disabled, to the full set of installed plugins.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12924499" author="v_valchev" created="Mon, 25 Oct 2010 08:47:30 +0000"  >&lt;ul&gt;
	&lt;li&gt;agreed fro NON-NLS &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;instead of adding new method OsgiManager.isEnabled() refactored a little bit the existing method isPluginDisabled&lt;/li&gt;
	&lt;li&gt;agreed for Plugin.isEnabled()&lt;/li&gt;
	&lt;li&gt;for the configuration listener, if I extend the list to the list of all available plugins, then the problems is that each newly registered plugin will get &apos;disabled&apos; by default. Another solution is the configuration value to contain the list of &quot;disabled&quot; plugins. Maybe we should have a different issue on that problem.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;And some other thing, that I will do for the internal plugins is to make their title look like &amp;lt;label&amp;gt;.pluginTitle.&lt;/p&gt;</comment>
                            <comment id="12924506" author="fmeschbe" created="Mon, 25 Oct 2010 09:24:39 +0000"  >&lt;p&gt;Ok, agreed on all. Thanks.&lt;/p&gt;

&lt;p&gt;I would assume that changing the &quot;title&quot; of the internal plugins to &quot;&amp;lt;label&amp;gt;.pluginTitle&quot; will only affect some translations possibly being out there in the wild but not any functionality, right ? I f so, I am ok with this change.&lt;/p&gt;</comment>
                            <comment id="12924524" author="v_valchev" created="Mon, 25 Oct 2010 11:08:41 +0000"  >&lt;p&gt;Yes, it is mostly for the properties files, but in some plugins it requires to change a private static field TITLE&lt;/p&gt;</comment>
                            <comment id="12924538" author="v_valchev" created="Mon, 25 Oct 2010 11:53:15 +0000"  >&lt;p&gt;fixed in rev. 1027069&lt;/p&gt;</comment>
                            <comment id="12930054" author="fmeschbe" created="Tue, 9 Nov 2010 09:46:54 +0000"  >&lt;p&gt;Close after release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12457649" name="internal-plugin-loader.patch" size="21103" author="v_valchev" created="Wed, 20 Oct 2010 06:31:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40557</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aqnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>