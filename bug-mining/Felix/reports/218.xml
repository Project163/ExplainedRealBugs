<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:07:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-577] Problems with the bundle url protocol</title>
                <link>https://issues.apache.org/jira/browse/FELIX-577</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The &quot;bundle:&quot; protocol URL handler is built in Felix framework, but&lt;br/&gt;
does not seem to work well for me at the moment.  The idea behing this&lt;br/&gt;
URL handler is to be able to access any resource inside a bundle.  The&lt;br/&gt;
syntax is as following:&lt;/p&gt;

&lt;p&gt;  bundle://&lt;span class=&quot;error&quot;&gt;&amp;#91;bundleId&amp;#93;&lt;/span&gt;.&lt;span class=&quot;error&quot;&gt;&amp;#91;bundleRev&amp;#93;&lt;/span&gt;:&lt;span class=&quot;error&quot;&gt;&amp;#91;classPathId&amp;#93;&lt;/span&gt;/&lt;span class=&quot;error&quot;&gt;&amp;#91;path&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;where &lt;span class=&quot;error&quot;&gt;&amp;#91;bundleId&amp;#93;&lt;/span&gt; is the id of the bundle, &lt;span class=&quot;error&quot;&gt;&amp;#91;bundleRev&amp;#93;&lt;/span&gt; is the revision&lt;br/&gt;
of the bundle (when new versions are installed), &lt;span class=&quot;error&quot;&gt;&amp;#91;classPathId&amp;#93;&lt;/span&gt; is the&lt;br/&gt;
index in the list of jars that make the classpath (internal structure)&lt;br/&gt;
and &lt;span class=&quot;error&quot;&gt;&amp;#91;path&amp;#93;&lt;/span&gt; is the path of the resource in the bundle.&lt;/p&gt;

&lt;p&gt;My problem is that &lt;span class=&quot;error&quot;&gt;&amp;#91;bundleRev&amp;#93;&lt;/span&gt; and &lt;span class=&quot;error&quot;&gt;&amp;#91;classPathId&amp;#93;&lt;/span&gt; refer to internal&lt;br/&gt;
structures and can&apos;t be accessed from outside the felix framework.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;classPathId&amp;#93;&lt;/span&gt; can be set to 0 to look inside the whole classpath&lt;br/&gt;
entries, but if not specified, the default value of the url port is -1&lt;br/&gt;
and an IndexOutOfBounds exception is thrown.&lt;/p&gt;

&lt;p&gt;Another problem is that &lt;span class=&quot;error&quot;&gt;&amp;#91;bundleRev&amp;#93;&lt;/span&gt; can not be ommitted and (in&lt;br/&gt;
addition to the parsing having a bug) there is no default value.&lt;/p&gt;

&lt;p&gt;I will raise a JIRA and attach a patch to do the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;if the url port is ommitted (thus defaults to -1), use the same&lt;br/&gt;
behavior as if 0 was used (search in the whole classpath)&lt;/li&gt;
	&lt;li&gt;fix the revision bundle parsing, which returns the bundle id if&lt;br/&gt;
none is specified: it will return -1 if the bundle revision was not&lt;br/&gt;
set&lt;/li&gt;
	&lt;li&gt;fix the look up mechanism so that when no bundle revision is&lt;br/&gt;
specified, (revision == -1), all bundle revisions will be searched in&lt;br/&gt;
reverse order (the most recent revision first)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The last problem is really difficult to work around as there is no way&lt;br/&gt;
to find the bundle revision from a client bundle and there is no&lt;br/&gt;
default value, so the only way to make that work is to specify 0 and&lt;br/&gt;
expect the bundle to have not been updated (which ovbiously is not a&lt;br/&gt;
good idea).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12397145">FELIX-577</key>
            <summary>Problems with the bundle url protocol</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="gnodet">Guillaume Nodet</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 May 2008 08:10:58 +0000</created>
                <updated>Mon, 4 Aug 2008 15:59:54 +0000</updated>
                            <resolved>Mon, 4 Aug 2008 15:59:54 +0000</resolved>
                                    <version>framework-1.0.4</version>
                                    <fixVersion>framework-1.2.0</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12601041" author="rickhall" created="Fri, 30 May 2008 08:26:32 +0000"  >&lt;p&gt;As mentioned on the mailing list, I think it should only search the most recent revision if no revision is specified to avoid situations where resource lookups might be split across revisions. Otherwise, it sounds like a good approach.&lt;/p&gt;</comment>
                            <comment id="12601635" author="gnt" created="Mon, 2 Jun 2008 14:28:26 +0000"  >&lt;p&gt;The patch already does that afaik.&lt;br/&gt;
See the following patch fragment:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+        &lt;span class=&quot;code-comment&quot;&gt;// If the revision is not specified, check the latest
&lt;/span&gt;+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (revision &amp;lt; 0)
+        {
+            revision = modules.length - 1;
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I may have missed something in the way revisions work though...&lt;/p&gt;</comment>
                            <comment id="12619562" author="rickhall" created="Mon, 4 Aug 2008 15:59:54 +0000"  >&lt;p&gt;I have applied this patch. Guillaume, please close this issue if you are satisfied. Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12383084" name="FELIX-577.patch" size="2399" author="gnodet" created="Fri, 30 May 2008 08:52:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vsnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>