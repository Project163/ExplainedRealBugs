<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:22:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1865] Metatype resolving mechanism does not seem to work correctly</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1865</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The implementation of the metatype mechanism in the web-console 2.0.2  causes configurations to be listed with the Designate pid and the Object ocdref. &lt;/p&gt;

&lt;p&gt;i.e.&lt;br/&gt;
&amp;lt;Designate pid=&quot;com.acme.addressbook&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;Object ocdref=&quot;2.5.6.6&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/Designate&amp;gt; &lt;/p&gt;

&lt;p&gt;Would list &quot;com.acme.addressbook&quot; and &quot;2.5.6.6&quot; where the latter is actually broken and won&apos;t load the corresponding form.&lt;/p&gt;

&lt;p&gt;This problem does not occur with the identical installation and a web-console 1.2.10 release bundle.&lt;/p&gt;</description>
                <environment>equinox 3.5.1 (release; cm, metatype from the same release)</environment>
        <key id="12440667">FELIX-1865</key>
            <summary>Metatype resolving mechanism does not seem to work correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="wimpi">Dieter Wimberger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Nov 2009 21:08:51 +0000</created>
                <updated>Fri, 23 Nov 2012 06:54:47 +0000</updated>
                            <resolved>Thu, 24 Mar 2011 16:10:25 +0000</resolved>
                                    <version>webconsole-2.0.2</version>
                                    <fixVersion>webconsole-4.0.0</fixVersion>
                                    <component>Web Console</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12847370" author="fmeschbe" created="Fri, 19 Mar 2010 13:43:47 +0000"  >&lt;p&gt;Sorry for having had this laying around for much too long ....&lt;/p&gt;

&lt;p&gt;I have to admit, that I do not completely understand the problem.&lt;/p&gt;

&lt;p&gt;Here&apos;s what&apos;s going on in the web console:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;When a configuration (or ManagedService) is encountered the Web Console scans all MetaTypeInformation&lt;br/&gt;
      objects provided by the MetaTypeService for an ObjectClassDefinition with the configuration&apos;s or service&apos;s&lt;br/&gt;
      service.pid calling MetaTypeInformation.getObjectClassDefinition(String, String)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Once such an ObjectClassDefinition is found, it is used.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Now, the mapping of the Designate.pid attribute to the OCD.id attribute is AFAICT the task of the MetaTypeService implementation. This service takes the Object.ocdref attribute value and finds an OCD with a matching id attribute. If no such OCD exists, the MetaTypeService (or rather the MetaTypeInformation) should not resovle an ObjectClassDefinition for the Designate.&lt;/p&gt;

&lt;p&gt;And, yes I may be missing something, particularly since you say that in 1.2.10 the configuration was properly rendered. Can you provide a Metatype descriptor and a configuration exhibiting this proplem ? Thanks.&lt;/p&gt;</comment>
                            <comment id="12971028" author="achim_nierbeck" created="Mon, 13 Dec 2010 20:43:18 +0000"  >&lt;p&gt;Just stumbled over this, but It looks to me I found this issue also with 3.1.2&lt;/p&gt;

&lt;p&gt;Using a metatype like the following: &lt;/p&gt;

&lt;p&gt;&amp;lt;metatype:MetaData xmlns:metatype=&quot;http://www.osgi.org/xmlns/metatype/v1.0.0&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;OCD id=&quot;a.b.c.d-service&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;

&lt;p&gt;	&amp;lt;Designate pid=&quot;a.b.c.d&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;Object ocdref=&quot;a.b.c.d-service&quot; /&amp;gt;&lt;br/&gt;
	&amp;lt;/Designate&amp;gt;&lt;br/&gt;
&amp;lt;/metatype:MetaData&amp;gt;&lt;/p&gt;

&lt;p&gt;Where the pid is a.b.c.d and the reference is the pid with an appended -service. &lt;/p&gt;

&lt;p&gt;Now what happens is that there is a entry for a.b.c.d and another one for a.b.c.d-service (while debugging this seemed to be added as managed factory?)&lt;/p&gt;

&lt;p&gt;Unless I&apos;m wrong with my interpretation but I think this shouldn&apos;t happen.&lt;/p&gt;</comment>
                            <comment id="13010698" author="jwross@us.ibm.com" created="Thu, 24 Mar 2011 15:16:11 +0000"  >&lt;p&gt;I encountered this same issue with version 3.1.8. It occurs when the &amp;lt;OCD&amp;gt; &apos;id&apos; and &amp;lt;Object&amp;gt; &apos;ocdref&apos; attributes do not equal the &amp;lt;Designate&amp;gt; &apos;pid&apos; and, if present, &apos;factoryPid&apos; attributes. The only apparent way to avoid it is to make sure all attributes have the same value.&lt;/p&gt;

&lt;p&gt;&amp;lt;OCD id=&quot;ocd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;Designate pid=&quot;designate&quot; factoryPid=&quot;designate&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;Object ocdref=&quot;ocd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/Designate&amp;gt;&lt;/p&gt;

&lt;p&gt;The above XML incorrectly results in two entries appearing on the console. One entry shows a Factory PID of &apos;designate&apos;. The other shows a Factory PID of &apos;ocd&apos;. It almost seems like the code is calling MetaTypeProvider.getObjectClassDefinition() using ObjectClassDefinition.getID(). If so, this would result in a null OCD being returned, which I believe explains why the entry associated with the &apos;ocd&apos; Factory PID has only a text area requiring the user to enter name/value pairs instead of listing the attributes. The only valid id arguments for getObjectClassDefinition() are those returned by MetaTypeInformation.getPids() (i.e. the pids of all Designates, associated with an OCD, that did not also declare factoryPids) and getFactoryPids() (i.e. the factoryPids of all Designates associated with an OCD).&lt;/p&gt;

&lt;p&gt;&amp;lt;OCD id=&quot;designate&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;Designate pid=&quot;designate&quot; factoryPid=&quot;designate&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;Object ocdref=&quot;designate&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/Designate&amp;gt;&lt;/p&gt;

&lt;p&gt;The above XML correctly results in one entry appearing on the console showing a Factory PID of &apos;designate&apos;.&lt;/p&gt;

&lt;p&gt;This is an issue because it effectively limits the use of an OCD to a single Designate, but the intent is for multiple Designates to be able to reference the same OCD.&lt;/p&gt;

&lt;p&gt;Note the same behavior results when using either the Equinox or Felix Metatype implementation. Also, this does not appear to be fatal. Configurations can apparently be created, updated, or deleted without issue. It&apos;s just a confusing display.&lt;/p&gt;</comment>
                            <comment id="13010724" author="fmeschbe" created="Thu, 24 Mar 2011 15:50:38 +0000"  >&lt;p&gt;This issue is long overdue and should really be fixed for the next release&lt;/p&gt;</comment>
                            <comment id="13010742" author="fmeschbe" created="Thu, 24 Mar 2011 16:10:25 +0000"  >&lt;p&gt;Fixed in Rev. 1085018 by not preparing the ObjectClassDefinition objects in a Collection but in a Map indexed by the PID (or factory PID)&lt;/p&gt;</comment>
                            <comment id="13503078" author="fmeschbe" created="Fri, 23 Nov 2012 06:54:47 +0000"  >&lt;p&gt;Close after release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12501573">FELIX-2879</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40378</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b3nb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62703</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>