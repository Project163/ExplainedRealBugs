<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:06:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-620] manifest goal of maven-bundle-plugin ignores _include instruction</title>
                <link>https://issues.apache.org/jira/browse/FELIX-620</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;It appears to me that if I just invoke &lt;b&gt;manifest&lt;/b&gt; goal of maven-bundle-plugin, it ignores &lt;b&gt;_include&lt;/b&gt; instruction, where as if I use &lt;b&gt;bundle&lt;/b&gt; goal, it is used by the plugin. There are various ways to test it. The easiest seems to be using a non-existent file name. Attached are two sets of pom files, pom.xml uses bundle goal, where as pom.xml.notworking uses manifest goal. While using the first one, bnd complains about missing osgi.bundle3 file, where as it does not report any such error while using the first one. That makes me think that the manifest Mojo is not sending the file name to bnd. &lt;/p&gt;

&lt;p&gt;I am attaching a very simple test case along with a README describing the issue.&lt;/p&gt;</description>
                <environment>Maven version: 2.0.7&lt;br/&gt;
Java version: 1.5.0_13-rev&lt;br/&gt;
OS name: &amp;quot;sunos&amp;quot; version: &amp;quot;5.11&amp;quot; arch: &amp;quot;x86&amp;quot;&lt;br/&gt;
</environment>
        <key id="12399509">FELIX-620</key>
            <summary>manifest goal of maven-bundle-plugin ignores _include instruction</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mcculls">Stuart McCulloch</assignee>
                                    <reporter username="sahoo">Sanjeeb Kumar Sahoo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jul 2008 04:39:33 +0000</created>
                <updated>Wed, 27 Aug 2008 10:50:15 +0000</updated>
                            <resolved>Mon, 7 Jul 2008 13:21:12 +0000</resolved>
                                    <version>maven-bundle-plugin-1.4.1</version>
                                    <fixVersion>maven-bundle-plugin-1.4.2</fixVersion>
                                    <component>Maven Bundle Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12610125" author="sahoo" created="Thu, 3 Jul 2008 04:52:46 +0000"  >&lt;p&gt;Test case along with README&lt;/p&gt;</comment>
                            <comment id="12610934" author="mcculls" created="Mon, 7 Jul 2008 09:41:45 +0000"  >&lt;p&gt;Actually the include instruction is being processed, but the manifest goal is not reporting the errors/warnings from Bnd.&lt;br/&gt;
I have just added code to report these errors/warnings, and the testcase now behaves the same for both of the goals.&lt;/p&gt;</comment>
                            <comment id="12610939" author="sahoo" created="Mon, 7 Jul 2008 09:58:37 +0000"  >&lt;p&gt;That&apos;s good. But, as I mentioned in the README, the problem is not about missing warning. I also felt that manifest goal was not processing the instructions file. To reproduce this, please do the following (copied and pasted from the README):&lt;br/&gt;
Just change pom.xml to use osgi.bundle and &lt;br/&gt;
pom.xml.notworking to use osgi.bundle2. Both these files exist. Now generate&lt;br/&gt;
two jars one with each pom.xml. Look at their manifest files. The one created&lt;br/&gt;
with bundle goal has only sahoo.osgitest2.foo.api exported, where as the one&lt;br/&gt;
with manifest goal exports sahoo.osgitest2.foo.impl as well as api package. So,&lt;br/&gt;
it completely ignored the instructions found in osgi.bundle2 file.&lt;/p&gt;</comment>
                            <comment id="12610946" author="mcculls" created="Mon, 7 Jul 2008 10:27:44 +0000"  >&lt;p&gt;No - it does read the instructions from osgi.bundle2 (you can confirm this by adding a unique entry like &quot;TEST:ME&quot;) - the issue here is actually that the manifest goal is overwriting the included property with a default export based on the contents of the jar, because it checks for the existence of the export instruction in the original POM instructions rather than the merged instructions.&lt;/p&gt;

&lt;p&gt;BTW, there is also a typo in osgi.bundle2 where it uses &quot;_exportcontents&quot;, rather than  &quot;-exportcontents&quot;.&lt;/p&gt;

&lt;p&gt;Instructions inside included files are processed by Bnd, so it expects the notation described on Peter&apos;s website (&lt;a href=&quot;http://aqute.biz/Code/Bnd#directives&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://aqute.biz/Code/Bnd#directives&lt;/a&gt;) i.e. &quot;&lt;del&gt;exportcontents&quot;.  However, because XML doesn&apos;t allow tags that start with &apos;&lt;/del&gt;&apos; we can&apos;t have &amp;lt;-exportcontents&amp;gt; in the POM, so instead we accept &amp;lt;_exportcontents&amp;gt; and transform this internally to &quot;-exportcontents&quot; before passing it onto Bnd. But this is only for the POM to get around the XML tag restriction.&lt;/p&gt;
</comment>
                            <comment id="12611146" author="sahoo" created="Mon, 7 Jul 2008 13:00:26 +0000"  >&lt;p&gt;Thanks for pointing out the typo in osgi.bundl2. Will the merge behavior of the manifest goal be addressed as part of this issue, or do you want a separate issue (enhancement request) to be filed?&lt;/p&gt;</comment>
                            <comment id="12611154" author="mcculls" created="Mon, 7 Jul 2008 13:21:12 +0000"  >&lt;p&gt;Fixed in trunk - manifest goal now follows export instructions from included property files.&lt;/p&gt;</comment>
                            <comment id="12611436" author="sahoo" created="Tue, 8 Jul 2008 03:21:04 +0000"  >&lt;p&gt; Thanks for fixing the bug so quickly. When is the next version of maven-bundle-plugin scheduled to be released?I can plan my activity accordingly. &lt;/p&gt;</comment>
                            <comment id="12611594" author="mcculls" created="Tue, 8 Jul 2008 14:17:17 +0000"  >&lt;p&gt;No firm date yet - but at least by the end of July, if that&apos;s any help.&lt;/p&gt;</comment>
                            <comment id="12619362" author="mcculls" created="Sun, 3 Aug 2008 18:34:49 +0000"  >&lt;p&gt;This is available for testing in the latest 1.4.2-SNAPSHOT, I expect to start the release vote tomorrow&lt;/p&gt;</comment>
                            <comment id="12626064" author="mcculls" created="Wed, 27 Aug 2008 10:50:15 +0000"  >&lt;p&gt;Fixed in latest release of the maven-bundle-plugin (1.4.3)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12385164" name="Felix-620.zip" size="5636" author="sahoo" created="Thu, 3 Jul 2008 04:52:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58368</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1apof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>270626</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>