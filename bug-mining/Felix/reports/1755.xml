<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:46:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3666] NPE when uninstalling a bundle</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3666</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;When uninstalling a bundle from the bundle list, a NPE in the framework occurs - I think this starts to happen with framework 4.0.3, but I think this is not a problem of the framework but a bug in the web console.&lt;/p&gt;

&lt;p&gt;This is the stack trace:&lt;br/&gt;
14.09.2012 13:44:54.858 &lt;b&gt;INFO&lt;/b&gt; [0:0:0:0:0:0:0:1%0 &lt;span class=&quot;error&quot;&gt;&amp;#91;1347623094009&amp;#93;&lt;/span&gt; POST /system/console/bundles/108 HTTP/1.1] servletengine Servlet threw exception:  java.lang.NullPointerException&lt;br/&gt;
	at org.apache.felix.framework.PackageAdminImpl.getBundleType(PackageAdminImpl.java:112)&lt;br/&gt;
	at org.apache.felix.webconsole.internal.core.BundlesServlet.isFragmentBundle(BundlesServlet.java:715)&lt;br/&gt;
	at org.apache.felix.webconsole.internal.core.BundlesServlet.doPost(BundlesServlet.java:358)&lt;/p&gt;

&lt;p&gt;Although the bundle is uninstalled, the web console tries to find out whether the bundle is a fragment to report a status in the json. I think this doesn&apos;t make sense for an uninstalled bundle&lt;/p&gt;</description>
                <environment></environment>
        <key id="12607616">FELIX-3666</key>
            <summary>NPE when uninstalling a bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Sep 2012 11:50:35 +0000</created>
                <updated>Thu, 6 Jun 2013 15:34:56 +0000</updated>
                            <resolved>Fri, 7 Dec 2012 11:47:24 +0000</resolved>
                                    <version>webconsole-4.0.0</version>
                                    <fixVersion>webconsole-4.2.0</fixVersion>
                                    <component>Web Console</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13456868" author="fmeschbe" created="Mon, 17 Sep 2012 07:58:22 +0000"  >&lt;p&gt;I think this is a bug in the framework, though.&lt;/p&gt;

&lt;p&gt;The PackageAdmin.isBundleType is defined to throw an IllegalArgumentException &quot;If the specified Bundle was not created by the same framework instance that registered this PackageAdmin service&quot;. I would assume calling this method on an uninstalled bundle should just return the information because it basically just accesses the bundle headers which must remain available after the bundle has been uninstalled.&lt;/p&gt;

&lt;p&gt;In fact the PackageAdminImpl.isBundleType does&lt;/p&gt;

&lt;p&gt;   bundle.adapt(BundleRevision.class))&lt;/p&gt;

&lt;p&gt;which will return null if the bundle is uninstalled. Instead it should do&lt;/p&gt;

&lt;p&gt;   bundle.adapt(BundleRevisionImpl.class))&lt;/p&gt;

&lt;p&gt;which never returns null and thus still provides access to the headers.&lt;/p&gt;</comment>
                            <comment id="13457048" author="cziegeler" created="Mon, 17 Sep 2012 14:23:29 +0000"  >&lt;p&gt;Ok, I agree to your conclusion - however the web console shouldn&apos;t call into the framework at all if it has uninstalled a bundle&lt;/p&gt;</comment>
                            <comment id="13457055" author="rickhall" created="Mon, 17 Sep 2012 14:31:15 +0000"  >&lt;p&gt;So, should we clone this bug for framework too?&lt;/p&gt;</comment>
                            <comment id="13457128" author="fmeschbe" created="Mon, 17 Sep 2012 16:28:17 +0000"  >&lt;p&gt;You are right. I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-3670&quot; title=&quot;PackageAdmin.isBundleType throws NPE for uninstalled bundle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-3670&quot;&gt;&lt;del&gt;FELIX-3670&lt;/del&gt;&lt;/a&gt; for the framework.&lt;/p&gt;</comment>
                            <comment id="13460522" author="cziegeler" created="Fri, 21 Sep 2012 14:31:44 +0000"  >&lt;p&gt;I&apos;ve changed the code to only check for fragment if the bundle has not the state uninstalled&lt;/p&gt;</comment>
                            <comment id="13526288" author="fmeschbe" created="Fri, 7 Dec 2012 10:26:02 +0000"  >&lt;p&gt;I think the fix is incomplete: It should be applied closer to the actual NPE cause and to also properly locate the workaround.&lt;/p&gt;</comment>
                            <comment id="13526330" author="fmeschbe" created="Fri, 7 Dec 2012 11:47:24 +0000"  >&lt;p&gt;Done in Rev. 1418285 moving the framework bug (&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-3670&quot; title=&quot;PackageAdmin.isBundleType throws NPE for uninstalled bundle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-3670&quot;&gt;&lt;del&gt;FELIX-3670&lt;/del&gt;&lt;/a&gt;) workaround to the isFragment method.&lt;/p&gt;</comment>
                            <comment id="13677109" author="fmeschbe" created="Thu, 6 Jun 2013 15:34:56 +0000"  >&lt;p&gt;Close after release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12539897">FELIX-3318</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12607921">FELIX-3670</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>294009</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vrev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183414</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>