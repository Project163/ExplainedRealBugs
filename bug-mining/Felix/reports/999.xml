<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:17:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-995] JRE packages are exported with wrong version</title>
                <link>https://issues.apache.org/jira/browse/FELIX-995</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Felix 1.4.1 exports JRE packages with a version equals to the JRE version. e.g., if I am using Java SE 6, then all packages are exported with version=1.6. This is incorrect. Most of the packages are versioned as per the JSRs they are defined by.&lt;/p&gt;</description>
                <environment>generic</environment>
        <key id="12419177">FELIX-995</key>
            <summary>JRE packages are exported with wrong version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="sahoo">Sanjeeb Kumar Sahoo</reporter>
                        <labels>
                    </labels>
                <created>Sun, 22 Mar 2009 14:15:57 +0000</created>
                <updated>Fri, 7 May 2010 18:15:35 +0000</updated>
                            <resolved>Fri, 7 May 2010 18:15:35 +0000</resolved>
                                    <version>framework-1.4.1</version>
                                    <fixVersion>framework-3.0.0</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12688137" author="rickhall" created="Sun, 22 Mar 2009 15:37:41 +0000"  >&lt;p&gt;Yes, this is true. We did this for expediency and lack of knowledge for the actual versions. I would assume that some do not have real versions, so then what should those versions be? It was tricky, so we just did this.&lt;/p&gt;

&lt;p&gt;However, if you know the definitive answer, feel free to submit a patch. Thanks.&lt;/p&gt;</comment>
                            <comment id="12688193" author="sahoo" created="Mon, 23 Mar 2009 02:09:28 +0000"  >&lt;p&gt;If we don&apos;t know the actual version, won&apos;t it be better to leave it unspecified, thus it defaulting to 0.0.0? Setting them to JRE version does pose a problem in some situations. e.g., I am trying to provide a bundle with javax.transaction; version=1.1, but it is never getting picked up as the system provides version=1.6.&lt;/p&gt;</comment>
                            <comment id="12688736" author="rickhall" created="Tue, 24 Mar 2009 16:24:53 +0000"  >&lt;p&gt;Good question, but I don&apos;t really know the answer to that. The main downside of leaving it 0.0.0 is then there is no way to differentiate between the packages no matter on which platform you run Felix.&lt;/p&gt;</comment>
                            <comment id="12688749" author="mcculls" created="Tue, 24 Mar 2009 17:02:25 +0000"  >&lt;p&gt;Could we perhaps pick up the version from org.osgi.framework.system.packages / org.osgi.framework.system.packages.extra ?&lt;/p&gt;

&lt;p&gt;If we supported versions attached to the package names then we could add some initial spec versions to our default configuration properties and users could override the defaults with alternative versions as required&lt;/p&gt;</comment>
                            <comment id="12688764" author="sahoo" created="Tue, 24 Mar 2009 17:35:21 +0000"  >&lt;p&gt;Richard,&lt;br/&gt;
javax packages don&apos;t always vary with JRE. The ones that do vary tend to have a version unrelated to the JRE version. They are probably controlled by their own JSR version. I am trying to find out the actual API versions of various javax packages distributed in JRE.&lt;/p&gt;</comment>
                            <comment id="12688868" author="rickhall" created="Tue, 24 Mar 2009 21:08:55 +0000"  >&lt;p&gt;Stuart, we do pick up the version for the property, so it is definitely something that can be overridden.&lt;/p&gt;

&lt;p&gt;Sahoo, if we can find proper versions for the javax packages, then I think it makes sense to include them for each platform in our default properties. If no version is known, then I think using the Java version makes sense, since we will be treating it as an implementation package tied to the Java version.&lt;/p&gt;</comment>
                            <comment id="12855321" author="sahoo" created="Fri, 9 Apr 2010 08:59:29 +0000"  >&lt;p&gt;Given that versions of Java SE and EE packages are being discussed at a much wider level, we should wait for them to finalize package versions. In the mean while, I think Felix should not specify package version, as some of the package are defined in specifications which are still at 1.0 level. I think equinox is configured this as well. &lt;/p&gt;

&lt;p&gt;Secondly, we should at least do something about packages like javax.transaction and org.omg.CORBA which is known to be incomplete in JRE. e.g., this is what we do in GlassFish while exporting:&lt;/p&gt;

&lt;p&gt; javax.transaction; javax.transaction.xa;partial=true; mandatory:=partial, \&lt;/p&gt;

&lt;p&gt;We also set a boot delegation flag for javax.transaction and javax.transaction.*, else javax.sql won&apos;t work because of constraint violation. The more enterprise users use Felix, the more often they will encounter this problem of not finding some javax.transaction classes.&lt;/p&gt;</comment>
                            <comment id="12855351" author="davemssavage" created="Fri, 9 Apr 2010 11:18:52 +0000"  >&lt;p&gt;Yep I recently ran into the javax.transaction:1.6 problem in relation to deploying aries on felix. Here I get NoClassDefFoundError &lt;/p&gt;

&lt;p&gt;Stack Trace: org.osgi.framework.BundleException: Activator start error in bundle org.apache.aries.transaction.manager &lt;span class=&quot;error&quot;&gt;&amp;#91;34&amp;#93;&lt;/span&gt;.&lt;br/&gt;
        at org.apache.felix.framework.Felix.activateBundle(Felix.java:1803)&lt;br/&gt;
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1678)&lt;br/&gt;
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:905)&lt;br/&gt;
...&lt;br/&gt;
Caused by: java.lang.NoClassDefFoundError: javax/transaction/TransactionManager&lt;br/&gt;
        at java.lang.ClassLoader.defineClass1(Native Method)&lt;br/&gt;
        at java.lang.ClassLoader.defineClass(ClassLoader.java:700)&lt;br/&gt;
        at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.findClass(ModuleImpl.java:1872)&lt;/p&gt;

&lt;p&gt;This is caused by the fact that the aries transaction manager bundle exports javax.transaction:1.3 and imports [1.3,2.0) and the aries bundle actually includes the full javax.transaction package.&lt;/p&gt;

&lt;p&gt;In equinox this works fine as there they export the version as 0.0.0 so the import range ensures that it is not wired, but in felix the 1.6 version trumps the 1.3 version supplied by the bundle so it get&apos;s wired in its place but leads to a runtime failure.&lt;/p&gt;

&lt;p&gt;Now I think one could also argue that in this case the version range should actually be [1.3,1.4) as they actually implement the API which would fix this specific case but in general it&apos;s still a problem for consumers.&lt;/p&gt;</comment>
                            <comment id="12855385" author="rickhall" created="Fri, 9 Apr 2010 13:30:04 +0000"  >&lt;p&gt;I have been looking into adding &quot;uses&quot; constraint information to the JRE packages too, although it is not clear if this will help the situation or not at this point. Regardless, one thing is clear is that the system bundle is not telling the truth about its constraints if it omits &quot;uses&quot; constraints.&lt;/p&gt;

&lt;p&gt;Regarding the version number, I still think it is a mistake to include the same version number for all JRE packages on every version of the JRE. This means there is never anyway to differentiate. However, we could just assign 0.0.0 with a qualifier, e.g., 0.0.0.jre-1.6 or something.&lt;/p&gt;</comment>
                            <comment id="12855388" author="karlpauls" created="Fri, 9 Apr 2010 13:40:07 +0000"  >&lt;p&gt;I think the 0.0.0.jre-1.6 idea makes sense. Maybe we should make it the name of the matching execution-env for the qualifier (i.e., JRE-1.1, J2SE-1.2, J2SE-1.3, J2SE-1.4, J2SE-1.5, JavaSE-1.6)?&lt;/p&gt;

&lt;p&gt;regards,&lt;/p&gt;

&lt;p&gt;Karl&lt;/p&gt;</comment>
                            <comment id="12855398" author="tjwatson" created="Fri, 9 Apr 2010 13:45:58 +0000"  >&lt;p&gt;FWIW, I would be willing to add EE qualifiers to the VM packages exported by the system bundle in Equinox so we can be consistent.  I would use the Execution Environment string for the VM instead of jre-1.6 though (e.g.  0.0.0.JavaSE-1.6, 0.0.0.J2SE-1.4 etc.).  There is an issue for what the qualifier should be for embedded VMs since &apos;/&apos; is not a valid character in a qualifier (e.g. CDC-1.1/Foundation-1.1)  We would have to substitute &apos;_&apos; or something else for &apos;/&apos;.&lt;/p&gt;</comment>
                            <comment id="12855399" author="rickhall" created="Fri, 9 Apr 2010 13:49:55 +0000"  >&lt;p&gt;Sounds good to me.&lt;/p&gt;</comment>
                            <comment id="12860993" author="rickhall" created="Mon, 26 Apr 2010 17:07:40 +0000"  >&lt;p&gt;I committed a patch to implement this approach for JRE package version numbering.&lt;/p&gt;

&lt;p&gt;We actually can&apos;t use &apos;.&apos; in the qualifier either, so I ended up with: 0.0.0.J2SE-1_3, 0.0.0.JavaSE-1_6, etc.&lt;/p&gt;

&lt;p&gt;Would be better with a &apos;.&apos;, but not much we can do. Sahoo, you can close this bug if you are satisfied. Thanks!&lt;/p&gt;</comment>
                            <comment id="12864667" author="sahoo" created="Thu, 6 May 2010 06:22:49 +0000"  >&lt;p&gt;Whatever solution we go for should allow users to control what they want to use. e.g.:&lt;/p&gt;

&lt;p&gt;a) They should be able to select JRE packages if they want to.&lt;/p&gt;

&lt;p&gt;Can this be achieved by using provider selection mechanism? e.g., can I say&lt;br/&gt;
Import-Package: javax.xml.bind; Bundle-SymbolicName=system.bundle&lt;/p&gt;

&lt;p&gt;b) They should be able to use alternative packages sources for some of these packages.&lt;br/&gt;
How to achieve this if the alternative sources also don&apos;t specify any package versions and user does not know the bundle symbolic names of the alternative bundles?&lt;/p&gt;

&lt;p&gt;Are these valid requirements? If yes, does the current solution meet these requirements? If not, does it make any sense to have an attribute in addition to or instead of package version qualifier so that user has more control over wiring process. May be a mandatory attribute will do the trick for #b?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Sahoo&lt;/p&gt;</comment>
                            <comment id="12864758" author="rickhall" created="Thu, 6 May 2010 13:09:12 +0000"  >&lt;p&gt;&amp;gt; a) They should be able to select JRE packages if they want to.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Can this be achieved by using provider selection mechanism? e.g., can I say&lt;br/&gt;
&amp;gt; Import-Package: javax.xml.bind; Bundle-SymbolicName=system.bundle &lt;/p&gt;

&lt;p&gt;Yes, this should work.&lt;/p&gt;

&lt;p&gt;&amp;gt; b) They should be able to use alternative packages sources for some of these packages.&lt;br/&gt;
&amp;gt; How to achieve this if the alternative sources also don&apos;t specify any package&lt;br/&gt;
&amp;gt; versions and user does not know the bundle symbolic names of the alternative bundles? &lt;/p&gt;

&lt;p&gt;They have all the normal mechanism available in OSGi to differentiate and can always disable the system bundle exports if they chose. I don&apos;t think we need to do anything else.&lt;/p&gt;

&lt;p&gt;Mandatory attributes on the system bundle would be a nightmare because no one would match anything by default.&lt;/p&gt;</comment>
                            <comment id="12865252" author="rickhall" created="Fri, 7 May 2010 18:06:25 +0000"  >&lt;p&gt;Need to account for ordering of JRE versions.&lt;/p&gt;</comment>
                            <comment id="12865254" author="rickhall" created="Fri, 7 May 2010 18:15:35 +0000"  >&lt;p&gt;Ok, as crazy as it is, I&apos;ve modified the JRE package version numbering scheme to enable proper sort order of versions so you can technically use them for version ranges and backwards compatibility. The new scheme is like this:&lt;/p&gt;

&lt;p&gt;    1_006_JavaSE&lt;/p&gt;

&lt;p&gt;I put the version first and add some zeroes. I didn&apos;t use any zeroes in the major number because I assume we won&apos;t live that long.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57995</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vus7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183960</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>