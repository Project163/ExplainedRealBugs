<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:44:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3707] Uses constraints not properly checked with require bundle</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3707</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The following set of manifests should result in require.b1 being unresolvable due to an inconsistent class space for package p1:&lt;/p&gt;

&lt;p&gt;Bundle-ManifestVersion: 2&lt;br/&gt;
Bundle-SymbolicName: require.b1&lt;br/&gt;
Bundle-Version: 1.0.0&lt;br/&gt;
Require-Bundle: require.b2, require.b3&lt;/p&gt;

&lt;p&gt;Bundle-ManifestVersion: 2&lt;br/&gt;
Bundle-SymbolicName: require.b2&lt;br/&gt;
Bundle-Version: 1.0.0&lt;br/&gt;
Export-Package: p1&lt;/p&gt;

&lt;p&gt;Bundle-ManifestVersion: 2&lt;br/&gt;
Bundle-SymbolicName: require.b3&lt;br/&gt;
Bundle-Version: 1.0.0&lt;br/&gt;
Export-Package: p2; uses:=&quot;p1&quot;&lt;br/&gt;
Require-Bundle: require.b4&lt;/p&gt;

&lt;p&gt;Bundle-ManifestVersion: 2&lt;br/&gt;
Bundle-SymbolicName: require.b4&lt;br/&gt;
Bundle-Version: 1.0.0&lt;br/&gt;
Export-Package: p1&lt;/p&gt;

&lt;p&gt;I will attach a possible fix and testcase&lt;/p&gt;</description>
                <environment>All</environment>
        <key id="12611441">FELIX-3707</key>
            <summary>Uses constraints not properly checked with require bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="tjwatson">Tom Watson</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Thu, 11 Oct 2012 21:57:27 +0000</created>
                <updated>Wed, 17 Oct 2012 19:56:01 +0000</updated>
                            <resolved>Wed, 17 Oct 2012 16:40:17 +0000</resolved>
                                                                    <component>Resolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="13474546" author="tjwatson" created="Thu, 11 Oct 2012 21:59:39 +0000"  >&lt;p&gt;Possible fix and the scenario&lt;/p&gt;</comment>
                            <comment id="13475047" author="tjwatson" created="Fri, 12 Oct 2012 15:00:03 +0000"  >&lt;p&gt;The previous patch fixes part of the problem, but it only checks the current level for consistency of bundle capabilities.  This patch modifies the loop that checks for consistency on the next level down against every resource which the current resource depends on.&lt;/p&gt;

&lt;p&gt;I did this by simply iterating over all the requirements instead of using any of the package blame maps.  This was necessary to ensure that we check every required capability resource even if that capability does not pull in packages to the class space of the current resource (i.e. generic capabilities or the rare bundle capability that does not export any packages).&lt;/p&gt;

&lt;p&gt;As a result of this change I noticed a performance issue when attempting to resolve a large number of root resources.  The resultCache was getting discarded each time we checked package space consistency.  I changed that to only discard the resultCache when a ResolutionException occurs while checking consistency at the top level consistency check loop.&lt;/p&gt;</comment>
                            <comment id="13476387" author="tjwatson" created="Mon, 15 Oct 2012 20:15:39 +0000"  >&lt;p&gt;There was a bug in my &apos;performance&apos; fix from the last patch.  The resultCache must not be cleared out each time a ResolutionException is thrown.  Instead a new HashMap resultCache should only get created each time a new permutation is attempted.&lt;/p&gt;

&lt;p&gt;This updated patch simply removes line of code that clears the resultCache map.  The patch already creates a new resultCache map each time a new permutation is checked.&lt;/p&gt;</comment>
                            <comment id="13478015" author="rickhall" created="Wed, 17 Oct 2012 16:40:17 +0000"  >&lt;p&gt;I&apos;ve applied the patch. Please close this issue if you are satisfied. Thanks!&lt;/p&gt;</comment>
                            <comment id="13478310" author="tjwatson" created="Wed, 17 Oct 2012 19:56:01 +0000"  >&lt;p&gt;Satisfied.  Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12549196" name="org.apache.felix.resolver.patch" size="12608" author="tjwatson" created="Mon, 15 Oct 2012 20:15:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08q0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48815</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>