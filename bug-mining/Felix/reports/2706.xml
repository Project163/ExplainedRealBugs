<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:04:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5356] Component Factory and CM factory Configurations behave badly</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5356</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;This is a corner case and a minor issue in my opinion.  The specification really only mentions the following with respect to what should happen with factory components and CM factory configurations:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A factory configuration must not be used if the component is a factory component. This is because SCR is not free to create component configurations as necessary to support multiple Configurations. When SCR detects this condition, it must log an error message with the Log Service,&lt;br/&gt;
if present, and ignore the component description.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;At face value it seems to suggest that any CM factory configurations must be ignored when they match the factory component PID.  But the last sentence also makes a strong assertion that the component description must be ignored if matching factory configurations are detected while discovering a factory component description.  This seems overkill to me.  Why not just ignore the factory configurations?  Why must the factory component description be ignored altogether?&lt;/p&gt;

&lt;p&gt;The other issue is that if a matching factory configuration is created later, after a ComponentFactory has been registered and a ComponentInstance has been created (with newInstance) then felix SCR will dispose of the ComponentInstance.  In this case the component instance did not specify an update method.&lt;/p&gt;</description>
                <environment>All</environment>
        <key id="13006657">FELIX-5356</key>
            <summary>Component Factory and CM factory Configurations behave badly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tjwatson">Tom Watson</assignee>
                                    <reporter username="tjwatson">Tom Watson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Sep 2016 21:26:53 +0000</created>
                <updated>Tue, 11 Oct 2016 14:28:45 +0000</updated>
                            <resolved>Tue, 11 Oct 2016 14:28:45 +0000</resolved>
                                    <version>scr-2.0.6</version>
                                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15511326" author="djencks" created="Wed, 21 Sep 2016 22:01:55 +0000"  >&lt;p&gt;I&apos;d take your first point up with BJ.  I think it is intended to mean that &quot;nothing happens&quot; not that &quot;kill all the instances created by newInstance&quot;.  If it means what it says, we gotta fix it in R7 and provide a flag for more sensible behavior.&lt;/p&gt;

&lt;p&gt;For the 2nd point, I would investigate overriding getComponentMetadata() from AbstractComponentManager in ComponentFactoryImpl to return metadata that has ConfigurationPolicy.IGNORE.  Maybe this would be only if  the obsoleteFactoryComponent support is off (maybe it&apos;s time to drop that anyway) and I don&apos;t know if it would interfere with my PersistentFactoryComponent extension behavior.&lt;/p&gt;</comment>
                            <comment id="15512090" author="djencks" created="Thu, 22 Sep 2016 04:27:32 +0000"  >&lt;p&gt;On further consideration, setting the policy definitely won&apos;t work since a factory component can be configured by any number of singleton configurations.  A better approach might be to look at the configuration merging code in ConfigurableComponentHolder and prevent dealing with a matching factory configurations if the component is a factory component.  If the literal spec behavior is correct, that might be a place to implement it as well.&lt;/p&gt;</comment>
                            <comment id="15513228" author="tjwatson" created="Thu, 22 Sep 2016 12:55:10 +0000"  >&lt;p&gt;Yes, that is the approach I was going to use.  Basically just ignore factory configurations for factory components, otherwise the rest of the code/behavior with respect to singleton configuration stays the same.&lt;/p&gt;</comment>
                            <comment id="15565572" author="tjwatson" created="Tue, 11 Oct 2016 14:28:45 +0000"  >&lt;p&gt;I released a fix and testcase for this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33x73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>