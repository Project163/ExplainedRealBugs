<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:23:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2941] Felix Framework 3.2.0 and Framework Security 1.4.2 fails OSGI Conditional Permission Admin CT when running on IBM JVM 5 and 6.</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2941</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I was executing the ConditionalTestControl.testMultipleBundlesOnStack() test case of the org.osgi.test.cases.condpermadmin CT using org.apache.felix.framework-3.2.0.jar and org.apache.felix.framework.security-1.4.2.jar but ran into the following issue using IBM JVM 5 and 6. Ran fine on Oracle JVM 6 and IBM JVM 4.2.&lt;/p&gt;

&lt;p&gt;org.osgi.framework.BundleException: Activator start error in bundle org.osgi.test.cases.condpermadmin.tb2 &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt;.&lt;br/&gt;
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:1899)&lt;br/&gt;
	at org.apache.felix.framework.Felix.startBundle(Felix.java:1769)&lt;br/&gt;
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:927)&lt;br/&gt;
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:914)&lt;br/&gt;
	at org.osgi.test.support.compatibility.DefaultTestBundleControl.installBundle(DefaultTestBundleControl.java:510)&lt;br/&gt;
	at org.osgi.test.support.compatibility.DefaultTestBundleControl.installBundle(DefaultTestBundleControl.java:496)&lt;br/&gt;
	at org.osgi.test.cases.condpermadmin.junit.ConditionalTestControl.setState(ConditionalTestControl.java:823)&lt;br/&gt;
	at org.osgi.test.support.compatibility.DefaultTestBundleControl.setUp(DefaultTestBundleControl.java:51)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:128)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:120)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:230)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:225)&lt;br/&gt;
	at aQute.junit.Activator.test(Activator.java:200)&lt;br/&gt;
	at aQute.junit.Activator.run(Activator.java:51)&lt;br/&gt;
Caused by: java.lang.SecurityException: java.security.AccessControlException: Access denied (java.lang.RuntimePermission getClassLoader)&lt;br/&gt;
	at org.apache.felix.framework.Felix$1.checkPermission(Felix.java:560)&lt;br/&gt;
	at java.lang.ClassLoader.getParent(ClassLoader.java:420)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.getBootDelegationClassLoader(ModuleImpl.java:1684)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:722)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:72)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1801)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:619)&lt;br/&gt;
	at org.osgi.test.cases.condpermadmin.tb2.Activator.start(Activator.java:44)&lt;br/&gt;
	at org.apache.felix.framework.util.SecureAction$Actions.run(SecureAction.java:1243)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(AccessController.java:284)&lt;br/&gt;
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:620)&lt;br/&gt;
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:1852)&lt;br/&gt;
	... 16 more&lt;br/&gt;
Caused by: java.security.AccessControlException: Access denied (java.lang.RuntimePermission getClassLoader)&lt;br/&gt;
	at java.security.AccessController.checkPermission(AccessController.java:108)&lt;br/&gt;
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:544)&lt;br/&gt;
	at org.apache.felix.framework.Felix$1.checkPermission(Felix.java:556)&lt;br/&gt;
	... 27 more&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;add error to testMultipleBundlesOnStack(org.osgi.test.cases.condpermadmin.junit.ConditionalTestControl) : Activator start error in bundle org.osgi.test.cases.condpermadmin.tb2 &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt;.&lt;br/&gt;
org.osgi.framework.BundleException: Activator start error in bundle org.osgi.test.cases.condpermadmin.tb2 &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt;.&lt;br/&gt;
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:1899)&lt;br/&gt;
	at org.apache.felix.framework.Felix.startBundle(Felix.java:1769)&lt;br/&gt;
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:927)&lt;br/&gt;
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:914)&lt;br/&gt;
	at org.osgi.test.support.compatibility.DefaultTestBundleControl.installBundle(DefaultTestBundleControl.java:510)&lt;br/&gt;
	at org.osgi.test.support.compatibility.DefaultTestBundleControl.installBundle(DefaultTestBundleControl.java:496)&lt;br/&gt;
	at org.osgi.test.cases.condpermadmin.junit.ConditionalTestControl.setState(ConditionalTestControl.java:823)&lt;br/&gt;
	at org.osgi.test.support.compatibility.DefaultTestBundleControl.setUp(DefaultTestBundleControl.java:51)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:128)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:120)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:230)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:225)&lt;br/&gt;
	at aQute.junit.Activator.test(Activator.java:200)&lt;br/&gt;
	at aQute.junit.Activator.run(Activator.java:51)&lt;br/&gt;
Caused by: java.lang.SecurityException: java.security.AccessControlException: Access denied (java.lang.RuntimePermission getClassLoader)&lt;br/&gt;
	at org.apache.felix.framework.Felix$1.checkPermission(Felix.java:560)&lt;br/&gt;
	at java.lang.ClassLoader.getParent(ClassLoader.java:420)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.getBootDelegationClassLoader(ModuleImpl.java:1684)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:722)Not able to install testbundle bundle://2.0:0/tb2.jar&lt;br/&gt;
Nested java.lang.SecurityException: java.security.AccessControlException: Access denied (java.lang.RuntimePermission getClassLoader)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;	at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:72)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1801)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:619)&lt;br/&gt;
	at org.osgi.test.cases.condpermadmin.tb2.Activator.start(Activator.java:44)&lt;br/&gt;
	at org.apache.felix.framework.util.SecureAction$Actions.run(SecureAction.java:1243)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(AccessController.java:284)&lt;br/&gt;
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:620)&lt;br/&gt;
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:1852)&lt;br/&gt;
	... 16 more&lt;br/&gt;
Caused by: java.security.AccessControlException: Access denied (java.lang.RuntimePermission getClassLoader)&lt;br/&gt;
	at java.security.AccessController.checkPermission(AccessController.java:108)&lt;br/&gt;
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:544)&lt;br/&gt;
	at org.apache.felix.framework.Felix$1.checkPermission(Felix.java:556)&lt;br/&gt;
	... 27 more&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&amp;lt;&amp;lt; testMultipleBundlesOnStack(org.osgi.test.cases.condpermadmin.junit.ConditionalTestControl), fails=1&lt;/li&gt;
	&lt;li&gt;out: Not able to install testbundle bundle://2.0:0/tb2.jar&lt;br/&gt;
Nested java.lang.SecurityException: java.security.AccessControlException: Access denied (java.lang.RuntimePermission getClassLoader)&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;err: org.osgi.framework.BundleException: Activator start error in bundle org.osgi.test.cases.condpermadmin.tb2 &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt;.&lt;br/&gt;
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:1899)&lt;br/&gt;
	at org.apache.felix.framework.Felix.startBundle(Felix.java:1769)&lt;br/&gt;
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:927)&lt;br/&gt;
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:914)&lt;br/&gt;
	at org.osgi.test.support.compatibility.DefaultTestBundleControl.installBundle(DefaultTestBundleControl.java:510)&lt;br/&gt;
	at org.osgi.test.support.compatibility.DefaultTestBundleControl.installBundle(DefaultTestBundleControl.java:496)&lt;br/&gt;
	at org.osgi.test.cases.condpermadmin.junit.ConditionalTestControl.setState(ConditionalTestControl.java:823)&lt;br/&gt;
	at org.osgi.test.support.compatibility.DefaultTestBundleControl.setUp(DefaultTestBundleControl.java:51)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:128)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:120)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:230)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:225)&lt;br/&gt;
	at aQute.junit.Activator.test(Activator.java:200)&lt;br/&gt;
	at aQute.junit.Activator.run(Activator.java:51)&lt;br/&gt;
Caused by: java.lang.SecurityException: java.security.AccessControlException: Access denied (java.lang.RuntimePermission getClassLoader)&lt;br/&gt;
	at org.apache.felix.framework.Felix$1.checkPermission(Felix.java:560)&lt;br/&gt;
	at java.lang.ClassLoader.getParent(ClassLoader.java:420)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.getBootDelegationClassLoader(ModuleImpl.java:1684)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:722)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:72)&lt;br/&gt;
	at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1801)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:619)&lt;br/&gt;
	at org.osgi.test.cases.condpermadmin.tb2.Activator.start(Activator.java:44)&lt;br/&gt;
	at org.apache.felix.framework.util.SecureAction$Actions.run(SecureAction.java:1243)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(AccessController.java:284)&lt;br/&gt;
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:620)&lt;br/&gt;
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:1852)&lt;br/&gt;
	... 16 more&lt;br/&gt;
Caused by: java.security.AccessControlException: Access denied (java.lang.RuntimePermission getClassLoader)&lt;br/&gt;
	at java.security.AccessController.checkPermission(AccessController.java:108)&lt;br/&gt;
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:544)&lt;br/&gt;
	at org.apache.felix.framework.Felix$1.checkPermission(Felix.java:556)&lt;br/&gt;
	... 27 more&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment>java version &amp;quot;1.6.0&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pwi3260sr9-20101125_01(SR9))&lt;br/&gt;
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260sr9-20101124_69295 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20101124_069295&lt;br/&gt;
JIT  - r9_20101028_17488ifx2&lt;br/&gt;
GC   - 20101027_AA)&lt;br/&gt;
JCL  - 20101119_01&lt;br/&gt;
&lt;br/&gt;
java version &amp;quot;1.5.0&amp;quot;&lt;br/&gt;
Java(TM) 2 Runtime Environment, Standard Edition (build pwi32devifx-20070725 (SR5a))&lt;br/&gt;
IBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 Windows XP x86-32 j9vmwi3223-20070426 (JIT enabled)&lt;br/&gt;
J9VM - 20070420_12448_lHdSMR&lt;br/&gt;
JIT  - 20070419_1806_r8&lt;br/&gt;
GC   - 200704_19)&lt;br/&gt;
JCL  - 20070725</environment>
        <key id="12505717">FELIX-2941</key>
            <summary>Felix Framework 3.2.0 and Framework Security 1.4.2 fails OSGI Conditional Permission Admin CT when running on IBM JVM 5 and 6.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="jwross@us.ibm.com">John Ross</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Apr 2011 19:53:13 +0000</created>
                <updated>Wed, 11 May 2011 17:41:00 +0000</updated>
                            <resolved>Thu, 28 Apr 2011 21:38:07 +0000</resolved>
                                    <version>framework-3.2.0</version>
                                    <fixVersion>framework-3.2.2</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13026663" author="karlpauls" created="Thu, 28 Apr 2011 20:35:12 +0000"  >&lt;p&gt;This indeed looks like a bug. On first sight, it looks like we should be doing the getParent() call on the classloader in a doPriv ... I&apos;m wondering so why this is not a problem with the other vms. Maybe it has to do with the way classes are loaded. If I provide you with a patch to quickly test whether a doPriv fixes the issue can you test it for me (I have some difficulties finding and running IBM JVM 6).&lt;/p&gt;</comment>
                            <comment id="13026672" author="jwross@us.ibm.com" created="Thu, 28 Apr 2011 20:55:49 +0000"  >&lt;p&gt;I&apos;ll be happy to as long as you mean a patched binary jar(s) as I&apos;m not working with the source....&lt;/p&gt;</comment>
                            <comment id="13026677" author="karlpauls" created="Thu, 28 Apr 2011 21:02:32 +0000"  >&lt;p&gt;Can you try with this one? Its just a quick that uses doPrivs for the getParent call in question (based on the current trunk). &lt;/p&gt;

&lt;p&gt;If that doesn&apos;t work I&apos;ll have to first set-up an environment myself and debug things a little more closely.&lt;/p&gt;</comment>
                            <comment id="13026692" author="jwross@us.ibm.com" created="Thu, 28 Apr 2011 21:16:39 +0000"  >&lt;p&gt;The attached jar fixes the issue. The CT will execute successfuly using IBM JVM 5 and 6 (and continues to do so on Oracle 6 and IBM 4.2).&lt;/p&gt;</comment>
                            <comment id="13026708" author="karlpauls" created="Thu, 28 Apr 2011 21:32:08 +0000"  >&lt;p&gt;Ok. Good. I just commited the patch to trunk. Well make it part of the next release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12477693" name="felix.jar" size="415851" author="karlpauls" created="Thu, 28 Apr 2011 21:02:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vrbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183401</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>