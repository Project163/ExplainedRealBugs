<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:09:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1035] deadlock observed while using fileinstall to monitor multiple directories</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1035</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I am using fileinstall to monitor two directories. fileinstall is configured using config.properties file to monitor a dir called modules. Then I have a cfg file in modules dir that configures fileinstall to monitor a second dir called autodeploy-modules. During subsequent start of the framework, I see deadlock like this:&lt;/p&gt;

&lt;p&gt;Found one Java-level deadlock:&lt;br/&gt;
=============================&lt;br/&gt;
&quot;&lt;/p&gt;
{felix.fileinstall.poll=5000, felix.fileinstall.bundles.new.start=false, felix.fileinstall.dir=/space/ss141213/WS/gf/v3.trunk.new/publish/glassfish/modules/, felix.fileinstall.debug=1}&quot;:&lt;br/&gt;
  waiting to lock monitor 0x0851dac8 (object 0xa0518300, a java.net.URLClassLoader),&lt;br/&gt;
  which is held by &quot;Configuration Updater&quot;&lt;br/&gt;
&quot;Configuration Updater&quot;:&lt;br/&gt;
  waiting to lock monitor 0x085202a0 (object 0xa050bd68, a sun.misc.Launcher$ExtClassLoader),&lt;br/&gt;
  which is held by &quot;{felix.fileinstall.poll=5000, felix.fileinstall.bundles.new.start=false, felix.fileinstall.dir=/space/ss141213/WS/gf/v3.trunk.new/publish/glassfish/modules/, felix.fileinstall.debug=1}
&lt;p&gt;&quot;&lt;/p&gt;

&lt;p&gt;Java stack information for the threads listed above:&lt;br/&gt;
===================================================&lt;br/&gt;
&quot;&lt;/p&gt;
{felix.fileinstall.poll=5000, felix.fileinstall.bundles.new.start=false, felix.fileinstall.dir=/space/ss141213/WS/gf/v3.trunk.new/publish/glassfish/modules/, felix.fileinstall.debug=1}
&lt;p&gt;&quot;:&lt;br/&gt;
        at java.lang.Class.forName0(Native Method)&lt;br/&gt;
        at java.lang.Class.forName(Class.java:169)&lt;br/&gt;
        at org.apache.felix.framework.URLHandlersStreamHandlerProxy.class$(URLHandlersStreamHandlerProxy.java:75)&lt;br/&gt;
        at org.apache.felix.framework.URLHandlersStreamHandlerProxy.getStreamHandlerService(URLHandlersStreamHandlerProxy.java:438)&lt;br/&gt;
        at org.apache.felix.framework.URLHandlersStreamHandlerProxy.parseURL(URLHandlersStreamHandlerProxy.java:297)&lt;br/&gt;
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:596)&lt;br/&gt;
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:464)&lt;br/&gt;
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:413)&lt;br/&gt;
        at java.net.JarURLConnection.parseSpecs(JarURLConnection.java:161)&lt;br/&gt;
        at java.net.JarURLConnection.&amp;lt;init&amp;gt;(JarURLConnection.java:144)&lt;br/&gt;
        at sun.net.www.protocol.jar.JarURLConnection.&amp;lt;init&amp;gt;(JarURLConnection.java:63)&lt;br/&gt;
        at sun.net.www.protocol.jar.Handler.openConnection(Handler.java:24)&lt;br/&gt;
        at java.net.URL.openConnection(URL.java:945)&lt;br/&gt;
        at java.net.URL.openStream(URL.java:1009)&lt;br/&gt;
        at java.lang.ClassLoader.getSystemResourceAsStream(ClassLoader.java:1183)&lt;br/&gt;
        at java.lang.Class.getResourceAsStream(Class.java:2028)&lt;br/&gt;
        at sun.text.normalizer.ICUData.getStream(ICUData.java:43)&lt;br/&gt;
        at sun.text.normalizer.ICUData.getRequiredStream(ICUData.java:63)&lt;br/&gt;
        at sun.text.normalizer.NormalizerImpl.&amp;lt;init&amp;gt;(NormalizerImpl.java:243)&lt;br/&gt;
        at sun.text.normalizer.NormalizerImpl.&amp;lt;clinit&amp;gt;(NormalizerImpl.java:40)&lt;br/&gt;
        at sun.text.normalizer.NormalizerBase.decompose(NormalizerBase.java:707)&lt;br/&gt;
        at sun.text.normalizer.NormalizerBase$NFKDMode.normalize(NormalizerBase.java:348)&lt;br/&gt;
        at sun.text.normalizer.NormalizerBase.normalize(NormalizerBase.java:1592)&lt;br/&gt;
        at sun.text.normalizer.NormalizerBase.normalize(NormalizerBase.java:1573)&lt;br/&gt;
        at java.text.Normalizer.normalize(Normalizer.java:146)&lt;br/&gt;
        at sun.security.x509.AVA.toRFC2253CanonicalString(AVA.java:986)&lt;br/&gt;
        at sun.security.x509.RDN.toRFC2253StringInternal(RDN.java:430)&lt;br/&gt;
        at sun.security.x509.RDN.toRFC2253String(RDN.java:409)&lt;br/&gt;
        at sun.security.x509.X500Name.getRFC2253CanonicalName(X500Name.java:714)&lt;br/&gt;
        at sun.security.x509.X500Name.equals(X500Name.java:400)&lt;br/&gt;
        at sun.security.pkcs.PKCS7.getCertificate(PKCS7.java:609)&lt;br/&gt;
        at sun.security.pkcs.SignerInfo.getCertificate(SignerInfo.java:202)&lt;br/&gt;
        at sun.security.pkcs.SignerInfo.verify(SignerInfo.java:328)&lt;br/&gt;
        at sun.security.pkcs.PKCS7.verify(PKCS7.java:494)&lt;br/&gt;
        at sun.security.pkcs.PKCS7.verify(PKCS7.java:511)&lt;br/&gt;
        at sun.security.util.SignatureFileVerifier.processImpl(SignatureFileVerifier.java:199)&lt;br/&gt;
        at sun.security.util.SignatureFileVerifier.process(SignatureFileVerifier.java:176)&lt;br/&gt;
        at java.util.jar.JarVerifier.processEntry(JarVerifier.java:277)&lt;br/&gt;
        at java.util.jar.JarVerifier.update(JarVerifier.java:188)&lt;br/&gt;
        at java.util.jar.JarFile.initializeVerifier(JarFile.java:321)&lt;br/&gt;
        at java.util.jar.JarFile.getInputStream(JarFile.java:386)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0xa00f2c60&amp;gt; (a java.util.jar.JarFile)&lt;br/&gt;
        at sun.misc.URLClassPath$JarLoader$2.getInputStream(URLClassPath.java:689)&lt;br/&gt;
        at sun.misc.Resource.cachedInputStream(Resource.java:59)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa00f3530&amp;gt; (a sun.misc.URLClassPath$JarLoader$2)&lt;br/&gt;
        at sun.misc.Resource.getByteBuffer(Resource.java:154)&lt;br/&gt;
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:249)&lt;br/&gt;
        at java.net.URLClassLoader.access$000(URLClassLoader.java:56)&lt;br/&gt;
        at java.net.URLClassLoader$1.run(URLClassLoader.java:195)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa050bd68&amp;gt; (a sun.misc.Launcher$ExtClassLoader)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:299)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa05078d8&amp;gt; (a sun.misc.Launcher$AppClassLoader)&lt;br/&gt;
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa05078d8&amp;gt; (a sun.misc.Launcher$AppClassLoader)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)&lt;br/&gt;
        at sun.security.jca.ProviderConfig$3.run(ProviderConfig.java:234)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at sun.security.jca.ProviderConfig.doLoadProvider(ProviderConfig.java:225)&lt;br/&gt;
        at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:205)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa05078d8&amp;gt; (a sun.misc.Launcher$AppClassLoader)&lt;br/&gt;
        at sun.security.jca.ProviderList.getProvider(ProviderList.java:215)&lt;br/&gt;
        at sun.security.jca.ProviderList$3.get(ProviderList.java:130)&lt;br/&gt;
        at sun.security.jca.ProviderList$3.get(ProviderList.java:125)&lt;br/&gt;
        at java.util.AbstractList$Itr.next(AbstractList.java:345)&lt;br/&gt;
        at java.security.SecureRandom.getPrngAlgorithm(SecureRandom.java:522)&lt;br/&gt;
        at java.security.SecureRandom.getDefaultPRNG(SecureRandom.java:165)&lt;br/&gt;
        at java.security.SecureRandom.&amp;lt;init&amp;gt;(SecureRandom.java:133)&lt;br/&gt;
        at org.apache.felix.cm.impl.ConfigurationManager.createPid(ConfigurationManager.java:787)&lt;br/&gt;
        at org.apache.felix.cm.impl.ConfigurationManager.createFactoryConfiguration(ConfigurationManager.java:357)&lt;br/&gt;
        at org.apache.felix.cm.impl.ConfigurationAdminImpl.createFactoryConfiguration(ConfigurationAdminImpl.java:85)&lt;br/&gt;
        at org.apache.felix.fileinstall.DirectoryWatcher.getConfiguration(DirectoryWatcher.java:294)&lt;br/&gt;
        at org.apache.felix.fileinstall.DirectoryWatcher.setConfig(DirectoryWatcher.java:232)&lt;br/&gt;
        at org.apache.felix.fileinstall.DirectoryWatcher.doConfigs(DirectoryWatcher.java:162)&lt;br/&gt;
        at org.apache.felix.fileinstall.DirectoryWatcher.run(DirectoryWatcher.java:121)&lt;br/&gt;
&quot;Configuration Updater&quot;:&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:295)&lt;/li&gt;
	&lt;li&gt;waiting to lock &amp;lt;0xa050bd68&amp;gt; (a sun.misc.Launcher$ExtClassLoader)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:299)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa0518300&amp;gt; (a java.net.URLClassLoader)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)&lt;br/&gt;
        at org.apache.felix.framework.searchpolicy.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:480)&lt;br/&gt;
        at org.apache.felix.framework.searchpolicy.ModuleImpl.access$100(ModuleImpl.java:59)&lt;br/&gt;
        at org.apache.felix.framework.searchpolicy.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1434)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)&lt;br/&gt;
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa0a5ef58&amp;gt; (a org.apache.felix.framework.searchpolicy.ModuleImpl$ModuleClassLoader)&lt;br/&gt;
        at org.apache.felix.cm.impl.ConfigurationManager.getPersistenceManagers(ConfigurationManager.java:568)&lt;br/&gt;
        at org.apache.felix.cm.impl.ConfigurationManager.getFactory(ConfigurationManager.java:677)&lt;br/&gt;
        at org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceFactoryUpdate.run(ConfigurationManager.java:1014)&lt;br/&gt;
        at org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:88)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Found 1 deadlock.&lt;/p&gt;

&lt;p&gt;I tried to reproduce the issue using a simple program, but I could not. But, I am able to reproduce the issue in my environment, where I use GlassFish application server which runs on Felix and uses fileinstall.&lt;/p&gt;

&lt;p&gt;I understand this deadlock has to do with &quot;deadlock observed in Sun JVM during parallel classloading,&quot; given that the threads involved are Felix threads, can we put any workaround in exercised code path to avoid this deadlock?&lt;/p&gt;</description>
                <environment>Solaris 10/x86&lt;br/&gt;
java version &amp;quot;1.6.0_07&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_07-b06)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 10.0-b23, mixed mode, sharing)&lt;br/&gt;
fileinstall version #0.9.2&lt;br/&gt;
felix version #1.6.0</environment>
        <key id="12422628">FELIX-1035</key>
            <summary>deadlock observed while using fileinstall to monitor multiple directories</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="sahoo">Sanjeeb Kumar Sahoo</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Apr 2009 10:04:32 +0000</created>
                <updated>Thu, 30 Apr 2009 03:17:01 +0000</updated>
                            <resolved>Thu, 23 Apr 2009 08:56:35 +0000</resolved>
                                    <version>framework-1.6.0</version>
                                    <fixVersion>framework-1.6.1</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12698068" author="karlpauls" created="Sat, 11 Apr 2009 10:27:21 +0000"  >&lt;p&gt;I just commited a quick fix. Could you try with the current trunk and see whether that makes a difference? If not, I will have to investigate it more deeply.&lt;/p&gt;</comment>
                            <comment id="12698099" author="sahoo" created="Sat, 11 Apr 2009 15:09:40 +0000"  >&lt;p&gt;Karl,&lt;/p&gt;

&lt;p&gt;thanks for the quick turn aroud. After applying your fix, I tried reproducing the original issue. Although I could not get the original deadlock, I sometimes get a different deadlock as shown below:&lt;/p&gt;

&lt;p&gt;Found one Java-level deadlock:&lt;br/&gt;
=============================&lt;br/&gt;
&quot;&lt;/p&gt;
{felix.fileinstall.poll=5000, felix.fileinstall.bundles.new.start=false, felix.fileinstall.dir=/space/ss141213/WS/gf/v3.trunk.new/publish/glassfish/modules/, felix.fileinstall.debug=1}&quot;:&lt;br/&gt;
  waiting to lock monitor 0x080e8160 (object 0xa0517128, a java.net.URLClassLoader),&lt;br/&gt;
  which is held by &quot;FelixStartLevel&quot;&lt;br/&gt;
&quot;FelixStartLevel&quot;:&lt;br/&gt;
  waiting to lock monitor 0x08524dfc (object 0xa050bca0, a sun.misc.Launcher$ExtClassLoader),&lt;br/&gt;
  which is held by &quot;{felix.fileinstall.poll=5000, felix.fileinstall.bundles.new.start=false, felix.fileinstall.dir=/space/ss141213/WS/gf/v3.trunk.new/publish/glassfish/modules/, felix.fileinstall.debug=1}
&lt;p&gt;&quot;&lt;/p&gt;

&lt;p&gt;Java stack information for the threads listed above:&lt;br/&gt;
===================================================&lt;br/&gt;
&quot;&lt;/p&gt;
{felix.fileinstall.poll=5000, felix.fileinstall.bundles.new.start=false, felix.fileinstall.dir=/space/ss141213/WS/gf/v3.trunk.new/publish/glassfish/modules/, felix.fileinstall.debug=1}
&lt;p&gt;&quot;:&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:295)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;0xa0517128&amp;gt; (a java.net.URLClassLoader)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)&lt;br/&gt;
        at org.apache.felix.framework.URLHandlersStreamHandlerProxy.getStreamHandlerService(URLHandlersStreamHandlerProxy.java:438)&lt;br/&gt;
        at org.apache.felix.framework.URLHandlersStreamHandlerProxy.parseURL(URLHandlersStreamHandlerProxy.java:297)&lt;br/&gt;
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:596)&lt;br/&gt;
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:464)&lt;br/&gt;
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:413)&lt;br/&gt;
        at java.net.JarURLConnection.parseSpecs(JarURLConnection.java:161)&lt;br/&gt;
        at java.net.JarURLConnection.&amp;lt;init&amp;gt;(JarURLConnection.java:144)&lt;br/&gt;
        at sun.net.www.protocol.jar.JarURLConnection.&amp;lt;init&amp;gt;(JarURLConnection.java:63)&lt;br/&gt;
        at sun.net.www.protocol.jar.Handler.openConnection(Handler.java:24)&lt;br/&gt;
        at java.net.URL.openConnection(URL.java:945)&lt;br/&gt;
        at java.net.URL.openStream(URL.java:1009)&lt;br/&gt;
        at java.lang.ClassLoader.getSystemResourceAsStream(ClassLoader.java:1183)&lt;br/&gt;
        at java.lang.Class.getResourceAsStream(Class.java:2028)&lt;br/&gt;
        at sun.text.normalizer.ICUData.getStream(ICUData.java:43)&lt;br/&gt;
        at sun.text.normalizer.ICUData.getRequiredStream(ICUData.java:63)&lt;br/&gt;
        at sun.text.normalizer.NormalizerImpl.&amp;lt;init&amp;gt;(NormalizerImpl.java:243)&lt;br/&gt;
        at sun.text.normalizer.NormalizerImpl.&amp;lt;clinit&amp;gt;(NormalizerImpl.java:40)&lt;br/&gt;
        at sun.text.normalizer.NormalizerBase.decompose(NormalizerBase.java:707)&lt;br/&gt;
        at sun.text.normalizer.NormalizerBase$NFKDMode.normalize(NormalizerBase.java:348)&lt;br/&gt;
        at sun.text.normalizer.NormalizerBase.normalize(NormalizerBase.java:1592)&lt;br/&gt;
        at sun.text.normalizer.NormalizerBase.normalize(NormalizerBase.java:1573)&lt;br/&gt;
        at java.text.Normalizer.normalize(Normalizer.java:146)&lt;br/&gt;
        at sun.security.x509.AVA.toRFC2253CanonicalString(AVA.java:986)&lt;br/&gt;
        at sun.security.x509.RDN.toRFC2253StringInternal(RDN.java:430)&lt;br/&gt;
        at sun.security.x509.RDN.toRFC2253String(RDN.java:409)&lt;br/&gt;
        at sun.security.x509.X500Name.getRFC2253CanonicalName(X500Name.java:714)&lt;br/&gt;
        at sun.security.x509.X500Name.equals(X500Name.java:400)&lt;br/&gt;
        at sun.security.pkcs.PKCS7.getCertificate(PKCS7.java:609)&lt;br/&gt;
        at sun.security.pkcs.SignerInfo.getCertificate(SignerInfo.java:202)&lt;br/&gt;
        at sun.security.pkcs.SignerInfo.verify(SignerInfo.java:328)&lt;br/&gt;
        at sun.security.pkcs.PKCS7.verify(PKCS7.java:494)&lt;br/&gt;
        at sun.security.pkcs.PKCS7.verify(PKCS7.java:511)&lt;br/&gt;
        at sun.security.util.SignatureFileVerifier.processImpl(SignatureFileVerifier.java:199)&lt;br/&gt;
        at sun.security.util.SignatureFileVerifier.process(SignatureFileVerifier.java:176)&lt;br/&gt;
        at java.util.jar.JarVerifier.processEntry(JarVerifier.java:277)&lt;br/&gt;
        at java.util.jar.JarVerifier.update(JarVerifier.java:188)&lt;br/&gt;
        at java.util.jar.JarFile.initializeVerifier(JarFile.java:321)&lt;br/&gt;
        at java.util.jar.JarFile.getInputStream(JarFile.java:386)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa0a50c38&amp;gt; (a java.util.jar.JarFile)&lt;br/&gt;
        at sun.misc.URLClassPath$JarLoader$2.getInputStream(URLClassPath.java:689)&lt;br/&gt;
        at sun.misc.Resource.cachedInputStream(Resource.java:59)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa0a50cb0&amp;gt; (a sun.misc.URLClassPath$JarLoader$2)&lt;br/&gt;
        at sun.misc.Resource.getByteBuffer(Resource.java:154)&lt;br/&gt;
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:249)&lt;br/&gt;
        at java.net.URLClassLoader.access$000(URLClassLoader.java:56)&lt;br/&gt;
        at java.net.URLClassLoader$1.run(URLClassLoader.java:195)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa050bca0&amp;gt; (a sun.misc.Launcher$ExtClassLoader)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:299)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa0507840&amp;gt; (a sun.misc.Launcher$AppClassLoader)&lt;br/&gt;
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa0507840&amp;gt; (a sun.misc.Launcher$AppClassLoader)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)&lt;br/&gt;
        at sun.security.jca.ProviderConfig$3.run(ProviderConfig.java:234)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at sun.security.jca.ProviderConfig.doLoadProvider(ProviderConfig.java:225)&lt;br/&gt;
        at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:205)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa0507840&amp;gt; (a sun.misc.Launcher$AppClassLoader)&lt;br/&gt;
        at sun.security.jca.ProviderList.getProvider(ProviderList.java:215)&lt;br/&gt;
        at sun.security.jca.ProviderList$3.get(ProviderList.java:130)&lt;br/&gt;
        at sun.security.jca.ProviderList$3.get(ProviderList.java:125)&lt;br/&gt;
        at java.util.AbstractList$Itr.next(AbstractList.java:345)&lt;br/&gt;
        at java.security.SecureRandom.getPrngAlgorithm(SecureRandom.java:522)&lt;br/&gt;
        at java.security.SecureRandom.getDefaultPRNG(SecureRandom.java:165)&lt;br/&gt;
        at java.security.SecureRandom.&amp;lt;init&amp;gt;(SecureRandom.java:133)&lt;br/&gt;
        at org.apache.felix.cm.impl.ConfigurationManager.createPid(ConfigurationManager.java:787)&lt;br/&gt;
        at org.apache.felix.cm.impl.ConfigurationManager.createFactoryConfiguration(ConfigurationManager.java:357)&lt;br/&gt;
        at org.apache.felix.cm.impl.ConfigurationAdminImpl.createFactoryConfiguration(ConfigurationAdminImpl.java:85)&lt;br/&gt;
        at org.apache.felix.fileinstall.DirectoryWatcher.getConfiguration(DirectoryWatcher.java:294)&lt;br/&gt;
        at org.apache.felix.fileinstall.DirectoryWatcher.setConfig(DirectoryWatcher.java:232)&lt;br/&gt;
        at org.apache.felix.fileinstall.DirectoryWatcher.doConfigs(DirectoryWatcher.java:162)&lt;br/&gt;
        at org.apache.felix.fileinstall.DirectoryWatcher.run(DirectoryWatcher.java:121)&lt;br/&gt;
&quot;FelixStartLevel&quot;:&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:295)&lt;/li&gt;
	&lt;li&gt;waiting to lock &amp;lt;0xa050bca0&amp;gt; (a sun.misc.Launcher$ExtClassLoader)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:299)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa0517128&amp;gt; (a java.net.URLClassLoader)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)&lt;br/&gt;
        at org.apache.felix.framework.searchpolicy.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:480)&lt;br/&gt;
        at org.apache.felix.framework.searchpolicy.ModuleImpl.access$100(ModuleImpl.java:59)&lt;br/&gt;
        at org.apache.felix.framework.searchpolicy.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1434)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)&lt;br/&gt;
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa0a7a080&amp;gt; (a org.apache.felix.framework.searchpolicy.ModuleImpl$ModuleClassLoader)&lt;br/&gt;
        at java.lang.Class.getDeclaredConstructors0(Native Method)&lt;br/&gt;
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)&lt;br/&gt;
        at java.lang.Class.getConstructor0(Class.java:2699)&lt;br/&gt;
        at java.lang.Class.newInstance0(Class.java:326)&lt;br/&gt;
        at java.lang.Class.newInstance(Class.java:308)&lt;br/&gt;
        at org.apache.felix.framework.Felix.createBundleActivator(Felix.java:3341)&lt;br/&gt;
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1453)&lt;br/&gt;
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:774)&lt;br/&gt;
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:755)&lt;br/&gt;
        at org.jvnet.hk2.osgimain.Main.start(Main.java:104)&lt;br/&gt;
        at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:589)&lt;br/&gt;
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1458)&lt;br/&gt;
        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:984)&lt;br/&gt;
        at org.apache.felix.framework.StartLevelImpl.run(StartLevelImpl.java:263)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Found 1 deadlock.&lt;/p&gt;

&lt;p&gt;What is this SecureRandom thing? Is it really needed?&lt;/p&gt;

&lt;p&gt;Sahoo&lt;/p&gt;</comment>
                            <comment id="12699132" author="karlpauls" created="Wed, 15 Apr 2009 09:47:23 +0000"  >&lt;p&gt;Thanks for providing the update. I&apos;m looking into it. &lt;/p&gt;

&lt;p&gt;The reason is that we still try to load classes inside the urlhandlers which in this case happens while we are inside a classload already because the classloader uses urls to load the bytes of the class. I know how to fix it but it is more difficult then it looks mainly because the URLHandlers are a mine field already and I have to be very careful not to make it break in other ways. I&apos;ll come back to this issue soon. &lt;/p&gt;</comment>
                            <comment id="12700159" author="karlpauls" created="Fri, 17 Apr 2009 12:41:48 +0000"  >&lt;p&gt;Ok. I did commit another attempt at fixing this issue. Could you update to trunk and see whether it makes any difference? &lt;/p&gt;</comment>
                            <comment id="12701853" author="rickhall" created="Thu, 23 Apr 2009 08:56:35 +0000"  >&lt;p&gt;Marking as resolved, since we haven&apos;t heard otherwise. Please close if you get a chance.&lt;/p&gt;</comment>
                            <comment id="12704456" author="sahoo" created="Thu, 30 Apr 2009 03:17:00 +0000"  >&lt;p&gt;It took some time to test, but the fix seems to have fixed the deadlock. So, I am closing this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57955</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0w10f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184969</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>