<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:07:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-730] Can&apos;t import highest package version</title>
                <link>https://issues.apache.org/jira/browse/FELIX-730</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;This issue follows up the thread: &lt;a href=&quot;http://www.mail-archive.com/users@felix.apache.org/msg02152.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/users@felix.apache.org/msg02152.html&lt;/a&gt;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I use jdk 1.6, and all the jdk packages are re-exported from the felix.properties file, with version = 1.6.0&lt;/li&gt;
	&lt;li&gt;I have a bundle &quot;jaxb.jar&quot; which exports package &quot;javax.xml.bind&quot; with version 2.1.4&lt;br/&gt;
(and the jdk also exports that package, but with version = 1.6.0).&lt;/li&gt;
	&lt;li&gt;a bundle &quot;SipServletDeployer&quot; simply imports &quot;javax.xml.bind&quot; (but without any versions)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-&amp;gt; the issue is: the bundle &quot;SipServletDeployer&quot; gets wired to the 1.6.0 (jdk) version of javax.xml.bind, instead of version 2.1.4.&lt;br/&gt;
(but if I force &quot;version=2.1.4&quot; in  &quot;SipServletDeployer&quot;, then it is properly wired to the jaxb.jar bundle).&lt;/p&gt;

&lt;p&gt;Richard; could you please take a look at the log attached to this issue, because I don&apos;t think package &quot;javax.xml.bind&quot; is &lt;br/&gt;
already loaded from system bundle (version 1.6.0) at the time &quot;SipServletDeployer&quot; is loaded ...&lt;/p&gt;

&lt;p&gt;you can grep &quot;javax.xml.bind&quot; from the log file:&lt;/p&gt;

&lt;p&gt;DEBUG: WIRE: 64.0 -&amp;gt; javax.xml.bind.annotation -&amp;gt; 15.0     (bundle 64 is wired to 15 (jaxb.jar) because it imports javax.xml.bind;version=2.1.4&lt;br/&gt;
DEBUG: WIRE: 62.0 -&amp;gt; javax.xml.bind -&amp;gt; 15.0                     (bundle 62 is wired to  15 (jaxb.jar) because it imports javax.xml.bind;version=2.1.4&lt;br/&gt;
DEBUG: WIRE: 30.0 -&amp;gt; javax.xml.bind -&amp;gt; 0                         (but bundle 30 (SipServletDeployer) is wired to jdk (system bundle) because it does not import with v=2.1.4 ...&lt;br/&gt;
etc ...&lt;/p&gt;</description>
                <environment>linux</environment>
        <key id="12404826">FELIX-730</key>
            <summary>Can&apos;t import highest package version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="pderop">Pierre De Rop</reporter>
                        <labels>
                    </labels>
                <created>Sun, 21 Sep 2008 21:12:51 +0000</created>
                <updated>Tue, 14 Oct 2008 15:19:21 +0000</updated>
                            <resolved>Wed, 24 Sep 2008 20:58:56 +0000</resolved>
                                                    <fixVersion>framework-1.4.0</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12633461" author="rickhall" created="Mon, 22 Sep 2008 20:01:50 +0000"  >&lt;p&gt;I am able to reproduce this issue. It definitely is the case that we are considering the exported packages from system bundle as &quot;in use&quot;. I need to investigate the proper definition of &quot;in use&quot; some more, but from my POV, I think we are not defining it correctly. So, that might mean that we will change this behavior. I will report back when I know more.&lt;/p&gt;</comment>
                            <comment id="12633517" author="rickhall" created="Mon, 22 Sep 2008 21:41:43 +0000"  >&lt;p&gt;After discussing this with Tom Watson, I think Felix might be implementing it correctly after all. The R4.1 spec states at the end of 3.7 that the preference is for &quot;resolved&quot; exporters over unresolved ones. I was originally thinking it was &quot;in use&quot; exporters, which would be ones that actually have a wire to them, but a &quot;resolved&quot; exporter is simply one that has been previously resolved. The system bundle must be resolved, so since the importer matches both, then the resolved state of the system bundle gives it higher priority, version number has a lower precedence. I will still look into this a little more before resolving the issue.&lt;/p&gt;</comment>
                            <comment id="12634291" author="rickhall" created="Wed, 24 Sep 2008 20:58:56 +0000"  >&lt;p&gt;I will mark this bug as &quot;fixed&quot;, although it wasn&apos;t really a bug per se, since the resolver was doing the correct thing. However, I did realize that there was perhaps some confusion regarding whether the resolver should be keeping track of &quot;in use&quot; vs &quot;resolved&quot; packages. As a result, I modified the resolver to make it clear that we are dealing with &quot;resolved&quot; packages and improved some of the data structure handling that was not previously correct since it was assuming &quot;in use&quot; semantics. I did uncover a bug in the resolver, but I will open a new issue for that.&lt;/p&gt;

&lt;p&gt;Peirre, if you are satisfied with this, please close this issue.&lt;/p&gt;</comment>
                            <comment id="12635367" author="pderop" created="Mon, 29 Sep 2008 12:49:46 +0000"  >&lt;p&gt;Hi Richard;&lt;/p&gt;

&lt;p&gt;I have checked the latest trunk and i still have the same behaviour: If I don&apos;t provide explicitly the version number, then my bundle is&lt;br/&gt;
wired to the system bundle.&lt;/p&gt;

&lt;p&gt;I am not sure whether I understand correctly your last message regarding this issue: &lt;br/&gt;
Do you assume that, after your last fix, I should be able to be wired to the highest version (without providing it) ?&lt;br/&gt;
I just wan&apos;t to be sure, because the behaviour has not changed since the previous trunk version (before your fix).&lt;/p&gt;

&lt;p&gt;(please close this ticket if every thing is ok ...)&lt;/p&gt;

&lt;p&gt;Best Regards&lt;br/&gt;
/pierre&lt;/p&gt;
</comment>
                            <comment id="12635393" author="rickhall" created="Mon, 29 Sep 2008 14:45:03 +0000"  >&lt;p&gt;Yes, Pierre, you should see the same behavior. The reason is that the resolver favors &quot;resolved&quot; exports when chosing a candidate. The exports from the system bundle are always resolved, so they will always have priority over unresolved ones. To do a test, you could try to resolve your other exporter. If both the system bundle and your other exporter are resolved, then when you resolve the client, it should wire to the higher version of the package.&lt;/p&gt;

&lt;p&gt;I did make a change as a result of this bug, but it won&apos;t change your scenario. The issue I changed was that the resolver was using &quot;in use&quot; (i.e., if there was a wire to the package) instead of &quot;resolved&quot; as the state to determine whether the export was given higher priority or not. This was a spec compliance bug, since it doesn&apos;t matter whether the package is used or not, it only matters if the exporter is resolved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12390594" name="framework.log" size="46847" author="pderop" created="Sun, 21 Sep 2008 21:14:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58259</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1aq2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>270689</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>