<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:11:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4416] Ability to specify an encoding for config files</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4416</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;FileInstall always use ISO-8859-1 for reading cfg file, even if the CFG file is not encoded in ISO-8859-1.&lt;/p&gt;

&lt;p&gt;So when the CFG file contains non-ascii characters, those characters are &quot;transformed&quot; during parsing. Typically my file contains the line &quot;error.message.210=Identifiant d&apos;entit&#233; cible invalide&quot; (without the &quot;&quot;) but after FileInstall parsing, my string is transformed into &quot;Identifiant d&apos;entit&#195;&#169; cible invalide&quot; (still without the &quot;&quot;).&lt;/p&gt;

&lt;p&gt;The org.apache.felix.utils.properties.Properties class has a default encoding defined to ISO-8859-1,which is always used whatever the actual file encoding is.&lt;/p&gt;</description>
                <environment>Karaf 2.3.3</environment>
        <key id="12693345">FELIX-4416</key>
            <summary>Ability to specify an encoding for config files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="acartapanis">Alexandre Cartapanis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Feb 2014 13:47:46 +0000</created>
                <updated>Fri, 8 Sep 2017 08:13:16 +0000</updated>
                            <resolved>Fri, 8 Sep 2017 08:13:16 +0000</resolved>
                                    <version>fileinstall-3.2.6</version>
                                    <fixVersion>fileinstall-3.6.2</fixVersion>
                                    <component>File Install</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13919065" author="barthel" created="Tue, 4 Mar 2014 06:57:36 +0000"  >&lt;p&gt;Properties are always defined in ISO-8859-1.&lt;br/&gt;
See &lt;a href=&quot;http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For use another Characterset instead of ISO-8859-1, the properties files has to prepare with native2ascii tool provided by JDK.&lt;/p&gt;</comment>
                            <comment id="13922378" author="acartapanis" created="Thu, 6 Mar 2014 12:05:14 +0000"  >&lt;p&gt;Quotation from your link: &lt;br/&gt;
&quot;The load(Reader) / store(Writer, String) methods load and store properties from and to a character based stream in a simple line-oriented format specified below. The load(InputStream) / store(OutputStream, String) methods work the same way as the load(Reader)/store(Writer, String) pair, except the input/output stream is encoded in ISO 8859-1 character encoding. Characters that cannot be directly represented in this encoding can be written using Unicode escapes as defined in section 3.3 of The Java&#8482; Language Specification; only a single &apos;u&apos; character is allowed in an escape sequence. The native2ascii tool can be used to convert property files to and from other character encodings.&lt;br/&gt;
The loadFromXML(InputStream) and storeToXML(OutputStream, String, String) methods load and store properties in a simple XML format. By default the UTF-8 character encoding is used, however a specific encoding may be specified if required. An XML properties document has the following DOCTYPE declaration:&quot;&lt;/p&gt;

&lt;p&gt;For me i understand as this:&lt;br/&gt;
Loading properties from a Reader can be done for any encoding&lt;br/&gt;
Loading properties from an InputStream always use ISO 8859-1&lt;br/&gt;
Loading properties from an XML file should be possible, and in this case UTF-8 is the default encoding.&lt;/p&gt;

&lt;p&gt;Why do you use the &quot;load(InputStream ...)&quot; method and not the &quot;load(Reader ...)&quot; method ? This would resolve the problem for me.&lt;/p&gt;</comment>
                            <comment id="13922414" author="gnt" created="Thu, 6 Mar 2014 12:20:30 +0000"  >&lt;p&gt;That would not really help, as the reader that file install would create would have to be given the encoding to decode.&lt;/p&gt;</comment>
                            <comment id="13922466" author="acartapanis" created="Thu, 6 Mar 2014 13:04:42 +0000"  >&lt;p&gt;Yes, but in this case, it will use the system.fileEncoding properties, wich i can specify at startup...&lt;br/&gt;
Or even through a specific karaf properties, something like &quot;felix.fileinstall.encoding&quot;, and still use ISO-9885 as default&lt;/p&gt;</comment>
                            <comment id="13939560" author="gnt" created="Tue, 18 Mar 2014 18:04:12 +0000"  >&lt;p&gt;I&apos;m ok with adding a felix.fileinstall.configEncoding property which would default to ISO-9885.&lt;br/&gt;
Do you think you would have time for to write a patch for that ?&lt;br/&gt;
I&apos;d like to release a new version of fileinstall in the coming weeks...&lt;/p&gt;</comment>
                            <comment id="14556125" author="acartapanis" created="Fri, 22 May 2015 13:16:38 +0000"  >&lt;p&gt;How do you want this property to be specified ? Through a -Dfelix.fileinstall.configEncoding=UTF-8 ?&lt;/p&gt;</comment>
                            <comment id="14601494" author="acartapanis" created="Thu, 25 Jun 2015 16:38:32 +0000"  >&lt;p&gt;Please see &lt;a href=&quot;https://github.com/apache/felix/pull/25&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/25&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15371061" author="thanekamp" created="Mon, 11 Jul 2016 16:05:00 +0000"  >&lt;p&gt;What is the current status of this issue? Is the pull request something that can be merged back or is the solution offered unsatisfactory and why?&lt;br/&gt;
I am running into the same issue as my UTF-8 encoded CFG files are interpreted as ISO-8859-1.&lt;/p&gt;</comment>
                            <comment id="16158283" author="gnt" created="Fri, 8 Sep 2017 08:13:16 +0000"  >&lt;p&gt;Committing to &lt;a href=&quot;https://svn.apache.org/repos/asf/felix/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/felix/trunk&lt;/a&gt; ...&lt;br/&gt;
	M	fileinstall/src/main/java/org/apache/felix/fileinstall/internal/ConfigInstaller.java&lt;br/&gt;
	M	fileinstall/src/main/java/org/apache/felix/fileinstall/internal/DirectoryWatcher.java&lt;br/&gt;
	M	fileinstall/src/main/java/org/apache/felix/fileinstall/internal/FileInstall.java&lt;br/&gt;
	M	fileinstall/src/test/java/org/apache/felix/fileinstall/internal/ConfigInstallerTest.java&lt;br/&gt;
Committed r1807678&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371930</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1s3jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372234</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>