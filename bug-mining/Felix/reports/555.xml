<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:11:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1477] ConfigAdmin implementation is not thread-safe</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1477</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I&apos;ve been doing some work with ConfigAdmin in a multi-threaded environment and have come across a number of issues caused by thread safety problems. The symptoms are typically either an IllegalStateException from ConfiguationAdapter.checkDeleted when, in fact, the Configuration has not been deleted, or a NPE, where PersistenceManager is checked once for being non-null, and the used again without re-checking for it having been nulled out, e.g. due to concurrent invocations of delete and update.&lt;/p&gt;

&lt;p&gt;I tracked down a common cause of the IllegalStateException from checkDeleted to FilePersistenceManager&apos;s exists method. If exists is called on one thread while store (for an update) is being run on another, the rename can cause exists to incorrectly return false. synchronizing on this in exists appears to resolve this problem.&lt;/p&gt;

&lt;p&gt;I&apos;ve produced a patch that goes someway to improve the thread-safety, although I does not make the implementation completely thread-safe. Without the patch in place I was seeing a failure about one run in three. Since applying the patch I have yet to see a failure after more than 100 runs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432882">FELIX-1477</key>
            <summary>ConfigAdmin implementation is not thread-safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="awilkinson">Andy Wilkinson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Aug 2009 14:30:09 +0000</created>
                <updated>Tue, 25 Aug 2009 08:09:16 +0000</updated>
                            <resolved>Fri, 14 Aug 2009 19:51:43 +0000</resolved>
                                    <version>configadmin-1.0.10</version>
                                    <fixVersion>configadmin-1.2.0</fixVersion>
                                    <component>Configuration Admin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12743393" author="fmeschbe" created="Fri, 14 Aug 2009 19:51:43 +0000"  >&lt;p&gt;Thanks for providing the patch.&lt;/p&gt;

&lt;p&gt;I have applied it (slightly modified for formatting) in Rev. 804344.&lt;/p&gt;

&lt;p&gt;Please close this issue, if it now works as expected for you. Thanks.&lt;/p&gt;</comment>
                            <comment id="12747289" author="fmeschbe" created="Tue, 25 Aug 2009 08:09:16 +0000"  >&lt;p&gt;Close all issues now this version has been released&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12416323" name="thread-safety.patch" size="10917" author="awilkinson" created="Wed, 12 Aug 2009 14:31:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57547</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0w0nz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>