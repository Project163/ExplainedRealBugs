<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:18:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2130] [Karaf] Failover Clustering Mechanism - Database shutdown / loss results in all Karaf instances becoming Active on restart of that DB</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2130</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>
&lt;p&gt;Two part issue.&lt;br/&gt;
1) Oracle isAlive() method needs to poll its connection to DB to ensure connection alive.&lt;/p&gt;

&lt;p&gt;2) Main#lock() remove second break statement - in the event of DB service loss this breaks the lock out of normal spin lock routine.&lt;/p&gt;

&lt;p&gt;I&apos;ll be supplying a patch for this issue.&lt;/p&gt;</description>
                <environment>Oracle XE Database backend for Karaf JDBC Lock.</environment>
        <key id="12457297">FELIX-2130</key>
            <summary>[Karaf] Failover Clustering Mechanism - Database shutdown / loss results in all Karaf instances becoming Active on restart of that DB</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="jgoodyear">Jamie Mark Goodyear</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Feb 2010 14:28:32 +0000</created>
                <updated>Fri, 30 Apr 2010 08:34:26 +0000</updated>
                            <resolved>Fri, 30 Apr 2010 08:33:27 +0000</resolved>
                                                    <fixVersion>karaf 1.6.0</fixVersion>
                                    <component>Karaf</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12837927" author="jgoodyear" created="Wed, 24 Feb 2010 18:22:20 +0000"  >&lt;p&gt;File: felix2130.txt&lt;/p&gt;

&lt;p&gt;Contains fixes for the two issues outlined in this Jira entry.&lt;/p&gt;</comment>
                            <comment id="12843766" author="javier" created="Wed, 10 Mar 2010 20:59:08 +0000"  >&lt;p&gt;hi,&lt;/p&gt;

&lt;p&gt;remove the break statement is ok, but the log will grow a lot with a DB error in the loop of the Main#lock(). it would be great a sleep or incremental sleep &lt;/p&gt;

&lt;p&gt;javier&lt;/p&gt;</comment>
                            <comment id="12862352" author="jgoodyear" created="Thu, 29 Apr 2010 19:06:56 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;In the event that the DB is lost already exists a &quot;Thread.sleep(lockDelay);&quot; within the Main#lock method &amp;#8211; we can extend this out to be a larger value or as you suggested make this an incremental delay. Will post back an updated patch, thanks for that catch.&lt;/p&gt;

&lt;p&gt;Jamie&lt;/p&gt;</comment>
                            <comment id="12862493" author="jgoodyear" created="Fri, 30 Apr 2010 00:32:21 +0000"  >&lt;p&gt;File: felix2130.patch&lt;/p&gt;

&lt;p&gt;This updated file contains the changes from the original patch file, plus an incremental sleep that resets when a successful lock occurs.&lt;/p&gt;</comment>
                            <comment id="12862582" author="gnt" created="Fri, 30 Apr 2010 08:33:27 +0000"  >&lt;p&gt;I&apos;ve applied the first patch as I don&apos;t think having a growing delay for the keep alive is a good idea.   I would be ok with a different value if there is a need, but using a growing delay would mean that after some time, the delay for the keep alive could be one day, which does not make sense i think.&lt;/p&gt;</comment>
                            <comment id="12862585" author="gnt" created="Fri, 30 Apr 2010 08:34:26 +0000"  >&lt;p&gt;Committing to &lt;a href=&quot;https://svn.apache.org/repos/asf/felix/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/felix/trunk&lt;/a&gt; ...&lt;br/&gt;
	M	karaf/main/src/main/java/org/apache/felix/karaf/main/Main.java&lt;br/&gt;
	M	karaf/main/src/main/java/org/apache/felix/karaf/main/OracleJDBCLock.java&lt;br/&gt;
Committed r939585&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12443254" name="felix2130.patch" size="2744" author="jgoodyear" created="Fri, 30 Apr 2010 00:32:21 +0000"/>
                            <attachment id="12436882" name="felix2130.txt" size="1744" author="jgoodyear" created="Wed, 24 Feb 2010 18:22:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56604</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vr8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>