<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:11:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4906] Changes in symlinked bundles not detected with NIO2 WatcherScanner</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4906</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Since the new NIO2 WatcherScanner was introduced as part of FileInstall 3.4.0, I&apos;ve noticed that FileInstall no longer detects changes to files symbolically linked to from the deploy directory. Also, there may be additional issues with network-mounted directories as well. These can be worked around by setting the felix.fileinstall.disableNio2 option to true, though this isn&apos;t ideal.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12832862">FELIX-4906</key>
            <summary>Changes in symlinked bundles not detected with NIO2 WatcherScanner</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="thully">Tim Hull</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 May 2015 21:12:33 +0000</created>
                <updated>Thu, 25 Jan 2018 13:17:02 +0000</updated>
                            <resolved>Wed, 18 Oct 2017 12:19:58 +0000</resolved>
                                    <version>fileinstall-3.4.0</version>
                    <version>fileinstall-3.4.2</version>
                    <version>fileinstall-3.5.0</version>
                                    <fixVersion>fileinstall-3.6.4</fixVersion>
                                    <component>File Install</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15058277" author="gnt" created="Tue, 15 Dec 2015 16:27:43 +0000"  >&lt;p&gt;Committing to &lt;a href=&quot;https://svn.apache.org/repos/asf/felix/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/felix/trunk&lt;/a&gt; ...&lt;br/&gt;
	M	fileinstall/src/main/java/org/apache/felix/fileinstall/internal/Watcher.java&lt;br/&gt;
Committed r1720189&lt;/p&gt;</comment>
                            <comment id="15383839" author="rvigniel" created="Tue, 19 Jul 2016 09:12:45 +0000"  >&lt;p&gt;Hi&lt;br/&gt;
symlinks do not fully work yet on 3.5.2.&lt;/p&gt;

&lt;p&gt;if a new link on a bundle appears, it&apos;s ok.&lt;/p&gt;

&lt;p&gt;but if the linked file is updated ( config file modified for example ), the change is not detected.&lt;/p&gt;

&lt;p&gt;everything was ok without NIO.&lt;/p&gt;


&lt;p&gt;in the code, there is some NOFOLLOW_LINKS options that may prevents change detection on symlinked files.&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/felix/trunk/fileinstall/src/main/java/org/apache/felix/fileinstall/internal/Watcher.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/felix/trunk/fileinstall/src/main/java/org/apache/felix/fileinstall/internal/Watcher.java&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (kind == ENTRY_CREATE) {
                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Files.isDirectory(child, NOFOLLOW_LINKS)) {

                            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; directory is created, and watching recursively, then
&lt;/span&gt;                            &lt;span class=&quot;code-comment&quot;&gt;// register it and its sub-directories
&lt;/span&gt;                            Files.walkFileTree(child, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FilteringFileVisitor());
                        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Files.isRegularFile(child, NOFOLLOW_LINKS)) {
                            scan(child);
                        }
                    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (kind == ENTRY_MODIFY) {
                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Files.isRegularFile(child, NOFOLLOW_LINKS)) {
                            scan(child);
                        }
                    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (kind == ENTRY_DELETE) {
                        unscan(child);
                    }
  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="16209222" author="gnt" created="Wed, 18 Oct 2017 12:19:58 +0000"  >&lt;p&gt;Committing to &lt;a href=&quot;https://svn.apache.org/repos/asf/felix/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/felix/trunk&lt;/a&gt; ...&lt;br/&gt;
	M	fileinstall/src/main/java/org/apache/felix/fileinstall/internal/Watcher.java&lt;br/&gt;
Committed r1812501&lt;/p&gt;</comment>
                            <comment id="16339118" author="dtominac" created="Thu, 25 Jan 2018 11:52:03 +0000"  >&lt;p&gt;This bug is still present in fileinstall 3.6.4.&lt;/p&gt;

&lt;p&gt;OS: SUSE Linux Enterprise Server 11 (x86_64)&lt;br/&gt;
VERSION = 11&lt;br/&gt;
PATCHLEVEL = 0&lt;/p&gt;

&lt;p&gt;Java: java version &quot;1.8.0_131&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_131-b11)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)&lt;/p&gt;

&lt;p&gt;Product: ServiceMix 6.3.1 with fileinstall updated to 3.6.4&lt;/p&gt;

&lt;p&gt;ServiceMix is installed on &lt;b&gt;remote file system, mounted locally&lt;/b&gt; on /aplik directory.&lt;/p&gt;

&lt;p&gt;Workaround:&lt;/p&gt;

&lt;p&gt;in file org.apache.felix.fileinstall-deploy.cfg&#160; set&lt;/p&gt;

&lt;p&gt;&lt;b&gt;felix.fileinstall.disableNio2 = true&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16339199" author="dtominac" created="Thu, 25 Jan 2018 13:16:13 +0000"  >&lt;p&gt;Additional info: hot deployment works fine for a few hours after ServiceMix/Karaf restart. But than it just &quot;stops monitoring&quot;&#160; deployment directory.&#160; It does not detect bundle update or removal.&lt;/p&gt;

&lt;p&gt;Restarting ServiceMix helps but only for short time. &lt;b&gt;felix.fileinstall.disableNio2 = true&lt;/b&gt; is still a valid workaround.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f81z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>