<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:21:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2176] Upgrade maven-bundle-plugin to up to date bnd</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2176</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Peter doesn&apos;t seem to release bnd to public repos, but does have an accessible private repo.  The bundle plugin can copy bnd into itself so users don&apos;t have to have peter&apos;s secret stash configured in their nexus repo manager.&lt;/p&gt;

&lt;p&gt;Patch does this and upgrades to latest bnd.  I can&apos;t see any reason to keep the copied Builder source &amp;#8211; plugin passes tests and appears to work without it &amp;#8211; so I removed it.  You&apos;ll need to run&lt;br/&gt;
svn rm    src/main/java/aQute/lib/osgi/Builder.java&lt;/p&gt;

&lt;p&gt;Also the code in   src/main/java/org/apache/felix/bundleplugin/PackageVersionAnalyzer.java &lt;em&gt;really&lt;/em&gt; doesn&apos;t compile any more and I suspect the functionality has moved into bnd.  However I can&apos;t actually tell what its trying to do; I commented it out.  If this functionality is actually in bnd then removing the class would be a good idea.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12458281">FELIX-2176</key>
            <summary>Upgrade maven-bundle-plugin to up to date bnd</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="djencks">David Jencks</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Mar 2010 19:15:46 +0000</created>
                <updated>Fri, 24 Jun 2011 12:36:55 +0000</updated>
                            <resolved>Thu, 4 Nov 2010 13:59:08 +0000</resolved>
                                    <version>maven-bundle-plugin-2.0.1</version>
                                    <fixVersion>maven-bundle-plugin-2.2.0</fixVersion>
                                    <component>Maven Bundle Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12841980" author="djencks" created="Fri, 5 Mar 2010 19:17:14 +0000"  >&lt;p&gt;Use up to date bnd, include it in plugin, and make everything compile.  tests pass but it&apos;s possible the removed code actually did something useful although not tested.&lt;/p&gt;</comment>
                            <comment id="12843988" author="gnt" created="Thu, 11 Mar 2010 09:57:34 +0000"  >&lt;p&gt;I&apos;m trying to understand how some commented code affects the generated manifest.&lt;br/&gt;
For example the PackageVersionAnalyzer is now commented, so it may affect  &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-1501&quot; title=&quot;Using a macro in Bundle-Version with the manifest goal causes garbage in the Export-Package and Private-Package headers.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-1501&quot;&gt;&lt;del&gt;FELIX-1501&lt;/del&gt;&lt;/a&gt;, but I can&apos;t even reproduce that one.&lt;/p&gt;</comment>
                            <comment id="12843996" author="mcculls" created="Thu, 11 Mar 2010 10:22:39 +0000"  >&lt;p&gt;This patch should definitely not be applied as it stands for the following reasons:&lt;/p&gt;

&lt;p&gt;  1)  Maven best practices strongly discourage defining external repositories in POMs, as this &lt;b&gt;will&lt;/b&gt; affect all users of the plugin&lt;/p&gt;

&lt;p&gt;  2)  PackageVersionAnalyzer is needed by Carlos&apos; bundleall goal - perhaps people don&apos;t use this goal, but removing this will break any that do&lt;/p&gt;

&lt;p&gt;  3)  The patch changes the parent POM relativePath to an incorrect value (../pom.xml which is the reactor POM, instead of ../pom/pom.xml)&lt;/p&gt;

&lt;p&gt;Note that the copy of BND source is meant to be there during development to allow us to test patches on top of the latest BND source&lt;br/&gt;
without encountering 1). When it comes to preparing a release I usually negotiate to get the latest BND onto central, and then remove&lt;br/&gt;
the source from the release.&lt;/p&gt;

&lt;p&gt;Peter is sorting out a regular update process to get BND onto central (via oss.sonatype.org) - once it&apos;s there I can make the necessary&lt;br/&gt;
updates to PackageVersionAnalyzer, etc. and remove our copy of the BND source code. Until then please don&apos;t commit these changes.&lt;/p&gt;</comment>
                            <comment id="12844006" author="gnt" created="Thu, 11 Mar 2010 10:42:32 +0000"  >&lt;p&gt;The code in PackageVersionAnalyzer compiles if you move the class to aQute.osgi.lib&lt;br/&gt;
It adds the bundle version to the private and exported packages if they don&apos;t have any version information yet.&lt;br/&gt;
The problem is that this happen only when using the manifest goal and not the bundle goal.&lt;br/&gt;
This discrepancy looks problematic to me, so I&apos;m tempted to just remove that class and use the same manifest generation.&lt;br/&gt;
The version on exported packages can be easily added using:&lt;br/&gt;
   *;version=&quot;${project.version}&quot;&lt;br/&gt;
instead of simply&lt;br/&gt;
   *&lt;/p&gt;</comment>
                            <comment id="12844009" author="mcculls" created="Thu, 11 Mar 2010 10:52:56 +0000"  >&lt;p&gt;Except that would break the current contract/behavior of the bundleall goal as mentioned above.&lt;/p&gt;

&lt;p&gt;There are other reasons why certain code is different between the manifest and bundle goals,&lt;br/&gt;
which is mainly because the bundle goal participates in the maven lifecycle and the manifest&lt;br/&gt;
goal doesn&apos;t - this means we lack certain runtime data when running the manifest goal.&lt;/p&gt;

&lt;p&gt;I&apos;m not against fixing this, but I&apos;d prefer a more reasoned approach than &quot;remove it and see&quot; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Really what we need is a series of tests for the bundle and manifest goals, which would make&lt;br/&gt;
it easier to change things without unexpectedly breaking anyone. Any chance you could add&lt;br/&gt;
some tests for this area first?&lt;/p&gt;</comment>
                            <comment id="12844039" author="gnt" created="Thu, 11 Mar 2010 11:51:50 +0000"  >&lt;p&gt;I&apos;ve raised &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-2194&quot; title=&quot;The manifest and bundle goals seem to generate different manifest informations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-2194&quot;&gt;&lt;del&gt;FELIX-2194&lt;/del&gt;&lt;/a&gt; to handle the differences between manifest / bundle goals.&lt;br/&gt;
In the meantime, moving the PackageVersionAnalyzer into the aQute.osgi.lib package should do the trick.&lt;/p&gt;</comment>
                            <comment id="12860321" author="djencks" created="Fri, 23 Apr 2010 17:34:09 +0000"  >&lt;p&gt;It looks like bndlib v 0.0.397 has made it to maven central.  Since no one seemed to like my patch, maybe someone could just update the maven-bundle-plugin to use this publicly available version.&lt;/p&gt;</comment>
                            <comment id="12924040" author="rickhall" created="Fri, 22 Oct 2010 21:36:24 +0000"  >&lt;p&gt;I&apos;m not against just keeping a copy of the BND code in our repo if it means we can do a better job of keeping BND up-to-date. It seems idiotic to be blocked by the lack of an artifact in a Maven repo.&lt;/p&gt;

&lt;p&gt;I had worked with Peter a little while back on heuristics to try to improve how BND decides to import exported packages, since the original behavior was too simplistic and is resulting in the creation of lots of improperly defined bundle metadata. I think updating our plugin to a more recent version of BND is of paramount importance.&lt;/p&gt;

&lt;p&gt;Does anyone have any objection to just directly including the BND source in our project?&lt;/p&gt;</comment>
                            <comment id="12924193" author="gnt" created="Sat, 23 Oct 2010 12:57:04 +0000"  >&lt;p&gt;Is Peter willing to move his efforts on BND to the ASF ?&lt;br/&gt;
And I think we&apos;d need a software grant for that, don&apos;t we ?&lt;br/&gt;
But a big +1 from me if he&apos;s willing to do so.&lt;/p&gt;</comment>
                            <comment id="12924215" author="djencks" created="Sat, 23 Oct 2010 17:10:28 +0000"  >&lt;p&gt;I don&apos;t think we need Peter do move BND development to apache to do this.  BND is asl licensed and as long as we have appropriate notices in svn and released artifacts we should be able to copy source code into asf svn.  Geronimo did this for years with bouncy castle code.&lt;/p&gt;</comment>
                            <comment id="12924217" author="gnt" created="Sat, 23 Oct 2010 17:29:12 +0000"  >&lt;p&gt;So what&apos;s the point of having software grant and ICLAs then and the whole IP stuff ?&lt;br/&gt;
I trust you on that, I just seem to be hermetic to the whole thing ....&lt;/p&gt;</comment>
                            <comment id="12924410" author="rickhall" created="Mon, 25 Oct 2010 01:05:16 +0000"  >&lt;p&gt;I wasn&apos;t implying that we try to usurp BND from Peter. I was just suggesting that we include the latest version of the source in the project so we don&apos;t have to worry about whether it gets uploaded to Maven or not. It is ASL, so we&apos;d have no issue including the source and we don&apos;t want two different artifacts in the first place. We can work on Peter moving BND to Felix later. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12924446" author="gnt" created="Mon, 25 Oct 2010 05:58:39 +0000"  >&lt;p&gt;Can&apos;t we just use our own maven repo if the goal is only to host the binary file ?  We&apos;ve done that for years for ServiceMix.&lt;br/&gt;
It&apos;s a lot less work, as bnd isn&apos;t even buildable with maven afaik, so the whole release process won&apos;t work anyway.&lt;/p&gt;</comment>
                            <comment id="12924453" author="djencks" created="Mon, 25 Oct 2010 06:17:43 +0000"  >&lt;p&gt;its easy to build the bnd code with maven, you just get it in an appropriate structure.  IIRC my original patch showed how to do this, possibly automatically.   private maven repos are really not appropriate for public projects in my experience.&lt;/p&gt;</comment>
                            <comment id="12924581" author="rickhall" created="Mon, 25 Oct 2010 14:56:13 +0000"  >&lt;p&gt;Seems easier to me to just include the source in our project.&lt;/p&gt;</comment>
                            <comment id="12924586" author="gnt" created="Mon, 25 Oct 2010 15:08:23 +0000"  >&lt;p&gt;Not from a maintenance point of view imho, unless you forbid any change to the sources, but if you&apos;re happy maintaining it, i have no real problems anyway.&lt;/p&gt;</comment>
                            <comment id="12924593" author="mcculls" created="Mon, 25 Oct 2010 15:46:15 +0000"  >&lt;p&gt;We&apos;ve included the bnd source code in the past, it&apos;s quite straightforward - just put it under src/main/java and comment out the bndlib dependency.&lt;br/&gt;
[ btw last I heard Peter was very close to getting the latest bnd sync&apos;d with central, but it&apos;s not there yet - so for now I&apos;d go with including the source ]&lt;/p&gt;</comment>
                            <comment id="12924638" author="rickhall" created="Mon, 25 Oct 2010 17:30:26 +0000"  >&lt;p&gt;Ok, Peter says he&apos;s finally figured Maven out, so I will see if I can update to a newer version.&lt;/p&gt;</comment>
                            <comment id="12924674" author="mcculls" created="Mon, 25 Oct 2010 18:38:20 +0000"  >&lt;p&gt;Looks like it&apos;s reached central:&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;http://repo1.maven.org/maven2/biz/aQute/bndlib/1.10.0/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://repo1.maven.org/maven2/biz/aQute/bndlib/1.10.0/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12924685" author="rickhall" created="Mon, 25 Oct 2010 19:10:26 +0000"  >&lt;p&gt;Ok, I&apos;ve updated to the latest bndlib, but I still had an issue. The class PackageVersionAnalyzer access package private super method from Analyzer called analyzeBundelClasspath(). As a result, I had to keep a local copy of Builder and I modified it to expose this method from its super class.&lt;/p&gt;

&lt;p&gt;I&apos;m not exactly sure what is going on here. Is this some functionality that we are trying to push into bndlib or what? If so, let&apos;s discuss it with Peter so he can get a release out that supports it. Otherwise, we should try to convince Peter to make the method protected so we can access it.&lt;/p&gt;

&lt;p&gt;I&apos;m over my head on this one, so please jump in. Thanks.&lt;/p&gt;</comment>
                            <comment id="12924777" author="gnt" created="Mon, 25 Oct 2010 23:23:50 +0000"  >&lt;p&gt;Yeah, IIRC, the idea was to push that back into bnd, but i never had the time to actually submit a patch to Peter ...&lt;/p&gt;</comment>
                            <comment id="12924890" author="pkriens" created="Tue, 26 Oct 2010 08:25:33 +0000"  >&lt;p&gt;The function I see is that an Export-Package without a version gets the version of the bundle. &lt;/p&gt;

&lt;p&gt;a) The bundle version seems rather arbitrary and cause unnecessary incompatibilities&lt;br/&gt;
b) It actually blocks bnd from doing a better job when the package is included from another bundle because at that time there is already a version set&lt;/p&gt;

&lt;p&gt;I can add that if there is really no version for an Export-Package to be found (please, please use packageinfo) then I use the bundle version.&lt;/p&gt;</comment>
                            <comment id="12924894" author="fmeschbe" created="Tue, 26 Oct 2010 08:41:19 +0000"  >&lt;p&gt;I tend to agree with Peter that adding a default Export-Package is not a very good idea.&lt;/p&gt;

&lt;p&gt;It is probably only acceptable idea for bundles exporting anything. But for bundles which contain some exports and some private packages, the bundle version will increase on each release for modified private packages and then increasing the export version automatically just sounds a bad idea.&lt;/p&gt;

&lt;p&gt;So I would argue to not do it (and not even in the interest of being pragmatism), because it IMHO will generate more pain than relieve.&lt;/p&gt;

&lt;p&gt;For example: In our commercial application we currently don&apos;t use much Export-Package versioning (yes, this is another issue we have to solve). Having automatic export versions will completely prevent us from properly updating bundles.&lt;/p&gt;</comment>
                            <comment id="12924978" author="rickhall" created="Tue, 26 Oct 2010 14:50:23 +0000"  >&lt;p&gt;I think I agree that it is not clear using the bundle version as the default package version makes sense. However, I&apos;m not against having that as an option if someone wants it. However, we should probably do it like Peter suggests and somehow do it after the fact so bnd can attempt to figure things out first.&lt;/p&gt;

&lt;p&gt;So, can we rollback the PackageVersionAnalyzer class and figure out a different way to handle this requirement? If so, then I can eliminate the patched Builder class and we close this issue.&lt;/p&gt;</comment>
                            <comment id="12927009" author="rickhall" created="Mon, 1 Nov 2010 15:34:08 +0000"  >&lt;p&gt;I&apos;m still not sure what to do here. Even if we all agree we should add a default version, PackageVersionAnalyzer also removes &quot;META-INF.*&quot; packages from the exported packages apparently...not sure why bnd is including these.&lt;/p&gt;</comment>
                            <comment id="12928215" author="rickhall" created="Thu, 4 Nov 2010 13:59:08 +0000"  >&lt;p&gt;I just removed the stuff that I didn&apos;t know what to do with and we can address it in other issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12458798">FELIX-2194</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12438034" name="FELIX-2176.diff" size="48992" author="djencks" created="Fri, 5 Mar 2010 19:17:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aqav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60534</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>