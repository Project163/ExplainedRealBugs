<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:46:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3787] NPE on reference update</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3787</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I defined reference with annotation:&lt;br/&gt;
    @Reference(referenceInterface = Controller.class, cardinality = ReferenceCardinality.MANDATORY_UNARY, policyOption = ReferencePolicyOption.GREEDY)&lt;br/&gt;
    protected Controller controller;&lt;/p&gt;

&lt;p&gt;when I install a new service I got an error:&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.DependencyManager.serviceAdded(DependencyManager.java:383)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.DependencyManager.serviceChanged(DependencyManager.java:159)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:932)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:793)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:543)&lt;br/&gt;
        at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4260)&lt;br/&gt;
        at org.apache.felix.framework.Felix.registerService(Felix.java:3275) &lt;/p&gt;</description>
                <environment></environment>
        <key id="12617774">FELIX-3787</key>
            <summary>NPE on reference update</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="dpishchukhin">Dmytro Pishchukhin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Nov 2012 12:05:03 +0000</created>
                <updated>Thu, 4 Sep 2014 08:04:09 +0000</updated>
                            <resolved>Tue, 27 Nov 2012 13:13:29 +0000</resolved>
                                    <version>scr-1.6.2</version>
                                    <fixVersion>scr-1.8.0</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13504569" author="fmeschbe" created="Tue, 27 Nov 2012 12:25:51 +0000"  >&lt;p&gt;Thanks for reporting.&lt;/p&gt;

&lt;p&gt;Would you mind providing us with the component declaration which led to this issue ?&lt;/p&gt;

&lt;p&gt;NB: I have seen this before but was not able to reproduce.&lt;/p&gt;</comment>
                            <comment id="13504571" author="dpishchukhin" created="Tue, 27 Nov 2012 12:30:20 +0000"  >&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;components xmlns:scr=&quot;http://www.osgi.org/xmlns/scr/v1.2.0&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;scr:component name=&quot;com.acme.foo.agent&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;implementation class=&quot;com.acme.foo.agent.impl.AgentImpl&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;service servicefactory=&quot;false&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;provide interface=&quot;com.acme.foo.agent.Agent&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/service&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;com.acme.foo.agent.prop1.value&quot; value=&quot;val 1&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;service.pid&quot; value=&quot;com.acme.foo.agent&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;reference name=&quot;context&quot; interface=&quot;com.acme.foo.api.Provider&quot; cardinality=&quot;1..1&quot; policy=&quot;static&quot; target=&quot;(com.acme.foo.provider.name=provider.archive)&quot; bind=&quot;bindContext&quot; unbind=&quot;unbindContext&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;reference name=&quot;controller&quot; interface=&quot;com.acme.foo.api.Controller&quot; cardinality=&quot;1..1&quot; policy=&quot;static&quot; bind=&quot;bindController&quot; unbind=&quot;unbindController&quot; policy-option=&quot;greedy&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/scr:component&amp;gt;&lt;br/&gt;
&amp;lt;/components&amp;gt;&lt;/p&gt;</comment>
                            <comment id="13504576" author="dpishchukhin" created="Tue, 27 Nov 2012 12:36:47 +0000"  >&lt;p&gt;some additional info for the issue:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;there are 1+ Controller service. The difference is only SERVICE_RANK property.&lt;/li&gt;
	&lt;li&gt;Component is in active state when only 1 Controller service is available. Component is in registered state when 2 Controller services are registered and in WebConsole I see that &quot;No Services bound&quot; for all references, but state is &quot;Satisfied&quot;. After some time the Component state changes to active&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13504597" author="fmeschbe" created="Tue, 27 Nov 2012 13:13:29 +0000"  >&lt;p&gt;Thanks.&lt;/p&gt;

&lt;p&gt;I can reproduce it now.&lt;/p&gt;

&lt;p&gt;The issue occurs because this is a delayed component which is &lt;b&gt;not&lt;/b&gt; activated yet and so the internal dependency map has not been setup, thus is null and the statement:&lt;/p&gt;

&lt;p&gt;  Map bound = ( Map ) m_componentManager.getDependencyMap().get( this );&lt;/p&gt;

&lt;p&gt;is expected to throw an NPE in this case.&lt;/p&gt;

&lt;p&gt;Turns out it is nasty (and unneeded logging only) because the component has never been activated. Consequently this situation has no adverse consequences on operations (despite the logging).&lt;/p&gt;

&lt;p&gt;Fixing this in Rev. 1414168 by guarding against missing dependencies map.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292337</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rxa7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161036</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>