<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:55:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4532] ConcurrentModificationException in fileinstall</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4532</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.util.ConcurrentModificationException
	at java.util.HashMap$HashIterator.nextEntry(HashMap.java:926)[:1.7.0_51]
	at java.util.HashMap$KeyIterator.next(HashMap.java:960)[:1.7.0_51]
	at org.apache.felix.fileinstall.internal.WatcherScanner.scan(WatcherScanner.java:70)[5:org.apache.felix.fileinstall:3.4.0]
	at org.apache.felix.fileinstall.internal.DirectoryWatcher.run(DirectoryWatcher.java:305)[5:org.apache.felix.fileinstall:3.4.0]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12720861">FELIX-4532</key>
            <summary>ConcurrentModificationException in fileinstall</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="gnodet">Guillaume Nodet</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jun 2014 12:48:12 +0000</created>
                <updated>Tue, 17 Mar 2015 06:54:32 +0000</updated>
                            <resolved>Tue, 9 Sep 2014 14:57:42 +0000</resolved>
                                    <version>fileinstall-3.4.0</version>
                                    <fixVersion>fileinstall-3.4.2</fixVersion>
                                    <component>File Install</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14075995" author="tuomas_kiviaho" created="Mon, 28 Jul 2014 07:39:47 +0000"  >&lt;p&gt;Main difference between Scanner and WatcherScanner implementation is that the latter (which is a NIO2 implementation) has the following lines causing the problem above&lt;br/&gt;
37 Set&amp;lt;File&amp;gt; changed = new HashSet&amp;lt;File&amp;gt;();&lt;br/&gt;
70   for (File file : changed)&lt;br/&gt;
...&lt;br/&gt;
83        changed.remove(file);&lt;/p&gt;

&lt;p&gt;This could be fixed as:&lt;br/&gt;
37 Set&amp;lt;File&amp;gt; changed = new ConcurrentHashSet&amp;lt;File&amp;gt;();&lt;br/&gt;
70   for (Iterator&amp;lt;File&amp;gt; iterator = changed.iterator(); iterator.hasNext()&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
...&lt;br/&gt;
83        iterator.remove();&lt;/p&gt;

&lt;p&gt;felix.fileinstall.disableNio2=true option could perhaps be used as workaround&lt;/p&gt;</comment>
                            <comment id="14109886" author="krumpi" created="Mon, 25 Aug 2014 22:35:35 +0000"  >&lt;p&gt;Though the felix.fileinstall.disableNio2=true is used by DirectoryWatcher it is never set upstream on FileInstall&lt;br/&gt;
It requires a modification of the Activator&lt;/p&gt;</comment>
                            <comment id="14126923" author="jbonofre" created="Tue, 9 Sep 2014 12:19:06 +0000"  >&lt;p&gt;I provided a patch fixing the problem. It would be great to have a SNAPSHOT and a release soon.&lt;/p&gt;</comment>
                            <comment id="14126996" author="jbonofre" created="Tue, 9 Sep 2014 13:55:29 +0000"  >&lt;p&gt;New patch using CopyOnWriteArrayList&lt;/p&gt;</comment>
                            <comment id="14127058" author="gnt" created="Tue, 9 Sep 2014 14:57:42 +0000"  >&lt;p&gt;Committing to &lt;a href=&quot;https://svn.apache.org/repos/asf/felix/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/felix/trunk&lt;/a&gt; ...&lt;br/&gt;
	M fileinstall/src/main/java/org/apache/felix/fileinstall/internal/WatcherScanner.java&lt;br/&gt;
Committed r1623838&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12740053">KARAF-3213</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12735399">FELIX-4609</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12667418" name="FELIX-4532.patch" size="875" author="jbonofre" created="Tue, 9 Sep 2014 13:55:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399060</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wp7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399177</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>