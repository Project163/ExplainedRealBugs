<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:10:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5669] Registering a PersistenceManager causes duplicate caches</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5669</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;When registering a PersistenceManager, the next call to a method in ConfigurationManager will call getPersistenceManagers(). Instead of preserving the existing CachingPersistenceManagerProxy that wraps the default FilePersistenceManager, ConfigurationManager creates a brand new one. But previous Configuration objects still have reference to the old CachingPersistenceManagerProxy, so when one of them gets deleted/updated it does not get deleted/updated in the ConfigurationManager&apos;s reference.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13091591">FELIX-5669</key>
            <summary>Registering a PersistenceManager causes duplicate caches</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="brandan.jeter">Brandan Jeter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Aug 2017 15:30:14 +0000</created>
                <updated>Mon, 7 Aug 2017 05:49:30 +0000</updated>
                            <resolved>Wed, 2 Aug 2017 09:18:01 +0000</resolved>
                                    <version>configadmin-1.8.12</version>
                                    <fixVersion>configadmin-1.8.16</fixVersion>
                                    <component>Configuration Admin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16109105" author="githubbot" created="Tue, 1 Aug 2017 15:36:48 +0000"  >&lt;p&gt;GitHub user brjeter opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/115&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5669&quot; title=&quot;Registering a PersistenceManager causes duplicate caches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5669&quot;&gt;&lt;del&gt;FELIX-5669&lt;/del&gt;&lt;/a&gt; Fixing bug in ConfigurationManager that duplicates PersistenceManager caches&lt;/p&gt;

&lt;p&gt;    The `ConfigurationManager` duplicates `CachingPersistenceManagerProxy`s when `getPersistenceManagers()` is called after registering a new `PersistenceManager`. This fixes it to use the previous `CachingPersistenceManagerProxy` if one exists.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/brjeter/felix&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/brjeter/felix&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5669&quot; title=&quot;Registering a PersistenceManager causes duplicate caches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5669&quot;&gt;&lt;del&gt;FELIX-5669&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/115.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/115.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #115&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ab6655478dd1390a8399d258bc4eccf94ad991d4&lt;br/&gt;
Author: Brandan Jeter &amp;lt;brandanjeter@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-08-01T15:32:47Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5669&quot; title=&quot;Registering a PersistenceManager causes duplicate caches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5669&quot;&gt;&lt;del&gt;FELIX-5669&lt;/del&gt;&lt;/a&gt; Fixing bug in ConfigurationManager that duplicates PersistenceManager caches&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16109106" author="brandan.jeter" created="Tue, 1 Aug 2017 15:37:05 +0000"  >&lt;p&gt;PR: &lt;a href=&quot;https://github.com/apache/felix/pull/115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/115&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16110601" author="cziegeler" created="Wed, 2 Aug 2017 09:18:01 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandan.jeter&quot; class=&quot;user-hover&quot; rel=&quot;brandan.jeter&quot;&gt;brandan.jeter&lt;/a&gt; for reporting and your patch.&lt;br/&gt;
I&apos;ve applied a slightly modified version in rev 1803786 in the R7 branch for config admin. The difference is just that any proxy, whether caching or non caching is continued to be used.&lt;br/&gt;
Please cross check&lt;/p&gt;</comment>
                            <comment id="16111061" author="brandan.jeter" created="Wed, 2 Aug 2017 14:53:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, thanks for applying that so quickly! Another difference between your patch and mine is that the PersistenceManagerProxy classes are now exposing their delegatees to consuming classes rather than doing the check internally. Regardless, I don&apos;t think it&apos;s a big deal.&lt;/p&gt;

&lt;p&gt;Other questions I had: Are you guys going to release a ConfigAdmin 1.8.15? And when do you think you guys are going do the next release and do you know the earliest version of Karaf that it will be in?&lt;/p&gt;

&lt;p&gt;Thanks again.&lt;/p&gt;</comment>
                            <comment id="16111078" author="githubbot" created="Wed, 2 Aug 2017 15:08:34 +0000"  >&lt;p&gt;Github user brjeter closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/115&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16112247" author="cziegeler" created="Thu, 3 Aug 2017 06:10:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandan.jeter&quot; class=&quot;user-hover&quot; rel=&quot;brandan.jeter&quot;&gt;brandan.jeter&lt;/a&gt; Yes, right, the deletagee is now accessible - but as these are all internal classes I think this is fine.&lt;br/&gt;
I&apos;ve backported the fix to the 1.8.x branch in revision 1803950 - it would be great if you can give it a quick lock. I can then start the 1.8.16 release, so it should be available next week.&lt;br/&gt;
I don&apos;t know when Karaf will pick it up though&lt;/p&gt;</comment>
                            <comment id="16112796" author="brandan.jeter" created="Thu, 3 Aug 2017 14:15:45 +0000"  >&lt;p&gt;Okay that&apos;s perfect! The backport revision looks good! Thanks again.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3i9u7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>