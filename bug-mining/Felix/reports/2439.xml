<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:57:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3565] Embed-Transitive leaks transitive dependencies of excluded artifacts</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3565</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I was trying to re-config some of my projects so that I get compile(+runtime) scoped dependencies and their transitive dependencies embedded by using Embed-Transitive=true with the exception of dependencies that I had with type bundle. Exclusion of bundles turned out to be trickier than I though because I can&apos;t use provided scope without sacrificing the respective transitive dependencies in the process. Everything went ok until I noticed that inclusion process with the transitive dependencies of already excluded compile scoped dependencies that had type set to bundle as shown below where I&apos;m getting bb-2.2 embedded although it should be excluded. &lt;/p&gt;

&lt;p&gt;myproject (*;scope=compile|runtime;type=!bundle)&lt;br/&gt;
+a-1;scope=compile;type=jar // included ok&lt;br/&gt;
  +aa-1.1;scope=compile;type=jar // included ok&lt;br/&gt;
  -ab-1.2;scope=compile;type=bundle // excluded ok and there are no transitive dependency candidates available&lt;br/&gt;
  -ac-1.3;scope=provided;type=bundle // excluded ok because scope is provided&lt;br/&gt;
    -aca-1.3.1;scope=compile;type=jar  // excluded ok although scope is compile because provided scope doesn&apos;t reveal any of the existing dependencies as transitive dependencies&lt;br/&gt;
-b-2;scope=compile;type=bundle // excluded ok because type is bundle&lt;br/&gt;
  -ba-2.1;scope=provided;type=jar // excluded ok because scope is provided&lt;br/&gt;
  +bb-2.2;scope=compile;type=jar // NOT excluded ok because parent already excluded&lt;/p&gt;

&lt;p&gt;In short: Everything not matching exclusion pattern (and matching inclusion pattern) will be excluded no matter if their origin has been already excluded.&lt;/p&gt;

&lt;p&gt;I checked the codebase and noticed that the reason for having &apos;NOTE: test scoped dependencies are not included in the classpath seen by BND.&apos; on the web page accumulated from the problem. It seems that dependency tree shared component seems to have given problems before and that Aether isn&apos;t backwards compatible but I suggest giving a try to maven-dependency-tree 2.0 that is Aether based for Maven 3 but remains still backwards compatible with Maven 2.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12595220">FELIX-3565</key>
            <summary>Embed-Transitive leaks transitive dependencies of excluded artifacts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="tuomas_kiviaho">Tuomas Kiviaho</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 20 Jun 2012 07:08:29 +0000</created>
                <updated>Thu, 2 Sep 2021 14:09:39 +0000</updated>
                            <resolved>Thu, 9 Jul 2015 20:00:23 +0000</resolved>
                                    <version>maven-bundle-plugin-2.3.7</version>
                                    <fixVersion>maven-bundle-plugin-3.0.0</fixVersion>
                                    <component>Maven Bundle Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13427909" author="tuomas_kiviaho" created="Fri, 3 Aug 2012 08:48:49 +0000"  >&lt;p&gt;Here&apos;s a patch that doesn&apos;t fix the described case of instruction based exclusion but works already for excludeDependencies parameter. It uses the newest dependency tree component that seems to be working for maven 2.x as promised. &lt;/p&gt;</comment>
                            <comment id="13435899" author="tuomas_kiviaho" created="Thu, 16 Aug 2012 11:14:03 +0000"  >&lt;p&gt;I noticed that the example which used type bundle would not be working correctly due to &lt;a href=&quot;http://jira.codehaus.org/browse/MSHARED-235&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/MSHARED-235&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13435902" author="tuomas_kiviaho" created="Thu, 16 Aug 2012 11:17:21 +0000"  >&lt;p&gt;Here&apos;s the same patch now working with released version of the new dependency tree&lt;/p&gt;</comment>
                            <comment id="13437482" author="tuomas_kiviaho" created="Sun, 19 Aug 2012 08:43:50 +0000"  >&lt;p&gt;Here&apos;s the final patch that covers also instructions parameters and as well as exclusions parameter. It shouldn&apos;t be too hard for someone familiar with the testing harness to make a test case to cover the described case. This version already seems to be working with maven2 but maven3 requires still the MSHARED issue to be fixed in one way or another. &lt;/p&gt;

&lt;p&gt;Most of the changes are just delegation of the dependency graph down the execution stack until the dependency filtering is applied. Also the tests required passing of the dependency graph component. The actual work is done in new method AbstractDependencyFilter#filterDependencies and with helps of slight adjustment to AbstractDependencyFilter#processInstruction method. &lt;/p&gt;</comment>
                            <comment id="14621159" author="gnt" created="Thu, 9 Jul 2015 20:00:23 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1690153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1690153&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13074243">FELIX-5645</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12629687">FELIX-3877</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13218564">FELIX-6073</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13398957">FELIX-6457</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12541521" name="maven-bundle-plugin.patch" size="46200" author="tuomas_kiviaho" created="Sun, 19 Aug 2012 08:43:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>307326</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1avjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>271578</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>