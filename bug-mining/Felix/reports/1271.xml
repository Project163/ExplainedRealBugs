<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:22:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2430] IPOJO manipulation (ant task) results in invalid classes throwing java.lang.VerifyError at runtime in InstanceManager (line 584)</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2430</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Logs:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; ipojo.SecurityErrorRaisingIPOJOService : &lt;span class=&quot;error&quot;&gt;&amp;#91;ipojo.SecurityErrorRaisingIPOJOService-0&amp;#93;&lt;/span&gt; createInstance -&amp;gt; The POJO constructor invocation failed : (class: ipojo/SecurityErrorRaisingIPOJOService, method: &amp;lt;init&amp;gt; signature: (Lorg/apache/felix/ipojo/InstanceManager;)V) Expecting to find object/array on stack&lt;br/&gt;
java.lang.VerifyError: (class: ipojo/SecurityErrorRaisingIPOJOService, method: &amp;lt;init&amp;gt; signature: (Lorg/apache/felix/ipojo/InstanceManager;)V) Expecting to find object/array on stack caught here: java.lang.Class.getDeclaredConstructors0(Native Method) java.lang.Class.privateGetDeclaredConstructors(Unknown Source) java.lang.Class.getConstructor0(Unknown Source) java.lang.Class.getDeclaredConstructor(Unknown Source) org.apache.felix.ipojo.InstanceManager.createObject(InstanceManager.java:584) org.apache.felix.ipojo.InstanceManager.getPojoObject(InstanceManager.java:777) org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.__stateChanged(LifecycleCallbackHandler.java:156) org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.stateChanged(LifecycleCallbackHandler.java) org.apache.felix.ipojo.InstanceManager.setState(InstanceManager.java:441) org.apache.felix.ipojo.InstanceManager.start(InstanceManager.java:322) org.apache.felix.ipojo.ComponentFactory.createInstance(ComponentFactory.java:155) org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:301) org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:238) org.apache.felix.ipojo.InstanceCreator$ManagedInstance.create(InstanceCreator.java:343) org.apache.felix.ipojo.InstanceCreator.addInstance(InstanceCreator.java:89) org.apache.felix.ipojo.Extender.parse(Extender.java:269) org.apache.felix.ipojo.Extender.startManagementFor(Extender.java:208) org.apache.felix.ipojo.Extender.access$600(Extender.java:52) org.apache.felix.ipojo.Extender$CreatorThread.run(Extender.java:682) java.lang.Thread.run(Unknown Source)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; ipojo.SecurityErrorRaisingIPOJOService : Cannot create a POJO instance, the POJO constructor invocation has thrown an exception : (class: ipojo/SecurityErrorRaisingIPOJOService, method: &amp;lt;init&amp;gt; signature: (Lorg/apache/felix/ipojo/InstanceManager;)V) Expecting to find object/array on stack&lt;br/&gt;
java.lang.RuntimeException: Cannot create a POJO instance, the POJO constructor invocation has thrown an exception : (class: ipojo/SecurityErrorRaisingIPOJOService, method: &amp;lt;init&amp;gt; signature: (Lorg/apache/felix/ipojo/InstanceManager;)V) Expecting to find object/array on stack caught here: org.apache.felix.ipojo.InstanceManager.createObject(InstanceManager.java:640) org.apache.felix.ipojo.InstanceManager.getPojoObject(InstanceManager.java:777) org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.__stateChanged(LifecycleCallbackHandler.java:156) org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.stateChanged(LifecycleCallbackHandler.java) org.apache.felix.ipojo.InstanceManager.setState(InstanceManager.java:441) org.apache.felix.ipojo.InstanceManager.start(InstanceManager.java:322) org.apache.felix.ipojo.ComponentFactory.createInstance(ComponentFactory.java:155) org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:301) org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:238) org.apache.felix.ipojo.InstanceCreator$ManagedInstance.create(InstanceCreator.java:343) org.apache.felix.ipojo.InstanceCreator.addInstance(InstanceCreator.java:89) org.apache.felix.ipojo.Extender.parse(Extender.java:269) org.apache.felix.ipojo.Extender.startManagementFor(Extender.java:208) org.apache.felix.ipojo.Extender.access$600(Extender.java:52) org.apache.felix.ipojo.Extender$CreatorThread.run(Extender.java:682) java.lang.Thread.run(Unknown Source)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; ipojo.SecurityErrorRaisingIPOJOService : Cannot create a POJO instance, the POJO constructor invocation has thrown an exception : (class: ipojo/SecurityErrorRaisingIPOJOService, method: &amp;lt;init&amp;gt; signature: (Lorg/apache/felix/ipojo/InstanceManager;)V) Expecting to find object/array on stack&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; iPOJO Instance Creator : A matching factory was found for &lt;/p&gt;
{component=ipojo.SecurityErrorRaisingIPOJOService, instance.name=ipojo.SecurityErrorRaisingIPOJOService-0}
&lt;p&gt;, but the instantiation failed : The configuration is not correct for the type ipojo.SecurityErrorRaisingIPOJOService : Cannot create a POJO instance, the POJO constructor invocation has thrown an exception : (class: ipojo/SecurityErrorRaisingIPOJOService, method: &amp;lt;init&amp;gt; signature: (Lorg/apache/felix/ipojo/InstanceManager;)V) Expecting to find object/array on stack&lt;/p&gt;

&lt;p&gt;Samples used for reproducing the error:&lt;/p&gt;

&lt;p&gt;package ipojo;&lt;/p&gt;

&lt;p&gt;public class AbstractSecurityErrorRaisingIPOJOService&lt;br/&gt;
{&lt;br/&gt;
    protected HelloWorldObject helloWorldObject;&lt;/p&gt;

&lt;p&gt;    protected AbstractSecurityErrorRaisingIPOJOService(HelloWorldObject helloWorldObject)&lt;/p&gt;
    {
        this.helloWorldObject = helloWorldObject;
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;package ipojo;&lt;/p&gt;

&lt;p&gt;public class HelloWorldObject&lt;br/&gt;
{&lt;br/&gt;
    public HelloWorldObject()&lt;br/&gt;
    {&lt;/p&gt;

&lt;p&gt;    }&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;package ipojo;&lt;/p&gt;

&lt;p&gt;public interface SecurityErrorRaisingIPOJOServiceInterface&lt;br/&gt;
{&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;package ipojo;&lt;/p&gt;

&lt;p&gt;import org.apache.felix.ipojo.annotations.Component;&lt;br/&gt;
import org.apache.felix.ipojo.annotations.Provides;&lt;/p&gt;

&lt;p&gt;@Component(immediate = true)&lt;br/&gt;
@Provides(specifications = SecurityErrorRaisingIPOJOServiceInterface.class)&lt;br/&gt;
public class SecurityErrorRaisingIPOJOService extends AbstractSecurityErrorRaisingIPOJOService&lt;br/&gt;
{&lt;br/&gt;
    public SecurityErrorRaisingIPOJOService()&lt;/p&gt;
    {
        super(new HelloWorldObject());
    }
&lt;p&gt;}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12467337">FELIX-2430</key>
            <summary>IPOJO manipulation (ant task) results in invalid classes throwing java.lang.VerifyError at runtime in InstanceManager (line 584)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="clement.escoffier">Clement Escoffier</assignee>
                                    <reporter username="fdesmons">Frederic Desmons</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Jun 2010 10:45:43 +0000</created>
                <updated>Thu, 17 Mar 2011 17:59:31 +0000</updated>
                            <resolved>Tue, 22 Jun 2010 06:56:47 +0000</resolved>
                                    <version>iPOJO-1.4.0</version>
                    <version>iPOJO-1.6.0</version>
                                    <fixVersion>iPOJO-1.8.0</fixVersion>
                                    <component>iPOJO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12880176" author="clement.escoffier" created="Fri, 18 Jun 2010 12:24:40 +0000"  >&lt;p&gt;Fixed in trunk,&lt;br/&gt;
The problem came from a wrong &apos;super&apos; call detection. &lt;/p&gt;

&lt;p&gt;Could you check with the new manipulator (to build manually from the trunk). To use a custom manipulator, adapt your ant build to load the iPOJO ant task as:&lt;br/&gt;
&amp;lt;taskdef name=&quot;ipojo&quot;&lt;br/&gt;
        classname=&quot;org.apache.felix.ipojo.task.IPojoTask&quot;&lt;br/&gt;
                classpath=&quot;lib/org.apache.felix.ipojo.manipulator-1.7.0-SNAPSHOT.jar; lib/org.apache.felix.ipojo.ant-1.6.0.jar;&quot; /&amp;gt;&lt;br/&gt;
 /&amp;gt;&lt;br/&gt;
(the manipulator must be first)&lt;/p&gt;

</comment>
                            <comment id="12880242" author="fdesmons" created="Fri, 18 Jun 2010 16:36:39 +0000"  >&lt;p&gt;I build and tested with and updated Manipulator as you suggested but I&apos;m still getting the same error.&lt;/p&gt;</comment>
                            <comment id="12880253" author="clement.escoffier" created="Fri, 18 Jun 2010 17:16:06 +0000"  >&lt;p&gt;I attach the project where I reproduced your issue. Please check if it works with this project.&lt;/p&gt;</comment>
                            <comment id="12880747" author="fdesmons" created="Mon, 21 Jun 2010 08:38:34 +0000"  >&lt;p&gt;My bad, it&apos;s a different error this time:&lt;/p&gt;

&lt;p&gt;(ERROR)  java.lang.RuntimeException: Cannot create a POJO instance, the POJO constructor invocation has thrown an exception : (class: ipojo/SecurityErrorRaisingIPOJOService, method: &amp;lt;init&amp;gt; signature: (Lorg/apache/felix/ipojo/InstanceManager;)V) Expecting to find object/array on stack caught here: org.apache.felix.ipojo.InstanceManager.createObject(InstanceManager.java:640) org.apache.felix.ipojo.InstanceManager.getPojoObject(InstanceManager.java:777) org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.__stateChanged(LifecycleCallbackHandler.java:156) org.apache.felix.ipojo.handlers.lifecycle.callback.LifecycleCallbackHandler.stateChanged(LifecycleCallbackHandler.java) org.apache.felix.ipojo.InstanceManager.setState(InstanceManager.java:441) org.apache.felix.ipojo.InstanceManager.start(InstanceManager.java:322) org.apache.felix.ipojo.ComponentFactory.createInstance(ComponentFactory.java:155) org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:301) org.apache.felix.ipojo.IPojoFactory.createComponentInstance(IPojoFactory.java:238) org.apache.felix.ipojo.InstanceCreator$ManagedInstance.create(InstanceCreator.java:343) org.apache.felix.ipojo.InstanceCreator.addInstance(InstanceCreator.java:89) org.apache.felix.ipojo.Extender.parse(Extender.java:269) org.apache.felix.ipojo.Extender.startManagementFor(Extender.java:208) org.apache.felix.ipojo.Extender.access$600(Extender.java:52) org.apache.felix.ipojo.Extender$CreatorThread.run(Extender.java:682) java.lang.Thread.run(Unknown Source)&lt;/p&gt;

&lt;p&gt;Do you need another Jira ?&lt;/p&gt;</comment>
                            <comment id="12880828" author="clement.escoffier" created="Mon, 21 Jun 2010 13:32:16 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;We can keep this issue in that one. I think is it related.&lt;br/&gt;
Do you have a test case to reproduce the current issue ?&lt;/p&gt;</comment>
                            <comment id="12880880" author="fdesmons" created="Mon, 21 Jun 2010 16:25:51 +0000"  >&lt;p&gt;I got tricked by the fact ant doesn&apos;t complain when a jar doesn&apos;t exist in the classpath of a task... sorry about that.&lt;br/&gt;
I works fine with the fix you did, thank you.&lt;/p&gt;</comment>
                            <comment id="12881102" author="clement.escoffier" created="Tue, 22 Jun 2010 06:56:46 +0000"  >&lt;p&gt;Reported as fixed.&lt;/p&gt;</comment>
                            <comment id="12905862" author="clement.escoffier" created="Fri, 3 Sep 2010 11:39:55 +0000"  >&lt;p&gt;Included in the 1.6.4 releases&lt;/p&gt;</comment>
                            <comment id="12932468" author="fdesmons" created="Tue, 16 Nov 2010 14:10:58 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I couldn&apos;t find the 1.6.4 version of the ant task. Nor could I found a jar corresponding to the manipulator only.&lt;br/&gt;
Could you let me know where to find it ?&lt;/p&gt;

&lt;p&gt;Thank you,&lt;/p&gt;</comment>
                            <comment id="12932609" author="clement.escoffier" created="Tue, 16 Nov 2010 19:18:32 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;There is no ipojo ant task 1.6.4, because this jar just contains the front end on the manipulator (so no changes). You can download the manipulator 1.6.4 on&lt;br/&gt;
&lt;a href=&quot;http://repo2.maven.org/maven2/org/apache/felix/org.apache.felix.ipojo.manipulator/1.6.4/org.apache.felix.ipojo.manipulator-1.6.4.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://repo2.maven.org/maven2/org/apache/felix/org.apache.felix.ipojo.manipulator/1.6.4/org.apache.felix.ipojo.manipulator-1.6.4.jar&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Don&apos;t forget to add this jar inside the ant task classpath (&lt;b&gt;must&lt;/b&gt; be before the ipojo ant task jar):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;taskdef name=&lt;span class=&quot;code-quote&quot;&gt;&quot;ipojo&quot;&lt;/span&gt; 
        classname=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.felix.ipojo.task.IPojoTask&quot;&lt;/span&gt; 
                classpath=&lt;span class=&quot;code-quote&quot;&gt;&quot;lib/org.apache.felix.ipojo.manipulator-1.6.4; lib/org.apache.felix.ipojo.ant-1.6.0.jar;&quot;&lt;/span&gt; /&amp;gt; 
 /&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tell me if this does not work.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Clement&lt;/p&gt;</comment>
                            <comment id="13000634" author="nbarriga" created="Tue, 1 Mar 2011 00:51:52 +0000"  >&lt;p&gt;This patch doesn&apos;t seem to work when the class hierarchy is deeper. When doing the recursion, it doesn&apos;t check for superclass constructors correctly more than one level of inheritance.&lt;/p&gt;</comment>
                            <comment id="13001319" author="clement.escoffier" created="Wed, 2 Mar 2011 07:24:00 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Could you provide a simple example that we can reproduce it ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13001395" author="nbarriga" created="Wed, 2 Mar 2011 12:23:11 +0000"  >&lt;p&gt;Unfortunately no. My current codebase is quite big and I wouldn&apos;t know how to start a project from scratch. I was going to add it to your unit tests, but I found a workaround(using composition instead of inheritance) that works, so my boss said to go with that and dont spend more time on it. Sorry, I just thought it would be good to report it to you anyway.&lt;/p&gt;</comment>
                            <comment id="13008040" author="clement.escoffier" created="Thu, 17 Mar 2011 17:59:31 +0000"  >&lt;p&gt;It seems to be fixed in 1.8.0. I was not able to reproduce it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12447481" name="ipojo-2430-verify_error.zip" size="2086880" author="clement.escoffier" created="Fri, 18 Jun 2010 17:16:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56344</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vwnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184265</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>