<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:33:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3254] manifest goal generates wrong Export-Package when Embed-Dependency</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3254</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;manifest goal does not seem to consider Embed-Dependency and _exportcontents when generating Export-Package in 2.3.6. This used to work in 2.3.5 and looks like a regression introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-3206&quot; title=&quot;Restore the BND analyzer approach which creates a MANIFEST.MF based on the contents of the jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-3206&quot;&gt;&lt;del&gt;FELIX-3206&lt;/del&gt;&lt;/a&gt;. I&apos;ll attach a sample project that demonstrates the problem shortly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533820">FELIX-3254</key>
            <summary>manifest goal generates wrong Export-Package when Embed-Dependency</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mcculls">Stuart McCulloch</assignee>
                                    <reporter username="igorf">Igor Fedorenko</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Dec 2011 23:02:33 +0000</created>
                <updated>Sat, 11 Feb 2012 18:34:39 +0000</updated>
                            <resolved>Sat, 11 Feb 2012 18:34:39 +0000</resolved>
                                    <version>maven-bundle-plugin-2.3.6</version>
                                    <fixVersion>maven-bundle-plugin-2.3.7</fixVersion>
                                    <component>Maven Bundle Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13162511" author="mcculls" created="Sun, 4 Dec 2011 23:10:44 +0000"  >&lt;p&gt;If it is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-3206&quot; title=&quot;Restore the BND analyzer approach which creates a MANIFEST.MF based on the contents of the jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-3206&quot;&gt;&lt;del&gt;FELIX-3206&lt;/del&gt;&lt;/a&gt; (which actually fixes a previous regression wrt. the behaviour of the manifest goal) then it sounds like you need bnd to do a full rebuild of the bundle when creating the manifest (so bnd can fully analyze the embedded/merged content) in which case you can simply add &amp;lt;rebuildBundle&amp;gt;true&amp;lt;/rebuildBundle&amp;gt; to the configuration to get the pre-&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-3206&quot; title=&quot;Restore the BND analyzer approach which creates a MANIFEST.MF based on the contents of the jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-3206&quot;&gt;&lt;del&gt;FELIX-3206&lt;/del&gt;&lt;/a&gt; behaviour.&lt;/p&gt;

&lt;p&gt;Note that &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-3206&quot; title=&quot;Restore the BND analyzer approach which creates a MANIFEST.MF based on the contents of the jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-3206&quot;&gt;&lt;del&gt;FELIX-3206&lt;/del&gt;&lt;/a&gt; is unlikely to be reverted since there are valid use-cases when you don&apos;t want to rebuild the bundle in memory, and this was the original behaviour.&lt;/p&gt;</comment>
                            <comment id="13162512" author="igorf" created="Sun, 4 Dec 2011 23:10:50 +0000"  >&lt;p&gt;Attached &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-3254&quot; title=&quot;manifest goal generates wrong Export-Package when Embed-Dependency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-3254&quot;&gt;&lt;del&gt;FELIX-3254&lt;/del&gt;&lt;/a&gt;.zip is a sample project to demonstrate the problem&lt;/p&gt;

&lt;p&gt;Generated bundle manifest is expected to have&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Export-Package: de.pdark.decentxml;version=&quot;1.3&quot;,de.pdark.decentxml.dt
 d;version=&quot;1.3&quot;,de.pdark.decentxml.validation;version=&quot;1.3&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This works with maven-bundle-plugin 2.3.5, but with 2.3.6 generated bundle manifest does not have Export-Package at all&lt;/p&gt;</comment>
                            <comment id="13162516" author="igorf" created="Sun, 4 Dec 2011 23:15:05 +0000"  >&lt;p&gt;I am not asking to revert &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-3206&quot; title=&quot;Restore the BND analyzer approach which creates a MANIFEST.MF based on the contents of the jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-3206&quot;&gt;&lt;del&gt;FELIX-3206&lt;/del&gt;&lt;/a&gt;. m-b-p should be able to generate correct manifest for the attached project or at very least fail fast and with a clear error message.&lt;/p&gt;</comment>
                            <comment id="13162522" author="mcculls" created="Sun, 4 Dec 2011 23:37:22 +0000"  >&lt;p&gt;Confirmed that the rebuildBundle setting:&lt;/p&gt;

&lt;p&gt;  &amp;lt;configuration&amp;gt;&lt;br/&gt;
    &amp;lt;rebuildBundle&amp;gt;true&amp;lt;/rebuildBundle&amp;gt;&lt;br/&gt;
    &amp;lt;instructions&amp;gt;&lt;br/&gt;
      &amp;lt;!-- ... --&amp;gt;&lt;br/&gt;
    &amp;lt;/instructions&amp;gt;&lt;br/&gt;
  &amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;works and should be used for this use-case.&lt;/p&gt;

&lt;p&gt;The original behaviour of the manifest goal (ie. long before 2.3.4 and &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-2817&quot; title=&quot;The maven-bundle-plugin manifest goal should honor the supportedProjectTypes configuration setting.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-2817&quot;&gt;&lt;del&gt;FELIX-2817&lt;/del&gt;&lt;/a&gt;) was to take the content of the attached file (or target/classes) and generate a manifest based on that, and that only. The use-case was that you created the content by some other means (ie. not using Embed-Dependency, etc.) and wanted a manifest based on that content. A slightly different use-case came up in &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-2817&quot; title=&quot;The maven-bundle-plugin manifest goal should honor the supportedProjectTypes configuration setting.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-2817&quot;&gt;&lt;del&gt;FELIX-2817&lt;/del&gt;&lt;/a&gt; where people wanted the exact same results as doing bundle:bundle (which does an in-memory build) when they created the manifest - this is the same use-case as the attached project.&lt;/p&gt;

&lt;p&gt;There&apos;s no solution that I know of which can accommodate both use-cases with the same goal - which is why the flag (rebuildBundle) was added to switch between the &apos;analyzer&apos; approach that is quick and means you don&apos;t have to match the instructions with the content (but it doesn&apos;t handle all the Include-Resource instructions) and the &apos;builder&apos; approach which does a full analysis but means your instructions must describe the content of the bundle.&lt;/p&gt;

&lt;p&gt;We could add a warning if people use instructions that don&apos;t make sense with rebuildBundle=false - I think that&apos;s better than trying to guesstimate the right setting. &lt;/p&gt;</comment>
                            <comment id="13206218" author="mcculls" created="Sat, 11 Feb 2012 18:34:39 +0000"  >&lt;p&gt;Fixed in r1243117 - if we&apos;re generating a manifest for the output directory and there is an Embed-Dependency instruction then we can safely assume that we need to build the bundle in-memory to get the correct result.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506066" name="FELIX-3254.zip" size="1729" author="igorf" created="Sun, 4 Dec 2011 23:10:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07g0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>41360</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>