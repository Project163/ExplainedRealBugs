<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:46:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3547] NPE in httplite on android creating Locale.</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3547</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;httplite/core/src/main/java/org/apache/felix/httplite/servlet/HttpServletRequestImpl.java contains the following at line 86:&lt;/p&gt;

&lt;p&gt;private final Locale m_locale = new Locale( System.getProperty( &quot;user.language&quot; ), System.getProperty( &quot;user.country&quot; ) );&lt;/p&gt;

&lt;p&gt;On Android (at least 2.3, other versions not tried) this produces a NullPointerException when HttpServletRequestImpl is constructed because the Locale constructor cannot handle null and neither property is defined by default on Android.&lt;/p&gt;

&lt;p&gt;This is trivial to work around with code like:&lt;/p&gt;

&lt;p&gt;if(System.getProperty(&quot;user.language&quot;)==null)&lt;br/&gt;
        System.setProperty(&quot;user.language&quot;, Locale.getDefault().getLanguage());&lt;br/&gt;
if(System.getProperty(&quot;user.country&quot;)==null)&lt;br/&gt;
        System.setProperty(&quot;user.country&quot;, Locale.getDefault().getCountry());&lt;/p&gt;

&lt;p&gt;A easy solution is to replace the above line with:&lt;/p&gt;

&lt;p&gt;private final Locale m_locale = Locale.getDefault();&lt;/p&gt;

&lt;p&gt;This would cause each instance to have the same Local object. Although I would be surprised if this is an issue the following would also work:&lt;/p&gt;

&lt;p&gt;private final Locale m_locale = new Locale( System.getProperty( &quot;user.language&quot;, Locale.getDefault().getLanguage() ), System.getProperty( &quot;user.country&quot; ) , Locale.getDefault().getCountry());&lt;/p&gt;

&lt;p&gt;I&apos;m using httplite with the felx web console for debugging. Other than this bug and needing to set an uncaught exception handler so android doesn&apos;t force close the app all is working well (the memory usage plugin of coarse dose not work because it depends on jmx which android doesn&apos;t have.&lt;/p&gt;</description>
                <environment>Android 2.3.x</environment>
        <key id="12560433">FELIX-3547</key>
            <summary>NPE in httplite on android creating Locale.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="kgilmer">Ken Gilmer</assignee>
                                    <reporter username="schallee">Ed Schaller</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 13 Jun 2012 03:58:55 +0000</created>
                <updated>Mon, 17 Jun 2024 07:06:48 +0000</updated>
                            <resolved>Mon, 17 Jun 2024 07:06:48 +0000</resolved>
                                                                    <component>Lightweight HTTP Service</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="1800">0.5h</timeoriginalestimate>
                            <timeestimate seconds="1800">0.5h</timeestimate>
                                        <comments>
                            <comment id="13294130" author="schallee" created="Wed, 13 Jun 2012 04:14:41 +0000"  >&lt;p&gt;patch using Locale.getDefault()&lt;/p&gt;</comment>
                            <comment id="13501185" author="kgilmer" created="Tue, 20 Nov 2012 13:36:56 +0000"  >&lt;p&gt;I&apos;m sorry but I did not see this when it was filed in June.  I will work on getting it resolved in SVN ASAP, and thanks for the patch Ed!&lt;/p&gt;</comment>
                            <comment id="13501643" author="kgilmer" created="Wed, 21 Nov 2012 01:41:46 +0000"  >&lt;p&gt;Patch committed in revision 1411974.  Thanks again Ed!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12531918" name="HttpServletRequestImpl.3547.patch" size="1115" author="schallee" created="Wed, 13 Jun 2012 04:14:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>258826</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l4lr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121396</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>