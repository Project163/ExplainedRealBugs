<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:50:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4196] If proxy or SSL Offloader already sends https urls the SSLFilter wil created a httpss URL</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4196</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;If proxy or SSL Offloader already sends https urls the SSLFilter wil created a httpss URL&lt;/p&gt;

&lt;p&gt;See code in &lt;a href=&quot;https://fisheye6.atlassian.com/browse/felix/trunk/http/sslfilter/src/main/java/org/apache/felix/http/sslfilter/internal/SslFilterRequest.java?r=1394715&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://fisheye6.atlassian.com/browse/felix/trunk/http/sslfilter/src/main/java/org/apache/felix/http/sslfilter/internal/SslFilterRequest.java?r=1394715&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;StringBuffer&lt;/span&gt; getRequestURL()
   {
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.requestURL == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
           &lt;span class=&quot;code-comment&quot;&gt;// insert an &lt;span class=&quot;code-quote&quot;&gt;&apos;s&apos;&lt;/span&gt; after the http scheme
&lt;/span&gt;           &lt;span class=&quot;code-object&quot;&gt;StringBuffer&lt;/span&gt; tmp = &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.getRequestURL();
           tmp.insert(4, &lt;span class=&quot;code-quote&quot;&gt;&apos;s&apos;&lt;/span&gt;);
           &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.requestURL = tmp.toString();
       }
 
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;StringBuffer&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.requestURL);
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A replace of &quot;http://&quot; to &quot;https://&quot; will be less buggy.&lt;/p&gt;

&lt;p&gt;Furthermore an option to not rewrite from http to https would be good as in some cases this is not desirable.&lt;/p&gt;


&lt;p&gt;Kind regards,&lt;br/&gt;
Kris.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12664013">FELIX-4196</key>
            <summary>If proxy or SSL Offloader already sends https urls the SSLFilter wil created a httpss URL</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="sumerion">Kris Barnhoorn</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Aug 2013 08:05:07 +0000</created>
                <updated>Sat, 28 Sep 2013 17:40:01 +0000</updated>
                            <resolved>Mon, 19 Aug 2013 13:01:26 +0000</resolved>
                                    <version>http.sslfilter-0.1.0</version>
                                    <fixVersion>http-2.2.1</fixVersion>
                                    <component>HTTP Service</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13743606" author="fmeschbe" created="Mon, 19 Aug 2013 07:42:02 +0000"  >&lt;p&gt;Thanks for reporting. But, I do not completely understand the issue:&lt;/p&gt;

&lt;p&gt;&amp;gt; A replace of &quot;http://&quot; to &quot;https://&quot; will be less buggy. &lt;/p&gt;

&lt;p&gt;I do not see how ? The code&lt;/p&gt;

&lt;p&gt;  String tmp = &quot;https&quot;.concat(super.getRequestURL().substring(4));&lt;/p&gt;

&lt;p&gt;sounds exactly the same, right ?&lt;/p&gt;

&lt;p&gt;The only way to make this less buggy would be to first check whether the URL startsWidth(&quot;http://&quot;).&lt;/p&gt;

&lt;p&gt;Or am I completely on the wrong track ?&lt;/p&gt;</comment>
                            <comment id="13743737" author="sumerion" created="Mon, 19 Aug 2013 11:28:39 +0000"  >&lt;p&gt;Hi Felix,&lt;/p&gt;

&lt;p&gt;Yes I think it&apos;s best to be sure no other part of the infrastructure or code has done the same.&lt;/p&gt;

&lt;p&gt;What I mean with replace was something like &lt;/p&gt;

&lt;p&gt;String tmp = StringUtils.replace(super.getRequestURL(), &quot;http://&quot;, &quot;https://);&lt;/p&gt;


&lt;p&gt;We have now (to not add additional dependencies):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; HTTP = &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt;;
&lt;/span&gt;
...
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.requestURL == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.getRequestURL().indexOf(HTTP) == 0) {
            &lt;span class=&quot;code-comment&quot;&gt;// insert an &lt;span class=&quot;code-quote&quot;&gt;&apos;s&apos;&lt;/span&gt; after the http scheme
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;StringBuffer&lt;/span&gt; tmp = &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.getRequestURL();
            tmp.insert(4, &lt;span class=&quot;code-quote&quot;&gt;&apos;s&apos;&lt;/span&gt;);
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.requestURL = tmp.toString();
        }
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Meanwhile we have discovered that it was another part (not investigated which) of an AEM 5.6.1 deployment that already checked on the X-Forwarded-SSL and changed to URL.&lt;br/&gt;
With the code above we are sure it doesn&apos;t get done twice.&lt;/p&gt;

&lt;p&gt;Kind regards,&lt;br/&gt;
Kris.&lt;/p&gt;</comment>
                            <comment id="13743744" author="fmeschbe" created="Mon, 19 Aug 2013 11:40:46 +0000"  >&lt;p&gt;Ok. Thanks for the clarification.&lt;/p&gt;

&lt;p&gt;This makes sense.&lt;/p&gt;

&lt;p&gt;&amp;gt; Meanwhile we have discovered that it was another part (not investigated which) of an AEM 5.6.1&lt;br/&gt;
&amp;gt; deployment that already checked on the X-Forwarded-SSL and changed to URL.&lt;/p&gt;

&lt;p&gt;Please check with Adobe on this issue. Thanks.&lt;/p&gt;</comment>
                            <comment id="13743786" author="fmeschbe" created="Mon, 19 Aug 2013 13:01:26 +0000"  >&lt;p&gt;Fixed in Rev. 1515389 adding the check before changing the StringBuffer value.&lt;/p&gt;

&lt;p&gt;For completeness, added some unit tests in Rev. 1515392&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12609675">FELIX-3693</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344014</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nbqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344316</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>