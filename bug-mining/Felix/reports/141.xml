<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:05:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-463] Re: Felix does not start with bootdelegation=&quot;*&quot;</title>
                <link>https://issues.apache.org/jira/browse/FELIX-463</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I am having trouble starting Felix when I use -Dorg.osgi.framework.bootdelegation=&quot;*&quot;. When I run using the following command:&lt;br/&gt;
&apos;/usr/bin/java -Dorg.osgi.framework.bootdelegation=&quot;*&quot; -jar bin/felix.jar&apos;, it fails like this:&lt;/p&gt;

&lt;p&gt;WARNING: *** Class &apos;org.apache.felix.shell.impl.Activator&apos; was not found. Bundle 1 does not import package &apos;org.apache.felix.shell.impl&apos;, nor is the package exported by any other bundle or available from the system class loader. *** (java.lang.ClassNotFoundException: *** Class &apos;org.apache.felix.shell.impl.Activator&apos; was not found. Bundle 1 does not import package &apos;org.apache.felix.shell.impl&apos;, nor is the package exported by any other bundle or available from the system class loader. ***)ERROR: Error starting &lt;a href=&quot;file:bundle/org.apache.felix.shell-1.1.0-SNAPSHOT.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:bundle/org.apache.felix.shell-1.1.0-SNAPSHOT.jar&lt;/a&gt; (org.osgi.framework.BundleException: Not found: org.apache.felix.shell.impl.Activator)&lt;br/&gt;
java.lang.ClassNotFoundException: org.apache.felix.shell.impl.Activator&lt;br/&gt;
       at org.apache.felix.framework.Felix.createBundleActivator(Felix.java:3438)        at org.apache.felix.framework.Felix._startBundle(Felix.java:1540)&lt;br/&gt;
       at org.apache.felix.framework.Felix.startBundle(Felix.java:1479)&lt;br/&gt;
       at org.apache.felix.framework.Felix.setFrameworkStartLevel(Felix.java:1074)        at org.apache.felix.framework.StartLevelImpl.run(StartLevelImpl.java:258)        at java.lang.Thread.run(Thread.java:595)&lt;/p&gt;

&lt;p&gt;Section #3.8.4, Overall Search Order, of OSGi Service Platform Release 4 spec does not clearly (or I don&apos;t understand it well enough) state what should be the behavior. Relevant portions of the spec is given below:&lt;/p&gt;

&lt;p&gt;/1 If the class or resource is in a java.* package, the request is delegated to the parent class loader; otherwise, the search continues with the next step. If the request is delegated to the parent class loader and the class or resource is not found, then the search terminates and the request fails.&lt;br/&gt;
2 If the class or resource is from a package included in the boot delegation list (org.osgi.framework.bootdelegation), then the request is delegated to the parent class loader. If the class or resource is found there, the search ends.&lt;br/&gt;
/&lt;br/&gt;
Unlike point #1 above, point #2 does not mandate the search to terminate. I can understand the search terminating for java.* packages, but why for other packages? It seems Felix is terminating the search, therefore I am seeing this failure. Can anyone please clarify this? I am using &quot;*, &quot; because I want to see how I can make packages from some library jars available to bundles without having to set org.osgi.framework.system.packages property?&lt;/p&gt;

&lt;p&gt;I am hoping that if I add my library jars in system classpath and set bootdelegation=&quot;*&quot;, the library jar&apos;s content will be automatically available to other bundles even if I don&apos;t set org.osgi.framework.system.packages property. Is this not going to work?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Sahoo &lt;/p&gt;</description>
                <environment>JDK 1.5.0_06 or 1.6 on Solaris 10/x86</environment>
        <key id="12386242">FELIX-463</key>
            <summary>Re: Felix does not start with bootdelegation=&quot;*&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="sahoo">Sanjeeb Kumar Sahoo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Jan 2008 05:02:12 +0000</created>
                <updated>Wed, 16 Jan 2008 04:52:44 +0000</updated>
                            <resolved>Wed, 16 Jan 2008 04:52:44 +0000</resolved>
                                    <version>framework-1.0.0</version>
                                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12558962" author="karlpauls" created="Tue, 15 Jan 2008 08:22:10 +0000"  >&lt;p&gt;No. It doesn&apos;t work like this. You still need to make the packages your bundles explicitly import available form the system bundle (i.e., add them to the system.packages property). The bootdelegation is needed only for the case where you want to make packages available to bundles &lt;em&gt;without&lt;/em&gt; them needing to import them. However, if they import them then it doesn&apos;t work. In other words, this is not a bug in Felix but you will have to adjust your assumptions. &lt;/p&gt;

&lt;p&gt;What happens in your case is that the bootdelegation=* effectively short-cuts the whole resolving process and makes Felix use the bootclassloader &lt;em&gt;all&lt;/em&gt; the time. That one, however, doesn&apos;t know about classes that come from a bundle &amp;#8211; hence, the CNFE.  Do try to avoid using the bootdelegation feature unless your really need it - it&apos;s not a convenience feature but a last resort.&lt;/p&gt;</comment>
                            <comment id="12558969" author="mcculls" created="Tue, 15 Jan 2008 08:43:26 +0000"  >&lt;p&gt;Re-opening, because I think we need to at least clarify the spec: it appears to suggest we should continue the search if non java.* bootdelegation packages are not found in the parent classloader - note this is also how the reference implementation behaves (this is just an FYI, as the RI could be wrong)&lt;/p&gt;</comment>
                            <comment id="12558970" author="mcculls" created="Tue, 15 Jan 2008 08:45:00 +0000"  >&lt;p&gt;reducing priority, as there are other ways to do this (ie. export packages via the system bundle)&lt;/p&gt;</comment>
                            <comment id="12558971" author="karlpauls" created="Tue, 15 Jan 2008 08:46:24 +0000"  >&lt;p&gt;After re-reading the spec, I happen to agree. We should continue normally in case we can not load a class from the bootdelegation. I&apos;ll look into it.&lt;/p&gt;</comment>
                            <comment id="12559013" author="karlpauls" created="Tue, 15 Jan 2008 10:32:49 +0000"  >&lt;p&gt;I think the attached patch should fix the issue. &lt;/p&gt;</comment>
                            <comment id="12559020" author="fmeschbe" created="Tue, 15 Jan 2008 10:59:00 +0000"  >&lt;p&gt;Hmm, as m_bootPkgs also contains the java.* specification but step 1 of the resolution process says to abort in case a java.* class cannot be loaded from the parent class loader, this patch would actually try to load java.* classes from within....&lt;/p&gt;

&lt;p&gt;So probably, the exception handler should check whether the class (or package) is from java.* and fail if so, otherwise continue.&lt;/p&gt;

&lt;p&gt;WDYT ?&lt;/p&gt;</comment>
                            <comment id="12559035" author="lgalfaso" created="Tue, 15 Jan 2008 12:21:11 +0000"  >&lt;p&gt;R 4.1 of the standard has a flow describing the expected behavior and it states that this is:&lt;br/&gt;
 1. If the class or resource is in a java.* package, the request is delegated to the parent class loader. If the resource or class is not found, the search fails.&lt;br/&gt;
 2. If the class or resource is from a package included in the boot delegation list (org.osgi.framework.bootdelegation), then the request is delegated&lt;br/&gt;
to the parent class loader. If the class or resource is found there, the search ends, otherwise the search continues with the next step.&lt;/p&gt;

&lt;p&gt;So Felix Meschberger is right.&lt;/p&gt;</comment>
                            <comment id="12559081" author="rickhall" created="Tue, 15 Jan 2008 15:34:50 +0000"  >&lt;p&gt;How about my attached patch? It just checks to see if the result was for &quot;java.*&quot;, if so it always terminates, if not, it only terminates if something was found. If there is a better approach, someone can take a crack at cleaning up the patch.&lt;/p&gt;</comment>
                            <comment id="12559085" author="fmeschbe" created="Tue, 15 Jan 2008 15:39:35 +0000"  >&lt;p&gt;To me it looks good.&lt;/p&gt;</comment>
                            <comment id="12559162" author="karlpauls" created="Tue, 15 Jan 2008 18:29:44 +0000"  >&lt;p&gt;To me too.&lt;/p&gt;</comment>
                            <comment id="12559351" author="sahoo" created="Wed, 16 Jan 2008 04:52:44 +0000"  >&lt;p&gt;I updated my workspace from trunk and it now works. I am closing the issue per mail from Richard in users forum.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12373172" name="bootdelegation.patch" size="4033" author="rickhall" created="Tue, 15 Jan 2008 15:33:12 +0000"/>
                            <attachment id="12373156" name="bootdelegation.patch" size="3962" author="karlpauls" created="Tue, 15 Jan 2008 10:32:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58524</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ap4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>270537</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>