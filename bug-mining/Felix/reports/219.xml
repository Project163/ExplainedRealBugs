<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:07:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-582] felix URLs do not return a proper value for lastModified()</title>
                <link>https://issues.apache.org/jira/browse/FELIX-582</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;URLs loaded through Felix, pointing to resources inside OSGi space rely on the default lastModified() implementation which always returns 0. Since the platform knows about the originating bundle it can use the bundle lastmodified instead of 0.&lt;br/&gt;
Other URL/URLConnection methods can be potentially implemented instead of relying on the defaults (such as file type for example).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12397226">FELIX-582</key>
            <summary>felix URLs do not return a proper value for lastModified()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="costin.leau">Costin Leau</reporter>
                        <labels>
                    </labels>
                <created>Sat, 31 May 2008 09:48:06 +0000</created>
                <updated>Mon, 4 Aug 2008 16:15:35 +0000</updated>
                            <resolved>Mon, 4 Aug 2008 16:08:47 +0000</resolved>
                                    <version>framework-1.0.4</version>
                                    <fixVersion>framework-1.2.0</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12601369" author="costin" created="Sat, 31 May 2008 09:50:16 +0000"  >&lt;p&gt;The code below, always returns 0:&lt;/p&gt;

&lt;p&gt;URLConnection con = getURL().openConnection();&lt;br/&gt;
con.setUseCaches(false);&lt;br/&gt;
return con.getLastModified();&lt;/p&gt;</comment>
                            <comment id="12601374" author="karlpauls" created="Sat, 31 May 2008 10:38:55 +0000"  >&lt;p&gt;I agree that this would make sense and in fact we already override the method but we would need to change some things to get this to work. What lastmodified are you talking about, &lt;/p&gt;

&lt;p&gt;a) the one of the cached bundle file on disk &lt;br/&gt;
b) the one of the actual JarEntry.getTime()&lt;br/&gt;
c) a combination of the two?&lt;/p&gt;

</comment>
                            <comment id="12601434" author="rickhall" created="Sun, 1 Jun 2008 01:35:05 +0000"  >&lt;p&gt;I assume he is talking about Bundle.getLastModified()...&lt;/p&gt;

&lt;p&gt;Yes, it makes sense.&lt;/p&gt;</comment>
                            <comment id="12619211" author="adreghiciu" created="Sat, 2 Aug 2008 13:00:33 +0000"  >&lt;p&gt;I attached a simple patch to solve the issue.&lt;br/&gt;
It will return the Bundle.getLastModified() for bundle based urls.&lt;br/&gt;
In this condition that bundle last modified is always returned I&apos;m wondering if getLastModified method should do the connect at all as the modified time is already set. But I suppose that is good as in case of a failure (url cannot be connected) the returned time is 0 (zero).&lt;/p&gt;

&lt;p&gt;Still I do not know if is a valid time to be returned as the returned time will be the same = bundle last modified for all resources in a bundle and as the url refer a specific file I guess better will be to get the last modified of that specific file not the time when the bundle was installed/updated = bundle last modified.&lt;br/&gt;
In that case what Karl proposed JarEntry.getTime() sounds more appropriate and maybe just fallback to bundle las modified if somehow the returned time is zero or cannot be determined.&lt;/p&gt;</comment>
                            <comment id="12619212" author="adreghiciu" created="Sat, 2 Aug 2008 13:05:32 +0000"  >&lt;p&gt;I did a small check and just for info:&lt;br/&gt;
Equinox returns the last modified of that particular resource not the bundle last modified&lt;br/&gt;
Knopflerfish returns the bundle last modified (as the attached patch)&lt;/p&gt;</comment>
                            <comment id="12619274" author="rickhall" created="Sat, 2 Aug 2008 20:25:49 +0000"  >&lt;p&gt;Well, I am content with this behavior for the time being, since it is better than the current behavior. We can always keep the bug open or open a new one to deal with discussing the issue further.&lt;/p&gt;</comment>
                            <comment id="12619525" author="costin" created="Mon, 4 Aug 2008 14:14:53 +0000"  >&lt;p&gt;Interesting outcome. My interest was in the bundle.getLastModified() mainly but since any resource inside the bundle can be resolved as an url, this can be applied to all existing resources as Karl mentioned.&lt;br/&gt;
With jars there is always the question on whether the entry returns the archiving time or the raw (unpacked) modification time. For starters returning the bundle last modified time might be enough but in time, for correctness, the JarEntry.getTime() should be probably used.&lt;/p&gt;</comment>
                            <comment id="12619566" author="rickhall" created="Mon, 4 Aug 2008 16:08:47 +0000"  >&lt;p&gt;I have applied this patch to use Bundle.getLastModified(), so I think it can be resolved. Costin, please close this issue if you are satisfied.&lt;/p&gt;

&lt;p&gt;I will start another issue to track whether we should use JarEntry.getTime() or not, since this is slightly more complicated, since we don&apos;t expose the JarEntry in any way.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12401611">FELIX-659</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12387398" name="FELIX-582.patch" size="1159" author="adreghiciu" created="Sat, 2 Aug 2008 13:00:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58406</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vug7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183906</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>