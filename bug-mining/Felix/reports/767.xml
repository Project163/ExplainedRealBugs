<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:14:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1725] SCR Annotations - Support &quot;Add&quot; Operator in annotation values</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1725</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;in scr plugin 1.4.0 it is not possible to use a annotation expression like this:&lt;br/&gt;
contentType = &quot;application/json;charset=&quot; + CharEncoding.UTF_8&lt;/p&gt;

&lt;p&gt;the attached patch solves this problem by supporting the qdox &quot;AnnotationAdd&quot; class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12437659">FELIX-1725</key>
            <summary>SCR Annotations - Support &quot;Add&quot; Operator in annotation values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Oct 2009 23:10:20 +0000</created>
                <updated>Mon, 16 Nov 2009 12:27:59 +0000</updated>
                            <resolved>Tue, 3 Nov 2009 22:42:39 +0000</resolved>
                                    <version>maven-scr-plugin-1.4.0</version>
                                    <fixVersion>maven-scr-plugin-1.4.2</fixVersion>
                                    <component>SCR Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12773137" author="cziegeler" created="Tue, 3 Nov 2009 19:24:28 +0000"  >&lt;p&gt;What about checking for the super class com.thoughtworks.qdox.model.annotation.AnnotationBinaryOperator&lt;br/&gt;
instead? This should support several operations at once.&lt;/p&gt;</comment>
                            <comment id="12773197" author="sseifert@pro-vision.de" created="Tue, 3 Nov 2009 21:14:45 +0000"  >&lt;p&gt;unfortunately i dont&apos;t think so. the classes AnnotationAdd and AnnotationBinaryOperator does not seem to have knwoledge implemented how to &lt;em&gt;evaluate&lt;/em&gt; the left and right expression to a combined value. both &quot;toString&quot; and &quot;getParameterValue&quot; methods output the left and right part concatenated with a &quot; + &quot; (as string) in between - which is not what is expected.&lt;/p&gt;

&lt;p&gt;after doing some research in the qdox codebase i found a class &quot;EvaluatingVisitor&quot; that is exactly what we needed. i integrated in into the scr plugin and it seems to work very well - it should evaluate all annotation epressions that can occur, not only the add operation.&lt;/p&gt;

&lt;p&gt;it solved a problem with fields declaring integer constants i found recently but did not file a bug yet, too.&lt;br/&gt;
new patch attached: 091103_annotationadd_&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-1725&quot; title=&quot;SCR Annotations - Support &amp;quot;Add&amp;quot; Operator in annotation values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-1725&quot;&gt;&lt;del&gt;FELIX-1725&lt;/del&gt;&lt;/a&gt;.patch&lt;/p&gt;</comment>
                            <comment id="12773200" author="sseifert@pro-vision.de" created="Tue, 3 Nov 2009 21:18:10 +0000"  >&lt;p&gt;p.s. the patch replaces the whole annotation value evaluation that was present before - i did some test on one of our biggest projects using SCR annotations with this version, and the resulting xml descriptor files where identically. so it does not seem to break existing behavior.&lt;/p&gt;</comment>
                            <comment id="12773256" author="cziegeler" created="Tue, 3 Nov 2009 22:42:39 +0000"  >&lt;p&gt;Thanks Stefan for updating the patch - I tried it with my test cases and they run fine as well.&lt;br/&gt;
So I&apos;ve applied your patch in revision 832582.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12438515">FELIX-1774</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12421684" name="091009_annotationadd_FELIX-1725.patch" size="1576" author="sseifert" created="Thu, 8 Oct 2009 23:10:43 +0000"/>
                            <attachment id="12423950" name="091103_annotationadd_FELIX-1725.patch" size="6571" author="sseifert" created="Tue, 3 Nov 2009 21:14:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57305</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vz8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184681</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>