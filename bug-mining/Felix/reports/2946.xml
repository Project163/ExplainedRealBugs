<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:11:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5768] DM Lambda stop callback not being called</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5768</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;It has been reported from the felix users mailing list an issue where a component defined with dm-lambda API is never called in its &quot;stop&quot; callback when the bundle is stopped.&lt;/p&gt;

&lt;p&gt;indeed, the dm-lambda DependencyManagerActivator.stop method has a bug and does not clear the dependency manager when the bundle is stopped: the current code of the DependencyManagerActivator.stop method is this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void stop(BundleContext context) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        destroy();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and of course, the manager must be cleared, like it is the case with the original DependencyActivatorBase.stop method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void stop(BundleContext context) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        destroy();
        m_manager.clear();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it is too bad that no tests were testing this so basic behavior, so I will first add it soon.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13129126">FELIX-5768</key>
            <summary>DM Lambda stop callback not being called</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pderop">Pierre De Rop</assignee>
                                    <reporter username="pderop">Pierre De Rop</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Jan 2018 23:14:12 +0000</created>
                <updated>Mon, 22 Oct 2018 09:01:40 +0000</updated>
                            <resolved>Sun, 7 Jan 2018 23:24:45 +0000</resolved>
                                    <version>org.apache.felix.dependencymanager-r8</version>
                                    <fixVersion>org.apache.felix.dependencymanager-r13</fixVersion>
                                    <component>Dependency Manager Lambda</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16315511" author="pderop" created="Sun, 7 Jan 2018 23:22:19 +0000"  >&lt;p&gt;Added the following testcase in revision 1820507, which reproduces the issue.&lt;/p&gt;

&lt;p&gt;org.apache.felix.dm.lambda.itest.StopCallbackTest&lt;/p&gt;</comment>
                            <comment id="16315512" author="pderop" created="Sun, 7 Jan 2018 23:24:46 +0000"  >&lt;p&gt;Applied a fix in revision 1820508: the DependencyManagerActivator.stop method is now properly clearing the manager when the bundle is stopped.&lt;/p&gt;</comment>
                            <comment id="16315516" author="pderop" created="Sun, 7 Jan 2018 23:42:55 +0000"  >&lt;p&gt;Attached to this issue the org.apache.felix.dependencymanager.lambda-1.1.2.jar bundle which contains the fix for this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12905001" name="org.apache.felix.dependencymanager.lambda-1.1.2.jar" size="299036" author="pderop" created="Sun, 7 Jan 2018 23:42:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3om7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>