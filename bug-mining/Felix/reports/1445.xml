<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:33:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-3238] Unable to filter out classes from identical package in a dependency</title>
                <link>https://issues.apache.org/jira/browse/FELIX-3238</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I as part of a refactoring a project is moving some classes from a package org.acme.foo from bundle A to a separate bundle B.&lt;br/&gt;
Unfortunately its not possible to move all the classes to the separate bundle so this introduces a split package. Both bundle A and bundle B export package org.acme.foo.&lt;/p&gt;

&lt;p&gt;Bundle A has a maven dependency on bundle B.&lt;br/&gt;
What happens at the moment with the Maven Bundle Plugin 2.3.4 (we can&apos;t use 2.3.5 as it has &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-3058&quot; title=&quot;maven-bundle-plugin 2.3.5 incompatible with maven-source-plugin (regression)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-3058&quot;&gt;&lt;del&gt;FELIX-3058&lt;/del&gt;&lt;/a&gt; ) is that all the classes from org.acme.foo that exist in bundle B are copied into the resulting bundle A.&lt;/p&gt;

&lt;p&gt;Below the pom.xml of a test-setup that I created. Both the current project as well as ascii-pics-api-bundle-mbp dependency contain the org.coderthouhts.asciipics.impl package.&lt;/p&gt;

&lt;p&gt;&amp;lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 &lt;a href=&quot;http://maven.apache.org/maven-v4_0_0.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/maven-v4_0_0.xsd&lt;/a&gt;&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;parent&amp;gt;&lt;br/&gt;
    &amp;lt;groupId&amp;gt;org.coderthoughts&amp;lt;/groupId&amp;gt;&lt;br/&gt;
    &amp;lt;artifactId&amp;gt;ascii-pics-parent-mbp&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
    &amp;lt;version&amp;gt;1.0.0-SNAPSHOT&amp;lt;/version&amp;gt;&lt;br/&gt;
  &amp;lt;/parent&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;artifactId&amp;gt;ascii-pics-provider-bundle-mbp&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
  &amp;lt;packaging&amp;gt;bundle&amp;lt;/packaging&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;dependencies&amp;gt;&lt;br/&gt;
    &amp;lt;dependency&amp;gt;&lt;br/&gt;
      &amp;lt;groupId&amp;gt;org.coderthoughts&amp;lt;/groupId&amp;gt;&lt;br/&gt;
      &amp;lt;artifactId&amp;gt;ascii-pics-api-bundle-mbp&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
      &amp;lt;version&amp;gt;1.0.0&amp;lt;/version&amp;gt;&lt;br/&gt;
      &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;&lt;br/&gt;
    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
    &amp;lt;dependency&amp;gt;&lt;br/&gt;
      &amp;lt;groupId&amp;gt;org.osgi&amp;lt;/groupId&amp;gt;&lt;br/&gt;
      &amp;lt;artifactId&amp;gt;org.osgi.core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
      &amp;lt;version&amp;gt;4.2.0&amp;lt;/version&amp;gt;&lt;br/&gt;
      &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;&lt;br/&gt;
    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
  &amp;lt;/dependencies&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;build&amp;gt;&lt;br/&gt;
    &amp;lt;plugins&amp;gt;&lt;br/&gt;
      &amp;lt;plugin&amp;gt;&lt;br/&gt;
        &amp;lt;groupId&amp;gt;org.apache.felix&amp;lt;/groupId&amp;gt;&lt;br/&gt;
        &amp;lt;artifactId&amp;gt;maven-bundle-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
        &amp;lt;extensions&amp;gt;true&amp;lt;/extensions&amp;gt;&lt;br/&gt;
        &amp;lt;configuration&amp;gt;&lt;br/&gt;
          &amp;lt;instructions&amp;gt;&lt;br/&gt;
            &amp;lt;Bundle-SymbolicName&amp;gt;${project.name}&amp;lt;/Bundle-SymbolicName&amp;gt;&lt;br/&gt;
            &amp;lt;Bundle-Activator&amp;gt;org.coderthoughts.asciipics.Activator&amp;lt;/Bundle-Activator&amp;gt;&lt;br/&gt;
            &amp;lt;Export-Package&amp;gt;org.coderthoughts.asciipics.impl;-split-package:=first&amp;lt;/Export-Package&amp;gt;&lt;br/&gt;
          &amp;lt;/instructions&amp;gt;&lt;br/&gt;
        &amp;lt;/configuration&amp;gt;&lt;br/&gt;
      &amp;lt;/plugin&amp;gt;&lt;br/&gt;
    &amp;lt;/plugins&amp;gt;&lt;br/&gt;
  &amp;lt;/build&amp;gt;&lt;br/&gt;
&amp;lt;/project&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532171">FELIX-3238</key>
            <summary>Unable to filter out classes from identical package in a dependency</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mcculls">Stuart McCulloch</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Nov 2011 16:38:38 +0000</created>
                <updated>Fri, 2 Dec 2011 15:44:17 +0000</updated>
                            <resolved>Mon, 28 Nov 2011 14:36:50 +0000</resolved>
                                    <version>maven-bundle-plugin-2.3.5</version>
                                    <fixVersion>maven-bundle-plugin-2.3.6</fixVersion>
                                    <component>Maven Bundle Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13154291" author="bosschaert" created="Mon, 21 Nov 2011 16:50:49 +0000"  >&lt;p&gt;I fabricated a small test setup here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/bosschaert/coderthoughts&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bosschaert/coderthoughts&lt;/a&gt; (branch: split-package)&lt;/p&gt;

&lt;p&gt;The bundle ascii-pics-api-bundle-mbp contains org.coderthoughts.asciipics.impl.RogueClass&lt;br/&gt;
The bundle ascii-pics-provider-bundle-mbp contains the rest of the org.coderthoughts.asciipics.impl package and depends on the ascii-pics-api-bundle-mbp bundle.&lt;/p&gt;

&lt;p&gt;To reproduce simply run &apos;mvn install&apos; in the AsciiGraphicsService_MBP directory. &lt;br/&gt;
Then look at the bundle in ascii-pics-provider-bundle-mbp/target/ascii-pics-provider-bundle-mbp-1.0.0-SNAPSHOT.jar and you will find the RogueClass inside the bundle.&lt;/p&gt;</comment>
                            <comment id="13156358" author="bosschaert" created="Wed, 23 Nov 2011 22:37:57 +0000"  >&lt;p&gt;Lowering the priority as Peter Kriens provided a workaround. In terms of the test setup, the following does the trick:&lt;/p&gt;

&lt;p&gt;&amp;lt;instructions&amp;gt;&lt;br/&gt;
  &amp;lt;Bundle-SymbolicName&amp;gt;${project.name}&amp;lt;/Bundle-SymbolicName&amp;gt;&lt;br/&gt;
  &amp;lt;Bundle-Activator&amp;gt;org.coderthoughts.asciipics.Activator&amp;lt;/Bundle-Activator&amp;gt;&lt;br/&gt;
  &amp;lt;Export-Package&amp;gt;&amp;lt;/Export-Package&amp;gt;&lt;br/&gt;
  &amp;lt;Private-Package&amp;gt;org.coderthoughts.asciipics&amp;lt;/Private-Package&amp;gt;&lt;br/&gt;
  &amp;lt;Include-Resource&amp;gt;target/classes&amp;lt;/Include-Resource&amp;gt;&lt;br/&gt;
  &amp;lt;_exportcontents&amp;gt;org.coderthoughts.asciipics.impl&amp;lt;/_exportcontents&amp;gt;&lt;br/&gt;
&amp;lt;/instructions&amp;gt;&lt;/p&gt;

&lt;p&gt;So the trick is to not include the package involved in Export-Package/Private-Package, but include the class resources. Then use _exportcontents to export that. This will not bring in the class files in the same package from the other bundle.&lt;/p&gt;</comment>
                            <comment id="13158471" author="mcculls" created="Mon, 28 Nov 2011 14:36:18 +0000"  >&lt;p&gt;BTW, the reason why the split-package directive on the Export-Package was not working was because the mbp adds &quot;;-split-package:=merge-first&quot; by default to the list of private (local) packages. To see this use &quot;mvn clean install -X&quot; on the example project and look for the Private-Package instruction sent to bnd under &quot;BND Instructions&quot;.&lt;/p&gt;

&lt;p&gt;So another solution with mbp-2.3.4 is to use:&lt;/p&gt;

&lt;p&gt;          &amp;lt;instructions&amp;gt;&lt;br/&gt;
            &amp;lt;Bundle-SymbolicName&amp;gt;${project.name}&amp;lt;/Bundle-SymbolicName&amp;gt;&lt;br/&gt;
            &amp;lt;Bundle-Activator&amp;gt;org.coderthoughts.asciipics.Activator&amp;lt;/Bundle-Activator&amp;gt;&lt;br/&gt;
            &amp;lt;Export-Package&amp;gt;org.coderthoughts.asciipics.impl;-split-package:=first&amp;lt;/Export-Package&amp;gt;&lt;br/&gt;
            &amp;lt;Private-Package&amp;gt;org.coderthoughts.asciipics.*;-split-package:=first&amp;lt;/Private-Package&amp;gt;&lt;br/&gt;
          &amp;lt;/instructions&amp;gt;&lt;/p&gt;

&lt;p&gt;ie. set the split-package directive on both instructions.&lt;/p&gt;

&lt;p&gt;I&apos;ve made some improvements to the default Export/Private-Package generator under r1207213 to make this easier to adapt in the future, so you can use:&lt;/p&gt;

&lt;p&gt;          &amp;lt;instructions&amp;gt;&lt;br/&gt;
            &amp;lt;Bundle-SymbolicName&amp;gt;${project.name}&amp;lt;/Bundle-SymbolicName&amp;gt;&lt;br/&gt;
            &amp;lt;Bundle-Activator&amp;gt;org.coderthoughts.asciipics.Activator&amp;lt;/Bundle-Activator&amp;gt;&lt;br/&gt;
            &amp;lt;Export-Package&amp;gt;&lt;/p&gt;
{local-packages};-split-package:=first&amp;lt;/Export-Package&amp;gt;&lt;br/&gt;
            &amp;lt;Private-Package&amp;gt;{local-packages}
&lt;p&gt;;-split-package:=first&amp;lt;/Private-Package&amp;gt;&lt;br/&gt;
          &amp;lt;/instructions&amp;gt;&lt;/p&gt;

&lt;p&gt;for situations where you want to add directives in a parent pom, but don&apos;t know what packages are available. (This basically expands the existing support for &quot;&lt;/p&gt;
{local-packages}
&lt;p&gt;&quot; to include its use inside Private-Package.)&lt;/p&gt;</comment>
                            <comment id="13158491" author="bosschaert" created="Mon, 28 Nov 2011 15:08:29 +0000"  >&lt;p&gt;Thanks Stuart and Peter for your help.&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>217907</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1av1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>271494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>