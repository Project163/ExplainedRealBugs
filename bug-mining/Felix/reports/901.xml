<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:16:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1007] OBR search doesn&apos;t take &apos;categories&apos; into account</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1007</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;the RFC-0112 Bundle Repository document says: &quot;The &amp;lt;category&amp;gt; element defines a category. The purpose is to easy the discovery.&quot; and the description of the method org.osgi.servicex.obr. RepositoryAdmin#discoverResources says &quot;The attributes that can be checked are: &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; category&quot; but filtering resources with a given category doesn&apos;t work. The following filter is &quot;meaningless&quot;: &quot;(category:*&amp;gt;sampleCategory)&quot;&lt;/p&gt;

&lt;p&gt;Kristian&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12419634">FELIX-1007</key>
            <summary>OBR search doesn&apos;t take &apos;categories&apos; into account</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="kkoehler">Kristian Kohler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Mar 2009 10:27:40 +0000</created>
                <updated>Thu, 1 Apr 2010 11:48:32 +0000</updated>
                            <resolved>Mon, 22 Feb 2010 19:51:46 +0000</resolved>
                                                    <fixVersion>bundlerepository-1.6.0</fixVersion>
                                    <component>Bundle Repository (OBR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12689868" author="kkoehler" created="Fri, 27 Mar 2009 10:29:24 +0000"  >&lt;p&gt;This patch fixes this issue. I also have test cases for this but they depend on the new FilterImpl which is not committed yet (&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-973&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FELIX-973&lt;/a&gt;). &lt;/p&gt;</comment>
                            <comment id="12690011" author="rickhall" created="Fri, 27 Mar 2009 19:11:47 +0000"  >&lt;p&gt;I am not sure what you mean that filtering resources with a given category doesn&apos;t work.&lt;/p&gt;

&lt;p&gt;OBR expects the category to be multi-valued. So, the property is an array of Strings. You should be able to do filter with an array value, just specify the value you want and if it is in the array, then it will match.&lt;/p&gt;

&lt;p&gt;I don&apos;t think we want to take the multi-valued category property and turn it into a single comma-delimited string value.&lt;/p&gt;

&lt;p&gt;I guess I am confused, since this set operator should be working on the array...assuming you are using the patched FilterImpl that supports set operators.&lt;/p&gt;</comment>
                            <comment id="12693668" author="kkoehler" created="Mon, 30 Mar 2009 06:19:31 +0000"  >&lt;p&gt;Ok. Now we are both confused &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Sorry.&lt;/p&gt;

&lt;p&gt;I tried to find resources within the BundleRepository with a specific category value calling the RepositoryAdmin#discoverResources Method. This method takes a filter String. within this method all resources of the OBR are checked via the Filter#match Method of the Filter Implementation. This is done via a Dictionary Object which is passed to the method. This dictionary is filled with &lt;/p&gt;

&lt;p&gt;&amp;#8212; 8&amp;lt; &amp;#8212;&lt;br/&gt;
Map properties = resources&lt;span class=&quot;error&quot;&gt;&amp;#91;resIdx&amp;#93;&lt;/span&gt;.getProperties();&lt;br/&gt;
dict.setSourceMap(properties);&lt;br/&gt;
&amp;#8212; 8&amp;lt; &amp;#8212;&lt;/p&gt;

&lt;p&gt;... and these properties, if i&apos;m right, don&apos;t include the category value.&lt;/p&gt;

&lt;p&gt;So my attempt to call RepositoryAdmin#discoverResources(&quot;(category:*&amp;gt;sampleCategory)&quot;) &apos;fails&apos;.&lt;/p&gt;

&lt;p&gt;Are I&apos;m doing something wrong here? Is there a better way to do this?&lt;/p&gt;

&lt;p&gt;Kristian&lt;/p&gt;</comment>
                            <comment id="12695284" author="rickhall" created="Fri, 3 Apr 2009 08:01:32 +0000"  >&lt;p&gt;Ok, I think I see your (and my) confusion.&lt;/p&gt;

&lt;p&gt;Yes, you are correct, the categories are not included in the properties; however, it probably should be. This could probably be added to the properties as it is set in ResourceImpl.addCategory(). It might actually be the case that we don&apos;t need to put them into the category array list at all and we can just aggregate them into an array in the properties map.&lt;/p&gt;

&lt;p&gt;I think this was just something that was never really completed.&lt;/p&gt;</comment>
                            <comment id="12836859" author="gnt" created="Mon, 22 Feb 2010 19:51:46 +0000"  >&lt;p&gt;Committing to &lt;a href=&quot;https://svn.apache.org/repos/asf/felix/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/felix/trunk&lt;/a&gt; ...&lt;br/&gt;
	M	bundlerepository/src/main/java/org/apache/felix/bundlerepository/ResourceImpl.java&lt;br/&gt;
	A	bundlerepository/src/test/java/org/apache/felix/bundlerepository/RepositoryAdminTest.java&lt;br/&gt;
	M	org.osgi.service.obr/src/main/java/org/osgi/service/obr/Resource.java&lt;br/&gt;
Committed r915039&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12403795" name="categoriesQueryPatch_2009_03_27.txt" size="1483" author="kkoehler" created="Fri, 27 Mar 2009 10:29:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57983</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vzlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184739</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>