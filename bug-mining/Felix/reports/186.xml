<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:06:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-583] org.apache.felix.webconsole.internal.compendium.ConfigManager.listConfigurations(): ManagedServiceFactory instances are listed twice: with pid and factoryPid</title>
                <link>https://issues.apache.org/jira/browse/FELIX-583</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;ManagedServiceFactory instances are listed twice, with pid and factoryPid in org.apache.felix.webconsole.internal.compendium.ConfigManager.listConfigurations().&lt;/p&gt;

&lt;p&gt;The factoryPid will be added by the loop over the ServiceReference instances obtained from the framework for the type (class) ManagedServiceFactory:&lt;br/&gt;
// find all ManagedServiceFactories to get the factoryPIDs&lt;br/&gt;
ServiceReference[] refs = this.getBundleContext().getServiceReferences(ManagedServiceFactory.class.getName(), null );&lt;br/&gt;
 for ( int i = 0; refs != null &amp;amp;&amp;amp; i &amp;lt; refs.length; i++ )&lt;/p&gt;

&lt;p&gt;Given that it is not removed from  the map metaDataPids, it will also be added as &quot;pid&quot; by the loop: &lt;br/&gt;
if ( !metaDataPids.isEmpty() )&lt;br/&gt;
{&lt;br/&gt;
    for ( Iterator mdpi = metaDataPids.entrySet().iterator(); mdpi.hasNext(); )&lt;br/&gt;
....&lt;/p&gt;

&lt;p&gt;SVN revision 662145.&lt;/p&gt;

&lt;p&gt;A fix for this problem is to consistently remove the identifier from metaDataPids; this is done in some cases using:&lt;br/&gt;
// remove from the list of known pids&lt;br/&gt;
metaDataPids.remove( pid );&lt;/p&gt;</description>
                <environment></environment>
        <key id="12397235">FELIX-583</key>
            <summary>org.apache.felix.webconsole.internal.compendium.ConfigManager.listConfigurations(): ManagedServiceFactory instances are listed twice: with pid and factoryPid</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="wimpi">Dieter Wimberger</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Jun 2008 04:43:18 +0000</created>
                <updated>Thu, 7 Aug 2008 07:26:40 +0000</updated>
                            <resolved>Thu, 7 Aug 2008 07:26:41 +0000</resolved>
                                                    <fixVersion>webconsole-1.2.0</fixVersion>
                                    <component>Web Console</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12601447" author="wimpi" created="Sun, 1 Jun 2008 06:42:17 +0000"  >&lt;p&gt;The patch attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-585&quot; title=&quot;org.apache.felix.webconsole.internal.compendium.ConfigManager.listConfigurations(): Configuration instances for ManagedServiceFactoy instances cause IllegalArgumentException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-585&quot;&gt;&lt;del&gt;FELIX-585&lt;/del&gt;&lt;/a&gt; includes a fix for this bug.&lt;/p&gt;</comment>
                            <comment id="12601594" author="ppedruzzi" created="Mon, 2 Jun 2008 11:19:02 +0000"  >&lt;p&gt;Patch attached with some minor fixes in the Configuration render.&lt;br/&gt;
It fixes this issue.&lt;/p&gt;</comment>
                            <comment id="12604813" author="fmeschbe" created="Fri, 13 Jun 2008 12:00:36 +0000"  >&lt;p&gt;Pedro, thanks for the patch.&lt;/p&gt;

&lt;p&gt;After looking into this some deeper, I must say my code is completely crazy &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;It looks for ManagedServiceFactory services&lt;/li&gt;
	&lt;li&gt;It looks for existing configuration&lt;/li&gt;
	&lt;li&gt;It looks for Metatype Descriptors&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;But it does &lt;em&gt;not&lt;/em&gt; look for ManagedService services ....&lt;/p&gt;

&lt;p&gt;So, I must say, this is wrong and I am currently taking a completely different approach. As described for &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-584&quot; title=&quot;org.apache.felix.webconsole.internal.compendium.AjaxConfigManagerAction.applyConfiguration(): &amp;quot;create&amp;quot; action is not handled properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-584&quot;&gt;&lt;del&gt;FELIX-584&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, I will provide two lists: One with the ManagedServiceFactory services looking for configuration and one with ManagedService services (and existing configuration) looking for configuration.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-584?focusedCommentId=12604810#action_12604810&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FELIX-584?focusedCommentId=12604810#action_12604810&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12604820" author="ppedruzzi" created="Fri, 13 Jun 2008 12:12:05 +0000"  >&lt;p&gt;I noticed that we were missing the ManagedService services. I actually wrote some code to include those, but did not share because I knew that was not the right approach.&lt;/p&gt;

&lt;p&gt;Your proposal sounds very good to me. I will wait for this!&lt;/p&gt;</comment>
                            <comment id="12604829" author="fmeschbe" created="Fri, 13 Jun 2008 12:36:37 +0000"  >&lt;p&gt;Implemented new configuration gui in Rev. 667498 and deployed SNAPSHOT build 1.0.1-20080613.123406-2. See &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-584&quot; title=&quot;org.apache.felix.webconsole.internal.compendium.AjaxConfigManagerAction.applyConfiguration(): &amp;quot;create&amp;quot; action is not handled properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-584&quot;&gt;&lt;del&gt;FELIX-584&lt;/del&gt;&lt;/a&gt; for details.&lt;/p&gt;
</comment>
                            <comment id="12620534" author="fmeschbe" created="Thu, 7 Aug 2008 07:26:40 +0000"  >&lt;p&gt;This issue can be considered solved by the implementation of a different approach in displaying the configuration factories and configurations. Therefore it can be closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12383219" name="webconsole.patch" size="1692" author="ppedruzzi" created="Mon, 2 Jun 2008 11:19:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0w0kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184898</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>