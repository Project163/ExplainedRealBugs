<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:14:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-6180] Component initialization error message get&apos;s printed to sysout instead of logged to LogService</title>
                <link>https://issues.apache.org/jira/browse/FELIX-6180</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;We had a broken component that failed to start (for a good reason): &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Component(provides = &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.class)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BrokenComponent {

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Locale defaultLocale = Locale.forLanguageTag(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;not.set&quot;&lt;/span&gt;));

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is not that it doesn&apos;t work BUT the error log  (see below) never reached our central logging (which is consuming the log messages from the LogService). &lt;/p&gt;

&lt;p&gt;I this is caused by the fact that this is not an &lt;tt&gt;Exception&lt;/tt&gt; but an &lt;tt&gt;Error&lt;/tt&gt;, that makes it propagate all the way to the &lt;tt&gt;SerialExecutor&lt;/tt&gt; which is initialized with a new &lt;tt&gt;Logger&lt;/tt&gt; instance in &lt;tt&gt;ComponentImpl&lt;/tt&gt; instead of getting the &lt;tt&gt;Logger&lt;/tt&gt; instance that was used to create the &lt;tt&gt;ComponentImpl&lt;/tt&gt;. &lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR: [main] Error processing tasks (java.lang.ExceptionInInitializerError)
java.lang.ExceptionInInitializerError
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
    at org.apache.felix.dm.impl.InvocationUtil.createInstance(InvocationUtil.java:342)
    at org.apache.felix.dm.impl.ComponentImpl.instantiateComponent(ComponentImpl.java:1073)
    at org.apache.felix.dm.impl.ComponentImpl.instantiateComponent(ComponentImpl.java:1046)
    at org.apache.felix.dm.impl.ComponentImpl.performTransition(ComponentImpl.java:1221)
    at org.apache.felix.dm.impl.ComponentImpl.handleChange(ComponentImpl.java:1166)
    at org.apache.felix.dm.impl.ComponentImpl.lambda$start$2(ComponentImpl.java:502)
    at org.apache.felix.dm.impl.SerialExecutor.runTask(SerialExecutor.java:138)
    at org.apache.felix.dm.impl.SerialExecutor.runTasks(SerialExecutor.java:120)
    at org.apache.felix.dm.impl.SerialExecutor.execute(SerialExecutor.java:86)
    at org.apache.felix.dm.impl.SerialExecutor.execute(SerialExecutor.java:105)
    at org.apache.felix.dm.impl.ComponentImpl.start(ComponentImpl.java:500)
    at org.apache.felix.dm.impl.ComponentScheduler.add(ComponentScheduler.java:69)
    at org.apache.felix.dm.DependencyManager.add(DependencyManager.java:141)
    at my.project.Activator.init(Activator.java:84)
    at org.apache.felix.dm.DependencyActivatorBase.start(DependencyActivatorBase.java:79)
    at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:698)
    at org.apache.felix.framework.Felix.activateBundle(Felix.java:2402)
    at org.apache.felix.framework.Felix.startBundle(Felix.java:2308)
    at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998)
    at aQute.launcher.Launcher.startBundles(Launcher.java:528)
    at aQute.launcher.Launcher.activate(Launcher.java:427)
    at aQute.launcher.Launcher.run(Launcher.java:306)
    at aQute.launcher.Launcher.main(Launcher.java:152)
    at aQute.launcher.pre.EmbeddedLauncher.main(EmbeddedLauncher.java:65)
Caused by: java.lang.NullPointerException
    at sun.util.locale.LocaleUtils.toLowerString(LocaleUtils.java:89)
    at sun.util.locale.LanguageTag.parse(LanguageTag.java:191)
    at java.util.Locale.forLanguageTag(Locale.java:1568)
    at MyBrokenComponent.&amp;lt;clinit&amp;gt;(UserTransformerV1_2.java:17)
    ... 28 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13256070">FELIX-6180</key>
            <summary>Component initialization error message get&apos;s printed to sysout instead of logged to LogService</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pderop">Pierre De Rop</assignee>
                                    <reporter username="brampouwelse">Bram Pouwelse</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Sep 2019 09:24:57 +0000</created>
                <updated>Mon, 25 Jan 2021 16:04:43 +0000</updated>
                            <resolved>Wed, 3 Jun 2020 15:46:11 +0000</resolved>
                                                    <fixVersion>org.apache.felix.dependencymanager-r16</fixVersion>
                                    <component>Dependency Manager</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16927429" author="brampouwelse" created="Wed, 11 Sep 2019 09:29:04 +0000"  >&lt;p&gt;Attached a patch to initialize the default  &lt;tt&gt;SerialExecutor&lt;/tt&gt; with the &lt;tt&gt;Logger&lt;/tt&gt; used bu the &lt;tt&gt;ComponentImpl&lt;/tt&gt; instance&lt;/p&gt;</comment>
                            <comment id="16927693" author="pderop" created="Wed, 11 Sep 2019 15:31:41 +0000"  >&lt;p&gt;Thanks Bram, I&apos;ll take a look.&lt;/p&gt;</comment>
                            <comment id="16928054" author="pderop" created="Wed, 11 Sep 2019 22:29:57 +0000"  >&lt;p&gt;I just have committed your patch in the trunk, thanks a lot Bram !&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12980051" name="FELIX-6180.patch" size="1937" author="brampouwelse" created="Wed, 11 Sep 2019 09:27:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06je0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>