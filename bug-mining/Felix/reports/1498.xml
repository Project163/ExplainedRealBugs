<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:34:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2890] FileInstall starts non-daemon threads</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2890</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The initial fileinstall thread can be a non-daemon thread as shown below:&lt;/p&gt;

&lt;p&gt;&quot;fileinstall-/space/ss141213/WS/gf/v3/publish/glassfish3/glassfish/modules/autostart/&quot; prio=10 tid=0x7b73d000 nid=0x1d77 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x7925c000&amp;#93;&lt;/span&gt;&lt;br/&gt;
&quot;fileinstall-/space/ss141213/WS/gf/v3/publish/glassfish3/glassfish/domains/domain1/autodeploy/bundles/&quot; daemon prio=10 tid=0x0a3d7c00 nid=0x1d76 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x792ad000&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The first one here is created based on bundle context property where as the second one is on config event. Looking at the code, I see the code does not explicitly set daemon status, so the new thread just inherits the parent&apos;s daemon status. A simple fix like the below is needed to make sure that fileinstall always starts daemon thread so that even if the bundle is not stopped, the VM exits. &lt;/p&gt;

&lt;p&gt;Index: src/main/java/org/apache/felix/fileinstall/internal/FileInstall.java&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; src/main/java/org/apache/felix/fileinstall/internal/FileInstall.java	(revision 1063634)&lt;br/&gt;
+++ src/main/java/org/apache/felix/fileinstall/internal/FileInstall.java	(working copy)&lt;br/&gt;
@@ -214,6 +214,7 @@&lt;br/&gt;
             watcher.close();&lt;br/&gt;
         }&lt;br/&gt;
         watcher = new DirectoryWatcher(properties, context);&lt;br/&gt;
+        watcher.setDaemon(true);&lt;br/&gt;
         synchronized (watchers)&lt;br/&gt;
         {&lt;br/&gt;
             watchers.put(pid, watcher);&lt;/p&gt;

&lt;p&gt;Let me know if you have objections or you think it is an incompatible change.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12502334">FELIX-2890</key>
            <summary>FileInstall starts non-daemon threads</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="sahoo">Sanjeeb Kumar Sahoo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Mar 2011 22:59:14 +0000</created>
                <updated>Tue, 17 Mar 2015 07:00:48 +0000</updated>
                            <resolved>Fri, 16 Mar 2012 08:20:46 +0000</resolved>
                                    <version>fileinstall-3.1.10</version>
                                    <fixVersion>fileinstall-3.2.0</fixVersion>
                                    <component>File Install</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13045300" author="gnt" created="Tue, 7 Jun 2011 07:04:49 +0000"  >&lt;p&gt;It makes sense to me to configure threads as daemons.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56090</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07gqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>41478</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>