<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:05:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-379] Registering multiple servlets may hide some</title>
                <link>https://issues.apache.org/jira/browse/FELIX-379</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Consider registering a servlet RootServlet for &quot;/&quot; first and then a servlet SomeServlet for &quot;/some&quot; with different OSGi HttpContext instances in this order with the http.jetty HttpService. This registration works absolutely correct and also creates the necessary setup internally. Unfortunately, when Jetty now receives a request for &quot;/some&quot;, it first calls the RootServlet instead of the SomeServlet as would be expected according to the HttpServlet Service specification.&lt;/p&gt;

&lt;p&gt;If the servlets are registered SomeServlet first and then RootServlet it works perfectly.&lt;/p&gt;

&lt;p&gt;I think it is related to the fact, that the http.jetty bundle registers a jetty context for &quot;/&quot; for each different OSGi HttpContext and jetty asks these registrations in registration order, which may not be correct according to the spec. Probably, there should only be one actual web app registration with jetty and the http.jetty bundle should multiplex between the different OSGi HttpContext instances and select the correct servlets.&lt;/p&gt;

&lt;p&gt;I am working a possible solution to this right now.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12379080">FELIX-379</key>
            <summary>Registering multiple servlets may hide some</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="fmeschbe">Felix Meschberger</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Sep 2007 06:50:49 +0000</created>
                <updated>Fri, 28 Sep 2007 15:17:47 +0000</updated>
                            <resolved>Fri, 28 Sep 2007 14:16:49 +0000</resolved>
                                                    <fixVersion>framework-1.0.0</fixVersion>
                                    <component>HTTP Service</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12530677" author="fmeschbe" created="Thu, 27 Sep 2007 10:05:27 +0000"  >&lt;p&gt;Did a rework of the http.jetty bundle such that now only a single Jetty ServletHandler is registered together with a single Jetty ServletHttpContext. This handler/context tuple is used to register all servlets framework wide registered with the http.jetty HttpService. This is required to be able to conform to the &quot;single namespace for all servlets&quot; requirement of the Http Service Spec.&lt;/p&gt;

&lt;p&gt;In addition, just for completeness, I reformatted the code according to the Felix coding conventions and cleaned up all import lists.&lt;/p&gt;

&lt;p&gt;Does anyone mind, if I would apply this patch ?&lt;/p&gt;</comment>
                            <comment id="12530730" author="rickhall" created="Thu, 27 Sep 2007 14:02:50 +0000"  >&lt;p&gt;Rob Walker has done most of the hacking on this, so perhaps he might have the most valuable input on whether the patch makes sense. However, I am sure you can go ahead and apply it because if it causes issues we can always fix it or rollback.&lt;/p&gt;</comment>
                            <comment id="12531020" author="fmeschbe" created="Fri, 28 Sep 2007 14:16:36 +0000"  >&lt;p&gt;Thanks. &lt;/p&gt;

&lt;p&gt;Ok then, I go ahead just checking it in.&lt;/p&gt;

&lt;p&gt;Done in Rev. 580363 and deployed a new SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="12531021" author="fmeschbe" created="Fri, 28 Sep 2007 14:16:49 +0000"  >&lt;p&gt;Done, over and out.&lt;/p&gt;</comment>
                            <comment id="12531023" author="walkerr" created="Fri, 28 Sep 2007 14:23:16 +0000"  >&lt;p&gt;Felix&lt;/p&gt;

&lt;p&gt;Just one request would be to check that this doesn&apos;t disturb session contexts/cookie handling.&lt;/p&gt;

&lt;p&gt;It&apos;s a long time back I looked at this code, but I seem to remember some wiring was needed between the contexts we hold in the HttpService and those Jetty uses for managing session context. Would guess this is all still ok, but would be good to verify it.&lt;/p&gt;

&lt;p&gt;Sorry for being bit late to the party on this one...&lt;/p&gt;

&lt;p&gt;&amp;#8211; Rob&lt;/p&gt;
</comment>
                            <comment id="12531029" author="fmeschbe" created="Fri, 28 Sep 2007 14:44:11 +0000"  >&lt;p&gt;Hi Rob,&lt;/p&gt;

&lt;p&gt;Thanks for the feedback. This is in fact, something I didn&apos;t look into. So I would have to crosscheck.&lt;/p&gt;

&lt;p&gt;I suggest, if such an issue would arise, we could open a new issue to tackle that.&lt;/p&gt;

&lt;p&gt;But if the spec says &quot;all servlets share the same namespace&quot; I assume this also means, the share the same namespace for cookies. Maybe I am wrong here ....&lt;/p&gt;

&lt;p&gt;&amp;gt; Sorry for being bit late to the party on this one...&lt;/p&gt;

&lt;p&gt;Absolutely no problem.&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Felix&lt;/p&gt;</comment>
                            <comment id="12531035" author="walkerr" created="Fri, 28 Sep 2007 15:10:38 +0000"  >&lt;p&gt;Thanks Felix.&lt;/p&gt;

&lt;p&gt;In the absence of anything specific in Osgi HTTP service spec, it seems safest to fall back to what people would consider &quot;normal/covnetional HTTP server behaviour&quot; for session params, cookies etc.&lt;/p&gt;

&lt;p&gt;I&apos;d read the &quot;share same namespace&quot; aspect as being more to do with Paths than session params etc. - but I&apos;m not an expert in this area.&lt;/p&gt;

&lt;p&gt;As per my email, my very old HTTP Test bundle that I used initially to find our original &quot;hole&quot; in session param handling and fix it is still in the OBR if needed:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://oscar-osgi.sourceforge.net/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://oscar-osgi.sourceforge.net/&lt;/a&gt;&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12366652" name="FELIX-379.patch" size="65321" author="fmeschbe" created="Thu, 27 Sep 2007 10:05:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vydz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184544</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>