<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:12:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5794] maven-bundle-plugin fails to parse meta-persistence</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5794</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Since &lt;tt&gt;maven-bundle-plugin&lt;/tt&gt; 3.4.0 (and the update to bnd 3.4.0), the plugin fails to build bundle containing &lt;tt&gt;&amp;lt;Meta-Persistence/&amp;gt;&lt;/tt&gt;. NB: the same bundle builds fine with &lt;tt&gt;maven-bundle-plugin&lt;/tt&gt; 3.3.0.&lt;/p&gt;

&lt;p&gt;The cause is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] --- maven-bundle-plugin:3.5.0:bundle (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-bundle) @ karaf-jpa-example-provider ---
Output: [Provide-Capability: osgi.service;effective:=active;objectClass=javax.persistence.EntityManager;osgi.unit.name=&lt;span class=&quot;code-quote&quot;&gt;&quot;booking&quot;&lt;/span&gt;, Provide-Capability: osgi.service;effective:=active;objectClass=org.apache.aries.jpa.template.JpaTemplate;osgi.unit.name=&lt;span class=&quot;code-quote&quot;&gt;&quot;booking&quot;&lt;/span&gt;, Require-Capability: osgi.service;effective:=active;objectClass=javax.sql.DataSource;filter:=&lt;span class=&quot;code-quote&quot;&gt;&quot;(osgi.jndi.service.name=booking)&quot;&lt;/span&gt;, DynamicImport-Package: org.hibernate.proxy;javassist.util.proxy, Provide-Capability: osgi.service;effective:=active;objectClass=javax.persistence.EntityManagerFactory;osgi.unit.name=&lt;span class=&quot;code-quote&quot;&gt;&quot;booking&quot;&lt;/span&gt;, Provide-Capability: osgi.service;effective:=active;objectClass=org.apache.aries.jpa.supplier.EmSupplier;osgi.unit.name=&lt;span class=&quot;code-quote&quot;&gt;&quot;booking&quot;&lt;/span&gt;, Import-Package: org.hibernate.proxy;javassist.util.proxy;resolution:=optional, Require-Capability: osgi.extender;osgi.extender=aries.jpa, Require-Capability: osgi.service;effective:=active;objectClass=javax.persistence.spi.PersistenceProvider;javax.persistence.provider=org.hibernate.jpa.HibernatePersistenceProvider, Require-Capability: osgi.service;effective:=active;objectClass=javax.transaction.TransactionManager;]
[ERROR] Bundle org.apache.karaf.examples:karaf-jpa-example-provider:bundle:4.2.0-SNAPSHOT : Header contains name field after attribute or directive: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; from osgi.service;effective:=active;objectClass=javax.sql.DataSource;filter:=&lt;span class=&quot;code-quote&quot;&gt;&quot;(osgi.jndi.service.name=booking)&quot;&lt;/span&gt;,osgi.extender;osgi.extender=aries.jpa,osgi.service;effective:=active;objectClass=javax.persistence.spi.PersistenceProvider;javax.persistence.provider=org.hibernate.jpa.HibernatePersistenceProvider,osgi.service;effective:=active;objectClass=javax.transaction.TransactionManager;. Name fields must be consecutive, separated by a &lt;span class=&quot;code-quote&quot;&gt;&apos;;&apos;&lt;/span&gt; like a;b;c;x=3;y=4
[ERROR] Error(s) found in bundle configuration
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13142257">FELIX-5794</key>
            <summary>maven-bundle-plugin fails to parse meta-persistence</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="jbonofre">Jean-Baptiste Onofr&#233;</reporter>
                        <labels>
                    </labels>
                <created>Sat, 3 Mar 2018 07:07:38 +0000</created>
                <updated>Mon, 8 Oct 2018 20:32:25 +0000</updated>
                            <resolved>Fri, 8 Jun 2018 15:27:09 +0000</resolved>
                                    <version>maven-bundle-plugin-3.4.0</version>
                    <version>maven-bundle-plugin-3.5.0</version>
                                    <fixVersion>maven-bundle-plugin-4.0.0</fixVersion>
                                    <component>Maven Bundle Plugin</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16411507" author="tuomas_kiviaho" created="Fri, 23 Mar 2018 14:48:56 +0000"  >&lt;p&gt;This is caused by JpaPlugin. bnd seems to be picky about &lt;tt&gt;Require-Capability&lt;/tt&gt; ending&#160;with ; I considered this to be a blocker for whole &lt;tt&gt;JpaPlugin&lt;/tt&gt; because&#160;&lt;tt&gt;jpa.xsl&lt;/tt&gt; contains the following &lt;tt&gt;concat&lt;/tt&gt; that causes this. &lt;/p&gt;

&lt;p&gt;The fix would consist of using &lt;a href=&quot;http://www.xsltfunctions.com/xsl/fn_string-join.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.xsltfunctions.com/xsl/fn_string-join.html&lt;/a&gt; to mend together interface and attributes + nl&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;xsl:template&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;service-capability&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;xsl:param&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;interface&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;xsl:param&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;attributes&quot;&lt;/span&gt; select=&lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&apos;&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;xsl:value-of&lt;/span&gt; select=&quot;concat(&lt;span class=&quot;code-quote&quot;&gt;&apos;Provide-Capability: osgi.service;effective:=active;&apos;&lt;/span&gt;,
&lt;span class=&quot;code-quote&quot;&gt;&apos;objectClass=&apos;&lt;/span&gt;, $interface, &lt;span class=&quot;code-quote&quot;&gt;&apos;;&apos;&lt;/span&gt;,
$attributes,
$nl)&quot;/&amp;gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;code-keyword&quot;&gt;xsl:template&lt;/span&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;xsl:template&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;service-requirement&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;xsl:param&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;interface&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;xsl:param&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;attributes&quot;&lt;/span&gt; select=&lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&apos;&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;xsl:value-of&lt;/span&gt; select=&quot;concat(&lt;span class=&quot;code-quote&quot;&gt;&apos;Require-Capability: osgi.service;effective:=active;&apos;&lt;/span&gt;,
&lt;span class=&quot;code-quote&quot;&gt;&apos;objectClass=&apos;&lt;/span&gt;, $interface, &lt;span class=&quot;code-quote&quot;&gt;&apos;;&apos;&lt;/span&gt;,
$attributes,
$nl)&quot;/&amp;gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;code-keyword&quot;&gt;xsl:template&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16412424" author="tuomas_kiviaho" created="Sat, 24 Mar 2018 05:10:56 +0000"  >&lt;p&gt;There seems to be a &lt;tt&gt;System.err&lt;/tt&gt; in JpaPlugin. Could that be replaced with proper logging. BND has a reporter but this is what it suggests nowadays for debugging (see below). I don&apos;t know if that approach would honor Maven debug flag but now the output - although being helpful - is in fact quite intrusive. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
	 * @deprecated Use SLF4J Logger.debug instead.
	 */
	@Deprecated
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void trace(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;... parms) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16412456" author="jbonofre" created="Sat, 24 Mar 2018 06:44:29 +0000"  >&lt;p&gt;Thanks, I think I have a fix ready that I&apos;m testing right now. I will create the PR soon and will let you know.&lt;/p&gt;</comment>
                            <comment id="16412461" author="tuomas_kiviaho" created="Sat, 24 Mar 2018 06:53:14 +0000"  >&lt;p&gt;Although there is a workaround to this in a form of a property, it seems that there is no directive variant (like &lt;tt&gt;-jpa-enable&lt;/tt&gt;) available of it so the property will end up into the manifest. One way to circumvent this is of course to the plugin is all-together  via &lt;tt&gt;&amp;lt;_disable-plugin&amp;gt;org.apache.felix.bundleplugin.JpaPlugin&amp;lt;/_disable-plugin&amp;gt;&lt;/tt&gt; but that can&apos;t be added to an external BND file&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        transformer.setParameter( &lt;span class=&quot;code-quote&quot;&gt;&quot;jpa-enable&quot;&lt;/span&gt;, analyzer.getProperty( &lt;span class=&quot;code-quote&quot;&gt;&quot;jpa-enable&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; ) );
        transformer.setParameter( &lt;span class=&quot;code-quote&quot;&gt;&quot;jpa-implementation&quot;&lt;/span&gt;, analyzer.getProperty( &lt;span class=&quot;code-quote&quot;&gt;&quot;jpa-implementation&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;aries&quot;&lt;/span&gt; ) );
        transformer.setParameter( &lt;span class=&quot;code-quote&quot;&gt;&quot;jpa-datasource-req&quot;&lt;/span&gt;, analyzer.getProperty( &lt;span class=&quot;code-quote&quot;&gt;&quot;jpa-datasource-req&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; ) );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16506140" author="gnt" created="Fri, 8 Jun 2018 15:27:46 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Committing to https:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/repos/asf/felix/trunk ...
&lt;/span&gt;	M	tools/maven-bundle-plugin/src/main/java/org/apache/felix/bundleplugin/JpaPlugin.java
	M	tools/maven-bundle-plugin/src/main/resources/org/apache/felix/bundleplugin/jpa.xsl
	M	tools/maven-bundle-plugin/src/test/java/org/apache/felix/bundleplugin/JpaPluginTest.java
Committed r1833192
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qtmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>