<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:57:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4863] SSLFilter 0.1.0 and 0.2.0 have a Java race condition, stopping the Filter from working correctly</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4863</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;There is a Java race condition, where if the wrong method &quot;wins&quot;, the configuration does not get applied.&lt;br/&gt;
The SSL Filter (which is supposed to override certain Request/Response methods) does not work, causing mapping failures, wrong URLs, etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12823693">FELIX-4863</key>
            <summary>SSLFilter 0.1.0 and 0.2.0 have a Java race condition, stopping the Filter from working correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Apr 2015 08:53:04 +0000</created>
                <updated>Mon, 4 May 2015 07:45:23 +0000</updated>
                            <resolved>Wed, 29 Apr 2015 11:24:34 +0000</resolved>
                                    <version>http.sslfilter-0.2.0</version>
                                    <fixVersion>http.sslfilter-1.0.0</fixVersion>
                                    <component>HTTP Service</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14510672" author="asanso" created="Fri, 24 Apr 2015 08:54:13 +0000"  >&lt;p&gt;The issue seems to be in the &lt;tt&gt;HttpServiceTracker&lt;/tt&gt; class in the &lt;tt&gt;open(boolean trackAllServices)&lt;/tt&gt; method.&lt;/p&gt;</comment>
                            <comment id="14510687" author="jajans" created="Fri, 24 Apr 2015 09:09:37 +0000"  >&lt;p&gt;Could you explain the problem in a little more detail? What reproduction steps are there, what stacktrace(s) do you see, etc...&lt;/p&gt;</comment>
                            <comment id="14510691" author="asanso" created="Fri, 24 Apr 2015 09:15:30 +0000"  >&lt;p&gt;Root cause&lt;br/&gt;
The implementation of the SSLFilter (mostly in HttpServiceTracker) has a classic multithreading race condition.&lt;br/&gt;
As soon as the bundle gets started, both the &#8220;addingService&#8221; and &#8220;updated&#8221; method are called asynchronously.&lt;br/&gt;
If &#8220;updated&#8221; hits line 124 before &#8220;addingService&#8221; hits line 109, then no configuration will be applied (the default will be applied, no matter what the actual configuration is).&lt;br/&gt;
If &#8221;addingService&#8221; hits line 109 before &#8220;updated&#8221; hits line 124, then the correct configuration will be applied (this is the expected behavior).&lt;/p&gt;

&lt;p&gt;How to reproduce?&lt;/p&gt;

&lt;p&gt;Set debug points on entry of these 2 methods:&lt;br/&gt;
org.apache.felix.http.sslfilter.internal.HttpServiceTracker.addingService (line 99)&lt;br/&gt;
org.apache.felix.http.sslfilter.internal.HttpServiceTracker.open (ManagedService.updated) (line 71)&lt;/p&gt;</comment>
                            <comment id="14510692" author="asanso" created="Fri, 24 Apr 2015 09:16:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jajans&quot; class=&quot;user-hover&quot; rel=&quot;jajans&quot;&gt;jajans&lt;/a&gt; thanks. I have provided more info...&lt;/p&gt;</comment>
                            <comment id="14516730" author="cziegeler" created="Tue, 28 Apr 2015 09:37:00 +0000"  >&lt;p&gt;I&apos;ve committed a fix which should solve the problem: the SslFilter instance is actually a singleton which can be registered with any ext http service.&lt;/p&gt;</comment>
                            <comment id="14516733" author="cziegeler" created="Tue, 28 Apr 2015 09:37:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; Could you please give this version a try?&lt;/p&gt;</comment>
                            <comment id="14519026" author="asanso" created="Wed, 29 Apr 2015 09:28:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; thanks a lot for the quick fix. It works like a charm... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12727861" name="stacktrace.png" size="879261" author="asanso" created="Fri, 24 Apr 2015 09:16:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2dphj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>