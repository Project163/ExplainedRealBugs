<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:53:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-4330] [HTTP SSL Filter] Make SSL header(s) configurable</title>
                <link>https://issues.apache.org/jira/browse/FELIX-4330</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The request header indicating a proxy terminating an HTTPS connection is currently hard coded to be &quot;X-Forwarded-SSL&quot; with the only value supported to be &quot;on&quot; &amp;#8211; based on the assumption of this being the most commonly used header value.&lt;/p&gt;

&lt;p&gt;It looks that Amazon&apos;s Elastice Load Balancer uses a different header and value: X-Forwarded-Proto whose value is the actual protocol by which the client talks to the load balancer. The filter should kick in if the protocol is https (or maybe if it is just not the same as the one which the servlet container reports).&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/TerminologyandKeyConcepts.html#x-forwarded-proto&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/TerminologyandKeyConcepts.html#x-forwarded-proto&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681019">FELIX-4330</key>
            <summary>[HTTP SSL Filter] Make SSL header(s) configurable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fmeschbe">Felix Meschberger</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Nov 2013 12:25:53 +0000</created>
                <updated>Thu, 23 Nov 2017 15:00:03 +0000</updated>
                            <resolved>Tue, 20 May 2014 15:11:09 +0000</resolved>
                                    <version>http-2.2.1</version>
                                    <fixVersion>http-2.3.0</fixVersion>
                    <fixVersion>http.sslfilter-0.1.0</fixVersion>
                                    <component>HTTP Service</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13876626" author="ianeboston" created="Mon, 20 Jan 2014 17:55:47 +0000"  >&lt;p&gt;Patch to address this issue.&lt;/p&gt;

&lt;p&gt;It doesn&apos;t add configuration properties, it hard codes the headers used by ELB SSL Termination as per the AWS documentation and continues to support mod_ssl termination.&lt;/p&gt;

&lt;p&gt;nginX recommends setting a header see question at &lt;a href=&quot;https://code.djangoproject.com/ticket/14597&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://code.djangoproject.com/ticket/14597&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Other proxies that can be configured will probably take the same approach. ELB is probably the only one with no configuration capability.&lt;/p&gt;</comment>
                            <comment id="13876628" author="ianeboston" created="Mon, 20 Jan 2014 17:56:42 +0000"  >&lt;p&gt;Please note, I have not tested the patch against a live ELB instance, but it it is acceptable I can cut an internal release and get it tested.&lt;/p&gt;</comment>
                            <comment id="13987049" author="fmeschbe" created="Thu, 1 May 2014 21:57:33 +0000"  >&lt;p&gt;Proposing a slightly more complicated version which allows configuration of the header value and property.&lt;/p&gt;

&lt;p&gt;WDYT ?&lt;/p&gt;</comment>
                            <comment id="13987483" author="ianeboston" created="Fri, 2 May 2014 08:07:21 +0000"  >&lt;p&gt;lgtm, except, imho it would be better to support the major SSL terminations by default so that for 80% of those deploying it works out the box and they don&apos;t have to debug, read the docs or find this jira issue.&lt;/p&gt;

&lt;p&gt;I think that list should include&lt;br/&gt;
mod_ssl&lt;br/&gt;
AWS ELB&lt;br/&gt;
nginX&lt;/p&gt;

&lt;p&gt;The real problem with AWS ELB is that there is that its not possible to configure what the headers are. They are hard coded and the only interface is a web page/web service. Most others (including mod_ssl and nginX)  there is a &quot;set request header&quot; directive of some form. TBH, its possible to work round this by putting a HAProxy behind the ELB SSL termination.&lt;/p&gt;</comment>
                            <comment id="13988796" author="fmeschbe" created="Sat, 3 May 2014 19:36:10 +0000"  >&lt;p&gt;This really &lt;b&gt;is&lt;/b&gt; a mess: I found mentions of four headers:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;X-Forwarded-SSL: on&lt;/tt&gt; &amp;ndash; the currently hard coded default value&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;X-Forwarded-Proto: https&lt;/tt&gt; &amp;ndash; &lt;a href=&quot;http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/TerminologyandKeyConcepts.html#x-forwarded-proto&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Amazon ELBs hard coded header&lt;/a&gt; and in an Nginx Wiki page on &lt;a href=&quot;http://wiki.nginx.org/SSL-Offloader&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SSL-Offload&lt;/a&gt;. Also listed on Wikipedia&apos;s &lt;a href=&quot;http://en.wikipedia.org/wiki/List_of_HTTP_header_fields&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;List of HTTP header fields&lt;/a&gt; as a quasi standard.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;X-Forwarded-Protocol: https&lt;/tt&gt; &amp;ndash; Alternative to X-Forwarded-Proto&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;Front-End-Https: on&lt;/tt&gt; &amp;ndash; Microsoft header, see &lt;a href=&quot;http://technet.microsoft.com/en-us/library/aa997519%28v=exchg.65%29.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Helping to Secure Communication: Client to Front-End Server&lt;/a&gt;. Also listed on Wikipedia&apos;s &lt;a href=&quot;http://en.wikipedia.org/wiki/List_of_HTTP_header_fields&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;List of HTTP header fields&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I fear we have to provide support for all.&lt;/p&gt;</comment>
                            <comment id="13988798" author="fmeschbe" created="Sat, 3 May 2014 19:41:49 +0000"  >&lt;p&gt;Updated patch supporting all four listed headers.&lt;/p&gt;</comment>
                            <comment id="13992573" author="jajans" created="Thu, 8 May 2014 07:16:09 +0000"  >&lt;p&gt;I&apos;ve taken a look at the latest patch of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; and was wondering why we want to limit the possible values that are allowed in &lt;tt&gt;SslFilter&lt;/tt&gt;. We now would have to update our code for each new header that is proposed in the future.&lt;/p&gt;

&lt;p&gt;I&apos;d propose to just allow the &lt;tt&gt;SslFilter&lt;/tt&gt; to obtain two configuration values: one for the forward header name and one for the expected value of the header and not do the parsing of values at all.&lt;/p&gt;

&lt;p&gt;The above mentioned values could be a good start for the documentation on the website, so your work isn&apos;t lost &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Another remark: shouldn&apos;t we propagate the header as configured? Now we always use the &lt;tt&gt;X-Forwarded-SSL&lt;/tt&gt; header for that purpose, which might be not the most obvious for users using another vendor...&lt;/p&gt;</comment>
                            <comment id="13999655" author="cziegeler" created="Fri, 16 May 2014 07:06:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jajans&quot; class=&quot;user-hover&quot; rel=&quot;jajans&quot;&gt;jajans&lt;/a&gt; I basically agree with you. So you suggest to replace the current option property from Felix patch with two string props, right? Could you update the patch? Maybe we could add the known configuration setups to the description, so people see right away in the web console how they can configure it?&lt;/p&gt;</comment>
                            <comment id="14003179" author="jajans" created="Tue, 20 May 2014 12:52:19 +0000"  >&lt;p&gt;I&apos;ve taken the liberty to directly commit the updated version, see rev. #1596230. Aside splitting the ssl-forward header into a key/value configuration property, I also made the forwarded client certificate header configurable, as found at least two different headers are used in the wild. Documentation of the configuration object is added by means of a metatype definition.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;: with these changes I think we can close this issue now?&lt;/p&gt;</comment>
                            <comment id="14003392" author="cziegeler" created="Tue, 20 May 2014 14:50:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jajans&quot; class=&quot;user-hover&quot; rel=&quot;jajans&quot;&gt;jajans&lt;/a&gt; Perfect, thanks - yes we can close this one&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13120489">FELIX-5750</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12642928" name="FELIX-4330-fme.patch" size="11185" author="fmeschbe" created="Thu, 1 May 2014 21:57:33 +0000"/>
                            <attachment id="12643226" name="FELIX-4330-fme2.patch" size="11351" author="fmeschbe" created="Sat, 3 May 2014 19:41:49 +0000"/>
                            <attachment id="12623973" name="FELIX-4330.patch" size="1794" author="ianeboston" created="Mon, 20 Jan 2014 17:55:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360284</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1q3wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360583</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>