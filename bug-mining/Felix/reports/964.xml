<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:17:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-2230] NPE deactivating service during fw shutdown</title>
                <link>https://issues.apache.org/jira/browse/FELIX-2230</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;This is seen intermittently in an automated test.  The f/w is being started then quickly stopped through the osgi console (perhaps on this occasion before the start had fully completed).  Note this is running felix DS 1.4.0.rev 924787 with the equinox f/w.  These are the OSGi messages relating to the bundle that has the error (there are many additional bundles in this test):&lt;/p&gt;

&lt;p&gt;Info: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:11.187 EDT&amp;#93;&lt;/span&gt; BundleEvent RESOLVED Bundle:com.ibm.ws.httpservice(id=27) &lt;/p&gt;
{3}&lt;br/&gt;
Info: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:11.203 EDT&amp;#93;&lt;/span&gt; BundleEvent INSTALLED Bundle:com.ibm.ws.httpservice(id=27) {3}
&lt;p&gt;Info: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:11.609 EDT&amp;#93;&lt;/span&gt; ServiceEvent REGISTERED Bundle:com.ibm.ws.httpservice(id=27) ServiceRef:&lt;span class=&quot;error&quot;&gt;&amp;#91;com.ibm.ws.httpsvc.session.internal.SessionManager&amp;#93;&lt;/span&gt;(id=77, pid=com.ibm.ws.httpservice.session)&lt;br/&gt;
Info: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:11.609 EDT&amp;#93;&lt;/span&gt; ServiceEvent REGISTERED Bundle:com.ibm.ws.httpservice(id=27) ServiceRef:&lt;span class=&quot;error&quot;&gt;&amp;#91;com.ibm.websphere.event.EventHandler&amp;#93;&lt;/span&gt;(id=78, pid=null)&lt;br/&gt;
Info: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:11.625 EDT&amp;#93;&lt;/span&gt; BundleEvent STARTED Bundle:com.ibm.ws.httpservice(id=27) &lt;/p&gt;
{3}
&lt;p&gt;Info: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:12.109 EDT&amp;#93;&lt;/span&gt; ServiceEvent REGISTERED Bundle:com.ibm.ws.httpservice(id=27) ServiceRef:&lt;span class=&quot;error&quot;&gt;&amp;#91;com.ibm.websphere.http.HttpContainer, com.ibm.ws.httpsvc.internal.HttpServiceContainer&amp;#93;&lt;/span&gt;(id=82, pid=com.ibm.ws.httpservice)&lt;br/&gt;
Info: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:12.421 EDT&amp;#93;&lt;/span&gt; ServiceEvent REGISTERED Bundle:com.ibm.ws.httpservice(id=27) ServiceRef:&lt;span class=&quot;error&quot;&gt;&amp;#91;com.ibm.websphere.event.EventHandler&amp;#93;&lt;/span&gt;(id=101, pid=null)&lt;br/&gt;
Info: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:12.421 EDT&amp;#93;&lt;/span&gt; ServiceEvent REGISTERED Bundle:com.ibm.ws.httpservice(id=27) ServiceRef:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.osgi.service.http.HttpService, org.apache.felix.http.api.ExtHttpService&amp;#93;&lt;/span&gt;(id=102, pid=null)&lt;br/&gt;
Info: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:12.625 EDT&amp;#93;&lt;/span&gt; ServiceEvent REGISTERED Bundle:com.ibm.ws.httpservice(id=27) ServiceRef:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.osgi.service.http.HttpContext&amp;#93;&lt;/span&gt;(id=104, pid=null)&lt;br/&gt;
Info: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:17.265 EDT&amp;#93;&lt;/span&gt; ServiceEvent UNREGISTERING Bundle:com.ibm.ws.httpservice(id=27) ServiceRef:&lt;span class=&quot;error&quot;&gt;&amp;#91;com.ibm.websphere.event.EventHandler&amp;#93;&lt;/span&gt;(id=101, pid=null)&lt;br/&gt;
Info: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:17.265 EDT&amp;#93;&lt;/span&gt; ServiceEvent UNREGISTERING Bundle:com.ibm.ws.httpservice(id=27) ServiceRef:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.osgi.service.http.HttpService, org.apache.felix.http.api.ExtHttpService&amp;#93;&lt;/span&gt;(id=102, pid=null)&lt;br/&gt;
Error: OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:17.265 EDT&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;OSGIHttpService&amp;#93;&lt;/span&gt; The deactivate method could not be called Bundle:com.ibm.ws.httpservice(id=27) java.lang.NullPointerException&lt;br/&gt;
OSGI- &lt;span class=&quot;error&quot;&gt;&amp;#91;23 Mar 2010 10:16:17.265 EDT&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;OSGIHttpService&amp;#93;&lt;/span&gt; The deactivate method could not be called Bundle:com.ibm.ws.httpservice(id=27) java.lang.NullPointerException&lt;/p&gt;



&lt;p&gt;And the exception stack:&lt;br/&gt;
Stack Dump = java.lang.NullPointerException&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:600)&lt;br/&gt;
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:213)&lt;br/&gt;
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:38)&lt;br/&gt;
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:542)&lt;br/&gt;
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:434)&lt;br/&gt;
	at org.apache.felix.scr.impl.helper.ActivateMethod.invoke(ActivateMethod.java:138)&lt;br/&gt;
	at org.apache.felix.scr.impl.manager.ImmediateComponentManager.disposeImplementationObject(ImmediateComponentManager.java:260)&lt;br/&gt;
	at org.apache.felix.scr.impl.manager.ImmediateComponentManager.deleteComponent(ImmediateComponentManager.java:135)&lt;br/&gt;
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$Satisfied.deactivate(AbstractComponentManager.java:1066)&lt;br/&gt;
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.deactivateInternal(AbstractComponentManager.java:303)&lt;br/&gt;
	at org.apache.felix.scr.impl.manager.DependencyManager.serviceRemoved(DependencyManager.java:343)&lt;br/&gt;
	at org.apache.felix.scr.impl.manager.DependencyManager.serviceChanged(DependencyManager.java:251)&lt;br/&gt;
	at org.eclipse.osgi.internal.serviceregistry.FilteredServiceListener.serviceChanged(FilteredServiceListener.java:104)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:933)&lt;br/&gt;
	at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:220)&lt;br/&gt;
	at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:149)&lt;br/&gt;
	at org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.publishServiceEventPrivileged(ServiceRegistry.java:755)&lt;br/&gt;
	at org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.publishServiceEvent(ServiceRegistry.java:710)&lt;br/&gt;
	at org.eclipse.osgi.internal.serviceregistry.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:222)&lt;br/&gt;
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.unregisterComponentService(AbstractComponentManager.java:429)&lt;br/&gt;
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$Satisfied.deactivate(AbstractComponentManager.java:1065)&lt;br/&gt;
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.disposeInternal(AbstractComponentManager.java:322)&lt;br/&gt;
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.dispose(AbstractComponentManager.java:185)&lt;br/&gt;
	at org.apache.felix.scr.impl.config.ConfiguredComponentHolder.disposeComponents(ConfiguredComponentHolder.java:275)&lt;br/&gt;
	at org.apache.felix.scr.impl.BundleComponentActivator.dispose(BundleComponentActivator.java:319)&lt;br/&gt;
	at org.apache.felix.scr.impl.Activator.disposeComponents(Activator.java:277)&lt;br/&gt;
	at org.apache.felix.scr.impl.Activator.bundleChanged(Activator.java:178)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:919)&lt;br/&gt;
	at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:220)&lt;br/&gt;
	at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:149)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEventPrivileged(Framework.java:1350)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1301)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker(BundleHost.java:471)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.AbstractBundle.suspend(AbstractBundle.java:546)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.Framework.suspendBundle(Framework.java:1098)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.StartLevelManager.decFWSL(StartLevelManager.java:593)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:261)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.StartLevelManager.shutdown(StartLevelManager.java:216)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.suspend(InternalSystemBundle.java:266)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.Framework.shutdown(Framework.java:685)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._shutdown(FrameworkCommandProvider.java:225)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:600)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute(FrameworkCommandInterpreter.java:155)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand(FrameworkConsole.java:303)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(FrameworkConsole.java:288)&lt;br/&gt;
	at org.eclipse.osgi.framework.internal.core.FrameworkConsole.run(FrameworkConsole.java:224)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:736)&lt;/p&gt;

&lt;p&gt;Is there any other data I can provide?&lt;/p&gt;</description>
                <environment>Windows XP</environment>
        <key id="12460000">FELIX-2230</key>
            <summary>NPE deactivating service during fw shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="amulholl@us.ibm.com">Alex Mulholland</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Mar 2010 14:48:10 +0000</created>
                <updated>Mon, 16 Aug 2010 12:11:50 +0000</updated>
                            <resolved>Wed, 24 Mar 2010 10:01:47 +0000</resolved>
                                    <version> scr-1.4.0</version>
                                    <fixVersion> scr-1.6.0</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12848758" author="amulholl@us.ibm.com" created="Tue, 23 Mar 2010 15:26:56 +0000"  >&lt;p&gt;Looking into this further, it does not appear to be related to the completion of f/w start - it is repeatable even wen the f/w has been fully started.  Also, I can see from trace that the deactivate method for the OSGIHttpService was successfully run on a different thread fractionally before the failure.&lt;/p&gt;</comment>
                            <comment id="12849131" author="fmeschbe" created="Wed, 24 Mar 2010 10:01:47 +0000"  >&lt;p&gt;Added guard against NullPointerException by not calling the method if the target object is null in Rev. 926998&lt;/p&gt;</comment>
                            <comment id="12849135" author="fmeschbe" created="Wed, 24 Mar 2010 10:11:29 +0000"  >&lt;p&gt;Deployed SNAPSHOT build 1.4.1-20100324.100414-2 containing the fix to this issue.&lt;/p&gt;</comment>
                            <comment id="12898876" author="fmeschbe" created="Mon, 16 Aug 2010 12:11:50 +0000"  >&lt;p&gt;Apache Felix Declarative Services 1.6.0 has been released. The issues are now closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56508</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1aswn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>271149</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>