<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:07:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-808] R4SearchPolicyCore.searchDynamicImports() always loads a class even if the object to load is a resource</title>
                <link>https://issues.apache.org/jira/browse/FELIX-808</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The method R4SearchPolicyCore.searchDynamicImports( IModule module, String name, String pkgName, boolean isClass) always load a class by using the current thrad class loader even if  the object to laod is a resource.&lt;/p&gt;

&lt;p&gt;This code may chek if the object is a class or a resource, and invoke the coresponding method on the classloader.&lt;/p&gt;

&lt;p&gt;               // If there are no bundles providing exports for this&lt;br/&gt;
                // package and if the instigating class was not from a&lt;br/&gt;
                // bundle, then delegate to the parent class loader.&lt;br/&gt;
                // Otherwise, break out of loop and return null.&lt;br/&gt;
                boolean delegate = true;&lt;br/&gt;
                for (ClassLoader cl = classes&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.getClassLoader(); cl != null; cl = cl.getClass().getClassLoader())&lt;br/&gt;
                {&lt;br/&gt;
                    if (ContentClassLoader.class.isInstance(cl))&lt;/p&gt;
                    {
                        delegate = false;
                        break;
                    }
&lt;p&gt;                }&lt;br/&gt;
                if (delegate)&lt;/p&gt;
                {
                    return this.getClass().getClassLoader().loadClass(name);
                }
</description>
                <environment></environment>
        <key id="12407994">FELIX-808</key>
            <summary>R4SearchPolicyCore.searchDynamicImports() always loads a class even if the object to load is a resource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rickhall">Richard S. Hall</assignee>
                                    <reporter username="eyindanga">eyindanga</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Nov 2008 09:31:44 +0000</created>
                <updated>Wed, 12 Nov 2008 14:02:18 +0000</updated>
                            <resolved>Sat, 8 Nov 2008 16:24:48 +0000</resolved>
                                    <version>framework-1.4.0</version>
                                    <fixVersion>framework-1.4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12645992" author="rickhall" created="Sat, 8 Nov 2008 16:24:48 +0000"  >&lt;p&gt;I committed a fix for this in the trunk. If you can build the trunk and test it, that would be great, then you could close this issue for us. I wonder how you found this bug, since it is definitely not something you should run into too much...it is completely non-spec behavior. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12646900" author="sauthieg" created="Wed, 12 Nov 2008 14:02:18 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;In fact, we found that issue when Felix is run on Windows.&lt;br/&gt;
JacORB tries to load a configuration file using different strategies:&lt;br/&gt;
1. use the TCCL.getResource()&lt;br/&gt;
2. if not found, tries the absolute filename&lt;/p&gt;

&lt;p&gt;The problem is that the resource it tries to load from the TCCL is already the absolute file name (ie, under windows something like &apos;d:\path\to\my\resource&apos;).&lt;br/&gt;
So the call looks like this :&lt;br/&gt;
Thread.currentThread().getContextClassLoader().getResource(&quot;d:\path\to\my\resource&quot;);&lt;br/&gt;
The TCCL is a bundle ClassLoader of Felix with a &apos;DynamicImport-Packages *&apos;.&lt;/p&gt;

&lt;p&gt;This is where we fallback on the system classloader (not 100% sure) and we try to load d:\...\resource as a class (changing all . to / and adding a .class suffix &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58181</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vul3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183928</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>