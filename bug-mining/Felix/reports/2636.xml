<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:03:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5251] Resolver impl is in need of extensive cleanup</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5251</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The Resolver implementation has undergone a lot of changes since it was first contributed.  Over the coarse of development the code has deteriorated a bit.  This is not to blame the contributors to the codebase.  The codebase and overall problem is complicated and already hard enough to understand.&lt;/p&gt;

&lt;p&gt;I have been looking to implement some upcoming changes that are being proposed for the OSGi R7 specification.  Before I start that work I have been spending significant time scrubbing the resolver code and trying to make it a little more understandable.  Here are the main things I have done:&lt;/p&gt;

&lt;p&gt;1) Create a common code path for dynamic resolution and regular resolution.  &lt;br/&gt;
2) Extract common code and greatly reduce the number of lines contained in complicated do/while loops.&lt;br/&gt;
3) Make proper use of the existing ResolveSession class to keep track of state during the resolution process.   This keeps the maintenance of state in one place.  The code had evolved into many separate options being passed around to methods, each maintaining some kind of state.&lt;/p&gt;</description>
                <environment>All</environment>
        <key id="12966969">FELIX-5251</key>
            <summary>Resolver impl is in need of extensive cleanup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tjwatson">Tom Watson</assignee>
                                    <reporter username="tjwatson">Tom Watson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 May 2016 16:33:56 +0000</created>
                <updated>Wed, 11 May 2016 07:34:39 +0000</updated>
                            <resolved>Tue, 10 May 2016 18:06:51 +0000</resolved>
                                    <version>resolver-1.8.0</version>
                                                    <component>Resolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15278591" author="tjwatson" created="Tue, 10 May 2016 18:06:03 +0000"  >&lt;p&gt;I committed my changes with:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1743238&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1743238&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This also fixed an issue where the resolver would attempt to attach fragment to an already resolved host.  I put a safeguard in the code to prevent that from happening.  The code is not able to handle doing proper class space consistency checks to an existing host wiring that gets updated with pay-load requirements and capabilities from a fragment.  There are lots of assumptions in the code that depend on fragments only getting attached to hosts that are being resolved during the current resolve process.&lt;/p&gt;

&lt;p&gt;I updated the existing test that seemed to depend on the old behavior which would produce new host wires to already existing host wirings.&lt;/p&gt;</comment>
                            <comment id="15278594" author="tjwatson" created="Tue, 10 May 2016 18:06:51 +0000"  >&lt;p&gt;Closing issue.&lt;/p&gt;</comment>
                            <comment id="15279720" author="chris@die-schneider.net" created="Wed, 11 May 2016 07:34:39 +0000"  >&lt;p&gt;The change looks good to me. We still have kind of a hotspot in ResolverImpl though. The method checkpackageSpaceConsistency is very long and complex:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/felix/blob/trunk/resolver/src/main/java/org/apache/felix/resolver/ResolverImpl.java#L1262-L1569&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/blob/trunk/resolver/src/main/java/org/apache/felix/resolver/ResolverImpl.java#L1262-L1569&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I do not have a good idea how to split it up but this would be a good spot for further improvements.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xhxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>