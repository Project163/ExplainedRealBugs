<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:10:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1166] SCR does not rebind ConfigurationAdmin service in Sling jcrinstall tests</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1166</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I&apos;m testing the Sling jcrinstall module using Pax Exam, and the SCR reference shown below is not rebound after stopping and restarting the org.apache.felix.configadmin bundle, and waiting up to 5 seconds.&lt;/p&gt;

&lt;p&gt;The reference is declared like this in the OsgiControllerImpl class:&lt;/p&gt;

&lt;p&gt;    /** @scr.reference cardinality=&quot;0..1&quot; policy=&quot;dynamic&quot; */&lt;br/&gt;
    private ConfigurationAdmin configAdmin;&lt;/p&gt;

&lt;p&gt;To reproduce, apply the attached patch to revision 776315 of  &lt;a href=&quot;http://svn.apache.org/repos/asf/incubator/sling/trunk/contrib/extensions/jcrinstall&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/incubator/sling/trunk/contrib/extensions/jcrinstall&lt;/a&gt;, and run the tests with mvn clean install.&lt;/p&gt;

&lt;p&gt;The OsgiControllerTest.testDeferredConfigInstall test then fails, because the ConfigurationAdmin service is not rebound to the OsgiControllerImpl class, after waiting up to 5 seconds for that to happen.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12425829">FELIX-1166</key>
            <summary>SCR does not rebind ConfigurationAdmin service in Sling jcrinstall tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 May 2009 14:08:02 +0000</created>
                <updated>Tue, 8 Dec 2009 15:49:23 +0000</updated>
                            <resolved>Tue, 26 May 2009 08:11:24 +0000</resolved>
                                    <version>scr-1.0.8</version>
                                    <fixVersion>scr-1.2.0</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12710739" author="bdelacretaz" created="Tue, 19 May 2009 14:09:06 +0000"  >&lt;p&gt;Sling jcrinstall patch to reproduce the problem&lt;/p&gt;</comment>
                            <comment id="12710740" author="bdelacretaz" created="Tue, 19 May 2009 14:10:38 +0000"  >&lt;p&gt;Note that this should not be related to Pax Exam, but I&apos;m mentioning it as the rebinding mechanism seems to generally work in SCR 1.0.8, so there might be a weirdness related to this particular testing environment.&lt;/p&gt;</comment>
                            <comment id="12712807" author="fmeschbe" created="Mon, 25 May 2009 21:49:11 +0000"  >&lt;p&gt;Could you test the SNAPSHOT version 1.0.9-20090525.214658-2 I have just deployed. This contains a number of concurrency and service binding fixes and may by that matter also fix this issue.&lt;/p&gt;</comment>
                            <comment id="12712899" author="fmeschbe" created="Tue, 26 May 2009 08:10:38 +0000"  >&lt;p&gt;I found the problem: after previous rework the bound services are not really unbound as of serviceChanged: the unbind method is called but the DependencyManager keeps the service instance instead of ungetting it by calling the BundleContext.ungetService method.&lt;/p&gt;

&lt;p&gt;This is only of importance if the reference is dynamic and optional or a replacement service is available. If the reference is static, the component is scheduled for deactivation (or reactivation if a replacement service is available) and thus ungetting the service anyway. If the reference is dynamic but required, the component will also be deactivated because it is not satisifed any longer.&lt;/p&gt;

&lt;p&gt;Fixed this issue in Rev. 778604 and deployed new SNAPSHOT version  1.0.9-20090526.081005-3&lt;/p&gt;</comment>
                            <comment id="12712901" author="fmeschbe" created="Tue, 26 May 2009 08:11:24 +0000"  >&lt;p&gt;Ungetting the service after unbinding it solves the issue for me.&lt;/p&gt;

&lt;p&gt;Please close this issue, if it also fixes your problem. Thanks.&lt;/p&gt;</comment>
                            <comment id="12737553" author="fmeschbe" created="Fri, 31 Jul 2009 15:07:37 +0000"  >&lt;p&gt;Retargeting fixes for SCR 1.2.0 release. There will be no 1.0.10 release.&lt;/p&gt;</comment>
                            <comment id="12787519" author="fmeschbe" created="Tue, 8 Dec 2009 15:49:23 +0000"  >&lt;p&gt;SCR 1.2.0 has been released. Close all issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12408485" name="FELIX-1166-reproduce.patch" size="2504" author="bdelacretaz" created="Tue, 19 May 2009 14:09:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57852</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vyzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184641</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>