<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:04:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5399] Unable to define default map or list config types</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5399</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;Assume you have a key in a given configuration dictionary which corresponds to a map or a list.&lt;br/&gt;
For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;map={key1=value1, key2=value2}
list=[a,b,c}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now assume we have the corresponding configuration type, which defines default values for the &quot;map&quot; or &quot;list&quot; keys:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; ConfigType {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; getList() { 
        	&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;default1&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;default2&quot;&lt;/span&gt;);
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; SortedMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; getMap() { 
        	SortedMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; defaultMap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TreeMap&amp;lt;&amp;gt;();
        	defaultMap.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;key1&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;default1&quot;&lt;/span&gt;);
        	defaultMap.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;key2&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;default2&quot;&lt;/span&gt;);
        	&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; defaultMap;
        }        
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, assume also that:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;you use an optional configurationdependency and the configuration is currently unavailable&lt;/li&gt;
	&lt;li&gt;or the configuration is currently available (whatever the configuration dependency is optional or required), but there is currently no values for &quot;map&quot; or &quot;list&quot; keys&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Then the problem is that the default map or list values declared in the ConfigType interface are not used as default values, but instead when you access to the &quot;map&quot; or &quot;list&quot; configuration keys, then you get an implicit empty map or an empty list (instead of the defaults values defined in the configuration type)&lt;/p&gt;

&lt;p&gt;See org.apache.felix.dm.itest.api.DefaultListConfigType.java and org.apache.felix.dm.itest.api.DefaultMapConfigType, which reproduce the issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13018703">FELIX-5399</key>
            <summary>Unable to define default map or list config types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pderop">Pierre De Rop</assignee>
                                    <reporter username="pderop">Pierre De Rop</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 Nov 2016 22:25:22 +0000</created>
                <updated>Sun, 6 Nov 2016 22:33:26 +0000</updated>
                            <resolved>Sun, 6 Nov 2016 22:33:25 +0000</resolved>
                                    <version>org.apache.felix.dependencymanager-r8</version>
                                    <fixVersion>org.apache.felix.dependencymanager-r9</fixVersion>
                                    <component>Dependency Manager</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15642547" author="pderop" created="Sun, 6 Nov 2016 22:32:30 +0000"  >&lt;p&gt;Committed the test cases, as well as a candidate fix in revision in revision 1768397.&lt;/p&gt;</comment>
                            <comment id="15642549" author="pderop" created="Sun, 6 Nov 2016 22:33:26 +0000"  >&lt;p&gt;I think the issue is resolved. will reopen later in case I find some uncovered use cases.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35zcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>