<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 16:11:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-5754] error in default.properties contained in jar org.apache.felix.framework-5.6.10.jar</title>
                <link>https://issues.apache.org/jira/browse/FELIX-5754</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;I&apos;ll be describing the issue, explain where the problem occurs and why, and a possible fix that I have verified. &lt;/p&gt;

&lt;p&gt;The default.properties file contained in jar: org.apache.felix.framework-5.6.10.jar needs the line:&lt;br/&gt;
org.osgi.util..tracker; version=1.5.1 \&lt;br/&gt;
changed to:&lt;br/&gt;
org.osgi.util..tracker; version=1.5.1, \&lt;/p&gt;

&lt;p&gt;(a comma entered after the version number.)&lt;/p&gt;

&lt;p&gt;Without the comma added, the class: org.osgi.framework.Version&lt;br/&gt;
throws an unrecoverable exception when the version is parsed.&lt;br/&gt;
I tracked the issue down and found out that the string value for minor part of the version number which should have been the string &quot;1&quot; was instead having the value &quot;1      #&quot;.&lt;br/&gt;
The Interger.parse(&quot;1    #&quot;) is what&apos;s throwing the exception (since the # character is not numeric).  If you look deeper at the default.properties file you see it contains the following:&lt;/p&gt;

&lt;p&gt; org.osgi.util.tracker; version=1.5.1 \&lt;br/&gt;
 ${jre-${java.specification.version}} \&lt;br/&gt;
 ${jre-${felix.detect.jpms}} \&lt;/p&gt;

&lt;p&gt;#&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Java platform package export properties.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I don&apos;t know what the ${jre-$  entries are for, but they seem to have been evaluated to the empty string.  So that&apos;s how the minor version subpart string gets to be &quot;1     #&quot; instead of &quot;1&quot;&lt;/p&gt;

&lt;p&gt;I repackage the jar with that one change in  place and Felix starts up correctly.&lt;/p&gt;

&lt;p&gt;Note: Another possible solution is to eliminate the continuation character &quot;\&quot; at the end of the&lt;br/&gt;
version since it appears to be last entry.  I just don&apos;t understand what the motivation for the {jre-$ entries are so I don&apos;t want to claim my solution is necessarily the right solution for all circumstances, since another possible solution would be to eliminate the  continuation character &quot;\&quot; at the end of the line:  &quot;${jre-${felix.detect.jpms}} \&quot; .&lt;/p&gt;

&lt;p&gt;What&apos;s makes the issue critical is that the 5.6.10 release will not work on Android without this change, and it&apos;s a bit tricky and time consuming to discover the cause.  ( I&apos;m not sure why this isn&apos;t an issue for any environment(it might be!), but the strongest claim I can make is that it is an issue in the android environment.&lt;/p&gt;

&lt;p&gt;And lastly just to be clear, the exception is thrown when the Felix object is first created.  Here&apos;s&lt;br/&gt;
a snippet of what that code looks like:&lt;/p&gt;

&lt;p&gt;        String apkFileDir = ConsoleActivity.consoleActivity.getFilesDir().toString();&lt;br/&gt;
        config.put(&quot;osgi.signature.support.verify&quot;, &quot;false&quot;); // signed jar checking disabled for development&lt;br/&gt;
        config.put( .....&lt;/p&gt;


&lt;p&gt;        Felix f = new Felix(config);&lt;/p&gt;



</description>
                <environment>android os version 26</environment>
        <key id="13122376">FELIX-5754</key>
            <summary>error in default.properties contained in jar org.apache.felix.framework-5.6.10.jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="tom@phinneyridge.com">Tom Rutchik</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Dec 2017 19:40:21 +0000</created>
                <updated>Mon, 9 Jul 2018 10:31:51 +0000</updated>
                            <resolved>Thu, 7 Dec 2017 23:24:14 +0000</resolved>
                                    <version>framework-5.6.10</version>
                                    <fixVersion>framework-6.0.0</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16276108" author="karlpauls" created="Sun, 3 Dec 2017 21:40:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tom%40phinneyridge.com&quot; class=&quot;user-hover&quot; rel=&quot;tom@phinneyridge.com&quot;&gt;tom@phinneyridge.com&lt;/a&gt; - I agree that this last continuation seems to be a mistake. Sorry about that. However, this seems to indicate that we can&apos;t find a matching jre package list. Could you tell me what the &quot;java.specification.version&quot; system property resolves to on android?&lt;/p&gt;

&lt;p&gt;Furthermore, as a quick fix (that doesn&apos;t require to hack the felix jar) you should be able to override the &quot;org.osgi.framework.system.packages&quot; by setting it as a system or framework property when you start felix.&lt;/p&gt;</comment>
                            <comment id="16282701" author="karlpauls" created="Thu, 7 Dec 2017 23:24:14 +0000"  >&lt;p&gt;I removed the continuation in r1817440. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tom%40phinneyridge.com&quot; class=&quot;user-hover&quot; rel=&quot;tom@phinneyridge.com&quot;&gt;tom@phinneyridge.com&lt;/a&gt;, please try it with the current trunk (i.e., framework-5.7.0-SNAPSHOT) and see if that resolves the issue for you. If so, please close this issue - otherwise, please reopen.&lt;/p&gt;

&lt;p&gt;Thanks for reporting!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ngs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>