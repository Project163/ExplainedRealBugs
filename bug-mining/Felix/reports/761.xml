<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 15:14:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FELIX-1832] ServiceFactory must not be deactivated if the instances fails to be created</title>
                <link>https://issues.apache.org/jira/browse/FELIX-1832</link>
                <project id="12310100" key="FELIX">Felix</project>
                    <description>&lt;p&gt;The AbstractComponentManager.Registered state (Satisfied state for delayed and service factory components) class tries to deactivate the component if the component instance cannot be created and setup. Part of this deactivation is actually unregistration of the service factory service.&lt;/p&gt;

&lt;p&gt;This may fail if the getService method is called as part of a chain of service activations, one of which is actually trying to get the service instance from the factory. It is not allowed to unregister this exact service in this situation.&lt;/p&gt;

&lt;p&gt;So, instead of deactivating the component, the component instance is just deleted and the component remains in the registered state.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12439552">FELIX-1832</key>
            <summary>ServiceFactory must not be deactivated if the instances fails to be created</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="fmeschbe">Felix Meschberger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Oct 2009 17:06:47 +0000</created>
                <updated>Tue, 8 Dec 2009 15:49:29 +0000</updated>
                            <resolved>Fri, 30 Oct 2009 17:08:44 +0000</resolved>
                                    <version>scr-1.2.0</version>
                                    <fixVersion>scr-1.2.0</fixVersion>
                                    <component>Declarative Services (SCR)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12771995" author="fmeschbe" created="Fri, 30 Oct 2009 17:08:44 +0000"  >&lt;p&gt;Fixed as described in the summary in Rev. 831390.&lt;/p&gt;</comment>
                            <comment id="12771996" author="fmeschbe" created="Fri, 30 Oct 2009 17:22:06 +0000"  >&lt;p&gt;Some more flesh to the bone: The issue is that the framework calls the ServiceFactory.getService(Bundle, ServiceReference) method, which then tries to create the component, bind services and call the activate method. If this fails, the getService method will return null.&lt;/p&gt;

&lt;p&gt;Before, the component was also deactivated in this case. Part of the deactivation is unregistration of the ServiceFactory. This is not allowed while the framework is calling the getService method. As a consequence the Felix framework throws an IllegalStateException leaving the service reference in an unclear state: In fact the service reference is not registered any more but the service registry still keeps some references to the ServiceFactory instance for some bundles.&lt;/p&gt;

&lt;p&gt;This prevents the ServiceReference object from being GC-ed and thus also prevents the class loader from being collected. See also &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-1833&quot; title=&quot;Stopping the Felix SCR bundle may leave traces behind thus preventing the class loader from being GC-ed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-1833&quot;&gt;&lt;del&gt;FELIX-1833&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12787549" author="fmeschbe" created="Tue, 8 Dec 2009 15:49:29 +0000"  >&lt;p&gt;SCR 1.2.0 has been released. Close all issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57208</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0vxuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>184458</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>