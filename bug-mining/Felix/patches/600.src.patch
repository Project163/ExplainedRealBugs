diff --git a/karaf/gshell/gshell-console/src/main/java/org/apache/felix/karaf/gshell/console/jline/Console.java b/karaf/gshell/gshell-console/src/main/java/org/apache/felix/karaf/gshell/console/jline/Console.java
index c68201311e..be0142ba60 100644
--- a/karaf/gshell/gshell-console/src/main/java/org/apache/felix/karaf/gshell/console/jline/Console.java
+++ b/karaf/gshell/gshell-console/src/main/java/org/apache/felix/karaf/gshell/console/jline/Console.java
@@ -202,29 +202,62 @@ public class Console implements Runnable
 
     private class ConsoleInputStream extends InputStream
     {
-        @Override
-        public int read() throws IOException
+        private int read(boolean wait) throws IOException
         {
-            if (!running)
-            {
+            if (!running) {
                 return -1;
             }
             checkInterrupt();
-            int i;
-            try {
-                i = queue.take();
-            }
-            catch (InterruptedException e)
-            {
-                throw new InterruptedIOException();
+            Integer i;
+            if (wait) {
+                try {
+                    i = queue.take();
+                } catch (InterruptedException e) {
+                    throw new InterruptedIOException();
+                }
+                checkInterrupt();
+            } else {
+                i = queue.poll();
             }
-            if (i == 4)
-            {
+            if (i == null || i == 4) {
                 return -1;
             }
-            checkInterrupt();
             return i;
         }
+
+        @Override
+        public int read() throws IOException
+        {
+            return read(true);
+        }
+
+        @Override
+        public int read(byte b[], int off, int len) throws IOException
+        {
+            if (b == null) {
+                throw new NullPointerException();
+            } else if (off < 0 || len < 0 || len > b.length - off) {
+                throw new IndexOutOfBoundsException();
+            } else if (len == 0) {
+                return 0;
+            }
+
+            int nb = 1;
+            int i = read(true);
+            if (i < 0) {
+                return -1;
+            }
+            b[off++] = (byte) i;
+            while (nb < len) {
+                i = read(false);
+                if (i < 0) {
+                    return nb;
+                }
+                b[off++] = (byte) i;
+                nb++;
+            }
+            return nb;
+        }
     }
 
     private class Pipe implements Runnable
