diff --git a/webconsole-plugins/memoryusage/pom.xml b/webconsole-plugins/memoryusage/pom.xml
index 9c99bcd0d7..8405d34246 100644
--- a/webconsole-plugins/memoryusage/pom.xml
+++ b/webconsole-plugins/memoryusage/pom.xml
@@ -74,24 +74,19 @@
                         </Bundle-SymbolicName>
                         <Import-Package>
                             javax.management.*,
-                            org.osgi.framework
-                        </Import-Package>
-                        <DynamicImport-Package>
-                            <!-- logging -->
-                            org.osgi.service.log;version="[1.3,2)",
-
+                            org.osgi.framework,
                             <!-- configuration -->
-                            org.osgi.service.cm;version="[1.2,2)",
-                            org.osgi.service.metatype;version="[1.1,2)",
+                            org.osgi.service.cm;version="[1.2,2)";resolution:="optional",
+                            org.osgi.service.metatype;version="[1.1,2)";resolution:="optional",
 
                             <!-- plug into the web console -->
-                            javax.servlet;
-                            javax.servlet.http;version="[2.3,4)",
-                            org.apache.felix.webconsole;version="[3.0,4)",
+                            javax.servlet;resolution:="optional";
+                            javax.servlet.http;version="[2.3,4)";resolution:="optional",
+                            org.apache.felix.webconsole;version="[3.0,4)";resolution:="optional",
 
                             <!-- plug into the traditional Felix shell -->
-                            org.apache.felix.shell;version="[1.0,1.1)"
-                        </DynamicImport-Package>
+                            org.apache.felix.shell;version="[1.0,1.1)";resolution:="optional"
+                        </Import-Package>
                         <Private-Package>
                             org.apache.felix.webconsole.plugins.memoryusage.*
                         </Private-Package>
diff --git a/webconsole-plugins/memoryusage/src/main/java/org/apache/felix/webconsole/plugins/memoryusage/internal/MemoryUsageSupport.java b/webconsole-plugins/memoryusage/src/main/java/org/apache/felix/webconsole/plugins/memoryusage/internal/MemoryUsageSupport.java
index b19327bd5b..760f753b9e 100644
--- a/webconsole-plugins/memoryusage/src/main/java/org/apache/felix/webconsole/plugins/memoryusage/internal/MemoryUsageSupport.java
+++ b/webconsole-plugins/memoryusage/src/main/java/org/apache/felix/webconsole/plugins/memoryusage/internal/MemoryUsageSupport.java
@@ -42,6 +42,7 @@ import javax.management.NotificationListener;
 import javax.management.ObjectName;
 
 import org.osgi.framework.BundleContext;
+import org.osgi.framework.Constants;
 import org.osgi.framework.InvalidSyntaxException;
 import org.osgi.framework.ServiceEvent;
 import org.osgi.framework.ServiceListener;
@@ -91,7 +92,7 @@ final class MemoryUsageSupport implements NotificationListener, ServiceListener
         // register for the log service
         try
         {
-            context.addServiceListener(this, "(objectclass=org.osgi.service.log.LogService)");
+            context.addServiceListener(this, "(" + Constants.OBJECTCLASS + "=org.osgi.service.log.LogService)");
             logServiceReference = context.getServiceReference("org.osgi.service.log.LogService");
             if (logServiceReference != null)
             {
@@ -741,17 +742,29 @@ final class MemoryUsageSupport implements NotificationListener, ServiceListener
         final String message = String.format(format, args);
         if (logService != null)
         {
-            ((LogService) logService).log(level, message, t);
+            try {
+                Method m = logService.getClass()
+                        .getDeclaredMethod("log", int.class, String.class, Throwable.class);
+                m.setAccessible(true);
+                m.invoke(logService, level, message, t);
+            } catch (Exception e) {
+                logSTD(LogService.LOG_WARNING, e, "Unable to log with the given log service");
+                logSTD(level, t, message);
+            }
         }
         else
         {
-            PrintStream out = (level <= LogService.LOG_ERROR) ? System.err : System.out;
-            out.printf("%s: %s (%d): %s%n", toLevelString(level), context.getBundle().getSymbolicName(), context
-                .getBundle().getBundleId(), message);
-            if (t != null)
-            {
-                t.printStackTrace(out);
-            }
+            logSTD(level, t, message);
+        }
+    }
+
+    private void logSTD(int level, Throwable t, String message) {
+        PrintStream out = (level <= LogService.LOG_ERROR) ? System.err : System.out;
+        out.printf("%s: %s (%d): %s%n", toLevelString(level), context.getBundle().getSymbolicName(), context
+            .getBundle().getBundleId(), message);
+        if (t != null)
+        {
+            t.printStackTrace(out);
         }
     }
 
