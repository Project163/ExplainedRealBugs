diff --git a/shell/src/main/java/org/apache/felix/shell/impl/InstallCommandImpl.java b/shell/src/main/java/org/apache/felix/shell/impl/InstallCommandImpl.java
index 1ceb53f66a..f52c53679f 100644
--- a/shell/src/main/java/org/apache/felix/shell/impl/InstallCommandImpl.java
+++ b/shell/src/main/java/org/apache/felix/shell/impl/InstallCommandImpl.java
@@ -19,6 +19,7 @@
 package org.apache.felix.shell.impl;
 
 import java.io.PrintStream;
+import java.net.MalformedURLException;
 import java.net.URL;
 import java.util.StringTokenizer;
 
@@ -127,10 +128,11 @@ public class InstallCommandImpl implements Command
 
     private String absoluteLocation(String location)
     {
-        String guess = location;
-        // If the location does not contain a ":", then try to
-        // add the base URL from the 'cd' command service.
-        if (location.indexOf(':') < 0)
+        try
+        {
+            new URL(location);
+        }
+        catch (MalformedURLException ex)
         {
             // Try to create a valid URL using the base URL
             // contained in the "cd" command service.
@@ -150,16 +152,15 @@ public class InstallCommandImpl implements Command
                     m_context.ungetService(ref);
                 }
 
-                String theURL = baseURL + guess;
+                String theURL = baseURL + location;
                 new URL(theURL);
+                location = theURL;
             }
             catch (Exception ex2)
             {
-                // If that fails, then just return the original.
-                return location;
+                // Just fall through and return the original location.
             }
-            guess = baseURL + guess;
         }
-        return guess;
+        return location;
     }
-}
+}
\ No newline at end of file
diff --git a/shell/src/main/java/org/apache/felix/shell/impl/UpdateCommandImpl.java b/shell/src/main/java/org/apache/felix/shell/impl/UpdateCommandImpl.java
index 88b3a0e2f4..7f8ed01bd8 100644
--- a/shell/src/main/java/org/apache/felix/shell/impl/UpdateCommandImpl.java
+++ b/shell/src/main/java/org/apache/felix/shell/impl/UpdateCommandImpl.java
@@ -137,10 +137,6 @@ public class UpdateCommandImpl implements Command
 
     private String absoluteLocation(String location)
     {
-        if (!location.endsWith(".jar"))
-        {
-            location = location + ".jar";
-        }
         try
         {
             new URL(location);
@@ -167,13 +163,12 @@ public class UpdateCommandImpl implements Command
 
                 String theURL = baseURL + location;
                 new URL(theURL);
-
+                location = theURL;
             }
             catch (Exception ex2)
             {
-                return null;
+                // Just fall through and return the original location.
             }
-            location = baseURL + location;
         }
         return location;
     }
