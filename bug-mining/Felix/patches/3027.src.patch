diff --git a/configurator/src/main/java/org/apache/felix/configurator/impl/model/ConfigList.java b/configurator/src/main/java/org/apache/felix/configurator/impl/model/ConfigList.java
index 94df3a92f0..baf4408234 100644
--- a/configurator/src/main/java/org/apache/felix/configurator/impl/model/ConfigList.java
+++ b/configurator/src/main/java/org/apache/felix/configurator/impl/model/ConfigList.java
@@ -110,12 +110,11 @@ public class ConfigList implements Serializable, Iterable<Config> {
      * @param configs The config list
      */
     public void addAll(final ConfigList configs) {
-        this.hasChanges = true;
         for(final Config cfg : configs) {
             // search if we already have this configuration
             for(final Config current : this.configurations) {
                 if ( current.getBundleId() == cfg.getBundleId()
-                  && current.getRanking() == cfg.getRanking()) {
+                  && current.getProperties().equals(cfg.getProperties()) ) {
                     if ( current.getState() == ConfigState.UNINSTALL ) {
                         cfg.setState(ConfigState.INSTALLED);
                         current.setState(ConfigState.UNINSTALLED);
@@ -123,8 +122,9 @@ public class ConfigList implements Serializable, Iterable<Config> {
                     break;
                 }
             }
+            this.hasChanges = true;
+            this.configurations.add(cfg);
         }
-        this.configurations.addAll(configs.configurations);
         Collections.sort(this.configurations);
     }
 
diff --git a/configurator/src/test/java/org/apache/felix/configurator/impl/ConfiguratorTest.java b/configurator/src/test/java/org/apache/felix/configurator/impl/ConfiguratorTest.java
index c18c1b86c1..037e436734 100644
--- a/configurator/src/test/java/org/apache/felix/configurator/impl/ConfiguratorTest.java
+++ b/configurator/src/test/java/org/apache/felix/configurator/impl/ConfiguratorTest.java
@@ -79,9 +79,16 @@ public class ConfiguratorTest {
     }
 
     private Bundle setupBundle(final long id) throws Exception {
+        return setupBundle(id, String.valueOf(id));
+    }
+
+    private long lastModified = 1;
+
+    private Bundle setupBundle(final long id, final String jsonName) throws Exception {
         final Bundle b = mock(Bundle.class);
         when(b.getBundleId()).thenReturn(id);
-        when(b.getLastModified()).thenReturn(5L);
+        when(b.getLastModified()).thenReturn(lastModified);
+        lastModified++;
         when(b.getState()).thenReturn(Bundle.ACTIVE);
         final BundleWiring wiring = mock(BundleWiring.class);
         when(b.adapt(BundleWiring.class)).thenReturn(wiring);
@@ -93,7 +100,7 @@ public class ConfiguratorTest {
         when(wiring.getBundle()).thenReturn(bundle);
         when(wiring.getRequiredWires(Util.NS_OSGI_EXTENDER)).thenReturn(Collections.singletonList(wire));
         final Vector<URL> urls = new Vector<>();
-        urls.add(this.getClass().getResource("/bundles/" + id + ".json"));
+        urls.add(this.getClass().getResource("/bundles/" + jsonName + ".json"));
         when(b.findEntries("OSGI-INF/configurator", "*.json", false)).thenReturn(urls.elements());
 
         final BundleContext bContext = mock(BundleContext.class);
@@ -134,6 +141,39 @@ public class ConfiguratorTest {
         verify(c2).delete();
     }
 
+    @Test public void testSimpleAddUpdate() throws Exception {
+        final Bundle bV1 = setupBundle(2);
+        final Bundle bV2 = setupBundle(2, "2a");
+
+        Configuration c1 = mock(Configuration.class);
+        Configuration c2 = mock(Configuration.class);
+        when(configurationAdmin.getConfiguration("a", "?")).thenReturn(c1);
+        when(configurationAdmin.getConfiguration("b", "?")).thenReturn(c2);
+
+        when(c1.getChangeCount()).thenReturn(1L);
+        when(c2.getChangeCount()).thenReturn(1L);
+        configurator.processAddBundle(bV1);
+
+        configurator.process();
+
+        when(configurationAdmin.listConfigurations("(" + Constants.SERVICE_PID + "=a)")).thenReturn(new Configuration[] {c1});
+        when(configurationAdmin.listConfigurations("(" + Constants.SERVICE_PID + "=b)")).thenReturn(new Configuration[] {c2});
+
+        configurator.processAddBundle(bV2);
+        configurator.process();
+
+        final Dictionary<String, Object> props1 = new Hashtable<>();
+        props1.put("foo", "bar2");
+        final Dictionary<String, Object> props2 = new Hashtable<>();
+        props2.put("foo", "bar3");
+
+        InOrder inorder = inOrder(c1);
+        inorder.verify(c1).updateIfDifferent(props1);
+        inorder.verify(c1).updateIfDifferent(props2);
+        inorder.verify(c1).getChangeCount();
+        inorder.verifyNoMoreInteractions();
+    }
+
     @Test public void testSimpleRankingRemove() throws Exception {
         final Bundle b1 = setupBundle(1);
         final Bundle b2 = setupBundle(2);
diff --git a/configurator/src/test/resources/bundles/2a.json b/configurator/src/test/resources/bundles/2a.json
new file mode 100644
index 0000000000..25e1416ffd
--- /dev/null
+++ b/configurator/src/test/resources/bundles/2a.json
@@ -0,0 +1,8 @@
+{
+    "a" : {
+              "foo" : "bar3"
+          },
+    "b" : {
+              "x" : "y2"
+          }
+}
\ No newline at end of file
