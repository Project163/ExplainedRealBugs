diff --git a/bundlerepository/src/main/java/org/apache/felix/bundlerepository/impl/ResourceComparator.java b/bundlerepository/src/main/java/org/apache/felix/bundlerepository/impl/ResourceComparator.java
index 35f7439e1b..2dfc892e90 100644
--- a/bundlerepository/src/main/java/org/apache/felix/bundlerepository/impl/ResourceComparator.java
+++ b/bundlerepository/src/main/java/org/apache/felix/bundlerepository/impl/ResourceComparator.java
@@ -1,4 +1,4 @@
-/* 
+/*
  * Licensed to the Apache Software Foundation (ASF) under one
  * or more contributor license agreements.  See the NOTICE file
  * distributed with this work for additional information
@@ -28,10 +28,14 @@ class ResourceComparator implements Comparator
     {
         Resource r1 = (Resource) o1;
         Resource r2 = (Resource) o2;
-        String name1 = (String) r1.getPresentationName();
-        String name2 = (String) r2.getPresentationName();
+        String name1 = r1.getPresentationName();
+        String name2 = r2.getPresentationName();
         if (name1 == null)
         {
+            if (name2 == null)
+            {
+                return 0;
+            }
             return -1;
         }
         else if (name2 == null)
