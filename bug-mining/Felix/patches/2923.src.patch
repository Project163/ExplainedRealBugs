diff --git a/fileinstall/src/main/java/org/apache/felix/fileinstall/internal/ConfigInstaller.java b/fileinstall/src/main/java/org/apache/felix/fileinstall/internal/ConfigInstaller.java
index 0573e1e850..5128ff698d 100644
--- a/fileinstall/src/main/java/org/apache/felix/fileinstall/internal/ConfigInstaller.java
+++ b/fileinstall/src/main/java/org/apache/felix/fileinstall/internal/ConfigInstaller.java
@@ -42,6 +42,7 @@ public class ConfigInstaller implements ArtifactInstaller, ConfigurationListener
     private final BundleContext context;
     private final ConfigurationAdmin configAdmin;
     private final FileInstall fileInstall;
+    private final Map<String, String> pidToFile = new HashMap<>();
     private ServiceRegistration registration;
 
     ConfigInstaller(BundleContext context, ConfigurationAdmin configAdmin, FileInstall fileInstall)
@@ -60,6 +61,26 @@ public class ConfigInstaller implements ArtifactInstaller, ConfigurationListener
                     ArtifactInstaller.class.getName()
                 },
                 this, null);
+        try
+        {
+            Configuration[] configs = configAdmin.listConfigurations(null);
+            if (configs != null)
+            {
+                for (Configuration config : configs)
+                {
+                    Dictionary dict = config.getProperties();
+                    String fileName = dict != null ? (String) dict.get( DirectoryWatcher.FILENAME ) : null;
+                    if (fileName != null)
+                    {
+                        pidToFile.put(config.getPid(), fileName);
+                    }
+                }
+            }
+        }
+        catch (Exception e)
+        {
+            Util.log( context, Logger.LOG_INFO, "Unable to initialize configurations list", e );
+        }
     }
 
     public void destroy()
@@ -130,6 +151,7 @@ public class ConfigInstaller implements ArtifactInstaller, ConfigurationListener
                 String fileName = dict != null ? (String) dict.get( DirectoryWatcher.FILENAME ) : null;
                 File file = fileName != null ? fromConfigKey(fileName) : null;
                 if( file != null && file.isFile() ) {
+                    pidToFile.put(config.getPid(), fileName);
                     TypedProperties props = new TypedProperties( bundleSubstitution() );
                     try (Reader r = new InputStreamReader(new FileInputStream(file), encoding()))
                     {
@@ -179,11 +201,7 @@ public class ConfigInstaller implements ArtifactInstaller, ConfigurationListener
         if (configurationEvent.getType() == ConfigurationEvent.CM_DELETED)
         {
             try {
-                Configuration config = getConfigurationAdmin().getConfiguration(
-                        configurationEvent.getPid(),
-                        "?");
-                Dictionary dict = config.getProperties();
-                String fileName = dict != null ? (String) dict.get(DirectoryWatcher.FILENAME) : null;
+                String fileName = pidToFile.remove(configurationEvent.getPid());
                 File file = fileName != null ? fromConfigKey(fileName) : null;
                 if (file != null && file.isFile()) {
                     if (!file.delete()) {
diff --git a/fileinstall/src/test/java/org/apache/felix/fileinstall/internal/ConfigInstallerTest.java b/fileinstall/src/test/java/org/apache/felix/fileinstall/internal/ConfigInstallerTest.java
index e2ccbcc26f..5d11dde38c 100644
--- a/fileinstall/src/test/java/org/apache/felix/fileinstall/internal/ConfigInstallerTest.java
+++ b/fileinstall/src/test/java/org/apache/felix/fileinstall/internal/ConfigInstallerTest.java
@@ -21,7 +21,6 @@ package org.apache.felix.fileinstall.internal;
 import java.io.File;
 import java.io.FileOutputStream;
 import java.io.OutputStream;
-import java.nio.file.Files;
 import java.util.Dictionary;
 import java.util.Hashtable;
 import java.util.concurrent.atomic.AtomicReference;
@@ -33,8 +32,10 @@ import org.easymock.IAnswer;
 import org.easymock.IArgumentMatcher;
 import org.osgi.framework.Bundle;
 import org.osgi.framework.BundleContext;
+import org.osgi.framework.ServiceReference;
 import org.osgi.service.cm.Configuration;
 import org.osgi.service.cm.ConfigurationAdmin;
+import org.osgi.service.cm.ConfigurationEvent;
 
 /**
  * Tests for ConfigInstaller
@@ -203,6 +204,119 @@ public class ConfigInstallerTest extends TestCase {
         EasyMock.verify(mockConfiguration, mockConfigurationAdmin, mockBundleContext);
     }
 
+    public void testCreateConfigAndObserveCMDeleted() throws Exception
+    {
+        File file = File.createTempFile("test", ".config");
+        try (OutputStream os = new FileOutputStream(file)) {
+            os.write("key=F\"1137191584\"\n".getBytes("UTF-8"));
+        }
+        String pid = file.getName().substring(0, file.getName().indexOf(".config"));
+
+        final Capture<Dictionary<String, Object>> props = new Capture<>();
+
+        EasyMock.expect(mockConfiguration.getProperties())
+                .andReturn(null);
+        EasyMock.expect(mockBundleContext.getProperty((String) EasyMock.anyObject()))
+                .andReturn(null)
+                .anyTimes();
+        EasyMock.expect(mockConfigurationAdmin.listConfigurations((String) EasyMock.anyObject()))
+                .andReturn(null);
+        EasyMock.expect(mockConfigurationAdmin.getConfiguration(pid, "?"))
+                .andReturn(mockConfiguration);
+
+        ServiceReference<ConfigurationAdmin> sr = EasyMock.createMock(ServiceReference.class);
+        mockConfiguration.update(EasyMock.capture(props));
+        EasyMock.expectLastCall();
+
+        EasyMock.expect(mockConfigurationAdmin.getConfiguration(pid, "?"))
+                .andReturn(mockConfiguration);
+        EasyMock.expect(mockConfiguration.getProperties())
+                .andAnswer(new IAnswer<Dictionary<String, Object>>() {
+                    @Override
+                    public Dictionary<String, Object> answer() throws Throwable {
+                        return props.getValue();
+                    }
+                });
+        EasyMock.expect(mockConfiguration.getPid())
+                .andReturn(pid);
+
+        EasyMock.replay(mockConfiguration, mockConfigurationAdmin, mockBundleContext, sr);
+
+        ConfigInstaller ci = new ConfigInstaller( mockBundleContext, mockConfigurationAdmin, new FileInstall() );
+        ci.install(file);
+
+        ci.doConfigurationEvent( new ConfigurationEvent(sr , ConfigurationEvent.CM_UPDATED, null, pid ) );
+
+        ci.doConfigurationEvent( new ConfigurationEvent(sr , ConfigurationEvent.CM_DELETED, null, pid ) );
+
+        assertFalse("Configuration file should be deleted", file.isFile());
+    }
+
+    public void testUseExistingConfigAndObserveCMDeleted() throws Exception
+    {
+        String pid = "test";
+
+        Capture<Dictionary<String, Object>> props = new Capture<>();
+
+        EasyMock.expect(mockConfiguration.getProperties())
+                .andReturn(null);
+        EasyMock.expect(mockBundleContext.getProperty((String) EasyMock.anyObject()))
+                .andReturn(null)
+                .anyTimes();
+        EasyMock.expect(mockConfigurationAdmin.listConfigurations((String) EasyMock.anyObject()))
+                .andReturn(null);
+        EasyMock.expect(mockConfigurationAdmin.getConfiguration(pid, "?"))
+                .andReturn(mockConfiguration);
+
+        ServiceReference<ConfigurationAdmin> sr = EasyMock.createMock(ServiceReference.class);
+        mockConfiguration.update(EasyMock.capture(props));
+        EasyMock.expectLastCall();
+
+        EasyMock.replay(mockConfiguration, mockConfigurationAdmin, mockBundleContext, sr);
+
+        ConfigInstaller ci = new ConfigInstaller( mockBundleContext, mockConfigurationAdmin, new FileInstall() );
+
+        ci.doConfigurationEvent( new ConfigurationEvent(sr , ConfigurationEvent.CM_UPDATED, null, pid ) );
+        ci.doConfigurationEvent( new ConfigurationEvent(sr , ConfigurationEvent.CM_DELETED, null, pid ) );
+    }
+
+    public void testUseExistingConfigWithFileinstallFilenameAndObserveCMDeleted() throws Exception
+    {
+        File file = File.createTempFile("test", ".config");
+        try (OutputStream os = new FileOutputStream(file)) {
+            os.write("key=F\"1137191584\"\n".getBytes("UTF-8"));
+        }
+        String pid = "test";
+
+        Capture<Dictionary<String, Object>> propsCapture = new Capture<>();
+        Dictionary<String, Object> props = new Hashtable<>();
+        props.put(DirectoryWatcher.FILENAME, file.toURI().toString());
+
+        EasyMock.expect(mockConfiguration.getProperties())
+                .andReturn(props);
+        EasyMock.expect(mockBundleContext.getProperty((String) EasyMock.anyObject()))
+                .andReturn(null)
+                .anyTimes();
+        EasyMock.expect(mockConfigurationAdmin.listConfigurations((String) EasyMock.anyObject()))
+                .andReturn(null);
+        EasyMock.expect(mockConfigurationAdmin.getConfiguration(pid, "?"))
+                .andReturn(mockConfiguration);
+        EasyMock.expect(mockConfiguration.getPid())
+                .andReturn(pid);
+
+        ServiceReference<ConfigurationAdmin> sr = EasyMock.createMock(ServiceReference.class);
+        mockConfiguration.update(EasyMock.capture(propsCapture));
+        EasyMock.expectLastCall();
+
+        EasyMock.replay(mockConfiguration, mockConfigurationAdmin, mockBundleContext, sr);
+
+        ConfigInstaller ci = new ConfigInstaller( mockBundleContext, mockConfigurationAdmin, new FileInstall() );
+
+        ci.doConfigurationEvent( new ConfigurationEvent(sr , ConfigurationEvent.CM_UPDATED, null, pid ) );
+        ci.doConfigurationEvent( new ConfigurationEvent(sr , ConfigurationEvent.CM_DELETED, null, pid ) );
+
+        assertFalse("Configuration file should be deleted", file.isFile());
+    }
 
     public void testSetConfiguration() throws Exception
     {
