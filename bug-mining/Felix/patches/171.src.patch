diff --git a/main/src/main/java/org/apache/felix/main/Main.java b/main/src/main/java/org/apache/felix/main/Main.java
index 8b56bacb4c..09ab34c1c0 100644
--- a/main/src/main/java/org/apache/felix/main/Main.java
+++ b/main/src/main/java/org/apache/felix/main/Main.java
@@ -202,7 +202,14 @@ public class Main
                 System.exit(-1);
             }
             System.out.println("");
-            if (profileName.length() != 0)
+
+            // On some platforms readLine() can return null, such as when
+            // control-C is pressed, so check for that case.
+            if (profileName == null)
+            {
+                profileName = "";
+            }
+            else if (profileName.length() != 0)
             {
                 configProps.setProperty(BundleCache.CACHE_PROFILE_PROP, profileName);
             }
