diff --git a/scrplugin/src/main/java/org/apache/felix/scrplugin/mojo/MavenJavaClassDescriptorManager.java b/scrplugin/src/main/java/org/apache/felix/scrplugin/mojo/MavenJavaClassDescriptorManager.java
index 906fa971c7..3d2b4ef7b9 100644
--- a/scrplugin/src/main/java/org/apache/felix/scrplugin/mojo/MavenJavaClassDescriptorManager.java
+++ b/scrplugin/src/main/java/org/apache/felix/scrplugin/mojo/MavenJavaClassDescriptorManager.java
@@ -166,9 +166,7 @@ public class MavenJavaClassDescriptorManager extends JavaClassDescriptorManager
             final List<Component> components = new ArrayList<Component>();
             @SuppressWarnings("unchecked")
             final Map<String, Artifact> resolved = project.getArtifactMap();
-            @SuppressWarnings("unchecked")
-            final Set<Artifact> artifacts = project.getDependencyArtifacts();
-            final Iterator<Artifact> it = artifacts.iterator();
+            final Iterator<Artifact> it = resolved.values().iterator();
             while ( it.hasNext() )
             {
                 final Artifact declared = it.next();
