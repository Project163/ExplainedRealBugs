diff --git a/framework/src/main/java/org/apache/felix/framework/cache/BundleCache.java b/framework/src/main/java/org/apache/felix/framework/cache/BundleCache.java
index b5a81bff0b..ee44091a97 100644
--- a/framework/src/main/java/org/apache/felix/framework/cache/BundleCache.java
+++ b/framework/src/main/java/org/apache/felix/framework/cache/BundleCache.java
@@ -426,9 +426,12 @@ public class BundleCache
         if (getSecureAction().isFileDirectory(target))
         {
             File[] files = getSecureAction().listDirectory(target);
-            for (int i = 0; i < files.length; i++)
+            if (files != null)
             {
-                deleteDirectoryTreeRecursive(files[i]);
+                for (int i = 0; i < files.length; i++)
+                {
+                    deleteDirectoryTreeRecursive(files[i]);
+                }
             }
         }
 
