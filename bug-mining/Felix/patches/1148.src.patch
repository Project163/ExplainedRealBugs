diff --git a/framework/src/main/java/org/apache/felix/framework/ModuleImpl.java b/framework/src/main/java/org/apache/felix/framework/ModuleImpl.java
index 230b213ef0..1d721f80fb 100644
--- a/framework/src/main/java/org/apache/felix/framework/ModuleImpl.java
+++ b/framework/src/main/java/org/apache/felix/framework/ModuleImpl.java
@@ -861,8 +861,7 @@ public class ModuleImpl implements Module
             // The spec states that if the bundle cannot be resolved, then
             // only the local bundle's resources should be searched. So we
             // will ask the module's own class path.
-            urls = getResourcesLocal(name);
-            return urls;
+            return getResourcesLocal(name);
         }
 
         // Get the package of the target class/resource.
diff --git a/framework/src/main/java/org/apache/felix/framework/resolver/WireImpl.java b/framework/src/main/java/org/apache/felix/framework/resolver/WireImpl.java
index 96d675c375..7e3076d23f 100755
--- a/framework/src/main/java/org/apache/felix/framework/resolver/WireImpl.java
+++ b/framework/src/main/java/org/apache/felix/framework/resolver/WireImpl.java
@@ -163,7 +163,7 @@ public class WireImpl implements Wire
             // If no resource was found, then we must throw an exception
             // since the exporter for this package did not contain the
             // requested class.
-            if (!urls.hasMoreElements())
+            if ((urls == null) || !urls.hasMoreElements())
             {
                 throw new ResourceNotFoundException(name);
             }
diff --git a/framework/src/main/java/org/apache/felix/framework/resolver/WireModuleImpl.java b/framework/src/main/java/org/apache/felix/framework/resolver/WireModuleImpl.java
index 734ee46015..124c45c4b8 100644
--- a/framework/src/main/java/org/apache/felix/framework/resolver/WireModuleImpl.java
+++ b/framework/src/main/java/org/apache/felix/framework/resolver/WireModuleImpl.java
@@ -145,7 +145,7 @@ public class WireModuleImpl implements Wire
         if (m_packages.contains(pkgName))
         {
             Enumeration urls = m_exporter.getResourcesByDelegation(name);
-            if (urls.hasMoreElements())
+            if ((urls != null) && urls.hasMoreElements())
             {
                 return urls;
             }
