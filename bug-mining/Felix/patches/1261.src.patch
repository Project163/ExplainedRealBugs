diff --git a/framework/src/main/java/org/apache/felix/framework/FelixResolverState.java b/framework/src/main/java/org/apache/felix/framework/FelixResolverState.java
index 534d56f306..ca74100c36 100644
--- a/framework/src/main/java/org/apache/felix/framework/FelixResolverState.java
+++ b/framework/src/main/java/org/apache/felix/framework/FelixResolverState.java
@@ -157,8 +157,9 @@ public class FelixResolverState implements Resolver.ResolverState
 
     public void detachFragment(Module host, Module fragment)
     {
-        List<Module> fragments = ((ModuleImpl) host).getFragments();
+        List<Module> fragments = new ArrayList<Module>(((ModuleImpl) host).getFragments());
         fragments.remove(fragment);
+        removeFragment(fragment);
         try
         {
             ((ModuleImpl) host).attachFragments(fragments);
