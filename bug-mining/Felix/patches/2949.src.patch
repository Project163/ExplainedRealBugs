diff --git a/osgi-r7/scr/src/main/java/org/apache/felix/scr/impl/manager/DependencyManager.java b/osgi-r7/scr/src/main/java/org/apache/felix/scr/impl/manager/DependencyManager.java
index 9105a9b859..2007845a54 100644
--- a/osgi-r7/scr/src/main/java/org/apache/felix/scr/impl/manager/DependencyManager.java
+++ b/osgi-r7/scr/src/main/java/org/apache/felix/scr/impl/manager/DependencyManager.java
@@ -2084,17 +2084,45 @@ public class DependencyManager<S, T> implements ReferenceManager<S, T>
             }
         }
         m_target = target;
+
+        // three filters are created:
+        // classFilter = filters only on the service interface
+        // eventFilter = filters only on the provided target and service scope (if prototype required)
+        // initialReferenceFilter = classFilter & eventFilter
+
+        // classFilter
+        // "(" + Constants.OBJECTCLASS + "=" + m_dependencyMetadata.getInterface() + ")"
+        final StringBuilder classFilterSB = new StringBuilder();
+        classFilterSB.append(OBJECTCLASS_CLAUSE);
+        classFilterSB.append(m_dependencyMetadata.getInterface());
+        classFilterSB.append(')');
+        final String classFilterString = classFilterSB.toString();
+
+        // eventFilter
+        String eventFilterString;
+        if (m_target != null
+            && m_dependencyMetadata.getScope() == ReferenceScope.prototype_required)
+        {
+            final StringBuilder sb = new StringBuilder("(&").append(PROTOTYPE_SCOPE_CLAUSE).append(m_target).append(")");
+            eventFilterString = sb.toString();
+        }
+        else if ( m_dependencyMetadata.getScope() == ReferenceScope.prototype_required )
+        {
+            eventFilterString = PROTOTYPE_SCOPE_CLAUSE;
+        }
+        else
+        {
+            eventFilterString = m_target;
+        }
+
+        // initialReferenceFilter
         final boolean multipleExpr = m_target != null
-            || m_dependencyMetadata.getScope() == ReferenceScope.prototype_required;
-        final boolean allExpr = m_target != null
-            && m_dependencyMetadata.getScope() == ReferenceScope.prototype_required;
+                || m_dependencyMetadata.getScope() == ReferenceScope.prototype_required;
         final StringBuilder initialReferenceFilterSB = new StringBuilder();
         if (multipleExpr)
         {
             initialReferenceFilterSB.append("(&");
         }
-        // "(" + Constants.OBJECTCLASS + "=" + m_dependencyMetadata.getInterface() + ")"
-        String classFilterString = OBJECTCLASS_CLAUSE + m_dependencyMetadata.getInterface() + ")";
         initialReferenceFilterSB.append(classFilterString);
 
         // if reference scope is prototype_required, we simply add
@@ -2114,16 +2142,6 @@ public class DependencyManager<S, T> implements ReferenceManager<S, T>
             initialReferenceFilterSB.append(')');
         }
         String initialReferenceFilterString = initialReferenceFilterSB.toString();
-        String eventFilterString;
-        if (allExpr)
-        {
-            StringBuilder sb = new StringBuilder("(&").append(PROTOTYPE_SCOPE_CLAUSE).append(m_target).append(")");
-            eventFilterString = sb.toString();
-        }
-        else
-        {
-            eventFilterString = m_target;
-        }
 
         final ServiceTracker<T, RefPair<S, T>, ExtendedServiceEvent> oldTracker = m_tracker;
         AtomicInteger trackingCount = new AtomicInteger();
diff --git a/osgi-r7/scr/src/main/java/org/apache/felix/scr/impl/runtime/ServiceComponentRuntimeImpl.java b/osgi-r7/scr/src/main/java/org/apache/felix/scr/impl/runtime/ServiceComponentRuntimeImpl.java
index 286aa16ca0..f21c162b3a 100644
--- a/osgi-r7/scr/src/main/java/org/apache/felix/scr/impl/runtime/ServiceComponentRuntimeImpl.java
+++ b/osgi-r7/scr/src/main/java/org/apache/felix/scr/impl/runtime/ServiceComponentRuntimeImpl.java
@@ -199,15 +199,16 @@ public class ServiceComponentRuntimeImpl implements ServiceComponentRuntime
         }
     }
 
-    private ComponentConfigurationDTO managerToConfiguration(ComponentManager<?> manager, ComponentDescriptionDTO description)
+    private ComponentConfigurationDTO managerToConfiguration(final ComponentManager<?> manager, final ComponentDescriptionDTO description)
     {
-        ComponentConfigurationDTO dto = new ComponentConfigurationDTO();
+        final ComponentConfigurationDTO dto = new ComponentConfigurationDTO();
         dto.satisfiedReferences = satisfiedRefManagersToDTO(manager.getReferenceManagers());
         dto.unsatisfiedReferences = unsatisfiedRefManagersToDTO(manager.getReferenceManagers());
         dto.description = description;
         dto.id = manager.getId();
         dto.properties = new HashMap<>(manager.getProperties());//TODO deep copy?
         dto.state = manager.getSpecState();
+        // DS 1.4
         if ( dto.state == ComponentConfigurationDTO.FAILED_ACTIVATION )
         {
             dto.failure = manager.getFailureReason();
