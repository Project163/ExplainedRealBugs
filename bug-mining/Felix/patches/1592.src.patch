diff --git a/scrplugin/generator/pom.xml b/scrplugin/generator/pom.xml
index 67794f389e..afa7a3ed63 100644
--- a/scrplugin/generator/pom.xml
+++ b/scrplugin/generator/pom.xml
@@ -49,7 +49,7 @@
         <dependency>
             <groupId>asm</groupId>
             <artifactId>asm-all</artifactId>
-            <version>3.1</version>
+            <version>3.3.1</version>
             <scope>compile</scope>
         </dependency>
         <dependency>
diff --git a/scrplugin/generator/src/main/java/org/apache/felix/scrplugin/helper/ClassModifier.java b/scrplugin/generator/src/main/java/org/apache/felix/scrplugin/helper/ClassModifier.java
index bb9a7a94f1..9eb2578894 100644
--- a/scrplugin/generator/src/main/java/org/apache/felix/scrplugin/helper/ClassModifier.java
+++ b/scrplugin/generator/src/main/java/org/apache/felix/scrplugin/helper/ClassModifier.java
@@ -63,7 +63,7 @@ public abstract class ClassModifier {
             final ClassReader reader = new ClassReader(new FileInputStream(fileName));
             reader.accept(cn, 0);
 
-            final ClassWriter writer = new ClassWriter(0);
+            final ClassWriter writer = new ClassWriter(ClassWriter.COMPUTE_MAXS  | ClassWriter.COMPUTE_FRAMES);
 
             // remove existing implementation von previous builds
             final ClassAdapter adapter = new ClassAdapter(writer) {
