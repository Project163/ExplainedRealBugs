diff --git a/resolver/src/main/java/org/apache/felix/resolver/WrappedResource.java b/resolver/src/main/java/org/apache/felix/resolver/WrappedResource.java
index 693e8bbcd8..e37d23458d 100644
--- a/resolver/src/main/java/org/apache/felix/resolver/WrappedResource.java
+++ b/resolver/src/main/java/org/apache/felix/resolver/WrappedResource.java
@@ -58,7 +58,7 @@ class WrappedResource implements Resource
             List<Capability> caps = new ArrayList<Capability>();
 
             // Wrap host capabilities.
-            for (Capability cap : m_host.getCapabilities(null))
+            for (Capability cap : m_host.getCapabilities(namespace))
             {
                 caps.add(new WrappedCapability(this, cap));
             }
@@ -68,7 +68,7 @@ class WrappedResource implements Resource
             {
                 for (Resource fragment : m_fragments)
                 {
-                    for (Capability cap : fragment.getCapabilities(null))
+                    for (Capability cap : fragment.getCapabilities(namespace))
                     {
                         // Filter out identity capabilities, since they
                         // are not part of the fragment payload.
