diff --git a/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulation/InnerClassManipulator.java b/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulation/InnerClassManipulator.java
index 07727a2ee1..93dbac2b19 100644
--- a/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulation/InnerClassManipulator.java
+++ b/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulation/InnerClassManipulator.java
@@ -26,6 +26,7 @@ import java.util.Set;
 
 import org.objectweb.asm.ClassReader;
 import org.objectweb.asm.ClassWriter;
+import org.objectweb.asm.Opcodes;
 
 /**
  * Manipulates inner class allowing outer class access. The manipulated class
@@ -60,13 +61,17 @@ public class InnerClassManipulator {
      * @return manipulated class
      * @throws IOException the class cannot be read correctly
      */
-    public byte[] manipulate(byte[] in) throws IOException {
+    public byte[] manipulate(byte[] in, int version) throws IOException {
         InputStream is1 = new ByteArrayInputStream(in);
 
         ClassReader cr = new ClassReader(is1);
         ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_MAXS);
         InnerClassAdapter adapter = new InnerClassAdapter(cw, m_outer, m_fields);
-        cr.accept(adapter, ClassReader.SKIP_FRAMES);
+        if (version >= Opcodes.V1_6) {
+            cr.accept(adapter, ClassReader.EXPAND_FRAMES);
+        } else {
+            cr.accept(adapter, 0);
+        }
         is1.close();
 
         return cw.toByteArray();
diff --git a/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulation/Manipulator.java b/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulation/Manipulator.java
index 24f155216c..9a15d550d1 100644
--- a/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulation/Manipulator.java
+++ b/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulation/Manipulator.java
@@ -63,6 +63,11 @@ public class Manipulator {
      */
     private List<String> m_inners;
 
+    /**
+     * Java byte code version.
+     */
+    private int m_version;
+
     /**
      * Manipulate the given byte array.
      * @param origin : original class.
@@ -89,6 +94,8 @@ public class Manipulator {
 
         m_inners = ck.getInnerClasses();
 
+        m_version = ck.getClassVersion();
+
         ClassWriter finalWriter = null;
         if (!ck.isalreadyManipulated()) {
             // Manipulation ->
@@ -160,4 +167,7 @@ public class Manipulator {
         return m_inners;
     }
 
+    public int getClassVersion() {
+        return m_version;
+    }
 }
diff --git a/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulator/ManipulationEngine.java b/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulator/ManipulationEngine.java
index 06137870d8..e71c0a7785 100644
--- a/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulator/ManipulationEngine.java
+++ b/ipojo/manipulator/manipulator/src/main/java/org/apache/felix/ipojo/manipulator/ManipulationEngine.java
@@ -133,9 +133,12 @@ public class ManipulationEngine {
                     }
 
                     // Manipulate inner class
+                    // Notice that (for performance reason) re-use the class version information
+                    // discovered in the main class instead of re-parsing the inner class to find
+                    // its own class version
                     try {
                         InnerClassManipulator innerManipulator = new InnerClassManipulator(outerClassInternalName, manipulator.getFields().keySet());
-                        byte[] manipulated = innerManipulator.manipulate(innerClassBytecode);
+                        byte[] manipulated = innerManipulator.manipulate(innerClassBytecode, manipulator.getClassVersion());
                         // Propagate manipulated resource
                         result.visitManipulatedResource(resourcePath, manipulated);
                     } catch (IOException e) {
