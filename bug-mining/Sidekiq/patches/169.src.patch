diff --git a/lib/sidekiq/web/helpers.rb b/lib/sidekiq/web/helpers.rb
index 1569af19..46222b1b 100644
--- a/lib/sidekiq/web/helpers.rb
+++ b/lib/sidekiq/web/helpers.rb
@@ -55,6 +55,14 @@ module Sidekiq
       @head_html.join if defined?(@head_html)
     end
 
+    def poll_path
+      if current_path != '' && params['poll']
+        root_path + current_path
+      else
+        ""
+      end
+    end
+
     # Given a browser request Accept-Language header like
     # "fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4,ru;q=0.2", this function
     # will return "fr" since that's the first code with a matching
diff --git a/test/test_web.rb b/test/test_web.rb
index 1e7e2e6e..ed2f03a2 100644
--- a/test/test_web.rb
+++ b/test/test_web.rb
@@ -305,7 +305,7 @@ class TestWeb < Sidekiq::Test
     it 'calls updatePage() once when polling' do
       get '/busy?poll=true'
       assert_equal 200, last_response.status
-      assert_equal 1, last_response.body.scan('updatePage(').count
+      assert_equal 1, last_response.body.scan('data-poll-path="/busy').count
     end
 
     it 'escape job args and error messages' do
diff --git a/web/assets/javascripts/application.js b/web/assets/javascripts/application.js
index f151ed3a..edd1547a 100755
--- a/web/assets/javascripts/application.js
+++ b/web/assets/javascripts/application.js
@@ -34,6 +34,11 @@ $(function() {
   $.timeago.settings.refreshMillis = 0;
   $("time").timeago();
 
+  var pollpath = $('body').data('poll-path');
+  if (pollpath != "") {
+    updatePage(pollpath);
+  }
+
   $(document).on('click', '.check_all', function() {
     var checked = $(this).attr('checked');
     if (checked == 'checked') {
diff --git a/web/views/_poll_js.erb b/web/views/_poll_js.erb
deleted file mode 100644
index 9018cfc9..00000000
--- a/web/views/_poll_js.erb
+++ /dev/null
@@ -1,5 +0,0 @@
-<% if current_path != '' && params[:poll] %>
-  <script>
-    updatePage('<%= root_path + current_path %>')
-  </script>
-<% end %>
diff --git a/web/views/layout.erb b/web/views/layout.erb
index 65175099..38940de3 100644
--- a/web/views/layout.erb
+++ b/web/views/layout.erb
@@ -12,7 +12,7 @@
     <meta name="google" content="notranslate" />
     <%= display_custom_head %>
   </head>
-  <body class="admin">
+  <body class="admin" data-poll-path="<%= poll_path %>">
     <%= erb :_nav %>
     <div id="page">
       <div class="container">
@@ -28,6 +28,5 @@
       </div>
     </div>
     <%= erb :_footer %>
-    <%= erb :_poll_js %>
   </body>
 </html>
