diff --git a/lib/sidekiq/cli.rb b/lib/sidekiq/cli.rb
index 1f244577..3d3ff1d9 100644
--- a/lib/sidekiq/cli.rb
+++ b/lib/sidekiq/cli.rb
@@ -307,24 +307,13 @@ module Sidekiq # :nodoc:
         end
         require "sidekiq/rails"
         require File.expand_path("#{@config[:require]}/config/environment.rb")
-        @config[:tag] ||= default_tag
+        @config[:tag] ||= default_tag(::Rails.root)
       else
         require @config[:require]
+        @config[:tag] ||= default_tag
       end
     end
 
-    def default_tag
-      dir = ::Rails.root
-      name = File.basename(dir)
-      prevdir = File.dirname(dir) # Capistrano release directory?
-      if name.to_i != 0 && prevdir
-        if File.basename(prevdir) == "releases"
-          return File.basename(File.dirname(prevdir))
-        end
-      end
-      name
-    end
-
     def validate!
       if !File.exist?(@config[:require]) ||
           (File.directory?(@config[:require]) && !File.exist?("#{@config[:require]}/config/application.rb"))
diff --git a/lib/sidekiq/component.rb b/lib/sidekiq/component.rb
index 8242528d..b6d5640f 100644
--- a/lib/sidekiq/component.rb
+++ b/lib/sidekiq/component.rb
@@ -103,5 +103,16 @@ module Sidekiq
         end.join(", ")
       }>"
     end
+
+    def default_tag(dir = Dir.pwd)
+      name = File.basename(dir)
+      prevdir = File.dirname(dir) # Capistrano release directory?
+      if name.to_i != 0 && prevdir
+        if File.basename(prevdir) == "releases"
+          return File.basename(File.dirname(prevdir))
+        end
+      end
+      name
+    end
   end
 end
diff --git a/lib/sidekiq/embedded.rb b/lib/sidekiq/embedded.rb
index 329fc954..cd10ee56 100644
--- a/lib/sidekiq/embedded.rb
+++ b/lib/sidekiq/embedded.rb
@@ -34,6 +34,7 @@ module Sidekiq
     private
 
     def housekeeping
+      @config[:tag] ||= default_tag
       logger.info "Running in #{RUBY_DESCRIPTION}"
       logger.info Sidekiq::LICENSE
       logger.info "Upgrade to Sidekiq Pro for more features and support: https://sidekiq.org" unless defined?(::Sidekiq::Pro)
