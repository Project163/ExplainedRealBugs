diff --git a/Changes.md b/Changes.md
index bc78e48d..d203f64e 100644
--- a/Changes.md
+++ b/Changes.md
@@ -9,6 +9,7 @@ HEAD
   The previous calling convention will work until Sidekiq 8.0 but will print out a
   deprecation warning.
 - Fix issue with the `batch_size` and `at` options in `S::Client.push_bulk` [#6040]
+- Fix inline testing firing batch callbacks early [#6057]
 
 7.1.4
 ----------
diff --git a/lib/sidekiq/rails.rb b/lib/sidekiq/rails.rb
index 13006247..0261a4c9 100644
--- a/lib/sidekiq/rails.rb
+++ b/lib/sidekiq/rails.rb
@@ -39,17 +39,6 @@ module Sidekiq
       end
     end
 
-    initializer "sidekiq.rails_logger" do
-      Sidekiq.configure_server do |config|
-        # This is the integration code necessary so that if a job uses `Rails.logger.info "Hello"`,
-        # it will appear in the Sidekiq console with all of the job context. See #5021 and
-        # https://github.com/rails/rails/blob/b5f2b550f69a99336482739000c58e4e04e033aa/railties/lib/rails/commands/server/server_command.rb#L82-L84
-        unless ::Rails.logger == config.logger || ::ActiveSupport::Logger.logger_outputs_to?(::Rails.logger, $stdout)
-          ::Rails.logger.extend(::ActiveSupport::Logger.broadcast(config.logger))
-        end
-      end
-    end
-
     initializer "sidekiq.backtrace_cleaner" do
       Sidekiq.configure_server do |config|
         config[:backtrace_cleaner] = ->(backtrace) { ::Rails.backtrace_cleaner.clean(backtrace) }
@@ -63,6 +52,16 @@ module Sidekiq
     config.after_initialize do
       Sidekiq.configure_server do |config|
         config[:reloader] = Sidekiq::Rails::Reloader.new
+
+        # This is the integration code necessary so that if a job uses `Rails.logger.info "Hello"`,
+        # it will appear in the Sidekiq console with all of the job context.
+        unless ::Rails.logger == config.logger || ::ActiveSupport::Logger.logger_outputs_to?(::Rails.logger, $stdout)
+          if ::Rails::VERSION::STRING < "7.1"
+            ::Rails.logger.extend(::ActiveSupport::Logger.broadcast(config.logger))
+          else
+            ::Rails.logger = ::ActiveSupport::BroadcastLogger.new(::Rails.logger, config.logger)
+          end
+        end
       end
     end
   end
diff --git a/lib/sidekiq/testing.rb b/lib/sidekiq/testing.rb
index 7745def5..395e4f49 100644
--- a/lib/sidekiq/testing.rb
+++ b/lib/sidekiq/testing.rb
@@ -64,7 +64,7 @@ module Sidekiq
   class EmptyQueueError < RuntimeError; end
 
   module TestingClient
-    def raw_push(payloads)
+    def atomic_push(conn, payloads)
       if Sidekiq::Testing.fake?
         payloads.each do |job|
           job = Sidekiq.load_json(Sidekiq.dump_json(job))
diff --git a/lib/sidekiq/version.rb b/lib/sidekiq/version.rb
index 8b4b7728..26f91454 100644
--- a/lib/sidekiq/version.rb
+++ b/lib/sidekiq/version.rb
@@ -1,6 +1,6 @@
 # frozen_string_literal: true
 
 module Sidekiq
-  VERSION = "7.2.0"
+  VERSION = "7.1.5"
   MAJOR = 7
 end
diff --git a/test/client_test.rb b/test/client_test.rb
index 2b1646be..a2b79f57 100644
--- a/test/client_test.rb
+++ b/test/client_test.rb
@@ -308,9 +308,9 @@ describe Sidekiq::Client do
 
           it "raises error with correct class name" do
             error = assert_raises ArgumentError do
-              TestActiveJob.perform_later(BigDecimal("1.1212"))
+              TestActiveJob.perform_later(Object.new)
             end
-            assert_match(/Job arguments to TestActiveJob/, error.message)
+            assert_match(/Unsupported argument type/, error.message)
           end
         end
       end
diff --git a/test/dummy/config/application.rb b/test/dummy/config/application.rb
index fd044752..c77e6e19 100644
--- a/test/dummy/config/application.rb
+++ b/test/dummy/config/application.rb
@@ -13,7 +13,6 @@ module Dummy
   class Application < Rails::Application
     config.root = File.expand_path("../..", __FILE__)
     config.eager_load = false
-    config.logger = Logger.new("/dev/null")
-    config.load_defaults "6.1"
+    config.load_defaults "7.0"
   end
 end
