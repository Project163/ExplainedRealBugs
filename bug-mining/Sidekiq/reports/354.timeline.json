[{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/2967852224","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-2967852224","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":2967852224,"node_id":"IC_kwDOADDA9M6w5dTA","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-12T18:53:38Z","updated_at":"2025-06-12T18:53:38Z","body":"You'd have to look up the associated PR which added that feature. I don't recall if there was any logical need or if this was just an oversight.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/2967852224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/2967858233","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-2967858233","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":2967858233,"node_id":"IC_kwDOADDA9M6w5ew5","user":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-12T18:56:46Z","updated_at":"2025-06-12T18:56:46Z","body":"https://github.com/sidekiq/sidekiq/pull/6091 - the difference is acknowledged but not really explained... maybe @quainjn you remember?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/2967858233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":18121204331,"node_id":"MEE_lADOADDA9M67OrgwzwAAAAQ4G6Jr","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/18121204331","actor":{"login":"quainjn","id":447498,"node_id":"MDQ6VXNlcjQ0NzQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/447498?v=4","gravatar_id":"","url":"https://api.github.com/users/quainjn","html_url":"https://github.com/quainjn","followers_url":"https://api.github.com/users/quainjn/followers","following_url":"https://api.github.com/users/quainjn/following{/other_user}","gists_url":"https://api.github.com/users/quainjn/gists{/gist_id}","starred_url":"https://api.github.com/users/quainjn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quainjn/subscriptions","organizations_url":"https://api.github.com/users/quainjn/orgs","repos_url":"https://api.github.com/users/quainjn/repos","events_url":"https://api.github.com/users/quainjn/events{/privacy}","received_events_url":"https://api.github.com/users/quainjn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-06-12T18:56:47Z","performed_via_github_app":null},{"id":18121204343,"node_id":"SE_lADOADDA9M67OrgwzwAAAAQ4G6J3","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/18121204343","actor":{"login":"quainjn","id":447498,"node_id":"MDQ6VXNlcjQ0NzQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/447498?v=4","gravatar_id":"","url":"https://api.github.com/users/quainjn","html_url":"https://github.com/quainjn","followers_url":"https://api.github.com/users/quainjn/followers","following_url":"https://api.github.com/users/quainjn/following{/other_user}","gists_url":"https://api.github.com/users/quainjn/gists{/gist_id}","starred_url":"https://api.github.com/users/quainjn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quainjn/subscriptions","organizations_url":"https://api.github.com/users/quainjn/orgs","repos_url":"https://api.github.com/users/quainjn/repos","events_url":"https://api.github.com/users/quainjn/events{/privacy}","received_events_url":"https://api.github.com/users/quainjn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-06-12T18:56:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/2970667851","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-2970667851","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":2970667851,"node_id":"IC_kwDOADDA9M6xEMtL","user":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-13T14:57:51Z","updated_at":"2025-06-13T19:30:19Z","body":"@mperham While investigating this a bit more, I discovered that returning `:discard` from `sidekiq_retries_exhausted` actually leads to a bug with the sidekiq-pro batches feature. Batches rely on the death handler to fail the batch, and trigger the _batch's_ death callback, so skipping that handler leads to batches hanging in an incomplete state until they expire after 30 days. The batches wiki page claims:\n> The :death callback is always fired for first job in the batch that fails and does not retry. Even if you configure jobs to disable retries or job death, it will still fire the :death callback.\n\nWhich given the current behaviour of `sidekiq_retries_exhausted`, is not always true.\n\n(Also worth noting, I was able to confirm that the same issue impacts major 3p plugins like sidekiq-unique-jobs, which will leak locks when a job exhausts its retries but skips its death handlers.)\n\nedit: and based on reading the code, the same issue occurs when return `:discard` from a `sidekiq_retry_in` block.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/2970667851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":18135816388,"node_id":"MEE_lADOADDA9M67OrgwzwAAAAQ4-pjE","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/18135816388","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-06-13T14:57:53Z","performed_via_github_app":null},{"id":18135816412,"node_id":"SE_lADOADDA9M67OrgwzwAAAAQ4-pjc","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/18135816412","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-06-13T14:57:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/2982042623","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-2982042623","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":2982042623,"node_id":"IC_kwDOADDA9M6xvlv_","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-17T22:46:20Z","updated_at":"2025-06-17T22:46:20Z","body":"Ok, it sounds like skipping death handlers is a no-no. We can't allow an option which breaks functionality.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/2982042623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/2984523095","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-2984523095","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":2984523095,"node_id":"IC_kwDOADDA9M6x5DVX","user":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-18T14:47:54Z","updated_at":"2025-06-18T14:49:11Z","body":"In the neighbourhood (though this is very much less important and somewhat distinct) it would be nice if death handlers could know whether the job is going to the morgue or not. Right now they can get that information by checking the job config for the static `dead: false`. But if they start running in the dynamic `:discard` case, I don't think they have a way of knowing right now whether the job was discarded or not.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/2984523095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3019788388","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3019788388","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3019788388,"node_id":"IC_kwDOADDA9M6z_lBk","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-30T16:07:13Z","updated_at":"2025-06-30T16:07:13Z","body":"I don't know what to do about this. I'd like to rollback this functionality but it was [explicitly documented as a new feature in 7.2.0](https://github.com/sidekiq/sidekiq/blob/main/Changes.md#720).","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3019788388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3020162539","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3020162539","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3020162539,"node_id":"IC_kwDOADDA9M60BAXr","user":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-30T17:46:40Z","updated_at":"2025-06-30T17:55:42Z","body":"The inconsistency means that, whatever way you decide to unify this behaviour, it would have to be a breaking change in a major version. In the meantime (since 8.0 was so recent) you could do the typical thing of leaving the current behaviour by default, but adding some kind of \"enable consistent death handling\" config flag?\n\nI don't know enough about the original motivating use cases to say for sure (e.g. why does `sidekiq_retry_in` offer both `:kill` and `:discard` - was there actually a user case where they wanted both options in a single job which couldn't be accomplished by sticking with `:kill` but setting `dead: false`?), but I hypothesize the following requirements:\n- users do want to control whether some jobs go to the morgue or not when they die - this is often static to the job definition but _maybe_ needs to be dynamic?\n- some death callbacks need to run regardless, e.g. releasing locks and cleaning up batches\n- some death callback (error-trackers come to mind) probably do care about whether the job is going to the morgue or not, and would prefer to either register themselves conditionally, or handle that logic themselves\n\nIf I were designing all this functionality from scratch I would do something like:\n- static argument like `morgue: false` - only impacting whether the job goes to the morgue, not death handlers\n- both `sidekiq_retry_in` and `sidekiq_retries_exhausted` support `:kill` but not `:discard` - returning `kill` from either would trigger death handlers and then respect the static `morgue:` setting\n- include metadata in the death handler payload whether the job is going to the morgue or not, for those death callbacks which might want to treat \"skipping the morgue\" as meaning they should behave differently\n- if people ask for it, maybe add a dynamic `skip_morgue` block that lines up with the static `morgue: false` setting\n\nThis would let people accomplish the current `:discard` behaviour by returning `:kill` instead, setting `morgue: false` (or `skip_morgue` or whatever), and then adding logic to their death handlers to no-op when the job is skipping the morgue.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3020162539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3166068422","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3166068422","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3166068422,"node_id":"IC_kwDOADDA9M68tl7G","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-07T22:54:42Z","updated_at":"2025-08-07T22:54:42Z","body":"I think the dynamic `:discard` option should be the same as static option `dead: false`.\n\nI'm not sure this should be considered a breaking change. Is invoking death handlers a compatibility issue?\n\n```diff\ndiff --git a/lib/sidekiq/job_retry.rb b/lib/sidekiq/job_retry.rb\nindex 709b1178..759e4553 100644\n--- a/lib/sidekiq/job_retry.rb\n+++ b/lib/sidekiq/job_retry.rb\n@@ -255,8 +255,8 @@ module Sidekiq\n         handle_exception(e, {context: \"Error calling retries_exhausted\", job: msg})\n       end\n \n-      return if rv == :discard # poof!\n-      send_to_morgue(msg) unless msg[\"dead\"] == false\n+      to_morgue = !(msg[\"dead\"] == false || rv == :discard)\n+      send_to_morgue(msg) if to_morgue\n \n       @capsule.config.death_handlers.each do |handler|\n         handler.call(msg, exception)\n```\n\nWDYT?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3166068422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3166091664","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3166091664","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3166091664,"node_id":"IC_kwDOADDA9M68trmQ","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-07T23:05:09Z","updated_at":"2025-08-07T23:05:09Z","body":"Since :discard can currently break batch functionality, I consider this \"feature\" buggy and grounds for changing semantics without waiting for the next major version. I'd like to release this immediately with 8.0.7.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3166091664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3168218234","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3168218234","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3168218234,"node_id":"IC_kwDOADDA9M681yx6","user":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-08T14:55:53Z","updated_at":"2025-08-08T14:55:53Z","body":"> I'm not sure this should be considered a breaking change. Is invoking death handlers a compatibility issue?\n\nI can imagine cases where a user might have come to rely on the current behaviour, but none that seem central/obvious.\n\n> Since :discard can currently break batch functionality, I consider this \"feature\" buggy and grounds for changing semantics without waiting for the next major version. I'd like to release this immediately with 8.0.7.\n\nI think that's reasonable.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3168218234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3168228307","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3168228307","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3168228307,"node_id":"IC_kwDOADDA9M6811PT","user":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-08T14:59:30Z","updated_at":"2025-08-08T15:00:10Z","body":"The proposed diff looks correct to me but incomplete. There is also a case in `def process_retry` (currently line 189) that needs changing.\n\nThat refactor will be a touch more complex, since we don't want to go through all of `retries_exhausted` and invoke any `sidekiq_retries_exhausted_block`, but we do want to mimic the morgue/death-handler logic. Should be simple enough to split `retries_exhausted` into multiple methods though.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3168228307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3168336558","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3168336558","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3168336558,"node_id":"IC_kwDOADDA9M682Pqu","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-08T15:38:14Z","updated_at":"2025-08-08T15:38:14Z","body":"```diff\n--- a/lib/sidekiq/job_retry.rb\n+++ b/lib/sidekiq/job_retry.rb\n@@ -186,7 +186,7 @@ module Sidekiq\n       strategy, delay = delay_for(jobinst, count, exception, msg)\n       case strategy\n       when :discard\n-        return # poof!\n+        return run_death_handlers(msg, exception)\n       when :kill\n         return retries_exhausted(jobinst, msg, exception)\n       end\n@@ -257,11 +257,14 @@ module Sidekiq\n \n       to_morgue = !(msg[\"dead\"] == false || rv == :discard)\n       send_to_morgue(msg) if to_morgue\n+      run_death_handlers(msg, exception)\n+    end\n \n+    def run_death_handlers(job, exception)\n       @capsule.config.death_handlers.each do |handler|\n-        handler.call(msg, exception)\n+        handler.call(job, exception)\n       rescue => e\n-        handle_exception(e, {context: \"Error calling death handler\", job: msg})\n+        handle_exception(e, {context: \"Error calling death handler\", job: job})\n       end\n     end\n```","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3168336558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":19057839896,"node_id":"CE_lADOADDA9M67OrgwzwAAAARv748Y","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/19057839896","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"573448b7e16f334fcbf4763ead081704f5d55479","commit_url":"https://api.github.com/repos/sidekiq/sidekiq/commits/573448b7e16f334fcbf4763ead081704f5d55479","created_at":"2025-08-08T15:50:47Z","state_reason":null,"performed_via_github_app":null},{"id":19057839980,"node_id":"REFE_lADOADDA9M67OrgwzwAAAARv749s","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/19057839980","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"43c59dd85474435af23b196f20f8ff274a7ba4fd","commit_url":"https://api.github.com/repos/sidekiq/sidekiq/commits/43c59dd85474435af23b196f20f8ff274a7ba4fd","created_at":"2025-08-08T15:50:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3168431909","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3168431909","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3168431909,"node_id":"IC_kwDOADDA9M682m8l","user":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-08T16:06:48Z","updated_at":"2025-08-08T16:06:48Z","body":"Thank you!\n\n---\n\nWhile reading the new code, I noticed a small pre-existing oddity, that if `sidekiq_retry_in` and `sidekiq_retries_exhausted` are both configured, then their interaction is inconsistent (because `sidekiq_retry_in` only ends up delegating to `sidekiq_retries_exhausted` if it returns `:kill` and not if it returns `:discard`).\n\nThis would only impact jobs configured with both in opposition though, which is probably user error to begin with.\n\nConcretely:\n```ruby\n# In this combination, retry_in takes precedence and the job is discarded.\nsidekiq_retry_in { :discard }\nsidekiq_retries_exhausted { :kill }\n\n# In this combination, retries_exhausted takes precedence and the job is also discarded.\nsidekiq_retry_in { :kill }\nsidekiq_retries_exhausted { :discard }\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3168431909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3168669265","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3168669265","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3168669265,"node_id":"IC_kwDOADDA9M683g5R","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-08T16:44:48Z","updated_at":"2025-08-08T16:44:48Z","body":"807 is out","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3168669265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":19059328261,"node_id":"REFE_lADOADDA9M67OrgwzwAAAARwBkUF","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/19059328261","actor":{"login":"pull[bot]","id":39814207,"node_id":"MDM6Qm90Mzk4MTQyMDc=","avatar_url":"https://avatars.githubusercontent.com/in/12910?v=4","gravatar_id":"","url":"https://api.github.com/users/pull%5Bbot%5D","html_url":"https://github.com/apps/pull","followers_url":"https://api.github.com/users/pull%5Bbot%5D/followers","following_url":"https://api.github.com/users/pull%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/pull%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/pull%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pull%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/pull%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/pull%5Bbot%5D/repos","events_url":"https://api.github.com/users/pull%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/pull%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"573448b7e16f334fcbf4763ead081704f5d55479","commit_url":"https://api.github.com/repos/stnxo2023/sidekiq/commits/573448b7e16f334fcbf4763ead081704f5d55479","created_at":"2025-08-08T17:17:07Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3315046721","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3315046721","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3315046721,"node_id":"IC_kwDOADDA9M7Fl5lB","user":{"login":"gstokkink","id":14915325,"node_id":"MDQ6VXNlcjE0OTE1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/14915325?v=4","gravatar_id":"","url":"https://api.github.com/users/gstokkink","html_url":"https://github.com/gstokkink","followers_url":"https://api.github.com/users/gstokkink/followers","following_url":"https://api.github.com/users/gstokkink/following{/other_user}","gists_url":"https://api.github.com/users/gstokkink/gists{/gist_id}","starred_url":"https://api.github.com/users/gstokkink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gstokkink/subscriptions","organizations_url":"https://api.github.com/users/gstokkink/orgs","repos_url":"https://api.github.com/users/gstokkink/repos","events_url":"https://api.github.com/users/gstokkink/events{/privacy}","received_events_url":"https://api.github.com/users/gstokkink/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-09-20T15:19:12Z","updated_at":"2025-09-20T15:20:30Z","body":"@mperham I understand the reasoning for this change, but I would really like it if there was a way for the death handler (which is now also invoked for discarded jobs) to tell whether the job was discarded or not. The reason for this is that we do our error reporting from a death handler, but don't want to do any error reporting for intentionally discarded jobs. Perhaps the discard mechanism can add something to the job metadata? I think @eapache-opslevel also suggests this in https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3020162539.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3315046721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gstokkink","id":14915325,"node_id":"MDQ6VXNlcjE0OTE1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/14915325?v=4","gravatar_id":"","url":"https://api.github.com/users/gstokkink","html_url":"https://github.com/gstokkink","followers_url":"https://api.github.com/users/gstokkink/followers","following_url":"https://api.github.com/users/gstokkink/following{/other_user}","gists_url":"https://api.github.com/users/gstokkink/gists{/gist_id}","starred_url":"https://api.github.com/users/gstokkink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gstokkink/subscriptions","organizations_url":"https://api.github.com/users/gstokkink/orgs","repos_url":"https://api.github.com/users/gstokkink/repos","events_url":"https://api.github.com/users/gstokkink/events{/privacy}","received_events_url":"https://api.github.com/users/gstokkink/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":19816715555,"node_id":"MEE_lADOADDA9M67OrgwzwAAAASdKxUj","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/19816715555","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-09-20T15:19:13Z","performed_via_github_app":null},{"id":19816715559,"node_id":"SE_lADOADDA9M67OrgwzwAAAASdKxUn","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/19816715559","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-09-20T15:19:13Z","performed_via_github_app":null},{"id":19816715563,"node_id":"MEE_lADOADDA9M67OrgwzwAAAASdKxUr","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/19816715563","actor":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-09-20T15:19:13Z","performed_via_github_app":null},{"id":19816715564,"node_id":"SE_lADOADDA9M67OrgwzwAAAASdKxUs","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/19816715564","actor":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-09-20T15:19:13Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3315048191","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3315048191","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3315048191,"node_id":"IC_kwDOADDA9M7Fl57_","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-09-20T15:21:25Z","updated_at":"2025-09-20T15:21:25Z","body":"I dont know of any way. Why arent you using an error handler, as designed?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3315048191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3315062544","html_url":"https://github.com/sidekiq/sidekiq/issues/6741#issuecomment-3315062544","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","id":3315062544,"node_id":"IC_kwDOADDA9M7Fl9cQ","user":{"login":"gstokkink","id":14915325,"node_id":"MDQ6VXNlcjE0OTE1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/14915325?v=4","gravatar_id":"","url":"https://api.github.com/users/gstokkink","html_url":"https://github.com/gstokkink","followers_url":"https://api.github.com/users/gstokkink/followers","following_url":"https://api.github.com/users/gstokkink/following{/other_user}","gists_url":"https://api.github.com/users/gstokkink/gists{/gist_id}","starred_url":"https://api.github.com/users/gstokkink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gstokkink/subscriptions","organizations_url":"https://api.github.com/users/gstokkink/orgs","repos_url":"https://api.github.com/users/gstokkink/repos","events_url":"https://api.github.com/users/gstokkink/events{/privacy}","received_events_url":"https://api.github.com/users/gstokkink/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-09-20T15:43:34Z","updated_at":"2025-09-20T15:43:34Z","body":"@mperham because we don't want (spammy) error notifications for retries, only when a job ultimately dies and goes to the morgue.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3315062544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gstokkink","id":14915325,"node_id":"MDQ6VXNlcjE0OTE1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/14915325?v=4","gravatar_id":"","url":"https://api.github.com/users/gstokkink","html_url":"https://github.com/gstokkink","followers_url":"https://api.github.com/users/gstokkink/followers","following_url":"https://api.github.com/users/gstokkink/following{/other_user}","gists_url":"https://api.github.com/users/gstokkink/gists{/gist_id}","starred_url":"https://api.github.com/users/gstokkink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gstokkink/subscriptions","organizations_url":"https://api.github.com/users/gstokkink/orgs","repos_url":"https://api.github.com/users/gstokkink/repos","events_url":"https://api.github.com/users/gstokkink/events{/privacy}","received_events_url":"https://api.github.com/users/gstokkink/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":19816812252,"node_id":"MEE_lADOADDA9M67OrgwzwAAAASdLI7c","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/19816812252","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-09-20T15:43:35Z","performed_via_github_app":null},{"id":19816812258,"node_id":"SE_lADOADDA9M67OrgwzwAAAASdLI7i","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/19816812258","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-09-20T15:43:35Z","performed_via_github_app":null}]