[{"id":1775566863,"node_id":"MDExOkNsb3NlZEV2ZW50MTc3NTU2Njg2Mw==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/1775566863","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"b1bdaa7859b3b671db8ff9490c5b9f3d955acf22","commit_url":"https://api.github.com/repos/sidekiq/sidekiq/commits/b1bdaa7859b3b671db8ff9490c5b9f3d955acf22","created_at":"2018-08-07T15:18:12Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412536497","html_url":"https://github.com/sidekiq/sidekiq/issues/3917#issuecomment-412536497","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3917","id":412536497,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMjUzNjQ5Nw==","user":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-13T14:25:33Z","updated_at":"2018-08-13T14:25:33Z","body":"This is certainly a useful feature for new installations, however we ran into an issue this morning where an upgrade caused Sidekiq to not start after a deploy due to this change, and the route that our monitoring service used didn't detect it. The route looks like this:\r\n\r\n```rb\r\nrequire 'sidekiq/pro/web'\r\nrequire 'sidekiq/api'\r\n\r\nRails.application.routes.draw do\r\n  # Report whether Sidekiq latency is below 30s between queue and work.\r\n  get \"sidekiq_queue_latency\" => proc { [200, {\"Content-Type\" => \"text/plain\"}, [Sidekiq::Queue.new.latency < 30 ? \"OK\" : \"UHOH\" ]] }\r\n\r\n  # Report Sidekiq queue size below 200 jobs.\r\n  get \"sidekiq_queue_size\" => proc { [200, {\"Content-Type\" => \"text/plain\"}, [Sidekiq::Queue.new.size < 200 ? \"OK\" : \"UHOH\" ]] }\r\n```\r\n\r\nPerhaps a warning is in order instead of a hard failure?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412536497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412554139","html_url":"https://github.com/sidekiq/sidekiq/issues/3917#issuecomment-412554139","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3917","id":412554139,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMjU1NDEzOQ==","user":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-13T15:14:48Z","updated_at":"2018-08-13T15:14:48Z","body":"Also, the change in b1bdaa7 gives me this error if pool size is specified as nil:\r\n\r\n```sh\r\n2018-08-13T14:27:24.783Z 20211 TID-gnwxowv57 INFO: Running in ruby 2.4.2p198 (2017-09-14 revision 59899) [x86_64-linux]\r\n2018-08-13T14:27:24.783Z 20211 TID-gnwxowv57 INFO: Sidekiq Pro 4.0.3, commercially licensed.  Thanks for your support!\r\nundefined method `<' for nil:NilClass\r\n~/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.2.1/lib/sidekiq/cli.rb:87:in `run'\r\n~/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.2.1/bin/sidekiq:12:in `<top (required)>'\r\nbin/sidekiq:16:in `load'\r\nbin/sidekiq:16:in `<main>'\r\n```\r\n\r\n```rb\r\nconf = YAML.load(...) # load from config file, pool_size not present\r\nSidekiq.configure_server do |config|\r\n  config.redis = ConnectionPool.new(size: conf[:pool_size]) { Redis.new(conf) }\r\nend\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412554139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412555215","html_url":"https://github.com/sidekiq/sidekiq/issues/3917#issuecomment-412555215","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3917","id":412555215,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMjU1NTIxNQ==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-13T15:17:55Z","updated_at":"2018-08-13T15:17:55Z","body":"You want this:\r\n\r\n```ruby\r\nSidekiq.configure_server do |config|\r\n  config.redis = conf\r\nend\r\n```","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412555215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412583746","html_url":"https://github.com/sidekiq/sidekiq/issues/3917#issuecomment-412583746","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3917","id":412583746,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMjU4Mzc0Ng==","user":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-13T16:42:20Z","updated_at":"2018-08-13T16:42:20Z","body":"What about `Sidekiq::Queue.new.latency` silently reporting that everything is fine when Sidekiq is not running and jobs are being enqueued? Does Sidekiq need to be running in order for latency to be calculated?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412583746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412589217","html_url":"https://github.com/sidekiq/sidekiq/issues/3917#issuecomment-412589217","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3917","id":412589217,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMjU4OTIxNw==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-13T16:59:15Z","updated_at":"2018-08-13T16:59:15Z","body":"I have a suspicion: if your job payload does not have an enqueued_at attribute, latency will always return 0. How are you enqueuing the jobs?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412589217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412608631","html_url":"https://github.com/sidekiq/sidekiq/issues/3917#issuecomment-412608631","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3917","id":412608631,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMjYwODYzMQ==","user":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-13T17:59:39Z","updated_at":"2018-08-13T17:59:39Z","body":"ActiveJob `MyJobName.perform_later`, nothing changed about how we enqueue between deploys except that we upgraded from Sidekiq 4 to Sidekiq Pro 5.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412608631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412608852","html_url":"https://github.com/sidekiq/sidekiq/issues/3917#issuecomment-412608852","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3917","id":412608852,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMjYwODg1Mg==","user":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-13T18:00:15Z","updated_at":"2018-08-13T18:00:15Z","body":"Actually potentially related is that our retry backoff no longer works. Could be related to enqueued_at being 0?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412608852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412609525","html_url":"https://github.com/sidekiq/sidekiq/issues/3917#issuecomment-412609525","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3917","id":412609525,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMjYwOTUyNQ==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-13T18:02:21Z","updated_at":"2018-08-13T18:02:21Z","body":"Likely unrelated.  I'm not sure what's going on but the Web UI should show the current latency on the /queues page.  If you shut down all Sidekiq processes and they are all zero, something's wrong.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/412609525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"pointlessone","id":7405,"node_id":"MDQ6VXNlcjc0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/7405?v=4","gravatar_id":"","url":"https://api.github.com/users/pointlessone","html_url":"https://github.com/pointlessone","followers_url":"https://api.github.com/users/pointlessone/followers","following_url":"https://api.github.com/users/pointlessone/following{/other_user}","gists_url":"https://api.github.com/users/pointlessone/gists{/gist_id}","starred_url":"https://api.github.com/users/pointlessone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pointlessone/subscriptions","organizations_url":"https://api.github.com/users/pointlessone/orgs","repos_url":"https://api.github.com/users/pointlessone/repos","events_url":"https://api.github.com/users/pointlessone/events{/privacy}","received_events_url":"https://api.github.com/users/pointlessone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T14:15:18Z","updated_at":"2019-01-25T14:15:18Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4087","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4087/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4087/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4087/events","html_url":"https://github.com/sidekiq/sidekiq/issues/4087","id":403174186,"node_id":"MDU6SXNzdWU0MDMxNzQxODY=","number":4087,"title":"connection_pool dependency is outdated","user":{"login":"pointlessone","id":7405,"node_id":"MDQ6VXNlcjc0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/7405?v=4","gravatar_id":"","url":"https://api.github.com/users/pointlessone","html_url":"https://github.com/pointlessone","followers_url":"https://api.github.com/users/pointlessone/followers","following_url":"https://api.github.com/users/pointlessone/following{/other_user}","gists_url":"https://api.github.com/users/pointlessone/gists{/gist_id}","starred_url":"https://api.github.com/users/pointlessone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pointlessone/subscriptions","organizations_url":"https://api.github.com/users/pointlessone/orgs","repos_url":"https://api.github.com/users/pointlessone/repos","events_url":"https://api.github.com/users/pointlessone/events{/privacy}","received_events_url":"https://api.github.com/users/pointlessone/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-01-25T14:15:18Z","updated_at":"2019-01-26T07:07:00Z","closed_at":"2019-01-26T00:27:03Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3195124,"node_id":"MDEwOlJlcG9zaXRvcnkzMTk1MTI0","name":"sidekiq","full_name":"sidekiq/sidekiq","private":false,"owner":{"login":"sidekiq","id":124714131,"node_id":"O_kgDOB278kw","avatar_url":"https://avatars.githubusercontent.com/u/124714131?v=4","gravatar_id":"","url":"https://api.github.com/users/sidekiq","html_url":"https://github.com/sidekiq","followers_url":"https://api.github.com/users/sidekiq/followers","following_url":"https://api.github.com/users/sidekiq/following{/other_user}","gists_url":"https://api.github.com/users/sidekiq/gists{/gist_id}","starred_url":"https://api.github.com/users/sidekiq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidekiq/subscriptions","organizations_url":"https://api.github.com/users/sidekiq/orgs","repos_url":"https://api.github.com/users/sidekiq/repos","events_url":"https://api.github.com/users/sidekiq/events{/privacy}","received_events_url":"https://api.github.com/users/sidekiq/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sidekiq/sidekiq","description":"Simple, efficient background processing for Ruby","fork":false,"url":"https://api.github.com/repos/sidekiq/sidekiq","forks_url":"https://api.github.com/repos/sidekiq/sidekiq/forks","keys_url":"https://api.github.com/repos/sidekiq/sidekiq/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sidekiq/sidekiq/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sidekiq/sidekiq/teams","hooks_url":"https://api.github.com/repos/sidekiq/sidekiq/hooks","issue_events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events{/number}","events_url":"https://api.github.com/repos/sidekiq/sidekiq/events","assignees_url":"https://api.github.com/repos/sidekiq/sidekiq/assignees{/user}","branches_url":"https://api.github.com/repos/sidekiq/sidekiq/branches{/branch}","tags_url":"https://api.github.com/repos/sidekiq/sidekiq/tags","blobs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sidekiq/sidekiq/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/refs{/sha}","trees_url":"https://api.github.com/repos/sidekiq/sidekiq/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sidekiq/sidekiq/statuses/{sha}","languages_url":"https://api.github.com/repos/sidekiq/sidekiq/languages","stargazers_url":"https://api.github.com/repos/sidekiq/sidekiq/stargazers","contributors_url":"https://api.github.com/repos/sidekiq/sidekiq/contributors","subscribers_url":"https://api.github.com/repos/sidekiq/sidekiq/subscribers","subscription_url":"https://api.github.com/repos/sidekiq/sidekiq/subscription","commits_url":"https://api.github.com/repos/sidekiq/sidekiq/commits{/sha}","git_commits_url":"https://api.github.com/repos/sidekiq/sidekiq/git/commits{/sha}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/comments{/number}","issue_comment_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments{/number}","contents_url":"https://api.github.com/repos/sidekiq/sidekiq/contents/{+path}","compare_url":"https://api.github.com/repos/sidekiq/sidekiq/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sidekiq/sidekiq/merges","archive_url":"https://api.github.com/repos/sidekiq/sidekiq/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sidekiq/sidekiq/downloads","issues_url":"https://api.github.com/repos/sidekiq/sidekiq/issues{/number}","pulls_url":"https://api.github.com/repos/sidekiq/sidekiq/pulls{/number}","milestones_url":"https://api.github.com/repos/sidekiq/sidekiq/milestones{/number}","notifications_url":"https://api.github.com/repos/sidekiq/sidekiq/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/labels{/name}","releases_url":"https://api.github.com/repos/sidekiq/sidekiq/releases{/id}","deployments_url":"https://api.github.com/repos/sidekiq/sidekiq/deployments","created_at":"2012-01-16T23:17:27Z","updated_at":"2025-11-09T20:20:41Z","pushed_at":"2025-11-07T17:29:44Z","git_url":"git://github.com/sidekiq/sidekiq.git","ssh_url":"git@github.com:sidekiq/sidekiq.git","clone_url":"https://github.com/sidekiq/sidekiq.git","svn_url":"https://github.com/sidekiq/sidekiq","homepage":"https://sidekiq.org","size":14680,"stargazers_count":13447,"watchers_count":13447,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2471,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["background-jobs","jobs","ruby","sidekiq"],"visibility":"public","forks":2471,"open_issues":40,"watchers":13447,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"b1bdaa7859b3b671db8ff9490c5b9f3d955acf22 (fix for #3917) makes use of `size` method on a connection pool (introduced in Sidekiq 5.2.0). While the method is two years old the firs version of connection_pool gem it's present in is 2.2.2. Sidekiq allows older versions of connection_pool. We found out about it because we had 2.2.1 version of connection_pool gem.\r\n\r\nPlease update the dependencies constraints.","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4087/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/503574661","html_url":"https://github.com/sidekiq/sidekiq/issues/3917#issuecomment-503574661","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3917","id":503574661,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzU3NDY2MQ==","user":{"login":"drock","id":164126,"node_id":"MDQ6VXNlcjE2NDEyNg==","avatar_url":"https://avatars.githubusercontent.com/u/164126?v=4","gravatar_id":"","url":"https://api.github.com/users/drock","html_url":"https://github.com/drock","followers_url":"https://api.github.com/users/drock/followers","following_url":"https://api.github.com/users/drock/following{/other_user}","gists_url":"https://api.github.com/users/drock/gists{/gist_id}","starred_url":"https://api.github.com/users/drock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drock/subscriptions","organizations_url":"https://api.github.com/users/drock/orgs","repos_url":"https://api.github.com/users/drock/repos","events_url":"https://api.github.com/users/drock/events{/privacy}","received_events_url":"https://api.github.com/users/drock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-19T14:02:58Z","updated_at":"2019-06-19T14:02:58Z","body":"I agree with @latortuga that this should be a warning instead of a hard error.  We just got bit by this too when upgrading.  We never knew sidekiq needed the `+2` connections and we have been running with a redis pool size of 25 and sidekiq thread count of 25 for years with no issues.\r\n\r\nWhile we solved it by simply increasing our redis pool size, I don't think its correct to impose this restriction on everyone.  Aside from the upgrade issue we experienced, there may be use cases that warrant a smaller redis pool size.  It should be at the user's discretion.  Warn them yes, but if they have a reason not to heed that warning, let it be.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/503574661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"drock","id":164126,"node_id":"MDQ6VXNlcjE2NDEyNg==","avatar_url":"https://avatars.githubusercontent.com/u/164126?v=4","gravatar_id":"","url":"https://api.github.com/users/drock","html_url":"https://github.com/drock","followers_url":"https://api.github.com/users/drock/followers","following_url":"https://api.github.com/users/drock/following{/other_user}","gists_url":"https://api.github.com/users/drock/gists{/gist_id}","starred_url":"https://api.github.com/users/drock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drock/subscriptions","organizations_url":"https://api.github.com/users/drock/orgs","repos_url":"https://api.github.com/users/drock/repos","events_url":"https://api.github.com/users/drock/events{/privacy}","received_events_url":"https://api.github.com/users/drock/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2424290780,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQyNDI5MDc4MA==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/2424290780","actor":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-06-19T14:02:58Z","performed_via_github_app":null},{"id":2424290784,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0MjQyOTA3ODQ=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/2424290784","actor":{"login":"latortuga","id":9379,"node_id":"MDQ6VXNlcjkzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9379?v=4","gravatar_id":"","url":"https://api.github.com/users/latortuga","html_url":"https://github.com/latortuga","followers_url":"https://api.github.com/users/latortuga/followers","following_url":"https://api.github.com/users/latortuga/following{/other_user}","gists_url":"https://api.github.com/users/latortuga/gists{/gist_id}","starred_url":"https://api.github.com/users/latortuga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/latortuga/subscriptions","organizations_url":"https://api.github.com/users/latortuga/orgs","repos_url":"https://api.github.com/users/latortuga/repos","events_url":"https://api.github.com/users/latortuga/events{/privacy}","received_events_url":"https://api.github.com/users/latortuga/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-06-19T14:02:59Z","performed_via_github_app":null},{"id":13766718226,"node_id":"REFE_lADOADDA9M4Uw6sFzwAAAAM0j3MS","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/13766718226","actor":{"login":"AlexSc","id":98665,"node_id":"MDQ6VXNlcjk4NjY1","avatar_url":"https://avatars.githubusercontent.com/u/98665?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexSc","html_url":"https://github.com/AlexSc","followers_url":"https://api.github.com/users/AlexSc/followers","following_url":"https://api.github.com/users/AlexSc/following{/other_user}","gists_url":"https://api.github.com/users/AlexSc/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexSc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexSc/subscriptions","organizations_url":"https://api.github.com/users/AlexSc/orgs","repos_url":"https://api.github.com/users/AlexSc/repos","events_url":"https://api.github.com/users/AlexSc/events{/privacy}","received_events_url":"https://api.github.com/users/AlexSc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b1bdaa7859b3b671db8ff9490c5b9f3d955acf22","commit_url":"https://api.github.com/repos/GoCarrot/sidekiq/commits/b1bdaa7859b3b671db8ff9490c5b9f3d955acf22","created_at":"2024-08-05T16:13:34Z","performed_via_github_app":null}]