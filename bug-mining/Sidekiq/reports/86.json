{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/1454","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/1454/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/1454/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/1454/events","html_url":"https://github.com/sidekiq/sidekiq/issues/1454","id":26598303,"node_id":"MDU6SXNzdWUyNjU5ODMwMw==","number":1454,"title":"Job ID unavailable in testing/inline mode","user":{"login":"jlecour","id":5142,"node_id":"MDQ6VXNlcjUxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5142?v=4","gravatar_id":"","url":"https://api.github.com/users/jlecour","html_url":"https://github.com/jlecour","followers_url":"https://api.github.com/users/jlecour/followers","following_url":"https://api.github.com/users/jlecour/following{/other_user}","gists_url":"https://api.github.com/users/jlecour/gists{/gist_id}","starred_url":"https://api.github.com/users/jlecour/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlecour/subscriptions","organizations_url":"https://api.github.com/users/jlecour/orgs","repos_url":"https://api.github.com/users/jlecour/repos","events_url":"https://api.github.com/users/jlecour/events{/privacy}","received_events_url":"https://api.github.com/users/jlecour/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2014-01-30T13:37:36Z","updated_at":"2014-01-30T19:44:54Z","closed_at":"2014-01-30T17:22:11Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi Mike,\n\nWe've found an issue with Sidekiq in `inline` mode.\n\nWhen we push a job to Sidekiq, we inject the job ID, instead of letting Sidekiq create it automatically. We need to do this because we have to know the ID before the job is created.\n\nExample : \n\n``` ruby\njob_id = SecureRandom.hex(12) + \"-foo-bar\"\nSidekiq::Client.push({\n  'queue' => queue,\n  'jid'   => job_id,\n  'class' => WorkerClass,\n  'args'  => args\n})\n```\n\nIn `inline` mode, in the WorkerClass, the `jid` method always returns `nil`. In _regular_ mode, it returns the Job ID.\n\nWe didn't find anything in the test that verifies that the `jid` can be accessed by the worker itself, but there is a public `attr_accessor` [in the module](https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/worker.rb#L24).\n\nIs this \"inject the jid and be able to use it from the worker\" a supported feature or should we stop use it?\n\nThank you a lot for Sidekiq.\n","closed_by":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/1454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/1454/timeline","performed_via_github_app":null,"state_reason":"completed"}