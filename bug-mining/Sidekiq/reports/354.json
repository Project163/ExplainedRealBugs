{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741/events","html_url":"https://github.com/sidekiq/sidekiq/issues/6741","id":3141187632,"node_id":"I_kwDOADDA9M67Orgw","number":6741,"title":"Possibly unintended difference between `dead: false` and `:discard`","user":{"login":"eapache-opslevel","id":109987149,"node_id":"U_kgDOBo5FTQ","avatar_url":"https://avatars.githubusercontent.com/u/109987149?v=4","gravatar_id":"","url":"https://api.github.com/users/eapache-opslevel","html_url":"https://github.com/eapache-opslevel","followers_url":"https://api.github.com/users/eapache-opslevel/followers","following_url":"https://api.github.com/users/eapache-opslevel/following{/other_user}","gists_url":"https://api.github.com/users/eapache-opslevel/gists{/gist_id}","starred_url":"https://api.github.com/users/eapache-opslevel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eapache-opslevel/subscriptions","organizations_url":"https://api.github.com/users/eapache-opslevel/orgs","repos_url":"https://api.github.com/users/eapache-opslevel/repos","events_url":"https://api.github.com/users/eapache-opslevel/events{/privacy}","received_events_url":"https://api.github.com/users/eapache-opslevel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":20,"created_at":"2025-06-12T18:10:24Z","updated_at":"2025-09-25T07:59:09Z","closed_at":"2025-08-08T15:50:47Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Per https://github.com/sidekiq/sidekiq/blob/v8.0.4/lib/sidekiq/job_retry.rb#L258-L265\n\nA job with\n```ruby\nsidekiq_retries_exhausted do |_job, _ex|\n  :discard\nend\n```\nWill skip the morgue, and will _not_ invoke its death handlers.\n\nWhile a job configured simply with `dead: false` will also skip the morgue, but _will_ invoke its death handlers.\n\nCaught myself on a small issue recently where I expected these two cases to behave identically.\n\nFor my particular case it would be convenient if the death handlers were always invoked. Though from a logical consistency perspective it may make more sense if the death handlers are _only_ invoked as part of going to the morgue? And either way this is probably now difficult to change from a compatibility standpoint.\n\nMostly just wanted to ask and see if there was a subtle reason for this difference in behaviour that I'm not aware of? Because from the outside, it was quite surprising.","closed_by":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/6741/timeline","performed_via_github_app":null,"state_reason":"completed"}