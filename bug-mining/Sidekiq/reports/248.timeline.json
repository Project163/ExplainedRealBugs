[{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/600924130","html_url":"https://github.com/sidekiq/sidekiq/issues/4498#issuecomment-600924130","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4498","id":600924130,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDkyNDEzMA==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-19T00:27:56Z","updated_at":"2020-03-19T00:27:56Z","body":"The job is not done so it is not considered processed yet. Right?\n\n> On Mar 18, 2020, at 17:24, Olivier Brisse <notifications@github.com> wrote:\n> \n> ﻿\n> Ruby version: ruby-2.5.1\n> Sidekiq version: 6.0.5\n> \n> Hi,\n> To test deployment and graceful restart of Sidekiq workers, I've created a dummy jobs that just sleeps and output to stdout:\n> \n> class SleepyWorker < BaseWorker\n>   SLEEP = 30\n> \n>   def perform steps = 10\n>     steps.times do |i|\n>       puts \"Sleeping for #{SLEEP}s (#{i}/#{steps})\"\n>       sleep SLEEP\n>     end\n>     puts \"I'm done\"\n>   end\n> end\n> My initializer is pretty standard:\n> \n> redis_config = { url: ENV['REDIS_SIDEKIQ_URL'] }\n> \n> # Use redis authentication if available\n> redis_config[:password] = ENV['REDIS_SIDEKIQ_PASSWORD'] if ENV['REDIS_SIDEKIQ_PASSWORD'].present?\n> \n> Sidekiq.configure_server do |config|\n>   config.redis = redis_config\n> end\n> \n> Sidekiq.configure_client do |config|\n>   config.redis = redis_config\n> end\n> I've increased the shutdown timeout to 8 minutes in config/sidekiq.yml:\n> \n> :timeout: 480 # 8m, default is 25s\n> I'm stopping Sidekiq with the TERM signal after having enqueued a 5min sleeping job, I'm expecting:\n> \n> Sidekiq to stop accepting new jobs -> worker shows as quiet in the UI ✅\n> Sidekiq to wait for the job to be done before shutting down ✅\n> The numbers of processed jobs to be increased by 1 => Busy is at 1 while processing but Processed is not increased ❌\n> Am I missing something?\n> \n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/600924130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/600924735","html_url":"https://github.com/sidekiq/sidekiq/issues/4498#issuecomment-600924735","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4498","id":600924735,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDkyNDczNQ==","user":{"login":"ouranos","id":19894,"node_id":"MDQ6VXNlcjE5ODk0","avatar_url":"https://avatars.githubusercontent.com/u/19894?v=4","gravatar_id":"","url":"https://api.github.com/users/ouranos","html_url":"https://github.com/ouranos","followers_url":"https://api.github.com/users/ouranos/followers","following_url":"https://api.github.com/users/ouranos/following{/other_user}","gists_url":"https://api.github.com/users/ouranos/gists{/gist_id}","starred_url":"https://api.github.com/users/ouranos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ouranos/subscriptions","organizations_url":"https://api.github.com/users/ouranos/orgs","repos_url":"https://api.github.com/users/ouranos/repos","events_url":"https://api.github.com/users/ouranos/events{/privacy}","received_events_url":"https://api.github.com/users/ouranos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-19T00:30:30Z","updated_at":"2020-03-19T00:33:29Z","body":"It's actually finishing processing as it takes shorter than the 8 minutes timeout (and my actual job updates a dummy record in the db at the end which is correctly updated)\r\nSo processing is fine, it's more an issue with the stats reporting I think.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/600924735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ouranos","id":19894,"node_id":"MDQ6VXNlcjE5ODk0","avatar_url":"https://avatars.githubusercontent.com/u/19894?v=4","gravatar_id":"","url":"https://api.github.com/users/ouranos","html_url":"https://github.com/ouranos","followers_url":"https://api.github.com/users/ouranos/followers","following_url":"https://api.github.com/users/ouranos/following{/other_user}","gists_url":"https://api.github.com/users/ouranos/gists{/gist_id}","starred_url":"https://api.github.com/users/ouranos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ouranos/subscriptions","organizations_url":"https://api.github.com/users/ouranos/orgs","repos_url":"https://api.github.com/users/ouranos/repos","events_url":"https://api.github.com/users/ouranos/events{/privacy}","received_events_url":"https://api.github.com/users/ouranos/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/600928345","html_url":"https://github.com/sidekiq/sidekiq/issues/4498#issuecomment-600928345","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4498","id":600928345,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDkyODM0NQ==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-19T00:46:11Z","updated_at":"2020-03-19T00:46:11Z","body":"Did you refresh the Web page?  You’re right, I’d expect that to work. A terminating process still reports its stats every five seconds.\n\n> On Mar 18, 2020, at 17:30, Olivier Brisse <notifications@github.com> wrote:\n> \n> ﻿\n> It's actually finishing processing as it takes shorter than the 8 minutes timeout (and my actual job update a record in the db at the end which is correctly updated)\n> So processing is fine, it's more an issue with the stats reporting I think.\n> \n> —\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/600928345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/600929688","html_url":"https://github.com/sidekiq/sidekiq/issues/4498#issuecomment-600929688","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4498","id":600929688,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDkyOTY4OA==","user":{"login":"ouranos","id":19894,"node_id":"MDQ6VXNlcjE5ODk0","avatar_url":"https://avatars.githubusercontent.com/u/19894?v=4","gravatar_id":"","url":"https://api.github.com/users/ouranos","html_url":"https://github.com/ouranos","followers_url":"https://api.github.com/users/ouranos/followers","following_url":"https://api.github.com/users/ouranos/following{/other_user}","gists_url":"https://api.github.com/users/ouranos/gists{/gist_id}","starred_url":"https://api.github.com/users/ouranos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ouranos/subscriptions","organizations_url":"https://api.github.com/users/ouranos/orgs","repos_url":"https://api.github.com/users/ouranos/repos","events_url":"https://api.github.com/users/ouranos/events{/privacy}","received_events_url":"https://api.github.com/users/ouranos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-19T00:52:00Z","updated_at":"2020-03-19T00:52:00Z","body":"Yes, I've tested multiple times as I thought it was an issue with my restart process first.\r\n\r\nThe logs are:\r\n```\r\n2020-03-19 00:17:22,005 DEBG 'sidekiq_worker' stdout output:\r\n2020-03-19T00:17:22.005Z pid=43 tid=go8g0fhej INFO: Pausing to allow workers to finish...\r\n...\r\n2020-03-19 00:17:50,057 INFO waiting for sidekiq_worker to stop\r\n2020-03-19 00:17:50,551 DEBG 'sidekiq_worker' stdout output:\r\nSleeping for 30s (2/8)\r\n\r\n2020-03-19 00:17:52,555 INFO waiting for sidekiq_worker to stop\r\n...\r\n2020-03-19 00:20:49,594 INFO waiting for sidekiq_worker to stop\r\n2020-03-19 00:20:50,638 DEBG 'sidekiq_worker' stdout output:\r\nI'm done\r\n\r\n2020-03-19 00:20:50,640 DEBG 'sidekiq_worker' stdout output:\r\n2020-03-19T00:20:50.640Z pid=43 tid=go8hq5gbz class=SleepyWorker jid=4a287d658719e9b46c83f317 elapsed=240.145 INFO: done\r\n\r\n2020-03-19 00:20:51,092 DEBG 'sidekiq_worker' stdout output:\r\n2020-03-19T00:20:51.092Z pid=43 tid=go8g0fhej INFO: Bye!\r\n```\r\nCould it be that the process exit as soon as the job is done without reporting its stats first?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/600929688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ouranos","id":19894,"node_id":"MDQ6VXNlcjE5ODk0","avatar_url":"https://avatars.githubusercontent.com/u/19894?v=4","gravatar_id":"","url":"https://api.github.com/users/ouranos","html_url":"https://github.com/ouranos","followers_url":"https://api.github.com/users/ouranos/followers","following_url":"https://api.github.com/users/ouranos/following{/other_user}","gists_url":"https://api.github.com/users/ouranos/gists{/gist_id}","starred_url":"https://api.github.com/users/ouranos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ouranos/subscriptions","organizations_url":"https://api.github.com/users/ouranos/orgs","repos_url":"https://api.github.com/users/ouranos/repos","events_url":"https://api.github.com/users/ouranos/events{/privacy}","received_events_url":"https://api.github.com/users/ouranos/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/600944667","html_url":"https://github.com/sidekiq/sidekiq/issues/4498#issuecomment-600944667","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4498","id":600944667,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDk0NDY2Nw==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-19T01:50:16Z","updated_at":"2020-03-19T01:50:16Z","body":"That sounds right. I need to add an at_exit. \n\n> On Mar 18, 2020, at 17:52, Olivier Brisse <notifications@github.com> wrote:\n> \n> ﻿\n> Yes, I've tested multiple times as I thought it was an issue with my restart process first.\n> \n> The logs are:\n> \n> 2020-03-19 00:17:22,005 DEBG 'sidekiq_worker' stdout output:\n> 2020-03-19T00:17:22.005Z pid=43 tid=go8g0fhej INFO: Pausing to allow workers to finish...\n> ...\n> 2020-03-19 00:17:50,057 INFO waiting for sidekiq_worker to stop\n> 2020-03-19 00:17:50,551 DEBG 'sidekiq_worker' stdout output:\n> Sleeping for 30s (2/8)\n> \n> 2020-03-19 00:17:52,555 INFO waiting for sidekiq_worker to stop\n> ...\n> 2020-03-19 00:20:49,594 INFO waiting for sidekiq_worker to stop\n> 2020-03-19 00:20:50,638 DEBG 'sidekiq_worker' stdout output:\n> I'm done\n> \n> 2020-03-19 00:20:50,640 DEBG 'sidekiq_worker' stdout output:\n> 2020-03-19T00:20:50.640Z pid=43 tid=go8hq5gbz class=SleepyWorker jid=4a287d658719e9b46c83f317 elapsed=240.145 INFO: done\n> \n> 2020-03-19 00:20:51,092 DEBG 'sidekiq_worker' stdout output:\n> 2020-03-19T00:20:51.092Z pid=43 tid=go8g0fhej INFO: Bye!\n> Could it be that the process exit as soon as the job is done without reporting its stats first?\n> \n> —\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/600944667/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3143860487,"node_id":"MDExOkNsb3NlZEV2ZW50MzE0Mzg2MDQ4Nw==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/3143860487","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"4540903dd41da7d66bb3a2789d6ec5b5757103e4","commit_url":"https://api.github.com/repos/sidekiq/sidekiq/commits/4540903dd41da7d66bb3a2789d6ec5b5757103e4","created_at":"2020-03-19T02:46:53Z","state_reason":null,"performed_via_github_app":null},{"id":3157214878,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMxNTcyMTQ4Nzg=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/3157214878","actor":{"login":"misdoro","id":192252,"node_id":"MDQ6VXNlcjE5MjI1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/192252?v=4","gravatar_id":"","url":"https://api.github.com/users/misdoro","html_url":"https://github.com/misdoro","followers_url":"https://api.github.com/users/misdoro/followers","following_url":"https://api.github.com/users/misdoro/following{/other_user}","gists_url":"https://api.github.com/users/misdoro/gists{/gist_id}","starred_url":"https://api.github.com/users/misdoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/misdoro/subscriptions","organizations_url":"https://api.github.com/users/misdoro/orgs","repos_url":"https://api.github.com/users/misdoro/repos","events_url":"https://api.github.com/users/misdoro/events{/privacy}","received_events_url":"https://api.github.com/users/misdoro/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a55c1ed5169835abbb573b6cb8bb21a83959fb5d","commit_url":"https://api.github.com/repos/misdoro/sidekiq/commits/a55c1ed5169835abbb573b6cb8bb21a83959fb5d","created_at":"2020-03-23T21:34:30Z","performed_via_github_app":null},{"actor":{"login":"misdoro","id":192252,"node_id":"MDQ6VXNlcjE5MjI1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/192252?v=4","gravatar_id":"","url":"https://api.github.com/users/misdoro","html_url":"https://github.com/misdoro","followers_url":"https://api.github.com/users/misdoro/followers","following_url":"https://api.github.com/users/misdoro/following{/other_user}","gists_url":"https://api.github.com/users/misdoro/gists{/gist_id}","starred_url":"https://api.github.com/users/misdoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/misdoro/subscriptions","organizations_url":"https://api.github.com/users/misdoro/orgs","repos_url":"https://api.github.com/users/misdoro/repos","events_url":"https://api.github.com/users/misdoro/events{/privacy}","received_events_url":"https://api.github.com/users/misdoro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-23T21:35:19Z","updated_at":"2020-03-23T21:35:19Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4502","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4502/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4502/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4502/events","html_url":"https://github.com/sidekiq/sidekiq/pull/4502","id":586533288,"node_id":"MDExOlB1bGxSZXF1ZXN0MzkyNjUxMzg2","number":4502,"title":"Do not connect to redis at exit if not needed","user":{"login":"misdoro","id":192252,"node_id":"MDQ6VXNlcjE5MjI1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/192252?v=4","gravatar_id":"","url":"https://api.github.com/users/misdoro","html_url":"https://github.com/misdoro","followers_url":"https://api.github.com/users/misdoro/followers","following_url":"https://api.github.com/users/misdoro/following{/other_user}","gists_url":"https://api.github.com/users/misdoro/gists{/gist_id}","starred_url":"https://api.github.com/users/misdoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/misdoro/subscriptions","organizations_url":"https://api.github.com/users/misdoro/orgs","repos_url":"https://api.github.com/users/misdoro/repos","events_url":"https://api.github.com/users/misdoro/events{/privacy}","received_events_url":"https://api.github.com/users/misdoro/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-03-23T21:35:19Z","updated_at":"2020-03-27T19:10:42Z","closed_at":"2020-03-23T22:11:23Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":3195124,"node_id":"MDEwOlJlcG9zaXRvcnkzMTk1MTI0","name":"sidekiq","full_name":"sidekiq/sidekiq","private":false,"owner":{"login":"sidekiq","id":124714131,"node_id":"O_kgDOB278kw","avatar_url":"https://avatars.githubusercontent.com/u/124714131?v=4","gravatar_id":"","url":"https://api.github.com/users/sidekiq","html_url":"https://github.com/sidekiq","followers_url":"https://api.github.com/users/sidekiq/followers","following_url":"https://api.github.com/users/sidekiq/following{/other_user}","gists_url":"https://api.github.com/users/sidekiq/gists{/gist_id}","starred_url":"https://api.github.com/users/sidekiq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidekiq/subscriptions","organizations_url":"https://api.github.com/users/sidekiq/orgs","repos_url":"https://api.github.com/users/sidekiq/repos","events_url":"https://api.github.com/users/sidekiq/events{/privacy}","received_events_url":"https://api.github.com/users/sidekiq/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sidekiq/sidekiq","description":"Simple, efficient background processing for Ruby","fork":false,"url":"https://api.github.com/repos/sidekiq/sidekiq","forks_url":"https://api.github.com/repos/sidekiq/sidekiq/forks","keys_url":"https://api.github.com/repos/sidekiq/sidekiq/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sidekiq/sidekiq/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sidekiq/sidekiq/teams","hooks_url":"https://api.github.com/repos/sidekiq/sidekiq/hooks","issue_events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events{/number}","events_url":"https://api.github.com/repos/sidekiq/sidekiq/events","assignees_url":"https://api.github.com/repos/sidekiq/sidekiq/assignees{/user}","branches_url":"https://api.github.com/repos/sidekiq/sidekiq/branches{/branch}","tags_url":"https://api.github.com/repos/sidekiq/sidekiq/tags","blobs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sidekiq/sidekiq/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/refs{/sha}","trees_url":"https://api.github.com/repos/sidekiq/sidekiq/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sidekiq/sidekiq/statuses/{sha}","languages_url":"https://api.github.com/repos/sidekiq/sidekiq/languages","stargazers_url":"https://api.github.com/repos/sidekiq/sidekiq/stargazers","contributors_url":"https://api.github.com/repos/sidekiq/sidekiq/contributors","subscribers_url":"https://api.github.com/repos/sidekiq/sidekiq/subscribers","subscription_url":"https://api.github.com/repos/sidekiq/sidekiq/subscription","commits_url":"https://api.github.com/repos/sidekiq/sidekiq/commits{/sha}","git_commits_url":"https://api.github.com/repos/sidekiq/sidekiq/git/commits{/sha}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/comments{/number}","issue_comment_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments{/number}","contents_url":"https://api.github.com/repos/sidekiq/sidekiq/contents/{+path}","compare_url":"https://api.github.com/repos/sidekiq/sidekiq/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sidekiq/sidekiq/merges","archive_url":"https://api.github.com/repos/sidekiq/sidekiq/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sidekiq/sidekiq/downloads","issues_url":"https://api.github.com/repos/sidekiq/sidekiq/issues{/number}","pulls_url":"https://api.github.com/repos/sidekiq/sidekiq/pulls{/number}","milestones_url":"https://api.github.com/repos/sidekiq/sidekiq/milestones{/number}","notifications_url":"https://api.github.com/repos/sidekiq/sidekiq/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/labels{/name}","releases_url":"https://api.github.com/repos/sidekiq/sidekiq/releases{/id}","deployments_url":"https://api.github.com/repos/sidekiq/sidekiq/deployments","created_at":"2012-01-16T23:17:27Z","updated_at":"2025-11-09T20:20:41Z","pushed_at":"2025-11-07T17:29:44Z","git_url":"git://github.com/sidekiq/sidekiq.git","ssh_url":"git@github.com:sidekiq/sidekiq.git","clone_url":"https://github.com/sidekiq/sidekiq.git","svn_url":"https://github.com/sidekiq/sidekiq","homepage":"https://sidekiq.org","size":14680,"stargazers_count":13447,"watchers_count":13447,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2471,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["background-jobs","jobs","ruby","sidekiq"],"visibility":"public","forks":2471,"open_issues":40,"watchers":13447,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/sidekiq/sidekiq/pulls/4502","html_url":"https://github.com/sidekiq/sidekiq/pull/4502","diff_url":"https://github.com/sidekiq/sidekiq/pull/4502.diff","patch_url":"https://github.com/sidekiq/sidekiq/pull/4502.patch","merged_at":"2020-03-23T22:11:23Z"},"body":"A fix for https://github.com/mperham/sidekiq/issues/4498 introduced a callback that is executed at ruby VM exit and tries to connect to redis.\r\n\r\nThis callback is also executed in CI runs and in all other cases where sidekiq is loaded but not used with real redis.\r\n\r\nAs a work-around, keep the at_exit hook but communicate to redis only if there is something to send, i.e. the number of processed or failed jobs is greater than zero","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4502/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4502/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":3157219427,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMxNTcyMTk0Mjc=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/3157219427","actor":{"login":"misdoro","id":192252,"node_id":"MDQ6VXNlcjE5MjI1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/192252?v=4","gravatar_id":"","url":"https://api.github.com/users/misdoro","html_url":"https://github.com/misdoro","followers_url":"https://api.github.com/users/misdoro/followers","following_url":"https://api.github.com/users/misdoro/following{/other_user}","gists_url":"https://api.github.com/users/misdoro/gists{/gist_id}","starred_url":"https://api.github.com/users/misdoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/misdoro/subscriptions","organizations_url":"https://api.github.com/users/misdoro/orgs","repos_url":"https://api.github.com/users/misdoro/repos","events_url":"https://api.github.com/users/misdoro/events{/privacy}","received_events_url":"https://api.github.com/users/misdoro/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b2b73996ae18b1558e9afbbdaca393f85fa78170","commit_url":"https://api.github.com/repos/misdoro/sidekiq/commits/b2b73996ae18b1558e9afbbdaca393f85fa78170","created_at":"2020-03-23T21:36:04Z","performed_via_github_app":null},{"id":3157316918,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMxNTczMTY5MTg=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/3157316918","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b2b8558fdbb5669d4c59efe78275e5162580008b","commit_url":"https://api.github.com/repos/sidekiq/sidekiq/commits/b2b8558fdbb5669d4c59efe78275e5162580008b","created_at":"2020-03-23T22:11:25Z","performed_via_github_app":null},{"actor":{"login":"ZilvinasKucinskas","id":3614693,"node_id":"MDQ6VXNlcjM2MTQ2OTM=","avatar_url":"https://avatars.githubusercontent.com/u/3614693?v=4","gravatar_id":"","url":"https://api.github.com/users/ZilvinasKucinskas","html_url":"https://github.com/ZilvinasKucinskas","followers_url":"https://api.github.com/users/ZilvinasKucinskas/followers","following_url":"https://api.github.com/users/ZilvinasKucinskas/following{/other_user}","gists_url":"https://api.github.com/users/ZilvinasKucinskas/gists{/gist_id}","starred_url":"https://api.github.com/users/ZilvinasKucinskas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZilvinasKucinskas/subscriptions","organizations_url":"https://api.github.com/users/ZilvinasKucinskas/orgs","repos_url":"https://api.github.com/users/ZilvinasKucinskas/repos","events_url":"https://api.github.com/users/ZilvinasKucinskas/events{/privacy}","received_events_url":"https://api.github.com/users/ZilvinasKucinskas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-25T19:29:56Z","updated_at":"2020-03-25T19:29:56Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4510","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4510/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4510/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4510/events","html_url":"https://github.com/sidekiq/sidekiq/issues/4510","id":587938305,"node_id":"MDU6SXNzdWU1ODc5MzgzMDU=","number":4510,"title":"6.0.6 requires running real Redis instance in test / CI environment","user":{"login":"ZilvinasKucinskas","id":3614693,"node_id":"MDQ6VXNlcjM2MTQ2OTM=","avatar_url":"https://avatars.githubusercontent.com/u/3614693?v=4","gravatar_id":"","url":"https://api.github.com/users/ZilvinasKucinskas","html_url":"https://github.com/ZilvinasKucinskas","followers_url":"https://api.github.com/users/ZilvinasKucinskas/followers","following_url":"https://api.github.com/users/ZilvinasKucinskas/following{/other_user}","gists_url":"https://api.github.com/users/ZilvinasKucinskas/gists{/gist_id}","starred_url":"https://api.github.com/users/ZilvinasKucinskas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZilvinasKucinskas/subscriptions","organizations_url":"https://api.github.com/users/ZilvinasKucinskas/orgs","repos_url":"https://api.github.com/users/ZilvinasKucinskas/repos","events_url":"https://api.github.com/users/ZilvinasKucinskas/events{/privacy}","received_events_url":"https://api.github.com/users/ZilvinasKucinskas/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-03-25T19:29:56Z","updated_at":"2020-03-25T19:43:04Z","closed_at":"2020-03-25T19:43:03Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3195124,"node_id":"MDEwOlJlcG9zaXRvcnkzMTk1MTI0","name":"sidekiq","full_name":"sidekiq/sidekiq","private":false,"owner":{"login":"sidekiq","id":124714131,"node_id":"O_kgDOB278kw","avatar_url":"https://avatars.githubusercontent.com/u/124714131?v=4","gravatar_id":"","url":"https://api.github.com/users/sidekiq","html_url":"https://github.com/sidekiq","followers_url":"https://api.github.com/users/sidekiq/followers","following_url":"https://api.github.com/users/sidekiq/following{/other_user}","gists_url":"https://api.github.com/users/sidekiq/gists{/gist_id}","starred_url":"https://api.github.com/users/sidekiq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidekiq/subscriptions","organizations_url":"https://api.github.com/users/sidekiq/orgs","repos_url":"https://api.github.com/users/sidekiq/repos","events_url":"https://api.github.com/users/sidekiq/events{/privacy}","received_events_url":"https://api.github.com/users/sidekiq/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sidekiq/sidekiq","description":"Simple, efficient background processing for Ruby","fork":false,"url":"https://api.github.com/repos/sidekiq/sidekiq","forks_url":"https://api.github.com/repos/sidekiq/sidekiq/forks","keys_url":"https://api.github.com/repos/sidekiq/sidekiq/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sidekiq/sidekiq/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sidekiq/sidekiq/teams","hooks_url":"https://api.github.com/repos/sidekiq/sidekiq/hooks","issue_events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events{/number}","events_url":"https://api.github.com/repos/sidekiq/sidekiq/events","assignees_url":"https://api.github.com/repos/sidekiq/sidekiq/assignees{/user}","branches_url":"https://api.github.com/repos/sidekiq/sidekiq/branches{/branch}","tags_url":"https://api.github.com/repos/sidekiq/sidekiq/tags","blobs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sidekiq/sidekiq/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/refs{/sha}","trees_url":"https://api.github.com/repos/sidekiq/sidekiq/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sidekiq/sidekiq/statuses/{sha}","languages_url":"https://api.github.com/repos/sidekiq/sidekiq/languages","stargazers_url":"https://api.github.com/repos/sidekiq/sidekiq/stargazers","contributors_url":"https://api.github.com/repos/sidekiq/sidekiq/contributors","subscribers_url":"https://api.github.com/repos/sidekiq/sidekiq/subscribers","subscription_url":"https://api.github.com/repos/sidekiq/sidekiq/subscription","commits_url":"https://api.github.com/repos/sidekiq/sidekiq/commits{/sha}","git_commits_url":"https://api.github.com/repos/sidekiq/sidekiq/git/commits{/sha}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/comments{/number}","issue_comment_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments{/number}","contents_url":"https://api.github.com/repos/sidekiq/sidekiq/contents/{+path}","compare_url":"https://api.github.com/repos/sidekiq/sidekiq/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sidekiq/sidekiq/merges","archive_url":"https://api.github.com/repos/sidekiq/sidekiq/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sidekiq/sidekiq/downloads","issues_url":"https://api.github.com/repos/sidekiq/sidekiq/issues{/number}","pulls_url":"https://api.github.com/repos/sidekiq/sidekiq/pulls{/number}","milestones_url":"https://api.github.com/repos/sidekiq/sidekiq/milestones{/number}","notifications_url":"https://api.github.com/repos/sidekiq/sidekiq/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/labels{/name}","releases_url":"https://api.github.com/repos/sidekiq/sidekiq/releases{/id}","deployments_url":"https://api.github.com/repos/sidekiq/sidekiq/deployments","created_at":"2012-01-16T23:17:27Z","updated_at":"2025-11-09T20:20:41Z","pushed_at":"2025-11-07T17:29:44Z","git_url":"git://github.com/sidekiq/sidekiq.git","ssh_url":"git@github.com:sidekiq/sidekiq.git","clone_url":"https://github.com/sidekiq/sidekiq.git","svn_url":"https://github.com/sidekiq/sidekiq","homepage":"https://sidekiq.org","size":14680,"stargazers_count":13447,"watchers_count":13447,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2471,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["background-jobs","jobs","ruby","sidekiq"],"visibility":"public","forks":2471,"open_issues":40,"watchers":13447,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Issue**\r\n\r\nTests and CI environment should not require running a real instance of Redis.\r\n\r\n**Likely caused by PR/Issue:**\r\n\r\n- https://github.com/mperham/sidekiq/issues/4498\r\n- https://github.com/mperham/sidekiq/pull/4502\r\n\r\n**Versions**\r\n\r\nRuby version: 2.6.3\r\nSidekiq version: 6.0.6\r\n\r\n**Full stack trace:**\r\n\r\n```\r\n#!/bin/bash -eo pipefail\r\nbundle exec rspec\r\n...........................................................................................................................................................................................................................................................\r\n\r\nFinished in 19.57 seconds (files took 1.83 seconds to load)\r\n251 examples, 0 failures\r\n\r\nTraceback (most recent call last):\r\n\t33: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq/launcher.rb:103:in `flush_stats'\r\n\t32: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq.rb:94:in `redis'\r\n\t31: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:61:in `with'\r\n\t30: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:61:in `handle_interrupt'\r\n\t29: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:64:in `block in with'\r\n\t28: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:64:in `handle_interrupt'\r\n\t27: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:65:in `block (2 levels) in with'\r\n\t26: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq.rb:97:in `block in redis'\r\n\t25: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq/launcher.rb:104:in `block in flush_stats'\r\n\t24: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:2411:in `pipelined'\r\n\t23: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:52:in `synchronize'\r\n\t22: from /usr/local/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\r\n\t21: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:52:in `block in synchronize'\r\n\t20: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:2416:in `block in pipelined'\r\n\t19: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:162:in `call_pipeline'\r\n\t18: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:306:in `with_reconnect'\r\n\t17: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:164:in `block in call_pipeline'\r\n\t16: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:196:in `call_pipelined'\r\n\t15: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:230:in `process'\r\n\t14: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:319:in `logging'\r\n\t13: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:231:in `block in process'\r\n\t12: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:381:in `ensure_connected'\r\n\t11: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:105:in `connect'\r\n\t10: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:306:in `with_reconnect'\r\n\t 9: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:106:in `block in connect'\r\n\t 8: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:349:in `establish_connection'\r\n\t 7: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:317:in `connect'\r\n\t 6: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:218:in `connect'\r\n\t 5: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:218:in `each_with_index'\r\n\t 4: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:218:in `each'\r\n\t 3: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:220:in `block in connect'\r\n\t 2: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:180:in `connect_addrinfo'\r\n\t 1: from /usr/local/lib/ruby/2.6.0/socket.rb:1213:in `connect_nonblock'\r\n/usr/local/lib/ruby/2.6.0/socket.rb:1213:in `__connect_nonblock': Operation now in progress - connect(2) would block (IO::EINPROGRESSWaitWritable)\r\n\t34: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq/launcher.rb:103:in `flush_stats'\r\n\t33: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq.rb:94:in `redis'\r\n\t32: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:61:in `with'\r\n\t31: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:61:in `handle_interrupt'\r\n\t30: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:64:in `block in with'\r\n\t29: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:64:in `handle_interrupt'\r\n\t28: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:65:in `block (2 levels) in with'\r\n\t27: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq.rb:97:in `block in redis'\r\n\t26: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq/launcher.rb:104:in `block in flush_stats'\r\n\t25: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:2411:in `pipelined'\r\n\t24: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:52:in `synchronize'\r\n\t23: from /usr/local/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\r\n\t22: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:52:in `block in synchronize'\r\n\t21: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:2416:in `block in pipelined'\r\n\t20: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:162:in `call_pipeline'\r\n\t19: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:306:in `with_reconnect'\r\n\t18: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:164:in `block in call_pipeline'\r\n\t17: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:196:in `call_pipelined'\r\n\t16: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:230:in `process'\r\n\t15: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:319:in `logging'\r\n\t14: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:231:in `block in process'\r\n\t13: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:381:in `ensure_connected'\r\n\t12: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:105:in `connect'\r\n\t11: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:306:in `with_reconnect'\r\n\t10: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:106:in `block in connect'\r\n\t 9: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:349:in `establish_connection'\r\n\t 8: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:317:in `connect'\r\n\t 7: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:218:in `connect'\r\n\t 6: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:218:in `each_with_index'\r\n\t 5: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:218:in `each'\r\n\t 4: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:220:in `block in connect'\r\n\t 3: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:179:in `connect_addrinfo'\r\n\t 2: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/connection/ruby.rb:187:in `rescue in connect_addrinfo'\r\n\t 1: from /usr/local/lib/ruby/2.6.0/socket.rb:1213:in `connect_nonblock'\r\n/usr/local/lib/ruby/2.6.0/socket.rb:1213:in `__connect_nonblock': Connection refused - connect(2) for 127.0.0.1:6379 (Errno::ECONNREFUSED)\r\n\t26: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq/launcher.rb:103:in `flush_stats'\r\n\t25: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq.rb:94:in `redis'\r\n\t24: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:61:in `with'\r\n\t23: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:61:in `handle_interrupt'\r\n\t22: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:64:in `block in with'\r\n\t21: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:64:in `handle_interrupt'\r\n\t20: from /root/project/vendor/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:65:in `block (2 levels) in with'\r\n\t19: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq.rb:97:in `block in redis'\r\n\t18: from /root/project/vendor/bundle/ruby/2.6.0/gems/sidekiq-6.0.6/lib/sidekiq/launcher.rb:104:in `block in flush_stats'\r\n\t17: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:2411:in `pipelined'\r\n\t16: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:52:in `synchronize'\r\n\t15: from /usr/local/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\r\n\t14: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:52:in `block in synchronize'\r\n\t13: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis.rb:2416:in `block in pipelined'\r\n\t12: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:162:in `call_pipeline'\r\n\t11: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:306:in `with_reconnect'\r\n\t10: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:164:in `block in call_pipeline'\r\n\t 9: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:196:in `call_pipelined'\r\n\t 8: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:230:in `process'\r\n\t 7: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:319:in `logging'\r\n\t 6: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:231:in `block in process'\r\n\t 5: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:381:in `ensure_connected'\r\n\t 4: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:105:in `connect'\r\n\t 3: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:306:in `with_reconnect'\r\n\t 2: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:106:in `block in connect'\r\n\t 1: from /root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:343:in `establish_connection'\r\n/root/project/vendor/bundle/ruby/2.6.0/gems/redis-4.1.3/lib/redis/client.rb:362:in `rescue in establish_connection': Error connecting to Redis on 127.0.0.1:6379 (Errno::ECONNREFUSED) (Redis::CannotConnectError)\r\n\r\nExited with code exit status 1\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4510/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":12683523022,"node_id":"REFE_lADOADDA9M4i0GBqzwAAAALz_zPO","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/12683523022","actor":{"login":"jasonpenny","id":6033,"node_id":"MDQ6VXNlcjYwMzM=","avatar_url":"https://avatars.githubusercontent.com/u/6033?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonpenny","html_url":"https://github.com/jasonpenny","followers_url":"https://api.github.com/users/jasonpenny/followers","following_url":"https://api.github.com/users/jasonpenny/following{/other_user}","gists_url":"https://api.github.com/users/jasonpenny/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonpenny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonpenny/subscriptions","organizations_url":"https://api.github.com/users/jasonpenny/orgs","repos_url":"https://api.github.com/users/jasonpenny/repos","events_url":"https://api.github.com/users/jasonpenny/events{/privacy}","received_events_url":"https://api.github.com/users/jasonpenny/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4540903dd41da7d66bb3a2789d6ec5b5757103e4","commit_url":"https://api.github.com/repos/Appboy/sidekiq/commits/4540903dd41da7d66bb3a2789d6ec5b5757103e4","created_at":"2024-05-02T13:39:46Z","performed_via_github_app":null}]