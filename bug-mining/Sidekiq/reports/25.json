{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/347","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/347/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/347/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/347/events","html_url":"https://github.com/sidekiq/sidekiq/issues/347","id":6202290,"node_id":"MDU6SXNzdWU2MjAyMjkw","number":347,"title":"Manager#processor_died (2.1.1)","user":{"login":"bdmac","id":47326,"node_id":"MDQ6VXNlcjQ3MzI2","avatar_url":"https://avatars.githubusercontent.com/u/47326?v=4","gravatar_id":"","url":"https://api.github.com/users/bdmac","html_url":"https://github.com/bdmac","followers_url":"https://api.github.com/users/bdmac/followers","following_url":"https://api.github.com/users/bdmac/following{/other_user}","gists_url":"https://api.github.com/users/bdmac/gists{/gist_id}","starred_url":"https://api.github.com/users/bdmac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdmac/subscriptions","organizations_url":"https://api.github.com/users/bdmac/orgs","repos_url":"https://api.github.com/users/bdmac/repos","events_url":"https://api.github.com/users/bdmac/events{/privacy}","received_events_url":"https://api.github.com/users/bdmac/received_events","type":"User","user_view_type":"public","site_admin":true},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2012-08-13T21:10:17Z","updated_at":"2012-08-29T05:33:14Z","closed_at":"2012-08-15T16:08:07Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm trying to convert an app over to Sidekiq from Resque.  Currently running against 2.1.1 on Heroku cedar (Ruby 1.9.3).  Testing the switch to Sidekiq on our staging server is showing failures along the lines of:\n\n```\n2012-08-13T20:05:00+00:00 app[worker.1]: 2012-08-13T20:05:00Z 2 TID-nnl0s INFO: Booting sidekiq 2.1.1 with Redis at redis://dogfish.redistogo.com:9330/0\n2012-08-13T20:05:00+00:00 app[worker.1]: 2012-08-13T20:05:00Z 2 TID-nnl0s INFO: Running in ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]\n....\n2012-08-13T20:09:55+00:00 app[worker.1]: 2012-08-13T20:09:55Z 2 TID-nnl0s WARN: {:context=>\"Manager#processor_died died\"}\n2012-08-13T20:09:55+00:00 app[worker.1]: 2012-08-13T20:09:55Z 2 TID-nnl0s WARN: task was terminated\n2012-08-13T20:09:55+00:00 app[worker.1]: 2012-08-13T20:09:55Z 2 TID-nnl0s WARN: /app/vendor/bundle/ruby/1.9.1/gems/celluloid-0.11.1/lib/celluloid/task.rb:23:in `suspend'\n2012-08-13T20:09:55+00:00 app[worker.1]: /app/vendor/bundle/ruby/1.9.1/gems/celluloid-0.11.1/lib/celluloid/actor.rb:65:in `call'\n2012-08-13T20:09:55+00:00 app[worker.1]: /app/vendor/bundle/ruby/1.9.1/gems/celluloid-0.11.1/lib/celluloid/actor_proxy.rb:100:in `method_missing'\n2012-08-13T20:09:55+00:00 app[worker.1]: /app/vendor/bundle/ruby/1.9.1/gems/celluloid-0.11.1/lib/celluloid.rb:119:in `new_link'\n2012-08-13T20:09:55+00:00 app[worker.1]: /app/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.1.1/lib/sidekiq/manager.rb:91:in `block in processor_died'\n2012-08-13T20:09:55+00:00 app[worker.1]: /app/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.1.1/lib/sidekiq/util.rb:24:in `watchdog'\n2012-08-13T20:09:55+00:00 app[worker.1]: /app/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.1.1/lib/sidekiq/manager.rb:86:in `processor_died'\n2012-08-13T20:09:55+00:00 app[worker.1]: /app/vendor/bundle/ruby/1.9.1/gems/celluloid-0.11.1/lib/celluloid/actor.rb:265:in `handle_exit_event'\n2012-08-13T20:09:55+00:00 app[worker.1]: /app/vendor/bundle/ruby/1.9.1/gems/celluloid-0.11.1/lib/celluloid/actor.rb:254:in `block in handle_system_event'\n2012-08-13T20:09:55+00:00 app[worker.1]: /app/vendor/bundle/ruby/1.9.1/gems/celluloid-0.11.1/lib/celluloid/task.rb:45:in `block in initialize'\n```\n\nLooking at this now I realize the trace looks very odd since it says \"Running in ruby 1.9.3p194\" and then the traces seem to indicate we're in a 1.9.1 directory structure but I'm gonna chalk that up to Heroku being... Heroku.\n\nI don't know if this is related to the other 2.1.x issues I see or not.  Also not sure what exactly is triggering it.\n\nRolling back to Sidekiq 2.0.3, these messages go away and things seem to work as expected.\n\nFWIW Heroku Procfile looks like:\n\n```\nweb: bundle exec rails server thin -p $PORT\nworker: bundle exec sidekiq -q critical,5 -q activities,4 -q high,3 -q low,2 -q event_scraper -q default\nscheduler: bundle exec clockwork lib/clock.rb\n```\n","closed_by":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/347/timeline","performed_via_github_app":null,"state_reason":"completed"}