[{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/256598659","html_url":"https://github.com/sidekiq/sidekiq/issues/3207#issuecomment-256598659","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3207","id":256598659,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjU5ODY1OQ==","user":{"login":"inkstak","id":474554,"node_id":"MDQ6VXNlcjQ3NDU1NA==","avatar_url":"https://avatars.githubusercontent.com/u/474554?v=4","gravatar_id":"","url":"https://api.github.com/users/inkstak","html_url":"https://github.com/inkstak","followers_url":"https://api.github.com/users/inkstak/followers","following_url":"https://api.github.com/users/inkstak/following{/other_user}","gists_url":"https://api.github.com/users/inkstak/gists{/gist_id}","starred_url":"https://api.github.com/users/inkstak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inkstak/subscriptions","organizations_url":"https://api.github.com/users/inkstak/orgs","repos_url":"https://api.github.com/users/inkstak/repos","events_url":"https://api.github.com/users/inkstak/events{/privacy}","received_events_url":"https://api.github.com/users/inkstak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T09:55:22Z","updated_at":"2016-10-27T09:56:56Z","body":"I got the same problem few weeks ago. But, as I don't remember which bug was the cause, please check both following points:\n\n1 - The `SERVER_NAME` header sent by your webserver (nginx?)\n\nThe new `Sidekiq::Web` is built with `Rack::Builder`, which uses `Rack::URLMap` to map endpoints, which performs a check [here](https://github.com/rack/rack/blob/master/lib/rack/urlmap.rb#L54) between `SERVER_NAME` and `HTTP_HOST` headers.\n\nBe sure that your webserver send you the same value in `SERVER_NAME` and `HTTP_HOST`.\nNginx may be using the catch-all `_` config - [read more](http://nginx.org/en/docs/http/server_names.html)\n\nHeroku already send the good header, for example.\nI had to ask my cloud provider (CleverCloud) to fix it.\n\n2 - Your session cookies\n\nIf you use wildcard domains like me, you may encounter the [duplicate cookie issue](https://github.com/mperham/sidekiq/issues/3180).\n\nLook at you browser console: do you see two cookies for the same domain ?\n\nTo fix it, you may disable the default sessions for `Sidekiq::Web`.\nThe devise's method `authenticate` take the lead to instantiate the session with your Rails session config.\n\n```\n# config/routes.rb\nrequire 'sidekiq/web'\nSidekiq::Web.disable :sessions\n\nMyApp::Application.routes.draw do\n  authenticate :user, lambda {|u| u.admin? } do\n    mount Sidekiq::Web => '/sidekiq'\n  end\nend\n```\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/256598659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"inkstak","id":474554,"node_id":"MDQ6VXNlcjQ3NDU1NA==","avatar_url":"https://avatars.githubusercontent.com/u/474554?v=4","gravatar_id":"","url":"https://api.github.com/users/inkstak","html_url":"https://github.com/inkstak","followers_url":"https://api.github.com/users/inkstak/followers","following_url":"https://api.github.com/users/inkstak/following{/other_user}","gists_url":"https://api.github.com/users/inkstak/gists{/gist_id}","starred_url":"https://api.github.com/users/inkstak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inkstak/subscriptions","organizations_url":"https://api.github.com/users/inkstak/orgs","repos_url":"https://api.github.com/users/inkstak/repos","events_url":"https://api.github.com/users/inkstak/events{/privacy}","received_events_url":"https://api.github.com/users/inkstak/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/258219659","html_url":"https://github.com/sidekiq/sidekiq/issues/3207#issuecomment-258219659","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3207","id":258219659,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODIxOTY1OQ==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-03T17:45:24Z","updated_at":"2016-11-03T17:45:24Z","body":"It would be a big help if you could supply a tiny app which reproduces this issue.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/258219659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":846833611,"node_id":"MDExOkNsb3NlZEV2ZW50ODQ2ODMzNjEx","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/846833611","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"959ab0ad4972f4002944e6308a79f569d2efcbf4","commit_url":"https://api.github.com/repos/sidekiq/sidekiq/commits/959ab0ad4972f4002944e6308a79f569d2efcbf4","created_at":"2016-11-03T18:11:12Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/258227478","html_url":"https://github.com/sidekiq/sidekiq/issues/3207#issuecomment-258227478","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3207","id":258227478,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODIyNzQ3OA==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-03T18:11:39Z","updated_at":"2016-11-03T18:11:39Z","body":"Fixed on master, could you verify please?\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/258227478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/258338294","html_url":"https://github.com/sidekiq/sidekiq/issues/3207#issuecomment-258338294","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3207","id":258338294,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODMzODI5NA==","user":{"login":"davidstosik","id":816901,"node_id":"MDQ6VXNlcjgxNjkwMQ==","avatar_url":"https://avatars.githubusercontent.com/u/816901?v=4","gravatar_id":"","url":"https://api.github.com/users/davidstosik","html_url":"https://github.com/davidstosik","followers_url":"https://api.github.com/users/davidstosik/followers","following_url":"https://api.github.com/users/davidstosik/following{/other_user}","gists_url":"https://api.github.com/users/davidstosik/gists{/gist_id}","starred_url":"https://api.github.com/users/davidstosik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidstosik/subscriptions","organizations_url":"https://api.github.com/users/davidstosik/orgs","repos_url":"https://api.github.com/users/davidstosik/repos","events_url":"https://api.github.com/users/davidstosik/events{/privacy}","received_events_url":"https://api.github.com/users/davidstosik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-04T03:42:57Z","updated_at":"2016-11-04T03:42:57Z","body":"@mperham Thank you. Unfortunately, this is still not working in my initial configuration.\nI'd like to inform you though that this is not a problem for me anymore, as the issue seems to have vanished after a general update of the gems we're using (most noticeable is updating Rails from 4.0.13 to 4.2.7.1).\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/258338294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"davidstosik","id":816901,"node_id":"MDQ6VXNlcjgxNjkwMQ==","avatar_url":"https://avatars.githubusercontent.com/u/816901?v=4","gravatar_id":"","url":"https://api.github.com/users/davidstosik","html_url":"https://github.com/davidstosik","followers_url":"https://api.github.com/users/davidstosik/followers","following_url":"https://api.github.com/users/davidstosik/following{/other_user}","gists_url":"https://api.github.com/users/davidstosik/gists{/gist_id}","starred_url":"https://api.github.com/users/davidstosik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidstosik/subscriptions","organizations_url":"https://api.github.com/users/davidstosik/orgs","repos_url":"https://api.github.com/users/davidstosik/repos","events_url":"https://api.github.com/users/davidstosik/events{/privacy}","received_events_url":"https://api.github.com/users/davidstosik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":847399433,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODQ3Mzk5NDMz","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/847399433","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-11-04T03:42:57Z","performed_via_github_app":null},{"id":847399435,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg0NzM5OTQzNQ==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/847399435","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-11-04T03:42:57Z","performed_via_github_app":null}]