{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/869","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/869/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/869/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/869/events","html_url":"https://github.com/sidekiq/sidekiq/issues/869","id":13581898,"node_id":"MDU6SXNzdWUxMzU4MTg5OA==","number":869,"title":"Warnings occurring from retry_jobs middleware","user":{"login":"deckchairhq","id":154131,"node_id":"MDQ6VXNlcjE1NDEzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/154131?v=4","gravatar_id":"","url":"https://api.github.com/users/deckchairhq","html_url":"https://github.com/deckchairhq","followers_url":"https://api.github.com/users/deckchairhq/followers","following_url":"https://api.github.com/users/deckchairhq/following{/other_user}","gists_url":"https://api.github.com/users/deckchairhq/gists{/gist_id}","starred_url":"https://api.github.com/users/deckchairhq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deckchairhq/subscriptions","organizations_url":"https://api.github.com/users/deckchairhq/orgs","repos_url":"https://api.github.com/users/deckchairhq/repos","events_url":"https://api.github.com/users/deckchairhq/events{/privacy}","received_events_url":"https://api.github.com/users/deckchairhq/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2013-04-24T11:30:10Z","updated_at":"2013-05-22T15:55:47Z","closed_at":"2013-04-24T17:53:09Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"My log files are showing the following trace when a job fails:\n\n```\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: 2013-04-24T10:37:15Z 10117 TID-owed9kmd8 WARN: {\"retry\"=>1, \"queue\"=>\"resize_image\", \"timeout\"=>99999180, \"backtrace\"=>false, \"unique\"=>\"all\", \"forever\"=>true, \"expiration\"=>86400, \"class\"=>\"Deckchair::Jobs::ResizeImage\", \"args\"=>[39938, 3], \"jid\"=>\"ebabb33a01f6103b037759cb\", \"error_message\"=>\"Your socket connection to the server was not read from or written to within the timeout period. Idle connections will be closed.\", \"error_class\"=>\"AWS::S3::Errors::RequestTimeout\", \"failed_at\"=>2013-04-24 10:37:15 UTC, \"retry_count\"=>0}\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: 2013-04-24T10:37:15Z 10117 TID-owed9kmd8 WARN: undefined method `to_i' for false:FalseClass\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: 2013-04-24T10:37:15Z 10117 TID-owed9kmd8 WARN: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/middleware/server/retry_jobs.rb:72:in `rescue in call'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/middleware/server/retry_jobs.rb:50:in `call'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:111:in `block in invoke'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/logging.rb:22:in `with_context'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/middleware/server/logging.rb:7:in `call'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:111:in `block in invoke'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:114:in `call'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:114:in `invoke'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/processor.rb:48:in `block (2 levels) in process'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/processor.rb:87:in `stats'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/sidekiq-2.10.1/lib/sidekiq/processor.rb:47:in `block in process'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/celluloid-0.12.4/lib/celluloid/calls.rb:23:in `call'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/celluloid-0.12.4/lib/celluloid/calls.rb:23:in `public_send'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/celluloid-0.12.4/lib/celluloid/calls.rb:23:in `dispatch'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/celluloid-0.12.4/lib/celluloid/future.rb:18:in `block in initialize'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/celluloid-0.12.4/lib/celluloid/internal_pool.rb:48:in `call'\nApr 24 10:37:15 ip-10-149-26-203 sidekiq: /root/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/celluloid-0.12.4/lib/celluloid/internal_pool.rb:48:in `block in create'\n```\n\nIt appears to be the use of to_i causing the issue here: https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/middleware/server/retry_jobs.rb#L72\n\nAnd my job:\n\n``` ruby\nclass ResizeImage\n      include Sidekiq::Worker\n      sidekiq_options queue: :resize_image, timeout: 99999180, retry: 1, backtrace: false, unique: :all, forever: true, expiration: 24 * 60 * 60\nend\n```\n\np.s. Ignore the big timeout value, I throw in a bunch of 9's to ensure it doesn't cull while testing.\n","closed_by":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/869/timeline","performed_via_github_app":null,"state_reason":"completed"}