{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3509","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3509/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3509/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3509/events","html_url":"https://github.com/sidekiq/sidekiq/issues/3509","id":234682139,"node_id":"MDU6SXNzdWUyMzQ2ODIxMzk=","number":3509,"title":"Uninitialized constant Sidekiq::Extensions::DelayedMailer","user":{"login":"carlows","id":4183514,"node_id":"MDQ6VXNlcjQxODM1MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4183514?v=4","gravatar_id":"","url":"https://api.github.com/users/carlows","html_url":"https://github.com/carlows","followers_url":"https://api.github.com/users/carlows/followers","following_url":"https://api.github.com/users/carlows/following{/other_user}","gists_url":"https://api.github.com/users/carlows/gists{/gist_id}","starred_url":"https://api.github.com/users/carlows/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlows/subscriptions","organizations_url":"https://api.github.com/users/carlows/orgs","repos_url":"https://api.github.com/users/carlows/repos","events_url":"https://api.github.com/users/carlows/events{/privacy}","received_events_url":"https://api.github.com/users/carlows/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2017-06-08T23:18:51Z","updated_at":"2018-02-03T12:22:21Z","closed_at":"2017-06-16T15:48:01Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Ruby version: ruby 2.4.1p111\r\nSidekiq / Pro / Enterprise version(s): 5.0.2\r\n\r\nI'm trying to use the delayed extensions to send emails asynchronously:\r\n\r\n```\r\nUserMailer.delay.welcome(user.id)\r\n```\r\n\r\nBut I'm getting this error in Sidekiq when the worker starts:\r\n\r\nError stacktrace:\r\n\r\n```\r\n2017-06-08T23:13:50.217Z 42380 TID-ouzw5lglg Sidekiq::Extensions::DelayedMailer JID-d84c6ccda407da386ab90a00 INFO: start\r\n2017-06-08T23:13:50.219Z 42380 TID-ouzw5lglg Sidekiq::Extensions::DelayedMailer JID-d84c6ccda407da386ab90a00 INFO: fail: 0.002 sec\r\n2017-06-08T23:13:50.219Z 42380 TID-ouzw5lglg WARN: {\"context\":\"Job raised exception\",\"job\":{\"class\":\"Sidekiq::Extensions::DelayedMailer\",\"args\":[\"---\\n- !ruby/class 'UserMailer'\\n- :welcome\\n- - 2646e8d8-d780-4a5b-b94e-8b5dd166f5e5\\n\"],\"retry\":true,\"queue\":\"default\",\"jid\":\"d84c6ccda407da386ab90a00\",\"created_at\":1496963630.216139,\"enqueued_at\":1496963630.216407,\"error_message\":\"uninitialized constant Sidekiq::Extensions::DelayedMailer\",\"error_class\":\"NameError\",\"failed_at\":1496963630.2196102,\"retry_count\":0},\"jobstr\":\"{\\\"class\\\":\\\"Sidekiq::Extensions::DelayedMailer\\\",\\\"args\\\":[\\\"---\\\\n- !ruby/class 'UserMailer'\\\\n- :welcome\\\\n- - 2646e8d8-d780-4a5b-b94e-8b5dd166f5e5\\\\n\\\"],\\\"retry\\\":true,\\\"queue\\\":\\\"default\\\",\\\"jid\\\":\\\"d84c6ccda407da386ab90a00\\\",\\\"created_at\\\":1496963630.216139,\\\"enqueued_at\\\":1496963630.216407}\"}\r\n2017-06-08T23:13:50.220Z 42380 TID-ouzw5lglg WARN: NameError: uninitialized constant Sidekiq::Extensions::DelayedMailer\r\n2017-06-08T23:13:50.220Z 42380 TID-ouzw5lglg WARN: /Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:237:in `block in constantize'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:236:in `each'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:236:in `inject'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:236:in `constantize'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:137:in `block (5 levels) in dispatch'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/rails.rb:42:in `block in call'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/activesupport-5.1.0/lib/active_support/execution_wrapper.rb:85:in `wrap'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/activesupport-5.1.0/lib/active_support/reloader.rb:68:in `block in wrap'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/activesupport-5.1.0/lib/active_support/execution_wrapper.rb:85:in `wrap'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/activesupport-5.1.0/lib/active_support/reloader.rb:67:in `wrap'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/rails.rb:41:in `call'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:215:in `stats'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/job_logger.rb:7:in `call'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/job_retry.rb:72:in `global'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:129:in `block in dispatch'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/logging.rb:44:in `with_context'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/logging.rb:38:in `with_job_hash_context'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:128:in `dispatch'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:168:in `process'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:85:in `process_one'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/processor.rb:73:in `run'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/util.rb:16:in `watchdog'\r\n/Users/hashlabs/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.2/lib/sidekiq/util.rb:25:in `block in safe_thread'\r\n```\r\n\r\nMy initializer:\r\n\r\n```\r\n# config/initializers/sidekiq.rb\r\n\r\nSidekiq::Extensions.enable_delay!\r\n```\r\n\r\nI've updated to the latest version of sidekiq 5.0.2 but I'm still seeing this error, what could be causing it? I'm also using Rails 5.1.0","closed_by":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3509/timeline","performed_via_github_app":null,"state_reason":"completed"}