{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/115","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/115/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/115/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/115/events","html_url":"https://github.com/sidekiq/sidekiq/issues/115","id":4002770,"node_id":"MDU6SXNzdWU0MDAyNzcw","number":115,"title":"Workers crash when processing jobs","user":{"login":"brandonhilkert","id":744212,"node_id":"MDQ6VXNlcjc0NDIxMg==","avatar_url":"https://avatars.githubusercontent.com/u/744212?v=4","gravatar_id":"","url":"https://api.github.com/users/brandonhilkert","html_url":"https://github.com/brandonhilkert","followers_url":"https://api.github.com/users/brandonhilkert/followers","following_url":"https://api.github.com/users/brandonhilkert/following{/other_user}","gists_url":"https://api.github.com/users/brandonhilkert/gists{/gist_id}","starred_url":"https://api.github.com/users/brandonhilkert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brandonhilkert/subscriptions","organizations_url":"https://api.github.com/users/brandonhilkert/orgs","repos_url":"https://api.github.com/users/brandonhilkert/repos","events_url":"https://api.github.com/users/brandonhilkert/events{/privacy}","received_events_url":"https://api.github.com/users/brandonhilkert/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2012-04-06T11:22:56Z","updated_at":"2012-08-01T17:32:11Z","closed_at":"2012-04-06T18:26:19Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I have a job that I run during the night for each of our users. I'm attempting to queue the job with Resque and process them with Sidekiq to ease the transition.\n\nHere is the job: \n\n``` Ruby\nclass MatchesAlgoForAlertsJob\n  include Sidekiq::Worker\n  @queue = :nightly\n\n  def perform(user_id)\n    user = User.find(user_id)\n    Algorithm.matches_algo_for_alerts(user)\n  end\nend\n```\n\nIt appears as though it starts to process them and then dies. The rescue worker has always worked.\n\n```\n2012-04-06T11:20:27Z 28000 TID-ov8hgfl94 INFO: Booting sidekiq 0.11.1 with Redis at localhost:6379\n2012-04-06T11:20:27Z 28000 TID-ov8hgfl94 INFO: Running in ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.3.0]\n2012-04-06T11:20:27Z 28000 TID-ov8gl6gnk INFO: Starting processing, hit Ctrl-C to stop\n2012-04-06T11:20:27Z 28000 TID-ov8hngan8 INFO: MatchesAlgoForAlertsJob MSG-ov8hnw3ts start\n2012-04-06T11:20:27Z 28000 TID-ov8ho2jiw INFO: MatchesAlgoForAlertsJob MSG-ov8hnvrpo start\n2012-04-06T11:20:27Z 28000 TID-ov8ho2yjg INFO: MatchesAlgoForAlertsJob MSG-ov8hnvgak start\n2012-04-06T11:20:27Z 28000 TID-ov8hng57o INFO: MatchesAlgoForAlertsJob MSG-ov8hnuxok start\n2012-04-06T11:20:28Z 28000 TID-ov8hng7dg INFO: MatchesAlgoForAlertsJob MSG-ov8hntf9o start\n2012-04-06T11:20:28Z 28000 TID-ov8hng9j8 INFO: MatchesAlgoForAlertsJob MSG-ov8hnmj10 start\n2012-04-06T11:20:28Z 28000 TID-ov8hnfr9g INFO: MatchesAlgoForAlertsJob MSG-ov8hn7qhw start\n2012-04-06T11:20:28Z 28000 TID-ov8ho2o28 INFO: MatchesAlgoForAlertsJob MSG-ov8hn2y10 start\n2012-04-06T11:20:28Z 28000 TID-ov8ho35hg INFO: MatchesAlgoForAlertsJob MSG-ov8hn47co start\n2012-04-06T11:20:28Z 28000 TID-ov8hnflv0 INFO: MatchesAlgoForAlertsJob MSG-ov8hnrsm0 start\n2012-04-06T11:20:28Z 28000 TID-ov8hnfo0s INFO: MatchesAlgoForAlertsJob MSG-ov8hn92oc start\n2012-04-06T11:20:28Z 28000 TID-ov8hnfq6k INFO: MatchesAlgoForAlertsJob MSG-ov8hn875c start\n2012-04-06T11:20:28Z 28000 TID-ov8gsxceo INFO: MatchesAlgoForAlertsJob MSG-ov8hn7ltk start\n2012-04-06T11:20:28Z 28000 TID-ov8ho2z6s INFO: MatchesAlgoForAlertsJob MSG-ov8hnnp9k start\n2012-04-06T11:20:28Z 28000 TID-ov8ho3a8k INFO: MatchesAlgoForAlertsJob MSG-ov8hnldto start\n2012-04-06T11:20:28Z 28000 TID-ov8gsx70s INFO: MatchesAlgoForAlertsJob MSG-ov8hnaz20 start\n2012-04-06T11:20:28Z 28000 TID-ov8gsx96k INFO: MatchesAlgoForAlertsJob MSG-ov8hnx9go start\n2012-04-06T11:20:28Z 28000 TID-ov8gsxbcc INFO: MatchesAlgoForAlertsJob MSG-ov8hntksk start\n2012-04-06T11:20:28Z 28000 TID-ov8hn83l0 INFO: MatchesAlgoForAlertsJob MSG-ov8hnl9i4 start\n2012-04-06T11:20:28Z 28000 TID-ov8go7ons INFO: MatchesAlgoForAlertsJob MSG-ov8hn8pbs start\n2012-04-06T11:20:28Z 28000 TID-ov8go7qtk INFO: MatchesAlgoForAlertsJob MSG-ov8hn1vrs start\n2012-04-06T11:20:28Z 28000 TID-ov8hnsq7g INFO: MatchesAlgoForAlertsJob MSG-ov8hfgtb4 start\n2012-04-06T11:20:28Z 28000 TID-ov8hnkwcs INFO: MatchesAlgoForAlertsJob MSG-ov8hf9jfw start\n2012-04-06T11:20:28Z 28000 TID-ov8hn7gqs INFO: MatchesAlgoForAlertsJob MSG-ov8hnoabc start\n2012-04-06T11:20:28Z 28000 TID-ov8hgfaj0 INFO: MatchesAlgoForAlertsJob MSG-ov8hnf3ao start\n2012-04-06T11:20:30Z 28000 TID-ov8hngan8 INFO: MatchesAlgoForAlertsJob MSG-ov8hnw3ts done: 2.294 sec\n2012-04-06T11:20:30Z 28000 TID-ov8ho2jiw INFO: MatchesAlgoForAlertsJob MSG-ov8hnvrpo done: 2.291 sec\n2012-04-06T11:20:30Z 28000 TID-ov8hng57o INFO: MatchesAlgoForAlertsJob MSG-ov8hnuxok done: 2.463 sec\n2012-04-06T11:20:30Z 28000 TID-ov8ho2yjg INFO: MatchesAlgoForAlertsJob MSG-ov8hnvgak done: 2.489 sec\n2012-04-06T11:20:30Z 28000 TID-ov8hng7dg INFO: MatchesAlgoForAlertsJob MSG-ov8hntf9o done: 2.438 sec\n2012-04-06T11:20:30Z 28000 TID-ov8hng9j8 INFO: MatchesAlgoForAlertsJob MSG-ov8hnmj10 done: 2.437 sec\n2012-04-06T11:20:30Z 28000 TID-ov8hnfr9g INFO: MatchesAlgoForAlertsJob MSG-ov8hn7qhw done: 2.451 sec\n2012-04-06T11:20:30Z 28000 TID-ov8hnflv0 INFO: MatchesAlgoForAlertsJob MSG-ov8hnrsm0 done: 2.362 sec\n2012-04-06T11:20:30Z 28000 TID-ov8ho35hg INFO: MatchesAlgoForAlertsJob MSG-ov8hn47co done: 2.365 sec\n2012-04-06T11:20:30Z 28000 TID-ov8hnfo0s INFO: MatchesAlgoForAlertsJob MSG-ov8hn92oc done: 2.363 sec\n2012-04-06T11:20:30Z 28000 TID-ov8hnfq6k INFO: MatchesAlgoForAlertsJob MSG-ov8hn875c done: 2.305 sec\n2012-04-06T11:20:30Z 28000 TID-ov8gsx70s INFO: MatchesAlgoForAlertsJob MSG-ov8hnaz20 done: 2.211 sec\n2012-04-06T11:20:30Z 28000 TID-ov8gsxceo INFO: MatchesAlgoForAlertsJob MSG-ov8hn7ltk done: 2.305 sec\n2012-04-06T11:20:30Z 28000 TID-ov8ho2z6s INFO: MatchesAlgoForAlertsJob MSG-ov8hnnp9k done: 2.23 sec\n2012-04-06T11:20:30Z 28000 TID-ov8ho3a8k INFO: MatchesAlgoForAlertsJob MSG-ov8hnldto done: 2.228 sec\n2012-04-06T11:20:30Z 28000 TID-ov8gsx96k INFO: MatchesAlgoForAlertsJob MSG-ov8hnx9go done: 2.222 sec\n2012-04-06T11:20:30Z 28000 TID-ov8gsxbcc INFO: MatchesAlgoForAlertsJob MSG-ov8hntksk done: 2.27 sec\n2012-04-06T11:20:30Z 28000 TID-ov8go7ons INFO: MatchesAlgoForAlertsJob MSG-ov8hn8pbs done: 2.212 sec\n2012-04-06T11:20:30Z 28000 TID-ov8hnsq7g INFO: MatchesAlgoForAlertsJob MSG-ov8hfgtb4 done: 2.144 sec\n2012-04-06T11:20:30Z 28000 TID-ov8hnkwcs INFO: MatchesAlgoForAlertsJob MSG-ov8hf9jfw done: 2.143 sec\n2012-04-06T11:20:30Z 28000 TID-ov8hn7gqs INFO: MatchesAlgoForAlertsJob MSG-ov8hnoabc done: 2.142 sec\n2012-04-06T11:20:30Z 28000 TID-ov8hgfaj0 INFO: MatchesAlgoForAlertsJob MSG-ov8hnf3ao done: 2.141 sec\n2012-04-06T11:20:36Z 28000 TID-ov8ho2o28 INFO: MatchesAlgoForAlertsJob MSG-ov8hn2y10 done: 7.871 sec\n2012-04-06T11:20:39Z 28000 TID-ov8hn83l0 INFO: MatchesAlgoForAlertsJob MSG-ov8hnl9i4 done: 11.071 sec\n/Users/bhilkert/.rbenv/versions/1.9.2-p290/bin/sidekiq:19: stack level too deep (SystemStackError)\n```\n","closed_by":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/115/timeline","performed_via_github_app":null,"state_reason":"completed"}