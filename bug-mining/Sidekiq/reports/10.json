{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/106","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/106/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/106/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/106/events","html_url":"https://github.com/sidekiq/sidekiq/issues/106","id":3930584,"node_id":"MDU6SXNzdWUzOTMwNTg0","number":106,"title":"Deploying first time failed","user":{"login":"bartimaeus","id":403832,"node_id":"MDQ6VXNlcjQwMzgzMg==","avatar_url":"https://avatars.githubusercontent.com/u/403832?v=4","gravatar_id":"","url":"https://api.github.com/users/bartimaeus","html_url":"https://github.com/bartimaeus","followers_url":"https://api.github.com/users/bartimaeus/followers","following_url":"https://api.github.com/users/bartimaeus/following{/other_user}","gists_url":"https://api.github.com/users/bartimaeus/gists{/gist_id}","starred_url":"https://api.github.com/users/bartimaeus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bartimaeus/subscriptions","organizations_url":"https://api.github.com/users/bartimaeus/orgs","repos_url":"https://api.github.com/users/bartimaeus/repos","events_url":"https://api.github.com/users/bartimaeus/events{/privacy}","received_events_url":"https://api.github.com/users/bartimaeus/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2012-04-02T17:25:16Z","updated_at":"2014-03-26T16:30:29Z","closed_at":"2012-04-04T03:00:24Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I added sidekiq to my local dev environment. Everything worked perfectly until I tried to deploy to my ec2 instance. Capistrano tried to run `sidekiqctl quiet` before it ran `bundle install`. This resulted in sidekiqctl not being found and the deploy halted.\n\nI commented out sidekiq/capistrano from my deploy.rb and let one deploy run so that it could bundle everything, then I uncommented the sidekiq/capistrano and it worked just fine.\n\ndeploy.rb\n\n``` ruby\nrequire \"bundler/capistrano\"\nset :keep_releases, 3\n\nset :whenever_command, \"bundle exec whenever\"\nrequire \"whenever/capistrano\"\nrequire \"sidekiq/capistrano\"\n\n...\n\nafter 'deploy:update_code', 'deploy:symlink_shared'\nafter 'deploy:symlink_shared', 'deploy:migrate'\nafter 'deploy:migrate', 'sidekiq:restart'\nafter 'deploy:update', 'deploy:cleanup'\nafter 'deploy:update', 'cache:clear'\n```\n\ncap deploy output\n\n``` ruby\n~/Development/app.bartimae.us[develop*]$ bundle exec cap deploy\nDeploying to Staging Server (bartimae.us)\n  * executing `deploy'\n    triggering before callbacks for `deploy'\n  * executing `sidekiq:quiet'\n  * executing \"cd /var/www/bartimae.us/current && bundle exec sidekiqctl quiet /var/www/bartimae.us/current/tmp/pids/sidekiq.pid\"\n    servers: [\"bartimae.us\"]\n    [bartimae.us] executing command\n    [bartimae.us] rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.3' -c 'cd /var/www/bartimae.us/current && bundle exec sidekiqctl quiet /var/www/bartimae.us/current/tmp/pids/sidekiq.pid'\n*** [err :: bartimae.us] /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/source.rb:574:in `rescue in load_spec_files': git://github.com/mperham/sidekiq.git (at master) is not checked out. Please run `bundle install` (Bundler::GitError)\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/source.rb:572:in `load_spec_files'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/source.rb:372:in `local_specs'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/source.rb:557:in `specs'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/lazy_specification.rb:53:in `__materialize__'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/spec_set.rb:86:in `block in materialize'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/spec_set.rb:83:in `map!'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/spec_set.rb:83:in `materialize'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/definition.rb:127:in `specs'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/definition.rb:172:in `specs_for'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/definition.rb:161:in `requested_specs'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/environment.rb:23:in `requested_specs'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:11:in `setup'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler.rb:107:in `setup'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/setup.rb:17:in `<top (required)>'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n*** [err :: bartimae.us] from /home/bartimaeus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    command finished in 2211ms\nfailed: \"rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.3' -c 'cd /var/www/bartimae.us/current && bundle exec sidekiqctl quiet /var/www/bartimae.us/current/tmp/pids/sidekiq.pid'\" on bartimae.us\n```\n","closed_by":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/106/timeline","performed_via_github_app":null,"state_reason":"completed"}