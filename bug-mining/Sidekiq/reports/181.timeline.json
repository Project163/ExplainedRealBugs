[{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271578385","html_url":"https://github.com/sidekiq/sidekiq/issues/3311#issuecomment-271578385","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3311","id":271578385,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTU3ODM4NQ==","user":{"login":"VvanGemert","id":227966,"node_id":"MDQ6VXNlcjIyNzk2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/227966?v=4","gravatar_id":"","url":"https://api.github.com/users/VvanGemert","html_url":"https://github.com/VvanGemert","followers_url":"https://api.github.com/users/VvanGemert/followers","following_url":"https://api.github.com/users/VvanGemert/following{/other_user}","gists_url":"https://api.github.com/users/VvanGemert/gists{/gist_id}","starred_url":"https://api.github.com/users/VvanGemert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VvanGemert/subscriptions","organizations_url":"https://api.github.com/users/VvanGemert/orgs","repos_url":"https://api.github.com/users/VvanGemert/repos","events_url":"https://api.github.com/users/VvanGemert/events{/privacy}","received_events_url":"https://api.github.com/users/VvanGemert/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T13:43:25Z","updated_at":"2017-01-10T13:43:25Z","body":"Hi trautwein,\r\n\r\nWe have the same issue with ruby 2.4.0 and Sidekiq 4.2.8. Thanks for letting us know downgrading Sidekiq helps. I hope this issue can be resolved.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271578385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"VvanGemert","id":227966,"node_id":"MDQ6VXNlcjIyNzk2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/227966?v=4","gravatar_id":"","url":"https://api.github.com/users/VvanGemert","html_url":"https://github.com/VvanGemert","followers_url":"https://api.github.com/users/VvanGemert/followers","following_url":"https://api.github.com/users/VvanGemert/following{/other_user}","gists_url":"https://api.github.com/users/VvanGemert/gists{/gist_id}","starred_url":"https://api.github.com/users/VvanGemert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VvanGemert/subscriptions","organizations_url":"https://api.github.com/users/VvanGemert/orgs","repos_url":"https://api.github.com/users/VvanGemert/repos","events_url":"https://api.github.com/users/VvanGemert/events{/privacy}","received_events_url":"https://api.github.com/users/VvanGemert/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271582312","html_url":"https://github.com/sidekiq/sidekiq/issues/3311#issuecomment-271582312","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3311","id":271582312,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTU4MjMxMg==","user":{"login":"alfius","id":1590787,"node_id":"MDQ6VXNlcjE1OTA3ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1590787?v=4","gravatar_id":"","url":"https://api.github.com/users/alfius","html_url":"https://github.com/alfius","followers_url":"https://api.github.com/users/alfius/followers","following_url":"https://api.github.com/users/alfius/following{/other_user}","gists_url":"https://api.github.com/users/alfius/gists{/gist_id}","starred_url":"https://api.github.com/users/alfius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfius/subscriptions","organizations_url":"https://api.github.com/users/alfius/orgs","repos_url":"https://api.github.com/users/alfius/repos","events_url":"https://api.github.com/users/alfius/events{/privacy}","received_events_url":"https://api.github.com/users/alfius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T14:01:33Z","updated_at":"2017-01-10T14:01:33Z","body":"Same here!\r\n\r\nRuby version: 2.3.1\r\nRails version: 4.2.7.1 (using Sidekiq through ActiveJob)\r\n\r\nI'm gonna try downgrading. Thanks for the tip!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271582312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alfius","id":1590787,"node_id":"MDQ6VXNlcjE1OTA3ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1590787?v=4","gravatar_id":"","url":"https://api.github.com/users/alfius","html_url":"https://github.com/alfius","followers_url":"https://api.github.com/users/alfius/followers","following_url":"https://api.github.com/users/alfius/following{/other_user}","gists_url":"https://api.github.com/users/alfius/gists{/gist_id}","starred_url":"https://api.github.com/users/alfius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfius/subscriptions","organizations_url":"https://api.github.com/users/alfius/orgs","repos_url":"https://api.github.com/users/alfius/repos","events_url":"https://api.github.com/users/alfius/events{/privacy}","received_events_url":"https://api.github.com/users/alfius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271582794","html_url":"https://github.com/sidekiq/sidekiq/issues/3311#issuecomment-271582794","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3311","id":271582794,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTU4Mjc5NA==","user":{"login":"patricklehmann","id":1053738,"node_id":"MDQ6VXNlcjEwNTM3Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/1053738?v=4","gravatar_id":"","url":"https://api.github.com/users/patricklehmann","html_url":"https://github.com/patricklehmann","followers_url":"https://api.github.com/users/patricklehmann/followers","following_url":"https://api.github.com/users/patricklehmann/following{/other_user}","gists_url":"https://api.github.com/users/patricklehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/patricklehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/patricklehmann/subscriptions","organizations_url":"https://api.github.com/users/patricklehmann/orgs","repos_url":"https://api.github.com/users/patricklehmann/repos","events_url":"https://api.github.com/users/patricklehmann/events{/privacy}","received_events_url":"https://api.github.com/users/patricklehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T14:03:28Z","updated_at":"2017-01-10T14:03:28Z","body":"Just the same here\r\n\r\nruby 2.2.4p230 (2015-12-16 revision 53155) [x86_64-linux]\r\n\r\nRails 4.2.7.1\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271582794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"patricklehmann","id":1053738,"node_id":"MDQ6VXNlcjEwNTM3Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/1053738?v=4","gravatar_id":"","url":"https://api.github.com/users/patricklehmann","html_url":"https://github.com/patricklehmann","followers_url":"https://api.github.com/users/patricklehmann/followers","following_url":"https://api.github.com/users/patricklehmann/following{/other_user}","gists_url":"https://api.github.com/users/patricklehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/patricklehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/patricklehmann/subscriptions","organizations_url":"https://api.github.com/users/patricklehmann/orgs","repos_url":"https://api.github.com/users/patricklehmann/repos","events_url":"https://api.github.com/users/patricklehmann/events{/privacy}","received_events_url":"https://api.github.com/users/patricklehmann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271621949","html_url":"https://github.com/sidekiq/sidekiq/issues/3311#issuecomment-271621949","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3311","id":271621949,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTYyMTk0OQ==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T16:23:39Z","updated_at":"2017-01-10T16:23:39Z","body":"The fix is to add this pair to your client and server Redis config:\r\n\r\n```\r\nconfig.redis = { reconnect_attempts: 1 }\r\n```\r\n\r\nThis effectively restores the pre-4.2.8 behavior.\r\n\r\nAnyone know why the network is so flaky?  Sidekiq assumes a 24/7 connection to Redis.  Could a firewall be closing quiet TCP connections?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271621949/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271801186","html_url":"https://github.com/sidekiq/sidekiq/issues/3311#issuecomment-271801186","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3311","id":271801186,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTgwMTE4Ng==","user":{"login":"trautwein","id":6479522,"node_id":"MDQ6VXNlcjY0Nzk1MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6479522?v=4","gravatar_id":"","url":"https://api.github.com/users/trautwein","html_url":"https://github.com/trautwein","followers_url":"https://api.github.com/users/trautwein/followers","following_url":"https://api.github.com/users/trautwein/following{/other_user}","gists_url":"https://api.github.com/users/trautwein/gists{/gist_id}","starred_url":"https://api.github.com/users/trautwein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trautwein/subscriptions","organizations_url":"https://api.github.com/users/trautwein/orgs","repos_url":"https://api.github.com/users/trautwein/repos","events_url":"https://api.github.com/users/trautwein/events{/privacy}","received_events_url":"https://api.github.com/users/trautwein/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T07:51:01Z","updated_at":"2017-01-11T07:51:01Z","body":"@mperham \r\nThanks! Setting `reconnect_attempts` fixed it for us just as you expected.\r\n\r\nAs for the connection closing, I found the following in the [Heroku blog (from July 28, 2016)](https://blog.heroku.com/real-world-redis-tips):\r\n> ### Set an Appropriate Connection Timeout\r\n> \r\n> By default, Redis will never close idle connections, which means that if you don't close your Redis connections explicitly, you will lock yourself out of your instance.\r\n> \r\n> **To ensure this doesn't happen, Heroku Redis sets a default connection timeout of 300 seconds. This timeout doesnâ€™t apply to non-publish/subscribe clients, and other blocking operations.**\r\n> \r\n> Ensuring that your clients close connections properly, and that your timeout value is appropriate for your application will mean you never run out of connections.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271801186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"trautwein","id":6479522,"node_id":"MDQ6VXNlcjY0Nzk1MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6479522?v=4","gravatar_id":"","url":"https://api.github.com/users/trautwein","html_url":"https://github.com/trautwein","followers_url":"https://api.github.com/users/trautwein/followers","following_url":"https://api.github.com/users/trautwein/following{/other_user}","gists_url":"https://api.github.com/users/trautwein/gists{/gist_id}","starred_url":"https://api.github.com/users/trautwein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trautwein/subscriptions","organizations_url":"https://api.github.com/users/trautwein/orgs","repos_url":"https://api.github.com/users/trautwein/repos","events_url":"https://api.github.com/users/trautwein/events{/privacy}","received_events_url":"https://api.github.com/users/trautwein/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":918706147,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTE4NzA2MTQ3","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/918706147","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-11T07:51:01Z","performed_via_github_app":null},{"id":918706148,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkxODcwNjE0OA==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/918706148","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-11T07:51:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271888149","html_url":"https://github.com/sidekiq/sidekiq/issues/3311#issuecomment-271888149","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3311","id":271888149,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTg4ODE0OQ==","user":{"login":"Geesu","id":170654,"node_id":"MDQ6VXNlcjE3MDY1NA==","avatar_url":"https://avatars.githubusercontent.com/u/170654?v=4","gravatar_id":"","url":"https://api.github.com/users/Geesu","html_url":"https://github.com/Geesu","followers_url":"https://api.github.com/users/Geesu/followers","following_url":"https://api.github.com/users/Geesu/following{/other_user}","gists_url":"https://api.github.com/users/Geesu/gists{/gist_id}","starred_url":"https://api.github.com/users/Geesu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Geesu/subscriptions","organizations_url":"https://api.github.com/users/Geesu/orgs","repos_url":"https://api.github.com/users/Geesu/repos","events_url":"https://api.github.com/users/Geesu/events{/privacy}","received_events_url":"https://api.github.com/users/Geesu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T14:52:17Z","updated_at":"2017-01-11T14:52:17Z","body":"Likely related. We were receiving the following exception (using Passenger): `Redis::InheritedError: Tried to use a connection from a child process without reconnecting. You need to reconnect to Redis after forking or set :inherit_socket to true`","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271888149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Geesu","id":170654,"node_id":"MDQ6VXNlcjE3MDY1NA==","avatar_url":"https://avatars.githubusercontent.com/u/170654?v=4","gravatar_id":"","url":"https://api.github.com/users/Geesu","html_url":"https://github.com/Geesu","followers_url":"https://api.github.com/users/Geesu/followers","following_url":"https://api.github.com/users/Geesu/following{/other_user}","gists_url":"https://api.github.com/users/Geesu/gists{/gist_id}","starred_url":"https://api.github.com/users/Geesu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Geesu/subscriptions","organizations_url":"https://api.github.com/users/Geesu/orgs","repos_url":"https://api.github.com/users/Geesu/repos","events_url":"https://api.github.com/users/Geesu/events{/privacy}","received_events_url":"https://api.github.com/users/Geesu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271948413","html_url":"https://github.com/sidekiq/sidekiq/issues/3311#issuecomment-271948413","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3311","id":271948413,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTk0ODQxMw==","user":{"login":"RavenXce","id":1667694,"node_id":"MDQ6VXNlcjE2Njc2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1667694?v=4","gravatar_id":"","url":"https://api.github.com/users/RavenXce","html_url":"https://github.com/RavenXce","followers_url":"https://api.github.com/users/RavenXce/followers","following_url":"https://api.github.com/users/RavenXce/following{/other_user}","gists_url":"https://api.github.com/users/RavenXce/gists{/gist_id}","starred_url":"https://api.github.com/users/RavenXce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RavenXce/subscriptions","organizations_url":"https://api.github.com/users/RavenXce/orgs","repos_url":"https://api.github.com/users/RavenXce/repos","events_url":"https://api.github.com/users/RavenXce/events{/privacy}","received_events_url":"https://api.github.com/users/RavenXce/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T18:14:10Z","updated_at":"2017-01-11T18:14:10Z","body":"Just to confirm, I also received `Redis::InheritedError` on `4.2.8` with Puma. Reverting to `4.2.7` stopped the exceptions from occurring. I did not try using `reconnect_attempts: 1`.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271948413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"RavenXce","id":1667694,"node_id":"MDQ6VXNlcjE2Njc2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1667694?v=4","gravatar_id":"","url":"https://api.github.com/users/RavenXce","html_url":"https://github.com/RavenXce","followers_url":"https://api.github.com/users/RavenXce/followers","following_url":"https://api.github.com/users/RavenXce/following{/other_user}","gists_url":"https://api.github.com/users/RavenXce/gists{/gist_id}","starred_url":"https://api.github.com/users/RavenXce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RavenXce/subscriptions","organizations_url":"https://api.github.com/users/RavenXce/orgs","repos_url":"https://api.github.com/users/RavenXce/repos","events_url":"https://api.github.com/users/RavenXce/events{/privacy}","received_events_url":"https://api.github.com/users/RavenXce/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271981106","html_url":"https://github.com/sidekiq/sidekiq/issues/3311#issuecomment-271981106","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3311","id":271981106,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTk4MTEwNg==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T20:14:42Z","updated_at":"2017-01-11T20:14:50Z","body":"I don't know what the right answer is.  This change fixed an edge case that can lead to duplicate jobs.  Should we auto-handle networking issues and chance getting duplicate jobs?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/271981106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T20:16:54Z","updated_at":"2017-01-11T20:16:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3303","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3303/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3303/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3303/events","html_url":"https://github.com/sidekiq/sidekiq/issues/3303","id":198362625,"node_id":"MDU6SXNzdWUxOTgzNjI2MjU=","number":3303,"title":"Same job (identical JID) runs twice","user":{"login":"krallin","id":1737686,"node_id":"MDQ6VXNlcjE3Mzc2ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1737686?v=4","gravatar_id":"","url":"https://api.github.com/users/krallin","html_url":"https://github.com/krallin","followers_url":"https://api.github.com/users/krallin/followers","following_url":"https://api.github.com/users/krallin/following{/other_user}","gists_url":"https://api.github.com/users/krallin/gists{/gist_id}","starred_url":"https://api.github.com/users/krallin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krallin/subscriptions","organizations_url":"https://api.github.com/users/krallin/orgs","repos_url":"https://api.github.com/users/krallin/repos","events_url":"https://api.github.com/users/krallin/events{/privacy}","received_events_url":"https://api.github.com/users/krallin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2017-01-02T17:26:29Z","updated_at":"2019-10-26T01:22:42Z","closed_at":"2017-01-09T17:46:46Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3195124,"node_id":"MDEwOlJlcG9zaXRvcnkzMTk1MTI0","name":"sidekiq","full_name":"sidekiq/sidekiq","private":false,"owner":{"login":"sidekiq","id":124714131,"node_id":"O_kgDOB278kw","avatar_url":"https://avatars.githubusercontent.com/u/124714131?v=4","gravatar_id":"","url":"https://api.github.com/users/sidekiq","html_url":"https://github.com/sidekiq","followers_url":"https://api.github.com/users/sidekiq/followers","following_url":"https://api.github.com/users/sidekiq/following{/other_user}","gists_url":"https://api.github.com/users/sidekiq/gists{/gist_id}","starred_url":"https://api.github.com/users/sidekiq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidekiq/subscriptions","organizations_url":"https://api.github.com/users/sidekiq/orgs","repos_url":"https://api.github.com/users/sidekiq/repos","events_url":"https://api.github.com/users/sidekiq/events{/privacy}","received_events_url":"https://api.github.com/users/sidekiq/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sidekiq/sidekiq","description":"Simple, efficient background processing for Ruby","fork":false,"url":"https://api.github.com/repos/sidekiq/sidekiq","forks_url":"https://api.github.com/repos/sidekiq/sidekiq/forks","keys_url":"https://api.github.com/repos/sidekiq/sidekiq/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sidekiq/sidekiq/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sidekiq/sidekiq/teams","hooks_url":"https://api.github.com/repos/sidekiq/sidekiq/hooks","issue_events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events{/number}","events_url":"https://api.github.com/repos/sidekiq/sidekiq/events","assignees_url":"https://api.github.com/repos/sidekiq/sidekiq/assignees{/user}","branches_url":"https://api.github.com/repos/sidekiq/sidekiq/branches{/branch}","tags_url":"https://api.github.com/repos/sidekiq/sidekiq/tags","blobs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sidekiq/sidekiq/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/refs{/sha}","trees_url":"https://api.github.com/repos/sidekiq/sidekiq/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sidekiq/sidekiq/statuses/{sha}","languages_url":"https://api.github.com/repos/sidekiq/sidekiq/languages","stargazers_url":"https://api.github.com/repos/sidekiq/sidekiq/stargazers","contributors_url":"https://api.github.com/repos/sidekiq/sidekiq/contributors","subscribers_url":"https://api.github.com/repos/sidekiq/sidekiq/subscribers","subscription_url":"https://api.github.com/repos/sidekiq/sidekiq/subscription","commits_url":"https://api.github.com/repos/sidekiq/sidekiq/commits{/sha}","git_commits_url":"https://api.github.com/repos/sidekiq/sidekiq/git/commits{/sha}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/comments{/number}","issue_comment_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments{/number}","contents_url":"https://api.github.com/repos/sidekiq/sidekiq/contents/{+path}","compare_url":"https://api.github.com/repos/sidekiq/sidekiq/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sidekiq/sidekiq/merges","archive_url":"https://api.github.com/repos/sidekiq/sidekiq/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sidekiq/sidekiq/downloads","issues_url":"https://api.github.com/repos/sidekiq/sidekiq/issues{/number}","pulls_url":"https://api.github.com/repos/sidekiq/sidekiq/pulls{/number}","milestones_url":"https://api.github.com/repos/sidekiq/sidekiq/milestones{/number}","notifications_url":"https://api.github.com/repos/sidekiq/sidekiq/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/labels{/name}","releases_url":"https://api.github.com/repos/sidekiq/sidekiq/releases{/id}","deployments_url":"https://api.github.com/repos/sidekiq/sidekiq/deployments","created_at":"2012-01-16T23:17:27Z","updated_at":"2025-11-09T20:20:41Z","pushed_at":"2025-11-07T17:29:44Z","git_url":"git://github.com/sidekiq/sidekiq.git","ssh_url":"git@github.com:sidekiq/sidekiq.git","clone_url":"https://github.com/sidekiq/sidekiq.git","svn_url":"https://github.com/sidekiq/sidekiq","homepage":"https://sidekiq.org","size":14680,"stargazers_count":13447,"watchers_count":13447,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2471,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["background-jobs","jobs","ruby","sidekiq"],"visibility":"public","forks":2471,"open_issues":40,"watchers":13447,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi there,\r\n\r\nRuby version: `ruby 2.2.4p230 (2015-12-16 revision 53155) [x86_64-linux]`\r\nSidekiq / Pro / Enterprise version(s): `sidekiq (3.5.0)`\r\n\r\nA little (hopefully useful) context: we're running Sidekiq in a slightly unconventional setup. Sidekiq is used to coordinate jobs across processing clusters that are running in different AWS regions and each run their own Redis instances (we have several hundreds of these).\r\n\r\nOccasionally, these Redis instances may be unreachable or laggy for various reasons:\r\n\r\n- They can be geographically pretty far away\r\n- There's other stuff running on these Redis instances, which can occasionally compete for resources\r\n\r\nBottom line, now and then it might take a little while to enqueue jobs to Redis, such that things time out.\r\n\r\nThis is pretty apparent in our logs: most of the time, it takes 0.25 seconds to enqueue a job, but now and then, it takes ~ 5.25 seconds (5 seconds happens to be the default timeout in redis-rb, which we use).\r\n\r\nUnfortunately, when it does take ~ 5.25 seconds, we end up with the same job (same JID) running twice on the destination instance concurrently. Here are some examples from our logs:\r\n\r\n```\r\n2016-12-28T23:05:45.137Z 14090 TID-m2cek Sweetness::Jobs::Delegate JID-5fe3127779677d1e133d1b40 INFO: start\r\n2016-12-28T23:05:45.160Z 14090 TID-1emhzg Sweetness::Jobs::Delegate JID-5fe3127779677d1e133d1b40 INFO: start\r\n2016-12-28T23:05:46.920Z 14090 TID-1emhzg Sweetness::Jobs::Delegate JID-5fe3127779677d1e133d1b40 INFO: done: 1.761 sec\r\n2016-12-28T23:05:47.052Z 14090 TID-m2cek Sweetness::Jobs::Delegate JID-5fe3127779677d1e133d1b40 INFO: done: 1.916 sec\r\n```\r\n\r\n```\r\n2016-12-28T23:14:19.572Z 18537 TID-fstk8 Sweetness::Jobs::Delegate JID-66a2c3098751a54024b37cb4 INFO: start\r\n2016-12-28T23:14:19.587Z 18537 TID-fgiwo Sweetness::Jobs::Delegate JID-66a2c3098751a54024b37cb4 INFO: start\r\n2016-12-28T23:14:21.296Z 18537 TID-fstk8 Sweetness::Jobs::Delegate JID-66a2c3098751a54024b37cb4 INFO: done: 1.723 sec\r\n2016-12-28T23:14:21.370Z 18537 TID-fgiwo Sweetness::Jobs::Delegate JID-66a2c3098751a54024b37cb4 INFO: done: 1.784 sec\r\n```\r\n\r\n```\r\n2016-12-29T00:47:06.545Z 8580 TID-fasn4 Sweetness::Jobs::Delegate JID-d28199210162a8974746661d INFO: start\r\n2016-12-29T00:47:06.559Z 8580 TID-e73h4 Sweetness::Jobs::Delegate JID-d28199210162a8974746661d INFO: start\r\n2016-12-29T00:47:07.616Z 8580 TID-e73h4 Sweetness::Jobs::Delegate JID-d28199210162a8974746661d INFO: done: 1.057 sec\r\n2016-12-29T00:47:07.906Z 8580 TID-fasn4 Sweetness::Jobs::Delegate JID-d28199210162a8974746661d INFO: done: 1.361 sec\r\n```\r\n\r\nIn each of these instances, the two threads running the same job at the same time are in the same process. I should also mention that retries are disabled here.\r\n\r\nI suspect this is caused by the fact that `redis-rb` automatically re-runs a command when it times out.\r\n\r\nI tried reproducing this locally by using `socat TCP-LISTEN:6379,fork,bind=0.0.0.0,reuseaddr STDOUT` to emulate an unresponsive Redis, and it appears that `redis-rb` will indeed push twice in this scenario (here's the output when I use `Redis.new.lpush('foo', 'bar')`):\r\n\r\n```\r\n*3\r\n$5\r\nlpush\r\n$3\r\nfoo\r\n$3\r\nbar\r\n*3\r\n$5\r\nlpush\r\n$3\r\nfoo\r\n$3\r\nbar\r\n```\r\n\r\n(of course, since Socat posing as Redis is completely unresponsive even after the retry, this will take 10 seconds before timing out on the client side, but the second `*3` line does show up 5 seconds after the first one)\r\n\r\nFor comparison, using `Redis.new(reconnect_attempts: 0).lpush('foo', 'bar')` does throw an error after the 5 seconds timeout, without retrying the `LPUSH` operation a second time.\r\n\r\nWe're planning to deploy the `reconnect_attempts: 0` workaround throughout our infrastructure soon (and we're happy to report whether that solves the issue), but I believe it's a design goal for Sidekiq that the same JID cannot execute concurrently across two workers (from here: https://github.com/mperham/sidekiq/issues/2398), so I thought perhaps you'd like to hear about this failure scenario! (and perhaps you'd want to set `reconnect_attempts` to 0 by default in Sidekiq?).\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3303/reactions","total_count":12,"+1":12,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3303/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":922479341,"node_id":"MDExOkNsb3NlZEV2ZW50OTIyNDc5MzQx","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/922479341","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"f68f235705976f219dcfeec3692f2f32e6e3537c","commit_url":"https://api.github.com/repos/sidekiq/sidekiq/commits/f68f235705976f219dcfeec3692f2f32e6e3537c","created_at":"2017-01-13T16:40:45Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/274129243","html_url":"https://github.com/sidekiq/sidekiq/issues/3311#issuecomment-274129243","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3311","id":274129243,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDEyOTI0Mw==","user":{"login":"Deekor","id":1904267,"node_id":"MDQ6VXNlcjE5MDQyNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1904267?v=4","gravatar_id":"","url":"https://api.github.com/users/Deekor","html_url":"https://github.com/Deekor","followers_url":"https://api.github.com/users/Deekor/followers","following_url":"https://api.github.com/users/Deekor/following{/other_user}","gists_url":"https://api.github.com/users/Deekor/gists{/gist_id}","starred_url":"https://api.github.com/users/Deekor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Deekor/subscriptions","organizations_url":"https://api.github.com/users/Deekor/orgs","repos_url":"https://api.github.com/users/Deekor/repos","events_url":"https://api.github.com/users/Deekor/events{/privacy}","received_events_url":"https://api.github.com/users/Deekor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-20T17:25:56Z","updated_at":"2017-01-20T17:25:56Z","body":"@trautwein for the Heroku environment do we just set\r\n\r\n    config.redis = { reconnect_attempts: 1 }\r\n\r\nin `production.rb`?\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/274129243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Deekor","id":1904267,"node_id":"MDQ6VXNlcjE5MDQyNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1904267?v=4","gravatar_id":"","url":"https://api.github.com/users/Deekor","html_url":"https://github.com/Deekor","followers_url":"https://api.github.com/users/Deekor/followers","following_url":"https://api.github.com/users/Deekor/following{/other_user}","gists_url":"https://api.github.com/users/Deekor/gists{/gist_id}","starred_url":"https://api.github.com/users/Deekor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Deekor/subscriptions","organizations_url":"https://api.github.com/users/Deekor/orgs","repos_url":"https://api.github.com/users/Deekor/repos","events_url":"https://api.github.com/users/Deekor/events{/privacy}","received_events_url":"https://api.github.com/users/Deekor/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":931027972,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTMxMDI3OTcy","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/931027972","actor":{"login":"trautwein","id":6479522,"node_id":"MDQ6VXNlcjY0Nzk1MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6479522?v=4","gravatar_id":"","url":"https://api.github.com/users/trautwein","html_url":"https://github.com/trautwein","followers_url":"https://api.github.com/users/trautwein/followers","following_url":"https://api.github.com/users/trautwein/following{/other_user}","gists_url":"https://api.github.com/users/trautwein/gists{/gist_id}","starred_url":"https://api.github.com/users/trautwein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trautwein/subscriptions","organizations_url":"https://api.github.com/users/trautwein/orgs","repos_url":"https://api.github.com/users/trautwein/repos","events_url":"https://api.github.com/users/trautwein/events{/privacy}","received_events_url":"https://api.github.com/users/trautwein/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-20T17:25:56Z","performed_via_github_app":null},{"id":931027973,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkzMTAyNzk3Mw==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/931027973","actor":{"login":"trautwein","id":6479522,"node_id":"MDQ6VXNlcjY0Nzk1MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6479522?v=4","gravatar_id":"","url":"https://api.github.com/users/trautwein","html_url":"https://github.com/trautwein","followers_url":"https://api.github.com/users/trautwein/followers","following_url":"https://api.github.com/users/trautwein/following{/other_user}","gists_url":"https://api.github.com/users/trautwein/gists{/gist_id}","starred_url":"https://api.github.com/users/trautwein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trautwein/subscriptions","organizations_url":"https://api.github.com/users/trautwein/orgs","repos_url":"https://api.github.com/users/trautwein/repos","events_url":"https://api.github.com/users/trautwein/events{/privacy}","received_events_url":"https://api.github.com/users/trautwein/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-20T17:25:56Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/274132740","html_url":"https://github.com/sidekiq/sidekiq/issues/3311#issuecomment-274132740","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3311","id":274132740,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDEzMjc0MA==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-20T17:40:49Z","updated_at":"2017-01-20T17:40:49Z","body":"@Deekor The problem is fixed in 4.2.9.  Don't configure anything, just upgrade.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/274132740/reactions","total_count":7,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":931046235,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTMxMDQ2MjM1","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/931046235","actor":{"login":"Deekor","id":1904267,"node_id":"MDQ6VXNlcjE5MDQyNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1904267?v=4","gravatar_id":"","url":"https://api.github.com/users/Deekor","html_url":"https://github.com/Deekor","followers_url":"https://api.github.com/users/Deekor/followers","following_url":"https://api.github.com/users/Deekor/following{/other_user}","gists_url":"https://api.github.com/users/Deekor/gists{/gist_id}","starred_url":"https://api.github.com/users/Deekor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Deekor/subscriptions","organizations_url":"https://api.github.com/users/Deekor/orgs","repos_url":"https://api.github.com/users/Deekor/repos","events_url":"https://api.github.com/users/Deekor/events{/privacy}","received_events_url":"https://api.github.com/users/Deekor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-20T17:40:49Z","performed_via_github_app":null},{"id":931046236,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkzMTA0NjIzNg==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/931046236","actor":{"login":"Deekor","id":1904267,"node_id":"MDQ6VXNlcjE5MDQyNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1904267?v=4","gravatar_id":"","url":"https://api.github.com/users/Deekor","html_url":"https://github.com/Deekor","followers_url":"https://api.github.com/users/Deekor/followers","following_url":"https://api.github.com/users/Deekor/following{/other_user}","gists_url":"https://api.github.com/users/Deekor/gists{/gist_id}","starred_url":"https://api.github.com/users/Deekor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Deekor/subscriptions","organizations_url":"https://api.github.com/users/Deekor/orgs","repos_url":"https://api.github.com/users/Deekor/repos","events_url":"https://api.github.com/users/Deekor/events{/privacy}","received_events_url":"https://api.github.com/users/Deekor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-20T17:40:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/274136683","html_url":"https://github.com/sidekiq/sidekiq/issues/3311#issuecomment-274136683","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3311","id":274136683,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDEzNjY4Mw==","user":{"login":"trautwein","id":6479522,"node_id":"MDQ6VXNlcjY0Nzk1MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6479522?v=4","gravatar_id":"","url":"https://api.github.com/users/trautwein","html_url":"https://github.com/trautwein","followers_url":"https://api.github.com/users/trautwein/followers","following_url":"https://api.github.com/users/trautwein/following{/other_user}","gists_url":"https://api.github.com/users/trautwein/gists{/gist_id}","starred_url":"https://api.github.com/users/trautwein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trautwein/subscriptions","organizations_url":"https://api.github.com/users/trautwein/orgs","repos_url":"https://api.github.com/users/trautwein/repos","events_url":"https://api.github.com/users/trautwein/events{/privacy}","received_events_url":"https://api.github.com/users/trautwein/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-20T17:57:19Z","updated_at":"2017-01-20T17:57:19Z","body":"@mperham By the way, thanks for reverting/fixing this!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/274136683/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"trautwein","id":6479522,"node_id":"MDQ6VXNlcjY0Nzk1MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6479522?v=4","gravatar_id":"","url":"https://api.github.com/users/trautwein","html_url":"https://github.com/trautwein","followers_url":"https://api.github.com/users/trautwein/followers","following_url":"https://api.github.com/users/trautwein/following{/other_user}","gists_url":"https://api.github.com/users/trautwein/gists{/gist_id}","starred_url":"https://api.github.com/users/trautwein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trautwein/subscriptions","organizations_url":"https://api.github.com/users/trautwein/orgs","repos_url":"https://api.github.com/users/trautwein/repos","events_url":"https://api.github.com/users/trautwein/events{/privacy}","received_events_url":"https://api.github.com/users/trautwein/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":931066589,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTMxMDY2NTg5","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/931066589","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-20T17:57:19Z","performed_via_github_app":null},{"id":931066590,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkzMTA2NjU5MA==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/931066590","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-20T17:57:19Z","performed_via_github_app":null},{"actor":{"login":"nixpulvis","id":715947,"node_id":"MDQ6VXNlcjcxNTk0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/715947?v=4","gravatar_id":"","url":"https://api.github.com/users/nixpulvis","html_url":"https://github.com/nixpulvis","followers_url":"https://api.github.com/users/nixpulvis/followers","following_url":"https://api.github.com/users/nixpulvis/following{/other_user}","gists_url":"https://api.github.com/users/nixpulvis/gists{/gist_id}","starred_url":"https://api.github.com/users/nixpulvis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nixpulvis/subscriptions","organizations_url":"https://api.github.com/users/nixpulvis/orgs","repos_url":"https://api.github.com/users/nixpulvis/repos","events_url":"https://api.github.com/users/nixpulvis/events{/privacy}","received_events_url":"https://api.github.com/users/nixpulvis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-05T20:51:53Z","updated_at":"2018-06-05T20:51:53Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/2398","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/2398/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/2398/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/2398/events","html_url":"https://github.com/sidekiq/sidekiq/issues/2398","id":89646484,"node_id":"MDU6SXNzdWU4OTY0NjQ4NA==","number":2398,"title":"Can a job be executed twice at the same time?","user":{"login":"edgarjs","id":12443,"node_id":"MDQ6VXNlcjEyNDQz","avatar_url":"https://avatars.githubusercontent.com/u/12443?v=4","gravatar_id":"","url":"https://api.github.com/users/edgarjs","html_url":"https://github.com/edgarjs","followers_url":"https://api.github.com/users/edgarjs/followers","following_url":"https://api.github.com/users/edgarjs/following{/other_user}","gists_url":"https://api.github.com/users/edgarjs/gists{/gist_id}","starred_url":"https://api.github.com/users/edgarjs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edgarjs/subscriptions","organizations_url":"https://api.github.com/users/edgarjs/orgs","repos_url":"https://api.github.com/users/edgarjs/repos","events_url":"https://api.github.com/users/edgarjs/events{/privacy}","received_events_url":"https://api.github.com/users/edgarjs/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2015-06-19T19:50:28Z","updated_at":"2018-06-05T21:02:15Z","closed_at":"2015-06-19T19:59:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3195124,"node_id":"MDEwOlJlcG9zaXRvcnkzMTk1MTI0","name":"sidekiq","full_name":"sidekiq/sidekiq","private":false,"owner":{"login":"sidekiq","id":124714131,"node_id":"O_kgDOB278kw","avatar_url":"https://avatars.githubusercontent.com/u/124714131?v=4","gravatar_id":"","url":"https://api.github.com/users/sidekiq","html_url":"https://github.com/sidekiq","followers_url":"https://api.github.com/users/sidekiq/followers","following_url":"https://api.github.com/users/sidekiq/following{/other_user}","gists_url":"https://api.github.com/users/sidekiq/gists{/gist_id}","starred_url":"https://api.github.com/users/sidekiq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidekiq/subscriptions","organizations_url":"https://api.github.com/users/sidekiq/orgs","repos_url":"https://api.github.com/users/sidekiq/repos","events_url":"https://api.github.com/users/sidekiq/events{/privacy}","received_events_url":"https://api.github.com/users/sidekiq/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sidekiq/sidekiq","description":"Simple, efficient background processing for Ruby","fork":false,"url":"https://api.github.com/repos/sidekiq/sidekiq","forks_url":"https://api.github.com/repos/sidekiq/sidekiq/forks","keys_url":"https://api.github.com/repos/sidekiq/sidekiq/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sidekiq/sidekiq/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sidekiq/sidekiq/teams","hooks_url":"https://api.github.com/repos/sidekiq/sidekiq/hooks","issue_events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events{/number}","events_url":"https://api.github.com/repos/sidekiq/sidekiq/events","assignees_url":"https://api.github.com/repos/sidekiq/sidekiq/assignees{/user}","branches_url":"https://api.github.com/repos/sidekiq/sidekiq/branches{/branch}","tags_url":"https://api.github.com/repos/sidekiq/sidekiq/tags","blobs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sidekiq/sidekiq/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/refs{/sha}","trees_url":"https://api.github.com/repos/sidekiq/sidekiq/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sidekiq/sidekiq/statuses/{sha}","languages_url":"https://api.github.com/repos/sidekiq/sidekiq/languages","stargazers_url":"https://api.github.com/repos/sidekiq/sidekiq/stargazers","contributors_url":"https://api.github.com/repos/sidekiq/sidekiq/contributors","subscribers_url":"https://api.github.com/repos/sidekiq/sidekiq/subscribers","subscription_url":"https://api.github.com/repos/sidekiq/sidekiq/subscription","commits_url":"https://api.github.com/repos/sidekiq/sidekiq/commits{/sha}","git_commits_url":"https://api.github.com/repos/sidekiq/sidekiq/git/commits{/sha}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/comments{/number}","issue_comment_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments{/number}","contents_url":"https://api.github.com/repos/sidekiq/sidekiq/contents/{+path}","compare_url":"https://api.github.com/repos/sidekiq/sidekiq/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sidekiq/sidekiq/merges","archive_url":"https://api.github.com/repos/sidekiq/sidekiq/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sidekiq/sidekiq/downloads","issues_url":"https://api.github.com/repos/sidekiq/sidekiq/issues{/number}","pulls_url":"https://api.github.com/repos/sidekiq/sidekiq/pulls{/number}","milestones_url":"https://api.github.com/repos/sidekiq/sidekiq/milestones{/number}","notifications_url":"https://api.github.com/repos/sidekiq/sidekiq/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/labels{/name}","releases_url":"https://api.github.com/repos/sidekiq/sidekiq/releases{/id}","deployments_url":"https://api.github.com/repos/sidekiq/sidekiq/deployments","created_at":"2012-01-16T23:17:27Z","updated_at":"2025-11-09T20:20:41Z","pushed_at":"2025-11-07T17:29:44Z","git_url":"git://github.com/sidekiq/sidekiq.git","ssh_url":"git@github.com:sidekiq/sidekiq.git","clone_url":"https://github.com/sidekiq/sidekiq.git","svn_url":"https://github.com/sidekiq/sidekiq","homepage":"https://sidekiq.org","size":14680,"stargazers_count":13447,"watchers_count":13447,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2471,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["background-jobs","jobs","ruby","sidekiq"],"visibility":"public","forks":2471,"open_issues":40,"watchers":13447,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I've been reading the features of sidekiq, and about concurrency and idempotent jobs. However it's still not clear for me the level of concurrency sidekiq does work with.\n\nMy problem is that I've seen a couple of jobs being executed twice even if the first one succeeds. I even think that somes time a single job gets grabbed at the same time by two different workers (with like ms of difference between each other).\n\nAs I said, I understand that sidekiq can process a single job multiple times, but I'm not sure if it's expected to be processed **at the same time**.\n\nThank you.\n","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/2398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/2398/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":13766717249,"node_id":"REFE_lADOADDA9M4L6JU4zwAAAAM0j29B","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/13766717249","actor":{"login":"AlexSc","id":98665,"node_id":"MDQ6VXNlcjk4NjY1","avatar_url":"https://avatars.githubusercontent.com/u/98665?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexSc","html_url":"https://github.com/AlexSc","followers_url":"https://api.github.com/users/AlexSc/followers","following_url":"https://api.github.com/users/AlexSc/following{/other_user}","gists_url":"https://api.github.com/users/AlexSc/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexSc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexSc/subscriptions","organizations_url":"https://api.github.com/users/AlexSc/orgs","repos_url":"https://api.github.com/users/AlexSc/repos","events_url":"https://api.github.com/users/AlexSc/events{/privacy}","received_events_url":"https://api.github.com/users/AlexSc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f68f235705976f219dcfeec3692f2f32e6e3537c","commit_url":"https://api.github.com/repos/GoCarrot/sidekiq/commits/f68f235705976f219dcfeec3692f2f32e6e3537c","created_at":"2024-08-05T16:13:30Z","performed_via_github_app":null}]