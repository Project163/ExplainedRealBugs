[{"id":9102290,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkxMDIyOTA=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/9102290","actor":{"login":"davidcelis","id":36873,"node_id":"MDQ6VXNlcjM2ODcz","avatar_url":"https://avatars.githubusercontent.com/u/36873?v=4","gravatar_id":"","url":"https://api.github.com/users/davidcelis","html_url":"https://github.com/davidcelis","followers_url":"https://api.github.com/users/davidcelis/followers","following_url":"https://api.github.com/users/davidcelis/following{/other_user}","gists_url":"https://api.github.com/users/davidcelis/gists{/gist_id}","starred_url":"https://api.github.com/users/davidcelis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidcelis/subscriptions","organizations_url":"https://api.github.com/users/davidcelis/orgs","repos_url":"https://api.github.com/users/davidcelis/repos","events_url":"https://api.github.com/users/davidcelis/events{/privacy}","received_events_url":"https://api.github.com/users/davidcelis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-02-07T07:38:12Z","performed_via_github_app":null},{"id":9111585,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDkxMTE1ODU=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/9111585","actor":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"62045af3d50087c288ed7a9feab9dc3e8fc0bdcc","commit_url":"https://api.github.com/repos/sidekiq/sidekiq/commits/62045af3d50087c288ed7a9feab9dc3e8fc0bdcc","created_at":"2012-02-07T11:29:22Z","performed_via_github_app":null},{"id":9111586,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkxMTE1ODY=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/9111586","actor":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-02-07T11:29:22Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3846439","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-3846439","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":3846439,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDY0Mzk=","user":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-07T11:32:55Z","updated_at":"2012-02-07T11:32:55Z","body":"Hi David,\n\nsidekiq currently doesn't support a way to queue up jobs uniquely once per payload as you describe. However, I think support for this could be fairly easily added to the project in a generic way. Normally extensions to sidekiq would be done via custom middleware, but in this case we would want to perform a uniqueness check before the middleware chain would ever get executed.\n\nWe could keep track of a redis set that contains a base64 value of all currently queued payloads. If a configuration option is enabled to only enqueue unique items, then we would first consult this set before adding a new job to the queue to make sure it doesn't already exist in the to-be-processed queue.\n\nI went ahead and implemented this approach in a separate branch with tests. @mperham, this may not be the direction we would want to go here, feel free to comment otherwise:\n\nhttps://github.com/mperham/sidekiq/compare/unique_payloads\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3846439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9111715,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTExMTcxNQ==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/9111715","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2012-02-07T11:32:55Z","performed_via_github_app":null},{"id":9111716,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkxMTE3MTY=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/9111716","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-02-07T11:32:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3852043","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-3852043","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":3852043,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTIwNDM=","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-07T17:20:04Z","updated_at":"2012-02-07T17:20:04Z","body":"Ideally, message processing should be idempotent so duplicate jobs won't matter, aside from the performance overhead of duplicate work.  I'm going to let this one sit for a few days so I can think about it.\n\nRyan, I'd also consider using middleware here for the server half, I want to avoid adding non-core features to the manager.  The manager is a singleton and adding more network traffic to his code path will affect scalability.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3852043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3852141","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-3852141","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":3852141,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTIxNDE=","user":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-07T17:24:23Z","updated_at":"2012-02-07T17:24:23Z","body":"That definitely sounds reasonable to me. I agree that the server half should be done with middleware. I'll explore that idea later tonight in the topic branch that I created and update this issue! Thanks.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3852141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3852221","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-3852221","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":3852221,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTIyMjE=","user":{"login":"davidcelis","id":36873,"node_id":"MDQ6VXNlcjM2ODcz","avatar_url":"https://avatars.githubusercontent.com/u/36873?v=4","gravatar_id":"","url":"https://api.github.com/users/davidcelis","html_url":"https://github.com/davidcelis","followers_url":"https://api.github.com/users/davidcelis/followers","following_url":"https://api.github.com/users/davidcelis/following{/other_user}","gists_url":"https://api.github.com/users/davidcelis/gists{/gist_id}","starred_url":"https://api.github.com/users/davidcelis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidcelis/subscriptions","organizations_url":"https://api.github.com/users/davidcelis/orgs","repos_url":"https://api.github.com/users/davidcelis/repos","events_url":"https://api.github.com/users/davidcelis/events{/privacy}","received_events_url":"https://api.github.com/users/davidcelis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-07T17:28:16Z","updated_at":"2012-02-07T17:29:02Z","body":"Well, that was fast. I was considering the same sort of logic implemented here, but this also removes the ability to have both unique jobs and original-style jobs.\n\nAs far as the duplicate jobs not mattering, it very well may be that they would matter much less while using sidekiq over Resque, but in my use case it would still end up being wasted time as the job itself can get time consuming depending on the number of users in the system. My own project Recommendable currently uses Resque to enqueue users to have the collaborative filtering logic run on them. With a lot of other users in the system, the job can take a couple of minutes (I've been trying to think of ways to optimize this, but the collab filtering is currently O(n^2) and I've been banging my head about it). Because of this, I use resque-loner to prevent any users from being queued twice; both jobs would end up yielding identical results.\n\nAnyway, I'm glad you guys are looking into it, and I'm impressed that it's happening this quickly. Thank you!\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3852221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"davidcelis","id":36873,"node_id":"MDQ6VXNlcjM2ODcz","avatar_url":"https://avatars.githubusercontent.com/u/36873?v=4","gravatar_id":"","url":"https://api.github.com/users/davidcelis","html_url":"https://github.com/davidcelis","followers_url":"https://api.github.com/users/davidcelis/followers","following_url":"https://api.github.com/users/davidcelis/following{/other_user}","gists_url":"https://api.github.com/users/davidcelis/gists{/gist_id}","starred_url":"https://api.github.com/users/davidcelis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidcelis/subscriptions","organizations_url":"https://api.github.com/users/davidcelis/orgs","repos_url":"https://api.github.com/users/davidcelis/repos","events_url":"https://api.github.com/users/davidcelis/events{/privacy}","received_events_url":"https://api.github.com/users/davidcelis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3854552","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-3854552","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":3854552,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTQ1NTI=","user":{"login":"rsim","id":4736,"node_id":"MDQ6VXNlcjQ3MzY=","avatar_url":"https://avatars.githubusercontent.com/u/4736?v=4","gravatar_id":"","url":"https://api.github.com/users/rsim","html_url":"https://github.com/rsim","followers_url":"https://api.github.com/users/rsim/followers","following_url":"https://api.github.com/users/rsim/following{/other_user}","gists_url":"https://api.github.com/users/rsim/gists{/gist_id}","starred_url":"https://api.github.com/users/rsim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsim/subscriptions","organizations_url":"https://api.github.com/users/rsim/orgs","repos_url":"https://api.github.com/users/rsim/repos","events_url":"https://api.github.com/users/rsim/events{/privacy}","received_events_url":"https://api.github.com/users/rsim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-07T19:36:50Z","updated_at":"2012-02-07T19:36:50Z","body":"I'm currently using [resque-lock-timeout](https://github.com/lantins/resque-lock-timeout) to support that only one job per customer account can run in parallel. Would be good that instead of just class/arguments uniqueness it would be possible to generate custom job identifier/lock key which would be used to check that only one job with such identifier can run in parallel.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3854552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rsim","id":4736,"node_id":"MDQ6VXNlcjQ3MzY=","avatar_url":"https://avatars.githubusercontent.com/u/4736?v=4","gravatar_id":"","url":"https://api.github.com/users/rsim","html_url":"https://github.com/rsim","followers_url":"https://api.github.com/users/rsim/followers","following_url":"https://api.github.com/users/rsim/following{/other_user}","gists_url":"https://api.github.com/users/rsim/gists{/gist_id}","starred_url":"https://api.github.com/users/rsim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsim/subscriptions","organizations_url":"https://api.github.com/users/rsim/orgs","repos_url":"https://api.github.com/users/rsim/repos","events_url":"https://api.github.com/users/rsim/events{/privacy}","received_events_url":"https://api.github.com/users/rsim/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9141734,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkxNDE3MzQ=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/9141734","actor":{"login":"rsim","id":4736,"node_id":"MDQ6VXNlcjQ3MzY=","avatar_url":"https://avatars.githubusercontent.com/u/4736?v=4","gravatar_id":"","url":"https://api.github.com/users/rsim","html_url":"https://github.com/rsim","followers_url":"https://api.github.com/users/rsim/followers","following_url":"https://api.github.com/users/rsim/following{/other_user}","gists_url":"https://api.github.com/users/rsim/gists{/gist_id}","starred_url":"https://api.github.com/users/rsim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsim/subscriptions","organizations_url":"https://api.github.com/users/rsim/orgs","repos_url":"https://api.github.com/users/rsim/repos","events_url":"https://api.github.com/users/rsim/events{/privacy}","received_events_url":"https://api.github.com/users/rsim/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-02-07T19:36:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3861387","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-3861387","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":3861387,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NjEzODc=","user":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-08T02:28:01Z","updated_at":"2012-02-08T02:28:01Z","body":"I went ahead and moved the server part to an after-style middleware. I also changed the name of the configuration option. When this option is enabled (ignore_duplicate_jobs), subsequent attempts to schedule a job with the same payload will not be added to the queue if the job is currently queued or is currently executing.\n\nIt doesn't address @rsim's comment regarding being able to specify a unique job identifier. I think you could get around this by simply adding your own identifier to the job's payload. \n\nMost recent diff can be seen here: https://github.com/mperham/sidekiq/compare/unique_payloads\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3861387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9165557,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTE2NTU1Nw==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/9165557","actor":{"login":"rsim","id":4736,"node_id":"MDQ6VXNlcjQ3MzY=","avatar_url":"https://avatars.githubusercontent.com/u/4736?v=4","gravatar_id":"","url":"https://api.github.com/users/rsim","html_url":"https://github.com/rsim","followers_url":"https://api.github.com/users/rsim/followers","following_url":"https://api.github.com/users/rsim/following{/other_user}","gists_url":"https://api.github.com/users/rsim/gists{/gist_id}","starred_url":"https://api.github.com/users/rsim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsim/subscriptions","organizations_url":"https://api.github.com/users/rsim/orgs","repos_url":"https://api.github.com/users/rsim/repos","events_url":"https://api.github.com/users/rsim/events{/privacy}","received_events_url":"https://api.github.com/users/rsim/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2012-02-08T02:28:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3869405","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-3869405","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":3869405,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Njk0MDU=","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-08T15:36:16Z","updated_at":"2012-02-08T15:36:16Z","body":"It came to me last night that sidekiq::client should probably have pluggable middleware too so you can modify the message before sending it to redis or, in this case, stop the send altogether.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3869405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3870147","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-3870147","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":3870147,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzAxNDc=","user":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-08T16:14:06Z","updated_at":"2012-02-08T16:14:06Z","body":"I do like the idea of having pluggable middleware for the client, a la Faraday. Nice way to separate the concerns and allow injecting logic from the client side, similar to what can be done now on the server side.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3870147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3870153","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-3870153","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":3870153,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzAxNTM=","user":{"login":"rsim","id":4736,"node_id":"MDQ6VXNlcjQ3MzY=","avatar_url":"https://avatars.githubusercontent.com/u/4736?v=4","gravatar_id":"","url":"https://api.github.com/users/rsim","html_url":"https://github.com/rsim","followers_url":"https://api.github.com/users/rsim/followers","following_url":"https://api.github.com/users/rsim/following{/other_user}","gists_url":"https://api.github.com/users/rsim/gists{/gist_id}","starred_url":"https://api.github.com/users/rsim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsim/subscriptions","organizations_url":"https://api.github.com/users/rsim/orgs","repos_url":"https://api.github.com/users/rsim/repos","events_url":"https://api.github.com/users/rsim/events{/privacy}","received_events_url":"https://api.github.com/users/rsim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-08T16:14:19Z","updated_at":"2012-02-08T16:14:19Z","body":"In my use case when I use resque-lock-timeout I want that job is pushed to job queue, I just don't want that any worker would pick up this job until previous job with the same generated job identifier (in my case \"customer account id\") isn't finished.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3870153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rsim","id":4736,"node_id":"MDQ6VXNlcjQ3MzY=","avatar_url":"https://avatars.githubusercontent.com/u/4736?v=4","gravatar_id":"","url":"https://api.github.com/users/rsim","html_url":"https://github.com/rsim","followers_url":"https://api.github.com/users/rsim/followers","following_url":"https://api.github.com/users/rsim/following{/other_user}","gists_url":"https://api.github.com/users/rsim/gists{/gist_id}","starred_url":"https://api.github.com/users/rsim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsim/subscriptions","organizations_url":"https://api.github.com/users/rsim/orgs","repos_url":"https://api.github.com/users/rsim/repos","events_url":"https://api.github.com/users/rsim/events{/privacy}","received_events_url":"https://api.github.com/users/rsim/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3918367","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-3918367","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":3918367,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTgzNjc=","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-11T03:46:33Z","updated_at":"2012-02-11T03:46:33Z","body":"Fixed by @ryanlecompte's client side middleware work.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/3918367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9372355,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTM3MjM1NQ==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/9372355","actor":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2012-02-11T03:46:33Z","performed_via_github_app":null},{"id":9372356,"node_id":"MDExOkNsb3NlZEV2ZW50OTM3MjM1Ng==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/9372356","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2012-02-11T03:46:33Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"jakemack","id":279781,"node_id":"MDQ6VXNlcjI3OTc4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/279781?v=4","gravatar_id":"","url":"https://api.github.com/users/jakemack","html_url":"https://github.com/jakemack","followers_url":"https://api.github.com/users/jakemack/followers","following_url":"https://api.github.com/users/jakemack/following{/other_user}","gists_url":"https://api.github.com/users/jakemack/gists{/gist_id}","starred_url":"https://api.github.com/users/jakemack/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakemack/subscriptions","organizations_url":"https://api.github.com/users/jakemack/orgs","repos_url":"https://api.github.com/users/jakemack/repos","events_url":"https://api.github.com/users/jakemack/events{/privacy}","received_events_url":"https://api.github.com/users/jakemack/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-07-26T02:54:20Z","updated_at":"2012-07-26T02:54:20Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/314","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/314/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/314/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/314/events","html_url":"https://github.com/sidekiq/sidekiq/issues/314","id":5838235,"node_id":"MDU6SXNzdWU1ODM4MjM1","number":314,"title":"Several Potential Enhancements","user":{"login":"jakemack","id":279781,"node_id":"MDQ6VXNlcjI3OTc4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/279781?v=4","gravatar_id":"","url":"https://api.github.com/users/jakemack","html_url":"https://github.com/jakemack","followers_url":"https://api.github.com/users/jakemack/followers","following_url":"https://api.github.com/users/jakemack/following{/other_user}","gists_url":"https://api.github.com/users/jakemack/gists{/gist_id}","starred_url":"https://api.github.com/users/jakemack/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakemack/subscriptions","organizations_url":"https://api.github.com/users/jakemack/orgs","repos_url":"https://api.github.com/users/jakemack/repos","events_url":"https://api.github.com/users/jakemack/events{/privacy}","received_events_url":"https://api.github.com/users/jakemack/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2012-07-25T19:28:20Z","updated_at":"2012-09-26T04:25:09Z","closed_at":"2012-08-04T03:25:07Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3195124,"node_id":"MDEwOlJlcG9zaXRvcnkzMTk1MTI0","name":"sidekiq","full_name":"sidekiq/sidekiq","private":false,"owner":{"login":"sidekiq","id":124714131,"node_id":"O_kgDOB278kw","avatar_url":"https://avatars.githubusercontent.com/u/124714131?v=4","gravatar_id":"","url":"https://api.github.com/users/sidekiq","html_url":"https://github.com/sidekiq","followers_url":"https://api.github.com/users/sidekiq/followers","following_url":"https://api.github.com/users/sidekiq/following{/other_user}","gists_url":"https://api.github.com/users/sidekiq/gists{/gist_id}","starred_url":"https://api.github.com/users/sidekiq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidekiq/subscriptions","organizations_url":"https://api.github.com/users/sidekiq/orgs","repos_url":"https://api.github.com/users/sidekiq/repos","events_url":"https://api.github.com/users/sidekiq/events{/privacy}","received_events_url":"https://api.github.com/users/sidekiq/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sidekiq/sidekiq","description":"Simple, efficient background processing for Ruby","fork":false,"url":"https://api.github.com/repos/sidekiq/sidekiq","forks_url":"https://api.github.com/repos/sidekiq/sidekiq/forks","keys_url":"https://api.github.com/repos/sidekiq/sidekiq/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sidekiq/sidekiq/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sidekiq/sidekiq/teams","hooks_url":"https://api.github.com/repos/sidekiq/sidekiq/hooks","issue_events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events{/number}","events_url":"https://api.github.com/repos/sidekiq/sidekiq/events","assignees_url":"https://api.github.com/repos/sidekiq/sidekiq/assignees{/user}","branches_url":"https://api.github.com/repos/sidekiq/sidekiq/branches{/branch}","tags_url":"https://api.github.com/repos/sidekiq/sidekiq/tags","blobs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sidekiq/sidekiq/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/refs{/sha}","trees_url":"https://api.github.com/repos/sidekiq/sidekiq/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sidekiq/sidekiq/statuses/{sha}","languages_url":"https://api.github.com/repos/sidekiq/sidekiq/languages","stargazers_url":"https://api.github.com/repos/sidekiq/sidekiq/stargazers","contributors_url":"https://api.github.com/repos/sidekiq/sidekiq/contributors","subscribers_url":"https://api.github.com/repos/sidekiq/sidekiq/subscribers","subscription_url":"https://api.github.com/repos/sidekiq/sidekiq/subscription","commits_url":"https://api.github.com/repos/sidekiq/sidekiq/commits{/sha}","git_commits_url":"https://api.github.com/repos/sidekiq/sidekiq/git/commits{/sha}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/comments{/number}","issue_comment_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments{/number}","contents_url":"https://api.github.com/repos/sidekiq/sidekiq/contents/{+path}","compare_url":"https://api.github.com/repos/sidekiq/sidekiq/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sidekiq/sidekiq/merges","archive_url":"https://api.github.com/repos/sidekiq/sidekiq/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sidekiq/sidekiq/downloads","issues_url":"https://api.github.com/repos/sidekiq/sidekiq/issues{/number}","pulls_url":"https://api.github.com/repos/sidekiq/sidekiq/pulls{/number}","milestones_url":"https://api.github.com/repos/sidekiq/sidekiq/milestones{/number}","notifications_url":"https://api.github.com/repos/sidekiq/sidekiq/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/labels{/name}","releases_url":"https://api.github.com/repos/sidekiq/sidekiq/releases{/id}","deployments_url":"https://api.github.com/repos/sidekiq/sidekiq/deployments","created_at":"2012-01-16T23:17:27Z","updated_at":"2025-11-09T20:20:41Z","pushed_at":"2025-11-07T17:29:44Z","git_url":"git://github.com/sidekiq/sidekiq.git","ssh_url":"git@github.com:sidekiq/sidekiq.git","clone_url":"https://github.com/sidekiq/sidekiq.git","svn_url":"https://github.com/sidekiq/sidekiq","homepage":"https://sidekiq.org","size":14680,"stargazers_count":13447,"watchers_count":13447,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2471,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["background-jobs","jobs","ruby","sidekiq"],"visibility":"public","forks":2471,"open_issues":40,"watchers":13447,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'm in the process of evaluating Sidekiq as a replacement for Resque in our production app.  Nightly, we process ~1.3 million jobs on Heroku, so cutting down on the memory footprint will greatly reduce our costs for dynos. It looks promising so far, but there are a few niceties of Resque that seem to be missing. Despite that, I think we're going to try switching over.\n\nThat being said, I wanted to suggest a few new features that would help us greatly (and hopefully will be useful to other people as well). With these suggestions come the offer to implement most of them and submit them as pull requests. I just wanted to make sure my time isn't wasted developing something you didn't want to incorporate into the gem. Also, since you know the internals better than I do, I thought you might have suggestions on the architecture/implementation as I get further along in developing them.\n\nThe first thing should be very simple: I'd like to add a polling feature to the Sidekiq UI much like Resque has to avoid having to refresh every couple seconds while monitoring queues and workers.\n\nThe second feature comes directly from the amount of job processing we do and how we queue them up. We're currently queuing up the jobs one at a time, as that is the only way Resque offers. Needless to say, queuing up over a million jobs sequentially takes a bit of time. I'd like to add a method to `Sidekiq::Worker` along the lines of `Sidekiq::Worker.perform_many_async(*args)` where you pass in an array of parameters for the worker's perform method. For example, if you had `TonsOfWork#perform(number)` as your perform method, you'd call `TonsOfWork.perform_many_async([1, 2, 3, 4])` which would insert four jobs into Redis, each with the class TonsOfWork, one for each parameter in the array. If you had a perform method that took multiple parameters, you would just pass an array of arrays (`TonsOfWork.perform_many_async([[1, 'work'], [2, 'play'], [3, 'sleep'], [4, 'eat]])`). Redis' RPUSH method allows multiple values to be pushed in one call as of 2.4, so it should be a relatively simple addition. I haven't checked which versions of Redis are supported by the redis gem, so perhaps we'd have to put some sort of check in there to use this method and fall back to adding the jobs in separate calls.\n\nThe third change would be an option for changing how queues are handled. In our application, we don't care about queue starvation. In fact, we have a queue that we only want to run if no other queues have any jobs in them. So, I'd like to implement a strict queue option that always pulls from the highest priority (first declared, like Resque perhaps?) queue first, then proceeds to the next and the next. It could just be a command line switch such as sidekiq --enable_strict_queue.\n\nLastly, I've branched resque-scheduler and integrated the common heroku autoscaling code into it so that it runs at all times instead of during job queuing/processing. With Sidekiq, it seems that the middleware is a perfect place for this code to run, though I haven't looked into middleware much yet. This one I could write as a separate gem, I just wanted to get your thoughts on it. It would just be simple code to check the number of jobs queued, the number of workers running, and some decision process on whether or not to call into the Heroku API and scale workers up or down. Does it sound like a good candidate for Sidekiq middleware? And if so, would it be client middleware or server middleware?\n\nThanks a lot for taking the time to read through this post as it's gotten a little long. I'm very excited to start using Sidekiq and chop our dyno count down by an order of magnitude.\n","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/314/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"endymonium","id":3268155,"node_id":"MDQ6VXNlcjMyNjgxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/3268155?v=4","gravatar_id":"","url":"https://api.github.com/users/endymonium","html_url":"https://github.com/endymonium","followers_url":"https://api.github.com/users/endymonium/followers","following_url":"https://api.github.com/users/endymonium/following{/other_user}","gists_url":"https://api.github.com/users/endymonium/gists{/gist_id}","starred_url":"https://api.github.com/users/endymonium/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/endymonium/subscriptions","organizations_url":"https://api.github.com/users/endymonium/orgs","repos_url":"https://api.github.com/users/endymonium/repos","events_url":"https://api.github.com/users/endymonium/events{/privacy}","received_events_url":"https://api.github.com/users/endymonium/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-05-03T15:56:15Z","updated_at":"2013-05-03T15:56:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/896","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/896/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/896/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/896/events","html_url":"https://github.com/sidekiq/sidekiq/issues/896","id":13939249,"node_id":"MDU6SXNzdWUxMzkzOTI0OQ==","number":896,"title":"Custom Job ID","user":{"login":"endymonium","id":3268155,"node_id":"MDQ6VXNlcjMyNjgxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/3268155?v=4","gravatar_id":"","url":"https://api.github.com/users/endymonium","html_url":"https://github.com/endymonium","followers_url":"https://api.github.com/users/endymonium/followers","following_url":"https://api.github.com/users/endymonium/following{/other_user}","gists_url":"https://api.github.com/users/endymonium/gists{/gist_id}","starred_url":"https://api.github.com/users/endymonium/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/endymonium/subscriptions","organizations_url":"https://api.github.com/users/endymonium/orgs","repos_url":"https://api.github.com/users/endymonium/repos","events_url":"https://api.github.com/users/endymonium/events{/privacy}","received_events_url":"https://api.github.com/users/endymonium/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2013-05-03T15:33:01Z","updated_at":"2022-07-11T20:02:34Z","closed_at":"2013-05-03T16:05:45Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3195124,"node_id":"MDEwOlJlcG9zaXRvcnkzMTk1MTI0","name":"sidekiq","full_name":"sidekiq/sidekiq","private":false,"owner":{"login":"sidekiq","id":124714131,"node_id":"O_kgDOB278kw","avatar_url":"https://avatars.githubusercontent.com/u/124714131?v=4","gravatar_id":"","url":"https://api.github.com/users/sidekiq","html_url":"https://github.com/sidekiq","followers_url":"https://api.github.com/users/sidekiq/followers","following_url":"https://api.github.com/users/sidekiq/following{/other_user}","gists_url":"https://api.github.com/users/sidekiq/gists{/gist_id}","starred_url":"https://api.github.com/users/sidekiq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidekiq/subscriptions","organizations_url":"https://api.github.com/users/sidekiq/orgs","repos_url":"https://api.github.com/users/sidekiq/repos","events_url":"https://api.github.com/users/sidekiq/events{/privacy}","received_events_url":"https://api.github.com/users/sidekiq/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sidekiq/sidekiq","description":"Simple, efficient background processing for Ruby","fork":false,"url":"https://api.github.com/repos/sidekiq/sidekiq","forks_url":"https://api.github.com/repos/sidekiq/sidekiq/forks","keys_url":"https://api.github.com/repos/sidekiq/sidekiq/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sidekiq/sidekiq/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sidekiq/sidekiq/teams","hooks_url":"https://api.github.com/repos/sidekiq/sidekiq/hooks","issue_events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events{/number}","events_url":"https://api.github.com/repos/sidekiq/sidekiq/events","assignees_url":"https://api.github.com/repos/sidekiq/sidekiq/assignees{/user}","branches_url":"https://api.github.com/repos/sidekiq/sidekiq/branches{/branch}","tags_url":"https://api.github.com/repos/sidekiq/sidekiq/tags","blobs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sidekiq/sidekiq/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/refs{/sha}","trees_url":"https://api.github.com/repos/sidekiq/sidekiq/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sidekiq/sidekiq/statuses/{sha}","languages_url":"https://api.github.com/repos/sidekiq/sidekiq/languages","stargazers_url":"https://api.github.com/repos/sidekiq/sidekiq/stargazers","contributors_url":"https://api.github.com/repos/sidekiq/sidekiq/contributors","subscribers_url":"https://api.github.com/repos/sidekiq/sidekiq/subscribers","subscription_url":"https://api.github.com/repos/sidekiq/sidekiq/subscription","commits_url":"https://api.github.com/repos/sidekiq/sidekiq/commits{/sha}","git_commits_url":"https://api.github.com/repos/sidekiq/sidekiq/git/commits{/sha}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/comments{/number}","issue_comment_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments{/number}","contents_url":"https://api.github.com/repos/sidekiq/sidekiq/contents/{+path}","compare_url":"https://api.github.com/repos/sidekiq/sidekiq/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sidekiq/sidekiq/merges","archive_url":"https://api.github.com/repos/sidekiq/sidekiq/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sidekiq/sidekiq/downloads","issues_url":"https://api.github.com/repos/sidekiq/sidekiq/issues{/number}","pulls_url":"https://api.github.com/repos/sidekiq/sidekiq/pulls{/number}","milestones_url":"https://api.github.com/repos/sidekiq/sidekiq/milestones{/number}","notifications_url":"https://api.github.com/repos/sidekiq/sidekiq/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/labels{/name}","releases_url":"https://api.github.com/repos/sidekiq/sidekiq/releases{/id}","deployments_url":"https://api.github.com/repos/sidekiq/sidekiq/deployments","created_at":"2012-01-16T23:17:27Z","updated_at":"2025-11-09T20:20:41Z","pushed_at":"2025-11-07T17:29:44Z","git_url":"git://github.com/sidekiq/sidekiq.git","ssh_url":"git@github.com:sidekiq/sidekiq.git","clone_url":"https://github.com/sidekiq/sidekiq.git","svn_url":"https://github.com/sidekiq/sidekiq","homepage":"https://sidekiq.org","size":14680,"stargazers_count":13447,"watchers_count":13447,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2471,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["background-jobs","jobs","ruby","sidekiq"],"visibility":"public","forks":2471,"open_issues":40,"watchers":13447,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi,\n\nI needed to set the job id manually to able to bind a worker uniquely to a models instance. \n\nThe change I did (see https://github.com/endymonium/sidekiq/commit/5feb15a097fae2f3afec4db2ba54c70bc3f3e9c8) is not 100% clean, but perhaps something similar could be implemented? Or is there a better way to archive this?\n\n**Example**\n\n```\nclass TestWorker\n  include Sidekiq::Worker\n\n  def perform(args)\n    (0..5).each do |i|\n      puts 'Run ' + i.to_s\n      sleep 10\n    end\n  end\nend\n```\n\nthen\n\n```\nTestWorker.perform_async(jid: 'some_id')\n```\n","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/896/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/21832981","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-21832981","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":21832981,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODMyOTgx","user":{"login":"smathy","id":50139,"node_id":"MDQ6VXNlcjUwMTM5","avatar_url":"https://avatars.githubusercontent.com/u/50139?v=4","gravatar_id":"","url":"https://api.github.com/users/smathy","html_url":"https://github.com/smathy","followers_url":"https://api.github.com/users/smathy/followers","following_url":"https://api.github.com/users/smathy/following{/other_user}","gists_url":"https://api.github.com/users/smathy/gists{/gist_id}","starred_url":"https://api.github.com/users/smathy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smathy/subscriptions","organizations_url":"https://api.github.com/users/smathy/orgs","repos_url":"https://api.github.com/users/smathy/repos","events_url":"https://api.github.com/users/smathy/events{/privacy}","received_events_url":"https://api.github.com/users/smathy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-07-31T00:30:30Z","updated_at":"2013-07-31T00:30:30Z","body":"Sorry to be a dunce here, but can I confirm (@mperham or @ryanlecompte or anyone else who knows) the fix for how to do this using the middleware would be something like...\n\nIn the `call` method of my middleware class, search through the `Sidekiq::Queue` I'm passed looking for a job with a matching payload, and only `yield` if I **don't** find it.\n\nDo I also have to check `Sidekiq::Workers` or will the job still be in `Sidekiq::Queue` even if it's being worked on?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/21832981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"smathy","id":50139,"node_id":"MDQ6VXNlcjUwMTM5","avatar_url":"https://avatars.githubusercontent.com/u/50139?v=4","gravatar_id":"","url":"https://api.github.com/users/smathy","html_url":"https://github.com/smathy","followers_url":"https://api.github.com/users/smathy/followers","following_url":"https://api.github.com/users/smathy/following{/other_user}","gists_url":"https://api.github.com/users/smathy/gists{/gist_id}","starred_url":"https://api.github.com/users/smathy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smathy/subscriptions","organizations_url":"https://api.github.com/users/smathy/orgs","repos_url":"https://api.github.com/users/smathy/repos","events_url":"https://api.github.com/users/smathy/events{/privacy}","received_events_url":"https://api.github.com/users/smathy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":58755869,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTg3NTU4Njk=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/58755869","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-07-31T00:30:30Z","performed_via_github_app":null},{"id":58755870,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDU4NzU1ODcw","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/58755870","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2013-07-31T00:30:30Z","performed_via_github_app":null},{"id":58755871,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTg3NTU4NzE=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/58755871","actor":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-07-31T00:30:30Z","performed_via_github_app":null},{"id":58755872,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDU4NzU1ODcy","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/58755872","actor":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2013-07-31T00:30:30Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/21833953","html_url":"https://github.com/sidekiq/sidekiq/issues/4#issuecomment-21833953","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4","id":21833953,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODMzOTUz","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-07-31T00:59:05Z","updated_at":"2013-07-31T00:59:05Z","body":"Jason, you cannot implement unique jobs using the sidekiq API. There's many many race conditions in what you suggest. \n\nOn Jul 30, 2013, at 17:30, Jason King notifications@github.com wrote:\n\n> Sorry to be a dunce here, but can I confirm (@mperham or @ryanlecompte or anyone else who knows) the fix for how to do this using the middleware would be something like...\n> \n> In the call method of my middleware class, search through the Sidekiq::Queue I'm passed looking for a job with a matching payload, and only yield if I don't find it.\n> \n> Do I also have to check Sidekiq::Workers or will the job still be in Sidekiq::Queue even if it's being worked on?\n> \n> \n> Reply to this email directly or view it on GitHub.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/21833953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":58758455,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTg3NTg0NTU=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/58758455","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-07-31T00:59:05Z","performed_via_github_app":null},{"id":58758456,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDU4NzU4NDU2","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/58758456","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2013-07-31T00:59:05Z","performed_via_github_app":null},{"id":58758457,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTg3NTg0NTc=","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/58758457","actor":{"login":"ryanlecompte","id":637158,"node_id":"MDQ6VXNlcjYzNzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/637158?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanlecompte","html_url":"https://github.com/ryanlecompte","followers_url":"https://api.github.com/users/ryanlecompte/followers","following_url":"https://api.github.com/users/ryanlecompte/following{/other_user}","gists_url":"https://api.github.com/users/ryanlecompte/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanlecompte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanlecompte/subscriptions","organizations_url":"https://api.github.com/users/ryanlecompte/orgs","repos_url":"https://api.github.com/users/ryanlecompte/repos","events_url":"https://api.github.com/users/ryanlecompte/events{/privacy}","received_events_url":"https://api.github.com/users/ryanlecompte/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-07-31T00:59:05Z","performed_via_github_app":null}]