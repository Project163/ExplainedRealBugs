{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3521","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3521/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3521/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3521/events","html_url":"https://github.com/sidekiq/sidekiq/issues/3521","id":237464474,"node_id":"MDU6SXNzdWUyMzc0NjQ0NzQ=","number":3521,"title":"use delay command cause a \"ERR unknown command client\" error","user":{"login":"RicottaZhang","id":9570448,"node_id":"MDQ6VXNlcjk1NzA0NDg=","avatar_url":"https://avatars.githubusercontent.com/u/9570448?v=4","gravatar_id":"","url":"https://api.github.com/users/RicottaZhang","html_url":"https://github.com/RicottaZhang","followers_url":"https://api.github.com/users/RicottaZhang/followers","following_url":"https://api.github.com/users/RicottaZhang/following{/other_user}","gists_url":"https://api.github.com/users/RicottaZhang/gists{/gist_id}","starred_url":"https://api.github.com/users/RicottaZhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RicottaZhang/subscriptions","organizations_url":"https://api.github.com/users/RicottaZhang/orgs","repos_url":"https://api.github.com/users/RicottaZhang/repos","events_url":"https://api.github.com/users/RicottaZhang/events{/privacy}","received_events_url":"https://api.github.com/users/RicottaZhang/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2017-06-21T09:07:36Z","updated_at":"2017-09-19T14:23:01Z","closed_at":"2017-06-21T11:54:28Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Versions\r\nRuby version: 2.3.0\r\nRails version: 4.2.6\r\nSidekiq version: 5.0.3\r\n\r\n## Code\r\nUse delay command, it was work on sidekiq 5.0.2 as code\r\n `XxxxService.delay(:queue => 'xxxx').changed(id)`\r\n\r\n## Error Trace\r\n    E, [2017-06-21T12:10:28.101237 #419] ERROR -- : ERR unknown command client\r\n    E, [2017-06-21T12:10:28.101334 #419] ERROR -- : /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:121:in 'call'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:104:in 'block in connect'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:293:in 'with_reconnect'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:100:in 'connect'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:364:in 'ensure_connected'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:221:in 'block in process'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:306:in 'logging'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:220:in 'process'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:187:in 'call_pipelined'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:157:in 'block in call_pipeline'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:293:in 'with_reconnect'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:155:in 'call_pipeline'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:2304:in 'block in multi'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:58:in 'block in synchronize'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/2.3.0/monitor.rb:214:in 'mon_synchronize'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:58:in 'synchronize'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:2296:in 'multi'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-status-0.6.0/lib/sidekiq-status/storage.rb:16:in 'block in store_for_id'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-status-0.6.0/lib/sidekiq-status/storage.rb:102:in 'block in redis_connection'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:64:in 'block (2 levels) in with'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:63:in 'handle_interrupt'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:63:in 'block in with'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:60:in 'handle_interrupt'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:60:in 'with'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-status-0.6.0/lib/sidekiq-status/storage.rb:101:in 'redis_connection'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-status-0.6.0/lib/sidekiq-status/storage.rb:15:in 'store_for_id'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-status-0.6.0/lib/sidekiq-status/client_middleware.rb:26:in 'call'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.3/lib/sidekiq/middleware/chain.rb:130:in 'block in invoke'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.3/lib/sidekiq/middleware/chain.rb:133:in 'invoke'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.3/lib/sidekiq/client.rb:209:in 'process_single'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.3/lib/sidekiq/client.rb:68:in 'push'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.3/lib/sidekiq/worker.rb:142:in 'client_push'\r\n    /home/xxxx/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.3/lib/sidekiq/extensions/generic_proxy.rb:26:in 'method_missing'","closed_by":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3521/timeline","performed_via_github_app":null,"state_reason":"completed"}