[{"actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-06T15:10:48Z","updated_at":"2020-03-06T15:10:48Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3518","repository_url":"https://api.github.com/repos/sidekiq/sidekiq","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3518/labels{/name}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3518/comments","events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3518/events","html_url":"https://github.com/sidekiq/sidekiq/issues/3518","id":236542972,"node_id":"MDU6SXNzdWUyMzY1NDI5NzI=","number":3518,"title":"unknown command 'client' (Redis::CommandError) after 5.0.3 upgrade.","user":{"login":"mattk42","id":505046,"node_id":"MDQ6VXNlcjUwNTA0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/505046?v=4","gravatar_id":"","url":"https://api.github.com/users/mattk42","html_url":"https://github.com/mattk42","followers_url":"https://api.github.com/users/mattk42/followers","following_url":"https://api.github.com/users/mattk42/following{/other_user}","gists_url":"https://api.github.com/users/mattk42/gists{/gist_id}","starred_url":"https://api.github.com/users/mattk42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattk42/subscriptions","organizations_url":"https://api.github.com/users/mattk42/orgs","repos_url":"https://api.github.com/users/mattk42/repos","events_url":"https://api.github.com/users/mattk42/events{/privacy}","received_events_url":"https://api.github.com/users/mattk42/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2017-06-16T17:16:17Z","updated_at":"2020-03-06T15:18:32Z","closed_at":"2017-06-16T18:35:14Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3195124,"node_id":"MDEwOlJlcG9zaXRvcnkzMTk1MTI0","name":"sidekiq","full_name":"sidekiq/sidekiq","private":false,"owner":{"login":"sidekiq","id":124714131,"node_id":"O_kgDOB278kw","avatar_url":"https://avatars.githubusercontent.com/u/124714131?v=4","gravatar_id":"","url":"https://api.github.com/users/sidekiq","html_url":"https://github.com/sidekiq","followers_url":"https://api.github.com/users/sidekiq/followers","following_url":"https://api.github.com/users/sidekiq/following{/other_user}","gists_url":"https://api.github.com/users/sidekiq/gists{/gist_id}","starred_url":"https://api.github.com/users/sidekiq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidekiq/subscriptions","organizations_url":"https://api.github.com/users/sidekiq/orgs","repos_url":"https://api.github.com/users/sidekiq/repos","events_url":"https://api.github.com/users/sidekiq/events{/privacy}","received_events_url":"https://api.github.com/users/sidekiq/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sidekiq/sidekiq","description":"Simple, efficient background processing for Ruby","fork":false,"url":"https://api.github.com/repos/sidekiq/sidekiq","forks_url":"https://api.github.com/repos/sidekiq/sidekiq/forks","keys_url":"https://api.github.com/repos/sidekiq/sidekiq/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sidekiq/sidekiq/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sidekiq/sidekiq/teams","hooks_url":"https://api.github.com/repos/sidekiq/sidekiq/hooks","issue_events_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events{/number}","events_url":"https://api.github.com/repos/sidekiq/sidekiq/events","assignees_url":"https://api.github.com/repos/sidekiq/sidekiq/assignees{/user}","branches_url":"https://api.github.com/repos/sidekiq/sidekiq/branches{/branch}","tags_url":"https://api.github.com/repos/sidekiq/sidekiq/tags","blobs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sidekiq/sidekiq/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sidekiq/sidekiq/git/refs{/sha}","trees_url":"https://api.github.com/repos/sidekiq/sidekiq/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sidekiq/sidekiq/statuses/{sha}","languages_url":"https://api.github.com/repos/sidekiq/sidekiq/languages","stargazers_url":"https://api.github.com/repos/sidekiq/sidekiq/stargazers","contributors_url":"https://api.github.com/repos/sidekiq/sidekiq/contributors","subscribers_url":"https://api.github.com/repos/sidekiq/sidekiq/subscribers","subscription_url":"https://api.github.com/repos/sidekiq/sidekiq/subscription","commits_url":"https://api.github.com/repos/sidekiq/sidekiq/commits{/sha}","git_commits_url":"https://api.github.com/repos/sidekiq/sidekiq/git/commits{/sha}","comments_url":"https://api.github.com/repos/sidekiq/sidekiq/comments{/number}","issue_comment_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments{/number}","contents_url":"https://api.github.com/repos/sidekiq/sidekiq/contents/{+path}","compare_url":"https://api.github.com/repos/sidekiq/sidekiq/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sidekiq/sidekiq/merges","archive_url":"https://api.github.com/repos/sidekiq/sidekiq/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sidekiq/sidekiq/downloads","issues_url":"https://api.github.com/repos/sidekiq/sidekiq/issues{/number}","pulls_url":"https://api.github.com/repos/sidekiq/sidekiq/pulls{/number}","milestones_url":"https://api.github.com/repos/sidekiq/sidekiq/milestones{/number}","notifications_url":"https://api.github.com/repos/sidekiq/sidekiq/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sidekiq/sidekiq/labels{/name}","releases_url":"https://api.github.com/repos/sidekiq/sidekiq/releases{/id}","deployments_url":"https://api.github.com/repos/sidekiq/sidekiq/deployments","created_at":"2012-01-16T23:17:27Z","updated_at":"2025-11-09T20:20:41Z","pushed_at":"2025-11-07T17:29:44Z","git_url":"git://github.com/sidekiq/sidekiq.git","ssh_url":"git@github.com:sidekiq/sidekiq.git","clone_url":"https://github.com/sidekiq/sidekiq.git","svn_url":"https://github.com/sidekiq/sidekiq","homepage":"https://sidekiq.org","size":14680,"stargazers_count":13447,"watchers_count":13447,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2471,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["background-jobs","jobs","ruby","sidekiq"],"visibility":"public","forks":2471,"open_issues":40,"watchers":13447,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Ruby version**: ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]\r\n**Sidekiq version** : 5.0.3\r\n\r\nWe have run into issues listing queues on our sidekiq instances after upgrading to 5.0.3. Rolling back to 5.0.2 fixes this issue. A simple reproduction case below along with the exception.\r\n\r\ntest.rb\r\n```\r\nrequire 'sidekiq'\r\nrequire 'sidekiq/api'\r\n\r\nSidekiq.configure_client do |sconfig|\r\n  sconfig.redis = { url: \"[REDACTED]\" }\r\nend\r\n\r\nSidekiq::Queue.all\r\n```\r\noutput with 5.0.3\r\n```\r\n # /opt/sensu/embedded/bin/ruby test.rb\r\n/opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:121:in `call': ERR unknown command 'client' (Redis::CommandError)\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:104:in `block in connect'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:293:in `with_reconnect'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:100:in `connect'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:364:in `ensure_connected'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:221:in `block in process'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:306:in `logging'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:220:in `process'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:120:in `call'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:1398:in `block in smembers'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:58:in `block in synchronize'\r\n\tfrom /opt/sensu/embedded/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:58:in `synchronize'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:1397:in `smembers'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.3/lib/sidekiq/api.rb:207:in `block in all'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.3/lib/sidekiq.rb:95:in `block in redis'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:64:in `block (2 levels) in with'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:63:in `handle_interrupt'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:63:in `block in with'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:60:in `handle_interrupt'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:60:in `with'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.3/lib/sidekiq.rb:92:in `redis'\r\n\tfrom /opt/sensu/embedded/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.3/lib/sidekiq/api.rb:207:in `all'\r\n\tfrom test.rb:8:in `<main>'\r\n```\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/3518/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":3156337610,"node_id":"MDExOkNsb3NlZEV2ZW50MzE1NjMzNzYxMA==","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/3156337610","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"05f874edea405a9f7a28bc5d63f0d04b0d3fa4b3","commit_url":"https://api.github.com/repos/sidekiq/sidekiq/commits/05f874edea405a9f7a28bc5d63f0d04b0d3fa4b3","created_at":"2020-03-23T17:40:54Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/654754627","html_url":"https://github.com/sidekiq/sidekiq/issues/4479#issuecomment-654754627","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4479","id":654754627,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDc1NDYyNw==","user":{"login":"Tolsto","id":20240901,"node_id":"MDQ6VXNlcjIwMjQwOTAx","avatar_url":"https://avatars.githubusercontent.com/u/20240901?v=4","gravatar_id":"","url":"https://api.github.com/users/Tolsto","html_url":"https://github.com/Tolsto","followers_url":"https://api.github.com/users/Tolsto/followers","following_url":"https://api.github.com/users/Tolsto/following{/other_user}","gists_url":"https://api.github.com/users/Tolsto/gists{/gist_id}","starred_url":"https://api.github.com/users/Tolsto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tolsto/subscriptions","organizations_url":"https://api.github.com/users/Tolsto/orgs","repos_url":"https://api.github.com/users/Tolsto/repos","events_url":"https://api.github.com/users/Tolsto/events{/privacy}","received_events_url":"https://api.github.com/users/Tolsto/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T10:20:47Z","updated_at":"2020-07-07T10:20:47Z","body":"We actually did use it :(\r\nWould you consider re-adding it to Sidekiq(-Pro) as a configurable option?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/654754627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Tolsto","id":20240901,"node_id":"MDQ6VXNlcjIwMjQwOTAx","avatar_url":"https://avatars.githubusercontent.com/u/20240901?v=4","gravatar_id":"","url":"https://api.github.com/users/Tolsto","html_url":"https://github.com/Tolsto","followers_url":"https://api.github.com/users/Tolsto/followers","following_url":"https://api.github.com/users/Tolsto/following{/other_user}","gists_url":"https://api.github.com/users/Tolsto/gists{/gist_id}","starred_url":"https://api.github.com/users/Tolsto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tolsto/subscriptions","organizations_url":"https://api.github.com/users/Tolsto/orgs","repos_url":"https://api.github.com/users/Tolsto/repos","events_url":"https://api.github.com/users/Tolsto/events{/privacy}","received_events_url":"https://api.github.com/users/Tolsto/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/654997503","html_url":"https://github.com/sidekiq/sidekiq/issues/4479#issuecomment-654997503","issue_url":"https://api.github.com/repos/sidekiq/sidekiq/issues/4479","id":654997503,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDk5NzUwMw==","user":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T17:01:37Z","updated_at":"2020-07-07T17:01:37Z","body":"You can add it yourself, just add an :id key to the redis hash in your initializer. ","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/sidekiq/sidekiq/issues/comments/654997503/reactions","total_count":3,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mperham","id":2911,"node_id":"MDQ6VXNlcjI5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/2911?v=4","gravatar_id":"","url":"https://api.github.com/users/mperham","html_url":"https://github.com/mperham","followers_url":"https://api.github.com/users/mperham/followers","following_url":"https://api.github.com/users/mperham/following{/other_user}","gists_url":"https://api.github.com/users/mperham/gists{/gist_id}","starred_url":"https://api.github.com/users/mperham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mperham/subscriptions","organizations_url":"https://api.github.com/users/mperham/orgs","repos_url":"https://api.github.com/users/mperham/repos","events_url":"https://api.github.com/users/mperham/events{/privacy}","received_events_url":"https://api.github.com/users/mperham/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"ckoenig","id":209300,"node_id":"MDQ6VXNlcjIwOTMwMA==","avatar_url":"https://avatars.githubusercontent.com/u/209300?v=4","gravatar_id":"","url":"https://api.github.com/users/ckoenig","html_url":"https://github.com/ckoenig","followers_url":"https://api.github.com/users/ckoenig/followers","following_url":"https://api.github.com/users/ckoenig/following{/other_user}","gists_url":"https://api.github.com/users/ckoenig/gists{/gist_id}","starred_url":"https://api.github.com/users/ckoenig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ckoenig/subscriptions","organizations_url":"https://api.github.com/users/ckoenig/orgs","repos_url":"https://api.github.com/users/ckoenig/repos","events_url":"https://api.github.com/users/ckoenig/events{/privacy}","received_events_url":"https://api.github.com/users/ckoenig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T16:57:06Z","updated_at":"2021-02-02T16:57:06Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/issues/32","repository_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter","labels_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/issues/32/labels{/name}","comments_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/issues/32/comments","events_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/issues/32/events","html_url":"https://github.com/Strech/sidekiq-prometheus-exporter/issues/32","id":799467079,"node_id":"MDU6SXNzdWU3OTk0NjcwNzk=","number":32,"title":"Docker image does not work with Google Memorystore Redis instances","user":{"login":"ckoenig","id":209300,"node_id":"MDQ6VXNlcjIwOTMwMA==","avatar_url":"https://avatars.githubusercontent.com/u/209300?v=4","gravatar_id":"","url":"https://api.github.com/users/ckoenig","html_url":"https://github.com/ckoenig","followers_url":"https://api.github.com/users/ckoenig/followers","following_url":"https://api.github.com/users/ckoenig/following{/other_user}","gists_url":"https://api.github.com/users/ckoenig/gists{/gist_id}","starred_url":"https://api.github.com/users/ckoenig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ckoenig/subscriptions","organizations_url":"https://api.github.com/users/ckoenig/orgs","repos_url":"https://api.github.com/users/ckoenig/repos","events_url":"https://api.github.com/users/ckoenig/events{/privacy}","received_events_url":"https://api.github.com/users/ckoenig/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-02-02T16:57:06Z","updated_at":"2021-02-12T07:32:12Z","closed_at":"2021-02-12T07:32:12Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":121056165,"node_id":"MDEwOlJlcG9zaXRvcnkxMjEwNTYxNjU=","name":"sidekiq-prometheus-exporter","full_name":"Strech/sidekiq-prometheus-exporter","private":false,"owner":{"login":"Strech","id":920053,"node_id":"MDQ6VXNlcjkyMDA1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/920053?v=4","gravatar_id":"","url":"https://api.github.com/users/Strech","html_url":"https://github.com/Strech","followers_url":"https://api.github.com/users/Strech/followers","following_url":"https://api.github.com/users/Strech/following{/other_user}","gists_url":"https://api.github.com/users/Strech/gists{/gist_id}","starred_url":"https://api.github.com/users/Strech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Strech/subscriptions","organizations_url":"https://api.github.com/users/Strech/orgs","repos_url":"https://api.github.com/users/Strech/repos","events_url":"https://api.github.com/users/Strech/events{/privacy}","received_events_url":"https://api.github.com/users/Strech/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Strech/sidekiq-prometheus-exporter","description":"All the basic metrics of Sidekiq with pluggable contribs prepared for Prometheus","fork":false,"url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter","forks_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/forks","keys_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/teams","hooks_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/hooks","issue_events_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/issues/events{/number}","events_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/events","assignees_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/assignees{/user}","branches_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/branches{/branch}","tags_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/tags","blobs_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/git/refs{/sha}","trees_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/statuses/{sha}","languages_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/languages","stargazers_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/stargazers","contributors_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/contributors","subscribers_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/subscribers","subscription_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/subscription","commits_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/commits{/sha}","git_commits_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/git/commits{/sha}","comments_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/comments{/number}","issue_comment_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/issues/comments{/number}","contents_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/contents/{+path}","compare_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/merges","archive_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/downloads","issues_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/issues{/number}","pulls_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/pulls{/number}","milestones_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/milestones{/number}","notifications_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/labels{/name}","releases_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/releases{/id}","deployments_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/deployments","created_at":"2018-02-10T21:32:59Z","updated_at":"2025-10-15T21:25:03Z","pushed_at":"2025-04-27T21:09:22Z","git_url":"git://github.com/Strech/sidekiq-prometheus-exporter.git","ssh_url":"git@github.com:Strech/sidekiq-prometheus-exporter.git","clone_url":"https://github.com/Strech/sidekiq-prometheus-exporter.git","svn_url":"https://github.com/Strech/sidekiq-prometheus-exporter","homepage":"","size":1969,"stargazers_count":210,"watchers_count":210,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":41,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":4,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["metrics","prometheus","prometheus-exporter","sidekiq","sidekiq-prometheus-exporter"],"visibility":"public","forks":41,"open_issues":4,"watchers":210,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"The Docker image is using [Sidekiq 5.2.8](https://github.com/Strech/sidekiq-prometheus-exporter/blob/5ae01e936ab6b1f4772f2501e63dc3188084fb0c/docker/Dockerfile#L7). That version of Sidekiq still tries to set a client name for the Redis connection. This feature has been disabled by default in Sidekiq 6.0.7 by mperham/sidekiq#4479.\r\n\r\nThe problem is that SaaS providers, e.g. Google Cloud, might block calls to the `CLIENT` command in Redis. Thus `sidekiq-prometheus-exporter` fails to connect to Google Memorystore Redis instances.\r\n\r\nThere probably two options to fix this:\r\n1. Update the sidekiq gem version used by the Docker image. However, I don't know if there was a specific reason to pick that version.\r\n2. Update `config.ru` to handle some additional environment variable, e.g. `REDIS_DISABLE_ID`, and based on that add `id: nil` to the `config` hash for Sidekiq.\r\n\r\nI'm happy to prepare a PR if needed. But I would need to know, what the preferred approach would be.","reactions":{"url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/issues/32/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Strech/sidekiq-prometheus-exporter/issues/32/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":12683523058,"node_id":"REFE_lADOADDA9M4iZDMhzwAAAALz_zPy","url":"https://api.github.com/repos/sidekiq/sidekiq/issues/events/12683523058","actor":{"login":"jasonpenny","id":6033,"node_id":"MDQ6VXNlcjYwMzM=","avatar_url":"https://avatars.githubusercontent.com/u/6033?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonpenny","html_url":"https://github.com/jasonpenny","followers_url":"https://api.github.com/users/jasonpenny/followers","following_url":"https://api.github.com/users/jasonpenny/following{/other_user}","gists_url":"https://api.github.com/users/jasonpenny/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonpenny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonpenny/subscriptions","organizations_url":"https://api.github.com/users/jasonpenny/orgs","repos_url":"https://api.github.com/users/jasonpenny/repos","events_url":"https://api.github.com/users/jasonpenny/events{/privacy}","received_events_url":"https://api.github.com/users/jasonpenny/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"05f874edea405a9f7a28bc5d63f0d04b0d3fa4b3","commit_url":"https://api.github.com/repos/Appboy/sidekiq/commits/05f874edea405a9f7a28bc5d63f0d04b0d3fa4b3","created_at":"2024-05-02T13:39:46Z","performed_via_github_app":null}]