{"url":"https://api.github.com/repos/reduxjs/redux/issues/1221","repository_url":"https://api.github.com/repos/reduxjs/redux","labels_url":"https://api.github.com/repos/reduxjs/redux/issues/1221/labels{/name}","comments_url":"https://api.github.com/repos/reduxjs/redux/issues/1221/comments","events_url":"https://api.github.com/repos/reduxjs/redux/issues/1221/events","html_url":"https://github.com/reduxjs/redux/issues/1221","id":125784599,"node_id":"MDU6SXNzdWUxMjU3ODQ1OTk=","number":1221,"title":"Strange behaviour for subscriber notifications","user":{"login":"mattiasgronlund","id":7727472,"node_id":"MDQ6VXNlcjc3Mjc0NzI=","avatar_url":"https://avatars.githubusercontent.com/u/7727472?v=4","gravatar_id":"","url":"https://api.github.com/users/mattiasgronlund","html_url":"https://github.com/mattiasgronlund","followers_url":"https://api.github.com/users/mattiasgronlund/followers","following_url":"https://api.github.com/users/mattiasgronlund/following{/other_user}","gists_url":"https://api.github.com/users/mattiasgronlund/gists{/gist_id}","starred_url":"https://api.github.com/users/mattiasgronlund/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattiasgronlund/subscriptions","organizations_url":"https://api.github.com/users/mattiasgronlund/orgs","repos_url":"https://api.github.com/users/mattiasgronlund/repos","events_url":"https://api.github.com/users/mattiasgronlund/events{/privacy}","received_events_url":"https://api.github.com/users/mattiasgronlund/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":218057857,"node_id":"MDU6TGFiZWwyMTgwNTc4NTc=","url":"https://api.github.com/repos/reduxjs/redux/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-01-09T22:09:41Z","updated_at":"2018-05-12T19:50:25Z","closed_at":"2016-01-27T01:07:14Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"According to the documentation, subscribe(listener) should:\n\n> Adds a change listener. It will be called any time an action is dispatched, and some part of the state tree may potentially have changed. You may then call getState() to read the current state tree inside the callback.\n\nThen one would assume notifications are actually delivered when getState() returns the state which was the result of the action dispatched.\n\nBut the current implementation of dispatch, actually lets a new action be dispatched, before all listeners are notified (if the action was dispatched by one of the listeners).\n\nTherefore some listeners will get the notification of the second action, before the notification for the first action, but both with the latest state.\n\nThe current behavior makes the state.dirtyHandlerIds optimization in dnd-core end up missing updates to state.dragOperation.\n\nWhen listeners do optimizations like dnd-core, will that not break the time travel in redux-devtool?\n\nIf the behavior is intentional, I think it should be documented, and the code should probably be optimized so that the new state is only notified once.\n","closed_by":{"login":"gaearon","id":810438,"node_id":"MDQ6VXNlcjgxMDQzOA==","avatar_url":"https://avatars.githubusercontent.com/u/810438?v=4","gravatar_id":"","url":"https://api.github.com/users/gaearon","html_url":"https://github.com/gaearon","followers_url":"https://api.github.com/users/gaearon/followers","following_url":"https://api.github.com/users/gaearon/following{/other_user}","gists_url":"https://api.github.com/users/gaearon/gists{/gist_id}","starred_url":"https://api.github.com/users/gaearon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaearon/subscriptions","organizations_url":"https://api.github.com/users/gaearon/orgs","repos_url":"https://api.github.com/users/gaearon/repos","events_url":"https://api.github.com/users/gaearon/events{/privacy}","received_events_url":"https://api.github.com/users/gaearon/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/reduxjs/redux/issues/1221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/reduxjs/redux/issues/1221/timeline","performed_via_github_app":null,"state_reason":"completed"}