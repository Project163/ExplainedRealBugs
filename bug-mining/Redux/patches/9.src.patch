diff --git a/docs/recipes/WritingTests.md b/docs/recipes/WritingTests.md
index 83978cec..e2f15596 100644
--- a/docs/recipes/WritingTests.md
+++ b/docs/recipes/WritingTests.md
@@ -79,7 +79,7 @@ export default function todos(state = initialState, action) {
   switch (action.type) {
   case ADD_TODO:
     return [{
-      id: state.length,
+      id: state.reduce((maxId, todo) => Math.max(todo.id, maxId), -1) + 1,
       completed: false,
       text: action.text
     }, ...state];
diff --git a/examples/todomvc/reducers/todos.js b/examples/todomvc/reducers/todos.js
index 891b4559..9f9d7582 100644
--- a/examples/todomvc/reducers/todos.js
+++ b/examples/todomvc/reducers/todos.js
@@ -11,7 +11,7 @@ export default function todos(state = initialState, action) {
   switch (action.type) {
   case ADD_TODO:
     return [{
-      id: state.length,
+      id: state.reduce((maxId, todo) => Math.max(todo.id, maxId), -1) + 1,
       completed: false,
       text: action.text
     }, ...state];
diff --git a/examples/todomvc/test/reducers/todos.spec.js b/examples/todomvc/test/reducers/todos.spec.js
index 104b7c8d..d447a084 100644
--- a/examples/todomvc/test/reducers/todos.spec.js
+++ b/examples/todomvc/test/reducers/todos.spec.js
@@ -45,6 +45,33 @@ describe('todos reducer', () => {
       completed: false,
       id: 0
     }]);
+
+    expect(
+      todos([{
+        text: 'Run the tests',
+        completed: false,
+        id: 1
+      }, {
+        text: 'Use Redux',
+        completed: false,
+        id: 0
+      }], {
+        type: types.ADD_TODO,
+        text: 'Fix the tests'
+      })
+    ).toEqual([{
+      text: 'Fix the tests',
+      completed: false,
+      id: 2
+    }, {
+      text: 'Run the tests',
+      completed: false,
+      id: 1
+    }, {
+      text: 'Use Redux',
+      completed: false,
+      id: 0
+    }]);
   });
 
   it('should handle DELETE_TODO', () => {
@@ -185,4 +212,34 @@ describe('todos reducer', () => {
       id: 0
     }]);
   });
+
+  it('should not generate duplicate ids after CLEAR_COMPLETED', () => {
+    expect(
+      [{
+        type: types.COMPLETE_TODO,
+        id: 0
+      }, {
+        type: types.CLEAR_COMPLETED
+      }, {
+        type: types.ADD_TODO,
+        text: 'Write more tests'
+      }].reduce(todos, [{
+        id: 0,
+        completed: false,
+        text: 'Use Redux'
+      }, {
+        id: 1,
+        completed: false,
+        text: 'Write tests'
+      }])
+    ).toEqual([{
+      text: 'Write more tests',
+      completed: false,
+      id: 2
+    }, {
+      text: 'Write tests',
+      completed: false,
+      id: 1
+    }]);
+  });
 });
