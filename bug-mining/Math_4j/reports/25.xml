<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:25:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-201] T-test p-value precision hampered by machine epsilon</title>
                <link>https://issues.apache.org/jira/browse/MATH-201</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;The smallest p-value returned by TTestImpl.tTest() is the machine epsilon, which is 2.220446E-16 with IEEE754 64-bit double precision floats.&lt;/p&gt;

&lt;p&gt;We found this bug porting some analysis software from R to java, and noticed that the p-values did not match up.  We believe we&apos;ve identified why this is happening in commons-math-1.2, and a possible solution.&lt;/p&gt;

&lt;p&gt;Please be gentle, as I am not a statistics expert!&lt;/p&gt;

&lt;p&gt;The following method in org.apache.commons.math.stat.inference.TTestImpl currently implements the following method to calculate the p-value for a 2-sided, 2-sample t-test:&lt;/p&gt;

&lt;p&gt;protected double tTest(double m1, double m2, double v1, double v2,  double n1, double n2)&lt;/p&gt;

&lt;p&gt;and it returns:&lt;/p&gt;

&lt;p&gt;        1.0 - distribution.cumulativeProbability(-t, t);&lt;/p&gt;

&lt;p&gt;at line 1034 in version 1.2.&lt;/p&gt;

&lt;p&gt;double cumulativeProbability(double x0, double x1) is implemented by org.apache.commons.math.distribution.AbstractDisstribution, and returns:&lt;/p&gt;

&lt;p&gt;        return cumulativeProbability(x1) - cumulativeProbability(x0);&lt;/p&gt;

&lt;p&gt;So in essence, the p-value returned by TTestImpl.tTest() is:&lt;/p&gt;

&lt;p&gt;1.0 - (cumulativeProbability(t) - cumulativeProbabily(-t))&lt;/p&gt;

&lt;p&gt;For large-ish t-statistics, cumulativeProbabilty(-t) can get quite small, and cumulativeProbabilty(t) can get very close to 1.0.  When cumulativeProbability(-t) is less than the machine epsilon, we get p-values equal to zero because:&lt;/p&gt;

&lt;p&gt;1.0 - 1.0 + 0.0 = 0.0&lt;/p&gt;

&lt;p&gt;An alternative calculation for the p-value of a 2-sided, 2-sample t-test is:&lt;/p&gt;

&lt;p&gt;p = 2.0 * cumulativeProbability(-t)&lt;/p&gt;

&lt;p&gt;This calculation does not suffer from the machine epsilon problem, and we are now getting p-values much smaller than the 2.2E-16 limit we were seeing previously.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12393132">MATH-201</key>
            <summary>T-test p-value precision hampered by machine epsilon</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brentworden">Brent Worden</assignee>
                                    <reporter username="pwyngaard">Peter Wyngaard</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Apr 2008 16:31:20 +0000</created>
                <updated>Mon, 23 Jul 2012 23:17:16 +0000</updated>
                            <resolved>Sun, 6 Apr 2008 01:24:56 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12586080" author="brentworden" created="Sun, 6 Apr 2008 01:24:56 +0000"  >&lt;p&gt;SVN 645193.&lt;/p&gt;

&lt;p&gt;Changes applied.  Thank you for reporting this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>150418</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rvwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>