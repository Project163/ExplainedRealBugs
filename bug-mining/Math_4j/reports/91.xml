<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:26:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-326] getLInfNorm() uses wrong formula in both ArrayRealVector and OpenMapRealVector (in different ways)</title>
                <link>https://issues.apache.org/jira/browse/MATH-326</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;the L_infinity norm of a finite dimensional vector is just the max of the absolute value of its entries.&lt;/p&gt;

&lt;p&gt;The current implementation in ArrayRealVector has a typo:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; getLInfNorm() {
        &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; max = 0;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; a : data) {
            max += &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.max(max, &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.abs(a));
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; max;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the += should just be an =.&lt;/p&gt;

&lt;p&gt;There is sadly a unit test assuring us that this is the correct behavior (effectively a regression-only test, not a test for correctness).&lt;/p&gt;

&lt;p&gt;Worse, the implementation in OpenMapRealVector is not even positive semi-definite:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; getLInfNorm() {
        &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; max = 0;
        Iterator iter = entries.iterator();
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (iter.hasNext()) {
            iter.advance();
            max += iter.value();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; max;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I would suggest that this method be moved up to the AbstractRealVector superclass and implemented using the sparseIterator():&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; getLInfNorm() {
    &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; norm = 0;
    Iterator&amp;lt;Entry&amp;gt; it = sparseIterator();
    Entry e;
    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(it.hasNext() &amp;amp;&amp;amp; (e = it.next()) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      norm = &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.max(norm, &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.abs(e.getValue()));
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; norm;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unit tests with negative valued vectors would be helpful to check for this kind of thing in the future.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12444282">MATH-326</key>
            <summary>getLInfNorm() uses wrong formula in both ArrayRealVector and OpenMapRealVector (in different ways)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jake.mannix">Jake Mannix</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Dec 2009 00:09:20 +0000</created>
                <updated>Sat, 3 Apr 2010 20:37:40 +0000</updated>
                            <resolved>Tue, 29 Dec 2009 12:26:59 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12795040" author="luc" created="Tue, 29 Dec 2009 12:26:59 +0000"  >&lt;p&gt;Fixed in subversion repository as of r894367.&lt;br/&gt;
For consistency, the implementation of L1 and L2 norms have also been pushed upward in the abstract class.&lt;br/&gt;
Thanks for reporting and providing a fix to this bug&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34173</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rv5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160691</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>