<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:25:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-197] RandomDataImpl.nextPoisson() is extreme slow for large lambdas</title>
                <link>https://issues.apache.org/jira/browse/MATH-197</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;The RandomDataImpl.nextPoisson() is extreme slow for large lambdas:&lt;/p&gt;

&lt;p&gt;E.g. drawing 100 random numbers with lambda = 1000 takes around 10s on my dual core with 2.2GHz.&lt;br/&gt;
With lambda smaller than 500 everything is fine. Any ideas?&lt;/p&gt;

&lt;p&gt;    RandomDataImpl r = new RandomDataImpl();&lt;br/&gt;
    r.reSeed(101);&lt;/p&gt;

&lt;p&gt;    int d = 100;&lt;br/&gt;
    long poissonLambda = 1000;&lt;/p&gt;

&lt;p&gt;    long st = System.currentTimeMillis();&lt;br/&gt;
    for (int row = 0; row &amp;lt; d; row++) &lt;/p&gt;
{
      long nxtRnd = r.nextPoisson(poissonLambda);
    }
&lt;p&gt;    System.out.println(&quot;delta &quot; + (System.currentTimeMillis() - st));&lt;/p&gt;</description>
                <environment>&lt;p&gt;jdk1.6.0_04, windows xp&lt;/p&gt;</environment>
        <key id="12391611">MATH-197</key>
            <summary>RandomDataImpl.nextPoisson() is extreme slow for large lambdas</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brentworden">Brent Worden</assignee>
                                    <reporter username="zubow">Tolja Zubow</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Mar 2008 11:55:26 +0000</created>
                <updated>Fri, 7 Aug 2009 09:19:48 +0000</updated>
                            <resolved>Sun, 21 Jun 2009 15:10:50 +0000</resolved>
                                    <version>1.0</version>
                    <version>1.1</version>
                    <version>1.2</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12581371" author="luc" created="Sun, 23 Mar 2008 11:11:48 +0000"  >&lt;p&gt;The problems comes from the way the distribution is computed. A Poisson process is simulated and lots of random numbers are drawn, until there product reach some threshold.&lt;br/&gt;
If lambda is greater or equal to 746, the value of Math.exp(-lambda) cannot be represented anymore in a double and it is replaced by 0 (exactly 0). The previous value, for lambda = 745 is 4.9e-324, which is ... small.&lt;br/&gt;
In this case, the threshold is never reached and the loop is exited only because of an exceeded count.&lt;br/&gt;
This means that in addition to being long to obtain, the result is false (it will be exactly 1000 * lambda).&lt;/p&gt;

&lt;p&gt;So the current algorithm cannot handle large lambda values.&lt;/p&gt;

&lt;p&gt;Does anybody have a reference for another algorithm that could be used for large lambda values ?&lt;/p&gt;</comment>
                            <comment id="12581576" author="brentworden" created="Mon, 24 Mar 2008 15:55:44 +0000"  >&lt;p&gt;I&apos;ve been looking at  Devroye&apos;s &apos;Non-Uniform Random Variate Generation&apos; book.  The book is freely available at &lt;a href=&quot;http://cg.scs.carleton.ca/~luc/rnbookindex.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cg.scs.carleton.ca/~luc/rnbookindex.html&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Chapter 10 defines some rejection methods for Poisson generation which, the author claims, are uniformily fast for all lambda.&lt;/p&gt;

&lt;p&gt;I hope to soon implement one or more of the rejection methods and test its performance.&lt;/p&gt;</comment>
                            <comment id="12722346" author="jkff" created="Sun, 21 Jun 2009 12:04:28 +0000"  >&lt;p&gt;I have had a look at the source and it looks like the method is already implemented, so the bug should probably be closed?&lt;/p&gt;</comment>
                            <comment id="12722366" author="psteitz" created="Sun, 21 Jun 2009 15:10:50 +0000"  >&lt;p&gt;Fix was committed in r762194 by brentworden&lt;/p&gt;</comment>
                            <comment id="12740476" author="luc" created="Fri, 7 Aug 2009 09:19:48 +0000"  >&lt;p&gt;closing resolved issue for 2.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34137</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rvxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>