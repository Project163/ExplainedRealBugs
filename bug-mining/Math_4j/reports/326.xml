<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:27:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-832] Brent solver calculates incorrect root (namley Double.MAX_VALUE)</title>
                <link>https://issues.apache.org/jira/browse/MATH-832</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;&lt;b&gt;Wolfram-Alpha-Solution:&lt;/b&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.wolframalpha.com/input/?i=min+100*sqrt%28x%29%2B1000000%2Fx%2B10000%2Fsqrt%28x%29+with+x%3E0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.wolframalpha.com/input/?i=min+100*sqrt%28x%29%2B1000000%2Fx%2B10000%2Fsqrt%28x%29+with+x%3E0&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;min{100 sqrt(x)+1000000/x+10000/sqrt(x)|x&amp;gt;0}~~4431.94 at x~~804.936&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Java-Input:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; startValue1 = 100 + 1000000 + 10000;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; startValue2 = 100;

UnivariateFunction uf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UnivariateFunction() {
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; value(&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; x) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 100/(2*&lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.sqrt(x)) - 1000000/&lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.pow(x,2) - 10000/(2*&lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.pow(x,(&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;) 3/2));
    }
};

&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(
    (&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BrentSolver()).solve(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE, uf, 1/&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.MAX_VALUE, &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.MAX_VALUE, startValue1)
);
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(
    (&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BrentSolver()).solve(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE, uf, 1/&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.MAX_VALUE, &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.MAX_VALUE, startValue2)
);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Java-Output:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;804.9355821866686
1.7976931348623157E308 (= &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.MAX_VALUE)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;</description>
                <environment>&lt;p&gt;Netbeans 7.1.2&lt;/p&gt;</environment>
        <key id="12600065">MATH-832</key>
            <summary>Brent solver calculates incorrect root (namley Double.MAX_VALUE)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alex87">Alex</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jul 2012 20:56:58 +0000</created>
                <updated>Mon, 4 Mar 2013 18:57:31 +0000</updated>
                            <resolved>Fri, 27 Jul 2012 15:10:32 +0000</resolved>
                                    <version>3.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13421841" author="erans" created="Tue, 24 Jul 2012 22:33:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;min{100 sqrt(x)+1000000/x+10000/sqrt(x)|x&amp;gt;0}&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Are you using the right class?&lt;br/&gt;
Optimizing (a.k.a. finding the minimum) and solving (a.k.a. finding the root) are not the same thing.&lt;/p&gt;

&lt;p&gt;Please try this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testMath832() {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; UnivariateFunction f = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UnivariateFunction() {
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; value(&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; x) {
                &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; sqrtX = FastMath.sqrt(x);
                &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; a = 1e2 * sqrtX;
                &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; b = 1e6 / x;
                &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; c = 1e4 / sqrtX;

                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; a + b + c;
            }
        };

    UnivariateOptimizer optimizer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BrentOptimizer(1e-10, 1e-8);
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; result = optimizer.optimize(1483,
                                             f,
                                             GoalType.MINIMIZE,
                                             &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.MIN_VALUE,
                                             &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.MAX_VALUE).getPoint();

    Assert.assertEquals(804.935582, result, 1e-6);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13422980" author="alex87" created="Thu, 26 Jul 2012 09:25:59 +0000"  >&lt;p&gt;I tried testMath832() and there was no error (although i&apos;m not sure if i did it right - i never worked with JUnit before). But now i think i know where the problem is: It isn&apos;t the difference between optimizing and solving (minimizing a function (that derivative has only one root) =&amp;gt; finding the root of the derivative) but a numerical issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.wolframalpha.com/input/?i=Plot(100*sqrt%28x%29%2B1000000%2Fx%2B10000%2Fsqrt%28x%29%2C+&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.wolframalpha.com/input/?i=Plot(100*sqrt%28x%29%2B1000000%2Fx%2B10000%2Fsqrt%28x%29%2C+&lt;/a&gt;&lt;/p&gt;
{x%2C+0%2C+1000})&lt;br/&gt;
&lt;a href=&quot;http://www.wolframalpha.com/input/?i=Plot(d%2Fdx+100*sqrt%28x%29%2B1000000%2Fx%2B10000%2Fsqrt%28x%29%2C+&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.wolframalpha.com/input/?i=Plot(d%2Fdx+100*sqrt%28x%29%2B1000000%2Fx%2B10000%2Fsqrt%28x%29%2C+&lt;/a&gt;{x%2C+0%2C+1000}
&lt;p&gt;)&lt;br/&gt;
[http://www.wolframalpha.com/input/?i=Plot(d%2Fdx+100*sqrt%28x%29%2B1000000%2Fx%2B10000%2Fsqrt%28x%29%2C+&lt;/p&gt;
{x%2C+10^10%2C+10^100}
&lt;p&gt;)]&lt;/p&gt;

&lt;p&gt;An upper bound for the interval sufficiently smaller than infinity causes no problems:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(
        (&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BrentSolver()).solve(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE, uf, 1/&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.MAX_VALUE, 1.0e10, startValue2)
);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13423012" author="erans" created="Thu, 26 Jul 2012 11:30:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; But now i think i know where the problem is &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I do not. Is there a problem in Commons Math?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;An upper bound for the interval sufficiently smaller than infinity causes no problems&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The initial report seems to indicate that you wanted to obtain the minimum of &quot;uf&quot;. Then, in your last comment, you still use &quot;BrentSolver&quot; which will search for the root (of that same &quot;uf&quot;).&lt;br/&gt;
Which is it?&lt;/p&gt;

&lt;p&gt;Also, please correct the links in your previous comment; they seem broken (parts not being interpreted as links). Even better would be to upload files (either figures, or source code to reproduce the problem) to this page, instead of those unreadable links!&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="13423061" author="erans" created="Thu, 26 Jul 2012 13:38:57 +0000"  >&lt;p&gt;&quot;BrentSolver&quot; (on the derivative of &quot;uf&quot;) and &quot;Brentoptimizer&quot; (on &quot;uf&quot;) both return the same value.&lt;/p&gt;

&lt;p&gt;What you encountered is probably a limitation of finite precision: large values (on the right of the search interval) caused the solver to stop iterating too early: You might want to try with other values of the tolerances (arguments to the constructor).&lt;/p&gt;</comment>
                            <comment id="13423917" author="erans" created="Fri, 27 Jul 2012 15:10:32 +0000"  >&lt;p&gt;If you still consider that there is a problem, please file another report, with a more precise description of the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292286</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rt1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>