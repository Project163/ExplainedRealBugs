<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:25:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-259] Bugs in Frequency API</title>
                <link>https://issues.apache.org/jira/browse/MATH-259</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;I think the existing Frequency API has some bugs in it.&lt;/p&gt;

&lt;p&gt;The addValue(Object v) method allows one to add a plain Object, but one cannot add anything further to the instance, as the second add fails with IllegalArgumentException.&lt;br/&gt;
In fact, the problem is with the first call to addValue(Object) which should not allow a plain Object to be added - it should only allow Comparable objects.&lt;br/&gt;
This could be fixed by checking that the object is Comparable.&lt;/p&gt;

&lt;p&gt;Similar considerations apply to the getCumFreq(Object) and getCumPct(Object) methods - they will only work with objects that implement Comparable.&lt;/p&gt;

&lt;p&gt;The getCount(Object) and getPct(Object) methods don&apos;t fail when given a non-Comparable object (because the class cast exception is caught), however they just return 0 as if the object was not present:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; OBJ = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;();
        f.addValue(OBJ); &lt;span class=&quot;code-comment&quot;&gt;// This ought to fail, but doesn&apos;t, causing the unexpected behaviour below
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(f.getCount(OBJ)); &lt;span class=&quot;code-comment&quot;&gt;// 0
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(f.getPct(OBJ)); &lt;span class=&quot;code-comment&quot;&gt;// 0.0&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Rather than adding extra checks for Comparable, it seems to me that the API would be much improved by using Comparable instead of Object.&lt;br/&gt;
Also, it should make it easier to implement generics.&lt;/p&gt;

&lt;p&gt;However, this would cause compilation failures for some programs that pass Object rather than Comparable to the class.&lt;br/&gt;
These would need recoding, but I think they would continue to run OK against the new API.&lt;/p&gt;

&lt;p&gt;It would also affect the run-time behaviour slightly, as the first attempt to add a non-Comparable object would fail, rather than the second add of a possibly valid object.&lt;br/&gt;
But is that a viable program? It can only add one object, and any attempt to get statistics will either return 0 or an Exception, and applying the instanceof fix would also cause it to fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422113">MATH-259</key>
            <summary>Bugs in Frequency API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Apr 2009 13:16:51 +0000</created>
                <updated>Fri, 7 Aug 2009 09:12:49 +0000</updated>
                            <resolved>Sat, 25 Apr 2009 17:52:18 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12699014" author="psteitz" created="Wed, 15 Apr 2009 01:20:49 +0000"  >&lt;p&gt;I am OK with adding a check and throwing illegalArgumentExeption if an object that does not implement Comparable is supplied to these methods (as indicated in the javadoc), but not keen on introducing the compatibility issue.&lt;/p&gt;</comment>
                            <comment id="12700183" author="sebb@apache.org" created="Fri, 17 Apr 2009 13:55:10 +0000"  >&lt;p&gt;See:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=765996&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=765996&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-259&quot; title=&quot;Bugs in Frequency API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-259&quot;&gt;&lt;del&gt;MATH-259&lt;/del&gt;&lt;/a&gt; - check for Comparable when adding values&lt;/p&gt;

&lt;p&gt;I overlooked the change of Exception, so there&apos;s also:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=766003&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=766003&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-259&quot; title=&quot;Bugs in Frequency API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-259&quot;&gt;&lt;del&gt;MATH-259&lt;/del&gt;&lt;/a&gt; - throw IllegalArgument rather than ClassCast to better retain original behaviour&lt;/p&gt;

&lt;p&gt;==&lt;/p&gt;

&lt;p&gt;I added a new method&lt;/p&gt;

&lt;p&gt;   public void addValue(Comparable&amp;lt;?&amp;gt; v)&lt;/p&gt;

&lt;p&gt;which is called from&lt;/p&gt;

&lt;p&gt;   public void addValue(Object v)&lt;/p&gt;

&lt;p&gt;which I took the liberty of deprecating, so the compiler will warn users about non-Comparable objects.&lt;br/&gt;
Hope that&apos;s OK.&lt;/p&gt;

&lt;p&gt;Note that it&apos;s still possible for mutually non-Comparable values to be added, because the code does not check comparisons both ways, it relies on HashMap to do so.&lt;/p&gt;

&lt;p&gt;I.e. if B.compareTo(A) is OK, but A.compareTo(B) does not exist, then it is possible to add A, then B without any complaints.&lt;br/&gt;
This later causes a ClassCastException in some of the getXXX() methods.&lt;br/&gt;
However this is not a valid Comparable implementation, as they are supposed to be symmetric.&lt;/p&gt;</comment>
                            <comment id="12702738" author="sebb@apache.org" created="Sat, 25 Apr 2009 17:52:18 +0000"  >&lt;p&gt;API now tidied up as far as possible whilst still being compatible.&lt;/p&gt;</comment>
                            <comment id="12740460" author="luc" created="Fri, 7 Aug 2009 09:12:49 +0000"  >&lt;p&gt;closing resolved issue for 2.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12422817">MATH-261</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34203</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rvjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160756</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>