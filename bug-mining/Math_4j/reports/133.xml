<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:26:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-373] StatUtils.sum returns NaN for zero-length arrays</title>
                <link>https://issues.apache.org/jira/browse/MATH-373</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;StatUtils.sum returns NaN for zero-length arrays, which is:&lt;/p&gt;

&lt;p&gt;1. inconsistent with the mathematical notion of sum: in maths, sum_&lt;/p&gt;
{i=0}^{N-1} a_i will be 0 for N=0. In particular, the identity&lt;br/&gt;
&lt;br/&gt;
sum_{i=0}
&lt;p&gt;^&lt;/p&gt;
{k-1}
&lt;p&gt; a_i + sum_&lt;/p&gt;
{i=k}
&lt;p&gt;^&lt;/p&gt;
{N-1} = sum_{i=0}^{N-1}

&lt;p&gt;is broken for k = 0, since NaN + x = NaN, not x.&lt;/p&gt;

&lt;p&gt;2. introduces hard to debug erros (returning a NaN is one of the worst forms of reporting an exceptional condition, as NaNs propagate silently and require manual tracing during the debugging)&lt;/p&gt;

&lt;p&gt;3. enforces &quot;special case&quot; handling when the user expects that the summed array can have a zero length.&lt;/p&gt;

&lt;p&gt;The correct behaviour is, in my opinion, to return 0.0, not NaN in the above case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466353">MATH-373</key>
            <summary>StatUtils.sum returns NaN for zero-length arrays</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rwerp">Roman Werpachowski</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jun 2010 14:54:00 +0000</created>
                <updated>Sat, 24 Mar 2012 16:16:56 +0000</updated>
                            <resolved>Thu, 2 Sep 2010 04:52:33 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12876512" author="billbarker" created="Tue, 8 Jun 2010 01:37:46 +0000"  >&lt;p&gt;I agree with the reasoning here, and we should do it this way in 3.0.  However it is an incompatible change to do in a point release, so I&apos;m going to wait for more feed back from other developers before I make any changes to the current code.&lt;/p&gt;

&lt;p&gt;I&apos;m thinking that adding a method to AbstractUnivariateStatistic that looks like:&lt;br/&gt;
   protected boolean test( final double[] values,  final int begin,   final int length, final boolean allowEmpty)&lt;/p&gt;

&lt;p&gt;that would have the test:&lt;br/&gt;
   if(length == 0 &amp;amp;&amp;amp; !allowEmpty)&lt;br/&gt;
        return false;&lt;/p&gt;

&lt;p&gt;The current test method can call the new one with allowEmpty=false for backwards compatibility.  Then we can decide on which statistics should have a zero value on the empty set.&lt;/p&gt;</comment>
                            <comment id="12877689" author="billbarker" created="Fri, 11 Jun 2010 01:57:29 +0000"  >&lt;p&gt;The consensus of the commons-math developers is that, since the current behavior is documented in 2.x, that this will have to wait for 3.0.  Fixing this in 2.x would introduce a too large incompatibility change to include in 2.x.&lt;/p&gt;

&lt;p&gt;I can attach a patch against 2.x that fixes this, as long as anybody using the patch understands that it isn&apos;t supported.&lt;/p&gt;
</comment>
                            <comment id="12877784" author="sebb@apache.org" created="Fri, 11 Jun 2010 11:19:20 +0000"  >&lt;p&gt;Possibly crazy idea: &lt;/p&gt;

&lt;p&gt;if Math 3.0 is going to change package names (which may be necessary), one could introduce the fix using a math3 package name?&lt;/p&gt;</comment>
                            <comment id="12877803" author="erans" created="Fri, 11 Jun 2010 12:14:59 +0000"  >&lt;p&gt;IIRC, changing the package name had been suggested and discussed for 2.0.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;One argument is that, to be consistent,  you&amp;#39;d have to change the name at every major release...&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="12877807" author="rwerp" created="Fri, 11 Jun 2010 12:37:16 +0000"  >&lt;p&gt;Speaking as a maintainer of client code which uses ACM, I&apos;d rather cope with occasional incompatibilities in the same packages, than have to change ALL my client code to keep up with the package name changes after every release. A reason to change the package name would be if you wanted to use the old and new version side by side, but that would not be a common usage pattern for ACM, I think.&lt;/p&gt;</comment>
                            <comment id="12878204" author="billbarker" created="Sat, 12 Jun 2010 04:04:42 +0000"  >&lt;p&gt;As Gilles mentioned, changing the package name for commons-math was discussed and voted on for 2.x.  The result of the vote was to keep the package name, since commons-math won&apos;t usually be provided by a third party library.  Since nothing much has changed, I can&apos;t see that commons-math would change it&apos;s package for version 3.0.&lt;/p&gt;</comment>
                            <comment id="12905401" author="billbarker" created="Thu, 2 Sep 2010 04:52:33 +0000"  >&lt;p&gt;This will be fixed in the 3.0 build.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>150531</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ruvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160645</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>