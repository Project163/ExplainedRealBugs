<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:28:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-865] Wide bounds to CMAESOptimizer result in NaN parameters passed to fitness function</title>
                <link>https://issues.apache.org/jira/browse/MATH-865</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;If you give large values as lower/upper bounds (for example -Double.MAX_VALUE as a lower bound), the optimizer can call the fitness function with parameters set to NaN.  My guess is this is due to FitnessFunction.encode/decode generating NaN when normalizing/denormalizing parameters.  For example, if the difference between the lower and upper bound is greater than Double.MAX_VALUE, encode could divide infinity by infinity.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12608333">MATH-865</key>
            <summary>Wide bounds to CMAESOptimizer result in NaN parameters passed to fitness function</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erans">Gilles Sadowski</assignee>
                                    <reporter username="fhess">Frank Hess</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Sep 2012 21:10:42 +0000</created>
                <updated>Mon, 4 Mar 2013 18:53:33 +0000</updated>
                            <resolved>Sat, 22 Sep 2012 10:04:55 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13459118" author="fhess" created="Wed, 19 Sep 2012 21:33:08 +0000"  >&lt;p&gt;Also, if the first call to the fitness function returns NaN and gets stored in the bestValue local variable in doOptimize() before the generationLoop, then the optimization will completely fail.  This is because the later comparison if(bestValue &amp;gt; bestFitness) will always return false if bestValue is NaN and no more optimal result will ever be found.&lt;/p&gt;</comment>
                            <comment id="13459161" author="fhess" created="Wed, 19 Sep 2012 22:16:54 +0000"  >&lt;p&gt;Attached test program that demonstrates the problem.&lt;/p&gt;</comment>
                            <comment id="13459176" author="fhess" created="Wed, 19 Sep 2012 22:41:47 +0000"  >&lt;p&gt;Another issue is, if you use bounds then the bounded range is mapped onto the interval &lt;span class=&quot;error&quot;&gt;&amp;#91;0,1&amp;#93;&lt;/span&gt; where the fit is performed, and then blown back up to your specified bounds after getting a result.  This means if you use a large range, the discreteness of Double variables becomes very noticeable in the fit results.  For example, if you set the boundsMagnitude to 5e15 (approx. 1./Math.ulp(1.)) in the Math865Test program I attached, the fitter is unable to fit anything to a precision smaller than 1.&lt;/p&gt;</comment>
                            <comment id="13460560" author="erans" created="Fri, 21 Sep 2012 15:33:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;My guess is this is due to FitnessFunction.encode &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; generating NaN&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good guess.&lt;/p&gt;

&lt;p&gt;I&apos;ve introduced a check on the bounds that now throws an exception in case of overflow.&lt;br/&gt;
Please test revision 1388552.&lt;/p&gt;

&lt;p&gt;Thanks for the report.&lt;/p&gt;</comment>
                            <comment id="13460905" author="fhess" created="Fri, 21 Sep 2012 22:47:48 +0000"  >&lt;p&gt;Yes, it throws the exception for me now (revision 1388555), thanks.  The secondary issue i mentioned in the comment is still a problem, but I&apos;ll open a new bug for that.&lt;/p&gt;</comment>
                            <comment id="13466351" author="erans" created="Sat, 29 Sep 2012 22:50:47 +0000"  >&lt;p&gt;This issue is superseded by &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-867&quot; title=&quot;CMAESOptimizer with bounds fits finely near lower bound and coarsely near upper bound. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-867&quot;&gt;&lt;del&gt;MATH-867&lt;/del&gt;&lt;/a&gt; whose fix entails that an overflow cannot happen anymore.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12545815" name="Math865Test.java" size="1541" author="fhess" created="Wed, 19 Sep 2012 22:16:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292268</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rsxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160332</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>