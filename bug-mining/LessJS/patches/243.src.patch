diff --git a/packages/less/Gruntfile.js b/packages/less/Gruntfile.js
index 07d7c611..f4101919 100644
--- a/packages/less/Gruntfile.js
+++ b/packages/less/Gruntfile.js
@@ -235,31 +235,31 @@ module.exports = function(grunt) {
                     // @TODO: make this more thorough
                     // CURRENT OPTIONS
                     // --math
-                    "node bin/lessc --math=always test/less/lazy-eval.less tmp/lazy-eval.css",
-                    "node bin/lessc --math=parens-division test/less/lazy-eval.less tmp/lazy-eval.css",
-                    "node bin/lessc --math=parens test/less/lazy-eval.less tmp/lazy-eval.css",
-                    "node bin/lessc --math=strict test/less/lazy-eval.less tmp/lazy-eval.css",
-                    "node bin/lessc --math=strict-legacy test/less/lazy-eval.less tmp/lazy-eval.css",
+                    "node bin/lessc --math=always test/less/_main/lazy-eval.less tmp/lazy-eval.css",
+                    "node bin/lessc --math=parens-division test/less/_main/lazy-eval.less tmp/lazy-eval.css",
+                    "node bin/lessc --math=parens test/less/_main/lazy-eval.less tmp/lazy-eval.css",
+                    "node bin/lessc --math=strict test/less/_main/lazy-eval.less tmp/lazy-eval.css",
+                    "node bin/lessc --math=strict-legacy test/less/_main/lazy-eval.less tmp/lazy-eval.css",
 
                     // DEPRECATED OPTIONS
                     // --strict-math
-                    "node bin/lessc --strict-math=on test/less/lazy-eval.less tmp/lazy-eval.css"
+                    "node bin/lessc --strict-math=on test/less/_main/lazy-eval.less tmp/lazy-eval.css"
                 ].join(" && ")
             },
             plugin: {
                 command: [
-                    'node bin/lessc --clean-css="--s1 --advanced" test/less/lazy-eval.less tmp/lazy-eval.css',
+                    'node bin/lessc --clean-css="--s1 --advanced" test/less/_main/lazy-eval.less tmp/lazy-eval.css',
                     "cd lib",
-                    'node ../bin/lessc --clean-css="--s1 --advanced" ../test/less/lazy-eval.less ../tmp/lazy-eval.css',
+                    'node ../bin/lessc --clean-css="--s1 --advanced" ../test/less/_main/lazy-eval.less ../tmp/lazy-eval.css',
                     "cd ..",
                     // Test multiple plugins
-                    'node bin/lessc --plugin=clean-css="--s1 --advanced" --plugin=autoprefix="ie 11,Edge >= 13,Chrome >= 47,Firefox >= 45,iOS >= 9.2,Safari >= 9" test/less/lazy-eval.less tmp/lazy-eval.css'
+                    'node bin/lessc --plugin=clean-css="--s1 --advanced" --plugin=autoprefix="ie 11,Edge >= 13,Chrome >= 47,Firefox >= 45,iOS >= 9.2,Safari >= 9" test/less/_main/lazy-eval.less tmp/lazy-eval.css'
                 ].join(" && ")
             },
             "sourcemap-test": {
                 // quoted value doesn't seem to get picked up by time-grunt, or isn't output, at least; maybe just "sourcemap" is fine?
                 command: [
-                    "node bin/lessc --source-map=test/sourcemaps/maps/import-map.map test/less/import.less test/sourcemaps/import.css",
+                    "node bin/lessc --source-map=test/sourcemaps/maps/import-map.map test/less/_main/import.less test/sourcemaps/import.css",
                     "node bin/lessc --source-map test/less/sourcemaps/basic.less test/sourcemaps/basic.css"
                 ].join(" && ")
             }
diff --git a/packages/less/lib/less/tree/import.js b/packages/less/lib/less/tree/import.js
index 3b580f6f..77ce3bc6 100644
--- a/packages/less/lib/less/tree/import.js
+++ b/packages/less/lib/less/tree/import.js
@@ -193,11 +193,14 @@ var Import = /** @class */ (function (_super) {
             }
             return newImport;
         }
-        else {
+        else if (this.root) {
             ruleset = new ruleset_1.default(null, utils.copyArray(this.root.rules));
             ruleset.evalImports(context);
             return this.features ? new media_1.default(ruleset.rules, this.features.value) : ruleset.rules;
         }
+        else {
+            return [];
+        }
     };
     return Import;
 }(node_1.default));
diff --git a/packages/less/lib/less/tree/import.js.map b/packages/less/lib/less/tree/import.js.map
index 1a328bd7..bbd1f9c7 100644
--- a/packages/less/lib/less/tree/import.js.map
+++ b/packages/less/lib/less/tree/import.js.map
@@ -1 +1 @@
-{"version":3,"file":"import.js","sourceRoot":"","sources":["../../../src/less/tree/import.js"],"names":[],"mappings":"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","sourcesContent":["import Node from './node';\nimport Media from './media';\nimport URL from './url';\nimport Quoted from './quoted';\nimport Ruleset from './ruleset';\nimport Anonymous from './anonymous';\nimport * as utils from '../utils';\nimport LessError from '../less-error';\n\n//\n// CSS @import node\n//\n// The general strategy here is that we don't want to wait\n// for the parsing to be completed, before we start importing\n// the file. That's because in the context of a browser,\n// most of the time will be spent waiting for the server to respond.\n//\n// On creation, we push the import path to our import queue, though\n// `import,push`, we also pass it a callback, which it'll call once\n// the file has been fetched, and parsed.\n//\nclass Import extends Node {\n    constructor(path, features, options, index, currentFileInfo, visibilityInfo) {\n        super();\n\n        this.options = options;\n        this._index = index;\n        this._fileInfo = currentFileInfo;\n        this.path = path;\n        this.features = features;\n        this.allowRoot = true;\n\n        if (this.options.less !== undefined || this.options.inline) {\n            this.css = !this.options.less || this.options.inline;\n        } else {\n            const pathValue = this.getPath();\n            if (pathValue && /[#\\.\\&\\?]css([\\?;].*)?$/.test(pathValue)) {\n                this.css = true;\n            }\n        }\n        this.copyVisibilityInfo(visibilityInfo);\n        this.setParent(this.features, this);\n        this.setParent(this.path, this);\n    }\n\n    accept(visitor) {\n        if (this.features) {\n            this.features = visitor.visit(this.features);\n        }\n        this.path = visitor.visit(this.path);\n        if (!this.options.isPlugin && !this.options.inline && this.root) {\n            this.root = visitor.visit(this.root);\n        }\n    }\n\n    genCSS(context, output) {\n        if (this.css && this.path._fileInfo.reference === undefined) {\n            output.add('@import ', this._fileInfo, this._index);\n            this.path.genCSS(context, output);\n            if (this.features) {\n                output.add(' ');\n                this.features.genCSS(context, output);\n            }\n            output.add(';');\n        }\n    }\n\n    getPath() {\n        return (this.path instanceof URL) ?\n            this.path.value.value : this.path.value;\n    }\n\n    isVariableImport() {\n        let path = this.path;\n        if (path instanceof URL) {\n            path = path.value;\n        }\n        if (path instanceof Quoted) {\n            return path.containsVariables();\n        }\n\n        return true;\n    }\n\n    evalForImport(context) {\n        let path = this.path;\n\n        if (path instanceof URL) {\n            path = path.value;\n        }\n\n        return new Import(path.eval(context), this.features, this.options, this._index, this._fileInfo, this.visibilityInfo());\n    }\n\n    evalPath(context) {\n        const path = this.path.eval(context);\n        const fileInfo = this._fileInfo;\n\n        if (!(path instanceof URL)) {\n            // Add the rootpath if the URL requires a rewrite\n            const pathValue = path.value;\n            if (fileInfo &&\n                pathValue &&\n                context.pathRequiresRewrite(pathValue)) {\n                path.value = context.rewritePath(pathValue, fileInfo.rootpath);\n            } else {\n                path.value = context.normalizePath(path.value);\n            }\n        }\n\n        return path;\n    }\n\n    eval(context) {\n        const result = this.doEval(context);\n        if (this.options.reference || this.blocksVisibility()) {\n            if (result.length || result.length === 0) {\n                result.forEach(node => {\n                    node.addVisibilityBlock();\n                }\n                );\n            } else {\n                result.addVisibilityBlock();\n            }\n        }\n        return result;\n    }\n\n    doEval(context) {\n        let ruleset;\n        let registry;\n        const features = this.features && this.features.eval(context);\n\n        if (this.options.isPlugin) {\n            if (this.root && this.root.eval) {\n                try {\n                    this.root.eval(context);\n                }\n                catch (e) {\n                    e.message = 'Plugin error during evaluation';\n                    throw new LessError(e, this.root.imports, this.root.filename);\n                }\n            }\n            registry = context.frames[0] && context.frames[0].functionRegistry;\n            if ( registry && this.root && this.root.functions ) {\n                registry.addMultiple( this.root.functions );\n            }\n\n            return [];\n        }\n\n        if (this.skip) {\n            if (typeof this.skip === 'function') {\n                this.skip = this.skip();\n            }\n            if (this.skip) {\n                return [];\n            }\n        }\n        if (this.options.inline) {\n            const contents = new Anonymous(this.root, 0,\n                {\n                    filename: this.importedFilename,\n                    reference: this.path._fileInfo && this.path._fileInfo.reference\n                }, true, true);\n\n            return this.features ? new Media([contents], this.features.value) : [contents];\n        } else if (this.css) {\n            const newImport = new Import(this.evalPath(context), features, this.options, this._index);\n            if (!newImport.css && this.error) {\n                throw this.error;\n            }\n            return newImport;\n        } else {\n            ruleset = new Ruleset(null, utils.copyArray(this.root.rules));\n            ruleset.evalImports(context);\n\n            return this.features ? new Media(ruleset.rules, this.features.value) : ruleset.rules;\n        }\n    }\n}\n\nImport.prototype.type = 'Import';\nexport default Import;\n"]}
\ No newline at end of file
+{"version":3,"file":"import.js","sourceRoot":"","sources":["../../../src/less/tree/import.js"],"names":[],"mappings":"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","sourcesContent":["import Node from './node';\nimport Media from './media';\nimport URL from './url';\nimport Quoted from './quoted';\nimport Ruleset from './ruleset';\nimport Anonymous from './anonymous';\nimport * as utils from '../utils';\nimport LessError from '../less-error';\n\n//\n// CSS @import node\n//\n// The general strategy here is that we don't want to wait\n// for the parsing to be completed, before we start importing\n// the file. That's because in the context of a browser,\n// most of the time will be spent waiting for the server to respond.\n//\n// On creation, we push the import path to our import queue, though\n// `import,push`, we also pass it a callback, which it'll call once\n// the file has been fetched, and parsed.\n//\nclass Import extends Node {\n    constructor(path, features, options, index, currentFileInfo, visibilityInfo) {\n        super();\n\n        this.options = options;\n        this._index = index;\n        this._fileInfo = currentFileInfo;\n        this.path = path;\n        this.features = features;\n        this.allowRoot = true;\n\n        if (this.options.less !== undefined || this.options.inline) {\n            this.css = !this.options.less || this.options.inline;\n        } else {\n            const pathValue = this.getPath();\n            if (pathValue && /[#\\.\\&\\?]css([\\?;].*)?$/.test(pathValue)) {\n                this.css = true;\n            }\n        }\n        this.copyVisibilityInfo(visibilityInfo);\n        this.setParent(this.features, this);\n        this.setParent(this.path, this);\n    }\n\n    accept(visitor) {\n        if (this.features) {\n            this.features = visitor.visit(this.features);\n        }\n        this.path = visitor.visit(this.path);\n        if (!this.options.isPlugin && !this.options.inline && this.root) {\n            this.root = visitor.visit(this.root);\n        }\n    }\n\n    genCSS(context, output) {\n        if (this.css && this.path._fileInfo.reference === undefined) {\n            output.add('@import ', this._fileInfo, this._index);\n            this.path.genCSS(context, output);\n            if (this.features) {\n                output.add(' ');\n                this.features.genCSS(context, output);\n            }\n            output.add(';');\n        }\n    }\n\n    getPath() {\n        return (this.path instanceof URL) ?\n            this.path.value.value : this.path.value;\n    }\n\n    isVariableImport() {\n        let path = this.path;\n        if (path instanceof URL) {\n            path = path.value;\n        }\n        if (path instanceof Quoted) {\n            return path.containsVariables();\n        }\n\n        return true;\n    }\n\n    evalForImport(context) {\n        let path = this.path;\n\n        if (path instanceof URL) {\n            path = path.value;\n        }\n\n        return new Import(path.eval(context), this.features, this.options, this._index, this._fileInfo, this.visibilityInfo());\n    }\n\n    evalPath(context) {\n        const path = this.path.eval(context);\n        const fileInfo = this._fileInfo;\n\n        if (!(path instanceof URL)) {\n            // Add the rootpath if the URL requires a rewrite\n            const pathValue = path.value;\n            if (fileInfo &&\n                pathValue &&\n                context.pathRequiresRewrite(pathValue)) {\n                path.value = context.rewritePath(pathValue, fileInfo.rootpath);\n            } else {\n                path.value = context.normalizePath(path.value);\n            }\n        }\n\n        return path;\n    }\n\n    eval(context) {\n        const result = this.doEval(context);\n        if (this.options.reference || this.blocksVisibility()) {\n            if (result.length || result.length === 0) {\n                result.forEach(node => {\n                    node.addVisibilityBlock();\n                }\n                );\n            } else {\n                result.addVisibilityBlock();\n            }\n        }\n        return result;\n    }\n\n    doEval(context) {\n        let ruleset;\n        let registry;\n        const features = this.features && this.features.eval(context);\n\n        if (this.options.isPlugin) {\n            if (this.root && this.root.eval) {\n                try {\n                    this.root.eval(context);\n                }\n                catch (e) {\n                    e.message = 'Plugin error during evaluation';\n                    throw new LessError(e, this.root.imports, this.root.filename);\n                }\n            }\n            registry = context.frames[0] && context.frames[0].functionRegistry;\n            if ( registry && this.root && this.root.functions ) {\n                registry.addMultiple( this.root.functions );\n            }\n\n            return [];\n        }\n\n        if (this.skip) {\n            if (typeof this.skip === 'function') {\n                this.skip = this.skip();\n            }\n            if (this.skip) {\n                return [];\n            }\n        }\n        if (this.options.inline) {\n            const contents = new Anonymous(this.root, 0,\n                {\n                    filename: this.importedFilename,\n                    reference: this.path._fileInfo && this.path._fileInfo.reference\n                }, true, true);\n\n            return this.features ? new Media([contents], this.features.value) : [contents];\n        } else if (this.css) {\n            const newImport = new Import(this.evalPath(context), features, this.options, this._index);\n            if (!newImport.css && this.error) {\n                throw this.error;\n            }\n            return newImport;\n        } else if (this.root) {\n            ruleset = new Ruleset(null, utils.copyArray(this.root.rules));\n            ruleset.evalImports(context);\n\n            return this.features ? new Media(ruleset.rules, this.features.value) : ruleset.rules;\n        } else {\n            return [];\n        }\n    }\n}\n\nImport.prototype.type = 'Import';\nexport default Import;\n"]}
\ No newline at end of file
diff --git a/packages/less/src/less/tree/import.js b/packages/less/src/less/tree/import.js
index 394cde10..7ee13b84 100644
--- a/packages/less/src/less/tree/import.js
+++ b/packages/less/src/less/tree/import.js
@@ -171,11 +171,13 @@ class Import extends Node {
                 throw this.error;
             }
             return newImport;
-        } else {
+        } else if (this.root) {
             ruleset = new Ruleset(null, utils.copyArray(this.root.rules));
             ruleset.evalImports(context);
 
             return this.features ? new Media(ruleset.rules, this.features.value) : ruleset.rules;
+        } else {
+            return [];
         }
     }
 }
diff --git a/packages/less/test/README.md b/packages/less/test/README.md
new file mode 100644
index 00000000..7ded6840
--- /dev/null
+++ b/packages/less/test/README.md
@@ -0,0 +1,3 @@
+Tests are generally organized in the `less/` folder by what options are set in index.js.
+
+The main tests are located under `less/_main/`
\ No newline at end of file
diff --git a/packages/less/test/browser/generator/runner.config.js b/packages/less/test/browser/generator/runner.config.js
index c2670a5f..74167f9a 100644
--- a/packages/less/test/browser/generator/runner.config.js
+++ b/packages/less/test/browser/generator/runner.config.js
@@ -3,14 +3,14 @@ module.exports = {
     main: {
     // src is used to build list of less files to compile
         src: [
-            "test/less/*.less",
-            "!test/less/plugin-preeval.less", // uses ES6 syntax
+            "test/less/_main/*.less",
+            "!test/less/_main/plugin-preeval.less", // uses ES6 syntax
             // Don't test NPM import, obviously
-            "!test/less/plugin-module.less",
-            "!test/less/import-module.less",
-            "!test/less/javascript.less",
-            "!test/less/urls.less",
-            "!test/less/empty.less"
+            "!test/less/_main/plugin-module.less",
+            "!test/less/_main/import-module.less",
+            "!test/less/_main/javascript.less",
+            "!test/less/_main/urls.less",
+            "!test/less/_main/empty.less"
         ],
         options: {
             helpers: "test/browser/runner-main-options.js",
diff --git a/packages/less/test/browser/runner-browser-options.js b/packages/less/test/browser/runner-browser-options.js
index a1fb09ab..18bc331a 100644
--- a/packages/less/test/browser/runner-browser-options.js
+++ b/packages/less/test/browser/runner-browser-options.js
@@ -13,8 +13,8 @@ var testFiles = ['charsets', 'colors', 'comments', 'css-3', 'strings', 'media',
 
 for (var i = 0; i < testFiles.length; i++) {
     var file = testFiles[i],
-        lessPath  = '/test/less/' + file + '.less',
-        cssPath   = '/test/css/' + file + '.css',
+        lessPath  = '/test/less/_main/' + file + '.less',
+        cssPath   = '/test/css/_main/' + file + '.css',
         lessStyle = document.createElement('style'),
         cssLink   = document.createElement('link'),
         lessText  = '@import "' + lessPath + '";';
diff --git a/packages/less/test/css/calc.css b/packages/less/test/css/_main/calc.css
similarity index 100%
rename from packages/less/test/css/calc.css
rename to packages/less/test/css/_main/calc.css
diff --git a/packages/less/test/css/charsets.css b/packages/less/test/css/_main/charsets.css
similarity index 100%
rename from packages/less/test/css/charsets.css
rename to packages/less/test/css/_main/charsets.css
diff --git a/packages/less/test/css/colors.css b/packages/less/test/css/_main/colors.css
similarity index 100%
rename from packages/less/test/css/colors.css
rename to packages/less/test/css/_main/colors.css
diff --git a/packages/less/test/css/comments.css b/packages/less/test/css/_main/comments.css
similarity index 100%
rename from packages/less/test/css/comments.css
rename to packages/less/test/css/_main/comments.css
diff --git a/packages/less/test/css/comments2.css b/packages/less/test/css/_main/comments2.css
similarity index 100%
rename from packages/less/test/css/comments2.css
rename to packages/less/test/css/_main/comments2.css
diff --git a/packages/less/test/css/css-3.css b/packages/less/test/css/_main/css-3.css
similarity index 100%
rename from packages/less/test/css/css-3.css
rename to packages/less/test/css/_main/css-3.css
diff --git a/packages/less/test/css/css-escapes.css b/packages/less/test/css/_main/css-escapes.css
similarity index 100%
rename from packages/less/test/css/css-escapes.css
rename to packages/less/test/css/_main/css-escapes.css
diff --git a/packages/less/test/css/css-grid.css b/packages/less/test/css/_main/css-grid.css
similarity index 100%
rename from packages/less/test/css/css-grid.css
rename to packages/less/test/css/_main/css-grid.css
diff --git a/packages/less/test/css/css-guards.css b/packages/less/test/css/_main/css-guards.css
similarity index 100%
rename from packages/less/test/css/css-guards.css
rename to packages/less/test/css/_main/css-guards.css
diff --git a/packages/less/test/css/detached-rulesets.css b/packages/less/test/css/_main/detached-rulesets.css
similarity index 100%
rename from packages/less/test/css/detached-rulesets.css
rename to packages/less/test/css/_main/detached-rulesets.css
diff --git a/packages/less/test/css/directives-bubling.css b/packages/less/test/css/_main/directives-bubling.css
similarity index 100%
rename from packages/less/test/css/directives-bubling.css
rename to packages/less/test/css/_main/directives-bubling.css
diff --git a/packages/less/test/css/empty.css b/packages/less/test/css/_main/empty.css
similarity index 100%
rename from packages/less/test/css/empty.css
rename to packages/less/test/css/_main/empty.css
diff --git a/packages/less/test/css/extend-chaining.css b/packages/less/test/css/_main/extend-chaining.css
similarity index 100%
rename from packages/less/test/css/extend-chaining.css
rename to packages/less/test/css/_main/extend-chaining.css
diff --git a/packages/less/test/css/extend-clearfix.css b/packages/less/test/css/_main/extend-clearfix.css
similarity index 100%
rename from packages/less/test/css/extend-clearfix.css
rename to packages/less/test/css/_main/extend-clearfix.css
diff --git a/packages/less/test/css/extend-exact.css b/packages/less/test/css/_main/extend-exact.css
similarity index 100%
rename from packages/less/test/css/extend-exact.css
rename to packages/less/test/css/_main/extend-exact.css
diff --git a/packages/less/test/css/extend-media.css b/packages/less/test/css/_main/extend-media.css
similarity index 100%
rename from packages/less/test/css/extend-media.css
rename to packages/less/test/css/_main/extend-media.css
diff --git a/packages/less/test/css/extend-nest.css b/packages/less/test/css/_main/extend-nest.css
similarity index 100%
rename from packages/less/test/css/extend-nest.css
rename to packages/less/test/css/_main/extend-nest.css
diff --git a/packages/less/test/css/extend-selector.css b/packages/less/test/css/_main/extend-selector.css
similarity index 100%
rename from packages/less/test/css/extend-selector.css
rename to packages/less/test/css/_main/extend-selector.css
diff --git a/packages/less/test/css/extend.css b/packages/less/test/css/_main/extend.css
similarity index 100%
rename from packages/less/test/css/extend.css
rename to packages/less/test/css/_main/extend.css
diff --git a/packages/less/test/css/extract-and-length.css b/packages/less/test/css/_main/extract-and-length.css
similarity index 100%
rename from packages/less/test/css/extract-and-length.css
rename to packages/less/test/css/_main/extract-and-length.css
diff --git a/packages/less/test/css/functions-each.css b/packages/less/test/css/_main/functions-each.css
similarity index 100%
rename from packages/less/test/css/functions-each.css
rename to packages/less/test/css/_main/functions-each.css
diff --git a/packages/less/test/css/functions.css b/packages/less/test/css/_main/functions.css
similarity index 100%
rename from packages/less/test/css/functions.css
rename to packages/less/test/css/_main/functions.css
diff --git a/packages/less/test/css/ie-filters.css b/packages/less/test/css/_main/ie-filters.css
similarity index 100%
rename from packages/less/test/css/ie-filters.css
rename to packages/less/test/css/_main/ie-filters.css
diff --git a/packages/less/test/css/import-inline.css b/packages/less/test/css/_main/import-inline.css
similarity index 100%
rename from packages/less/test/css/import-inline.css
rename to packages/less/test/css/_main/import-inline.css
diff --git a/packages/less/test/css/import-interpolation.css b/packages/less/test/css/_main/import-interpolation.css
similarity index 100%
rename from packages/less/test/css/import-interpolation.css
rename to packages/less/test/css/_main/import-interpolation.css
diff --git a/packages/less/test/css/import-module.css b/packages/less/test/css/_main/import-module.css
similarity index 100%
rename from packages/less/test/css/import-module.css
rename to packages/less/test/css/_main/import-module.css
diff --git a/packages/less/test/css/import-once.css b/packages/less/test/css/_main/import-once.css
similarity index 100%
rename from packages/less/test/css/import-once.css
rename to packages/less/test/css/_main/import-once.css
diff --git a/packages/less/test/css/import-reference-issues.css b/packages/less/test/css/_main/import-reference-issues.css
similarity index 100%
rename from packages/less/test/css/import-reference-issues.css
rename to packages/less/test/css/_main/import-reference-issues.css
diff --git a/packages/less/test/css/import-reference.css b/packages/less/test/css/_main/import-reference.css
similarity index 100%
rename from packages/less/test/css/import-reference.css
rename to packages/less/test/css/_main/import-reference.css
diff --git a/packages/less/test/css/import.css b/packages/less/test/css/_main/import.css
similarity index 100%
rename from packages/less/test/css/import.css
rename to packages/less/test/css/_main/import.css
diff --git a/packages/less/test/css/javascript.css b/packages/less/test/css/_main/javascript.css
similarity index 100%
rename from packages/less/test/css/javascript.css
rename to packages/less/test/css/_main/javascript.css
diff --git a/packages/less/test/css/lazy-eval.css b/packages/less/test/css/_main/lazy-eval.css
similarity index 100%
rename from packages/less/test/css/lazy-eval.css
rename to packages/less/test/css/_main/lazy-eval.css
diff --git a/packages/less/test/css/media.css b/packages/less/test/css/_main/media.css
similarity index 100%
rename from packages/less/test/css/media.css
rename to packages/less/test/css/_main/media.css
diff --git a/packages/less/test/css/merge.css b/packages/less/test/css/_main/merge.css
similarity index 100%
rename from packages/less/test/css/merge.css
rename to packages/less/test/css/_main/merge.css
diff --git a/packages/less/test/css/mixins-closure.css b/packages/less/test/css/_main/mixins-closure.css
similarity index 100%
rename from packages/less/test/css/mixins-closure.css
rename to packages/less/test/css/_main/mixins-closure.css
diff --git a/packages/less/test/css/mixins-guards-default-func.css b/packages/less/test/css/_main/mixins-guards-default-func.css
similarity index 100%
rename from packages/less/test/css/mixins-guards-default-func.css
rename to packages/less/test/css/_main/mixins-guards-default-func.css
diff --git a/packages/less/test/css/mixins-guards.css b/packages/less/test/css/_main/mixins-guards.css
similarity index 100%
rename from packages/less/test/css/mixins-guards.css
rename to packages/less/test/css/_main/mixins-guards.css
diff --git a/packages/less/test/css/mixins-important.css b/packages/less/test/css/_main/mixins-important.css
similarity index 100%
rename from packages/less/test/css/mixins-important.css
rename to packages/less/test/css/_main/mixins-important.css
diff --git a/packages/less/test/css/mixins-interpolated.css b/packages/less/test/css/_main/mixins-interpolated.css
similarity index 100%
rename from packages/less/test/css/mixins-interpolated.css
rename to packages/less/test/css/_main/mixins-interpolated.css
diff --git a/packages/less/test/css/mixins-named-args.css b/packages/less/test/css/_main/mixins-named-args.css
similarity index 100%
rename from packages/less/test/css/mixins-named-args.css
rename to packages/less/test/css/_main/mixins-named-args.css
diff --git a/packages/less/test/css/mixins-nested.css b/packages/less/test/css/_main/mixins-nested.css
similarity index 100%
rename from packages/less/test/css/mixins-nested.css
rename to packages/less/test/css/_main/mixins-nested.css
diff --git a/packages/less/test/css/mixins-pattern.css b/packages/less/test/css/_main/mixins-pattern.css
similarity index 100%
rename from packages/less/test/css/mixins-pattern.css
rename to packages/less/test/css/_main/mixins-pattern.css
diff --git a/packages/less/test/css/mixins.css b/packages/less/test/css/_main/mixins.css
similarity index 100%
rename from packages/less/test/css/mixins.css
rename to packages/less/test/css/_main/mixins.css
diff --git a/packages/less/test/css/no-output.css b/packages/less/test/css/_main/no-output.css
similarity index 100%
rename from packages/less/test/css/no-output.css
rename to packages/less/test/css/_main/no-output.css
diff --git a/packages/less/test/css/operations.css b/packages/less/test/css/_main/operations.css
similarity index 100%
rename from packages/less/test/css/operations.css
rename to packages/less/test/css/_main/operations.css
diff --git a/packages/less/test/css/parse-interpolation.css b/packages/less/test/css/_main/parse-interpolation.css
similarity index 100%
rename from packages/less/test/css/parse-interpolation.css
rename to packages/less/test/css/_main/parse-interpolation.css
diff --git a/packages/less/test/css/permissive-parse.css b/packages/less/test/css/_main/permissive-parse.css
similarity index 100%
rename from packages/less/test/css/permissive-parse.css
rename to packages/less/test/css/_main/permissive-parse.css
diff --git a/packages/less/test/css/plugin-module.css b/packages/less/test/css/_main/plugin-module.css
similarity index 100%
rename from packages/less/test/css/plugin-module.css
rename to packages/less/test/css/_main/plugin-module.css
diff --git a/packages/less/test/css/plugin-preeval.css b/packages/less/test/css/_main/plugin-preeval.css
similarity index 100%
rename from packages/less/test/css/plugin-preeval.css
rename to packages/less/test/css/_main/plugin-preeval.css
diff --git a/packages/less/test/css/plugin.css b/packages/less/test/css/_main/plugin.css
similarity index 100%
rename from packages/less/test/css/plugin.css
rename to packages/less/test/css/_main/plugin.css
diff --git a/packages/less/test/css/property-accessors.css b/packages/less/test/css/_main/property-accessors.css
similarity index 100%
rename from packages/less/test/css/property-accessors.css
rename to packages/less/test/css/_main/property-accessors.css
diff --git a/packages/less/test/css/property-name-interp.css b/packages/less/test/css/_main/property-name-interp.css
similarity index 100%
rename from packages/less/test/css/property-name-interp.css
rename to packages/less/test/css/_main/property-name-interp.css
diff --git a/packages/less/test/css/rulesets.css b/packages/less/test/css/_main/rulesets.css
similarity index 100%
rename from packages/less/test/css/rulesets.css
rename to packages/less/test/css/_main/rulesets.css
diff --git a/packages/less/test/css/scope.css b/packages/less/test/css/_main/scope.css
similarity index 100%
rename from packages/less/test/css/scope.css
rename to packages/less/test/css/_main/scope.css
diff --git a/packages/less/test/css/selectors.css b/packages/less/test/css/_main/selectors.css
similarity index 100%
rename from packages/less/test/css/selectors.css
rename to packages/less/test/css/_main/selectors.css
diff --git a/packages/less/test/css/strings.css b/packages/less/test/css/_main/strings.css
similarity index 100%
rename from packages/less/test/css/strings.css
rename to packages/less/test/css/_main/strings.css
diff --git a/packages/less/test/css/urls.css b/packages/less/test/css/_main/urls.css
similarity index 100%
rename from packages/less/test/css/urls.css
rename to packages/less/test/css/_main/urls.css
diff --git a/packages/less/test/css/variables-in-at-rules.css b/packages/less/test/css/_main/variables-in-at-rules.css
similarity index 100%
rename from packages/less/test/css/variables-in-at-rules.css
rename to packages/less/test/css/_main/variables-in-at-rules.css
diff --git a/packages/less/test/css/variables.css b/packages/less/test/css/_main/variables.css
similarity index 100%
rename from packages/less/test/css/variables.css
rename to packages/less/test/css/_main/variables.css
diff --git a/packages/less/test/css/whitespace.css b/packages/less/test/css/_main/whitespace.css
similarity index 100%
rename from packages/less/test/css/whitespace.css
rename to packages/less/test/css/_main/whitespace.css
diff --git a/packages/less/test/css/process-imports/google.css b/packages/less/test/css/process-imports/google.css
new file mode 100644
index 00000000..5ab4dafe
--- /dev/null
+++ b/packages/less/test/css/process-imports/google.css
@@ -0,0 +1,3 @@
+.a {
+  b: c;
+}
diff --git a/packages/less/test/index.js b/packages/less/test/index.js
index 66e27609..cf3a3655 100644
--- a/packages/less/test/index.js
+++ b/packages/less/test/index.js
@@ -7,13 +7,13 @@ console.log('\n' + stylize('Less', 'underline') + '\n');
 
 lessTester.prepBomTest();
 var testMap = [
-    [{}, 'namespacing/'],
     [{
         // TODO: Change this to rewriteUrls: 'all' once the relativeUrls option is removed
         relativeUrls: true,
         silent: true,
         javascriptEnabled: true
-    }],
+    }, '_main/'],
+    [{}, 'namespacing/'],
     [{
         math: 'strict-legacy'
     }, 'math/strict-legacy/'],
@@ -49,7 +49,7 @@ var testMap = [
             return path.join('test/sourcemaps', filename) + '.json';
         }],
 
-    [{math: 'strict', strictUnits: true, globalVars: true }, 'import/json/',
+    [{math: 'strict', strictUnits: true, globalVars: true }, '_main/import/json/',
         lessTester.testImports, null, true,
         function(filename, type, baseFolder) {
             return path.join(baseFolder, filename) + '.json';
@@ -67,20 +67,21 @@ var testMap = [
     [{rewriteUrls: 'local'}, 'rewrite-urls-local/'],
     [{rootpath: 'http://example.com/assets/css/', rewriteUrls: 'all'}, 'rootpath-rewrite-urls-all/'],
     [{rootpath: 'http://example.com/assets/css/', rewriteUrls: 'local'}, 'rootpath-rewrite-urls-local/'],
-    [{paths: ['test/data/', 'test/less/import/']}, 'include-path/'],
-    [{paths: 'test/data/'}, 'include-path-string/'],
+    [{paths: ['test/less/data/', 'test/less/_main/import/']}, 'include-path/'],
+    [{paths: 'test/less/data/'}, 'include-path-string/'],
     [{plugin: 'test/plugins/postprocess/'}, 'postProcessorPlugin/'],
     [{plugin: 'test/plugins/preprocess/'}, 'preProcessorPlugin/'],
     [{plugin: 'test/plugins/visitor/'}, 'visitorPlugin/'],
     [{plugin: 'test/plugins/filemanager/'}, 'filemanagerPlugin/'],
     [{}, 'no-strict-math/'],
-    [{}, '3rd-party/']
+    [{}, '3rd-party/'],
+    [{ processImports: false }, 'process-imports/']
 ];
 testMap.forEach(function(args) {
     lessTester.runTestSet.apply(lessTester, args)
 });
-lessTester.testSyncronous({syncImport: true}, 'import');
-lessTester.testSyncronous({syncImport: true}, 'plugin');
+lessTester.testSyncronous({syncImport: true}, '_main/import');
+lessTester.testSyncronous({syncImport: true}, '_main/plugin');
 lessTester.testSyncronous({syncImport: true}, 'math/strict-legacy/css');
 lessTester.testNoOptions();
 lessTester.testJSImport();
diff --git a/packages/less/test/less/calc.less b/packages/less/test/less/_main/calc.less
similarity index 100%
rename from packages/less/test/less/calc.less
rename to packages/less/test/less/_main/calc.less
diff --git a/packages/less/test/less/charsets.less b/packages/less/test/less/_main/charsets.less
similarity index 100%
rename from packages/less/test/less/charsets.less
rename to packages/less/test/less/_main/charsets.less
diff --git a/packages/less/test/less/colors.less b/packages/less/test/less/_main/colors.less
similarity index 100%
rename from packages/less/test/less/colors.less
rename to packages/less/test/less/_main/colors.less
diff --git a/packages/less/test/less/comments.less b/packages/less/test/less/_main/comments.less
similarity index 100%
rename from packages/less/test/less/comments.less
rename to packages/less/test/less/_main/comments.less
diff --git a/packages/less/test/less/comments2.less b/packages/less/test/less/_main/comments2.less
similarity index 100%
rename from packages/less/test/less/comments2.less
rename to packages/less/test/less/_main/comments2.less
diff --git a/packages/less/test/less/css-3.less b/packages/less/test/less/_main/css-3.less
similarity index 100%
rename from packages/less/test/less/css-3.less
rename to packages/less/test/less/_main/css-3.less
diff --git a/packages/less/test/less/css-escapes.less b/packages/less/test/less/_main/css-escapes.less
similarity index 100%
rename from packages/less/test/less/css-escapes.less
rename to packages/less/test/less/_main/css-escapes.less
diff --git a/packages/less/test/less/css-grid.less b/packages/less/test/less/_main/css-grid.less
similarity index 100%
rename from packages/less/test/less/css-grid.less
rename to packages/less/test/less/_main/css-grid.less
diff --git a/packages/less/test/less/css-guards.less b/packages/less/test/less/_main/css-guards.less
similarity index 100%
rename from packages/less/test/less/css-guards.less
rename to packages/less/test/less/_main/css-guards.less
diff --git a/packages/less/test/less/detached-rulesets.less b/packages/less/test/less/_main/detached-rulesets.less
similarity index 100%
rename from packages/less/test/less/detached-rulesets.less
rename to packages/less/test/less/_main/detached-rulesets.less
diff --git a/packages/less/test/less/directives-bubling.less b/packages/less/test/less/_main/directives-bubling.less
similarity index 100%
rename from packages/less/test/less/directives-bubling.less
rename to packages/less/test/less/_main/directives-bubling.less
diff --git a/packages/less/test/less/empty.less b/packages/less/test/less/_main/empty.less
similarity index 100%
rename from packages/less/test/less/empty.less
rename to packages/less/test/less/_main/empty.less
diff --git a/packages/less/test/less/extend-chaining.less b/packages/less/test/less/_main/extend-chaining.less
similarity index 100%
rename from packages/less/test/less/extend-chaining.less
rename to packages/less/test/less/_main/extend-chaining.less
diff --git a/packages/less/test/less/extend-clearfix.less b/packages/less/test/less/_main/extend-clearfix.less
similarity index 100%
rename from packages/less/test/less/extend-clearfix.less
rename to packages/less/test/less/_main/extend-clearfix.less
diff --git a/packages/less/test/less/extend-exact.less b/packages/less/test/less/_main/extend-exact.less
similarity index 100%
rename from packages/less/test/less/extend-exact.less
rename to packages/less/test/less/_main/extend-exact.less
diff --git a/packages/less/test/less/extend-media.less b/packages/less/test/less/_main/extend-media.less
similarity index 100%
rename from packages/less/test/less/extend-media.less
rename to packages/less/test/less/_main/extend-media.less
diff --git a/packages/less/test/less/extend-nest.less b/packages/less/test/less/_main/extend-nest.less
similarity index 100%
rename from packages/less/test/less/extend-nest.less
rename to packages/less/test/less/_main/extend-nest.less
diff --git a/packages/less/test/less/extend-selector.less b/packages/less/test/less/_main/extend-selector.less
similarity index 100%
rename from packages/less/test/less/extend-selector.less
rename to packages/less/test/less/_main/extend-selector.less
diff --git a/packages/less/test/less/extend.less b/packages/less/test/less/_main/extend.less
similarity index 100%
rename from packages/less/test/less/extend.less
rename to packages/less/test/less/_main/extend.less
diff --git a/packages/less/test/less/extract-and-length.less b/packages/less/test/less/_main/extract-and-length.less
similarity index 100%
rename from packages/less/test/less/extract-and-length.less
rename to packages/less/test/less/_main/extract-and-length.less
diff --git a/packages/less/test/less/functions-each.less b/packages/less/test/less/_main/functions-each.less
similarity index 100%
rename from packages/less/test/less/functions-each.less
rename to packages/less/test/less/_main/functions-each.less
diff --git a/packages/less/test/less/functions.less b/packages/less/test/less/_main/functions.less
similarity index 100%
rename from packages/less/test/less/functions.less
rename to packages/less/test/less/_main/functions.less
diff --git a/packages/less/test/less/ie-filters.less b/packages/less/test/less/_main/ie-filters.less
similarity index 100%
rename from packages/less/test/less/ie-filters.less
rename to packages/less/test/less/_main/ie-filters.less
diff --git a/packages/less/test/less/import-inline.less b/packages/less/test/less/_main/import-inline.less
similarity index 100%
rename from packages/less/test/less/import-inline.less
rename to packages/less/test/less/_main/import-inline.less
diff --git a/packages/less/test/less/import-interpolation.less b/packages/less/test/less/_main/import-interpolation.less
similarity index 100%
rename from packages/less/test/less/import-interpolation.less
rename to packages/less/test/less/_main/import-interpolation.less
diff --git a/packages/less/test/less/import-module.less b/packages/less/test/less/_main/import-module.less
similarity index 100%
rename from packages/less/test/less/import-module.less
rename to packages/less/test/less/_main/import-module.less
diff --git a/packages/less/test/less/import-once.less b/packages/less/test/less/_main/import-once.less
similarity index 100%
rename from packages/less/test/less/import-once.less
rename to packages/less/test/less/_main/import-once.less
diff --git a/packages/less/test/less/import-reference-issues.less b/packages/less/test/less/_main/import-reference-issues.less
similarity index 100%
rename from packages/less/test/less/import-reference-issues.less
rename to packages/less/test/less/_main/import-reference-issues.less
diff --git a/packages/less/test/less/import-reference-issues/appender-reference-1968.less b/packages/less/test/less/_main/import-reference-issues/appender-reference-1968.less
similarity index 100%
rename from packages/less/test/less/import-reference-issues/appender-reference-1968.less
rename to packages/less/test/less/_main/import-reference-issues/appender-reference-1968.less
diff --git a/packages/less/test/less/import-reference-issues/global-scope-import.less b/packages/less/test/less/_main/import-reference-issues/global-scope-import.less
similarity index 100%
rename from packages/less/test/less/import-reference-issues/global-scope-import.less
rename to packages/less/test/less/_main/import-reference-issues/global-scope-import.less
diff --git a/packages/less/test/less/import-reference-issues/global-scope-nested.less b/packages/less/test/less/_main/import-reference-issues/global-scope-nested.less
similarity index 100%
rename from packages/less/test/less/import-reference-issues/global-scope-nested.less
rename to packages/less/test/less/_main/import-reference-issues/global-scope-nested.less
diff --git a/packages/less/test/less/import-reference-issues/mixin-1968.less b/packages/less/test/less/_main/import-reference-issues/mixin-1968.less
similarity index 100%
rename from packages/less/test/less/import-reference-issues/mixin-1968.less
rename to packages/less/test/less/_main/import-reference-issues/mixin-1968.less
diff --git a/packages/less/test/less/import-reference-issues/multiple-import-nested.less b/packages/less/test/less/_main/import-reference-issues/multiple-import-nested.less
similarity index 100%
rename from packages/less/test/less/import-reference-issues/multiple-import-nested.less
rename to packages/less/test/less/_main/import-reference-issues/multiple-import-nested.less
diff --git a/packages/less/test/less/import-reference-issues/multiple-import.less b/packages/less/test/less/_main/import-reference-issues/multiple-import.less
similarity index 100%
rename from packages/less/test/less/import-reference-issues/multiple-import.less
rename to packages/less/test/less/_main/import-reference-issues/multiple-import.less
diff --git a/packages/less/test/less/import-reference-issues/simple-mixin.css b/packages/less/test/less/_main/import-reference-issues/simple-mixin.css
similarity index 100%
rename from packages/less/test/less/import-reference-issues/simple-mixin.css
rename to packages/less/test/less/_main/import-reference-issues/simple-mixin.css
diff --git a/packages/less/test/less/import-reference-issues/simple-ruleset-2162.less b/packages/less/test/less/_main/import-reference-issues/simple-ruleset-2162.less
similarity index 100%
rename from packages/less/test/less/import-reference-issues/simple-ruleset-2162.less
rename to packages/less/test/less/_main/import-reference-issues/simple-ruleset-2162.less
diff --git a/packages/less/test/less/import-reference.less b/packages/less/test/less/_main/import-reference.less
similarity index 100%
rename from packages/less/test/less/import-reference.less
rename to packages/less/test/less/_main/import-reference.less
diff --git a/packages/less/test/less/import.less b/packages/less/test/less/_main/import.less
similarity index 100%
rename from packages/less/test/less/import.less
rename to packages/less/test/less/_main/import.less
diff --git a/packages/less/test/less/import/css-import.less b/packages/less/test/less/_main/import/css-import.less
similarity index 100%
rename from packages/less/test/less/import/css-import.less
rename to packages/less/test/less/_main/import/css-import.less
diff --git a/packages/less/test/less/import/deeper/deeper-2/url-import-2.less b/packages/less/test/less/_main/import/deeper/deeper-2/url-import-2.less
similarity index 100%
rename from packages/less/test/less/import/deeper/deeper-2/url-import-2.less
rename to packages/less/test/less/_main/import/deeper/deeper-2/url-import-2.less
diff --git a/packages/less/test/less/import/deeper/deeper-2/url-import.less b/packages/less/test/less/_main/import/deeper/deeper-2/url-import.less
similarity index 100%
rename from packages/less/test/less/import/deeper/deeper-2/url-import.less
rename to packages/less/test/less/_main/import/deeper/deeper-2/url-import.less
diff --git a/packages/less/test/less/import/deeper/import-once-test-a.less b/packages/less/test/less/_main/import/deeper/import-once-test-a.less
similarity index 100%
rename from packages/less/test/less/import/deeper/import-once-test-a.less
rename to packages/less/test/less/_main/import/deeper/import-once-test-a.less
diff --git a/packages/less/test/less/import/deeper/url-import.less b/packages/less/test/less/_main/import/deeper/url-import.less
similarity index 100%
rename from packages/less/test/less/import/deeper/url-import.less
rename to packages/less/test/less/_main/import/deeper/url-import.less
diff --git a/packages/less/test/less/import/import-and-relative-paths-test.less b/packages/less/test/less/_main/import/import-and-relative-paths-test.less
similarity index 100%
rename from packages/less/test/less/import/import-and-relative-paths-test.less
rename to packages/less/test/less/_main/import/import-and-relative-paths-test.less
diff --git a/packages/less/test/less/import/import-charset-test.less b/packages/less/test/less/_main/import/import-charset-test.less
similarity index 100%
rename from packages/less/test/less/import/import-charset-test.less
rename to packages/less/test/less/_main/import/import-charset-test.less
diff --git a/packages/less/test/less/import/import-inline-invalid-css.less b/packages/less/test/less/_main/import/import-inline-invalid-css.less
similarity index 100%
rename from packages/less/test/less/import/import-inline-invalid-css.less
rename to packages/less/test/less/_main/import/import-inline-invalid-css.less
diff --git a/packages/less/test/less/import/import-interpolation.less b/packages/less/test/less/_main/import/import-interpolation.less
similarity index 100%
rename from packages/less/test/less/import/import-interpolation.less
rename to packages/less/test/less/_main/import/import-interpolation.less
diff --git a/packages/less/test/less/import/import-interpolation2.less b/packages/less/test/less/_main/import/import-interpolation2.less
similarity index 100%
rename from packages/less/test/less/import/import-interpolation2.less
rename to packages/less/test/less/_main/import/import-interpolation2.less
diff --git a/packages/less/test/less/import/import-once-test-c.less b/packages/less/test/less/_main/import/import-once-test-c.less
similarity index 100%
rename from packages/less/test/less/import/import-once-test-c.less
rename to packages/less/test/less/_main/import/import-once-test-c.less
diff --git a/packages/less/test/less/import/import-reference.less b/packages/less/test/less/_main/import/import-reference.less
similarity index 100%
rename from packages/less/test/less/import/import-reference.less
rename to packages/less/test/less/_main/import/import-reference.less
diff --git a/packages/less/test/less/import/import-test-a.less b/packages/less/test/less/_main/import/import-test-a.less
similarity index 100%
rename from packages/less/test/less/import/import-test-a.less
rename to packages/less/test/less/_main/import/import-test-a.less
diff --git a/packages/less/test/less/import/import-test-b.less b/packages/less/test/less/_main/import/import-test-b.less
similarity index 100%
rename from packages/less/test/less/import/import-test-b.less
rename to packages/less/test/less/_main/import/import-test-b.less
diff --git a/packages/less/test/less/import/import-test-c.less b/packages/less/test/less/_main/import/import-test-c.less
similarity index 100%
rename from packages/less/test/less/import/import-test-c.less
rename to packages/less/test/less/_main/import/import-test-c.less
diff --git a/packages/less/test/less/import/import-test-d.css b/packages/less/test/less/_main/import/import-test-d.css
similarity index 100%
rename from packages/less/test/less/import/import-test-d.css
rename to packages/less/test/less/_main/import/import-test-d.css
diff --git a/packages/less/test/less/import/import-test-e.less b/packages/less/test/less/_main/import/import-test-e.less
similarity index 100%
rename from packages/less/test/less/import/import-test-e.less
rename to packages/less/test/less/_main/import/import-test-e.less
diff --git a/packages/less/test/less/import/import-test-f.less b/packages/less/test/less/_main/import/import-test-f.less
similarity index 100%
rename from packages/less/test/less/import/import-test-f.less
rename to packages/less/test/less/_main/import/import-test-f.less
diff --git a/packages/less/test/less/import/imports/font.less b/packages/less/test/less/_main/import/imports/font.less
similarity index 100%
rename from packages/less/test/less/import/imports/font.less
rename to packages/less/test/less/_main/import/imports/font.less
diff --git a/packages/less/test/less/import/imports/logo.less b/packages/less/test/less/_main/import/imports/logo.less
similarity index 100%
rename from packages/less/test/less/import/imports/logo.less
rename to packages/less/test/less/_main/import/imports/logo.less
diff --git a/packages/less/test/less/import/interpolation-vars.less b/packages/less/test/less/_main/import/interpolation-vars.less
similarity index 100%
rename from packages/less/test/less/import/interpolation-vars.less
rename to packages/less/test/less/_main/import/interpolation-vars.less
diff --git a/packages/less/test/less/import/invalid-css.less b/packages/less/test/less/_main/import/invalid-css.less
similarity index 100%
rename from packages/less/test/less/import/invalid-css.less
rename to packages/less/test/less/_main/import/invalid-css.less
diff --git a/packages/less/test/less/import/json/index.json b/packages/less/test/less/_main/import/json/index.json
similarity index 100%
rename from packages/less/test/less/import/json/index.json
rename to packages/less/test/less/_main/import/json/index.json
diff --git a/packages/less/test/less/import/json/index.less b/packages/less/test/less/_main/import/json/index.less
similarity index 100%
rename from packages/less/test/less/import/json/index.less
rename to packages/less/test/less/_main/import/json/index.less
diff --git a/packages/less/test/less/import/urls.less b/packages/less/test/less/_main/import/urls.less
similarity index 100%
rename from packages/less/test/less/import/urls.less
rename to packages/less/test/less/_main/import/urls.less
diff --git a/packages/less/test/less/javascript.less b/packages/less/test/less/_main/javascript.less
similarity index 100%
rename from packages/less/test/less/javascript.less
rename to packages/less/test/less/_main/javascript.less
diff --git a/packages/less/test/less/lazy-eval.less b/packages/less/test/less/_main/lazy-eval.less
similarity index 100%
rename from packages/less/test/less/lazy-eval.less
rename to packages/less/test/less/_main/lazy-eval.less
diff --git a/packages/less/test/less/media.less b/packages/less/test/less/_main/media.less
similarity index 100%
rename from packages/less/test/less/media.less
rename to packages/less/test/less/_main/media.less
diff --git a/packages/less/test/less/merge.less b/packages/less/test/less/_main/merge.less
similarity index 100%
rename from packages/less/test/less/merge.less
rename to packages/less/test/less/_main/merge.less
diff --git a/packages/less/test/less/mixins-closure.less b/packages/less/test/less/_main/mixins-closure.less
similarity index 100%
rename from packages/less/test/less/mixins-closure.less
rename to packages/less/test/less/_main/mixins-closure.less
diff --git a/packages/less/test/less/mixins-guards-default-func.less b/packages/less/test/less/_main/mixins-guards-default-func.less
similarity index 100%
rename from packages/less/test/less/mixins-guards-default-func.less
rename to packages/less/test/less/_main/mixins-guards-default-func.less
diff --git a/packages/less/test/less/mixins-guards.less b/packages/less/test/less/_main/mixins-guards.less
similarity index 100%
rename from packages/less/test/less/mixins-guards.less
rename to packages/less/test/less/_main/mixins-guards.less
diff --git a/packages/less/test/less/mixins-important.less b/packages/less/test/less/_main/mixins-important.less
similarity index 100%
rename from packages/less/test/less/mixins-important.less
rename to packages/less/test/less/_main/mixins-important.less
diff --git a/packages/less/test/less/mixins-interpolated.less b/packages/less/test/less/_main/mixins-interpolated.less
similarity index 100%
rename from packages/less/test/less/mixins-interpolated.less
rename to packages/less/test/less/_main/mixins-interpolated.less
diff --git a/packages/less/test/less/mixins-named-args.less b/packages/less/test/less/_main/mixins-named-args.less
similarity index 100%
rename from packages/less/test/less/mixins-named-args.less
rename to packages/less/test/less/_main/mixins-named-args.less
diff --git a/packages/less/test/less/mixins-nested.less b/packages/less/test/less/_main/mixins-nested.less
similarity index 100%
rename from packages/less/test/less/mixins-nested.less
rename to packages/less/test/less/_main/mixins-nested.less
diff --git a/packages/less/test/less/mixins-pattern.less b/packages/less/test/less/_main/mixins-pattern.less
similarity index 100%
rename from packages/less/test/less/mixins-pattern.less
rename to packages/less/test/less/_main/mixins-pattern.less
diff --git a/packages/less/test/less/mixins.less b/packages/less/test/less/_main/mixins.less
similarity index 100%
rename from packages/less/test/less/mixins.less
rename to packages/less/test/less/_main/mixins.less
diff --git a/packages/less/test/less/nested-gradient-with-svg-gradient/mixin-consumer.less b/packages/less/test/less/_main/nested-gradient-with-svg-gradient/mixin-consumer.less
similarity index 100%
rename from packages/less/test/less/nested-gradient-with-svg-gradient/mixin-consumer.less
rename to packages/less/test/less/_main/nested-gradient-with-svg-gradient/mixin-consumer.less
diff --git a/packages/less/test/less/nested-gradient-with-svg-gradient/svg-gradient-mixin.less b/packages/less/test/less/_main/nested-gradient-with-svg-gradient/svg-gradient-mixin.less
similarity index 100%
rename from packages/less/test/less/nested-gradient-with-svg-gradient/svg-gradient-mixin.less
rename to packages/less/test/less/_main/nested-gradient-with-svg-gradient/svg-gradient-mixin.less
diff --git a/packages/less/test/less/no-output.less b/packages/less/test/less/_main/no-output.less
similarity index 100%
rename from packages/less/test/less/no-output.less
rename to packages/less/test/less/_main/no-output.less
diff --git a/packages/less/test/less/operations.less b/packages/less/test/less/_main/operations.less
similarity index 100%
rename from packages/less/test/less/operations.less
rename to packages/less/test/less/_main/operations.less
diff --git a/packages/less/test/less/parse-interpolation.less b/packages/less/test/less/_main/parse-interpolation.less
similarity index 100%
rename from packages/less/test/less/parse-interpolation.less
rename to packages/less/test/less/_main/parse-interpolation.less
diff --git a/packages/less/test/less/permissive-parse.less b/packages/less/test/less/_main/permissive-parse.less
similarity index 100%
rename from packages/less/test/less/permissive-parse.less
rename to packages/less/test/less/_main/permissive-parse.less
diff --git a/packages/less/test/less/plugin-module.less b/packages/less/test/less/_main/plugin-module.less
similarity index 100%
rename from packages/less/test/less/plugin-module.less
rename to packages/less/test/less/_main/plugin-module.less
diff --git a/packages/less/test/less/plugin-preeval.less b/packages/less/test/less/_main/plugin-preeval.less
similarity index 100%
rename from packages/less/test/less/plugin-preeval.less
rename to packages/less/test/less/_main/plugin-preeval.less
diff --git a/packages/less/test/less/plugin.less b/packages/less/test/less/_main/plugin.less
similarity index 100%
rename from packages/less/test/less/plugin.less
rename to packages/less/test/less/_main/plugin.less
diff --git a/packages/less/test/less/plugin/plugin-collection.js b/packages/less/test/less/_main/plugin/plugin-collection.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-collection.js
rename to packages/less/test/less/_main/plugin/plugin-collection.js
diff --git a/packages/less/test/less/plugin/plugin-global.js b/packages/less/test/less/_main/plugin/plugin-global.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-global.js
rename to packages/less/test/less/_main/plugin/plugin-global.js
diff --git a/packages/less/test/less/plugin/plugin-local.js b/packages/less/test/less/_main/plugin/plugin-local.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-local.js
rename to packages/less/test/less/_main/plugin/plugin-local.js
diff --git a/packages/less/test/less/plugin/plugin-preeval.js b/packages/less/test/less/_main/plugin/plugin-preeval.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-preeval.js
rename to packages/less/test/less/_main/plugin/plugin-preeval.js
diff --git a/packages/less/test/less/plugin/plugin-scope1.js b/packages/less/test/less/_main/plugin/plugin-scope1.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-scope1.js
rename to packages/less/test/less/_main/plugin/plugin-scope1.js
diff --git a/packages/less/test/less/plugin/plugin-scope2.js b/packages/less/test/less/_main/plugin/plugin-scope2.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-scope2.js
rename to packages/less/test/less/_main/plugin/plugin-scope2.js
diff --git a/packages/less/test/less/plugin/plugin-set-options-v2.js b/packages/less/test/less/_main/plugin/plugin-set-options-v2.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-set-options-v2.js
rename to packages/less/test/less/_main/plugin/plugin-set-options-v2.js
diff --git a/packages/less/test/less/plugin/plugin-set-options-v3.js b/packages/less/test/less/_main/plugin/plugin-set-options-v3.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-set-options-v3.js
rename to packages/less/test/less/_main/plugin/plugin-set-options-v3.js
diff --git a/packages/less/test/less/plugin/plugin-set-options.js b/packages/less/test/less/_main/plugin/plugin-set-options.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-set-options.js
rename to packages/less/test/less/_main/plugin/plugin-set-options.js
diff --git a/packages/less/test/less/plugin/plugin-simple.js b/packages/less/test/less/_main/plugin/plugin-simple.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-simple.js
rename to packages/less/test/less/_main/plugin/plugin-simple.js
diff --git a/packages/less/test/less/plugin/plugin-transitive.js b/packages/less/test/less/_main/plugin/plugin-transitive.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-transitive.js
rename to packages/less/test/less/_main/plugin/plugin-transitive.js
diff --git a/packages/less/test/less/plugin/plugin-transitive.less b/packages/less/test/less/_main/plugin/plugin-transitive.less
similarity index 100%
rename from packages/less/test/less/plugin/plugin-transitive.less
rename to packages/less/test/less/_main/plugin/plugin-transitive.less
diff --git a/packages/less/test/less/plugin/plugin-tree-nodes.js b/packages/less/test/less/_main/plugin/plugin-tree-nodes.js
similarity index 100%
rename from packages/less/test/less/plugin/plugin-tree-nodes.js
rename to packages/less/test/less/_main/plugin/plugin-tree-nodes.js
diff --git a/packages/less/test/less/property-accessors.less b/packages/less/test/less/_main/property-accessors.less
similarity index 100%
rename from packages/less/test/less/property-accessors.less
rename to packages/less/test/less/_main/property-accessors.less
diff --git a/packages/less/test/less/property-name-interp.less b/packages/less/test/less/_main/property-name-interp.less
similarity index 100%
rename from packages/less/test/less/property-name-interp.less
rename to packages/less/test/less/_main/property-name-interp.less
diff --git a/packages/less/test/less/rulesets.less b/packages/less/test/less/_main/rulesets.less
similarity index 100%
rename from packages/less/test/less/rulesets.less
rename to packages/less/test/less/_main/rulesets.less
diff --git a/packages/less/test/less/scope.less b/packages/less/test/less/_main/scope.less
similarity index 100%
rename from packages/less/test/less/scope.less
rename to packages/less/test/less/_main/scope.less
diff --git a/packages/less/test/less/selectors.less b/packages/less/test/less/_main/selectors.less
similarity index 100%
rename from packages/less/test/less/selectors.less
rename to packages/less/test/less/_main/selectors.less
diff --git a/packages/less/test/less/strings.less b/packages/less/test/less/_main/strings.less
similarity index 100%
rename from packages/less/test/less/strings.less
rename to packages/less/test/less/_main/strings.less
diff --git a/packages/less/test/less/urls.less b/packages/less/test/less/_main/urls.less
similarity index 100%
rename from packages/less/test/less/urls.less
rename to packages/less/test/less/_main/urls.less
diff --git a/packages/less/test/less/variables-in-at-rules.less b/packages/less/test/less/_main/variables-in-at-rules.less
similarity index 100%
rename from packages/less/test/less/variables-in-at-rules.less
rename to packages/less/test/less/_main/variables-in-at-rules.less
diff --git a/packages/less/test/less/variables.less b/packages/less/test/less/_main/variables.less
similarity index 100%
rename from packages/less/test/less/variables.less
rename to packages/less/test/less/_main/variables.less
diff --git a/packages/less/test/less/whitespace.less b/packages/less/test/less/_main/whitespace.less
similarity index 100%
rename from packages/less/test/less/whitespace.less
rename to packages/less/test/less/_main/whitespace.less
diff --git a/packages/less/test/data/data-uri-fail.png b/packages/less/test/less/data/data-uri-fail.png
similarity index 100%
rename from packages/less/test/data/data-uri-fail.png
rename to packages/less/test/less/data/data-uri-fail.png
diff --git a/packages/less/test/data/image.jpg b/packages/less/test/less/data/image.jpg
similarity index 100%
rename from packages/less/test/data/image.jpg
rename to packages/less/test/less/data/image.jpg
diff --git a/packages/less/test/data/image.svg b/packages/less/test/less/data/image.svg
similarity index 100%
rename from packages/less/test/data/image.svg
rename to packages/less/test/less/data/image.svg
diff --git a/packages/less/test/data/page.html b/packages/less/test/less/data/page.html
similarity index 100%
rename from packages/less/test/data/page.html
rename to packages/less/test/less/data/page.html
diff --git a/packages/less/test/less/errors/functions-1.less b/packages/less/test/less/errors/functions-1.less
index f502aa27..5c0b1cf2 100644
--- a/packages/less/test/less/errors/functions-1.less
+++ b/packages/less/test/less/errors/functions-1.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-undefined();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-1.txt b/packages/less/test/less/errors/functions-1.txt
index abeb4bda..1daa3eab 100644
--- a/packages/less/test/less/errors/functions-1.txt
+++ b/packages/less/test/less/errors/functions-1.txt
@@ -1,3 +1,3 @@
 SyntaxError: Function 'test-undefined' is undefined in {path}functions-1.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-undefined();
diff --git a/packages/less/test/less/errors/functions-10-keyword.less b/packages/less/test/less/errors/functions-10-keyword.less
index 16d0b985..757759aa 100644
--- a/packages/less/test/less/errors/functions-10-keyword.less
+++ b/packages/less/test/less/errors/functions-10-keyword.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-keyword();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-10-keyword.txt b/packages/less/test/less/errors/functions-10-keyword.txt
index dabe839d..cdef551e 100644
--- a/packages/less/test/less/errors/functions-10-keyword.txt
+++ b/packages/less/test/less/errors/functions-10-keyword.txt
@@ -1,3 +1,3 @@
 SyntaxError: Keyword node returned by a function is not valid here in {path}functions-10-keyword.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-keyword();
diff --git a/packages/less/test/less/errors/functions-11-operation.less b/packages/less/test/less/errors/functions-11-operation.less
index 5695bdb9..7ec91c1d 100644
--- a/packages/less/test/less/errors/functions-11-operation.less
+++ b/packages/less/test/less/errors/functions-11-operation.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-operation();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-11-operation.txt b/packages/less/test/less/errors/functions-11-operation.txt
index 27287179..4a645844 100644
--- a/packages/less/test/less/errors/functions-11-operation.txt
+++ b/packages/less/test/less/errors/functions-11-operation.txt
@@ -1,3 +1,3 @@
 SyntaxError: Operation node returned by a function is not valid here in {path}functions-11-operation.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-operation();
diff --git a/packages/less/test/less/errors/functions-12-quoted.less b/packages/less/test/less/errors/functions-12-quoted.less
index d35be871..cf69c749 100644
--- a/packages/less/test/less/errors/functions-12-quoted.less
+++ b/packages/less/test/less/errors/functions-12-quoted.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-quoted();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-12-quoted.txt b/packages/less/test/less/errors/functions-12-quoted.txt
index 45c62ea6..03e18e07 100644
--- a/packages/less/test/less/errors/functions-12-quoted.txt
+++ b/packages/less/test/less/errors/functions-12-quoted.txt
@@ -1,3 +1,3 @@
 SyntaxError: Quoted node returned by a function is not valid here in {path}functions-12-quoted.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-quoted();
diff --git a/packages/less/test/less/errors/functions-13-selector.less b/packages/less/test/less/errors/functions-13-selector.less
index 2fd879c6..d79ede5c 100644
--- a/packages/less/test/less/errors/functions-13-selector.less
+++ b/packages/less/test/less/errors/functions-13-selector.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-selector();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-13-selector.txt b/packages/less/test/less/errors/functions-13-selector.txt
index 2f4b097f..9ac2cab9 100644
--- a/packages/less/test/less/errors/functions-13-selector.txt
+++ b/packages/less/test/less/errors/functions-13-selector.txt
@@ -1,3 +1,3 @@
 SyntaxError: Selector node returned by a function is not valid here in {path}functions-13-selector.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-selector();
diff --git a/packages/less/test/less/errors/functions-14-url.less b/packages/less/test/less/errors/functions-14-url.less
index bed6dabf..e6a583dc 100644
--- a/packages/less/test/less/errors/functions-14-url.less
+++ b/packages/less/test/less/errors/functions-14-url.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-url();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-14-url.txt b/packages/less/test/less/errors/functions-14-url.txt
index aeb275ca..e1632d4c 100644
--- a/packages/less/test/less/errors/functions-14-url.txt
+++ b/packages/less/test/less/errors/functions-14-url.txt
@@ -1,3 +1,3 @@
 SyntaxError: Url node returned by a function is not valid here in {path}functions-14-url.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-url();
diff --git a/packages/less/test/less/errors/functions-15-value.less b/packages/less/test/less/errors/functions-15-value.less
index 189ce196..bccad8b0 100644
--- a/packages/less/test/less/errors/functions-15-value.less
+++ b/packages/less/test/less/errors/functions-15-value.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-value();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-15-value.txt b/packages/less/test/less/errors/functions-15-value.txt
index 41f6e6a1..b66eb88d 100644
--- a/packages/less/test/less/errors/functions-15-value.txt
+++ b/packages/less/test/less/errors/functions-15-value.txt
@@ -1,3 +1,3 @@
 SyntaxError: Value node returned by a function is not valid here in {path}functions-15-value.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-value();
diff --git a/packages/less/test/less/errors/functions-3-assignment.less b/packages/less/test/less/errors/functions-3-assignment.less
index fe7f5ade..9f1cfcef 100644
--- a/packages/less/test/less/errors/functions-3-assignment.less
+++ b/packages/less/test/less/errors/functions-3-assignment.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-assignment();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-3-assignment.txt b/packages/less/test/less/errors/functions-3-assignment.txt
index 35c19926..0c8be28b 100644
--- a/packages/less/test/less/errors/functions-3-assignment.txt
+++ b/packages/less/test/less/errors/functions-3-assignment.txt
@@ -1,3 +1,3 @@
 SyntaxError: Assignment node returned by a function is not valid here in {path}functions-3-assignment.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-assignment();
diff --git a/packages/less/test/less/errors/functions-4-call.less b/packages/less/test/less/errors/functions-4-call.less
index 6b55c88a..adc0be65 100644
--- a/packages/less/test/less/errors/functions-4-call.less
+++ b/packages/less/test/less/errors/functions-4-call.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-call();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-4-call.txt b/packages/less/test/less/errors/functions-4-call.txt
index 338582d7..49fd66e2 100644
--- a/packages/less/test/less/errors/functions-4-call.txt
+++ b/packages/less/test/less/errors/functions-4-call.txt
@@ -1,3 +1,3 @@
 SyntaxError: Function 'foo' is undefined in {path}functions-4-call.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-call();
diff --git a/packages/less/test/less/errors/functions-5-color.less b/packages/less/test/less/errors/functions-5-color.less
index 700ec5b9..a251fc5d 100644
--- a/packages/less/test/less/errors/functions-5-color.less
+++ b/packages/less/test/less/errors/functions-5-color.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-color();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-5-color.txt b/packages/less/test/less/errors/functions-5-color.txt
index fdcd1a08..e957188d 100644
--- a/packages/less/test/less/errors/functions-5-color.txt
+++ b/packages/less/test/less/errors/functions-5-color.txt
@@ -1,3 +1,3 @@
 SyntaxError: Color node returned by a function is not valid here in {path}functions-5-color.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-color();
diff --git a/packages/less/test/less/errors/functions-6-condition.less b/packages/less/test/less/errors/functions-6-condition.less
index db1000b8..2667152f 100644
--- a/packages/less/test/less/errors/functions-6-condition.less
+++ b/packages/less/test/less/errors/functions-6-condition.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-condition();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-6-condition.txt b/packages/less/test/less/errors/functions-6-condition.txt
index 421bba5f..868a9347 100644
--- a/packages/less/test/less/errors/functions-6-condition.txt
+++ b/packages/less/test/less/errors/functions-6-condition.txt
@@ -1,3 +1,3 @@
 SyntaxError: Condition node returned by a function is not valid here in {path}functions-6-condition.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-condition();
diff --git a/packages/less/test/less/errors/functions-7-dimension.less b/packages/less/test/less/errors/functions-7-dimension.less
index c399d33e..27848ce4 100644
--- a/packages/less/test/less/errors/functions-7-dimension.less
+++ b/packages/less/test/less/errors/functions-7-dimension.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-dimension();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-7-dimension.txt b/packages/less/test/less/errors/functions-7-dimension.txt
index 3b1b7026..33376cda 100644
--- a/packages/less/test/less/errors/functions-7-dimension.txt
+++ b/packages/less/test/less/errors/functions-7-dimension.txt
@@ -1,3 +1,3 @@
 SyntaxError: Dimension node returned by a function is not valid here in {path}functions-7-dimension.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-dimension();
diff --git a/packages/less/test/less/errors/functions-8-element.less b/packages/less/test/less/errors/functions-8-element.less
index c762aad8..b6132aa0 100644
--- a/packages/less/test/less/errors/functions-8-element.less
+++ b/packages/less/test/less/errors/functions-8-element.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-element();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-8-element.txt b/packages/less/test/less/errors/functions-8-element.txt
index b505d954..923b0c43 100644
--- a/packages/less/test/less/errors/functions-8-element.txt
+++ b/packages/less/test/less/errors/functions-8-element.txt
@@ -1,3 +1,3 @@
 SyntaxError: Element node returned by a function is not valid here in {path}functions-8-element.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-element();
diff --git a/packages/less/test/less/errors/functions-9-expression.less b/packages/less/test/less/errors/functions-9-expression.less
index 5f0bf46c..95308f7f 100644
--- a/packages/less/test/less/errors/functions-9-expression.less
+++ b/packages/less/test/less/errors/functions-9-expression.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes";
+@plugin "../_main/plugin/plugin-tree-nodes";
 test-expression();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/functions-9-expression.txt b/packages/less/test/less/errors/functions-9-expression.txt
index 224db785..7a656adf 100644
--- a/packages/less/test/less/errors/functions-9-expression.txt
+++ b/packages/less/test/less/errors/functions-9-expression.txt
@@ -1,3 +1,3 @@
 SyntaxError: Expression node returned by a function is not valid here in {path}functions-9-expression.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes";
+1 @plugin "../_main/plugin/plugin-tree-nodes";
 2 test-expression();
diff --git a/packages/less/test/less/errors/root-func-undefined-2.less b/packages/less/test/less/errors/root-func-undefined-2.less
index ee34616e..57531e91 100644
--- a/packages/less/test/less/errors/root-func-undefined-2.less
+++ b/packages/less/test/less/errors/root-func-undefined-2.less
@@ -1,2 +1,2 @@
-@plugin "../plugin/plugin-tree-nodes.js";
+@plugin "../_main/plugin/plugin-tree-nodes.js";
 test-undefined();
\ No newline at end of file
diff --git a/packages/less/test/less/errors/root-func-undefined-2.txt b/packages/less/test/less/errors/root-func-undefined-2.txt
index 031385d0..911d1158 100644
--- a/packages/less/test/less/errors/root-func-undefined-2.txt
+++ b/packages/less/test/less/errors/root-func-undefined-2.txt
@@ -1,3 +1,3 @@
 SyntaxError: Function 'test-undefined' is undefined in {path}root-func-undefined-2.less on line 2, column 1:
-1 @plugin "../plugin/plugin-tree-nodes.js";
+1 @plugin "../_main/plugin/plugin-tree-nodes.js";
 2 test-undefined();
diff --git a/packages/less/test/less/process-imports/google.less b/packages/less/test/less/process-imports/google.less
new file mode 100644
index 00000000..844b081a
--- /dev/null
+++ b/packages/less/test/less/process-imports/google.less
@@ -0,0 +1,3 @@
+@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,700');
+
+.a { b: c; }
\ No newline at end of file
diff --git a/packages/less/test/less/static-urls/urls.less b/packages/less/test/less/static-urls/urls.less
index b0c7de09..3a2a58cd 100644
--- a/packages/less/test/less/static-urls/urls.less
+++ b/packages/less/test/less/static-urls/urls.less
@@ -30,4 +30,4 @@
     url: url(@a);
 }
 
-@import "../import/import-and-relative-paths-test";
+@import "../_main/import/import-and-relative-paths-test";
diff --git a/packages/less/test/less/url-args/urls.less b/packages/less/test/less/url-args/urls.less
index 2f1bd872..c9fd0dbf 100644
--- a/packages/less/test/less/url-args/urls.less
+++ b/packages/less/test/less/url-args/urls.less
@@ -33,19 +33,19 @@
     url: url(@a);
 }
 
-@import "../import/imports/font";
+@import "../_main/import/imports/font";
 
 #data-uri {
-  uri: data-uri('image/jpeg;base64', '../../data/image.jpg');
+  uri: data-uri('image/jpeg;base64', '../data/image.jpg');
 }
 
 #data-uri-guess {
-  uri: data-uri('../../data/image.jpg');
+  uri: data-uri('../data/image.jpg');
 }
 
 #data-uri-ascii {
-  uri-1: data-uri('text/html', '../../data/page.html');
-  uri-2: data-uri('../../data/page.html');
+  uri-1: data-uri('text/html', '../data/page.html');
+  uri-2: data-uri('../data/page.html');
 }
 
 #svg-functions {
