diff --git a/lib/less/parser.js b/lib/less/parser.js
index 6abe0539..0c925d17 100644
--- a/lib/less/parser.js
+++ b/lib/less/parser.js
@@ -1411,9 +1411,19 @@ less.Parser = function Parser(env) {
             combinator: function () {
                 var c = input.charAt(i);
 
+                if (c === '/') {
+                    save();
+                    var slashedCombinator = $re(/\/[a-z]+\//i);
+                    if (slashedCombinator) {
+                        forget();
+                        return new(tree.Combinator)(slashedCombinator);
+                    }
+                    restore();
+                }
+
                 if (c === '>' || c === '+' || c === '~' || c === '|' || c === '^') {
                     i++;
-                    if (input.charAt(i) === '^') {
+                    if (c === '^' && input.charAt(i) === '^') {
                         c = '^^';
                         i++;
                     }
diff --git a/lib/less/tree/element.js b/lib/less/tree/element.js
index 3869f6c1..055cce80 100644
--- a/lib/less/tree/element.js
+++ b/lib/less/tree/element.js
@@ -77,30 +77,14 @@ tree.Combinator = function (value) {
 };
 tree.Combinator.prototype = {
     type: "Combinator",
-    _outputMap: {
-        ''  : '',
-        ' ' : ' ',
-        ':' : ' :',
-        '+' : ' + ',
-        '~' : ' ~ ',
-        '>' : ' > ',
-        '|' : '|',
-        '^' : ' ^ ',
-        '^^' : ' ^^ '
-    },
-    _outputMapCompressed: {
-        ''  : '',
-        ' ' : ' ',
-        ':' : ' :',
-        '+' : '+',
-        '~' : '~',
-        '>' : '>',
-        '|' : '|',
-        '^' : '^',
-        '^^' : '^^'
+    _noSpaceCombinators: {
+        '': true,
+        ' ': true,
+        '|': true
     },
     genCSS: function (env, output) {
-        output.add((env.compress ? this._outputMapCompressed : this._outputMap)[this.value]);
+        var spaceOrEmpty = (env.compress || this._noSpaceCombinators[this.value]) ? '' : ' ';
+        output.add(spaceOrEmpty + this.value + spaceOrEmpty);
     },
     toCSS: tree.toCSS
 };
diff --git a/test/css/css-3.css b/test/css/css-3.css
index 4dd72432..c6f4c629 100644
--- a/test/css/css-3.css
+++ b/test/css/css-3.css
@@ -127,6 +127,12 @@ h1 {
 body ^^ .shadow {
   display: done;
 }
+:host(.sel .a),
+:host-context(.sel .b),
+.sel /deep/ .b,
+::content .sel {
+  type: shadow-dom;
+}
 #issue2066 {
   background: url('/images/icon-team.svg') 0 0 / contain;
 }
diff --git a/test/less/css-3.less b/test/less/css-3.less
index c054dc48..312653c0 100644
--- a/test/less/css-3.less
+++ b/test/less/css-3.less
@@ -128,6 +128,13 @@ body ^^ .shadow {
   display: done;
 }
 
+:host(.sel .a),
+:host-context(.sel .b),
+.sel /deep/ .b,
+::content .sel {
+  type: shadow-dom;
+}
+
 #issue2066 {
   background: url('/images/icon-team.svg') 0 0 / contain;
 }
