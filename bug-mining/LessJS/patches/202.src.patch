diff --git a/lib/less/tree/mixin-definition.js b/lib/less/tree/mixin-definition.js
index 2f2b9dc1..1375664d 100644
--- a/lib/less/tree/mixin-definition.js
+++ b/lib/less/tree/mixin-definition.js
@@ -152,7 +152,7 @@ Definition.prototype.matchCondition = function (args, context) {
         new contexts.Eval(context,
             [this.evalParams(context, /* the parameter variables*/
                 new contexts.Eval(context, this.frames ? this.frames.concat(context.frames) : context.frames), args, [])]
-            .concat(this.frames) // the parent namespace/mixin frames
+            .concat(this.frames || []) // the parent namespace/mixin frames
             .concat(context.frames)))) { // the current environment frames
         return false;
     }
diff --git a/test/less/mixins-guards.less b/test/less/mixins-guards.less
index c077f95a..41e04a26 100644
--- a/test/less/mixins-guards.less
+++ b/test/less/mixins-guards.less
@@ -269,3 +269,12 @@
 #guarded-deeper {
   #top > #deeper > .mixin(1);
 }
+
+// namespaced & guarded mixin in root
+// outputs nothing but should pass:
+
+@guarded-mixin-for-root: true;
+#ns {
+    .guarded-mixin-for-root() when (@guarded-mixin-for-root) {}
+}
+#ns > .guarded-mixin-for-root();
