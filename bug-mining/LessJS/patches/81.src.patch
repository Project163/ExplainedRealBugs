diff --git a/lib/less/parser.js b/lib/less/parser.js
index 7bd1c4dc..9b42168a 100644
--- a/lib/less/parser.js
+++ b/lib/less/parser.js
@@ -363,6 +363,7 @@ less.Parser = function Parser(env) {
             try {
                 root = new(tree.Ruleset)([], $(this.parsers.primary));
                 root.root = true;
+                root.firstRoot = true;
             } catch (e) {
                 return callback(new(LessError)(e, env));
             }
@@ -1182,7 +1183,7 @@ less.Parser = function Parser(env) {
                     important = $(this.important);
 
                     if (value && $(this.end)) {
-                        return new(tree.Rule)(name, value, important, memo);
+                        return new(tree.Rule)(name, value, important, memo, env.currentFileInfo);
                     } else {
                         furthest = i;
                         restore();
@@ -1265,7 +1266,7 @@ less.Parser = function Parser(env) {
                         e = $(this.value);
                         if ($(')')) {
                             if (p && e) {
-                                nodes.push(new(tree.Paren)(new(tree.Rule)(p, e, null, i, true)));
+                                nodes.push(new(tree.Paren)(new(tree.Rule)(p, e, null, i, env.currentFileInfo, true)));
                             } else if (e) {
                                 nodes.push(new(tree.Paren)(e));
                             } else {
diff --git a/lib/less/tree/rule.js b/lib/less/tree/rule.js
index 635e5551..2448a7c7 100644
--- a/lib/less/tree/rule.js
+++ b/lib/less/tree/rule.js
@@ -1,10 +1,11 @@
 (function (tree) {
 
-tree.Rule = function (name, value, important, index, inline) {
+tree.Rule = function (name, value, important, index, currentFileInfo, inline) {
     this.name = name;
     this.value = (value instanceof tree.Value) ? value : new(tree.Value)([value]);
     this.important = important ? ' ' + important.trim() : '';
     this.index = index;
+    this.currentFileInfo = currentFileInfo;
     this.inline = inline || false;
 
     if (name.charAt(0) === '@') {
@@ -35,7 +36,7 @@ tree.Rule.prototype = {
             return new(tree.Rule)(this.name,
                               this.value.eval(env),
                               this.important,
-                              this.index, this.inline);
+                              this.index, this.currentFileInfo, this.inline);
         }
         finally {
             if (strictMathsBypass) {
@@ -47,7 +48,7 @@ tree.Rule.prototype = {
         return new(tree.Rule)(this.name,
                               this.value,
                               "!important",
-                              this.index, this.inline);
+                              this.index, this.currentFileInfo, this.inline);
     }
 };
 
diff --git a/lib/less/tree/ruleset.js b/lib/less/tree/ruleset.js
index 7356643d..7652963f 100644
--- a/lib/less/tree/ruleset.js
+++ b/lib/less/tree/ruleset.js
@@ -19,6 +19,7 @@ tree.Ruleset.prototype = {
         
         ruleset.originalRuleset = this;
         ruleset.root = this.root;
+        ruleset.firstRoot = this.firstRoot;
         ruleset.allowImports = this.allowImports;
 
         if(this.debugInfo) {
@@ -211,6 +212,10 @@ tree.Ruleset.prototype = {
                 }
             } else {
                 if (rule.toCSS && !rule.variable) {
+                    if (this.firstRoot && rule instanceof tree.Rule) {
+                        throw { message: "properties must be inside selector blocks, they cannot be in the root.",
+                            index: rule.index, filename: rule.currentFileInfo ? rule.currentFileInfo.filename : null};
+                    }
                     rules.push(rule.toCSS(env));
                 } else if (rule.value && !rule.variable) {
                     rules.push(rule.value.toString());
diff --git a/test/css/css.css b/test/css/css.css
index 220a2135..5084b830 100644
--- a/test/css/css.css
+++ b/test/css/css.css
@@ -26,10 +26,14 @@ div#id {
   color: grey;
 }
 @media print {
-  font-size: 3em;
+  * {
+    font-size: 3em;
+  }
 }
 @media screen {
-  font-size: 10px;
+  * {
+    font-size: 10px;
+  }
 }
 @font-face {
   font-family: 'Garamond Pro';
diff --git a/test/less/css.less b/test/less/css.less
index 6eafd808..f45ac2ea 100644
--- a/test/less/css.less
+++ b/test/less/css.less
@@ -27,11 +27,15 @@ div#id {
 }
 
 @media print {
-  font-size: 3em;
+  * {
+    font-size: 3em;
+  }
 }
 
 @media screen {
-  font-size: 10px;
+  * {
+    font-size: 10px;
+  }
 }
 
 @font-face {
diff --git a/test/less/errors/property-in-root.less b/test/less/errors/property-in-root.less
new file mode 100644
index 00000000..8fed4be3
--- /dev/null
+++ b/test/less/errors/property-in-root.less
@@ -0,0 +1,4 @@
+.a() {
+  prop:1;
+}
+.a();
\ No newline at end of file
diff --git a/test/less/errors/property-in-root.txt b/test/less/errors/property-in-root.txt
new file mode 100644
index 00000000..04b27766
--- /dev/null
+++ b/test/less/errors/property-in-root.txt
@@ -0,0 +1,4 @@
+SyntaxError: properties must be inside selector blocks, they cannot be in the root. in {path}property-in-root.less on line 2, column 3:
+1 .a() {
+2   prop:1;
+3 }
diff --git a/test/less/errors/property-in-root2.less b/test/less/errors/property-in-root2.less
new file mode 100644
index 00000000..ce8656d1
--- /dev/null
+++ b/test/less/errors/property-in-root2.less
@@ -0,0 +1 @@
+@import "property-in-root";
\ No newline at end of file
diff --git a/test/less/errors/property-in-root2.txt b/test/less/errors/property-in-root2.txt
new file mode 100644
index 00000000..62a006fb
--- /dev/null
+++ b/test/less/errors/property-in-root2.txt
@@ -0,0 +1,4 @@
+SyntaxError: properties must be inside selector blocks, they cannot be in the root. in C:\git\less.js\test\less\errors\property-in-root.less on line 2, column 3:
+1 .a() {
+2   prop:1;
+3 }
diff --git a/test/less/errors/property-in-root3.less b/test/less/errors/property-in-root3.less
new file mode 100644
index 00000000..056c2f72
--- /dev/null
+++ b/test/less/errors/property-in-root3.less
@@ -0,0 +1,4 @@
+prop:1;
+.a {
+  prop:1;
+}
\ No newline at end of file
diff --git a/test/less/errors/property-in-root3.txt b/test/less/errors/property-in-root3.txt
new file mode 100644
index 00000000..68ef9454
--- /dev/null
+++ b/test/less/errors/property-in-root3.txt
@@ -0,0 +1,3 @@
+SyntaxError: properties must be inside selector blocks, they cannot be in the root. in {path}property-in-root3.less on line 1, column 1:
+1 prop:1;
+2 .a {
