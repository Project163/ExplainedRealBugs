diff --git a/lib/less/tree/dimension.js b/lib/less/tree/dimension.js
index 9a6fce3d..22241b8f 100644
--- a/lib/less/tree/dimension.js
+++ b/lib/less/tree/dimension.js
@@ -30,7 +30,6 @@ tree.Dimension.prototype = {
                   this.unit || other.unit);
     },
 
-    // TODO: Perform unit conversion before comparing
     compare: function (other) {
         if (other instanceof tree.Dimension) {
             if (other.value > this.value) {
@@ -38,6 +37,9 @@ tree.Dimension.prototype = {
             } else if (other.value < this.value) {
                 return 1;
             } else {
+                if (other.unit && this.unit !== other.unit) {
+                    return -1;
+                }
                 return 0;
             }
         } else {
diff --git a/test/css/mixins-guards.css b/test/css/mixins-guards.css
index cd94c010..f899a8e3 100644
--- a/test/css/mixins-guards.css
+++ b/test/css/mixins-guards.css
@@ -56,6 +56,9 @@
   content: not false;
   content: not false and false, not false;
 }
+.equality-units {
+  test: pass;
+}
 .colorguardtest {
   content: is #ff0000;
   content: is not #0000ff its #ff0000;
diff --git a/test/less/mixins-guards.less b/test/less/mixins-guards.less
index 3e27c268..c92b34d5 100644
--- a/test/less/mixins-guards.less
+++ b/test/less/mixins-guards.less
@@ -93,6 +93,19 @@
 
 .bool1 { .bool }
 
+.equality-unit-test(@num) when (@num = 1%) {
+  test: fail;
+}
+.equality-unit-test(@num) when (@num = 2) {
+  test: pass;
+}
+.equality-unit-test(@num) {
+}
+.equality-units {
+  .equality-unit-test(1px);
+  .equality-unit-test(2px);
+}
+
 .colorguard(@col) when (@col = red)							{ content: is @col; }
 .colorguard(@col) when not (blue = @col)					{ content: is not blue its @col; }
 .colorguard(@col)											{}
