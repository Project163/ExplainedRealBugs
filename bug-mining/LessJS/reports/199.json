{"url":"https://api.github.com/repos/less/less.js/issues/2511","repository_url":"https://api.github.com/repos/less/less.js","labels_url":"https://api.github.com/repos/less/less.js/issues/2511/labels{/name}","comments_url":"https://api.github.com/repos/less/less.js/issues/2511/comments","events_url":"https://api.github.com/repos/less/less.js/issues/2511/events","html_url":"https://github.com/less/less.js/issues/2511","id":63032637,"node_id":"MDU6SXNzdWU2MzAzMjYzNw==","number":2511,"title":"Nested directives bubbling and selector propagation","user":{"login":"rjgotten","id":442808,"node_id":"MDQ6VXNlcjQ0MjgwOA==","avatar_url":"https://avatars.githubusercontent.com/u/442808?v=4","gravatar_id":"","url":"https://api.github.com/users/rjgotten","html_url":"https://github.com/rjgotten","followers_url":"https://api.github.com/users/rjgotten/followers","following_url":"https://api.github.com/users/rjgotten/following{/other_user}","gists_url":"https://api.github.com/users/rjgotten/gists{/gist_id}","starred_url":"https://api.github.com/users/rjgotten/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjgotten/subscriptions","organizations_url":"https://api.github.com/users/rjgotten/orgs","repos_url":"https://api.github.com/users/rjgotten/repos","events_url":"https://api.github.com/users/rjgotten/events{/privacy}","received_events_url":"https://api.github.com/users/rjgotten/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2103265,"node_id":"MDU6TGFiZWwyMTAzMjY1","url":"https://api.github.com/repos/less/less.js/labels/bug","name":"bug","color":"e10c02","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-03-19T16:42:00Z","updated_at":"2015-03-19T19:51:46Z","closed_at":"2015-03-19T19:51:46Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"A rather unique case came up today, where I had to nest a `font-face` directive inside a library mixin, which in turn is mixed into a basic class selector.\n\nMy real-world case involves scaffolding a quite complex grid layout where I have to include a font with a zero horizontal advance for white-space characters, which effectively makes the inline-block grid column elements line up snugly together.\n\nA reduced test case of the structure is:\n\n``` less\n.mixin() {\n  @font-face {\n    font-family: \"wf-blank\";\n    src: url(\"../fonts/wf-blank.woff\");\n  }\n  font-family: \"wf-blank\";\n}\n.class {\n  .mixin();\n}\n```\n\nCurrently, this test case produces the output:\n\n``` css\n@font-face {\n  .class {\n    font-family: \"wf-blank\";\n    src: url(\"../fonts/wf-blank.woff\");\n  }\n}\n\n.class {\n  font-family: \"wf-blank\";\n}\n```\n\nI'd expect directives that have block context but cannot have nested rulesets, to not propagate scope selectors inside when the directive is bubbled outwards to the global scope.\n\nI.e. I'd expect the above to produce:\n\n``` css\n@font-face {\n    font-family: \"wf-blank\";\n    src: url(\"../fonts/wf-blank.woff\");\n}\n\n.class {\n  font-family: \"wf-blank\";\n}\n```\n\nI think I have an idea on how I can get the compiler to support this and I can look at authoring a pull request for it, if you agree that this is indeed something to fix.\n","closed_by":{"login":"lukeapage","id":309321,"node_id":"MDQ6VXNlcjMwOTMyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/309321?v=4","gravatar_id":"","url":"https://api.github.com/users/lukeapage","html_url":"https://github.com/lukeapage","followers_url":"https://api.github.com/users/lukeapage/followers","following_url":"https://api.github.com/users/lukeapage/following{/other_user}","gists_url":"https://api.github.com/users/lukeapage/gists{/gist_id}","starred_url":"https://api.github.com/users/lukeapage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukeapage/subscriptions","organizations_url":"https://api.github.com/users/lukeapage/orgs","repos_url":"https://api.github.com/users/lukeapage/repos","events_url":"https://api.github.com/users/lukeapage/events{/privacy}","received_events_url":"https://api.github.com/users/lukeapage/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/less/less.js/issues/2511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/less/less.js/issues/2511/timeline","performed_via_github_app":null,"state_reason":"completed"}