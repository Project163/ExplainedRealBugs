{"url":"https://api.github.com/repos/zaproxy/zaproxy/issues/3955","repository_url":"https://api.github.com/repos/zaproxy/zaproxy","labels_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/3955/labels{/name}","comments_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/3955/comments","events_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/3955/events","html_url":"https://github.com/zaproxy/zaproxy/issues/3955","id":265772749,"node_id":"MDU6SXNzdWUyNjU3NzI3NDk=","number":3955,"title":"Database too small to handle large login request bodies","user":{"login":"CookieAndPizza","id":19586483,"node_id":"MDQ6VXNlcjE5NTg2NDgz","avatar_url":"https://avatars.githubusercontent.com/u/19586483?v=4","gravatar_id":"","url":"https://api.github.com/users/CookieAndPizza","html_url":"https://github.com/CookieAndPizza","followers_url":"https://api.github.com/users/CookieAndPizza/followers","following_url":"https://api.github.com/users/CookieAndPizza/following{/other_user}","gists_url":"https://api.github.com/users/CookieAndPizza/gists{/gist_id}","starred_url":"https://api.github.com/users/CookieAndPizza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CookieAndPizza/subscriptions","organizations_url":"https://api.github.com/users/CookieAndPizza/orgs","repos_url":"https://api.github.com/users/CookieAndPizza/repos","events_url":"https://api.github.com/users/CookieAndPizza/events{/privacy}","received_events_url":"https://api.github.com/users/CookieAndPizza/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":220063774,"node_id":"MDU6TGFiZWwyMjAwNjM3NzQ=","url":"https://api.github.com/repos/zaproxy/zaproxy/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":382856034,"node_id":"MDU6TGFiZWwzODI4NTYwMzQ=","url":"https://api.github.com/repos/zaproxy/zaproxy/labels/historic","name":"historic","color":"c2e0c6","default":false,"description":null}],"state":"closed","locked":true,"assignee":{"login":"thc202","id":4639210,"node_id":"MDQ6VXNlcjQ2MzkyMTA=","avatar_url":"https://avatars.githubusercontent.com/u/4639210?v=4","gravatar_id":"","url":"https://api.github.com/users/thc202","html_url":"https://github.com/thc202","followers_url":"https://api.github.com/users/thc202/followers","following_url":"https://api.github.com/users/thc202/following{/other_user}","gists_url":"https://api.github.com/users/thc202/gists{/gist_id}","starred_url":"https://api.github.com/users/thc202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thc202/subscriptions","organizations_url":"https://api.github.com/users/thc202/orgs","repos_url":"https://api.github.com/users/thc202/repos","events_url":"https://api.github.com/users/thc202/events{/privacy}","received_events_url":"https://api.github.com/users/thc202/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"thc202","id":4639210,"node_id":"MDQ6VXNlcjQ2MzkyMTA=","avatar_url":"https://avatars.githubusercontent.com/u/4639210?v=4","gravatar_id":"","url":"https://api.github.com/users/thc202","html_url":"https://github.com/thc202","followers_url":"https://api.github.com/users/thc202/followers","following_url":"https://api.github.com/users/thc202/following{/other_user}","gists_url":"https://api.github.com/users/thc202/gists{/gist_id}","starred_url":"https://api.github.com/users/thc202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thc202/subscriptions","organizations_url":"https://api.github.com/users/thc202/orgs","repos_url":"https://api.github.com/users/thc202/repos","events_url":"https://api.github.com/users/thc202/events{/privacy}","received_events_url":"https://api.github.com/users/thc202/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/zaproxy/zaproxy/milestones/3","html_url":"https://github.com/zaproxy/zaproxy/milestone/3","labels_url":"https://api.github.com/repos/zaproxy/zaproxy/milestones/3/labels","id":2147947,"node_id":"MDk6TWlsZXN0b25lMjE0Nzk0Nw==","number":3,"title":"2.7.0","description":"Enhancements and bug fixes expected to be included in a following main release.","creator":{"login":"thc202","id":4639210,"node_id":"MDQ6VXNlcjQ2MzkyMTA=","avatar_url":"https://avatars.githubusercontent.com/u/4639210?v=4","gravatar_id":"","url":"https://api.github.com/users/thc202","html_url":"https://github.com/thc202","followers_url":"https://api.github.com/users/thc202/followers","following_url":"https://api.github.com/users/thc202/following{/other_user}","gists_url":"https://api.github.com/users/thc202/gists{/gist_id}","starred_url":"https://api.github.com/users/thc202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thc202/subscriptions","organizations_url":"https://api.github.com/users/thc202/orgs","repos_url":"https://api.github.com/users/thc202/repos","events_url":"https://api.github.com/users/thc202/events{/privacy}","received_events_url":"https://api.github.com/users/thc202/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":191,"state":"closed","created_at":"2016-11-21T09:52:02Z","updated_at":"2021-11-08T21:13:01Z","due_on":"2017-11-28T08:00:00Z","closed_at":"2017-11-28T23:36:43Z"},"comments":2,"created_at":"2017-10-16T13:36:36Z","updated_at":"2020-02-02T13:13:29Z","closed_at":"2017-11-01T08:50:35Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I was working on a project when I noticed my POST request could not be set as \"Form based Auth login request\". Every time I pressed the button the following exception would be thrown:\r\n\r\n`org.parosproxy.paros.db.DatabaseException: java.sql.SQLDataException: data exception: string data, right truncation;  table: CONTEXT_DATA column: DATA\r\n\tat org.parosproxy.paros.db.paros.ParosTableContext.insert(ParosTableContext.java:119)\r\n\tat org.parosproxy.paros.db.paros.ParosTableContext.setData(ParosTableContext.java:245)\r\n\tat org.parosproxy.paros.model.Session.setContextData(Session.java:1120)\r\n\tat org.parosproxy.paros.model.Session.setContextData(Session.java:1116)\r\n\tat org.zaproxy.zap.authentication.FormBasedAuthenticationMethodType.persistMethodToSession(FormBasedAuthenticationMethodType.java:902)\r\n\tat org.zaproxy.zap.extension.authentication.ExtensionAuthentication.persistContextData(ExtensionAuthentication.java:296)\r\n\tat org.parosproxy.paros.model.Model.saveContext(Model.java:505)\r\n\tat org.parosproxy.paros.model.Session.saveContext(Session.java:1166)\r\n\tat org.parosproxy.paros.model.Session.saveAllContexts(Session.java:1179)\r\n\tat org.parosproxy.paros.view.SessionDialog.saveParam(SessionDialog.java:132)\r\n\tat org.parosproxy.paros.view.AbstractParamDialog$1.actionPerformed(AbstractParamDialog.java:186)\r\n\tat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)\r\n\tat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)\r\n\tat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)\r\n\tat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)\r\n\tat javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)\r\n\tat java.awt.Component.processMouseEvent(Component.java:6533)\r\n\tat javax.swing.JComponent.processMouseEvent(JComponent.java:3324)\r\n\tat java.awt.Component.processEvent(Component.java:6298)\r\n\tat java.awt.Container.processEvent(Container.java:2236)\r\n\tat java.awt.Component.dispatchEventImpl(Component.java:4889)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2294)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4711)\r\n\tat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888)\r\n\tat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525)\r\n\tat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2280)\r\n\tat java.awt.Window.dispatchEventImpl(Window.java:2746)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4711)\r\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\r\n\tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:731)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:729)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\r\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:109)\r\n\tat java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:184)\r\n\tat java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:229)\r\n\tat java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:227)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:227)\r\n\tat java.awt.Dialog.show(Dialog.java:1084)\r\n\tat java.awt.Component.show(Component.java:1671)\r\n\tat java.awt.Component.setVisible(Component.java:1623)\r\n\tat java.awt.Window.setVisible(Window.java:1014)\r\n\tat java.awt.Dialog.setVisible(Dialog.java:1005)\r\n\tat org.parosproxy.paros.extension.AbstractDialog.setVisible(AbstractDialog.java:139)\r\n\tat org.parosproxy.paros.view.SessionDialog.setVisible(SessionDialog.java:137)\r\n\tat org.parosproxy.paros.view.AbstractParamDialog.showDialog(AbstractParamDialog.java:361)\r\n\tat org.parosproxy.paros.view.View.showSessionDialog(View.java:695)\r\n\tat org.parosproxy.paros.view.View.showSessionDialog(View.java:661)\r\n\tat org.zaproxy.zap.authentication.FormBasedAuthenticationMethodType$1$1.performAction(FormBasedAuthenticationMethodType.java:815)\r\n\tat org.zaproxy.zap.view.popup.PopupMenuItemSiteNodeContainer.performAction(PopupMenuItemSiteNodeContainer.java:120)\r\n\tat org.zaproxy.zap.view.popup.PopupMenuItemHistoryReferenceContainer.performHistoryReferenceActions(PopupMenuItemHistoryReferenceContainer.java:268)\r\n\tat org.zaproxy.zap.view.popup.PopupMenuItemHistoryReferenceContainer.performActions(PopupMenuItemHistoryReferenceContainer.java:230)\r\n\tat org.zaproxy.zap.view.popup.PopupMenuItemHttpMessageContainer$PerformActionsActionListener.actionPerformed(PopupMenuItemHttpMessageContainer.java:587)\r\n\tat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)\r\n\tat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)\r\n\tat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)\r\n\tat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)\r\n\tat javax.swing.AbstractButton.doClick(AbstractButton.java:376)\r\n\tat javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:833)\r\n\tat javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:877)\r\n\tat java.awt.Component.processMouseEvent(Component.java:6533)\r\n\tat javax.swing.JComponent.processMouseEvent(JComponent.java:3324)\r\n\tat java.awt.Component.processEvent(Component.java:6298)\r\n\tat java.awt.Container.processEvent(Container.java:2236)\r\n\tat java.awt.Component.dispatchEventImpl(Component.java:4889)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2294)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4711)\r\n\tat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888)\r\n\tat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525)\r\n\tat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2280)\r\n\tat java.awt.Window.dispatchEventImpl(Window.java:2746)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4711)\r\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\r\n\tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:731)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:729)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\r\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\r\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\r\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\r\nCaused by: java.sql.SQLDataException: data exception: string data, right truncation;  table: CONTEXT_DATA column: DATA\r\n\tat org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)\r\n\tat org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)\r\n\tat org.hsqldb.jdbc.JDBCPreparedStatement.fetchResult(Unknown Source)\r\n\tat org.hsqldb.jdbc.JDBCPreparedStatement.executeUpdate(Unknown Source)\r\n\tat org.parosproxy.paros.db.paros.ParosTableContext.insert(ParosTableContext.java:110)\r\n\t... 101 more\r\nCaused by: org.hsqldb.HsqlException: data exception: string data, right truncation;  table: CONTEXT_DATA column: DATA\r\n\tat org.hsqldb.error.Error.error(Unknown Source)\r\n\tat org.hsqldb.Table.enforceTypeLimits(Unknown Source)\r\n\tat org.hsqldb.Table.generateAndCheckData(Unknown Source)\r\n\tat org.hsqldb.Table.insertSingleRow(Unknown Source)\r\n\tat org.hsqldb.StatementDML.insertSingleRow(Unknown Source)\r\n\tat org.hsqldb.StatementInsert.getResult(Unknown Source)\r\n\tat org.hsqldb.StatementDMQL.execute(Unknown Source)\r\n\tat org.hsqldb.Session.executeCompiledStatement(Unknown Source)\r\n\tat org.hsqldb.Session.execute(Unknown Source)\r\n\t... 104 more\r\nCaused by: org.hsqldb.HsqlException: data exception: string data, right truncation\r\n\tat org.hsqldb.error.Error.error(Unknown Source)\r\n\tat org.hsqldb.error.Error.error(Unknown Source)\r\n\tat org.hsqldb.types.CharacterType.convertToTypeLimits(Unknown Source)\r\n\t... 112 more`\r\n\r\nThis means the databaserow 'data' is too small to handle the, in my case, request body. Looking into the code I saw the following:\r\n\r\n`\t\t\tif (!DbUtils.hasTable(conn, TABLE_NAME)) {\r\n\t\t\t    // Need to create the table\r\n\t\t\t    DbUtils.executeAndClose(\r\n\t\t\t            conn.prepareStatement(\"CREATE cached TABLE CONTEXT_DATA (dataid bigint generated by default as identity (start with 1), contextId int not null, type int not null, data varchar(8192) default '')\"));\r\n\t\t\t}`\r\n(Found in 'ParosTableContext.java')\r\n\r\nMy request body was at least 22000 characters long, hence this problem. I took a look into the database of the current context and noticed that in the \"hisotry\" tabel the values request body and response body have no limit. \r\n\r\nTherefore I raise this issue (or ask this question), is there a reason the request body in the \"CONTEXT_DATA\" table is so small? \r\n\r\nNotes: \r\n\r\n- Changing the value in the query shown above has no impact on the actual database (do not know why). If you'd like to change the actual database value the 'zapdb.script' file should be changed. \r\n- I run the OWASP Zap dev build\r\n","closed_by":{"login":"psiinon","id":1081115,"node_id":"MDQ6VXNlcjEwODExMTU=","avatar_url":"https://avatars.githubusercontent.com/u/1081115?v=4","gravatar_id":"","url":"https://api.github.com/users/psiinon","html_url":"https://github.com/psiinon","followers_url":"https://api.github.com/users/psiinon/followers","following_url":"https://api.github.com/users/psiinon/following{/other_user}","gists_url":"https://api.github.com/users/psiinon/gists{/gist_id}","starred_url":"https://api.github.com/users/psiinon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psiinon/subscriptions","organizations_url":"https://api.github.com/users/psiinon/orgs","repos_url":"https://api.github.com/users/psiinon/repos","events_url":"https://api.github.com/users/psiinon/events{/privacy}","received_events_url":"https://api.github.com/users/psiinon/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/zaproxy/zaproxy/issues/3955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/3955/timeline","performed_via_github_app":null,"state_reason":"completed"}