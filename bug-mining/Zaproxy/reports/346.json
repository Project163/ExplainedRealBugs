{"url":"https://api.github.com/repos/zaproxy/zaproxy/issues/6206","repository_url":"https://api.github.com/repos/zaproxy/zaproxy","labels_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/6206/labels{/name}","comments_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/6206/comments","events_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/6206/events","html_url":"https://github.com/zaproxy/zaproxy/issues/6206","id":712045931,"node_id":"MDU6SXNzdWU3MTIwNDU5MzE=","number":6206,"title":"Unable to import context without optional fields","user":{"login":"orionCook","id":68554066,"node_id":"MDQ6VXNlcjY4NTU0MDY2","avatar_url":"https://avatars.githubusercontent.com/u/68554066?v=4","gravatar_id":"","url":"https://api.github.com/users/orionCook","html_url":"https://github.com/orionCook","followers_url":"https://api.github.com/users/orionCook/followers","following_url":"https://api.github.com/users/orionCook/following{/other_user}","gists_url":"https://api.github.com/users/orionCook/gists{/gist_id}","starred_url":"https://api.github.com/users/orionCook/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orionCook/subscriptions","organizations_url":"https://api.github.com/users/orionCook/orgs","repos_url":"https://api.github.com/users/orionCook/repos","events_url":"https://api.github.com/users/orionCook/events{/privacy}","received_events_url":"https://api.github.com/users/orionCook/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":220063774,"node_id":"MDU6TGFiZWwyMjAwNjM3NzQ=","url":"https://api.github.com/repos/zaproxy/zaproxy/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":true,"assignee":{"login":"psiinon","id":1081115,"node_id":"MDQ6VXNlcjEwODExMTU=","avatar_url":"https://avatars.githubusercontent.com/u/1081115?v=4","gravatar_id":"","url":"https://api.github.com/users/psiinon","html_url":"https://github.com/psiinon","followers_url":"https://api.github.com/users/psiinon/followers","following_url":"https://api.github.com/users/psiinon/following{/other_user}","gists_url":"https://api.github.com/users/psiinon/gists{/gist_id}","starred_url":"https://api.github.com/users/psiinon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psiinon/subscriptions","organizations_url":"https://api.github.com/users/psiinon/orgs","repos_url":"https://api.github.com/users/psiinon/repos","events_url":"https://api.github.com/users/psiinon/events{/privacy}","received_events_url":"https://api.github.com/users/psiinon/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"psiinon","id":1081115,"node_id":"MDQ6VXNlcjEwODExMTU=","avatar_url":"https://avatars.githubusercontent.com/u/1081115?v=4","gravatar_id":"","url":"https://api.github.com/users/psiinon","html_url":"https://github.com/psiinon","followers_url":"https://api.github.com/users/psiinon/followers","following_url":"https://api.github.com/users/psiinon/following{/other_user}","gists_url":"https://api.github.com/users/psiinon/gists{/gist_id}","starred_url":"https://api.github.com/users/psiinon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psiinon/subscriptions","organizations_url":"https://api.github.com/users/psiinon/orgs","repos_url":"https://api.github.com/users/psiinon/repos","events_url":"https://api.github.com/users/psiinon/events{/privacy}","received_events_url":"https://api.github.com/users/psiinon/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/zaproxy/zaproxy/milestones/6","html_url":"https://github.com/zaproxy/zaproxy/milestone/6","labels_url":"https://api.github.com/repos/zaproxy/zaproxy/milestones/6/labels","id":4805929,"node_id":"MDk6TWlsZXN0b25lNDgwNTkyOQ==","number":6,"title":"2.10.0","description":"","creator":{"login":"psiinon","id":1081115,"node_id":"MDQ6VXNlcjEwODExMTU=","avatar_url":"https://avatars.githubusercontent.com/u/1081115?v=4","gravatar_id":"","url":"https://api.github.com/users/psiinon","html_url":"https://github.com/psiinon","followers_url":"https://api.github.com/users/psiinon/followers","following_url":"https://api.github.com/users/psiinon/following{/other_user}","gists_url":"https://api.github.com/users/psiinon/gists{/gist_id}","starred_url":"https://api.github.com/users/psiinon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psiinon/subscriptions","organizations_url":"https://api.github.com/users/psiinon/orgs","repos_url":"https://api.github.com/users/psiinon/repos","events_url":"https://api.github.com/users/psiinon/events{/privacy}","received_events_url":"https://api.github.com/users/psiinon/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":62,"state":"closed","created_at":"2019-11-01T17:40:02Z","updated_at":"2020-12-18T14:30:28Z","due_on":null,"closed_at":"2020-12-18T14:30:28Z"},"comments":24,"created_at":"2020-09-30T15:24:05Z","updated_at":"2021-07-12T09:05:40Z","closed_at":"2020-10-06T13:31:41Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"[fuse_api.txt](https://github.com/zaproxy/zaproxy/files/5306565/fuse_api.txt)\r\n**Describe the bug**\r\n\r\nI receive this error when trying to load in a context file \r\n`Failed to load context file /zap/wrk/fuse_api.context : internal_error`\r\nIt doesn't happen when running the same script (below) with zap2docker-stable\r\n\r\nThis is the script I'm running to get the error\r\n```docker stop owasp && docker rm owasp\r\ndocker pull owasp/zap2docker-weekly\r\ndocker create --name=owasp --network=\"host\" -t owasp/zap2docker-weekly\r\ndocker start owasp\r\ndocker exec owasp mkdir /zap/wrk\r\ndocker cp fuse_api.context owasp:/zap/wrk/fuse_api.context\r\ndocker cp warnings_config.txt owasp:/zap/wrk/warnings_config.txt\r\ndocker cp scan_config.txt owasp:/zap/wrk/scan_config.txt\r\ndocker exec owasp zap-api-scan.py -t https://docker.for.win.localhost:8443/openapi.json -f openapi -z \"-configfile /zap/wrk/scan_config.txt\" -c warnings_config.txt -r report.html -n fuse_api.context -J report.json\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Copy the attached files to a local directory\r\n2. Rename fuse_api.txt to fuse_api.context (it doesn't really matter if this is the context file, though. It still happens with the default context created by the ZAP GUI)\r\n3. replace the target `-t https://docker.for.win.localhost:8443/openapi.json` with your own openapi.json endpoint\r\n4. Run the above script from the directory where you stored the attached files\r\n5. See error\r\n\r\n**Expected behavior**\r\nThe context file is loaded without an error (as seen when running the above script with `-stable` instead of `-weekly`\r\n\r\n**Software versions**\r\n - ZAP: latest\r\n - Add-on: N/A\r\n - OS: Windows 10 & Amazon Linux\r\n - Java: openjdk 11.0.8 2020-07-14 LTS\r\n - Browser: N/A\r\n\r\n**Errors from the zap.log file**\r\n```\r\n020-09-30 15:02:03,240 [ZAP-daemon] INFO  DaemonBootstrap - ZAP is now listening on 0.0.0.0:33573\r\n2020-09-30 15:02:03,474 [ZAP-ProxyThread-2] ERROR ContextAPI - 'context.session.type' doesn't map to an existing object\r\njava.util.NoSuchElementException: 'context.session.type' doesn't map to an existing object\r\n        at org.apache.commons.configuration.AbstractConfiguration.getInt(AbstractConfiguration.java:816)\r\n        at org.zaproxy.zap.extension.sessions.ExtensionSessionManagement.importContextData(ExtensionSessionManagement.java:212)\r\n        at org.parosproxy.paros.model.Model.importContext(Model.java:552)\r\n        at org.parosproxy.paros.model.Session.importContext(Session.java:1547)\r\n        at org.zaproxy.zap.extension.api.ContextAPI.handleApiAction(ContextAPI.java:204)\r\n        at org.zaproxy.zap.extension.api.API.handleApiRequest(API.java:506)\r\n        at org.parosproxy.paros.core.proxy.ProxyThread.processHttp(ProxyThread.java:499)\r\n        at org.parosproxy.paros.core.proxy.ProxyThread.run(ProxyThread.java:335)\r\n        at java.base/java.lang.Thread.run(Thread.java:834)\r\n```\r\n\r\n**Would you like to help fix this issue?**\r\nYes, I would.\r\n[scan_config.txt](https://github.com/zaproxy/zaproxy/files/5306556/scan_config.txt)\r\n[warnings_config.txt](https://github.com/zaproxy/zaproxy/files/5306557/warnings_config.txt)\r\n\r\n\r\n\r\n","closed_by":{"login":"thc202","id":4639210,"node_id":"MDQ6VXNlcjQ2MzkyMTA=","avatar_url":"https://avatars.githubusercontent.com/u/4639210?v=4","gravatar_id":"","url":"https://api.github.com/users/thc202","html_url":"https://github.com/thc202","followers_url":"https://api.github.com/users/thc202/followers","following_url":"https://api.github.com/users/thc202/following{/other_user}","gists_url":"https://api.github.com/users/thc202/gists{/gist_id}","starred_url":"https://api.github.com/users/thc202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thc202/subscriptions","organizations_url":"https://api.github.com/users/thc202/orgs","repos_url":"https://api.github.com/users/thc202/repos","events_url":"https://api.github.com/users/thc202/events{/privacy}","received_events_url":"https://api.github.com/users/thc202/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/zaproxy/zaproxy/issues/6206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/6206/timeline","performed_via_github_app":null,"state_reason":"completed"}