{"url":"https://api.github.com/repos/zaproxy/zaproxy/issues/8635","repository_url":"https://api.github.com/repos/zaproxy/zaproxy","labels_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/8635/labels{/name}","comments_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/8635/comments","events_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/8635/events","html_url":"https://github.com/zaproxy/zaproxy/issues/8635","id":2522890688,"node_id":"I_kwDOAjHKnc6WYEHA","number":8635,"title":"Concurrent access to Graal.js Input Vector scripts","user":{"login":"thc202","id":4639210,"node_id":"MDQ6VXNlcjQ2MzkyMTA=","avatar_url":"https://avatars.githubusercontent.com/u/4639210?v=4","gravatar_id":"","url":"https://api.github.com/users/thc202","html_url":"https://github.com/thc202","followers_url":"https://api.github.com/users/thc202/followers","following_url":"https://api.github.com/users/thc202/following{/other_user}","gists_url":"https://api.github.com/users/thc202/gists{/gist_id}","starred_url":"https://api.github.com/users/thc202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thc202/subscriptions","organizations_url":"https://api.github.com/users/thc202/orgs","repos_url":"https://api.github.com/users/thc202/repos","events_url":"https://api.github.com/users/thc202/events{/privacy}","received_events_url":"https://api.github.com/users/thc202/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":220063774,"node_id":"MDU6TGFiZWwyMjAwNjM3NzQ=","url":"https://api.github.com/repos/zaproxy/zaproxy/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":7650298344,"node_id":"LA_kwDOAjHKnc8AAAABx_5J6A","url":"https://api.github.com/repos/zaproxy/zaproxy/labels/backlog","name":"backlog","color":"44C908","default":false,"description":"Issues that the Core Team think are higher priority and would like to work on given time"}],"state":"closed","locked":true,"assignee":{"login":"thc202","id":4639210,"node_id":"MDQ6VXNlcjQ2MzkyMTA=","avatar_url":"https://avatars.githubusercontent.com/u/4639210?v=4","gravatar_id":"","url":"https://api.github.com/users/thc202","html_url":"https://github.com/thc202","followers_url":"https://api.github.com/users/thc202/followers","following_url":"https://api.github.com/users/thc202/following{/other_user}","gists_url":"https://api.github.com/users/thc202/gists{/gist_id}","starred_url":"https://api.github.com/users/thc202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thc202/subscriptions","organizations_url":"https://api.github.com/users/thc202/orgs","repos_url":"https://api.github.com/users/thc202/repos","events_url":"https://api.github.com/users/thc202/events{/privacy}","received_events_url":"https://api.github.com/users/thc202/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"thc202","id":4639210,"node_id":"MDQ6VXNlcjQ2MzkyMTA=","avatar_url":"https://avatars.githubusercontent.com/u/4639210?v=4","gravatar_id":"","url":"https://api.github.com/users/thc202","html_url":"https://github.com/thc202","followers_url":"https://api.github.com/users/thc202/followers","following_url":"https://api.github.com/users/thc202/following{/other_user}","gists_url":"https://api.github.com/users/thc202/gists{/gist_id}","starred_url":"https://api.github.com/users/thc202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thc202/subscriptions","organizations_url":"https://api.github.com/users/thc202/orgs","repos_url":"https://api.github.com/users/thc202/repos","events_url":"https://api.github.com/users/thc202/events{/privacy}","received_events_url":"https://api.github.com/users/thc202/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/zaproxy/zaproxy/milestones/12","html_url":"https://github.com/zaproxy/zaproxy/milestone/12","labels_url":"https://api.github.com/repos/zaproxy/zaproxy/milestones/12/labels","id":10780624,"node_id":"MI_kwDOAjHKnc4ApH_Q","number":12,"title":"2.16.0","description":"","creator":{"login":"thc202","id":4639210,"node_id":"MDQ6VXNlcjQ2MzkyMTA=","avatar_url":"https://avatars.githubusercontent.com/u/4639210?v=4","gravatar_id":"","url":"https://api.github.com/users/thc202","html_url":"https://github.com/thc202","followers_url":"https://api.github.com/users/thc202/followers","following_url":"https://api.github.com/users/thc202/following{/other_user}","gists_url":"https://api.github.com/users/thc202/gists{/gist_id}","starred_url":"https://api.github.com/users/thc202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thc202/subscriptions","organizations_url":"https://api.github.com/users/thc202/orgs","repos_url":"https://api.github.com/users/thc202/repos","events_url":"https://api.github.com/users/thc202/events{/privacy}","received_events_url":"https://api.github.com/users/thc202/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":38,"state":"closed","created_at":"2024-04-05T13:57:53Z","updated_at":"2025-01-21T15:18:42Z","due_on":null,"closed_at":"2025-01-21T15:18:42Z"},"comments":1,"created_at":"2024-09-12T16:48:23Z","updated_at":"2025-03-06T01:32:30Z","closed_at":"2024-12-05T12:40:00Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\n`Multi threaded access requested by thread Thread[ZAP-ActiveScanner-2,3,main] but is not allowed for language(s) js.`\n\n### Steps to reproduce the behavior\n\n1. Create an Input Vector script with Graal.js engine\r\n2. Run the Active Scanner with Script Input Vectors enabled\r\n3. Notice the script gets disabled after some time (might not happen always given it's a concurrency issue).\n\n### Expected behavior\n\nScript is not disabled while used.\n\n### Software versions\n\nLatest main zaproxy/zaproxy@da7d10ce3efba9817557a744a9c945364878dddc.\n\n### Screenshots\n\n_No response_\n\n### Errors from the zap.log file\n\ne.g.:\r\n```\r\n2102141 [ZAP-ActiveScanner-0] ERROR org.zaproxy.zap.extension.scripts.OutputPanel - Multi threaded access requested by thread Thread[ZAP-ActiveScanner-0,3,main] but is not allowed for language(s) js.\r\njava.lang.IllegalStateException: Multi threaded access requested by thread Thread[ZAP-ActiveScanner-0,3,main] but is not allowed for language(s) js.\r\n\tat com.oracle.truffle.polyglot.PolyglotEngineException.illegalState(PolyglotEngineException.java:135) ~[?:?]\r\n\tat com.oracle.truffle.polyglot.PolyglotContextImpl.throwDeniedThreadAccess(PolyglotContextImpl.java:1197) ~[?:?]\r\n\tat com.oracle.truffle.polyglot.PolyglotContextImpl.checkAllThreadAccesses(PolyglotContextImpl.java:998) ~[?:?]\r\n\tat com.oracle.truffle.polyglot.PolyglotContextImpl.enterThreadChanged(PolyglotContextImpl.java:829) ~[?:?]\r\n\tat com.oracle.truffle.polyglot.PolyglotEngineImpl.enterCached(PolyglotEngineImpl.java:2047) ~[?:?]\r\n\tat com.oracle.truffle.polyglot.HostToGuestRootNode.execute(HostToGuestRootNode.java:109) ~[?:?]\r\n\tat com.oracle.truffle.api.impl.DefaultCallTarget.callDirectOrIndirect(DefaultCallTarget.java:85) ~[?:?]\r\n\tat com.oracle.truffle.api.impl.DefaultCallTarget.call(DefaultCallTarget.java:102) ~[?:?]\r\n\tat com.oracle.truffle.polyglot.PolyglotObjectProxyHandler.invoke(PolyglotObjectProxyHandler.java:103) ~[?:?]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy75.getTreePath(Unknown Source) ~[?:?]\r\n\tat org.parosproxy.paros.core.scanner.VariantCustom.getTreePath(VariantCustom.java:315) [main/:?]\r\n\tat org.zaproxy.zap.model.SessionStructure.getTreePath(SessionStructure.java:148) [main/:?]\r\n\tat org.parosproxy.paros.core.scanner.VariantDdnPath.setMessage(VariantDdnPath.java:57) [main/:?]\r\n\tat org.parosproxy.paros.core.scanner.AbstractAppParamPlugin.scan(AbstractAppParamPlugin.java:91) [main/:?]\r\n\tat org.parosproxy.paros.core.scanner.AbstractPlugin.run(AbstractPlugin.java:379) [main/:?]\r\n\tat java.base/java.lang.Thread.run(Thread.java:840) [?:?]\r\nCaused by: com.oracle.truffle.api.TruffleStackTrace$LazyStackTrace\r\n```\n\n### Additional context\n\n_No response_\n\n### Would you like to help fix this issue?\n\n- [ ] Yes","closed_by":{"login":"kingthorin","id":7570458,"node_id":"MDQ6VXNlcjc1NzA0NTg=","avatar_url":"https://avatars.githubusercontent.com/u/7570458?v=4","gravatar_id":"","url":"https://api.github.com/users/kingthorin","html_url":"https://github.com/kingthorin","followers_url":"https://api.github.com/users/kingthorin/followers","following_url":"https://api.github.com/users/kingthorin/following{/other_user}","gists_url":"https://api.github.com/users/kingthorin/gists{/gist_id}","starred_url":"https://api.github.com/users/kingthorin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kingthorin/subscriptions","organizations_url":"https://api.github.com/users/kingthorin/orgs","repos_url":"https://api.github.com/users/kingthorin/repos","events_url":"https://api.github.com/users/kingthorin/events{/privacy}","received_events_url":"https://api.github.com/users/kingthorin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/zaproxy/zaproxy/issues/8635/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/zaproxy/zaproxy/issues/8635/timeline","performed_via_github_app":null,"state_reason":"completed"}