[{"url":"https://api.github.com/repos/Unitech/pm2/issues/comments/19528258","html_url":"https://github.com/Unitech/pm2/issues/4#issuecomment-19528258","issue_url":"https://api.github.com/repos/Unitech/pm2/issues/4","id":19528258,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NTI4MjU4","user":{"login":"Unitech","id":757747,"node_id":"MDQ6VXNlcjc1Nzc0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/757747?v=4","gravatar_id":"","url":"https://api.github.com/users/Unitech","html_url":"https://github.com/Unitech","followers_url":"https://api.github.com/users/Unitech/followers","following_url":"https://api.github.com/users/Unitech/following{/other_user}","gists_url":"https://api.github.com/users/Unitech/gists{/gist_id}","starred_url":"https://api.github.com/users/Unitech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Unitech/subscriptions","organizations_url":"https://api.github.com/users/Unitech/orgs","repos_url":"https://api.github.com/users/Unitech/repos","events_url":"https://api.github.com/users/Unitech/events{/privacy}","received_events_url":"https://api.github.com/users/Unitech/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-17T06:35:30Z","updated_at":"2013-06-17T06:35:30Z","body":"Working on it\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/Unitech/pm2/issues/comments/19528258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Unitech","id":757747,"node_id":"MDQ6VXNlcjc1Nzc0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/757747?v=4","gravatar_id":"","url":"https://api.github.com/users/Unitech","html_url":"https://github.com/Unitech","followers_url":"https://api.github.com/users/Unitech/followers","following_url":"https://api.github.com/users/Unitech/following{/other_user}","gists_url":"https://api.github.com/users/Unitech/gists{/gist_id}","starred_url":"https://api.github.com/users/Unitech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Unitech/subscriptions","organizations_url":"https://api.github.com/users/Unitech/orgs","repos_url":"https://api.github.com/users/Unitech/repos","events_url":"https://api.github.com/users/Unitech/events{/privacy}","received_events_url":"https://api.github.com/users/Unitech/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":52867506,"node_id":"MDExOkNsb3NlZEV2ZW50NTI4Njc1MDY=","url":"https://api.github.com/repos/Unitech/pm2/issues/events/52867506","actor":{"login":"Unitech","id":757747,"node_id":"MDQ6VXNlcjc1Nzc0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/757747?v=4","gravatar_id":"","url":"https://api.github.com/users/Unitech","html_url":"https://github.com/Unitech","followers_url":"https://api.github.com/users/Unitech/followers","following_url":"https://api.github.com/users/Unitech/following{/other_user}","gists_url":"https://api.github.com/users/Unitech/gists{/gist_id}","starred_url":"https://api.github.com/users/Unitech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Unitech/subscriptions","organizations_url":"https://api.github.com/users/Unitech/orgs","repos_url":"https://api.github.com/users/Unitech/repos","events_url":"https://api.github.com/users/Unitech/events{/privacy}","received_events_url":"https://api.github.com/users/Unitech/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"488519fd408c9692b2af2f65cd9f4f022635d963","commit_url":"https://api.github.com/repos/Unitech/pm2/commits/488519fd408c9692b2af2f65cd9f4f022635d963","created_at":"2013-06-17T07:36:22Z","state_reason":null,"performed_via_github_app":null},{"id":201210264,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIwMTIxMDI2NA==","url":"https://api.github.com/repos/Unitech/pm2/issues/events/201210264","actor":{"login":"Tjatse","id":1418444,"node_id":"MDQ6VXNlcjE0MTg0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1418444?v=4","gravatar_id":"","url":"https://api.github.com/users/Tjatse","html_url":"https://github.com/Tjatse","followers_url":"https://api.github.com/users/Tjatse/followers","following_url":"https://api.github.com/users/Tjatse/following{/other_user}","gists_url":"https://api.github.com/users/Tjatse/gists{/gist_id}","starred_url":"https://api.github.com/users/Tjatse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tjatse/subscriptions","organizations_url":"https://api.github.com/users/Tjatse/orgs","repos_url":"https://api.github.com/users/Tjatse/repos","events_url":"https://api.github.com/users/Tjatse/events{/privacy}","received_events_url":"https://api.github.com/users/Tjatse/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"547c03a0d0b7aff30395783258089b439fcb677a","commit_url":"https://api.github.com/repos/Unitech/pm2/commits/547c03a0d0b7aff30395783258089b439fcb677a","created_at":"2014-12-02T13:12:02Z","performed_via_github_app":null},{"actor":{"login":"JunejaTung","id":13295415,"node_id":"MDQ6VXNlcjEzMjk1NDE1","avatar_url":"https://avatars.githubusercontent.com/u/13295415?v=4","gravatar_id":"","url":"https://api.github.com/users/JunejaTung","html_url":"https://github.com/JunejaTung","followers_url":"https://api.github.com/users/JunejaTung/followers","following_url":"https://api.github.com/users/JunejaTung/following{/other_user}","gists_url":"https://api.github.com/users/JunejaTung/gists{/gist_id}","starred_url":"https://api.github.com/users/JunejaTung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JunejaTung/subscriptions","organizations_url":"https://api.github.com/users/JunejaTung/orgs","repos_url":"https://api.github.com/users/JunejaTung/repos","events_url":"https://api.github.com/users/JunejaTung/events{/privacy}","received_events_url":"https://api.github.com/users/JunejaTung/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-09-23T11:31:11Z","updated_at":"2015-09-23T11:31:11Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Unitech/pm2/issues/1637","repository_url":"https://api.github.com/repos/Unitech/pm2","labels_url":"https://api.github.com/repos/Unitech/pm2/issues/1637/labels{/name}","comments_url":"https://api.github.com/repos/Unitech/pm2/issues/1637/comments","events_url":"https://api.github.com/repos/Unitech/pm2/issues/1637/events","html_url":"https://github.com/Unitech/pm2/issues/1637","id":107900124,"node_id":"MDU6SXNzdWUxMDc5MDAxMjQ=","number":1637,"title":"amqp gracefulRload Assertion","user":{"login":"JunejaTung","id":13295415,"node_id":"MDQ6VXNlcjEzMjk1NDE1","avatar_url":"https://avatars.githubusercontent.com/u/13295415?v=4","gravatar_id":"","url":"https://api.github.com/users/JunejaTung","html_url":"https://github.com/JunejaTung","followers_url":"https://api.github.com/users/JunejaTung/followers","following_url":"https://api.github.com/users/JunejaTung/following{/other_user}","gists_url":"https://api.github.com/users/JunejaTung/gists{/gist_id}","starred_url":"https://api.github.com/users/JunejaTung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JunejaTung/subscriptions","organizations_url":"https://api.github.com/users/JunejaTung/orgs","repos_url":"https://api.github.com/users/JunejaTung/repos","events_url":"https://api.github.com/users/JunejaTung/events{/privacy}","received_events_url":"https://api.github.com/users/JunejaTung/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2015-09-23T11:31:11Z","updated_at":"2016-11-07T16:10:45Z","closed_at":"2016-10-31T09:37:16Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":10187082,"node_id":"MDEwOlJlcG9zaXRvcnkxMDE4NzA4Mg==","name":"pm2","full_name":"Unitech/pm2","private":false,"owner":{"login":"Unitech","id":757747,"node_id":"MDQ6VXNlcjc1Nzc0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/757747?v=4","gravatar_id":"","url":"https://api.github.com/users/Unitech","html_url":"https://github.com/Unitech","followers_url":"https://api.github.com/users/Unitech/followers","following_url":"https://api.github.com/users/Unitech/following{/other_user}","gists_url":"https://api.github.com/users/Unitech/gists{/gist_id}","starred_url":"https://api.github.com/users/Unitech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Unitech/subscriptions","organizations_url":"https://api.github.com/users/Unitech/orgs","repos_url":"https://api.github.com/users/Unitech/repos","events_url":"https://api.github.com/users/Unitech/events{/privacy}","received_events_url":"https://api.github.com/users/Unitech/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Unitech/pm2","description":"Node.js Production Process Manager with a built-in Load Balancer.","fork":false,"url":"https://api.github.com/repos/Unitech/pm2","forks_url":"https://api.github.com/repos/Unitech/pm2/forks","keys_url":"https://api.github.com/repos/Unitech/pm2/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Unitech/pm2/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Unitech/pm2/teams","hooks_url":"https://api.github.com/repos/Unitech/pm2/hooks","issue_events_url":"https://api.github.com/repos/Unitech/pm2/issues/events{/number}","events_url":"https://api.github.com/repos/Unitech/pm2/events","assignees_url":"https://api.github.com/repos/Unitech/pm2/assignees{/user}","branches_url":"https://api.github.com/repos/Unitech/pm2/branches{/branch}","tags_url":"https://api.github.com/repos/Unitech/pm2/tags","blobs_url":"https://api.github.com/repos/Unitech/pm2/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Unitech/pm2/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Unitech/pm2/git/refs{/sha}","trees_url":"https://api.github.com/repos/Unitech/pm2/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Unitech/pm2/statuses/{sha}","languages_url":"https://api.github.com/repos/Unitech/pm2/languages","stargazers_url":"https://api.github.com/repos/Unitech/pm2/stargazers","contributors_url":"https://api.github.com/repos/Unitech/pm2/contributors","subscribers_url":"https://api.github.com/repos/Unitech/pm2/subscribers","subscription_url":"https://api.github.com/repos/Unitech/pm2/subscription","commits_url":"https://api.github.com/repos/Unitech/pm2/commits{/sha}","git_commits_url":"https://api.github.com/repos/Unitech/pm2/git/commits{/sha}","comments_url":"https://api.github.com/repos/Unitech/pm2/comments{/number}","issue_comment_url":"https://api.github.com/repos/Unitech/pm2/issues/comments{/number}","contents_url":"https://api.github.com/repos/Unitech/pm2/contents/{+path}","compare_url":"https://api.github.com/repos/Unitech/pm2/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Unitech/pm2/merges","archive_url":"https://api.github.com/repos/Unitech/pm2/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Unitech/pm2/downloads","issues_url":"https://api.github.com/repos/Unitech/pm2/issues{/number}","pulls_url":"https://api.github.com/repos/Unitech/pm2/pulls{/number}","milestones_url":"https://api.github.com/repos/Unitech/pm2/milestones{/number}","notifications_url":"https://api.github.com/repos/Unitech/pm2/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Unitech/pm2/labels{/name}","releases_url":"https://api.github.com/repos/Unitech/pm2/releases{/id}","deployments_url":"https://api.github.com/repos/Unitech/pm2/deployments","created_at":"2013-05-21T03:25:25Z","updated_at":"2025-11-10T06:09:36Z","pushed_at":"2025-10-31T12:18:31Z","git_url":"git://github.com/Unitech/pm2.git","ssh_url":"git@github.com:Unitech/pm2.git","clone_url":"https://github.com/Unitech/pm2.git","svn_url":"https://github.com/Unitech/pm2","homepage":"https://pm2.keymetrics.io/docs/usage/quick-start/","size":13496,"stargazers_count":42707,"watchers_count":42707,"language":"JavaScript","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":2661,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1072,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["command-line","command-line-tool","deploy","load-balancer","monitoring","node","nodejs","pm2","process-manager","production"],"visibility":"public","forks":2661,"open_issues":1072,"watchers":42707,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"# a simple webserver with amqp connection.\n## 1. webserver(wtest) app run in cluster mode as：\n\n[root@VirtualServer1 TEST]# pm2 start wtest.js -i 0  \n[PM2] Starting wtest.js in cluster_mode (0 instance)\n[PM2] Done.\n┌────────────────────┬────┬─────────┬───────┬────────┬─────────┬────────┬─────────────┬──────────┐\n│ App name           │ id │ mode    │ pid   │ status │ restart │ uptime │ memory      │ watching │\n├────────────────────┼────┼─────────┼───────┼────────┼─────────┼────────┼─────────────┼──────────┤\n│ pm2-http-interface │ 0  │ fork    │ 27265 │ online │ 0       │ 8h     │ 23.863 MB   │ disabled │\n│ wtest              │ 32 │ cluster │ 31296 │ online │ 0       │ 0s     │ 15.141 MB   │ disabled │\n│ wtest              │ 33 │ cluster │ 31299 │ online │ 0       │ 0s     │ 12.090 MB   │ disabled │\n└────────────────────┴────┴─────────┴───────┴────────┴─────────┴────────┴─────────────┴──────────┘\n Use `pm2 show <id|name>` to get more details about an app\n[root@VirtualServer1 TEST]# \n1. another terminator Simulate concurrent web requests：\n   [root@21Server expserver]# ab -n 5000 -c 100 http://192.168.110.30:8800/\n   This is ApacheBench, Version 2.3 <$Revision: 655654 $>\n   Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\n   Licensed to The Apache Software Foundation, http://www.apache.org/\n\nBenchmarking 192.168.110.30 (be patient)\nCompleted 500 requests\nCompleted 1000 requests\nCompleted 1500 requests\nCompleted 2000 requests\nCompleted 2500 requests\nCompleted 3000 requests\n...\n## 3. then gracefulReload wtest app some AssertionError happen ：\n\n[root@VirtualServer1 TEST]# pm2 gracefulReload wtest all\n[PM2] Reloading process by name wtest\n[PM2] Process wtest succesfully reloaded\n[PM2] Process wtest succesfully reloaded\n[PM2] All processes reloaded\n┌────────────────────┬────┬─────────┬───────┬────────┬─────────┬────────┬─────────────┬──────────┐\n│ App name           │ id │ mode    │ pid   │ status │ restart │ uptime │ memory      │ watching │\n├────────────────────┼────┼─────────┼───────┼────────┼─────────┼────────┼─────────────┼──────────┤\n│ pm2-http-interface │ 0  │ fork    │ 27265 │ online │ 0       │ 8h     │ 23.875 MB   │ disabled │\n│ wtest              │ 32 │ cluster │ 31319 │ online │ 1       │ 23s    │ 36.168 MB   │ disabled │\n│ wtest              │ 33 │ cluster │ 31327 │ online │ 1       │ 12s    │ 20.648 MB   │ disabled │\n└────────────────────┴────┴─────────┴───────┴────────┴─────────┴────────┴─────────────┴──────────┘\n Use `pm2 show <id|name>` to get more details about an app\n[root@VirtualServer1 TEST]# pm2 logs wtest\n[PM2] Tailing last 20 lines for [wtest] process \n\nwtest-32 (err): AssertionError: null == true\nwtest-32 (err):     at process.target._send (child_process.js:420:5)\nwtest-32 (err):     at process.<anonymous> (child_process.js:396:12)\nwtest-32 (err):     at process.emit (events.js:129:20)\nwtest-32 (err):     at handleMessage (child_process.js:324:10)\nwtest-32 (err):     at Pipe.channel.onread (child_process.js:350:11)\n\nwtest-32 (out): Reply id: 1605\nwtest-32 (out): Request id: 1607\nwtest-32 (out): Reply id: 1606\nwtest-32 (out): Request id: 1608\n## 4. callback for 'shutdown'：\n\nprocess.on('message', function (msg) {\n    if (msg == 'shutdown') {\n        server.close();\n        prodMQ.disconnect();   // close amqp connection\n        console.log(\"Graceful close server.\");\n        setTimeout(function () {\n            process.exit(0);\n        }, 10000);\n    }\n});\n## 5. when i  note `prodMQ.disconnect();`, then gracefulReload is OK.\n\nwhy I disconnect the MQ connection hit the question in 3.\n\nPM2 version is 0.14.7\nNode.js version is 0.12.6\n\nBest regards!\n","reactions":{"url":"https://api.github.com/repos/Unitech/pm2/issues/1637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Unitech/pm2/issues/1637/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"damianobarbati","id":2225869,"node_id":"MDQ6VXNlcjIyMjU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/2225869?v=4","gravatar_id":"","url":"https://api.github.com/users/damianobarbati","html_url":"https://github.com/damianobarbati","followers_url":"https://api.github.com/users/damianobarbati/followers","following_url":"https://api.github.com/users/damianobarbati/following{/other_user}","gists_url":"https://api.github.com/users/damianobarbati/gists{/gist_id}","starred_url":"https://api.github.com/users/damianobarbati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/damianobarbati/subscriptions","organizations_url":"https://api.github.com/users/damianobarbati/orgs","repos_url":"https://api.github.com/users/damianobarbati/repos","events_url":"https://api.github.com/users/damianobarbati/events{/privacy}","received_events_url":"https://api.github.com/users/damianobarbati/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-26T10:25:12Z","updated_at":"2017-06-26T10:25:12Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Unitech/pm2/issues/2944","repository_url":"https://api.github.com/repos/Unitech/pm2","labels_url":"https://api.github.com/repos/Unitech/pm2/issues/2944/labels{/name}","comments_url":"https://api.github.com/repos/Unitech/pm2/issues/2944/comments","events_url":"https://api.github.com/repos/Unitech/pm2/issues/2944/events","html_url":"https://github.com/Unitech/pm2/issues/2944","id":235531508,"node_id":"MDU6SXNzdWUyMzU1MzE1MDg=","number":2944,"title":"PM2 scoped to app","user":{"login":"damianobarbati","id":2225869,"node_id":"MDQ6VXNlcjIyMjU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/2225869?v=4","gravatar_id":"","url":"https://api.github.com/users/damianobarbati","html_url":"https://github.com/damianobarbati","followers_url":"https://api.github.com/users/damianobarbati/followers","following_url":"https://api.github.com/users/damianobarbati/following{/other_user}","gists_url":"https://api.github.com/users/damianobarbati/gists{/gist_id}","starred_url":"https://api.github.com/users/damianobarbati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/damianobarbati/subscriptions","organizations_url":"https://api.github.com/users/damianobarbati/orgs","repos_url":"https://api.github.com/users/damianobarbati/repos","events_url":"https://api.github.com/users/damianobarbati/events{/privacy}","received_events_url":"https://api.github.com/users/damianobarbati/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":89177605,"node_id":"MDU6TGFiZWw4OTE3NzYwNQ==","url":"https://api.github.com/repos/Unitech/pm2/labels/T:%20Question","name":"T: Question","color":"faff87","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-06-13T12:07:02Z","updated_at":"2017-07-18T14:01:30Z","closed_at":"2017-07-18T14:01:30Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":10187082,"node_id":"MDEwOlJlcG9zaXRvcnkxMDE4NzA4Mg==","name":"pm2","full_name":"Unitech/pm2","private":false,"owner":{"login":"Unitech","id":757747,"node_id":"MDQ6VXNlcjc1Nzc0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/757747?v=4","gravatar_id":"","url":"https://api.github.com/users/Unitech","html_url":"https://github.com/Unitech","followers_url":"https://api.github.com/users/Unitech/followers","following_url":"https://api.github.com/users/Unitech/following{/other_user}","gists_url":"https://api.github.com/users/Unitech/gists{/gist_id}","starred_url":"https://api.github.com/users/Unitech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Unitech/subscriptions","organizations_url":"https://api.github.com/users/Unitech/orgs","repos_url":"https://api.github.com/users/Unitech/repos","events_url":"https://api.github.com/users/Unitech/events{/privacy}","received_events_url":"https://api.github.com/users/Unitech/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Unitech/pm2","description":"Node.js Production Process Manager with a built-in Load Balancer.","fork":false,"url":"https://api.github.com/repos/Unitech/pm2","forks_url":"https://api.github.com/repos/Unitech/pm2/forks","keys_url":"https://api.github.com/repos/Unitech/pm2/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Unitech/pm2/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Unitech/pm2/teams","hooks_url":"https://api.github.com/repos/Unitech/pm2/hooks","issue_events_url":"https://api.github.com/repos/Unitech/pm2/issues/events{/number}","events_url":"https://api.github.com/repos/Unitech/pm2/events","assignees_url":"https://api.github.com/repos/Unitech/pm2/assignees{/user}","branches_url":"https://api.github.com/repos/Unitech/pm2/branches{/branch}","tags_url":"https://api.github.com/repos/Unitech/pm2/tags","blobs_url":"https://api.github.com/repos/Unitech/pm2/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Unitech/pm2/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Unitech/pm2/git/refs{/sha}","trees_url":"https://api.github.com/repos/Unitech/pm2/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Unitech/pm2/statuses/{sha}","languages_url":"https://api.github.com/repos/Unitech/pm2/languages","stargazers_url":"https://api.github.com/repos/Unitech/pm2/stargazers","contributors_url":"https://api.github.com/repos/Unitech/pm2/contributors","subscribers_url":"https://api.github.com/repos/Unitech/pm2/subscribers","subscription_url":"https://api.github.com/repos/Unitech/pm2/subscription","commits_url":"https://api.github.com/repos/Unitech/pm2/commits{/sha}","git_commits_url":"https://api.github.com/repos/Unitech/pm2/git/commits{/sha}","comments_url":"https://api.github.com/repos/Unitech/pm2/comments{/number}","issue_comment_url":"https://api.github.com/repos/Unitech/pm2/issues/comments{/number}","contents_url":"https://api.github.com/repos/Unitech/pm2/contents/{+path}","compare_url":"https://api.github.com/repos/Unitech/pm2/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Unitech/pm2/merges","archive_url":"https://api.github.com/repos/Unitech/pm2/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Unitech/pm2/downloads","issues_url":"https://api.github.com/repos/Unitech/pm2/issues{/number}","pulls_url":"https://api.github.com/repos/Unitech/pm2/pulls{/number}","milestones_url":"https://api.github.com/repos/Unitech/pm2/milestones{/number}","notifications_url":"https://api.github.com/repos/Unitech/pm2/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Unitech/pm2/labels{/name}","releases_url":"https://api.github.com/repos/Unitech/pm2/releases{/id}","deployments_url":"https://api.github.com/repos/Unitech/pm2/deployments","created_at":"2013-05-21T03:25:25Z","updated_at":"2025-11-10T06:09:36Z","pushed_at":"2025-10-31T12:18:31Z","git_url":"git://github.com/Unitech/pm2.git","ssh_url":"git@github.com:Unitech/pm2.git","clone_url":"https://github.com/Unitech/pm2.git","svn_url":"https://github.com/Unitech/pm2","homepage":"https://pm2.keymetrics.io/docs/usage/quick-start/","size":13496,"stargazers_count":42707,"watchers_count":42707,"language":"JavaScript","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":2661,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1072,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["command-line","command-line-tool","deploy","load-balancer","monitoring","node","nodejs","pm2","process-manager","production"],"visibility":"public","forks":2661,"open_issues":1072,"watchers":42707,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Is the following pattern harmful in a production environment?\r\nIs this safe to use with multiple projects / pm2 instances?\r\n\r\nIn package.json:\r\n```\r\n    \"scripts\": {\r\n        \"pm2\": \"./node_modules/pm2/bin/pm2\",\r\n```\r\nOn terminal:\r\n`yarn pm2 pm2.config.js`\r\n\r\nI think it would be great to have pm2 scoped to package.\r\n","reactions":{"url":"https://api.github.com/repos/Unitech/pm2/issues/2944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Unitech/pm2/issues/2944/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"spointer","id":11382408,"node_id":"MDQ6VXNlcjExMzgyNDA4","avatar_url":"https://avatars.githubusercontent.com/u/11382408?v=4","gravatar_id":"","url":"https://api.github.com/users/spointer","html_url":"https://github.com/spointer","followers_url":"https://api.github.com/users/spointer/followers","following_url":"https://api.github.com/users/spointer/following{/other_user}","gists_url":"https://api.github.com/users/spointer/gists{/gist_id}","starred_url":"https://api.github.com/users/spointer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spointer/subscriptions","organizations_url":"https://api.github.com/users/spointer/orgs","repos_url":"https://api.github.com/users/spointer/repos","events_url":"https://api.github.com/users/spointer/events{/privacy}","received_events_url":"https://api.github.com/users/spointer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T01:19:02Z","updated_at":"2020-09-28T01:19:02Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Unitech/pm2/issues/4859","repository_url":"https://api.github.com/repos/Unitech/pm2","labels_url":"https://api.github.com/repos/Unitech/pm2/issues/4859/labels{/name}","comments_url":"https://api.github.com/repos/Unitech/pm2/issues/4859/comments","events_url":"https://api.github.com/repos/Unitech/pm2/issues/4859/events","html_url":"https://github.com/Unitech/pm2/issues/4859","id":706042276,"node_id":"MDU6SXNzdWU3MDYwNDIyNzY=","number":4859,"title":"PM2 crashes with SIGSEGV(backtrace included)","user":{"login":"spointer","id":11382408,"node_id":"MDQ6VXNlcjExMzgyNDA4","avatar_url":"https://avatars.githubusercontent.com/u/11382408?v=4","gravatar_id":"","url":"https://api.github.com/users/spointer","html_url":"https://github.com/spointer","followers_url":"https://api.github.com/users/spointer/followers","following_url":"https://api.github.com/users/spointer/following{/other_user}","gists_url":"https://api.github.com/users/spointer/gists{/gist_id}","starred_url":"https://api.github.com/users/spointer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spointer/subscriptions","organizations_url":"https://api.github.com/users/spointer/orgs","repos_url":"https://api.github.com/users/spointer/repos","events_url":"https://api.github.com/users/spointer/events{/privacy}","received_events_url":"https://api.github.com/users/spointer/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-09-22T02:59:17Z","updated_at":"2020-09-28T01:19:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":10187082,"node_id":"MDEwOlJlcG9zaXRvcnkxMDE4NzA4Mg==","name":"pm2","full_name":"Unitech/pm2","private":false,"owner":{"login":"Unitech","id":757747,"node_id":"MDQ6VXNlcjc1Nzc0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/757747?v=4","gravatar_id":"","url":"https://api.github.com/users/Unitech","html_url":"https://github.com/Unitech","followers_url":"https://api.github.com/users/Unitech/followers","following_url":"https://api.github.com/users/Unitech/following{/other_user}","gists_url":"https://api.github.com/users/Unitech/gists{/gist_id}","starred_url":"https://api.github.com/users/Unitech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Unitech/subscriptions","organizations_url":"https://api.github.com/users/Unitech/orgs","repos_url":"https://api.github.com/users/Unitech/repos","events_url":"https://api.github.com/users/Unitech/events{/privacy}","received_events_url":"https://api.github.com/users/Unitech/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Unitech/pm2","description":"Node.js Production Process Manager with a built-in Load Balancer.","fork":false,"url":"https://api.github.com/repos/Unitech/pm2","forks_url":"https://api.github.com/repos/Unitech/pm2/forks","keys_url":"https://api.github.com/repos/Unitech/pm2/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Unitech/pm2/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Unitech/pm2/teams","hooks_url":"https://api.github.com/repos/Unitech/pm2/hooks","issue_events_url":"https://api.github.com/repos/Unitech/pm2/issues/events{/number}","events_url":"https://api.github.com/repos/Unitech/pm2/events","assignees_url":"https://api.github.com/repos/Unitech/pm2/assignees{/user}","branches_url":"https://api.github.com/repos/Unitech/pm2/branches{/branch}","tags_url":"https://api.github.com/repos/Unitech/pm2/tags","blobs_url":"https://api.github.com/repos/Unitech/pm2/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Unitech/pm2/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Unitech/pm2/git/refs{/sha}","trees_url":"https://api.github.com/repos/Unitech/pm2/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Unitech/pm2/statuses/{sha}","languages_url":"https://api.github.com/repos/Unitech/pm2/languages","stargazers_url":"https://api.github.com/repos/Unitech/pm2/stargazers","contributors_url":"https://api.github.com/repos/Unitech/pm2/contributors","subscribers_url":"https://api.github.com/repos/Unitech/pm2/subscribers","subscription_url":"https://api.github.com/repos/Unitech/pm2/subscription","commits_url":"https://api.github.com/repos/Unitech/pm2/commits{/sha}","git_commits_url":"https://api.github.com/repos/Unitech/pm2/git/commits{/sha}","comments_url":"https://api.github.com/repos/Unitech/pm2/comments{/number}","issue_comment_url":"https://api.github.com/repos/Unitech/pm2/issues/comments{/number}","contents_url":"https://api.github.com/repos/Unitech/pm2/contents/{+path}","compare_url":"https://api.github.com/repos/Unitech/pm2/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Unitech/pm2/merges","archive_url":"https://api.github.com/repos/Unitech/pm2/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Unitech/pm2/downloads","issues_url":"https://api.github.com/repos/Unitech/pm2/issues{/number}","pulls_url":"https://api.github.com/repos/Unitech/pm2/pulls{/number}","milestones_url":"https://api.github.com/repos/Unitech/pm2/milestones{/number}","notifications_url":"https://api.github.com/repos/Unitech/pm2/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Unitech/pm2/labels{/name}","releases_url":"https://api.github.com/repos/Unitech/pm2/releases{/id}","deployments_url":"https://api.github.com/repos/Unitech/pm2/deployments","created_at":"2013-05-21T03:25:25Z","updated_at":"2025-11-10T06:09:36Z","pushed_at":"2025-10-31T12:18:31Z","git_url":"git://github.com/Unitech/pm2.git","ssh_url":"git@github.com:Unitech/pm2.git","clone_url":"https://github.com/Unitech/pm2.git","svn_url":"https://github.com/Unitech/pm2","homepage":"https://pm2.keymetrics.io/docs/usage/quick-start/","size":13496,"stargazers_count":42707,"watchers_count":42707,"language":"JavaScript","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":2661,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1072,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["command-line","command-line-tool","deploy","load-balancer","monitoring","node","nodejs","pm2","process-manager","production"],"visibility":"public","forks":2661,"open_issues":1072,"watchers":42707,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--\r\nYour issue may already be reported!\r\nPlease search on the [issue tracker](https://github.com/Unitech/pm2/search?type=Issues) before creating one.\r\n-->\r\n\r\n## What's going wrong?\r\nSIGSEGV signal on pm2\r\n\r\n## How could we reproduce this issue?\r\nI don't know\r\n\r\n## Supporting information\r\nMy app : pm2 cluster mode\r\npm2 version 4.4.1\r\nnodejs version 10.22.0\r\n\r\n**backtrace log**\r\n    frame #7: 0x000021dda725be1d <exit>\r\n    frame #8: 0x000021dda797c7e0 (anonymous)(this=0xb0de9c026f1:<undefined>, 0x3dbda182251:<Number: 1.482158>, 0x3dbda182241:<Number: 1.468564>) at /usr/lib/node_modules/pm2/node_modules/@pm2/io/build/main/utils/metrics/histogram.js:55:28 fn=0x000003dbda182201\r\n    frame #9: 0x000021dda797ce7c QuickSort(this=0xb0de9c026f1:<undefined>, 0x3dbda182301:<Array: length=1028>, <Smi: 830>, <Smi: 849>) at native array.js:1:10 fn=0x000003dbda1822c1\r\n    frame #10: 0x000021dda797d15e QuickSort(this=0xb0de9c026f1:<undefined>, 0x3dbda182301:<Array: length=1028>, <Smi: 0>, <Smi: 1028>) at native array.js:1:10 fn=0x000003dbda1822c1\r\n    frame #11: 0x000021dda77c98aa InnerArraySort(this=0xb0de9c026f1:<undefined>, 0x3dbda182301:<Array: length=1028>, <Smi: 1028>, 0x3dbda182201:<function: (anonymous) at /usr/lib/node_modules/pm2/node_modules/@pm2/io/build/main/utils/metrics/histogram.js:55:28>) at native array.js:1:10 fn=0x0000312a690062c9\r\n    frame #12: 0x000021dda77d5785 sort(this=0x3dbda182301:<Array: length=1028>, 0x3dbda182201:<function: (anonymous) at /usr/lib/node_modules/pm2/node_modules/@pm2/io/build/main/utils/metrics/histogram.js:55:28>) at native array.js:1:10 fn=0x0000312a690058a1\r\n    frame #13: 0x000021dda79b93ad handler(this=0xf45a972aa41:<Object: Object>) at /usr/lib/node_modules/pm2/node_modules/@pm2/io/build/main/metrics/eventLoopMetrics.js:77:31 fn=0x00000f45a972db99\r\n    frame #14: 0x000021dda77c9b9e timer.setInterval(this=0x3f36612726a1:<Object: Timeout>) at /usr/lib/node_modules/pm2/node_modules/@pm2/io/build/main/services/metrics.js:54:34 fn=0x00003f3661272891\r\n    frame #15: 0x000021dda77c306d processTimers(this=0x17f3d1404ed1:<Object: Timer>, <Smi: 109849056>) at timers.js:98:18 fn=0x00002f2519805149\r\n    frame #16: 0x000021dda720ee75 <internal>\r\n    frame #17: 0x000021dda72092c1 <entry>\r\n\r\n## PM2 report\r\n\r\nPM2        | 2020-09-20T12:25:29: PM2 log: Worker Interval      : 30000\r\nPM2        | 2020-09-20T12:25:29: PM2 log: Process dump file    : /root/.pm2/dump.pm2\r\nPM2        | 2020-09-20T12:25:29: PM2 log: Concurrent actions   : 2\r\nPM2        | 2020-09-20T12:25:29: PM2 log: SIGTERM timeout      : 1600\r\nPM2        | 2020-09-20T12:25:29: PM2 log: ===============================================================================\r\nPM2        | 2020-09-20T12:25:30: PM2 log: App [pm2-logrotate:0] starting in -fork mode-\r\nPM2        | 2020-09-20T12:25:30: PM2 log: App [pm2-logrotate:0] online\r\nPM2        | 2020-09-20T12:25:31: PM2 log: [Watch] Start watching cagent\r\nPM2        | 2020-09-20T12:25:31: PM2 log: App [cagent:1] starting in -cluster mode-\r\nPM2        | 2020-09-20T12:25:31: PM2 log: App [cagent:1] online\r\nPM2        | 2020-09-20T12:25:32: PM2 log: [Watch] Start watching cagent\r\nPM2        | 2020-09-20T12:25:32: PM2 log: App [cagent:2] starting in -cluster mode-\r\nPM2        | 2020-09-20T12:25:32: PM2 log: App [cagent:2] online\r\nPM2        | 2020-09-20T12:25:32: PM2 log: [Watch] Start watching cagent\r\nPM2        | 2020-09-20T12:25:32: PM2 log: App [cagent:3] starting in -cluster mode-\r\nPM2        | 2020-09-20T12:25:33: PM2 log: App [cagent:3] online\r\nPM2        | 2020-09-21T18:56:22: PM2 log: App name:cagent id:2 disconnected\r\nPM2        | 2020-09-21T18:56:22: PM2 log: App [cagent:2] exited with code [0] via signal [SIGSEGV]\r\nPM2        | 2020-09-21T18:56:22: PM2 log: App [cagent:2] starting in -cluster mode-\r\nPM2        | 2020-09-21T18:56:22: PM2 log: App [cagent:2] online\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/Unitech/pm2/issues/4859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Unitech/pm2/issues/4859/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"amit777","id":2703309,"node_id":"MDQ6VXNlcjI3MDMzMDk=","avatar_url":"https://avatars.githubusercontent.com/u/2703309?v=4","gravatar_id":"","url":"https://api.github.com/users/amit777","html_url":"https://github.com/amit777","followers_url":"https://api.github.com/users/amit777/followers","following_url":"https://api.github.com/users/amit777/following{/other_user}","gists_url":"https://api.github.com/users/amit777/gists{/gist_id}","starred_url":"https://api.github.com/users/amit777/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amit777/subscriptions","organizations_url":"https://api.github.com/users/amit777/orgs","repos_url":"https://api.github.com/users/amit777/repos","events_url":"https://api.github.com/users/amit777/events{/privacy}","received_events_url":"https://api.github.com/users/amit777/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-02T18:45:44Z","updated_at":"2023-04-02T18:45:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Unitech/pm2/issues/5579","repository_url":"https://api.github.com/repos/Unitech/pm2","labels_url":"https://api.github.com/repos/Unitech/pm2/issues/5579/labels{/name}","comments_url":"https://api.github.com/repos/Unitech/pm2/issues/5579/comments","events_url":"https://api.github.com/repos/Unitech/pm2/issues/5579/events","html_url":"https://github.com/Unitech/pm2/issues/5579","id":1651052902,"node_id":"I_kwDOAJtxSs5iaRFm","number":5579,"title":"pm2 god daemon crash. malloc(): unaligned tcache chunk detected","user":{"login":"amit777","id":2703309,"node_id":"MDQ6VXNlcjI3MDMzMDk=","avatar_url":"https://avatars.githubusercontent.com/u/2703309?v=4","gravatar_id":"","url":"https://api.github.com/users/amit777","html_url":"https://github.com/amit777","followers_url":"https://api.github.com/users/amit777/followers","following_url":"https://api.github.com/users/amit777/following{/other_user}","gists_url":"https://api.github.com/users/amit777/gists{/gist_id}","starred_url":"https://api.github.com/users/amit777/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amit777/subscriptions","organizations_url":"https://api.github.com/users/amit777/orgs","repos_url":"https://api.github.com/users/amit777/repos","events_url":"https://api.github.com/users/amit777/events{/privacy}","received_events_url":"https://api.github.com/users/amit777/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-02T18:45:44Z","updated_at":"2023-08-17T04:08:58Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":10187082,"node_id":"MDEwOlJlcG9zaXRvcnkxMDE4NzA4Mg==","name":"pm2","full_name":"Unitech/pm2","private":false,"owner":{"login":"Unitech","id":757747,"node_id":"MDQ6VXNlcjc1Nzc0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/757747?v=4","gravatar_id":"","url":"https://api.github.com/users/Unitech","html_url":"https://github.com/Unitech","followers_url":"https://api.github.com/users/Unitech/followers","following_url":"https://api.github.com/users/Unitech/following{/other_user}","gists_url":"https://api.github.com/users/Unitech/gists{/gist_id}","starred_url":"https://api.github.com/users/Unitech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Unitech/subscriptions","organizations_url":"https://api.github.com/users/Unitech/orgs","repos_url":"https://api.github.com/users/Unitech/repos","events_url":"https://api.github.com/users/Unitech/events{/privacy}","received_events_url":"https://api.github.com/users/Unitech/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Unitech/pm2","description":"Node.js Production Process Manager with a built-in Load Balancer.","fork":false,"url":"https://api.github.com/repos/Unitech/pm2","forks_url":"https://api.github.com/repos/Unitech/pm2/forks","keys_url":"https://api.github.com/repos/Unitech/pm2/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Unitech/pm2/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Unitech/pm2/teams","hooks_url":"https://api.github.com/repos/Unitech/pm2/hooks","issue_events_url":"https://api.github.com/repos/Unitech/pm2/issues/events{/number}","events_url":"https://api.github.com/repos/Unitech/pm2/events","assignees_url":"https://api.github.com/repos/Unitech/pm2/assignees{/user}","branches_url":"https://api.github.com/repos/Unitech/pm2/branches{/branch}","tags_url":"https://api.github.com/repos/Unitech/pm2/tags","blobs_url":"https://api.github.com/repos/Unitech/pm2/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Unitech/pm2/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Unitech/pm2/git/refs{/sha}","trees_url":"https://api.github.com/repos/Unitech/pm2/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Unitech/pm2/statuses/{sha}","languages_url":"https://api.github.com/repos/Unitech/pm2/languages","stargazers_url":"https://api.github.com/repos/Unitech/pm2/stargazers","contributors_url":"https://api.github.com/repos/Unitech/pm2/contributors","subscribers_url":"https://api.github.com/repos/Unitech/pm2/subscribers","subscription_url":"https://api.github.com/repos/Unitech/pm2/subscription","commits_url":"https://api.github.com/repos/Unitech/pm2/commits{/sha}","git_commits_url":"https://api.github.com/repos/Unitech/pm2/git/commits{/sha}","comments_url":"https://api.github.com/repos/Unitech/pm2/comments{/number}","issue_comment_url":"https://api.github.com/repos/Unitech/pm2/issues/comments{/number}","contents_url":"https://api.github.com/repos/Unitech/pm2/contents/{+path}","compare_url":"https://api.github.com/repos/Unitech/pm2/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Unitech/pm2/merges","archive_url":"https://api.github.com/repos/Unitech/pm2/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Unitech/pm2/downloads","issues_url":"https://api.github.com/repos/Unitech/pm2/issues{/number}","pulls_url":"https://api.github.com/repos/Unitech/pm2/pulls{/number}","milestones_url":"https://api.github.com/repos/Unitech/pm2/milestones{/number}","notifications_url":"https://api.github.com/repos/Unitech/pm2/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Unitech/pm2/labels{/name}","releases_url":"https://api.github.com/repos/Unitech/pm2/releases{/id}","deployments_url":"https://api.github.com/repos/Unitech/pm2/deployments","created_at":"2013-05-21T03:25:25Z","updated_at":"2025-11-10T06:09:36Z","pushed_at":"2025-10-31T12:18:31Z","git_url":"git://github.com/Unitech/pm2.git","ssh_url":"git@github.com:Unitech/pm2.git","clone_url":"https://github.com/Unitech/pm2.git","svn_url":"https://github.com/Unitech/pm2","homepage":"https://pm2.keymetrics.io/docs/usage/quick-start/","size":13496,"stargazers_count":42707,"watchers_count":42707,"language":"JavaScript","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":2661,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1072,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["command-line","command-line-tool","deploy","load-balancer","monitoring","node","nodejs","pm2","process-manager","production"],"visibility":"public","forks":2661,"open_issues":1072,"watchers":42707,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"## What's going wrong?\r\npm2 got daemon crashes on a couple of our Ubuntu 22.04 servers\r\n\r\n## How could we reproduce this issue?\r\nI can't reproduce at will it will happen once every day or 2.\r\n\r\n## Supporting information\r\n\r\n<!--\r\nPlease run the following command (available on PM2 >= 2.6)\r\n-->\r\n```\r\n$ pm2 report\r\nPM2        | 2023-04-01T17:02:21: PM2 log: [PM2][WORKER] Reset the restart delay, as app notifications has been up for more than 30000ms\r\nPM2        | malloc(): unaligned tcache chunk detected\r\nPM2        | 2023-04-02T14:41:41: PM2 log: ===============================================================================\r\nPM2        | 2023-04-02T14:41:41: PM2 log: --- New PM2 Daemon started ----------------------------------------------------\r\nPM2        | 2023-04-02T14:41:41: PM2 log: Time                 : Sun Apr 02 2023 14:41:41 GMT-0400 (Eastern Daylight Time)\r\nPM2        | 2023-04-02T14:41:41: PM2 log: PM2 version          : 5.3.0\r\nPM2        | 2023-04-02T14:41:41: PM2 log: Node.js version      : 18.15.0\r\nPM2        | 2023-04-02T14:41:41: PM2 log: Current arch         : x64\r\nPM2        | 2023-04-02T14:41:41: PM2 log: PM2 home             : /root/.pm2\r\nPM2        | 2023-04-02T14:41:41: PM2 log: PM2 PID file         : /root/.pm2/pm2.pid\r\nPM2        | 2023-04-02T14:41:41: PM2 log: RPC socket file      : /root/.pm2/rpc.sock\r\nPM2        | 2023-04-02T14:41:41: PM2 log: BUS socket file      : /root/.pm2/pub.sock\r\nPM2        | 2023-04-02T14:41:41: PM2 log: Application log path : /root/.pm2/logs\r\nPM2        | 2023-04-02T14:41:41: PM2 log: Worker Interval      : 30000\r\nPM2        | 2023-04-02T14:41:41: PM2 log: Process dump file    : /root/.pm2/dump.pm2\r\nPM2        | 2023-04-02T14:41:41: PM2 log: Concurrent actions   : 2\r\nPM2        | 2023-04-02T14:41:41: PM2 log: SIGTERM timeout      : 1600\r\nPM2        | 2023-04-02T14:41:41: PM2 log: ===============================================================================\r\nPM2        | 2023-04-02T14:41:41: PM2 log: App [pm2-logrotate:0] starting in -fork mode-\r\nPM2        | 2023-04-02T14:41:41: PM2 log: App [pm2-logrotate:0] online\r\n\r\n```\r\n\r\n\r\n```\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from /root/.nvm/versions/node/v18.15.0/bin/node...\r\n[New LWP 8158]\r\n[New LWP 8164]\r\n[New LWP 8159]\r\n[New LWP 8160]\r\n[New LWP 8167]\r\n[New LWP 8163]\r\n[New LWP 8161]\r\n[New LWP 8162]\r\n[New LWP 8168]\r\n[New LWP 8166]\r\n[New LWP 8169]\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\nCore was generated by `PM2 v5.3.0: God Daemon (/root/.pm2)                                      '.\r\nProgram terminated with signal SIGABRT, Aborted.\r\n#0  __pthread_kill_implementation (no_tid=0, signo=6, threadid=140525053355968) at ./nptl/pthread_kill.c:44\r\n44\t./nptl/pthread_kill.c: No such file or directory.\r\n[Current thread is 1 (Thread 0x7fce89e327c0 (LWP 8158))]\r\n(gdb) bt\r\n#0  __pthread_kill_implementation (no_tid=0, signo=6, threadid=140525053355968) at ./nptl/pthread_kill.c:44\r\n#1  __pthread_kill_internal (signo=6, threadid=140525053355968) at ./nptl/pthread_kill.c:78\r\n#2  __GI___pthread_kill (threadid=140525053355968, signo=signo@entry=6) at ./nptl/pthread_kill.c:89\r\n#3  0x00007fce89842476 in __GI_raise (sig=sig@entry=6) at ../sysdeps/posix/raise.c:26\r\n#4  0x00007fce898287f3 in __GI_abort () at ./stdlib/abort.c:79\r\n#5  0x00007fce898896f6 in __libc_message (action=action@entry=do_abort, fmt=fmt@entry=0x7fce899dbb8c \"%s\\n\") at ../sysdeps/posix/libc_fatal.c:155\r\n#6  0x00007fce898a0d7c in malloc_printerr (str=str@entry=0x7fce899ded40 \"malloc(): unaligned tcache chunk detected\") at ./malloc/malloc.c:5664\r\n#7  0x00007fce898a545c in tcache_get (tc_idx=<optimized out>) at ./malloc/malloc.c:3195\r\n#8  __GI___libc_malloc (bytes=64) at ./malloc/malloc.c:3313\r\n#9  0x00007fce89cae9cc in operator new(unsigned long) () from /lib/x86_64-linux-gnu/libstdc++.so.6\r\n#10 0x00000000010805c0 in v8::internal::BackingStore::Allocate(v8::internal::Isolate*, unsigned long, v8::internal::SharedFlag, v8::internal::InitializedFlag)\r\n    ()\r\n#11 0x0000000000d7a1a4 in v8::ArrayBuffer::NewBackingStore(v8::Isolate*, unsigned long) ()\r\n#12 0x0000000000b11fa3 in node::Environment::allocate_managed_buffer(unsigned long) ()\r\n#13 0x0000000000c6f528 in node::LibuvStreamWrap::ReadStart()::{lambda(uv_handle_s*, unsigned long, uv_buf_t*)#1}::_FUN(uv_handle_s*, unsigned long, uv_buf_t*)\r\n    ()\r\n#14 0x0000000001676dba in uv__read (stream=stream@entry=0x7fce88566390) at ../deps/uv/src/unix/stream.c:1105\r\n#15 0x0000000001677790 in uv__stream_io (loop=<optimized out>, w=0x7fce88566418, events=1) at ../deps/uv/src/unix/stream.c:1270\r\n#16 0x000000000167d534 in uv__io_poll (loop=loop@entry=0x526dfc0 <default_loop_struct>, timeout=<optimized out>) at ../deps/uv/src/unix/epoll.c:374\r\n#17 0x000000000166b95e in uv_run (loop=0x526dfc0 <default_loop_struct>, mode=UV_RUN_DEFAULT) at ../deps/uv/src/unix/core.c:406\r\n#18 0x0000000000abda2d in node::SpinEventLoop(node::Environment*) ()\r\n#19 0x0000000000bc1874 in node::NodeMainInstance::Run() ()\r\n#20 0x0000000000b36434 in node::LoadSnapshotDataAndRun(node::SnapshotData const**, node::InitializationResult const*) ()\r\n#21 0x0000000000b3a02f in node::Start(int, char**) ()\r\n#22 0x00007fce89829d90 in __libc_start_call_main (main=main@entry=0xab1f70 <main>, argc=argc@entry=2, argv=argv@entry=0x7fff3513b198)\r\n    at ../sysdeps/nptl/libc_start_call_main.h:58\r\n#23 0x00007fce89829e40 in __libc_start_main_impl (main=0xab1f70 <main>, argc=2, argv=0x7fff3513b198, init=<optimized out>, fini=<optimized out>,\r\n    rtld_fini=<optimized out>, stack_end=0x7fff3513b188) at ../csu/libc-start.c:392\r\n#24 0x0000000000aba37e in _start ()\r\n```","reactions":{"url":"https://api.github.com/repos/Unitech/pm2/issues/5579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Unitech/pm2/issues/5579/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]