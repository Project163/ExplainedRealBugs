{"url":"https://api.github.com/repos/Unitech/pm2/issues/5451","repository_url":"https://api.github.com/repos/Unitech/pm2","labels_url":"https://api.github.com/repos/Unitech/pm2/issues/5451/labels{/name}","comments_url":"https://api.github.com/repos/Unitech/pm2/issues/5451/comments","events_url":"https://api.github.com/repos/Unitech/pm2/issues/5451/events","html_url":"https://github.com/Unitech/pm2/issues/5451","id":1389588998,"node_id":"I_kwDOAJtxSs5S03IG","number":5451,"title":"esm module default ecosystem config name","user":{"login":"TeleMediaCC","id":66513308,"node_id":"MDQ6VXNlcjY2NTEzMzA4","avatar_url":"https://avatars.githubusercontent.com/u/66513308?v=4","gravatar_id":"","url":"https://api.github.com/users/TeleMediaCC","html_url":"https://github.com/TeleMediaCC","followers_url":"https://api.github.com/users/TeleMediaCC/followers","following_url":"https://api.github.com/users/TeleMediaCC/following{/other_user}","gists_url":"https://api.github.com/users/TeleMediaCC/gists{/gist_id}","starred_url":"https://api.github.com/users/TeleMediaCC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TeleMediaCC/subscriptions","organizations_url":"https://api.github.com/users/TeleMediaCC/orgs","repos_url":"https://api.github.com/users/TeleMediaCC/repos","events_url":"https://api.github.com/users/TeleMediaCC/events{/privacy}","received_events_url":"https://api.github.com/users/TeleMediaCC/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-09-28T15:48:48Z","updated_at":"2023-12-26T08:10:42Z","closed_at":"2023-12-26T08:10:42Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\nYour issue may already be reported!\r\nPlease search on the [issue tracker](https://github.com/Unitech/pm2/search?type=Issues) before creating one.\r\n-->\r\n\r\n## How could we reproduce this issue?\r\nIf I use `\"type\": \"module\"` in packages.json, I need to rename the ecosystem.config,js to ecosystem.config.cjs.\r\nIn this case the `pm2 start test` or `pm2 deploy test` command not working.\r\nI got the following error message: `test environment is not defined in package.json file`\r\nI need to specify the ecosystem file name for running. e.g.: `pm2 deploy ecosystem.config.cjs test`\r\n\r\nPlease search the default ecosystem.config.cjs filename in esm module mode.\r\n\r\n## Supporting information\r\n\r\n```\r\n--- PM2 report ----------------------------------------------------------------\r\nDate                 : Wed Sep 28 2022 17:47:01 GMT+0200 (Central European Summer Time)\r\n===============================================================================\r\n--- Daemon -------------------------------------------------\r\npm2d version         : 5.2.0\r\nnode version         : 16.17.1\r\nnode path            : /usr/bin/pm2\r\nargv                 : /usr/bin/node,/usr/lib/node_modules/pm2/lib/Daemon.js\r\nargv0                : node\r\nuser                 : tgc\r\nuid                  : 1001\r\ngid                  : 1001\r\nuptime               : 42min\r\n===============================================================================\r\n--- CLI ----------------------------------------------------\r\nlocal pm2            : 5.2.0\r\nnode version         : 16.17.1\r\nnode path            : /usr/bin/pm2\r\nargv                 : /usr/bin/node,/usr/bin/pm2,report\r\nargv0                : node\r\nuser                 : tgc\r\nuid                  : 1001\r\ngid                  : 1001\r\n===============================================================================\r\n--- System info --------------------------------------------\r\narch                 : x64\r\nplatform             : linux\r\ntype                 : Linux\r\ncpus                 : Intel(R) Xeon(R) CPU E5-2680 v4 @ 2.40GHz\r\ncpus nb              : 56\r\nfreemem              : 46305353728\r\ntotalmem             : 67433533440\r\nhome                 : /home/tgc\r\n===============================================================================\r\n--- PM2 list -----------------------------------------------\r\n┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐\r\n│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │\r\n└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘\r\n===============================================================================\r\n--- Daemon logs --------------------------------------------\r\n/home/tgc/.pm2/pm2.log last 20 lines:\r\nPM2        | 2022-09-22T16:40:59: PM2 log: SIGTERM timeout      : 1600\r\nPM2        | 2022-09-22T16:40:59: PM2 log: ===============================================================================\r\nPM2        | 2022-09-28T10:13:32: PM2 log: pm2 has been killed by signal, dumping process list before exit...\r\nPM2        | 2022-09-28T10:13:32: PM2 log: Exited peacefully\r\nPM2        | 2022-09-28T17:04:48: PM2 log: ===============================================================================\r\nPM2        | 2022-09-28T17:04:48: PM2 log: --- New PM2 Daemon started ----------------------------------------------------\r\nPM2        | 2022-09-28T17:04:48: PM2 log: Time                 : Wed Sep 28 2022 17:04:48 GMT+0200 (Central European Summer Time)\r\nPM2        | 2022-09-28T17:04:48: PM2 log: PM2 version          : 5.2.0\r\nPM2        | 2022-09-28T17:04:48: PM2 log: Node.js version      : 16.17.1\r\nPM2        | 2022-09-28T17:04:48: PM2 log: Current arch         : x64\r\nPM2        | 2022-09-28T17:04:48: PM2 log: PM2 home             : /home/tgc/.pm2\r\nPM2        | 2022-09-28T17:04:48: PM2 log: PM2 PID file         : /home/tgc/.pm2/pm2.pid\r\nPM2        | 2022-09-28T17:04:48: PM2 log: RPC socket file      : /home/tgc/.pm2/rpc.sock\r\nPM2        | 2022-09-28T17:04:48: PM2 log: BUS socket file      : /home/tgc/.pm2/pub.sock\r\nPM2        | 2022-09-28T17:04:48: PM2 log: Application log path : /home/tgc/.pm2/logs\r\nPM2        | 2022-09-28T17:04:48: PM2 log: Worker Interval      : 30000\r\nPM2        | 2022-09-28T17:04:48: PM2 log: Process dump file    : /home/tgc/.pm2/dump.pm2\r\nPM2        | 2022-09-28T17:04:48: PM2 log: Concurrent actions   : 2\r\nPM2        | 2022-09-28T17:04:48: PM2 log: SIGTERM timeout      : 1600\r\nPM2        | 2022-09-28T17:04:48: PM2 log: ===============================================================================\r\n\r\n```","closed_by":{"login":"Unitech","id":757747,"node_id":"MDQ6VXNlcjc1Nzc0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/757747?v=4","gravatar_id":"","url":"https://api.github.com/users/Unitech","html_url":"https://github.com/Unitech","followers_url":"https://api.github.com/users/Unitech/followers","following_url":"https://api.github.com/users/Unitech/following{/other_user}","gists_url":"https://api.github.com/users/Unitech/gists{/gist_id}","starred_url":"https://api.github.com/users/Unitech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Unitech/subscriptions","organizations_url":"https://api.github.com/users/Unitech/orgs","repos_url":"https://api.github.com/users/Unitech/repos","events_url":"https://api.github.com/users/Unitech/events{/privacy}","received_events_url":"https://api.github.com/users/Unitech/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Unitech/pm2/issues/5451/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Unitech/pm2/issues/5451/timeline","performed_via_github_app":null,"state_reason":"completed"}