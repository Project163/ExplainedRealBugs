{"url":"https://api.github.com/repos/Unitech/pm2/issues/558","repository_url":"https://api.github.com/repos/Unitech/pm2","labels_url":"https://api.github.com/repos/Unitech/pm2/issues/558/labels{/name}","comments_url":"https://api.github.com/repos/Unitech/pm2/issues/558/comments","events_url":"https://api.github.com/repos/Unitech/pm2/issues/558/events","html_url":"https://github.com/Unitech/pm2/issues/558","id":37252091,"node_id":"MDU6SXNzdWUzNzI1MjA5MQ==","number":558,"title":"Restart process with name will restart unexpected processes.","user":{"login":"sailxjx","id":909853,"node_id":"MDQ6VXNlcjkwOTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/909853?v=4","gravatar_id":"","url":"https://api.github.com/users/sailxjx","html_url":"https://github.com/sailxjx","followers_url":"https://api.github.com/users/sailxjx/followers","following_url":"https://api.github.com/users/sailxjx/following{/other_user}","gists_url":"https://api.github.com/users/sailxjx/gists{/gist_id}","starred_url":"https://api.github.com/users/sailxjx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sailxjx/subscriptions","organizations_url":"https://api.github.com/users/sailxjx/orgs","repos_url":"https://api.github.com/users/sailxjx/repos","events_url":"https://api.github.com/users/sailxjx/events{/privacy}","received_events_url":"https://api.github.com/users/sailxjx/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":40425958,"node_id":"MDU6TGFiZWw0MDQyNTk1OA==","url":"https://api.github.com/repos/Unitech/pm2/labels/T:%20Bug","name":"T: Bug","color":"d93f0b","default":false,"description":null},{"id":40425960,"node_id":"MDU6TGFiZWw0MDQyNTk2MA==","url":"https://api.github.com/repos/Unitech/pm2/labels/T:%20Enhancement","name":"T: Enhancement","color":"ffda00","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2014-07-07T09:23:53Z","updated_at":"2014-08-14T06:11:14Z","closed_at":"2014-07-11T10:41:53Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"> This issue is migrate from #307 \n\n`pm2 restart path|scriptname` command exists for a long time, recently I found some issues with this command, for example:\n\nI have a node service (and others) named 'striker' on my server, the startup script is something like '/usr/local/repos/striker/bin/striker', and I deployed two version of this script, which one is 'release' versions and another is 'general availability' version. \n\nWhen I start these two service with pm2, it works well.\n\n```\n┌────────────┬────┬─────────┬──────┬────────┬──────┬───────────┬────────┬───────────┬───────────────────────────────────────────────┐\n│ App Name   │ id │ mode    │ PID  │ status │ port │ Restarted │ Uptime │    memory │ err logs                                      │\n├────────────┼────┼─────────┼──────┼────────┼──────┼───────────┼────────┼───────────┼───────────────────────────────────────────────┤\n│ striker-ga │ 0  │ cluster │ 6473 │ online │      │         0 │ 3s     │ 22.684 MB │ /Users/tristan/.pm2/logs/striker-ga-err-0.log │\n├────────────┼────┼─────────┼──────┼────────┼──────┼───────────┼────────┼───────────┼───────────────────────────────────────────────┤\n│ striker    │ 1  │ cluster │ 6481 │ online │      │         0 │ 0s     │ 12.383 MB │ /Users/tristan/.pm2/logs/striker-err-1.log    │\n└────────────┴────┴─────────┴──────┴────────┴──────┴───────────┴────────┴───────────┴───────────────────────────────────────────────┘\n```\n\nWhen I restart the release version by name, `pm2 restart striker`, it will restart both two scripts unexpected.\n\n```\n┌────────────┬────┬─────────┬──────┬────────┬──────┬───────────┬────────┬───────────┬───────────────────────────────────────────────┐\n│ App Name   │ id │ mode    │ PID  │ status │ port │ Restarted │ Uptime │    memory │ err logs                                      │\n├────────────┼────┼─────────┼──────┼────────┼──────┼───────────┼────────┼───────────┼───────────────────────────────────────────────┤\n│ striker-ga │ 0  │ cluster │ 6975 │ online │      │         1 │ 0s     │ 20.770 MB │ /Users/tristan/.pm2/logs/striker-ga-err-0.log │\n├────────────┼────┼─────────┼──────┼────────┼──────┼───────────┼────────┼───────────┼───────────────────────────────────────────────┤\n│ striker    │ 1  │ cluster │ 6976 │ online │      │         1 │ 0s     │ 11.992 MB │ /Users/tristan/.pm2/logs/striker-err-1.log    │\n└────────────┴────┴─────────┴──────┴────────┴──────┴───────────┴────────┴───────────┴───────────────────────────────────────────────┘\n```\n\nI found this issue was caused by 'God/Methods.findByName' function. I wonder how many people will use `restart` command with path or script name. So I removed `find by path/script name` in `findByName` function, just keep it **simple** and **clear**. What's your opinion?\n\nCheers!\n","closed_by":{"login":"soyuka","id":1321971,"node_id":"MDQ6VXNlcjEzMjE5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/1321971?v=4","gravatar_id":"","url":"https://api.github.com/users/soyuka","html_url":"https://github.com/soyuka","followers_url":"https://api.github.com/users/soyuka/followers","following_url":"https://api.github.com/users/soyuka/following{/other_user}","gists_url":"https://api.github.com/users/soyuka/gists{/gist_id}","starred_url":"https://api.github.com/users/soyuka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soyuka/subscriptions","organizations_url":"https://api.github.com/users/soyuka/orgs","repos_url":"https://api.github.com/users/soyuka/repos","events_url":"https://api.github.com/users/soyuka/events{/privacy}","received_events_url":"https://api.github.com/users/soyuka/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Unitech/pm2/issues/558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Unitech/pm2/issues/558/timeline","performed_via_github_app":null,"state_reason":"completed"}