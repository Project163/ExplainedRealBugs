[{"url":"https://api.github.com/repos/pugjs/pug/issues/comments/38995657","html_url":"https://github.com/pugjs/pug/issues/1474#issuecomment-38995657","issue_url":"https://api.github.com/repos/pugjs/pug/issues/1474","id":38995657,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTk1NjU3","user":{"login":"ForbesLindesay","id":1260646,"node_id":"MDQ6VXNlcjEyNjA2NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1260646?v=4","gravatar_id":"","url":"https://api.github.com/users/ForbesLindesay","html_url":"https://github.com/ForbesLindesay","followers_url":"https://api.github.com/users/ForbesLindesay/followers","following_url":"https://api.github.com/users/ForbesLindesay/following{/other_user}","gists_url":"https://api.github.com/users/ForbesLindesay/gists{/gist_id}","starred_url":"https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ForbesLindesay/subscriptions","organizations_url":"https://api.github.com/users/ForbesLindesay/orgs","repos_url":"https://api.github.com/users/ForbesLindesay/repos","events_url":"https://api.github.com/users/ForbesLindesay/events{/privacy}","received_events_url":"https://api.github.com/users/ForbesLindesay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-03-29T13:33:41Z","updated_at":"2014-03-29T13:33:41Z","body":"I'm happy to have that fix, or just delete the example.  If you submit a pull request for whichever you think best, I'll merge it.  It may be best to just delete as I don't really want to get into the business of telling people how to secure their apps with such difficult corner cases.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pugjs/pug/issues/comments/38995657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ForbesLindesay","id":1260646,"node_id":"MDQ6VXNlcjEyNjA2NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1260646?v=4","gravatar_id":"","url":"https://api.github.com/users/ForbesLindesay","html_url":"https://github.com/ForbesLindesay","followers_url":"https://api.github.com/users/ForbesLindesay/followers","following_url":"https://api.github.com/users/ForbesLindesay/following{/other_user}","gists_url":"https://api.github.com/users/ForbesLindesay/gists{/gist_id}","starred_url":"https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ForbesLindesay/subscriptions","organizations_url":"https://api.github.com/users/ForbesLindesay/orgs","repos_url":"https://api.github.com/users/ForbesLindesay/repos","events_url":"https://api.github.com/users/ForbesLindesay/events{/privacy}","received_events_url":"https://api.github.com/users/ForbesLindesay/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pugjs/pug/issues/comments/39002340","html_url":"https://github.com/pugjs/pug/issues/1474#issuecomment-39002340","issue_url":"https://api.github.com/repos/pugjs/pug/issues/1474","id":39002340,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDAyMzQw","user":{"login":"rlidwka","id":999113,"node_id":"MDQ6VXNlcjk5OTExMw==","avatar_url":"https://avatars.githubusercontent.com/u/999113?v=4","gravatar_id":"","url":"https://api.github.com/users/rlidwka","html_url":"https://github.com/rlidwka","followers_url":"https://api.github.com/users/rlidwka/followers","following_url":"https://api.github.com/users/rlidwka/following{/other_user}","gists_url":"https://api.github.com/users/rlidwka/gists{/gist_id}","starred_url":"https://api.github.com/users/rlidwka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rlidwka/subscriptions","organizations_url":"https://api.github.com/users/rlidwka/orgs","repos_url":"https://api.github.com/users/rlidwka/repos","events_url":"https://api.github.com/users/rlidwka/events{/privacy}","received_events_url":"https://api.github.com/users/rlidwka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-03-29T17:25:10Z","updated_at":"2014-03-29T17:25:10Z","body":"> but this stuff is tricky, and I'm not 100% confident that that is safe either.\n\nIt's safe. In fact, I'm a bit surprised that JSON.stringify doesn't do it by default. I guess my \"what's wrong with JSON\" list gets even bigger now.\n\nAlso, there is another attack vector, not XSS one. JSON isn't a proper subset of JavaScript, so `users = \"foo\\u2028bar\"` will cause parse error. :)\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pugjs/pug/issues/comments/39002340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rlidwka","id":999113,"node_id":"MDQ6VXNlcjk5OTExMw==","avatar_url":"https://avatars.githubusercontent.com/u/999113?v=4","gravatar_id":"","url":"https://api.github.com/users/rlidwka","html_url":"https://github.com/rlidwka","followers_url":"https://api.github.com/users/rlidwka/followers","following_url":"https://api.github.com/users/rlidwka/following{/other_user}","gists_url":"https://api.github.com/users/rlidwka/gists{/gist_id}","starred_url":"https://api.github.com/users/rlidwka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rlidwka/subscriptions","organizations_url":"https://api.github.com/users/rlidwka/orgs","repos_url":"https://api.github.com/users/rlidwka/repos","events_url":"https://api.github.com/users/rlidwka/events{/privacy}","received_events_url":"https://api.github.com/users/rlidwka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pugjs/pug/issues/comments/39009273","html_url":"https://github.com/pugjs/pug/issues/1474#issuecomment-39009273","issue_url":"https://api.github.com/repos/pugjs/pug/issues/1474","id":39009273,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDA5Mjcz","user":{"login":"jwmerrill","id":48409,"node_id":"MDQ6VXNlcjQ4NDA5","avatar_url":"https://avatars.githubusercontent.com/u/48409?v=4","gravatar_id":"","url":"https://api.github.com/users/jwmerrill","html_url":"https://github.com/jwmerrill","followers_url":"https://api.github.com/users/jwmerrill/followers","following_url":"https://api.github.com/users/jwmerrill/following{/other_user}","gists_url":"https://api.github.com/users/jwmerrill/gists{/gist_id}","starred_url":"https://api.github.com/users/jwmerrill/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jwmerrill/subscriptions","organizations_url":"https://api.github.com/users/jwmerrill/orgs","repos_url":"https://api.github.com/users/jwmerrill/repos","events_url":"https://api.github.com/users/jwmerrill/events{/privacy}","received_events_url":"https://api.github.com/users/jwmerrill/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-03-29T21:15:20Z","updated_at":"2014-03-29T21:15:34Z","body":"> Also, there is another attack vector, not XSS one. JSON isn't a proper subset of JavaScript, so users = \"foo\\u2028bar\" will cause parse error. :)\n\nWill it? http://jsbin.com/masox/2/edit works fine for me.\n\nDo you have a different opinion on the \"right way\" to do this?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pugjs/pug/issues/comments/39009273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jwmerrill","id":48409,"node_id":"MDQ6VXNlcjQ4NDA5","avatar_url":"https://avatars.githubusercontent.com/u/48409?v=4","gravatar_id":"","url":"https://api.github.com/users/jwmerrill","html_url":"https://github.com/jwmerrill","followers_url":"https://api.github.com/users/jwmerrill/followers","following_url":"https://api.github.com/users/jwmerrill/following{/other_user}","gists_url":"https://api.github.com/users/jwmerrill/gists{/gist_id}","starred_url":"https://api.github.com/users/jwmerrill/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jwmerrill/subscriptions","organizations_url":"https://api.github.com/users/jwmerrill/orgs","repos_url":"https://api.github.com/users/jwmerrill/repos","events_url":"https://api.github.com/users/jwmerrill/events{/privacy}","received_events_url":"https://api.github.com/users/jwmerrill/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pugjs/pug/issues/comments/39025232","html_url":"https://github.com/pugjs/pug/issues/1474#issuecomment-39025232","issue_url":"https://api.github.com/repos/pugjs/pug/issues/1474","id":39025232,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDI1MjMy","user":{"login":"rlidwka","id":999113,"node_id":"MDQ6VXNlcjk5OTExMw==","avatar_url":"https://avatars.githubusercontent.com/u/999113?v=4","gravatar_id":"","url":"https://api.github.com/users/rlidwka","html_url":"https://github.com/rlidwka","followers_url":"https://api.github.com/users/rlidwka/followers","following_url":"https://api.github.com/users/rlidwka/following{/other_user}","gists_url":"https://api.github.com/users/rlidwka/gists{/gist_id}","starred_url":"https://api.github.com/users/rlidwka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rlidwka/subscriptions","organizations_url":"https://api.github.com/users/rlidwka/orgs","repos_url":"https://api.github.com/users/rlidwka/repos","events_url":"https://api.github.com/users/rlidwka/events{/privacy}","received_events_url":"https://api.github.com/users/rlidwka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-03-30T13:18:26Z","updated_at":"2014-03-30T13:18:26Z","body":"> Will it? http://jsbin.com/masox/2/edit works fine for me.\n\nThis won't:\n\n```\nusers = \"foo\\u2028bar\"\nstr = JSON.stringify(users)\neval(str)\n```\n\nSource: http://timelessrepo.com/json-isnt-a-javascript-subset\n\n> Do you have a different opinion on the \"right way\" to do this?\n\nNope. I just remember some of the issues I had with it in the past.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pugjs/pug/issues/comments/39025232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rlidwka","id":999113,"node_id":"MDQ6VXNlcjk5OTExMw==","avatar_url":"https://avatars.githubusercontent.com/u/999113?v=4","gravatar_id":"","url":"https://api.github.com/users/rlidwka","html_url":"https://github.com/rlidwka","followers_url":"https://api.github.com/users/rlidwka/followers","following_url":"https://api.github.com/users/rlidwka/following{/other_user}","gists_url":"https://api.github.com/users/rlidwka/gists{/gist_id}","starred_url":"https://api.github.com/users/rlidwka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rlidwka/subscriptions","organizations_url":"https://api.github.com/users/rlidwka/orgs","repos_url":"https://api.github.com/users/rlidwka/repos","events_url":"https://api.github.com/users/rlidwka/events{/privacy}","received_events_url":"https://api.github.com/users/rlidwka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pugjs/pug/issues/comments/39353852","html_url":"https://github.com/pugjs/pug/issues/1474#issuecomment-39353852","issue_url":"https://api.github.com/repos/pugjs/pug/issues/1474","id":39353852,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MzUzODUy","user":{"login":"ForbesLindesay","id":1260646,"node_id":"MDQ6VXNlcjEyNjA2NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1260646?v=4","gravatar_id":"","url":"https://api.github.com/users/ForbesLindesay","html_url":"https://github.com/ForbesLindesay","followers_url":"https://api.github.com/users/ForbesLindesay/followers","following_url":"https://api.github.com/users/ForbesLindesay/following{/other_user}","gists_url":"https://api.github.com/users/ForbesLindesay/gists{/gist_id}","starred_url":"https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ForbesLindesay/subscriptions","organizations_url":"https://api.github.com/users/ForbesLindesay/orgs","repos_url":"https://api.github.com/users/ForbesLindesay/repos","events_url":"https://api.github.com/users/ForbesLindesay/events{/privacy}","received_events_url":"https://api.github.com/users/ForbesLindesay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-04-02T16:44:22Z","updated_at":"2014-04-02T16:44:22Z","body":"That's an interesting, if slightly esoteric example.  Lets just do the escaping suggested:\n\n``` jade\nhtml\n  head\n    title Dynamic Inline JavaScript\n    script.\n      var users = !{JSON.stringify(users).replace(/<\\//g, \"<\\\\/\")}\n```\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pugjs/pug/issues/comments/39353852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ForbesLindesay","id":1260646,"node_id":"MDQ6VXNlcjEyNjA2NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1260646?v=4","gravatar_id":"","url":"https://api.github.com/users/ForbesLindesay","html_url":"https://github.com/ForbesLindesay","followers_url":"https://api.github.com/users/ForbesLindesay/followers","following_url":"https://api.github.com/users/ForbesLindesay/following{/other_user}","gists_url":"https://api.github.com/users/ForbesLindesay/gists{/gist_id}","starred_url":"https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ForbesLindesay/subscriptions","organizations_url":"https://api.github.com/users/ForbesLindesay/orgs","repos_url":"https://api.github.com/users/ForbesLindesay/repos","events_url":"https://api.github.com/users/ForbesLindesay/events{/privacy}","received_events_url":"https://api.github.com/users/ForbesLindesay/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":107972925,"node_id":"MDExOkNsb3NlZEV2ZW50MTA3OTcyOTI1","url":"https://api.github.com/repos/pugjs/pug/issues/events/107972925","actor":{"login":"ForbesLindesay","id":1260646,"node_id":"MDQ6VXNlcjEyNjA2NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1260646?v=4","gravatar_id":"","url":"https://api.github.com/users/ForbesLindesay","html_url":"https://github.com/ForbesLindesay","followers_url":"https://api.github.com/users/ForbesLindesay/followers","following_url":"https://api.github.com/users/ForbesLindesay/following{/other_user}","gists_url":"https://api.github.com/users/ForbesLindesay/gists{/gist_id}","starred_url":"https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ForbesLindesay/subscriptions","organizations_url":"https://api.github.com/users/ForbesLindesay/orgs","repos_url":"https://api.github.com/users/ForbesLindesay/repos","events_url":"https://api.github.com/users/ForbesLindesay/events{/privacy}","received_events_url":"https://api.github.com/users/ForbesLindesay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"65f11b60c42523746b214cd7713fc1f023128ba4","commit_url":"https://api.github.com/repos/pugjs/pug/commits/65f11b60c42523746b214cd7713fc1f023128ba4","created_at":"2014-04-02T16:45:24Z","state_reason":null,"performed_via_github_app":null},{"id":107973009,"node_id":"MDEyOkxhYmVsZWRFdmVudDEwNzk3MzAwOQ==","url":"https://api.github.com/repos/pugjs/pug/issues/events/107973009","actor":{"login":"ForbesLindesay","id":1260646,"node_id":"MDQ6VXNlcjEyNjA2NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1260646?v=4","gravatar_id":"","url":"https://api.github.com/users/ForbesLindesay","html_url":"https://github.com/ForbesLindesay","followers_url":"https://api.github.com/users/ForbesLindesay/followers","following_url":"https://api.github.com/users/ForbesLindesay/following{/other_user}","gists_url":"https://api.github.com/users/ForbesLindesay/gists{/gist_id}","starred_url":"https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ForbesLindesay/subscriptions","organizations_url":"https://api.github.com/users/ForbesLindesay/orgs","repos_url":"https://api.github.com/users/ForbesLindesay/repos","events_url":"https://api.github.com/users/ForbesLindesay/events{/privacy}","received_events_url":"https://api.github.com/users/ForbesLindesay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2014-04-02T16:45:38Z","label":{"name":"documentation","color":"02e10c"},"performed_via_github_app":null},{"id":17467727552,"node_id":"REFE_lADOAAs21s4BzANGzwAAAAQRKF7A","url":"https://api.github.com/repos/pugjs/pug/issues/events/17467727552","actor":{"login":"haikusw","id":222271,"node_id":"MDQ6VXNlcjIyMjI3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/222271?v=4","gravatar_id":"","url":"https://api.github.com/users/haikusw","html_url":"https://github.com/haikusw","followers_url":"https://api.github.com/users/haikusw/followers","following_url":"https://api.github.com/users/haikusw/following{/other_user}","gists_url":"https://api.github.com/users/haikusw/gists{/gist_id}","starred_url":"https://api.github.com/users/haikusw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haikusw/subscriptions","organizations_url":"https://api.github.com/users/haikusw/orgs","repos_url":"https://api.github.com/users/haikusw/repos","events_url":"https://api.github.com/users/haikusw/events{/privacy}","received_events_url":"https://api.github.com/users/haikusw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"65f11b60c42523746b214cd7713fc1f023128ba4","commit_url":"https://api.github.com/repos/haikusw/jade/commits/65f11b60c42523746b214cd7713fc1f023128ba4","created_at":"2025-04-30T07:20:20Z","performed_via_github_app":null}]