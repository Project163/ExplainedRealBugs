{"url":"https://api.github.com/repos/pugjs/pug/issues/1424","repository_url":"https://api.github.com/repos/pugjs/pug","labels_url":"https://api.github.com/repos/pugjs/pug/issues/1424/labels{/name}","comments_url":"https://api.github.com/repos/pugjs/pug/issues/1424/comments","events_url":"https://api.github.com/repos/pugjs/pug/issues/1424/events","html_url":"https://github.com/pugjs/pug/issues/1424","id":27988702,"node_id":"MDU6SXNzdWUyNzk4ODcwMg==","number":1424,"title":"Mixin implicit attributes can't have dashes","user":{"login":"chrisjbaik","id":768102,"node_id":"MDQ6VXNlcjc2ODEwMg==","avatar_url":"https://avatars.githubusercontent.com/u/768102?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisjbaik","html_url":"https://github.com/chrisjbaik","followers_url":"https://api.github.com/users/chrisjbaik/followers","following_url":"https://api.github.com/users/chrisjbaik/following{/other_user}","gists_url":"https://api.github.com/users/chrisjbaik/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisjbaik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisjbaik/subscriptions","organizations_url":"https://api.github.com/users/chrisjbaik/orgs","repos_url":"https://api.github.com/users/chrisjbaik/repos","events_url":"https://api.github.com/users/chrisjbaik/events{/privacy}","received_events_url":"https://api.github.com/users/chrisjbaik/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2014-02-20T19:26:18Z","updated_at":"2014-04-01T14:49:15Z","closed_at":"2014-04-01T14:47:54Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Attempting to build a mixin with implicit attributes that have dashes results in an error:\n\n```\n+work_filmstrip_item(work)(\"data-profile\"=profile, \"data-creator-name\"=name)\n```\n\nThis is the error that results:\n\n```\nUnexpected token string «,», expected punc «,»\nError\n    at new JS_Parse_Error (c:\\Users\\Christopher\\dev\\sites\\seelio\\node_modules\\jade\\node_modules\\with\\node_modules\\uglify-js\\lib\\parse.js:196:18)\n\n    at js_error (c:\\Users\\Christopher\\dev\\sites\\seelio\\node_modules\\jade\\node_modules\\with\\node_modules\\uglify-js\\lib\\parse.js:204:11)\n    at croak (c:\\Users\\Christopher\\dev\\sites\\seelio\\node_modules\\jade\\node_modules\\with\\node_modules\\uglify-js\\lib\\parse.js:637:9)\n    at token_error (c:\\Users\\Christopher\\dev\\sites\\seelio\\node_modules\\jade\\node_modules\\with\\node_modules\\uglify-js\\lib\\parse.js:645:9)\n    at expect_token (c:\\Users\\Christopher\\dev\\sites\\seelio\\node_modules\\jade\\node_modules\\with\\node_modules\\uglify-js\\lib\\parse.js:658:9)\n    at expect (c:\\Users\\Christopher\\dev\\sites\\seelio\\node_modules\\jade\\node_modules\\with\\node_modules\\uglify-js\\lib\\parse.js:661:36)\n    at c:\\Users\\Christopher\\dev\\sites\\seelio\\node_modules\\jade\\node_modules\\with\\node_modules\\uglify-js\\lib\\parse.js:1161:44\n    at c:\\Users\\Christopher\\dev\\sites\\seelio\\node_modules\\jade\\node_modules\\with\\node_modules\\uglify-js\\lib\\parse.js:684:24\n    at expr_atom (c:\\Users\\Christopher\\dev\\sites\\seelio\\node_modules\\jade\\node_modules\\with\\node_modules\\uglify-js\\lib\\parse.js:1118:35)\n    at maybe_unary (c:\\Users\\Christopher\\dev\\sites\\seelio\\node_modules\\jade\\node_modules\\with\\node_modules\\uglify-js\\lib\\parse.js:1288:19)\n```\n\nI've found that the compiler will add an extra `\"` before the comma which separates the attributes:\n\n```\njade_mixins[\"work_filmstrip_item\"].call({\nattributes: {\"data-profile\": (typeof (jade.interp = (profile)) == \"string\" ? jade.escape(jade.interp) : jade.interp)\",\"data-creator-name\": (typeof (jade.interp = (name)) == \"string\" ? jade.escape(jade.interp) : jade.interp)\",\"class\": \"\"}\n}, work);\n```\n\nThis is the output from that line before uglifying. Once uglifying starts, it chokes on the `\",\"` and jade exits with an error.\n","closed_by":{"login":"ForbesLindesay","id":1260646,"node_id":"MDQ6VXNlcjEyNjA2NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1260646?v=4","gravatar_id":"","url":"https://api.github.com/users/ForbesLindesay","html_url":"https://github.com/ForbesLindesay","followers_url":"https://api.github.com/users/ForbesLindesay/followers","following_url":"https://api.github.com/users/ForbesLindesay/following{/other_user}","gists_url":"https://api.github.com/users/ForbesLindesay/gists{/gist_id}","starred_url":"https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ForbesLindesay/subscriptions","organizations_url":"https://api.github.com/users/ForbesLindesay/orgs","repos_url":"https://api.github.com/users/ForbesLindesay/repos","events_url":"https://api.github.com/users/ForbesLindesay/events{/privacy}","received_events_url":"https://api.github.com/users/ForbesLindesay/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pugjs/pug/issues/1424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pugjs/pug/issues/1424/timeline","performed_via_github_app":null,"state_reason":"completed"}