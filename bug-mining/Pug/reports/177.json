{"url":"https://api.github.com/repos/pugjs/pug/issues/2966","repository_url":"https://api.github.com/repos/pugjs/pug","labels_url":"https://api.github.com/repos/pugjs/pug/issues/2966/labels{/name}","comments_url":"https://api.github.com/repos/pugjs/pug/issues/2966/comments","events_url":"https://api.github.com/repos/pugjs/pug/issues/2966/events","html_url":"https://github.com/pugjs/pug/issues/2966","id":300473194,"node_id":"MDU6SXNzdWUzMDA0NzMxOTQ=","number":2966,"title":"Error using filter with name-only attributes","user":{"login":"MattMS","id":943335,"node_id":"MDQ6VXNlcjk0MzMzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/943335?v=4","gravatar_id":"","url":"https://api.github.com/users/MattMS","html_url":"https://github.com/MattMS","followers_url":"https://api.github.com/users/MattMS/followers","following_url":"https://api.github.com/users/MattMS/following{/other_user}","gists_url":"https://api.github.com/users/MattMS/gists{/gist_id}","starred_url":"https://api.github.com/users/MattMS/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MattMS/subscriptions","organizations_url":"https://api.github.com/users/MattMS/orgs","repos_url":"https://api.github.com/users/MattMS/repos","events_url":"https://api.github.com/users/MattMS/events{/privacy}","received_events_url":"https://api.github.com/users/MattMS/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":817399908,"node_id":"MDU6TGFiZWw4MTczOTk5MDg=","url":"https://api.github.com/repos/pugjs/pug/labels/Needs%20Test%20Case","name":"Needs Test Case","color":"d93f0b","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-02-27T02:41:04Z","updated_at":"2018-03-20T12:16:46Z","closed_at":"2018-03-20T12:16:46Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Pug Version:** 1.0.0-alpha6\r\n\r\n**Node Version:** 8.9.4\r\n\r\n## Detailed version information\r\n\r\n- \"jstransformer-stylus\": \"^1.5.0\",\r\n- \"pug-cli\": \"^1.0.0-alpha6\"\r\n\r\nNode 8 Docker Image (Debian Jessie)\r\nhttps://github.com/nodejs/docker-node/blob/8498ff5302c19506c9edc3ce152f2bd4aa6b26b3/8/Dockerfile\r\n\r\n## Input Pug\r\n\r\nFails:\r\n\r\n```pug\r\nstylus(compress)\r\n```\r\n\r\nPasses:\r\n\r\n```pug\r\nstylus(compress=true)\r\n```\r\n\r\n## Error\r\n\r\n```\r\n/srv/node_modules/pug-filters/lib/handle-filters.js:100\r\nthrow error('FILTER_OPTION_NOT_CONSTANT', ex.message + ' All filters are rendered compile-time so filter options must be constants.', node);\r\n```\r\n\r\n## Trace\r\n\r\n```\r\nStep #1: true is not constant. All filters are rendered compile-time so filter options must be constants.\r\nStep #1: at makeError (/srv/node_modules/pug-error/index.js:32:13)\r\nStep #1: at /srv/node_modules/pug-filters/lib/handle-filters.js:100:15\r\nStep #1: at Array.forEach (<anonymous>)\r\nStep #1: at getAttributes (/srv/node_modules/pug-filters/lib/handle-filters.js:95:14)\r\nStep #1: at walk.includeDependencies (/srv/node_modules/pug-filters/lib/handle-filters.js:23:19)\r\nStep #1: at walkAST (/srv/node_modules/pug-walk/index.js:23:18)\r\nStep #1: at /srv/node_modules/pug-walk/index.js:104:20\r\nStep #1: at Array.reduce (<anonymous>)\r\nStep #1: at walkAndMergeNodes (/srv/node_modules/pug-walk/index.js:103:18)\r\nStep #1: at walkAST (/srv/node_modules/pug-walk/index.js:37:19)\r\nStep #1: npm ERR! code ELIFECYCLE\r\nStep #1: npm ERR! errno 1\r\n```\r\n\r\n## Additional Comments\r\n\r\nThis seems to work on my local machine, but fails during Google Cloud Build process.\r\n\r\nMy local machine: Node 8.9.4 on Windows Subsystem for Linux (bash).\r\nPug and JS Transformer versions are the same.\r\n","closed_by":{"login":"ForbesLindesay","id":1260646,"node_id":"MDQ6VXNlcjEyNjA2NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1260646?v=4","gravatar_id":"","url":"https://api.github.com/users/ForbesLindesay","html_url":"https://github.com/ForbesLindesay","followers_url":"https://api.github.com/users/ForbesLindesay/followers","following_url":"https://api.github.com/users/ForbesLindesay/following{/other_user}","gists_url":"https://api.github.com/users/ForbesLindesay/gists{/gist_id}","starred_url":"https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ForbesLindesay/subscriptions","organizations_url":"https://api.github.com/users/ForbesLindesay/orgs","repos_url":"https://api.github.com/users/ForbesLindesay/repos","events_url":"https://api.github.com/users/ForbesLindesay/events{/privacy}","received_events_url":"https://api.github.com/users/ForbesLindesay/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pugjs/pug/issues/2966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pugjs/pug/issues/2966/timeline","performed_via_github_app":null,"state_reason":"completed"}