diff --git a/lib/jade.js b/lib/jade.js
index 1a055e3..93311e4 100644
--- a/lib/jade.js
+++ b/lib/jade.js
@@ -106,7 +106,7 @@ function parse(str, options){
       + 'return buf.join("");';
   } catch (err) {
     parser = parser.context();
-    runtime.rethrow(err, parser.filename, parser.lexer.lineno);
+    runtime.rethrow(err, parser.filename, parser.lexer.lineno, str);
   }
 }
 
@@ -129,7 +129,9 @@ function stripBOM(str){
  *
  * Options:
  *
- *   - `compileDebug` when `false` debugging code is stripped from the compiled template
+ *   - `compileDebug` when `false` debugging code is stripped from the compiled
+       template, when it is explicitly `true`, the source code is included in
+       the compiled template for better accuracy.
  *   - `filename` used to improve errors when `compileDebug` is not `false`
  *
  * @param {String} str
@@ -153,7 +155,7 @@ exports.compile = function(str, options){
       , 'try {'
       , parse(str, options)
       , '} catch (err) {'
-      , '  jade.rethrow(err, jade.debug[0].filename, jade.debug[0].lineno);'
+      , '  jade.rethrow(err, jade.debug[0].filename, jade.debug[0].lineno' + (options.compileDebug === true ? ',' + JSON.stringify(str) : '') + ');'
       , '}'
     ].join('\n');
   } else {
diff --git a/lib/runtime.js b/lib/runtime.js
index 9a12706..9e5eb2c 100644
--- a/lib/runtime.js
+++ b/lib/runtime.js
@@ -166,12 +166,18 @@ exports.escape = function escape(html){
  * @api private
  */
 
-exports.rethrow = function rethrow(err, filename, lineno){
-  if (!filename) throw err;
-  if (typeof window != 'undefined') throw err;
-
+exports.rethrow = function rethrow(err, filename, lineno, str){
+  if (!(err instanceof Error)) throw err;
+  if ((typeof window != 'undefined' || !filename) && !str) {
+    err.message += ' on line ' + lineno;
+    throw err;
+  }
+  try {
+    str =  str || require('fs').readFileSync(filename, 'utf8')
+  } catch (ex) {
+    rethrow(err, null, lineno)
+  }
   var context = 3
-    , str = require('fs').readFileSync(filename, 'utf8')
     , lines = str.split('\n')
     , start = Math.max(lineno - context, 0)
     , end = Math.min(lines.length, lineno + context);
