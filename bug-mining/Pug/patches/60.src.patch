diff --git a/lib/parser.js b/lib/parser.js
index 3ba0bfa..293a56f 100644
--- a/lib/parser.js
+++ b/lib/parser.js
@@ -26,8 +26,7 @@ var Parser = exports = module.exports = function Parser(str, filename, options){
   this.lexer = new Lexer(str, options);
   this.filename = filename;
   this.blocks = {};
-  this.contexts = [];
-  this.context(this);
+  this.contexts = [this];
 };
 
 /**
@@ -48,7 +47,7 @@ Parser.prototype = {
    */
 
   context: function(parser){
-    if (arguments.length) {
+    if (parser) {
       this.contexts.push(parser);
     } else {
       return this.contexts.pop();
@@ -119,8 +118,9 @@ Parser.prototype = {
    */
   
   parse: function(){
-    var block = new nodes.Block;
+    var block = new nodes.Block, parser;
     block.line = this.line();
+
     while ('eos' != this.peek().type) {
       if ('newline' == this.peek().type) {
         this.advance();
@@ -128,7 +128,14 @@ Parser.prototype = {
         block.push(this.parseExpr());
       }
     }
-    if (this.extending) return this.extending.parse();
+
+    if (parser = this.extending) {
+      this.context(parser);
+      var ast = parser.parse();
+      this.context();
+      return ast;
+    }
+
     return block;
   },
   
@@ -336,6 +343,7 @@ Parser.prototype = {
       , parser = new Parser(str, path);
 
     parser.blocks = this.blocks;
+    parser.contexts = this.contexts;
     this.extending = parser;
 
     // TODO: null node
