diff --git a/lib/lexer.js b/lib/lexer.js
index 374d54d..f2678bf 100644
--- a/lib/lexer.js
+++ b/lib/lexer.js
@@ -305,6 +305,7 @@ Lexer.prototype = {
           case ',':
           case '\n':
             switch (state()) {
+              case 'expr':
               case 'array':
               case 'string':
               case 'object':
@@ -325,6 +326,7 @@ Lexer.prototype = {
           case '=':
             switch (state()) {
               case 'val':
+              case 'expr':
               case 'array':
               case 'string':
               case 'object':
@@ -334,6 +336,14 @@ Lexer.prototype = {
                 states.push('val');
             }
             break;
+          case '(':
+            states.push('expr');
+            val += c;
+            break;
+          case ')':
+            states.pop();
+            val += c;
+            break;
           case '{':
             states.push('object');
             val += c;
diff --git a/test/jade.test.js b/test/jade.test.js
index 67b184c..37adf5e 100644
--- a/test/jade.test.js
+++ b/test/jade.test.js
@@ -499,6 +499,9 @@ module.exports = {
         assert.equal('<div style="background: url(/images/test.png)">Foo</div>', render("div(style: 'background: url(/images/test.png)') Foo"));
         assert.equal('<div style="foo">Foo</div>', render("div(style: ['foo', 'bar'][0]) Foo"));
         assert.equal('<div style="bar">Foo</div>', render("div(style: { foo: 'bar', baz: 'raz' }['foo']) Foo"));
+        assert.equal('<a href="def">Foo</a>', render("a(href='abcdefg'.substr(3,3)) Foo"));
+        assert.equal('<a href="def">Foo</a>', render("a(href={test: 'abcdefg'}.test.substr(3,3)) Foo"));
+        assert.equal('<a href="def">Foo</a>', render("a(href={test: 'abcdefg'}.test.substr(3,[0,3][1])) Foo"));
     },
     
     'test attr parens': function(assert){
