<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:30:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MCHECKSTYLE-205] NPE in CheckstyleReportGenerator.doFilesSummary:654 version 2.11 regression</title>
                <link>https://issues.apache.org/jira/browse/MCHECKSTYLE-205</link>
                <project id="12317223" key="MCHECKSTYLE">Maven Checkstyle Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;This worked in release 2.10, no longer works in 2.11. Running mvn site against a large project with a parent pom with many subprojects (though no code in the parent project) (andromda v3.5-SNAPSHOT, from sourceforge). Maven output:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] Generating &quot;Checkstyle&quot; report    --- maven-checkstyle-plugin:2.12-SNAPSHOT
[INFO] Starting audit...
... About 6000 files ...
Audit done.

[INFO] There are 4777 checkstyle errors.
.... And no additional troubleshooting information, even in debug mode ...
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-site-plugin:3.3:site (default-site) on project andromda: Execution default-site of goal org.apache.maven.plugins:maven-site-plugin:3.3:site failed. NullPointerException -&amp;gt; [Help 1]

Caused by: java.lang.NullPointerException
	at java.lang.String.compareTo(String.java:1139)
	at java.lang.String.compareTo(String.java:108)
	at java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:290)
	at java.util.ComparableTimSort.sort(ComparableTimSort.java:171)
	at java.util.ComparableTimSort.sort(ComparableTimSort.java:146)
	at java.util.Arrays.sort(Arrays.java:472)
	at java.util.Collections.sort(Collections.java:155)
	at org.apache.maven.plugin.checkstyle.CheckstyleReportGenerator.doFilesSummary(CheckstyleReportGenerator.java:654)
	at org.apache.maven.plugin.checkstyle.CheckstyleReportGenerator.generateReport(CheckstyleReportGenerator.java:134)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I built version 2.12-SNAPSHOT locally, the NPE still exists. Running with version 2.10 - no NPE. The code attempts to run Collections.sort on a null key in the ArrayList from checkstyle results.getFiles().keySet(). This area of code was not modified in any of the previous revisions going into release 2.11. The results Collection is populated from DefaultCheckstyleExecutor.executeChecks calling sinkListener.addDirectory, but that method code also did not change over the last year.&lt;/p&gt;

&lt;p&gt;This bug prevents us from using the latest checkstyle version. If the stack trace isn&apos;t enough to be able to add an extra null value check in executeChecks, I could run in debug mode and figure where the difference in values from 2.10 and 2.11 comes from, but it may be a little while before I can get to that.&lt;/p&gt;</description>
                <environment>maven-checkstyle-plugin v2.11 and 2.12-SNAPSHOT (as of 12/5/13). Windows 7, JDK7.45 64 bit, maven 3.1</environment>
        <key id="12800267">MCHECKSTYLE-205</key>
            <summary>NPE in CheckstyleReportGenerator.doFilesSummary:654 version 2.11 regression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dennisl@apache.org">Dennis Lundberg</assignee>
                                    <reporter username="bfields">Bob Fields</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Dec 2013 16:46:33 +0000</created>
                <updated>Fri, 13 Jun 2025 10:20:39 +0000</updated>
                            <resolved>Fri, 21 Feb 2014 17:36:15 +0000</resolved>
                                    <version>2.11</version>
                                    <fixVersion>2.12</fixVersion>
                                    <component>checkstyle:checkstyle</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14428128" author="scolebourne2" created="Fri, 6 Dec 2013 08:00:39 +0000"  >&lt;p&gt;I can confirm this affected us to (trace below).&lt;/p&gt;

&lt;p&gt;This commit fixed it by downgrading to v2.10&lt;br/&gt;
&lt;a href=&quot;https://github.com/OpenGamma/OG-Platform/commit/cc98210696e36c9b79ecec99fa168846d8b1f3f4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/OpenGamma/OG-Platform/commit/cc98210696e36c9b79ecec99fa168846d8b1f3f4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To reproduce&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;checkout OpenGamma: &lt;a href=&quot;https://github.com/OpenGamma/OG-Platform.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/OpenGamma/OG-Platform.git&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;checkout commit 8730fd93b3cc520098c7f08ea47a326817c98132 (on the develop branch)&lt;/li&gt;
	&lt;li&gt;change to the &apos;projects&apos; directory&lt;/li&gt;
	&lt;li&gt;run &apos;mvn site&apos;&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;build	05-Dec-2013 23:02:42	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Generating &quot;Checkstyle&quot; report    &amp;#8212; maven-checkstyle-plugin:2.11&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; &lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Reactor Summary:&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; &lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Platform-Public ................................ FAILURE &lt;span class=&quot;error&quot;&gt;&amp;#91;2:37.697s&amp;#93;&lt;/span&gt;&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-TimeSeries ..................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Util ........................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Analytics ...................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Core ........................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Master ......................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-FinancialTypes ................................. SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Security ....................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-LiveData ....................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Provider ....................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Engine ......................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Financial ...................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Web ............................................ SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-UtilDB ......................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-MasterDB ....................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-EngineDB ....................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Component ...................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Bloomberg ...................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Integration .................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Client ......................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; OG-Server ......................................... SKIPPED&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD FAILURE&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time: 2:40.267s&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: Thu Dec 05 23:03:10 GMT 2013&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Final Memory: 58M/769M&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
build	05-Dec-2013 23:03:10	&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-site-plugin:3.3:site (default-site) on project og-platform-public: Execution default-site of goal org.apache.maven.plugins:maven-site-plugin:3.3:site failed. NullPointerException -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
build	05-Dec-2013 23:03:10	org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-site-plugin:3.3:site (default-site) on project og-platform-public: Execution default-site of goal org.apache.maven.plugins:maven-site-plugin:3.3:site failed.&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:225)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)&lt;br/&gt;
build	05-Dec-2013 23:03:10	Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-site of goal org.apache.maven.plugins:maven-site-plugin:3.3:site failed.&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:110)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)&lt;br/&gt;
build	05-Dec-2013 23:03:10		... 19 more&lt;br/&gt;
build	05-Dec-2013 23:03:10	Caused by: java.lang.NullPointerException&lt;br/&gt;
build	05-Dec-2013 23:03:10		at java.lang.String.compareTo(String.java:1139)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at java.lang.String.compareTo(String.java:108)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:290)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at java.util.ComparableTimSort.sort(ComparableTimSort.java:171)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at java.util.ComparableTimSort.sort(ComparableTimSort.java:146)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at java.util.Arrays.sort(Arrays.java:472)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at java.util.Collections.sort(Collections.java:155)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.plugin.checkstyle.CheckstyleReportGenerator.doFilesSummary(CheckstyleReportGenerator.java:650)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.plugin.checkstyle.CheckstyleReportGenerator.generateReport(CheckstyleReportGenerator.java:134)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.plugin.checkstyle.AbstractCheckstyleReport.generateMainReport(AbstractCheckstyleReport.java:462)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.plugin.checkstyle.AbstractCheckstyleReport.executeReport(AbstractCheckstyleReport.java:264)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.reporting.AbstractMavenReport.generate(AbstractMavenReport.java:196)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.plugins.site.ReportDocumentRenderer.renderDocument(ReportDocumentRenderer.java:219)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.renderModule(DefaultSiteRenderer.java:319)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.render(DefaultSiteRenderer.java:135)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.plugins.site.SiteMojo.renderLocale(SiteMojo.java:175)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.plugins.site.SiteMojo.execute(SiteMojo.java:138)&lt;br/&gt;
build	05-Dec-2013 23:03:10		at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)&lt;br/&gt;
build	05-Dec-2013 23:03:10		... 20 more&lt;/p&gt;</comment>
                            <comment id="14428135" author="bfields" created="Fri, 6 Dec 2013 09:25:53 +0000"  >&lt;p&gt;Since somebody else had the same issue I decided to troubleshoot. I added a null value check on CheckstyleResults.java to make sure no invalid data gets added to the results list (null key). This fixes the immediate problem (NPE which kills the site build) but doesn&apos;t fix the underlying issue (checkstyle listener attempting to add a null value to the results list). Nevertheless, a null value check certainly doesn&apos;t hurt. Patch with about 4 lines of code added is attached, against 2.12-SNAPSHOT as of 12/6/2013. Sorry, no additional unit tests, that would take quite a while to reproduce this behavior in a new project. The issue only occurs when running  checkstyle-aggregate report, not when running checkstyle goal.&lt;/p&gt;</comment>
                            <comment id="14428113" author="bfields" created="Fri, 6 Dec 2013 09:26:46 +0000"  >&lt;p&gt;Added 4 lines of code to check for null values before adding to CheckstyleResults list.&lt;/p&gt;</comment>
                            <comment id="14427627" author="igieon" created="Tue, 10 Dec 2013 06:46:38 +0000"  >&lt;p&gt;I confirm this bug also happen for me to upgrading 2.11&lt;/p&gt;</comment>
                            <comment id="14427810" author="chriswesdorp" created="Tue, 21 Jan 2014 04:02:04 +0000"  >&lt;p&gt;The workaround that worked for me is to disable the inclusion of test resources. This also works for the OpenGamma project above.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;      &amp;lt;plugin&amp;gt;
        &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;maven-checkstyle-plugin&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;${maven-checkstyle-plugin.version}&amp;lt;/version&amp;gt;
	&amp;lt;configuration&amp;gt;
		&amp;lt;includeTestResources&amp;gt;false&amp;lt;/includeTestResources&amp;gt;
	&amp;lt;/configuration&amp;gt;
      &amp;lt;/plugin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It might have to do with the default configuration of the plugin.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;includeTestResources is true by default&lt;/li&gt;
	&lt;li&gt;includeTestSourceDirectory is false by default&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The problem is in the CheckstyleReportListener or DefaultCheckstyleExecutor. The CheckstyleReportListener keeps track of the included source directories but for some reason the test resource folders are not added here. In the method fileStarted(AuditEvent) it gets a file that is not in the sourceDirectories list and leaves currentFile to null causing an NullPointerException in the fileFinished(AuditEvent). The DefaultCheckstyleExecutor getFilesToProcess(CheckstyleExecutorRequest) collects all the files.&lt;/p&gt;







</comment>
                            <comment id="14428133" author="dennisl@apache.org" created="Fri, 21 Feb 2014 17:36:15 +0000"  >&lt;p&gt;Patch applied in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1570752&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1570752&lt;/a&gt;. Many thanks!&lt;/p&gt;</comment>
                            <comment id="17971766" author="githubbot" created="Fri, 13 Jun 2025 09:58:47 +0000"  >&lt;p&gt;jira-importer commented on issue #524:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   **&lt;span class=&quot;error&quot;&gt;&amp;#91;scolebourne2&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=scolebourne2)**&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=scolebourne2)**&lt;/a&gt; commented&lt;/p&gt;

&lt;p&gt;   I can confirm this affected us to (trace below).&lt;/p&gt;

&lt;p&gt;   This commit fixed it by downgrading to v2.10&lt;br/&gt;
   &lt;a href=&quot;https://github.com/OpenGamma/OG-Platform/commit/cc98210696e36c9b79ecec99fa168846d8b1f3f4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/OpenGamma/OG-Platform/commit/cc98210696e36c9b79ecec99fa168846d8b1f3f4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   To reproduce&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;checkout OpenGamma: &lt;a href=&quot;https://github.com/OpenGamma/OG-Platform.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/OpenGamma/OG-Platform.git&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;checkout commit 8730fd93b3cc520098c7f08ea47a326817c98132 (on the develop branch)&lt;/li&gt;
	&lt;li&gt;change to the &apos;projects&apos; directory&lt;/li&gt;
	&lt;li&gt;run &apos;mvn site&apos;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   build	05-Dec-2013 23:02:42	&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Generating &quot;Checkstyle&quot; report    -&lt;/p&gt;</comment>
                            <comment id="17971767" author="githubbot" created="Fri, 13 Jun 2025 09:58:48 +0000"  >&lt;p&gt;jira-importer opened a new issue, #524:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-checkstyle-plugin/issues/524&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-checkstyle-plugin/issues/524&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   **&lt;span class=&quot;error&quot;&gt;&amp;#91;Bob Fields&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bfields)**&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bfields)**&lt;/a&gt; opened **&lt;a href=&quot;https://issues.apache.org/jira/browse/MCHECKSTYLE-205&quot; title=&quot;NPE in CheckstyleReportGenerator.doFilesSummary:654 version 2.11 regression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCHECKSTYLE-205&quot;&gt;&lt;del&gt;MCHECKSTYLE-205&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/MCHECKSTYLE-205?redirect=false)**&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MCHECKSTYLE-205?redirect=false)**&lt;/a&gt; and commented&lt;/p&gt;

&lt;p&gt;   This worked in release 2.10, no longer works in 2.11. Running mvn site against a large project with a parent pom with many subprojects (though no code in the parent project) (andromda v3.5-SNAPSHOT, from sourceforge). Maven output:&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Generating &quot;Checkstyle&quot; report    -&lt;/p&gt;</comment>
                            <comment id="17971768" author="githubbot" created="Fri, 13 Jun 2025 09:58:49 +0000"  >&lt;p&gt;jira-importer commented on issue #524:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790276&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   **&lt;span class=&quot;error&quot;&gt;&amp;#91;Bob Fields&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bfields)**&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bfields)**&lt;/a&gt; commented&lt;/p&gt;

&lt;p&gt;   Since somebody else had the same issue I decided to troubleshoot. I added a null value check on CheckstyleResults.java to make sure no invalid data gets added to the results list (null key). This fixes the immediate problem (NPE which kills the site build) but doesn&apos;t fix the underlying issue (checkstyle listener attempting to add a null value to the results list). Nevertheless, a null value check certainly doesn&apos;t hurt. Patch with about 4 lines of code added is attached, against 2.12-SNAPSHOT as of 12/6/2013. Sorry, no additional unit tests, that would take quite a while to reproduce this behavior in a new project. The issue only occurs when running  checkstyle-aggregate report, not when running checkstyle goal.&lt;/p&gt;


</comment>
                            <comment id="17971769" author="githubbot" created="Fri, 13 Jun 2025 09:58:49 +0000"  >&lt;p&gt;jira-importer commented on issue #524:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790291&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   **&lt;span class=&quot;error&quot;&gt;&amp;#91;Dennis Lundberg&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dennisl@apache.org)**&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dennisl@apache.org)**&lt;/a&gt; commented&lt;/p&gt;

&lt;p&gt;   Patch applied in &lt;span class=&quot;error&quot;&gt;&amp;#91;r1570752&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1570752&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1570752&lt;/a&gt;). Many thanks!&lt;/p&gt;


</comment>
                            <comment id="17971770" author="githubbot" created="Fri, 13 Jun 2025 09:58:50 +0000"  >&lt;p&gt;jira-importer commented on issue #524:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790282&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790282&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   **&lt;span class=&quot;error&quot;&gt;&amp;#91;David Ignjic&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=igieon)**&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=igieon)**&lt;/a&gt; commented&lt;/p&gt;

&lt;p&gt;   I confirm this bug also happen for me to upgrading 2.11&lt;/p&gt;


</comment>
                            <comment id="17971771" author="githubbot" created="Fri, 13 Jun 2025 09:58:51 +0000"  >&lt;p&gt;jira-importer commented on issue #524:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790278&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   **&lt;span class=&quot;error&quot;&gt;&amp;#91;Bob Fields&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bfields)**&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bfields)**&lt;/a&gt; commented&lt;/p&gt;

&lt;p&gt;   Added 4 lines of code to check for null values before adding to CheckstyleResults list.&lt;/p&gt;


</comment>
                            <comment id="17971772" author="githubbot" created="Fri, 13 Jun 2025 09:58:52 +0000"  >&lt;p&gt;jira-importer commented on issue #524:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-checkstyle-plugin/issues/524#issuecomment-2969790286&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   **&lt;span class=&quot;error&quot;&gt;&amp;#91;Chris Wesdorp&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chriswesdorp)**&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chriswesdorp)**&lt;/a&gt; commented&lt;/p&gt;

&lt;p&gt;   The workaround that worked for me is to disable the inclusion of test resources. This also works for the OpenGamma project above.&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
    &amp;lt;plugin&amp;gt;&lt;br/&gt;
      &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
      &amp;lt;artifactId&amp;gt;maven-checkstyle-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
      &amp;lt;version&amp;gt;${maven-checkstyle-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
   &amp;lt;configuration&amp;gt;&lt;br/&gt;
        &amp;lt;includeTestResources&amp;gt;false&amp;lt;/includeTestResources&amp;gt;&lt;br/&gt;
   &amp;lt;/configuration&amp;gt;&lt;br/&gt;
    &amp;lt;/plugin&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   It might have to do with the default configuration of the plugin.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;includeTestResources is true by default&lt;/li&gt;
	&lt;li&gt;includeTestSourceDirectory is false by default&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   The problem is in the CheckstyleReportListener or DefaultCheckstyleExecutor. The CheckstyleReportListener keeps track of the included source directories but for some reason the test resource folders are not added here. In the method fileStarted(AuditEvent) it gets a file that is not in the sourceDirectories list and leaves currentFile to null causing an NullPointerException in the fileFinished(AuditEvent). The DefaultCheckstyleExecutor getFilesToProcess(CheckstyleExecutorRequest) collects all the files.&lt;/p&gt;



</comment>
                            <comment id="17972667" author="sparsick" created="Fri, 13 Jun 2025 10:20:39 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-checkstyle-plugin/issues/524&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-checkstyle-plugin#524&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12714747" name="CheckstyleResults.java.patch" size="959" author="" created="Fri, 6 Dec 2013 09:26:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i29snr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>