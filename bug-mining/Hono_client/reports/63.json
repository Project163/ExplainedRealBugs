{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/493","repository_url":"https://api.github.com/repos/eclipse-hono/hono","labels_url":"https://api.github.com/repos/eclipse-hono/hono/issues/493/labels{/name}","comments_url":"https://api.github.com/repos/eclipse-hono/hono/issues/493/comments","events_url":"https://api.github.com/repos/eclipse-hono/hono/issues/493/events","html_url":"https://github.com/eclipse-hono/hono/issues/493","id":297152414,"node_id":"MDU6SXNzdWUyOTcxNTI0MTQ=","number":493,"title":"HonoClient does only re-connect one time if no disconnect handler was provided in connect()","user":{"login":"DanielMaier-BSI","id":9269795,"node_id":"MDQ6VXNlcjkyNjk3OTU=","avatar_url":"https://avatars.githubusercontent.com/u/9269795?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielMaier-BSI","html_url":"https://github.com/DanielMaier-BSI","followers_url":"https://api.github.com/users/DanielMaier-BSI/followers","following_url":"https://api.github.com/users/DanielMaier-BSI/following{/other_user}","gists_url":"https://api.github.com/users/DanielMaier-BSI/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielMaier-BSI/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielMaier-BSI/subscriptions","organizations_url":"https://api.github.com/users/DanielMaier-BSI/orgs","repos_url":"https://api.github.com/users/DanielMaier-BSI/repos","events_url":"https://api.github.com/users/DanielMaier-BSI/events{/privacy}","received_events_url":"https://api.github.com/users/DanielMaier-BSI/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":323160606,"node_id":"MDU6TGFiZWwzMjMxNjA2MDY=","url":"https://api.github.com/repos/eclipse-hono/hono/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":643682479,"node_id":"MDU6TGFiZWw2NDM2ODI0Nzk=","url":"https://api.github.com/repos/eclipse-hono/hono/labels/Client","name":"Client","color":"0e8a16","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/eclipse-hono/hono/milestones/14","html_url":"https://github.com/eclipse-hono/hono/milestone/14","labels_url":"https://api.github.com/repos/eclipse-hono/hono/milestones/14/labels","id":3115802,"node_id":"MDk6TWlsZXN0b25lMzExNTgwMg==","number":14,"title":"0.5.1","description":"Bugfix release.","creator":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":2,"state":"closed","created_at":"2018-02-14T09:20:41Z","updated_at":"2019-06-14T11:51:13Z","due_on":null,"closed_at":"2019-05-23T13:34:16Z"},"comments":3,"created_at":"2018-02-14T16:08:38Z","updated_at":"2018-02-16T12:19:53Z","closed_at":"2018-02-16T12:19:53Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi,\r\n\r\nwhen I use hono client connect() without disconnect handler, re-connection just works fine for the very first time. But when client looses connection again there are no more re-connects. As JWT token expires every 10 minutes, hono clients configured like this do never re-connect after 20 minutes. This is also already mentioned #239 \r\n\r\nProblem seems to be that when no disconnect handler is set, a handler gets set for reconnect that just invokes onRemoteDisconnect(): https://github.com/eclipse/hono/blob/6777c3e048a46d95c7985d441c7ac485eeb23858/client/src/main/java/org/eclipse/hono/client/impl/HonoClientImpl.java#L251-L269\r\n\r\nThen during next re-connect, disconnect handler is not longer null and gets invoked, i.e. onRemoteDisconnect gets invoked. However, before invocation, connection gets set to null. But now failed connection and current connection (which is null now) are not the same and re-connect stops with a warn log statement: \r\n\r\nhttps://github.com/eclipse/hono/blob/6777c3e048a46d95c7985d441c7ac485eeb23858/client/src/main/java/org/eclipse/hono/client/impl/HonoClientImpl.java#L241-L249\r\n\r\nWas there a reason why reconnect gets called with a disconnect handler, even when the user did not set one? Why not just invoke reconnect with null disconnect handler?\r\n\r\nThanks \r\nDaniel\r\n","closed_by":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/493/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eclipse-hono/hono/issues/493/timeline","performed_via_github_app":null,"state_reason":"completed"}