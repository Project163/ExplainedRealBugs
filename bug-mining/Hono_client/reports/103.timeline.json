[{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/comments/403548586","html_url":"https://github.com/eclipse-hono/hono/issues/696#issuecomment-403548586","issue_url":"https://api.github.com/repos/eclipse-hono/hono/issues/696","id":403548586,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMzU0ODU4Ng==","user":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-09T17:01:19Z","updated_at":"2018-07-09T17:01:19Z","body":"I have started to look into this. I am quite sure what the problem is (thanks to the thread dump) but I am not (yet) sure how to properly address the problem.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/comments/403548586/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1723643529,"node_id":"MDEyOkxhYmVsZWRFdmVudDE3MjM2NDM1Mjk=","url":"https://api.github.com/repos/eclipse-hono/hono/issues/events/1723643529","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-07-09T17:01:24Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":1723643546,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQxNzIzNjQzNTQ2","url":"https://api.github.com/repos/eclipse-hono/hono/issues/events/1723643546","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2018-07-09T17:01:24Z","assignee":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":1723643683,"node_id":"MDEyOkxhYmVsZWRFdmVudDE3MjM2NDM2ODM=","url":"https://api.github.com/repos/eclipse-hono/hono/issues/events/1723643683","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-07-09T17:01:29Z","label":{"name":"HTTP Adapter","color":"0052cc"},"performed_via_github_app":null},{"id":1723643957,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE3MjM2NDM5NTc=","url":"https://api.github.com/repos/eclipse-hono/hono/issues/events/1723643957","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-07-09T17:01:35Z","milestone":{"title":"0.7"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/comments/403794374","html_url":"https://github.com/eclipse-hono/hono/issues/696#issuecomment-403794374","issue_url":"https://api.github.com/repos/eclipse-hono/hono/issues/696","id":403794374,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMzc5NDM3NA==","user":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-10T11:47:02Z","updated_at":"2018-07-10T11:47:02Z","body":"The problem seems to be that we *switch* the vert.x `Context` while processing requests. When a request comes in it is handled on the event loop context that has been created when the HTTP adapter verticle gets deployed. This Context is associated with one of the event loop threads, say *event-loop-thread-0*.\r\n\r\nWhen Spring instantiates the HonoClient instances for connecting to the registry and AMQP network, these instances all create a new vert.x Context to run on in their constructor. So, let's say the client for accessing the Tenant service runs on a Context that is associated with *event-loop-thread-1*.\r\n\r\nNow, when an HTTP request is being processed, we first try to authenticate the device which includes a lookup of the tenant that the device belongs to. Thus, the request handler invokes the Tenant HonoClient which will add a task to the *event-loop-thread-1*'s event loop. When the result of the lookup operation is received from the Tenant service (still on *event-loop-thread-1*) the HonoClient completes the result future and the processing of the HTTP request can continue. This involves invocation of `Router.next()` in order to determine the next handler to invoke for processing the HTTP request. However, the Router instance (which has been created on *event-loop-thread-0* when the HTTP server has been started), will now be concurrently accessed from two threads: *event-loop-thread-1* (with the result of the tenant lookup) as well as from *event-loop-thread-0* (for handling the next request coming in from a device).\r\n\r\nWe now have a situation where two threads try to lock on the same objects (the `Route`s registered in the Router) which seems to be prone to ending in the observed deadlock situation.\r\n\r\nI think that we will need to make sure that the result of the operations invoked on the HonoClient instances gets processed on the calling code's Context (and underlying thread). I am currently thinking about ways how to achieve this.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/comments/403794374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/comments/404426888","html_url":"https://github.com/eclipse-hono/hono/issues/696#issuecomment-404426888","issue_url":"https://api.github.com/repos/eclipse-hono/hono/issues/696","id":404426888,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDQyNjg4OA==","user":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-12T08:07:06Z","updated_at":"2018-07-12T08:07:06Z","body":"As a corollary to the strategy of fixing this issue, we also need to get the validation of client certificates off of the event loop because the `TenantApiBasedX509TrustManager` uses the `HonoClient` for the Tenant service to look up the tenant that the device belongs to. However, since the `X509TrustManager.checkClientTrusted` method is blocking the current thread, we cannot run both on the same event loop (we would never get the result of the tenant lookup because the result handler is scheduled to the same event loop which is still blocked by the trust manager check).\r\n\r\nAssuming that we still want to do validation of client certs based on the dynamic lookup of the trust anchor, we will need to move the validation of the certificate chain up to the application level, i.e. into the `X509AuthHandler`. This actually is less frightening as it at first seems because we need to lookup the tenant there anyway in order to be able to do the credentials lookup (which is always scoped to the tenant).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/comments/404426888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1732773482,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE3MzI3NzM0ODI=","url":"https://api.github.com/repos/eclipse-hono/hono/issues/events/1732773482","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"cdee13db8cd9e88daada0ece8ef17ea283e48811","commit_url":"https://api.github.com/repos/eclipse-hono/hono/commits/cdee13db8cd9e88daada0ece8ef17ea283e48811","created_at":"2018-07-13T14:53:25Z","performed_via_github_app":null},{"id":1732773495,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE3MzI3NzM0OTU=","url":"https://api.github.com/repos/eclipse-hono/hono/issues/events/1732773495","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d80b5005252175f642d1d638e18add48aaf7581b","commit_url":"https://api.github.com/repos/eclipse-hono/hono/commits/d80b5005252175f642d1d638e18add48aaf7581b","created_at":"2018-07-13T14:53:25Z","performed_via_github_app":null},{"id":1735097697,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE3MzUwOTc2OTc=","url":"https://api.github.com/repos/eclipse-hono/hono/issues/events/1735097697","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4e7dc3aeba95d03804518aed3655ab2c71f82a2c","commit_url":"https://api.github.com/repos/eclipse-hono/hono/commits/4e7dc3aeba95d03804518aed3655ab2c71f82a2c","created_at":"2018-07-16T11:40:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/comments/406221887","html_url":"https://github.com/eclipse-hono/hono/issues/696#issuecomment-406221887","issue_url":"https://api.github.com/repos/eclipse-hono/hono/issues/696","id":406221887,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjIyMTg4Nw==","user":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-19T09:54:10Z","updated_at":"2018-07-19T09:54:10Z","body":"fixed in https://github.com/eclipse/hono/commit/4e7dc3aeba95d03804518aed3655ab2c71f82a2c","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/comments/406221887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1742138872,"node_id":"MDExOkNsb3NlZEV2ZW50MTc0MjEzODg3Mg==","url":"https://api.github.com/repos/eclipse-hono/hono/issues/events/1742138872","actor":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2018-07-19T09:54:11Z","state_reason":null,"performed_via_github_app":null},{"id":1744466603,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE3NDQ0NjY2MDM=","url":"https://api.github.com/repos/eclipse-hono/hono/issues/events/1744466603","actor":{"login":"kaniyan","id":18659982,"node_id":"MDQ6VXNlcjE4NjU5OTgy","avatar_url":"https://avatars.githubusercontent.com/u/18659982?v=4","gravatar_id":"","url":"https://api.github.com/users/kaniyan","html_url":"https://github.com/kaniyan","followers_url":"https://api.github.com/users/kaniyan/followers","following_url":"https://api.github.com/users/kaniyan/following{/other_user}","gists_url":"https://api.github.com/users/kaniyan/gists{/gist_id}","starred_url":"https://api.github.com/users/kaniyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaniyan/subscriptions","organizations_url":"https://api.github.com/users/kaniyan/orgs","repos_url":"https://api.github.com/users/kaniyan/repos","events_url":"https://api.github.com/users/kaniyan/events{/privacy}","received_events_url":"https://api.github.com/users/kaniyan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"04d264fe3d0f89ceefc2e6916c72dd161b5b6317","commit_url":"https://api.github.com/repos/bosch-io/hono/commits/04d264fe3d0f89ceefc2e6916c72dd161b5b6317","created_at":"2018-07-20T10:10:17Z","performed_via_github_app":null},{"actor":{"login":"chapitos","id":711548,"node_id":"MDQ6VXNlcjcxMTU0OA==","avatar_url":"https://avatars.githubusercontent.com/u/711548?v=4","gravatar_id":"","url":"https://api.github.com/users/chapitos","html_url":"https://github.com/chapitos","followers_url":"https://api.github.com/users/chapitos/followers","following_url":"https://api.github.com/users/chapitos/following{/other_user}","gists_url":"https://api.github.com/users/chapitos/gists{/gist_id}","starred_url":"https://api.github.com/users/chapitos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chapitos/subscriptions","organizations_url":"https://api.github.com/users/chapitos/orgs","repos_url":"https://api.github.com/users/chapitos/repos","events_url":"https://api.github.com/users/chapitos/events{/privacy}","received_events_url":"https://api.github.com/users/chapitos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T11:21:02Z","updated_at":"2018-08-02T11:21:02Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/749","repository_url":"https://api.github.com/repos/eclipse-hono/hono","labels_url":"https://api.github.com/repos/eclipse-hono/hono/issues/749/labels{/name}","comments_url":"https://api.github.com/repos/eclipse-hono/hono/issues/749/comments","events_url":"https://api.github.com/repos/eclipse-hono/hono/issues/749/events","html_url":"https://github.com/eclipse-hono/hono/pull/749","id":346968941,"node_id":"MDExOlB1bGxSZXF1ZXN0MjA1NzAxMDU2","number":749,"title":"Protocol adapter liveness check to detect blocked vert.x event loop.","user":{"login":"chapitos","id":711548,"node_id":"MDQ6VXNlcjcxMTU0OA==","avatar_url":"https://avatars.githubusercontent.com/u/711548?v=4","gravatar_id":"","url":"https://api.github.com/users/chapitos","html_url":"https://github.com/chapitos","followers_url":"https://api.github.com/users/chapitos/followers","following_url":"https://api.github.com/users/chapitos/following{/other_user}","gists_url":"https://api.github.com/users/chapitos/gists{/gist_id}","starred_url":"https://api.github.com/users/chapitos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chapitos/subscriptions","organizations_url":"https://api.github.com/users/chapitos/orgs","repos_url":"https://api.github.com/users/chapitos/repos","events_url":"https://api.github.com/users/chapitos/events{/privacy}","received_events_url":"https://api.github.com/users/chapitos/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":323160608,"node_id":"MDU6TGFiZWwzMjMxNjA2MDg=","url":"https://api.github.com/repos/eclipse-hono/hono/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/eclipse-hono/hono/milestones/16","html_url":"https://github.com/eclipse-hono/hono/milestone/16","labels_url":"https://api.github.com/repos/eclipse-hono/hono/milestones/16/labels","id":3291897,"node_id":"MDk6TWlsZXN0b25lMzI5MTg5Nw==","number":16,"title":"0.7","description":"https://projects.eclipse.org/projects/iot.hono/releases/0.7","creator":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":104,"state":"closed","created_at":"2018-04-24T07:19:05Z","updated_at":"2018-08-20T08:14:16Z","due_on":"2018-08-16T07:00:00Z","closed_at":"2018-08-17T08:06:01Z"},"comments":1,"created_at":"2018-08-02T11:21:02Z","updated_at":"2018-08-06T07:19:00Z","closed_at":"2018-08-06T07:19:00Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":51307016,"node_id":"MDEwOlJlcG9zaXRvcnk1MTMwNzAxNg==","name":"hono","full_name":"eclipse-hono/hono","private":false,"owner":{"login":"eclipse-hono","id":112081701,"node_id":"O_kgDOBq47JQ","avatar_url":"https://avatars.githubusercontent.com/u/112081701?v=4","gravatar_id":"","url":"https://api.github.com/users/eclipse-hono","html_url":"https://github.com/eclipse-hono","followers_url":"https://api.github.com/users/eclipse-hono/followers","following_url":"https://api.github.com/users/eclipse-hono/following{/other_user}","gists_url":"https://api.github.com/users/eclipse-hono/gists{/gist_id}","starred_url":"https://api.github.com/users/eclipse-hono/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eclipse-hono/subscriptions","organizations_url":"https://api.github.com/users/eclipse-hono/orgs","repos_url":"https://api.github.com/users/eclipse-hono/repos","events_url":"https://api.github.com/users/eclipse-hono/events{/privacy}","received_events_url":"https://api.github.com/users/eclipse-hono/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/eclipse-hono/hono","description":"Eclipse Honoâ„¢ Project","fork":false,"url":"https://api.github.com/repos/eclipse-hono/hono","forks_url":"https://api.github.com/repos/eclipse-hono/hono/forks","keys_url":"https://api.github.com/repos/eclipse-hono/hono/keys{/key_id}","collaborators_url":"https://api.github.com/repos/eclipse-hono/hono/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/eclipse-hono/hono/teams","hooks_url":"https://api.github.com/repos/eclipse-hono/hono/hooks","issue_events_url":"https://api.github.com/repos/eclipse-hono/hono/issues/events{/number}","events_url":"https://api.github.com/repos/eclipse-hono/hono/events","assignees_url":"https://api.github.com/repos/eclipse-hono/hono/assignees{/user}","branches_url":"https://api.github.com/repos/eclipse-hono/hono/branches{/branch}","tags_url":"https://api.github.com/repos/eclipse-hono/hono/tags","blobs_url":"https://api.github.com/repos/eclipse-hono/hono/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/eclipse-hono/hono/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/eclipse-hono/hono/git/refs{/sha}","trees_url":"https://api.github.com/repos/eclipse-hono/hono/git/trees{/sha}","statuses_url":"https://api.github.com/repos/eclipse-hono/hono/statuses/{sha}","languages_url":"https://api.github.com/repos/eclipse-hono/hono/languages","stargazers_url":"https://api.github.com/repos/eclipse-hono/hono/stargazers","contributors_url":"https://api.github.com/repos/eclipse-hono/hono/contributors","subscribers_url":"https://api.github.com/repos/eclipse-hono/hono/subscribers","subscription_url":"https://api.github.com/repos/eclipse-hono/hono/subscription","commits_url":"https://api.github.com/repos/eclipse-hono/hono/commits{/sha}","git_commits_url":"https://api.github.com/repos/eclipse-hono/hono/git/commits{/sha}","comments_url":"https://api.github.com/repos/eclipse-hono/hono/comments{/number}","issue_comment_url":"https://api.github.com/repos/eclipse-hono/hono/issues/comments{/number}","contents_url":"https://api.github.com/repos/eclipse-hono/hono/contents/{+path}","compare_url":"https://api.github.com/repos/eclipse-hono/hono/compare/{base}...{head}","merges_url":"https://api.github.com/repos/eclipse-hono/hono/merges","archive_url":"https://api.github.com/repos/eclipse-hono/hono/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/eclipse-hono/hono/downloads","issues_url":"https://api.github.com/repos/eclipse-hono/hono/issues{/number}","pulls_url":"https://api.github.com/repos/eclipse-hono/hono/pulls{/number}","milestones_url":"https://api.github.com/repos/eclipse-hono/hono/milestones{/number}","notifications_url":"https://api.github.com/repos/eclipse-hono/hono/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/eclipse-hono/hono/labels{/name}","releases_url":"https://api.github.com/repos/eclipse-hono/hono/releases{/id}","deployments_url":"https://api.github.com/repos/eclipse-hono/hono/deployments","created_at":"2016-02-08T15:45:28Z","updated_at":"2025-11-04T15:48:55Z","pushed_at":"2025-11-07T14:00:09Z","git_url":"git://github.com/eclipse-hono/hono.git","ssh_url":"git@github.com:eclipse-hono/hono.git","clone_url":"https://github.com/eclipse-hono/hono.git","svn_url":"https://github.com/eclipse-hono/hono","homepage":"https://eclipse.dev/hono","size":51799,"stargazers_count":476,"watchers_count":476,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":139,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":115,"license":{"key":"epl-2.0","name":"Eclipse Public License 2.0","spdx_id":"EPL-2.0","url":"https://api.github.com/licenses/epl-2.0","node_id":"MDc6TGljZW5zZTMy"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["eclipseiot","internet-of-things","messaging"],"visibility":"public","forks":139,"open_issues":115,"watchers":476,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/eclipse-hono/hono/pulls/749","html_url":"https://github.com/eclipse-hono/hono/pull/749","diff_url":"https://github.com/eclipse-hono/hono/pull/749.diff","patch_url":"https://github.com/eclipse-hono/hono/pull/749.patch","merged_at":"2018-08-06T07:19:00Z"},"body":"Signed-off-by: Marko Pascan <marko.pascan@bosch-si.com>\r\n\r\nCurrently no liveness checks are registered for protocol adapters. In our use case, where Hono services are running as part of Kubernetes cluster, this could lead to problems if a adapter runs into a deadlock (see https://github.com/eclipse/hono/issues/696). The expectation here is that a liveness check would detect a blocked/deadlocked protocol adapter and restart the Kubernetes POD.\r\n\r\nThe implemented liveness check procedure tries to execute an action on the protocol adapter context an in this way detect whether the vert.x event loop is blocked. If the event loop is blocked, the procedure will not complete within the defined timeout, thus causing failure of the liveness check.","reactions":{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eclipse-hono/hono/issues/749/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]