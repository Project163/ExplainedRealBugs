{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/1020","repository_url":"https://api.github.com/repos/eclipse-hono/hono","labels_url":"https://api.github.com/repos/eclipse-hono/hono/issues/1020/labels{/name}","comments_url":"https://api.github.com/repos/eclipse-hono/hono/issues/1020/comments","events_url":"https://api.github.com/repos/eclipse-hono/hono/issues/1020/events","html_url":"https://github.com/eclipse-hono/hono/issues/1020","id":406320488,"node_id":"MDU6SXNzdWU0MDYzMjA0ODg=","number":1020,"title":"HonoClient: Error processing \"not accepted by peer\" response (0.9-M2)","user":{"login":"calohmn","id":891931,"node_id":"MDQ6VXNlcjg5MTkzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/891931?v=4","gravatar_id":"","url":"https://api.github.com/users/calohmn","html_url":"https://github.com/calohmn","followers_url":"https://api.github.com/users/calohmn/followers","following_url":"https://api.github.com/users/calohmn/following{/other_user}","gists_url":"https://api.github.com/users/calohmn/gists{/gist_id}","starred_url":"https://api.github.com/users/calohmn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calohmn/subscriptions","organizations_url":"https://api.github.com/users/calohmn/orgs","repos_url":"https://api.github.com/users/calohmn/repos","events_url":"https://api.github.com/users/calohmn/events{/privacy}","received_events_url":"https://api.github.com/users/calohmn/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":323160606,"node_id":"MDU6TGFiZWwzMjMxNjA2MDY=","url":"https://api.github.com/repos/eclipse-hono/hono/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":643682479,"node_id":"MDU6TGFiZWw2NDM2ODI0Nzk=","url":"https://api.github.com/repos/eclipse-hono/hono/labels/Client","name":"Client","color":"0e8a16","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/eclipse-hono/hono/milestones/18","html_url":"https://github.com/eclipse-hono/hono/milestone/18","labels_url":"https://api.github.com/repos/eclipse-hono/hono/milestones/18/labels","id":3781949,"node_id":"MDk6TWlsZXN0b25lMzc4MTk0OQ==","number":18,"title":"0.9","description":"https://projects.eclipse.org/projects/iot.hono/releases/0.9","creator":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":119,"state":"closed","created_at":"2018-10-30T13:36:24Z","updated_at":"2019-03-05T17:17:31Z","due_on":"2019-02-25T08:00:00Z","closed_at":"2019-02-26T15:07:37Z"},"comments":1,"created_at":"2019-02-04T13:05:13Z","updated_at":"2019-02-05T07:52:49Z","closed_at":"2019-02-05T07:51:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"\r\nWhen processing the _delivery update_ received after having sent a message, the _Sender_ component of `HonoClient` (ie. `AbstractSender` and `AbstractRequestResponseClient`) produces an `IllegalArgumentException`:\r\n````\r\n12:15:46.525 [vert.x-eventloop-thread-0] DEBUG o.e.hono.client.impl.EventSenderImpl - message [message ID: EventSenderImpl-7] not accepted by peer, remote state: Released{}\r\n12:15:46.525 [vert.x-eventloop-thread-0] ERROR o.e.hono.client.impl.EventSenderImpl - error handling delivery update\r\njava.lang.IllegalArgumentException: client error code must be >= 400 and < 500\r\n\tat org.eclipse.hono.client.ClientErrorException.<init>(ClientErrorException.java:68)\r\n\tat org.eclipse.hono.client.ClientErrorException.<init>(ClientErrorException.java:32)\r\n\tat org.eclipse.hono.client.impl.AbstractSender.lambda$sendMessageAndWaitForOutcome$6(AbstractSender.java:458)\r\n\tat io.vertx.proton.impl.ProtonDeliveryImpl.fireUpdate(ProtonDeliveryImpl.java:153)\r\n\tat io.vertx.proton.impl.ProtonTransport.handleSocketBuffer(ProtonTransport.java:160)\r\n\tat io.vertx.core.net.impl.NetSocketImpl$DataMessageHandler.handle(NetSocketImpl.java:392)\r\n\tat io.vertx.core.streams.impl.InboundBuffer.handleEvent(InboundBuffer.java:225)\r\n\tat io.vertx.core.streams.impl.InboundBuffer.write(InboundBuffer.java:123)\r\n\tat io.vertx.core.net.impl.NetSocketImpl.handleMessage(NetSocketImpl.java:370)\r\n\tat io.vertx.core.net.impl.ConnectionBase.handleRead(ConnectionBase.java:386)\r\n````\r\nExtra exception handling has been added to get this stacktrace - the exception is not logged with the standard Hono build.\r\n\r\nThis exception leads the `ProtonTransport` associated with the corresponding AMQP connection to not handle any further AMQP events, which will lead to followup errors (e.g. timeouts when trying to create a new sender).\r\n","closed_by":{"login":"sophokles73","id":5682135,"node_id":"MDQ6VXNlcjU2ODIxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5682135?v=4","gravatar_id":"","url":"https://api.github.com/users/sophokles73","html_url":"https://github.com/sophokles73","followers_url":"https://api.github.com/users/sophokles73/followers","following_url":"https://api.github.com/users/sophokles73/following{/other_user}","gists_url":"https://api.github.com/users/sophokles73/gists{/gist_id}","starred_url":"https://api.github.com/users/sophokles73/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophokles73/subscriptions","organizations_url":"https://api.github.com/users/sophokles73/orgs","repos_url":"https://api.github.com/users/sophokles73/repos","events_url":"https://api.github.com/users/sophokles73/events{/privacy}","received_events_url":"https://api.github.com/users/sophokles73/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eclipse-hono/hono/issues/1020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eclipse-hono/hono/issues/1020/timeline","performed_via_github_app":null,"state_reason":"completed"}