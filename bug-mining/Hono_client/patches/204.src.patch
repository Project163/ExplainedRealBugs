diff --git a/client/src/main/java/org/eclipse/hono/client/Command.java b/client/src/main/java/org/eclipse/hono/client/Command.java
index 8a1a74af0..b1f2c158c 100644
--- a/client/src/main/java/org/eclipse/hono/client/Command.java
+++ b/client/src/main/java/org/eclipse/hono/client/Command.java
@@ -54,7 +54,8 @@ public final class Command {
             final String tenantId,
             final String deviceId,
             final String correlationId,
-            final String replyToId) {
+            final String replyToId,
+            final String requestId) {
 
         this.validationError = validationError;
         this.message = message;
@@ -62,7 +63,7 @@ public final class Command {
         this.deviceId = deviceId;
         this.correlationId = correlationId;
         this.replyToId = replyToId;
-        this.requestId = getRequestId(correlationId, replyToId, deviceId);
+        this.requestId = requestId;
     }
 
     /**
@@ -70,6 +71,7 @@ public final class Command {
      * <p>
      * The message is expected to contain
      * <ul>
+     * <li>a non-null <em>address</em>, containing a matching tenant part and a non-empty device-id part</li>
      * <li>a non-null <em>subject</em></li>
      * <li>either a null <em>reply-to</em> address (for a one-way command)
      * or a non-null <em>reply-to</em> address that matches the tenant and device IDs and consists
@@ -85,7 +87,9 @@ public final class Command {
      *
      * @param message The message containing the command.
      * @param tenantId The tenant that the device belongs to.
-     * @param deviceId The identifier of the device.
+     * @param deviceId The identifier of the device that the command will be sent to. If the command has been mapped
+     *                 to a gateway, this id is the gateway id and the original command target device is given in
+     *                 the message address.
      * @return The command.
      * @throws NullPointerException if any of the parameters is {@code null}.
      */
@@ -99,6 +103,7 @@ public final class Command {
         Objects.requireNonNull(deviceId);
 
         final StringJoiner validationErrorJoiner = new StringJoiner(", ");
+        String originalDeviceId = deviceId;
         if (message.getAddress() == null) {
             validationErrorJoiner.add("address is not set");
         } else {
@@ -109,6 +114,7 @@ public final class Command {
             if (addressIdentifier.getResourceId() == null) {
                 validationErrorJoiner.add("address is missing device-id part");
             }
+            originalDeviceId = addressIdentifier.getResourceId();
         }
 
         if (message.getSubject() == null) {
@@ -145,7 +151,7 @@ public final class Command {
                     } else {
                         message.setReplyTo(
                                 String.format("%s/%s/%s", CommandConstants.COMMAND_RESPONSE_ENDPOINT, tenantId,
-                                        getDeviceFacingReplyToId(originalReplyToId, deviceId)));
+                                        getDeviceFacingReplyToId(originalReplyToId, originalDeviceId)));
                     }
                 }
             } catch (final IllegalArgumentException e) {
@@ -160,7 +166,8 @@ public final class Command {
                 tenantId,
                 deviceId,
                 correlationId,
-                originalReplyToId);
+                originalReplyToId,
+                getRequestId(correlationId, originalReplyToId, originalDeviceId));
 
         return result;
     }
diff --git a/client/src/test/java/org/eclipse/hono/client/CommandTest.java b/client/src/test/java/org/eclipse/hono/client/CommandTest.java
index 1f6a55207..400dd1855 100644
--- a/client/src/test/java/org/eclipse/hono/client/CommandTest.java
+++ b/client/src/test/java/org/eclipse/hono/client/CommandTest.java
@@ -55,6 +55,8 @@ public class CommandTest {
         final Command cmd = Command.from(message, Constants.DEFAULT_TENANT, "4711");
         assertTrue(cmd.isValid());
         assertThat(cmd.getName()).isEqualTo("doThis");
+        assertThat(cmd.getDeviceId()).isEqualTo("4711");
+        assertThat(cmd.getOriginalDeviceId()).isEqualTo("4711");
         assertThat(cmd.getReplyToId()).isEqualTo(String.format("4711/%s", replyToId));
         assertThat(cmd.getReplyToEndpoint()).isEqualTo(CommandConstants.NORTHBOUND_COMMAND_RESPONSE_ENDPOINT);
         assertThat(cmd.getCorrelationId()).isEqualTo(correlationId);
@@ -63,6 +65,39 @@ public class CommandTest {
                 CommandConstants.COMMAND_RESPONSE_ENDPOINT, Constants.DEFAULT_TENANT, "4711", replyToOptionsBitFlag, replyToId));
     }
 
+    /**
+     * Verifies that a command can be created from a valid message, containing a message address with device id
+     * differing from the one given in the command constructor.
+     * Verifies that the replyToId are build up of all segments behind the tenant.
+     */
+    @Test
+    public void testFromMessageSucceedsWithDifferingDeviceId() {
+        final String gatewayId = "gw-1";
+        final String targetDeviceId = "4711";
+        final String replyToId = "the-reply-to-id";
+        final String correlationId = "the-correlation-id";
+        final Message message = ProtonHelper.message("input data");
+        message.setAddress(String.format("%s/%s/%s",
+                CommandConstants.COMMAND_ENDPOINT, Constants.DEFAULT_TENANT, targetDeviceId));
+        message.setSubject("doThis");
+        message.setCorrelationId(correlationId);
+        message.setReplyTo(String.format("%s/%s/%s/%s",
+                CommandConstants.NORTHBOUND_COMMAND_RESPONSE_ENDPOINT, Constants.DEFAULT_TENANT, targetDeviceId, replyToId));
+        final boolean replyToContainedDeviceId = true;
+        final String replyToOptionsBitFlag = Command.encodeReplyToOptions(replyToContainedDeviceId);
+        final Command cmd = Command.from(message, Constants.DEFAULT_TENANT, gatewayId);
+        assertTrue(cmd.isValid());
+        assertThat(cmd.getName()).isEqualTo("doThis");
+        assertThat(cmd.getDeviceId()).isEqualTo(gatewayId);
+        assertThat(cmd.getOriginalDeviceId()).isEqualTo(targetDeviceId);
+        assertThat(cmd.getReplyToId()).isEqualTo(String.format("%s/%s", targetDeviceId, replyToId));
+        assertThat(cmd.getReplyToEndpoint()).isEqualTo(CommandConstants.NORTHBOUND_COMMAND_RESPONSE_ENDPOINT);
+        assertThat(cmd.getCorrelationId()).isEqualTo(correlationId);
+        assertFalse(cmd.isOneWay());
+        assertThat(cmd.getCommandMessage().getReplyTo()).isEqualTo(String.format("%s/%s/%s/%s%s",
+                CommandConstants.COMMAND_RESPONSE_ENDPOINT, Constants.DEFAULT_TENANT, "4711", replyToOptionsBitFlag, replyToId));
+    }
+
     /**
      * Verifies that a command can be created from a valid message having no device-id as part of the reply-to address.
      * Verifies that the reply-to address contains the device-id and the reply-id is prefixed with flag 1.
