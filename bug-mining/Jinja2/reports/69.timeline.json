[{"id":1165282350,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTE2NTI4MjM1MA==","url":"https://api.github.com/repos/pallets/jinja/issues/events/1165282350","actor":{"login":"nalzok","id":13443062,"node_id":"MDQ6VXNlcjEzNDQzMDYy","avatar_url":"https://avatars.githubusercontent.com/u/13443062?v=4","gravatar_id":"","url":"https://api.github.com/users/nalzok","html_url":"https://github.com/nalzok","followers_url":"https://api.github.com/users/nalzok/followers","following_url":"https://api.github.com/users/nalzok/following{/other_user}","gists_url":"https://api.github.com/users/nalzok/gists{/gist_id}","starred_url":"https://api.github.com/users/nalzok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nalzok/subscriptions","organizations_url":"https://api.github.com/users/nalzok/orgs","repos_url":"https://api.github.com/users/nalzok/repos","events_url":"https://api.github.com/users/nalzok/events{/privacy}","received_events_url":"https://api.github.com/users/nalzok/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2017-07-15T13:01:24Z","rename":{"from":"Cannot use plus sign for whitespace control - issue 1","to":"Cannot use the plus sign(+) for whitespace control: tag name expected"},"performed_via_github_app":null},{"id":1181733137,"node_id":"MDE5OkNvbW1lbnREZWxldGVkRXZlbnQxMTgxNzMzMTM3","url":"https://api.github.com/repos/pallets/jinja/issues/events/1181733137","actor":{"login":"pallets","id":16748505,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzQ4NTA1","avatar_url":"https://avatars.githubusercontent.com/u/16748505?v=4","gravatar_id":"","url":"https://api.github.com/users/pallets","html_url":"https://github.com/pallets","followers_url":"https://api.github.com/users/pallets/followers","following_url":"https://api.github.com/users/pallets/following{/other_user}","gists_url":"https://api.github.com/users/pallets/gists{/gist_id}","starred_url":"https://api.github.com/users/pallets/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pallets/subscriptions","organizations_url":"https://api.github.com/users/pallets/orgs","repos_url":"https://api.github.com/users/pallets/repos","events_url":"https://api.github.com/users/pallets/events{/privacy}","received_events_url":"https://api.github.com/users/pallets/received_events","type":"Organization","user_view_type":"public","site_admin":false},"event":"comment_deleted","commit_id":null,"commit_url":null,"created_at":"2017-07-27T13:15:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/360512388","html_url":"https://github.com/pallets/jinja/issues/748#issuecomment-360512388","issue_url":"https://api.github.com/repos/pallets/jinja/issues/748","id":360512388,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MDUxMjM4OA==","user":{"login":"lhoss","id":3091244,"node_id":"MDQ6VXNlcjMwOTEyNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3091244?v=4","gravatar_id":"","url":"https://api.github.com/users/lhoss","html_url":"https://github.com/lhoss","followers_url":"https://api.github.com/users/lhoss/followers","following_url":"https://api.github.com/users/lhoss/following{/other_user}","gists_url":"https://api.github.com/users/lhoss/gists{/gist_id}","starred_url":"https://api.github.com/users/lhoss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lhoss/subscriptions","organizations_url":"https://api.github.com/users/lhoss/orgs","repos_url":"https://api.github.com/users/lhoss/repos","events_url":"https://api.github.com/users/lhoss/events{/privacy}","received_events_url":"https://api.github.com/users/lhoss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-25T16:03:53Z","updated_at":"2018-01-25T16:04:03Z","body":"Why no motivation to fix this?\r\nRef: https://stackoverflow.com/questions/35775207/remove-unnecessary-whitespace-from-jinja-rendered-template#35777386\r\nIn our case, using a '-+' combo would have been useful in an ansible (jinja2-)template to avoid spaces before `{%...`  (to keep same indenting for intermixed lines of logic and contents ):\r\n```\r\n<root_element>\r\n  {%- if ... +%}\r\n  <property>\r\n\r\n  </property>\r\n  {%- if ... +%}\r\n strips before\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/360512388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lhoss","id":3091244,"node_id":"MDQ6VXNlcjMwOTEyNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3091244?v=4","gravatar_id":"","url":"https://api.github.com/users/lhoss","html_url":"https://github.com/lhoss","followers_url":"https://api.github.com/users/lhoss/followers","following_url":"https://api.github.com/users/lhoss/following{/other_user}","gists_url":"https://api.github.com/users/lhoss/gists{/gist_id}","starred_url":"https://api.github.com/users/lhoss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lhoss/subscriptions","organizations_url":"https://api.github.com/users/lhoss/orgs","repos_url":"https://api.github.com/users/lhoss/repos","events_url":"https://api.github.com/users/lhoss/events{/privacy}","received_events_url":"https://api.github.com/users/lhoss/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/360514348","html_url":"https://github.com/pallets/jinja/issues/748#issuecomment-360514348","issue_url":"https://api.github.com/repos/pallets/jinja/issues/748","id":360514348,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MDUxNDM0OA==","user":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-25T16:09:32Z","updated_at":"2018-01-25T16:09:32Z","body":"We would be happy to fix this. Unfortunately, we maintain this as volunteers with limited free time. We rely on the community to contribute analysis and patches to fill in when we can't. If you are affected by this and are interested in fixing it, please submit a PR.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/360514348/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/360514849","html_url":"https://github.com/pallets/jinja/issues/748#issuecomment-360514849","issue_url":"https://api.github.com/repos/pallets/jinja/issues/748","id":360514849,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MDUxNDg0OQ==","user":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-25T16:11:11Z","updated_at":"2018-01-25T16:11:11Z","body":"related to #749\r\nrelated to #750","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/360514849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/390430327","html_url":"https://github.com/pallets/jinja/issues/748#issuecomment-390430327","issue_url":"https://api.github.com/repos/pallets/jinja/issues/748","id":390430327,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQzMDMyNw==","user":{"login":"ricky-undeadcoders","id":21371729,"node_id":"MDQ6VXNlcjIxMzcxNzI5","avatar_url":"https://avatars.githubusercontent.com/u/21371729?v=4","gravatar_id":"","url":"https://api.github.com/users/ricky-undeadcoders","html_url":"https://github.com/ricky-undeadcoders","followers_url":"https://api.github.com/users/ricky-undeadcoders/followers","following_url":"https://api.github.com/users/ricky-undeadcoders/following{/other_user}","gists_url":"https://api.github.com/users/ricky-undeadcoders/gists{/gist_id}","starred_url":"https://api.github.com/users/ricky-undeadcoders/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricky-undeadcoders/subscriptions","organizations_url":"https://api.github.com/users/ricky-undeadcoders/orgs","repos_url":"https://api.github.com/users/ricky-undeadcoders/repos","events_url":"https://api.github.com/users/ricky-undeadcoders/events{/privacy}","received_events_url":"https://api.github.com/users/ricky-undeadcoders/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-19T20:24:03Z","updated_at":"2018-05-19T20:46:58Z","body":"The issue here just appears to be that when lstrip_blocks = False, the syntax \"{%+ statement %}\" fails with error message \"jinja2.exceptions.TemplateSyntaxError: tag name expected\".\r\n\r\nThis is more or less expected behavior because there's nothing to disable if lstrip_blocks is already disabled, but it could fail a little more elegantly. \r\n\r\nExample:\r\n\r\nThis works:\r\n----------------------------------------------------------------------------------------------\r\n```\r\nfrom jinja2 import Environment\r\nenv = Environment(lstrip_blocks=True, trim_blocks=False)\r\nstr7481 = '''\r\n    <!-- 1 -->\r\n    {%+ if True %}<!-- 2 -->\r\n    foo<!-- 3 -->\r\n    {% endif %}<!-- 4 -->\r\n    <!-- 5 -->'''\r\nstr7482 = '''\r\n    <!-- 1 -->\r\n    {% if True %}<!-- 2 -->\r\n    foo<!-- 3 -->\r\n    {%+ endif %}<!-- 4 -->\r\n    <!-- 5 -->'''\r\nprint(env.from_string(str7481).render())\r\nprint(env.from_string(str7482).render())\r\n```\r\n\r\n\r\n\r\nThis does not:\r\n----------------------------------------------------------------------------------------------\r\n```\r\nfrom jinja2 import Environment\r\nenv = Environment(lstrip_blocks=False, trim_blocks=False)\r\nstr7481 = '''\r\n    <!-- 1 -->\r\n    {%+ if True %}<!-- 2 -->\r\n    foo<!-- 3 -->\r\n    {% endif %}<!-- 4 -->\r\n    <!-- 5 -->'''\r\nstr7482 = '''\r\n    <!-- 1 -->\r\n    {% if True %}<!-- 2 -->\r\n    foo<!-- 3 -->\r\n    {%+ endif %}<!-- 4 -->\r\n    <!-- 5 -->'''\r\nprint(env.from_string(str7481).render())\r\nprint(env.from_string(str7482).render())\r\n```\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/390430327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ricky-undeadcoders","id":21371729,"node_id":"MDQ6VXNlcjIxMzcxNzI5","avatar_url":"https://avatars.githubusercontent.com/u/21371729?v=4","gravatar_id":"","url":"https://api.github.com/users/ricky-undeadcoders","html_url":"https://github.com/ricky-undeadcoders","followers_url":"https://api.github.com/users/ricky-undeadcoders/followers","following_url":"https://api.github.com/users/ricky-undeadcoders/following{/other_user}","gists_url":"https://api.github.com/users/ricky-undeadcoders/gists{/gist_id}","starred_url":"https://api.github.com/users/ricky-undeadcoders/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricky-undeadcoders/subscriptions","organizations_url":"https://api.github.com/users/ricky-undeadcoders/orgs","repos_url":"https://api.github.com/users/ricky-undeadcoders/repos","events_url":"https://api.github.com/users/ricky-undeadcoders/events{/privacy}","received_events_url":"https://api.github.com/users/ricky-undeadcoders/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/497882979","html_url":"https://github.com/pallets/jinja/issues/748#issuecomment-497882979","issue_url":"https://api.github.com/repos/pallets/jinja/issues/748","id":497882979,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5Nzg4Mjk3OQ==","user":{"login":"markroth8","id":3895165,"node_id":"MDQ6VXNlcjM4OTUxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/3895165?v=4","gravatar_id":"","url":"https://api.github.com/users/markroth8","html_url":"https://github.com/markroth8","followers_url":"https://api.github.com/users/markroth8/followers","following_url":"https://api.github.com/users/markroth8/following{/other_user}","gists_url":"https://api.github.com/users/markroth8/gists{/gist_id}","starred_url":"https://api.github.com/users/markroth8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markroth8/subscriptions","organizations_url":"https://api.github.com/users/markroth8/orgs","repos_url":"https://api.github.com/users/markroth8/repos","events_url":"https://api.github.com/users/markroth8/events{/privacy}","received_events_url":"https://api.github.com/users/markroth8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-31T22:50:16Z","updated_at":"2019-05-31T22:50:16Z","body":"I discussed this issue with @davidism and he suggested that the underlying syntax of templates should not change when `lstrip_blocks = False`. In other words, `'{%+'` should still be valid syntax in this case, but the semantics should just be to ignore the `'+'`, since it is redundant. I'm submitting a PR that tests and implements this potential behavior.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/497882979/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"markroth8","id":3895165,"node_id":"MDQ6VXNlcjM4OTUxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/3895165?v=4","gravatar_id":"","url":"https://api.github.com/users/markroth8","html_url":"https://github.com/markroth8","followers_url":"https://api.github.com/users/markroth8/followers","following_url":"https://api.github.com/users/markroth8/following{/other_user}","gists_url":"https://api.github.com/users/markroth8/gists{/gist_id}","starred_url":"https://api.github.com/users/markroth8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markroth8/subscriptions","organizations_url":"https://api.github.com/users/markroth8/orgs","repos_url":"https://api.github.com/users/markroth8/repos","events_url":"https://api.github.com/users/markroth8/events{/privacy}","received_events_url":"https://api.github.com/users/markroth8/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2382312606,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM4MjMxMjYwNg==","url":"https://api.github.com/repos/pallets/jinja/issues/events/2382312606","actor":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-31T22:50:16Z","performed_via_github_app":null},{"id":2382312607,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzODIzMTI2MDc=","url":"https://api.github.com/repos/pallets/jinja/issues/events/2382312607","actor":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-31T22:50:16Z","performed_via_github_app":null},{"id":2382319152,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIzODIzMTkxNTI=","url":"https://api.github.com/repos/pallets/jinja/issues/events/2382319152","actor":{"login":"markroth8","id":3895165,"node_id":"MDQ6VXNlcjM4OTUxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/3895165?v=4","gravatar_id":"","url":"https://api.github.com/users/markroth8","html_url":"https://github.com/markroth8","followers_url":"https://api.github.com/users/markroth8/followers","following_url":"https://api.github.com/users/markroth8/following{/other_user}","gists_url":"https://api.github.com/users/markroth8/gists{/gist_id}","starred_url":"https://api.github.com/users/markroth8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markroth8/subscriptions","organizations_url":"https://api.github.com/users/markroth8/orgs","repos_url":"https://api.github.com/users/markroth8/repos","events_url":"https://api.github.com/users/markroth8/events{/privacy}","received_events_url":"https://api.github.com/users/markroth8/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8663396fcae51fdb38cc6f94c03215a6851cdeeb","commit_url":"https://api.github.com/repos/markroth8/jinja/commits/8663396fcae51fdb38cc6f94c03215a6851cdeeb","created_at":"2019-05-31T22:56:06Z","performed_via_github_app":null},{"actor":{"login":"markroth8","id":3895165,"node_id":"MDQ6VXNlcjM4OTUxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/3895165?v=4","gravatar_id":"","url":"https://api.github.com/users/markroth8","html_url":"https://github.com/markroth8","followers_url":"https://api.github.com/users/markroth8/followers","following_url":"https://api.github.com/users/markroth8/following{/other_user}","gists_url":"https://api.github.com/users/markroth8/gists{/gist_id}","starred_url":"https://api.github.com/users/markroth8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markroth8/subscriptions","organizations_url":"https://api.github.com/users/markroth8/orgs","repos_url":"https://api.github.com/users/markroth8/repos","events_url":"https://api.github.com/users/markroth8/events{/privacy}","received_events_url":"https://api.github.com/users/markroth8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-31T22:59:23Z","updated_at":"2019-05-31T22:59:23Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pallets/jinja/issues/1014","repository_url":"https://api.github.com/repos/pallets/jinja","labels_url":"https://api.github.com/repos/pallets/jinja/issues/1014/labels{/name}","comments_url":"https://api.github.com/repos/pallets/jinja/issues/1014/comments","events_url":"https://api.github.com/repos/pallets/jinja/issues/1014/events","html_url":"https://github.com/pallets/jinja/pull/1014","id":451009289,"node_id":"MDExOlB1bGxSZXF1ZXN0Mjg0MjE2MDI3","number":1014,"title":"Allow '{%+' to be valid syntax (but NOP) when lstrip_blocks == False. Fixes #748","user":{"login":"markroth8","id":3895165,"node_id":"MDQ6VXNlcjM4OTUxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/3895165?v=4","gravatar_id":"","url":"https://api.github.com/users/markroth8","html_url":"https://github.com/markroth8","followers_url":"https://api.github.com/users/markroth8/followers","following_url":"https://api.github.com/users/markroth8/following{/other_user}","gists_url":"https://api.github.com/users/markroth8/gists{/gist_id}","starred_url":"https://api.github.com/users/markroth8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markroth8/subscriptions","organizations_url":"https://api.github.com/users/markroth8/orgs","repos_url":"https://api.github.com/users/markroth8/repos","events_url":"https://api.github.com/users/markroth8/events{/privacy}","received_events_url":"https://api.github.com/users/markroth8/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pallets/jinja/milestones/2","html_url":"https://github.com/pallets/jinja/milestone/2","labels_url":"https://api.github.com/repos/pallets/jinja/milestones/2/labels","id":3092936,"node_id":"MDk6TWlsZXN0b25lMzA5MjkzNg==","number":2,"title":"2.11.0","description":"","creator":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":81,"state":"closed","created_at":"2018-02-06T14:08:54Z","updated_at":"2020-01-29T06:36:03Z","due_on":null,"closed_at":"2020-01-29T06:36:03Z"},"comments":0,"created_at":"2019-05-31T22:59:23Z","updated_at":"2020-11-13T20:23:50Z","closed_at":"2019-07-20T21:23:54Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","draft":false,"repository":{"id":994551,"node_id":"MDEwOlJlcG9zaXRvcnk5OTQ1NTE=","name":"jinja","full_name":"pallets/jinja","private":false,"owner":{"login":"pallets","id":16748505,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzQ4NTA1","avatar_url":"https://avatars.githubusercontent.com/u/16748505?v=4","gravatar_id":"","url":"https://api.github.com/users/pallets","html_url":"https://github.com/pallets","followers_url":"https://api.github.com/users/pallets/followers","following_url":"https://api.github.com/users/pallets/following{/other_user}","gists_url":"https://api.github.com/users/pallets/gists{/gist_id}","starred_url":"https://api.github.com/users/pallets/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pallets/subscriptions","organizations_url":"https://api.github.com/users/pallets/orgs","repos_url":"https://api.github.com/users/pallets/repos","events_url":"https://api.github.com/users/pallets/events{/privacy}","received_events_url":"https://api.github.com/users/pallets/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pallets/jinja","description":"A very fast and expressive template engine.","fork":false,"url":"https://api.github.com/repos/pallets/jinja","forks_url":"https://api.github.com/repos/pallets/jinja/forks","keys_url":"https://api.github.com/repos/pallets/jinja/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pallets/jinja/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pallets/jinja/teams","hooks_url":"https://api.github.com/repos/pallets/jinja/hooks","issue_events_url":"https://api.github.com/repos/pallets/jinja/issues/events{/number}","events_url":"https://api.github.com/repos/pallets/jinja/events","assignees_url":"https://api.github.com/repos/pallets/jinja/assignees{/user}","branches_url":"https://api.github.com/repos/pallets/jinja/branches{/branch}","tags_url":"https://api.github.com/repos/pallets/jinja/tags","blobs_url":"https://api.github.com/repos/pallets/jinja/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pallets/jinja/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pallets/jinja/git/refs{/sha}","trees_url":"https://api.github.com/repos/pallets/jinja/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pallets/jinja/statuses/{sha}","languages_url":"https://api.github.com/repos/pallets/jinja/languages","stargazers_url":"https://api.github.com/repos/pallets/jinja/stargazers","contributors_url":"https://api.github.com/repos/pallets/jinja/contributors","subscribers_url":"https://api.github.com/repos/pallets/jinja/subscribers","subscription_url":"https://api.github.com/repos/pallets/jinja/subscription","commits_url":"https://api.github.com/repos/pallets/jinja/commits{/sha}","git_commits_url":"https://api.github.com/repos/pallets/jinja/git/commits{/sha}","comments_url":"https://api.github.com/repos/pallets/jinja/comments{/number}","issue_comment_url":"https://api.github.com/repos/pallets/jinja/issues/comments{/number}","contents_url":"https://api.github.com/repos/pallets/jinja/contents/{+path}","compare_url":"https://api.github.com/repos/pallets/jinja/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pallets/jinja/merges","archive_url":"https://api.github.com/repos/pallets/jinja/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pallets/jinja/downloads","issues_url":"https://api.github.com/repos/pallets/jinja/issues{/number}","pulls_url":"https://api.github.com/repos/pallets/jinja/pulls{/number}","milestones_url":"https://api.github.com/repos/pallets/jinja/milestones{/number}","notifications_url":"https://api.github.com/repos/pallets/jinja/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pallets/jinja/labels{/name}","releases_url":"https://api.github.com/repos/pallets/jinja/releases{/id}","deployments_url":"https://api.github.com/repos/pallets/jinja/deployments","created_at":"2010-10-17T13:41:17Z","updated_at":"2025-11-10T01:08:28Z","pushed_at":"2025-06-14T20:35:04Z","git_url":"git://github.com/pallets/jinja.git","ssh_url":"git@github.com:pallets/jinja.git","clone_url":"https://github.com/pallets/jinja.git","svn_url":"https://github.com/pallets/jinja","homepage":"https://jinja.palletsprojects.com","size":6934,"stargazers_count":11255,"watchers_count":11255,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1681,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":93,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["jinja","jinja2","pallets","python","template-engine","templates"],"visibility":"public","forks":1681,"open_issues":93,"watchers":11255,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/pallets/jinja/pulls/1014","html_url":"https://github.com/pallets/jinja/pull/1014","diff_url":"https://github.com/pallets/jinja/pull/1014.diff","patch_url":"https://github.com/pallets/jinja/pull/1014.patch","merged_at":"2019-07-20T21:23:54Z"},"body":"Instead of failing with error message \"jinja2.exceptions.TemplateSyntaxError: tag name expected\", allow the syntax `'{%+'` when `lstrip_blocks == False` with NOP behavior. Fixes #748.","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/1014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pallets/jinja/issues/1014/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":2497745436,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI0OTc3NDU0MzY=","url":"https://api.github.com/repos/pallets/jinja/issues/events/2497745436","actor":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1e71e3151238a7ac8ad2f0cfcda1f13c90613781","commit_url":"https://api.github.com/repos/markroth8/jinja/commits/1e71e3151238a7ac8ad2f0cfcda1f13c90613781","created_at":"2019-07-20T21:19:35Z","performed_via_github_app":null},{"id":2497746843,"node_id":"MDExOkNsb3NlZEV2ZW50MjQ5Nzc0Njg0Mw==","url":"https://api.github.com/repos/pallets/jinja/issues/events/2497746843","actor":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-07-20T21:23:54Z","state_reason":null,"performed_via_github_app":null},{"id":2497746881,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI0OTc3NDY4ODE=","url":"https://api.github.com/repos/pallets/jinja/issues/events/2497746881","actor":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f76c3edf2b2bf9021877893e065c91c2504f756d","commit_url":"https://api.github.com/repos/pallets/jinja/commits/f76c3edf2b2bf9021877893e065c91c2504f756d","created_at":"2019-07-20T21:24:02Z","performed_via_github_app":null},{"actor":{"login":"andreyv","id":397308,"node_id":"MDQ6VXNlcjM5NzMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/397308?v=4","gravatar_id":"","url":"https://api.github.com/users/andreyv","html_url":"https://github.com/andreyv","followers_url":"https://api.github.com/users/andreyv/followers","following_url":"https://api.github.com/users/andreyv/following{/other_user}","gists_url":"https://api.github.com/users/andreyv/gists{/gist_id}","starred_url":"https://api.github.com/users/andreyv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreyv/subscriptions","organizations_url":"https://api.github.com/users/andreyv/orgs","repos_url":"https://api.github.com/users/andreyv/repos","events_url":"https://api.github.com/users/andreyv/events{/privacy}","received_events_url":"https://api.github.com/users/andreyv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T08:30:55Z","updated_at":"2019-08-20T08:30:55Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/cms-dev/cms/issues/1130","repository_url":"https://api.github.com/repos/cms-dev/cms","labels_url":"https://api.github.com/repos/cms-dev/cms/issues/1130/labels{/name}","comments_url":"https://api.github.com/repos/cms-dev/cms/issues/1130/comments","events_url":"https://api.github.com/repos/cms-dev/cms/issues/1130/events","html_url":"https://github.com/cms-dev/cms/pull/1130","id":482718960,"node_id":"MDExOlB1bGxSZXF1ZXN0MzA4OTM0NTUx","number":1130,"title":"Set up Jinja whitespace control in Babel mapping","user":{"login":"andreyv","id":397308,"node_id":"MDQ6VXNlcjM5NzMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/397308?v=4","gravatar_id":"","url":"https://api.github.com/users/andreyv","html_url":"https://github.com/andreyv","followers_url":"https://api.github.com/users/andreyv/followers","following_url":"https://api.github.com/users/andreyv/following{/other_user}","gists_url":"https://api.github.com/users/andreyv/gists{/gist_id}","starred_url":"https://api.github.com/users/andreyv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreyv/subscriptions","organizations_url":"https://api.github.com/users/andreyv/orgs","repos_url":"https://api.github.com/users/andreyv/repos","events_url":"https://api.github.com/users/andreyv/events{/privacy}","received_events_url":"https://api.github.com/users/andreyv/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-08-20T08:30:54Z","updated_at":"2021-02-08T18:01:24Z","closed_at":"2021-02-08T18:01:20Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":2504741,"node_id":"MDEwOlJlcG9zaXRvcnkyNTA0NzQx","name":"cms","full_name":"cms-dev/cms","private":false,"owner":{"login":"cms-dev","id":1671612,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzE2MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1671612?v=4","gravatar_id":"","url":"https://api.github.com/users/cms-dev","html_url":"https://github.com/cms-dev","followers_url":"https://api.github.com/users/cms-dev/followers","following_url":"https://api.github.com/users/cms-dev/following{/other_user}","gists_url":"https://api.github.com/users/cms-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/cms-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cms-dev/subscriptions","organizations_url":"https://api.github.com/users/cms-dev/orgs","repos_url":"https://api.github.com/users/cms-dev/repos","events_url":"https://api.github.com/users/cms-dev/events{/privacy}","received_events_url":"https://api.github.com/users/cms-dev/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/cms-dev/cms","description":"Contest Management System","fork":false,"url":"https://api.github.com/repos/cms-dev/cms","forks_url":"https://api.github.com/repos/cms-dev/cms/forks","keys_url":"https://api.github.com/repos/cms-dev/cms/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cms-dev/cms/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cms-dev/cms/teams","hooks_url":"https://api.github.com/repos/cms-dev/cms/hooks","issue_events_url":"https://api.github.com/repos/cms-dev/cms/issues/events{/number}","events_url":"https://api.github.com/repos/cms-dev/cms/events","assignees_url":"https://api.github.com/repos/cms-dev/cms/assignees{/user}","branches_url":"https://api.github.com/repos/cms-dev/cms/branches{/branch}","tags_url":"https://api.github.com/repos/cms-dev/cms/tags","blobs_url":"https://api.github.com/repos/cms-dev/cms/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cms-dev/cms/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cms-dev/cms/git/refs{/sha}","trees_url":"https://api.github.com/repos/cms-dev/cms/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cms-dev/cms/statuses/{sha}","languages_url":"https://api.github.com/repos/cms-dev/cms/languages","stargazers_url":"https://api.github.com/repos/cms-dev/cms/stargazers","contributors_url":"https://api.github.com/repos/cms-dev/cms/contributors","subscribers_url":"https://api.github.com/repos/cms-dev/cms/subscribers","subscription_url":"https://api.github.com/repos/cms-dev/cms/subscription","commits_url":"https://api.github.com/repos/cms-dev/cms/commits{/sha}","git_commits_url":"https://api.github.com/repos/cms-dev/cms/git/commits{/sha}","comments_url":"https://api.github.com/repos/cms-dev/cms/comments{/number}","issue_comment_url":"https://api.github.com/repos/cms-dev/cms/issues/comments{/number}","contents_url":"https://api.github.com/repos/cms-dev/cms/contents/{+path}","compare_url":"https://api.github.com/repos/cms-dev/cms/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cms-dev/cms/merges","archive_url":"https://api.github.com/repos/cms-dev/cms/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cms-dev/cms/downloads","issues_url":"https://api.github.com/repos/cms-dev/cms/issues{/number}","pulls_url":"https://api.github.com/repos/cms-dev/cms/pulls{/number}","milestones_url":"https://api.github.com/repos/cms-dev/cms/milestones{/number}","notifications_url":"https://api.github.com/repos/cms-dev/cms/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cms-dev/cms/labels{/name}","releases_url":"https://api.github.com/repos/cms-dev/cms/releases{/id}","deployments_url":"https://api.github.com/repos/cms-dev/cms/deployments","created_at":"2011-10-03T13:37:02Z","updated_at":"2025-11-09T16:58:31Z","pushed_at":"2025-11-09T16:58:20Z","git_url":"git://github.com/cms-dev/cms.git","ssh_url":"git@github.com:cms-dev/cms.git","clone_url":"https://github.com/cms-dev/cms.git","svn_url":"https://github.com/cms-dev/cms","homepage":"http://cms-dev.github.io/","size":21016,"stargazers_count":997,"watchers_count":997,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":397,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":180,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["competitive-programming","competitive-programming-contests","grading-system","programming-competitions","programming-contests"],"visibility":"public","forks":397,"open_issues":180,"watchers":997,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/cms-dev/cms/pulls/1130","html_url":"https://github.com/cms-dev/cms/pull/1130","diff_url":"https://github.com/cms-dev/cms/pull/1130.diff","patch_url":"https://github.com/cms-dev/cms/pull/1130.patch","merged_at":"2021-02-08T18:01:20Z"},"body":"The `lstrip_blocks` environment parameter affects Jinja parsing mode, see pallets/jinja#748. Hence we need to use the same whitespace control parameters as in the actual CMS code.\r\n\r\nFixes #1096.\r\n\r\nI also changed the mapping file to use the conventional INI file syntax for better source highlighting.\n\n<!-- Reviewable:start -->\n---\nThis change isâ€‚[<img src=\"https://reviewable.io/review_button.svg\" height=\"34\" align=\"absmiddle\" alt=\"Reviewable\"/>](https://reviewable.io/reviews/cms-dev/cms/1130)\n<!-- Reviewable:end -->\n","reactions":{"url":"https://api.github.com/repos/cms-dev/cms/issues/1130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/cms-dev/cms/issues/1130/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-05T19:21:47Z","updated_at":"2019-10-05T19:21:47Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pallets/jinja/issues/858","repository_url":"https://api.github.com/repos/pallets/jinja","labels_url":"https://api.github.com/repos/pallets/jinja/issues/858/labels{/name}","comments_url":"https://api.github.com/repos/pallets/jinja/issues/858/comments","events_url":"https://api.github.com/repos/pallets/jinja/issues/858/events","html_url":"https://github.com/pallets/jinja/pull/858","id":326804346,"node_id":"MDExOlB1bGxSZXF1ZXN0MTkwNzgwMzQy","number":858,"title":"Fix lexer being extremely slow on large amounts of whitespace. Fixes #857","user":{"login":"petee-d","id":7727916,"node_id":"MDQ6VXNlcjc3Mjc5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7727916?v=4","gravatar_id":"","url":"https://api.github.com/users/petee-d","html_url":"https://github.com/petee-d","followers_url":"https://api.github.com/users/petee-d/followers","following_url":"https://api.github.com/users/petee-d/following{/other_user}","gists_url":"https://api.github.com/users/petee-d/gists{/gist_id}","starred_url":"https://api.github.com/users/petee-d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/petee-d/subscriptions","organizations_url":"https://api.github.com/users/petee-d/orgs","repos_url":"https://api.github.com/users/petee-d/repos","events_url":"https://api.github.com/users/petee-d/events{/privacy}","received_events_url":"https://api.github.com/users/petee-d/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pallets/jinja/milestones/2","html_url":"https://github.com/pallets/jinja/milestone/2","labels_url":"https://api.github.com/repos/pallets/jinja/milestones/2/labels","id":3092936,"node_id":"MDk6TWlsZXN0b25lMzA5MjkzNg==","number":2,"title":"2.11.0","description":"","creator":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":81,"state":"closed","created_at":"2018-02-06T14:08:54Z","updated_at":"2020-01-29T06:36:03Z","due_on":null,"closed_at":"2020-01-29T06:36:03Z"},"comments":6,"created_at":"2018-05-27T10:21:10Z","updated_at":"2020-11-13T20:15:43Z","closed_at":"2019-10-07T06:41:04Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","draft":false,"repository":{"id":994551,"node_id":"MDEwOlJlcG9zaXRvcnk5OTQ1NTE=","name":"jinja","full_name":"pallets/jinja","private":false,"owner":{"login":"pallets","id":16748505,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzQ4NTA1","avatar_url":"https://avatars.githubusercontent.com/u/16748505?v=4","gravatar_id":"","url":"https://api.github.com/users/pallets","html_url":"https://github.com/pallets","followers_url":"https://api.github.com/users/pallets/followers","following_url":"https://api.github.com/users/pallets/following{/other_user}","gists_url":"https://api.github.com/users/pallets/gists{/gist_id}","starred_url":"https://api.github.com/users/pallets/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pallets/subscriptions","organizations_url":"https://api.github.com/users/pallets/orgs","repos_url":"https://api.github.com/users/pallets/repos","events_url":"https://api.github.com/users/pallets/events{/privacy}","received_events_url":"https://api.github.com/users/pallets/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pallets/jinja","description":"A very fast and expressive template engine.","fork":false,"url":"https://api.github.com/repos/pallets/jinja","forks_url":"https://api.github.com/repos/pallets/jinja/forks","keys_url":"https://api.github.com/repos/pallets/jinja/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pallets/jinja/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pallets/jinja/teams","hooks_url":"https://api.github.com/repos/pallets/jinja/hooks","issue_events_url":"https://api.github.com/repos/pallets/jinja/issues/events{/number}","events_url":"https://api.github.com/repos/pallets/jinja/events","assignees_url":"https://api.github.com/repos/pallets/jinja/assignees{/user}","branches_url":"https://api.github.com/repos/pallets/jinja/branches{/branch}","tags_url":"https://api.github.com/repos/pallets/jinja/tags","blobs_url":"https://api.github.com/repos/pallets/jinja/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pallets/jinja/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pallets/jinja/git/refs{/sha}","trees_url":"https://api.github.com/repos/pallets/jinja/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pallets/jinja/statuses/{sha}","languages_url":"https://api.github.com/repos/pallets/jinja/languages","stargazers_url":"https://api.github.com/repos/pallets/jinja/stargazers","contributors_url":"https://api.github.com/repos/pallets/jinja/contributors","subscribers_url":"https://api.github.com/repos/pallets/jinja/subscribers","subscription_url":"https://api.github.com/repos/pallets/jinja/subscription","commits_url":"https://api.github.com/repos/pallets/jinja/commits{/sha}","git_commits_url":"https://api.github.com/repos/pallets/jinja/git/commits{/sha}","comments_url":"https://api.github.com/repos/pallets/jinja/comments{/number}","issue_comment_url":"https://api.github.com/repos/pallets/jinja/issues/comments{/number}","contents_url":"https://api.github.com/repos/pallets/jinja/contents/{+path}","compare_url":"https://api.github.com/repos/pallets/jinja/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pallets/jinja/merges","archive_url":"https://api.github.com/repos/pallets/jinja/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pallets/jinja/downloads","issues_url":"https://api.github.com/repos/pallets/jinja/issues{/number}","pulls_url":"https://api.github.com/repos/pallets/jinja/pulls{/number}","milestones_url":"https://api.github.com/repos/pallets/jinja/milestones{/number}","notifications_url":"https://api.github.com/repos/pallets/jinja/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pallets/jinja/labels{/name}","releases_url":"https://api.github.com/repos/pallets/jinja/releases{/id}","deployments_url":"https://api.github.com/repos/pallets/jinja/deployments","created_at":"2010-10-17T13:41:17Z","updated_at":"2025-11-10T01:08:28Z","pushed_at":"2025-06-14T20:35:04Z","git_url":"git://github.com/pallets/jinja.git","ssh_url":"git@github.com:pallets/jinja.git","clone_url":"https://github.com/pallets/jinja.git","svn_url":"https://github.com/pallets/jinja","homepage":"https://jinja.palletsprojects.com","size":6934,"stargazers_count":11255,"watchers_count":11255,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1681,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":93,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["jinja","jinja2","pallets","python","template-engine","templates"],"visibility":"public","forks":1681,"open_issues":93,"watchers":11255,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/pallets/jinja/pulls/858","html_url":"https://github.com/pallets/jinja/pull/858","diff_url":"https://github.com/pallets/jinja/pull/858.diff","patch_url":"https://github.com/pallets/jinja/pull/858.patch","merged_at":"2019-10-07T06:41:04Z"},"body":"Fix for #857, where parsing whitespace in templates usually has quadratic time complexity.\r\n\r\nIt addresses two pathological regular expressions used in Jinja lexer, \"root\" and TOKEN_RAW_BEGIN (not illustrated in examples but suffers from the same issue). In the **extremely simplified** version of the root lexer regex shown below, notice whitespace may be consumed either by `(.*?)` or by `\\s*`, with the latter having priority due to being greedy, but only in case the block of whitespace is followed by variable (or block/comment) opening tag with the \"-\" modifier (that forces left-stripping whitespace). This is a pathological case for the built-in Python `re` module and will have quadratic complexity due to backtracking done after consuming every single whitespace character (don't quote me on that though).\r\n```\r\nr'(.*?)(?:(?P<variable_begin>\\s*{{-|{{))'\r\n```\r\nJinja lexer does that to implement the whitespace stripping feature on the left side of tags, but this approach is extremely inefficient with built in Python `re` module (note the `regex` library doesn't suffer from this, but it is slower in general).\r\n\r\nMy approach uses `.rstrip` or `.rfind` + another regular expression to remove the whitespace inside the tokenizer.\r\n\r\n## Potential improvements\r\n* I found the code to be quite hacky, especially the inspection of type of `tokens` in method `tokeniter` (shouldn't it be `tokenizer` btw?), when I needed to add a flag for a rule to attempt l-stripping, I saw no better way to continue in that pattern if I wanted to avoid larger refactoring. Any ideas?\r\n* Is this project still sticking to 80 character maximum per line, as lexer.py apparently does? It makes the code very ugly and I see some modules no longer adhere to that limit. Is 120 character line maximum acceptable?\r\n* It feels like the code somewhat avoids private helper methods. I especially feel like my new code block for l-stripping should be in such a separate method and I will be happy to move it to one unless you are actually trying to avoid the overhead of calling methods (which in my opinion should be negligible here).\r\n\r\n## Testing and performance measurement\r\nI tested the fix on almost 100k of different Jinja2 templates, created by users with different technical skills and used for various purposes (from templates without any jinja tags to huge personalized email templates). Parsing all templates produced the exact same parsing tree both before and after my fix. The Jinja2 test suite of course passes as well.\r\n\r\nThe table below shows the parsing times of the templates I tested the fix with, each parsing attempt before or after was added to a bucket based on rounded log2 of the parsing time. You can see the 4 extremely slow cases being fixed and a general improvement of parsing time.\r\n```\r\nSeconds | Before | After\r\n0.00006 |    873 |  1775\r\n0.00012 |  19690 | 21348\r\n0.00024 |   8805 |  9151\r\n0.00049 |   5294 |  5331\r\n0.00098 |   3603 |  2146\r\n0.00195 |   2002 |  4824\r\n0.00391 |   3109 |  8404\r\n0.00781 |   7778 |  7759\r\n0.01563 |   8455 |  3419\r\n0.03125 |   4889 |  2234\r\n0.06250 |   1711 |    63\r\n0.12500 |    177 |     3\r\n0.25000 |     67 |     0\r\n0.50000 |      0 |     0\r\n1.00000 |      0 |     0\r\n2.00000 |      0 |     0\r\n4.00000 |      2 |     0\r\n8.00000 |      2 |     0\r\n```\r\n\r\nI didn't add any test case. I could add a test that parses something like (`' ' * 40000`) and asserts the time it took didn't cross a reasonably large boundary, but I generally dislike such tests as they may be fragile to CI environment issues. Let me know what you think.","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/858/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pallets/jinja/issues/858/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":3995266957,"node_id":"MDExOkxvY2tlZEV2ZW50Mzk5NTI2Njk1Nw==","url":"https://api.github.com/repos/pallets/jinja/issues/events/3995266957","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2020-11-13T20:34:14Z","lock_reason":"resolved","performed_via_github_app":null}]