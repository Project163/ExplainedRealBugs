[{"id":50584,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwNTg0","url":"https://api.github.com/repos/pallets/jinja/issues/events/50584","actor":{"login":"gagabla","id":434201,"node_id":"MDQ6VXNlcjQzNDIwMQ==","avatar_url":"https://avatars.githubusercontent.com/u/434201?v=4","gravatar_id":"","url":"https://api.github.com/users/gagabla","html_url":"https://github.com/gagabla","followers_url":"https://api.github.com/users/gagabla/followers","following_url":"https://api.github.com/users/gagabla/following{/other_user}","gists_url":"https://api.github.com/users/gagabla/gists{/gist_id}","starred_url":"https://api.github.com/users/gagabla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gagabla/subscriptions","organizations_url":"https://api.github.com/users/gagabla/orgs","repos_url":"https://api.github.com/users/gagabla/repos","events_url":"https://api.github.com/users/gagabla/events{/privacy}","received_events_url":"https://api.github.com/users/gagabla/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2011-03-24T12:55:17Z","performed_via_github_app":null},{"id":294451,"node_id":"MDExOkNsb3NlZEV2ZW50Mjk0NDUx","url":"https://api.github.com/repos/pallets/jinja/issues/events/294451","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"75ffeb6b022b6bcccfd75ea2b20418db6623cde9","commit_url":"https://api.github.com/repos/pallets/jinja/commits/75ffeb6b022b6bcccfd75ea2b20418db6623cde9","created_at":"2011-04-18T14:27:20Z","state_reason":null,"performed_via_github_app":null},{"id":294452,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI5NDQ1Mg==","url":"https://api.github.com/repos/pallets/jinja/issues/events/294452","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2011-04-18T14:27:20Z","performed_via_github_app":null},{"actor":null,"created_at":"2012-04-13T21:42:11Z","updated_at":"2012-04-13T21:42:11Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pallets/jinja/issues/117","repository_url":"https://api.github.com/repos/pallets/jinja","labels_url":"https://api.github.com/repos/pallets/jinja/issues/117/labels{/name}","comments_url":"https://api.github.com/repos/pallets/jinja/issues/117/comments","events_url":"https://api.github.com/repos/pallets/jinja/issues/117/events","html_url":"https://github.com/pallets/jinja/issues/117","id":4112886,"node_id":"MDU6SXNzdWU0MTEyODg2","number":117,"title":"make_traceback can cause segfaults in certain environments","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2012-04-13T21:42:10Z","updated_at":"2021-06-02T00:24:40Z","closed_at":"2012-04-13T22:54:53Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":994551,"node_id":"MDEwOlJlcG9zaXRvcnk5OTQ1NTE=","name":"jinja","full_name":"pallets/jinja","private":false,"owner":{"login":"pallets","id":16748505,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzQ4NTA1","avatar_url":"https://avatars.githubusercontent.com/u/16748505?v=4","gravatar_id":"","url":"https://api.github.com/users/pallets","html_url":"https://github.com/pallets","followers_url":"https://api.github.com/users/pallets/followers","following_url":"https://api.github.com/users/pallets/following{/other_user}","gists_url":"https://api.github.com/users/pallets/gists{/gist_id}","starred_url":"https://api.github.com/users/pallets/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pallets/subscriptions","organizations_url":"https://api.github.com/users/pallets/orgs","repos_url":"https://api.github.com/users/pallets/repos","events_url":"https://api.github.com/users/pallets/events{/privacy}","received_events_url":"https://api.github.com/users/pallets/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pallets/jinja","description":"A very fast and expressive template engine.","fork":false,"url":"https://api.github.com/repos/pallets/jinja","forks_url":"https://api.github.com/repos/pallets/jinja/forks","keys_url":"https://api.github.com/repos/pallets/jinja/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pallets/jinja/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pallets/jinja/teams","hooks_url":"https://api.github.com/repos/pallets/jinja/hooks","issue_events_url":"https://api.github.com/repos/pallets/jinja/issues/events{/number}","events_url":"https://api.github.com/repos/pallets/jinja/events","assignees_url":"https://api.github.com/repos/pallets/jinja/assignees{/user}","branches_url":"https://api.github.com/repos/pallets/jinja/branches{/branch}","tags_url":"https://api.github.com/repos/pallets/jinja/tags","blobs_url":"https://api.github.com/repos/pallets/jinja/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pallets/jinja/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pallets/jinja/git/refs{/sha}","trees_url":"https://api.github.com/repos/pallets/jinja/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pallets/jinja/statuses/{sha}","languages_url":"https://api.github.com/repos/pallets/jinja/languages","stargazers_url":"https://api.github.com/repos/pallets/jinja/stargazers","contributors_url":"https://api.github.com/repos/pallets/jinja/contributors","subscribers_url":"https://api.github.com/repos/pallets/jinja/subscribers","subscription_url":"https://api.github.com/repos/pallets/jinja/subscription","commits_url":"https://api.github.com/repos/pallets/jinja/commits{/sha}","git_commits_url":"https://api.github.com/repos/pallets/jinja/git/commits{/sha}","comments_url":"https://api.github.com/repos/pallets/jinja/comments{/number}","issue_comment_url":"https://api.github.com/repos/pallets/jinja/issues/comments{/number}","contents_url":"https://api.github.com/repos/pallets/jinja/contents/{+path}","compare_url":"https://api.github.com/repos/pallets/jinja/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pallets/jinja/merges","archive_url":"https://api.github.com/repos/pallets/jinja/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pallets/jinja/downloads","issues_url":"https://api.github.com/repos/pallets/jinja/issues{/number}","pulls_url":"https://api.github.com/repos/pallets/jinja/pulls{/number}","milestones_url":"https://api.github.com/repos/pallets/jinja/milestones{/number}","notifications_url":"https://api.github.com/repos/pallets/jinja/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pallets/jinja/labels{/name}","releases_url":"https://api.github.com/repos/pallets/jinja/releases{/id}","deployments_url":"https://api.github.com/repos/pallets/jinja/deployments","created_at":"2010-10-17T13:41:17Z","updated_at":"2025-11-10T01:08:28Z","pushed_at":"2025-06-14T20:35:04Z","git_url":"git://github.com/pallets/jinja.git","ssh_url":"git@github.com:pallets/jinja.git","clone_url":"https://github.com/pallets/jinja.git","svn_url":"https://github.com/pallets/jinja","homepage":"https://jinja.palletsprojects.com","size":6934,"stargazers_count":11255,"watchers_count":11255,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1681,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":93,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["jinja","jinja2","pallets","python","template-engine","templates"],"visibility":"public","forks":1681,"open_issues":93,"watchers":11255,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I've been running into a coredump that I can only replicate when answering RPC requests through a multi-threaded SWIG'd API. It's easy to duplicate the crash:\n\n```\nenv = jinja2.Environment()\ntemplate = env.from_string(\"{{ pkg_dir\")\n```\n\nThe actual exception is (<class 'jinja2.exceptions.TemplateSyntaxError'>, TemplateSyntaxError(\"unexpected end of template, expected 'end of print statement'.\",), <traceback object at 0x97d3504>), but instead, I get a segfault/coredump. The problem is that jinja2 is dynamically importing the debug.py module, which in turn dynamically imports ctypes. A dynamic import of ctypes can cause segfaults in many environments, particularly where threading, read-only filesystems, and SWIG is involved.\n\nIt would be nice if a parameter could be passed to Environment() that disabled the traceback annotation features. Traceback:\n\n```\n#0  0x080f4ea0 in vgetargs1 (args=0xb9b14ec, format=0x815e467 \"s:zipimporter\", p_va=0xf187305c, flags=0)    at ../../../Python/getargs.c:196#1  0x080f5ce4 in PyArg_ParseTuple (args=0xb9b14ec, format=0x815e467 \"s:zipimporter\")    at ../../../Python/getargs.c:85#2  0x08128888 in zipimporter_init (self=0xb9b150c, args=0xb9b14ec, kwds=0x0)    at ../../../Modules/zipimport.c:69#3  0x080ad60d in type_call (type=0x819e4a0, args=0xb9b14ec, kwds=0x0) at ../../../Objects/typeobject.c:742#4  0x0805e06f in PyObject_Call (func=0x819e4a0, arg=0x815e467, kw=<optimized out>)    at ../../../Objects/abstract.c:2492#5  0x0805f49e in PyObject_CallFunctionObjArgs (callable=0x819e4a0) at ../../../Objects/abstract.c:2723#6  0x080f6baa in get_path_importer (p=<optimized out>, path_hooks=<optimized out>,     path_importer_cache=<optimized out>) at ../../../Python/import.c:1140#7  find_module (fullname=<optimized out>, subname=<optimized out>, path=<optimized out>,     buf=<optimized out>, buflen=4097, p_fp=0xf18793e8, p_loader=0xf18793ec) at ../../../Python/import.c:1357#8  0x080fa3b2 in import_submodule (mod=0xb9aa08c, subname=<optimized out>, fullname=0xf187944f \"ctypes.os\")    at ../../../Python/import.c:2581#9  0x080fad87 in load_next (p_buflen=<optimized out>, buf=<optimized out>, p_name=<optimized out>,     altmod=<optimized out>, mod=<optimized out>) at ../../../Python/import.c:2411#10 import_module_level (level=<optimized out>, fromlist=<optimized out>, locals=<optimized out>,     globals=<optimized out>, name=<optimized out>) at ../../../Python/import.c:2133\n#11 PyImport_ImportModuleLevel (name=0xf7520e94 \"os\", globals=0x12400bdc, locals=0x12400bdc, \n    fromlist=0x81862f8, level=-1) at ../../../Python/import.c:2184\n#12 0x080da552 in builtin___import__ (self=0x0, args=0xb9a6874, kwds=0x0) at ../../../Python/bltinmodule.c:48\n#13 0x0805cdc2 in PyObject_Call (func=0xf75102ac, arg=0xb9a6874, kw=0x0) at ../../../Objects/abstract.c:2492\n#14 0x080dbb4c in PyEval_CallObjectWithKeywords (func=0xf75102ac, arg=0xb9a6874, kw=<optimized out>)\n    at ../../../Python/ceval.c:3619\n#15 0x080dce2d in PyEval_EvalFrameEx (f=0xb522fdc, throwflag=0) at ../../../Python/ceval.c:2159\n#16 0x080e271b in PyEval_EvalCodeEx (co=0xb3edd58, globals=0x12400bdc, locals=0x12400bdc, args=0x0, \n    argcount=0, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0) at ../../../Python/ceval.c:3000\n#17 0x080e280d in PyEval_EvalCode (co=0xb3edd58, globals=0x12400bdc, locals=0x12400bdc)\n    at ../../../Python/ceval.c:541\n#18 0x080f7e5d in PyImport_ExecCodeModuleEx (name=0xf187d8e6 \"ctypes\", co=0xb3edd58, \n    pathname=0xf187a76b \"/usr/grte/v2/piii-linux/lib/python2.6/ctypes/__init__.pyc\")\n    at ../../../Python/import.c:677\n#19 0x080f875a in load_source_module (name=<optimized out>, \n    pathname=0xf187a76b \"/usr/grte/v2/piii-linux/lib/python2.6/ctypes/__init__.pyc\", fp=<optimized out>)\n    at ../../../Python/import.c:1017\n#20 0x080f9887 in load_package (name=0xf187d8e6 \"ctypes\", pathname=<optimized out>)\n    at ../../../Python/import.c:1073\n#21 0x080fa5f0 in load_module (loader=<optimized out>, type=<optimized out>, buf=<optimized out>, \n    fp=<optimized out>, name=<optimized out>) at ../../../Python/import.c:1835\n#22 import_submodule (mod=0x81862f8, subname=<optimized out>, fullname=0xf187d8e6 \"ctypes\")\n    at ../../../Python/import.c:2591\n#23 0x080fb074 in load_next (p_buflen=<optimized out>, buf=<optimized out>, p_name=<optimized out>, \n    altmod=<optimized out>, mod=<optimized out>) at ../../../Python/import.c:2415\n#24 import_module_level (level=<optimized out>, fromlist=<optimized out>, locals=<optimized out>, \n    lobals=<optimized out>, name=<optimized out>) at ../../../Python/import.c:2133#25 PyImport_ImportModuleLevel (name=0xb9b0734 \"ctypes\", globals=0x1002024c, locals=0x81862f8,     fromlist=0x81862f8, level=-1) at ../../../Python/import.c:2184#26 0x080da552 in builtin___import__ (self=0x0, args=0xb40dd24, kwds=0x0) at ../../../Python/bltinmodule.c:48#27 0x0805cdc2 in PyObject_Call (func=0xf75102ac, arg=0xb40dd24, kw=0x0) at ../../../Objects/abstract.c:2492#28 0x080dbb4c in PyEval_CallObjectWithKeywords (func=0xf75102ac, arg=0xb40dd24, kw=<optimized out>)    at ../../../Python/ceval.c:3619#29 0x080dce2d in PyEval_EvalFrameEx (f=0xb524894, throwflag=0) at ../../../Python/ceval.c:2159#30 0x080e271b in PyEval_EvalCodeEx (co=0x102bf188, globals=0x1002024c, locals=0x0, args=0xb524838,     argcount=0, kws=0xb524838, kwcount=0, defs=0x0, defcount=0, closure=0x0) at ../../../Python/ceval.c:3000#31 0x080e0cd2 in fast_function (nk=<optimized out>, na=<optimized out>, n=<optimized out>,     pp_stack=<optimized out>, func=<optimized out>) at ../../../Python/ceval.c:3846#32 call_function (oparg=<optimized out>, pp_stack=<optimized out>) at ../../../Python/ceval.c:3771#33 PyEval_EvalFrameEx (f=0xb5246fc, throwflag=0) at ../../../Python/ceval.c:2412#34 0x080e271b in PyEval_EvalCodeEx (co=0x102bfb18, globals=0x1002024c, locals=0x1002024c, args=0x0,     argcount=0, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0) at ../../../Python/ceval.c:3000#35 0x080e280d in PyEval_EvalCode (co=0x102bfb18, globals=0x1002024c, locals=0x1002024c)    at ../../../Python/ceval.c:541#36 0x080f7e5d in PyImport_ExecCodeModuleEx (name=0xf1880e8f \"jinja2.debug\", co=0x102bfb18, \n    pathname=0xf187fe27 \"/g/cluster_workflow/g3/server/shell/shell_server.runfiles/G3/third_party/py/jinja2/debug.py\")\n    at ../../../Python/import.c:677\n#37 0x080f875a in load_source_module (name=<optimized out>, \n    pathname=0xf187fe27 \"/g/cluster_workflow/g3/server/shell/shell_server.runfiles/G3/third_party/py/jinja2/debug.py\", \n    fp=<optimized out>) at ../../../Python/import.c:1017\n#38 0x080fa669 in load_module (loader=<optimized out>, type=<optimized out>, buf=<optimized out>, \n    fp=<optimized out>, name=<optimized out>) at ../../../Python/import.c:1821\n#39 import_submodule (mod=0xb67529c, subname=<optimized out>, fullname=0xf1880e8f \"jinja2.debug\")\n    at ../../../Python/import.c:2591\n#40 0x080fae60 in load_next (p_buflen=<optimized out>, buf=<optimized out>, p_name=<optimized out>, \n    altmod=<optimized out>, mod=<optimized out>) at ../../../Python/import.c:2411\n#41 import_module_level (level=<optimized out>, fromlist=<optimized out>, locals=<optimized out>, \n    globals=<optimized out>, name=<optimized out>) at ../../../Python/import.c:2140\n#42 PyImport_ImportModuleLevel (name=0xba7a8cc \"jinja2.debug\", globals=0xff59d74, locals=0x81862f8, \n    fromlist=0xb66130c, level=-1) at ../../../Python/import.c:2184\n#43 0x080da552 in builtin___import__ (self=0x0, args=0xa14e02c, kwds=0x0) at ../../../Python/bltinmodule.c:48\n#44 0x0805cdc2 in PyObject_Call (func=0xf75102ac, arg=0xa14e02c, kw=0x0) at ../../../Objects/abstract.c:2492\n#45 0x080dbb4c in PyEval_CallObjectWithKeywords (func=0xf75102ac, arg=0xa14e02c, kw=<optimized out>)\n    at ../../../Python/ceval.c:3619\n#46 0x080dce2d in PyEval_EvalFrameEx (f=0x100d9604, throwflag=0) at ../../../Python/ceval.c:2159\n#47 0x080e271b in PyEval_EvalCodeEx (co=0xba7c4e8, globals=0xff59d74, locals=0x0, args=0x100d39ac, \n    argcount=2, kws=0x100d39b4, kwcount=1, defs=0xb785c18, defcount=3, closure=0x0)\n    at ../../../Python/ceval.c:3000\n#48 0x080e0cd2 in fast_function (nk=<optimized out>, na=<optimized out>, n=<optimized out>, \n    pp_stack=<optimized out>, func=<optimized out>) at ../../../Python/ceval.c:3846\n```\n","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pallets/jinja/issues/117/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":3995573192,"node_id":"MDExOkxvY2tlZEV2ZW50Mzk5NTU3MzE5Mg==","url":"https://api.github.com/repos/pallets/jinja/issues/events/3995573192","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2020-11-13T22:14:18Z","lock_reason":"resolved","performed_via_github_app":null}]