[{"id":1648164267,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE2NDgxNjQyNjc=","url":"https://api.github.com/repos/pallets/jinja/issues/events/1648164267","actor":{"login":"petee-d","id":7727916,"node_id":"MDQ6VXNlcjc3Mjc5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7727916?v=4","gravatar_id":"","url":"https://api.github.com/users/petee-d","html_url":"https://github.com/petee-d","followers_url":"https://api.github.com/users/petee-d/followers","following_url":"https://api.github.com/users/petee-d/following{/other_user}","gists_url":"https://api.github.com/users/petee-d/gists{/gist_id}","starred_url":"https://api.github.com/users/petee-d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/petee-d/subscriptions","organizations_url":"https://api.github.com/users/petee-d/orgs","repos_url":"https://api.github.com/users/petee-d/repos","events_url":"https://api.github.com/users/petee-d/events{/privacy}","received_events_url":"https://api.github.com/users/petee-d/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"50aab7a29e118a51c97785d52bf3255a9e5c835b","commit_url":"https://api.github.com/repos/exponea/jinja/commits/50aab7a29e118a51c97785d52bf3255a9e5c835b","created_at":"2018-05-27T09:43:52Z","performed_via_github_app":null},{"actor":{"login":"petee-d","id":7727916,"node_id":"MDQ6VXNlcjc3Mjc5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7727916?v=4","gravatar_id":"","url":"https://api.github.com/users/petee-d","html_url":"https://github.com/petee-d","followers_url":"https://api.github.com/users/petee-d/followers","following_url":"https://api.github.com/users/petee-d/following{/other_user}","gists_url":"https://api.github.com/users/petee-d/gists{/gist_id}","starred_url":"https://api.github.com/users/petee-d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/petee-d/subscriptions","organizations_url":"https://api.github.com/users/petee-d/orgs","repos_url":"https://api.github.com/users/petee-d/repos","events_url":"https://api.github.com/users/petee-d/events{/privacy}","received_events_url":"https://api.github.com/users/petee-d/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-27T10:21:10Z","updated_at":"2018-05-27T10:21:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pallets/jinja/issues/858","repository_url":"https://api.github.com/repos/pallets/jinja","labels_url":"https://api.github.com/repos/pallets/jinja/issues/858/labels{/name}","comments_url":"https://api.github.com/repos/pallets/jinja/issues/858/comments","events_url":"https://api.github.com/repos/pallets/jinja/issues/858/events","html_url":"https://github.com/pallets/jinja/pull/858","id":326804346,"node_id":"MDExOlB1bGxSZXF1ZXN0MTkwNzgwMzQy","number":858,"title":"Fix lexer being extremely slow on large amounts of whitespace. Fixes #857","user":{"login":"petee-d","id":7727916,"node_id":"MDQ6VXNlcjc3Mjc5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7727916?v=4","gravatar_id":"","url":"https://api.github.com/users/petee-d","html_url":"https://github.com/petee-d","followers_url":"https://api.github.com/users/petee-d/followers","following_url":"https://api.github.com/users/petee-d/following{/other_user}","gists_url":"https://api.github.com/users/petee-d/gists{/gist_id}","starred_url":"https://api.github.com/users/petee-d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/petee-d/subscriptions","organizations_url":"https://api.github.com/users/petee-d/orgs","repos_url":"https://api.github.com/users/petee-d/repos","events_url":"https://api.github.com/users/petee-d/events{/privacy}","received_events_url":"https://api.github.com/users/petee-d/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pallets/jinja/milestones/2","html_url":"https://github.com/pallets/jinja/milestone/2","labels_url":"https://api.github.com/repos/pallets/jinja/milestones/2/labels","id":3092936,"node_id":"MDk6TWlsZXN0b25lMzA5MjkzNg==","number":2,"title":"2.11.0","description":"","creator":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":81,"state":"closed","created_at":"2018-02-06T14:08:54Z","updated_at":"2020-01-29T06:36:03Z","due_on":null,"closed_at":"2020-01-29T06:36:03Z"},"comments":6,"created_at":"2018-05-27T10:21:10Z","updated_at":"2020-11-13T20:15:43Z","closed_at":"2019-10-07T06:41:04Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","draft":false,"repository":{"id":994551,"node_id":"MDEwOlJlcG9zaXRvcnk5OTQ1NTE=","name":"jinja","full_name":"pallets/jinja","private":false,"owner":{"login":"pallets","id":16748505,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzQ4NTA1","avatar_url":"https://avatars.githubusercontent.com/u/16748505?v=4","gravatar_id":"","url":"https://api.github.com/users/pallets","html_url":"https://github.com/pallets","followers_url":"https://api.github.com/users/pallets/followers","following_url":"https://api.github.com/users/pallets/following{/other_user}","gists_url":"https://api.github.com/users/pallets/gists{/gist_id}","starred_url":"https://api.github.com/users/pallets/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pallets/subscriptions","organizations_url":"https://api.github.com/users/pallets/orgs","repos_url":"https://api.github.com/users/pallets/repos","events_url":"https://api.github.com/users/pallets/events{/privacy}","received_events_url":"https://api.github.com/users/pallets/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pallets/jinja","description":"A very fast and expressive template engine.","fork":false,"url":"https://api.github.com/repos/pallets/jinja","forks_url":"https://api.github.com/repos/pallets/jinja/forks","keys_url":"https://api.github.com/repos/pallets/jinja/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pallets/jinja/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pallets/jinja/teams","hooks_url":"https://api.github.com/repos/pallets/jinja/hooks","issue_events_url":"https://api.github.com/repos/pallets/jinja/issues/events{/number}","events_url":"https://api.github.com/repos/pallets/jinja/events","assignees_url":"https://api.github.com/repos/pallets/jinja/assignees{/user}","branches_url":"https://api.github.com/repos/pallets/jinja/branches{/branch}","tags_url":"https://api.github.com/repos/pallets/jinja/tags","blobs_url":"https://api.github.com/repos/pallets/jinja/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pallets/jinja/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pallets/jinja/git/refs{/sha}","trees_url":"https://api.github.com/repos/pallets/jinja/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pallets/jinja/statuses/{sha}","languages_url":"https://api.github.com/repos/pallets/jinja/languages","stargazers_url":"https://api.github.com/repos/pallets/jinja/stargazers","contributors_url":"https://api.github.com/repos/pallets/jinja/contributors","subscribers_url":"https://api.github.com/repos/pallets/jinja/subscribers","subscription_url":"https://api.github.com/repos/pallets/jinja/subscription","commits_url":"https://api.github.com/repos/pallets/jinja/commits{/sha}","git_commits_url":"https://api.github.com/repos/pallets/jinja/git/commits{/sha}","comments_url":"https://api.github.com/repos/pallets/jinja/comments{/number}","issue_comment_url":"https://api.github.com/repos/pallets/jinja/issues/comments{/number}","contents_url":"https://api.github.com/repos/pallets/jinja/contents/{+path}","compare_url":"https://api.github.com/repos/pallets/jinja/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pallets/jinja/merges","archive_url":"https://api.github.com/repos/pallets/jinja/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pallets/jinja/downloads","issues_url":"https://api.github.com/repos/pallets/jinja/issues{/number}","pulls_url":"https://api.github.com/repos/pallets/jinja/pulls{/number}","milestones_url":"https://api.github.com/repos/pallets/jinja/milestones{/number}","notifications_url":"https://api.github.com/repos/pallets/jinja/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pallets/jinja/labels{/name}","releases_url":"https://api.github.com/repos/pallets/jinja/releases{/id}","deployments_url":"https://api.github.com/repos/pallets/jinja/deployments","created_at":"2010-10-17T13:41:17Z","updated_at":"2025-11-10T01:08:28Z","pushed_at":"2025-06-14T20:35:04Z","git_url":"git://github.com/pallets/jinja.git","ssh_url":"git@github.com:pallets/jinja.git","clone_url":"https://github.com/pallets/jinja.git","svn_url":"https://github.com/pallets/jinja","homepage":"https://jinja.palletsprojects.com","size":6934,"stargazers_count":11255,"watchers_count":11255,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1681,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":93,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["jinja","jinja2","pallets","python","template-engine","templates"],"visibility":"public","forks":1681,"open_issues":93,"watchers":11255,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/pallets/jinja/pulls/858","html_url":"https://github.com/pallets/jinja/pull/858","diff_url":"https://github.com/pallets/jinja/pull/858.diff","patch_url":"https://github.com/pallets/jinja/pull/858.patch","merged_at":"2019-10-07T06:41:04Z"},"body":"Fix for #857, where parsing whitespace in templates usually has quadratic time complexity.\r\n\r\nIt addresses two pathological regular expressions used in Jinja lexer, \"root\" and TOKEN_RAW_BEGIN (not illustrated in examples but suffers from the same issue). In the **extremely simplified** version of the root lexer regex shown below, notice whitespace may be consumed either by `(.*?)` or by `\\s*`, with the latter having priority due to being greedy, but only in case the block of whitespace is followed by variable (or block/comment) opening tag with the \"-\" modifier (that forces left-stripping whitespace). This is a pathological case for the built-in Python `re` module and will have quadratic complexity due to backtracking done after consuming every single whitespace character (don't quote me on that though).\r\n```\r\nr'(.*?)(?:(?P<variable_begin>\\s*{{-|{{))'\r\n```\r\nJinja lexer does that to implement the whitespace stripping feature on the left side of tags, but this approach is extremely inefficient with built in Python `re` module (note the `regex` library doesn't suffer from this, but it is slower in general).\r\n\r\nMy approach uses `.rstrip` or `.rfind` + another regular expression to remove the whitespace inside the tokenizer.\r\n\r\n## Potential improvements\r\n* I found the code to be quite hacky, especially the inspection of type of `tokens` in method `tokeniter` (shouldn't it be `tokenizer` btw?), when I needed to add a flag for a rule to attempt l-stripping, I saw no better way to continue in that pattern if I wanted to avoid larger refactoring. Any ideas?\r\n* Is this project still sticking to 80 character maximum per line, as lexer.py apparently does? It makes the code very ugly and I see some modules no longer adhere to that limit. Is 120 character line maximum acceptable?\r\n* It feels like the code somewhat avoids private helper methods. I especially feel like my new code block for l-stripping should be in such a separate method and I will be happy to move it to one unless you are actually trying to avoid the overhead of calling methods (which in my opinion should be negligible here).\r\n\r\n## Testing and performance measurement\r\nI tested the fix on almost 100k of different Jinja2 templates, created by users with different technical skills and used for various purposes (from templates without any jinja tags to huge personalized email templates). Parsing all templates produced the exact same parsing tree both before and after my fix. The Jinja2 test suite of course passes as well.\r\n\r\nThe table below shows the parsing times of the templates I tested the fix with, each parsing attempt before or after was added to a bucket based on rounded log2 of the parsing time. You can see the 4 extremely slow cases being fixed and a general improvement of parsing time.\r\n```\r\nSeconds | Before | After\r\n0.00006 |    873 |  1775\r\n0.00012 |  19690 | 21348\r\n0.00024 |   8805 |  9151\r\n0.00049 |   5294 |  5331\r\n0.00098 |   3603 |  2146\r\n0.00195 |   2002 |  4824\r\n0.00391 |   3109 |  8404\r\n0.00781 |   7778 |  7759\r\n0.01563 |   8455 |  3419\r\n0.03125 |   4889 |  2234\r\n0.06250 |   1711 |    63\r\n0.12500 |    177 |     3\r\n0.25000 |     67 |     0\r\n0.50000 |      0 |     0\r\n1.00000 |      0 |     0\r\n2.00000 |      0 |     0\r\n4.00000 |      2 |     0\r\n8.00000 |      2 |     0\r\n```\r\n\r\nI didn't add any test case. I could add a test that parses something like (`' ' * 40000`) and asserts the time it took didn't cross a reasonably large boundary, but I generally dislike such tests as they may be fragile to CI environment issues. Let me know what you think.","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/858/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pallets/jinja/issues/858/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":1648181394,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE2NDgxODEzOTQ=","url":"https://api.github.com/repos/pallets/jinja/issues/events/1648181394","actor":{"login":"petee-d","id":7727916,"node_id":"MDQ6VXNlcjc3Mjc5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7727916?v=4","gravatar_id":"","url":"https://api.github.com/users/petee-d","html_url":"https://github.com/petee-d","followers_url":"https://api.github.com/users/petee-d/followers","following_url":"https://api.github.com/users/petee-d/following{/other_user}","gists_url":"https://api.github.com/users/petee-d/gists{/gist_id}","starred_url":"https://api.github.com/users/petee-d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/petee-d/subscriptions","organizations_url":"https://api.github.com/users/petee-d/orgs","repos_url":"https://api.github.com/users/petee-d/repos","events_url":"https://api.github.com/users/petee-d/events{/privacy}","received_events_url":"https://api.github.com/users/petee-d/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"89e8157ae841c65f2ebe91a12df1d96bba4acb04","commit_url":"https://api.github.com/repos/exponea/jinja/commits/89e8157ae841c65f2ebe91a12df1d96bba4acb04","created_at":"2018-05-27T10:48:57Z","performed_via_github_app":null},{"id":2321361625,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIzMjEzNjE2MjU=","url":"https://api.github.com/repos/pallets/jinja/issues/events/2321361625","actor":{"login":"kevin-brown","id":1991850,"node_id":"MDQ6VXNlcjE5OTE4NTA=","avatar_url":"https://avatars.githubusercontent.com/u/1991850?v=4","gravatar_id":"","url":"https://api.github.com/users/kevin-brown","html_url":"https://github.com/kevin-brown","followers_url":"https://api.github.com/users/kevin-brown/followers","following_url":"https://api.github.com/users/kevin-brown/following{/other_user}","gists_url":"https://api.github.com/users/kevin-brown/gists{/gist_id}","starred_url":"https://api.github.com/users/kevin-brown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevin-brown/subscriptions","organizations_url":"https://api.github.com/users/kevin-brown/orgs","repos_url":"https://api.github.com/users/kevin-brown/repos","events_url":"https://api.github.com/users/kevin-brown/events{/privacy}","received_events_url":"https://api.github.com/users/kevin-brown/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7d00a40465c89bee141ab5a3db545a20e7d30509","commit_url":"https://api.github.com/repos/exponea/jinja/commits/7d00a40465c89bee141ab5a3db545a20e7d30509","created_at":"2019-05-06T15:38:56Z","performed_via_github_app":null},{"id":2690668071,"node_id":"MDExOkNsb3NlZEV2ZW50MjY5MDY2ODA3MQ==","url":"https://api.github.com/repos/pallets/jinja/issues/events/2690668071","actor":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"7d00a40465c89bee141ab5a3db545a20e7d30509","commit_url":"https://api.github.com/repos/pallets/jinja/commits/7d00a40465c89bee141ab5a3db545a20e7d30509","created_at":"2019-10-07T06:41:06Z","state_reason":null,"performed_via_github_app":null},{"id":2690668073,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2OTA2NjgwNzM=","url":"https://api.github.com/repos/pallets/jinja/issues/events/2690668073","actor":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"562e1782ce291aa5773a5a1873b0a6a1336503b6","commit_url":"https://api.github.com/repos/pallets/jinja/commits/562e1782ce291aa5773a5a1873b0a6a1336503b6","created_at":"2019-10-07T06:41:06Z","performed_via_github_app":null},{"actor":{"login":"imphil","id":1467123,"node_id":"MDQ6VXNlcjE0NjcxMjM=","avatar_url":"https://avatars.githubusercontent.com/u/1467123?v=4","gravatar_id":"","url":"https://api.github.com/users/imphil","html_url":"https://github.com/imphil","followers_url":"https://api.github.com/users/imphil/followers","following_url":"https://api.github.com/users/imphil/following{/other_user}","gists_url":"https://api.github.com/users/imphil/gists{/gist_id}","starred_url":"https://api.github.com/users/imphil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imphil/subscriptions","organizations_url":"https://api.github.com/users/imphil/orgs","repos_url":"https://api.github.com/users/imphil/repos","events_url":"https://api.github.com/users/imphil/events{/privacy}","received_events_url":"https://api.github.com/users/imphil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-29T13:15:06Z","updated_at":"2020-01-29T13:15:06Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pallets/jinja/issues/1138","repository_url":"https://api.github.com/repos/pallets/jinja","labels_url":"https://api.github.com/repos/pallets/jinja/issues/1138/labels{/name}","comments_url":"https://api.github.com/repos/pallets/jinja/issues/1138/comments","events_url":"https://api.github.com/repos/pallets/jinja/issues/1138/events","html_url":"https://github.com/pallets/jinja/issues/1138","id":556854670,"node_id":"MDU6SXNzdWU1NTY4NTQ2NzA=","number":1138,"title":"lstrip_blocks doesn't preserve space before end block on the same line","user":{"login":"imphil","id":1467123,"node_id":"MDQ6VXNlcjE0NjcxMjM=","avatar_url":"https://avatars.githubusercontent.com/u/1467123?v=4","gravatar_id":"","url":"https://api.github.com/users/imphil","html_url":"https://github.com/imphil","followers_url":"https://api.github.com/users/imphil/followers","following_url":"https://api.github.com/users/imphil/following{/other_user}","gists_url":"https://api.github.com/users/imphil/gists{/gist_id}","starred_url":"https://api.github.com/users/imphil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imphil/subscriptions","organizations_url":"https://api.github.com/users/imphil/orgs","repos_url":"https://api.github.com/users/imphil/repos","events_url":"https://api.github.com/users/imphil/events{/privacy}","received_events_url":"https://api.github.com/users/imphil/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":357062399,"node_id":"MDU6TGFiZWwzNTcwNjIzOTk=","url":"https://api.github.com/repos/pallets/jinja/labels/bug","name":"bug","color":"d93f0b","default":true,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pallets/jinja/milestones/5","html_url":"https://github.com/pallets/jinja/milestone/5","labels_url":"https://api.github.com/repos/pallets/jinja/milestones/5/labels","id":5061977,"node_id":"MDk6TWlsZXN0b25lNTA2MTk3Nw==","number":5,"title":"2.11.2","description":"","creator":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":15,"state":"closed","created_at":"2020-02-01T03:36:56Z","updated_at":"2020-04-13T16:16:51Z","due_on":null,"closed_at":"2020-04-13T16:16:51Z"},"comments":13,"created_at":"2020-01-29T13:15:06Z","updated_at":"2020-11-13T19:48:17Z","closed_at":"2020-04-13T14:09:53Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":994551,"node_id":"MDEwOlJlcG9zaXRvcnk5OTQ1NTE=","name":"jinja","full_name":"pallets/jinja","private":false,"owner":{"login":"pallets","id":16748505,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzQ4NTA1","avatar_url":"https://avatars.githubusercontent.com/u/16748505?v=4","gravatar_id":"","url":"https://api.github.com/users/pallets","html_url":"https://github.com/pallets","followers_url":"https://api.github.com/users/pallets/followers","following_url":"https://api.github.com/users/pallets/following{/other_user}","gists_url":"https://api.github.com/users/pallets/gists{/gist_id}","starred_url":"https://api.github.com/users/pallets/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pallets/subscriptions","organizations_url":"https://api.github.com/users/pallets/orgs","repos_url":"https://api.github.com/users/pallets/repos","events_url":"https://api.github.com/users/pallets/events{/privacy}","received_events_url":"https://api.github.com/users/pallets/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pallets/jinja","description":"A very fast and expressive template engine.","fork":false,"url":"https://api.github.com/repos/pallets/jinja","forks_url":"https://api.github.com/repos/pallets/jinja/forks","keys_url":"https://api.github.com/repos/pallets/jinja/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pallets/jinja/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pallets/jinja/teams","hooks_url":"https://api.github.com/repos/pallets/jinja/hooks","issue_events_url":"https://api.github.com/repos/pallets/jinja/issues/events{/number}","events_url":"https://api.github.com/repos/pallets/jinja/events","assignees_url":"https://api.github.com/repos/pallets/jinja/assignees{/user}","branches_url":"https://api.github.com/repos/pallets/jinja/branches{/branch}","tags_url":"https://api.github.com/repos/pallets/jinja/tags","blobs_url":"https://api.github.com/repos/pallets/jinja/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pallets/jinja/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pallets/jinja/git/refs{/sha}","trees_url":"https://api.github.com/repos/pallets/jinja/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pallets/jinja/statuses/{sha}","languages_url":"https://api.github.com/repos/pallets/jinja/languages","stargazers_url":"https://api.github.com/repos/pallets/jinja/stargazers","contributors_url":"https://api.github.com/repos/pallets/jinja/contributors","subscribers_url":"https://api.github.com/repos/pallets/jinja/subscribers","subscription_url":"https://api.github.com/repos/pallets/jinja/subscription","commits_url":"https://api.github.com/repos/pallets/jinja/commits{/sha}","git_commits_url":"https://api.github.com/repos/pallets/jinja/git/commits{/sha}","comments_url":"https://api.github.com/repos/pallets/jinja/comments{/number}","issue_comment_url":"https://api.github.com/repos/pallets/jinja/issues/comments{/number}","contents_url":"https://api.github.com/repos/pallets/jinja/contents/{+path}","compare_url":"https://api.github.com/repos/pallets/jinja/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pallets/jinja/merges","archive_url":"https://api.github.com/repos/pallets/jinja/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pallets/jinja/downloads","issues_url":"https://api.github.com/repos/pallets/jinja/issues{/number}","pulls_url":"https://api.github.com/repos/pallets/jinja/pulls{/number}","milestones_url":"https://api.github.com/repos/pallets/jinja/milestones{/number}","notifications_url":"https://api.github.com/repos/pallets/jinja/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pallets/jinja/labels{/name}","releases_url":"https://api.github.com/repos/pallets/jinja/releases{/id}","deployments_url":"https://api.github.com/repos/pallets/jinja/deployments","created_at":"2010-10-17T13:41:17Z","updated_at":"2025-11-10T01:08:28Z","pushed_at":"2025-06-14T20:35:04Z","git_url":"git://github.com/pallets/jinja.git","ssh_url":"git@github.com:pallets/jinja.git","clone_url":"https://github.com/pallets/jinja.git","svn_url":"https://github.com/pallets/jinja","homepage":"https://jinja.palletsprojects.com","size":6934,"stargazers_count":11255,"watchers_count":11255,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1681,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":93,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["jinja","jinja2","pallets","python","template-engine","templates"],"visibility":"public","forks":1681,"open_issues":93,"watchers":11255,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Look at the following template code:\r\n\r\n```jinja2\r\nset_property verilog_define {\r\n  {%- for k, v in vlogdefine.items() %}{{ k }}={{ v|param_value_str }} {% endfor -%}\r\n  } [get_filesets sources_1]\r\n```\r\n\r\nhttps://github.com/olofk/edalize/blob/bdb6c9ccc666e9f60333279ad53ed09cda88b3dc/edalize/templates/vivado/vivado-project.tcl.j2#L27-L29\r\n\r\nUp to Jinja2 2.10.3 this would result in something like\r\n\r\n```\r\nset_property verilog_define {vlogdefine_bool=1 vlogdefine_int=42 vlogdefine_str=hello } [get_filesets sources_1]\r\n```\r\nhttps://github.com/olofk/edalize/blob/bdb6c9ccc666e9f60333279ad53ed09cda88b3dc/tests/test_vivado/test_vivado_0.tcl#L10\r\n\r\n[The code](https://github.com/olofk/edalize/blob/bdb6c9ccc666e9f60333279ad53ed09cda88b3dc/edalize/edatool.py#L81) has `lstrip_blocks = True`.\r\n\r\nNow with 2.11.0 the code is rendered like this:\r\n\r\n```\r\nset_property verilog_define {vlogdefine_bool=1vlogdefine_int=42vlogdefine_str=hello} [get_filesets sources_1]\r\n```\r\n\r\n@towoe bisected the behavior change down to https://github.com/pallets/jinja/commit/7d00a40465c89bee141ab5a3db545a20e7d30509 (by @petee-d in https://github.com/pallets/jinja/issues/857)\r\n\r\nAccording to the [documentation](https://jinja.palletsprojects.com/en/2.11.x/api/)\r\n\r\n> lstrip_blocks\r\n>    If this is set to True leading spaces and tabs are stripped from the start of a line to a block. Defaults to False.\r\n\r\nI don't think the whitespace should be removed before the `endfor`, since that's not whitespace \"from the beginning of the line\". Am I misunderstanding that, or does the new version introduce an unexpected change in behavior?\r\n\r\nPython 3.7.3 (but also happens on 3.5 in CI)","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/1138/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pallets/jinja/issues/1138/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"petee-d","id":7727916,"node_id":"MDQ6VXNlcjc3Mjc5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7727916?v=4","gravatar_id":"","url":"https://api.github.com/users/petee-d","html_url":"https://github.com/petee-d","followers_url":"https://api.github.com/users/petee-d/followers","following_url":"https://api.github.com/users/petee-d/following{/other_user}","gists_url":"https://api.github.com/users/petee-d/gists{/gist_id}","starred_url":"https://api.github.com/users/petee-d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/petee-d/subscriptions","organizations_url":"https://api.github.com/users/petee-d/orgs","repos_url":"https://api.github.com/users/petee-d/repos","events_url":"https://api.github.com/users/petee-d/events{/privacy}","received_events_url":"https://api.github.com/users/petee-d/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T16:45:37Z","updated_at":"2020-04-08T16:45:37Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pallets/jinja/issues/1183","repository_url":"https://api.github.com/repos/pallets/jinja","labels_url":"https://api.github.com/repos/pallets/jinja/issues/1183/labels{/name}","comments_url":"https://api.github.com/repos/pallets/jinja/issues/1183/comments","events_url":"https://api.github.com/repos/pallets/jinja/issues/1183/events","html_url":"https://github.com/pallets/jinja/pull/1183","id":592697938,"node_id":"MDExOlB1bGxSZXF1ZXN0Mzk3NjMyNjAw","number":1183,"title":"Fix unintended lstrip_blocks behavior","user":{"login":"petee-d","id":7727916,"node_id":"MDQ6VXNlcjc3Mjc5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7727916?v=4","gravatar_id":"","url":"https://api.github.com/users/petee-d","html_url":"https://github.com/petee-d","followers_url":"https://api.github.com/users/petee-d/followers","following_url":"https://api.github.com/users/petee-d/following{/other_user}","gists_url":"https://api.github.com/users/petee-d/gists{/gist_id}","starred_url":"https://api.github.com/users/petee-d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/petee-d/subscriptions","organizations_url":"https://api.github.com/users/petee-d/orgs","repos_url":"https://api.github.com/users/petee-d/repos","events_url":"https://api.github.com/users/petee-d/events{/privacy}","received_events_url":"https://api.github.com/users/petee-d/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pallets/jinja/milestones/5","html_url":"https://github.com/pallets/jinja/milestone/5","labels_url":"https://api.github.com/repos/pallets/jinja/milestones/5/labels","id":5061977,"node_id":"MDk6TWlsZXN0b25lNTA2MTk3Nw==","number":5,"title":"2.11.2","description":"","creator":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":15,"state":"closed","created_at":"2020-02-01T03:36:56Z","updated_at":"2020-04-13T16:16:51Z","due_on":null,"closed_at":"2020-04-13T16:16:51Z"},"comments":7,"created_at":"2020-04-02T14:57:29Z","updated_at":"2020-11-13T19:48:35Z","closed_at":"2020-04-13T14:09:32Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","draft":false,"repository":{"id":994551,"node_id":"MDEwOlJlcG9zaXRvcnk5OTQ1NTE=","name":"jinja","full_name":"pallets/jinja","private":false,"owner":{"login":"pallets","id":16748505,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzQ4NTA1","avatar_url":"https://avatars.githubusercontent.com/u/16748505?v=4","gravatar_id":"","url":"https://api.github.com/users/pallets","html_url":"https://github.com/pallets","followers_url":"https://api.github.com/users/pallets/followers","following_url":"https://api.github.com/users/pallets/following{/other_user}","gists_url":"https://api.github.com/users/pallets/gists{/gist_id}","starred_url":"https://api.github.com/users/pallets/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pallets/subscriptions","organizations_url":"https://api.github.com/users/pallets/orgs","repos_url":"https://api.github.com/users/pallets/repos","events_url":"https://api.github.com/users/pallets/events{/privacy}","received_events_url":"https://api.github.com/users/pallets/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pallets/jinja","description":"A very fast and expressive template engine.","fork":false,"url":"https://api.github.com/repos/pallets/jinja","forks_url":"https://api.github.com/repos/pallets/jinja/forks","keys_url":"https://api.github.com/repos/pallets/jinja/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pallets/jinja/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pallets/jinja/teams","hooks_url":"https://api.github.com/repos/pallets/jinja/hooks","issue_events_url":"https://api.github.com/repos/pallets/jinja/issues/events{/number}","events_url":"https://api.github.com/repos/pallets/jinja/events","assignees_url":"https://api.github.com/repos/pallets/jinja/assignees{/user}","branches_url":"https://api.github.com/repos/pallets/jinja/branches{/branch}","tags_url":"https://api.github.com/repos/pallets/jinja/tags","blobs_url":"https://api.github.com/repos/pallets/jinja/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pallets/jinja/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pallets/jinja/git/refs{/sha}","trees_url":"https://api.github.com/repos/pallets/jinja/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pallets/jinja/statuses/{sha}","languages_url":"https://api.github.com/repos/pallets/jinja/languages","stargazers_url":"https://api.github.com/repos/pallets/jinja/stargazers","contributors_url":"https://api.github.com/repos/pallets/jinja/contributors","subscribers_url":"https://api.github.com/repos/pallets/jinja/subscribers","subscription_url":"https://api.github.com/repos/pallets/jinja/subscription","commits_url":"https://api.github.com/repos/pallets/jinja/commits{/sha}","git_commits_url":"https://api.github.com/repos/pallets/jinja/git/commits{/sha}","comments_url":"https://api.github.com/repos/pallets/jinja/comments{/number}","issue_comment_url":"https://api.github.com/repos/pallets/jinja/issues/comments{/number}","contents_url":"https://api.github.com/repos/pallets/jinja/contents/{+path}","compare_url":"https://api.github.com/repos/pallets/jinja/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pallets/jinja/merges","archive_url":"https://api.github.com/repos/pallets/jinja/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pallets/jinja/downloads","issues_url":"https://api.github.com/repos/pallets/jinja/issues{/number}","pulls_url":"https://api.github.com/repos/pallets/jinja/pulls{/number}","milestones_url":"https://api.github.com/repos/pallets/jinja/milestones{/number}","notifications_url":"https://api.github.com/repos/pallets/jinja/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pallets/jinja/labels{/name}","releases_url":"https://api.github.com/repos/pallets/jinja/releases{/id}","deployments_url":"https://api.github.com/repos/pallets/jinja/deployments","created_at":"2010-10-17T13:41:17Z","updated_at":"2025-11-10T01:08:28Z","pushed_at":"2025-06-14T20:35:04Z","git_url":"git://github.com/pallets/jinja.git","ssh_url":"git@github.com:pallets/jinja.git","clone_url":"https://github.com/pallets/jinja.git","svn_url":"https://github.com/pallets/jinja","homepage":"https://jinja.palletsprojects.com","size":6934,"stargazers_count":11255,"watchers_count":11255,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1681,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":93,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["jinja","jinja2","pallets","python","template-engine","templates"],"visibility":"public","forks":1681,"open_issues":93,"watchers":11255,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/pallets/jinja/pulls/1183","html_url":"https://github.com/pallets/jinja/pull/1183","diff_url":"https://github.com/pallets/jinja/pull/1183.diff","patch_url":"https://github.com/pallets/jinja/pull/1183.patch","merged_at":"2020-04-13T14:09:32Z"},"body":"Introduced in #858. Closes #1138","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/1183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pallets/jinja/issues/1183/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":3995266508,"node_id":"MDExOkxvY2tlZEV2ZW50Mzk5NTI2NjUwOA==","url":"https://api.github.com/repos/pallets/jinja/issues/events/3995266508","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2020-11-13T20:34:05Z","lock_reason":"resolved","performed_via_github_app":null}]