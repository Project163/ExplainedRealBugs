{"url":"https://api.github.com/repos/pallets/jinja/issues/504","repository_url":"https://api.github.com/repos/pallets/jinja","labels_url":"https://api.github.com/repos/pallets/jinja/issues/504/labels{/name}","comments_url":"https://api.github.com/repos/pallets/jinja/issues/504/comments","events_url":"https://api.github.com/repos/pallets/jinja/issues/504/events","html_url":"https://github.com/pallets/jinja/issues/504","id":112471562,"node_id":"MDU6SXNzdWUxMTI0NzE1NjI=","number":504,"title":"collapse whitespace in trans blocks","user":{"login":"willkg","id":820826,"node_id":"MDQ6VXNlcjgyMDgyNg==","avatar_url":"https://avatars.githubusercontent.com/u/820826?v=4","gravatar_id":"","url":"https://api.github.com/users/willkg","html_url":"https://github.com/willkg","followers_url":"https://api.github.com/users/willkg/followers","following_url":"https://api.github.com/users/willkg/following{/other_user}","gists_url":"https://api.github.com/users/willkg/gists{/gist_id}","starred_url":"https://api.github.com/users/willkg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willkg/subscriptions","organizations_url":"https://api.github.com/users/willkg/orgs","repos_url":"https://api.github.com/users/willkg/repos","events_url":"https://api.github.com/users/willkg/events{/privacy}","received_events_url":"https://api.github.com/users/willkg/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1626052871,"node_id":"MDU6TGFiZWwxNjI2MDUyODcx","url":"https://api.github.com/repos/pallets/jinja/labels/i18n","name":"i18n","color":"b489d3","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2015-10-20T22:16:04Z","updated_at":"2020-11-13T20:23:26Z","closed_at":"2017-07-03T14:37:46Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"One of the things I have difficulties with is the fact that the `trans` block has no way to collapse whitespace in the text. It strips leading and trailing whitespace and that's great, but if you do paragraphs of text in an HTML template, then you end up with something like this:\n\n```\n...\n        <div>\n          {% trans url='someurl' %}\n            This is some text in a paragraph.\n            Yay.\n          {% endtrans %}\n        </div>\n...\n```\n\nIt's nice to indent the various levels of HTML because it makes it more readable. However, the msgid for that string ends up with spaces and newlines in it that have no substantive meaning to the string. This creates a couple of problems:\n1. Translators get confused about the whitespace--is it significant? do they need to maintain it? what happens to line length? etc.\n2. If we ever change the structure of the HTML, that might change the indentation and then we have a new msgid and that breaks translations.\n\nDjango added a \"trimmed' flag to their blocktrans tag in Django 1.7 for similar reasons:\n\nhttps://code.djangoproject.com/ticket/5849\n\nRight now, we have code that extends InternationalizationExtension and overrides `_parse_block` to always collapse whitespace in the text. That sort of works, but it's got some issues and I'd rather it were implemented in Jinja2 proper.\n\nIs there any interest in a \"trimmed\" flag or something similar? Does it already exist in Jinja and I just haven't seen it, yet?\n","closed_by":{"login":"ThiefMaster","id":179599,"node_id":"MDQ6VXNlcjE3OTU5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/179599?v=4","gravatar_id":"","url":"https://api.github.com/users/ThiefMaster","html_url":"https://github.com/ThiefMaster","followers_url":"https://api.github.com/users/ThiefMaster/followers","following_url":"https://api.github.com/users/ThiefMaster/following{/other_user}","gists_url":"https://api.github.com/users/ThiefMaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThiefMaster/subscriptions","organizations_url":"https://api.github.com/users/ThiefMaster/orgs","repos_url":"https://api.github.com/users/ThiefMaster/repos","events_url":"https://api.github.com/users/ThiefMaster/events{/privacy}","received_events_url":"https://api.github.com/users/ThiefMaster/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pallets/jinja/issues/504/timeline","performed_via_github_app":null,"state_reason":"completed"}