[{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/208359898","html_url":"https://github.com/pallets/jinja/issues/565#issuecomment-208359898","issue_url":"https://api.github.com/repos/pallets/jinja/issues/565","id":208359898,"node_id":"MDEyOklzc3VlQ29tbWVudDIwODM1OTg5OA==","user":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-11T14:03:02Z","updated_at":"2016-04-11T14:03:02Z","body":"This might be a problem with the optimization code in the compiler.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/208359898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270890487","html_url":"https://github.com/pallets/jinja/issues/565#issuecomment-270890487","issue_url":"https://api.github.com/repos/pallets/jinja/issues/565","id":270890487,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDg5MDQ4Nw==","user":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-06T11:59:09Z","updated_at":"2017-01-06T11:59:09Z","body":"This actually is intentional now that I look at it. The autoescaping code is disabled if set to `False`. You can however set it to a function that returns False: `autoescape=lambda x: False` and the initial value of the autoescape flag is set accordingly.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270890487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":913953352,"node_id":"MDExOkNsb3NlZEV2ZW50OTEzOTUzMzUy","url":"https://api.github.com/repos/pallets/jinja/issues/events/913953352","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2017-01-06T11:59:09Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270895822","html_url":"https://github.com/pallets/jinja/issues/565#issuecomment-270895822","issue_url":"https://api.github.com/repos/pallets/jinja/issues/565","id":270895822,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDg5NTgyMg==","user":{"login":"legutierr","id":278743,"node_id":"MDQ6VXNlcjI3ODc0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/278743?v=4","gravatar_id":"","url":"https://api.github.com/users/legutierr","html_url":"https://github.com/legutierr","followers_url":"https://api.github.com/users/legutierr/followers","following_url":"https://api.github.com/users/legutierr/following{/other_user}","gists_url":"https://api.github.com/users/legutierr/gists{/gist_id}","starred_url":"https://api.github.com/users/legutierr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/legutierr/subscriptions","organizations_url":"https://api.github.com/users/legutierr/orgs","repos_url":"https://api.github.com/users/legutierr/repos","events_url":"https://api.github.com/users/legutierr/events{/privacy}","received_events_url":"https://api.github.com/users/legutierr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-06T12:39:17Z","updated_at":"2017-01-06T13:05:53Z","body":"Hi @mitsuhiko.  \r\n\r\nCould you provide more explanation of your decision to close this ticket?  I'm finding it difficult to understand why this is desirable behavior with regards to the macro escaping.  Shouldn't macro output _always_ be safe?  \r\n\r\nAnd even if you want macro output to only _sometimes_ be safe, isn't the following behavior the reverse of what you would want in that case?\r\n\r\n    >>> env = jinja2.Environment(autoescape=False, extensions=[jinja2.ext.autoescape])                 \r\n    >>> template = \"{% macro m() %}<html>{% endmacro %}\"\r\n    >>> template += \"{% autoescape true %}{{ m() }}{% endautoescape %} {{ m()|e }}\"\r\n    >>> env.from_string(template).render()\r\n    u'&lt;html&gt; &lt;html&gt;'\r\n\r\nIf the autoescape global somehow escapes macro output by default, why would turning autoescape _on_ globally cause macros _not_ to be escaped?\r\n\r\n    >>> env = jinja2.Environment(autoescape=True, extensions=[jinja2.ext.autoescape])                 \r\n    >>> template = \"{% macro m() %}<html>{% endmacro %}\"\r\n    >>> template += \"{% autoescape true %}{{ m() }}{% endautoescape %} {{ m()|e }}\"\r\n    >>> env.from_string(template).render()\r\n    u'<html> <html>'\r\n\r\nCould it not be that there is some bug triggered by global autoescape=False that somehow is marking macros as unsafe when they should simply be safe in all cases?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270895822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"legutierr","id":278743,"node_id":"MDQ6VXNlcjI3ODc0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/278743?v=4","gravatar_id":"","url":"https://api.github.com/users/legutierr","html_url":"https://github.com/legutierr","followers_url":"https://api.github.com/users/legutierr/followers","following_url":"https://api.github.com/users/legutierr/following{/other_user}","gists_url":"https://api.github.com/users/legutierr/gists{/gist_id}","starred_url":"https://api.github.com/users/legutierr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/legutierr/subscriptions","organizations_url":"https://api.github.com/users/legutierr/orgs","repos_url":"https://api.github.com/users/legutierr/repos","events_url":"https://api.github.com/users/legutierr/events{/privacy}","received_events_url":"https://api.github.com/users/legutierr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":913985277,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTEzOTg1Mjc3","url":"https://api.github.com/repos/pallets/jinja/issues/events/913985277","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-06T12:39:17Z","performed_via_github_app":null},{"id":913985278,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkxMzk4NTI3OA==","url":"https://api.github.com/repos/pallets/jinja/issues/events/913985278","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-06T12:39:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270897202","html_url":"https://github.com/pallets/jinja/issues/565#issuecomment-270897202","issue_url":"https://api.github.com/repos/pallets/jinja/issues/565","id":270897202,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDg5NzIwMg==","user":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-06T12:48:32Z","updated_at":"2017-01-06T12:48:32Z","body":"This has actually nothing to do with macros. This is an unfortunate effect of how auto escaping is implemented.\r\n\r\nThe `autoescape` flag does not *just* enable the default setting of the value but also enables the feature in the first place.  The `jinja2.ext.autoescape` extension which changes the value of the autoescape flag requires `autoescape` to be enabled.\r\n\r\n`autoescape` can be enabled in two ways: It can be set to `true` which enables the autoescape feature and sets it to \"perform autoescaping\". It can be set to `false` which disables auto escape mode and disables autoescaping entirely. Unfortunately this does not block the use of the `jinja2.ext.autoescape` extension which will perform incorrectly in this case.\r\n\r\nThe third mode is to set `autoescape` to a callable. Then autoescaping is enabled as a feature and the initial value of autoescaping for a template is decided by the return value of the function. So the correct behavior to enable the autoescape feature but disable it by default for a template is to set `autoescape=lambda x: False`.\r\n\r\nI hope that explains the feature better.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270897202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270897255","html_url":"https://github.com/pallets/jinja/issues/565#issuecomment-270897255","issue_url":"https://api.github.com/repos/pallets/jinja/issues/565","id":270897255,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDg5NzI1NQ==","user":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-06T12:48:53Z","updated_at":"2017-01-06T12:48:53Z","body":"This btw has nothing to do with macros. This would come up in other situations as well.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270897255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270899002","html_url":"https://github.com/pallets/jinja/issues/565#issuecomment-270899002","issue_url":"https://api.github.com/repos/pallets/jinja/issues/565","id":270899002,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDg5OTAwMg==","user":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-06T12:59:45Z","updated_at":"2017-01-06T12:59:45Z","body":"I can see that behavior being confusing however. I will investigate if I can improve on it so that the compiler support for autoescape does not depend on the initial flag.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270899002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":914010997,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQ5MTQwMTA5OTc=","url":"https://api.github.com/repos/pallets/jinja/issues/events/914010997","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2017-01-06T13:06:23Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270900001","html_url":"https://github.com/pallets/jinja/issues/565#issuecomment-270900001","issue_url":"https://api.github.com/repos/pallets/jinja/issues/565","id":270900001,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDkwMDAwMQ==","user":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-06T13:06:31Z","updated_at":"2017-01-06T13:06:31Z","body":"Going to reopen this and investigate if we can improve here.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270900001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270901456","html_url":"https://github.com/pallets/jinja/issues/565#issuecomment-270901456","issue_url":"https://api.github.com/repos/pallets/jinja/issues/565","id":270901456,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDkwMTQ1Ng==","user":{"login":"legutierr","id":278743,"node_id":"MDQ6VXNlcjI3ODc0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/278743?v=4","gravatar_id":"","url":"https://api.github.com/users/legutierr","html_url":"https://github.com/legutierr","followers_url":"https://api.github.com/users/legutierr/followers","following_url":"https://api.github.com/users/legutierr/following{/other_user}","gists_url":"https://api.github.com/users/legutierr/gists{/gist_id}","starred_url":"https://api.github.com/users/legutierr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/legutierr/subscriptions","organizations_url":"https://api.github.com/users/legutierr/orgs","repos_url":"https://api.github.com/users/legutierr/repos","events_url":"https://api.github.com/users/legutierr/events{/privacy}","received_events_url":"https://api.github.com/users/legutierr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-06T13:16:31Z","updated_at":"2017-01-06T13:16:31Z","body":"Hi @mitsuhiko, thank you for the prompt response, and thank you for re-opening.\r\n\r\nWith regards to the feature you describe, I'm not sure if I see it in this particular example.\r\n\r\n    >>> env = jinja2.Environment(autoescape=False, extensions=[jinja2.ext.autoescape])                 \r\n    >>> template = \"{% macro m() %}<html>{% endmacro %}\"\r\n    >>> template += \"{% autoescape true %}{{ m() }}{% endautoescape %} {{ m()|e }} {{ m() }}\"\r\n    >>> env.from_string(template).render()\r\n    u'&lt;html&gt; &lt;html&gt; <html>'\r\n\r\nIn this example, global autoescape is turned off, but the autoescape tag is doing something anyway.  It doesn't seem to be disabled by the global autoescape being False (which, to me, seems like a good thing, except with regards to this macro issue).  Also, the escape filter is affected by the global autoescape setting, so the underlying issue doesn't seem to be limited to the autoescape extension.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270901456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"legutierr","id":278743,"node_id":"MDQ6VXNlcjI3ODc0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/278743?v=4","gravatar_id":"","url":"https://api.github.com/users/legutierr","html_url":"https://github.com/legutierr","followers_url":"https://api.github.com/users/legutierr/followers","following_url":"https://api.github.com/users/legutierr/following{/other_user}","gists_url":"https://api.github.com/users/legutierr/gists{/gist_id}","starred_url":"https://api.github.com/users/legutierr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/legutierr/subscriptions","organizations_url":"https://api.github.com/users/legutierr/orgs","repos_url":"https://api.github.com/users/legutierr/repos","events_url":"https://api.github.com/users/legutierr/events{/privacy}","received_events_url":"https://api.github.com/users/legutierr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":914019565,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTE0MDE5NTY1","url":"https://api.github.com/repos/pallets/jinja/issues/events/914019565","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-06T13:16:31Z","performed_via_github_app":null},{"id":914019566,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkxNDAxOTU2Ng==","url":"https://api.github.com/repos/pallets/jinja/issues/events/914019566","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-06T13:16:31Z","performed_via_github_app":null},{"id":914030960,"node_id":"MDExOkNsb3NlZEV2ZW50OTE0MDMwOTYw","url":"https://api.github.com/repos/pallets/jinja/issues/events/914030960","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"b9655a457daacd33d179f39dd8c19a9533bdd7d2","commit_url":"https://api.github.com/repos/pallets/jinja/commits/b9655a457daacd33d179f39dd8c19a9533bdd7d2","created_at":"2017-01-06T13:29:41Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270903544","html_url":"https://github.com/pallets/jinja/issues/565#issuecomment-270903544","issue_url":"https://api.github.com/repos/pallets/jinja/issues/565","id":270903544,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDkwMzU0NA==","user":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-06T13:30:38Z","updated_at":"2017-01-06T13:30:38Z","body":"Turns out this is actually not even the case I had in mind and you are right that this makes no sense. I fixed that now. This actually turns out to be an issue with the macro deciding at compile time what the autoescape flag will be which is changed at the time the call happens.\r\n\r\nThe code already dealt with autoescape being flipped at a later point through the volatile flag which seems to work from what I can tell.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270903544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270906303","html_url":"https://github.com/pallets/jinja/issues/565#issuecomment-270906303","issue_url":"https://api.github.com/repos/pallets/jinja/issues/565","id":270906303,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDkwNjMwMw==","user":{"login":"legutierr","id":278743,"node_id":"MDQ6VXNlcjI3ODc0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/278743?v=4","gravatar_id":"","url":"https://api.github.com/users/legutierr","html_url":"https://github.com/legutierr","followers_url":"https://api.github.com/users/legutierr/followers","following_url":"https://api.github.com/users/legutierr/following{/other_user}","gists_url":"https://api.github.com/users/legutierr/gists{/gist_id}","starred_url":"https://api.github.com/users/legutierr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/legutierr/subscriptions","organizations_url":"https://api.github.com/users/legutierr/orgs","repos_url":"https://api.github.com/users/legutierr/repos","events_url":"https://api.github.com/users/legutierr/events{/privacy}","received_events_url":"https://api.github.com/users/legutierr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-06T13:48:37Z","updated_at":"2017-01-06T13:48:37Z","body":"Thank you @mitsuhiko!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pallets/jinja/issues/comments/270906303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"legutierr","id":278743,"node_id":"MDQ6VXNlcjI3ODc0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/278743?v=4","gravatar_id":"","url":"https://api.github.com/users/legutierr","html_url":"https://github.com/legutierr","followers_url":"https://api.github.com/users/legutierr/followers","following_url":"https://api.github.com/users/legutierr/following{/other_user}","gists_url":"https://api.github.com/users/legutierr/gists{/gist_id}","starred_url":"https://api.github.com/users/legutierr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/legutierr/subscriptions","organizations_url":"https://api.github.com/users/legutierr/orgs","repos_url":"https://api.github.com/users/legutierr/repos","events_url":"https://api.github.com/users/legutierr/events{/privacy}","received_events_url":"https://api.github.com/users/legutierr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":914048165,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTE0MDQ4MTY1","url":"https://api.github.com/repos/pallets/jinja/issues/events/914048165","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-06T13:48:37Z","performed_via_github_app":null},{"id":914048166,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkxNDA0ODE2Ng==","url":"https://api.github.com/repos/pallets/jinja/issues/events/914048166","actor":{"login":"mitsuhiko","id":7396,"node_id":"MDQ6VXNlcjczOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7396?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuhiko","html_url":"https://github.com/mitsuhiko","followers_url":"https://api.github.com/users/mitsuhiko/followers","following_url":"https://api.github.com/users/mitsuhiko/following{/other_user}","gists_url":"https://api.github.com/users/mitsuhiko/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuhiko/subscriptions","organizations_url":"https://api.github.com/users/mitsuhiko/orgs","repos_url":"https://api.github.com/users/mitsuhiko/repos","events_url":"https://api.github.com/users/mitsuhiko/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuhiko/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-06T13:48:37Z","performed_via_github_app":null},{"id":3995430375,"node_id":"MDExOkxvY2tlZEV2ZW50Mzk5NTQzMDM3NQ==","url":"https://api.github.com/repos/pallets/jinja/issues/events/3995430375","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2020-11-13T21:23:42Z","lock_reason":"resolved","performed_via_github_app":null}]