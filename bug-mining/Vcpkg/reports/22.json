{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/38414","repository_url":"https://api.github.com/repos/microsoft/vcpkg","labels_url":"https://api.github.com/repos/microsoft/vcpkg/issues/38414/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vcpkg/issues/38414/comments","events_url":"https://api.github.com/repos/microsoft/vcpkg/issues/38414/events","html_url":"https://github.com/microsoft/vcpkg/issues/38414","id":2263052504,"node_id":"I_kwDOBBJcqc6G43DY","number":38414,"title":"[crashpad] Linker errors with undefined references after building with vcpkg on Ubuntu","user":{"login":"WY-7777777","id":134992931,"node_id":"U_kgDOCAvUIw","avatar_url":"https://avatars.githubusercontent.com/u/134992931?v=4","gravatar_id":"","url":"https://api.github.com/users/WY-7777777","html_url":"https://github.com/WY-7777777","followers_url":"https://api.github.com/users/WY-7777777/followers","following_url":"https://api.github.com/users/WY-7777777/following{/other_user}","gists_url":"https://api.github.com/users/WY-7777777/gists{/gist_id}","starred_url":"https://api.github.com/users/WY-7777777/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WY-7777777/subscriptions","organizations_url":"https://api.github.com/users/WY-7777777/orgs","repos_url":"https://api.github.com/users/WY-7777777/repos","events_url":"https://api.github.com/users/WY-7777777/events{/privacy}","received_events_url":"https://api.github.com/users/WY-7777777/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":453053701,"node_id":"MDU6TGFiZWw0NTMwNTM3MDE=","url":"https://api.github.com/repos/microsoft/vcpkg/labels/category:port-bug","name":"category:port-bug","color":"f58c8c","default":false,"description":"The issue is with a library, which is something the port should already support"}],"state":"closed","locked":false,"assignee":{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2024-04-25T08:55:40Z","updated_at":"2024-04-29T13:11:00Z","closed_at":"2024-04-29T13:11:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"[proc] 执行命令: /usr/local/share/vcpkg/downloads/tools/cmake-3.29.2-linux/cmake-3.29.2-linux-x86_64/bin/cmake --build /home/fxy/demo/Cpp-Examples/build --config Debug --target all --\r\n[build] [1/2  50% :: 1.311] Building CXX object Crashpad/CMakeFiles/crashpad_test.dir/main.cc.o\r\n[build] [2/2 100% :: 1.522] Linking CXX executable /home/fxy/demo/Cpp-Examples/bin-64/Debug/crashpad_test\r\n[build] FAILED: /home/fxy/demo/Cpp-Examples/bin-64/Debug/crashpad_test \r\n[build] : && /usr/bin/g++ -g  Crashpad/CMakeFiles/crashpad_test.dir/main.cc.o -o /home/fxy/demo/Cpp-Examples/bin-64/Debug/crashpad_test -L/home/fxy/demo/Cpp-Examples/bin-64/libs -Wl,-rpath,/home/fxy/demo/Cpp-Examples/bin-64/libs  vcpkg_installed/x64-linux/debug/lib/libclient.a  vcpkg_installed/x64-linux/debug/lib/libutil.a  vcpkg_installed/x64-linux/debug/lib/libbase.a  vcpkg_installed/x64-linux/debug/lib/libcommon.a  vcpkg_installed/x64-linux/debug/lib/libz.a && cd /home/fxy/demo/Cpp-Examples/build/Crashpad && /usr/local/share/vcpkg/downloads/tools/cmake-3.29.2-linux/cmake-3.29.2-linux-x86_64/bin/cmake -E copy_directory /home/fxy/demo/Cpp-Examples/build/vcpkg_installed/x64-linux/tools/crashpad/ /home/fxy/demo/Cpp-Examples/bin-64/Debug\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libclient.a(client.crashpad_client_linux.o): in function `crashpad::CrashpadClient::InitializeSignalStackForThread()':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crashpad_client_linux.cc:544: undefined reference to `pthread_getspecific'\r\n[build] /usr/bin/ld: /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crashpad_client_linux.cc:567: undefined reference to `pthread_setspecific'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libclient.a(client.crashpad_client_linux.o): in function `crashpad::CrashpadClient::InitializeSignalStackForThread()::$_1::operator()() const':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crashpad_client_linux.cc:536: undefined reference to `pthread_key_create'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.settings.o): in function `crashpad::Settings::InitializeSettings(int)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/settings.cc:406: undefined reference to `crashpad::UUID::InitializeWithNew()'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database_generic.o): in function `crashpad::CrashReportDatabaseGeneric::FinishedWritingCrashReport(std::unique_ptr<crashpad::CrashReportDatabase::NewReport, std::default_delete<crashpad::CrashReportDatabase::NewReport> >, crashpad::UUID*)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:359: undefined reference to `crashpad::FileWriter::Close()'\r\n[build] /usr/bin/ld: /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:368: undefined reference to `crashpad::FileWriter::Close()'\r\n[build] /usr/bin/ld: /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:376: undefined reference to `crashpad::Metrics::CrashReportPending(crashpad::Metrics::PendingReportReason)'\r\n[build] /usr/bin/ld: /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:377: undefined reference to `crashpad::Metrics::CrashReportSize(long)'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database_generic.o): in function `crashpad::CrashReportDatabaseGeneric::ReportPath(crashpad::UUID const&, crashpad::CrashReportDatabaseGeneric::ReportState)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:611: undefined reference to `crashpad::UUID::ToString[abi:cxx11]() const'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database_generic.o): in function `crashpad::CrashReportDatabaseGeneric::SkipReportUpload(crashpad::UUID const&, crashpad::Metrics::CrashSkippedReason)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:432: undefined reference to `crashpad::Metrics::CrashUploadSkipped(crashpad::Metrics::CrashSkippedReason)'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database_generic.o): in function `crashpad::CrashReportDatabaseGeneric::RequestUpload(crashpad::UUID const&)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:521: undefined reference to `crashpad::Metrics::CrashReportPending(crashpad::Metrics::PendingReportReason)'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database_generic.o): in function `crashpad::CrashReportDatabaseGeneric::CleanOrphanedAttachments()':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:792: undefined reference to `crashpad::UUID::InitializeFromString(base::BasicStringPiece<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > const&)'\r\n[build] /usr/bin/ld: /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:800: undefined reference to `crashpad::UUID::ToString[abi:cxx11]() const'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database_generic.o): in function `crashpad::CrashReportDatabaseGeneric::RecordUploadAttempt(crashpad::CrashReportDatabase::UploadReport*, bool, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:562: undefined reference to `crashpad::Metrics::CrashUploadAttempted(bool)'\r\n[build] /usr/bin/ld: /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:583: undefined reference to `crashpad::FileReader::Close()'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database_generic.o): in function `crashpad::(anonymous namespace)::UUIDFromReportPath(base::FilePath const&)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:45: undefined reference to `crashpad::UUID::InitializeFromString(base::BasicStringPiece<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > const&)'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database_generic.o): in function `crashpad::CrashReportDatabaseGeneric::ReadMetadata(base::FilePath const&, crashpad::CrashReportDatabase::Report*)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database_generic.cc:831: undefined reference to `crashpad::UUID::InitializeFromString(base::BasicStringPiece<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > const&)'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database_generic.o): in function `base::ScopedGeneric<base::FilePath, crashpad::ScopedRemoveFileTraits>::FreeIfNecessary()':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/third_party/mini_chromium/mini_chromium/base/scoped_generic.h:87: undefined reference to `crashpad::ScopedRemoveFileTraits::Free(base::FilePath const&)'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database.o): in function `crashpad::CrashReportDatabase::NewReport::Initialize(crashpad::CrashReportDatabase*, base::FilePath const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database.cc:67: undefined reference to `crashpad::UUID::InitializeWithNew()'\r\n[build] /usr/bin/ld: /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database.cc:74: undefined reference to `crashpad::UUID::ToString[abi:cxx11]() const'\r\n[build] /usr/bin/ld: /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database.cc:78: undefined reference to `crashpad::FileWriter::Open(base::FilePath const&, crashpad::FileWriteMode, crashpad::FilePermissions)'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database.o): in function `crashpad::CrashReportDatabase::NewReport::Reader()':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database.cc:88: undefined reference to `crashpad::FileReader::Open(base::FilePath const&)'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database.o): in function `crashpad::CrashReportDatabase::NewReport::AddAttachment(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database.cc:113: undefined reference to `crashpad::FileWriter::Open(base::FilePath const&, crashpad::FileWriteMode, crashpad::FilePermissions)'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database.o): in function `crashpad::CrashReportDatabase::AttachmentsPath(crashpad::UUID const&)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database.cc:183: undefined reference to `crashpad::UUID::ToString[abi:cxx11]() const'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database.o): in function `crashpad::CrashReportDatabase::UploadReport::InitializeAttachments()':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database.cc:136: undefined reference to `crashpad::FileReader::Open(base::FilePath const&)'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database.o): in function `crashpad::CrashReportDatabase::UploadReport::Initialize(base::FilePath const&, crashpad::CrashReportDatabase*)':\r\n[build] /usr/local/share/vcpkg/buildtrees/crashpad/x64-linux-dbg/../src/4c3e2d1c10-27b97453fa.clean/client/crash_report_database.cc:167: undefined reference to `crashpad::FileReader::Open(base::FilePath const&)'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database.o): in function `std::_MakeUniq<crashpad::FileWriter>::__single_object std::make_unique<crashpad::FileWriter>()':\r\n[build] /usr/bin/../lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9/bits/unique_ptr.h:857: undefined reference to `crashpad::FileWriter::FileWriter()'\r\n[build] /usr/bin/ld: vcpkg_installed/x64-linux/debug/lib/libcommon.a(common.crash_report_database.o): in function `std::_MakeUniq<crashpad::FileReader>::__single_object std::make_unique<crashpad::FileReader>()':\r\n[build] /usr/bin/../lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9/bits/unique_ptr.h:857: undefined reference to `crashpad::FileReader::FileReader()'\r\n[build] collect2: error: ld returned 1 exit status\r\n[build] ninja: build stopped: subcommand failed.\r\n[proc] 命令“/usr/local/share/vcpkg/downloads/tools/cmake-3.29.2-linux/cmake-3.29.2-linux-x86_64/bin/cmake --build /home/fxy/demo/Cpp-Examples/build --config Debug --target all --”已退出，代码为 1\r\n[driver] 生成完毕: 00:00:01.569\r\n[build] 生成已完成，退出代码为 1\r\n\r\n\r\n<details><summary>CMakeLists.txt</summary>\r\n\r\n```\r\nadd_executable(crashpad_test main.cc)\r\ntarget_link_libraries(crashpad_test PRIVATE crashpad::crashpad)\r\n\r\nif(CMAKE_HOST_LINUX)\r\n  target_link_libraries(crashpad_test PRIVATE Threads::Threads)\r\nendif()\r\n\r\n```\r\n</details>\r\n","closed_by":{"login":"JavierMatosD","id":44559473,"node_id":"MDQ6VXNlcjQ0NTU5NDcz","avatar_url":"https://avatars.githubusercontent.com/u/44559473?v=4","gravatar_id":"","url":"https://api.github.com/users/JavierMatosD","html_url":"https://github.com/JavierMatosD","followers_url":"https://api.github.com/users/JavierMatosD/followers","following_url":"https://api.github.com/users/JavierMatosD/following{/other_user}","gists_url":"https://api.github.com/users/JavierMatosD/gists{/gist_id}","starred_url":"https://api.github.com/users/JavierMatosD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JavierMatosD/subscriptions","organizations_url":"https://api.github.com/users/JavierMatosD/orgs","repos_url":"https://api.github.com/users/JavierMatosD/repos","events_url":"https://api.github.com/users/JavierMatosD/events{/privacy}","received_events_url":"https://api.github.com/users/JavierMatosD/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/38414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vcpkg/issues/38414/timeline","performed_via_github_app":null,"state_reason":"completed"}