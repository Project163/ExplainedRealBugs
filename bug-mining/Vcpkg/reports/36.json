{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/38005","repository_url":"https://api.github.com/repos/microsoft/vcpkg","labels_url":"https://api.github.com/repos/microsoft/vcpkg/issues/38005/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vcpkg/issues/38005/comments","events_url":"https://api.github.com/repos/microsoft/vcpkg/issues/38005/events","html_url":"https://github.com/microsoft/vcpkg/issues/38005","id":2229232724,"node_id":"I_kwDOBBJcqc6E32RU","number":38005,"title":"[icu] build failure","user":{"login":"kobalicek","id":6491301,"node_id":"MDQ6VXNlcjY0OTEzMDE=","avatar_url":"https://avatars.githubusercontent.com/u/6491301?v=4","gravatar_id":"","url":"https://api.github.com/users/kobalicek","html_url":"https://github.com/kobalicek","followers_url":"https://api.github.com/users/kobalicek/followers","following_url":"https://api.github.com/users/kobalicek/following{/other_user}","gists_url":"https://api.github.com/users/kobalicek/gists{/gist_id}","starred_url":"https://api.github.com/users/kobalicek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kobalicek/subscriptions","organizations_url":"https://api.github.com/users/kobalicek/orgs","repos_url":"https://api.github.com/users/kobalicek/repos","events_url":"https://api.github.com/users/kobalicek/events{/privacy}","received_events_url":"https://api.github.com/users/kobalicek/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":443248436,"node_id":"MDU6TGFiZWw0NDMyNDg0MzY=","url":"https://api.github.com/repos/microsoft/vcpkg/labels/category:port-feature","name":"category:port-feature","color":"30e65a","default":false,"description":"The issue is with a library, which is requesting new capabilities that didnâ€™t exist"}],"state":"closed","locked":false,"assignee":{"login":"MonicaLiu0311","id":110024546,"node_id":"U_kgDOBo7XYg","avatar_url":"https://avatars.githubusercontent.com/u/110024546?v=4","gravatar_id":"","url":"https://api.github.com/users/MonicaLiu0311","html_url":"https://github.com/MonicaLiu0311","followers_url":"https://api.github.com/users/MonicaLiu0311/followers","following_url":"https://api.github.com/users/MonicaLiu0311/following{/other_user}","gists_url":"https://api.github.com/users/MonicaLiu0311/gists{/gist_id}","starred_url":"https://api.github.com/users/MonicaLiu0311/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MonicaLiu0311/subscriptions","organizations_url":"https://api.github.com/users/MonicaLiu0311/orgs","repos_url":"https://api.github.com/users/MonicaLiu0311/repos","events_url":"https://api.github.com/users/MonicaLiu0311/events{/privacy}","received_events_url":"https://api.github.com/users/MonicaLiu0311/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"MonicaLiu0311","id":110024546,"node_id":"U_kgDOBo7XYg","avatar_url":"https://avatars.githubusercontent.com/u/110024546?v=4","gravatar_id":"","url":"https://api.github.com/users/MonicaLiu0311","html_url":"https://github.com/MonicaLiu0311","followers_url":"https://api.github.com/users/MonicaLiu0311/followers","following_url":"https://api.github.com/users/MonicaLiu0311/following{/other_user}","gists_url":"https://api.github.com/users/MonicaLiu0311/gists{/gist_id}","starred_url":"https://api.github.com/users/MonicaLiu0311/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MonicaLiu0311/subscriptions","organizations_url":"https://api.github.com/users/MonicaLiu0311/orgs","repos_url":"https://api.github.com/users/MonicaLiu0311/repos","events_url":"https://api.github.com/users/MonicaLiu0311/events{/privacy}","received_events_url":"https://api.github.com/users/MonicaLiu0311/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2024-04-06T13:01:04Z","updated_at":"2024-05-17T21:31:12Z","closed_at":"2024-05-17T21:31:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Operating system\n\nMacos\n\n### Compiler\n\nClang\n\n### Steps to reproduce the behavior\n\n```Shell\n$VCPKG_ROOT/vcpkg install icu\n```\n\n\n### Failure logs\n\n % $VCPKG_ROOT/vcpkg install icu                  \r\nComputing installation plan...\r\nThe following packages will be built and installed:\r\n    icu[core,tools]:arm64-osx@74.2#1\r\nDetecting compiler hash for triplet arm64-osx...\r\nRestored 0 package(s) from /Users/petr/.cache/vcpkg/archives in 4.75 us. Use --debug to see more details.\r\nInstalling 1/1 icu[core,tools]:arm64-osx@74.2#1...\r\nBuilding icu[core,tools]:arm64-osx@74.2#1...\r\n-- Using cached icu4c-74_2-src.tgz.\r\n-- Cleaning sources at /Users/petr/oss/vcpkg/buildtrees/icu/src/c-74_2-src-83138cd994.clean. Use --editable to skip cleaning for the packages you specify.\r\n-- Extracting source /Users/petr/oss/vcpkg/downloads/icu4c-74_2-src.tgz\r\n-- Applying patch disable-escapestr-tool.patch\r\n-- Applying patch remove-MD-from-configure.patch\r\n-- Applying patch fix_parallel_build_on_windows.patch\r\n-- Applying patch fix-extra.patch\r\n-- Applying patch mingw-dll-install.patch\r\n-- Applying patch disable-static-prefix.patch\r\n-- Applying patch fix-win-build.patch\r\n-- Applying patch vcpkg-cross-data.patch\r\n-- Applying patch darwin-rpath.patch\r\n-- Using source at /Users/petr/oss/vcpkg/buildtrees/icu/src/c-74_2-src-83138cd994.clean\r\n-- Getting CMake variables for arm64-osx-dbg\r\n-- Getting CMake variables for arm64-osx-rel\r\n-- Generating configure for arm64-osx\r\n-- Finished generating configure for arm64-osx\r\n-- Configuring arm64-osx-dbg\r\nCMake Error at scripts/cmake/vcpkg_execute_required_process.cmake:112 (message):\r\n    Command failed: /bin/bash -c \"V=1 ./../src/c-74_2-src-83138cd994.clean/source/configure  \\\"--enable-tools\\\" \\\"--disable-samples\\\" \\\"--disable-tests\\\" \\\"--disable-layoutex\\\" \\\"--disable-silent-rules\\\" \\\"--verbose\\\" \\\"--disable-shared\\\" \\\"--enable-static\\\" \\\"--enable-debug\\\" \\\"--disable-release\\\" \\\"--prefix=/Users/petr/oss/vcpkg/installed/arm64-osx/debug\\\" \\\"--bindir=\\\\${prefix}/../tools/icu/debug/bin\\\" \\\"--sbindir=\\\\${prefix}/../tools/icu/debug/sbin\\\" \\\"--libdir=\\\\${prefix}/lib\\\" \\\"--includedir=\\\\${prefix}/../include\\\" \\\"--datarootdir=\\\\${prefix}/share/icu\\\"\"\r\n    Working Directory: /Users/petr/oss/vcpkg/buildtrees/icu/arm64-osx-dbg\r\n    Error code: 1\r\n    See logs for more information:\r\n      /Users/petr/oss/vcpkg/buildtrees/icu/config-arm64-osx-dbg-config.log\r\n      /Users/petr/oss/vcpkg/buildtrees/icu/config-arm64-osx-dbg-out.log\r\n      /Users/petr/oss/vcpkg/buildtrees/icu/config-arm64-osx-dbg-err.log\r\n\r\nCall Stack (most recent call first):\r\n  scripts/cmake/vcpkg_configure_make.cmake:863 (vcpkg_execute_required_process)\r\n  ports/icu/portfile.cmake:66 (vcpkg_configure_make)\r\n  scripts/ports.cmake:175 (include)\r\n\r\n\r\nerror: building icu:arm64-osx failed with: BUILD_FAILED\r\nElapsed time to handle icu:arm64-osx: 3.9 s\r\nPlease ensure you're using the latest port files with `git pull` and `vcpkg update`.\r\nThen check for known issues at:\r\n  https://github.com/microsoft/vcpkg/issues?q=is%3Aissue+is%3Aopen+in%3Atitle+icu\r\nYou can submit a new issue at:\r\n  https://github.com/microsoft/vcpkg/issues/new?title=[icu]+Build+error+on+arm64-osx&body=Copy+issue+body+from+%2FUsers%2Fpetr%2Foss%2Fvcpkg%2Finstalled%2Fvcpkg%2Fissue_body.md\r\n\r\nThe most interesting line from the `config-arm64-osx-dbg` log is:\r\n\r\n`autoconf-archive is missing`\r\n\r\nWhich is actually the problem.\n\n### Additional context\n\nI have solved this by installing autoconf-archive via brew `brew install autoconf-archive`, however, I'm not sure whether this package should not be installed via vcpkg instead, because this basically means that I need to install a build dependency explicitly.\r\n\r\nAlso, maybe vcpkg should hint to do this even before attempting to configure the package?","closed_by":{"login":"data-queue","id":144965964,"node_id":"U_kgDOCKQBTA","avatar_url":"https://avatars.githubusercontent.com/u/144965964?v=4","gravatar_id":"","url":"https://api.github.com/users/data-queue","html_url":"https://github.com/data-queue","followers_url":"https://api.github.com/users/data-queue/followers","following_url":"https://api.github.com/users/data-queue/following{/other_user}","gists_url":"https://api.github.com/users/data-queue/gists{/gist_id}","starred_url":"https://api.github.com/users/data-queue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/data-queue/subscriptions","organizations_url":"https://api.github.com/users/data-queue/orgs","repos_url":"https://api.github.com/users/data-queue/repos","events_url":"https://api.github.com/users/data-queue/events{/privacy}","received_events_url":"https://api.github.com/users/data-queue/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/38005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vcpkg/issues/38005/timeline","performed_via_github_app":null,"state_reason":"completed"}