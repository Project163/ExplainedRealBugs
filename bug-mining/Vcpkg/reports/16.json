{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/37968","repository_url":"https://api.github.com/repos/microsoft/vcpkg","labels_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37968/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37968/comments","events_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37968/events","html_url":"https://github.com/microsoft/vcpkg/issues/37968","id":2225143115,"node_id":"I_kwDOBBJcqc6EoP1L","number":37968,"title":"[vcpkg-cmake-config] Wrong *Config.cmake files for CMake 3.29.1","user":{"login":"SimiPro","id":1699927,"node_id":"MDQ6VXNlcjE2OTk5Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1699927?v=4","gravatar_id":"","url":"https://api.github.com/users/SimiPro","html_url":"https://github.com/SimiPro","followers_url":"https://api.github.com/users/SimiPro/followers","following_url":"https://api.github.com/users/SimiPro/following{/other_user}","gists_url":"https://api.github.com/users/SimiPro/gists{/gist_id}","starred_url":"https://api.github.com/users/SimiPro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimiPro/subscriptions","organizations_url":"https://api.github.com/users/SimiPro/orgs","repos_url":"https://api.github.com/users/SimiPro/repos","events_url":"https://api.github.com/users/SimiPro/events{/privacy}","received_events_url":"https://api.github.com/users/SimiPro/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2131938796,"node_id":"MDU6TGFiZWwyMTMxOTM4Nzk2","url":"https://api.github.com/repos/microsoft/vcpkg/labels/category:tool-update","name":"category:tool-update","color":"94d7dd","default":false,"description":"The issue is with build tool or build script, which requires update or should be executed correctly"}],"state":"closed","locked":false,"assignee":{"login":"WangWeiLin-MV","id":156736127,"node_id":"U_kgDOCVeafw","avatar_url":"https://avatars.githubusercontent.com/u/156736127?v=4","gravatar_id":"","url":"https://api.github.com/users/WangWeiLin-MV","html_url":"https://github.com/WangWeiLin-MV","followers_url":"https://api.github.com/users/WangWeiLin-MV/followers","following_url":"https://api.github.com/users/WangWeiLin-MV/following{/other_user}","gists_url":"https://api.github.com/users/WangWeiLin-MV/gists{/gist_id}","starred_url":"https://api.github.com/users/WangWeiLin-MV/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WangWeiLin-MV/subscriptions","organizations_url":"https://api.github.com/users/WangWeiLin-MV/orgs","repos_url":"https://api.github.com/users/WangWeiLin-MV/repos","events_url":"https://api.github.com/users/WangWeiLin-MV/events{/privacy}","received_events_url":"https://api.github.com/users/WangWeiLin-MV/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"WangWeiLin-MV","id":156736127,"node_id":"U_kgDOCVeafw","avatar_url":"https://avatars.githubusercontent.com/u/156736127?v=4","gravatar_id":"","url":"https://api.github.com/users/WangWeiLin-MV","html_url":"https://github.com/WangWeiLin-MV","followers_url":"https://api.github.com/users/WangWeiLin-MV/followers","following_url":"https://api.github.com/users/WangWeiLin-MV/following{/other_user}","gists_url":"https://api.github.com/users/WangWeiLin-MV/gists{/gist_id}","starred_url":"https://api.github.com/users/WangWeiLin-MV/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WangWeiLin-MV/subscriptions","organizations_url":"https://api.github.com/users/WangWeiLin-MV/orgs","repos_url":"https://api.github.com/users/WangWeiLin-MV/repos","events_url":"https://api.github.com/users/WangWeiLin-MV/events{/privacy}","received_events_url":"https://api.github.com/users/WangWeiLin-MV/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":16,"created_at":"2024-04-04T10:51:07Z","updated_at":"2024-04-23T01:43:06Z","closed_at":"2024-04-12T02:07:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\nSuddenly some of the libraries i use: tinyobjloader, tesseract, effolkronium_random have a wrong path in their corresponding *Config.cmake file. \r\n\r\nThe vcpkg phase works fine and then when I try to do find_package it crashes usually out of the *Config.cmake file from functions such as set_and_check.  \r\n\r\n**Environment**\r\n- OS: Linux\r\n- Compiler: revision gcc-11\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. ./vcpkg install effolkronium-random ( I used manifest mode) \r\n2. find_package(effolkronium_random CONFIG REQUIRED)\r\n3. see error\r\n\r\nYou can also checkout this repo: https://github.com/SimiPro/starter-cmake-vcpkg-simple \r\nand it crashes when you build the target app1. \r\n\r\nBut if you comment out the \"find_package(effolkronium_random CONFIG REQUIRED)\" in the apps/app1/CMakeLists.txt\r\nit works. \r\n\r\n**Expected behavior**\r\nNo error\r\n\r\n**Failure logs**\r\n[cmake] CMake Error at out/build/dev-debug-test/vcpkg_installed/x64-linux/share/effolkronium_random/effolkronium_randomConfig.cmake:11 (message):\r\n[cmake]   File or directory\r\n[cmake]   /home/simi/projects/starter_cmake_vcpkg/out/build/dev-debug-test/vcpkg_installed/x64-linux/share/include\r\n[cmake]   referenced by variable EFFOLKRONIUM_RANDOM_INCLUDE_DIR does not exist !\r\n[cmake] Call Stack (most recent call first):\r\n[cmake]   out/build/dev-debug-test/vcpkg_installed/x64-linux/share/effolkronium_random/effolkronium_randomConfig.cmake:26 (set_and_check)\r\n[cmake]   out/build/dev-debug-test/_deps/vcpkg-src/scripts/buildsystems/vcpkg.cmake:859 (_find_package)\r\n[cmake]   libs/lib1/CMakeLists.txt:11 (find_package)\r\n\r\n**Additional context**\r\n\r\nI can fix them. Usually the path is one to deep or one to less deep. But obviously after each configure i have to re-fix it. \r\n\r\nconcrete example would be the path effolkronium_randomConfig.cmake \r\nthis line: \r\n```get_filename_component(PACKAGE_${CMAKE_FIND_PACKAGE_NAME}_COUNTER_1 \"${CMAKE_CURRENT_LIST_DIR}/../\" ABSOLUTE)```\r\n\r\nShould be: ```get_filename_component(PACKAGE_${CMAKE_FIND_PACKAGE_NAME}_COUNTER_1 \"${CMAKE_CURRENT_LIST_DIR}/../../\" ABSOLUTE)```\r\n\r\nYou can also see the error in the github action on the project: \r\nhttps://github.com/SimiPro/starter-cmake-vcpkg-simple/actions/runs/8553715519/job/23437459032\r\n\r\n\r\n","closed_by":{"login":"WangWeiLin-MV","id":156736127,"node_id":"U_kgDOCVeafw","avatar_url":"https://avatars.githubusercontent.com/u/156736127?v=4","gravatar_id":"","url":"https://api.github.com/users/WangWeiLin-MV","html_url":"https://github.com/WangWeiLin-MV","followers_url":"https://api.github.com/users/WangWeiLin-MV/followers","following_url":"https://api.github.com/users/WangWeiLin-MV/following{/other_user}","gists_url":"https://api.github.com/users/WangWeiLin-MV/gists{/gist_id}","starred_url":"https://api.github.com/users/WangWeiLin-MV/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WangWeiLin-MV/subscriptions","organizations_url":"https://api.github.com/users/WangWeiLin-MV/orgs","repos_url":"https://api.github.com/users/WangWeiLin-MV/repos","events_url":"https://api.github.com/users/WangWeiLin-MV/events{/privacy}","received_events_url":"https://api.github.com/users/WangWeiLin-MV/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/37968/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37968/timeline","performed_via_github_app":null,"state_reason":"completed"}