diff --git a/ports/libwebp/0002-cmake-config.patch b/ports/libwebp/0002-cmake-config.patch
index af6be52320..ad191405ee 100644
--- a/ports/libwebp/0002-cmake-config.patch
+++ b/ports/libwebp/0002-cmake-config.patch
@@ -1,11 +1,11 @@
 diff --git a/cmake/WebPConfig.cmake.in b/cmake/WebPConfig.cmake.in
-index f334739..43f10e0 100644
+index a0d721f..8726c09 100644
 --- a/cmake/WebPConfig.cmake.in
 +++ b/cmake/WebPConfig.cmake.in
-@@ -12,5 +12,12 @@ include("${CMAKE_CURRENT_LIST_DIR}/@PROJECT_NAME@Targets.cmake")
- 
+@@ -13,7 +13,14 @@ include("${CMAKE_CURRENT_LIST_DIR}/@PROJECT_NAME@Targets.cmake")
  set_and_check(WebP_INCLUDE_DIR "@PACKAGE_CMAKE_INSTALL_INCLUDEDIR@")
- set(WEBP_INCLUDE_DIRS ${WebP_INCLUDE_DIRS})
+ set(WebP_INCLUDE_DIRS ${WebP_INCLUDE_DIR})
+ set(WEBP_INCLUDE_DIRS ${WebP_INCLUDE_DIR})
 -set(WebP_LIBRARIES "@INSTALLED_LIBRARIES@")
 +set(WebP_LIBRARIES "")
 +include(SelectLibraryConfigurations)
@@ -16,3 +16,5 @@ index f334739..43f10e0 100644
 +    list(APPEND WebP_LIBRARIES ${_vcpkg_${_vcpkg_libwebp_lib}_LIBRARIES})
 +endforeach()
  set(WEBP_LIBRARIES "${WebP_LIBRARIES}")
+ 
+ check_required_components(WebP)
diff --git a/ports/libwebp/0003-simd.patch b/ports/libwebp/0003-simd.patch
index 523e05d443..3c362364db 100644
--- a/ports/libwebp/0003-simd.patch
+++ b/ports/libwebp/0003-simd.patch
@@ -1,5 +1,5 @@
 diff --git a/cmake/cpu.cmake b/cmake/cpu.cmake
-index 7513ca8..38ec73b 100644
+index 040c524..f345b89 100644
 --- a/cmake/cpu.cmake
 +++ b/cmake/cpu.cmake
 @@ -50,7 +50,7 @@ if(MSVC AND CMAKE_C_COMPILER_ID STREQUAL "MSVC")
@@ -11,8 +11,8 @@ index 7513ca8..38ec73b 100644
    endif()
    set(SIMD_DISABLE_FLAGS)
  else()
-@@ -110,6 +110,9 @@ foreach(I_SIMD RANGE ${WEBP_SIMD_FLAGS_RANGE})
-        "src/dsp/*${WEBP_SIMD_FILE_EXTENSION}")
+@@ -111,6 +111,9 @@ foreach(I_SIMD RANGE ${WEBP_SIMD_FLAGS_RANGE})
+        "${CMAKE_CURRENT_LIST_DIR}/../src/dsp/*${WEBP_SIMD_FILE_EXTENSION}")
    if(WEBP_HAVE_${WEBP_SIMD_FLAG})
      # Memorize the file and flags.
 +    if("${SIMD_COMPILE_FLAG}" STREQUAL "")
diff --git a/ports/libwebp/0008-sdl.patch b/ports/libwebp/0008-sdl.patch
index 134ed975f8..7622ca4d8f 100644
--- a/ports/libwebp/0008-sdl.patch
+++ b/ports/libwebp/0008-sdl.patch
@@ -1,43 +1,31 @@
 diff --git a/CMakeLists.txt b/CMakeLists.txt
-index 0a5af42..636eef7 100644
+index b785a8e..f214a32 100644
 --- a/CMakeLists.txt
 +++ b/CMakeLists.txt
-@@ -647,26 +647,32 @@ if(WEBP_BUILD_EXTRAS)
-                         ${CMAKE_CURRENT_BINARY_DIR}/src ${SDL_INCLUDE_DIR})
+@@ -665,6 +665,10 @@ if(WEBP_BUILD_EXTRAS)
+                         ${CMAKE_CURRENT_BINARY_DIR}/src ${SDL2_INCLUDE_DIRS})
      set(WEBP_HAVE_SDL 1)
      target_compile_definitions(vwebp_sdl PUBLIC WEBP_HAVE_SDL)
 +    target_compile_definitions(vwebp_sdl PRIVATE WEBP_HAVE_JUST_SDL_H)
 +    if(WIN32)
 +        target_link_libraries(vwebp_sdl dxguid winmm)
 +    endif()
-   endif()
- endif()
  
- if(WEBP_BUILD_WEBP_JS)
-   # The default stack size changed from 5MB to 64KB in 3.1.27. See
-   # https://crbug.com/webp/614.
-   if(EMSCRIPTEN_VERSION VERSION_GREATER_EQUAL "3.1.27")
-      # TOTAL_STACK size was renamed to STACK_SIZE in 3.1.27. The old name was
-      # kept for compatibility, but prefer the new one in case it is removed in
-      # the future.
-      set(emscripten_stack_size "-sSTACK_SIZE=5MB")
-   else()
-      set(emscripten_stack_size "-sTOTAL_STACK=5MB")
-   endif()
-   # wasm2js does not support SIMD.
-+  find_package(SDL REQUIRED)
+     set(CMAKE_REQUIRED_INCLUDES "${SDL2_INCLUDE_DIRS}")
+     check_c_source_compiles(
+@@ -699,8 +703,9 @@ if(WEBP_BUILD_WEBP_JS)
    if(NOT WEBP_ENABLE_SIMD)
      # JavaScript version
      add_executable(webp_js ${CMAKE_CURRENT_SOURCE_DIR}/extras/webp_to_sdl.c)
--    target_link_libraries(webp_js webpdecoder SDL)
+-    target_link_libraries(webp_js webpdecoder SDL2)
 +    target_link_libraries(webp_js webpdecoder ${SDL_LIBRARY})
      target_include_directories(webp_js PRIVATE ${CMAKE_CURRENT_BINARY_DIR})
 +    target_include_directories(webp_js PRIVATE ${SDL_INCLUDE_DIR})
      set(WEBP_HAVE_SDL 1)
      set_target_properties(
        webp_js
-@@ -675,12 +681,15 @@ if(WEBP_BUILD_WEBP_JS)
-          -sEXPORTED_RUNTIME_METHODS=cwrap")
+@@ -715,12 +720,15 @@ if(WEBP_BUILD_WEBP_JS)
+          -sALLOW_MEMORY_GROWTH")
      set_target_properties(webp_js PROPERTIES OUTPUT_NAME webp)
      target_compile_definitions(webp_js PUBLIC EMSCRIPTEN WEBP_HAVE_SDL)
 +    target_compile_definitions(webp_js PUBLIC EMSCRIPTEN WEBP_HAVE_JUST_SDL_H)
@@ -45,11 +33,11 @@ index 0a5af42..636eef7 100644
  
    # WASM version
    add_executable(webp_wasm ${CMAKE_CURRENT_SOURCE_DIR}/extras/webp_to_sdl.c)
--  target_link_libraries(webp_wasm webpdecoder SDL)
+-  target_link_libraries(webp_wasm webpdecoder SDL2)
 +  target_link_libraries(webp_wasm webpdecoder ${SDL_LIBRARY})
    target_include_directories(webp_wasm PRIVATE ${CMAKE_CURRENT_BINARY_DIR})
 +  target_include_directories(webp_wasm PRIVATE ${SDL_INCLUDE_DIR})
 +  target_compile_definitions(webp_wasm PUBLIC EMSCRIPTEN WEBP_HAVE_JUST_SDL_H)
    set_target_properties(
      webp_wasm
-     PROPERTIES LINK_FLAGS "-sWASM=1 ${emscripten_stack_size} \
+     PROPERTIES
diff --git a/ports/libwebp/0010-fix_build.patch b/ports/libwebp/0010-fix_build.patch
deleted file mode 100644
index c33bee25e6..0000000000
--- a/ports/libwebp/0010-fix_build.patch
+++ /dev/null
@@ -1,21 +0,0 @@
-diff --git a/CMakeLists.txt b/CMakeLists.txt
-index 636eef7..80361f1 100644
---- a/CMakeLists.txt
-+++ b/CMakeLists.txt
-@@ -452,6 +452,7 @@ endif()
- if(WEBP_BUILD_ANIM_UTILS
-    OR WEBP_BUILD_CWEBP
-    OR WEBP_BUILD_DWEBP
-+   OR WEBP_BUILD_EXTRAS
-    OR WEBP_BUILD_GIF2WEBP
-    OR WEBP_BUILD_IMG2WEBP
-    OR WEBP_BUILD_VWEBP
-@@ -488,6 +489,8 @@ if(WEBP_BUILD_ANIM_UTILS
-     TARGET exampleutil imageioutil imagedec imageenc
-     PROPERTY INCLUDE_DIRECTORIES ${CMAKE_CURRENT_SOURCE_DIR}/src
-              ${CMAKE_CURRENT_BINARY_DIR}/src)
-+  target_include_directories(imagedec PRIVATE ${WEBP_DEP_IMG_INCLUDE_DIRS})
-+  target_include_directories(imageenc PRIVATE ${WEBP_DEP_IMG_INCLUDE_DIRS})
- endif()
- 
- if(WEBP_BUILD_DWEBP)
diff --git a/ports/libwebp/0011-fix-include.patch b/ports/libwebp/0011-fix-include.patch
deleted file mode 100644
index 899378541d..0000000000
--- a/ports/libwebp/0011-fix-include.patch
+++ /dev/null
@@ -1,13 +0,0 @@
-diff --git a/cmake/WebPConfig.cmake.in b/cmake/WebPConfig.cmake.in
-index 74a5891..4c084d9 100644
---- a/cmake/WebPConfig.cmake.in
-+++ b/cmake/WebPConfig.cmake.in
-@@ -11,7 +11,7 @@ endif()
- include("${CMAKE_CURRENT_LIST_DIR}/@PROJECT_NAME@Targets.cmake")
- 
- set_and_check(WebP_INCLUDE_DIR "@PACKAGE_CMAKE_INSTALL_INCLUDEDIR@")
--set(WEBP_INCLUDE_DIRS ${WebP_INCLUDE_DIRS})
-+set(WEBP_INCLUDE_DIRS ${WebP_INCLUDE_DIR})
- set(WebP_LIBRARIES "")
- include(SelectLibraryConfigurations)
- foreach(_vcpkg_libwebp_lib IN ITEMS @INSTALLED_LIBRARIES@ sharpyuv)
diff --git a/ports/libwebp/portfile.cmake b/ports/libwebp/portfile.cmake
index 45bb1c3119..519ff89e6c 100644
--- a/ports/libwebp/portfile.cmake
+++ b/ports/libwebp/portfile.cmake
@@ -2,14 +2,12 @@ vcpkg_from_github(
     OUT_SOURCE_PATH SOURCE_PATH
     REPO webmproject/libwebp
     REF "v${VERSION}"
-    SHA512 2faa1bee1b73ded2b1460fc50a5973a37eefdc7b88d6a013491ba1c921d61413a653d44a953e8f6a3161ca6183f57ca9fe3be0f0a72b480895a299429a500dcf
+    SHA512 666b53fb33fa7895bf9dc83ca24e09865cf7fba7ae88b77f15a2ce11d94e84d5a6b8a084f0d8cad6c2a6eb8868ea7268f7efd2f6886148bbb58b7a3522957cde
     HEAD_REF master
     PATCHES
         0002-cmake-config.patch
         0003-simd.patch
         0008-sdl.patch
-        0010-fix_build.patch
-        0011-fix-include.patch
 )
 
 vcpkg_check_features(OUT_FEATURE_OPTIONS FEATURE_OPTIONS
diff --git a/ports/libwebp/vcpkg.json b/ports/libwebp/vcpkg.json
index 614a9455e9..82175d5556 100644
--- a/ports/libwebp/vcpkg.json
+++ b/ports/libwebp/vcpkg.json
@@ -1,6 +1,6 @@
 {
   "name": "libwebp",
-  "version": "1.3.2",
+  "version": "1.4.0",
   "description": "WebP codec: library to encode and decode images in WebP format",
   "homepage": "https://github.com/webmproject/libwebp",
   "license": "BSD-3-Clause",
diff --git a/versions/baseline.json b/versions/baseline.json
index 699bb4e080..1860314e00 100644
--- a/versions/baseline.json
+++ b/versions/baseline.json
@@ -5157,7 +5157,7 @@
       "port-version": 1
     },
     "libwebp": {
-      "baseline": "1.3.2",
+      "baseline": "1.4.0",
       "port-version": 0
     },
     "libwebsockets": {
diff --git a/versions/l-/libwebp.json b/versions/l-/libwebp.json
index f113c1c628..c81c32499f 100644
--- a/versions/l-/libwebp.json
+++ b/versions/l-/libwebp.json
@@ -1,5 +1,10 @@
 {
   "versions": [
+    {
+      "git-tree": "1423eee644e6b8ba75d0f936115d8709980a3c52",
+      "version": "1.4.0",
+      "port-version": 0
+    },
     {
       "git-tree": "0b981028589375097039d5e39e7d87659cdfa824",
       "version": "1.3.2",
