<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:20:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-8911] Implicit TimeWindowedSerde creates Serde with null inner serializer</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-8911</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;&lt;tt&gt;Serdes.scala&lt;/tt&gt; contains an implicit def timeWindowedSerde as below:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
implicit def timeWindowedSerde[T]: WindowedSerdes.TimeWindowedSerde[T] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WindowedSerdes.TimeWindowedSerde[T]()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It creates a new &lt;tt&gt;TimeWindowedSerde&lt;/tt&gt; without inner serializer, which is a bug. Even in &lt;tt&gt;WindowedSerdes.java&lt;/tt&gt; it says that empty constructor is for reflection.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// Default constructor needed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; reflection object creation
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TimeWindowedSerde() {
    &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TimeWindowedSerializer&amp;lt;&amp;gt;(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TimeWindowedDeserializer&amp;lt;&amp;gt;());
}

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TimeWindowedSerde(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Serde&amp;lt;T&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt;) {
     &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TimeWindowedSerializer&amp;lt;&amp;gt;(&lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt;.serializer()), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TimeWindowedDeserializer&amp;lt;&amp;gt;(&lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt;.deserializer()));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All above failes for me when I try to implicitly access the right Serde:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; val twSerde = implicitly[TimeWindowedSerde[&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;]]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and I have to create the object properly on my own&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; val twSerde = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WindowedSerdes.TimeWindowedSerde[&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;](implicitly[Serde[&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;]])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it could be fixed with a proper call in &lt;tt&gt;Serdes.scala&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  implicit def timeWindowedSerde[T](implicit tSerde: Serde[T]): WindowedSerdes.TimeWindowedSerde[T] =
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WindowedSerdes.TimeWindowedSerde[T](tSerde)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But maybe also the scope of the default constructor for &lt;tt&gt;TimeWindowedSerde&lt;/tt&gt; should be changed?&lt;/p&gt;

&lt;p&gt;BR, Micha&#322;&lt;/p&gt;



</description>
                <environment></environment>
        <key id="13256867">KAFKA-8911</key>
            <summary>Implicit TimeWindowedSerde creates Serde with null inner serializer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="atais">Micha&#322;</assignee>
                                    <reporter username="atais">Micha&#322;</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Sep 2019 12:27:13 +0000</created>
                <updated>Mon, 30 Sep 2019 22:54:36 +0000</updated>
                            <resolved>Mon, 30 Sep 2019 22:54:36 +0000</resolved>
                                    <version>2.3.0</version>
                                    <fixVersion>2.4.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16930508" author="atais" created="Mon, 16 Sep 2019 12:42:59 +0000"  >&lt;p&gt;PS I can make a fix MR on Github, but I dont know the procedure here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16930954" author="mjsax" created="Mon, 16 Sep 2019 23:14:59 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=atais&quot; class=&quot;user-hover&quot; rel=&quot;atais&quot;&gt;atais&lt;/a&gt;. You can find more details about the procedure on the web page and in the wiki:&#160;&lt;a href=&quot;https://kafka.apache.org/contributing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://kafka.apache.org/contributing&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We take Github PR for contributions.&lt;/p&gt;</comment>
                            <comment id="16930955" author="mjsax" created="Mon, 16 Sep 2019 23:16:25 +0000"  >&lt;p&gt;I added you to the list on contributors and assigned the ticket to you. You can now also self-assign tickets.&lt;/p&gt;</comment>
                            <comment id="16931314" author="githubbot" created="Tue, 17 Sep 2019 11:03:55 +0000"  >&lt;p&gt;atais commented on pull request #7352: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8911&quot; title=&quot;Implicit TimeWindowedSerde creates Serde with null inner serializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8911&quot;&gt;&lt;del&gt;KAFKA-8911&lt;/del&gt;&lt;/a&gt;: Using proper WindowSerdes constructors in their implicit definitions&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7352&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7352&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Detailed info is available in the ticket: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8911&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-8911&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Briefly, `implicit defs` are calling empty constructors, which exists only for reflection object creation.&lt;br/&gt;
   Therefore, while using the implicit definitons, a NPE occurs when Serde is called.&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Verify design and implementation&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16931614" author="atais" created="Tue, 17 Sep 2019 16:17:51 +0000"  >&lt;p&gt;The test failure seems a bit random to me but I can not restart it&lt;/p&gt;</comment>
                            <comment id="16931670" author="mjsax" created="Tue, 17 Sep 2019 17:15:56 +0000"  >&lt;p&gt;Thanks for the PR &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=atais&quot; class=&quot;user-hover&quot; rel=&quot;atais&quot;&gt;atais&lt;/a&gt; &#8211; you can re-trigger a build by adding a comment on the PR that contains the phrase &quot;retest this please&quot;. I would hold off for now to rerun the tests until you got a review though &#8211; if you need to update the PR each `push` will trigger retesting anyway &#8211; Jenkins is often overloaded anyway and we try to save cycles if we can.&lt;/p&gt;

&lt;p&gt;&#160;Btw: please ask question directly on the PR&#160;instead of the Jira ticket&#160;&#8211; that&apos;s easier for us. Thanks a lot.&lt;/p&gt;</comment>
                            <comment id="16941391" author="githubbot" created="Mon, 30 Sep 2019 22:53:30 +0000"  >&lt;p&gt;bbejeck commented on pull request #7352: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8911&quot; title=&quot;Implicit TimeWindowedSerde creates Serde with null inner serializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8911&quot;&gt;&lt;del&gt;KAFKA-8911&lt;/del&gt;&lt;/a&gt;: Using proper WindowSerdes constructors in their implicit definitions&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7352&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7352&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06ob4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>