<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:06:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-6166] Streams configuration requires consumer. and producer. in order to be read</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-6166</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Problem:&lt;/p&gt;

&lt;p&gt;In previous release you could specify a custom metrics reporter like so:&lt;/p&gt;

&lt;p&gt;Properties config = new Properties(); &lt;br/&gt;
config.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;kafka-broker1:9092&quot;); &lt;br/&gt;
config.put(StreamsConfig.METRIC_REPORTER_CLASSES_CONFIG, &quot;com.mycompany.MetricReporter&quot;); &lt;br/&gt;
config.put(&quot;custom-key-for-metric-reporter&quot;, &quot;value&quot;);&lt;/p&gt;

&lt;p&gt;From 0.11.0.0 onwards this is no longer possible, as you have to specify consumer.custom-key-for-metric-reporter or producer.custom-key-for-metric-reporter otherwise it&apos;s stripped out of the configuration.&lt;/p&gt;

&lt;p&gt;So, if you wish to use a metrics reporter and to collect producer and consumer metrics, as well as kafka-streams metrics, that you would need to specify 3 distinct configs:&lt;/p&gt;

&lt;p&gt;1) consumer.custom-key-for-metric-reporter &lt;br/&gt;
2) producer.custom-key-for-metric-reporter &lt;br/&gt;
3) custom-key-for-metric-reporter&lt;/p&gt;

&lt;p&gt;This appears to be a regression.&lt;/p&gt;</description>
                <environment>Kafka 0.11.0.0&lt;br/&gt;
JDK 1.8&lt;br/&gt;
CoreOS</environment>
        <key id="13115884">KAFKA-6166</key>
            <summary>Streams configuration requires consumer. and producer. in order to be read</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="h314to">Filipe Agapito</assignee>
                                    <reporter username="Juma">Justin Manchester</reporter>
                        <labels>
                            <label>newbie++</label>
                            <label>user-experience</label>
                    </labels>
                <created>Fri, 3 Nov 2017 10:48:13 +0000</created>
                <updated>Tue, 30 Jan 2018 22:14:53 +0000</updated>
                            <resolved>Tue, 30 Jan 2018 18:40:14 +0000</resolved>
                                    <version>0.11.0.0</version>
                                    <fixVersion>1.0.1</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="16237846" author="yuzhihong@gmail.com" created="Fri, 3 Nov 2017 16:27:43 +0000"  >&lt;p&gt;How about populating the first two configs with the value for custom-key-for-metric-reporter, by default ?&lt;/p&gt;</comment>
                            <comment id="16238531" author="guozhang" created="Fri, 3 Nov 2017 22:49:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wushujames&quot; class=&quot;user-hover&quot; rel=&quot;wushujames&quot;&gt;wushujames&lt;/a&gt; asked about this issue as well, so just copy-pasting my replies here:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Thanks &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; bringing &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; up.

The original design is to let users apply the prefix ONLY &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; they want to override &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the specific client. For example, &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; `metric.reporters` or `interceptor.classes` which are defined &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; both producer and consumer (and moving forward we are adding admin client as well), without the prefix they will be applied to all embedded clients; and &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; users want to have different config value overrides &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; different clients, they can use the prefix.

So is you define &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; `metrics.reporter` it should be applied to both producer and consumer (is it not the &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; you? Please confirm).

For custom config k-v pairs, I think we did not discuss about &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; in-depth. But our currently implementation is, indeed, restricting to producer / consumer client prop definition only, &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example.

getClientPropsWithPrefix(CONSUMER_PREFIX, ConsumerConfig.configNames());
props.putAll(originalsWithPrefix(prefix));

so &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; you &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not add the prefix to your custom k-v pairs, it will be skipped. Thinking about it a bit, I think we should probably &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; what you were inclining to, i.e. to define custom k-v pairs also globally unless overridden by prefix. 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16238673" author="wushujames" created="Sat, 4 Nov 2017 01:19:56 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt;. Just to make sure I understand, currently, if I want to apply my metric reporter to both the producer and consumer, what I need to do is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Properties config = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Properties(); 
config.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &lt;span class=&quot;code-quote&quot;&gt;&quot;kafka-broker1:9092&quot;&lt;/span&gt;); 
config.put(StreamsConfig.METRIC_REPORTER_CLASSES_CONFIG, &lt;span class=&quot;code-quote&quot;&gt;&quot;com.mycompany.MetricReporter&quot;&lt;/span&gt;); 
config.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;consumer.custom-key-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-metric-reporter&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;);
config.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;producer.custom-key-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-metric-reporter&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And if I want to apply to kafka streams itself and the producer and the consumer, I need to do&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Properties config = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Properties(); 
config.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &lt;span class=&quot;code-quote&quot;&gt;&quot;kafka-broker1:9092&quot;&lt;/span&gt;); 
config.put(StreamsConfig.METRIC_REPORTER_CLASSES_CONFIG, &lt;span class=&quot;code-quote&quot;&gt;&quot;com.mycompany.MetricReporter&quot;&lt;/span&gt;); 
config.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;consumer.custom-key-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-metric-reporter&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;);
config.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;producer.custom-key-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-metric-reporter&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;);
config.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;custom-key-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-metric-reporter&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is that right?&lt;/p&gt;

&lt;p&gt;And in the future, if this JIRA is fixed, I will simply need to do:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Properties config = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Properties(); 
config.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &lt;span class=&quot;code-quote&quot;&gt;&quot;kafka-broker1:9092&quot;&lt;/span&gt;); 
config.put(StreamsConfig.METRIC_REPORTER_CLASSES_CONFIG, &lt;span class=&quot;code-quote&quot;&gt;&quot;com.mycompany.MetricReporter&quot;&lt;/span&gt;); 
config.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;custom-key-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-metric-reporter&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is that right?&lt;/p&gt;</comment>
                            <comment id="16239760" author="guozhang" created="Sun, 5 Nov 2017 23:04:26 +0000"  >&lt;p&gt;That is right. &lt;/p&gt;

&lt;p&gt;Today only the (producer/consumer-)defined property will be passed without the prefix, indicating &quot;apply this to producer/consumer&quot;. So that&apos;s why I used &lt;tt&gt;interceptor.classes&lt;/tt&gt; and &lt;tt&gt;metric.reporters&lt;/tt&gt; as they are defined property in both producer and consumer.&lt;/p&gt;

&lt;p&gt;My thinking is that we should also pass non-defined / customized property like the one in your example, &quot;custom-key-for-metric-reporter&quot;. So your expectation in the future is right as well.&lt;/p&gt;</comment>
                            <comment id="16325206" author="h314to" created="Sat, 13 Jan 2018 16:53:48 +0000"  >&lt;p&gt;This looks like a nice newbie issue. I&apos;m going to assign it to myself and work on it.&lt;/p&gt;</comment>
                            <comment id="16329190" author="githubbot" created="Wed, 17 Jan 2018 18:52:06 +0000"  >&lt;p&gt;h314to opened a new pull request #4434: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6166&quot; title=&quot;Streams configuration requires consumer. and producer. in order to be read&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6166&quot;&gt;&lt;del&gt;KAFKA-6166&lt;/del&gt;&lt;/a&gt;: Streams configuration requires consumer. and producer. in order to be read&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/4434&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4434&lt;/a&gt;&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;Implement method to get custom properties&lt;/li&gt;
	&lt;li&gt;Add custom properties to getConsumerConfigs and getProducerConfigs&lt;/li&gt;
	&lt;li&gt;Add tests&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16345552" author="githubbot" created="Tue, 30 Jan 2018 18:18:54 +0000"  >&lt;p&gt;guozhangwang closed pull request #4434: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6166&quot; title=&quot;Streams configuration requires consumer. and producer. in order to be read&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6166&quot;&gt;&lt;del&gt;KAFKA-6166&lt;/del&gt;&lt;/a&gt;: Streams configuration requires consumer. and producer. in order to be read&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/4434&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4434&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/streams/src/main/java/org/apache/kafka/streams/StreamsConfig.java b/streams/src/main/java/org/apache/kafka/streams/StreamsConfig.java&lt;br/&gt;
index 0feb48ddecd..1393223ec23 100644&lt;br/&gt;
&amp;#8212; a/streams/src/main/java/org/apache/kafka/streams/StreamsConfig.java&lt;br/&gt;
+++ b/streams/src/main/java/org/apache/kafka/streams/StreamsConfig.java&lt;br/&gt;
@@ -693,6 +693,7 @@ public StreamsConfig(final Map&amp;lt;?, ?&amp;gt; props) {&lt;br/&gt;
         checkIfUnexpectedUserSpecifiedConsumerConfig(clientProvidedProps, NON_CONFIGURABLE_CONSUMER_EOS_CONFIGS);&lt;/p&gt;

&lt;p&gt;         final Map&amp;lt;String, Object&amp;gt; consumerProps = new HashMap&amp;lt;&amp;gt;(eosEnabled ? CONSUMER_EOS_OVERRIDES : CONSUMER_DEFAULT_OVERRIDES);&lt;br/&gt;
+        consumerProps.putAll(getClientCustomProps());&lt;br/&gt;
         consumerProps.putAll(clientProvidedProps);&lt;/p&gt;

&lt;p&gt;         // bootstrap.servers should be from StreamsConfig&lt;br/&gt;
@@ -832,6 +833,7 @@ private void checkIfUnexpectedUserSpecifiedConsumerConfig(final Map&amp;lt;String, Obje&lt;/p&gt;

&lt;p&gt;         // generate producer configs from original properties and overridden maps&lt;br/&gt;
         final Map&amp;lt;String, Object&amp;gt; props = new HashMap&amp;lt;&amp;gt;(eosEnabled ? PRODUCER_EOS_OVERRIDES : PRODUCER_DEFAULT_OVERRIDES);&lt;br/&gt;
+        props.putAll(getClientCustomProps());&lt;br/&gt;
         props.putAll(clientProvidedProps);&lt;/p&gt;

&lt;p&gt;         props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, originals().get(BOOTSTRAP_SERVERS_CONFIG));&lt;br/&gt;
@@ -847,7 +849,11 @@ private void checkIfUnexpectedUserSpecifiedConsumerConfig(final Map&amp;lt;String, Obje&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@return Map of the admin client configuration.&lt;br/&gt;
      */&lt;br/&gt;
     public Map&amp;lt;String, Object&amp;gt; getAdminConfigs(final String clientId) 
{
-        final Map&amp;lt;String, Object&amp;gt; props = getClientPropsWithPrefix(ADMIN_CLIENT_PREFIX, AdminClientConfig.configNames());
+        final Map&amp;lt;String, Object&amp;gt; clientProvidedProps = getClientPropsWithPrefix(ADMIN_CLIENT_PREFIX, AdminClientConfig.configNames());
+
+        final Map&amp;lt;String, Object&amp;gt; props = new HashMap&amp;lt;&amp;gt;();
+        props.putAll(getClientCustomProps());
+        props.putAll(clientProvidedProps);
 
         // add client id with stream client id prefix
         props.put(CommonClientConfigs.CLIENT_ID_CONFIG, clientId + &quot;-admin&quot;);
@@ -862,6 +868,26 @@ private void checkIfUnexpectedUserSpecifiedConsumerConfig(final Map&amp;lt;String, Obje
         return props;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+    /**&lt;br/&gt;
+     * Get a map of custom configs by removing from the originals all the Streams, Consumer, Producer, and AdminClient configs.&lt;br/&gt;
+     * Prefixed properties are also removed because they are already added by &lt;/p&gt;
{@link #getClientPropsWithPrefix(String, Set)}
&lt;p&gt;.&lt;br/&gt;
+     * This allows to set a custom property for a specific client alone if specified using a prefix, or for all&lt;br/&gt;
+     * when no prefix is used.&lt;br/&gt;
+     *&lt;br/&gt;
+     * @return a map with the custom properties&lt;br/&gt;
+     */&lt;br/&gt;
+    private Map&amp;lt;String, Object&amp;gt; getClientCustomProps() &lt;/p&gt;
{
+        final Map&amp;lt;String, Object&amp;gt; props = originals();
+        props.keySet().removeAll(CONFIG.names());
+        props.keySet().removeAll(ConsumerConfig.configNames());
+        props.keySet().removeAll(ProducerConfig.configNames());
+        props.keySet().removeAll(AdminClientConfig.configNames());
+        props.keySet().removeAll(originalsWithPrefix(CONSUMER_PREFIX, false).keySet());
+        props.keySet().removeAll(originalsWithPrefix(PRODUCER_PREFIX, false).keySet());
+        props.keySet().removeAll(originalsWithPrefix(ADMIN_CLIENT_PREFIX, false).keySet());
+        return props;
+    }
&lt;p&gt;+&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Return an 
{@link Serde#configure(Map, boolean) configured}
&lt;p&gt; instance of &lt;/p&gt;
{@link #KEY_SERDE_CLASS_CONFIG key Serde
      * class}
&lt;p&gt;. This method is deprecated. Use &lt;/p&gt;
{@link #defaultKeySerde()}
&lt;p&gt; method instead.&lt;br/&gt;
diff --git a/streams/src/test/java/org/apache/kafka/streams/StreamsConfigTest.java b/streams/src/test/java/org/apache/kafka/streams/StreamsConfigTest.java&lt;br/&gt;
index 1d6b5a50117..cc072d5508d 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/streams/src/test/java/org/apache/kafka/streams/StreamsConfigTest.java&lt;br/&gt;
+++ b/streams/src/test/java/org/apache/kafka/streams/StreamsConfigTest.java&lt;br/&gt;
@@ -45,6 +45,7 @@&lt;br/&gt;
 import static org.apache.kafka.common.requests.IsolationLevel.READ_COMMITTED;&lt;br/&gt;
 import static org.apache.kafka.common.requests.IsolationLevel.READ_UNCOMMITTED;&lt;br/&gt;
 import static org.apache.kafka.streams.StreamsConfig.EXACTLY_ONCE;&lt;br/&gt;
+import static org.apache.kafka.streams.StreamsConfig.adminClientPrefix;&lt;br/&gt;
 import static org.apache.kafka.streams.StreamsConfig.consumerPrefix;&lt;br/&gt;
 import static org.apache.kafka.streams.StreamsConfig.producerPrefix;&lt;br/&gt;
 import static org.apache.kafka.test.StreamsTestUtils.minimalStreamsConfig;&lt;br/&gt;
@@ -66,7 +67,6 @@ public void setUp() {&lt;br/&gt;
         props.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);&lt;br/&gt;
         props.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());&lt;br/&gt;
         props.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;props.put(&quot;DUMMY&quot;, &quot;dummy&quot;);&lt;br/&gt;
         props.put(&quot;key.deserializer.encoding&quot;, &quot;UTF8&quot;);&lt;br/&gt;
         props.put(&quot;value.deserializer.encoding&quot;, &quot;UTF-16&quot;);&lt;br/&gt;
         streamsConfig = new StreamsConfig(props);&lt;br/&gt;
@@ -90,7 +90,6 @@ public void testGetProducerConfigs() 
{
         final Map&amp;lt;String, Object&amp;gt; returnedProps = streamsConfig.getProducerConfigs(clientId);
         assertEquals(returnedProps.get(ProducerConfig.CLIENT_ID_CONFIG), clientId + &quot;-producer&quot;);
         assertEquals(returnedProps.get(ProducerConfig.LINGER_MS_CONFIG), &quot;100&quot;);
-        assertNull(returnedProps.get(&quot;DUMMY&quot;));
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Test&lt;br/&gt;
@@ -101,7 +100,6 @@ public void testGetConsumerConfigs() &lt;/p&gt;
{
         assertEquals(returnedProps.get(ConsumerConfig.CLIENT_ID_CONFIG), clientId + &quot;-consumer&quot;);
         assertEquals(returnedProps.get(ConsumerConfig.GROUP_ID_CONFIG), groupId);
         assertEquals(returnedProps.get(ConsumerConfig.MAX_POLL_RECORDS_CONFIG), &quot;1000&quot;);
-        assertNull(returnedProps.get(&quot;DUMMY&quot;));
     }

&lt;p&gt;     @Test&lt;br/&gt;
@@ -148,7 +146,6 @@ public void testGetRestoreConsumerConfigs() &lt;/p&gt;
{
         final Map&amp;lt;String, Object&amp;gt; returnedProps = streamsConfig.getRestoreConsumerConfigs(clientId);
         assertEquals(returnedProps.get(ConsumerConfig.CLIENT_ID_CONFIG), clientId + &quot;-restore-consumer&quot;);
         assertNull(returnedProps.get(ConsumerConfig.GROUP_ID_CONFIG));
-        assertNull(returnedProps.get(&quot;DUMMY&quot;));
     }

&lt;p&gt;     @Test&lt;br/&gt;
@@ -264,6 +261,37 @@ public void shouldSupportNonPrefixedProducerConfigs() &lt;/p&gt;
{
         assertEquals(1, configs.get(ProducerConfig.METRICS_NUM_SAMPLES_CONFIG));
     }

&lt;p&gt;+    @Test&lt;br/&gt;
+    public void shouldForwardCustomConfigsWithNoPrefixToAllClients() &lt;/p&gt;
{
+        final StreamsConfig streamsConfig = new StreamsConfig(props);
+        props.put(&quot;custom.property.host&quot;, &quot;host&quot;);
+        final Map&amp;lt;String, Object&amp;gt; consumerConfigs = streamsConfig.getConsumerConfigs(&quot;groupId&quot;, &quot;clientId&quot;);
+        final Map&amp;lt;String, Object&amp;gt; restoreConsumerConfigs = streamsConfig.getRestoreConsumerConfigs(&quot;clientId&quot;);
+        final Map&amp;lt;String, Object&amp;gt; producerConfigs = streamsConfig.getProducerConfigs(&quot;clientId&quot;);
+        final Map&amp;lt;String, Object&amp;gt; adminConfigs = streamsConfig.getAdminConfigs(&quot;clientId&quot;);
+        assertEquals(&quot;host&quot;, consumerConfigs.get(&quot;custom.property.host&quot;));
+        assertEquals(&quot;host&quot;, restoreConsumerConfigs.get(&quot;custom.property.host&quot;));
+        assertEquals(&quot;host&quot;, producerConfigs.get(&quot;custom.property.host&quot;));
+        assertEquals(&quot;host&quot;, adminConfigs.get(&quot;custom.property.host&quot;));
+    }
&lt;p&gt;+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void shouldOverrideNonPrefixedCustomConfigsWithPrefixedConfigs() &lt;/p&gt;
{
+        final StreamsConfig streamsConfig = new StreamsConfig(props);
+        props.put(&quot;custom.property.host&quot;, &quot;host0&quot;);
+        props.put(consumerPrefix(&quot;custom.property.host&quot;), &quot;host1&quot;);
+        props.put(producerPrefix(&quot;custom.property.host&quot;), &quot;host2&quot;);
+        props.put(adminClientPrefix(&quot;custom.property.host&quot;), &quot;host3&quot;);
+        final Map&amp;lt;String, Object&amp;gt; consumerConfigs = streamsConfig.getConsumerConfigs(&quot;groupId&quot;, &quot;clientId&quot;);
+        final Map&amp;lt;String, Object&amp;gt; restoreConsumerConfigs = streamsConfig.getRestoreConsumerConfigs(&quot;clientId&quot;);
+        final Map&amp;lt;String, Object&amp;gt; producerConfigs = streamsConfig.getProducerConfigs(&quot;clientId&quot;);
+        final Map&amp;lt;String, Object&amp;gt; adminConfigs = streamsConfig.getAdminConfigs(&quot;clientId&quot;);
+        assertEquals(&quot;host1&quot;, consumerConfigs.get(&quot;custom.property.host&quot;));
+        assertEquals(&quot;host1&quot;, restoreConsumerConfigs.get(&quot;custom.property.host&quot;));
+        assertEquals(&quot;host2&quot;, producerConfigs.get(&quot;custom.property.host&quot;));
+        assertEquals(&quot;host3&quot;, adminConfigs.get(&quot;custom.property.host&quot;));
+    }
&lt;p&gt;+&lt;br/&gt;
     @Test&lt;br/&gt;
     public void shouldSupportNonPrefixedAdminConfigs() {&lt;br/&gt;
         props.put(AdminClientConfig.RETRIES_CONFIG, 10);&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16345577" author="wushujames" created="Tue, 30 Jan 2018 18:35:17 +0000"  >&lt;p&gt;This PR didn&apos;t have any docs updates. Should it have, or is the new behavior intuitive enough? Or was this considered a regression, and the original behavior was already documented?&lt;/p&gt;</comment>
                            <comment id="16345589" author="guozhang" created="Tue, 30 Jan 2018 18:41:39 +0000"  >&lt;p&gt;I think it should be considered as a regression: we introduced a bug in 0.11.0 onwards. But we can also update the javadocs to make the point more clear.&lt;/p&gt;</comment>
                            <comment id="16345608" author="githubbot" created="Tue, 30 Jan 2018 18:55:49 +0000"  >&lt;p&gt;guozhangwang opened a new pull request #4489: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6166&quot; title=&quot;Streams configuration requires consumer. and producer. in order to be read&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6166&quot;&gt;&lt;del&gt;KAFKA-6166&lt;/del&gt;&lt;/a&gt;: Update javadoc for streams config&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/4489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4489&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This PR piggy-back a few different javadoc changes:&lt;/p&gt;

&lt;p&gt;   1. KIP-220: add admin client prefix.&lt;br/&gt;
   2. Clarify on user customized configs.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16345900" author="githubbot" created="Tue, 30 Jan 2018 22:14:53 +0000"  >&lt;p&gt;guozhangwang closed pull request #4489: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6166&quot; title=&quot;Streams configuration requires consumer. and producer. in order to be read&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6166&quot;&gt;&lt;del&gt;KAFKA-6166&lt;/del&gt;&lt;/a&gt;: Update javadoc for streams config&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/4489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4489&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/streams/src/main/java/org/apache/kafka/streams/StreamsConfig.java b/streams/src/main/java/org/apache/kafka/streams/StreamsConfig.java&lt;br/&gt;
index 1393223ec23..ec0a1a8385b 100644&lt;br/&gt;
&amp;#8212; a/streams/src/main/java/org/apache/kafka/streams/StreamsConfig.java&lt;br/&gt;
+++ b/streams/src/main/java/org/apache/kafka/streams/StreamsConfig.java&lt;br/&gt;
@@ -16,6 +16,7 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.kafka.streams;&lt;/p&gt;

&lt;p&gt;+import org.apache.kafka.clients.admin.AdminClient;&lt;br/&gt;
 import org.apache.kafka.clients.CommonClientConfigs;&lt;br/&gt;
 import org.apache.kafka.clients.admin.AdminClientConfig;&lt;br/&gt;
 import org.apache.kafka.clients.consumer.ConsumerConfig;&lt;br/&gt;
@@ -56,9 +57,9 @@&lt;/p&gt;

&lt;p&gt; /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Configuration for a 
{@link KafkaStreams}
&lt;p&gt; instance.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Can also be used to configure the Kafka Streams internal 
{@link KafkaConsumer} and {@link KafkaProducer}.&lt;br/&gt;
- * To avoid consumer/producer property conflicts, you should prefix those properties using&lt;br/&gt;
- * {@link #consumerPrefix(String)} and {@link #producerPrefix(String)}, respectively.&lt;br/&gt;
+ * Can also be used to configure the Kafka Streams internal {@link KafkaConsumer}
&lt;p&gt;, &lt;/p&gt;
{@link KafkaProducer}
&lt;p&gt; and &lt;/p&gt;
{@link AdminClient}
&lt;p&gt;.&lt;br/&gt;
+ * To avoid consumer/producer/admin property conflicts, you should prefix those properties using&lt;br/&gt;
+ * &lt;/p&gt;
{@link #consumerPrefix(String)}
&lt;p&gt;, &lt;/p&gt;
{@link #producerPrefix(String)}
&lt;p&gt; and &lt;/p&gt;
{@link #adminClientPrefix(String)}
&lt;p&gt;, respectively.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;&lt;/li&gt;
	&lt;li&gt;Example:&lt;/li&gt;
	&lt;li&gt;&amp;lt;pre&amp;gt;
{@code
@@ -78,8 +79,26 @@
  * StreamsConfig streamsConfig = new StreamsConfig(streamsProperties);
  * }
&lt;p&gt;&amp;lt;/pre&amp;gt;&lt;br/&gt;
  *&lt;br/&gt;
+ * This instance can also be used to pass in custom configurations to different modules (e.g. passing a special config in your customized serde class).&lt;br/&gt;
+ * The consumer/producer/admin prefix can also be used to distinguish these custom config values passed to different clients with the same config name.&lt;br/&gt;
+ * * Example:&lt;br/&gt;
+ * &amp;lt;pre&amp;gt;&lt;/p&gt;
{@code
+ * Properties streamsProperties = new Properties();
+ * // sets &quot;my.custom.config&quot; to &quot;foo&quot; for consumer only
+ * streamsProperties.put(StreamsConfig.consumerPrefix(&quot;my.custom.config&quot;), &quot;foo&quot;);
+ * // sets &quot;my.custom.config&quot; to &quot;bar&quot; for producer only
+ * streamsProperties.put(StreamsConfig.producerPrefix(&quot;my.custom.config&quot;), &quot;bar&quot;);
+ * // sets &quot;my.custom.config2&quot; to &quot;boom&quot; for all clients universally
+ * streamsProperties.put(&quot;my.custom.config2&quot;, &quot;boom&quot;);
+ *
+ * // as a result, inside producer&apos;s serde class configure(..) function,
+ * // users can now read both key-value pairs &quot;my.custom.config&quot; -&amp;gt; &quot;foo&quot;
+ * // and &quot;my.custom.config2&quot; -&amp;gt; &quot;boom&quot; from the config map
+ * StreamsConfig streamsConfig = new StreamsConfig(streamsProperties);
+ * }
&lt;p&gt;&amp;lt;/pre&amp;gt;&lt;br/&gt;
+ *&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;When increasing both 
{@link ProducerConfig#RETRIES_CONFIG}
&lt;p&gt; and &lt;/p&gt;
{@link ProducerConfig#MAX_BLOCK_MS_CONFIG}
&lt;p&gt; to be more resilient to non-available brokers you should also&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* consider increasing 
{@link ConsumerConfig#MAX_POLL_INTERVAL_MS_CONFIG}  using the following guidance:&lt;br/&gt;
+ * consider increasing {@link ConsumerConfig#MAX_POLL_INTERVAL_MS_CONFIG}
&lt;p&gt; using the following guidance:&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;&amp;lt;pre&amp;gt;&lt;/li&gt;
	&lt;li&gt;max.poll.interval.ms &amp;gt; min ( max.block.ms, (retries +1) * request.timeout.ms )&lt;/li&gt;
	&lt;li&gt;&amp;lt;/pre&amp;gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mcu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>