<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:38:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-921] Expose max lag mbean for consumers and replica fetchers</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-921</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;We have a ton of consumer mbeans with names that are derived from the consumer id, broker being fetched from, fetcher id, etc. This makes it difficult to do basic monitoring of consumer/replica fetcher lag - since the mbean to monitor can change. A more useful metric for monitoring purposes is the maximum lag across all fetchers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12649792">KAFKA-921</key>
            <summary>Expose max lag mbean for consumers and replica fetchers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jjkoshy">Joel Jacob Koshy</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 May 2013 21:38:54 +0000</created>
                <updated>Fri, 31 May 2013 17:45:05 +0000</updated>
                            <resolved>Fri, 31 May 2013 17:45:01 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13668709" author="jjkoshy" created="Tue, 28 May 2013 21:42:21 +0000"  >&lt;p&gt;This provides a max lag mbean for both consumer fetcher manager and replica fetcher manager; although I think it is more useful for monitoring consumers. For replica fetchers we need to closely monitor all replica fetchers anyway. i.e., the set of mbeans is static. I can reduce the scope to just consumers if others agree.&lt;/p&gt;</comment>
                            <comment id="13668994" author="junrao" created="Wed, 29 May 2013 04:58:51 +0000"  >&lt;p&gt;Thanks for the patch. Could we add the max lag in one place in AbstractFetcherThread and AbstractFetcherManager? We can pass in the proper metrics name.&lt;/p&gt;</comment>
                            <comment id="13669551" author="jjkoshy" created="Wed, 29 May 2013 18:37:06 +0000"  >&lt;p&gt;Yes - I think that would be better. Moved it to AbstractFetcherManager. So depending on whether you are looking at replica fetchers or consumer fetchers, the MaxLag mbean will show up in ReplicaFetcherManager or ConsumerFetcherManager respectively.&lt;/p&gt;</comment>
                            <comment id="13670983" author="jjkoshy" created="Thu, 30 May 2013 23:56:33 +0000"  >&lt;p&gt;One caveat in this approach is that if a fetcher is wedged for any reason, then the reported lag is inaccurate since it depends on getting the high watermark from fetch responses. i.e., to check on the health of a consumer you would need to look at both the max lag and min fetch rate across all fetchers.&lt;/p&gt;</comment>
                            <comment id="13671124" author="junrao" created="Fri, 31 May 2013 04:03:52 +0000"  >&lt;p&gt;Thanks for patch v3. +1. Just one minor comment. &lt;/p&gt;

&lt;p&gt;1. ReplicaFetcherManager: It seems that we can just use &quot;Replica&quot;, instead of &quot;Replica-&quot; + brokerConfig.brokerId as the metric prefix, since the metric is local to the broker.&lt;/p&gt;</comment>
                            <comment id="13671593" author="nehanarkhede" created="Fri, 31 May 2013 15:53:27 +0000"  >&lt;p&gt;+1 on patch v3. &lt;/p&gt;</comment>
                            <comment id="13671682" author="jjkoshy" created="Fri, 31 May 2013 17:45:01 +0000"  >&lt;p&gt;Thanks for the reviews. Committed with the minor change - i.e., Replica instead of Replica-&amp;lt;id&amp;gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12585089" name="KAFKA-921-v1.patch" size="5029" author="jjkoshy" created="Tue, 28 May 2013 21:42:21 +0000"/>
                            <attachment id="12585273" name="KAFKA-921-v2.patch" size="2599" author="jjkoshy" created="Wed, 29 May 2013 18:37:06 +0000"/>
                            <attachment id="12585507" name="KAFKA-921-v3.patch" size="5203" author="jjkoshy" created="Thu, 30 May 2013 23:56:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330119</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kybz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330453</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>