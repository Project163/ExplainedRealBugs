<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:21:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-9083] Various parsing issues in Values class</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-9083</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;There are a number of small issues with the Connect framework&apos;s &lt;tt&gt;Values&lt;/tt&gt; class that lead to either unexpected exceptions, unintuitive (and arguably incorrect) behavior, or confusing log messages. These include:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A &lt;tt&gt;NullPointerException&lt;/tt&gt; is thrown when parsing the string &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;null&amp;#93;&lt;/span&gt;&lt;/tt&gt; (which should be parsed as an array containing a single null element)&lt;/li&gt;
	&lt;li&gt;A &lt;tt&gt;NullPointerException&lt;/tt&gt; is thrown when parsing the string &lt;tt&gt;[]&lt;/tt&gt; (which should be parsed as an empty array)&lt;/li&gt;
	&lt;li&gt;The returned schema is null when parsing the string {&lt;tt&gt;}&lt;/tt&gt; (instead, it should be a map schema, possibly with null key and value schemas)&lt;/li&gt;
	&lt;li&gt;Strings that begin with what appear to be booleans (i.e., the literals &lt;tt&gt;true&lt;/tt&gt; or &lt;tt&gt;false&lt;/tt&gt;) and which are followed by token delimiters (e.g., &lt;tt&gt;}, {{]&lt;/tt&gt;, &lt;tt&gt;:&lt;/tt&gt;, etc.) are parsed as booleans when they should arguably be parsed as strings; for example, the string &lt;tt&gt;true&lt;/tt&gt;} is parsed as the boolean &lt;tt&gt;true&lt;/tt&gt; but should probably just be parsed as the string &lt;tt&gt;true&lt;/tt&gt;}&lt;/li&gt;
	&lt;li&gt;Arrays not containing commas are still parsed as arrays in some cases; for example, the string &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0 1 2&amp;#93;&lt;/span&gt;&lt;/tt&gt; is parsed as the array &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0, 1, 2&amp;#93;&lt;/span&gt;&lt;/tt&gt; when it should arguably be parsed as the string literal &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0 1 2&amp;#93;&lt;/span&gt;&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;An exception is logged when attempting to parse input as a map when it doesn&apos;t contain the a final closing brace that states &quot;Map is missing terminating &apos;]&apos;&quot; even though the expected terminating character is actually &lt;tt&gt;&amp;#125;&lt;/tt&gt; and not &lt;tt&gt;]&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Finally, and possibly most contentious, escape sequences are not stripped from string literals. Thus, the input string &lt;tt&gt;&amp;#92;&amp;#123;foo&amp;#92;&amp;#92;bar&amp;#92;]&lt;/tt&gt; is parsed as the literal string &lt;tt&gt;&amp;#92;&amp;#123;foo&amp;#92;&amp;#92;bar&amp;#92;]&lt;/tt&gt;, which is somewhat unexpected, since that means it is impossible to pass in a string that is parsed as the string literal &lt;tt&gt;&amp;#123;foo&amp;#92;bar]&lt;/tt&gt;, and it is the job of the caller to handle stripping of such escape sequences. Given that the escape sequence can itself be escaped, it seems better to automatically strip it from parsed string literals before returning them to the user.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13263894">KAFKA-9083</key>
            <summary>Various parsing issues in Values class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ChrisEgerton">Chris Egerton</assignee>
                                    <reporter username="ChrisEgerton">Chris Egerton</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Oct 2019 21:35:43 +0000</created>
                <updated>Tue, 21 Jan 2020 20:17:11 +0000</updated>
                            <resolved>Tue, 21 Jan 2020 20:17:11 +0000</resolved>
                                                    <fixVersion>2.2.3</fixVersion>
                    <fixVersion>2.3.2</fixVersion>
                    <fixVersion>2.4.1</fixVersion>
                    <fixVersion>2.5.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16959174" author="githubbot" created="Thu, 24 Oct 2019 19:45:40 +0000"  >&lt;p&gt;C0urante commented on pull request #7593: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9083&quot; title=&quot;Various parsing issues in Values class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9083&quot;&gt;&lt;del&gt;KAFKA-9083&lt;/del&gt;&lt;/a&gt;: Various fixes/improvements for Connect&apos;s Values class&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7593&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7593&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;Jira&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9083&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-9083&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;   The following functional changes are implemented here:&lt;br/&gt;
   &#8226;&#160;Top-level strings beginning with `&quot;true&quot;`, `&quot;false&quot;` and then followed by token delimiters (e.g., `&quot;true}&quot;` and `&quot;false]&quot;`) are parsed as strings, not as booleans&lt;br/&gt;
   &#8226;&#160;The empty array (`&quot;[]&quot;`) is now parsed as an array with a null value schema&lt;br/&gt;
   &#8226;&#160;The empty map (`&quot;{}&quot;`) is now parsed as a map with null key and value schemas&lt;br/&gt;
   &#8226;&#160;Arrays with all-null elements are now parsed successfully (whereas before an NPE was thrown) as an array with a null value schema&lt;br/&gt;
   &#8226;&#160;Maps with all-null values are now parsed as maps with null value schemas, but non-null key schemas&lt;br/&gt;
   &#8226;&#160;Strings that appear to be arrays at first but are missing comma delimiters (e.g., `&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;0 1 2&amp;#93;&lt;/span&gt;&quot;`) are now parsed as strings instead of arrays&lt;br/&gt;
   &#8226;&#160;A small improvement is made to the debug message generated when map parsing fails due to unexpected comma delimiters (&quot;Unable to parse a map entry has no key or value&quot; is changed to &quot;Unable to parse a map entry with no key or value&quot;)&lt;br/&gt;
   &#8226;&#160;A small improvement is made to the debug message generated when map parsing fails due to a missing `}` (&quot;Map is missing terminating &apos;]&apos;&quot; is changed to &quot;Map is missing terminating &apos;}&apos;&quot;)&lt;br/&gt;
   &#8226;&#160;A small improvement is made to the debug message generated when array or map parsing fails and parsing is reset to process the input as a string (&quot;Unable to parse the value as a map&quot; is changed to &quot;Unable to parse the value as a map or an array&quot;)&lt;br/&gt;
   &#8226;&#160;Embedded values that lack surrounding quotes (e.g., `foo` in `&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;foo&amp;#93;&lt;/span&gt;&quot;`) are no longer treated as strings; this is in line with the JSON-like representation that is meant to be supported by the `Values` class and prevents errors such as parsing `&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;0 1 2&amp;#93;&lt;/span&gt;&quot;` as an array containing a single string element with a value of `&quot;0 1 2&quot;`&lt;br/&gt;
   &#8226;&#160;The top-level string `&quot;null&quot;` is now parsed as `null` instead of the string `&quot;null&quot;`; this does not break attempts to convert the top-level string `&quot;null&quot;` into a string (which should also be the string `&quot;null&quot;`)&lt;/p&gt;

&lt;p&gt;   Every change (except for log message alterations) is verified with one or more unit tests, and several unit tests are also added to prevent regression in functionality that, while not currently broken, is subtle enough that it may be missed in future changes without tests.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17020510" author="githubbot" created="Tue, 21 Jan 2020 19:33:56 +0000"  >&lt;p&gt;rhauch commented on pull request #7593: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9083&quot; title=&quot;Various parsing issues in Values class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9083&quot;&gt;&lt;del&gt;KAFKA-9083&lt;/del&gt;&lt;/a&gt;: Various fixes/improvements for Connect&apos;s Values class&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7593&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7593&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17020537" author="rhauch" created="Tue, 21 Jan 2020 20:17:11 +0000"  >&lt;p&gt;Merged to the `trunk`, `2.4`, `2.3`, and `2.2` branches; we typically don&apos;t push bugfixes back further than 2-3 branches.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07us0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>rhauch</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>