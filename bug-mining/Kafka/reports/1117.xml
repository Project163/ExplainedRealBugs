<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:55:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3887] StreamBounceTest.test_bounce and StreamSmokeTest.test_streams failing</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3887</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;StreamBounceTest.test_bounce and StreamSmokeTest.test_streams has been failing semi-regularly. Output from the latest failure:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;--------------------------------------------------------------------------------
test_id:    2016-06-20--001.kafkatest.tests.streams.streams_bounce_test.StreamsBounceTest.test_bounce
status:     FAIL
run time:   4 minutes 13.916 seconds


    Streams Smoke Test process on ubuntu@worker5 took too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; to exit
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.5.1-py2.7.egg/ducktape/tests/runner.py&quot;&lt;/span&gt;, line 106, in run_all_tests
    data = self.run_single_test()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.5.1-py2.7.egg/ducktape/tests/runner.py&quot;&lt;/span&gt;, line 162, in run_single_test
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self.current_test_context.function(self.current_test)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/tests/kafkatest/tests/streams/streams_bounce_test.py&quot;&lt;/span&gt;, line 67, in test_bounce
    self.driver.wait()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/tests/kafkatest/services/streams.py&quot;&lt;/span&gt;, line 94, in wait
    wait_until(lambda: not node.account.alive(pid), timeout_sec=120, err_msg=&lt;span class=&quot;code-quote&quot;&gt;&quot;Streams Smoke Test process on &quot;&lt;/span&gt; + str(node.account) + &lt;span class=&quot;code-quote&quot;&gt;&quot; took too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; to exit&quot;&lt;/span&gt;)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.5.1-py2.7.egg/ducktape/utils/util.py&quot;&lt;/span&gt;, line 36, in wait_until
    raise TimeoutError(err_msg)
TimeoutError: Streams Smoke Test process on ubuntu@worker5 took too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; to exit

--------------------------------------------------------------------------------
test_id:    2016-06-20--001.kafkatest.tests.streams.streams_smoke_test.StreamsSmokeTest.test_streams
status:     FAIL
run time:   4 minutes 36.426 seconds


    Streams Smoke Test process on ubuntu@worker9 took too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; to exit
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.5.1-py2.7.egg/ducktape/tests/runner.py&quot;&lt;/span&gt;, line 106, in run_all_tests
    data = self.run_single_test()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.5.1-py2.7.egg/ducktape/tests/runner.py&quot;&lt;/span&gt;, line 162, in run_single_test
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self.current_test_context.function(self.current_test)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/tests/kafkatest/tests/streams/streams_smoke_test.py&quot;&lt;/span&gt;, line 67, in test_streams
    self.driver.wait()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/tests/kafkatest/services/streams.py&quot;&lt;/span&gt;, line 94, in wait
    wait_until(lambda: not node.account.alive(pid), timeout_sec=120, err_msg=&lt;span class=&quot;code-quote&quot;&gt;&quot;Streams Smoke Test process on &quot;&lt;/span&gt; + str(node.account) + &lt;span class=&quot;code-quote&quot;&gt;&quot; took too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; to exit&quot;&lt;/span&gt;)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.5.1-py2.7.egg/ducktape/utils/util.py&quot;&lt;/span&gt;, line 36, in wait_until
    raise TimeoutError(err_msg)
TimeoutError: Streams Smoke Test process on ubuntu@worker9 took too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; to exit
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://jenkins.confluent.io/job/system-test-kafka/255/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.confluent.io/job/system-test-kafka/255/console&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12981491">KAFKA-3887</key>
            <summary>StreamBounceTest.test_bounce and StreamSmokeTest.test_streams failing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guozhang">Guozhang Wang</assignee>
                                    <reporter username="ijuma">Ismael Juma</reporter>
                        <labels>
                            <label>transient-system-test-failure</label>
                    </labels>
                <created>Tue, 21 Jun 2016 20:29:17 +0000</created>
                <updated>Mon, 25 Jul 2016 16:52:47 +0000</updated>
                            <resolved>Mon, 25 Jul 2016 16:52:47 +0000</resolved>
                                                    <fixVersion>0.10.0.1</fixVersion>
                                    <component>streams</component>
                    <component>system tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15342841" author="ijuma" created="Tue, 21 Jun 2016 22:01:32 +0000"  >&lt;p&gt;First build to fail: &lt;a href=&quot;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2016-06-11--001.1465663177--apache--trunk--da85171/report.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2016-06-11--001.1465663177--apache--trunk--da85171/report.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;After that, it&apos;s been failing in every build.&lt;/p&gt;</comment>
                            <comment id="15367818" author="guozhang" created="Fri, 8 Jul 2016 15:37:07 +0000"  >&lt;p&gt;Issue resolved by pull request 1597&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/1597&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1597&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15368817" author="guozhang" created="Sat, 9 Jul 2016 00:34:49 +0000"  >&lt;p&gt;The system test still failing but seems in a different way: &lt;a href=&quot;https://jenkins.confluent.io/job/system-test-kafka/275/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.confluent.io/job/system-test-kafka/275/consoleFull&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Reopen this issue.&lt;/p&gt;</comment>
                            <comment id="15369420" author="githubbot" created="Sun, 10 Jul 2016 05:07:46 +0000"  >&lt;p&gt;GitHub user guozhangwang opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1604&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1604&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3887&quot; title=&quot;StreamBounceTest.test_bounce and StreamSmokeTest.test_streams failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3887&quot;&gt;&lt;del&gt;KAFKA-3887&lt;/del&gt;&lt;/a&gt; Follow-up: add unit test for null checking in KTable aggregates&lt;/p&gt;

&lt;p&gt;    Also made a pass over the streams unit tests, with the following changes:&lt;/p&gt;

&lt;p&gt;    1. Removed three integration tests as they are already covered by other integration tests.&lt;br/&gt;
    2. Merged `KGroupedTableImplTest` into `KTableAggregateTest`.&lt;br/&gt;
    3. Use mocks whenever possible to reduce code duplicates.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/guozhangwang/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/guozhangwang/kafka&lt;/a&gt; Kminor-unit-tests-consolidation&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1604.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1604.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1604&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c08d252e591cae875b9c43e81f38e078a025f46a&lt;br/&gt;
Author: Guozhang Wang &amp;lt;wangguoz@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-07-10T05:03:50Z&lt;/p&gt;

&lt;p&gt;    make a pass over unit tests&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15371603" author="githubbot" created="Mon, 11 Jul 2016 20:57:34 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1604&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1604&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15371829" author="guozhang" created="Mon, 11 Jul 2016 22:43:34 +0000"  >&lt;p&gt;Did some investigation on &lt;a href=&quot;https://jenkins.confluent.io/job/system-test-kafka/275/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.confluent.io/job/system-test-kafka/275/consoleFull&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It turns out to be depending on a timing issue, where the `echo` topic has been consumed completely while the other topics such as `avg`, `diff` etc have not. This case is quite rare and we can keep it as is and see if it becomes common in the future.&lt;/p&gt;

&lt;p&gt;As for now, in order to avoid NPE for better error display I made a minor PR for checking nulls:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka/pull/1611&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1611&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15375000" author="guozhang" created="Wed, 13 Jul 2016 13:38:28 +0000"  >&lt;p&gt;Marking as fixed per 1611.&lt;/p&gt;</comment>
                            <comment id="15388005" author="hachikuji" created="Thu, 21 Jul 2016 16:32:53 +0000"  >&lt;p&gt;Still seeing this failure in nightly runs: &lt;a href=&quot;http://testing.confluent.io/confluent-kafka-system-test-results/?prefix=2016-07-20--001.1469035275--apache--trunk--9cad9db/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://testing.confluent.io/confluent-kafka-system-test-results/?prefix=2016-07-20--001.1469035275--apache--trunk--9cad9db/&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15388630" author="guozhang" created="Thu, 21 Jul 2016 23:46:04 +0000"  >&lt;p&gt;This seems to be a regression that was introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3870&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-3870&lt;/a&gt; and gets fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3911&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-3911&lt;/a&gt; already. Will keep an eye on tonight&apos;s run to see if it goes away itself.&lt;/p&gt;</comment>
                            <comment id="15392273" author="guozhang" created="Mon, 25 Jul 2016 16:52:39 +0000"  >&lt;p&gt;Streams system test has been resolved as of &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3911&quot; title=&quot;Enforce KTable materialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3911&quot;&gt;&lt;del&gt;KAFKA-3911&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zu3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>