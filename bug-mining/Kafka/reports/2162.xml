<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:17:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-7909] Ensure timely rebalance completion after pending members rejoin or fail</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-7909</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;We recently introduced&#160;integration tests in Connect. This test spins up&#160;one or more Connect workers along with a Kafka broker and Zk in a single process and attempts to&#160;move records using a Connector. In the &lt;a href=&quot;https://github.com/apache/kafka/blob/3c73633/connect/runtime/src/test/java/org/apache/kafka/connect/integration/ExampleConnectIntegrationTest.java#L105&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Example&#160;Integration Test&lt;/a&gt;, we spin up three workers each hosting a Connector task that&#160;consumes records from&#160;a Kafka topic. When the connector starts up, it may go through multiple rounds of rebalancing. We notice the following two problems in the last few days:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;After members join a group, there are no pendingMembers remaining, but the join group method does not complete, and send these members a signal that they are not ready to start consuming from their respective partitions.&lt;/li&gt;
	&lt;li&gt;Because of quick rebalances, a consumer might have started a group, but Connect starts&#160; a rebalance, after we which we create three new instances of the consumer (one from each worker/task). But the group coordinator seems to have 4 members in the group. This causes the JoinGroup to indefinitely stall.&#160;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Even though this ticket is described in the connect of Connect, it may be applicable to general consumers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13214563">KAFKA-7909</key>
            <summary>Ensure timely rebalance completion after pending members rejoin or fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wicknicks">Arjun Satish</assignee>
                                    <reporter username="wicknicks">Arjun Satish</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Feb 2019 09:27:15 +0000</created>
                <updated>Wed, 20 Feb 2019 00:19:33 +0000</updated>
                            <resolved>Wed, 20 Feb 2019 00:19:33 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                    <component>consumer</component>
                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16763622" author="ijuma" created="Fri, 8 Feb 2019 14:08:42 +0000"  >&lt;p&gt;Thanks for the report. Do you know which change caused this regression?&lt;/p&gt;</comment>
                            <comment id="16763812" author="wicknicks" created="Fri, 8 Feb 2019 18:45:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; I believe&#160;&lt;a href=&quot;https://github.com/apache/kafka/commit/9a9310d074ead70ebf3e93d29d880e094b9080f6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this commit&lt;/a&gt; caused the regression.&#160;&lt;/p&gt;</comment>
                            <comment id="16764676" author="githubbot" created="Mon, 11 Feb 2019 05:51:05 +0000"  >&lt;p&gt;wicknicks commented on pull request #6251: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7909&quot; title=&quot;Ensure timely rebalance completion after pending members rejoin or fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7909&quot;&gt;&lt;del&gt;KAFKA-7909&lt;/del&gt;&lt;/a&gt;: Coordinator changes to fix flakiness of Connect Test&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6251&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7909&quot; title=&quot;Ensure timely rebalance completion after pending members rejoin or fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7909&quot;&gt;&lt;del&gt;KAFKA-7909&lt;/del&gt;&lt;/a&gt;: Coordinator changes to fix flakiness of Connect Integration Test&lt;/p&gt;

&lt;p&gt;   This commit introduces a change and reverts a recent one. First, in&lt;br/&gt;
   GroupCoordinator, we attempt to complete JoinGroup when the last member&lt;br/&gt;
   joins. Second, we revert a recent change in AbstractCoordinator&lt;br/&gt;
   that changed how a Generation is determined to be valid. The second&lt;br/&gt;
   change is required in the following situation: a group of consumers&lt;br/&gt;
   are killed when they are in the midst of a JoinGroup operation, and&lt;br/&gt;
   the consumers that correctly initiated the JoinGroup request, that are&lt;br/&gt;
   just waiting for the last member(s) to join, try to LeaveGroup, but&lt;br/&gt;
   are unable to do so because they are not considered valid. If these&lt;br/&gt;
   consumers are restarted, these old consumers are still in the group, and the&lt;br/&gt;
   new JoinGroup never succeeds.&lt;/p&gt;

&lt;p&gt;   Signed-off-by: Arjun Satish &amp;lt;arjun@confluent.io&amp;gt;&lt;/p&gt;

&lt;p&gt;   After these changes, we are able to run the flaky &lt;span class=&quot;error&quot;&gt;&amp;#91;test&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/kafka/blob/dc935c4/connect/runtime/src/test/java/org/apache/kafka/connect/integration/ExampleConnectIntegrationTest.java#L105&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/dc935c4/connect/runtime/src/test/java/org/apache/kafka/connect/integration/ExampleConnectIntegrationTest.java#L105&lt;/a&gt;) more than 300 times without seeing any failures.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16765455" author="mjsax" created="Mon, 11 Feb 2019 22:37:43 +0000"  >&lt;p&gt;Updating status. Seems this ticket is on-track for 2.2.&lt;/p&gt;</comment>
                            <comment id="16772458" author="githubbot" created="Wed, 20 Feb 2019 00:14:16 +0000"  >&lt;p&gt;hachikuji commented on pull request #6251: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7909&quot; title=&quot;Ensure timely rebalance completion after pending members rejoin or fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7909&quot;&gt;&lt;del&gt;KAFKA-7909&lt;/del&gt;&lt;/a&gt;: Ensure timely rebalance completion after pending members rejoin or fail&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6251&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0s54:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>