<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:26:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-10685] --to-datetime passed to kafka-consumer-groups interpreting microseconds wrong</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-10685</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;If you pass more than 3 decimal places for the fractional seconds of the datetime, the microseconds get interpreted as milliseconds.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;kafka-consumer-groups --bootstrap-server kafka:9092&#160;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;--reset-offsets&#160;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;--group webserver-avro&#160;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;--topic driver-positions-avro&#160;&lt;/tt&gt;&lt;br/&gt;
{{ &lt;tt&gt;--to-datetime &quot;&lt;/tt&gt;&lt;tt&gt;2020-11-05T00:46:48.002237400&lt;/tt&gt;&quot;&#160;}}&lt;br/&gt;
{{ &lt;tt&gt;--dry-run&lt;/tt&gt;}}&lt;/p&gt;

&lt;p&gt;Relevant code&#160;&lt;a href=&quot;https://github.com/apache/kafka/blob/2.7/clients/src/main/java/org/apache/kafka/common/utils/Utils.java#L1304&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. The datetime is being turned into&#160;Nov 5, 2020 1:24:05.400 because SimpleDateFormat is adding&#160;2237400 milliseconds to Nov 5, 2020 00:46:48.&lt;/p&gt;

&lt;p&gt;Experimenting with&#160;getDateTime:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;getDateTime(&quot;2020-11-05T00:46:48.000&quot;) -&amp;gt; 1604537208000&lt;/li&gt;
	&lt;li&gt;getDateTime(&quot;2020-11-05T00:46:48.000+0800&quot;) -&amp;gt;&#160;1604508408000 - correct the formatting string allows for ZZZ timezones&lt;/li&gt;
	&lt;li&gt;getDateTime(&quot;2020-11-05T00:46:48.000123&quot;) -&amp;gt; 1604537208123 - note this ends with 123 milliseconds.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The pattern string is&#160;&quot;yyyy-MM-dd&apos;T&apos;HH:mm:ss.SSS&quot;.&#160; So SimpleDateFormat interprets &quot;000123&quot; as 123 milliseconds. See the stackoverflow answer &lt;a href=&quot;https://stackoverflow.com/a/21235602/109102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The fix?&#160; Remove any digits after more than 3 characters after the decimal point, or raise an exception. The code would still need to allow the RFC822 timezone, i.e&#160;Sign TwoDigitHours Minutes.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13338937">KAFKA-10685</key>
            <summary>--to-datetime passed to kafka-consumer-groups interpreting microseconds wrong</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="showuon">Luke Chen</assignee>
                                    <reporter username="russ_sayers">Russell Sayers</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Nov 2020 05:51:29 +0000</created>
                <updated>Tue, 17 Nov 2020 19:33:51 +0000</updated>
                            <resolved>Tue, 17 Nov 2020 19:32:39 +0000</resolved>
                                    <version>2.7.0</version>
                                    <fixVersion>2.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17226576" author="mikebin" created="Thu, 5 Nov 2020 08:29:35 +0000"  >&lt;p&gt;This issue seems to occur with Java 11, but not with Java 8. Code currently uses &lt;tt&gt;SimpleDateFormat&lt;/tt&gt;.&#160;&lt;tt&gt;DateTimeFormatter&lt;/tt&gt; behaved consistently across Java 8 and 11 (throwing a parse exception if milliseconds is more than 3 digits) - maybe worth considering changing to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
DateTimeFormatter.ofPattern(&lt;span class=&quot;code-quote&quot;&gt;&quot;yyyy-MM-dd&lt;span class=&quot;code-quote&quot;&gt;&apos;T&apos;&lt;/span&gt;HH:mm:ss.SSSXXX&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17228542" author="showuon" created="Mon, 9 Nov 2020 12:04:48 +0000"  >&lt;p&gt;Thanks for the suggestion. It turns out that the &lt;b&gt;SimpleDateFormat.setLenient(false)&lt;/b&gt; can also strictly parse the timestamp and throw parseException if milliseconds is more than 3 digits. Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kauw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>