<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:42:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1070] Auto-assign node id</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1070</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;It would be nice to have Kafka brokers auto-assign node ids rather than having that be a configuration. Having a configuration is irritating because (1) you have to generate a custom config for each broker and (2) even though it is in configuration, changing the node id can cause all kinds of bad things to happen.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12671970">KAFKA-1070</key>
            <summary>Auto-assign node id</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sriharsha">Harsha</assignee>
                                    <reporter username="jkreps">Jay Kreps</reporter>
                        <labels>
                            <label>usability</label>
                    </labels>
                <created>Wed, 2 Oct 2013 15:59:51 +0000</created>
                <updated>Fri, 18 Dec 2015 16:59:37 +0000</updated>
                            <resolved>Mon, 12 Jan 2015 23:46:36 +0000</resolved>
                                                    <fixVersion>0.9.0.0</fixVersion>
                                        <due></due>
                            <votes>3</votes>
                                    <watches>14</watches>
                                                                                                                <comments>
                            <comment id="13784113" author="jkreps" created="Wed, 2 Oct 2013 16:06:29 +0000"  >&lt;p&gt;I think the right way to do this is to have a sequence in zookeeper that atomically increments and use this for id generation. On startup a node that has no id can generate one for itself and store it.&lt;/p&gt;

&lt;p&gt;One tricky bit is that this node id needs to be stored with the data, but we actually partition data up over multiple disks now and hope to be able to survive the destruction of any of them. Which disk should we store the node id on? I would recommend we store it on all of them--if it is missing on some we will add it there, if the id is inconsistent between disks we will error out (this should never happen).&lt;/p&gt;

&lt;p&gt;I would recommend adding a properties file named &quot;meta&quot; in every data directory containing the &quot;id=x&quot; value, we can extend this later with more perminant values. For example, I think it would be nice to add a data format version to help with in-place data upgrades.&lt;/p&gt;

&lt;p&gt;On startup the broker would check this value for consistency across directories. If it is not present in any directory it would auto-generate a node id and persist that for future use.&lt;/p&gt;

&lt;p&gt;For compatibility we would retain the current id configuration value--if it is present we will use it and ensure the id sequence is larger than this value.&lt;/p&gt;</comment>
                            <comment id="13992003" author="ancoron" created="Wed, 7 May 2014 17:06:29 +0000"  >&lt;p&gt;For me, a solution that generates a unique ID by itself would also be fine.&lt;/p&gt;

&lt;p&gt;E.g. as a workaround, I currently generate an integer based on the MAC address from the interface that clients are configured to see. However, this is not reliably unique, because a MAC address is 48-bit and the broker-ID is only a signed 32-bit integer, a long would be better fit here.&lt;/p&gt;

&lt;p&gt;Going further on standalone generation of unique IDs, within applications I am used to rely on something that does provide me some guarantees. A UUID of Type 1 (MAC/timestamp-based) is exactly that. However, here the problem is even worse, because a UUID is a 128-bit number.&lt;/p&gt;

&lt;p&gt;My question here would be (and I am not yet very much into the Kafka code base - so please excuse if this is a very dumb question): what is the brokerId actually being used for? In other words: which requirements does it have to fulfill and what functionality relies on it being unique inside a cluster?&lt;/p&gt;

&lt;p&gt;Another question is: why does it have to be a non-negative integer?&lt;/p&gt;</comment>
                            <comment id="14065670" author="sriharsha" created="Thu, 17 Jul 2014 22:12:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkreps&quot; class=&quot;user-hover&quot; rel=&quot;jkreps&quot;&gt;jkreps&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt;&lt;br/&gt;
I am working on this JIRA. Following the proposed design in the comments. I see there might be a issue  where&lt;br/&gt;
one of the broker configs have broker.id defined as 0 and another one doesn&apos;t have broker.id. If the second broker started first we fetch a global sequence id from zookeeper that starts with 0 and the next one has already have a defined config we will use that in this case we have two brokers with same id. Should we consider this case in which a kafka cluster&apos;s broker might have a inconsistent config interms of broker.id.&lt;br/&gt;
Instead of using zookeeper for generating a global sequence number why shouldn&apos;t we be using UUID and make brokerId Long type. &lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="14065702" author="jkreps" created="Thu, 17 Jul 2014 22:42:00 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=harsha_ch&quot; class=&quot;user-hover&quot; rel=&quot;harsha_ch&quot;&gt;harsha_ch&lt;/a&gt;, that is a great point.&lt;/p&gt;

&lt;p&gt;I&apos;d like to avoid changing the type of the id to a long or UUID so as to not have to bump up the protocol format for the metadata request which hands these out to clients (we would need a way to handle compatibility with older clients that don&apos;t expect the longer types).&lt;/p&gt;

&lt;p&gt;I think we can get around the problem you point out by just defaulting the node id sequence to 1000. This could theoretically conflict but most people number from 0 or 1 and we can discuss this in the release notes. Our plan will be to release with support for both configured node ids and assigned node ids for compatibility. After a couple of releases we will remove the config.&lt;/p&gt;

&lt;p&gt;So the behavior would be this:&lt;br/&gt;
If there is a node id in the config we will validate it against the node id in the data directory&lt;br/&gt;
If it matches that good, we&apos;ll use that.&lt;br/&gt;
If it doesn&apos;t match that is bad, we&apos;ll crash with an error.&lt;br/&gt;
If there is a node id in the data directory but none in the config, we&apos;ll use whatever is in the data directory.&lt;br/&gt;
If there is no node id in the data directory yet but there is  one in the config we&apos;ll write that to the data directory and use it.&lt;br/&gt;
If there is neither a node id in the data directory nor in the config we&apos;ll allocate a node id and write it to the data directory.&lt;/p&gt;</comment>
                            <comment id="14067273" author="sriharsha" created="Sat, 19 Jul 2014 00:24:43 +0000"  >&lt;p&gt;Created reviewboard &lt;a href=&quot;https://reviews.apache.org/r/23702/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/23702/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14067274" author="sriharsha" created="Sat, 19 Jul 2014 00:25:33 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkreps&quot; class=&quot;user-hover&quot; rel=&quot;jkreps&quot;&gt;jkreps&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14067716" author="sriharsha" created="Sat, 19 Jul 2014 23:06:35 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/23702/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/23702/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14070658" author="sriharsha" created="Tue, 22 Jul 2014 18:34:48 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/23702/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/23702/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14073563" author="clarkhaskins" created="Thu, 24 Jul 2014 19:42:12 +0000"  >&lt;p&gt;We currently have node IDs in the 0-10000 range. I think some better logic for identifying used node IDs is necessary rather than just starting from 1000. &lt;/p&gt;</comment>
                            <comment id="14073665" author="jonbringhurst" created="Thu, 24 Jul 2014 21:14:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=clarkhaskins&quot; class=&quot;user-hover&quot; rel=&quot;clarkhaskins&quot;&gt;clarkhaskins&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sriharsha&quot; class=&quot;user-hover&quot; rel=&quot;sriharsha&quot;&gt;sriharsha&lt;/a&gt;, having ReservedBrokerIdMaxValue as a configurable option (perhaps with a default of 1000) would probably solve clark&apos;s use case.&lt;/p&gt;

&lt;p&gt;&lt;del&gt;Also, if I&apos;m reading this right, it will ignore the broker ID if it&apos;s set in the config but out of the reserved range (set to -1). It will then create a generated broker ID to overwrite the one in the config. It might be nice to have the broker error out on startup if a broker.id is set in the config, but is out of range. A new broker ID should only be generated if an id isn&apos;t specified in the config AND the meta.properties doesn&apos;t exist (otherwise the config file wouldn&apos;t match the actual broker ID).&lt;/del&gt; Edit: nevermind, my Scala reading skills aren&apos;t up to par. This isn&apos;t the case here.&lt;/p&gt;</comment>
                            <comment id="14074028" author="sriharsha" created="Fri, 25 Jul 2014 03:58:41 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/23702/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/23702/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14074036" author="sriharsha" created="Fri, 25 Jul 2014 04:05:58 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/23702/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/23702/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14085808" author="joestein" created="Tue, 5 Aug 2014 05:04:56 +0000"  >&lt;p&gt;This sounds like a very cool and VERY useful feature. Excited to use it myself often.&lt;/p&gt;

&lt;p&gt;I know of a few (&amp;gt;10) different clusters that not only use varying sized numbers for their broker.id but do so in what is a seemingly random (but not really when you think about it) way.&lt;/p&gt;

&lt;p&gt;so in a cluster there may be broker.id that is 1721632 and another 172164875 and another 172162240 . Making your brokers by replacing &quot;.&quot; in chef/puppet/salt/ansemble/etc type scripts and sometimes folks get more fancy just doing 2288, 2388, 17, 177 (where just the last two octets get used and &quot;.&quot; is replaced). &lt;/p&gt;

&lt;p&gt;I am not saying I agree with this approach and I actively advocate away from doing this but in some/many scenarios it is the best/only way to automate their deploys for how things are setup.  It is also what seems to make sense when folks are building their automation scripts since they have no other option without doing more than they should be expected to-do (and the IP replace &quot;.&quot; is so obvious to them, and it is).&lt;/p&gt;

&lt;p&gt;So, for folks in these cases they would just pick the upper bound to be, lets say 17216255256 and then it would auto assign from there?&lt;/p&gt;

&lt;p&gt;Is there some better way to go about this where you might have a start increment and and some exclusion list? or a way to see broker.id already had that and not use it?  I think a lot of folks would like to get having broker id be more continious and be easier to communicate but the desire to automate everything will outweigh that.  We could give them some sanity back with brokers 1,2,3,4,5,6,7,8,9,10,11,12 for a 12 node cluster.&lt;/p&gt;

&lt;p&gt;not crucial and you may have already accounted for the scenario I brought up, but wanted to bring it up as a real use case for how people automate things.&lt;/p&gt;

&lt;p&gt;it might be better for folks to manually migrate their scripts but not sure they would do it and if they did would have to decommission brokers which in a prod environment could take a few weeks/months.  If we let them start at 1 and exclude what they have then they can do it one at a time.  After taking down the first broker and bring it back up (empty) it is broker.id=1, and so on (and if they have a 5 they don&apos;t have to take it down), etc.&lt;/p&gt;

&lt;p&gt;For new clusters this is a slam dunk and wouldn&apos;t want to hold up the feature for existing users that have already decided a work around as I don&apos;t know what the intent of this was or not. Some folks might not change knowing broker.id=17216520 sometimes is nice you just login to that box but talking about broker 17216520 over and over again is a pita.&lt;/p&gt;
</comment>
                            <comment id="14086320" author="sriharsha" created="Tue, 5 Aug 2014 14:37:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=charmalloc&quot; class=&quot;user-hover&quot; rel=&quot;charmalloc&quot;&gt;charmalloc&lt;/a&gt; Thanks for the comments. Currently the approach allows users to specify MaxBrokerId and kafka starts generating a sequence from MaxBrokerId + 1. If user specifies brokerId , kafka uses that instead of generating one from zookeeper.  In the current implementation we expect user configured broker.id to be less than MaxBrokerId.&lt;br/&gt;
The tricky case here is if the user have a cluster where some of the brokers have broker.id present  in their config and others don&apos;t. In this case we use MaxBrokerId (defaults to 1000) and start generating a sequenceId from there.&lt;br/&gt;
The issue with brokerId exception list is we do not know from which point to generate a sequenceId. &lt;br/&gt;
In your example &quot; in a cluster there may be broker.id that is 1721632 and another 172164875 and another 172162240 &quot;&lt;br/&gt;
and user added another broker to the cluster without broker.id in config. If the user specifies that MaxReserveBrokerId is 172164875 than we can assign +1 to that new broker. If we take the approach of looking at brokerIds that exists in the cluster and generate a new one that doesn&apos;t exist or taken by a broker already(exclusion list as you suggested) than the problem would be how do we know what are all the broker.ids existed in the cluster one way to look at is zookeeper but a broker registers at zk after it starts. &lt;br/&gt;
For ex: if a broker1 starts with 1721632 and broker2 starts with no broker.id than we generate 1721633 from zk and there is no guarantee that another broker has this same id  in their config. Of course we can have a exclusion list of brokerids in a config file but that feels cumbersome for the user to list out all the brokerids.&lt;/p&gt;</comment>
                            <comment id="14086353" author="joestein" created="Tue, 5 Aug 2014 15:10:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sriharsha&quot; class=&quot;user-hover&quot; rel=&quot;sriharsha&quot;&gt;sriharsha&lt;/a&gt; I understand.  What I am struggling with is this for new users or existing users?  For existing users what I have seen them do (at least a dozen times now) is to avoid the conflict of broker.id in the properties file (like you are saying) is to take the IP address, strip out the &quot;.&quot; and use that (since IP is unique that is what they go with).  They do this in their automation scripts.  I have to imagine it is larger than I have seen as they all did this independently of each other as an intuitive way to make unique broker.id.&lt;/p&gt;</comment>
                            <comment id="14086980" author="sriharsha" created="Tue, 5 Aug 2014 23:37:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkreps&quot; class=&quot;user-hover&quot; rel=&quot;jkreps&quot;&gt;jkreps&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; Can you please review the last patch I sent. Thanks.&lt;/p&gt;</comment>
                            <comment id="14105633" author="sriharsha" created="Thu, 21 Aug 2014 17:26:29 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/23702/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/23702/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14105637" author="sriharsha" created="Thu, 21 Aug 2014 17:27:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkreps&quot; class=&quot;user-hover&quot; rel=&quot;jkreps&quot;&gt;jkreps&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; Can you please review the latest patch. Thanks.&lt;/p&gt;</comment>
                            <comment id="14107682" author="nehanarkhede" created="Fri, 22 Aug 2014 23:18:42 +0000"  >&lt;p&gt;In an attempt to keep up with reviews, assigning to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkreps&quot; class=&quot;user-hover&quot; rel=&quot;jkreps&quot;&gt;jkreps&lt;/a&gt; since he has most context on the patch. Feel free to reassign &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14125483" author="sriharsha" created="Mon, 8 Sep 2014 13:32:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkreps&quot; class=&quot;user-hover&quot; rel=&quot;jkreps&quot;&gt;jkreps&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt; Hi All, I am trying to get this patch reviewed. Please let me know if there is anything that need to be fixed with this patch. Thank you.&lt;/p&gt;</comment>
                            <comment id="14195345" author="otis" created="Mon, 3 Nov 2014 23:21:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=harsha_ch&quot; class=&quot;user-hover&quot; rel=&quot;harsha_ch&quot;&gt;harsha_ch&lt;/a&gt; - it looks like a number of people would really like to use IPs for broker.id.  There is a lot of interest in having that. Please see this thread: &lt;a href=&quot;http://search-hadoop.com/m/4TaT4dTPKi1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://search-hadoop.com/m/4TaT4dTPKi1&lt;/a&gt;&lt;br/&gt;
Do you think this is something you could add to this patch, maybe as another broker ID assignment scheme/policy?&lt;/p&gt;</comment>
                            <comment id="14195365" author="sriharsha" created="Mon, 3 Nov 2014 23:33:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=otis%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;otis@apache.org&quot;&gt;otis@apache.org&lt;/a&gt; this patch pending the 0.8.2 release. Since the we have 0.8.2 branched out I&apos;ll upmerge this patch and add a configurable option to server.properties where if user prefers IP based broker Id we will generate that or use the seq id that I currently have as a default.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkreps&quot; class=&quot;user-hover&quot; rel=&quot;jkreps&quot;&gt;jkreps&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; please let me know if the above approach looks good to you. Thanks.&lt;/p&gt;</comment>
                            <comment id="14195687" author="otis" created="Tue, 4 Nov 2014 04:02:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;this patch pending the 0.8.2 release&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Note this issue doesn&apos;t have Fix Version set to 0.8.2.  Maybe that&apos;s what you want? +1 from me &amp;#8211; it looks like a number of people would like to see this issue resolved!&lt;/p&gt;</comment>
                            <comment id="14195700" author="sriharsha" created="Tue, 4 Nov 2014 04:21:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=otis&quot; class=&quot;user-hover&quot; rel=&quot;otis&quot;&gt;otis&lt;/a&gt; Sorry I meant pending review after 0.8.2 release. Not planned for 0.8.2 release. I&apos;ll update the patch with ip as brokerid option.&lt;/p&gt;</comment>
                            <comment id="14197098" author="nehanarkhede" created="Tue, 4 Nov 2014 23:17:31 +0000"  >&lt;p&gt;Sorry for the late review. Expect to get to this shortly.&lt;/p&gt;</comment>
                            <comment id="14205491" author="nehanarkhede" created="Mon, 10 Nov 2014 23:01:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sriharsha&quot; class=&quot;user-hover&quot; rel=&quot;sriharsha&quot;&gt;sriharsha&lt;/a&gt; Would you mind rebasing your patch? Can help you review it in the next few days.&lt;/p&gt;</comment>
                            <comment id="14205497" author="sriharsha" created="Mon, 10 Nov 2014 23:04:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; will implement the requested ip based broker id as an option and send an updated patch. Try to get it done this week.&lt;/p&gt;</comment>
                            <comment id="14219784" author="sriharsha" created="Thu, 20 Nov 2014 18:50:13 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/23702/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/23702/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14219794" author="sriharsha" created="Thu, 20 Nov 2014 18:57:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=charmalloc&quot; class=&quot;user-hover&quot; rel=&quot;charmalloc&quot;&gt;charmalloc&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=otis&quot; class=&quot;user-hover&quot; rel=&quot;otis&quot;&gt;otis&lt;/a&gt;&lt;br/&gt;
Please take a look at the latest patch. I added broker.id.policy as a configurable option with &quot;ip&quot; and &quot;sequence&quot; .&lt;br/&gt;
I&apos;ve few questions regarding &quot;ip&quot; based broker.id.&lt;br/&gt;
currently the patch expects /etc/hosts to be properly configured with an ip associated with the hostname.&lt;br/&gt;
1) should we ignore loopback ip&lt;br/&gt;
    i) if we don&apos;t consider loopback ip than on a single node machine with /etc/hosts is not being configured properly it will thrown an error&lt;br/&gt;
   ii) if we consider this than there is a same broker id being generate on multiple hosts or multiple brokers on a single host ( this could be the case in non loopback ips too)&lt;br/&gt;
2) broker.id is Int and there is a  possibility of  throwing  a NumberFormatException if the ip doesn&apos;t fit in Int.MaxValue&lt;br/&gt;
3) If a host contains multiple network interfaces which ip should we pick up. Current implementation takes whatever configured for the hostname in /etc/hosts which seems ok to me . &lt;br/&gt;
Please let me know your thoughts on the above. Thanks.&lt;/p&gt;</comment>
                            <comment id="14222491" author="nehanarkhede" created="Sun, 23 Nov 2014 20:36:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sriharsha&quot; class=&quot;user-hover&quot; rel=&quot;sriharsha&quot;&gt;sriharsha&lt;/a&gt; Reviewed your latest patch. Posted review comments on the rb.&lt;/p&gt;</comment>
                            <comment id="14225723" author="sriharsha" created="Wed, 26 Nov 2014 04:29:57 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/23702/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/23702/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14225725" author="sriharsha" created="Wed, 26 Nov 2014 04:30:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; Thanks for the review. Updated the patch please take a look .&lt;/p&gt;</comment>
                            <comment id="14248599" author="sriharsha" created="Tue, 16 Dec 2014 18:17:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; Can you please take a look at the patch and also reply to your comments. Thanks.&lt;/p&gt;</comment>
                            <comment id="14249492" author="nehanarkhede" created="Wed, 17 Dec 2014 05:22:29 +0000"  >&lt;p&gt;Thanks for the updated patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sriharsha&quot; class=&quot;user-hover&quot; rel=&quot;sriharsha&quot;&gt;sriharsha&lt;/a&gt;. Almost there. Left a few more cleanup comments.&lt;/p&gt;</comment>
                            <comment id="14262709" author="sriharsha" created="Fri, 2 Jan 2015 01:39:38 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/23702/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/23702/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14262711" author="sriharsha" created="Fri, 2 Jan 2015 01:43:01 +0000"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt;. I updated the patch , please take a look when you get a chance . Thanks.&lt;/p&gt;</comment>
                            <comment id="14272082" author="nehanarkhede" created="Fri, 9 Jan 2015 23:40:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sriharsha&quot; class=&quot;user-hover&quot; rel=&quot;sriharsha&quot;&gt;sriharsha&lt;/a&gt; There are still questions around the broker metadata file serialization. I&apos;ve reviewed the latest patch and left my comments on the rb.&lt;/p&gt;</comment>
                            <comment id="14272095" author="sriharsha" created="Fri, 9 Jan 2015 23:49:57 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; . I&apos;ll send an updated patch.&lt;/p&gt;</comment>
                            <comment id="14273928" author="sriharsha" created="Mon, 12 Jan 2015 18:47:01 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/23702/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/23702/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14273946" author="sriharsha" created="Mon, 12 Jan 2015 18:53:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; updated patch addresses 2 of your comments and I&apos;ve replied to your other comments. Please check and let me know. Thank for the review.&lt;/p&gt;</comment>
                            <comment id="14274421" author="nehanarkhede" created="Mon, 12 Jan 2015 23:46:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sriharsha&quot; class=&quot;user-hover&quot; rel=&quot;sriharsha&quot;&gt;sriharsha&lt;/a&gt; Thanks for your efforts in getting this patch in shape. Pushed to trunk&lt;/p&gt;</comment>
                            <comment id="14274614" author="sriharsha" created="Tue, 13 Jan 2015 02:30:23 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/23702/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/23702/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14702030" author="paetling" created="Tue, 18 Aug 2015 21:37:08 +0000"  >&lt;p&gt;Hello Kafka Geniuses,&lt;br/&gt;
     I have a question regarding this PR.  Some context: &lt;br/&gt;
    We have started playing around with kafka 0.8.2.1 to build a data pipeline at the company I work at.  Initially, to get autoscaling with AWS working, we were mapping the IP of our boxes to our broker id.  For a while everything was good.  Today I realized (please correct me if I am wrong) that kafka assigns the replicas to a topic at topic creation time. These replicas are not modified later unless you specifically rebalance the cluster(this is different than ISR which can go from 0 servers to the set of replicas).  This leads to an interesting question on how to cycle in new boxes.  The easiest way seems to be to copy all data from one box to another, kill the old box and start the new box with the same broker.id.  This is not really easy when you do a direct mapping of IP -&amp;gt; broker.id.  &lt;br/&gt;
     So now we come to this Jira ticket.  I was wondering if you could enumerate for me how this auto-assign node id would deal with the cycling of a box.  If a bring down a box that was auto-assigned a broker.id of X and bring back up a new box, what will happen.  Will that new box have broker.id X as well?  What if I bring down two boxes with broker.id X and broker.id Y, what is the broker.id of the new box i spin up. &lt;/p&gt;

&lt;p&gt;Thanks for the help,&lt;br/&gt;
Alex&lt;/p&gt;
</comment>
                            <comment id="14702059" author="sriharsha" created="Tue, 18 Aug 2015 22:02:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paetling&quot; class=&quot;user-hover&quot; rel=&quot;paetling&quot;&gt;paetling&lt;/a&gt; Here auto-assign node id is one-time op. Currently users have to declare a broker.id in server.properties and this is unique per broker in a cluster.&lt;br/&gt;
Whats this JIRA addressed is to allow users to not to declare broker.id instead kafka when it startsup acquire a sequnce id from zookeeper writes it into meta.properties to use as broker.id&lt;br/&gt;
once this is generated and written meta.properties it won&apos;t generate a new id. So the problem you are trying solve is not addressed by this JIRA it just allows users not to worry about declaring a broker.id in server.properties.&lt;/p&gt;</comment>
                            <comment id="14703049" author="paetling" created="Wed, 19 Aug 2015 13:55:19 +0000"  >&lt;p&gt;Thank you for the help!   I appreciate it.   &lt;/p&gt;</comment>
                            <comment id="14730763" author="amuraru" created="Fri, 4 Sep 2015 13:08:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; For some reason this patch was not applied correctly in trunk branch, I see an &lt;tt&gt;.orig&lt;/tt&gt; file in the patch here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/commit/b1b80860a01cc378cfada3549a3480f0773c3ff8#diff-d0716898c8daed9887ef83500ee0e16e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/commit/b1b80860a01cc378cfada3549a3480f0773c3ff8#diff-d0716898c8daed9887ef83500ee0e16e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14730892" author="sriharsha" created="Fri, 4 Sep 2015 14:38:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amuraru&quot; class=&quot;user-hover&quot; rel=&quot;amuraru&quot;&gt;amuraru&lt;/a&gt; Patch is already merged into trunk.&lt;/p&gt;</comment>
                            <comment id="14731941" author="amuraru" created="Sat, 5 Sep 2015 11:40:00 +0000"  >&lt;p&gt;Saw it, that&apos;s why I raised the flag here, the patch in trunk seems broken with the .orig file added. A new jira issue might be needed to fix it&lt;/p&gt;</comment>
                            <comment id="14734916" author="sriharsha" created="Tue, 8 Sep 2015 14:43:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amuraru&quot; class=&quot;user-hover&quot; rel=&quot;amuraru&quot;&gt;amuraru&lt;/a&gt; I am not sure where you are seeing .orig file in the trunk. Can you paste the link to that file from here &lt;a href=&quot;https://github.com/apache/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14734938" author="amuraru" created="Tue, 8 Sep 2015 14:57:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=harsha_ch&quot; class=&quot;user-hover&quot; rel=&quot;harsha_ch&quot;&gt;harsha_ch&lt;/a&gt; I see &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1973&quot; title=&quot;Remove the accidentally created LogCleanerManager.scala.orig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1973&quot;&gt;&lt;del&gt;KAFKA-1973&lt;/del&gt;&lt;/a&gt; already fixed that, nw &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12923068">KAFKA-3012</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12656678" name="KAFKA-1070.patch" size="210066" author="sriharsha" created="Sat, 19 Jul 2014 00:24:42 +0000"/>
                            <attachment id="12656763" name="KAFKA-1070_2014-07-19_16:06:13.patch" size="18575" author="sriharsha" created="Sat, 19 Jul 2014 23:06:31 +0000"/>
                            <attachment id="12657155" name="KAFKA-1070_2014-07-22_11:34:18.patch" size="36222" author="sriharsha" created="Tue, 22 Jul 2014 18:34:41 +0000"/>
                            <attachment id="12657765" name="KAFKA-1070_2014-07-24_20:58:17.patch" size="33400" author="sriharsha" created="Fri, 25 Jul 2014 03:58:37 +0000"/>
                            <attachment id="12657767" name="KAFKA-1070_2014-07-24_21:05:33.patch" size="22801" author="sriharsha" created="Fri, 25 Jul 2014 04:05:53 +0000"/>
                            <attachment id="12663433" name="KAFKA-1070_2014-08-21_10:26:20.patch" size="47828" author="sriharsha" created="Thu, 21 Aug 2014 17:26:28 +0000"/>
                            <attachment id="12682709" name="KAFKA-1070_2014-11-20_10:50:04.patch" size="35395" author="sriharsha" created="Thu, 20 Nov 2014 18:50:12 +0000"/>
                            <attachment id="12683762" name="KAFKA-1070_2014-11-25_20:29:37.patch" size="43806" author="sriharsha" created="Wed, 26 Nov 2014 04:29:53 +0000"/>
                            <attachment id="12689762" name="KAFKA-1070_2015-01-01_17:39:30.patch" size="28452" author="sriharsha" created="Fri, 2 Jan 2015 01:39:37 +0000"/>
                            <attachment id="12691693" name="KAFKA-1070_2015-01-12_10:46:54.patch" size="28790" author="sriharsha" created="Mon, 12 Jan 2015 18:47:00 +0000"/>
                            <attachment id="12691827" name="KAFKA-1070_2015-01-12_18:30:17.patch" size="29783" author="sriharsha" created="Tue, 13 Jan 2015 02:30:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351596</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1omd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351885</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>nehanarkhede</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>