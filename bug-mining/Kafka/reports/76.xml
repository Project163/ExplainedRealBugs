<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:35:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-416] Controller tests throw several zookeeper errors</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-416</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; == kafka.controller.ControllerBasicTest ==&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; Test Starting: testControllerFailOver(kafka.controller.ControllerBasicTest)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-25 11:16:06,911&amp;#93;&lt;/span&gt; WARN Exception causing close of session 0x0 due to java.io.IOException: ZooKeeperServer not running (org.apache.zookeeper.server.NIOServerCnxn:639)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; Test Passed: testControllerFailOver(kafka.controller.ControllerBasicTest)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; Test Starting: testControllerCommandSend(kafka.controller.ControllerBasicTest)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-25 11:16:13,802&amp;#93;&lt;/span&gt; WARN Session 0x138bf5a6e12000c for server null, unexpected error, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn:1188)&lt;br/&gt;
java.net.ConnectException: Connection refused&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-25 11:16:13,814&amp;#93;&lt;/span&gt; WARN Session 0x138bf5a6e12000a for server null, unexpected error, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn:1188)&lt;br/&gt;
java.net.ConnectException: Connection refused&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-25 11:16:13,822&amp;#93;&lt;/span&gt; WARN Session 0x138bf5a6e120008 for server null, unexpected error, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn:1188)&lt;br/&gt;
java.net.ConnectException: Connection refused&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-25 11:16:13,866&amp;#93;&lt;/span&gt; WARN Session 0x138bf5a6e12000b for server null, unexpected error, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn:1188)&lt;br/&gt;
java.net.ConnectException: Connection refused&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-25 11:16:14,153&amp;#93;&lt;/span&gt; WARN Session 0x138bf5a6e120006 for server null, unexpected error, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn:1188)&lt;br/&gt;
java.net.ConnectException: Connection refused&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-25 11:16:15,347&amp;#93;&lt;/span&gt; WARN Session 0x138bf5a6e12000c for server null, unexpected error, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn:1188)&lt;br/&gt;
java.net.ConnectException: Connection refused&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-25 11:16:15,712&amp;#93;&lt;/span&gt; WARN Session 0x138bf5a6e12000b for server null, unexpected error, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn:1188)&lt;br/&gt;
java.net.ConnectException: Connection refused&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-25 11:16:15,810&amp;#93;&lt;/span&gt; WARN Session 0x138bf5a6e12000a for server null, unexpected error, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn:1188)&lt;br/&gt;
java.net.ConnectException: Connection refused&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-25 11:16:15,848&amp;#93;&lt;/span&gt; WARN Session 0x138bf5a6e120008 for server null, unexpected error, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn:1188)&lt;br/&gt;
java.net.ConnectException: Connection refused&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; Test Passed: testControllerCommandSend(kafka.controller.ControllerBasicTest)&lt;/p&gt;

&lt;p&gt;These error messages suggest that the controller is not closing zookeeper sessions correctly. It could also mean that the unit test doesn&apos;t close zookeeper sessions correctly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12600198">KAFKA-416</key>
            <summary>Controller tests throw several zookeeper errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yeyangever">Yang Ye</assignee>
                                    <reporter username="nehanarkhede">Neha Narkhede</reporter>
                        <labels>
                            <label>bugs</label>
                            <label>replication-testing</label>
                    </labels>
                <created>Wed, 25 Jul 2012 18:17:41 +0000</created>
                <updated>Sat, 25 Aug 2012 00:28:20 +0000</updated>
                            <resolved>Sat, 25 Aug 2012 00:28:16 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13440870" author="yeyangever" created="Fri, 24 Aug 2012 01:48:29 +0000"  >&lt;p&gt;&lt;br/&gt;
removing the controllerBasicTest and added a RpcDataSerializationTest&lt;/p&gt;</comment>
                            <comment id="13441292" author="junrao" created="Fri, 24 Aug 2012 16:44:24 +0000"  >&lt;p&gt;Thanks for patch v1. Some comments:&lt;br/&gt;
1. StopReplicaRequest: Why do we need to add the encoding explicitly in readShortString() since it already defaults to utf-8?&lt;/p&gt;

&lt;p&gt;2. RpcDataSerializationTestUtils is only used by RpcDataSerializationTest. So, it probably should be moved to RpcDataSerializationTest.&lt;/p&gt;

&lt;p&gt;3. Can we rename RpcDataSerializationTest to RequestSerializationTest?&lt;/p&gt;</comment>
                            <comment id="13441529" author="yeyangever" created="Fri, 24 Aug 2012 21:55:12 +0000"  >&lt;p&gt;&lt;br/&gt;
fixed as suggested&lt;/p&gt;</comment>
                            <comment id="13441678" author="junrao" created="Sat, 25 Aug 2012 00:28:16 +0000"  >&lt;p&gt;Thanks for patch v3. Reverted the change in StopReplicaRequest in this patch. We probably need a separate jira to consistently change all usage of readShortString(). Committed the rest of the patch to 0.8.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12542226" name="kafka_416_v1.diff" size="20501" author="yeyangever" created="Fri, 24 Aug 2012 01:48:29 +0000"/>
                            <attachment id="12542349" name="kafka_416_v2.diff" size="21281" author="yeyangever" created="Fri, 24 Aug 2012 21:55:12 +0000"/>
                            <attachment id="12542377" name="kafka_416_v3.diff" size="21310" author="yeyangever" created="Sat, 25 Aug 2012 00:11:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>299116</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i15zp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243083</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>