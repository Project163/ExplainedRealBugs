<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:00:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4840] There are still cases where producer buffer pool will not remove waiters.</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4840</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;There are several problems dealing with errors in  BufferPool.allocate(int size, long maxTimeToBlockMs):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The accumulated number of bytes are not put back into the available pool when an exception happens and a thread is waiting for bytes to become available.  This will cause the capacity of the buffer pool to decrease over time any time a timeout is hit within this method.&lt;/li&gt;
	&lt;li&gt;If a Throwable other than InterruptedException is thrown out of await() for some reason or if there is an exception thrown in the corresponding finally block around the await(), for example if waitTime.record(.....) throws an exception, then the waiters are not removed from the waiters deque.&lt;/li&gt;
	&lt;li&gt;On timeout or other exception waiters could be signaled, but are not.  If no other buffers are freed then the next waiting thread will also timeout and so on.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13048247">KAFKA-4840</key>
            <summary>There are still cases where producer buffer pool will not remove waiters.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="smccauliff">Sean McCauliff</assignee>
                                    <reporter username="smccauliff">Sean McCauliff</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Mar 2017 02:18:44 +0000</created>
                <updated>Fri, 23 Mar 2018 16:34:11 +0000</updated>
                            <resolved>Tue, 22 Aug 2017 18:28:26 +0000</resolved>
                                    <version>0.10.2.0</version>
                                    <fixVersion>0.11.0.0</fixVersion>
                                    <component>clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15902125" author="githubbot" created="Wed, 8 Mar 2017 22:51:36 +0000"  >&lt;p&gt;GitHub user smccauliff opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2659&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2659&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4840&quot; title=&quot;There are still cases where producer buffer pool will not remove waiters.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4840&quot;&gt;&lt;del&gt;KAFKA-4840&lt;/del&gt;&lt;/a&gt; : BufferPool errors can cause buffer pool to go into a bad state&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/smccauliff/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/smccauliff/kafka&lt;/a&gt; kafka-4840&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2659.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2659.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2659&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit fe201ae279861c534f2f2e3513898d7ce292d5fe&lt;br/&gt;
Author: Sean McCauliff &amp;lt;smccauliff@linkedin.com&amp;gt;&lt;br/&gt;
Date:   2017-03-07T02:58:40Z&lt;/p&gt;

&lt;p&gt;    Remove more memory condition variable on throwable or sensor exception.&lt;/p&gt;

&lt;p&gt;commit 36b9265216b1a916ddbb4a7bff8f26a910b0fe0b&lt;br/&gt;
Author: Sean McCauliff &amp;lt;smccauliff@linkedin.com&amp;gt;&lt;br/&gt;
Date:   2017-03-07T06:37:55Z&lt;/p&gt;

&lt;p&gt;    Test sensor report exception.&lt;/p&gt;

&lt;p&gt;commit 7e4997b308e29ce5a20df1c50e30eec3a275a74e&lt;br/&gt;
Author: Sean McCauliff &amp;lt;smccauliff@linkedin.com&amp;gt;&lt;br/&gt;
Date:   2017-03-07T15:39:26Z&lt;/p&gt;

&lt;p&gt;    Fix checkstyle violations.&lt;br/&gt;
    Readability.&lt;/p&gt;

&lt;p&gt;commit f353afcf272e849b5f60ce0af653916240bebd7d&lt;br/&gt;
Author: Sean McCauliff &amp;lt;smccauliff@linkedin.com&amp;gt;&lt;br/&gt;
Date:   2017-03-08T22:30:52Z&lt;/p&gt;

&lt;p&gt;    Restore avaialble memory count on exception.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15983300" author="githubbot" created="Tue, 25 Apr 2017 17:32:29 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2659&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2659&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ay87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>