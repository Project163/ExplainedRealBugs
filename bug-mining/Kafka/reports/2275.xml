<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:18:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-8341] AdminClient should retry coordinator lookup after NOT_COORDINATOR error</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-8341</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;If a group operation (e.g. DescribeGroup) fails because the coordinator has moved, the AdminClient should lookup the coordinator before retrying the operation. Currently we will either fail or just retry anyway. This is similar in some ways to controller rediscovery after getting NOT_CONTROLLER errors.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13232338">KAFKA-8341</key>
            <summary>AdminClient should retry coordinator lookup after NOT_COORDINATOR error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vikasconfluent">Vikas Singh</assignee>
                                    <reporter username="hachikuji">Jason Gustafson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 May 2019 21:37:11 +0000</created>
                <updated>Sat, 25 May 2019 00:24:49 +0000</updated>
                            <resolved>Sat, 25 May 2019 00:24:49 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16838828" author="githubbot" created="Mon, 13 May 2019 19:19:34 +0000"  >&lt;p&gt;vikasconfluent commented on pull request #6723: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8341&quot; title=&quot;AdminClient should retry coordinator lookup after NOT_COORDINATOR error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8341&quot;&gt;&lt;del&gt;KAFKA-8341&lt;/del&gt;&lt;/a&gt;. Retry Consumer group operation for NOT_COORDINATOR error&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6723&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6723&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   An api call for consumer groups is made up of two calls:&lt;br/&gt;
   1. Find the consumer group coordinator&lt;br/&gt;
   2. Send the request to the node found in step 1&lt;/p&gt;

&lt;p&gt;   But the coordinator can get moved between step 1 and 2. In that case we&lt;br/&gt;
   currently fail. This change fixes that by detecting this error and then&lt;br/&gt;
   retrying.&lt;/p&gt;

&lt;p&gt;   Following APIs are impacted by this behavior:&lt;br/&gt;
   1. listConsumerGroupOffsets&lt;br/&gt;
   2. deleteConsumerGroups&lt;br/&gt;
   3. describeConsumerGroups&lt;/p&gt;

&lt;p&gt;   Each of these call result in AdminClient making multiple calls to the backend.&lt;br/&gt;
   As AdminClient code invokes each backend api in a separate event loop, the code&lt;br/&gt;
   that detects the error (step 2) need to restart whole operation including&lt;br/&gt;
   step 1. This needed a change to capture the &quot;Call&quot; object for step 1 in&lt;br/&gt;
   step 2.&lt;/p&gt;

&lt;p&gt;   This change thus refactors the code to make it easy to perform a retry of&lt;br/&gt;
   whole operation. It creates a Context object to capture the api arguments&lt;br/&gt;
   that can then be referred by each &quot;Call&quot; objects. This is just for convenience&lt;br/&gt;
   and makes method signature simpler as we only need to pass one object instead&lt;br/&gt;
   of multiple api arguments.&lt;/p&gt;

&lt;p&gt;   The creation of each &quot;Call&quot; object is done in a new method, so we can&lt;br/&gt;
   easily resubmit step 1 in step 2.&lt;/p&gt;

&lt;p&gt;   This change also modifies corresponding unit test to test this scenario.&lt;/p&gt;

&lt;p&gt;   *More detailed description of your change,&lt;br/&gt;
   if necessary. The PR title and PR message become&lt;br/&gt;
   the squashed commit message, so use a separate&lt;br/&gt;
   comment to ping reviewers.*&lt;/p&gt;

&lt;p&gt;   *Summary of testing strategy (including rationale)&lt;br/&gt;
   for the feature or bug fix. Unit and/or integration&lt;br/&gt;
   tests are expected for any behaviour change and&lt;br/&gt;
   system tests should be considered for larger changes.*&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16846900" author="githubbot" created="Thu, 23 May 2019 17:32:08 +0000"  >&lt;p&gt;soondenana commented on pull request #6723: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8341&quot; title=&quot;AdminClient should retry coordinator lookup after NOT_COORDINATOR error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8341&quot;&gt;&lt;del&gt;KAFKA-8341&lt;/del&gt;&lt;/a&gt;. Retry Consumer group operation for NOT_COORDINATOR error&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6723&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6723&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16846904" author="githubbot" created="Thu, 23 May 2019 17:35:56 +0000"  >&lt;p&gt;soondenana commented on pull request #6723: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8341&quot; title=&quot;AdminClient should retry coordinator lookup after NOT_COORDINATOR error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8341&quot;&gt;&lt;del&gt;KAFKA-8341&lt;/del&gt;&lt;/a&gt;. Retry Consumer group operation for NOT_COORDINATOR error&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6723&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6723&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   An api call for consumer groups is made up of two calls:&lt;br/&gt;
   1. Find the consumer group coordinator&lt;br/&gt;
   2. Send the request to the node found in step 1&lt;/p&gt;

&lt;p&gt;   But the coordinator can get moved between step 1 and 2. In that case we&lt;br/&gt;
   currently fail. This change fixes that by detecting this error and then&lt;br/&gt;
   retrying.&lt;/p&gt;

&lt;p&gt;   Following APIs are impacted by this behavior:&lt;br/&gt;
   1. listConsumerGroupOffsets&lt;br/&gt;
   2. deleteConsumerGroups&lt;br/&gt;
   3. describeConsumerGroups&lt;/p&gt;

&lt;p&gt;   Each of these call result in AdminClient making multiple calls to the backend.&lt;br/&gt;
   As AdminClient code invokes each backend api in a separate event loop, the code&lt;br/&gt;
   that detects the error (step 2) need to restart whole operation including&lt;br/&gt;
   step 1. This needed a change to capture the &quot;Call&quot; object for step 1 in&lt;br/&gt;
   step 2.&lt;/p&gt;

&lt;p&gt;   This change thus refactors the code to make it easy to perform a retry of&lt;br/&gt;
   whole operation. It creates a Context object to capture the api arguments&lt;br/&gt;
   that can then be referred by each &quot;Call&quot; objects. This is just for convenience&lt;br/&gt;
   and makes method signature simpler as we only need to pass one object instead&lt;br/&gt;
   of multiple api arguments.&lt;/p&gt;

&lt;p&gt;   The creation of each &quot;Call&quot; object is done in a new method, so we can&lt;br/&gt;
   easily resubmit step 1 in step 2.&lt;/p&gt;

&lt;p&gt;   This change also modifies corresponding unit test to test this scenario.&lt;/p&gt;

&lt;p&gt;   *More detailed description of your change,&lt;br/&gt;
   if necessary. The PR title and PR message become&lt;br/&gt;
   the squashed commit message, so use a separate&lt;br/&gt;
   comment to ping reviewers.*&lt;/p&gt;

&lt;p&gt;   *Summary of testing strategy (including rationale)&lt;br/&gt;
   for the feature or bug fix. Unit and/or integration&lt;br/&gt;
   tests are expected for any behaviour change and&lt;br/&gt;
   system tests should be considered for larger changes.*&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16847977" author="githubbot" created="Sat, 25 May 2019 00:20:24 +0000"  >&lt;p&gt;cmccabe commented on pull request #6723: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8341&quot; title=&quot;AdminClient should retry coordinator lookup after NOT_COORDINATOR error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8341&quot;&gt;&lt;del&gt;KAFKA-8341&lt;/del&gt;&lt;/a&gt;. Retry Consumer group operation for NOT_COORDINATOR error&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6723&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6723&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16847979" author="vikasconfluent" created="Sat, 25 May 2019 00:24:49 +0000"  >&lt;p&gt;fixed in commit&#160;46a02f3231cd6d340c622636159b9f59b4b3cb6e&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02iq8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>