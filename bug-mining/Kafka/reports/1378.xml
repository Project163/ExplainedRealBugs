<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:59:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4788] Broker level configuration &apos;log.segment.bytes&apos; not used when &apos;segment.bytes&apos; not configured per topic.</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4788</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In the previous version, if there was not topic level configuration &apos;segment.bytes&apos;, then the corresponding value from the broker configuration was used (for &apos;segment.bytes&apos;, this is the value configured for &apos;log.segment.bytes&apos;); in 0.10.2.0, if the configuration at topic level is missing, then the value configured at broker level is not used, some kind of default value for that broker level configuration is used (for &apos;log.retention.bytes&apos;, this is &apos;val LogSegmentBytes = 1 * 1024 * 1024 * 1024&apos;).&lt;br/&gt;
However, in the documentation it is said: &apos;A given server default config value only applies to a topic if it does not have an explicit topic config override.&apos;; so, according to this, if there is, for example, no value configured for &apos;segment.bytes&apos;, then the value configured for &apos;log.segment.bytes&apos; should be used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13045538">KAFKA-4788</key>
            <summary>Broker level configuration &apos;log.segment.bytes&apos; not used when &apos;segment.bytes&apos; not configured per topic.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ciprian">Ciprian Pascu</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Thu, 23 Feb 2017 07:59:13 +0000</created>
                <updated>Thu, 23 Feb 2017 16:36:25 +0000</updated>
                            <resolved>Thu, 23 Feb 2017 16:36:25 +0000</resolved>
                                    <version>0.10.2.0</version>
                                    <fixVersion>0.10.2.1</fixVersion>
                    <fixVersion>0.11.0.0</fixVersion>
                                    <component>log</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15880190" author="ijuma" created="Thu, 23 Feb 2017 09:48:26 +0000"  >&lt;p&gt;Thanks for the report. What was the most recent version where this worked for you and can you share the steps you took to create the topic?&lt;/p&gt;</comment>
                            <comment id="15880268" author="ciprian" created="Thu, 23 Feb 2017 11:11:20 +0000"  >&lt;p&gt;I am using command like this to create the topic:&lt;br/&gt;
bin/kafka-topics.sh --create --zookeeper x.x.x.x:2181 --replication-factor 1 --partitions 1 --topic test --config retention.bytes=2675303&lt;br/&gt;
The outcome is: Error while executing topic command : segment.bytes 1073741824 is not less than or equal to retention.bytes 2675303&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-02-23 13:08:04,797&amp;#93;&lt;/span&gt; ERROR org.apache.kafka.common.errors.InvalidConfigurationException: segment.bytes 1073741824 is not less than or equal to retention.bytes 2675303&lt;br/&gt;
 (kafka.admin.TopicCommand$)&lt;/p&gt;

&lt;p&gt;This was working fine in version 0.10.1.1.&lt;/p&gt;</comment>
                            <comment id="15880272" author="ciprian" created="Thu, 23 Feb 2017 11:15:37 +0000"  >&lt;p&gt;One addition: I have log.segment.bytes=2097152 in server.properties.&lt;/p&gt;</comment>
                            <comment id="15880281" author="omkreddy" created="Thu, 23 Feb 2017 11:29:47 +0000"  >&lt;p&gt;looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4092&quot; title=&quot;retention.bytes should not be allowed to be less than segment.bytes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4092&quot;&gt;KAFKA-4092&lt;/a&gt; change introduced this issue.  During validation, we are not inlcuding original/broker props. &lt;/p&gt;</comment>
                            <comment id="15880300" author="ijuma" created="Thu, 23 Feb 2017 11:45:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omkreddy&quot; class=&quot;user-hover&quot; rel=&quot;omkreddy&quot;&gt;omkreddy&lt;/a&gt;, would you like to provide a PR? I&apos;ll review it and merge it.&lt;/p&gt;</comment>
                            <comment id="15880385" author="omkreddy" created="Thu, 23 Feb 2017 13:00:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt;  While using kafka-topics.sh, we are doing topic-level config validation on the client (TopicCommand) side, not at broker side. So we don&apos;t have access to broker configs and &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4092&quot; title=&quot;retention.bytes should not be allowed to be less than segment.bytes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4092&quot;&gt;KAFKA-4092&lt;/a&gt; validation won&apos;t work. This validation can be added to Create Topic/Admin Request request code path.&lt;/p&gt;

&lt;p&gt;Also, &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4092&quot; title=&quot;retention.bytes should not be allowed to be less than segment.bytes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4092&quot;&gt;KAFKA-4092&lt;/a&gt; change may not be required. it&apos;s just config error, not a bug. We don&apos;t have this check for regular broker configs (without topic-level configs). Maybe we can revert the patch. &lt;/p&gt;</comment>
                            <comment id="15880409" author="githubbot" created="Thu, 23 Feb 2017 13:23:31 +0000"  >&lt;p&gt;GitHub user ijuma opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2588&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2588&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4788&quot; title=&quot;Broker level configuration &amp;#39;log.segment.bytes&amp;#39; not used when &amp;#39;segment.bytes&amp;#39; not configured per topic.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4788&quot;&gt;&lt;del&gt;KAFKA-4788&lt;/del&gt;&lt;/a&gt;: Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4092&quot; title=&quot;retention.bytes should not be allowed to be less than segment.bytes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4092&quot;&gt;KAFKA-4092&lt;/a&gt;: retention.bytes should not be allowed to be less than segment.bytes&quot;&lt;/p&gt;

&lt;p&gt;    The intent is good, but it needs to take into account broker configs as well.&lt;br/&gt;
    See &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4788&quot; title=&quot;Broker level configuration &amp;#39;log.segment.bytes&amp;#39; not used when &amp;#39;segment.bytes&amp;#39; not configured per topic.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4788&quot;&gt;&lt;del&gt;KAFKA-4788&lt;/del&gt;&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;    This reverts commit 4ca5abe8ee7578f602fb7653cb8a09640607ea85.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ijuma/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ijuma/kafka&lt;/a&gt; kafka-4788&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2588.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2588.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2588&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 56c197a904dbf7549534f6589e062c61e17e47b5&lt;br/&gt;
Author: Ismael Juma &amp;lt;ismael@juma.me.uk&amp;gt;&lt;br/&gt;
Date:   2017-02-23T13:19:06Z&lt;/p&gt;

&lt;p&gt;    Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4092&quot; title=&quot;retention.bytes should not be allowed to be less than segment.bytes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4092&quot;&gt;KAFKA-4092&lt;/a&gt;: retention.bytes should not be allowed to be less than segment.bytes&quot;&lt;/p&gt;

&lt;p&gt;    The intent is good, but it needs to take into account broker configs as well.&lt;br/&gt;
    See &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4788&quot; title=&quot;Broker level configuration &amp;#39;log.segment.bytes&amp;#39; not used when &amp;#39;segment.bytes&amp;#39; not configured per topic.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4788&quot;&gt;&lt;del&gt;KAFKA-4788&lt;/del&gt;&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;    This reverts commit 4ca5abe8ee7578f602fb7653cb8a09640607ea85.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15880453" author="ijuma" created="Thu, 23 Feb 2017 13:57:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omkreddy&quot; class=&quot;user-hover&quot; rel=&quot;omkreddy&quot;&gt;omkreddy&lt;/a&gt;, I think &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4092&quot; title=&quot;retention.bytes should not be allowed to be less than segment.bytes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4092&quot;&gt;KAFKA-4092&lt;/a&gt; is valuable, but the implementation needs to be revisited. I submitted a PR to revert the change for now.&lt;/p&gt;</comment>
                            <comment id="15880785" author="githubbot" created="Thu, 23 Feb 2017 16:29:55 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2588&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2588&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ahxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>