<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:02:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5167] streams task gets stuck after re-balance due to LockException</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5167</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;During rebalance processor node&apos;s close() method gets called two times once from StreamThread.suspendTasksAndState() and once from StreamThread.closeNonAssignedSuspendedTasks(). I have some instance filed which I am closing in processor&apos;s close method. This instance&apos;s close method throws some exception if I call close more than once. Because of this exception, the Kafka streams does not attempt to close the statemanager ie.  task.closeStateManager(true) is never called. When a task moves from one thread to another within same machine the task blocks trying to get lock on state directory which is still held by unclosed statemanager and keep throwing the below warning message:&lt;/p&gt;

&lt;p&gt;2017-04-30 12:34:17 WARN  StreamThread:1214 - Could not create task 0_1. Will retry.&lt;br/&gt;
org.apache.kafka.streams.errors.LockException: task &lt;span class=&quot;error&quot;&gt;&amp;#91;0_1&amp;#93;&lt;/span&gt; Failed to lock the state directory for task 0_1&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.ProcessorStateManager.&amp;lt;init&amp;gt;(ProcessorStateManager.java:100)&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.AbstractTask.&amp;lt;init&amp;gt;(AbstractTask.java:73)&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamTask.&amp;lt;init&amp;gt;(StreamTask.java:108)&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.createStreamTask(StreamThread.java:864)&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$TaskCreator.createTask(StreamThread.java:1237)&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$AbstractTaskCreator.retryWithBackoff(StreamThread.java:1210)&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.addStreamTasks(StreamThread.java:967)&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.access$600(StreamThread.java:69)&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$1.onPartitionsAssigned(StreamThread.java:234)&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.onJoinComplete(ConsumerCoordinator.java:259)&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.joinGroupIfNeeded(AbstractCoordinator.java:352)&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureActiveGroup(AbstractCoordinator.java:303)&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.poll(ConsumerCoordinator.java:290)&lt;br/&gt;
	at org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:1029)&lt;br/&gt;
	at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:995)&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.runLoop(StreamThread.java:592)&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.run(StreamThread.java:361)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13068842">KAFKA-5167</key>
            <summary>streams task gets stuck after re-balance due to LockException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mjsax">Matthias J. Sax</assignee>
                                    <reporter username="Narendra Kumar">Narendra Kumar</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 May 2017 17:12:43 +0000</created>
                <updated>Mon, 21 Aug 2017 00:32:37 +0000</updated>
                            <resolved>Thu, 6 Jul 2017 03:21:33 +0000</resolved>
                                    <version>0.10.2.0</version>
                    <version>0.10.2.1</version>
                    <version>0.11.0.0</version>
                                    <fixVersion>0.10.2.2</fixVersion>
                    <fixVersion>0.11.0.1</fixVersion>
                    <fixVersion>1.0.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="15995777" author="mjsax" created="Wed, 3 May 2017 22:08:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Narendra+Kumar&quot; class=&quot;user-hover&quot; rel=&quot;Narendra Kumar&quot;&gt;Narendra Kumar&lt;/a&gt; Thanks for reporting this. We fixed couple of bugs with regard to rebalance and state directory locks in &lt;tt&gt;0.10.2.1&lt;/tt&gt; that got released last week. Can you try the new release to see if it got already fixed there?&lt;/p&gt;</comment>
                            <comment id="16000384" author="wlsc" created="Mon, 8 May 2017 07:49:04 +0000"  >&lt;p&gt;This happens also in version 0.10.2.1.&lt;/p&gt;</comment>
                            <comment id="16000661" author="narendra kumar" created="Mon, 8 May 2017 12:22:47 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; We are still facing this issue in 0.10.2.1. I have attached the code to reproduce the issue. &lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;br/&gt;
1.  I had 6 partitions in input and output topics each. &lt;br/&gt;
2.  start the first instance on my local machine with 3 threads&lt;br/&gt;
3. pushed 10,000 messages to input topic&lt;br/&gt;
4. started the second application instance on the same local machine with 3 threads immediately after pushing the data to Kafka&lt;/p&gt;

&lt;p&gt;Note:- Both application instances were given different state directory path via command line arguments. &lt;/p&gt;

&lt;p&gt;When I run above test multiple time, I see different count in output topic. After analyzing I found that one of the task was stuck on state directory lock.&lt;br/&gt;
You might have to run the above test multiple time to see this behavior, because lock issue happens only when some task moves from one thread to  another within same instance.&lt;/p&gt;</comment>
                            <comment id="16001119" author="mjsax" created="Mon, 8 May 2017 17:14:43 +0000"  >&lt;p&gt;Thanks for trying out &lt;tt&gt;0.10.2.1&lt;/tt&gt; and for reporting back! We will try to reproduce the issue. &lt;/p&gt;</comment>
                            <comment id="16001150" author="mjsax" created="Mon, 8 May 2017 17:26:17 +0000"  >&lt;p&gt;Btw: &quot;I have some instance filed which I am closing in processor&apos;s close method. This instance&apos;s close method throws some exception if I call close more than once.&quot; &amp;#8211; Can you try-catch on close to swallow the exception that raises on second close? &amp;#8211; This might help to work around the bug &amp;#8211; &lt;tt&gt;close()&lt;/tt&gt; is expected to be idempotent that&apos;s why Streams call it twice (we might need to redesign this) &amp;#8211; we did already some task management rework for &lt;tt&gt;0.11.0.0&lt;/tt&gt; (will double check if &quot;close&quot; can still be called twice there.&lt;/p&gt;

&lt;p&gt;One more comments: the message you see is only a warn message and does not mean that Streams is broken in general &amp;#8211; it should just recover from it by itself (just add this if other people see the same stack trace in their logs). The issue is of course that this &quot;self recovery&quot; does not happen for the case reported.&lt;/p&gt;</comment>
                            <comment id="16002105" author="narendra kumar" created="Tue, 9 May 2017 05:59:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; swallowing the exception in close does avoid this problem. I believe, If calling &quot;&quot;close()&quot;&quot; multiple time is expected case then at least we should document this.&lt;/p&gt;</comment>
                            <comment id="16002120" author="githubbot" created="Tue, 9 May 2017 06:13:49 +0000"  >&lt;p&gt;GitHub user mjsax opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3001&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5167&quot; title=&quot;streams task gets stuck after re-balance due to LockException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5167&quot;&gt;&lt;del&gt;KAFKA-5167&lt;/del&gt;&lt;/a&gt;: streams task gets stuck after re-balance due to LockException&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mjsax/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mjsax/kafka&lt;/a&gt; kafka-5167-rebalance-lock-exception-0102&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3001.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3001.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3001&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e9e2bea5fbc9216973b42914a6d101b4b70a249a&lt;br/&gt;
Author: Matthias J. Sax &amp;lt;matthias@confluent.io&amp;gt;&lt;br/&gt;
Date:   2017-05-09T05:37:07Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5167&quot; title=&quot;streams task gets stuck after re-balance due to LockException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5167&quot;&gt;&lt;del&gt;KAFKA-5167&lt;/del&gt;&lt;/a&gt;: streams task gets stuck after re-balance due to LockException&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16002128" author="mjsax" created="Tue, 9 May 2017 06:20:13 +0000"  >&lt;p&gt;It seems that this issues does not affect current &lt;tt&gt;trunk&lt;/tt&gt; (ie, future &lt;tt&gt;0.11.0.0&lt;/tt&gt;) as we did some rework in task management already via &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5111&quot; title=&quot;Improve internal Task APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5111&quot;&gt;&lt;del&gt;KAFKA-5111&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Narendra+Kumar&quot; class=&quot;user-hover&quot; rel=&quot;Narendra Kumar&quot;&gt;Narendra Kumar&lt;/a&gt; There are currently no plans to release a &lt;tt&gt;0.10.2.2&lt;/tt&gt; bug-fix version. However, the recommended workaround for your user code, making &lt;tt&gt;close&lt;/tt&gt; idempotent by either setting a flag or swallowing the exception should fix the issue for you. Can you confirm this?&lt;/p&gt;</comment>
                            <comment id="16002152" author="mjsax" created="Tue, 9 May 2017 06:35:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Narendra+Kumar&quot; class=&quot;user-hover&quot; rel=&quot;Narendra Kumar&quot;&gt;Narendra Kumar&lt;/a&gt; Sorry. Did miss you last reply (did not refresh the browser). Glad that at swallowing workaround works for you. Agreed that it might make sense to document that &lt;tt&gt;close&lt;/tt&gt; could be called multiple times and thus, should be idempotent. Or we should call &lt;tt&gt;close&lt;/tt&gt; just once. Not sure which alternative is better. WDYT &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enothereska&quot; class=&quot;user-hover&quot; rel=&quot;enothereska&quot;&gt;enothereska&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=damianguy&quot; class=&quot;user-hover&quot; rel=&quot;damianguy&quot;&gt;damianguy&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="16009155" author="guozhang" created="Sat, 13 May 2017 05:53:34 +0000"  >&lt;p&gt;Merged &lt;a href=&quot;https://github.com/apache/kafka/pull/3001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3001&lt;/a&gt; to 0.10.2 branch. If we would release a 0.10.2.2 bug-fix then it will be included.&lt;/p&gt;

&lt;p&gt;I think it is OK to let `processor#close()` be idempotent.&lt;/p&gt;</comment>
                            <comment id="16009464" author="githubbot" created="Sat, 13 May 2017 19:01:22 +0000"  >&lt;p&gt;Github user mjsax closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3001&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16021786" author="joaopeixoto" created="Tue, 23 May 2017 20:33:42 +0000"  >&lt;p&gt;I just came across this very same exception, logs below, however I&apos;m not closing anything explicitly. I use one state store configured as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;StateStoreSupplier aggregationStore = Stores.create(storeTopic)
                                                    .withKeys(MyKey.SERDE)
                                                    .withValues(MyVal.SERDE)
                                                    .persistent()
                                                    .build();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My problem now is that my instance never recovered properly and is still throwing this exception. The health checks say the stream is running, which to some extent it is, but not very well. I happened to have caught this issue because I&apos;m monitoring the latency of the stream topology, which went from ~100ms total to 40s+.&lt;/p&gt;

&lt;p&gt;Questions:&lt;br/&gt;
1. Is there a way to effectively check the health of the stream, accounting for these cases?&lt;br/&gt;
2. Is there some configuration I can make in my topology to avoid/circumvent this problem? Maybe try an in-memory store rather than RocksDB?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2017-05-23 16:06:38.933 ERROR 46 --- [ StreamThread-5] o.a.k.s.p.internals.StreamThread         : stream-thread [StreamThread-5] Failed &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing StreamTask 0_11 due to commit consumer offsets:

org.apache.kafka.clients.consumer.CommitFailedException: Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured m
ax.poll.interval.ms, which typically implies that the poll loop is spending too much time message processing. You can address &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; either by increasing the session timeout or by reducing the maximum size of batches returned in poll() with max.poll.records.
        at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.sendOffsetCommitRequest(ConsumerCoordinator.java:702) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.commitOffsetsSync(ConsumerCoordinator.java:581) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.KafkaConsumer.commitSync(KafkaConsumer.java:1124) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamTask.commitOffsets(StreamTask.java:296) ~[kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread$3.apply(StreamThread.java:545) ~[kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread.performOnTasks(StreamThread.java:501) [kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread.commitOffsets(StreamThread.java:541) [kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread.suspendTasksAndState(StreamThread.java:479) [kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread.access$1300(StreamThread.java:69) [kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread$1.onPartitionsRevoked(StreamThread.java:252) [kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.onJoinPrepare(ConsumerCoordinator.java:400) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.joinGroupIfNeeded(AbstractCoordinator.java:342) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureActiveGroup(AbstractCoordinator.java:303) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.poll(ConsumerCoordinator.java:290) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:1029) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:995) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread.runLoop(StreamThread.java:592) [kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread.run(StreamThread.java:361) [kafka-streams-0.10.2.1.jar!/:na]

2017-05-23 16:06:38.933  INFO 46 --- [ StreamThread-5] o.a.k.s.p.internals.StreamThread         : stream-thread [StreamThread-5] Updating suspended tasks to contain active tasks [0_1, 0_6, 0_11]
2017-05-23 16:06:38.933  INFO 46 --- [ StreamThread-5] o.a.k.s.p.internals.StreamThread         : stream-thread [StreamThread-5] Removing all active tasks [0_1, 0_6, 0_11]
2017-05-23 16:06:38.933  INFO 46 --- [ StreamThread-5] o.a.k.s.p.internals.StreamThread         : stream-thread [StreamThread-5] Removing all standby tasks []
2017-05-23 16:06:38.933  INFO 46 --- [ StreamThread-5] o.a.k.c.c.internals.AbstractCoordinator  : (Re-)joining group accountingKsUsageCollection_network
2017-05-23 16:06:39.094  INFO 46 --- [ StreamThread-4] o.a.k.s.processor.internals.StreamTask   : task [0_7] Initializing processor nodes of the topology
2017-05-23 16:06:39.097  INFO 46 --- [ StreamThread-4] o.a.k.s.p.internals.StreamThread         : stream-thread [StreamThread-4] Creating active task 0_11 with assigned partitions [topicA-11, topicB-11]
2017-05-23 16:06:39.264  WARN 46 --- [ StreamThread-3] o.a.k.s.p.internals.StreamThread         : Could not create task 0_1. Will retry.

org.apache.kafka.streams.errors.LockException: task [0_1] Failed to lock the state directory &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; task 0_1
        at org.apache.kafka.streams.processor.internals.ProcessorStateManager.&amp;lt;init&amp;gt;(ProcessorStateManager.java:100) ~[kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.AbstractTask.&amp;lt;init&amp;gt;(AbstractTask.java:73) ~[kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamTask.&amp;lt;init&amp;gt;(StreamTask.java:108) ~[kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread.createStreamTask(StreamThread.java:864) [kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread$TaskCreator.createTask(StreamThread.java:1237) ~[kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread$AbstractTaskCreator.retryWithBackoff(StreamThread.java:1210) ~[kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread.addStreamTasks(StreamThread.java:967) [kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread.access$600(StreamThread.java:69) [kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread$1.onPartitionsAssigned(StreamThread.java:234) [kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.onJoinComplete(ConsumerCoordinator.java:259) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.joinGroupIfNeeded(AbstractCoordinator.java:352) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureActiveGroup(AbstractCoordinator.java:303) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.poll(ConsumerCoordinator.java:290) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:1029) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:995) [kafka-clients-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread.runLoop(StreamThread.java:592) [kafka-streams-0.10.2.1.jar!/:na]
        at org.apache.kafka.streams.processor.internals.StreamThread.run(StreamThread.java:361) [kafka-streams-0.10.2.1.jar!/:na]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16021868" author="mjsax" created="Tue, 23 May 2017 21:08:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoaoPeixoto&quot; class=&quot;user-hover&quot; rel=&quot;JoaoPeixoto&quot;&gt;JoaoPeixoto&lt;/a&gt; If I read the log you shared correctly, the root cause is not related to locks but to config parameter &lt;tt&gt;max.poll.interval.ms&lt;/tt&gt; &amp;#8211; the lock exception is kinda expected, and as long as the lock exception does resolve itself, this is not an issue (It&apos;s miss leading that the whole stack trace is added to the logs for this case &amp;#8211; we fixes this for 0.11 already. Also note, the first exception is logged as ERROR while the second is logged as WARN only.). As for config parameter &lt;tt&gt;max.poll.interval.ms&lt;/tt&gt;, we recommend to set it to &lt;tt&gt;Integer.MAX_VALUE&lt;/tt&gt; to avoid the &lt;tt&gt;CommitFailedException&lt;/tt&gt; &amp;#8211; this seems to be the root cause of the issue you observe &amp;#8211; we changed the default value to &lt;tt&gt;Integer.MAX_VALUE&lt;/tt&gt; already in &lt;tt&gt;0.10.2.1&lt;/tt&gt; (and also for &lt;tt&gt;0.11.0.0&lt;/tt&gt;). Thus, I would recommend to upgrade from &lt;tt&gt;0.10.2.0&lt;/tt&gt; to &lt;tt&gt;0.10.2.1&lt;/tt&gt; or set it via &lt;tt&gt;StreamConfig&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16021879" author="joaopeixoto" created="Tue, 23 May 2017 21:14:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; thanks for the clarification regarding the max poll interval, I&apos;ll be sure to fix that! (*&lt;b&gt;edit&lt;/b&gt;*: I&apos;m using version 0.10.2.1 which does set it to Integer.MAX_VALUE and I did not override it, so not sure what happened there)&lt;/p&gt;

&lt;p&gt;But my main point was exactly what you said, the lock exception does not resolve itself. The logs have been outputting the lock exception for 6 hours now. I&apos;m about to restart the instance, which should fix it, but the main point is that for this whole time the instance was considered &quot;healthy&quot; when in fact it was not.&lt;/p&gt;</comment>
                            <comment id="16021932" author="mjsax" created="Tue, 23 May 2017 21:47:34 +0000"  >&lt;p&gt;I see your point &amp;#8211; we are working on better monitoring already (cf &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP+130%3A+Expose+states+of+active+tasks+to+KafkaStreams+public+API&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/KIP+130%3A+Expose+states+of+active+tasks+to+KafkaStreams+public+API&lt;/a&gt;) &amp;#8211; maybe we need to reconsider our state management to improve the overall experience. We are also working on state store recovery and rebalance improvements for &lt;tt&gt;0.11&lt;/tt&gt; that will make Streams more robust. For &lt;tt&gt;0.10.2.1&lt;/tt&gt; I don&apos;t have any better advice atm &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Would you mind opening a new JIRA about this?&lt;/p&gt;</comment>
                            <comment id="16065664" author="mjsax" created="Tue, 27 Jun 2017 23:37:33 +0000"  >&lt;p&gt;The issue with multiple calls to &lt;tt&gt;close()&lt;/tt&gt; is addressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5485&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-5485&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16065808" author="githubbot" created="Wed, 28 Jun 2017 02:00:38 +0000"  >&lt;p&gt;GitHub user mjsax opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3449&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3449&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5167&quot; title=&quot;streams task gets stuck after re-balance due to LockException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5167&quot;&gt;&lt;del&gt;KAFKA-5167&lt;/del&gt;&lt;/a&gt;: Release state locks in case of failure&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mjsax/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mjsax/kafka&lt;/a&gt; kafka-5167-streams-task-gets-stuck-after-re-balance-due-to-LockException&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3449.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3449.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3449&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 722157b59e73b9e3090764551d9b4d502ed434c6&lt;br/&gt;
Author: Matthias J. Sax &amp;lt;matthias@confluent.io&amp;gt;&lt;br/&gt;
Date:   2017-06-28T01:48:42Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5167&quot; title=&quot;streams task gets stuck after re-balance due to LockException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5167&quot;&gt;&lt;del&gt;KAFKA-5167&lt;/del&gt;&lt;/a&gt;: Release state locks in case of failure&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16065812" author="mjsax" created="Wed, 28 Jun 2017 02:05:20 +0000"  >&lt;p&gt;This seems to got broken via &lt;a href=&quot;https://github.com/apache/kafka/commit/f7b7b4745541a576eb0219468263487b07bac959&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/commit/f7b7b4745541a576eb0219468263487b07bac959&lt;/a&gt; again. Thus, not fixed for &lt;tt&gt;0.11.0.0&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16066045" author="habdank" created="Wed, 28 Jun 2017 07:25:46 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I think I found much easier way to reproduce the same behaviour.&lt;br/&gt;
I am doing more less suche setup in the code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// loop over the inTopicName(s) {
&lt;/span&gt;
KStream&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; stringInput = kBuilder.stream( STRING_SERDE, STRING_SERDE, inTopicName );
stringInput.filter( streamFilter::passOrFilterMessages ).map( ndmNormalizer ).to( outTopicName );

&lt;span class=&quot;code-comment&quot;&gt;// } end of loop
&lt;/span&gt;
streams = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; KafkaStreams( kBuilder, streamsConfig );
streams.cleanUp();
streams.start();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And if there are &lt;b&gt;&lt;em&gt;num.stream.threads=4&lt;/em&gt;&lt;/b&gt; but there are 20 or more inTopicNames (many topics to read), then complete application startup is totally self-blocked, by writing endless:&lt;/p&gt;

&lt;p&gt;2017-06-27 18:34:25 INFO  StreamThread:828 - stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamThread-3&amp;#93;&lt;/span&gt; Creating active task 11_5 with assigned partitions [&lt;span class=&quot;error&quot;&gt;&amp;#91;int62_topic-5&amp;#93;&lt;/span&gt;]&lt;br/&gt;
2017-06-27 18:34:25 WARN  StreamThread:1184 - Could not create task 8_7. Will retry.&lt;br/&gt;
org.apache.kafka.streams.errors.LockException: task &lt;span class=&quot;error&quot;&gt;&amp;#91;8_7&amp;#93;&lt;/span&gt; Failed to lock the state directory: /data/my-app/tmp/kafka-state/stream/8_7&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.ProcessorStateManager.&amp;lt;init&amp;gt;(ProcessorStateManager.java:102) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.AbstractTask.&amp;lt;init&amp;gt;(AbstractTask.java:73) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamTask.&amp;lt;init&amp;gt;(StreamTask.java:108) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.createStreamTask(StreamThread.java:834) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$TaskCreator.createTask(StreamThread.java:1207) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$AbstractTaskCreator.retryWithBackoff(StreamThread.java:1180) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.addStreamTasks(StreamThread.java:937) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.access$500(StreamThread.java:69) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$1.onPartitionsAssigned(StreamThread.java:236) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.onJoinComplete(ConsumerCoordinator.java:255) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.joinGroupIfNeeded(AbstractCoordinator.java:339) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureActiveGroup(AbstractCoordinator.java:303) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.poll(ConsumerCoordinator.java:286) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:1030) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:995) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.runLoop(StreamThread.java:582) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.run(StreamThread.java:368) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2017-06-27 18:34:25 INFO  StreamThread:828 - stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamThread-2&amp;#93;&lt;/span&gt; Creating active task 7_9 with assigned partitions [&lt;span class=&quot;error&quot;&gt;&amp;#91;c0206_topic-9&amp;#93;&lt;/span&gt;]&lt;br/&gt;
2017-06-27 18:34:26 WARN  StreamThread:1184 - Could not create task 6_9. Will retry.&lt;br/&gt;
org.apache.kafka.streams.errors.LockException: task &lt;span class=&quot;error&quot;&gt;&amp;#91;6_9&amp;#93;&lt;/span&gt; Failed to lock the state directory: /data/my-app/tmp/kafka-state/stream/6_9&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.ProcessorStateManager.&amp;lt;init&amp;gt;(ProcessorStateManager.java:102) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.AbstractTask.&amp;lt;init&amp;gt;(AbstractTask.java:73) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamTask.&amp;lt;init&amp;gt;(StreamTask.java:108) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.createStreamTask(StreamThread.java:834) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$TaskCreator.createTask(StreamThread.java:1207) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$AbstractTaskCreator.retryWithBackoff(StreamThread.java:1180) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.addStreamTasks(StreamThread.java:937) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.access$500(StreamThread.java:69) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$1.onPartitionsAssigned(StreamThread.java:236) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.onJoinComplete(ConsumerCoordinator.java:255) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.joinGroupIfNeeded(AbstractCoordinator.java:339) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureActiveGroup(AbstractCoordinator.java:303) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.poll(ConsumerCoordinator.java:286) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:1030) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:995) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.runLoop(StreamThread.java:582) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.run(StreamThread.java:368) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2017-06-27 18:34:26 WARN  StreamThread:1184 - Could not create task 15_1. Will retry.&lt;br/&gt;
org.apache.kafka.streams.errors.LockException: task &lt;span class=&quot;error&quot;&gt;&amp;#91;15_1&amp;#93;&lt;/span&gt; Failed to lock the state directory: /data/my-app/tmp/kafka-state/stream/15_1&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.ProcessorStateManager.&amp;lt;init&amp;gt;(ProcessorStateManager.java:102) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.AbstractTask.&amp;lt;init&amp;gt;(AbstractTask.java:73) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamTask.&amp;lt;init&amp;gt;(StreamTask.java:108) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.createStreamTask(StreamThread.java:834) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$TaskCreator.createTask(StreamThread.java:1207) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$AbstractTaskCreator.retryWithBackoff(StreamThread.java:1180) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.addStreamTasks(StreamThread.java:937) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.access$500(StreamThread.java:69) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread$1.onPartitionsAssigned(StreamThread.java:236) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.onJoinComplete(ConsumerCoordinator.java:255) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.joinGroupIfNeeded(AbstractCoordinator.java:339) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureActiveGroup(AbstractCoordinator.java:303) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.poll(ConsumerCoordinator.java:286) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:1030) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:995) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.runLoop(StreamThread.java:582) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.kafka.streams.processor.internals.StreamThread.run(StreamThread.java:368) &lt;span class=&quot;error&quot;&gt;&amp;#91;my-app-stream.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2017-06-27 18:34:26 INFO  StreamThread:828 - stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamThread-4&amp;#93;&lt;/span&gt; Creating active task 13_3 with assigned partitions [&lt;span class=&quot;error&quot;&gt;&amp;#91;a0291_topic-3&amp;#93;&lt;/span&gt;]&lt;br/&gt;
2017-06-27 18:34:26 INFO  StreamThread:828 - stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamThread-1&amp;#93;&lt;/span&gt; Creating active task 12_4 with assigned partitions [&lt;span class=&quot;error&quot;&gt;&amp;#91;int77_topic-4&amp;#93;&lt;/span&gt;]&lt;/p&gt;</comment>
                            <comment id="16067362" author="mjsax" created="Wed, 28 Jun 2017 22:27:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=habdank&quot; class=&quot;user-hover&quot; rel=&quot;habdank&quot;&gt;habdank&lt;/a&gt; Seems you created &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5530&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-5530&lt;/a&gt; for this. Let&apos;s take it from there.&lt;/p&gt;</comment>
                            <comment id="16067798" author="habdank" created="Thu, 29 Jun 2017 05:56:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; OK. But be careful on two cases &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="16075854" author="guozhang" created="Thu, 6 Jul 2017 03:21:33 +0000"  >&lt;p&gt;Issue resolved by pull request 3449&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/3449&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3449&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16075856" author="githubbot" created="Thu, 6 Jul 2017 03:22:11 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3449&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3449&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13064015">KAFKA-5070</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="13081289">KAFKA-5485</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13077940">KAFKA-5397</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13064015">KAFKA-5070</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12866884" name="BugTest.java" size="1875" author="Narendra Kumar" created="Mon, 8 May 2017 12:06:46 +0000"/>
                            <attachment id="12866883" name="DebugTransformer.java" size="2493" author="Narendra Kumar" created="Mon, 8 May 2017 12:06:46 +0000"/>
                            <attachment id="12866217" name="logs.txt" size="107489" author="Narendra Kumar" created="Wed, 3 May 2017 17:14:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3efrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>