<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:30:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-13848] Clients remain connected after SASL re-authentication fails</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-13848</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Clients remain connected and able to produce or consume despite an expired OAUTHBEARER token.&lt;/p&gt;

&lt;p&gt;The problem can be reproduced using the &lt;a href=&quot;https://github.com/acsaki/kafka-sasl-reauth&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/acsaki/kafka-sasl-reauth&lt;/a&gt; project by starting the embedded OAuth2 server and Kafka, then running the long running consumer in OAuthBearerTest and then killing the OAuth2 server thus making the client unable to re-authenticate.&lt;/p&gt;

&lt;p&gt;Root cause seems to be SaslServerAuthenticator#calcCompletionTimesAndReturnSessionLifetimeMs failing to set ReauthInfo#sessionExpirationTimeNanos when tokens have already expired (when session life time goes negative), in turn causing KafkaChannel#serverAuthenticationSessionExpired returning false and finally SocketServer not closing the channel.&lt;/p&gt;

&lt;p&gt;The issue is observed with OAUTHBEARER but seems to have a wider impact on SASL re-authentication.&lt;/p&gt;</description>
                <environment>&lt;a href=&quot;https://github.com/acsaki/kafka-sasl-reauth&quot;&gt;https://github.com/acsaki/kafka-sasl-reauth&lt;/a&gt;</environment>
        <key id="13441071">KAFKA-13848</key>
            <summary>Clients remain connected after SASL re-authentication fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acsaki">Andras Csaki</assignee>
                                    <reporter username="acsaki">Andras Csaki</reporter>
                        <labels>
                            <label>Authentication</label>
                            <label>OAuth2</label>
                            <label>SASL</label>
                    </labels>
                <created>Fri, 22 Apr 2022 07:30:18 +0000</created>
                <updated>Thu, 4 Aug 2022 07:53:34 +0000</updated>
                            <resolved>Fri, 10 Jun 2022 14:26:55 +0000</resolved>
                                    <version>3.1.0</version>
                                    <fixVersion>3.3.0</fixVersion>
                                    <component>clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17526248" author="JIRAUSER288430" created="Fri, 22 Apr 2022 07:41:28 +0000"  >&lt;p&gt;Please assign this to me.&lt;/p&gt;

&lt;p&gt;My fix is underway, there&apos;s an easy way to do it in SaslServerAuthenticator#calcCompletionTimesAndReturnSessionLifetimeMs but I&apos;m struggling with writing the tests either in SaslServerAuthenticatorTest or in SaslAuthenticatorTest .&lt;/p&gt;

&lt;p&gt;With SaslServerAuthenticatorTest my main issue is that I have to walk through the state machine thus making the test not focused enough and hard to follow. With SaslAuthenticatorTest, I cannot seem to parse responses to at least assert that SaslAuthenticateResponse#sessionLifetimeMs is set to a non-null value. Another way to make this more integration like test more explicit would be to make NioEchoServer emulate SocketServer&apos;s behavior by closing the channel and assert for that. (NetworkTestUtils#waitForChannelClose)&lt;/p&gt;

&lt;p&gt;Please advise how it&apos;s best to test this.&lt;/p&gt;</comment>
                            <comment id="17533793" author="viktorsomogyi" created="Mon, 9 May 2022 13:03:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=acsaki&quot; class=&quot;user-hover&quot; rel=&quot;acsaki&quot;&gt;acsaki&lt;/a&gt; please write an email to the dev@kafka.apache.org email list so they can add you as a contributors. After this you&apos;ll be able to assign the jira to yourself. You can raise a PR regradless though.&lt;br/&gt;
(more on contribution: &lt;a href=&quot;https://kafka.apache.org/contributing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://kafka.apache.org/contributing&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17541293" author="showuon" created="Tue, 24 May 2022 06:30:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=acsaki&quot; class=&quot;user-hover&quot; rel=&quot;acsaki&quot;&gt;acsaki&lt;/a&gt; , thanks for reporting the issue. The change makes sense to me. But I&apos;d like to hear the code author&apos;s comments. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rndgstn&quot; class=&quot;user-hover&quot; rel=&quot;rndgstn&quot;&gt;rndgstn&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rsivaram&quot; class=&quot;user-hover&quot; rel=&quot;rsivaram&quot;&gt;rsivaram&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17552784" author="JIRAUSER288430" created="Fri, 10 Jun 2022 14:26:55 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt; , &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tombentley&quot; class=&quot;user-hover&quot; rel=&quot;tombentley&quot;&gt;tombentley&lt;/a&gt; and Sam Barker for the review! I&apos;m leaving &quot;fix version&quot; empty for now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z11pa0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>showuon</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>