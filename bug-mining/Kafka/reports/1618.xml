<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:03:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5658] Fix AdminClient request timeout handling bug resulting in continual BrokerNotAvailableExceptions</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5658</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The AdminClient does not properly clear calls from the callsInFlight structure.  Later, in an effort to clear the lingering call objects, it closes the connection they are associated with.  This disrupts new incoming calls, which then get &lt;tt&gt;java.util.concurrent.ExecutionException: org.apache.kafka.common.errors.BrokerNotAvailableException&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13090325">KAFKA-5658</key>
            <summary>Fix AdminClient request timeout handling bug resulting in continual BrokerNotAvailableExceptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cmccabe">Colin McCabe</assignee>
                                    <reporter username="norwood">dan norwood</reporter>
                        <labels>
                            <label>reliability</label>
                    </labels>
                <created>Wed, 26 Jul 2017 20:42:16 +0000</created>
                <updated>Tue, 8 Aug 2017 08:51:36 +0000</updated>
                            <resolved>Tue, 8 Aug 2017 08:51:36 +0000</resolved>
                                    <version>0.11.0.0</version>
                                    <fixVersion>0.11.0.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16102290" author="githubbot" created="Wed, 26 Jul 2017 21:06:52 +0000"  >&lt;p&gt;GitHub user cmccabe opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3584&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5658&quot; title=&quot;Fix AdminClient request timeout handling bug resulting in continual BrokerNotAvailableExceptions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5658&quot;&gt;&lt;del&gt;KAFKA-5658&lt;/del&gt;&lt;/a&gt;. Fix AdminClient request timeout handling bug resulting in continual BrokerNotAvailableExceptions&lt;/p&gt;

&lt;p&gt;    The AdminClient does not properly clear calls from the callsInFlight structure. Later, in an effort to clear the lingering call objects, it closes the connection they are associated with. This disrupts new incoming calls, which then get BrokerNotAvailableException.&lt;/p&gt;

&lt;p&gt;    This patch fixes this bug by properly removing completed calls from the callsInFlight structure.  It also adds the Call#aborted flag, which ensures that we only abort a connection once-- even if there is a similar bug in the future which causes old Call objects to linger.  This patch also fixes a case where AdminClient#describeConfigs was making an extra RPC that had no useful effect.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cmccabe/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cmccabe/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5658&quot; title=&quot;Fix AdminClient request timeout handling bug resulting in continual BrokerNotAvailableExceptions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5658&quot;&gt;&lt;del&gt;KAFKA-5658&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3584.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3584.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3584&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7eedf51d2b29565460f04f78435f2bdf5a9cd661&lt;br/&gt;
Author: Colin P. Mccabe &amp;lt;cmccabe@confluent.io&amp;gt;&lt;br/&gt;
Date:   2017-07-17T17:04:58Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5602&quot; title=&quot;Add --custom-ducktape flag to ducker-ak&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5602&quot;&gt;&lt;del&gt;KAFKA-5602&lt;/del&gt;&lt;/a&gt;: ducker-ak: support --custom-ducktape&lt;/p&gt;

&lt;p&gt;    Support a --custom-ducktape flag which allows developers to install&lt;br/&gt;
    their own versions of ducktape into Docker images.  This is helpful for&lt;br/&gt;
    ducktape development.&lt;/p&gt;

&lt;p&gt;commit 811983f02cb1ff887bbe75ffc22ef51f98a99a36&lt;br/&gt;
Author: Colin P. Mccabe &amp;lt;cmccabe@confluent.io&amp;gt;&lt;br/&gt;
Date:   2017-07-26T20:57:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5658&quot; title=&quot;Fix AdminClient request timeout handling bug resulting in continual BrokerNotAvailableExceptions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5658&quot;&gt;&lt;del&gt;KAFKA-5658&lt;/del&gt;&lt;/a&gt;. Fix AdminClient request timeout handling bug resulting in continual BrokerNotAvailableExceptions&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16118052" author="githubbot" created="Tue, 8 Aug 2017 08:41:45 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3584&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3i22f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>