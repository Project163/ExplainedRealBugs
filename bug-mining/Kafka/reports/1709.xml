<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:04:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-6016] Use the idempotent producer in the reassign_partitions_test</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-6016</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Currently, the reassign partitions test doesn&apos;t use the idempotent producer. This means that bugs like &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6003&quot; title=&quot;Replication Fetcher thread for a partition with no data fails to start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6003&quot;&gt;&lt;del&gt;KAFKA-6003&lt;/del&gt;&lt;/a&gt; have gone unnoticed. We should update the test to use the idempotent producer and recreate that bug on a regular basis so that we are fully testing all code paths.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13107137">KAFKA-6016</key>
            <summary>Use the idempotent producer in the reassign_partitions_test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurva">Apurva Mehta</assignee>
                                    <reporter username="apurva">Apurva Mehta</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Oct 2017 05:25:22 +0000</created>
                <updated>Tue, 10 Oct 2017 17:41:28 +0000</updated>
                            <resolved>Tue, 10 Oct 2017 17:41:28 +0000</resolved>
                                    <version>0.11.0.1</version>
                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16193718" author="githubbot" created="Thu, 5 Oct 2017 21:18:45 +0000"  >&lt;p&gt;GitHub user apurvam opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/4029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4029&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6016&quot; title=&quot;Use the idempotent producer in the reassign_partitions_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6016&quot;&gt;&lt;del&gt;KAFKA-6016&lt;/del&gt;&lt;/a&gt;: Make the reassign partitions system test use the idempotent producer&lt;/p&gt;

&lt;p&gt;    With these changes, we are ensuring that the partitions being reassigned are from non-zero offsets. We also ensure that every message in the log has producerId and sequence number. &lt;/p&gt;

&lt;p&gt;    This means that it successfully reproduces &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6003&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-6003&lt;/a&gt;, as can be seen below:&lt;/p&gt;

&lt;p&gt;    ```&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;2017-10-05 20:57:00,466&amp;#93;&lt;/span&gt; ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;ReplicaFetcher replicaId=1, leaderId=4, fetcherId=0&amp;#93;&lt;/span&gt; Error due to (kafka.server.ReplicaFetcherThread)&lt;br/&gt;
    kafka.common.KafkaException: Error processing data for partition test_topic-16 offset 682&lt;br/&gt;
            at kafka.server.AbstractFetcherThread$$anonfun$processFetchRequest$2$$anonfun$apply$mcV$sp$1$$anonfun$apply$2.apply(AbstractFetcherThread.scala:203)&lt;br/&gt;
            at kafka.server.AbstractFetcherThread$$anonfun$processFetchRequest$2$$anonfun$apply$mcV$sp$1$$anonfun$apply$2.apply(AbstractFetcherThread.scala:171)&lt;br/&gt;
            at scala.Option.foreach(Option.scala:257)&lt;br/&gt;
            at kafka.server.AbstractFetcherThread$$anonfun$processFetchRequest$2$$anonfun$apply$mcV$sp$1.apply(AbstractFetcherThread.scala:171)&lt;br/&gt;
            at kafka.server.AbstractFetcherThread$$anonfun$processFetchRequest$2$$anonfun$apply$mcV$sp$1.apply(AbstractFetcherThread.scala:168)&lt;br/&gt;
            at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)&lt;br/&gt;
            at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)&lt;br/&gt;
            at kafka.server.AbstractFetcherThread$$anonfun$processFetchRequest$2.apply$mcV$sp(AbstractFetcherThread.scala:168)&lt;br/&gt;
            at kafka.server.AbstractFetcherThread$$anonfun$processFetchRequest$2.apply(AbstractFetcherThread.scala:168)&lt;br/&gt;
            at kafka.server.AbstractFetcherThread$$anonfun$processFetchRequest$2.apply(AbstractFetcherThread.scala:168)&lt;br/&gt;
            at kafka.utils.CoreUtils$.inLock(CoreUtils.scala:218)&lt;br/&gt;
            at kafka.server.AbstractFetcherThread.processFetchRequest(AbstractFetcherThread.scala:166)&lt;br/&gt;
            at kafka.server.AbstractFetcherThread.doWork(AbstractFetcherThread.scala:109)&lt;br/&gt;
            at kafka.utils.ShutdownableThread.run(ShutdownableThread.scala:64)&lt;br/&gt;
    Caused by: org.apache.kafka.common.errors.UnknownProducerIdException: Found no record of producerId=1000 on the broker. It is possible that the last message with the producerId=1000 has been removed due to hitting the retention limit.&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apurvam/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apurvam/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6016&quot; title=&quot;Use the idempotent producer in the reassign_partitions_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6016&quot;&gt;&lt;del&gt;KAFKA-6016&lt;/del&gt;&lt;/a&gt;-add-idempotent-producer-to-reassign-partitions&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/4029.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4029.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4029&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit af48d74be4f2c4473d8f97664ff0f3e450bfe3ec&lt;br/&gt;
Author: Apurva Mehta &amp;lt;apurva@confluent.io&amp;gt;&lt;br/&gt;
Date:   2017-10-05T05:27:23Z&lt;/p&gt;

&lt;p&gt;    Initial commit trying to create the scenario where we are creating a&lt;br/&gt;
    replica from scratch but starting from a non zero sequence when doing&lt;br/&gt;
    so.&lt;/p&gt;

&lt;p&gt;commit 9566f91b00a5a7c249823107e4792b844809ccca&lt;br/&gt;
Author: Apurva Mehta &amp;lt;apurva@confluent.io&amp;gt;&lt;br/&gt;
Date:   2017-10-05T05:52:24Z&lt;/p&gt;

&lt;p&gt;    Use retention bytes to force segment deletion&lt;/p&gt;

&lt;p&gt;commit 6087b3ed01472d24677623c9b3ef92a3678da96f&lt;br/&gt;
Author: Apurva Mehta &amp;lt;apurva@confluent.io&amp;gt;&lt;br/&gt;
Date:   2017-10-05T21:16:47Z&lt;/p&gt;

&lt;p&gt;    Configure the log so that we can reproduce the case where we are building producer state from a non zero sequence&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16199049" author="githubbot" created="Tue, 10 Oct 2017 17:41:00 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/4029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4029&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16199051" author="hachikuji" created="Tue, 10 Oct 2017 17:41:28 +0000"  >&lt;p&gt;Issue resolved by pull request 4029&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/4029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4029&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kwf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>