<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:56:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3396] Unauthorized topics are returned to the user</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3396</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Kafka&apos;s clients and protocol exposes unauthorized topics to the end user. This is often considered a security hole. To some, the topic name is considered sensitive information. Those that do not consider the name sensitive, still consider it more information that allows a user to try and circumvent security.  Instead, if a user does not have access to the topic, the servers should act as if the topic does not exist. &lt;/p&gt;

&lt;p&gt;To solve this some of the changes could include:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The broker should not return a TOPIC_AUTHORIZATION(29) error for requests (metadata, produce, fetch, etc) that include a topic that the user does not have DESCRIBE access to.&lt;/li&gt;
	&lt;li&gt;A user should not receive a TopicAuthorizationException when they do not have DESCRIBE access to a topic or the cluster.&lt;/li&gt;
	&lt;li&gt;The client should not maintain and expose a list of unauthorized topics in org.apache.kafka.common.Cluster.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Other changes may be required that are not listed here. Further analysis is needed. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12950069">KAFKA-3396</key>
            <summary>Unauthorized topics are returned to the user</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ecomar">Edoardo Comar</assignee>
                                    <reporter username="granthenke">Grant Henke</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Mar 2016 21:32:03 +0000</created>
                <updated>Tue, 4 Oct 2016 00:24:22 +0000</updated>
                            <resolved>Sat, 1 Oct 2016 06:09:10 +0000</resolved>
                                    <version>0.9.0.0</version>
                    <version>0.10.0.0</version>
                                    <fixVersion>0.10.1.0</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15280197" author="ecomar" created="Wed, 11 May 2016 14:22:47 +0000"  >&lt;p&gt;Hi &lt;br/&gt;
we have worked on a simple patch that would return Errors.UNKNOWN_TOPIC_OR_PARTITION on a TopicMetadataRequest if the session&apos;s user has no DESCRIBE access to the Topic.&lt;/p&gt;

&lt;p&gt;we would only return TOPIC_AUTHORIZATION error if&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the user has DESCRIBE&lt;br/&gt;
AND&lt;/li&gt;
	&lt;li&gt;autocreate topic is on, but the user has no CREATE permission on Cluster.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This should make an attacker, without permissions &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;,  unable to distinguish between a topic that exists and one that doesn&apos;t exist.&lt;/p&gt;

&lt;p&gt;Note that with Authenticator and ACL, the setting autocreate=true on the broker, would require autocreation of the ACL on the new topic, &lt;br/&gt;
else a user is still unable to create and use a new topic.  &lt;/p&gt;

&lt;p&gt;Edo and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mimaison&quot; class=&quot;user-hover&quot; rel=&quot;mimaison&quot;&gt;mimaison&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15280293" author="granthenke" created="Wed, 11 May 2016 15:35:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ecomar&quot; class=&quot;user-hover&quot; rel=&quot;ecomar&quot;&gt;ecomar&lt;/a&gt; Thanks for working on a patch! Feel free to assign to yourself to this jira and send a PR. I am sure the exact rules may require some discussion. &lt;/p&gt;

&lt;p&gt;Can you help my understand why don&apos;t we want to return UNKNOWN_TOPIC_OR_PARTITION when auto-create topic is on, but the user has no CREATE permission on Cluster? &lt;/p&gt;

&lt;p&gt;FYI: We are slowly woking on moving auto-creation to be client side (&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2410&quot; title=&quot;Implement &amp;quot;Auto Topic Creation&amp;quot; client side and remove support from Broker side&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2410&quot;&gt;KAFKA-2410&lt;/a&gt;), but that requires some of the &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-4+-+Command+line+and+centralized+administrative+operations&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;KIP-4&lt;/a&gt; work first. I am hoping to get that work done shortly after the 0.10 release. &lt;/p&gt;</comment>
                            <comment id="15282659" author="ecomar" created="Fri, 13 May 2016 12:29:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=granthenke&quot; class=&quot;user-hover&quot; rel=&quot;granthenke&quot;&gt;granthenke&lt;/a&gt; I thought that if a user has DESCRIBE permission on topic yet to be created, &lt;br/&gt;
autocreate is on, but the user has no CREATE permission on cluster, &lt;br/&gt;
there is no reason to hide the name of the topic or hide the reason of the failure.&lt;/p&gt;

&lt;p&gt;The fact that, in SimpleAclAuthorizer, the DESCRIBE permission only accepts the name of the topic or a wildcard for all topic,&lt;br/&gt;
makes this scenario not very likely, IMHO, but still a possibility.&lt;br/&gt;
Might be more common with an Authorizer implementation that allows topic names with wildcard &lt;br/&gt;
(e.g. I could have DESCRIBE on all topics starting named like &quot;edo-*&quot;) &lt;/p&gt;

&lt;p&gt;have to work on unit tests before I can make a PR&lt;/p&gt;</comment>
                            <comment id="15287873" author="ecomar" created="Tue, 17 May 2016 23:25:43 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=granthenke&quot; class=&quot;user-hover&quot; rel=&quot;granthenke&quot;&gt;granthenke&lt;/a&gt; we&apos;re still working on it, &lt;br/&gt;
we&apos;re working to get the unit tests pass (and added a few others) .&lt;/p&gt;

&lt;p&gt;We had some surprises running `SaslSslEndToEndAuthorizationTest`&lt;br/&gt;
if we change the consumers from &lt;br/&gt;
```consumers.head.assign(List(tp).asJava)```&lt;br/&gt;
to&lt;br/&gt;
```consumers.head.subscribe(List(topic).asJava) ```&lt;br/&gt;
the code paths are different and even the original tests may not pass unless we change&lt;br/&gt;
```  this.serverConfig.setProperty(KafkaConfig.MinInSyncReplicasProp, &quot;1&quot;)```&lt;br/&gt;
to be a `&quot;1&quot;`&lt;br/&gt;
which is the case also for the original code. Not sure if we&apos;re missing something.&lt;/p&gt;</comment>
                            <comment id="15289551" author="ecomar" created="Wed, 18 May 2016 18:38:37 +0000"  >&lt;p&gt;I&apos;m held back by &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3727&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-3727&lt;/a&gt;&lt;br/&gt;
and&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3728&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-3728&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15300408" author="githubbot" created="Wed, 25 May 2016 16:53:27 +0000"  >&lt;p&gt;GitHub user edoardocomar opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1428&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3396&quot; title=&quot;Unauthorized topics are returned to the user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3396&quot;&gt;&lt;del&gt;KAFKA-3396&lt;/del&gt;&lt;/a&gt; : Unauthorized topics are returned to the user&lt;/p&gt;

&lt;p&gt;    Modified KafkaApis to return Errors.UNKNOWN_TOPIC_OR_PARTITION if&lt;br/&gt;
    principal has no Describe access to topic&lt;/p&gt;

&lt;p&gt;    Unit tests expanded&lt;/p&gt;

&lt;p&gt;    Some paths cause the client to block due to bug&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3727?filter=-2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-3727?filter=-2&lt;/a&gt;&lt;br/&gt;
    tests work around this by executing in separate thread&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/edoardocomar/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/edoardocomar/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3396&quot; title=&quot;Unauthorized topics are returned to the user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3396&quot;&gt;&lt;del&gt;KAFKA-3396&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1428.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1428.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1428&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 623f3ebd3ecca664a3b201fa86aa58964427f972&lt;br/&gt;
Author: Edoardo Comar &amp;lt;ecomar@uk.ibm.com&amp;gt;&lt;br/&gt;
Date:   2016-05-25T15:22:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3396&quot; title=&quot;Unauthorized topics are returned to the user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3396&quot;&gt;&lt;del&gt;KAFKA-3396&lt;/del&gt;&lt;/a&gt; : Unauthorized topics are returned to the user&lt;/p&gt;

&lt;p&gt;    Modified KafkaApis to return Errors.UNKNOWN_TOPIC_OR_PARTITION if&lt;br/&gt;
    principal has no Describe access to topic&lt;/p&gt;

&lt;p&gt;    Unit tests expanded&lt;/p&gt;

&lt;p&gt;    Some paths cause the client to block due to bug&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3727?filter=-2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-3727?filter=-2&lt;/a&gt;&lt;br/&gt;
    tests work around this by executing in separate thread&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15497797" author="ijuma" created="Sat, 17 Sep 2016 00:19:16 +0000"  >&lt;p&gt;Marking this as &quot;Critical&quot; so that we can make sure we get to it for 0.10.1.0.&lt;/p&gt;</comment>
                            <comment id="15516761" author="githubbot" created="Fri, 23 Sep 2016 15:32:36 +0000"  >&lt;p&gt;Github user edoardocomar closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1428&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15529377" author="ecomar" created="Wed, 28 Sep 2016 11:55:10 +0000"  >&lt;p&gt;new PR is &lt;a href=&quot;https://github.com/apache/kafka/pull/1908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1908&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15537983" author="hachikuji" created="Sat, 1 Oct 2016 06:09:11 +0000"  >&lt;p&gt;Issue resolved by pull request 1908&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/1908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1908&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15537984" author="githubbot" created="Sat, 1 Oct 2016 06:09:19 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1908&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15538039" author="githubbot" created="Sat, 1 Oct 2016 06:52:46 +0000"  >&lt;p&gt;GitHub user hachikuji opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1946&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1946&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    MINOR: Follow-up minor improvements/cleanup for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3396&quot; title=&quot;Unauthorized topics are returned to the user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3396&quot;&gt;&lt;del&gt;KAFKA-3396&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hachikuji/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hachikuji/kafka&lt;/a&gt; followup-for-kafka-3396&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1946.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1946.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1946&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit efd843430651aacc90d3d2b4c7f3d635416c24be&lt;br/&gt;
Author: Jason Gustafson &amp;lt;jason@confluent.io&amp;gt;&lt;br/&gt;
Date:   2016-10-01T05:42:22Z&lt;/p&gt;

&lt;p&gt;    MINOR: Follow-up minor improvements/cleanup for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3396&quot; title=&quot;Unauthorized topics are returned to the user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3396&quot;&gt;&lt;del&gt;KAFKA-3396&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15543862" author="githubbot" created="Tue, 4 Oct 2016 00:24:22 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1946&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1946&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2umsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>