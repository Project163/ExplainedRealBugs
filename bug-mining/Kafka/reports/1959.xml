<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:12:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-7058] ConnectSchema#equals() broken for array-typed default values</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-7058</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;&lt;tt&gt;ConnectSchema#equals()&lt;/tt&gt; calls &lt;tt&gt;Objects#equals()&lt;/tt&gt; for the schemas&apos; default values, but this doesn&apos;t work correctly if the default values in fact are arrays. In this case, always &lt;tt&gt;false&lt;/tt&gt; will be returned, also if the default value arrays actually are the same.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13166059">KAFKA-7058</key>
            <summary>ConnectSchema#equals() broken for array-typed default values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ewencp">Ewen Cheslack-Postava</assignee>
                                    <reporter username="gunnar.morling">Gunnar Morling</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jun 2018 10:12:54 +0000</created>
                <updated>Sun, 17 Jun 2018 06:28:36 +0000</updated>
                            <resolved>Sun, 17 Jun 2018 06:28:36 +0000</resolved>
                                    <version>1.0.0</version>
                    <version>1.1.0</version>
                                    <fixVersion>0.9.0.2</fixVersion>
                    <fixVersion>0.10.0.2</fixVersion>
                    <fixVersion>0.10.1.2</fixVersion>
                    <fixVersion>0.10.2.2</fixVersion>
                    <fixVersion>0.11.0.3</fixVersion>
                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.1.1</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16512261" author="gunnar.morling" created="Thu, 14 Jun 2018 10:13:42 +0000"  >&lt;p&gt;I&apos;ll send a pull request for this in a bit.&lt;/p&gt;</comment>
                            <comment id="16512270" author="githubbot" created="Thu, 14 Jun 2018 10:18:10 +0000"  >&lt;p&gt;gunnarmorling opened a new pull request #5225: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7058&quot; title=&quot;ConnectSchema#equals() broken for array-typed default values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7058&quot;&gt;&lt;del&gt;KAFKA-7058&lt;/del&gt;&lt;/a&gt; Comparing schema default values using Objects#deepEquals()&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5225&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7058&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-7058&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Summary of testing strategy: Added new unit test&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16512271" author="gunnar.morling" created="Thu, 14 Jun 2018 10:18:29 +0000"  >&lt;p&gt;Sent PR &lt;a href=&quot;https://github.com/apache/kafka/pull/5225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5225&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16512606" author="rhauch" created="Thu, 14 Jun 2018 15:20:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gunnar.morling&quot; class=&quot;user-hover&quot; rel=&quot;gunnar.morling&quot;&gt;gunnar.morling&lt;/a&gt; thanks for the PR. It looks good, but we&apos;re a few days past code freeze and even though this is a small change I&apos;m not sure we can call this a real blocker. I&apos;m going to approve it, but we&apos;ll probably have to wait until after the 2.0 release to merge. The good news is that this should backport pretty cleanly back to the 0.9 or 0.10 branches, and so it would be in the next patch release on the various branches whenever they occur.&lt;/p&gt;</comment>
                            <comment id="16512618" author="gunnar.morling" created="Thu, 14 Jun 2018 15:32:25 +0000"  >&lt;p&gt;Thanks for the quick review, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhauch&quot; class=&quot;user-hover&quot; rel=&quot;rhauch&quot;&gt;rhauch&lt;/a&gt;. It&apos;s definitely not a blocker for us, we worked around it by having our own equals() implementation for schemas for now.&lt;/p&gt;

&lt;p&gt;I&apos;m curious about the Kafka versions maintained going forward, though. Will it be 0.10.x and 2.0, but not 1.x?&lt;/p&gt;</comment>
                            <comment id="16514460" author="rhauch" created="Fri, 15 Jun 2018 22:37:32 +0000"  >&lt;p&gt;I recommended that this be merged back as far as possible, including all of the branches in between (e.g., 0.10.. That way it will be included in all subsequent patch releases, if/when they occur.&lt;/p&gt;

&lt;p&gt;The next release (soon!) is going to be 2.0 since AK is removing support for JDK 7, and so even though we just released 1.1 we are not planning a 1.2 release. However, we&apos;ll continue to cut patch releases for 1.1.x, 1.0.x, 0.11.0.x, 0.10.1.x, 0.10.2.x, and even earlier branches as needed. (Does that answer your question?)&lt;/p&gt;</comment>
                            <comment id="16515005" author="githubbot" created="Sun, 17 Jun 2018 06:06:34 +0000"  >&lt;p&gt;ewencp closed pull request #5225: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7058&quot; title=&quot;ConnectSchema#equals() broken for array-typed default values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7058&quot;&gt;&lt;del&gt;KAFKA-7058&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Connect&amp;#93;&lt;/span&gt; Comparing schema default values using Objects#deepEquals()&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5225&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/connect/api/src/main/java/org/apache/kafka/connect/data/ConnectSchema.java b/connect/api/src/main/java/org/apache/kafka/connect/data/ConnectSchema.java&lt;br/&gt;
index ff8271635f3..f1a05bb19a6 100644&lt;br/&gt;
&amp;#8212; a/connect/api/src/main/java/org/apache/kafka/connect/data/ConnectSchema.java&lt;br/&gt;
+++ b/connect/api/src/main/java/org/apache/kafka/connect/data/ConnectSchema.java&lt;br/&gt;
@@ -291,7 +291,7 @@ public boolean equals(Object o) {&lt;br/&gt;
                 Objects.equals(name, schema.name) &amp;amp;&amp;amp;&lt;br/&gt;
                 Objects.equals(doc, schema.doc) &amp;amp;&amp;amp;&lt;br/&gt;
                 Objects.equals(type, schema.type) &amp;amp;&amp;amp;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Objects.equals(defaultValue, schema.defaultValue) &amp;amp;&amp;amp;&lt;br/&gt;
+                Objects.deepEquals(defaultValue, schema.defaultValue) &amp;amp;&amp;amp;&lt;br/&gt;
                 Objects.equals(fields, schema.fields) &amp;amp;&amp;amp;&lt;br/&gt;
                 Objects.equals(keySchema, schema.keySchema) &amp;amp;&amp;amp;&lt;br/&gt;
                 Objects.equals(valueSchema, schema.valueSchema) &amp;amp;&amp;amp;&lt;br/&gt;
diff --git a/connect/api/src/test/java/org/apache/kafka/connect/data/ConnectSchemaTest.java b/connect/api/src/test/java/org/apache/kafka/connect/data/ConnectSchemaTest.java&lt;br/&gt;
index 339ef23ca54..048784e3335 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/connect/api/src/test/java/org/apache/kafka/connect/data/ConnectSchemaTest.java&lt;br/&gt;
+++ b/connect/api/src/test/java/org/apache/kafka/connect/data/ConnectSchemaTest.java&lt;br/&gt;
@@ -268,6 +268,16 @@ public void testArrayEquality() 
{
         assertNotEquals(s1, differentValueSchema);
     }&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testArrayDefaultValueEquality() {&lt;br/&gt;
+        ConnectSchema s1 = new ConnectSchema(Schema.Type.ARRAY, false, new String[] &lt;/p&gt;
{&quot;a&quot;, &quot;b&quot;}, null, null, null, null, null, null, SchemaBuilder.int8().build());&lt;br/&gt;
+        ConnectSchema s2 = new ConnectSchema(Schema.Type.ARRAY, false, new String[] {&quot;a&quot;, &quot;b&quot;}
&lt;p&gt;, null, null, null, null, null, null, SchemaBuilder.int8().build());&lt;br/&gt;
+        ConnectSchema differentValueSchema = new ConnectSchema(Schema.Type.ARRAY, false, new String[] &lt;/p&gt;
{&quot;b&quot;, &quot;c&quot;}
&lt;p&gt;, null, null, null, null, null, null, SchemaBuilder.int8().build());&lt;br/&gt;
+&lt;br/&gt;
+        assertEquals(s1, s2);&lt;br/&gt;
+        assertNotEquals(s1, differentValueSchema);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
     @Test&lt;br/&gt;
     public void testMapEquality() {&lt;br/&gt;
         // Same as testArrayEquality, but for both key and value schemas&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uurz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>ewencp</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>