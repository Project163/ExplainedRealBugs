<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:26:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-10895] Basic auth extension&apos;s JAAS config can be corrupted by other plugins</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-10895</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The Connect &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extension/BasicAuthSecurityRestExtension.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;BasicAuthSecurityRestExtension&lt;/a&gt;&apos;s doc states that &quot;An entry with the name &lt;tt&gt;KafkaConnect&lt;/tt&gt;&#160;is expected in the JAAS config file configured in the JVM.&quot;&lt;/p&gt;

&lt;p&gt;This is technically accurate, as the &lt;a href=&quot;https://github.com/apache/kafka/blob/afa5423356d3d2a2135a51200573b45d097f6d60/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extension/JaasBasicAuthFilter.java#L61-L63&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JaasBasicAuthFilter&lt;/a&gt;&#160;that the extension installs creates a &lt;tt&gt;LoginContext&lt;/tt&gt; using a &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/javax/security/auth/login/LoginContext.html#LoginContext-java.lang.String-javax.security.auth.callback.CallbackHandler-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;constructor&lt;/a&gt;&#160;that does not include a &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/javax/security/auth/login/Configuration.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration&lt;/a&gt;&#160;to be passed in, which causes &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/javax/security/auth/login/Configuration.html#getConfiguration--&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration::getConfiguration&lt;/a&gt;&#160;to be used under the hood by the &lt;tt&gt;LoginContext&lt;/tt&gt;&#160;to fetch the JAAS configuration to use for authentication.&lt;/p&gt;

&lt;p&gt;Unfortunately, other plugins (connectors, converters, even other REST extensions, etc.) may invoke &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/javax/security/auth/login/Configuration.html#setConfiguration-javax.security.auth.login.Configuration-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration::setConfiguration&lt;/a&gt;&#160;and install a completely different JAAS configuration onto the JVM. If the user starts their JVM with a JAAS config set via the &lt;tt&gt;-Djava.security.auth.login.config&lt;/tt&gt; property, that JAAS config can then be completely overwritten, and if the basic auth extension depends on the JAAS config that&apos;s installed at startup (as opposed to at runtime by a plugin), it will break.&lt;/p&gt;

&lt;p&gt;It&apos;s debatable whether this can or should be addressed with a code fix. One possibility is to cache the current JVM&apos;s configuration as soon as the basic auth extension is loaded by invoking &lt;tt&gt;Configuration::getConfiguration&lt;/tt&gt; and saving the resulting configuration for future &lt;tt&gt;LoginContext&lt;/tt&gt; instantiations. However, it may be possible that users actually rely on runtime plugins being able to install custom configurations at runtime for their basic auth extension, in which case this change would actually be harmful.&lt;/p&gt;

&lt;p&gt;Regardless, it&apos;s worth noting this odd behavior here in the hopes that it can save some time for others who encounter the same issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13348611">KAFKA-10895</key>
            <summary>Basic auth extension&apos;s JAAS config can be corrupted by other plugins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ChrisEgerton">Chris Egerton</assignee>
                                    <reporter username="ChrisEgerton">Chris Egerton</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Dec 2020 16:49:42 +0000</created>
                <updated>Wed, 3 Feb 2021 23:33:30 +0000</updated>
                            <resolved>Wed, 3 Feb 2021 23:33:30 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.0.1</version>
                    <version>2.1.0</version>
                    <version>2.1.1</version>
                    <version>2.2.0</version>
                    <version>2.2.1</version>
                    <version>2.2.2</version>
                    <version>2.3.0</version>
                    <version>2.3.1</version>
                    <version>2.4.0</version>
                    <version>2.4.1</version>
                    <version>2.5.0</version>
                    <version>2.5.1</version>
                    <version>2.6.0</version>
                    <version>2.7.0</version>
                                    <fixVersion>2.3.2</fixVersion>
                    <fixVersion>2.4.2</fixVersion>
                    <fixVersion>2.5.2</fixVersion>
                    <fixVersion>2.6.2</fixVersion>
                    <fixVersion>2.7.1</fixVersion>
                    <fixVersion>2.8.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17257049" author="chrisegerton" created="Thu, 31 Dec 2020 16:51:28 +0000"  >&lt;p&gt;At the moment, I think that it&apos;s fine to cache the earliest-available &lt;tt&gt;Configuration&lt;/tt&gt; and use that exclusively in the basic auth extension. It seems highly unlikely that a runtime-installed JAAS config is desirable by users, especially since it would have to be installed by a completely different plugin. This won&apos;t catch all cases (as it&apos;s always possible that some plugin class that gets loaded before the basic auth extension manages to install a custom configuration before it can be read by the extension), but it should catch most of them.&lt;/p&gt;</comment>
                            <comment id="17276758" author="chrisegerton" created="Tue, 2 Feb 2021 00:29:08 +0000"  >&lt;p&gt;Reopening as the original fix included a small regression.&lt;/p&gt;</comment>
                            <comment id="17278416" author="kkonstantine" created="Wed, 3 Feb 2021 23:33:23 +0000"  >&lt;p&gt;The regression has been fixed and the fix has been applied to the same target branches. No release took place in the meantime&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lyhk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>