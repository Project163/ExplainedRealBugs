<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:02:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4785] Records from internal repartitioning topics should always use RecordMetadataTimestampExtractor</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4785</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Users can specify what timestamp extractor should be used to decode the timestamp of input topic records. As long as RecordMetadataTimestamp or WallclockTime is use this is fine. &lt;/p&gt;

&lt;p&gt;However, for custom timestamp extractors it might be invalid to apply this custom extractor to records received from internal repartitioning topics. The reason is that Streams sets the current &quot;stream time&quot; as record metadata timestamp explicitly before writing to intermediate repartitioning topics because this timestamp should be use by downstream subtopologies. A custom timestamp extractor might return something different breaking this assumption.&lt;/p&gt;

&lt;p&gt;Thus, for reading data from intermediate repartitioning topic, the configured timestamp extractor should not be used, but the record&apos;s metadata timestamp should be extracted as record timestamp.&lt;/p&gt;

&lt;p&gt;In order to leverage the same behavior for intermediate user topic (ie, used in &lt;tt&gt;through()&lt;/tt&gt;)  we can leverage &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4144&quot; title=&quot;Allow per stream/table timestamp extractor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4144&quot;&gt;&lt;del&gt;KAFKA-4144&lt;/del&gt;&lt;/a&gt; and internally set an extractor for those &quot;intermediate sources&quot; that returns the record&apos;s metadata timestamp in order to overwrite the global extractor from &lt;tt&gt;StreamsConfig&lt;/tt&gt; (ie, set &lt;tt&gt;FailOnInvalidTimestampExtractor&lt;/tt&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13045044">KAFKA-4785</key>
            <summary>Records from internal repartitioning topics should always use RecordMetadataTimestampExtractor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeyhunkarimov">Jeyhun Karimov</assignee>
                                    <reporter username="mjsax">Matthias J. Sax</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Feb 2017 02:02:09 +0000</created>
                <updated>Thu, 22 Jun 2017 11:25:19 +0000</updated>
                            <resolved>Thu, 22 Jun 2017 11:24:21 +0000</resolved>
                                    <version>0.10.2.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15989557" author="jeyhunkarimov" created="Fri, 28 Apr 2017 23:01:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; Do you think &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4144&quot; title=&quot;Allow per stream/table timestamp extractor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4144&quot;&gt;&lt;del&gt;KAFKA-4144&lt;/del&gt;&lt;/a&gt; is blocking for this issue? &lt;/p&gt;</comment>
                            <comment id="15989725" author="mjsax" created="Sat, 29 Apr 2017 03:19:46 +0000"  >&lt;p&gt;Yes. This ticket requirs &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4144&quot; title=&quot;Allow per stream/table timestamp extractor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4144&quot;&gt;&lt;del&gt;KAFKA-4144&lt;/del&gt;&lt;/a&gt; to be merged &amp;#8211; but it should happen soon &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15989838" author="jeyhunkarimov" created="Sat, 29 Apr 2017 10:40:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;, (as it is discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4218&quot; title=&quot;Enable access to key in ValueTransformer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4218&quot;&gt;&lt;del&gt;KAFKA-4218&lt;/del&gt;&lt;/a&gt; ) I think we can group &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4219&quot; title=&quot;Permit setting of event time in stream processor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4219&quot;&gt;&lt;del&gt;KAFKA-4219&lt;/del&gt;&lt;/a&gt; and this issue together.&lt;/p&gt;</comment>
                            <comment id="15989989" author="mjsax" created="Sat, 29 Apr 2017 18:08:36 +0000"  >&lt;p&gt;IMHO, &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4219&quot; title=&quot;Permit setting of event time in stream processor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4219&quot;&gt;&lt;del&gt;KAFKA-4219&lt;/del&gt;&lt;/a&gt; is quite different:&lt;/p&gt;

&lt;p&gt;This JIRA is a &quot;bug guard&quot; &amp;#8211; currently, if a custom TS extractor is provide, users need to make sure that they return embedded record timestamp for internal topics &amp;#8211; with this JIRA, we do this automatically and thus preventing potential bugs in custom TS extractors. Thus, it&apos;s about &lt;em&gt;reading&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4219&quot; title=&quot;Permit setting of event time in stream processor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4219&quot;&gt;&lt;del&gt;KAFKA-4219&lt;/del&gt;&lt;/a&gt; however, is about a &quot;new feature&quot; that allows to assign timestamp differently on &lt;em&gt;write&lt;/em&gt;. Not sue if this would be some API or config, or just a change to how Streams does assign timestamps internally.&lt;/p&gt;</comment>
                            <comment id="16013335" author="mjsax" created="Wed, 17 May 2017 01:05:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeyhunkarimov&quot; class=&quot;user-hover&quot; rel=&quot;jeyhunkarimov&quot;&gt;jeyhunkarimov&lt;/a&gt; As &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4144&quot; title=&quot;Allow per stream/table timestamp extractor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4144&quot;&gt;&lt;del&gt;KAFKA-4144&lt;/del&gt;&lt;/a&gt; got merged (great job btw!), you can start working on this one if you like.&lt;/p&gt;</comment>
                            <comment id="16017575" author="jeyhunkarimov" created="Fri, 19 May 2017 15:46:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; Thanks for reminding. I am on it&lt;/p&gt;</comment>
                            <comment id="16018071" author="githubbot" created="Fri, 19 May 2017 21:44:06 +0000"  >&lt;p&gt;GitHub user jeyhunkarimov opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3106&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4785&quot; title=&quot;Records from internal repartitioning topics should always use RecordMetadataTimestampExtractor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4785&quot;&gt;&lt;del&gt;KAFKA-4785&lt;/del&gt;&lt;/a&gt;: Records from internal repartitioning topics should always use RecordMetadataTimestampExtractor&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jeyhunkarimov/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeyhunkarimov/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4785&quot; title=&quot;Records from internal repartitioning topics should always use RecordMetadataTimestampExtractor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4785&quot;&gt;&lt;del&gt;KAFKA-4785&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3106.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3106.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3106&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 98278baae63638efc2b750b1d3f12e936d845f18&lt;br/&gt;
Author: Jeyhun Karimov &amp;lt;je.karimov@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-05-19T21:39:50Z&lt;/p&gt;

&lt;p&gt;    Records from internal repartitioning topics should always use RecordMetadataTimestampExtractor&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16030732" author="ijuma" created="Wed, 31 May 2017 06:58:42 +0000"  >&lt;p&gt;Is this still planned for 0.11.0.0?&lt;/p&gt;</comment>
                            <comment id="16059192" author="damianguy" created="Thu, 22 Jun 2017 11:24:21 +0000"  >&lt;p&gt;Issue resolved by pull request 3106&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/3106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3106&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16059194" author="githubbot" created="Thu, 22 Jun 2017 11:25:19 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3106&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13003607">KAFKA-4144</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12957311">KAFKA-3534</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3aewf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>