<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:11:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-6991] Connect Rest Extension Plugin issue with Class Loader</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-6991</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6776&quot; title=&quot;Connect Rest Extension Plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6776&quot;&gt;&lt;del&gt;KAFKA-6776&lt;/del&gt;&lt;/a&gt;&#160;implementation has 2 issues with the class&#160;loader.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;If a RestExtension plugin is available in the classpath, then the plugin gets associated with all the plugin class loaders. This is happening because the Manifest resource is searched in the parent class loader as well by default.&#160;&lt;/li&gt;
	&lt;li&gt;The class name associated with the plugin class loader is incorrect. It should be the implementation class instead of the interface.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13164071">KAFKA-6991</key>
            <summary>Connect Rest Extension Plugin issue with Class Loader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mageshn">Magesh kumar Nandakumar</assignee>
                                    <reporter username="mageshn">Magesh kumar Nandakumar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jun 2018 05:14:29 +0000</created>
                <updated>Thu, 7 Jun 2018 04:11:08 +0000</updated>
                            <resolved>Thu, 7 Jun 2018 04:09:50 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16501299" author="githubbot" created="Tue, 5 Jun 2018 05:25:00 +0000"  >&lt;p&gt;mageshn opened a new pull request #5135: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6991&quot; title=&quot;Connect Rest Extension Plugin issue with Class Loader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6991&quot;&gt;&lt;del&gt;KAFKA-6991&lt;/del&gt;&lt;/a&gt; : KIP-285 : Fix ServiceLoader issue with PluginClassLoader&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5135&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Fix ServiceLoader issue with PluginClassLoader and add basic-auth-extension packaging &amp;amp; classpath&lt;/p&gt;

&lt;p&gt;   *More detailed description of your change,&lt;br/&gt;
   if necessary. The PR title and PR message become&lt;br/&gt;
   the squashed commit message, so use a separate&lt;br/&gt;
   comment to ping reviewers.*&lt;/p&gt;

&lt;p&gt;   *Summary of testing strategy (including rationale)&lt;br/&gt;
   for the feature or bug fix. Unit and/or integration&lt;br/&gt;
   tests are expected for any behaviour change and&lt;br/&gt;
   system tests should be considered for larger changes.*&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16504214" author="ewencp" created="Thu, 7 Jun 2018 04:09:50 +0000"  >&lt;p&gt;Issue resolved by pull request 5135&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/5135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5135&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16504217" author="githubbot" created="Thu, 7 Jun 2018 04:11:08 +0000"  >&lt;p&gt;ewencp closed pull request #5135: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6991&quot; title=&quot;Connect Rest Extension Plugin issue with Class Loader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6991&quot;&gt;&lt;del&gt;KAFKA-6991&lt;/del&gt;&lt;/a&gt; : KIP-285 : Fix ServiceLoader issue with PluginClassLoader&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5135&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/bin/kafka-run-class.sh b/bin/kafka-run-class.sh&lt;br/&gt;
index 354e10650ee..f33342ecb08 100755&lt;br/&gt;
&amp;#8212; a/bin/kafka-run-class.sh&lt;br/&gt;
+++ b/bin/kafka-run-class.sh&lt;br/&gt;
@@ -129,7 +129,7 @@ do&lt;br/&gt;
   CLASSPATH=&quot;$CLASSPATH:$dir/*&quot;&lt;br/&gt;
 done&lt;/p&gt;

&lt;p&gt;-for cc_pkg in &quot;api&quot; &quot;transforms&quot; &quot;runtime&quot; &quot;file&quot; &quot;json&quot; &quot;tools&quot;&lt;br/&gt;
+for cc_pkg in &quot;api&quot; &quot;transforms&quot; &quot;runtime&quot; &quot;file&quot; &quot;json&quot; &quot;tools&quot; &quot;basic-auth-extension&quot;&lt;br/&gt;
 do&lt;br/&gt;
   for file in &quot;$base_dir&quot;/connect/${cc_pkg}/build/libs/connect-${cc_pkg}*.jar;&lt;br/&gt;
   do&lt;br/&gt;
diff --git a/build.gradle b/build.gradle&lt;br/&gt;
index 4f3fd770b78..52ba463d4f1 100644&lt;br/&gt;
&amp;#8212; a/build.gradle&lt;br/&gt;
+++ b/build.gradle&lt;br/&gt;
@@ -507,7 +507,7 @@ for ( sv in availableScalaVersions ) {&lt;br/&gt;
   }&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt;-def connectPkgs = &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;connect:api&amp;#39;, &amp;#39;connect:runtime&amp;#39;, &amp;#39;connect:transforms&amp;#39;, &amp;#39;connect:json&amp;#39;, &amp;#39;connect:file&amp;#39;&amp;#93;&lt;/span&gt;&lt;br/&gt;
+def connectPkgs = &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;connect:api&amp;#39;, &amp;#39;connect:runtime&amp;#39;, &amp;#39;connect:transforms&amp;#39;, &amp;#39;connect:json&amp;#39;, &amp;#39;connect:file&amp;#39;, &amp;#39;connect:basic-auth-extension&amp;#39;&amp;#93;&lt;/span&gt;&lt;br/&gt;
 def pkgs = &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;clients&amp;#39;, &amp;#39;examples&amp;#39;, &amp;#39;log4j-appender&amp;#39;, &amp;#39;tools&amp;#39;, &amp;#39;streams&amp;#39;, &amp;#39;streams:streams-scala&amp;#39;, &amp;#39;streams:test-utils&amp;#39;, &amp;#39;streams:examples&amp;#39;&amp;#93;&lt;/span&gt; + connectPkgs&lt;/p&gt;

&lt;p&gt; /** Create one task per default Scala version */&lt;br/&gt;
@@ -728,6 +728,8 @@ project(&apos;:core&apos;) {&lt;br/&gt;
     from(project(&apos;:connect:json&apos;).configurations.runtime) &lt;/p&gt;
{ into(&quot;libs/&quot;) }&lt;br/&gt;
     from(project(&apos;:connect:file&apos;).jar) { into(&quot;libs/&quot;) }
&lt;p&gt;     from(project(&apos;:connect:file&apos;).configurations.runtime) &lt;/p&gt;
{ into(&quot;libs/&quot;) }&lt;br/&gt;
+    from(project(&apos;:connect:basic-auth-extension&apos;).jar) { into(&quot;libs/&quot;) }
&lt;p&gt;+    from(project(&apos;:connect:basic-auth-extension&apos;).configurations.runtime) &lt;/p&gt;
{ into(&quot;libs/&quot;) }&lt;br/&gt;
     from(project(&apos;:streams&apos;).jar) { into(&quot;libs/&quot;) }
&lt;p&gt;     from(project(&apos;:streams&apos;).configurations.runtime) &lt;/p&gt;
{ into(&quot;libs/&quot;) }&lt;br/&gt;
     from(project(&apos;:streams:streams-scala&apos;).jar) { into(&quot;libs/&quot;) }
&lt;p&gt;diff --git a/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extenstion/BasicAuthSecurityRestExtension.java b/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extension/BasicAuthSecurityRestExtension.java&lt;br/&gt;
similarity index 94%&lt;br/&gt;
rename from connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extenstion/BasicAuthSecurityRestExtension.java&lt;br/&gt;
rename to connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extension/BasicAuthSecurityRestExtension.java&lt;br/&gt;
index 91d5d9ca00c..4169e9eaea6 100644&lt;br/&gt;
&amp;#8212; a/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extenstion/BasicAuthSecurityRestExtension.java&lt;br/&gt;
+++ b/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extension/BasicAuthSecurityRestExtension.java&lt;br/&gt;
@@ -15,7 +15,7 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
  */&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-package org.apache.kafka.connect.rest.basic.auth.extenstion;&lt;br/&gt;
+package org.apache.kafka.connect.rest.basic.auth.extension;&lt;/p&gt;

&lt;p&gt; import org.apache.kafka.common.utils.AppInfoParser;&lt;br/&gt;
 import org.apache.kafka.connect.rest.ConnectRestExtension;&lt;br/&gt;
@@ -33,13 +33,13 @@&lt;br/&gt;
  *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;To use this extension, one needs to add the following config in the 
{@code worker.properties}&lt;/li&gt;
	&lt;li&gt;&amp;lt;pre&amp;gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;*     rest.extension.classes = org.apache.kafka.connect.rest.basic.auth.extenstion.BasicAuthSecurityRestExtension&lt;br/&gt;
+ *     rest.extension.classes = org.apache.kafka.connect.rest.basic.auth.extension.BasicAuthSecurityRestExtension&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;&amp;lt;/pre&amp;gt;&lt;br/&gt;
  *&lt;/li&gt;
	&lt;li&gt;&amp;lt;p&amp;gt; An example JAAS config would look as below&lt;/li&gt;
	&lt;li&gt;&amp;lt;Pre&amp;gt;&lt;/li&gt;
	&lt;li&gt;KafkaConnect 
{
- *              org.apache.kafka.connect.rest.basic.auth.extenstion.PropertyFileLoginModule required
+ *              org.apache.kafka.connect.rest.basic.auth.extension.PropertyFileLoginModule required
  *              file=&quot;/mnt/secret/credentials.properties&quot;;
  *         }
&lt;p&gt;;&lt;br/&gt;
  *&amp;lt;/Pre&amp;gt;&lt;br/&gt;
diff --git a/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extenstion/JaasBasicAuthFilter.java b/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extension/JaasBasicAuthFilter.java&lt;br/&gt;
similarity index 98%&lt;br/&gt;
rename from connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extenstion/JaasBasicAuthFilter.java&lt;br/&gt;
rename to connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extension/JaasBasicAuthFilter.java&lt;br/&gt;
index 7231700af7c..6167434b980 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extenstion/JaasBasicAuthFilter.java&lt;br/&gt;
+++ b/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extension/JaasBasicAuthFilter.java&lt;br/&gt;
@@ -15,7 +15,7 @@&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
  */&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-package org.apache.kafka.connect.rest.basic.auth.extenstion;&lt;br/&gt;
+package org.apache.kafka.connect.rest.basic.auth.extension;&lt;/p&gt;

&lt;p&gt; import org.apache.kafka.common.config.ConfigException;&lt;/p&gt;

&lt;p&gt;diff --git a/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extenstion/PropertyFileLoginModule.java b/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extension/PropertyFileLoginModule.java&lt;br/&gt;
similarity index 98%&lt;br/&gt;
rename from connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extenstion/PropertyFileLoginModule.java&lt;br/&gt;
rename to connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extension/PropertyFileLoginModule.java&lt;br/&gt;
index 7af7863b2ce..101c6f49d02 100644&lt;br/&gt;
&amp;#8212; a/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extenstion/PropertyFileLoginModule.java&lt;br/&gt;
+++ b/connect/basic-auth-extension/src/main/java/org/apache/kafka/connect/rest/basic/auth/extension/PropertyFileLoginModule.java&lt;br/&gt;
@@ -15,7 +15,7 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
  */&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-package org.apache.kafka.connect.rest.basic.auth.extenstion;&lt;br/&gt;
+package org.apache.kafka.connect.rest.basic.auth.extension;&lt;/p&gt;

&lt;p&gt; import org.apache.kafka.common.config.ConfigException;&lt;br/&gt;
 import org.slf4j.Logger;&lt;br/&gt;
diff --git a/connect/basic-auth-extension/src/main/resources/META-INF/services/org.apache.kafka.connect.rest.ConnectRestExtension b/connect/basic-auth-extension/src/main/resources/META-INF/services/org.apache.kafka.connect.rest.ConnectRestExtension&lt;br/&gt;
index 098c9473d05..ba7ae5b580d 100644&lt;br/&gt;
&amp;#8212; a/connect/basic-auth-extension/src/main/resources/META-INF/services/org.apache.kafka.connect.rest.ConnectRestExtension&lt;br/&gt;
+++ b/connect/basic-auth-extension/src/main/resources/META-INF/services/org.apache.kafka.connect.rest.ConnectRestExtension&lt;br/&gt;
@@ -13,4 +13,4 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;See the License for the specific language governing permissions and&lt;/li&gt;
	&lt;li&gt;limitations under the License.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-org.apache.kafka.connect.rest.basic.auth.extenstion.BasicAuthSecurityRestExtension&lt;br/&gt;
\ No newline at end of file&lt;br/&gt;
+org.apache.kafka.connect.rest.basic.auth.extension.BasicAuthSecurityRestExtension&lt;br/&gt;
\ No newline at end of file&lt;br/&gt;
diff --git a/connect/basic-auth-extension/src/test/java/org/apache/kafka/connect/rest/basic/auth/extenstion/JaasBasicAuthFilterTest.java b/connect/basic-auth-extension/src/test/java/org/apache/kafka/connect/rest/basic/auth/extension/JaasBasicAuthFilterTest.java&lt;br/&gt;
similarity index 98%&lt;br/&gt;
rename from connect/basic-auth-extension/src/test/java/org/apache/kafka/connect/rest/basic/auth/extenstion/JaasBasicAuthFilterTest.java&lt;br/&gt;
rename to connect/basic-auth-extension/src/test/java/org/apache/kafka/connect/rest/basic/auth/extension/JaasBasicAuthFilterTest.java&lt;br/&gt;
index 80299f81c29..d61fc06cd90 100644&lt;br/&gt;
&amp;#8212; a/connect/basic-auth-extension/src/test/java/org/apache/kafka/connect/rest/basic/auth/extenstion/JaasBasicAuthFilterTest.java&lt;br/&gt;
+++ b/connect/basic-auth-extension/src/test/java/org/apache/kafka/connect/rest/basic/auth/extension/JaasBasicAuthFilterTest.java&lt;br/&gt;
@@ -15,7 +15,7 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
  */&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-package org.apache.kafka.connect.rest.basic.auth.extenstion;&lt;br/&gt;
+package org.apache.kafka.connect.rest.basic.auth.extension;&lt;/p&gt;

&lt;p&gt; import org.apache.kafka.common.security.JaasUtils;&lt;br/&gt;
 import org.easymock.EasyMock;&lt;br/&gt;
@@ -155,7 +155,7 @@ private void setupJaasConfig(String loginModule, String credentialFilePath, bool&lt;/p&gt;

&lt;p&gt;         List&amp;lt;String&amp;gt; lines;&lt;br/&gt;
         lines = new ArrayList&amp;lt;&amp;gt;();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;lines.add(loginModule + &quot; { org.apache.kafka.connect.rest.basic.auth.extenstion.PropertyFileLoginModule required &quot;);&lt;br/&gt;
+        lines.add(loginModule + &quot; { org.apache.kafka.connect.rest.basic.auth.extension.PropertyFileLoginModule required &quot;);&lt;br/&gt;
         if (includeFileOptions) 
{
             lines.add(&quot;file=\&quot;&quot; + credentialFilePath + &quot;\&quot;&quot;);
         }
&lt;p&gt;diff --git a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/isolation/DelegatingClassLoader.java b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/isolation/DelegatingClassLoader.java&lt;br/&gt;
index fb9cae39a22..8e31220fb68 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/isolation/DelegatingClassLoader.java&lt;br/&gt;
+++ b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/isolation/DelegatingClassLoader.java&lt;br/&gt;
@@ -46,6 +46,7 @@&lt;br/&gt;
 import java.util.ArrayList;&lt;br/&gt;
 import java.util.Arrays;&lt;br/&gt;
 import java.util.Collection;&lt;br/&gt;
+import java.util.Enumeration;&lt;br/&gt;
 import java.util.HashMap;&lt;br/&gt;
 import java.util.Iterator;&lt;br/&gt;
 import java.util.List;&lt;br/&gt;
@@ -56,6 +57,7 @@&lt;br/&gt;
 import java.util.SortedSet;&lt;br/&gt;
 import java.util.TreeMap;&lt;br/&gt;
 import java.util.TreeSet;&lt;br/&gt;
+import java.util.stream.Collectors;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; public class DelegatingClassLoader extends URLClassLoader {&lt;br/&gt;
     private static final Logger log = LoggerFactory.getLogger(DelegatingClassLoader.class);&lt;br/&gt;
@@ -72,6 +74,12 @@&lt;br/&gt;
     private final List&amp;lt;String&amp;gt; pluginPaths;&lt;br/&gt;
     private final Map&amp;lt;Path, PluginClassLoader&amp;gt; activePaths;&lt;/p&gt;

&lt;p&gt;+    private static final String MANIFEST_PREFIX = &quot;META-INF/services/&quot;;&lt;br/&gt;
+    private static final Class[] SERVICE_LOADER_PLUGINS = new Class[] &lt;/p&gt;
{ConnectRestExtension.class, ConfigProvider.class}
&lt;p&gt;;&lt;br/&gt;
+    private static final Set&amp;lt;String&amp;gt; PLUGIN_MANIFEST_FILES =&lt;br/&gt;
+        Arrays.stream(SERVICE_LOADER_PLUGINS).map(serviceLoaderPlugin -&amp;gt; MANIFEST_PREFIX + serviceLoaderPlugin.getName())&lt;br/&gt;
+            .collect(Collectors.toSet());&lt;br/&gt;
+&lt;br/&gt;
     public DelegatingClassLoader(List&amp;lt;String&amp;gt; pluginPaths, ClassLoader parent) &lt;/p&gt;
{
         super(new URL[0], parent);
         this.pluginPaths = pluginPaths;
@@ -324,12 +332,11 @@ private PluginScanResult scanPluginPath(
         return result;
     }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private &amp;lt;T&amp;gt; Collection&amp;lt;PluginDesc&amp;lt;T&amp;gt;&amp;gt; getServiceLoaderPluginDesc(Class&amp;lt;T&amp;gt; klass,&lt;/li&gt;
	&lt;li&gt;ClassLoader loader) {&lt;br/&gt;
+    private &amp;lt;T&amp;gt; Collection&amp;lt;PluginDesc&amp;lt;T&amp;gt;&amp;gt; getServiceLoaderPluginDesc(Class&amp;lt;T&amp;gt; klass, ClassLoader loader) {&lt;br/&gt;
         ServiceLoader&amp;lt;T&amp;gt; serviceLoader = ServiceLoader.load(klass, loader);&lt;br/&gt;
         Collection&amp;lt;PluginDesc&amp;lt;T&amp;gt;&amp;gt; result = new ArrayList&amp;lt;&amp;gt;();&lt;/li&gt;
	&lt;li&gt;for (T impl : serviceLoader) {&lt;/li&gt;
	&lt;li&gt;result.add(new PluginDesc&amp;lt;&amp;gt;(klass, versionFor(impl), loader));&lt;br/&gt;
+        for (T pluginImpl : serviceLoader) 
{
+            result.add(new PluginDesc&amp;lt;&amp;gt;((Class&amp;lt;? extends T&amp;gt;) pluginImpl.getClass(), versionFor(pluginImpl), loader));
         }
&lt;p&gt;         return result;&lt;br/&gt;
     }&lt;br/&gt;
@@ -407,4 +414,31 @@ protected void scan(URL url) {&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public URL getResource(String name) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+        if (serviceLoaderManifestForPlugin(name)) {
+            // Default implementation of getResource searches the parent class loader and if not available/found, its own URL paths.
+            // This will enable thePluginClassLoader to limit its resource search only to its own URL paths.
+            return null;
+        } else {
+            return super.getResource(name);
+        }+    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Enumeration&amp;lt;URL&amp;gt; getResources(String name) throws IOException &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+        if (serviceLoaderManifestForPlugin(name)) {
+            // Default implementation of getResources searches the parent class loader and and also its own URL paths. This will enable the
+            // PluginClassLoader to limit its resource search to only its own URL paths.
+            return null;
+        } else {
+            return super.getResources(name);
+        }+    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+&lt;br/&gt;
+    //Visible for testing&lt;br/&gt;
+    static boolean serviceLoaderManifestForPlugin(String name) &lt;/p&gt;
{
+        return PLUGIN_MANIFEST_FILES.contains(name);
+    }
&lt;p&gt; }&lt;br/&gt;
diff --git a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/isolation/PluginUtils.java b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/isolation/PluginUtils.java&lt;br/&gt;
index f6c1185f189..b4aee4741c3 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/isolation/PluginUtils.java&lt;br/&gt;
+++ b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/isolation/PluginUtils.java&lt;br/&gt;
@@ -128,6 +128,7 @@&lt;br/&gt;
             + &quot;|file&lt;br class=&quot;atl-forced-newline&quot; /&gt;..*&quot;&lt;br/&gt;
             + &quot;|converters&lt;br class=&quot;atl-forced-newline&quot; /&gt;..*&quot;&lt;br/&gt;
             + &quot;|storage&lt;br class=&quot;atl-forced-newline&quot; /&gt;.StringConverter&quot;&lt;br/&gt;
+            + &quot;|rest\\.basic\\.auth\\.extension&lt;br class=&quot;atl-forced-newline&quot; /&gt;.BasicAuthSecurityRestExtension&quot;&lt;br/&gt;
             + &quot;))$&quot;;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     private static final DirectoryStream.Filter&amp;lt;Path&amp;gt; PLUGIN_PATH_FILTER = new DirectoryStream&lt;br/&gt;
diff --git a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/isolation/DelegatingClassLoaderTest.java b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/isolation/DelegatingClassLoaderTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..83ff0407a76&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/isolation/DelegatingClassLoaderTest.java&lt;br/&gt;
@@ -0,0 +1,41 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+ * contributor license agreements. See the NOTICE file distributed with&lt;br/&gt;
+ * this work for additional information regarding copyright ownership.&lt;br/&gt;
+ * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+ * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+ * the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *    &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.kafka.connect.runtime.isolation;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertFalse;&lt;br/&gt;
+import static org.junit.Assert.assertTrue;&lt;br/&gt;
+&lt;br/&gt;
+public class DelegatingClassLoaderTest {&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testWhiteListedManifestResources() &lt;/p&gt;
{
+        assertTrue(
+            DelegatingClassLoader.serviceLoaderManifestForPlugin(&quot;META-INF/services/org.apache.kafka.connect.rest.ConnectRestExtension&quot;));
+        assertTrue(
+            DelegatingClassLoader.serviceLoaderManifestForPlugin(&quot;META-INF/services/org.apache.kafka.common.config.ConfigProvider&quot;));
+    }
&lt;p&gt;+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testOtherResources() &lt;/p&gt;
{
+        assertFalse(
+            DelegatingClassLoader.serviceLoaderManifestForPlugin(&quot;META-INF/services/org.apache.kafka.connect.transforms.Transformation&quot;));
+        assertFalse(DelegatingClassLoader.serviceLoaderManifestForPlugin(&quot;resource/version.properties&quot;));
+    }
&lt;p&gt;+}&lt;br/&gt;
diff --git a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/isolation/PluginUtilsTest.java b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/isolation/PluginUtilsTest.java&lt;br/&gt;
index a5ab50afe0a..9698153f986 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/isolation/PluginUtilsTest.java&lt;br/&gt;
+++ b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/isolation/PluginUtilsTest.java&lt;br/&gt;
@@ -146,6 +146,9 @@ public void testAllowedConnectFrameworkClasses() throws Exception &lt;/p&gt;
{
         assertTrue(PluginUtils.shouldLoadInIsolation(
                 &quot;org.apache.kafka.connect.storage.StringConverter&quot;)
         );
+        assertTrue(PluginUtils.shouldLoadInIsolation(
+            &quot;org.apache.kafka.connect.rest.basic.auth.extension.BasicAuthSecurityRestExtension&quot;
+        ));
     }

&lt;p&gt;     @Test&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uiiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>