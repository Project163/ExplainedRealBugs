<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:13:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-7225] Kafka Connect ConfigProvider not invoked before validation</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-7225</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;When trying to register&#160;a JDBC connector with externalised secrets (e.g. connection.password) the validation fails and the endpoint returns a 500. I think that the problem is that the&#160;config transformer is not being invoked before the validation so trying to exercise the credentials against the database fails. I have&#160;checked that publishing the connector configuration directly to the&#160;connect-config topic to skip the validation and restarting the server is enough to get the connector working so that confirms that we are just missing to call config transformer before validating the connector. Please let me know if you need further information.&lt;/p&gt;

&lt;p&gt;I&apos;m happy to open a PR to address this issue given that I think that this is easy enough to fix for a new contributor to the project. So please feel free to assign the resolution of the bug to me.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13176084">KAFKA-7225</key>
            <summary>Kafka Connect ConfigProvider not invoked before validation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rayokota">Robert Yokota</assignee>
                                    <reporter username="nachomdo">Nacho Munoz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Aug 2018 11:13:39 +0000</created>
                <updated>Thu, 23 Aug 2018 21:22:12 +0000</updated>
                            <resolved>Tue, 7 Aug 2018 20:19:39 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16566297" author="githubbot" created="Thu, 2 Aug 2018 03:17:02 +0000"  >&lt;p&gt;rayokota opened a new pull request #5445: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7225&quot; title=&quot;Kafka Connect ConfigProvider not invoked before validation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7225&quot;&gt;&lt;del&gt;KAFKA-7225&lt;/del&gt;&lt;/a&gt; - Pretransform validated props&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5445&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5445&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   If a property requires validation, it should be pretransformed if it is a variable reference, in order to have a value that will properly pass the validation.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16566500" author="nachomdo" created="Thu, 2 Aug 2018 08:54:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rayokota&quot; class=&quot;user-hover&quot; rel=&quot;rayokota&quot;&gt;rayokota&lt;/a&gt;&#160;I&apos;m quite disappointed with your behaviour. I explicitly asked for this issue to be assigned to me. I think that&#160;this kind of behaviour is not only inelegant&#160;but also damages the open source collaboration model.&#160;&lt;/p&gt;</comment>
                            <comment id="16566907" author="rayokota" created="Thu, 2 Aug 2018 14:50:35 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nachomdo&quot; class=&quot;user-hover&quot; rel=&quot;nachomdo&quot;&gt;nachomdo&lt;/a&gt;, thanks for finding and logging this issue.&lt;/p&gt;

&lt;p&gt;Oh, I&apos;m very sorry. &#160;When you said feel free to assign to you, I misread it as you would be happy to look into it if no one else would. &#160;Again, I apologize I that I misunderstood you.&lt;/p&gt;</comment>
                            <comment id="16566913" author="rayokota" created="Thu, 2 Aug 2018 14:53:40 +0000"  >&lt;p&gt;If you want, I can still close my PR so you can look into it. &#160;Would that be ok with you?&lt;/p&gt;</comment>
                            <comment id="16566915" author="nachomdo" created="Thu, 2 Aug 2018 14:54:15 +0000"  >&lt;p&gt;No worries. Thanks for fixing it so quickly!&#160;&lt;/p&gt;</comment>
                            <comment id="16566917" author="nachomdo" created="Thu, 2 Aug 2018 14:56:12 +0000"  >&lt;p&gt;Thank you! no need to close your PR, there are plenty of bugs to fix &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;I hope to have more luck next time&#160;&lt;/p&gt;</comment>
                            <comment id="16566918" author="rayokota" created="Thu, 2 Aug 2018 14:56:29 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nachomdo&quot; class=&quot;user-hover&quot; rel=&quot;nachomdo&quot;&gt;nachomdo&lt;/a&gt;! &#160;Again, I really appreciate your feedback.&#160;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16572268" author="githubbot" created="Tue, 7 Aug 2018 20:20:05 +0000"  >&lt;p&gt;ewencp closed pull request #5445: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7225&quot; title=&quot;Kafka Connect ConfigProvider not invoked before validation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7225&quot;&gt;&lt;del&gt;KAFKA-7225&lt;/del&gt;&lt;/a&gt; - Pretransform validated props&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5445&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5445&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java&lt;br/&gt;
index b5e0ec2c07b..cadb4e05d9a 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java&lt;br/&gt;
+++ b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java&lt;br/&gt;
@@ -246,6 +246,9 @@ public ConnectorStateInfo connectorStatus(String connName) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public ConfigInfos validateConnectorConfig(Map&amp;lt;String, String&amp;gt; connectorProps) {&lt;br/&gt;
+        if (worker.configTransformer() != null) &lt;/p&gt;
{
+            connectorProps = worker.configTransformer().transform(connectorProps);
+        }
&lt;p&gt;         String connType = connectorProps.get(ConnectorConfig.CONNECTOR_CLASS_CONFIG);&lt;br/&gt;
         if (connType == null)&lt;br/&gt;
             throw new BadRequestException(&quot;Connector config &quot; + connectorProps + &quot; contains no connector type&quot;);&lt;br/&gt;
diff --git a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/WorkerConfigTransformer.java b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/WorkerConfigTransformer.java&lt;br/&gt;
index 7efb481ac75..1b715c70c76 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/WorkerConfigTransformer.java&lt;br/&gt;
+++ b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/WorkerConfigTransformer.java&lt;br/&gt;
@@ -38,10 +38,16 @@ public WorkerConfigTransformer(Worker worker, Map&amp;lt;String, ConfigProvider&amp;gt; config&lt;br/&gt;
         this.configTransformer = new ConfigTransformer(configProviders);&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+    public Map&amp;lt;String, String&amp;gt; transform(Map&amp;lt;String, String&amp;gt; configs) &lt;/p&gt;
{
+        return transform(null, configs);
+    }
&lt;p&gt;+&lt;br/&gt;
     public Map&amp;lt;String, String&amp;gt; transform(String connectorName, Map&amp;lt;String, String&amp;gt; configs) {&lt;br/&gt;
         if (configs == null) return null;&lt;br/&gt;
         ConfigTransformerResult result = configTransformer.transform(configs);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;scheduleReload(connectorName, result.ttls());&lt;br/&gt;
+        if (connectorName != null) 
{
+            scheduleReload(connectorName, result.ttls());
+        }
&lt;p&gt;         return result.data();&lt;br/&gt;
     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;diff --git a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/AbstractHerderTest.java b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/AbstractHerderTest.java&lt;br/&gt;
index 5728465095a..db3cf273fe7 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/AbstractHerderTest.java&lt;br/&gt;
+++ b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/AbstractHerderTest.java&lt;br/&gt;
@@ -67,6 +67,7 @@&lt;br/&gt;
     private final String connector = &quot;connector&quot;;&lt;/p&gt;

&lt;p&gt;     @MockStrict private Worker worker;&lt;br/&gt;
+    @MockStrict private WorkerConfigTransformer transformer;&lt;br/&gt;
     @MockStrict private Plugins plugins;&lt;br/&gt;
     @MockStrict private ClassLoader classLoader;&lt;br/&gt;
     @MockStrict private ConfigBackingStore configStore;&lt;br/&gt;
@@ -261,6 +262,9 @@ private AbstractHerder createConfigValidationHerder(Class&amp;lt;? extends Connector&amp;gt; c&lt;br/&gt;
         EasyMock.expect(herder.generation()).andStubReturn(generation);&lt;/p&gt;

&lt;p&gt;         // Call to validateConnectorConfig&lt;br/&gt;
+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andStubReturn(plugins);&lt;br/&gt;
         final Connector connector;&lt;br/&gt;
         try {&lt;br/&gt;
diff --git a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/distributed/DistributedHerderTest.java b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/distributed/DistributedHerderTest.java&lt;br/&gt;
index 911afe7ec2f..a0de8cf14ac 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/distributed/DistributedHerderTest.java&lt;br/&gt;
+++ b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/distributed/DistributedHerderTest.java&lt;br/&gt;
@@ -34,6 +34,7 @@&lt;br/&gt;
 import org.apache.kafka.connect.runtime.TaskConfig;&lt;br/&gt;
 import org.apache.kafka.connect.runtime.Worker;&lt;br/&gt;
 import org.apache.kafka.connect.runtime.WorkerConfig;&lt;br/&gt;
+import org.apache.kafka.connect.runtime.WorkerConfigTransformer;&lt;br/&gt;
 import org.apache.kafka.connect.runtime.distributed.DistributedHerder.HerderMetrics;&lt;br/&gt;
 import org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader;&lt;br/&gt;
 import org.apache.kafka.connect.runtime.isolation.PluginClassLoader;&lt;br/&gt;
@@ -158,6 +159,7 @@&lt;br/&gt;
     private DistributedHerder herder;&lt;br/&gt;
     private MockConnectMetrics metrics;&lt;br/&gt;
     @Mock private Worker worker;&lt;br/&gt;
+    @Mock private WorkerConfigTransformer transformer;&lt;br/&gt;
     @Mock private Callback&amp;lt;Herder.Created&amp;lt;ConnectorInfo&amp;gt;&amp;gt; putConnectorCallback;&lt;br/&gt;
     @Mock&lt;br/&gt;
     private Plugins plugins;&lt;br/&gt;
@@ -356,6 +358,9 @@ public void testCreateConnector() throws Exception {&lt;/p&gt;

&lt;p&gt;         // config validation&lt;br/&gt;
         Connector connectorMock = PowerMock.createMock(SourceConnector.class);&lt;br/&gt;
+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andReturn(plugins).times(3);&lt;br/&gt;
         EasyMock.expect(plugins.compareAndSwapLoaders(connectorMock)).andReturn(delegatingLoader);&lt;br/&gt;
         EasyMock.expect(plugins.newConnector(EasyMock.anyString())).andReturn(connectorMock);&lt;br/&gt;
@@ -399,6 +404,9 @@ public void testCreateConnectorFailedBasicValidation() throws Exception {&lt;/p&gt;

&lt;p&gt;         // config validation&lt;br/&gt;
         Connector connectorMock = PowerMock.createMock(SourceConnector.class);&lt;br/&gt;
+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andReturn(plugins).times(3);&lt;br/&gt;
         EasyMock.expect(plugins.compareAndSwapLoaders(connectorMock)).andReturn(delegatingLoader);&lt;br/&gt;
         EasyMock.expect(plugins.newConnector(EasyMock.anyString())).andReturn(connectorMock);&lt;br/&gt;
@@ -444,6 +452,9 @@ public void testCreateConnectorFailedCustomValidation() throws Exception {&lt;/p&gt;

&lt;p&gt;         // config validation&lt;br/&gt;
         Connector connectorMock = PowerMock.createMock(SourceConnector.class);&lt;br/&gt;
+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andReturn(plugins).times(3);&lt;br/&gt;
         EasyMock.expect(plugins.compareAndSwapLoaders(connectorMock)).andReturn(delegatingLoader);&lt;br/&gt;
         EasyMock.expect(plugins.newConnector(EasyMock.anyString())).andReturn(connectorMock);&lt;br/&gt;
@@ -495,6 +506,9 @@ public void testConnectorNameConflictsWithWorkerGroupId() throws Exception {&lt;/p&gt;

&lt;p&gt;         // config validation&lt;br/&gt;
         Connector connectorMock = PowerMock.createMock(SinkConnector.class);&lt;br/&gt;
+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andReturn(plugins).times(3);&lt;br/&gt;
         EasyMock.expect(plugins.compareAndSwapLoaders(connectorMock)).andReturn(delegatingLoader);&lt;br/&gt;
         EasyMock.expect(plugins.newConnector(EasyMock.anyString())).andReturn(connectorMock);&lt;br/&gt;
@@ -530,6 +544,9 @@ public void testConnectorNameConflictsWithWorkerGroupId() throws Exception {&lt;br/&gt;
     @Test&lt;br/&gt;
     public void testCreateConnectorAlreadyExists() throws Exception {&lt;br/&gt;
         EasyMock.expect(member.memberId()).andStubReturn(&quot;leader&quot;);&lt;br/&gt;
+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andReturn(plugins);&lt;br/&gt;
         EasyMock.expect(plugins.newConnector(EasyMock.anyString())).andReturn(null);&lt;br/&gt;
         expectRebalance(1, Collections.&amp;lt;String&amp;gt;emptyList(), Collections.&amp;lt;ConnectorTaskId&amp;gt;emptyList());&lt;br/&gt;
@@ -1339,6 +1356,9 @@ public void testPutConnectorConfig() throws Exception {&lt;/p&gt;

&lt;p&gt;         // config validation&lt;br/&gt;
         Connector connectorMock = PowerMock.createMock(SourceConnector.class);&lt;br/&gt;
+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andReturn(plugins).anyTimes();&lt;br/&gt;
         EasyMock.expect(plugins.compareAndSwapLoaders(connectorMock)).andReturn(delegatingLoader);&lt;br/&gt;
         EasyMock.expect(plugins.newConnector(EasyMock.anyString())).andReturn(connectorMock);&lt;br/&gt;
diff --git a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/standalone/StandaloneHerderTest.java b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/standalone/StandaloneHerderTest.java&lt;br/&gt;
index 5372a3a27a5..b98c15e7014 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/standalone/StandaloneHerderTest.java&lt;br/&gt;
+++ b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/standalone/StandaloneHerderTest.java&lt;br/&gt;
@@ -36,6 +36,7 @@&lt;br/&gt;
 import org.apache.kafka.connect.runtime.TaskConfig;&lt;br/&gt;
 import org.apache.kafka.connect.runtime.TaskStatus;&lt;br/&gt;
 import org.apache.kafka.connect.runtime.Worker;&lt;br/&gt;
+import org.apache.kafka.connect.runtime.WorkerConfigTransformer;&lt;br/&gt;
 import org.apache.kafka.connect.runtime.WorkerConnector;&lt;br/&gt;
 import org.apache.kafka.connect.runtime.distributed.ClusterConfigState;&lt;br/&gt;
 import org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader;&lt;br/&gt;
@@ -101,6 +102,7 @@&lt;/p&gt;

&lt;p&gt;     private Connector connector;&lt;br/&gt;
     @Mock protected Worker worker;&lt;br/&gt;
+    @Mock protected WorkerConfigTransformer transformer;&lt;br/&gt;
     @Mock private Plugins plugins;&lt;br/&gt;
     @Mock&lt;br/&gt;
     private PluginClassLoader pluginLoader;&lt;br/&gt;
@@ -146,6 +148,9 @@ public void testCreateConnectorFailedBasicValidation() throws Exception {&lt;br/&gt;
         config.remove(ConnectorConfig.NAME_CONFIG);&lt;/p&gt;

&lt;p&gt;         Connector connectorMock = PowerMock.createMock(SourceConnector.class);&lt;br/&gt;
+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andReturn(plugins).times(3);&lt;br/&gt;
         EasyMock.expect(plugins.compareAndSwapLoaders(connectorMock)).andReturn(delegatingLoader);&lt;br/&gt;
         EasyMock.expect(plugins.newConnector(EasyMock.anyString())).andReturn(connectorMock);&lt;br/&gt;
@@ -171,6 +176,9 @@ public void testCreateConnectorFailedCustomValidation() throws Exception {&lt;br/&gt;
         connector = PowerMock.createMock(BogusSourceConnector.class);&lt;/p&gt;

&lt;p&gt;         Connector connectorMock = PowerMock.createMock(SourceConnector.class);&lt;br/&gt;
+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andReturn(plugins).times(3);&lt;br/&gt;
         EasyMock.expect(plugins.compareAndSwapLoaders(connectorMock)).andReturn(delegatingLoader);&lt;br/&gt;
         EasyMock.expect(plugins.newConnector(EasyMock.anyString())).andReturn(connectorMock);&lt;br/&gt;
@@ -205,6 +213,9 @@ public void testCreateConnectorAlreadyExists() throws Exception {&lt;br/&gt;
         Connector connectorMock = PowerMock.createMock(SourceConnector.class);&lt;br/&gt;
         expectConfigValidation(connectorMock, true, config, config);&lt;/p&gt;

&lt;p&gt;+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andReturn(plugins).times(2);&lt;br/&gt;
         EasyMock.expect(plugins.compareAndSwapLoaders(connectorMock)).andReturn(delegatingLoader);&lt;br/&gt;
         // No new connector is created&lt;br/&gt;
@@ -565,6 +576,9 @@ public void testCorruptConfig() {&lt;br/&gt;
         );&lt;br/&gt;
         ConfigDef configDef = new ConfigDef();&lt;br/&gt;
         configDef.define(key, ConfigDef.Type.STRING, ConfigDef.Importance.HIGH, &quot;&quot;);&lt;br/&gt;
+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andReturn(plugins).times(3);&lt;br/&gt;
         EasyMock.expect(plugins.compareAndSwapLoaders(connectorMock)).andReturn(delegatingLoader);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andStubReturn(plugins);&lt;br/&gt;
@@ -672,6 +686,9 @@ private void expectConfigValidation(&lt;br/&gt;
             Map&amp;lt;String, String&amp;gt;... configs&lt;br/&gt;
     ) {&lt;br/&gt;
         // config validation&lt;br/&gt;
+        EasyMock.expect(worker.configTransformer()).andReturn(transformer).times(2);&lt;br/&gt;
+        final Capture&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; configCapture = EasyMock.newCapture();&lt;br/&gt;
+        EasyMock.expect(transformer.transform(EasyMock.capture(configCapture))).andAnswer(configCapture::getValue);&lt;br/&gt;
         EasyMock.expect(worker.getPlugins()).andReturn(plugins).times(3);&lt;br/&gt;
         EasyMock.expect(plugins.compareAndSwapLoaders(connectorMock)).andReturn(delegatingLoader);&lt;br/&gt;
         if (shouldCreateConnector) {&lt;br/&gt;
diff --git a/tests/kafkatest/tests/connect/connect_test.py b/tests/kafkatest/tests/connect/connect_test.py&lt;br/&gt;
index 37538763337..9d34c480870 100644&lt;br/&gt;
&amp;#8212; a/tests/kafkatest/tests/connect/connect_test.py&lt;br/&gt;
+++ b/tests/kafkatest/tests/connect/connect_test.py&lt;br/&gt;
@@ -27,6 +27,7 @@&lt;/p&gt;

&lt;p&gt; import hashlib&lt;br/&gt;
 import json&lt;br/&gt;
+import os.path&lt;/p&gt;


&lt;p&gt; class ConnectStandaloneFileTest(Test):&lt;br/&gt;
@@ -44,7 +45,8 @@ class ConnectStandaloneFileTest(Test):&lt;/p&gt;

&lt;p&gt;     OFFSETS_FILE = &quot;/mnt/connect.offsets&quot;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;TOPIC = &quot;test&quot;&lt;br/&gt;
+    TOPIC = &quot;${&lt;a href=&quot;file:/mnt/connect/connect-file-external.properties:topic.external&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/mnt/connect/connect-file-external.properties:topic.external&lt;/a&gt;}&quot;&lt;br/&gt;
+    TOPIC_TEST = &quot;test&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     FIRST_INPUT_LIST = &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;foo&amp;quot;, &amp;quot;bar&amp;quot;, &amp;quot;baz&amp;quot;&amp;#93;&lt;/span&gt;&lt;br/&gt;
     FIRST_INPUT = &quot;\n&quot;.join(FIRST_INPUT_LIST) + &quot;\n&quot;&lt;br/&gt;
@@ -90,13 +92,18 @@ def test_file_source_and_sink(self, converter=&quot;org.apache.kafka.connect.json.Jso&lt;/p&gt;

&lt;p&gt;         self.source = ConnectStandaloneService(self.test_context, self.kafka, &lt;span class=&quot;error&quot;&gt;&amp;#91;self.INPUT_FILE, self.OFFSETS_FILE&amp;#93;&lt;/span&gt;)&lt;br/&gt;
         self.sink = ConnectStandaloneService(self.test_context, self.kafka, &lt;span class=&quot;error&quot;&gt;&amp;#91;self.OUTPUT_FILE, self.OFFSETS_FILE&amp;#93;&lt;/span&gt;)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;self.consumer_validator = ConsoleConsumer(self.test_context, 1, self.kafka, self.TOPIC,&lt;br/&gt;
+        self.consumer_validator = ConsoleConsumer(self.test_context, 1, self.kafka, self.TOPIC_TEST,&lt;br/&gt;
                                                   consumer_timeout_ms=10000)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         self.zk.start()&lt;br/&gt;
         self.kafka.start()&lt;/p&gt;

&lt;p&gt;+        source_external_props = os.path.join(self.source.PERSISTENT_ROOT, &quot;connect-file-external.properties&quot;)&lt;br/&gt;
+        self.source.node.account.create_file(source_external_props, self.render(&apos;connect-file-external.properties&apos;))&lt;br/&gt;
         self.source.set_configs(lambda node: self.render(&quot;connect-standalone.properties&quot;, node=node), &lt;span class=&quot;error&quot;&gt;&amp;#91;self.render(&amp;quot;connect-file-source.properties&amp;quot;)&amp;#93;&lt;/span&gt;)&lt;br/&gt;
+&lt;br/&gt;
+        sink_external_props = os.path.join(self.sink.PERSISTENT_ROOT, &quot;connect-file-external.properties&quot;)&lt;br/&gt;
+        self.sink.node.account.create_file(sink_external_props, self.render(&apos;connect-file-external.properties&apos;))&lt;br/&gt;
         self.sink.set_configs(lambda node: self.render(&quot;connect-standalone.properties&quot;, node=node), &lt;span class=&quot;error&quot;&gt;&amp;#91;self.render(&amp;quot;connect-file-sink.properties&amp;quot;)&amp;#93;&lt;/span&gt;)&lt;/p&gt;

&lt;p&gt;         self.source.start()&lt;br/&gt;
diff --git a/tests/kafkatest/tests/connect/templates/connect-file-external.properties b/tests/kafkatest/tests/connect/templates/connect-file-external.properties&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..8dccd2571f5&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/tests/kafkatest/tests/connect/templates/connect-file-external.properties&lt;br/&gt;
@@ -0,0 +1,16 @@&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#    &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+topic.external={{ TOPIC_TEST }}&lt;br/&gt;
diff --git a/tests/kafkatest/tests/connect/templates/connect-standalone.properties b/tests/kafkatest/tests/connect/templates/connect-standalone.properties&lt;br/&gt;
index a8eaa44832e..cbfe4910682 100644&lt;br/&gt;
&amp;#8212; a/tests/kafkatest/tests/connect/templates/connect-standalone.properties&lt;br/&gt;
+++ b/tests/kafkatest/tests/connect/templates/connect-standalone.properties&lt;br/&gt;
@@ -31,3 +31,6 @@ offset.storage.file.filename={{ OFFSETS_FILE }}&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Reduce the admin client request timeouts so that we don&apos;t wait the default 120 sec before failing to connect the admin client&lt;br/&gt;
 request.timeout.ms=30000&lt;br/&gt;
+&lt;br/&gt;
+config.providers=file&lt;br/&gt;
+config.providers.file.class=org.apache.kafka.common.config.provider.FileConfigProvider&lt;/li&gt;
&lt;/ol&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16576961" author="githubbot" created="Fri, 10 Aug 2018 23:39:39 +0000"  >&lt;p&gt;rhauch opened a new pull request #5489: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7225&quot; title=&quot;Kafka Connect ConfigProvider not invoked before validation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7225&quot;&gt;&lt;del&gt;KAFKA-7225&lt;/del&gt;&lt;/a&gt;: Corrected system tests by generating external properties file&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5489&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Fix system tests from earlier #5445 &lt;/p&gt;

&lt;p&gt;   *More detailed description of your change,&lt;br/&gt;
   if necessary. The PR title and PR message become&lt;br/&gt;
   the squashed commit message, so use a separate&lt;br/&gt;
   comment to ping reviewers.*&lt;/p&gt;

&lt;p&gt;   *Summary of testing strategy (including rationale)&lt;br/&gt;
   for the feature or bug fix. Unit and/or integration&lt;br/&gt;
   tests are expected for any behaviour change and&lt;br/&gt;
   system tests should be considered for larger changes.*&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16590826" author="githubbot" created="Thu, 23 Aug 2018 21:22:12 +0000"  >&lt;p&gt;hachikuji closed pull request #5489: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7225&quot; title=&quot;Kafka Connect ConfigProvider not invoked before validation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7225&quot;&gt;&lt;del&gt;KAFKA-7225&lt;/del&gt;&lt;/a&gt;: Corrected system tests by generating external properties file&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5489&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/tests/kafkatest/services/connect.py b/tests/kafkatest/services/connect.py&lt;br/&gt;
index 19beddd1b78..d8c8d5a7e80 100644&lt;br/&gt;
&amp;#8212; a/tests/kafkatest/services/connect.py&lt;br/&gt;
+++ b/tests/kafkatest/services/connect.py&lt;br/&gt;
@@ -40,6 +40,7 @@ class ConnectServiceBase(KafkaPathResolverMixin, Service):&lt;br/&gt;
     STDERR_FILE = os.path.join(PERSISTENT_ROOT, &quot;connect.stderr&quot;)&lt;br/&gt;
     LOG4J_CONFIG_FILE = os.path.join(PERSISTENT_ROOT, &quot;connect-log4j.properties&quot;)&lt;br/&gt;
     PID_FILE = os.path.join(PERSISTENT_ROOT, &quot;connect.pid&quot;)&lt;br/&gt;
+    EXTERNAL_CONFIGS_FILE = os.path.join(PERSISTENT_ROOT, &quot;connect-external-configs.properties&quot;)&lt;br/&gt;
     CONNECT_REST_PORT = 8083&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Currently the Connect worker supports waiting on three modes:&lt;br/&gt;
@@ -69,6 +70,7 @@ def _&lt;em&gt;init&lt;/em&gt;_(self, context, num_nodes, kafka, files):&lt;br/&gt;
         self.files = files&lt;br/&gt;
         self.startup_mode = self.STARTUP_MODE_LISTEN&lt;br/&gt;
         self.environment = {}&lt;br/&gt;
+        self.external_config_template_func = None&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;     def pids(self, node):&lt;br/&gt;
         &quot;&quot;&quot;Return process ids for Kafka Connect processes.&quot;&quot;&quot;&lt;br/&gt;
@@ -87,6 +89,17 @@ def set_configs(self, config_template_func, connector_config_templates=None):&lt;br/&gt;
         self.config_template_func = config_template_func&lt;br/&gt;
         self.connector_config_templates = connector_config_templates&lt;/p&gt;

&lt;p&gt;+    def set_external_configs(self, external_config_template_func):&lt;br/&gt;
+        &quot;&quot;&quot;&lt;br/&gt;
+        Set the properties that will be written in the external file properties&lt;br/&gt;
+        as used by the org.apache.kafka.common.config.provider.FileConfigProvider.&lt;br/&gt;
+        When this is used, the worker configuration must also enable the FileConfigProvider.&lt;br/&gt;
+        This is not provided in the constructor in case the worker&lt;br/&gt;
+        config generally needs access to ZK/Kafka services to&lt;br/&gt;
+        create the configuration.&lt;br/&gt;
+        &quot;&quot;&quot;&lt;br/&gt;
+        self.external_config_template_func = external_config_template_func&lt;br/&gt;
+&lt;br/&gt;
     def listening(self, node):&lt;br/&gt;
         try:&lt;br/&gt;
             cmd = &quot;nc -z %s %s&quot; % (node.account.hostname, self.CONNECT_REST_PORT)&lt;br/&gt;
@@ -145,7 +158,7 @@ def restart_node(self, node, clean_shutdown=True):&lt;br/&gt;
     def clean_node(self, node):&lt;br/&gt;
         node.account.kill_process(&quot;connect&quot;, clean_shutdown=False, allow_fail=True)&lt;br/&gt;
         self.security_config.clean_node(node)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;all_files = &quot; &quot;.join(&lt;span class=&quot;error&quot;&gt;&amp;#91;self.CONFIG_FILE, self.LOG4J_CONFIG_FILE, self.PID_FILE, self.LOG_FILE, self.STDOUT_FILE, self.STDERR_FILE&amp;#93;&lt;/span&gt; + self.config_filenames() + self.files)&lt;br/&gt;
+        all_files = &quot; &quot;.join(&lt;span class=&quot;error&quot;&gt;&amp;#91;self.CONFIG_FILE, self.LOG4J_CONFIG_FILE, self.PID_FILE, self.LOG_FILE, self.STDOUT_FILE, self.STDERR_FILE, self.EXTERNAL_CONFIGS_FILE&amp;#93;&lt;/span&gt; + self.config_filenames() + self.files)&lt;br/&gt;
         node.account.ssh(&quot;rm -rf &quot; + all_files, allow_fail=False)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     def config_filenames(self):&lt;br/&gt;
@@ -263,6 +276,8 @@ def start_node(self, node):&lt;br/&gt;
         node.account.ssh(&quot;mkdir -p %s&quot; % self.PERSISTENT_ROOT, allow_fail=False)&lt;/p&gt;

&lt;p&gt;         self.security_config.setup_node(node)&lt;br/&gt;
+        if self.external_config_template_func:&lt;br/&gt;
+            node.account.create_file(self.EXTERNAL_CONFIGS_FILE, self.external_config_template_func(node))&lt;br/&gt;
         node.account.create_file(self.CONFIG_FILE, self.config_template_func(node))&lt;br/&gt;
         node.account.create_file(self.LOG4J_CONFIG_FILE, self.render(&apos;connect_log4j.properties&apos;, log_file=self.LOG_FILE))&lt;br/&gt;
         remote_connector_configs = []&lt;br/&gt;
@@ -308,6 +323,8 @@ def start_node(self, node):&lt;br/&gt;
         node.account.ssh(&quot;mkdir -p %s&quot; % self.PERSISTENT_ROOT, allow_fail=False)&lt;/p&gt;

&lt;p&gt;         self.security_config.setup_node(node)&lt;br/&gt;
+        if self.external_config_template_func:&lt;br/&gt;
+            node.account.create_file(self.EXTERNAL_CONFIGS_FILE, self.external_config_template_func(node))&lt;br/&gt;
         node.account.create_file(self.CONFIG_FILE, self.config_template_func(node))&lt;br/&gt;
         node.account.create_file(self.LOG4J_CONFIG_FILE, self.render(&apos;connect_log4j.properties&apos;, log_file=self.LOG_FILE))&lt;br/&gt;
         if self.connector_config_templates:&lt;br/&gt;
diff --git a/tests/kafkatest/tests/connect/connect_test.py b/tests/kafkatest/tests/connect/connect_test.py&lt;br/&gt;
index c961681bd3e..e2618e95661 100644&lt;br/&gt;
&amp;#8212; a/tests/kafkatest/tests/connect/connect_test.py&lt;br/&gt;
+++ b/tests/kafkatest/tests/connect/connect_test.py&lt;br/&gt;
@@ -47,7 +47,7 @@ class ConnectStandaloneFileTest(Test):&lt;/p&gt;

&lt;p&gt;     OFFSETS_FILE = &quot;/mnt/connect.offsets&quot;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;TOPIC = &quot;${&lt;a href=&quot;file:/mnt/connect/connect-file-external.properties:topic.external&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/mnt/connect/connect-file-external.properties:topic.external&lt;/a&gt;}&quot;&lt;br/&gt;
+    TOPIC = &quot;${file:&quot; + EXTERNAL_CONFIGS_FILE + &quot;:topic.external}&quot;&lt;br/&gt;
     TOPIC_TEST = &quot;test&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     FIRST_INPUT_LIST = &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;foo&amp;quot;, &amp;quot;bar&amp;quot;, &amp;quot;baz&amp;quot;&amp;#93;&lt;/span&gt;&lt;br/&gt;
@@ -100,14 +100,12 @@ def test_file_source_and_sink(self, converter=&quot;org.apache.kafka.connect.json.Jso&lt;br/&gt;
         self.zk.start()&lt;br/&gt;
         self.kafka.start()&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;source_external_props = os.path.join(self.source.PERSISTENT_ROOT, &quot;connect-file-external.properties&quot;)&lt;/li&gt;
	&lt;li&gt;self.source.node.account.create_file(source_external_props, self.render(&apos;connect-file-external.properties&apos;))&lt;br/&gt;
         self.source.set_configs(lambda node: self.render(&quot;connect-standalone.properties&quot;, node=node), &lt;span class=&quot;error&quot;&gt;&amp;#91;self.render(&amp;quot;connect-file-source.properties&amp;quot;)&amp;#93;&lt;/span&gt;)&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;sink_external_props = os.path.join(self.sink.PERSISTENT_ROOT, &quot;connect-file-external.properties&quot;)&lt;/li&gt;
	&lt;li&gt;self.sink.node.account.create_file(sink_external_props, self.render(&apos;connect-file-external.properties&apos;))&lt;br/&gt;
         self.sink.set_configs(lambda node: self.render(&quot;connect-standalone.properties&quot;, node=node), &lt;span class=&quot;error&quot;&gt;&amp;#91;self.render(&amp;quot;connect-file-sink.properties&amp;quot;)&amp;#93;&lt;/span&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+        self.source.set_external_configs(lambda node: self.render(&quot;connect-file-external.properties&quot;, node=node))&lt;br/&gt;
+        self.sink.set_external_configs(lambda node: self.render(&quot;connect-file-external.properties&quot;, node=node))&lt;br/&gt;
+&lt;br/&gt;
         self.source.start()&lt;br/&gt;
         self.sink.start()&lt;/p&gt;

&lt;p&gt;@@ -182,6 +180,9 @@ def test_skip_and_log_to_dlq(self, error_tolerance):&lt;br/&gt;
         self.override_value_converter_schemas_enable = False&lt;br/&gt;
         self.sink.set_configs(lambda node: self.render(&quot;connect-standalone.properties&quot;, node=node), &lt;span class=&quot;error&quot;&gt;&amp;#91;self.render(&amp;quot;connect-file-sink.properties&amp;quot;)&amp;#93;&lt;/span&gt;)&lt;/p&gt;

&lt;p&gt;+        self.source.set_external_configs(lambda node: self.render(&quot;connect-file-external.properties&quot;, node=node))&lt;br/&gt;
+        self.sink.set_external_configs(lambda node: self.render(&quot;connect-file-external.properties&quot;, node=node))&lt;br/&gt;
+&lt;br/&gt;
         self.source.start()&lt;br/&gt;
         self.sink.start()&lt;/p&gt;

&lt;p&gt;diff --git a/tests/kafkatest/tests/connect/templates/connect-standalone.properties b/tests/kafkatest/tests/connect/templates/connect-standalone.properties&lt;br/&gt;
index cbfe4910682..a471dd5879c 100644&lt;br/&gt;
&amp;#8212; a/tests/kafkatest/tests/connect/templates/connect-standalone.properties&lt;br/&gt;
+++ b/tests/kafkatest/tests/connect/templates/connect-standalone.properties&lt;br/&gt;
@@ -32,5 +32,8 @@ offset.storage.file.filename={{ OFFSETS_FILE }}&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Reduce the admin client request timeouts so that we don&apos;t wait the default 120 sec before failing to connect the admin client&lt;br/&gt;
 request.timeout.ms=30000&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;+# Allow connector configs to use externalized config values of the form:&lt;br/&gt;
+#   ${&lt;a href=&quot;file:/mnt/connect/connect-external-configs.properties:topic.external&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/mnt/connect/connect-external-configs.properties:topic.external&lt;/a&gt;}&lt;br/&gt;
+#&lt;br/&gt;
 config.providers=file&lt;br/&gt;
 config.providers.file.class=org.apache.kafka.common.config.provider.FileConfigProvider&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wkbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>