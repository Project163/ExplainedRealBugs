<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:31:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-14325] NullPointer in ProcessorParameters.toString</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-14325</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;After switching from&#160;&lt;tt&gt;Transformer&lt;/tt&gt; to using&#160;&lt;tt&gt;FixedKeyProcessor&lt;/tt&gt; I get some NullPointer exceptions logged. It seems to be due to &lt;tt&gt;ProcessorParameters::toString&lt;/tt&gt; using it&apos;s field &lt;tt&gt;processorSupplier&lt;/tt&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/0a045d4ef7d67dbe35b8fd2e1c51df87af19a0ab/streams/src/main/java/org/apache/kafka/streams/kstream/internals/graph/ProcessorParameters.java#L133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;without a null check&lt;/a&gt;. After &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-13654&quot; title=&quot;Extend KStream process with new Processor API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-13654&quot;&gt;&lt;del&gt;KAFKA-13654&lt;/del&gt;&lt;/a&gt;: Extend KStream process with new Processor API (&lt;a href=&quot;https://github.com/apache/kafka/pull/11993&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#11993&lt;/a&gt;) this field can be null and instead the field &lt;tt&gt;fixedKeyProcessorSupplier&lt;/tt&gt; is set.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Stack trace&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException: Cannot invoke &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.kafka.streams.processor.api.ProcessorSupplier.get()&quot;&lt;/span&gt; because &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.processorSupplier&quot;&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&#160; &#160; at org.apache.kafka.streams.kstream.internals.graph.ProcessorParameters.toString(ProcessorParameters.java:133)
&#160; &#160; at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.valueOf(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.java:4218)
&#160; &#160; at java.base/java.lang.StringBuilder.append(StringBuilder.java:173)
&#160; &#160; at org.apache.kafka.streams.kstream.internals.graph.ProcessorGraphNode.toString(ProcessorGraphNode.java:52)
&#160; &#160; at org.slf4j.helpers.MessageFormatter.safeObjectAppend(MessageFormatter.java:277)
&#160; &#160; at org.slf4j.helpers.MessageFormatter.deeplyAppendParameter(MessageFormatter.java:249)
&#160; &#160; at org.slf4j.helpers.MessageFormatter.arrayFormat(MessageFormatter.java:211)
&#160; &#160; at org.slf4j.helpers.MessageFormatter.arrayFormat(MessageFormatter.java:161)
&#160; &#160; at ch.qos.logback.classic.spi.LoggingEvent.getFormattedMessage(LoggingEvent.java:293)
&#160; &#160; at ch.qos.logback.classic.spi.LoggingEvent.prepareForDeferredProcessing(LoggingEvent.java:206)
&#160; &#160; at ch.qos.logback.core.OutputStreamAppender.subAppend(OutputStreamAppender.java:223)
&#160; &#160; at ch.qos.logback.core.OutputStreamAppender.append(OutputStreamAppender.java:102)
&#160; &#160; at ch.qos.logback.core.UnsynchronizedAppenderBase.doAppend(UnsynchronizedAppenderBase.java:84)
&#160; &#160; at ch.qos.logback.core.spi.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:51)
&#160; &#160; at ch.qos.logback.classic.Logger.appendLoopOnAppenders(Logger.java:270)
&#160; &#160; at ch.qos.logback.classic.Logger.callAppenders(Logger.java:257)
&#160; &#160; at ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(Logger.java:421)
&#160; &#160; at ch.qos.logback.classic.Logger.filterAndLog_2(Logger.java:414)
&#160; &#160; at ch.qos.logback.classic.Logger.debug(Logger.java:490)
&#160; &#160; at org.apache.kafka.streams.kstream.internals.InternalStreamsBuilder.buildAndOptimizeTopology(InternalStreamsBuilder.java:293)
&#160; &#160; at org.apache.kafka.streams.StreamsBuilder.build(StreamsBuilder.java:628) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13487231">KAFKA-14325</key>
            <summary>NullPointer in ProcessorParameters.toString</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeqo">Jorge Esteban Quilcate Otoya</assignee>
                                    <reporter username="mgh">Martin Hyldgaard</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Oct 2022 09:07:40 +0000</created>
                <updated>Mon, 21 Nov 2022 02:28:44 +0000</updated>
                            <resolved>Mon, 21 Nov 2022 02:25:32 +0000</resolved>
                                    <version>3.3.1</version>
                                    <fixVersion>3.3.2</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17629652" author="ableegoldman" created="Mon, 7 Nov 2022 08:11:59 +0000"  >&lt;p&gt;Hm, nice catch, we should definitely fix this up.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeqo&quot; class=&quot;user-hover&quot; rel=&quot;jeqo&quot;&gt;jeqo&lt;/a&gt; , can you give this class a quick glance to see if there is anything else that&apos;s still accessing/using the old processorSupplier field instead of the new/fixed key one?&lt;/p&gt;</comment>
                            <comment id="17634529" author="jeqo" created="Tue, 15 Nov 2022 21:21:32 +0000"  >&lt;p&gt;Hi there. Of course, looking at this now.&lt;/p&gt;

&lt;p&gt;Looking at why this wasn&apos;t triggered before:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Logging is on debug level&#160; &lt;a href=&quot;https://github.com/apache/kafka/blob/21a15c6b1f1ee80f163633ba617ad381f5edc0c1/streams/src/main/java/org/apache/kafka/streams/kstream/internals/InternalStreamsBuilder.java#L292-L294&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/21a15c6b1f1ee80f163633ba617ad381f5edc0c1/streams/src/main/java/org/apache/kafka/streams/kstream/internals/InternalStreamsBuilder.java#L292-L294&lt;/a&gt;
	&lt;ul&gt;
		&lt;li&gt;but logging in tests is only at INFO level: &lt;a href=&quot;https://github.com/apache/kafka/blob/46bee5bcf3e6877079111cbfd91a2fbaf3975a98/streams/src/test/resources/log4j.properties#L30&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/46bee5bcf3e6877079111cbfd91a2fbaf3975a98/streams/src/test/resources/log4j.properties#L30&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Turning this config to DEBUG is causing a bunch of tests to fail: 6216 tests completed, 256 failed, 1 skipped (locally)&lt;/p&gt;

&lt;p&gt;MockApiProcessorSupplier is causing some strange issues, e.g. org.apache.kafka.streams.StreamsBuilderTest#shouldMergeStreams: java.lang.AssertionError: expected:&amp;lt;1&amp;gt; but was:&amp;lt;5&amp;gt;&lt;/p&gt;

&lt;p&gt;Will have to debug further.&lt;/p&gt;

&lt;p&gt;Also, added a couple of additional castings to this class: &lt;a href=&quot;https://github.com/apache/kafka/pull/12859/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/12859/files&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z19iyo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>