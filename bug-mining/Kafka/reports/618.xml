<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:42:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1881] transient unit test failure in testDeleteTopicWithCleaner due to OOME</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1881</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;kafka.admin.DeleteTopicTest &amp;gt; testDeleteTopicWithCleaner FAILED&lt;br/&gt;
    java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
        at java.nio.HeapByteBuffer.&amp;lt;init&amp;gt;(HeapByteBuffer.java:39)&lt;br/&gt;
        at java.nio.ByteBuffer.allocate(ByteBuffer.java:312)&lt;br/&gt;
        at kafka.log.SkimpyOffsetMap.&amp;lt;init&amp;gt;(OffsetMap.scala:42)&lt;br/&gt;
        at kafka.log.LogCleaner$CleanerThread.&amp;lt;init&amp;gt;(LogCleaner.scala:177)&lt;br/&gt;
        at kafka.log.LogCleaner$$anonfun$1.apply(LogCleaner.scala:86)&lt;br/&gt;
        at kafka.log.LogCleaner$$anonfun$1.apply(LogCleaner.scala:86)&lt;br/&gt;
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244)&lt;br/&gt;
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244)&lt;br/&gt;
        at scala.collection.immutable.Range.foreach(Range.scala:141)&lt;br/&gt;
        at scala.collection.TraversableLike$class.map(TraversableLike.scala:244)&lt;br/&gt;
        at scala.collection.AbstractTraversable.map(Traversable.scala:105)&lt;br/&gt;
        at kafka.log.LogCleaner.&amp;lt;init&amp;gt;(LogCleaner.scala:86)&lt;br/&gt;
        at kafka.log.LogManager.&amp;lt;init&amp;gt;(LogManager.scala:64)&lt;br/&gt;
        at kafka.server.KafkaServer.createLogManager(KafkaServer.scala:337)&lt;br/&gt;
        at kafka.server.KafkaServer.startup(KafkaServer.scala:85)&lt;br/&gt;
        at kafka.utils.TestUtils$.createServer(TestUtils.scala:134)&lt;br/&gt;
        at kafka.admin.DeleteTopicTest$$anonfun$10.apply(DeleteTopicTest.scala:272)&lt;br/&gt;
        at kafka.admin.DeleteTopicTest$$anonfun$10.apply(DeleteTopicTest.scala:272)&lt;br/&gt;
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244)&lt;br/&gt;
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244)&lt;br/&gt;
        at scala.collection.immutable.List.foreach(List.scala:318)&lt;br/&gt;
        at scala.collection.TraversableLike$class.map(TraversableLike.scala:244)&lt;br/&gt;
        at scala.collection.AbstractTraversable.map(Traversable.scala:105)&lt;br/&gt;
        at kafka.admin.DeleteTopicTest.createTestTopicAndCluster(DeleteTopicTest.scala:272)&lt;br/&gt;
        at kafka.admin.DeleteTopicTest.testDeleteTopicWithCleaner(DeleteTopicTest.scala:241)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12768517">KAFKA-1881</key>
            <summary>transient unit test failure in testDeleteTopicWithCleaner due to OOME</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ewencp">Ewen Cheslack-Postava</assignee>
                                    <reporter username="junrao">Jun Rao</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jan 2015 19:34:59 +0000</created>
                <updated>Thu, 26 Feb 2015 23:04:00 +0000</updated>
                            <resolved>Thu, 26 Feb 2015 23:04:00 +0000</resolved>
                                    <version>0.9.0.0</version>
                                    <fixVersion>0.9.0.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14282917" author="junrao" created="Mon, 19 Jan 2015 19:35:43 +0000"  >&lt;p&gt;Perhaps we can just reduce the amount of data written in writeDups().&lt;/p&gt;</comment>
                            <comment id="14283087" author="gwenshap" created="Mon, 19 Jan 2015 22:22:33 +0000"  >&lt;p&gt;We can (although we are looking at around 2K of memory here... 100 records * 3 dupes * ~6 bytes each).&lt;/p&gt;

&lt;p&gt;But it looks like we are running out of memory before writeDups is even called - the error is in createTestTopicAndCluster:&lt;br/&gt;
at kafka.admin.DeleteTopicTest.createTestTopicAndCluster(DeleteTopicTest.scala:272)&lt;br/&gt;
at kafka.admin.DeleteTopicTest.testDeleteTopicWithCleaner(DeleteTopicTest.scala:241)&lt;/p&gt;

&lt;p&gt;What makes you suspect writeDups in this issue? Does the OOM only happens when running the test in a loop?&lt;/p&gt;</comment>
                            <comment id="14283419" author="junrao" created="Tue, 20 Jan 2015 05:32:44 +0000"  >&lt;p&gt;Not sure id writeDups is causing the issue. I just ran gradlew test. It seems this starts to happen after &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1819&quot; title=&quot;Cleaner gets confused about deleted and re-created topics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1819&quot;&gt;&lt;del&gt;KAFKA-1819&lt;/del&gt;&lt;/a&gt; is committed.&lt;/p&gt;</comment>
                            <comment id="14337455" author="ewencp" created="Wed, 25 Feb 2015 23:27:44 +0000"  >&lt;p&gt;Created reviewboard &lt;a href=&quot;https://reviews.apache.org/r/31447/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/31447/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14339370" author="junrao" created="Thu, 26 Feb 2015 23:04:00 +0000"  >&lt;p&gt;Thanks for the patch. +1 and committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12700898" name="KAFKA-1881.patch" size="1203" author="ewencp" created="Wed, 25 Feb 2015 23:27:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24jb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>