<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:42:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1667]  topic-level configuration not validated</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1667</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;I was able to set the configuration for a topic to these invalid values:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Topic:topic-config-test  PartitionCount:1        ReplicationFactor:2     Configs:min.cleanable.dirty.ratio=-30.2,segment.bytes=-1,retention.ms=-12,cleanup.policy=lol
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems that the values are saved as long as they are the correct type, but are not validated like the corresponding broker-level properties.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12745804">KAFKA-1667</key>
            <summary> topic-level configuration not validated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="edio">Dmytro Kostiuchenko</assignee>
                                    <reporter username="rberdeen">Ryan Berdeen</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Fri, 3 Oct 2014 19:07:50 +0000</created>
                <updated>Tue, 25 Nov 2014 22:44:11 +0000</updated>
                            <resolved>Tue, 25 Nov 2014 22:44:10 +0000</resolved>
                                    <version>0.8.1.1</version>
                                    <fixVersion>0.9.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14161318" author="gwenshap" created="Tue, 7 Oct 2014 01:21:06 +0000"  >&lt;p&gt;Looks like LogConfig has very few validations. &lt;/p&gt;

&lt;p&gt;I think it makes sense to refactor it to use either ConfigDef (actually part of the client code, but has really nice validators) or at least ValidatedProperties instead of just Properties - and then we can add proper validation for each config.&lt;/p&gt;

&lt;p&gt;Any thoughts on whether ConfigDef can be used in the server, or if we should keep on using ValidatedProperties? &lt;/p&gt;</comment>
                            <comment id="14182253" author="junrao" created="Fri, 24 Oct 2014 00:37:05 +0000"  >&lt;p&gt;The server side already has a dependency on clients. So, we can start using ConfigDef on the broker side as well.&lt;/p&gt;</comment>
                            <comment id="14198212" author="edio" created="Wed, 5 Nov 2014 10:55:19 +0000"  >&lt;p&gt;Hi. I&apos;m willing to work on this. &lt;br/&gt;
Currently I have few questions: &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;What should be of a higher priority: keeping same interface for LogConfig or making code consistent with other configs based on ConfigDef? In the latter case changes would also impact AdminUtils, TopicCommand and perhaps some other classes.&lt;/li&gt;
	&lt;li&gt;Are there any guidelines to assigning priorities?&lt;/li&gt;
	&lt;li&gt;Is there some place to check for valid ranges for properties? It is always possible to induce them from the code, but would be easier, of course, to have some reference doc.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14198533" author="junrao" created="Wed, 5 Nov 2014 15:43:32 +0000"  >&lt;p&gt;For now, we can probably just keep LogConfig and add the validation in LogConfig.fromProps(). Later on, we can change all broker side configs (KafkaConfig, ZKConfig, TopicConfig) to use ConfigDef together.&lt;/p&gt;</comment>
                            <comment id="14198614" author="junrao" created="Wed, 5 Nov 2014 16:39:36 +0000"  >&lt;p&gt;If you already started on converting LogConfig to ConfigDef, that&apos;s fine too. To start with, I will assign medium importance to all those topic level config properties.&lt;/p&gt;</comment>
                            <comment id="14198638" author="edio" created="Wed, 5 Nov 2014 16:53:28 +0000"  >&lt;p&gt;So, I decided to just add validation and to impact as little as possible.&lt;br/&gt;
There is a new method in &lt;tt&gt;ConfigDef&lt;/tt&gt;, which is needed to avoid duplication in LogConfig (instead of maintaining ConfigNames we derive them from configDef)&lt;/p&gt;

&lt;p&gt;All properties are now of MEDIUM importance and have no documentation.&lt;br/&gt;
All numeric values are required to be &amp;gt;0, compact property validated against set &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;compact&amp;quot;, &amp;quot;delete&amp;quot;&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;I would appreciate if you take a look on the patch and suggest, whether it is ok to submit it as a fix.&lt;/p&gt;

&lt;p&gt;P.S. sorry for my megaverbosity. That&apos;s my first contribution&lt;/p&gt;</comment>
                            <comment id="14198663" author="gwenshap" created="Wed, 5 Nov 2014 17:09:26 +0000"  >&lt;p&gt;Can you load the patch to RB too? It makes reviewing and commenting much easier.&lt;/p&gt;</comment>
                            <comment id="14198670" author="gwenshap" created="Wed, 5 Nov 2014 17:16:25 +0000"  >&lt;p&gt;I think we can do better validations. For example:&lt;/p&gt;

&lt;p&gt;.define(MinCleanableDirtyRatioProp, DOUBLE, Defaults.MinCleanableDirtyRatio, atLeast(0), MEDIUM, &quot;&quot;)&lt;/p&gt;

&lt;p&gt;Can be:&lt;/p&gt;

&lt;p&gt;.define(MinCleanableDirtyRatioProp, DOUBLE, Defaults.MinCleanableDirtyRatio, between(0,1), MEDIUM, &quot;&quot;)&lt;/p&gt;

&lt;p&gt;Since its a ratio.&lt;/p&gt;

&lt;p&gt;Once you have RB, I can add more detail for other configs.&lt;/p&gt;</comment>
                            <comment id="14198829" author="edio" created="Wed, 5 Nov 2014 18:44:03 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/27634/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/27634/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14200370" author="edio" created="Thu, 6 Nov 2014 16:10:26 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/27634/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/27634/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14200381" author="edio" created="Thu, 6 Nov 2014 16:19:41 +0000"  >&lt;p&gt;The main issue with the old patch was handling &lt;tt&gt;Properties&lt;/tt&gt; defaults.&lt;br/&gt;
When properties were passed to &lt;tt&gt;fromProps(Properties)&lt;/tt&gt; method, &lt;tt&gt;Properties&lt;/tt&gt; object has been exposed as a &lt;tt&gt;Map&lt;/tt&gt;. &lt;tt&gt;Map.get()&lt;/tt&gt;, though is implemented in &lt;tt&gt;Hashtable&lt;/tt&gt; and thus knows nothing about &lt;tt&gt;Properties&lt;/tt&gt; defaults. Fixed that, added few trivial tests to check general correctness.&lt;/p&gt;

&lt;p&gt;There is an impact on the client code though: boolean values are now parsed via &lt;tt&gt;Boolean.parseBoolean&lt;/tt&gt; throwing no exception but instead falling back to &lt;tt&gt;false&lt;/tt&gt; for invalid input.&lt;/p&gt;</comment>
                            <comment id="14202026" author="edio" created="Fri, 7 Nov 2014 13:28:26 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/27634/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/27634/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14207668" author="gwenshap" created="Wed, 12 Nov 2014 04:36:41 +0000"  >&lt;p&gt;btw. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edio&quot; class=&quot;user-hover&quot; rel=&quot;edio&quot;&gt;edio&lt;/a&gt;, you probably want to assign the JIRA to yourself, and click on &quot;submit patch&quot; so this will be more visible as something that needs review + commit.&lt;/p&gt;</comment>
                            <comment id="14207957" author="edio" created="Wed, 12 Nov 2014 11:49:29 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/27634/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/27634/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14207968" author="edio" created="Wed, 12 Nov 2014 11:52:13 +0000"  >&lt;p&gt;Can&apos;t assign issue to myself. Get an exception when running kafka-patch-review.py.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;jira.exceptions.JIRAError: HTTP 400: &quot;Field &lt;span class=&quot;code-quote&quot;&gt;&apos;assignee&apos;&lt;/span&gt; cannot be set. It is not on the appropriate screen, or unknown&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; Also don&apos;t have &quot;Assign to me&quot; button in JIRA.&lt;/p&gt;</comment>
                            <comment id="14212477" author="edio" created="Fri, 14 Nov 2014 16:58:30 +0000"  >&lt;p&gt;Bump. Anyone willing to review?&lt;/p&gt;</comment>
                            <comment id="14213977" author="edio" created="Sun, 16 Nov 2014 17:31:48 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/27634/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/27634/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14213978" author="edio" created="Sun, 16 Nov 2014 17:33:23 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/27634/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/27634/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14224394" author="edio" created="Tue, 25 Nov 2014 11:04:19 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/27634/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/27634/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14225335" author="junrao" created="Tue, 25 Nov 2014 22:44:11 +0000"  >&lt;p&gt;Thanks for the patch. +1 and committed to trunk.&lt;/p&gt;

&lt;p&gt;Also filed &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1798&quot; title=&quot;ConfigDef.parseType() should throw exception on invalid boolean value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1798&quot;&gt;&lt;del&gt;KAFKA-1798&lt;/del&gt;&lt;/a&gt; for validating the string input for the boolean config type.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12679590" name="KAFKA-1667_2014-11-05_19:43:53.patch" size="11359" author="edio" created="Wed, 5 Nov 2014 18:44:03 +0000"/>
                            <attachment id="12679870" name="KAFKA-1667_2014-11-06_17:10:14.patch" size="25223" author="edio" created="Thu, 6 Nov 2014 16:10:25 +0000"/>
                            <attachment id="12680160" name="KAFKA-1667_2014-11-07_14:28:14.patch" size="27177" author="edio" created="Fri, 7 Nov 2014 13:28:26 +0000"/>
                            <attachment id="12681051" name="KAFKA-1667_2014-11-12_12:49:11.patch" size="32038" author="edio" created="Wed, 12 Nov 2014 11:49:28 +0000"/>
                            <attachment id="12681797" name="KAFKA-1667_2014-11-16_18:31:34.patch" size="39106" author="edio" created="Sun, 16 Nov 2014 17:31:47 +0000"/>
                            <attachment id="12681798" name="KAFKA-1667_2014-11-16_18:33:10.patch" size="39781" author="edio" created="Sun, 16 Nov 2014 17:33:22 +0000"/>
                            <attachment id="12683523" name="KAFKA-1667_2014-11-25_12:03:56.patch" size="41419" author="edio" created="Tue, 25 Nov 2014 11:04:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20s6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>