<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:19:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-8391] Flaky Test RebalanceSourceConnectorsIntegrationTest#testDeleteConnector</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-8391</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/4747/testReport/junit/org.apache.kafka.connect.integration/RebalanceSourceConnectorsIntegrationTest/testDeleteConnector/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/4747/testReport/junit/org.apache.kafka.connect.integration/RebalanceSourceConnectorsIntegrationTest/testDeleteConnector/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;java.lang.AssertionError: Condition not met within timeout 30000. Connector tasks did not stop in time. at org.apache.kafka.test.TestUtils.waitForCondition(TestUtils.java:375) at org.apache.kafka.test.TestUtils.waitForCondition(TestUtils.java:352) at org.apache.kafka.connect.integration.RebalanceSourceConnectorsIntegrationTest.testDeleteConnector(RebalanceSourceConnectorsIntegrationTest.java:166)&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13234165">KAFKA-8391</key>
            <summary>Flaky Test RebalanceSourceConnectorsIntegrationTest#testDeleteConnector</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sagarrao">Sagar Rao</assignee>
                                    <reporter username="mjsax">Matthias J. Sax</reporter>
                        <labels>
                            <label>flaky-test</label>
                    </labels>
                <created>Sun, 19 May 2019 12:23:19 +0000</created>
                <updated>Wed, 20 Sep 2023 04:30:18 +0000</updated>
                            <resolved>Mon, 24 Jul 2023 05:00:29 +0000</resolved>
                                    <version>2.3.0</version>
                                    <fixVersion>2.4.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16861519" author="bchen225242" created="Tue, 11 Jun 2019 21:40:51 +0000"  >&lt;p&gt;Failed again:&#160;&lt;a href=&quot;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/5415/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/5415/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16867281" author="bchen225242" created="Wed, 19 Jun 2019 07:10:06 +0000"  >&lt;p&gt;Failed again:&#160;&lt;a href=&quot;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/5626/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/5626/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16867282" author="bchen225242" created="Wed, 19 Jun 2019 07:11:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkonstantine&quot; class=&quot;user-hover&quot; rel=&quot;kkonstantine&quot;&gt;kkonstantine&lt;/a&gt; Do you have idea why it keeps timing out?&lt;/p&gt;</comment>
                            <comment id="16875325" author="bchen225242" created="Sat, 29 Jun 2019 00:37:03 +0000"  >&lt;p&gt;Failed again:&#160;&lt;a href=&quot;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/5883/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/5883/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16876307" author="githubbot" created="Mon, 1 Jul 2019 16:09:33 +0000"  >&lt;p&gt;rhauch commented on pull request #7019: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8391&quot; title=&quot;Flaky Test RebalanceSourceConnectorsIntegrationTest#testDeleteConnector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8391&quot;&gt;&lt;del&gt;KAFKA-8391&lt;/del&gt;&lt;/a&gt;: Improved the integration tests to make them less flaky&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7019&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7019&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Added the ability for the connector handles and task handles, which are used by the monitorable source and sink connectors used to verify the functionality of the Connect framework, to record the number of times the connector and tasks have each been started, and to allow a test to obtain a `RestartLatch` that can be used to block until the connectors and/or tasks have been restarted a specified number of types.&lt;/p&gt;

&lt;p&gt;   Typically, a test will get the `ConnectorHandle` for a connector, and call the `ConnectorHandle.expectedRestarts(int)` method with the expected number of times that the connector and/or tasks will be restarted, and will hold onto the resulting `RestartLatch`. The test will then change the connector (or otherwise cause the connector to restart) one or more times as desired, and then call `RestartLatch.await(long, TimeUnit)` to block the test up to a specified duration for the connector and all tasks to be started the specified number of times.&lt;/p&gt;

&lt;p&gt;   This commit also increases several of the maximum wait times used in other integration tests. It doesn&#8217;t hurt to potentially wait longer, since most test runs will not need to wait the maximum amount of time anyway. However, in the rare cases that do need that extra time, waiting a bit more is fine if we can reduce the flakiness and minimize test failures that happened to time out too early.&lt;/p&gt;

&lt;p&gt;   Unit tests were added for the new `RestartLatch` and `StopAndStartCounter` utility classes. This PR only affects the tests and does not affect any runtime code or API.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16876318" author="rhauch" created="Mon, 1 Jul 2019 16:15:58 +0000"  >&lt;p&gt;Finally got a chance to look at this. Here&apos;s what I think is going on:&lt;/p&gt;

&lt;p&gt;The integration test does the following:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;start Connect distributed (3 workers)&lt;/li&gt;
	&lt;li&gt;start the connector and wait for the connector and all tasks to start completely&lt;/li&gt;
	&lt;li&gt;verify at least N records were produced on the output topic&lt;/li&gt;
	&lt;li&gt;change the configuration of the connector to use a different topic&lt;/li&gt;
	&lt;li&gt;waits for the connector and all tasks to be running&lt;/li&gt;
	&lt;li&gt;verify at least N records were produced on the new output topic&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Logs show that after the test changes the connector configuration (step 4), the distributed worker immediately updates the connector config, restarts the connector with the new configuration, gets the latest task configurations and writes them to the internal config topic &amp;#8211; all before the `PUT` request returns and before step 4 completes. However, the tasks actually don&apos;t get restarted until the workers running those tasks detect the new task configurations, and this could take a few seconds. Note that step 5 occurs immediately after step 4 ends, so it&apos;s possible that step 5 starts before the workers all see the updates and stop their tasks. IOW, step 5 might actually succeed &lt;b&gt;before&lt;/b&gt; any of the tasks are restarted. And because restarting the tasks takes a bit of time, the test&apos;s self-imposed constraint of completing step 6 within 15 seconds might not actually work.&lt;/p&gt;

&lt;p&gt;This could be corrected a few ways. One option would be to just increase the maximum time required to complete step 6, but this could still result in flaky tests. Another option is to sleep for some fixed period of time after step 4 before starting step 5, but this might still be flaky if the sleep time is too short or result in the test sleeping much longer than needed if the sleep time is too long.&lt;/p&gt;

&lt;p&gt;The best way to fix this is to actually wait for the tasks to restart. Because we&apos;re testing the Connect framework, the integration tests already use `MonitorableSourceConnector` and `MonitorableSinkConnector`, which are special connectors that make use of the statically-accessible connector and task handles to record various activities within the connector and tasks. We can modify these handles to allow the tests to set an expectation that the connector and tasks will be restarted, so that the tests can subsequently cause the restart and then wait for the restart to complete. This requires a bit of code, but it will be the most reliable way of waiting until the connectors and tasks are restarted without being flaky and without waiting too long.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://github.com/apache/kafka/pull/7019&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7019&lt;/a&gt; for a proposed solution / fix.&lt;/p&gt;</comment>
                            <comment id="16901289" author="mjsax" created="Tue, 6 Aug 2019 17:08:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/6745/testReport/junit/org.apache.kafka.connect.integration/RebalanceSourceConnectorsIntegrationTest/testDeleteConnector/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/6745/testReport/junit/org.apache.kafka.connect.integration/RebalanceSourceConnectorsIntegrationTest/testDeleteConnector/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16906487" author="githubbot" created="Tue, 13 Aug 2019 18:17:24 +0000"  >&lt;p&gt;gwenshap commented on pull request #7019: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8391&quot; title=&quot;Flaky Test RebalanceSourceConnectorsIntegrationTest#testDeleteConnector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8391&quot;&gt;&lt;del&gt;KAFKA-8391&lt;/del&gt;&lt;/a&gt;: Improved the Connect integration tests to make them less flaky&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7019&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7019&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16910710" author="githubbot" created="Mon, 19 Aug 2019 19:59:09 +0000"  >&lt;p&gt;rhauch commented on pull request #7224: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8391&quot; title=&quot;Flaky Test RebalanceSourceConnectorsIntegrationTest#testDeleteConnector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8391&quot;&gt;&lt;del&gt;KAFKA-8391&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8661&quot; title=&quot;Flaky Test RebalanceSourceConnectorsIntegrationTest#testStartTwoConnectors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8661&quot;&gt;&lt;del&gt;KAFKA-8661&lt;/del&gt;&lt;/a&gt;: Improve flaky Connect rebalance integration tests&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7224&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Increased the timeout by a substantial amount, though this will only take effect if the test conditions are not met successfully.&lt;/p&gt;

&lt;p&gt;   Added logic to allow tests to wait for a number of records to have been written to / consumed from a specific topic. This involved extracting the previously-duplicated logic in `ConnectorHandle` and TaskHandle (test framework classes) into a new `RecordLatches` class that can be easily reused by both those handle classes.&lt;/p&gt;

&lt;p&gt;   These integration tests are passing were occasionally failing for me locally, but now I&#8217;ve run them successfully nearly a dozen times in a row. If the Jenkins builds are a bit slower, this might help the tests fail less frequently.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16913407" author="githubbot" created="Thu, 22 Aug 2019 15:10:35 +0000"  >&lt;p&gt;rhauch commented on pull request #7237: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8391&quot; title=&quot;Flaky Test RebalanceSourceConnectorsIntegrationTest#testDeleteConnector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8391&quot;&gt;&lt;del&gt;KAFKA-8391&lt;/del&gt;&lt;/a&gt;: Temporarily ignore flaky Connect rebalance integration tests&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7237&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I&apos;ve spent quite a bit of time on trying to discover the root cause, with no luck so far. I have been able to reproduce it locally by running the following 100 times:&lt;br/&gt;
   ```&lt;br/&gt;
   ./gradlew connect:runtime:clean connect:runtime:test --tests org.apache.kafka.connect.integration.RebalanceSourceConnectorsIntegrationTest&lt;br/&gt;
   ```&lt;br/&gt;
   The `testReconfigConnector` test failed 28% of the time and the others failed 0%. This issue and &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8661&quot; title=&quot;Flaky Test RebalanceSourceConnectorsIntegrationTest#testStartTwoConnectors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8661&quot;&gt;&lt;del&gt;KAFKA-8661&lt;/del&gt;&lt;/a&gt; suggest that `testDeleteConnector` and `testStartTwoConnectors` are also flaky, though I&apos;ve not seen those tests fail locally.&lt;/p&gt;

&lt;p&gt;   Because this flakiness is causing issues for the rest of the project, I&apos;m going to temporarily ignore several of the flaky ITs while I continue to investigate:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;`RebalanceSourceConnectorsIntegrationTest.testReconfigConnector`&lt;/li&gt;
	&lt;li&gt;`RebalanceSourceConnectorsIntegrationTest.testDeleteConnector`&lt;/li&gt;
	&lt;li&gt;`RebalanceSourceConnectorsIntegrationTest.testStartTwoConnectors`&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;   *&lt;b&gt;This should be backported to the `2.3` branch, which is when these integration tests were first added.&lt;/b&gt;*&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16913408" author="rhauch" created="Thu, 22 Aug 2019 15:11:16 +0000"  >&lt;p&gt;I&apos;ve spent quite a bit of time on trying to discover the root cause, with no luck so far. I have been able to reproduce it locally by running  &lt;tt&gt;./gradlew connect:runtime:clean connect:runtime:test --tests org.apache.kafka.connect.integration.RebalanceSourceConnectorsIntegrationTest&lt;/tt&gt; 100 times; the &lt;tt&gt;testReconfigConnector&lt;/tt&gt; test failed 28% of the time and the others failed 0%. This issue and &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8661&quot; title=&quot;Flaky Test RebalanceSourceConnectorsIntegrationTest#testStartTwoConnectors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8661&quot;&gt;&lt;del&gt;KAFKA-8661&lt;/del&gt;&lt;/a&gt; suggest that &lt;tt&gt;testDeleteConnector&lt;/tt&gt; and &lt;tt&gt;testStartTwoConnectors&lt;/tt&gt; are also flaky, though I&apos;ve not seen those tests fail locally.&lt;/p&gt;

&lt;p&gt;Because this flakiness is causing issues for the rest of the project, I&apos;m going to temporarily ignore several of the flaky ITs while I continue to investigate:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;RebalanceSourceConnectorsIntegrationTest.testReconfigConnector&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;RebalanceSourceConnectorsIntegrationTest.testDeleteConnector&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;RebalanceSourceConnectorsIntegrationTest.testStartTwoConnectors&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;See &lt;a href=&quot;https://github.com/apache/kafka/pull/7237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7237&lt;/a&gt;. &lt;b&gt;That PR should not resolve this issue!&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="16915352" author="githubbot" created="Sun, 25 Aug 2019 21:30:34 +0000"  >&lt;p&gt;gwenshap commented on pull request #7237: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8391&quot; title=&quot;Flaky Test RebalanceSourceConnectorsIntegrationTest#testDeleteConnector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8391&quot;&gt;&lt;del&gt;KAFKA-8391&lt;/del&gt;&lt;/a&gt;: Temporarily ignore flaky Connect rebalance integration tests&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7237&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16928628" author="rhauch" created="Thu, 12 Sep 2019 15:12:57 +0000"  >&lt;p&gt;Removed Fix Version 2.2.2 as this issue is not blocking that release.&lt;/p&gt;</comment>
                            <comment id="16932663" author="rhauch" created="Wed, 18 Sep 2019 16:52:53 +0000"  >&lt;p&gt;Uploaded a tar file with the build output of 100 runs of the RebalanceSourceConnectorsIntegrationTest, which failed 14 / 100 times. I haven&apos;t had a chance to find a root cause, though.&lt;/p&gt;</comment>
                            <comment id="17133768" author="kkonstantine" created="Thu, 11 Jun 2020 22:54:04 +0000"  >&lt;p&gt;The tests have been fixed and reenabled with&#160;&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka/pull/8805&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8805&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and have been running dependably since then&#160;&lt;/p&gt;</comment>
                            <comment id="17319799" author="ableegoldman" created="Tue, 13 Apr 2021 01:34:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhauch&quot; class=&quot;user-hover&quot; rel=&quot;rhauch&quot;&gt;rhauch&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkonstantine&quot; class=&quot;user-hover&quot; rel=&quot;kkonstantine&quot;&gt;kkonstantine&lt;/a&gt; this test failed again &amp;#8211; based on the error message it looks like it may be a &quot;real&quot; failure this time, not environmental.&lt;/p&gt;

&lt;p&gt;Stacktrace&lt;br/&gt;
java.lang.AssertionError: Tasks are imbalanced: &lt;br/&gt;
localhost:35163=&lt;span class=&quot;error&quot;&gt;&amp;#91;seq-source11-0, seq-source11-3, seq-source10-1, seq-source12-1&amp;#93;&lt;/span&gt;&lt;br/&gt;
localhost:36961=&lt;span class=&quot;error&quot;&gt;&amp;#91;seq-source11-1, seq-source10-2, seq-source12-2&amp;#93;&lt;/span&gt;&lt;br/&gt;
localhost:39023=&lt;span class=&quot;error&quot;&gt;&amp;#91;seq-source11-2, seq-source10-0, seq-source10-3, seq-source12-0, seq-source12-3&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.junit.Assert.fail(Assert.java:89)&lt;br/&gt;
	at org.junit.Assert.assertTrue(Assert.java:42)&lt;br/&gt;
	at org.apache.kafka.connect.integration.RebalanceSourceConnectorsIntegrationTest.assertConnectorAndTasksAreUniqueAndBalanced(RebalanceSourceConnectorsIntegrationTest.java:365)&lt;br/&gt;
	at org.apache.kafka.test.TestUtils.lambda$waitForCondition$3(TestUtils.java:319)&lt;br/&gt;
	at org.apache.kafka.test.TestUtils.retryOnExceptionWithTimeout(TestUtils.java:367)&lt;br/&gt;
	at org.apache.kafka.test.TestUtils.waitForCondition(TestUtils.java:316)&lt;br/&gt;
	at org.apache.kafka.test.TestUtils.waitForCondition(TestUtils.java:300)&lt;br/&gt;
	at org.apache.kafka.test.TestUtils.waitForCondition(TestUtils.java:290)&lt;br/&gt;
	at org.apache.kafka.connect.integration.RebalanceSourceConnectorsIntegrationTest.testDeleteConnector(RebalanceSourceConnectorsIntegrationTest.java:213)&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://ci-builds.apache.org/job/Kafka/job/kafka-pr/job/PR-10512/5/testReport/org.apache.kafka.connect.integration/RebalanceSourceConnectorsIntegrationTest/Build___JDK_15_and_Scala_2_13___testDeleteConnector/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Kafka/job/kafka-pr/job/PR-10512/5/testReport/org.apache.kafka.connect.integration/RebalanceSourceConnectorsIntegrationTest/Build___JDK_15_and_Scala_2_13___testDeleteConnector/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17494610" author="cadonna" created="Fri, 18 Feb 2022 13:37:48 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError: Tasks are imbalanced: 
localhost:37981=[seq-source11-1, seq-source10-2, seq-source12-0, seq-source12-1, seq-source12-2, seq-source12-3]
localhost:38455=[seq-source10-3]
localhost:41613=[seq-source11-0, seq-source11-2, seq-source11-3, seq-source10-0, seq-source10-1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://ci-builds.apache.org/job/Kafka/job/kafka-pr/job/PR-11752/8/testReport/junit/org.apache.kafka.connect.integration/RebalanceSourceConnectorsIntegrationTest/Build___JDK_11_and_Scala_2_13___testDeleteConnector/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Kafka/job/kafka-pr/job/PR-11752/8/testReport/junit/org.apache.kafka.connect.integration/RebalanceSourceConnectorsIntegrationTest/Build___JDK_11_and_Scala_2_13___testDeleteConnector/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17512275" author="showuon" created="Fri, 25 Mar 2022 09:33:04 +0000"  >&lt;p&gt;This issue might be related (caused by) &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-12495&quot; title=&quot;Unbalanced connectors/tasks distribution will happen in Connect&amp;#39;s incremental cooperative assignor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-12495&quot;&gt;&lt;del&gt;KAFKA-12495&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17746195" author="sagarrao" created="Mon, 24 Jul 2023 04:59:36 +0000"  >&lt;p&gt;Just bumped upon this. The issue mentioned above (&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-12495)was&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-12495)was&lt;/a&gt; fixed last year and this specific test was enabled &lt;a href=&quot;https://github.com/apache/kafka/pull/12561/files#diff-7c0517709aeed38eadffb16dc43b7fc3ba8a7e9b3069f3c5a5c423caf6473470L191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/12561/files#diff-7c0517709aeed38eadffb16dc43b7fc3ba8a7e9b3069f3c5a5c423caf6473470L191&lt;/a&gt;. We haven&apos;t noticed flakiness around this test since then. Closing this one. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17746196" author="sagarrao" created="Mon, 24 Jul 2023 05:00:29 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/kafka/pull/12561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/12561&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13244643">KAFKA-8661</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13366007">KAFKA-12495</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13240234">KAFKA-8555</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13245921">KAFKA-8686</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12980629" name="100-gradle-builds.tar" size="11868672" author="rhauch" created="Wed, 18 Sep 2019 16:51:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02tzc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>