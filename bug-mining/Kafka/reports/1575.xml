<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:02:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5506] bin/kafka-consumer-groups.sh failing to query offsets</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5506</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;When I found that &lt;tt&gt;bin/kafka-consumer-offset-checker.sh&lt;/tt&gt; was deprecated and didn&apos;t work, I checked the docs and ran the following instead (using new consumer, and coordinator vs zookeeper):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;bin/kafka-consumer-groups.sh --&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;-consumer --bootstrap-server localhost:9092 --describe --group test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I kept getting a NullPointerException though (line numbers are a bit off because of debug code):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NullPointerException
        at org.apache.kafka.common.utils.Utils.join(Utils.java:399)
        at org.apache.kafka.common.requests.OffsetFetchRequest$Builder.toString(OffsetFetchRequest.java:77)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.valueOf(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.java:2994)
        at java.lang.StringBuilder.append(StringBuilder.java:131)
        at org.apache.kafka.clients.ClientRequest.toString(ClientRequest.java:65)
        at org.apache.kafka.clients.NetworkClient.doSend(NetworkClient.java:375)
        at org.apache.kafka.clients.NetworkClient.send(NetworkClient.java:332)
        at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.trySend(ConsumerNetworkClient.java:409)
        at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:252)
        at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:208)
        at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:199)
        at kafka.admin.AdminClient$$anon$1.run(AdminClient.scala:61)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Error: Executing consumer group command failed due to The server experienced an unexpected error when processing the request
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I tracked this down to the following. The request builder that is instantiated &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/admin/AdminClient.scala#L198&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; has its &lt;tt&gt;partitions&lt;/tt&gt; set to &lt;tt&gt;ALL_TOPIC_PARTITIONS&lt;/tt&gt; which is null (v2 or newer to request all topic partitions). Later, &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/NetworkClient.java#L375&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;when sending the request&lt;/a&gt;, it&apos;s converted to a string. But &lt;tt&gt;partitions&lt;/tt&gt; above can only be null when built that way, so &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/requests/OffsetFetchRequest.java#L76&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this&lt;/a&gt; throws the exception.&lt;/p&gt;

&lt;p&gt;I&apos;m quite new to Kafka, so I&apos;m still not entirely sure if I&apos;m doing something wrong or if this is indeed a bug. As such, any pointers or advice would be much appreciated.&lt;/p&gt;</description>
                <environment>Linux slfd06 4.4.0-78-generic #99~14.04.2-Ubuntu SMP Thu Apr 27 18:49:46 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</environment>
        <key id="13082079">KAFKA-5506</key>
            <summary>bin/kafka-consumer-groups.sh failing to query offsets</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ijuma">Ismael Juma</assignee>
                                    <reporter username="amar_">Yousef Amar</reporter>
                        <labels>
                            <label>features</label>
                            <label>newbie</label>
                    </labels>
                <created>Fri, 23 Jun 2017 09:33:49 +0000</created>
                <updated>Fri, 25 Aug 2017 10:28:06 +0000</updated>
                            <resolved>Sat, 24 Jun 2017 07:22:03 +0000</resolved>
                                                    <fixVersion>0.11.0.1</fixVersion>
                    <fixVersion>1.0.0</fixVersion>
                                    <component>consumer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16060646" author="ppatierno" created="Fri, 23 Jun 2017 09:47:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amar_&quot; class=&quot;user-hover&quot; rel=&quot;amar_&quot;&gt;amar_&lt;/a&gt; which Kafka version are you using ? I can&apos;t reproduce the problem on the trunk.&lt;/p&gt;</comment>
                            <comment id="16060694" author="amar_" created="Fri, 23 Jun 2017 10:19:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ppatierno&quot; class=&quot;user-hover&quot; rel=&quot;ppatierno&quot;&gt;ppatierno&lt;/a&gt; I tried to recreate this on a fresh instance with the latest version of Kafka, and I no longer get the error. I think the reason may have been a mismatch between versions for my client (0.10.2) and one or more of our servers which may have been still 0.10.1. If I confirm that that&apos;s the reason, I&apos;ll close this issue. Thanks for the hint!&lt;/p&gt;</comment>
                            <comment id="16060805" author="githubbot" created="Fri, 23 Jun 2017 12:21:51 +0000"  >&lt;p&gt;GitHub user ijuma opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3420&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5506&quot; title=&quot;bin/kafka-consumer-groups.sh failing to query offsets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5506&quot;&gt;&lt;del&gt;KAFKA-5506&lt;/del&gt;&lt;/a&gt;: Fix NPE in OffsetFetchRequest.toString&lt;/p&gt;

&lt;p&gt;    Also avoid eager toString call in parameter passed to log.debug.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ijuma/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ijuma/kafka&lt;/a&gt; kafka-5506-offset-fetch-request-to-string-npe&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3420.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3420.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3420&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 89343195d62227af42d535a11da97d4b497ed05f&lt;br/&gt;
Author: Ismael Juma &amp;lt;ismael@juma.me.uk&amp;gt;&lt;br/&gt;
Date:   2017-06-23T12:18:54Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5506&quot; title=&quot;bin/kafka-consumer-groups.sh failing to query offsets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5506&quot;&gt;&lt;del&gt;KAFKA-5506&lt;/del&gt;&lt;/a&gt;: Fix NPE in OffsetFetchRequest.toString&lt;/p&gt;

&lt;p&gt;commit b3a17f57510215bb22acede4e17430a2465e702f&lt;br/&gt;
Author: Ismael Juma &amp;lt;ismael@juma.me.uk&amp;gt;&lt;br/&gt;
Date:   2017-06-23T12:20:42Z&lt;/p&gt;

&lt;p&gt;    Pass parameter to log.debug without calling toString&lt;/p&gt;

&lt;p&gt;    This way we don&apos;t pay the cost unnecessarily&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16060806" author="ijuma" created="Fri, 23 Jun 2017 12:22:44 +0000"  >&lt;p&gt;Nice catch, there are 2 bugs here. See the PR for the details.&lt;/p&gt;</comment>
                            <comment id="16061838" author="ijuma" created="Sat, 24 Jun 2017 07:22:03 +0000"  >&lt;p&gt;Issue resolved by pull request 3420&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/3420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3420&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16061839" author="githubbot" created="Sat, 24 Jun 2017 07:22:38 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3420&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16141462" author="gnuhpc" created="Fri, 25 Aug 2017 10:28:06 +0000"  >&lt;p&gt;My senario is I used  Kafka 0.11.0 client to connect to the 0.10.0.1 cluster and tried to fetch the offset of one consumer. NPE was hit then.&lt;/p&gt;

&lt;p&gt; 0.11.0 client -&amp;gt; 0.11.0 cluster has no problem.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gnpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>