<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:52:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-2478] KafkaConsumer javadoc example seems wrong</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-2478</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;I was looking at this KafkaConsumer example in the javadoc:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/consumer/KafkaConsumer.java#L199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/consumer/KafkaConsumer.java#L199&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As I understand, commit() method commits the maximum offsets returned by the most recent invocation of poll() method.&lt;/p&gt;

&lt;p&gt;In this example, there&apos;s a danger of losing the data.&lt;br/&gt;
Imagine the case where 300 records are returned by consumer.poll()&lt;br/&gt;
The commit will happen after inserting 200 records into the database.&lt;br/&gt;
But it will also commit the offsets for 100 records that are still unprocessed.&lt;/p&gt;

&lt;p&gt;So if consumer fails before buffer is dumped into the database again,&lt;br/&gt;
then those 100 records will never be processed.&lt;/p&gt;

&lt;p&gt;If I&apos;m wrong, could you please clarify the behaviour of commit() method?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12858993">KAFKA-2478</key>
            <summary>KafkaConsumer javadoc example seems wrong</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="devstr">Dmitry Stratiychuk</assignee>
                                    <reporter username="devstr">Dmitry Stratiychuk</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Aug 2015 14:24:06 +0000</created>
                <updated>Tue, 26 Jan 2016 19:05:21 +0000</updated>
                            <resolved>Tue, 26 Jan 2016 19:05:21 +0000</resolved>
                                    <version>0.9.0.0</version>
                                    <fixVersion>0.9.0.1</fixVersion>
                                    <component>consumer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14714505" author="hachikuji" created="Wed, 26 Aug 2015 16:47:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devstr&quot; class=&quot;user-hover&quot; rel=&quot;devstr&quot;&gt;devstr&lt;/a&gt; I agree that the example seems incorrect. Probably we should only be committing the max offset stored in the buffer.&lt;/p&gt;</comment>
                            <comment id="14715362" author="devstr" created="Wed, 26 Aug 2015 19:15:19 +0000"  >&lt;p&gt;Or flush the buffer and commit at the end of processing all records. &lt;br/&gt;
Is there a way to control how many records are returned by the poll() method?&lt;/p&gt;</comment>
                            <comment id="14715459" author="hachikuji" created="Wed, 26 Aug 2015 20:30:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devstr&quot; class=&quot;user-hover&quot; rel=&quot;devstr&quot;&gt;devstr&lt;/a&gt; Not that I&apos;m aware of. You can control the maximum fetch size in configuration, but that only affects individual fetches and poll() can send out many of these. Do you want to submit a patch for this?&lt;/p&gt;</comment>
                            <comment id="14716378" author="devstr" created="Thu, 27 Aug 2015 09:39:40 +0000"  >&lt;p&gt;Can certainly do for the javadoc example.&lt;br/&gt;
Need to look into what I can do to limit the size of results returned by `poll`.&lt;/p&gt;

&lt;p&gt;In terms of patch format, will PR in Github be OK?&lt;/p&gt;</comment>
                            <comment id="14716428" author="ijuma" created="Thu, 27 Aug 2015 10:19:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devstr&quot; class=&quot;user-hover&quot; rel=&quot;devstr&quot;&gt;devstr&lt;/a&gt;, yes, you can submit a PR. Instructions can be found here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/Contributing+Code+Changes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/Contributing+Code+Changes&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14742701" author="githubbot" created="Sun, 13 Sep 2015 22:20:16 +0000"  >&lt;p&gt;GitHub user shtratos opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/210&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2478&quot; title=&quot;KafkaConsumer javadoc example seems wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2478&quot;&gt;&lt;del&gt;KAFKA-2478&lt;/del&gt;&lt;/a&gt;: Fix manual committing example in javadoc&lt;/p&gt;

&lt;p&gt;    Committing before inserting all records into the database&lt;br/&gt;
    might lead to some records being lost.&lt;/p&gt;

&lt;p&gt;    I&apos;ve changed the example to commit only after all records &lt;br/&gt;
    returned by `poll` are inserted into the database.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/shtratos/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/shtratos/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2478&quot; title=&quot;KafkaConsumer javadoc example seems wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2478&quot;&gt;&lt;del&gt;KAFKA-2478&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/210.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/210.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #210&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7d1104e8313da3aabb291e9d90a55b07c35f7419&lt;br/&gt;
Author: Dmitry Stratiychuk &amp;lt;dstratiychuk@yammer-inc.com&amp;gt;&lt;br/&gt;
Date:   2015-09-13T21:51:20Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2478&quot; title=&quot;KafkaConsumer javadoc example seems wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2478&quot;&gt;&lt;del&gt;KAFKA-2478&lt;/del&gt;&lt;/a&gt;: Fix manual committing example in javadoc&lt;/p&gt;

&lt;p&gt;    Committing before inserting all records into the database&lt;br/&gt;
    might lead to some records being lost.&lt;/p&gt;

&lt;p&gt;commit fd74eb8e497cc87b1bb7f2c53a466b2e5fe8a6fa&lt;br/&gt;
Author: Dmitry Stratiychuk &amp;lt;dstratiychuk@yammer-inc.com&amp;gt;&lt;br/&gt;
Date:   2015-09-13T21:54:32Z&lt;/p&gt;

&lt;p&gt;    TRIVIAL: use diamond operator &amp;lt;&amp;gt; where possible&lt;/p&gt;

&lt;p&gt;commit 454098a50abb24e35f93683638530253eb9ae801&lt;br/&gt;
Author: Dmitry Stratiychuk &amp;lt;dstratiychuk@yammer-inc.com&amp;gt;&lt;br/&gt;
Date:   2015-09-13T22:02:22Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2478&quot; title=&quot;KafkaConsumer javadoc example seems wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2478&quot;&gt;&lt;del&gt;KAFKA-2478&lt;/del&gt;&lt;/a&gt;: Fix invocations of `subscribe` in javadoc examples&lt;/p&gt;

&lt;p&gt;    `subscribe` method now accepts list of topic names.&lt;/p&gt;

&lt;p&gt;commit 20f3c40185e8d4bc8010d69f1801384846a7942f&lt;br/&gt;
Author: Dmitry Stratiychuk &amp;lt;dstratiychuk@yammer-inc.com&amp;gt;&lt;br/&gt;
Date:   2015-09-13T22:13:47Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2478&quot; title=&quot;KafkaConsumer javadoc example seems wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2478&quot;&gt;&lt;del&gt;KAFKA-2478&lt;/del&gt;&lt;/a&gt;: Fix invocations of `assign` in javadoc examples&lt;/p&gt;

&lt;p&gt;    `assign` method now accepts a list of `TopicPartition`s.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14742718" author="githubbot" created="Sun, 13 Sep 2015 23:17:29 +0000"  >&lt;p&gt;Github user shtratos closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/210&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14742720" author="githubbot" created="Sun, 13 Sep 2015 23:17:32 +0000"  >&lt;p&gt;GitHub user shtratos reopened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/210&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2478&quot; title=&quot;KafkaConsumer javadoc example seems wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2478&quot;&gt;&lt;del&gt;KAFKA-2478&lt;/del&gt;&lt;/a&gt;: Fix manual committing example in javadoc&lt;/p&gt;

&lt;p&gt;    Committing before inserting all records into the database&lt;br/&gt;
    might lead to some records being lost.&lt;/p&gt;

&lt;p&gt;    I&apos;ve changed the example to commit only after all records &lt;br/&gt;
    returned by `poll` are inserted into the database.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/shtratos/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/shtratos/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2478&quot; title=&quot;KafkaConsumer javadoc example seems wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2478&quot;&gt;&lt;del&gt;KAFKA-2478&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/210.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/210.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #210&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7d1104e8313da3aabb291e9d90a55b07c35f7419&lt;br/&gt;
Author: Dmitry Stratiychuk &amp;lt;dstratiychuk@yammer-inc.com&amp;gt;&lt;br/&gt;
Date:   2015-09-13T21:51:20Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2478&quot; title=&quot;KafkaConsumer javadoc example seems wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2478&quot;&gt;&lt;del&gt;KAFKA-2478&lt;/del&gt;&lt;/a&gt;: Fix manual committing example in javadoc&lt;/p&gt;

&lt;p&gt;    Committing before inserting all records into the database&lt;br/&gt;
    might lead to some records being lost.&lt;/p&gt;

&lt;p&gt;commit fd74eb8e497cc87b1bb7f2c53a466b2e5fe8a6fa&lt;br/&gt;
Author: Dmitry Stratiychuk &amp;lt;dstratiychuk@yammer-inc.com&amp;gt;&lt;br/&gt;
Date:   2015-09-13T21:54:32Z&lt;/p&gt;

&lt;p&gt;    TRIVIAL: use diamond operator &amp;lt;&amp;gt; where possible&lt;/p&gt;

&lt;p&gt;commit 454098a50abb24e35f93683638530253eb9ae801&lt;br/&gt;
Author: Dmitry Stratiychuk &amp;lt;dstratiychuk@yammer-inc.com&amp;gt;&lt;br/&gt;
Date:   2015-09-13T22:02:22Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2478&quot; title=&quot;KafkaConsumer javadoc example seems wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2478&quot;&gt;&lt;del&gt;KAFKA-2478&lt;/del&gt;&lt;/a&gt;: Fix invocations of `subscribe` in javadoc examples&lt;/p&gt;

&lt;p&gt;    `subscribe` method now accepts list of topic names.&lt;/p&gt;

&lt;p&gt;commit 20f3c40185e8d4bc8010d69f1801384846a7942f&lt;br/&gt;
Author: Dmitry Stratiychuk &amp;lt;dstratiychuk@yammer-inc.com&amp;gt;&lt;br/&gt;
Date:   2015-09-13T22:13:47Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2478&quot; title=&quot;KafkaConsumer javadoc example seems wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2478&quot;&gt;&lt;del&gt;KAFKA-2478&lt;/del&gt;&lt;/a&gt;: Fix invocations of `assign` in javadoc examples&lt;/p&gt;

&lt;p&gt;    `assign` method now accepts a list of `TopicPartition`s.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14875674" author="devstr" created="Fri, 18 Sep 2015 14:20:18 +0000"  >&lt;p&gt;Here&apos;s a PR &lt;a href=&quot;https://github.com/apache/kafka/pull/210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/210&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15117762" author="githubbot" created="Tue, 26 Jan 2016 19:05:20 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/210&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15117763" author="guozhang" created="Tue, 26 Jan 2016 19:05:21 +0000"  >&lt;p&gt;Issue resolved by pull request 210&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/210&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jejr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>