<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:59:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4631] Refresh consumer metadata more frequently for unknown subscribed topics</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4631</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;By default, the consumer refreshes metadata every 5 minutes. In testing, it can often happen that a topic is created at about the same time that the consumer is started. In the worst case, creation finishes after the consumer fetches metadata, and the test must wait 5 minutes for the consumer to refresh metadata in order to discover the topic. To address this problem, users can decrease the metadata refresh interval, but this means more frequent refreshes even after all topics are known. An improvement would be to internally let the consumer fetch metadata more frequently when the consumer encounters unknown topics. Perhaps every 5-10 seconds would be reasonable, for example.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13034841">KAFKA-4631</key>
            <summary>Refresh consumer metadata more frequently for unknown subscribed topics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsivaram">Rajini Sivaram</assignee>
                                    <reporter username="hachikuji">Jason Gustafson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jan 2017 22:36:29 +0000</created>
                <updated>Fri, 17 Mar 2017 04:44:27 +0000</updated>
                            <resolved>Fri, 3 Mar 2017 01:55:15 +0000</resolved>
                                                    <fixVersion>0.10.2.1</fixVersion>
                    <fixVersion>0.11.0.0</fixVersion>
                                    <component>consumer</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="15823429" author="ewencp" created="Mon, 16 Jan 2017 04:02:17 +0000"  >&lt;p&gt;Would this be a constant timeout or yet another config? And especially if the former, tied to a fixed # of retries? Or maybe retries up until the first &quot;normal&quot; metadata refresh?&lt;/p&gt;

&lt;p&gt;I kind of like this idea, but also feel like it&apos;s just sort of papering over bigger underlying issues (i.e. the fact that you can&apos;t know when topic creation metadata updates are actually complete). Those could be limitations we simply want to accept (validating the entire cluster has updated metadata might be expensive) or something we want to address in a better way (e.g. ensure that if a metadata request shows a partition isn&apos;t known, immediately do a retry but make sure it goes to the controller).&lt;/p&gt;</comment>
                            <comment id="15829053" author="mjsax" created="Thu, 19 Jan 2017 00:32:54 +0000"  >&lt;p&gt;I don&apos;t think we want to add a new config. I like the idea to stop &quot;fast refreshing&quot; when first &quot;normal&quot; refresh is done. \cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15829268" author="guozhang" created="Thu, 19 Jan 2017 03:53:35 +0000"  >&lt;p&gt;I think we do not need a new config for this, hard-coded values like 100ms looks good to me.&lt;/p&gt;</comment>
                            <comment id="15837964" author="ijuma" created="Wed, 25 Jan 2017 15:57:44 +0000"  >&lt;p&gt;Are we still aiming to have this done by this Friday (code freeze)? Or should we update the fix version?&lt;/p&gt;</comment>
                            <comment id="15838184" author="hachikuji" created="Wed, 25 Jan 2017 17:25:21 +0000"  >&lt;p&gt;Perhaps it is not critical since we got &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4633&quot; title=&quot;Always use regex pattern subscription to avoid auto create topics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4633&quot;&gt;&lt;del&gt;KAFKA-4633&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15838408" author="mjsax" created="Wed, 25 Jan 2017 19:25:13 +0000"  >&lt;p&gt;Yes. &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4633&quot; title=&quot;Always use regex pattern subscription to avoid auto create topics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4633&quot;&gt;&lt;del&gt;KAFKA-4633&lt;/del&gt;&lt;/a&gt; did fix the critical problem. This is just a low-priority improvement now. Not going to make it for &lt;tt&gt;0.10.2.0&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15890223" author="githubbot" created="Wed, 1 Mar 2017 14:05:35 +0000"  >&lt;p&gt;GitHub user rajinisivaram opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2622&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4631&quot; title=&quot;Refresh consumer metadata more frequently for unknown subscribed topics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4631&quot;&gt;&lt;del&gt;KAFKA-4631&lt;/del&gt;&lt;/a&gt;: Request metadata in consumer if topic/partitions unavailable&lt;/p&gt;

&lt;p&gt;    If leader node of one more more partitions in a consumer subscription are temporarily unavailable, request metadata refresh so that partitions skipped for assignment dont have to wait for metadata expiry before reassignment. Metadata refresh is also requested if a subscribe topic or assigned partition doesn&apos;t exist.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rajinisivaram/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rajinisivaram/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4631&quot; title=&quot;Refresh consumer metadata more frequently for unknown subscribed topics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4631&quot;&gt;&lt;del&gt;KAFKA-4631&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2622.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2622.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2622&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 406427953b2789e5a717136bac6b0b3ada5eb9eb&lt;br/&gt;
Author: Rajini Sivaram &amp;lt;rajinisivaram@googlemail.com&amp;gt;&lt;br/&gt;
Date:   2017-02-28T12:09:44Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4631&quot; title=&quot;Refresh consumer metadata more frequently for unknown subscribed topics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4631&quot;&gt;&lt;del&gt;KAFKA-4631&lt;/del&gt;&lt;/a&gt;: Request metadata in consumer if topic/partitions unavailable&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15890234" author="rsivaram" created="Wed, 1 Mar 2017 14:11:20 +0000"  >&lt;p&gt;The attached PR solves the issue in the second failure in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4779&quot; title=&quot;Failure in kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4779&quot;&gt;&lt;del&gt;KAFKA-4779&lt;/del&gt;&lt;/a&gt;. The system test failure was due to unavailable topics where leader is not known rather than nonexistent topics. The PR requests metadata refresh for both unavailable and non-existent topics (See &lt;a href=&quot;https://github.com/apache/kafka/pull/2608&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2608&lt;/a&gt; for details).&lt;/p&gt;</comment>
                            <comment id="15893564" author="hachikuji" created="Fri, 3 Mar 2017 01:55:15 +0000"  >&lt;p&gt;Issue resolved by pull request 2622&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2622&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15893567" author="githubbot" created="Fri, 3 Mar 2017 01:55:41 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2622&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15928978" author="hachikuji" created="Thu, 16 Mar 2017 21:54:35 +0000"  >&lt;p&gt;Note: I&apos;m merging this into 0.10.2 as well since it fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4779&quot; title=&quot;Failure in kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4779&quot;&gt;&lt;del&gt;KAFKA-4779&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15929414" author="jaikiran" created="Fri, 17 Mar 2017 04:44:27 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt;, am glad this made it to 0.10.x since that allows to get to this fix sooner&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38p53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>