<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:42:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-18905] Avoid out of order sequence errors from multiple in-flight batches</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-18905</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Consider a similar setup to &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9199&quot; title=&quot;Improve handling of out of sequence errors lower than last acked sequence&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9199&quot;&gt;KAFKA-9199&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;The broker attempts to cache the state of the last 5 batches in order to enable duplicate detection. It is possible in some cases for this to result in a sequence such as the following:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Send batch n&lt;/li&gt;
	&lt;li&gt;Batch n successfully written, but response is delayed&lt;/li&gt;
	&lt;li&gt;Send batch n+1, receive successful response for n+1&lt;/li&gt;
	&lt;li&gt;Send batch n+2, receive successful response for n+2&lt;/li&gt;
	&lt;li&gt;Send batch n+3, receive successful response for n+3&lt;/li&gt;
	&lt;li&gt;Send batch n+4, receive successful response for n+4&lt;/li&gt;
	&lt;li&gt;Send batch n+5, receive successful response for n+5&lt;/li&gt;
	&lt;li&gt;Batch n times out, or we receive a &lt;tt&gt;NOT_LEADER_OR_FOLLOWER&lt;/tt&gt; response&lt;/li&gt;
	&lt;li&gt;Retry batch n, the response is &lt;tt&gt;OUT_OF_ORDER_SEQUENCE&lt;/tt&gt;, retry again and again&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;This situation could happen with a &lt;tt&gt;max.in.flight.requests.per.connection&lt;/tt&gt; as low as 2.&lt;/p&gt;

&lt;p&gt;To avoid this situation, we can avoid putting batch n+5 in flight while batch n is in flight when idempotency is enabled.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13610196">KAFKA-18905</key>
            <summary>Avoid out of order sequence errors from multiple in-flight batches</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="squah-confluent">Sean Quah</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Feb 2025 18:26:34 +0000</created>
                <updated>Tue, 27 May 2025 18:30:35 +0000</updated>
                                                                            <component>clients</component>
                    <component>producer </component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17951043" author="jsancio" created="Mon, 12 May 2025 19:42:45 +0000"  >&lt;p&gt;When fixing the issue please revert this commit to trunk: &lt;a href=&quot;https://github.com/apache/kafka/commit/13fa4537f53f2524ccf1fd7e79d4d4184e093cc1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;13fa453&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17954391" author="bbejeck" created="Tue, 27 May 2025 18:30:35 +0000"  >&lt;p&gt;The associated PR was to disable affected system tests, the work for this bug is still outstanding.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13268895">KAFKA-9199</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ui94:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>