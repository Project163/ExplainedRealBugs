<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:16:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-7759] Disable WADL output in Connect REST API</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-7759</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Currently,&#160;Connect REST API&#160;exposes WADL output on OPTIONS method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
curl -i -X OPTIONS http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8083/connectors
&lt;/span&gt;HTTP/1.1 200 OK
Date: Fri, 07 Dec 2018 22:51:53 GMT
Content-Type: application/vnd.sun.wadl+xml
Allow: HEAD,POST,GET,OPTIONS
Last-Modified: Fri, 07 Dec 2018 14:51:53 PST
Content-Length: 1331
Server: Jetty(9.4.12.v20180830)

&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt; standalone=&lt;span class=&quot;code-quote&quot;&gt;&quot;yes&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;application xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//wadl.dev.java.net/2009/02&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&amp;lt;doc xmlns:jersey=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//jersey.java.net/&quot;&lt;/span&gt; jersey:generatedBy=&lt;span class=&quot;code-quote&quot;&gt;&quot;Jersey: 2.27 2018-04-10 07:34:57&quot;&lt;/span&gt;/&amp;gt;
&lt;/span&gt;&amp;lt;grammars&amp;gt;
&amp;lt;include href=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8083/application.wadl/xsd0.xsd&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&amp;lt;doc title=&lt;span class=&quot;code-quote&quot;&gt;&quot;Generated&quot;&lt;/span&gt; xml:lang=&lt;span class=&quot;code-quote&quot;&gt;&quot;en&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/include&amp;gt;
&amp;lt;/grammars&amp;gt;
&amp;lt;resources base=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8083/&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&amp;lt;resource path=&lt;span class=&quot;code-quote&quot;&gt;&quot;connectors&quot;&lt;/span&gt;&amp;gt;
&amp;lt;method id=&lt;span class=&quot;code-quote&quot;&gt;&quot;createConnector&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;POST&quot;&lt;/span&gt;&amp;gt;
&amp;lt;request&amp;gt;
&amp;lt;param xmlns:xs=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/2001/XMLSchema&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;forward&quot;&lt;/span&gt; style=&lt;span class=&quot;code-quote&quot;&gt;&quot;query&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;xs:&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;
&lt;/span&gt;&amp;lt;representation mediaType=&lt;span class=&quot;code-quote&quot;&gt;&quot;application/json&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/request&amp;gt;
&amp;lt;response&amp;gt;
&amp;lt;representation mediaType=&lt;span class=&quot;code-quote&quot;&gt;&quot;application/json&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/response&amp;gt;
&amp;lt;/method&amp;gt;
&amp;lt;method id=&lt;span class=&quot;code-quote&quot;&gt;&quot;listConnectors&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;GET&quot;&lt;/span&gt;&amp;gt;
&amp;lt;request&amp;gt;
&amp;lt;param xmlns:xs=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/2001/XMLSchema&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;forward&quot;&lt;/span&gt; style=&lt;span class=&quot;code-quote&quot;&gt;&quot;query&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;xs:&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;
&lt;/span&gt;&amp;lt;/request&amp;gt;
&amp;lt;response&amp;gt;
&amp;lt;representation mediaType=&lt;span class=&quot;code-quote&quot;&gt;&quot;application/json&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/response&amp;gt;
&amp;lt;/method&amp;gt;
&amp;lt;/resource&amp;gt;
&amp;lt;/resources&amp;gt;
&amp;lt;/application&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It was never documented, so in order to remove unintended behavior, WADL output should be disabled.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13205589">KAFKA-7759</key>
            <summary>Disable WADL output in Connect REST API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="odiachenko">Oleksandr Diachenko</assignee>
                                    <reporter username="odiachenko">Oleksandr Diachenko</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Dec 2018 23:13:50 +0000</created>
                <updated>Thu, 20 Dec 2018 22:29:59 +0000</updated>
                            <resolved>Thu, 20 Dec 2018 22:29:44 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.0.2</fixVersion>
                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16725447" author="githubbot" created="Wed, 19 Dec 2018 23:52:01 +0000"  >&lt;p&gt;avocader opened a new pull request #6051: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7759&quot; title=&quot;Disable WADL output in Connect REST API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7759&quot;&gt;&lt;del&gt;KAFKA-7759&lt;/del&gt;&lt;/a&gt;: Disable WADL output on OPTIONS method in Connect REST.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6051&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6051&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Currently, Connect REST endpoint replies to OPTIONS request with verbose WADL information, which could be used for an attack. This was never documented or intended to expose. More discussion is &lt;span class=&quot;error&quot;&gt;&amp;#91;here&amp;#93;&lt;/span&gt; &lt;br/&gt;
   (&lt;a href=&quot;https://lists.apache.org/thread.html/84eb4538397ae4544d20c072c936d9a31f22f429a0891cbb7d8e2296@%3Cdev.kafka.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/84eb4538397ae4544d20c072c936d9a31f22f429a0891cbb7d8e2296@%3Cdev.kafka.apache.org%3E&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;   Added unit tests in RestServerTest, which asserts that calling `OPTIONS` on `/connectors` replies with a list of supported HTTP methods, with no WADL information.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16726271" author="githubbot" created="Thu, 20 Dec 2018 22:24:08 +0000"  >&lt;p&gt;hachikuji closed pull request #6051: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7759&quot; title=&quot;Disable WADL output in Connect REST API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7759&quot;&gt;&lt;del&gt;KAFKA-7759&lt;/del&gt;&lt;/a&gt;: Disable WADL output on OPTIONS method in Connect REST.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6051&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6051&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/rest/RestServer.java b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/rest/RestServer.java&lt;br/&gt;
index 15386430bc5..c0d83f29103 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/rest/RestServer.java&lt;br/&gt;
+++ b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/rest/RestServer.java&lt;br/&gt;
@@ -45,6 +45,7 @@&lt;br/&gt;
 import org.eclipse.jetty.servlets.CrossOriginFilter;&lt;br/&gt;
 import org.eclipse.jetty.util.ssl.SslContextFactory;&lt;br/&gt;
 import org.glassfish.jersey.server.ResourceConfig;&lt;br/&gt;
+import org.glassfish.jersey.server.ServerProperties;&lt;br/&gt;
 import org.glassfish.jersey.servlet.ServletContainer;&lt;br/&gt;
 import org.slf4j.Logger;&lt;br/&gt;
 import org.slf4j.LoggerFactory;&lt;br/&gt;
@@ -171,6 +172,7 @@ public void start(Herder herder) {&lt;br/&gt;
         resourceConfig.register(new ConnectorPluginsResource(herder));&lt;/p&gt;

&lt;p&gt;         resourceConfig.register(ConnectExceptionMapper.class);&lt;br/&gt;
+        resourceConfig.property(ServerProperties.WADL_FEATURE_DISABLE, true);&lt;/p&gt;

&lt;p&gt;         registerRestExtensions(herder, resourceConfig);&lt;/p&gt;

&lt;p&gt;diff --git a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/rest/RestServerTest.java b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/rest/RestServerTest.java&lt;br/&gt;
index c66ce36d8b0..a0fb685aff1 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/rest/RestServerTest.java&lt;br/&gt;
+++ b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/rest/RestServerTest.java&lt;br/&gt;
@@ -25,7 +25,6 @@&lt;br/&gt;
 import org.apache.kafka.connect.util.Callback;&lt;br/&gt;
 import org.easymock.Capture;&lt;br/&gt;
 import org.easymock.EasyMock;&lt;br/&gt;
-import org.easymock.IAnswer;&lt;br/&gt;
 import org.junit.After;&lt;br/&gt;
 import org.junit.Assert;&lt;br/&gt;
 import org.junit.Test;&lt;br/&gt;
@@ -41,11 +40,11 @@&lt;br/&gt;
 import java.util.Collections;&lt;br/&gt;
 import java.util.HashMap;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
-&lt;br/&gt;
 import javax.ws.rs.client.Client;&lt;br/&gt;
 import javax.ws.rs.client.ClientBuilder;&lt;br/&gt;
 import javax.ws.rs.client.Invocation;&lt;br/&gt;
 import javax.ws.rs.client.WebTarget;&lt;br/&gt;
+import javax.ws.rs.core.MediaType;&lt;br/&gt;
 import javax.ws.rs.core.Response;&lt;/p&gt;

&lt;p&gt; import static org.junit.Assert.assertEquals;&lt;br/&gt;
@@ -158,6 +157,33 @@ public void testAdvertisedUri() &lt;/p&gt;
{
         Assert.assertEquals(&quot;http://my-hostname:8080/&quot;, server.advertisedUrl().toString());
     }

&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testOptionsDoesNotIncludeWadlOutput() &lt;/p&gt;
{
+        Map&amp;lt;String, String&amp;gt; configMap = new HashMap&amp;lt;&amp;gt;(baseWorkerProps());
+        DistributedConfig workerConfig = new DistributedConfig(configMap);
+
+        EasyMock.expect(herder.plugins()).andStubReturn(plugins);
+        EasyMock.expect(plugins.newPlugins(Collections.emptyList(),
+            workerConfig,
+            ConnectRestExtension.class))
+            .andStubReturn(Collections.emptyList());
+        PowerMock.replayAll();
+
+        server = new RestServer(workerConfig);
+        server.start(herder);
+
+        Response response = request(&quot;/connectors&quot;)
+            .accept(MediaType.WILDCARD)
+            .options();
+        Assert.assertEquals(MediaType.TEXT_PLAIN_TYPE, response.getMediaType());
+        Assert.assertArrayEquals(
+            response.getAllowedMethods().toArray(new String[0]),
+            response.readEntity(String.class).split(&quot;, &quot;)
+        );
+
+        PowerMock.verifyAll();
+    }
&lt;p&gt;+&lt;br/&gt;
     public void checkCORSRequest(String corsDomain, String origin, String expectedHeader, String method) {&lt;br/&gt;
         // To be able to set the Origin, we need to toggle this flag&lt;/p&gt;

&lt;p&gt;@@ -175,12 +201,9 @@ public void checkCORSRequest(String corsDomain, String origin, String expectedHe&lt;/p&gt;

&lt;p&gt;         final Capture&amp;lt;Callback&amp;lt;Collection&amp;lt;String&amp;gt;&amp;gt;&amp;gt; connectorsCallback = EasyMock.newCapture();&lt;br/&gt;
         herder.connectors(EasyMock.capture(connectorsCallback));&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;PowerMock.expectLastCall().andAnswer(new IAnswer&amp;lt;Object&amp;gt;() {&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public Object answer() throws Throwable 
{
-                connectorsCallback.getValue().onCompletion(null, Arrays.asList(&quot;a&quot;, &quot;b&quot;));
-                return null;
-            }
&lt;p&gt;+        PowerMock.expectLastCall().andAnswer(() -&amp;gt; &lt;/p&gt;
{
+            connectorsCallback.getValue().onCompletion(null, Arrays.asList(&quot;a&quot;, &quot;b&quot;));
+            return null;
         }
&lt;p&gt;);&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         PowerMock.replayAll();&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u00628:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>