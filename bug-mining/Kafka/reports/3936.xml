<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:40:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-17581] AsyncKafkaConsumer can&apos;t unsubscribe invalid topics</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-17581</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;When consumer subscribes an invalid topic name like &quot; this is test&quot;, classic consumer can unsubscribe without error. However, async consumer can&apos;t. We can use following integration test to validate:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@ParameterizedTest(name = TestInfoUtils.TestWithParameterizedQuorumAndGroupProtocolNames)
@MethodSource(Array(&lt;span class=&quot;code-quote&quot;&gt;&quot;getTestQuorumAndGroupProtocolParametersAll&quot;&lt;/span&gt;))
def testSubscribeInvalidTopic(quorum: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, groupProtocol: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;): Unit = {
  &lt;span class=&quot;code-comment&quot;&gt;// Invalid topic name due to space
&lt;/span&gt;  val invalidTopicName = &lt;span class=&quot;code-quote&quot;&gt;&quot;topic abc&quot;&lt;/span&gt;
  val consumer = createConsumer()

  consumer.subscribe(List(invalidTopicName).asJava)

  &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; exception : InvalidTopicException = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  TestUtils.waitUntilTrue(() =&amp;gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; consumer.poll(Duration.ofMillis(500)) &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; e : InvalidTopicException =&amp;gt; exception = e
      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; e : Throwable =&amp;gt; fail(s&lt;span class=&quot;code-quote&quot;&gt;&quot;An InvalidTopicException should be thrown. But ${e.getClass} is thrown&quot;&lt;/span&gt;)
    }
    exception != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  }, waitTimeMs = 5000, msg = &lt;span class=&quot;code-quote&quot;&gt;&quot;An InvalidTopicException should be thrown.&quot;&lt;/span&gt;)

  assertEquals(s&lt;span class=&quot;code-quote&quot;&gt;&quot;Invalid topics: [${invalidTopicName}]&quot;&lt;/span&gt;, exception.getMessage)
  &lt;span class=&quot;code-comment&quot;&gt;// AsyncKafkaConsumer sends request in background thread. Wait enough time to send next request.
&lt;/span&gt;  &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000)
  assertDoesNotThrow(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Executable {
    override def execute(): Unit = consumer.unsubscribe()
  })
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13592615">KAFKA-17581</key>
            <summary>AsyncKafkaConsumer can&apos;t unsubscribe invalid topics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yangpoan">PoAn Yang</assignee>
                                    <reporter username="yangpoan">PoAn Yang</reporter>
                        <labels>
                            <label>consumer-threading-refactor</label>
                            <label>kip-848-client-support</label>
                    </labels>
                <created>Thu, 19 Sep 2024 15:08:25 +0000</created>
                <updated>Thu, 10 Oct 2024 19:01:50 +0000</updated>
                            <resolved>Fri, 27 Sep 2024 14:57:15 +0000</resolved>
                                                                    <component>clients</component>
                    <component>consumer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17883613" author="kirktrue" created="Sun, 22 Sep 2024 15:21:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yangpoan&quot; class=&quot;user-hover&quot; rel=&quot;yangpoan&quot;&gt;yangpoan&lt;/a&gt;&#8212;this is a good catch! Where in the new consumer is the exception thrown? I&#8217;d want to look at the existing consumer to see how it handles this case.&lt;/p&gt;</comment>
                            <comment id="17883614" author="JIRAUSER300229" created="Sun, 22 Sep 2024 15:24:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kirktrue&quot; class=&quot;user-hover&quot; rel=&quot;kirktrue&quot;&gt;kirktrue&lt;/a&gt;, here is related Jira and PR:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-16764&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-16764&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/kafka/pull/16043&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/16043&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13588136">KAFKA-17286</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13588136">KAFKA-17286</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ri80:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>