<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:11:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5588] Remove deprecated new-consumer option for tools</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5588</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Hi,&lt;br/&gt;
with the current version of the ConsoleConsumer, ConsumerPerformance and ConsumerGroupCommand command line tools, it&apos;s not needed to specify the --new-consumer option anymore in order to use the new consumer. The choice for using the old or the new one is made just specifying the --zookeeper for the former and --bootstrap-server for the latter.&lt;/p&gt;

&lt;p&gt;The issues &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5599&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;KAFKA-5599&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5619&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;KAFKA-5619&lt;/a&gt; fixed and included in the 1.0.0 release deprecated the usage of the --new-consumer flag.&lt;/p&gt;

&lt;p&gt;More details in the related &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-176%3A+Remove+deprecated+new-consumer+option+for+tools&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;KIP-176&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Paolo.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13086830">KAFKA-5588</key>
            <summary>Remove deprecated new-consumer option for tools</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ppatierno">Paolo Patierno</assignee>
                                    <reporter username="ppatierno">Paolo Patierno</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Jul 2017 07:29:32 +0000</created>
                <updated>Wed, 6 Jun 2018 11:25:11 +0000</updated>
                            <resolved>Wed, 6 Jun 2018 06:30:56 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16085325" author="githubbot" created="Thu, 13 Jul 2017 07:54:42 +0000"  >&lt;p&gt;GitHub user ppatierno opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3524&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3524&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5588&quot; title=&quot;Remove deprecated new-consumer option for tools&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5588&quot;&gt;&lt;del&gt;KAFKA-5588&lt;/del&gt;&lt;/a&gt;: uselss --new-consumer option&lt;/p&gt;

&lt;p&gt;    Get rid of the --new-consumer option for the ConsoleConsumer&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ppatierno/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ppatierno/kafka&lt;/a&gt; kafka-5588&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3524.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3524.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3524&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f9309497551c7058696466c06755defddad6238c&lt;br/&gt;
Author: ppatierno &amp;lt;ppatierno@live.com&amp;gt;&lt;br/&gt;
Date:   2017-07-13T07:53:16Z&lt;/p&gt;

&lt;p&gt;    Get rid of the --new-consumer option for the ConsoleConsumer&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16086040" author="vahid" created="Thu, 13 Jul 2017 17:24:43 +0000"  >&lt;p&gt;If I&apos;m not mistaken this requires a KIP due to potential impact to existing users.&lt;/p&gt;</comment>
                            <comment id="16086070" author="ppatierno" created="Thu, 13 Jul 2017 17:38:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vahid&quot; class=&quot;user-hover&quot; rel=&quot;vahid&quot;&gt;vahid&lt;/a&gt; thanks for the clarification. Where we could check to be sure about that ? Asking on the dev list ?&lt;/p&gt;</comment>
                            <comment id="16086078" author="vahid" created="Thu, 13 Jul 2017 17:41:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; please confirm.&lt;/p&gt;</comment>
                            <comment id="16089571" author="ppatierno" created="Mon, 17 Jul 2017 09:52:47 +0000"  >&lt;p&gt;Before removing the --new-consumer option, the first step is to mark it as deprecated in the next release. It will be removed in a new release cycle (after deprecation).&lt;/p&gt;</comment>
                            <comment id="16089621" author="ijuma" created="Mon, 17 Jul 2017 10:42:01 +0000"  >&lt;p&gt;That&apos;s right &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vahid&quot; class=&quot;user-hover&quot; rel=&quot;vahid&quot;&gt;vahid&lt;/a&gt;, we generally need a KIP for changes with a backwards compatibility impact.&lt;/p&gt;</comment>
                            <comment id="16089819" author="ppatierno" created="Mon, 17 Jul 2017 13:27:59 +0000"  >&lt;p&gt;I have just written the &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-176%3A+Remove+deprecated+new-consumer+option+in+ConsoleConsumer+tool&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;KIP-176&lt;/a&gt; for this and I&apos;m going to start the discussion in the dev mailing list.&lt;/p&gt;</comment>
                            <comment id="16114281" author="githubbot" created="Fri, 4 Aug 2017 12:00:43 +0000"  >&lt;p&gt;Github user ppatierno closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3524&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3524&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16494989" author="githubbot" created="Wed, 30 May 2018 10:40:56 +0000"  >&lt;p&gt;ppatierno opened a new pull request #5097: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5588&quot; title=&quot;Remove deprecated new-consumer option for tools&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5588&quot;&gt;&lt;del&gt;KAFKA-5588&lt;/del&gt;&lt;/a&gt;: Remove deprecated new-consumer option for tools&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5097&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5097&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Removed the deprecated &quot;--new-consumer&quot; option for all consumer based tools.&lt;br/&gt;
   This option was already deprecated in the previous version so it can be removed in the coming new 2.0.0 major version.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16495006" author="ppatierno" created="Wed, 30 May 2018 10:50:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; I have just provided a PR for this one for removing &quot;--new-consumer&quot; option from all the consumer based tools.&lt;/p&gt;

&lt;p&gt;I have just noticed that the MirrorMaker has something similar. Using the old/new consumer is based on the provided &quot;zookeeper.connect&quot; parameter for the consumer config or not.&lt;/p&gt;

&lt;p&gt;Do you agree to remove the &quot;new.consumer&quot; option there as well? My concern is that it wasn&apos;t deprecated in the previous version as already done for the other tools.&lt;/p&gt;</comment>
                            <comment id="16502787" author="githubbot" created="Wed, 6 Jun 2018 03:28:06 +0000"  >&lt;p&gt;ijuma closed pull request #5097: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5588&quot; title=&quot;Remove deprecated new-consumer option for tools&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5588&quot;&gt;&lt;del&gt;KAFKA-5588&lt;/del&gt;&lt;/a&gt;: Remove deprecated new-consumer option for tools&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5097&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5097&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/core/src/main/scala/kafka/admin/ConsumerGroupCommand.scala b/core/src/main/scala/kafka/admin/ConsumerGroupCommand.scala&lt;br/&gt;
index 689a63c2e4a..44d09fda5fa 100755&lt;br/&gt;
&amp;#8212; a/core/src/main/scala/kafka/admin/ConsumerGroupCommand.scala&lt;br/&gt;
+++ b/core/src/main/scala/kafka/admin/ConsumerGroupCommand.scala&lt;br/&gt;
@@ -889,8 +889,6 @@ object ConsumerGroupCommand extends Logging {&lt;br/&gt;
       &quot;Pass in just a topic to delete the given topic&apos;s partition offsets and ownership information &quot; +&lt;br/&gt;
       &quot;for every consumer group. For instance --topic t1&quot; + nl +&lt;br/&gt;
       &quot;WARNING: Group deletion only works for old ZK-based consumer groups, and one has to use it carefully to only delete groups that are not active.&quot;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;val NewConsumerDoc = &quot;Use the new consumer implementation. This is the default, so this option is deprecated and &quot; +&lt;/li&gt;
	&lt;li&gt;&quot;will be removed in a future release.&quot;&lt;br/&gt;
     val TimeoutMsDoc = &quot;The timeout that can be set for some use cases. For example, it can be used when describing the group &quot; +&lt;br/&gt;
       &quot;to specify the maximum amount of time in milliseconds to wait before the group stabilizes (when the group is just created, &quot; +&lt;br/&gt;
       &quot;or is going through some changes).&quot;&lt;br/&gt;
@@ -943,7 +941,6 @@ object ConsumerGroupCommand extends Logging {&lt;br/&gt;
     val listOpt = parser.accepts(&quot;list&quot;, ListDoc)&lt;br/&gt;
     val describeOpt = parser.accepts(&quot;describe&quot;, DescribeDoc)&lt;br/&gt;
     val deleteOpt = parser.accepts(&quot;delete&quot;, DeleteDoc)&lt;/li&gt;
	&lt;li&gt;val newConsumerOpt = parser.accepts(&quot;new-consumer&quot;, NewConsumerDoc)&lt;br/&gt;
     val timeoutMsOpt = parser.accepts(&quot;timeout&quot;, TimeoutMsDoc)&lt;br/&gt;
                              .withRequiredArg&lt;br/&gt;
                              .describedAs(&quot;timeout (ms)&quot;)&lt;br/&gt;
@@ -1011,16 +1008,9 @@ object ConsumerGroupCommand extends Logging {&lt;br/&gt;
       if (useOldConsumer) 
{
         if (options.has(bootstrapServerOpt))
           CommandLineUtils.printUsageAndDie(parser, s&quot;Option $bootstrapServerOpt is not valid with $zkConnectOpt.&quot;)
-        else if (options.has(newConsumerOpt))
-          CommandLineUtils.printUsageAndDie(parser, s&quot;Option $newConsumerOpt is not valid with $zkConnectOpt.&quot;)
       }
&lt;p&gt; else {&lt;br/&gt;
         CommandLineUtils.checkRequiredArgs(parser, options, bootstrapServerOpt)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (options.has(newConsumerOpt)) 
{
-          Console.err.println(s&quot;The --new-consumer option is deprecated and will be removed in a future major release. &quot; +
-            s&quot;The new consumer is used by default if the --bootstrap-server option is provided.&quot;)
-        }
&lt;p&gt;-&lt;br/&gt;
         if (options.has(deleteOpt) &amp;amp;&amp;amp; options.has(topicOpt))&lt;br/&gt;
           CommandLineUtils.printUsageAndDie(parser, s&quot;When deleting a consumer group the option $topicOpt is only &quot; +&lt;br/&gt;
             s&quot;valid with $zkConnectOpt. The new consumer does not support topic-specific offset deletion from a consumer group.&quot;)&lt;br/&gt;
diff --git a/core/src/main/scala/kafka/tools/ConsoleConsumer.scala b/core/src/main/scala/kafka/tools/ConsoleConsumer.scala&lt;br/&gt;
index c1f8b81a066..b3103ebfa88 100755&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/core/src/main/scala/kafka/tools/ConsoleConsumer.scala&lt;br/&gt;
+++ b/core/src/main/scala/kafka/tools/ConsoleConsumer.scala&lt;br/&gt;
@@ -324,8 +324,6 @@ object ConsoleConsumer extends Logging {&lt;br/&gt;
       .withRequiredArg&lt;br/&gt;
       .describedAs(&quot;metrics directory&quot;)&lt;br/&gt;
       .ofType(classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;java.lang.String&amp;#93;&lt;/span&gt;)&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;val newConsumerOpt = parser.accepts(&quot;new-consumer&quot;, &quot;Use the new consumer implementation. This is the default, so &quot; +&lt;/li&gt;
	&lt;li&gt;&quot;this option is deprecated and will be removed in a future release.&quot;)&lt;br/&gt;
     val bootstrapServerOpt = parser.accepts(&quot;bootstrap-server&quot;, &quot;REQUIRED (unless old consumer is used): The server to connect to.&quot;)&lt;br/&gt;
       .withRequiredArg&lt;br/&gt;
       .describedAs(&quot;server to connect to&quot;)&lt;br/&gt;
@@ -397,8 +395,6 @@ object ConsoleConsumer extends Logging {&lt;br/&gt;
     if (useOldConsumer) {&lt;br/&gt;
       if (options.has(bootstrapServerOpt))&lt;br/&gt;
         CommandLineUtils.printUsageAndDie(parser, s&quot;Option $bootstrapServerOpt is not valid with $zkConnectOpt.&quot;)&lt;/li&gt;
	&lt;li&gt;else if (options.has(newConsumerOpt))&lt;/li&gt;
	&lt;li&gt;CommandLineUtils.printUsageAndDie(parser, s&quot;Option $newConsumerOpt is not valid with $zkConnectOpt.&quot;)&lt;br/&gt;
       val topicOrFilterOpt = List(topicIdOpt, whitelistOpt, blacklistOpt).filter(options.has)&lt;br/&gt;
       if (topicOrFilterOpt.size != 1)&lt;br/&gt;
         CommandLineUtils.printUsageAndDie(parser, &quot;Exactly one of whitelist/blacklist/topic is required.&quot;)&lt;br/&gt;
@@ -449,11 +445,6 @@ object ConsoleConsumer extends Logging {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     if (!useOldConsumer) {&lt;br/&gt;
       CommandLineUtils.checkRequiredArgs(parser, options, bootstrapServerOpt)&lt;br/&gt;
-&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (options.has(newConsumerOpt)) 
{
-        Console.err.println(&quot;The --new-consumer option is deprecated and will be removed in a future major release. &quot; +
-          &quot;The new consumer is used by default if the --bootstrap-server option is provided.&quot;)
-      }
&lt;p&gt;     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     if (options.has(csvMetricsReporterEnabledOpt)) {&lt;br/&gt;
diff --git a/core/src/main/scala/kafka/tools/ConsumerPerformance.scala b/core/src/main/scala/kafka/tools/ConsumerPerformance.scala&lt;br/&gt;
index 4fff87745e7..f4221fe2946 100644&lt;br/&gt;
&amp;#8212; a/core/src/main/scala/kafka/tools/ConsumerPerformance.scala&lt;br/&gt;
+++ b/core/src/main/scala/kafka/tools/ConsumerPerformance.scala&lt;br/&gt;
@@ -296,8 +296,6 @@ object ConsumerPerformance extends LazyLogging {&lt;br/&gt;
       .describedAs(&quot;count&quot;)&lt;br/&gt;
       .ofType(classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;java.lang.Integer&amp;#93;&lt;/span&gt;)&lt;br/&gt;
       .defaultsTo(1)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;val newConsumerOpt = parser.accepts(&quot;new-consumer&quot;, &quot;Use the new consumer implementation. This is the default, so &quot; +&lt;/li&gt;
	&lt;li&gt;&quot;this option is deprecated and will be removed in a future release.&quot;)&lt;br/&gt;
     val consumerConfigOpt = parser.accepts(&quot;consumer.config&quot;, &quot;Consumer config properties file.&quot;)&lt;br/&gt;
       .withRequiredArg&lt;br/&gt;
       .describedAs(&quot;config file&quot;)&lt;br/&gt;
@@ -325,11 +323,6 @@ object ConsumerPerformance extends LazyLogging {&lt;br/&gt;
     if (!useOldConsumer) {&lt;br/&gt;
       CommandLineUtils.checkRequiredArgs(parser, options, bootstrapServersOpt)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (options.has(newConsumerOpt)) 
{
-        Console.err.println(&quot;The --new-consumer option is deprecated and will be removed in a future major release. &quot; +
-          &quot;The new consumer is used by default if the --broker-list option is provided.&quot;)
-      }
&lt;p&gt;-&lt;br/&gt;
       import org.apache.kafka.clients.consumer.ConsumerConfig&lt;br/&gt;
       props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, options.valueOf(bootstrapServersOpt))&lt;br/&gt;
       props.put(ConsumerConfig.GROUP_ID_CONFIG, options.valueOf(groupIdOpt))&lt;br/&gt;
@@ -342,8 +335,7 @@ object ConsumerPerformance extends LazyLogging {&lt;br/&gt;
     } else {&lt;br/&gt;
       if (options.has(bootstrapServersOpt))&lt;br/&gt;
         CommandLineUtils.printUsageAndDie(parser, s&quot;Option $bootstrapServersOpt is not valid with $zkConnectOpt.&quot;)&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;else if (options.has(newConsumerOpt))&lt;/li&gt;
	&lt;li&gt;CommandLineUtils.printUsageAndDie(parser, s&quot;Option $newConsumerOpt is not valid with $zkConnectOpt.&quot;)&lt;br/&gt;
+&lt;br/&gt;
       CommandLineUtils.checkRequiredArgs(parser, options, zkConnectOpt, numMessagesOpt)&lt;br/&gt;
       props.put(&quot;group.id&quot;, options.valueOf(groupIdOpt))&lt;br/&gt;
       props.put(&quot;socket.receive.buffer.bytes&quot;, options.valueOf(socketBufferSizeOpt).toString)&lt;br/&gt;
diff --git a/core/src/test/scala/unit/kafka/admin/DeleteConsumerGroupsTest.scala b/core/src/test/scala/unit/kafka/admin/DeleteConsumerGroupsTest.scala&lt;br/&gt;
index 4cc28372449..ef3b17c3938 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/core/src/test/scala/unit/kafka/admin/DeleteConsumerGroupsTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/admin/DeleteConsumerGroupsTest.scala&lt;br/&gt;
@@ -16,6 +16,7 @@&lt;br/&gt;
  */&lt;br/&gt;
 package unit.kafka.admin&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+import joptsimple.OptionException&lt;br/&gt;
 import kafka.admin.ConsumerGroupCommandTest&lt;br/&gt;
 import kafka.utils.TestUtils&lt;br/&gt;
 import org.apache.kafka.common.protocol.Errors&lt;br/&gt;
@@ -24,12 +25,11 @@ import org.junit.Test&lt;/p&gt;

&lt;p&gt; class DeleteConsumerGroupTest extends ConsumerGroupCommandTest {&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;joptsimple.OptionException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
+  @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;OptionException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
   def testDeleteWithTopicOption() 
{
     TestUtils.createOffsetsTopic(zkClient, servers)
     val cgcArgs = Array(&quot;--bootstrap-server&quot;, brokerList, &quot;--delete&quot;, &quot;--group&quot;, group, &quot;--topic&quot;)
     getConsumerGroupService(cgcArgs)
-    fail(&quot;Expected an error due to presence of mutually exclusive options&quot;)
   }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   @Test&lt;br/&gt;
@@ -222,4 +222,10 @@ class DeleteConsumerGroupTest extends ConsumerGroupCommandTest &lt;/p&gt;
{
       result.size == 1 &amp;amp;&amp;amp;
         result.keySet.contains(group) &amp;amp;&amp;amp; result.get(group).contains(Errors.COORDINATOR_NOT_AVAILABLE))
   }
&lt;p&gt;+&lt;br/&gt;
+  @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;OptionException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
+  def testDeleteWithUnrecognizedNewConsumerOption() &lt;/p&gt;
{
+    val cgcArgs = Array(&quot;--new-consumer&quot;, &quot;--bootstrap-server&quot;, brokerList, &quot;--delete&quot;, &quot;--group&quot;, group)
+    getConsumerGroupService(cgcArgs)
+  }
&lt;p&gt; }&lt;br/&gt;
diff --git a/core/src/test/scala/unit/kafka/admin/DescribeConsumerGroupTest.scala b/core/src/test/scala/unit/kafka/admin/DescribeConsumerGroupTest.scala&lt;br/&gt;
index 5725568e10e..a2361b706a3 100644&lt;br/&gt;
&amp;#8212; a/core/src/test/scala/unit/kafka/admin/DescribeConsumerGroupTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/admin/DescribeConsumerGroupTest.scala&lt;br/&gt;
@@ -16,6 +16,7 @@&lt;br/&gt;
  */&lt;br/&gt;
 package kafka.admin&lt;/p&gt;

&lt;p&gt;+import joptsimple.OptionException&lt;br/&gt;
 import kafka.utils.TestUtils&lt;br/&gt;
 import org.apache.kafka.clients.consumer.RoundRobinAssignor&lt;br/&gt;
 import org.apache.kafka.common.TopicPartition&lt;br/&gt;
@@ -112,12 +113,11 @@ class DescribeConsumerGroupTest extends ConsumerGroupCommandTest {&lt;br/&gt;
     }&lt;br/&gt;
   }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;joptsimple.OptionException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
+  @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;OptionException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
   def testDescribeWithMultipleSubActions() 
{
     TestUtils.createOffsetsTopic(zkClient, servers)
     val cgcArgs = Array(&quot;--bootstrap-server&quot;, brokerList, &quot;--describe&quot;, &quot;--group&quot;, group, &quot;--members&quot;, &quot;--state&quot;)
     getConsumerGroupService(cgcArgs)
-    fail(&quot;Expected an error due to presence of mutually exclusive options&quot;)
   }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   @Test&lt;br/&gt;
@@ -662,6 +662,12 @@ class DescribeConsumerGroupTest extends ConsumerGroupCommandTest {&lt;br/&gt;
     }&lt;br/&gt;
   }&lt;/p&gt;

&lt;p&gt;+  @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;joptsimple.OptionException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
+  def testDescribeWithUnrecognizedNewConsumerOption() &lt;/p&gt;
{
+    val cgcArgs = Array(&quot;--new-consumer&quot;, &quot;--bootstrap-server&quot;, brokerList, &quot;--describe&quot;, &quot;--group&quot;, group)
+    getConsumerGroupService(cgcArgs)
+    fail(&quot;Expected an error due to presence of unrecognized --new-consumer option&quot;)
+  }

&lt;p&gt; }&lt;/p&gt;

&lt;p&gt;diff --git a/core/src/test/scala/unit/kafka/admin/ListConsumerGroupTest.scala b/core/src/test/scala/unit/kafka/admin/ListConsumerGroupTest.scala&lt;br/&gt;
index 13dccbe113e..c83e0028797 100644&lt;br/&gt;
&amp;#8212; a/core/src/test/scala/unit/kafka/admin/ListConsumerGroupTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/admin/ListConsumerGroupTest.scala&lt;br/&gt;
@@ -18,6 +18,7 @@ package kafka.admin&lt;/p&gt;

&lt;p&gt; import java.util.Properties&lt;/p&gt;

&lt;p&gt;+import joptsimple.OptionException&lt;br/&gt;
 import org.junit.Test&lt;br/&gt;
 import kafka.admin.ConsumerGroupCommand.ConsumerGroupCommandOptions&lt;br/&gt;
 import kafka.admin.ConsumerGroupCommand.ZkConsumerGroupService&lt;br/&gt;
@@ -86,4 +87,9 @@ class ListConsumerGroupTest extends ConsumerGroupCommandTest {&lt;br/&gt;
     }, s&quot;Expected --list to show groups $expectedGroups, but found $foundGroups.&quot;)&lt;br/&gt;
   }&lt;/p&gt;

&lt;p&gt;+  @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;OptionException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
+  def testListWithUnrecognizedNewConsumerOption() &lt;/p&gt;
{
+    val cgcArgs = Array(&quot;--new-consumer&quot;, &quot;--bootstrap-server&quot;, brokerList, &quot;--list&quot;)
+    getConsumerGroupService(cgcArgs)
+  }
&lt;p&gt; }&lt;br/&gt;
diff --git a/core/src/test/scala/unit/kafka/admin/ResetConsumerGroupOffsetTest.scala b/core/src/test/scala/unit/kafka/admin/ResetConsumerGroupOffsetTest.scala&lt;br/&gt;
index 04fc428514b..116b455cb87 100644&lt;br/&gt;
&amp;#8212; a/core/src/test/scala/unit/kafka/admin/ResetConsumerGroupOffsetTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/admin/ResetConsumerGroupOffsetTest.scala&lt;br/&gt;
@@ -16,6 +16,7 @@ import java.io.&lt;/p&gt;
{BufferedWriter, File, FileWriter}
&lt;p&gt; import java.text.&lt;/p&gt;
{ParseException, SimpleDateFormat}
&lt;p&gt; import java.util.&lt;/p&gt;
{Calendar, Date, Properties}

&lt;p&gt;+import joptsimple.OptionException&lt;br/&gt;
 import kafka.admin.ConsumerGroupCommand.ConsumerGroupService&lt;br/&gt;
 import kafka.server.KafkaConfig&lt;br/&gt;
 import kafka.utils.TestUtils&lt;br/&gt;
@@ -335,6 +336,13 @@ class ResetConsumerGroupOffsetTest extends ConsumerGroupCommandTest &lt;/p&gt;
{
     adminZkClient.deleteTopic(topic)
   }

&lt;p&gt;+  @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;OptionException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
+  def testResetWithUnrecognizedNewConsumerOption() &lt;/p&gt;
{
+    val cgcArgs = Array(&quot;--new-consumer&quot;, &quot;--bootstrap-server&quot;, brokerList, &quot;--reset-offsets&quot;, &quot;--group&quot;, group, &quot;--all-topics&quot;,
+      &quot;--to-offset&quot;, &quot;2&quot;, &quot;--export&quot;)
+    getConsumerGroupService(cgcArgs)
+  }
&lt;p&gt;+&lt;br/&gt;
   private def produceMessages(topic: String, numMessages: Int): Unit = {&lt;br/&gt;
     val records = (0 until numMessages).map(_ =&amp;gt; new ProducerRecord[Array&lt;span class=&quot;error&quot;&gt;&amp;#91;Byte&amp;#93;&lt;/span&gt;, Array&lt;span class=&quot;error&quot;&gt;&amp;#91;Byte&amp;#93;&lt;/span&gt;](topic,&lt;br/&gt;
       new Array&lt;span class=&quot;error&quot;&gt;&amp;#91;Byte&amp;#93;&lt;/span&gt;(100 * 1000)))&lt;br/&gt;
diff --git a/core/src/test/scala/unit/kafka/tools/ConsoleConsumerTest.scala b/core/src/test/scala/unit/kafka/tools/ConsoleConsumerTest.scala&lt;br/&gt;
index 6f465557d7b..1a32bf42072 100644&lt;br/&gt;
&amp;#8212; a/core/src/test/scala/unit/kafka/tools/ConsoleConsumerTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/tools/ConsoleConsumerTest.scala&lt;br/&gt;
@@ -149,8 +149,7 @@ class ConsoleConsumerTest {&lt;br/&gt;
     val args: Array&lt;span class=&quot;error&quot;&gt;&amp;#91;String&amp;#93;&lt;/span&gt; = Array(&lt;br/&gt;
       &quot;--bootstrap-server&quot;, &quot;localhost:9092&quot;,&lt;br/&gt;
       &quot;--topic&quot;, &quot;test&quot;,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;--from-beginning&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;--new-consumer&quot;) //new&lt;br/&gt;
+      &quot;--from-beginning&quot;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     //When&lt;br/&gt;
     val config = new ConsoleConsumer.ConsumerConfig(args)&lt;br/&gt;
@@ -169,8 +168,7 @@ class ConsoleConsumerTest {&lt;br/&gt;
       &quot;--bootstrap-server&quot;, &quot;localhost:9092&quot;,&lt;br/&gt;
       &quot;--topic&quot;, &quot;test&quot;,&lt;br/&gt;
       &quot;--partition&quot;, &quot;0&quot;,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;--offset&quot;, &quot;3&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;--new-consumer&quot;) //new&lt;br/&gt;
+      &quot;--offset&quot;, &quot;3&quot;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     //When&lt;br/&gt;
     val config = new ConsoleConsumer.ConsumerConfig(args)&lt;br/&gt;
@@ -185,6 +183,25 @@ class ConsoleConsumerTest {&lt;/p&gt;

&lt;p&gt;   }&lt;/p&gt;

&lt;p&gt;+  @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;IllegalArgumentException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
+  def shouldExitOnUnrecognizedNewConsumerOption(): Unit = {&lt;br/&gt;
+    Exit.setExitProcedure((_, message) =&amp;gt; throw new IllegalArgumentException(message.orNull))&lt;br/&gt;
+&lt;br/&gt;
+    //Given&lt;br/&gt;
+    val args: Array&lt;span class=&quot;error&quot;&gt;&amp;#91;String&amp;#93;&lt;/span&gt; = Array(&lt;br/&gt;
+      &quot;--new-consumer&quot;,&lt;br/&gt;
+      &quot;--bootstrap-server&quot;, &quot;localhost:9092&quot;,&lt;br/&gt;
+      &quot;--topic&quot;, &quot;test&quot;,&lt;br/&gt;
+      &quot;--from-beginning&quot;)&lt;br/&gt;
+&lt;br/&gt;
+    //When&lt;br/&gt;
+    try &lt;/p&gt;
{
+      new ConsoleConsumer.ConsumerConfig(args)
+    }
&lt;p&gt; finally &lt;/p&gt;
{
+      Exit.resetExitProcedure()
+    }
&lt;p&gt;+  }&lt;br/&gt;
+&lt;br/&gt;
   @Test&lt;br/&gt;
   def testDefaultConsumer() {&lt;br/&gt;
     //Given&lt;br/&gt;
@@ -200,6 +217,21 @@ class ConsoleConsumerTest &lt;/p&gt;
{
     assertFalse(config.useOldConsumer)
   }

&lt;p&gt;+  @Test&lt;br/&gt;
+  def testNewConsumerRemovedOption() &lt;/p&gt;
{
+    //Given
+    val args: Array[String] = Array(
+      &quot;--bootstrap-server&quot;, &quot;localhost:9092&quot;,
+      &quot;--topic&quot;, &quot;test&quot;,
+      &quot;--from-beginning&quot;)
+
+    //When
+    val config = new ConsoleConsumer.ConsumerConfig(args)
+
+    //Then
+    assertFalse(config.useOldConsumer)
+  }
&lt;p&gt;+&lt;br/&gt;
   @Test&lt;br/&gt;
   def shouldParseValidNewSimpleConsumerValidConfigWithStringOffset() {&lt;br/&gt;
     //Given&lt;br/&gt;
@@ -208,7 +240,6 @@ class ConsoleConsumerTest {&lt;br/&gt;
       &quot;--topic&quot;, &quot;test&quot;,&lt;br/&gt;
       &quot;--partition&quot;, &quot;0&quot;,&lt;br/&gt;
       &quot;--offset&quot;, &quot;LatEst&quot;,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;--new-consumer&quot;, //new&lt;br/&gt;
       &quot;--property&quot;, &quot;print.value=false&quot;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     //When&lt;br/&gt;
@@ -366,9 +397,6 @@ class ConsoleConsumerTest {&lt;/p&gt;

&lt;p&gt;   @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;IllegalArgumentException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
   def shouldExitOnInvalidConfigWithAutoOffsetResetAndConflictingFromBeginningNewConsumer() {&lt;br/&gt;
-&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// Override exit procedure to throw an exception instead of exiting, so we can catch the exit&lt;/li&gt;
	&lt;li&gt;// properly for this test case&lt;br/&gt;
     Exit.setExitProcedure((_, message) =&amp;gt; throw new IllegalArgumentException(message.orNull))&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     //Given&lt;br/&gt;
@@ -384,15 +412,10 @@ class ConsoleConsumerTest {&lt;br/&gt;
     } finally &lt;/p&gt;
{
       Exit.resetExitProcedure()
     }&lt;br/&gt;
-&lt;br/&gt;
-    fail(&quot;Expected consumer property construction to fail due to inconsistent reset options&quot;)&lt;br/&gt;
   }&lt;br/&gt;
 &lt;br/&gt;
   @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;IllegalArgumentException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
   def shouldExitOnInvalidConfigWithAutoOffsetResetAndConflictingFromBeginningOldConsumer() {&lt;br/&gt;
-&lt;br/&gt;
-    // Override exit procedure to throw an exception instead of exiting, so we can catch the exit&lt;br/&gt;
-    // properly for this test case&lt;br/&gt;
     Exit.setExitProcedure((_, message) =&amp;gt; throw new IllegalArgumentException(message.orNull))&lt;br/&gt;
 &lt;br/&gt;
     //Given&lt;br/&gt;
@@ -408,8 +431,6 @@ class ConsoleConsumerTest {&lt;br/&gt;
     } finally {       Exit.resetExitProcedure()     }
&lt;p&gt;-&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fail(&quot;Expected consumer property construction to fail due to inconsistent reset options&quot;)&lt;br/&gt;
   }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   @Test&lt;br/&gt;
diff --git a/core/src/test/scala/unit/kafka/tools/ConsumerPerformanceTest.scala b/core/src/test/scala/unit/kafka/tools/ConsumerPerformanceTest.scala&lt;br/&gt;
index bafe8ed136b..bc199f658ab 100644&lt;br/&gt;
&amp;#8212; a/core/src/test/scala/unit/kafka/tools/ConsumerPerformanceTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/tools/ConsumerPerformanceTest.scala&lt;br/&gt;
@@ -20,7 +20,8 @@ package kafka.tools&lt;br/&gt;
 import java.io.ByteArrayOutputStream&lt;br/&gt;
 import java.text.SimpleDateFormat&lt;/p&gt;

&lt;p&gt;-import org.junit.Assert.assertEquals&lt;br/&gt;
+import joptsimple.OptionException&lt;br/&gt;
+import org.junit.Assert.&lt;/p&gt;
{assertEquals, assertFalse, assertTrue}
&lt;p&gt; import org.junit.Test&lt;/p&gt;

&lt;p&gt; class ConsumerPerformanceTest {&lt;br/&gt;
@@ -45,6 +46,57 @@ class ConsumerPerformanceTest {&lt;br/&gt;
       s&quot;${dateFormat.format(System.currentTimeMillis)}, 1.0, 1.0, 1, 1.0&quot;))&lt;br/&gt;
   }&lt;/p&gt;

&lt;p&gt;+  @Test&lt;br/&gt;
+  def testConfigUsingNewConsumer(): Unit = &lt;/p&gt;
{
+    //Given
+    val args: Array[String] = Array(
+      &quot;--broker-list&quot;, &quot;localhost:9092&quot;,
+      &quot;--topic&quot;, &quot;test&quot;,
+      &quot;--messages&quot;, &quot;10&quot;
+    )
+
+    //When
+    val config = new ConsumerPerformance.ConsumerPerfConfig(args)
+
+    //Then
+    assertFalse(config.useOldConsumer)
+    assertEquals(&quot;localhost:9092&quot;, config.options.valueOf(config.bootstrapServersOpt))
+    assertEquals(&quot;test&quot;, config.topic)
+    assertEquals(10, config.numMessages)
+  }
&lt;p&gt;+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  def testConfigUsingOldConsumer() &lt;/p&gt;
{
+    //Given
+    val args: Array[String] = Array(
+      &quot;--zookeeper&quot;, &quot;localhost:2181&quot;,
+      &quot;--topic&quot;, &quot;test&quot;,
+      &quot;--messages&quot;, &quot;10&quot;)
+
+    //When
+    val config = new ConsumerPerformance.ConsumerPerfConfig(args)
+
+    //Then
+    assertTrue(config.useOldConsumer)
+    assertEquals(&quot;localhost:2181&quot;, config.options.valueOf(config.zkConnectOpt))
+    assertEquals(&quot;test&quot;, config.topic)
+    assertEquals(10, config.numMessages)
+  }
&lt;p&gt;+&lt;br/&gt;
+  @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;OptionException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
+  def testConfigUsingNewConsumerUnrecognizedOption(): Unit = &lt;/p&gt;
{
+    //Given
+    val args: Array[String] = Array(
+      &quot;--broker-list&quot;, &quot;localhost:9092&quot;,
+      &quot;--topic&quot;, &quot;test&quot;,
+      &quot;--messages&quot;, &quot;10&quot;,
+      &quot;--new-consumer&quot;
+    )
+
+    //When
+    new ConsumerPerformance.ConsumerPerfConfig(args)
+  }
&lt;p&gt;+&lt;br/&gt;
   private def testHeaderMatchContent(detailed: Boolean, useOldConsumer: Boolean, expectedOutputLineCount: Int, fun: () =&amp;gt; Unit): Unit = {&lt;br/&gt;
     Console.withOut(outContent) {&lt;br/&gt;
       ConsumerPerformance.printHeader(detailed, useOldConsumer)&lt;br/&gt;
diff --git a/docs/upgrade.html b/docs/upgrade.html&lt;br/&gt;
index 056fb8366e4..cfc3c833ffe 100644&lt;br/&gt;
&amp;#8212; a/docs/upgrade.html&lt;br/&gt;
+++ b/docs/upgrade.html&lt;br/&gt;
@@ -97,6 +97,14 @@ &amp;lt;h5&amp;gt;&amp;lt;a id=&quot;upgrade_200_notable&quot; href=&quot;#upgrade_200_notable&quot;&amp;gt;Notable changes in 2&lt;br/&gt;
         will be removed in a future version.&amp;lt;/li&amp;gt;&lt;br/&gt;
     &amp;lt;li&amp;gt;The internal method &amp;lt;code&amp;gt;kafka.admin.AdminClient.deleteRecordsBefore&amp;lt;/code&amp;gt; has been removed. Users are encouraged to migrate to &amp;lt;code&amp;gt;org.apache.kafka.clients.admin.AdminClient.deleteRecords&amp;lt;/code&amp;gt;.&amp;lt;/li&amp;gt;&lt;br/&gt;
     &amp;lt;li&amp;gt;The tool kafka.tools.ReplayLogProducer has been removed.&amp;lt;/li&amp;gt;&lt;br/&gt;
+    &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-176%3A+Remove+deprecated+new-consumer+option+for+tools&quot;&amp;gt;KIP-176&amp;lt;/a&amp;gt; finally removes&lt;br/&gt;
+        the &amp;lt;code&amp;gt;--new-consumer&amp;lt;/code&amp;gt; option for all consumer based tools as &amp;lt;code&amp;gt;kafka-console-consumer&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;kafka-consumer-perf-test&amp;lt;/code&amp;gt;&lt;br/&gt;
+        and &amp;lt;code&amp;gt;kafka-consumer-groups&amp;lt;/code&amp;gt;.&lt;br/&gt;
+        The new consumer is automatically used if the bootstrap servers list is provided on the command line&lt;br/&gt;
+        otherwise, when the zookeeper connection is provided, the old consumer is used.&lt;br/&gt;
+        The &amp;lt;code&amp;gt;--new-consumer&amp;lt;/code&amp;gt; option had already been ignored as the way of selecting the consumer since Kafka 1.0.0,&lt;br/&gt;
+        this KIP just removes the option.&lt;br/&gt;
+    &amp;lt;/li&amp;gt;&lt;br/&gt;
 &amp;lt;/ul&amp;gt;&lt;/p&gt;

&lt;p&gt; &amp;lt;h5&amp;gt;&amp;lt;a id=&quot;upgrade_200_new_protocols&quot; href=&quot;#upgrade_200_new_protocols&quot;&amp;gt;New Protocol Versions&amp;lt;/a&amp;gt;&amp;lt;/h5&amp;gt;&lt;br/&gt;
diff --git a/tests/kafkatest/services/kafka/kafka.py b/tests/kafkatest/services/kafka/kafka.py&lt;br/&gt;
index ba5abc719f6..7e919b37249 100644&lt;br/&gt;
&amp;#8212; a/tests/kafkatest/services/kafka/kafka.py&lt;br/&gt;
+++ b/tests/kafkatest/services/kafka/kafka.py&lt;br/&gt;
@@ -30,7 +30,7 @@&lt;br/&gt;
 from kafkatest.services.monitor.jmx import JmxMixin&lt;br/&gt;
 from kafkatest.services.security.minikdc import MiniKdc&lt;br/&gt;
 from kafkatest.services.security.security_config import SecurityConfig&lt;br/&gt;
-from kafkatest.version import DEV_BRANCH&lt;br/&gt;
+from kafkatest.version import DEV_BRANCH, LATEST_0_10_0&lt;/p&gt;

&lt;p&gt; Port = collections.namedtuple(&apos;Port&apos;, &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;name&amp;#39;, &amp;#39;number&amp;#39;, &amp;#39;open&amp;#39;&amp;#93;&lt;/span&gt;)&lt;/p&gt;

&lt;p&gt;@@ -584,8 +584,12 @@ def list_consumer_groups(self, node=None, new_consumer=True, command_config=None&lt;br/&gt;
             command_config = &quot;--command-config &quot; + command_config&lt;/p&gt;

&lt;p&gt;         if new_consumer:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;cmd = &quot;%s --new-consumer --bootstrap-server %s %s --list&quot; % \&lt;br/&gt;
+            new_consumer_opt = &quot;&quot;&lt;br/&gt;
+            if node.version &amp;lt;= LATEST_0_10_0:&lt;br/&gt;
+                new_consumer_opt = &quot;--new-consumer&quot;&lt;br/&gt;
+            cmd = &quot;%s %s --bootstrap-server %s %s --list&quot; % \&lt;br/&gt;
                   (consumer_group_script,&lt;br/&gt;
+                   new_consumer_opt,&lt;br/&gt;
                    self.bootstrap_servers(self.security_protocol),&lt;br/&gt;
                    command_config)&lt;br/&gt;
         else:&lt;br/&gt;
@@ -611,8 +615,14 @@ def describe_consumer_group(self, group, node=None, new_consumer=True, command_c&lt;br/&gt;
             command_config = &quot;--command-config &quot; + command_config&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         if new_consumer:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;cmd = &quot;%s --new-consumer --bootstrap-server %s %s --group %s --describe&quot; % \&lt;/li&gt;
	&lt;li&gt;(consumer_group_script, self.bootstrap_servers(self.security_protocol), command_config, group)&lt;br/&gt;
+            new_consumer_opt = &quot;&quot;&lt;br/&gt;
+            if node.version &amp;lt;= LATEST_0_10_0:&lt;br/&gt;
+                new_consumer_opt = &quot;--new-consumer&quot;&lt;br/&gt;
+            cmd = &quot;%s %s --bootstrap-server %s %s --group %s --describe&quot; % \&lt;br/&gt;
+                  (consumer_group_script,&lt;br/&gt;
+                   new_consumer_opt,&lt;br/&gt;
+                   self.bootstrap_servers(self.security_protocol),&lt;br/&gt;
+                   command_config, group)&lt;br/&gt;
         else:&lt;br/&gt;
             cmd = &quot;%s --zookeeper %s %s --group %s --describe&quot; % \&lt;br/&gt;
                   (consumer_group_script, self.zk_connect_setting(), command_config, group)&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="13087530">KAFKA-5599</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hgxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>