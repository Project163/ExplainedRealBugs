<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:31:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-14314] MirrorSourceConnector throwing NPE during `isCycle` check</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-14314</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;We are using MirrorMaker to replicate topics across clusters in AWS. As the process is starting up, we are getting a NullPointerException when MirrorSourceConnector is calling `isCycle`.&lt;/p&gt;

&lt;p&gt;Retrieving the `upstreamTopic` on &lt;a href=&quot;https://github.com/apache/kafka/blob/cc582897bfb237572131369a598f7869220b43dc/connect/mirror/src/main/java/org/apache/kafka/connect/mirror/MirrorSourceConnector.java#L497&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this line of code&lt;/a&gt; is&#160;returning null, which causes the NPE on the next line.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13486824">KAFKA-14314</key>
            <summary>MirrorSourceConnector throwing NPE during `isCycle` check</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johnk">John Krupka</assignee>
                                    <reporter username="johnk">John Krupka</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Oct 2022 11:20:40 +0000</created>
                <updated>Fri, 28 Oct 2022 15:28:42 +0000</updated>
                            <resolved>Fri, 28 Oct 2022 15:28:42 +0000</resolved>
                                    <version>3.3.1</version>
                                    <fixVersion>3.4.0</fixVersion>
                                    <component>mirrormaker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17619486" author="mimaison" created="Tue, 18 Oct 2022 12:26:30 +0000"  >&lt;p&gt;Which replication policy are you using?&lt;/p&gt;</comment>
                            <comment id="17619514" author="JIRAUSER297077" created="Tue, 18 Oct 2022 13:17:37 +0000"  >&lt;p&gt;We&apos;re using a custom replication policy. Here are the contents of the mm2-msc.json file. Is this what you&apos;re asking for? I&apos;m new to this so I&apos;m unsure exactly what all constitutes the policy.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;mm2-msc&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;connector.class&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.kafka.connect.mirror.MirrorSourceConnector&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;replication.policy.class&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;com.amazonaws.kafka.samples.CustomMM2ReplicationPolicy&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;clusters&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;prim, sec&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;source.cluster.alias&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;prim&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;source.cluster.bootstrap.servers&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;PRIMARY_BOOTSTRAP_URL&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;source.cluster.security.protocol&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;SSL&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;source.cluster.ssl.truststore.location&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;/tmp/kafka.client.truststore.jks&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;source.cluster.ssl.truststore.password&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;changeit&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;target.cluster.alias&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;sec&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;target.cluster.bootstrap.servers&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;SECONDARY_BOOTSTRAP_URL&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;target.cluster.security.protocol&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;SSL&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;target.cluster.ssl.truststore.location&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;/tmp/kafka.client.truststore.jks&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;target.cluster.ssl.truststore.password&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;changeit&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;topics&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;.*&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;tasks.max&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;4&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;key.converter&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot; org.apache.kafka.connect.converters.ByteArrayConverter&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;value.converter&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.kafka.connect.converters.ByteArrayConverter&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;replication.factor&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;offset-syncs.topic.replication.factor&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;sync.topic.acls.interval.seconds&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;sync.topic.configs.interval.seconds&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;refresh.topics.interval.seconds&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;refresh.groups.interval.seconds&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;consumer.group.id&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;mm2-msc&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;producer.enable.idempotence&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17619540" author="mimaison" created="Tue, 18 Oct 2022 13:29:18 +0000"  >&lt;p&gt;Thanks for the details.&lt;/p&gt;

&lt;p&gt;The ReplicationPolicy &lt;a href=&quot;https://kafka.apache.org/33/javadoc/org/apache/kafka/connect/mirror/ReplicationPolicy.html#upstreamTopic-java.lang.String-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;javadoc&lt;/a&gt; states that upstreamTopic can return null to indicate a topic is not remote. So this is a bug in MirrorSourceConnector.isCycle(), null should be handled correctly.&lt;/p&gt;

&lt;p&gt;Are you interested in submitting a pull request to fix this small issue?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17619555" author="JIRAUSER297077" created="Tue, 18 Oct 2022 13:35:37 +0000"  >&lt;p&gt;Thanks, Mickael. Sure I can do that. I thought it was a bug because it seems that `null` is a legitimate value here. We might have something misconfigured but even in that case it shouldn&apos;t blow up so I&apos;ll submit a PR a bit later today.&lt;/p&gt;</comment>
                            <comment id="17619564" author="mimaison" created="Tue, 18 Oct 2022 13:48:16 +0000"  >&lt;p&gt;Great, I&apos;ll assign this ticket to you then. Thanks!&lt;/p&gt;</comment>
                            <comment id="17620385" author="JIRAUSER297077" created="Wed, 19 Oct 2022 14:23:37 +0000"  >&lt;p&gt;I&apos;m not sure exactly how your project manages these tickets but I submitted &lt;a href=&quot;https://github.com/apache/kafka/pull/12769&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR 12769&lt;/a&gt; this morning and mentioned this ticket number in the comment. It&apos;s still building.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z19giw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>