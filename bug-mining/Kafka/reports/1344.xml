<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:58:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4698] `-target:jvm-1.7` in scalaCompileOptions seems to cause java.lang.VerifyError when loading kafka/client/ClientUtils </title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4698</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;When we updated to kafka 2.11-0.10.1.1 from 2.11-0.8.2.2 we started getting the following error &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.VerifyError: Stack map does not match the one at exception handler 190
Exception Details:
  Location:
    kafka/client/ClientUtils$.fetchTopicMetadata(Lscala/collection/Set;Lscala/collection/Seq;Lkafka/producer/ProducerConfig;I)Lkafka/api/TopicMetadataResponse; @190: astore
  Reason:
    Type top (current frame, locals[12]) is not assignable to &apos;kafka/producer/SyncProducer&apos; (stack map, locals[12])
  Current Frame:
    bci: @63
    flags: { }
    locals: { &apos;kafka/client/ClientUtils$&apos;, &apos;scala/collection/Set&apos;, &apos;scala/collection/Seq&apos;, &apos;kafka/producer/ProducerConfig&apos;, integer, integer, &apos;scala/runtime/IntRef&apos;, &apos;kafka/api/TopicMetadataRequest&apos;, &apos;kafka/api/TopicMetadataResponse&apos;, &apos;java/lang/Throwable&apos;, &apos;scala/collection/Seq&apos;, &apos;kafka/producer/SyncProducer&apos; }
    stack: { &apos;java/lang/Throwable&apos; }
  Stackmap Frame:
    bci: @190
    flags: { }
    locals: { &apos;kafka/client/ClientUtils$&apos;, &apos;scala/collection/Set&apos;, &apos;scala/collection/Seq&apos;, &apos;kafka/producer/ProducerConfig&apos;, integer, integer, &apos;scala/runtime/IntRef&apos;, &apos;kafka/api/TopicMetadataRequest&apos;, &apos;kafka/api/TopicMetadataResponse&apos;, &apos;java/lang/Throwable&apos;, &apos;scala/collection/Seq&apos;, top, &apos;kafka/producer/SyncProducer&apos; }
    stack: { &apos;java/lang/Throwable&apos; }
  Bytecode:
    0x0000000: 0336 0503 b800 aa3a 06bb 00ac 59b2 00b1
    0x0000010: b600 b515 042d b600 ba2b b900 c001 00b7
    0x0000020: 00c3 3a07 013a 0801 3a09 b200 c82c b200
    0x0000030: cdb6 00d1 b600 d5c0 00d7 3a0a a700 353a
    0x0000040: 0b2a bb00 0b59 2b15 0419 0619 0ab7 00de
    0x0000050: bb00 0d59 190b b700 e1b6 00e3 190b 3a09
    0x0000060: 1906 1906 b400 e704 60b5 00e7 190c b600
    0x0000070: ea19 06b4 00e7 190a b900 ee01 00a2 0057
    0x0000080: 1505 9a00 52b2 00f3 2d19 0a19 06b4 00e7
    0x0000090: b900 f702 00c0 00f9 b600 fd3a 0c2a bb00
    0x00000a0: 0f59 2b15 0419 0619 0ab7 00fe b601 0019
    0x00000b0: 0c19 07b6 0104 3a08 0436 05a7 ffa5 3a0d
    0x00000c0: 1906 1906 b400 e704 60b5 00e7 190c b600
    0x00000d0: ea19 0dbf 1505 9900 122a bb00 1159 2bb7
    0x00000e0: 0107 b601 0919 08b0 bb01 0b59 bb01 0d59
    0x00000f0: b201 1213 0114 b601 18b7 011a b201 1205
    0x0000100: bd00 0459 032b 5359 0419 0a53 b601 1eb6
    0x0000110: 0122 1909 b701 25bf                    
  Exception Handler Table:
    bci [175, 190] =&amp;gt; handler: 63
    bci [175, 190] =&amp;gt; handler: 190
    bci [63, 96] =&amp;gt; handler: 190
  Stackmap Table:
    full_frame(@63,{Object[#2],Object[#188],Object[#215],Object[#183],Integer,Integer,Object[#166],Object[#172],Object[#217],Object[#72],Object[#215],Object[#219]},{Object[#72]})
    full_frame(@96,{Object[#2],Object[#188],Object[#215],Object[#183],Integer,Integer,Object[#166],Object[#172],Object[#217],Object[#72],Object[#215],Top,Object[#219]},{})
    chop_frame(@113,2)
    full_frame(@190,{Object[#2],Object[#188],Object[#215],Object[#183],Integer,Integer,Object[#166],Object[#172],Object[#217],Object[#72],Object[#215],Top,Object[#219]},{Object[#72]})
    chop_frame(@212,2)
    same_frame(@232)
 
	at kafka.consumer.ConsumerFetcherManager$LeaderFinderThread.doWork(ConsumerFetcherManager.scala:65)
	at kafka.utils.ShutdownableThread.run(ShutdownableThread.scala:63)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which looks like it&apos;s coming from the change in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3375&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-3375&lt;/a&gt;.  The suggested fix was to rebuild the 0.10.1.1 jar without&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;-target:jvm-${sourceCompatibility}&quot;&lt;/span&gt;.toString(),
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in the `scalaCompileOptions.additionalParameters`.&lt;/p&gt;

&lt;p&gt;Once we made this change and rebuilt the jar the VerifyError stopped happening.&lt;/p&gt;

&lt;p&gt;The complete diff of the change we used is&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/build.gradle b/build.gradle
index fded48e05..857144d62 100644
--- a/build.gradle
+++ b/build.gradle
@@ -250,7 +250,6 @@ subprojects {
       &quot;-deprecation&quot;,
       &quot;-unchecked&quot;,
       &quot;-encoding&quot;, &quot;utf8&quot;,
-      &quot;-target:jvm-${sourceCompatibility}&quot;.toString(),
       &quot;-Xlog-reflective-calls&quot;,
       &quot;-feature&quot;,
       &quot;-language:postfixOps&quot;,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sriharsha&quot; class=&quot;user-hover&quot; rel=&quot;sriharsha&quot;&gt;sriharsha&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13037870">KAFKA-4698</key>
            <summary>`-target:jvm-1.7` in scalaCompileOptions seems to cause java.lang.VerifyError when loading kafka/client/ClientUtils </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ijuma">Ismael Juma</assignee>
                                    <reporter username="cheister">Chris Heisterkamp</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jan 2017 22:35:17 +0000</created>
                <updated>Thu, 26 Jan 2017 02:30:44 +0000</updated>
                            <resolved>Thu, 26 Jan 2017 00:52:42 +0000</resolved>
                                    <version>0.10.1.1</version>
                                    <fixVersion>0.10.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15838906" author="githubbot" created="Thu, 26 Jan 2017 00:40:37 +0000"  >&lt;p&gt;GitHub user ijuma opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2434&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2434&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4698&quot; title=&quot;`-target:jvm-1.7` in scalaCompileOptions seems to cause java.lang.VerifyError when loading kafka/client/ClientUtils &quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4698&quot;&gt;&lt;del&gt;KAFKA-4698&lt;/del&gt;&lt;/a&gt;: VerifyError in kafka/client/ClientUtils due to -target:jvm-1.7&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ijuma/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ijuma/kafka&lt;/a&gt; kafka-4698-target-1.7-verify-error&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2434.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2434.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2434&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 31ad0cca4a446697571c1d70e04cf67ba4785461&lt;br/&gt;
Author: Ismael Juma &amp;lt;ismael@juma.me.uk&amp;gt;&lt;br/&gt;
Date:   2017-01-26T00:40:01Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4698&quot; title=&quot;`-target:jvm-1.7` in scalaCompileOptions seems to cause java.lang.VerifyError when loading kafka/client/ClientUtils &quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4698&quot;&gt;&lt;del&gt;KAFKA-4698&lt;/del&gt;&lt;/a&gt;: VerifyError in kafka/client/ClientUtils due to -target:jvm-1.7`&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15838926" author="hachikuji" created="Thu, 26 Jan 2017 00:52:42 +0000"  >&lt;p&gt;Issue resolved by pull request 2434&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2434&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2434&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15838927" author="githubbot" created="Thu, 26 Jan 2017 00:52:47 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2434&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2434&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15838978" author="nickt" created="Thu, 26 Jan 2017 01:33:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt; - any chance we can get this into 0.10.1.2 (if that&apos;s going to be a release) as a bugfix / hotfix?&lt;/p&gt;</comment>
                            <comment id="15838999" author="ijuma" created="Thu, 26 Jan 2017 01:44:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nickt&quot; class=&quot;user-hover&quot; rel=&quot;nickt&quot;&gt;nickt&lt;/a&gt;, we can cherry-pick this into the 0.10.1 branch, but 0.10.2.0 will be out before 0.10.1.2. The former should be out in February while there is currently no date for 0.10.1.2.&lt;/p&gt;</comment>
                            <comment id="15839068" author="ijuma" created="Thu, 26 Jan 2017 02:30:44 +0000"  >&lt;p&gt;On second thought, I am not sure if we can backport this to 0.10.1.2. We&apos;d have to make sure that it doesn&apos;t cause binary compatibility issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i397t3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>