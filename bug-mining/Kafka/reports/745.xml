<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:44:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1901] Move Kafka version to be generated in code by build (instead of in manifest)</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1901</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;With 0.8.2 (rc2), I&apos;ve started seeing this warning in the logs of apps deployed to our staging (both server and client):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2015-01-23 00:55:25,273  WARN [async-message-sender-0] common.AppInfo$ - Can&apos;t read Kafka version from MANIFEST.MF. Possible cause: java.lang.NullPointerException
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The issues is that in our deployment, apps are deployed with single &apos;shaded&apos; jars (e.g. using the maven shade plugin).  This means the MANIFEST.MF file won&apos;t have a kafka version.  Instead, suggest the kafka build generate the proper version in code, as part of the build.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12770011">KAFKA-1901</key>
            <summary>Move Kafka version to be generated in code by build (instead of in manifest)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="omkreddy">Manikumar</assignee>
                                    <reporter username="jbrosenberg@gmail.com">Jason Rosenberg</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Jan 2015 06:52:38 +0000</created>
                <updated>Wed, 6 Jan 2016 20:49:07 +0000</updated>
                            <resolved>Thu, 20 Aug 2015 20:28:39 +0000</resolved>
                                    <version>0.8.2.0</version>
                                    <fixVersion>0.9.0.0</fixVersion>
                                        <due></due>
                            <votes>3</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14293913" author="jbrosenberg@gmail.com" created="Tue, 27 Jan 2015 18:23:28 +0000"  >&lt;p&gt;At the very least, this could be updated to just log at INFO level, and have it state that the version was not available in the manifest (rather than log an NPE).&lt;/p&gt;</comment>
                            <comment id="14294803" author="jjkoshy" created="Wed, 28 Jan 2015 07:06:02 +0000"  >&lt;p&gt;Funny I was thinking about this earlier today - I think we should actually extract the git hash as well and generate some code that produces the app-info. &lt;a href=&quot;http://forums.gradle.org/gradle/topics/how_can_i_store_the_git_revision_for_use_in_the_project&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://forums.gradle.org/gradle/topics/how_can_i_store_the_git_revision_for_use_in_the_project&lt;/a&gt;&lt;br/&gt;
So app-info would include git hash, branch, major/minor version, etc. Furthermore, we can emit a metric that reports the md5 of this entire app-info string modulo some large number (say 100000). That may be convenient to (at a glance at graphs) say the brokers are all running the same version. I&apos;m more interested in the app-info string though for the git hash. When people report issues it is always helpful to get the precise git hash they are at if they are (say) on trunk.&lt;/p&gt;</comment>
                            <comment id="14294838" author="joestein" created="Wed, 28 Jan 2015 07:43:56 +0000"  >&lt;p&gt;Can we collect that info during a meta data fetch for producers and consumers too? We can visualize producers, consumers and brokers roll states from each brokers perspective.&lt;/p&gt;</comment>
                            <comment id="14295566" author="jjkoshy" created="Wed, 28 Jan 2015 18:27:09 +0000"  >&lt;p&gt;Can you clarify what you mean by metadata fetch for p/c and rolling states? Producers and consumers also contain app-info right?&lt;/p&gt;</comment>
                            <comment id="14295614" author="joestein" created="Wed, 28 Jan 2015 18:53:53 +0000"  >&lt;p&gt;The same way you are suggesting for the brokers to have their metric for version emitted, do the same from producers and consumers. I think though that the producer and consumer metric should keep flowing down to the brokers so you see the metrics of what each broker is seeing for each producer also. Ops can watch the brokers roll and then all the different consumers and producers and see how everything is going during testing prior to release succinctly. Making sure this is in the wire protocol allows non apache clients to utilize the feature.&lt;/p&gt;</comment>
                            <comment id="14371784" author="jbrosenberg@gmail.com" created="Fri, 20 Mar 2015 18:19:48 +0000"  >&lt;p&gt;This is really a pretty severe error.  Any client that uses the javaapi producer within it&apos;s app will see this error everytime the app is started.  It&apos;s not just the server, but any producer client.  It would seem a quick fix would be to catch the NPE, and log as INFO that it was unable to determine the kafka version.  Or log nothing at all.&lt;/p&gt;

&lt;p&gt;After rolling this out to our environment, I&apos;m fielding lots of inquiries from app developers (should I be worried about this?)....&lt;/p&gt;</comment>
                            <comment id="14597558" author="omkreddy" created="Tue, 23 Jun 2015 12:10:12 +0000"  >&lt;p&gt;Probably the easiest thing to do would be to generate a properties file (kafkaversion.props) with  version, git-hash info in it and put that in kafka jar as a resource. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbrosenberg%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;jbrosenberg@gmail.com&quot;&gt;jbrosenberg@gmail.com&lt;/a&gt; Do you think this approach works for you? &lt;/p&gt;</comment>
                            <comment id="14599317" author="jbrosenberg@gmail.com" created="Wed, 24 Jun 2015 12:11:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omkreddy&quot; class=&quot;user-hover&quot; rel=&quot;omkreddy&quot;&gt;omkreddy&lt;/a&gt; Yes, that sounds find.  Preferably it should not be at the top-level directory, so as not to be confusing when bundled as part of a shaded jar!&lt;/p&gt;</comment>
                            <comment id="14600961" author="omkreddy" created="Thu, 25 Jun 2015 10:11:57 +0000"  >&lt;p&gt;Created reviewboard &lt;a href=&quot;https://reviews.apache.org/r/35867/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/35867/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14602524" author="omkreddy" created="Fri, 26 Jun 2015 07:49:50 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/35867/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/35867/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14622151" author="omkreddy" created="Fri, 10 Jul 2015 11:15:59 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/35867/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/35867/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14622154" author="omkreddy" created="Fri, 10 Jul 2015 11:20:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt; pinging for review&lt;/p&gt;</comment>
                            <comment id="14622332" author="jjkoshy" created="Fri, 10 Jul 2015 13:57:50 +0000"  >&lt;p&gt;Will review today.&lt;/p&gt;</comment>
                            <comment id="14626292" author="omkreddy" created="Tue, 14 Jul 2015 12:33:19 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/35867/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/35867/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14679061" author="omkreddy" created="Sun, 9 Aug 2015 09:37:34 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/35867/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/35867/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14704414" author="omkreddy" created="Thu, 20 Aug 2015 07:09:13 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/35867/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/35867/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14705702" author="jjkoshy" created="Thu, 20 Aug 2015 20:28:39 +0000"  >&lt;p&gt;Thanks for the patch - committed to trunk.&lt;/p&gt;</comment>
                            <comment id="14737786" author="guozhang" created="Wed, 9 Sep 2015 23:16:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omkreddy&quot; class=&quot;user-hover&quot; rel=&quot;omkreddy&quot;&gt;omkreddy&lt;/a&gt; I ran into an issue with determineCommitId task in build.gradle because I packed the refs into .git/packed-refs, and hence .git/refs/heads becomes empty. Is it resolvable in build.gradle?&lt;/p&gt;</comment>
                            <comment id="14737787" author="guozhang" created="Wed, 9 Sep 2015 23:16:39 +0000"  >&lt;p&gt;Just to be more clear, an error is thrown in line 404 complaining there is no .git/ref/heads/&lt;span class=&quot;error&quot;&gt;&amp;#91;BRANCH_NAME&amp;#93;&lt;/span&gt; file.&lt;/p&gt;</comment>
                            <comment id="14742546" author="githubbot" created="Sun, 13 Sep 2015 16:54:27 +0000"  >&lt;p&gt;GitHub user omkreddy opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/209&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1901&quot; title=&quot;Move Kafka version to be generated in code by build (instead of in manifest)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1901&quot;&gt;&lt;del&gt;KAFKA-1901&lt;/del&gt;&lt;/a&gt;: follow-up on &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1901&quot; title=&quot;Move Kafka version to be generated in code by build (instead of in manifest)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1901&quot;&gt;&lt;del&gt;KAFKA-1901&lt;/del&gt;&lt;/a&gt;; Added error handling.&lt;/p&gt;

&lt;p&gt;    @guozhangwang  added .git/refs/heads/ file existence check.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/omkreddy/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/omkreddy/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1901&quot; title=&quot;Move Kafka version to be generated in code by build (instead of in manifest)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1901&quot;&gt;&lt;del&gt;KAFKA-1901&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/209.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/209.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #209&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="15086254" author="githubbot" created="Wed, 6 Jan 2016 20:49:07 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/209&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12741831" name="KAFKA-1901.patch" size="14671" author="omkreddy" created="Thu, 25 Jun 2015 10:11:49 +0000"/>
                            <attachment id="12742069" name="KAFKA-1901_2015-06-26_13:16:29.patch" size="14467" author="omkreddy" created="Fri, 26 Jun 2015 07:49:42 +0000"/>
                            <attachment id="12744693" name="KAFKA-1901_2015-07-10_16:42:53.patch" size="14268" author="omkreddy" created="Fri, 10 Jul 2015 11:15:52 +0000"/>
                            <attachment id="12745245" name="KAFKA-1901_2015-07-14_17:59:56.patch" size="15201" author="omkreddy" created="Tue, 14 Jul 2015 12:32:58 +0000"/>
                            <attachment id="12749456" name="KAFKA-1901_2015-08-09_15:04:39.patch" size="18031" author="omkreddy" created="Sun, 9 Aug 2015 09:37:27 +0000"/>
                            <attachment id="12751430" name="KAFKA-1901_2015-08-20_12:35:00.patch" size="17492" author="omkreddy" created="Thu, 20 Aug 2015 07:09:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24sbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jjkoshy</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>