<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:01:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5051] Avoid DNS reverse lookup in security-critical TLS code path</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5051</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;At the moment SSL engine is created using the hostname obtained using &lt;tt&gt;InetAddress#getHostName&lt;/tt&gt; which performs unnecessary reverse DNS lookups.&lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;Scenarios%3A&quot;&gt;&lt;/a&gt;Scenarios:&lt;/h2&gt;

&lt;h3&gt;&lt;a name=&quot;Serverside&quot;&gt;&lt;/a&gt;Server-side&lt;/h3&gt;
&lt;h4&gt;&lt;a name=&quot;Scenario%3AServeracceptsconnectionfromaclient&quot;&gt;&lt;/a&gt;Scenario: Server accepts connection from a client&lt;/h4&gt;
&lt;p&gt;Broker knows only client IP address. At the moment broker does a reverse lookup. This is unnecessary since the server does not verify or use client hostname. It can block the network thread for several seconds in some configurations. The IP address should be used directly.&lt;/p&gt;

&lt;h3&gt;&lt;a name=&quot;Clientside&quot;&gt;&lt;/a&gt;Client-side&lt;/h3&gt;
&lt;h4&gt;&lt;a name=&quot;Scenario%3AClientconnectstoserverusinghostname&quot;&gt;&lt;/a&gt;Scenario: Client connects to server using hostname&lt;/h4&gt;
&lt;p&gt;No lookup is necessary and the hostname is used to create the SSL engine. This hostname is validated against the hostname in SubjectAltName (dns) or CommonName in the certificate if hostname verification is enabled. Authentication fails if hostname does not match. This is handled correctly in the current code.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Scenario%3AClientconnectstoserverusingIPaddress%2CbutcertificatecontainsonlySubjectAltName%28dns%29&quot;&gt;&lt;/a&gt;Scenario: Client connects to server using IP address, but certificate contains only SubjectAltName (dns)&lt;/h4&gt;
&lt;p&gt;The current code does hostname verification using the hostname obtained through reverse name lookup. But use of reverse DNS lookup to determine hostname introduces a security vulnerability since authentication would be reliant on a secure DNS. Hence hostname verification should fail in this case. &lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Scenario%3AClientconnectstoserverusingIPaddressandcertificatecontainsSubjectAltName%28ipaddress%29.&quot;&gt;&lt;/a&gt;Scenario: Client connects to server using IP address and certificate contains SubjectAltName (ipaddress).&lt;/h4&gt;
&lt;p&gt;This could be used when Kafka is on a private network. The current code uses reverse DNS lookup to determine hostname. If reverse lookup succeeds, authentication fails since the hostname is matched against the IP address in the certificate. But if reverse lookup fails, SSL engine is created with the IP address and authentication succeeds. For consistency and to avoid dependency on a potentially insecure DNS, reverse DNS lookup should be avoided and the IP address specified by the client for connection should be used to create the SSL engine.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13062971">KAFKA-5051</key>
            <summary>Avoid DNS reverse lookup in security-critical TLS code path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsivaram">Rajini Sivaram</assignee>
                                    <reporter username="rsivaram">Rajini Sivaram</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Apr 2017 18:37:02 +0000</created>
                <updated>Tue, 25 Jul 2017 11:11:34 +0000</updated>
                            <resolved>Tue, 6 Jun 2017 11:35:30 +0000</resolved>
                                    <version>0.10.2.0</version>
                                    <fixVersion>0.11.0.0</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15963338" author="githubbot" created="Mon, 10 Apr 2017 18:51:25 +0000"  >&lt;p&gt;GitHub user rajinisivaram opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2835&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2835&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5051&quot; title=&quot;Avoid DNS reverse lookup in security-critical TLS code path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5051&quot;&gt;&lt;del&gt;KAFKA-5051&lt;/del&gt;&lt;/a&gt;: Avoid reverse DNS lookup to obtain hostname for TLS&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rajinisivaram/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rajinisivaram/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5051&quot; title=&quot;Avoid DNS reverse lookup in security-critical TLS code path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5051&quot;&gt;&lt;del&gt;KAFKA-5051&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2835.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2835.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2835&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5805bd5a2cf19a24e89534b10708c42e7b402a0b&lt;br/&gt;
Author: Rajini Sivaram &amp;lt;rajinisivaram@googlemail.com&amp;gt;&lt;br/&gt;
Date:   2017-04-04T19:21:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5051&quot; title=&quot;Avoid DNS reverse lookup in security-critical TLS code path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5051&quot;&gt;&lt;del&gt;KAFKA-5051&lt;/del&gt;&lt;/a&gt;: Avoid reverse DNS lookup to obtain hostname for TLS&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16038678" author="rsivaram" created="Tue, 6 Jun 2017 11:35:30 +0000"  >&lt;p&gt;Issue resolved by pull request 2835&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2835&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2835&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16038680" author="githubbot" created="Tue, 6 Jun 2017 11:36:22 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2835&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2835&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3dg5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>