<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:53:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-2551] Unclean leader election docs outdated</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-2551</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Current unclean leader election docs state:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In the future, we would like to make this configurable to better support use cases where downtime is preferable to inconsistency.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Since 0.8.2.0, unclean leader election strategy (whether to allow it or not) is already configurable via &lt;tt&gt;unclean.leader.election.enable&lt;/tt&gt; broker config property.&lt;/p&gt;

&lt;p&gt;That sentence is in both &lt;a href=&quot;https://svn.apache.org/repos/asf/kafka/site/083/design.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/kafka/site/083/design.html&lt;/a&gt; and &lt;a href=&quot;https://svn.apache.org/repos/asf/kafka/site/082/design.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/kafka/site/082/design.html&lt;/a&gt; near the end of &quot;Unclean leader election: What if they all die?&quot; section. Next section, &quot;Availability and Durability Guarantees&quot;, mentions ability to disable unclean leader election, so likely just this one reference needs to be updated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12864254">KAFKA-2551</key>
            <summary>Unclean leader election docs outdated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="omkreddy">Manikumar</assignee>
                                    <reporter username="sslavic">Stevo Slavi&#263;</reporter>
                        <labels>
                            <label>documentation</label>
                            <label>newbie</label>
                    </labels>
                <created>Tue, 15 Sep 2015 12:54:36 +0000</created>
                <updated>Mon, 14 Mar 2016 09:17:29 +0000</updated>
                            <resolved>Mon, 14 Mar 2016 09:17:29 +0000</resolved>
                                    <version>0.8.2.2</version>
                                    <fixVersion>0.10.0.0</fixVersion>
                                    <component>website</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14900422" author="jinxing6042@126.com" created="Mon, 21 Sep 2015 09:22:03 +0000"  >&lt;p&gt;yes I agree with you;&lt;br/&gt;
currently we can configure via unclean.leader.election.enable;&lt;/p&gt;

&lt;p&gt;for this parameter, I did an experiment:&lt;br/&gt;
I have 2 brokers(broker0 and broker1) and 1 topic named &quot;p1r2&quot; with 1 partition and 2 replicas;&lt;br/&gt;
firstly, I use default unclean.leader.election.enable=true; at this moment log size=1000;&lt;br/&gt;
then I shutdown broker1, and use console producer to send messages into kafka queue, tail log size=1009;&lt;br/&gt;
then I shutdown broker0, and restart broker1, found log size=1000, but the leader changed to be broker1;&lt;br/&gt;
but when I want to send messages to kafka(at this moment, only broker1 alive), I got exception as below:&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2015-09-21 17:06:06,654&amp;#93;&lt;/span&gt; ERROR fetching topic metadata for topics &lt;span class=&quot;error&quot;&gt;&amp;#91;Set(p1r2)&amp;#93;&lt;/span&gt; from broker &lt;span class=&quot;error&quot;&gt;&amp;#91;ArrayBuffer(id:0,host:soho-pipe-kafka-test1-test,port:9092, id:1,host:soho-pipe-kafka-test2-test:9092,port:9092)&amp;#93;&lt;/span&gt; failed (kafka.utils.Utils$)&lt;br/&gt;
kafka.common.KafkaException: fetching topic metadata for topics &lt;span class=&quot;error&quot;&gt;&amp;#91;Set(p1r2)&amp;#93;&lt;/span&gt; from broker &lt;span class=&quot;error&quot;&gt;&amp;#91;ArrayBuffer(id:0,host:soho-pipe-kafka-test1-test,port:9092, id:1,host:soho-pipe-kafka-test2-test:9092,port:9092)&amp;#93;&lt;/span&gt; failed&lt;br/&gt;
	at kafka.client.ClientUtils$.fetchTopicMetadata(ClientUtils.scala:72)&lt;br/&gt;
	at kafka.producer.BrokerPartitionInfo.updateInfo(BrokerPartitionInfo.scala:82)&lt;br/&gt;
	at kafka.producer.async.DefaultEventHandler$$anonfun$handle$2.apply$mcV$sp(DefaultEventHandler.scala:78)&lt;br/&gt;
	at kafka.utils.Utils$.swallow(Utils.scala:172)&lt;br/&gt;
	at kafka.utils.Logging$class.swallowError(Logging.scala:106)&lt;br/&gt;
	at kafka.utils.Utils$.swallowError(Utils.scala:45)&lt;br/&gt;
	at kafka.producer.async.DefaultEventHandler.handle(DefaultEventHandler.scala:78)&lt;br/&gt;
	at kafka.producer.async.ProducerSendThread.tryToHandle(ProducerSendThread.scala:105)&lt;br/&gt;
	at kafka.producer.async.ProducerSendThread$$anonfun$processEvents$3.apply(ProducerSendThread.scala:88)&lt;br/&gt;
	at kafka.producer.async.ProducerSendThread$$anonfun$processEvents$3.apply(ProducerSendThread.scala:68)&lt;br/&gt;
	at scala.collection.immutable.Stream.foreach(Stream.scala:547)&lt;br/&gt;
	at kafka.producer.async.ProducerSendThread.processEvents(ProducerSendThread.scala:67)&lt;br/&gt;
	at kafka.producer.async.ProducerSendThread.run(ProducerSendThread.scala:45)&lt;br/&gt;
Caused by: java.nio.channels.ClosedChannelException&lt;br/&gt;
	at kafka.network.BlockingChannel.send(BlockingChannel.scala:100)&lt;br/&gt;
	at kafka.producer.SyncProducer.liftedTree1$1(SyncProducer.scala:73)&lt;br/&gt;
	at kafka.producer.SyncProducer.kafka$producer$SyncProducer$$doSend(SyncProducer.scala:72)&lt;br/&gt;
	at kafka.producer.SyncProducer.send(SyncProducer.scala:113)&lt;br/&gt;
	at kafka.client.ClientUtils$.fetchTopicMetadata(ClientUtils.scala:58)&lt;br/&gt;
	... 12 more&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2015-09-21 17:06:06,655&amp;#93;&lt;/span&gt; ERROR Failed to send requests for topics p1r2 with correlation ids in &lt;span class=&quot;error&quot;&gt;&amp;#91;17,24&amp;#93;&lt;/span&gt; (kafka.producer.async.DefaultEventHandler)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2015-09-21 17:06:06,655&amp;#93;&lt;/span&gt; ERROR Error in handling batch of 1 events (kafka.producer.async.ProducerSendThread)&lt;br/&gt;
kafka.common.FailedToSendMessageException: Failed to send messages after 3 tries.&lt;br/&gt;
	at kafka.producer.async.DefaultEventHandler.handle(DefaultEventHandler.scala:90)&lt;br/&gt;
	at kafka.producer.async.ProducerSendThread.tryToHandle(ProducerSendThread.scala:105)&lt;br/&gt;
	at kafka.producer.async.ProducerSendThread$$anonfun$processEvents$3.apply(ProducerSendThread.scala:88)&lt;br/&gt;
	at kafka.producer.async.ProducerSendThread$$anonfun$processEvents$3.apply(ProducerSendThread.scala:68)&lt;br/&gt;
	at scala.collection.immutable.Stream.foreach(Stream.scala:547)&lt;br/&gt;
	at kafka.producer.async.ProducerSendThread.processEvents(ProducerSendThread.scala:67)&lt;br/&gt;
	at kafka.producer.async.ProducerSendThread.run(ProducerSendThread.scala:45)&lt;br/&gt;
with unclean.leader.election.enable, I was expecting that I can still send messages to broker1, even though I lost messages on broker0;&lt;br/&gt;
Am I wrong?&lt;/p&gt;</comment>
                            <comment id="15192179" author="omkreddy" created="Sun, 13 Mar 2016 07:31:15 +0000"  >&lt;p&gt;GitHub user omkreddy opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1054&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15192703" author="githubbot" created="Mon, 14 Mar 2016 03:33:39 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1054&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k78v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>