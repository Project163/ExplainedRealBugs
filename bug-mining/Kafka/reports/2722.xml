<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:24:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4996] Fix findbugs multithreaded correctness warnings for streams</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4996</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Fix findbugs multithreaded correctness warnings for streams&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Multithreaded correctness Warnings                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                          
   Code Warning                                                                                                                                                                                                                                                                           
   AT   Sequence of calls to java.util.concurrent.ConcurrentHashMap may not be atomic in org.apache.kafka.streams.state.internals.Segments.getOrCreateSegment(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, ProcessorContext)                                                                                                     
   IS   Inconsistent synchronization of org.apache.kafka.streams.KafkaStreams.stateListener; locked 66% of time                                                                                                                                                                           
   IS   Inconsistent synchronization of org.apache.kafka.streams.processor.internals.StreamThread.stateListener; locked 66% of time                                                                                                                                                       
   IS   Inconsistent synchronization of org.apache.kafka.streams.processor.TopologyBuilder.applicationId; locked 50% of time                                                                                                                                                              
   IS   Inconsistent synchronization of org.apache.kafka.streams.state.internals.CachingKeyValueStore.context; locked 66% of time                                                                                                                                                         
   IS   Inconsistent synchronization of org.apache.kafka.streams.state.internals.CachingWindowStore.cache; locked 60% of time                                                                                                                                                             
   IS   Inconsistent synchronization of org.apache.kafka.streams.state.internals.CachingWindowStore.context; locked 66% of time                                                                                                                                                           
   IS   Inconsistent synchronization of org.apache.kafka.streams.state.internals.CachingWindowStore.name; locked 60% of time                                                                                                                                                              
   IS   Inconsistent synchronization of org.apache.kafka.streams.state.internals.CachingWindowStore.serdes; locked 70% of time                                                                                                                                                            
   IS   Inconsistent synchronization of org.apache.kafka.streams.state.internals.RocksDBStore.db; locked 63% of time                                                                                                                                                                      
   IS   Inconsistent synchronization of org.apache.kafka.streams.state.internals.RocksDBStore.serdes; locked 76% of time                                                                                                                                                                  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13060808">KAFKA-4996</key>
            <summary>Fix findbugs multithreaded correctness warnings for streams</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lthomas">Leah Thomas</assignee>
                                    <reporter username="cmccabe">Colin McCabe</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Fri, 31 Mar 2017 21:19:15 +0000</created>
                <updated>Tue, 30 Jun 2020 20:15:59 +0000</updated>
                            <resolved>Tue, 30 Jun 2020 20:15:59 +0000</resolved>
                                                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15995430" author="githubbot" created="Wed, 3 May 2017 18:54:14 +0000"  >&lt;p&gt;GitHub user amitdaga opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2966&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2966&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4996&quot; title=&quot;Fix findbugs multithreaded correctness warnings for streams&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4996&quot;&gt;&lt;del&gt;KAFKA-4996&lt;/del&gt;&lt;/a&gt;: Fix findbugs multithreaded correctness warnings for streams&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/amitdaga/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/amitdaga/kafka&lt;/a&gt; findbugs-streams-multithread&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2966.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2966.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2966&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit bf7c4cf3588112e8d9518b43ed086aa36588d75f&lt;br/&gt;
Author: Amit Daga &amp;lt;adaga@adobe.com&amp;gt;&lt;br/&gt;
Date:   2017-04-30T17:58:39Z&lt;/p&gt;

&lt;p&gt;    Fixing multithread correctness warning in streams&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15997772" author="githubbot" created="Fri, 5 May 2017 04:00:39 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2966&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2966&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16954864" author="mjsax" created="Fri, 18 Oct 2019 17:49:35 +0000"  >&lt;p&gt;The corresponding PR was merged. Closing this ticket.&lt;/p&gt;</comment>
                            <comment id="16954877" author="ableegoldman" created="Fri, 18 Oct 2019 18:05:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;&#160;I was actually looking at the spotbugs file a little while back, and there are definitely still entries in there that reference this ticket. Not sure if we should reopen this, or just remove the&#160; &amp;lt;!-- TODO: fix this (see &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4996&quot; title=&quot;Fix findbugs multithreaded correctness warnings for streams&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4996&quot;&gt;&lt;del&gt;KAFKA-4996&lt;/del&gt;&lt;/a&gt;) --&amp;gt; ?&lt;/p&gt;</comment>
                            <comment id="16955070" author="mjsax" created="Sat, 19 Oct 2019 05:12:39 +0000"  >&lt;p&gt;Thanks for pointing out &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ableegoldman&quot; class=&quot;user-hover&quot; rel=&quot;ableegoldman&quot;&gt;ableegoldman&lt;/a&gt; &#8211; we should address it &#8211; I was assuming that the build would fail if there is an issue. But maybe we can only enable a failing build after we did some cleanup to make it pass to begin with...&lt;/p&gt;</comment>
                            <comment id="17107845" author="mjsax" created="Fri, 15 May 2020 02:04:13 +0000"  >&lt;p&gt;Is this still an issue?&lt;/p&gt;</comment>
                            <comment id="17142592" author="ableegoldman" created="Tue, 23 Jun 2020 03:32:20 +0000"  >&lt;p&gt;Took a quick look at removing the spotBugs rule exclusions, and we get failures on&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;InternalTopologyBuilder.applicationId&#160; &#8211; this should be fine, as we set this once at the beginning before we start up any other threads&lt;/li&gt;
	&lt;li&gt;StreamsMetadataState.localMetadata&#160; &#8211; I think this is actually not threadsafe, but should be? Seems like we synchronize on setting it, but expose it through a public API with no synchronization&lt;/li&gt;
	&lt;li&gt;CachingWindowStore.maxObservedTimestamp &#8211; this also seems potentially problematic. We only update it in the synchronized #put method, but it&apos;s used during #fetch methods which can be called from IQ threads&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Anyways, we had this multithread warning in the excluded rules for pretty much every package in Streams, which is definitely &quot;not good&quot;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13060800">KAFKA-4995</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13043734">KAFKA-4773</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3d2tj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>