<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:57:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4375] Kafka consumer may swallow some interrupts meant for the calling thread</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4375</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Apache Storm has added a new data source (&quot;spout&quot;) based on the Kafka 0.9 consumer. Storm interacts with the consumer by having one thread per spout instance loop calls to poll/commitSync etc. When Storm shuts down, another thread indicates that the looping threads should shut down by interrupting them, and joining them.&lt;/p&gt;

&lt;p&gt;If one of the looping threads happen to be interrupted while executing certain sleeps in some consumer methods (commitSync and committed at least), the interrupt can be lost because they contain a call to SystemTime.sleep, which swallows the interrupt.&lt;/p&gt;

&lt;p&gt;Is this behavior by design, or can SystemTime be changed to reset the thread interrupt flag when catching an InterruptedException? &lt;/p&gt;

&lt;p&gt;I haven&apos;t checked the rest of the client code, so it&apos;s possible that this is an issue in other parts of the code too.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13017794">KAFKA-4375</key>
            <summary>Kafka consumer may swallow some interrupts meant for the calling thread</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srdo">Stig Rohde D&#248;ssing</assignee>
                                    <reporter username="srdo">Stig Rohde D&#248;ssing</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Nov 2016 19:24:33 +0000</created>
                <updated>Fri, 9 Dec 2016 19:37:34 +0000</updated>
                            <resolved>Fri, 9 Dec 2016 19:36:51 +0000</resolved>
                                    <version>0.10.1.0</version>
                                    <fixVersion>0.10.2.0</fixVersion>
                                    <component>clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15634044" author="shikhar" created="Thu, 3 Nov 2016 19:58:32 +0000"  >&lt;p&gt;Good to have a report of this being a problem, I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4356&quot; title=&quot;o.a.k.common.utils.SystemTime.sleep() swallows InterruptedException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4356&quot;&gt;&lt;del&gt;KAFKA-4356&lt;/del&gt;&lt;/a&gt; recently after chancing on the code. It seems like an oversight rather than by design.&lt;/p&gt;</comment>
                            <comment id="15634337" author="srdo" created="Thu, 3 Nov 2016 21:23:04 +0000"  >&lt;p&gt;Happy to hear that. I&apos;ll try resetting the interrupt flag and see if the tests still run.&lt;/p&gt;</comment>
                            <comment id="15634442" author="githubbot" created="Thu, 3 Nov 2016 22:05:37 +0000"  >&lt;p&gt;GitHub user srdo opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2100&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2100&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4375&quot; title=&quot;Kafka consumer may swallow some interrupts meant for the calling thread&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4375&quot;&gt;&lt;del&gt;KAFKA-4375&lt;/del&gt;&lt;/a&gt;: Reset thread interrupted state in a few places where Inte&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;rruptedException is caught in a thread Kafka didn&apos;t start.&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4375&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-4375&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/srdo/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/srdo/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4375&quot; title=&quot;Kafka consumer may swallow some interrupts meant for the calling thread&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4375&quot;&gt;&lt;del&gt;KAFKA-4375&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2100.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2100.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2100&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f2fa7a09f0bb29b4c4245449714c9e0e2cda73be&lt;br/&gt;
Author: Stig Rohde D&#248;ssing &amp;lt;sdo@it-minds.dk&amp;gt;&lt;br/&gt;
Date:   2016-11-03T21:45:36Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4375&quot; title=&quot;Kafka consumer may swallow some interrupts meant for the calling thread&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4375&quot;&gt;&lt;del&gt;KAFKA-4375&lt;/del&gt;&lt;/a&gt;: Reset thread interrupted state in a few places where InterruptedException is caught in a thread Kafka didn&apos;t start&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15736106" author="hachikuji" created="Fri, 9 Dec 2016 19:36:52 +0000"  >&lt;p&gt;Issue resolved by pull request 2100&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2100&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2100&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15736108" author="githubbot" created="Fri, 9 Dec 2016 19:37:34 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2100&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2100&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13016225">KAFKA-4356</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35tqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>