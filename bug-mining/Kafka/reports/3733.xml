<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:38:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-16386] NETWORK_EXCEPTIONs from transaction verification are not translated</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-16386</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-14402&quot; title=&quot;Transactions Server Side Defense&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-14402&quot;&gt;&lt;del&gt;KAFKA-14402&lt;/del&gt;&lt;/a&gt; (&lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-890%3A+Transactions+Server-Side+Defense&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;KIP-890&lt;/a&gt;) adds verification with the transaction coordinator on Produce and TxnOffsetCommit paths as a defense against hanging transactions. For compatibility with older clients, retriable errors from the verification step are translated to ones already expected and handled by existing clients. When verification was added, we forgot to translate &lt;tt&gt;NETWORK_EXCEPTION&lt;/tt&gt; s.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dajac&quot; class=&quot;user-hover&quot; rel=&quot;dajac&quot;&gt;dajac&lt;/a&gt;&#160;noticed this manifesting as a test failure when tests/kafkatest/tests/core/transactions_test.py was run with an older client (prior to the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-16122&quot; title=&quot;TransactionsBounceTest -- server disconnected before response was received&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-16122&quot;&gt;&lt;del&gt;KAFKA-16122&lt;/del&gt;&lt;/a&gt;):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;tt&gt;NETWORK_EXCEPTION&lt;/tt&gt; is indeed returned as a partition error. The &lt;tt&gt;TransactionManager.TxnOffsetCommitHandler&lt;/tt&gt; considers it as a fatal error so it transitions to the fatal state.&lt;br/&gt;
It seems that there are two cases where the server could return it: (1) When the verification request times out or its connections is cut; or (2) in &lt;tt&gt;AddPartitionsToTxnManager.addTxnData&lt;/tt&gt; where we say that we use it because we want a retriable error.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The first case was triggered as part of the test. The second case happens when there is already a verification request (&lt;tt&gt;AddPartitionsToTxn&lt;/tt&gt;) in flight with the same epoch and we want clients to try again when we&apos;re not busy.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13572419">KAFKA-16386</key>
            <summary>NETWORK_EXCEPTIONs from transaction verification are not translated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="squah-confluent">Sean Quah</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Mar 2024 12:55:30 +0000</created>
                <updated>Thu, 25 Apr 2024 17:20:58 +0000</updated>
                            <resolved>Tue, 26 Mar 2024 11:26:54 +0000</resolved>
                                    <version>3.6.0</version>
                    <version>3.7.0</version>
                                    <fixVersion>3.7.1</fixVersion>
                    <fixVersion>3.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17838768" author="jolshan" created="Thu, 18 Apr 2024 18:54:49 +0000"  >&lt;p&gt;Note: For 3.6, this is only returned in the produce path which treats the exception as retriable. The TxnOffsetCommit path is the one that experiences the fatal error and is only in 3.7.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1o28g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>