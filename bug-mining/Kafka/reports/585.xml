<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:42:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1815] ServerShutdownTest fails in trunk.</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1815</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;I ran into these failures consistently when trying to build Kafka locally:&lt;/p&gt;

&lt;p&gt;kafka.server.ServerShutdownTest &amp;gt; testCleanShutdown FAILED&lt;br/&gt;
    java.lang.NullPointerException&lt;br/&gt;
        at kafka.server.ServerShutdownTest$$anonfun$verifyNonDaemonThreadsStatus$2.apply(ServerShutdownTest.scala:147)&lt;br/&gt;
        at kafka.server.ServerShutdownTest$$anonfun$verifyNonDaemonThreadsStatus$2.apply(ServerShutdownTest.scala:147)&lt;br/&gt;
        at scala.collection.TraversableOnce$$anonfun$count$1.apply(TraversableOnce.scala:114)&lt;br/&gt;
        at scala.collection.TraversableOnce$$anonfun$count$1.apply(TraversableOnce.scala:113)&lt;br/&gt;
        at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:33)&lt;br/&gt;
        at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:105)&lt;br/&gt;
        at scala.collection.TraversableOnce$class.count(TraversableOnce.scala:113)&lt;br/&gt;
        at scala.collection.mutable.ArrayOps$ofRef.count(ArrayOps.scala:105)&lt;br/&gt;
        at kafka.server.ServerShutdownTest.verifyNonDaemonThreadsStatus(ServerShutdownTest.scala:147)&lt;br/&gt;
        at kafka.server.ServerShutdownTest.testCleanShutdown(ServerShutdownTest.scala:101)&lt;/p&gt;

&lt;p&gt;kafka.server.ServerShutdownTest &amp;gt; testCleanShutdownWithDeleteTopicEnabled FAILED&lt;br/&gt;
    java.lang.NullPointerException&lt;br/&gt;
        at kafka.server.ServerShutdownTest$$anonfun$verifyNonDaemonThreadsStatus$2.apply(ServerShutdownTest.scala:147)&lt;br/&gt;
        at kafka.server.ServerShutdownTest$$anonfun$verifyNonDaemonThreadsStatus$2.apply(ServerShutdownTest.scala:147)&lt;br/&gt;
        at scala.collection.TraversableOnce$$anonfun$count$1.apply(TraversableOnce.scala:114)&lt;br/&gt;
        at scala.collection.TraversableOnce$$anonfun$count$1.apply(TraversableOnce.scala:113)&lt;br/&gt;
        at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:33)&lt;br/&gt;
        at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:105)&lt;br/&gt;
        at scala.collection.TraversableOnce$class.count(TraversableOnce.scala:113)&lt;br/&gt;
        at scala.collection.mutable.ArrayOps$ofRef.count(ArrayOps.scala:105)&lt;br/&gt;
        at kafka.server.ServerShutdownTest.verifyNonDaemonThreadsStatus(ServerShutdownTest.scala:147)&lt;br/&gt;
        at kafka.server.ServerShutdownTest.testCleanShutdownWithDeleteTopicEnabled(ServerShutdownTest.scala:114)&lt;/p&gt;

&lt;p&gt;kafka.server.ServerShutdownTest &amp;gt; testCleanShutdownAfterFailedStartup FAILED&lt;br/&gt;
    java.lang.NullPointerException&lt;br/&gt;
        at kafka.server.ServerShutdownTest$$anonfun$verifyNonDaemonThreadsStatus$2.apply(ServerShutdownTest.scala:147)&lt;br/&gt;
        at kafka.server.ServerShutdownTest$$anonfun$verifyNonDaemonThreadsStatus$2.apply(ServerShutdownTest.scala:147)&lt;br/&gt;
        at scala.collection.TraversableOnce$$anonfun$count$1.apply(TraversableOnce.scala:114)&lt;br/&gt;
        at scala.collection.TraversableOnce$$anonfun$count$1.apply(TraversableOnce.scala:113)&lt;br/&gt;
        at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:33)&lt;br/&gt;
        at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:105)&lt;br/&gt;
        at scala.collection.TraversableOnce$class.count(TraversableOnce.scala:113)&lt;br/&gt;
        at scala.collection.mutable.ArrayOps$ofRef.count(ArrayOps.scala:105)&lt;br/&gt;
        at kafka.server.ServerShutdownTest.verifyNonDaemonThreadsStatus(ServerShutdownTest.scala:147)&lt;br/&gt;
        at kafka.server.ServerShutdownTest.testCleanShutdownAfterFailedStartup(ServerShutdownTest.scala:141)&lt;/p&gt;

&lt;p&gt;It looks like Jenkins also had issues with these tests:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/Kafka-trunk/351/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Kafka-trunk/351/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I would like to provide a patch that fixes this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12760475">KAFKA-1815</key>
            <summary>ServerShutdownTest fails in trunk.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fanatoly">Anatoly Fayngelerin</assignee>
                                    <reporter username="fanatoly">Anatoly Fayngelerin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Dec 2014 16:44:23 +0000</created>
                <updated>Sat, 13 Dec 2014 16:10:30 +0000</updated>
                            <resolved>Fri, 12 Dec 2014 19:39:18 +0000</resolved>
                                                    <fixVersion>0.9.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14241460" author="copester" created="Wed, 10 Dec 2014 18:02:38 +0000"  >&lt;p&gt;Dear Committers, I have verified that shutdown_test_fix.patch does indeed fix the test failures in trunk. Please apply.&lt;/p&gt;

&lt;p&gt;Cheers!&lt;/p&gt;</comment>
                            <comment id="14244302" author="copester" created="Fri, 12 Dec 2014 15:56:09 +0000"  >&lt;p&gt;Unexpectedly, this was fixed by &lt;a href=&quot;https://github.com/apache/kafka/commit/e8ffbd0fee0bc715ad0fe6c9afe85715f84d8e51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/commit/e8ffbd0fee0bc715ad0fe6c9afe85715f84d8e51&lt;/a&gt; that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joestein&quot; class=&quot;user-hover&quot; rel=&quot;joestein&quot;&gt;joestein&lt;/a&gt; committed to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1812&quot; title=&quot; Allow IpV6 in configuration with parseCsvMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1812&quot;&gt;&lt;del&gt;KAFKA-1812&lt;/del&gt;&lt;/a&gt;. I&apos;m looking through his commit and don&apos;t see why it would fix this bug, but the test results don&apos;t lie.&lt;/p&gt;</comment>
                            <comment id="14244381" author="joestein" created="Fri, 12 Dec 2014 16:10:56 +0000"  >&lt;p&gt;CI says it is still broken &lt;a href=&quot;https://builds.apache.org/view/All/job/Kafka-trunk/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/All/job/Kafka-trunk/&lt;/a&gt; and it was broken for me when I did that commit... I didn&apos;t see this ticket until just now will look through it later when I have some time towards fixing this, I mentioned &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1650&quot; title=&quot;Mirror Maker could lose data on unclean shutdown.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1650&quot;&gt;&lt;del&gt;KAFKA-1650&lt;/del&gt;&lt;/a&gt; about it also&lt;/p&gt;</comment>
                            <comment id="14244393" author="copester" created="Fri, 12 Dec 2014 16:20:13 +0000"  >&lt;p&gt;I spoke too soon. I&apos;m now getting different test results after running this a bunch of times on our test farm. Sometimes the 3 tests on this ticket fail. Sometimes testMetricsLeak fails. Sometimes all 4 fail together.&lt;/p&gt;</comment>
                            <comment id="14244669" author="junrao" created="Fri, 12 Dec 2014 19:39:18 +0000"  >&lt;p&gt;Thanks for the patch. +1 and committed to trunk.&lt;/p&gt;</comment>
                            <comment id="14245115" author="copester" created="Sat, 13 Dec 2014 02:17:52 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt;, though that was actually &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fanatoly&quot; class=&quot;user-hover&quot; rel=&quot;fanatoly&quot;&gt;fanatoly&lt;/a&gt;&apos;s patch. In terms of current state of tests passing since the latest commit 523b36589e942cb99a95debd2c45e795ae533d08 for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1813&quot; title=&quot;Build fails for scala 2.9.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1813&quot;&gt;&lt;del&gt;KAFKA-1813&lt;/del&gt;&lt;/a&gt;, and I&apos;m seeing consistent passing of all the tests except for the occasional &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1501&quot; title=&quot;transient unit tests failures due to port already in use&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1501&quot;&gt;&lt;del&gt;KAFKA-1501&lt;/del&gt;&lt;/a&gt; failures which continue to haunt me. Thanks!&lt;/p&gt;</comment>
                            <comment id="14245396" author="junrao" created="Sat, 13 Dec 2014 16:10:30 +0000"  >&lt;p&gt;Thanks, updated the assignee to Anatoly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12686031" name="shutdown_test_fix.patch" size="2506" author="fanatoly" created="Tue, 9 Dec 2014 16:45:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i238e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>