<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:53:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3237] ConfigDef validators require a default value</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3237</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;I should be able to add a ConfigDef that has a validator but does has null as the default value. This would allow me to have a required property that is restricted to certain strings in this example. This exception should be thrown upon call to ConfigDef.parse instead. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ConfigDef def = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConfigDef();
def.define(key, Type.STRING, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ValidString.in(&lt;span class=&quot;code-quote&quot;&gt;&quot;ONE&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;TWO&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;THREE&quot;&lt;/span&gt;), Importance.HIGH, &lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Invalid value &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; configuration test: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; must be one of: ONE, TWO, THREE
org.apache.kafka.common.config.ConfigException: Invalid value &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; configuration enum_test: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; must be one of: ONE, TWO, THREE
	at org.apache.kafka.common.config.ConfigDef$ValidString.ensureValid(ConfigDef.java:349)
	at org.apache.kafka.common.config.ConfigDef$ConfigKey.&amp;lt;init&amp;gt;(ConfigDef.java:375)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12938980">KAFKA-3237</key>
            <summary>ConfigDef validators require a default value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jcustenborder">Jeremy Custenborder</assignee>
                                    <reporter username="jcustenborder">Jeremy Custenborder</reporter>
                        <labels>
                    </labels>
                <created>Sat, 13 Feb 2016 01:12:34 +0000</created>
                <updated>Wed, 9 Mar 2016 06:01:54 +0000</updated>
                            <resolved>Wed, 9 Mar 2016 05:57:08 +0000</resolved>
                                    <version>0.9.0.0</version>
                                    <fixVersion>0.10.0.0</fixVersion>
                                    <component>config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15145692" author="jcustenborder" created="Sat, 13 Feb 2016 01:41:03 +0000"  >&lt;p&gt;There are two test cases &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/test/java/org/apache/kafka/common/config/ConfigDefTest.java#L118-L126&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testInvalidDefaultRange() and testInvalidDefaultString()&lt;/a&gt; which test the defaults passed in with ConfigDef.define(). Does checking the default really matter? The exception text is going to be the same if checked during define or when parse() is called. Correcting the behavior in the description requires removal of these two test cases. Does that sound valid?&lt;/p&gt;</comment>
                            <comment id="15145710" author="ijuma" created="Sat, 13 Feb 2016 02:01:01 +0000"  >&lt;p&gt;Why don&apos;t you use the overload of define that doesn&apos;t take a default value? That makes it required.&lt;/p&gt;</comment>
                            <comment id="15145816" author="jcustenborder" created="Sat, 13 Feb 2016 05:40:14 +0000"  >&lt;p&gt;Correct me if i&apos;m wrong but there is only one &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java#L75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;define&lt;/a&gt; method that takes a validator. It also looks like the testing of default values is handled by the constructor of &lt;a href=&quot;https://github.com/apache/kafka/blob/ab5ac264a71d7f895b21b4acfd93d9581dabd7c1/clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java#L363&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ConfigKey&lt;/a&gt;. If there is a validator present it&apos;s ran against the default. In my case I want the user to define a value that is present in an enum, that I will hit with Enum.valueOf() later. I don&apos;t want to define a default because it could be wrong for the user. Setting a validator with the constants from the enum will give me a nice error message to the user if they omit the setting.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ConfigDef define(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, Type type, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; defaultValue, Validator validator, Importance importance, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; documentation) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;




</comment>
                            <comment id="15153769" author="githubbot" created="Fri, 19 Feb 2016 06:07:36 +0000"  >&lt;p&gt;GitHub user jcustenborder opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/936&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/936&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3237&quot; title=&quot;ConfigDef validators require a default value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3237&quot;&gt;&lt;del&gt;KAFKA-3237&lt;/del&gt;&lt;/a&gt; - Remove test cases testInvalidDefaultRange() and testInva&#8230;&lt;/p&gt;

&lt;p&gt;    Remove test cases testInvalidDefaultRange() and testInvalidDefaultString(). Defaults if not overridden will get checked on parse. Testing the defaults is unnecessary. This allows you to set that a parameter is required while setting a validator for that parameter. Added a test case testNullDefaultWithValidator that allows a null default with a validator for certain strings.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jcustenborder/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jcustenborder/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3237&quot; title=&quot;ConfigDef validators require a default value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3237&quot;&gt;&lt;del&gt;KAFKA-3237&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/936.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/936.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #936&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 249e4d781235311742d270033a13b92bea582745&lt;br/&gt;
Author: Jeremy Custenborder &amp;lt;jcustenborder@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-02-19T06:04:46Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3237&quot; title=&quot;ConfigDef validators require a default value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3237&quot;&gt;&lt;del&gt;KAFKA-3237&lt;/del&gt;&lt;/a&gt; - Remove test cases testInvalidDefaultRange() and testInvalidDefaultString(). Defaults if not overridden will get checked on parse. Testing the defaults is unnecessary. This allows you to set that a parameter is required while setting a validator for that parameter. Added a test case testNullDefaultWithValidator that allows a null default with a validator for certain strings.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15186577" author="ewencp" created="Wed, 9 Mar 2016 05:57:08 +0000"  >&lt;p&gt;Issue resolved by pull request 936&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/936&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/936&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15186578" author="githubbot" created="Wed, 9 Mar 2016 05:57:16 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/936&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/936&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sswv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>