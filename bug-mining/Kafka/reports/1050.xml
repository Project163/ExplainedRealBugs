<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:54:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3651] Whenever the BufferPool throws a &quot;Failed to allocate memory within the configured max blocking time&quot; exception, it should also remove the condition object from the waiters deque</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3651</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;&quot;this.waiters.remove(moreMemory);&quot; should happen before the exception&lt;br/&gt;
is thrown.&lt;/p&gt;

&lt;p&gt;.Otherwise the waiting thread count will never get to 0 after the exception&lt;br/&gt;
and batching will not occur. This is because in the RecordAccumulator.ready&lt;br/&gt;
method the exhausted is set as&lt;/p&gt;

&lt;p&gt;boolean exhausted = this.free.queued() &amp;gt; 0 where free.queued() returns the&lt;br/&gt;
waiters.size().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12964791">KAFKA-3651</key>
            <summary>Whenever the BufferPool throws a &quot;Failed to allocate memory within the configured max blocking time&quot; exception, it should also remove the condition object from the waiters deque</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgharat">Mayuresh Gharat</assignee>
                                    <reporter username="mgharat">Mayuresh Gharat</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 May 2016 21:07:14 +0000</created>
                <updated>Thu, 5 May 2016 22:50:32 +0000</updated>
                            <resolved>Thu, 5 May 2016 22:50:32 +0000</resolved>
                                                    <fixVersion>0.10.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15269596" author="ijuma" created="Tue, 3 May 2016 21:09:37 +0000"  >&lt;p&gt;Maybe we can fix that as part of &lt;a href=&quot;https://github.com/apache/kafka/pull/1304&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1304&lt;/a&gt; as it changes the same method.&lt;/p&gt;</comment>
                            <comment id="15269603" author="ijuma" created="Tue, 3 May 2016 21:13:06 +0000"  >&lt;p&gt;Actually, let&apos;s do it separately as we can then add a test specific to this problem. I&apos;m happy to review and merge the subsequent PR.&lt;/p&gt;</comment>
                            <comment id="15269821" author="ijuma" created="Tue, 3 May 2016 23:20:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgharat&quot; class=&quot;user-hover&quot; rel=&quot;mgharat&quot;&gt;mgharat&lt;/a&gt;, are you planning to submit a PR for this soon?&lt;/p&gt;</comment>
                            <comment id="15269837" author="mgharat" created="Tue, 3 May 2016 23:29:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; Yes just working on the unit test.&lt;/p&gt;</comment>
                            <comment id="15269841" author="ijuma" created="Tue, 3 May 2016 23:31:37 +0000"  >&lt;p&gt;Great, make sure to pull from trunk as the other JIRA that changes the same file was merged.&lt;/p&gt;</comment>
                            <comment id="15269895" author="githubbot" created="Wed, 4 May 2016 00:09:34 +0000"  >&lt;p&gt;GitHub user MayureshGharat opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1314&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3651&quot; title=&quot;Whenever the BufferPool throws a &amp;quot;Failed to allocate memory within the configured max blocking time&amp;quot; exception, it should also remove the condition object from the waiters deque&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3651&quot;&gt;&lt;del&gt;KAFKA-3651&lt;/del&gt;&lt;/a&gt; : Remove the condition variable waiting on memory availabilty in Bufferpool when a TimeoutException is thrown&lt;/p&gt;

&lt;p&gt;    Whenever the BufferPool throws a &quot;Failed to allocate memory within the configured max blocking time&quot; exception, it should also remove the condition object from the waiters deque&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/MayureshGharat/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/MayureshGharat/kafka&lt;/a&gt; kafka-3651&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1314.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1314.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1314&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="15269924" author="githubbot" created="Wed, 4 May 2016 00:32:46 +0000"  >&lt;p&gt;GitHub user zhuchen1018 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1315&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3651&quot; title=&quot;Whenever the BufferPool throws a &amp;quot;Failed to allocate memory within the configured max blocking time&amp;quot; exception, it should also remove the condition object from the waiters deque&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3651&quot;&gt;&lt;del&gt;KAFKA-3651&lt;/del&gt;&lt;/a&gt;; awaitFlushCompletion() in RecordAccumulator should always decrement flushesInProgress count&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zhuchen1018/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zhuchen1018/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3655&quot; title=&quot; awaitFlushCompletion() in RecordAccumulator should always decrement flushesInProgress count.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3655&quot;&gt;&lt;del&gt;KAFKA-3655&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1315.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1315.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1315&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e7533f57cc0169ba0c082ef6c9cc9ddefd902e85&lt;br/&gt;
Author: Chen Zhu &amp;lt;amandazhu19620701@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-05-04T00:29:56Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3651&quot; title=&quot;Whenever the BufferPool throws a &amp;quot;Failed to allocate memory within the configured max blocking time&amp;quot; exception, it should also remove the condition object from the waiters deque&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3651&quot;&gt;&lt;del&gt;KAFKA-3651&lt;/del&gt;&lt;/a&gt;; awaitFlushCompletion() in RecordAccumulator should always decrement flushesInProgress count&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15269937" author="mgharat" created="Wed, 4 May 2016 00:40:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amandazhu19620701%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;amandazhu19620701@gmail.com&quot;&gt;amandazhu19620701@gmail.com&lt;/a&gt; did you intend to open a PR against this jira?&lt;/p&gt;</comment>
                            <comment id="15273264" author="githubbot" created="Thu, 5 May 2016 22:50:31 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1314&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15273265" author="ijuma" created="Thu, 5 May 2016 22:50:32 +0000"  >&lt;p&gt;Issue resolved by pull request 1314&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/1314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1314&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x4jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>