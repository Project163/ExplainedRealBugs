<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:05:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1044] change log4j to slf4j </title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1044</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;can u chanage the log4j to slf4j, in my project, i use logback, it&apos;s conflict with log4j.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12667240">KAFKA-1044</key>
            <summary>change log4j to slf4j </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="viktorsomogyi">Viktor Somogyi-Vass</assignee>
                                    <reporter username="shijinkui">shijinkui</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Fri, 6 Sep 2013 01:32:28 +0000</created>
                <updated>Wed, 22 Nov 2017 15:35:02 +0000</updated>
                            <resolved>Wed, 22 Nov 2017 15:35:02 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>log</component>
                        <due></due>
                            <votes>7</votes>
                                    <watches>15</watches>
                                                                                                                <comments>
                            <comment id="14236304" author="jbarksdale" created="Fri, 5 Dec 2014 23:33:07 +0000"  >&lt;p&gt;More specifically, at least swapping to slf4j for the producer and consumer related stuff will allow users to use logging frameworks other than log4j, since it currently does not compile without that as a dependency.  &lt;/p&gt;</comment>
                            <comment id="14238611" author="jbarksdale" created="Mon, 8 Dec 2014 22:56:55 +0000"  >&lt;p&gt;As as workaround, you can exclude log4j from kafka, and just use the org.slf4j:log4j-over-slf4j instead.  That feeds in most log4j commands to slf4j, and then logback or another slf4j binding can be used.  &lt;/p&gt;</comment>
                            <comment id="14310994" author="jkreps" created="Sat, 7 Feb 2015 23:16:31 +0000"  >&lt;p&gt;This would be nice to do. If anyone wants to take it on...&lt;/p&gt;</comment>
                            <comment id="15388393" author="rehevkor5" created="Thu, 21 Jul 2016 20:44:45 +0000"  >&lt;p&gt;In addition, can we change the dependency on slf4j-log4j12 from &quot;compile&quot; scope to &quot;runtime&quot; scope and mark it &quot;optional&quot;?&lt;/p&gt;</comment>
                            <comment id="15835680" author="ewencp" created="Tue, 24 Jan 2017 05:27:43 +0000"  >&lt;p&gt;To clarify for anyone coming back to this, I believe wrt clients this should only apply to the core project, the new client libs should already be using just the slf4j API except in tests.&lt;/p&gt;</comment>
                            <comment id="16039920" author="viktorsomogyi" created="Wed, 7 Jun 2017 00:27:31 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m new to Kafka and was searching for a fitting task.&lt;br/&gt;
If this is still relevant then I&apos;d like to pick it up. Could someone please add me as contributor so I could assign it to me?&lt;/p&gt;</comment>
                            <comment id="16040126" author="ewencp" created="Wed, 7 Jun 2017 04:03:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=viktorsomogyi&quot; class=&quot;user-hover&quot; rel=&quot;viktorsomogyi&quot;&gt;viktorsomogyi&lt;/a&gt; I&apos;ve added you as a contributor. I assigned this JIRA to you, but since you are a contributor now you should be able to assign any other JIRAs to yourself as well.&lt;/p&gt;</comment>
                            <comment id="16044842" author="viktorsomogyi" created="Fri, 9 Jun 2017 18:47:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ewencp&quot; class=&quot;user-hover&quot; rel=&quot;ewencp&quot;&gt;ewencp&lt;/a&gt;, thank you, started working on it.&lt;br/&gt;
I found two incompatibilities and I&apos;m asking your advice in the resolution.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Fatal logging level: slf4j doesn&apos;t support it&lt;/li&gt;
	&lt;li&gt;kafka.utils.Log4jController: there are some log4j specific features used here that can&apos;t be replaced with a generic solution&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I have two solutions for these:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;we could simply use the log4j-over-slf4j package. This will redirect all Fatal logs to Error level and also provides some of the functionalities required by Log4jController (but not all).&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
	&lt;li&gt;Pros: a few lines of changes only, quite straightforward&lt;/li&gt;
	&lt;li&gt;Cons: loss of features. However Fatal can&apos;t be worked around so we have to accept that, but we also lose Log4jController.getLoggers as there is no way of collecting the current loggers by simply relying on slf4j. Also other methods&apos; behaviour will change (no way to detect existing loggers in slf4j as far as I&apos;m aware of it)&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;we could separate off Log4jController into a separate module and have the users to put it on the classpath explicitly if they use log4j for logging. From Logging class we can instantiate it by reflection.&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
	&lt;li&gt;Pros: except Fatal logging level we keep all the features&lt;/li&gt;
	&lt;li&gt;Cons: more complicated and breaking, also requires documentation so users will be aware of this&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll try to create PRs of both solutions (and they are rather work in progress, I just want to show approximate solutions) just in case if that is fine.&lt;/p&gt;</comment>
                            <comment id="16072020" author="githubbot" created="Mon, 3 Jul 2017 07:46:37 +0000"  >&lt;p&gt;GitHub user viktorsomogyi opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3477&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3477&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1044&quot; title=&quot;change log4j to slf4j &quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1044&quot;&gt;&lt;del&gt;KAFKA-1044&lt;/del&gt;&lt;/a&gt;: eliminating log4j from core&lt;/p&gt;

&lt;p&gt;    The aim of this PR to move kafka core/main away from log4j and introduce using slf4j only.&lt;br/&gt;
    To accomplish this task I:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;refactored Log4jController into its own module as it is very tightly coupled with log4j (and removing these dependencies would have been impossible without feature loss).&lt;/li&gt;
	&lt;li&gt;as log4j supports FATAL level but slf4j doesn&apos;t, I introduced a FATAL marker similarly to the log4j-slf4j bridge&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/viktorsomogyi/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/viktorsomogyi/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1044&quot; title=&quot;change log4j to slf4j &quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1044&quot;&gt;&lt;del&gt;KAFKA-1044&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3477.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3477.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3477&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9abe1a37c2ca4f9ea95fdee394b7135ad779d971&lt;br/&gt;
Author: Viktor Somogyi &amp;lt;viktor.somogyi@cloudera.com&amp;gt;&lt;br/&gt;
Date:   2017-06-08T22:22:36Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1044&quot; title=&quot;change log4j to slf4j &quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1044&quot;&gt;&lt;del&gt;KAFKA-1044&lt;/del&gt;&lt;/a&gt;: eliminating log4j from core&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16080123" author="viktorsomogyi" created="Mon, 10 Jul 2017 10:23:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ewencp&quot; class=&quot;user-hover&quot; rel=&quot;ewencp&quot;&gt;ewencp&lt;/a&gt; could you please look at my change when you have time?&lt;br/&gt;
An important question has been asked on the review: should we use scala logging?&lt;/p&gt;</comment>
                            <comment id="16158625" author="grussell" created="Fri, 8 Sep 2017 13:24:32 +0000"  >&lt;p&gt;Since &lt;a href=&quot;https://blogs.apache.org/foundation/entry/apache_logging_services_project_announces&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;log4j is EOL &lt;/a&gt; it would be beneficial to the community if a solution to this issue (dependency elimination) could get some priority.&lt;/p&gt;</comment>
                            <comment id="16158635" author="viktorsomogyi" created="Fri, 8 Sep 2017 13:31:58 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=grussell&quot; class=&quot;user-hover&quot; rel=&quot;grussell&quot;&gt;grussell&lt;/a&gt;, currently I need to resolve some merge conflits but let me do that and try to get it reviewed with someone &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="16158667" author="ijuma" created="Fri, 8 Sep 2017 13:50:07 +0000"  >&lt;p&gt;I do think we should use scala-logging since it&apos;s the most efficient. It doesn&apos;t create closures, there is no syntactic penalty and it doesn&apos;t generate garbage if the log message won&apos;t be printed.&lt;/p&gt;</comment>
                            <comment id="16262766" author="githubbot" created="Wed, 22 Nov 2017 15:13:08 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3477&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3477&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>347177</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nv73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>347476</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>