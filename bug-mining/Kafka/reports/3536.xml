<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:33:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-15235] No test coverage reports for Java due to settings for Jacoco being incompatible with Gradle 8.x</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-15235</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;On current dev branch, gradle 8.x fails while trying to generate test coverage reports as stated in the README, e.g. by running&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./gradlew clients:reportCoverage -PenableTestCoverage=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dorg.gradle.parallel=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The error message states:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not set unknown property &lt;span class=&quot;code-quote&quot;&gt;&apos;enabled&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Report html of type org.gradle.api.reporting.internal.TaskGeneratedSingleDirectoryReport&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In &quot;build.gradle&quot;, the library &quot;jacoco&quot; which is used to generate test coverage reports for the Java code is configured in two different places with these settings:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
jacocoTestReport {
&#160; &#160; dependsOn tasks.test
&#160; &#160; sourceSets sourceSets.main
&#160; &#160; reports {&#160;
&#160; &#160; &#160; &#160; html.enabled = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&#160; &#160; &#160; &#160; xml.enabled = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &#160; &#160; &#160; &#160;
&#160; &#160; &#160; &#160; csv.enabled = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; &#160; &#160;
&#160; &#160; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;With the latest version of jacoco, shipped with gradle 8.x, these config options are not compatible anymore. A correct configuration might look like like this:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
jacocoTestReport {
&#160; &#160; dependsOn tasks.test
&#160; &#160; sourceSets sourceSets.main
&#160; &#160; reports {
  &#160; &#160; &#160; html {
           required = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
        }
  &#160; &#160; &#160; xml {
           required = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &#160;&#160;&#160;&#160;&#160;&#160;&#160; 
        }
&#160; &#160; &#160; &#160; csv{
          required = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
        }
&#160; &#160; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;However, even with these settings being accepted by Gradle, I was unable to generate any test coverage report. This might be due to some OOM issues, but I tried a lots of settings including increasing the maximum heap for the JVM gradle tasks without getting this to work.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13544531">KAFKA-15235</key>
            <summary>No test coverage reports for Java due to settings for Jacoco being incompatible with Gradle 8.x</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bmscomp">Said BOUDJELDA</assignee>
                                    <reporter username="ethaden">Eike Thaden</reporter>
                        <labels>
                            <label>buid</label>
                            <label>coverage</label>
                            <label>gradle</label>
                            <label>tools</label>
                    </labels>
                <created>Sat, 22 Jul 2023 18:24:59 +0000</created>
                <updated>Sun, 30 Jul 2023 13:52:46 +0000</updated>
                            <resolved>Wed, 26 Jul 2023 18:03:28 +0000</resolved>
                                    <version>3.6.0</version>
                                    <fixVersion>3.5.2</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                    <component>unit tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17745985" author="JIRAUSER301378" created="Sat, 22 Jul 2023 20:02:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ethaden&quot; class=&quot;user-hover&quot; rel=&quot;ethaden&quot;&gt;ethaden&lt;/a&gt;&#160; I can give this a try if you want , can I assigne the Jira ticket to me please&#160;&lt;/p&gt;</comment>
                            <comment id="17745995" author="JIRAUSER301378" created="Sat, 22 Jul 2023 23:47:41 +0000"  >&lt;p&gt;I think I have a solution for this, I&apos;ll take this Jira&#160;&lt;/p&gt;</comment>
                            <comment id="17745996" author="JIRAUSER301378" created="Sun, 23 Jul 2023 00:23:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ethaden&quot; class=&quot;user-hover&quot; rel=&quot;ethaden&quot;&gt;ethaden&lt;/a&gt;&#160; I already made a pull request that tried to fix this issue, it&apos;s generating a report in a local build and we need to check the behaviour of Jenkins build before merging. I invite you and folks to review this PR and check build&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Linke to pull request : &lt;a href=&quot;https://github.com/apache/kafka/pull/14075&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/14075&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks&#160;&lt;/p&gt;</comment>
                            <comment id="17746133" author="JIRAUSER301355" created="Sun, 23 Jul 2023 21:35:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bmscomp&quot; class=&quot;user-hover&quot; rel=&quot;bmscomp&quot;&gt;bmscomp&lt;/a&gt; thank you preparing this fix! The build process does not yield an error anymore, as expected. Unfortunately, I still&#160; get neither an XML report nor an html one. I&apos;ve have no idea why this still doesn&apos;t work.&lt;/p&gt;</comment>
                            <comment id="17746387" author="JIRAUSER301378" created="Mon, 24 Jul 2023 10:47:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ethaden&quot; class=&quot;user-hover&quot; rel=&quot;ethaden&quot;&gt;ethaden&lt;/a&gt;&#160; For the pull request I made, and for this command&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./gradlew clients:reportCoverage -PenableTestCoverage=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dorg.gradle.parallel=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the path to the generated html report :&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
kafka/clients/build/reports/jacoco/test/html/index.html&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and the xml report :&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
kafka/clients/build/reports/jacoco/test/jacocoTestReport.xml&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17746659" author="JIRAUSER301355" created="Mon, 24 Jul 2023 22:06:46 +0000"  >&lt;p&gt;@Said: Thank you for the additional explanation. Unfortunately, even though I applied the same changes to the build configuration, I still do not get any xml/html reports generated by jacoco. Maybe this is due to my development setup? I&apos;m running Ubuntu 23.04 (Lunar), Desktop version.&lt;/p&gt;</comment>
                            <comment id="17747217" author="JIRAUSER301378" created="Wed, 26 Jul 2023 00:07:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ethaden&quot; class=&quot;user-hover&quot; rel=&quot;ethaden&quot;&gt;ethaden&lt;/a&gt;&#160; Please let me know more about your configuration, please check out the branch I used to make a pull request to check the the behaviour of generating jacoco html and xml reports&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bmscomp:fix/jacaco_report_generation_issue
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Please would you tell more more about your JDK version also I do not know if this will help me really to produce that or not But really wish to get the same setup as you&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks so much for your feedback&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17747615" author="divijvaidya" created="Wed, 26 Jul 2023 18:03:22 +0000"  >&lt;p&gt;I have backported this to 3.5 branch as well. I have also verified that I can find the report at ./clients/build/reports/jacoco/test/jacocoTestReport.xml&lt;/p&gt;</comment>
                            <comment id="17747674" author="JIRAUSER301355" created="Wed, 26 Jul 2023 22:28:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=divijvaidya&quot; class=&quot;user-hover&quot; rel=&quot;divijvaidya&quot;&gt;divijvaidya&lt;/a&gt; Thank you for verifying that you can generate the report and for setting it to resolved.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bmscomp&quot; class=&quot;user-hover&quot; rel=&quot;bmscomp&quot;&gt;bmscomp&lt;/a&gt; Just for reference, I&apos;m using this version of the OpenJDK:&lt;/p&gt;

&lt;p&gt;openjdk version &quot;17.0.7&quot; 2023-04-18&lt;br/&gt;
OpenJDK Runtime Environment (build 17.0.7+7-Ubuntu-0ubuntu123.04)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 17.0.7+7-Ubuntu-0ubuntu123.04, mixed mode, sharing)&lt;/p&gt;

&lt;p&gt;I guess there is something wrong with my tool chain or build machine.&lt;/p&gt;</comment>
                            <comment id="17748189" author="JIRAUSER301378" created="Thu, 27 Jul 2023 14:42:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ethaden&quot; class=&quot;user-hover&quot; rel=&quot;ethaden&quot;&gt;ethaden&lt;/a&gt;&#160; I do not think there is something wrong with your setup, can you please give it one more try, and make sure you have pulled all recent changes to your local machine and tell me the result please&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17748932" author="JIRAUSER301355" created="Sun, 30 Jul 2023 13:52:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bmscomp&quot; class=&quot;user-hover&quot; rel=&quot;bmscomp&quot;&gt;bmscomp&lt;/a&gt; finally I was able to generate coverage reports. I guess my issues have to do with my hardware setup: I&apos;m using an AMD Ryzen 9 7950X 16-Core Processor (i.e. 32 virtual cores) with 64 GB of RAM. If I run the coverage report generation according to the documentation, I test steps failing with OutOfMemory exceptions which prevents the generation of the reports. To me, it looks like too many parallel processes are spawned.&lt;/p&gt;

&lt;p&gt;I tried to increase the maximum heap size to up to 8GB in build.gradle, with not effect. I succeeded creating the reports after I restricted the number of parallel workers: &quot;./gradlew clients:reportCoverage --max-workers 4 -PenableTestCoverage=true -Dorg.gradle.parallel=false&quot;.&lt;/p&gt;

&lt;p&gt;I thought, the &quot;org.gradle.parallel=false&quot; should do that, but either this doesn&apos;t work or I misunderstood the concept.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>gradle</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jbe0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>