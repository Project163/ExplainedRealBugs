<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:03:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5679] Add logging to distinguish between internally and externally initiated shutdown of Kafka</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5679</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Currently, if there is an internal error that triggers a shutdown of the Kafka server, the &lt;tt&gt;Exit&lt;/tt&gt; class is used, which begins the shutdown procedure. The other way a shutdown is triggered is by &lt;tt&gt;SIGTERM&lt;/tt&gt; or some other signal.&lt;/p&gt;

&lt;p&gt;We would like to distinguish between shutdown due to internal errors and external signals. This helps when debugging. Particularly, a natural question when a broker shuts down unexpectedly is:  &quot;did the deployment system send the signal or is there some un logged fatal error in the broker&quot;? &lt;/p&gt;

&lt;p&gt;Today, we rely on callers of &lt;tt&gt;Exit&lt;/tt&gt; to log the error before making the call. However, this won&apos;t always have 100% coverage. It would be good to add a log message in &lt;tt&gt;Exit&lt;/tt&gt; to record that an exit method was invoked explicitly. &lt;/p&gt;

&lt;p&gt;We could also add a signal handler to log when &lt;tt&gt;SIGTERM&lt;/tt&gt;, &lt;tt&gt;SIGKILL&lt;/tt&gt; etc. are received.&lt;/p&gt;

&lt;p&gt;This would make operating Kafka a bit easier.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13091058">KAFKA-5679</key>
            <summary>Add logging to distinguish between internally and externally initiated shutdown of Kafka</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsivaram">Rajini Sivaram</assignee>
                                    <reporter username="apurva">Apurva Mehta</reporter>
                        <labels>
                    </labels>
                <created>Sun, 30 Jul 2017 17:22:33 +0000</created>
                <updated>Sun, 1 Oct 2017 12:38:39 +0000</updated>
                            <resolved>Tue, 26 Sep 2017 14:23:17 +0000</resolved>
                                    <version>0.11.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16126907" author="githubbot" created="Tue, 15 Aug 2017 07:56:41 +0000"  >&lt;p&gt;GitHub user rajinisivaram opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3668&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3668&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5679&quot; title=&quot;Add logging to distinguish between internally and externally initiated shutdown of Kafka&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5679&quot;&gt;&lt;del&gt;KAFKA-5679&lt;/del&gt;&lt;/a&gt;: Add logging for broker termination due to SIGTERM or SIGINT&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rajinisivaram/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rajinisivaram/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5679&quot; title=&quot;Add logging to distinguish between internally and externally initiated shutdown of Kafka&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5679&quot;&gt;&lt;del&gt;KAFKA-5679&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3668.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3668.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3668&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e6f02a6eb90c242d850d3aab2e59d74162d88626&lt;br/&gt;
Author: rajini &amp;lt;rajini@192.168.0.22&amp;gt;&lt;br/&gt;
Date:   2017-08-15T07:29:49Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5679&quot; title=&quot;Add logging to distinguish between internally and externally initiated shutdown of Kafka&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5679&quot;&gt;&lt;del&gt;KAFKA-5679&lt;/del&gt;&lt;/a&gt;: Add logging for broker termination due to SIGTERM or SIGINT&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16127451" author="apurva" created="Tue, 15 Aug 2017 16:13:40 +0000"  >&lt;p&gt;Assigning to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rsivaram&quot; class=&quot;user-hover&quot; rel=&quot;rsivaram&quot;&gt;rsivaram&lt;/a&gt; since she already has a patch for this.&lt;/p&gt;</comment>
                            <comment id="16177548" author="guozhang" created="Sat, 23 Sep 2017 04:49:02 +0000"  >&lt;p&gt;&lt;b&gt;Reminder to the contributor / reviewer of the PR&lt;/b&gt;: please note that the code deadline for 1.0.0 is less than 2 weeks away (Oct. 4th). Please re-evaluate your JIRA and see if it still makes sense to be merged into 1.0.0 or it could be pushed out to 1.1.0, or be closed directly if the JIRA itself is not valid any more, or re-assign yourself as contributor / committer if you are no longer working on the JIRA.&lt;/p&gt;</comment>
                            <comment id="16180822" author="githubbot" created="Tue, 26 Sep 2017 14:12:11 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3668&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3668&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16180833" author="ijuma" created="Tue, 26 Sep 2017 14:25:34 +0000"  >&lt;p&gt;We added a signal handler for the cases where shutdown is initiated by an external tool. That should be good enough and avoids issues with duplicate logging when `Exit` is called by CLI tools. If we ever run into issues where it&apos;s still unclear why Kafka was terminated, we can consider additional improvements.&lt;/p&gt;</comment>
                            <comment id="16185547" author="rsivaram" created="Fri, 29 Sep 2017 09:13:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlaskowski&quot; class=&quot;user-hover&quot; rel=&quot;jlaskowski&quot;&gt;jlaskowski&lt;/a&gt; Sorry the message the you added to the PR doesn&apos;t appear &lt;a href=&quot;https://github.com/apache/kafka/pull/3668&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. Can you try with:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;pkill -INT -nf kafka&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16187359" author="jlaskowski" created="Sun, 1 Oct 2017 12:38:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rsivaram&quot; class=&quot;user-hover&quot; rel=&quot;rsivaram&quot;&gt;rsivaram&lt;/a&gt; The order matters! Thanks for the tip!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3i6jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>