<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:30:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-13718] kafka-topics describe topic with default config will show `segment.bytes` overridden config </title>
                <link>https://issues.apache.org/jira/browse/KAFKA-13718</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Following the quickstart guide&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, when describing the topic just created with default config, I found there&apos;s a overridden config shown:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&amp;gt; bin/kafka-topics.sh --describe --topic quickstart-events --bootstrap-server localhost:9092&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Topic: quickstart-events&#160;&#160; TopicId: 06zRrzDCRceR9zWAf_BUWQ &#160; &#160;PartitionCount: 1 &#160; &#160;ReplicationFactor: 1 &#160; &#160;&lt;b&gt;Configs: segment.bytes=1073741824&lt;/b&gt;&lt;/em&gt;&lt;br/&gt;
&#160; &#160; &lt;em&gt;Topic: quickstart-events &#160;&#160; Partition: 0 &#160; &#160;Leader: 0 &#160; &#160;Replicas: 0 &#160; &#160;Isr: 0&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This config result should be empty as in Kafka quick start page. Although the config value is what we expected (default 1GB value), this info display still confuse users.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Note: I checked the 2.8.1 build, this issue also happened.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: &lt;a href=&quot;https://kafka.apache.org/quickstart&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://kafka.apache.org/quickstart&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13432583">KAFKA-13718</key>
            <summary>kafka-topics describe topic with default config will show `segment.bytes` overridden config </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rjoerger">Richard Joerger</assignee>
                                    <reporter username="showuon">Luke Chen</reporter>
                        <labels>
                            <label>newbie</label>
                            <label>newbie++</label>
                    </labels>
                <created>Tue, 8 Mar 2022 07:30:49 +0000</created>
                <updated>Fri, 3 Jun 2022 13:43:38 +0000</updated>
                            <resolved>Fri, 3 Jun 2022 03:00:55 +0000</resolved>
                                    <version>2.8.1</version>
                    <version>3.0.0</version>
                    <version>3.1.0</version>
                                    <fixVersion>3.3.0</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17502828" author="mimaison" created="Tue, 8 Mar 2022 09:54:03 +0000"  >&lt;p&gt;This has been the case for many releases, I get the same behavior with 2.2.0. At this stage, it probably makes more sense to update the quickstart.&lt;/p&gt;</comment>
                            <comment id="17502835" author="showuon" created="Tue, 8 Mar 2022 10:05:59 +0000"  >&lt;p&gt;&amp;gt; &#160;I get the same behavior with 2.2.0.&lt;/p&gt;

&lt;p&gt;Oh, really!&lt;/p&gt;

&lt;p&gt;&amp;gt; it probably makes more sense to update the quickstart.&lt;/p&gt;

&lt;p&gt;Maybe we can have a better definition about what we expected to be shown in the `configs` value. My understanding is it showed the overridden configs. If so, it should be a bug. If not, we can update the quickstart accordingly.&lt;/p&gt;</comment>
                            <comment id="17538975" author="rjoerger" created="Wed, 18 May 2022 17:27:01 +0000"  >&lt;p&gt;I&apos;d love to help out on this particular Jira. I&apos;m new to the project so I apologize for any silly questions. It seems that we as a community need to discuss what the output of the kafka-topics tooling should look like. When we&apos;re looking at the documentation, I don&apos;t see any documentation explicitly stating that the kafka-topics output will only show the non-default configurations. As I understand it this is something that is just &quot;known&quot; among the community but isn&apos;t necessarily explicit. This leads me to a few points of question.&#160;&lt;/p&gt;

&lt;p&gt;1) Do we want to open a new issue to update the documentation for kafka-topics to make that explicit (or am I mistaken on this?)&lt;/p&gt;

&lt;p&gt;2) Looking at the documentation for segment.bytes, this (1073741824) is the default value. When I was investigating the code base, it seems to be the default value in there as well. I&apos;m not sure how much benefit there would be to including this configuration vs. not including this configuration.&#160;&lt;/p&gt;

&lt;p&gt;3) I know this isn&apos;t an API change but is still user facing, would this require a KIP to change?&lt;/p&gt;

&lt;p&gt;4) Where in the code base does this value reside? In my digging, it seems to reside in kafkaConfig.scala:112 but that&apos;s 1* 1024 * 1024 *1024 = 1073741824 so perhaps there is an issue of comparison? I&apos;d love to tackle this but need some guidance if at all possible.&#160;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="17539137" author="dengziming" created="Thu, 19 May 2022 00:18:26 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rjoerger&quot; class=&quot;user-hover&quot; rel=&quot;rjoerger&quot;&gt;rjoerger&lt;/a&gt;&#160;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;this issue is enough to track the problem so another issue is unnecessary&lt;/li&gt;
	&lt;li&gt;We are not intend to include default `segment.bytes` in the output but it was printed(due to an bug), but this bug has been around for a long time so &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mimaison&quot; class=&quot;user-hover&quot; rel=&quot;mimaison&quot;&gt;mimaison&lt;/a&gt;&#160;suggest we keep this bug in the future(make it bug-compatible)&lt;/li&gt;
	&lt;li&gt;Since we are trying to keep its unchanged, so KIP is unnecessary&lt;/li&gt;
	&lt;li&gt;This is the source of the bug, currently we haven&apos;t find it, you can investigate it and add a comment to it to explain why we should keep this bug.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17539164" author="showuon" created="Thu, 19 May 2022 02:13:04 +0000"  >&lt;p&gt;Thanks for the answers, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dengziming&quot; class=&quot;user-hover&quot; rel=&quot;dengziming&quot;&gt;dengziming&lt;/a&gt; !&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rjoerger&quot; class=&quot;user-hover&quot; rel=&quot;rjoerger&quot;&gt;rjoerger&lt;/a&gt; , as Ziming said, we are unsure the root cause of this issue. Maybe you can investigate it first, and see if you find anything. My thought is that, since we didn&apos;t provide any new configs during create topics:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&amp;gt; bin/kafka-topics.sh --create --topic quickstart-events --bootstrap-server localhost:9092&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So, the describe results should not contain any topic related configs, to avoid confusing users. As you mentioned, we never document anything about what the &quot;configs&quot; field should display, but from the code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
val configsAsString = config.entries.asScala.filter(!_.isDefault).map { ce =&amp;gt; s&lt;span class=&quot;code-quote&quot;&gt;&quot;${ce.name}=${ce.value}&quot;&lt;/span&gt; }.mkString(&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We can know it is trying to filter out anything &quot;not default&quot;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So, maybe we should first know why only the &quot;segment.bytes=1073741824&quot; showed here.&lt;/p&gt;

&lt;p&gt;Thanks for your help.&lt;/p&gt;</comment>
                            <comment id="17544086" author="hachikuji" created="Mon, 30 May 2022 23:55:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt; I think the reason `segment.bytes` shows up is that we have it defined in the default `server.properties`: &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/config/server.properties#L112.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/config/server.properties#L112.&lt;/a&gt; Technically, the static configuration is overriding the default value (even though the overridden value is the same as the default). If you take it out of `server.properties`, then it is no longer displayed. I guess I&apos;d call this correct, if perhaps slightly surprising, behavior. Perhaps we could &quot;fix&quot; it by commenting out the default in `server.properties`?&lt;/p&gt;</comment>
                            <comment id="17544098" author="showuon" created="Tue, 31 May 2022 02:37:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt; , thanks for the comment. Yes, I can confirm that after removing the `log.segment.bytes` in server.properties, it won&apos;t display on the topic describe results.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rjoerger&quot; class=&quot;user-hover&quot; rel=&quot;rjoerger&quot;&gt;rjoerger&lt;/a&gt; , do you think this is a good fix? If so, welcome to submit a PR for it. Thank you.&lt;/p&gt;</comment>
                            <comment id="17545616" author="rjoerger" created="Thu, 2 Jun 2022 19:18:37 +0000"  >&lt;p&gt;Hey everybody. Sorry for the radio silence on this. I actually came to the identical conclusion that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt; came to and was spending time stepping through the request handling on the broker side to figure how it is being read in so that I could possible make a larger code.&#160; Interestingly enough, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt; , I found that if I remove the &quot;log&quot; prefix, I stop seeing that value in the topic config output so I&apos;m not quite sure what the explanation is on that one. The one major difference I noticed though is that when running the TopicCommandIntegrationTest suite, I found that the value for the segment.bytes field is being returned as a default topic configuration. I&apos;m not sure if commenting out the value will have any effect on the test suite, but I&apos;ll give it a shot and see if the tests report differently.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks everybody!&lt;/p&gt;</comment>
                            <comment id="17545865" author="rjoerger" created="Fri, 3 Jun 2022 13:17:57 +0000"  >&lt;p&gt;There was a question on if segment.bytes should be included. As was decided in this Jira, we should remove it. This means that it should therefore be removed in the documentation as well.&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310361">
                    <name>Blocked</name>
                                            <outwardlinks description="Blocked">
                                        <issuelink>
            <issuekey id="13443238">KAFKA-13875</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z109yo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>