<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:24:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-9950] MirrorMaker2 sharing of ConfigDef can lead to ConcurrentModificationException</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-9950</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The &lt;a href=&quot;https://github.com/apache/kafka/blob/34824b7bff64ba387a04466d74ac6bbbd10bf37c/connect/mirror/src/main/java/org/apache/kafka/connect/mirror/MirrorConnectorConfig.java#L397&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;MirrorConnectorConfig::CONNECTOR_CONFIG_DEF&lt;/a&gt;&#160;object is reused across multiple MirrorMaker2 classes, which is fine the most part since it&apos;s a constant. However, the actual &lt;tt&gt;ConfigDef&lt;/tt&gt; object itself is mutable, and is mutated when the &lt;tt&gt;MirrorTaskConfig&lt;/tt&gt; class &lt;a href=&quot;https://github.com/apache/kafka/blob/34824b7bff64ba387a04466d74ac6bbbd10bf37c/connect/mirror/src/main/java/org/apache/kafka/connect/mirror/MirrorTaskConfig.java#L62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;statically constructs its own ConfigDef&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This has two unintended effects:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Since the two &lt;tt&gt;ConfigDef&lt;/tt&gt; objects for the &lt;tt&gt;MirrorConnectorConfig&lt;/tt&gt; and &lt;tt&gt;MirrorTaskConfig&lt;/tt&gt; classes are actually the same object, the additional properties that the &lt;tt&gt;MirrorTaskConfig&lt;/tt&gt; class defines for its &lt;tt&gt;ConfigDef&lt;/tt&gt; are also added to the &lt;tt&gt;MirrorConnectorConfig&lt;/tt&gt; class&apos;s &lt;tt&gt;ConfigDef&lt;/tt&gt;. The impact of this isn&apos;t huge since both additional properties have default values, but this does cause those properties to appear in the &lt;tt&gt;/connectors/{name}/config/validate&lt;/tt&gt; endpoint once the &lt;tt&gt;MirrorTaskConfig&lt;/tt&gt; class is loaded for the first time.&lt;/li&gt;
	&lt;li&gt;It&apos;s possible that, if a config for a MirrorMaker2 connector is submitted at approximately the same time that the &lt;tt&gt;MirrorTaskConfig&lt;/tt&gt; class is loaded, a &lt;tt&gt;ConcurrentModificationException&lt;/tt&gt; will be thrown by the &lt;tt&gt;AbstractHerder&lt;/tt&gt; class when it tries to &lt;a href=&quot;https://github.com/apache/kafka/blob/34824b7bff64ba387a04466d74ac6bbbd10bf37c/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java#L357&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;iterate over all of the keys of the connector&apos;s ConfigDef&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13302563">KAFKA-9950</key>
            <summary>MirrorMaker2 sharing of ConfigDef can lead to ConcurrentModificationException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ChrisEgerton">Chris Egerton</assignee>
                                    <reporter username="ChrisEgerton">Chris Egerton</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 May 2020 04:35:19 +0000</created>
                <updated>Thu, 21 May 2020 04:22:23 +0000</updated>
                            <resolved>Thu, 21 May 2020 04:22:23 +0000</resolved>
                                    <version>2.4.0</version>
                    <version>2.4.1</version>
                    <version>2.5.0</version>
                                    <fixVersion>2.4.2</fixVersion>
                    <fixVersion>2.5.1</fixVersion>
                    <fixVersion>2.6.0</fixVersion>
                                    <component>mirrormaker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ec9k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>