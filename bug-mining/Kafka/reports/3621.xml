<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:36:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-15690] EosIntegrationTest is flaky.</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-15690</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;EosIntegrationTest&lt;/p&gt;

&lt;p&gt;shouldNotViolateEosIfOneTaskGetsFencedUsingIsolatedAppInstances&lt;span class=&quot;error&quot;&gt;&amp;#91;exactly_once_v2, processing threads = false&amp;#93;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.junit.runners.model.TestTimedOutException: test timed out after 600 seconds	at org.apache.kafka.clients.NetworkClient$DefaultMetadataUpdater.handleServerDisconnect(NetworkClient.java:1111)	at org.apache.kafka.clients.NetworkClient.processDisconnection(NetworkClient.java:821)	at org.apache.kafka.clients.NetworkClient.processTimeoutDisconnection(NetworkClient.java:779)	at org.apache.kafka.clients.NetworkClient.handleTimedOutRequests(NetworkClient.java:837)

org.apache.kafka.streams.errors.StreamsException: Exception caught in process. taskId=0_1, processor=KSTREAM-SOURCE-0000000000, topic=multiPartitionInputTopic, partition=1, offset=15, stacktrace=java.lang.RuntimeException: Detected we&apos;ve been interrupted.	at org.apache.kafka.streams.integration.EosIntegrationTest$1$1.transform(EosIntegrationTest.java:892)	at org.apache.kafka.streams.integration.EosIntegrationTest$1$1.transform(EosIntegrationTest.java:867)	at org.apache.kafka.streams.kstream.internals.TransformerSupplierAdapter$1.transform(TransformerSupplierAdapter.java:49)	at org.apache.kafka.streams.kstream.internals.TransformerSupplierAdapter$1.transform(TransformerSupplierAdapter.java:38)	at org.apache.kafka.streams.kstream.internals.KStreamFlatTransform$KStreamFlatTransformProcessor.process(KStreamFlatTransform.java:66) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160; shouldWriteLatestOffsetsToCheckpointOnShutdown&lt;span class=&quot;error&quot;&gt;&amp;#91;exactly_once_v2, processing threads = false&amp;#93;&lt;/span&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.RuntimeException: java.util.concurrent.ExecutionException: org.apache.kafka.common.errors.UnknownServerException: The server experienced an unexpected error when processing the request.	at org.apache.kafka.streams.integration.utils.KafkaEmbedded.deleteTopic(KafkaEmbedded.java:204)	at org.apache.kafka.streams.integration.utils.EmbeddedKafkaCluster.deleteTopicsAndWait(EmbeddedKafkaCluster.java:286)	at org.apache.kafka.streams.integration.utils.EmbeddedKafkaCluster.deleteTopicsAndWait(EmbeddedKafkaCluster.java:274)	at org.apache.kafka.streams.integration.EosIntegrationTest.createTopics(EosIntegrationTest.java:174)	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)

org.apache.kafka.streams.errors.StreamsException: Exception caught in process. taskId=0_1, processor=KSTREAM-SOURCE-0000000000, topic=multiPartitionInputTopic, partition=1, offset=15, stacktrace=java.lang.RuntimeException: Detected we&apos;ve been interrupted.	at org.apache.kafka.streams.integration.EosIntegrationTest$1$1.transform(EosIntegrationTest.java:892)	at org.apache.kafka.streams.integration.EosIntegrationTest$1$1.transform(EosIntegrationTest.java:867)	at org.apache.kafka.streams.kstream.internals.TransformerSupplierAdapter$1.transform(TransformerSupplierAdapter.java:49)	at org.apache.kafka.streams.kstream.internals.TransformerSupplierAdapter$1.transform(TransformerSupplierAdapter.java:38)	at org.apache.kafka.streams.kstream.internals.KStreamFlatTransform$KStreamFlatTransformProcessor.process(KStreamFlatTransform.java:66) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;shouldWriteLatestOffsetsToCheckpointOnShutdown&lt;span class=&quot;error&quot;&gt;&amp;#91;exactly_once, processing threads = false&amp;#93;&lt;/span&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.opentest4j.AssertionFailedError: Condition not met within timeout 60000. StreamsTasks did not request commit. ==&amp;gt; expected: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;gt; but was: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;gt;	at app&lt;span class=&quot;code-comment&quot;&gt;//org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)	at app//org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)	at app//org.junit.jupiter.api.AssertTrue.failNotTrue(AssertTrue.java:63)	at app//org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:36)	at app//org.junit.jupiter.api.Assertions.assertTrue(Assertions.java:210)
&lt;/span&gt;
java.lang.IllegalStateException: Replica [Topic=__transaction_state,Partition=2,Replica=1] should be in the OfflineReplica,ReplicaDeletionStarted states before moving to ReplicaDeletionIneligible state. Instead it is in OnlineReplica state	at kafka.controller.ZkReplicaStateMachine.logInvalidTransition(ReplicaStateMachine.scala:442)	at kafka.controller.ZkReplicaStateMachine.$anonfun$doHandleStateChanges$2(ReplicaStateMachine.scala:164)	at kafka.controller.ZkReplicaStateMachine.$anonfun$doHandleStateChanges$2$adapted(ReplicaStateMachine.scala:164)	at scala.collection.immutable.List.foreach(List.scala:333) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;They are running long and may relate to timeout.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13555697">KAFKA-15690</key>
            <summary>EosIntegrationTest is flaky.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lucasbru">Lucas Brutschy</assignee>
                                    <reporter username="calvinliu">Calvin Liu</reporter>
                        <labels>
                            <label>flaky-test</label>
                    </labels>
                <created>Thu, 26 Oct 2023 15:52:05 +0000</created>
                <updated>Mon, 19 Feb 2024 09:19:05 +0000</updated>
                            <resolved>Mon, 4 Dec 2023 08:50:54 +0000</resolved>
                                                                    <component>streams</component>
                    <component>unit tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17783810" author="jolshan" created="Tue, 7 Nov 2023 21:51:07 +0000"  >&lt;p&gt;I saw this as well on my build &lt;a href=&quot;https://ci-builds.apache.org/job/Kafka/job/kafka-pr/job/PR-14629/22/#showFailuresLink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Kafka/job/kafka-pr/job/PR-14629/22/#showFailuresLink&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17789702" author="apoorvmittal10" created="Sat, 25 Nov 2023 17:50:13 +0000"  >&lt;p&gt;Another failure: &lt;a href=&quot;https://ci-builds.apache.org/blue/organizations/jenkins/Kafka%2Fkafka-pr/detail/PR-14699/21/tests/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/blue/organizations/jenkins/Kafka%2Fkafka-pr/detail/PR-14699/21/tests/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Build / JDK 8 and Scala 2.12 / shouldWriteLatestOffsetsToCheckpointOnShutdown[at_least_once, processing threads = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;] &#8211; org.apache.kafka.streams.integration.EosIntegrationTest1m 25s

org.opentest4j.AssertionFailedError: Condition not met within timeout 60000. StreamsTasks did not request commit. ==&amp;gt; expected: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;gt; but was: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;gt;Stacktraceorg.opentest4j.AssertionFailedError: Condition not met within timeout 60000. StreamsTasks did not request commit. ==&amp;gt; expected: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;gt; but was: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;gt;	at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)	at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)	at org.junit.jupiter.api.AssertTrue.failNotTrue(AssertTrue.java:63)	at org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:36)



Build / JDK 8 and Scala 2.12 / shouldWriteLatestOffsetsToCheckpointOnShutdown[exactly_once, processing threads = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;] &#8211; org.apache.kafka.streams.integration.EosIntegrationTest1m 21s

Errororg.opentest4j.AssertionFailedError: Condition not met within timeout 60000. StreamsTasks did not request commit. ==&amp;gt; expected: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;gt; but was: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;gt;Stacktraceorg.opentest4j.AssertionFailedError: Condition not met within timeout 60000. StreamsTasks did not request commit. ==&amp;gt; expected: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;gt; but was: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;gt;	at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)	at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)	at org.junit.jupiter.api.AssertTrue.failNotTrue(AssertTrue.java:63)	at org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:36)	at org.junit.jupiter.api.Assertions.assertTrue(Assertions.java:210)	at org.apache.kafka.test.TestUtils.lambda$waitForCondition$3(TestUtils.java:331)



Build / JDK 8 and Scala 2.12 / shouldWriteLatestOffsetsToCheckpointOnShutdown[exactly_once_v2, processing threads = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;] &#8211; org.apache.kafka.streams.integration.EosIntegrationTest

Errororg.opentest4j.AssertionFailedError: Condition not met within timeout 60000. StreamsTasks did not request commit. ==&amp;gt; expected: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;gt; but was: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;gt;Stacktraceorg.opentest4j.AssertionFailedError: Condition not met within timeout 60000. StreamsTasks did not request commit. ==&amp;gt; expected: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;gt; but was: &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;gt;	at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)	at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)	at org.junit.jupiter.api.AssertTrue.failNotTrue(AssertTrue.java:63)	at org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:36)	at org.junit.jupiter.api.Assertions.assertTrue(Assertions.java:210)	at org.apache.kafka.test.TestUtils.lambda$waitForCondition$3(TestUtils.java:331)	at org.apache.kafka.test.TestUtils.retryOnExceptionWithTimeout(TestUtils.java:379)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1l7vk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>