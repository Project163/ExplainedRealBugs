<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:41:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1567] Metric memory leaking after closing the clients</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1567</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;When consumers or producers shut down, the metrics they registered in yammer registry is not deleted which causes memory leak.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12731337">KAFKA-1567</key>
            <summary>Metric memory leaking after closing the clients</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="becket_qin">Jiangjie Qin</assignee>
                                    <reporter username="becket_qin">Jiangjie Qin</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Fri, 1 Aug 2014 15:35:17 +0000</created>
                <updated>Sun, 14 Jun 2015 08:47:13 +0000</updated>
                            <resolved>Wed, 13 Aug 2014 20:10:09 +0000</resolved>
                                                    <fixVersion>0.8.2.0</fixVersion>
                                    <component>clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14082602" author="becket_qin" created="Fri, 1 Aug 2014 17:47:26 +0000"  >&lt;p&gt;Created reviewboard  against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14082635" author="becket_qin" created="Fri, 1 Aug 2014 18:04:54 +0000"  >&lt;p&gt;Created reviewboard  against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14082640" author="becket_qin" created="Fri, 1 Aug 2014 18:06:25 +0000"  >&lt;p&gt;Created reviewboard  against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14082990" author="becket_qin" created="Fri, 1 Aug 2014 21:26:55 +0000"  >&lt;p&gt;Created reviewboard &lt;a href=&quot;https://reviews.apache.org/r/24196/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/24196/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14089879" author="becket_qin" created="Thu, 7 Aug 2014 21:29:30 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/24196/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/24196/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14091570" author="becket_qin" created="Sat, 9 Aug 2014 01:44:50 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/24196/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/24196/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14093355" author="bmis13" created="Mon, 11 Aug 2014 21:45:35 +0000"  >&lt;p&gt;HI Team,&lt;/p&gt;

&lt;p&gt;This is also related to this issue I have filed &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1521&quot; title=&quot;Producer Graceful Shutdown issue in Container (Kafka version 0.8.x.x)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1521&quot;&gt;&lt;del&gt;KAFKA-1521&lt;/del&gt;&lt;/a&gt;.. This should fix the issue as well.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Bhavesh &lt;/p&gt;</comment>
                            <comment id="14093475" author="becket_qin" created="Mon, 11 Aug 2014 22:56:03 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/24196/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/24196/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14094789" author="becket_qin" created="Tue, 12 Aug 2014 22:20:50 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/24196/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/24196/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14095581" author="becket_qin" created="Wed, 13 Aug 2014 15:27:22 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/24196/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/24196/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14095870" author="becket_qin" created="Wed, 13 Aug 2014 18:25:32 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/24196/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/24196/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14096033" author="junrao" created="Wed, 13 Aug 2014 20:10:09 +0000"  >&lt;p&gt;Thanks for the patch. +1 and committed to trunk.&lt;/p&gt;</comment>
                            <comment id="14096159" author="jjkoshy" created="Wed, 13 Aug 2014 21:28:38 +0000"  >&lt;p&gt;Although this is in the old consumer and will be going away soon, I&apos;m a bit curious about the approach in this patch - rather than enumerate the different metric names for consumers/producers in KafkaMetricsGroup wouldn&apos;t it have been simpler to just create a new MetricsRegistry for each instance of producer/consumer/broker? Whenever you shutdown an instance you would just need to remove all the metrics in the associated instance registry.&lt;/p&gt;</comment>
                            <comment id="14096233" author="junrao" created="Wed, 13 Aug 2014 22:28:47 +0000"  >&lt;p&gt;Joel,&lt;/p&gt;

&lt;p&gt;We thought about that. The issue is that (1) the metrics are at different levels and we have to pass the metrics registry around in many places; (2) some of the metrics in the fetcher are shared btw the consumer and the broker.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12673432">KAFKA-1083</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12659254" name="KAFKA-1567.patch" size="48601" author="becket_qin" created="Fri, 1 Aug 2014 21:26:46 +0000"/>
                            <attachment id="12659215" name="KAFKA-1567.patch" size="48601" author="becket_qin" created="Fri, 1 Aug 2014 18:06:20 +0000"/>
                            <attachment id="12659213" name="KAFKA-1567.patch" size="48601" author="becket_qin" created="Fri, 1 Aug 2014 18:04:46 +0000"/>
                            <attachment id="12659210" name="KAFKA-1567.patch" size="116165" author="becket_qin" created="Fri, 1 Aug 2014 17:47:21 +0000"/>
                            <attachment id="12660471" name="KAFKA-1567_2014-08-07_14:26:04.patch" size="11396" author="becket_qin" created="Thu, 7 Aug 2014 21:29:01 +0000"/>
                            <attachment id="12660781" name="KAFKA-1567_2014-08-08_18:44:20.patch" size="14437" author="becket_qin" created="Sat, 9 Aug 2014 01:44:41 +0000"/>
                            <attachment id="12661084" name="KAFKA-1567_2014-08-11_15:55:26.patch" size="14861" author="becket_qin" created="Mon, 11 Aug 2014 22:55:49 +0000"/>
                            <attachment id="12661319" name="KAFKA-1567_2014-08-12_15:20:10.patch" size="15844" author="becket_qin" created="Tue, 12 Aug 2014 22:20:39 +0000"/>
                            <attachment id="12661472" name="KAFKA-1567_2014-08-13_08:25:57.patch" size="15792" author="becket_qin" created="Wed, 13 Aug 2014 15:27:05 +0000"/>
                            <attachment id="12661496" name="KAFKA-1567_2014-08-13_11:24:29.patch" size="15824" author="becket_qin" created="Wed, 13 Aug 2014 18:25:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409409</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 14 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yfxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>