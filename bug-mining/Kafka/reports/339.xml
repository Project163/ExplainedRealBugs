<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:39:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1071] The random partition selected in DefaultEventHandler is not random across producer instances</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1071</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In DefaultEventHandler, partitionCounter is initialized to 0. If multiple producers start at about the same time, they likely will always select the same partition.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12672044">KAFKA-1071</key>
            <summary>The random partition selected in DefaultEventHandler is not random across producer instances</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guozhang">Guozhang Wang</assignee>
                                    <reporter username="junrao">Jun Rao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Oct 2013 22:17:10 +0000</created>
                <updated>Fri, 4 Oct 2013 00:47:58 +0000</updated>
                            <resolved>Fri, 4 Oct 2013 00:47:58 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13784576" author="guozhang" created="Wed, 2 Oct 2013 22:40:45 +0000"  >&lt;p&gt;Use random int as init value.&lt;/p&gt;</comment>
                            <comment id="13784816" author="junrao" created="Thu, 3 Oct 2013 04:32:40 +0000"  >&lt;p&gt;Thanks for the patch. Would it be better to just get a random int in getPartition()? In the current approach, if the multiple producer instances somehow get into the lock-step mode, they will never get out of that mode, if partitions are always available.&lt;/p&gt;</comment>
                            <comment id="13785576" author="guozhang" created="Thu, 3 Oct 2013 21:52:54 +0000"  >&lt;p&gt;Good point. Attached v2 for that, also tested that Random.nextInt will not return the same numbers even being called at roughly the same time.&lt;/p&gt;</comment>
                            <comment id="13785584" author="nehanarkhede" created="Thu, 3 Oct 2013 22:02:30 +0000"  >&lt;p&gt;It might work better if we seed the random with the current timestamp - &lt;a href=&quot;http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#Random(long&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#Random(long&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Not sure how good Scala&apos;s Random implementation is, I tend to trust Java more on that.&lt;/p&gt;</comment>
                            <comment id="13785594" author="guozhang" created="Thu, 3 Oct 2013 22:13:05 +0000"  >&lt;p&gt;I tested the Random implementation a bit and the results look good. One thing of using timestamp is that producer clients may start at roughly the same time, and I do not know if there is a correlation between numeric difference of seed values and the numeric difference between the generated values.&lt;/p&gt;</comment>
                            <comment id="13785640" author="nehanarkhede" created="Thu, 3 Oct 2013 23:03:20 +0000"  >&lt;p&gt;Though it is unlikely that the nanosecond timestamp across producer instances would match, I don&apos;t feel strongly about the change.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13785753" author="junrao" created="Fri, 4 Oct 2013 00:47:58 +0000"  >&lt;p&gt;Thanks for patch v2. +1. Committed to 0.8.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12606471" name="KAFKA-1071.v1.patch" size="1100" author="guozhang" created="Wed, 2 Oct 2013 22:40:45 +0000"/>
                            <attachment id="12606653" name="KAFKA-1071.v2.patch" size="1694" author="guozhang" created="Thu, 3 Oct 2013 21:52:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351670</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1omtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351958</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>