<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:25:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-10574] Infinite loop in SimpleHeaderConverter and Values classes</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-10574</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;A header value with the byte sequence &lt;tt&gt;0xEF, 0xBF, 0xBF&lt;/tt&gt;&#160;will cause an infinite loop in the &lt;tt&gt;Values::parseString&lt;/tt&gt;&#160;method. Since that method is invoked by the default header converter (&lt;tt&gt;SimpleHeaderConverter&lt;/tt&gt;), any sink record with that byte array will, by default, cause a sink task reading that record to stall forever.&lt;/p&gt;

&lt;p&gt;This occurs because that byte sequence, when parsed as a UTF-8 string and then read by a &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/text/StringCharacterIterator.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;StringCharacterIterator&lt;/a&gt;, causes the &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/text/CharacterIterator.html#DONE&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CharacterIterator.DONE&lt;/a&gt;&#160;character to be returned from &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/text/StringCharacterIterator.html#current--&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;StringCharacterIterator::current&lt;/a&gt;,&#160;&lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/text/StringCharacterIterator.html#next--&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;StringCharacterIterator::next&lt;/a&gt;, etc., and a check for that character is used by the &lt;tt&gt;Values&lt;/tt&gt; class for its parsing logic.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13333758">KAFKA-10574</key>
            <summary>Infinite loop in SimpleHeaderConverter and Values classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ChrisEgerton">Chris Egerton</assignee>
                                    <reporter username="ChrisEgerton">Chris Egerton</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Oct 2020 16:17:13 +0000</created>
                <updated>Wed, 18 May 2022 01:32:19 +0000</updated>
                            <resolved>Mon, 12 Oct 2020 20:00:07 +0000</resolved>
                                    <version>1.1.0</version>
                    <version>1.1.1</version>
                    <version>1.1.2</version>
                    <version>2.0.0</version>
                    <version>2.0.1</version>
                    <version>2.0.2</version>
                    <version>2.1.0</version>
                    <version>2.1.1</version>
                    <version>2.2.0</version>
                    <version>2.2.1</version>
                    <version>2.2.2</version>
                    <version>2.3.0</version>
                    <version>2.3.1</version>
                    <version>2.4.0</version>
                    <version>2.4.1</version>
                    <version>2.5.0</version>
                    <version>2.5.1</version>
                    <version>2.6.0</version>
                                    <fixVersion>2.3.2</fixVersion>
                    <fixVersion>2.4.2</fixVersion>
                    <fixVersion>2.5.2</fixVersion>
                    <fixVersion>2.6.1</fixVersion>
                    <fixVersion>2.7.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17208163" author="chrisegerton" created="Mon, 5 Oct 2020 16:18:17 +0000"  >&lt;p&gt;This can be reproduced by adding the following test case to the &lt;tt&gt;ValuesTest&lt;/tt&gt; class (beware that running this test will cause an infinite loop and it will need to be terminated manually):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void shouldNotEncounterInfiniteLoop() {
        &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] bytes = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] { -17, -65,  -65 };
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; str = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(bytes, StandardCharsets.UTF_8);
        Values.parseString(str);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17212637" author="rhauch" created="Mon, 12 Oct 2020 20:00:07 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ChrisEgerton&quot; class=&quot;user-hover&quot; rel=&quot;ChrisEgerton&quot;&gt;ChrisEgerton&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Merged to the `trunk` branch for inclusion in the next release after 2.7, and cherry-picked to the following branches:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;`2.7` for inclusion in the upcoming 2.7.0 release&lt;/li&gt;
	&lt;li&gt;`2.6` for inclusion in the next 2.6.1 release if/when that happens&lt;/li&gt;
	&lt;li&gt;`2.5` for inclusion in the next 2.5.2 release if/when that happens&lt;/li&gt;
	&lt;li&gt;`2.4` for inclusion in the next 2.4.2 release if/when that happens&lt;/li&gt;
	&lt;li&gt;`2.3` for inclusion in the next 2.3.2 release if/when that happens&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17212643" author="chrisegerton" created="Mon, 12 Oct 2020 20:11:14 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhauch&quot; class=&quot;user-hover&quot; rel=&quot;rhauch&quot;&gt;rhauch&lt;/a&gt;. Really appreciate the backports; it&apos;s a one-in-16-million chance for this bug to show up but when it does it can be pretty nasty. Nice to know that those future releases will be safe.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0jfds:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>rhauch</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>