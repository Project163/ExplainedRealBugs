<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:38:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-915] System Test - Mirror Maker testcase_5001 failed</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-915</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;This case passes if brokers are set to partition = 1, replicas = 1&lt;br/&gt;
It fails if brokers are set to partition = 5, replicas = 3 (consistently reproducible)&lt;/p&gt;

&lt;p&gt;This test case is set up as shown below.&lt;/p&gt;

&lt;p&gt;1. Start 2 ZK as a cluster in Source&lt;br/&gt;
2. Start 2 ZK as a cluster in Target&lt;br/&gt;
3. Start 3 brokers as a cluster in Source (partition = 1, replicas = 1)&lt;br/&gt;
4. Start 3 brokers as a cluster in Target (partition = 1, replicas = 1)&lt;br/&gt;
5. Start 1 MM&lt;br/&gt;
6. Start ProducerPerformance to send some data&lt;br/&gt;
7. After Producer is done, start ConsoleConsumer to consume data&lt;br/&gt;
8. Stop all processes and validate if there is any data loss.&lt;br/&gt;
9. No failure is introduced to any process in this test&lt;/p&gt;

&lt;p&gt;Attached a tar file which contains the logs and system test output for both cases.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12648966">KAFKA-915</key>
            <summary>System Test - Mirror Maker testcase_5001 failed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jjkoshy">Joel Jacob Koshy</assignee>
                                    <reporter username="jfung">John Fung</reporter>
                        <labels>
                            <label>kafka-0.8</label>
                            <label>replication-testing</label>
                    </labels>
                <created>Wed, 22 May 2013 21:14:38 +0000</created>
                <updated>Fri, 2 Aug 2013 23:18:55 +0000</updated>
                            <resolved>Fri, 2 Aug 2013 23:18:48 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13664653" author="jfung" created="Wed, 22 May 2013 23:07:28 +0000"  >&lt;p&gt;This issue is not reproducible in the following commit (or before it) :&lt;/p&gt;

&lt;p&gt;commit 988d4d8e65a14390abd748318a64e281e4a37c19&lt;br/&gt;
Author: Neha Narkhede &amp;lt;neha.narkhede@gmail.com&amp;gt;&lt;br/&gt;
Date:   Tue Apr 30 17:20:54 2013 -0700&lt;/p&gt;</comment>
                            <comment id="13669421" author="nehanarkhede" created="Wed, 29 May 2013 16:45:22 +0000"  >&lt;p&gt;Joel, could you take a quick look ?&lt;/p&gt;</comment>
                            <comment id="13699641" author="jjkoshy" created="Thu, 4 Jul 2013 00:45:03 +0000"  >&lt;p&gt;This failure is due to the fact that the leaderAndIsr request has not yet made it to the brokers until after the mirror maker&apos;s rebalance completes. This is related to the issue reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-956&quot; title=&quot;High-level consumer fails to check topic metadata response for errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-956&quot;&gt;&lt;del&gt;KAFKA-956&lt;/del&gt;&lt;/a&gt;. Previously (before we started caching metadata at the brokers) the partition information was retrieved directly from zk.&lt;/p&gt;

&lt;p&gt;The fix for now would be to use the create topic admin before starting the mirror maker (or move the producer performance start up to well before the mirror maker startup).&lt;/p&gt;</comment>
                            <comment id="13702134" author="jfung" created="Mon, 8 Jul 2013 17:10:35 +0000"  >&lt;p&gt;Thanks Joel for the suggestion. It&apos;s working by calling the create topic admin before starting mirror maker. kafka-915-v1.patch is uploaded for the change.&lt;/p&gt;</comment>
                            <comment id="13703827" author="jfung" created="Tue, 9 Jul 2013 21:31:34 +0000"  >&lt;p&gt;Hi Joel,&lt;/p&gt;

&lt;p&gt;After apply kafka-915-v1.patch (which is to create topic manually before starting mirror maker), testcase_5001 passes. However, testcase_5003 &amp;amp; testcase_5005 are failing due to data loss.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
John&lt;/p&gt;</comment>
                            <comment id="13728247" author="jjkoshy" created="Fri, 2 Aug 2013 23:13:16 +0000"  >&lt;p&gt;+1 on the patch. I actually could not reproduce the other failures, so I&apos;ll check this in.&lt;/p&gt;

&lt;p&gt;========================================================&lt;/p&gt;

&lt;p&gt;_test_case_name  :  testcase_5001&lt;br/&gt;
_test_class_name  :  MirrorMakerTest&lt;br/&gt;
arg : bounce_leader  :  false&lt;br/&gt;
arg : bounce_mirror_maker  :  false&lt;br/&gt;
arg : message_producing_free_time_sec  :  15&lt;br/&gt;
arg : num_iteration  :  1&lt;br/&gt;
arg : num_messages_to_produce_per_producer_call  :  50&lt;br/&gt;
arg : num_partition  :  1&lt;br/&gt;
arg : replica_factor  :  3&lt;br/&gt;
arg : sleep_seconds_between_producer_calls  :  1&lt;br/&gt;
validation_status  :&lt;br/&gt;
     Unique messages from consumer on &lt;span class=&quot;error&quot;&gt;&amp;#91;test_1&amp;#93;&lt;/span&gt;  :  500&lt;br/&gt;
     Unique messages from producer on &lt;span class=&quot;error&quot;&gt;&amp;#91;test_1&amp;#93;&lt;/span&gt;  :  500&lt;br/&gt;
     Validate for data matched on topic &lt;span class=&quot;error&quot;&gt;&amp;#91;test_1&amp;#93;&lt;/span&gt;  :  PASSED&lt;br/&gt;
     Validate for merged log segment checksum in cluster &lt;span class=&quot;error&quot;&gt;&amp;#91;source&amp;#93;&lt;/span&gt;  :  PASSED&lt;br/&gt;
     Validate for merged log segment checksum in cluster &lt;span class=&quot;error&quot;&gt;&amp;#91;target&amp;#93;&lt;/span&gt;  :  PASSED&lt;/p&gt;

&lt;p&gt;========================================================&lt;/p&gt;

&lt;p&gt;_test_case_name  :  testcase_5002&lt;br/&gt;
_test_class_name  :  MirrorMakerTest&lt;br/&gt;
validation_status  :&lt;/p&gt;

&lt;p&gt;========================================================&lt;/p&gt;

&lt;p&gt;_test_case_name  :  testcase_5003&lt;br/&gt;
_test_class_name  :  MirrorMakerTest&lt;br/&gt;
arg : bounce_leader  :  false&lt;br/&gt;
arg : bounce_mirror_maker  :  true&lt;br/&gt;
arg : bounced_entity_downtime_sec  :  30&lt;br/&gt;
arg : message_producing_free_time_sec  :  15&lt;br/&gt;
arg : num_iteration  :  1&lt;br/&gt;
arg : num_messages_to_produce_per_producer_call  :  50&lt;br/&gt;
arg : num_partition  :  1&lt;br/&gt;
arg : replica_factor  :  3&lt;br/&gt;
arg : sleep_seconds_between_producer_calls  :  1&lt;br/&gt;
validation_status  :&lt;br/&gt;
     Unique messages from consumer on &lt;span class=&quot;error&quot;&gt;&amp;#91;test_1&amp;#93;&lt;/span&gt;  :  2200&lt;br/&gt;
     Unique messages from producer on &lt;span class=&quot;error&quot;&gt;&amp;#91;test_1&amp;#93;&lt;/span&gt;  :  2200&lt;br/&gt;
     Validate for data matched on topic &lt;span class=&quot;error&quot;&gt;&amp;#91;test_1&amp;#93;&lt;/span&gt;  :  PASSED&lt;br/&gt;
     Validate for merged log segment checksum in cluster &lt;span class=&quot;error&quot;&gt;&amp;#91;source&amp;#93;&lt;/span&gt;  :  PASSED&lt;br/&gt;
     Validate for merged log segment checksum in cluster &lt;span class=&quot;error&quot;&gt;&amp;#91;target&amp;#93;&lt;/span&gt;  :  PASSED&lt;/p&gt;

&lt;p&gt;========================================================&lt;/p&gt;

&lt;p&gt;_test_case_name  :  testcase_5004&lt;br/&gt;
_test_class_name  :  MirrorMakerTest&lt;br/&gt;
validation_status  :&lt;/p&gt;

&lt;p&gt;========================================================&lt;/p&gt;

&lt;p&gt;_test_case_name  :  testcase_5005&lt;br/&gt;
_test_class_name  :  MirrorMakerTest&lt;br/&gt;
arg : bounce_leader  :  false&lt;br/&gt;
arg : bounce_mirror_maker  :  true&lt;br/&gt;
arg : bounced_entity_downtime_sec  :  30&lt;br/&gt;
arg : message_producing_free_time_sec  :  15&lt;br/&gt;
arg : num_iteration  :  1&lt;br/&gt;
arg : num_messages_to_produce_per_producer_call  :  50&lt;br/&gt;
arg : num_partition  :  2&lt;br/&gt;
arg : replica_factor  :  3&lt;br/&gt;
arg : sleep_seconds_between_producer_calls  :  1&lt;br/&gt;
validation_status  :&lt;br/&gt;
     Unique messages from consumer on &lt;span class=&quot;error&quot;&gt;&amp;#91;test_1&amp;#93;&lt;/span&gt;  :  1400&lt;br/&gt;
     Unique messages from consumer on &lt;span class=&quot;error&quot;&gt;&amp;#91;test_2&amp;#93;&lt;/span&gt;  :  1400&lt;br/&gt;
     Unique messages from producer on &lt;span class=&quot;error&quot;&gt;&amp;#91;test_1&amp;#93;&lt;/span&gt;  :  1400&lt;br/&gt;
     Unique messages from producer on &lt;span class=&quot;error&quot;&gt;&amp;#91;test_2&amp;#93;&lt;/span&gt;  :  1400&lt;br/&gt;
     Validate for data matched on topic &lt;span class=&quot;error&quot;&gt;&amp;#91;test_1&amp;#93;&lt;/span&gt;  :  PASSED&lt;br/&gt;
     Validate for data matched on topic &lt;span class=&quot;error&quot;&gt;&amp;#91;test_2&amp;#93;&lt;/span&gt;  :  PASSED&lt;br/&gt;
     Validate for merged log segment checksum in cluster &lt;span class=&quot;error&quot;&gt;&amp;#91;source&amp;#93;&lt;/span&gt;  :  PASSED&lt;br/&gt;
     Validate for merged log segment checksum in cluster &lt;span class=&quot;error&quot;&gt;&amp;#91;target&amp;#93;&lt;/span&gt;  :  PASSED&lt;/p&gt;

&lt;p&gt;========================================================&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12591230" name="kafka-915-v1.patch" size="1310" author="jfung" created="Mon, 8 Jul 2013 17:10:54 +0000"/>
                            <attachment id="12584384" name="testcase_5001_debug_logs.tar.gz" size="1154419" author="jfung" created="Wed, 22 May 2013 21:17:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329295</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kt9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>