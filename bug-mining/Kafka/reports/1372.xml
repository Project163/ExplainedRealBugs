<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:59:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4484] Set more conservative default values on RocksDB for memory usage</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4484</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Quoting from email thread:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
The block cache size defaults to a whopping 100Mb per store, and that gets
expensive
fast. I reduced it to a few megabytes. My data size is so big that I doubt
it is very effective
anyway. Now it seems more stable.

I&apos;d say that a smaller &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; makes sense, especially because the failure
&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; is
so opaque (running all tests just fine but with a serious dataset it dies
slowly)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Before we have the a single-knob memory management feature, I&lt;span class=&quot;code-quote&quot;&gt;&apos;d like to propose reducing the Streams&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; config values &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; RocksDB caching and memory block size. For example, I remember Henry has done some fine tuning on the RocksDB config &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; his use &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;:

https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/HenryCaiHaiying/kafka/commit/b297f7c585f5a883ee068277e5f0f1224c347bd4
&lt;/span&gt;https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/HenryCaiHaiying/kafka/commit/eed1726d16e528d813755a6e66b49d0bf14e8803
&lt;/span&gt;https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/HenryCaiHaiying/kafka/commit/ccc4e25b110cd33eea47b40a2f6bf17ba0924576
&lt;/span&gt;
We could check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; some of those changes are appropriate in general and &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; yes change the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; settings accordingly.

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13025242">KAFKA-4484</key>
            <summary>Set more conservative default values on RocksDB for memory usage</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="damianguy">Damian Guy</assignee>
                                    <reporter username="guozhang">Guozhang Wang</reporter>
                        <labels>
                            <label>performance</label>
                    </labels>
                <created>Fri, 2 Dec 2016 23:16:34 +0000</created>
                <updated>Thu, 16 Feb 2017 23:36:15 +0000</updated>
                            <resolved>Thu, 16 Feb 2017 23:35:46 +0000</resolved>
                                                    <fixVersion>0.11.0.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15716836" author="guozhang" created="Fri, 2 Dec 2016 23:18:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hcai%40pinterest.com&quot; class=&quot;user-hover&quot; rel=&quot;hcai@pinterest.com&quot;&gt;hcai@pinterest.com&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=flyaruu&quot; class=&quot;user-hover&quot; rel=&quot;flyaruu&quot;&gt;flyaruu&lt;/a&gt; do you want to consider changing the default config values from your experience?&lt;/p&gt;</comment>
                            <comment id="15859593" author="githubbot" created="Thu, 9 Feb 2017 14:37:06 +0000"  >&lt;p&gt;GitHub user dguy opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2525&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2525&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4484&quot; title=&quot;Set more conservative default values on RocksDB for memory usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4484&quot;&gt;&lt;del&gt;KAFKA-4484&lt;/del&gt;&lt;/a&gt;: Set more conservative default values on RocksDB for memory usage&lt;/p&gt;

&lt;p&gt;    Lowered the default RocksDB settings for the block cache and write buffers&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dguy/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dguy/kafka&lt;/a&gt; kafka-4484&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2525.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2525.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2525&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1af052a998cc45420ff182ce925c00a073a512e5&lt;br/&gt;
Author: Damian Guy &amp;lt;damian.guy@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-02-09T14:35:38Z&lt;/p&gt;

&lt;p&gt;    lower rocks db defaults&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15870882" author="guozhang" created="Thu, 16 Feb 2017 23:35:46 +0000"  >&lt;p&gt;Issue resolved by pull request 2525&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2525&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2525&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15870883" author="githubbot" created="Thu, 16 Feb 2017 23:36:15 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2525&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2525&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i373pr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>