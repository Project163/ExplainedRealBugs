<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:29:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-13598] idempotence producer is not enabled by default if not set explicitly</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-13598</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-10619&quot; title=&quot;Enable producer idempotence by default (KIP-679)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-10619&quot;&gt;&lt;del&gt;KAFKA-10619&lt;/del&gt;&lt;/a&gt;, we intended to enable idempotence by default, but this was not achieved due to a bug in the config validation logic. The change from acks=1 to acks=all worked correctly, however.&lt;/p&gt;

&lt;p&gt;This is the following up for KIP-679: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-679%3A+Producer+will+enable+the+strongest+delivery+guarantee+by+default&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/KIP-679%3A+Producer+will+enable+the+strongest+delivery+guarantee+by+default&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Note: In &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-13673&quot; title=&quot;disable idempotent producer when acks/retries/max.in.flight config conflicts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-13673&quot;&gt;&lt;del&gt;KAFKA-13673&lt;/del&gt;&lt;/a&gt;, we&apos;ll disable idempotent producer when acks/retries/max.in.flight config conflicts, to avoid breaking existing producers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13423209">KAFKA-13598</key>
            <summary>idempotence producer is not enabled by default if not set explicitly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="showuon">Luke Chen</assignee>
                                    <reporter username="showuon">Luke Chen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jan 2022 08:53:17 +0000</created>
                <updated>Tue, 7 Jun 2022 01:23:11 +0000</updated>
                            <resolved>Mon, 7 Feb 2022 17:58:30 +0000</resolved>
                                    <version>3.0.0</version>
                    <version>3.1.0</version>
                                    <fixVersion>3.0.1</fixVersion>
                    <fixVersion>3.1.1</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>clients</component>
                    <component>config</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17477963" author="ijuma" created="Tue, 18 Jan 2022 15:13:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt; it would be good to determine if this is a 3.1.0 blocker. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dajac&quot; class=&quot;user-hover&quot; rel=&quot;dajac&quot;&gt;dajac&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kirktrue&quot; class=&quot;user-hover&quot; rel=&quot;kirktrue&quot;&gt;kirktrue&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17478086" author="dajac" created="Tue, 18 Jan 2022 17:54:44 +0000"  >&lt;p&gt;That seems to be a bug and not a regression introduced in 3.1 so I lean towards fixing it in 3.0.1 and 3.1.1. What do you guys think? I will take a close look into it tomorrow.&lt;/p&gt;</comment>
                            <comment id="17478308" author="showuon" created="Wed, 19 Jan 2022 01:56:19 +0000"  >&lt;p&gt;Since the memory leak issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-13597&quot; title=&quot;Memory leak with kafka-clients 3.0.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-13597&quot;&gt;&lt;del&gt;KAFKA-13597&lt;/del&gt;&lt;/a&gt; is confirmed to be a bad dependency version for the interceptor, I think we don&apos;t have to fix this in v3.1.0. Thank you.&lt;/p&gt;</comment>
                            <comment id="17478455" author="dajac" created="Wed, 19 Jan 2022 09:09:03 +0000"  >&lt;p&gt;Sounds good. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17547803" author="d-t-w" created="Sat, 4 Jun 2022 02:01:39 +0000"  >&lt;p&gt;This represents a breaking change where:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Broker version is &amp;lt; 2.8.0&lt;/li&gt;
	&lt;li&gt;Cluster has ACL configured, but no IDEMPOTENT_WRITE permission set&lt;/li&gt;
	&lt;li&gt;Producer has default configuration (or no config captured in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-13673&quot; title=&quot;disable idempotent producer when acks/retries/max.in.flight config conflicts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-13673&quot;&gt;&lt;del&gt;KAFKA-13673&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;Kafka Client library version is bumped to 3.2.0 in the producing application&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The resulting production error has a ClusterAuthorizationException but it wasn&apos;t clear that a new ACL was required until we found &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-13759&quot; title=&quot;Disable producer idempotence by default in producers instantiated by Connect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-13759&quot;&gt;&lt;del&gt;KAFKA-13759&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I think 1-3 might be quite a common scenario for Kafka users in the wild, and 4 is very easy to do on the application side.&lt;/p&gt;

&lt;p&gt;Perhaps it might be an idea to add a note to the 3.2.0 upgrade guide or release notes about this one.&lt;/p&gt;

&lt;p&gt;More info: &lt;a href=&quot;https://kpow.io/articles/kafka-producer-breaking-change/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://kpow.io/articles/kafka-producer-breaking-change/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17547813" author="showuon" created="Sat, 4 Jun 2022 02:51:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=d-t-w&quot; class=&quot;user-hover&quot; rel=&quot;d-t-w&quot;&gt;d-t-w&lt;/a&gt; , yes, adding a note to notable changes in 3.2.0 section is a good idea. Are you interested in submitting a PR for it? Thanks.&lt;/p&gt;</comment>
                            <comment id="17547818" author="d-t-w" created="Sat, 4 Jun 2022 03:28:52 +0000"  >&lt;p&gt;Very happy to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt; I will just copy points 1-4 into the notes if that&apos;s ok?&lt;/p&gt;

&lt;p&gt;I&apos;ll raise a PR later this afternoon. Should I raise that PR on the apache-site github repository?&lt;/p&gt;</comment>
                            <comment id="17547916" author="showuon" created="Sat, 4 Jun 2022 06:45:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=d-t-w&quot; class=&quot;user-hover&quot; rel=&quot;d-t-w&quot;&gt;d-t-w&lt;/a&gt; , let&apos;s open a PR to Kafka repo first, we can discuss how to phrase it there. And then open a PR to kafka-site after merged.&lt;/p&gt;

&lt;p&gt;For the points 1-4, I&apos;m thinking we should make it into a sentence.&lt;/p&gt;

&lt;p&gt;This is the current note for v3.2.0 related to this issue:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Notable changes in 3.2.0&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160; &#160; &lt;em&gt;- Idempotence for the producer is enabled by default if no conflicting configurations are set. In 3.0.0 and 3.1.0, a bug prevented this default from being applied, which meant that idempotence remained disabled unless the user had explicitly set enable.idempotence to true (See &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-13598&quot; title=&quot;idempotence producer is not enabled by default if not set explicitly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-13598&quot;&gt;&lt;del&gt;KAFKA-13598&lt;/del&gt;&lt;/a&gt; for more details). This issue was fixed and the default is properly applied in 3.0.1, 3.1.1, and 3.2.0.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;m thinking you can add a sub-bullet after it, ex:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Notable changes in 3.2.0&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160; &#160; &lt;em&gt;- Idempotence for the producer is enabled by default if no conflicting configurations are set. In 3.0.0 and 3.1.0, a bug prevented this default from being applied, which meant that idempotence remained disabled unless the user had explicitly set enable.idempotence to true (See &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-13598&quot; title=&quot;idempotence producer is not enabled by default if not set explicitly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-13598&quot;&gt;&lt;del&gt;KAFKA-13598&lt;/del&gt;&lt;/a&gt; for more details). This issue was fixed and the default is properly applied in 3.0.1, 3.1.1, and 3.2.0.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;em&gt;-- When the broker version is lower than 2.8.0, and the client version is&lt;/em&gt;&#160;&lt;em&gt;3.0.1, 3.1.1, and later, the IDEMPOTENT_WRITE permission is required to produce data.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Something like that. Again, we can discuss it in the PR. Thank you.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17550736" author="d-t-w" created="Tue, 7 Jun 2022 01:23:11 +0000"  >&lt;p&gt;Thanks Luke, I raised &lt;a href=&quot;https://github.com/apache/kafka/pull/12260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/12260&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13421888">KAFKA-13589</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13429003">KAFKA-13673</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13336139">KAFKA-10619</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0yofs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>