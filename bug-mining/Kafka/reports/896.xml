<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:51:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-2927] System tests: reduce storage footprint of collected logs</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-2927</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Looking at recent night test runs (testing.confluent.io/kafka), the storage requirements for log output from the various services has increased significantly, up to 7-10G for a single test run, up from hundreds of MB&lt;/p&gt;

&lt;p&gt;Current breakdown:&lt;br/&gt;
23M	Benchmark&lt;br/&gt;
3.2M	ClientCompatibilityTest&lt;br/&gt;
613M	ConnectDistributedTest&lt;br/&gt;
1.1M	ConnectRestApiTest&lt;br/&gt;
1.5M	ConnectStandaloneFileTest&lt;br/&gt;
2.0M	ConsoleConsumerTest&lt;br/&gt;
440K	KafkaVersionTest&lt;br/&gt;
744K	Log4jAppenderTest&lt;br/&gt;
49M 	QuotaTest&lt;br/&gt;
3.0G	        ReplicationTest&lt;br/&gt;
1.2G	        TestMirrorMakerService&lt;br/&gt;
185M	TestUpgrade&lt;br/&gt;
372K	TestVerifiableProducer&lt;br/&gt;
2.3G	        VerifiableConsumerTest&lt;/p&gt;


&lt;p&gt;The biggest contributors in these test suites:&lt;/p&gt;

&lt;p&gt;ReplicationTest:&lt;br/&gt;
verifiable_producer.log (currently TRACE level)&lt;/p&gt;

&lt;p&gt;VerifiableConsumerTest:&lt;br/&gt;
kafka server.log&lt;/p&gt;

&lt;p&gt;TestMirrorMakerService:&lt;br/&gt;
verifiable_producer.log&lt;/p&gt;

&lt;p&gt;ConnectDistributedTest:&lt;br/&gt;
kafka server.log&lt;/p&gt;


&lt;p&gt;The worst offenders are therefore &lt;br/&gt;
verifiable_producer.log which is logging at TRACE level, and kafka server.log which is logging at debug level&lt;/p&gt;

&lt;p&gt;One solution is to:&lt;br/&gt;
1) Update the log4j configs to log separately to both an INFO level file, and another file for DEBUG at least for the worst offenders.&lt;/p&gt;

&lt;p&gt;2) Don&apos;t collect these DEBUG (and below) logs by default; only mark for collection during failure&lt;/p&gt;</description>
                <environment></environment>
        <key id="12917445">KAFKA-2927</key>
            <summary>System tests: reduce storage footprint of collected logs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="granders">Geoff Anderson</assignee>
                                    <reporter username="granders">Geoff Anderson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Dec 2015 02:21:32 +0000</created>
                <updated>Fri, 11 Dec 2015 01:35:49 +0000</updated>
                            <resolved>Fri, 11 Dec 2015 01:35:49 +0000</resolved>
                                                    <fixVersion>0.10.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15049845" author="githubbot" created="Thu, 10 Dec 2015 01:48:49 +0000"  >&lt;p&gt;GitHub user granders opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/657&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/657&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2927&quot; title=&quot;System tests: reduce storage footprint of collected logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2927&quot;&gt;&lt;del&gt;KAFKA-2927&lt;/del&gt;&lt;/a&gt;: reduce system test storage footprint&lt;/p&gt;

&lt;p&gt;    Split kafka logging into two levels - DEBUG and INFO, and do not collect DEBUG by default.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/confluentinc/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/confluentinc/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2927&quot; title=&quot;System tests: reduce storage footprint of collected logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2927&quot;&gt;&lt;del&gt;KAFKA-2927&lt;/del&gt;&lt;/a&gt;-reduce-log-footprint&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/657.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/657.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #657&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0dc3a1a367083f57f3cb6d8e1cd82571598d7108&lt;br/&gt;
Author: Geoff Anderson &amp;lt;geoff@confluent.io&amp;gt;&lt;br/&gt;
Date:   2015-12-10T01:09:59Z&lt;/p&gt;

&lt;p&gt;    Split kafka logging into two levels - DEBUG and INFO, and do not collect DEBUG by default&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15051987" author="githubbot" created="Fri, 11 Dec 2015 01:35:33 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/657&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/657&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15051988" author="ewencp" created="Fri, 11 Dec 2015 01:35:49 +0000"  >&lt;p&gt;Issue resolved by pull request 657&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/657&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/657&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p5dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>ewencp</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>