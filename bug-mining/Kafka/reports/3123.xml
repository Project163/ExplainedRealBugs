<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:29:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-13421] Fix ConsumerBounceTest#testRollingBrokerRestartsWithSmallerMaxGroupSizeConfigDisruptsBigGroup</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-13421</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;ConsumerBounceTest#testRollingBrokerRestartsWithSmallerMaxGroupSizeConfigDisruptsBigGroup is failing with this error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ConsumerBounceTest &amp;gt; testSubscribeWhenTopicUnavailable() PASSED
kafka.api.ConsumerBounceTest.testRollingBrokerRestartsWithSmallerMaxGroupSizeConfigDisruptsBigGroup() failed, log available in /home/cmccabe/src/kafka9/core/build/reports/testOutput/kafka.api.ConsumerBounceTest.testRollingBrokerRestartsWithSmallerMaxGroupSizeConfigDisruptsBigGroup().test.stdout
                                                                                                                
ConsumerBounceTest &amp;gt; testRollingBrokerRestartsWithSmallerMaxGroupSizeConfigDisruptsBigGroup() FAILED            
    org.apache.zookeeper.KeeperException$NodeExistsException: KeeperErrorCode = NodeExists
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:126)                                
        at kafka.zk.KafkaZkClient$CheckedEphemeral.getAfterNodeExists(KafkaZkClient.scala:1904)                 
        at kafka.zk.KafkaZkClient$CheckedEphemeral.create(KafkaZkClient.scala:1842)
        at kafka.zk.KafkaZkClient.checkedEphemeralCreate(KafkaZkClient.scala:1809)
        at kafka.zk.KafkaZkClient.registerBroker(KafkaZkClient.scala:96)
        at kafka.server.KafkaServer.startup(KafkaServer.scala:320)
        at kafka.integration.KafkaServerTestHarness.$anonfun$restartDeadBrokers$2(KafkaServerTestHarness.scala:2
12)
        at scala.runtime.java8.JFunction1$mcVI$sp.apply(JFunction1$mcVI$sp.scala:18)
        at scala.collection.IterableOnceOps.foreach(IterableOnce.scala:563)
        at scala.collection.IterableOnceOps.foreach$(IterableOnce.scala:561)
        at scala.collection.AbstractIterable.foreach(Iterable.scala:919)
        at scala.collection.IterableOps$WithFilter.foreach(Iterable.scala:889)
        at kafka.integration.KafkaServerTestHarness.restartDeadBrokers(KafkaServerTestHarness.scala:203)
        at kafka.api.ConsumerBounceTest.$anonfun$testRollingBrokerRestartsWithSmallerMaxGroupSizeConfigDisruptsB
igGroup$1(ConsumerBounceTest.scala:327)
        at scala.collection.immutable.Range.foreach$mVc$sp(Range.scala:190)
        at kafka.api.ConsumerBounceTest.testRollingBrokerRestartsWithSmallerMaxGroupSizeConfigDisruptsBigGroup(C
onsumerBounceTest.scala:319) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13409225">KAFKA-13421</key>
            <summary>Fix ConsumerBounceTest#testRollingBrokerRestartsWithSmallerMaxGroupSizeConfigDisruptsBigGroup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="pnee">Philip Nee</assignee>
                                    <reporter username="cmccabe">Colin McCabe</reporter>
                        <labels>
                            <label>clients</label>
                            <label>consumer</label>
                            <label>flaky-test</label>
                            <label>unit-test</label>
                    </labels>
                <created>Sat, 30 Oct 2021 03:09:26 +0000</created>
                <updated>Thu, 26 Jun 2025 13:07:01 +0000</updated>
                                                            <fixVersion>4.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                                                                <comments>
                            <comment id="17506538" author="guozhang" created="Mon, 14 Mar 2022 20:50:29 +0000"  >&lt;p&gt;Re-opening this ticket since the test is still failing.&lt;/p&gt;</comment>
                            <comment id="17583760" author="jagsancio" created="Tue, 23 Aug 2022 17:07:43 +0000"  >&lt;p&gt;This test is currently getting skipped. Moving this Jira to 3.4.0&lt;/p&gt;</comment>
                            <comment id="17647828" author="ableegoldman" created="Thu, 15 Dec 2022 02:58:34 +0000"  >&lt;p&gt;bumping this to 3.5.0 as we are past code freeze for 3.4&lt;/p&gt;</comment>
                            <comment id="17696010" author="JIRAUSER283568" created="Fri, 3 Mar 2023 05:39:25 +0000"  >&lt;p&gt;I think the original issue (org.apache.zookeeper.KeeperException$NodeExistsException: KeeperErrorCode = NodeExists)&#160; is different to what I&apos;m seeing now. It could be a different issue. The test sets hb interval to 1s, I wonder if that&apos;s too short&lt;/p&gt;</comment>
                            <comment id="17718824" author="mimaison" created="Wed, 3 May 2023 07:59:13 +0000"  >&lt;p&gt;We are past code freeze for 3.5 so moving to the next release.&lt;/p&gt;</comment>
                            <comment id="17739954" author="divijvaidya" created="Tue, 4 Jul 2023 15:56:44 +0000"  >&lt;p&gt;I looked into the logs and after some deep dive found thread leaks which we check at QuorumTestHarness. Looking at the names of the threads, it seems like we are not closing&#160;BounceBrokerScheduler correctly in some tests. We need to go through all tests in this file and verify that we are closing the threads properly&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
    org.opentest4j.AssertionFailedError: Found 3 unexpected threads during @AfterAll: `controller-event-thread,daemon-bounce-broker-EventThread,Test worker-EventThread` ==&amp;gt; expected: &amp;lt;true&amp;gt; but was: &amp;lt;false&amp;gt;&lt;br/&gt;
        at app//org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)&lt;br/&gt;
        at app//org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)&lt;br/&gt;
        at app//org.junit.jupiter.api.AssertTrue.failNotTrue(AssertTrue.java:63)&lt;br/&gt;
        at app//org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:36)&lt;br/&gt;
        at app//org.junit.jupiter.api.Assertions.assertTrue(Assertions.java:211)&lt;br/&gt;
        at app//kafka.utils.TestUtils$.verifyNoUnexpectedThreads(TestUtils.scala:2385)&lt;br/&gt;
        at app//kafka.server.QuorumTestHarness.tearDownClass(QuorumTestHarness.scala:446)&lt;/p&gt;</comment>
                            <comment id="17761806" author="satish.duggana" created="Mon, 4 Sep 2023 12:08:23 +0000"  >&lt;p&gt;Moving it to 3.7.0 as there is not much activity on this issues for the last few weeks. &lt;/p&gt;</comment>
                            <comment id="17800631" author="enether" created="Tue, 26 Dec 2023 21:38:47 +0000"  >&lt;p&gt;Changing target fix version to 3.8 since this is not a blocker and we are cutting a 3.7 RC&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17854404" author="JIRAUSER283568" created="Wed, 12 Jun 2024 11:41:37 +0000"  >&lt;p&gt;the test is disabled, can we make this non-blocker?&lt;/p&gt;</comment>
                            <comment id="17856159" author="jlprat" created="Wed, 19 Jun 2024 07:17:01 +0000"  >&lt;p&gt;Changing target fix version to 3.9 since this is not a blocker and we are past code freeze&lt;/p&gt;</comment>
                            <comment id="17877796" author="cmccabe" created="Thu, 29 Aug 2024 17:21:33 +0000"  >&lt;p&gt;Changing target fix version to 4.0 since this is not a blocker and we are past code freeze&lt;/p&gt;</comment>
                            <comment id="17914652" author="dajac" created="Mon, 20 Jan 2025 12:50:12 +0000"  >&lt;p&gt;Changing target fix version to 4.1 since this is not a blocker and we are past code freeze.&lt;/p&gt;</comment>
                            <comment id="17986356" author="mimaison" created="Thu, 26 Jun 2025 13:07:01 +0000"  >&lt;p&gt;Moving to the next release as we&apos;re now in code freeze for 4.1.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0wavs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>