<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:18:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-7895] Ktable supress operator emitting more than one record for the same key per window</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-7895</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Hi, We are using kstreams to get the aggregated counts per vendor(key) within a specified window.&lt;/p&gt;

&lt;p&gt;Here&apos;s how we configured the suppress&#160;operator to emit one final record per key/window.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
KTable&amp;lt;Windowed&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; windowedCount = groupedStream
     .windowedBy(TimeWindows.of(Duration.ofMinutes(1)).grace(ofMillis(5L)))
     .count(Materialized.with(Serdes.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(),Serdes.&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;()))
     .suppress(Suppressed.untilWindowCloses(unbounded()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But we are getting more than one record for the same key/window as shown below.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[KTABLE-TOSTREAM-0000000010]: [131@1549067040000/1549067100000], 1039
[KTABLE-TOSTREAM-0000000010]: [131@1549067040000/1549067100000], 1162
[KTABLE-TOSTREAM-0000000010]: [9@1549067040000/1549067100000], 6584
[KTABLE-TOSTREAM-0000000010]: [88@1549067040000/1549067100000], 107
[KTABLE-TOSTREAM-0000000010]: [108@1549067040000/1549067100000], 315
[KTABLE-TOSTREAM-0000000010]: [119@1549067040000/1549067100000], 119
[KTABLE-TOSTREAM-0000000010]: [154@1549067040000/1549067100000], 746
[KTABLE-TOSTREAM-0000000010]: [154@1549067040000/1549067100000], 809&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Could you please take a look?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Added&#160;by John:&lt;/p&gt;

&lt;p&gt;Acceptance Criteria:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;add suppress to system tests, such that it&apos;s exercised with crash/shutdown recovery, rebalance, etc.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/kafka/pull/6278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6278&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;make sure that there&apos;s some system test coverage with caching disabled.
	&lt;ul&gt;
		&lt;li&gt;Follow-on ticket: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7943&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-7943&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;test with tighter time bounds with windows of say 30 seconds and use system time without adding any extra time for verification
	&lt;ul&gt;
		&lt;li&gt;Follow-on ticket:&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7944&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-7944&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13213510">KAFKA-7895</key>
            <summary>Ktable supress operator emitting more than one record for the same key per window</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vvcephei">John Roesler</assignee>
                                    <reporter username="prasanthi13">prasanthi</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Feb 2019 22:15:12 +0000</created>
                <updated>Wed, 6 Nov 2019 21:13:25 +0000</updated>
                            <resolved>Sat, 20 Apr 2019 18:38:38 +0000</resolved>
                                    <version>2.1.0</version>
                    <version>2.1.1</version>
                    <version>2.2.0</version>
                                    <fixVersion>2.2.1</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="16759559" author="mjsax" created="Sun, 3 Feb 2019 22:45:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vvcephei&quot; class=&quot;user-hover&quot; rel=&quot;vvcephei&quot;&gt;vvcephei&lt;/a&gt; Not sure how quickly we can figure this out. However, 2.1.1 is not released yet and there might be another RC... For this case, if we are quickly enough, we could get it into 2.1.1. Don&apos;t think it&apos;s a blocker for 2.1.1 though. \cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cmccabe&quot; class=&quot;user-hover&quot; rel=&quot;cmccabe&quot;&gt;cmccabe&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16759763" author="mbragg" created="Mon, 4 Feb 2019 10:59:13 +0000"  >&lt;p&gt;I am experiencing what appears similar/related.&#160;I&#8217;m seeing&#160;quite a large number of duplicates being created when my topology comes back up after being restarted. (Caching is disabled and Im using a short commit internal). I&#8217;m using a groupBy key -&amp;gt; windowBy (time) -&amp;gt; aggregate -&amp;gt; suppress. The suppress is configured until window closes, unbounded, window-size 1 hour, grace 1 min. Its there are a smaller number of duplicates created whilst the topology is running, but its much smaller compared to when its restarted.&lt;/p&gt;</comment>
                            <comment id="16759979" author="vvcephei" created="Mon, 4 Feb 2019 16:15:17 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for thinking about that. I&apos;ve been hacking on this issue for a little over a day now, with no luck so far.&lt;/p&gt;

&lt;p&gt;Given that we don&apos;t know how long it will take to repro the issue or figure it out and fix it, I&apos;d hold off on blocking the release.&lt;/p&gt;

&lt;p&gt;If I have a breakthrough, I&apos;ll figure out what stage the release is in.&lt;/p&gt;

&lt;p&gt;It is a serious report, though, so in either case, once we have a fix, I would request an immediate bugfix release.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-John&lt;/p&gt;

&lt;p&gt;(cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cmccabe&quot; class=&quot;user-hover&quot; rel=&quot;cmccabe&quot;&gt;cmccabe&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="16761316" author="vvcephei" created="Tue, 5 Feb 2019 23:51:26 +0000"  >&lt;p&gt;Quick update:&lt;/p&gt;

&lt;p&gt;I have added a suppression operator to Streams&apos;s system tests, and I believe that I have a local repro of the bug. I&apos;ll dig in more tomorrow and update everyone with status as I learn more.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-John&lt;/p&gt;</comment>
                            <comment id="16762027" author="prasanthi13" created="Wed, 6 Feb 2019 19:13:11 +0000"  >&lt;p&gt;Great! Thank you John for the update.&lt;/p&gt;</comment>
                            <comment id="16763174" author="vvcephei" created="Thu, 7 Feb 2019 23:58:47 +0000"  >&lt;p&gt;I think I figured it out.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The suppression operator depends on a guarantee from upstream windowed aggregations that they will not send any further events for a window once its grace period expires. The windowed aggregations themselves correctly implement this guarantee, but record caches can violate it, since they&apos;ll hold onto events until the next commit/flush.&lt;/p&gt;

&lt;p&gt;This suggests that a workaround would be to disable caching in the windowed aggregation prior to suppression, but I didn&apos;t try it out. Depending on the specific topology, this might not be sufficient.&lt;/p&gt;

&lt;p&gt;It just so happens that in all my tests, I&apos;d disabled caching, probably with the idea of making the output deterministic. I didn&apos;t predict that it would affect correctness.&lt;/p&gt;

&lt;p&gt;I have a fix for it, by changing the way that stream-time is accounted for. I&apos;m running the system tests now to be sure the fix is ok. Once a preliminary PR (&lt;a href=&quot;https://github.com/apache/kafka/pull/6231)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6231)&lt;/a&gt;&#160;is merged and the system tests pass, I&apos;ll clean up my branch and send a PR.&lt;/p&gt;

&lt;p&gt;Once I submit the PR, maybe some intrepid folks out there can pull my branch and try it out.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Does this explanation make sense?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-John&lt;/p&gt;</comment>
                            <comment id="16763209" author="guozhang" created="Fri, 8 Feb 2019 01:24:46 +0000"  >&lt;p&gt;Hi John, thanks for looking into it. One thing though is that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbragg&quot; class=&quot;user-hover&quot; rel=&quot;mbragg&quot;&gt;mbragg&lt;/a&gt; reported he sees similar issues in his environment while he&apos;s already disabled caching, does that mean there are other issues not related to caching layer as well?&lt;/p&gt;</comment>
                            <comment id="16763268" author="vvcephei" created="Fri, 8 Feb 2019 03:05:35 +0000"  >&lt;p&gt;Thanks for the reminder, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I think that the same mechanism could cause duplicates as well during recovery, since stream time is currently determined by the input partitions, but the recovery is from the changelog topic, so recovered events may all appear to be arriving at the same stream time.&lt;/p&gt;

&lt;p&gt;If I&apos;m right about this, then the fix I have in mind should address that as well.&lt;/p&gt;

&lt;p&gt;However, it is troubling that Michael also said that he observed duplicates during steady-state processing, post recovery, with caching disabled. There may be something else going on as well.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The system tests already exercise crash and shutdown recovery, so to complete the picture, I&apos;ll make sure I add a system test with caching disabled (if there&apos;s not already one).&lt;/p&gt;</comment>
                            <comment id="16769663" author="githubbot" created="Fri, 15 Feb 2019 19:56:43 +0000"  >&lt;p&gt;vvcephei commented on pull request #6278: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: Fix stream-time reckoning for suppress&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6278&lt;/a&gt;&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;Add suppress to system tests&lt;/li&gt;
	&lt;li&gt;Move stream-time reckoning from Task into Processor&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   Even within a Task, different Processors have different perceptions&lt;br/&gt;
   of time, due to record caching on stores and in suppression itself,&lt;br/&gt;
   and in general, due to any processor logic that may hold onto&lt;br/&gt;
   records arbitrarily and emit them later. Thanks to this, we can&apos;t rely&lt;br/&gt;
   on the whole task existing in the same &quot;instant&quot; of stream-time. The&lt;br/&gt;
   solution is for each processor node that cares about stream-time to&lt;br/&gt;
   track it independently.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16769842" author="vvcephei" created="Fri, 15 Feb 2019 23:17:55 +0000"  >&lt;p&gt;Hi all,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;m proposing &lt;a href=&quot;https://github.com/apache/kafka/pull/6278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6278&lt;/a&gt;&#160;as a fix to this issue.&lt;/p&gt;

&lt;p&gt;If anyone is willing to build my branch and verify if it fixes the issue for them, I would be grateful.&lt;/p&gt;

&lt;p&gt;Your code reviews are also appreciated.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-John&lt;/p&gt;</comment>
                            <comment id="16770654" author="vvcephei" created="Sun, 17 Feb 2019 22:19:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka/pull/6278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6278&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16771095" author="mbragg" created="Mon, 18 Feb 2019 13:50:14 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vvcephei&quot; class=&quot;user-hover&quot; rel=&quot;vvcephei&quot;&gt;vvcephei&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for your proposed fix, sounds promising! To clarify my initial comment, I meant to say that its &lt;em&gt;possible&lt;/em&gt; there&apos;s duplicates during steady processing... but if so the number would be much less then during restore of the state stores; where there is a massive spike. Sorry for the confusion.&#160;&lt;/p&gt;</comment>
                            <comment id="16771275" author="githubbot" created="Mon, 18 Feb 2019 18:14:40 +0000"  >&lt;p&gt;mjsax commented on pull request #6278: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: Fix stream-time reckoning for suppress&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6278&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16771322" author="githubbot" created="Mon, 18 Feb 2019 19:30:37 +0000"  >&lt;p&gt;vvcephei commented on pull request #6286: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: fix stream-time reckoning for Suppress&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6286&lt;/a&gt;&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;Add suppress to system tests&lt;/li&gt;
	&lt;li&gt;Move stream-time reckoning from Task into Processor&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   Even within a Task, different Processors have different perceptions&lt;br/&gt;
   of time, due to record caching on stores and in suppression itself,&lt;br/&gt;
   and in general, due to any processor logic that may hold onto&lt;br/&gt;
   records arbitrarily and emit them later. Thanks to this, we can&apos;t rely&lt;br/&gt;
   on the whole task existing in the same &quot;instant&quot; of stream-time. The&lt;br/&gt;
   solution is for each processor node that cares about stream-time to&lt;br/&gt;
   track it independently.&lt;/p&gt;

&lt;p&gt;   See also #6278&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16772856" author="mbragg" created="Wed, 20 Feb 2019 10:13:26 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vvcephei&quot; class=&quot;user-hover&quot; rel=&quot;vvcephei&quot;&gt;vvcephei&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;What would be a typical ETA of this fix being available in a release? Are there any pre-releases published anywhere?&lt;/p&gt;

&lt;p&gt;Sorry to be a pain!&#160;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="16773103" author="githubbot" created="Wed, 20 Feb 2019 15:16:00 +0000"  >&lt;p&gt;bbejeck commented on pull request #6286: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: fix stream-time reckoning for Suppress (2.2)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6286&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16777234" author="githubbot" created="Mon, 25 Feb 2019 19:30:35 +0000"  >&lt;p&gt;vvcephei commented on pull request #6325: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: fix stream-time reckoning for Suppress (2.2) (#6286)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6325&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Even within a Task, different Processors have different perceptions&lt;br/&gt;
   of time, due to record caching on stores and in suppression itself,&lt;br/&gt;
   and in general, due to any processor logic that may hold onto&lt;br/&gt;
   records arbitrarily and emit them later. Thanks to this, we can&apos;t rely&lt;br/&gt;
   on the whole task existing in the same &quot;instant&quot; of stream-time. The&lt;br/&gt;
   solution is for each processor node that cares about stream-time to&lt;br/&gt;
   track it independently.&lt;/p&gt;

&lt;p&gt;   On the side, backporting some internally-facing code maintainability updates&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16783754" author="vvcephei" created="Mon, 4 Mar 2019 20:28:51 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbragg&quot; class=&quot;user-hover&quot; rel=&quot;mbragg&quot;&gt;mbragg&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Sorry for the delay.&lt;/p&gt;

&lt;p&gt;Thanks for the clarification. I&apos;m very curious if the patch resolves the problem for you.&lt;/p&gt;

&lt;p&gt;The 2.2 release should be very soon. They are currently voting on the release candidate in the dev mailing list.&lt;/p&gt;

&lt;p&gt;Actually, the release candidate message contains information about testing the release candidate: &lt;a href=&quot;https://lists.apache.org/list.html?dev@kafka.apache.org:lte=1M:%5BVOTE%5D%202.2.0%20RC1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/list.html?dev@kafka.apache.org:lte=1M:%5BVOTE%5D%202.2.0%20RC1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please let me know if you have any trouble with it.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-John&lt;/p&gt;</comment>
                            <comment id="16784816" author="githubbot" created="Tue, 5 Mar 2019 19:36:10 +0000"  >&lt;p&gt;bbejeck commented on pull request #6325: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: fix stream-time reckoning for Suppress (2.1) (#6286)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6325&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16798017" author="andrewrk" created="Thu, 21 Mar 2019 11:37:53 +0000"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;I am still seeing this behaviour using the 2.2.0 Maven artifacts from &lt;a href=&quot;https://repository.apache.org/content/groups/staging&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/staging&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;With the topology below, I invariably get emissions of previously emitted windows for the same key on restart of my streams application, and sometimes the re-emitted windows have earlier timestamps and aggregated data that is consistent with the latter part of the window being lost (i.e., state seems to be resetting to an earlier version):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; sourceStream
    .groupByKey()
    .windowedBy(TimeWindows.of(rollupInterval).grace(config.getGracePeriodDuration()))
    .aggregate(
        () -&amp;gt; rollupFactory.createRollup(windowDuration),
        aggregator,
        Materialized.&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, R, WindowStore&amp;lt;Bytes, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;gt;&amp;gt;as(outputTopic + &lt;span class=&quot;code-quote&quot;&gt;&quot;_state&quot;&lt;/span&gt;)
            .withValueSerde(rollupSerde)
    )
    .suppress(Suppressed.untilWindowCloses(BufferConfig.unbounded())
        .withName(outputTopic + &lt;span class=&quot;code-quote&quot;&gt;&quot;_suppress_state&quot;&lt;/span&gt;))
    .toStream((stringWindowed, rollup) -&amp;gt; stringWindowed.key());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;I have tried disabling caching using:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
streamsConfiguration.put(StreamsConfig.CACHE_MAX_BYTES_BUFFERING_CONFIG, 0);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;but this does not appear to make a difference.&lt;/p&gt;

&lt;p&gt;There also seems to be no difference in behaviour between 2.2.0 and 2.1.1.&lt;/p&gt;

&lt;p&gt;Regards&lt;/p&gt;

&lt;p&gt;Andrew&lt;/p&gt;</comment>
                            <comment id="16800950" author="vvcephei" created="Mon, 25 Mar 2019 18:08:42 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AndrewRK&quot; class=&quot;user-hover&quot; rel=&quot;AndrewRK&quot;&gt;AndrewRK&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Sorry to hear that!&lt;/p&gt;

&lt;p&gt;Looking at your topology, I&apos;d expect it to work as advertised (obviously), and it also looks very similar to what I&apos;ve tested heavily, so I might need to get some more help from you to investigate the cause.&lt;/p&gt;

&lt;p&gt;I have a couple of follow-up questions...&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Is this restarting after a clean shutdown or a crash? (i.e., how do you stop and restart the app?)&lt;/li&gt;
	&lt;li&gt;Do you have EOS enabled? (If you don&apos;t, can you try to repro with EOS on?)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-John&lt;/p&gt;</comment>
                            <comment id="16801566" author="andrewrk" created="Tue, 26 Mar 2019 10:28:20 +0000"  >&lt;p&gt;Hi John Roesler&lt;/p&gt;

&lt;p&gt;To answer your first question, I have a shutdown hook in place that seems to be working correctly according to the slf4j logs (the application changes state from RUNNING -&amp;gt; PENDING_SHUTDOWN -&amp;gt; NOT_RUNNING).&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt;.getRuntime().addShutdownHook(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(streams::close));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I do have exactly-once configured. My settings are as follows (commit interval of 10s):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        streamsConfiguration.put(StreamsConfig.APPLICATION_ID_CONFIG, appConfig.getApplicationID());
        streamsConfiguration.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG,
            appConfig.getBootstrapServerList().stream().map(HostPort::toString).collect(Collectors.joining(&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;)));
        streamsConfiguration.put(StreamsConfig.STATE_DIR_CONFIG, appConfig.getStateDirectory());
        streamsConfiguration.put(StreamsConfig.COMMIT_INTERVAL_MS_CONFIG,
            appConfig.getCommitIntervalDuration().toMillis());
        streamsConfiguration.put(StreamsConfig.DEFAULT_TIMESTAMP_EXTRACTOR_CLASS_CONFIG,
            com.booking.infra.rollup.kafka.TimestampedValueTimestampExtractor.class);
        streamsConfiguration.put(StreamsConfig.PROCESSING_GUARANTEE_CONFIG,
            StreamsConfig.EXACTLY_ONCE);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When I test I start with a new docker-based Kafka cluster and delete the application state directory. I feed the app with enough input to generate one or two commits and then hit Ctrl-C, which appears to shut everything down correctly. I then restart the app leaving the state directory untouched. My code does not call streams.cleanup(). Almost without fail this will produce repeated entries for the same key/window. Sometimes the repeated entries will be different, in which case the repeat matches an older entry in the source KTable.&lt;/p&gt;

&lt;p&gt;I do not have to stress the app in any way to cause this, which makes me wonder if I am doing something fundamentally wrong.&lt;/p&gt;

&lt;p&gt;Here is an example of the repeated output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
0.0026: 1553591980510: monitors.group1:stat.stat1: time=1553591980510 wstart=1553591980000 wsize=1000 count=12 sum=1044 sumSq=91400 min=76 max=98 last=98
0.0041: 1553591980057: monitors.group1:stat.stat1: time=1553591980057 wstart=1553591980000 wsize=1000 count=2 sum=154 sumSq=11860 min=76 max=78 last=78
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And here is are the corresponding entries in the KTable changelog:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
0.0026: 1553591980057: [monitors.group1:stat.stat1@1553591980000/1553591981000]: time=1553591980057 wstart=1553591980000 wsize=1000 count=2 sum=154 sumSq=11860 min=76 max=78 last=78
0.0028: 1553591987079: [monitors.group1:stat.stat1@1553591980000/1553591981000]: time=1553591980510 wstart=1553591980000 wsize=1000 count=12 sum=1044 sumSq=91400 min=76 max=98 last=98
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please let me know if you need any more information, or if you need me to run any more tests.&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
 Andrew&lt;/p&gt;</comment>
                            <comment id="16803605" author="vvcephei" created="Thu, 28 Mar 2019 05:43:50 +0000"  >&lt;p&gt;Thanks for the extra details, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AndrewRK&quot; class=&quot;user-hover&quot; rel=&quot;AndrewRK&quot;&gt;AndrewRK&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I&apos;ll try setting up a scenario similar to what you&apos;ve described and see if I get the same behavior.&lt;/p&gt;

&lt;p&gt;I doubt this is the problem, but just to check all the boxes, when you read the output topic, have you set the consumer to &quot;read_committed&quot;?&lt;/p&gt;

&lt;p&gt;-John&lt;/p&gt;</comment>
                            <comment id="16803813" author="andrewrk" created="Thu, 28 Mar 2019 10:53:48 +0000"  >&lt;p&gt;Hi John Roesler&lt;/p&gt;

&lt;p&gt;Yes, my consumer&apos;s isolation level is set to read_committed.&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Andrew&lt;/p&gt;</comment>
                            <comment id="16804035" author="vvcephei" created="Thu, 28 Mar 2019 15:37:37 +0000"  >&lt;p&gt;EDIT: actually, nevermind. After replicating your application, I was able to reproduce what you&apos;re seeing. I&apos;ll let you know when I figure out what&apos;s going on.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;Also, can you elaborate on how `TimestampedValueTimestampExtractor` behaves?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-John&lt;/p&gt;</comment>
                            <comment id="16804179" author="vvcephei" created="Thu, 28 Mar 2019 18:27:07 +0000"  >&lt;p&gt;Here&apos;s the repro I put together. It&apos;ll take me a little while to debug it, but I wanted to share my approach.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/vvcephei/suppress-demo&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vvcephei/suppress-demo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;-John&lt;/p&gt;</comment>
                            <comment id="16807217" author="vvcephei" created="Mon, 1 Apr 2019 21:43:19 +0000"  >&lt;p&gt;Quick update: The main source of the duplicates seems to be this odd situation where the suppression buffer is sometimes sending its records to the wrong changelog partition. This results in duplicates because those changelog partitions are handled independently, so the message sent to the wrong partition will be emitted in addition to the ones sent to the right partition.&#160;It&apos;s still not clear why some records are being logged to the wrong partition.&lt;/p&gt;

&lt;p&gt;When I fully understand why this is happening, I should also be able to explain why none of the existing tests have caught this condition, when it&apos;s so easy to reproduce with your application.&lt;/p&gt;</comment>
                            <comment id="16808185" author="vvcephei" created="Tue, 2 Apr 2019 22:05:54 +0000"  >&lt;p&gt;Status update: I found a couple of subtle bugs in the logic for restoring tombstones from the changelog for the suppression buffer. Running with my patched version of Streams, I was able to restart the application in my suppress-demo six times in a row without seeing any duplicates. (Previously, I&apos;d see it on the first restart). So, I feel pretty good about this fix.&lt;/p&gt;

&lt;p&gt;I&apos;m cleaning up my branch and will have a PR for review by tomorrow morning.&lt;/p&gt;

&lt;p&gt;I think the reason that none of the existing integration/system tests caught it is just that they don&apos;t run over a long enough time scale. I&apos;m working on regression tests for these specific bugs, which I&apos;ll include as a part of my PR. I&apos;ll create a ticket to add a more realistic system test to exercise Streams better and expose bugs like this.&lt;/p&gt;</comment>
                            <comment id="16808896" author="githubbot" created="Wed, 3 Apr 2019 16:38:16 +0000"  >&lt;p&gt;vvcephei commented on pull request #6536: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: fix Suppress changelog restore&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6536&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6536&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Several issues have come to light since the 2.2.0 release:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;upon restore, `suppress` incorrectly set the record metadata using the changelog record, instead of preserving the original metadata&lt;/li&gt;
	&lt;li&gt;restoring a tombstone incorrectly didn&apos;t update the buffer size and min-timestamp&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16808900" author="vvcephei" created="Wed, 3 Apr 2019 16:41:55 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AndrewRK&quot; class=&quot;user-hover&quot; rel=&quot;AndrewRK&quot;&gt;AndrewRK&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I&apos;ve created a PR to fix the issues I&apos;ve found from your report. Do you mind testing my patch and confirming that it fixes your issues?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka/pull/6536&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6536&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Note: I&apos;m currently seeing no duplicates if I close Streams gracefully (using SIGTERM + shutdown hook), but I am still seeing duplicates if I terminate Streams abruptly (using SIGKILL). I think this has a separate root cause, and it wasn&apos;t part of your report, so I&apos;m submitting this PR now, while I continue to debug the further issues.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-John&lt;/p&gt;</comment>
                            <comment id="16810770" author="andrewrk" created="Fri, 5 Apr 2019 12:43:01 +0000"  >&lt;p&gt;Hi John Roesler&lt;/p&gt;

&lt;p&gt;I can confirm that I am no longer seeing duplicates. Thanks a lot for your help.&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Andrew&lt;/p&gt;</comment>
                            <comment id="16812787" author="vvcephei" created="Mon, 8 Apr 2019 20:57:19 +0000"  >&lt;p&gt;No problem. Thanks for &lt;em&gt;your&lt;/em&gt;&#160;help!&lt;/p&gt;

&lt;p&gt;The PR is being reviewed now. Once it&apos;s merged, I&apos;ll request it to be cherry-picked to all versions that have Suppress, and then request bugfix releases for them.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As an update, I&apos;ve tracked down the problem where I&apos;m still seeing duplicates when I crash the application, even with EOS enabled. The problem is that Streams flushes the state stores in no particular order.&#160;If there is a cached state store upstream of the suppression, and Streams flushes the suppression buffer first, and then the cached state store second, the cached data will get flushed and processed by Suppress, and there may be processing results that Suppress emits, but the changelog for the buffer won&apos;t be updated again. The solution I have in mind is to flush the stores in topological order. In the mean time, disabling caching should eliminate this particular source of duplicates, if someone is looking for a workaround.&lt;/p&gt;</comment>
                            <comment id="16813626" author="vvcephei" created="Tue, 9 Apr 2019 17:08:02 +0000"  >&lt;p&gt;I&apos;m tracking the incorrect flushing behavior in a separate ticket (&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8204&quot; title=&quot;Streams may flush state stores in the incorrect order&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8204&quot;&gt;&lt;del&gt;KAFKA-8204&lt;/del&gt;&lt;/a&gt;). This is the root cause of the continued duplicate results, even when EOS is enabled, when the Streams process undergoes an abrubt stop.&lt;/p&gt;</comment>
                            <comment id="16822470" author="githubbot" created="Sat, 20 Apr 2019 15:08:39 +0000"  >&lt;p&gt;bbejeck commented on pull request #6536: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: fix Suppress changelog restore&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6536&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6536&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16822826" author="songkun" created="Mon, 22 Apr 2019 01:50:05 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vvcephei&quot; class=&quot;user-hover&quot; rel=&quot;vvcephei&quot;&gt;vvcephei&lt;/a&gt;, when do we have a new release for this?&lt;/p&gt;</comment>
                            <comment id="16823142" author="githubbot" created="Mon, 22 Apr 2019 14:37:12 +0000"  >&lt;p&gt;vvcephei commented on pull request #6615: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: fix Suppress changelog restore (#6536)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6615&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6615&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Several issues have come to light since the 2.2.0 release:&lt;br/&gt;
   upon restore, suppress incorrectly set the record metadata using the changelog record, instead of preserving the original metadata&lt;br/&gt;
   restoring a tombstone incorrectly didn&apos;t update the buffer size and min-timestamp&lt;/p&gt;

&lt;p&gt;   Cherry-picked from #6536 / 6538e9e4d6c1f64fe3045a5c3fbfe306277a1bee&lt;/p&gt;

&lt;p&gt;   Reviewers: Guozhang Wang &amp;lt;wangguoz@gmail.com&amp;gt;, Matthias J. Sax &amp;lt;mjsax@apache.org&amp;gt;,  Bruno Cadonna &amp;lt;bruno@confluent.io&amp;gt;,  Bill Bejeck &amp;lt;bbejeck@gmail.com&amp;gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16823151" author="githubbot" created="Mon, 22 Apr 2019 14:47:33 +0000"  >&lt;p&gt;vvcephei commented on pull request #6616: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: fix Suppress changelog restore (#6536)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6616&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Several issues have come to light since the 2.2.0 release:&lt;br/&gt;
   upon restore, suppress incorrectly set the record metadata using the changelog record, instead of preserving the original metadata&lt;br/&gt;
   restoring a tombstone incorrectly didn&apos;t update the buffer size and min-timestamp&lt;/p&gt;

&lt;p&gt;   Cherry-picked from #6536 / 6538e9e&lt;/p&gt;

&lt;p&gt;   Reviewers: Guozhang Wang &amp;lt;wangguoz@gmail.com&amp;gt;, Matthias J. Sax &amp;lt;mjsax@apache.org&amp;gt;,  Bruno Cadonna &amp;lt;bruno@confluent.io&amp;gt;,  Bill Bejeck &amp;lt;bbejeck@gmail.com&amp;gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16823159" author="vvcephei" created="Mon, 22 Apr 2019 14:58:06 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=songkun&quot; class=&quot;user-hover&quot; rel=&quot;songkun&quot;&gt;songkun&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;No, this fix is just now merged, and we&apos;re working on merging the 2.2 and 2.1 backports. We also need to merge &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8204&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-8204&lt;/a&gt; before we do buxfix releases. I&apos;ll send a note to this thread when we do the releases, so all the subscribers can verify they are fixed.&lt;/p&gt;</comment>
                            <comment id="16823193" author="mjsax" created="Mon, 22 Apr 2019 15:54:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=songkun&quot; class=&quot;user-hover&quot; rel=&quot;songkun&quot;&gt;songkun&lt;/a&gt;: planned release dates are published in the wiki:&#160;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/Future+release+plan&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/Future+release+plan&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16823589" author="githubbot" created="Tue, 23 Apr 2019 00:21:59 +0000"  >&lt;p&gt;bbejeck commented on pull request #6615: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: fix Suppress changelog restore (#6536)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6615&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6615&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16824376" author="githubbot" created="Tue, 23 Apr 2019 17:42:06 +0000"  >&lt;p&gt;bbejeck commented on pull request #6616: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: fix Suppress changelog restore (#6536)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6616&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16824382" author="vvcephei" created="Tue, 23 Apr 2019 17:47:17 +0000"  >&lt;p&gt;Update: this bugfix has been merged to trunk (2.3), 2.2, and 2.1 branches. I&apos;m waiting on other bugfixes before requesting patch releases.&lt;/p&gt;</comment>
                            <comment id="16824757" author="songkun" created="Wed, 24 Apr 2019 02:34:42 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; for your kind suggesstion, and&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vvcephei&quot; class=&quot;user-hover&quot; rel=&quot;vvcephei&quot;&gt;vvcephei&lt;/a&gt;&#160;, thank your timely notification, looking forward the patch release!&lt;/p&gt;</comment>
                            <comment id="16826169" author="mjsax" created="Thu, 25 Apr 2019 15:33:26 +0000"  >&lt;p&gt;2.2.1 release was proposed today. Cf:&#160;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/Release+Plan+2.2.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/Release+Plan+2.2.1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16833708" author="songkun" created="Mon, 6 May 2019 11:14:30 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vvcephei&quot; class=&quot;user-hover&quot; rel=&quot;vvcephei&quot;&gt;vvcephei&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;, any progress on that?&lt;/p&gt;</comment>
                            <comment id="16833880" author="vvcephei" created="Mon, 6 May 2019 14:40:55 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=songkun&quot; class=&quot;user-hover&quot; rel=&quot;songkun&quot;&gt;songkun&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;The release process takes a little while, as they have to wait on critical bugfixes to be merged, then build release candidates, and then have a vote for approval.&lt;/p&gt;

&lt;p&gt;I&apos;d just keep an eye on the release plan page for current status, and if you want to watch it play out &quot;in real time&quot;, you can subscribe to the Kafka dev mailing list. There&apos;s a thread for the release.&lt;/p&gt;

&lt;p&gt;Thanks! And I look forward to getting this fix out for you. Thanks again for the report.&lt;br/&gt;
-John&lt;/p&gt;</comment>
                            <comment id="16837348" author="vvcephei" created="Fri, 10 May 2019 15:08:10 +0000"  >&lt;p&gt;FYI, 2.2.1 RC0 vote is in progress. (&lt;a href=&quot;https://lists.apache.org/thread.html/3486798e63ae666fc336ce9009f07c7fdf66a96badc1fed63bcbd2ed@%3Cdev.kafka.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/3486798e63ae666fc336ce9009f07c7fdf66a96badc1fed63bcbd2ed@%3Cdev.kafka.apache.org%3E&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Please feel free to test it out, and reply on the vote thread if you have some trouble with it.&lt;/p&gt;</comment>
                            <comment id="16841851" author="songkun" created="Fri, 17 May 2019 02:01:03 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vvcephei&quot; class=&quot;user-hover&quot; rel=&quot;vvcephei&quot;&gt;vvcephei&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Great work!&lt;/p&gt;

&lt;p&gt;I want to test it in my env, but I can&apos;t figure how to find this version, since it&apos;s still not released, could you please give me some tips where I can download it, thanks!&lt;/p&gt;

&lt;p&gt;Edit: I just find it now&#160;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16842047" author="mjsax" created="Fri, 17 May 2019 09:50:04 +0000"  >&lt;p&gt;As pointed out in the email John linked to, the RC artifact can be downloaded:&#160;&lt;a href=&quot;https://home.apache.org/~vahid/kafka-2.2.1-rc0/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://home.apache.org/~vahid/kafka-2.2.1-rc0/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16933898" author="githubbot" created="Fri, 20 Sep 2019 01:06:20 +0000"  >&lt;p&gt;vvcephei commented on pull request #7373: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: Revert suppress changelog bugfix for 2.1&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7373&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7373&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   The bugfix from (#6536) (#6616) breaks compatibility with brokers using log format less than 0.11. (Because record headers are not supported in 0.10 brokers)&lt;/p&gt;

&lt;p&gt;   Even though this fix is useful, we should not break broker compatibility in a bugfix release, so I&apos;m reverting just the changelog format change. Note: this re-introduces the suppress bug related to changelog restoration, so folks using suppress are recommended to upgrade to 2.2.1 at least.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16936404" author="mjsax" created="Tue, 24 Sep 2019 05:27:03 +0000"  >&lt;p&gt;This won&apos;t fix for 2.1.2&#160;due to backward compatibility issues &#8211; reverting the back port.&lt;/p&gt;</comment>
                            <comment id="16939732" author="githubbot" created="Fri, 27 Sep 2019 20:08:51 +0000"  >&lt;p&gt;mjsax commented on pull request #7373: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7895&quot; title=&quot;Ktable supress operator emitting more than one record for the same key per window&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7895&quot;&gt;&lt;del&gt;KAFKA-7895&lt;/del&gt;&lt;/a&gt;: Revert suppress changelog bugfix for 2.1&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7373&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7373&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13226999">KAFKA-8204</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13216427">KAFKA-7943</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13216428">KAFKA-7944</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 7 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0lo0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>vvcephei</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>