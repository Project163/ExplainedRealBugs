<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:37:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-786] Use &quot;withRequiredArg&quot; while parsing jopt options in all tools</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-786</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;While parsing jopt Options in our tools, we sometimes use withRequiredArg() and sometimes use withOptionalArg(). I think this confusing and we should always use withRequiredArg().&lt;/p&gt;

&lt;p&gt;withOptionalArg() allows you to provide an option without an argument. For instance, the following commands will yield the same result if xyz was a parser option that accepted an optional argument and was provided a default in the tool&apos;s code:&lt;br/&gt;
kafka-tool.sh --xyz &lt;br/&gt;
kafka-tool.sh &lt;/p&gt;

&lt;p&gt;I don&apos;t quite see the need to allow the 1st command, think that writing code will be less confusing if we allowed only the second command. To do that, we can make all options require arguments. These arguments will need to be given via command line or via a default in the code. So if xyz was an option that required an argument then you will see the following:&lt;/p&gt;

&lt;p&gt;kafka-tool.sh --xyz &lt;br/&gt;
Option &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;xyz&amp;#39;&amp;#93;&lt;/span&gt; requires an argument //printed by jOpt&lt;/p&gt;

&lt;p&gt;kafka-tool.sh --xyz argumentVal&lt;br/&gt;
// Kafka tool proceeds&lt;/p&gt;

&lt;p&gt;If you want to use a default value specified for xyz in the code, then simply run ./kafka-tool.sh.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12635260">KAFKA-786</key>
            <summary>Use &quot;withRequiredArg&quot; while parsing jopt options in all tools</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="swapnilghike">Swapnil Ghike</assignee>
                                    <reporter username="swapnilghike">Swapnil Ghike</reporter>
                        <labels>
                            <label>kafka-0.8</label>
                            <label>p2</label>
                    </labels>
                <created>Tue, 5 Mar 2013 00:45:00 +0000</created>
                <updated>Wed, 6 Mar 2013 18:27:35 +0000</updated>
                            <resolved>Wed, 6 Mar 2013 18:13:17 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13592863" author="swapnilghike" created="Tue, 5 Mar 2013 00:45:39 +0000"  >&lt;p&gt;Also note that withRequiredArg() does not check if xyz has a non-null value, we still need to perform that check ourselves in the code. So, jopt will do nothing to prevent you from running into a NPE, if you ran&lt;br/&gt;
kafka.tool.sh and xyz was an option that required an argument, but was not provided a default value in the code.&lt;/p&gt;</comment>
                            <comment id="13592881" author="swapnilghike" created="Tue, 5 Mar 2013 01:03:37 +0000"  >&lt;p&gt;Attached a patch.&lt;/p&gt;</comment>
                            <comment id="13594108" author="swapnilghike" created="Tue, 5 Mar 2013 23:51:13 +0000"  >&lt;p&gt;Jun raised a good question: What do we do for options like &quot;print&quot; or &quot;verify&quot; or &quot;enable&quot; etc? These options typically don&apos;t expect a boolean argument, it should be enough to specify these options on the command line to sort of enable them in the program.&lt;/p&gt;

&lt;p&gt;The answer is to not use any of withRequiredArg() or withOptionalArg(). We can simply write something like the following:&lt;br/&gt;
val printOpt = parser.accepts(&quot;print-data-log&quot;, &quot;if set, printing the messages content when dumping data logs&quot;)&lt;/p&gt;

&lt;p&gt;Later we should check in the program like the following:&lt;br/&gt;
if(options.has(printOpt) print() else doNothing()&lt;/p&gt;</comment>
                            <comment id="13594919" author="junrao" created="Wed, 6 Mar 2013 18:13:17 +0000"  >&lt;p&gt;Thanks for the patch. Committed to 0.8.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12572205" name="kafka-786-v2.patch" size="5225" author="swapnilghike" created="Tue, 5 Mar 2013 23:51:13 +0000"/>
                            <attachment id="12572008" name="kafka-786.patch" size="4930" author="swapnilghike" created="Tue, 5 Mar 2013 01:03:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315753</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ihi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316096</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>