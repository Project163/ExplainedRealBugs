<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:44:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-2534] SSLTransportLayer does not handle buffer overflow correctly</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-2534</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;There are a couple of issues with the handling of buffer overflow in &lt;tt&gt;SSLTransportLayer&lt;/tt&gt;.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;netWriteBuffer&lt;/tt&gt; is flipped immediately after &lt;tt&gt;wrap()&lt;/tt&gt;, leaving the data ready for writing onto the socket channel. If &lt;tt&gt;netWriteBuffer&lt;/tt&gt; is expanded because &lt;tt&gt;wrap()&lt;/tt&gt; returns BUFFER_OVERFLOW, the expanded buffer needs to be un-flipped before expansion and flipped afterwards to leave the resulting buffer in the same state. The current implementation does not do this and hence the expanded buffer is not as expected.&lt;/li&gt;
	&lt;li&gt;If &lt;tt&gt;handshakeUnwrap()&lt;/tt&gt; returns a BUFFER_OVERFLOW because application buffer needs to be expanded, the current implementation expands the buffer and returns from the &lt;tt&gt;handshake()&lt;/tt&gt; call. Since handshake data was already read from the network, this can result in the handshake never completing if no more data is received on the channel. &lt;tt&gt;handshakeUnwrap()&lt;/tt&gt; should be invoked after application buffer expansion to process data that has already arrived.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I will submit a PR with fixes for these along with unit tests which demonstrate these issues. I am not sure it is easy to trigger buffer overflow/underflow in a system test. Since these code paths are currently untested, unit tests which mock these scenarios may be useful.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12863334">KAFKA-2534</key>
            <summary>SSLTransportLayer does not handle buffer overflow correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsivaram">Rajini Sivaram</assignee>
                                    <reporter username="rsivaram">Rajini Sivaram</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Sep 2015 09:25:31 +0000</created>
                <updated>Thu, 14 Mar 2024 12:04:40 +0000</updated>
                            <resolved>Wed, 7 Oct 2015 16:28:44 +0000</resolved>
                                    <version>0.9.0.0</version>
                                    <fixVersion>0.9.0.0</fixVersion>
                                    <component>network</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14740540" author="githubbot" created="Fri, 11 Sep 2015 10:29:57 +0000"  >&lt;p&gt;GitHub user rajinisivaram opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/205&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/205&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2534&quot; title=&quot;SSLTransportLayer does not handle buffer overflow correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2534&quot;&gt;&lt;del&gt;KAFKA-2534&lt;/del&gt;&lt;/a&gt;: Fixes and unit tests for SSLTransportLayer buffer overflow&lt;/p&gt;

&lt;p&gt;    Unit tests which mock buffer overflow and underflow in the SSL transport layer and fixes for the couple of issues in buffer overflow handling described in the JIRA.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rajinisivaram/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rajinisivaram/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2534&quot; title=&quot;SSLTransportLayer does not handle buffer overflow correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2534&quot;&gt;&lt;del&gt;KAFKA-2534&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/205.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/205.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #205&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 260b0bba5b906e96f3acc637ae1ece1c3cc5ec83&lt;br/&gt;
Author: Rajini Sivaram &amp;lt;rajinisivaram@googlemail.com&amp;gt;&lt;br/&gt;
Date:   2015-09-11T10:03:29Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2534&quot; title=&quot;SSLTransportLayer does not handle buffer overflow correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2534&quot;&gt;&lt;del&gt;KAFKA-2534&lt;/del&gt;&lt;/a&gt;: Fixes and unit tests for SSLTransportLayer buffer overflow&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14942713" author="rsivaram" created="Sun, 4 Oct 2015 16:54:53 +0000"  >&lt;p&gt;The latest commit has removed duplicate code in SSLSelectorTest and uses inheritance from SelectorTest to run all selector tests with both plaintext and SSL. Added a new test class SSLTransportLayerTest to test SSL-specific code. It contains tests for buffer overflow/underflow and various authentication options. Will create a new JIRA to add more tests for renegotiation.&lt;/p&gt;</comment>
                            <comment id="14947150" author="junrao" created="Wed, 7 Oct 2015 16:28:44 +0000"  >&lt;p&gt;Issue resolved by pull request 205&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/205&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/205&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14947151" author="githubbot" created="Wed, 7 Oct 2015 16:28:45 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/205&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/205&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k1lj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>sriharsha</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>