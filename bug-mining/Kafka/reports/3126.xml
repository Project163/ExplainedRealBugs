<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:29:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-13406] Cooperative sticky assignor got stuck due to assignment validation failed</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-13406</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;We&apos;ll do validateCooperativeAssignment for cooperative assignor, where we validate if there are previously owned partitions directly transfer to other consumers without &quot;revoke&quot; step. However, the &quot;ownedPartition&quot; in subscription might contain out-of-dated data, which might cause the validation always failure.&lt;/p&gt;

&lt;p&gt;We should consider the short-term fix it by disabling validateCooperationAssignment for built-in cooperativeStickyAssignor because we&apos;ve already consider the generation in the assignor, and discard the old generation ownedPartition if any.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13408621">KAFKA-13406</key>
            <summary>Cooperative sticky assignor got stuck due to assignment validation failed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="showuon">Luke Chen</assignee>
                                    <reporter username="showuon">Luke Chen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Oct 2021 07:32:42 +0000</created>
                <updated>Wed, 23 Feb 2022 01:41:35 +0000</updated>
                            <resolved>Tue, 16 Nov 2021 03:09:25 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>2.8.2</fixVersion>
                    <fixVersion>3.0.1</fixVersion>
                    <fixVersion>3.1.0</fixVersion>
                                    <component>clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="17434757" author="showuon" created="Wed, 27 Oct 2021 09:28:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Andy_Dufresne&quot; class=&quot;user-hover&quot; rel=&quot;Andy_Dufresne&quot;&gt;Andy_Dufresne&lt;/a&gt;, I&apos;ve opened a WIP PR with the fix here: &lt;a href=&quot;https://github.com/apache/kafka/pull/11439.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/11439&lt;/a&gt; Could you please help check if this change fixes your issue? Thank you.&lt;/p&gt;</comment>
                            <comment id="17434887" author="andy_dufresne" created="Wed, 27 Oct 2021 14:38:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt; since the possible fix is in the &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
internals/ConsumerCoordinator
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and not in publicly accessible  API of CooperativeStickyAssignor and AbstractStickyAssignor which we can easily pull and customly change and then use &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
partition.assignment.strategy
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;mapping to changed class , it&apos;s becoming a bit complicated to test on the same environment I did before.&lt;br/&gt;
Is there any chance to test changes in CooperativeStickyAssignor or AbstractStickyAssignor and then port them in internals ?&lt;br/&gt;
Or the only way for me is to test on internal classes, so I manually have to  build snapshot from wip branch and then pointing the rest of the app to use this build.&lt;/p&gt;</comment>
                            <comment id="17434992" author="ableegoldman" created="Wed, 27 Oct 2021 17:54:59 +0000"  >&lt;p&gt;Setting the Fix Version as 3.1 &#8211; we should try to get a fix in to 3.1 at least for the CooperativeStickyAssignor. Maybe we can have a separate ticket for fixing this more generally for custom assignors as well (which will almost definitely require a KIP, I think)&lt;/p&gt;</comment>
                            <comment id="17435239" author="showuon" created="Thu, 28 Oct 2021 08:16:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Andy_Dufresne&quot; class=&quot;user-hover&quot; rel=&quot;Andy_Dufresne&quot;&gt;Andy_Dufresne&lt;/a&gt;, I understand, but I&apos;m afraid we have to fix it in the `internals/ConsumerCoordinator` file, because this issue is happened after the assignor completed its job. And we had already fixed the issue in assignor in  &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-12984&quot; title=&quot;Cooperative sticky assignor can get stuck with invalid SubscriptionState input metadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-12984&quot;&gt;&lt;del&gt;KAFKA-12984&lt;/del&gt;&lt;/a&gt; , and the `internals/ConsumerCoordinator` is what we missed before. We have to make sure when this issue (out-of-date `ownedPartition`) happened, there&apos;s no other places missing and cause the rebalance stuck issue happen again.&lt;/p&gt;

&lt;p&gt;I created another PR based on V2.8: &lt;a href=&quot;https://github.com/apache/kafka/pull/11444&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/11444&lt;/a&gt; . I think it should be easier for you if you are running on v2.8.1. Or, please let me know how I can help you with it.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ableegoldman&quot; class=&quot;user-hover&quot; rel=&quot;ableegoldman&quot;&gt;ableegoldman&lt;/a&gt;, I agree with you for fixing it in V3.1.0, and have another ticket for long-term fix.&lt;/p&gt;</comment>
                            <comment id="17435243" author="andy_dufresne" created="Thu, 28 Oct 2021 08:26:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt; Thank you, I&apos;ll try to re-test it in a couple of days on the same test environment and stand and get back &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17435249" author="showuon" created="Thu, 28 Oct 2021 08:32:50 +0000"  >&lt;p&gt;Awesome! Thank you!&lt;/p&gt;</comment>
                            <comment id="17443697" author="dajac" created="Mon, 15 Nov 2021 10:05:26 +0000"  >&lt;p&gt;Moving it to the next release as we are part the code freeze for 3.1.0.&lt;/p&gt;</comment>
                            <comment id="17444229" author="showuon" created="Tue, 16 Nov 2021 02:29:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ableegoldman&quot; class=&quot;user-hover&quot; rel=&quot;ableegoldman&quot;&gt;ableegoldman&lt;/a&gt; , I think this issue should fix into v3.1.0. Otherwise, user might get stuck during rebalance again. What do you think?&lt;/p&gt;</comment>
                            <comment id="17444241" author="ableegoldman" created="Tue, 16 Nov 2021 02:59:07 +0000"  >&lt;p&gt;Yes, we should definitely get this fix into 3.1. I&apos;ll also try to port it back to earlier branches if the cherrypick is smooth&lt;/p&gt;</comment>
                            <comment id="17444245" author="showuon" created="Tue, 16 Nov 2021 03:06:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ableegoldman&quot; class=&quot;user-hover&quot; rel=&quot;ableegoldman&quot;&gt;ableegoldman&lt;/a&gt; , thank you very much! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17446540" author="andy_dufresne" created="Fri, 19 Nov 2021 15:37:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt; Seems the issue is fixed. Thank you for backporting it to 2.8 as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17465951" author="JIRAUSER282671" created="Tue, 28 Dec 2021 06:06:03 +0000"  >&lt;p&gt;Hi, I faced same issue described above with kafka-client 3.0.0.&lt;/p&gt;

&lt;p&gt;So I think it&apos;d be nice if the fix-version (will be kafka-client:3.0.1) was provided in maven repository.&#160;&lt;/p&gt;

&lt;p&gt;Can I know the expected release date for kafka-client:3.0.1? Or It would be good if a snapshot-version of 3.0.1 (to resolve this issue) was provided.&#160;&lt;/p&gt;

&lt;p&gt;Thank you!&#160;&lt;/p&gt;</comment>
                            <comment id="17465967" author="showuon" created="Tue, 28 Dec 2021 06:35:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Juhyeon+Kim&quot; class=&quot;user-hover&quot; rel=&quot;Juhyeon Kim&quot;&gt;Juhyeon Kim&lt;/a&gt; , the release date for v3.0.1 is not planned, yet. But v3.1.0 is going to be released, which includes the fix. FYI.&lt;/p&gt;</comment>
                            <comment id="17466002" author="JIRAUSER282671" created="Tue, 28 Dec 2021 08:15:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt;, thank you very much for your quick answer!&lt;/p&gt;

&lt;p&gt;Then.. could you please clarify a bit when will be the release v3.1.0?&lt;/p&gt;</comment>
                            <comment id="17466104" author="showuon" created="Tue, 28 Dec 2021 12:34:38 +0000"  >&lt;p&gt;v3.1.0 was planned to be released in Dec. 2021 based on the plan: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/Future+release+plan&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/Future+release+plan&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We&apos;re tackling some blockers, and should be released in Jan. 2022 ( hope so)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="17466284" author="JIRAUSER282671" created="Wed, 29 Dec 2021 02:07:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt;, Thank you for sharing it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17481754" author="kami" created="Tue, 25 Jan 2022 11:34:00 +0000"  >&lt;p&gt;First thank you for fixing this bug.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I see that v3.1.0 which includes this bug fix has just been released.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The fix version field seems to indicate this bug fix will aksi be included in the v2.8.x release series. Do we happen to have an eta for v2.8.2 (we are also affected by this bug, but we still run 2.8.x series so we can&apos;t use v3.1.0 just yet).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="17496213" author="asittler" created="Tue, 22 Feb 2022 16:42:16 +0000"  >&lt;p&gt;I second Tomaz.&#160;&lt;/p&gt;

&lt;p&gt;Is there an ETA for 2.8.2 ?&lt;/p&gt;</comment>
                            <comment id="17496425" author="showuon" created="Wed, 23 Feb 2022 01:41:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asittler&quot; class=&quot;user-hover&quot; rel=&quot;asittler&quot;&gt;asittler&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kami&quot; class=&quot;user-hover&quot; rel=&quot;kami&quot;&gt;kami&lt;/a&gt; , so far, I can only make sure the v3.0.1 will be released in late Feb. or March 2022. (ref: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/Release+Plan+3.0.1).&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/Release+Plan+3.0.1).&lt;/a&gt; However, there is no release plan for 2.8.2, yet. That&apos;s all I know. &lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13409059">KAFKA-13419</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13385288">KAFKA-12984</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0w75k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>