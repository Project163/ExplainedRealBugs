<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:37:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-16162] New created topics are unavailable after upgrading to 3.7</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-16162</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In 3.7, we introduced the KIP-858 JBOD feature, and the brokerRegistration request will include the `LogDirs` fields with UUID for each log dir in each broker. This info will be stored in the controller and used to identify if the log dir is known and online while handling AssignReplicasToDirsRequest &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/metadata/src/main/java/org/apache/kafka/controller/ReplicationControlManager.java#L2093&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;While upgrading from old version, the kafka cluster will run in 3.7 binary with old metadata version, and then upgrade to newer version using kafka-features.sh. That means, while brokers startup and send the brokerRegistration request, it&apos;ll be using older metadata version without `LogDirs` fields included. And it makes the controller has no log dir info for all brokers. Later, after upgraded, if new topic is created, the flow will go like this:&lt;/p&gt;

&lt;p&gt;1. Controller assign replicas and adds in metadata log&lt;br/&gt;
2. brokers fetch the metadata and apply it&lt;br/&gt;
3. ReplicaManager#maybeUpdateTopicAssignment will update topic assignment&lt;br/&gt;
4. After sending ASSIGN_REPLICAS_TO_DIRS to controller with replica assignment, controller will think the log dir in current replica is offline, so triggering offline handler, and reassign leader to another replica, and offline, until no more replicas to assign, so assigning leader to -1 (i.e. no leader) &lt;/p&gt;

&lt;p&gt;So, the results will be that new created topics are unavailable (with no leader) because the controller thinks all log dir are offline.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
lukchen@lukchen-mac kafka % bin/kafka-topics.sh --describe --topic quickstart-events3 --bootstrap-server localhost:9092                              

Topic: quickstart-events3	TopicId: s8s6tEQyRvmjKI6ctNTgPg	PartitionCount: 3	ReplicationFactor: 3	Configs: segment.bytes=1073741824
	Topic: quickstart-events3	Partition: 0	Leader: none	Replicas: 7,2,6	Isr: 6
	Topic: quickstart-events3	Partition: 1	Leader: none	Replicas: 2,6,7	Isr: 6
	Topic: quickstart-events3	Partition: 2	Leader: none	Replicas: 6,7,2	Isr: 6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The log snippet in the controller :&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# handling 1st assignReplicaToDirs request

[2024-01-18 19:34:47,370] DEBUG [QuorumController id=1] Broker 6 assigned partition quickstart-events3:0 to OFFLINE dir 7K5JBERyyqFFxIXSXYluJA (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,370] DEBUG [QuorumController id=1] Broker 6 assigned partition quickstart-events3:2 to OFFLINE dir 7K5JBERyyqFFxIXSXYluJA (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,371] DEBUG [QuorumController id=1] Broker 6 assigned partition quickstart-events3:1 to OFFLINE dir 7K5JBERyyqFFxIXSXYluJA (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,372] DEBUG [QuorumController id=1] offline-dir-assignment: changing partition(s): quickstart-events3-0, quickstart-events3-2, quickstart-events3-1 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,372] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-0 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: directories: [AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA] -&amp;gt; [7K5JBERyyqFFxIXSXYluJA, AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA], partitionEpoch: 0 -&amp;gt; 1 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,372] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=0, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=[7K5JBERyyqFFxIXSXYluJA, AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA], eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,372] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-2 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: directories: [AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA] -&amp;gt; [AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA, AAAAAAAAAAAAAAAAAAAAAA], partitionEpoch: 0 -&amp;gt; 1 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,372] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=2, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=[AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA, AAAAAAAAAAAAAAAAAAAAAA], eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,372] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-1 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: directories: [AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA] -&amp;gt; [AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA], partitionEpoch: 0 -&amp;gt; 1 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,372] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=1, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=[AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA], eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,372] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-0 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: isr: [6, 7, 2] -&amp;gt; [7, 2], leader: 6 -&amp;gt; 7, leaderEpoch: 0 -&amp;gt; 1, partitionEpoch: 1 -&amp;gt; 2 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,373] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=0, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=[7, 2], leader=7, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,373] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-2 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: isr: [2, 6, 7] -&amp;gt; [2, 7], partitionEpoch: 1 -&amp;gt; 2 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,373] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=2, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=[2, 7], leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,373] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-1 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: isr: [7, 2, 6] -&amp;gt; [7, 2], partitionEpoch: 1 -&amp;gt; 2 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,373] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=1, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=[7, 2], leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)


# handling 2nd assignReplicaToDirs request

[2024-01-18 19:34:47,373] DEBUG [QuorumController id=1] Broker 7 assigned partition quickstart-events3:0 to OFFLINE dir 7V9WGfqd-WUS-k61NdrzcQ (org.apache.kafka.controller.ReplicationControlManager)
!!! dir:AAAAAAAAAAAAAAAAAAAAAA;;;[]
[2024-01-18 19:34:47,374] DEBUG [QuorumController id=1] Broker 7 assigned partition quickstart-events3:2 to OFFLINE dir 7V9WGfqd-WUS-k61NdrzcQ (org.apache.kafka.controller.ReplicationControlManager)
!!! dir:AAAAAAAAAAAAAAAAAAAAAA;;;[]
[2024-01-18 19:34:47,374] DEBUG [QuorumController id=1] Broker 7 assigned partition quickstart-events3:1 to OFFLINE dir 7V9WGfqd-WUS-k61NdrzcQ (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] offline-dir-assignment: changing partition(s): quickstart-events3-0, quickstart-events3-2, quickstart-events3-1 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-0 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: directories: [7K5JBERyyqFFxIXSXYluJA, AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA] -&amp;gt; [7K5JBERyyqFFxIXSXYluJA, 7V9WGfqd-WUS-k61NdrzcQ, AAAAAAAAAAAAAAAAAAAAAA], partitionEpoch: 2 -&amp;gt; 3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=0, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=[7K5JBERyyqFFxIXSXYluJA, 7V9WGfqd-WUS-k61NdrzcQ, AAAAAAAAAAAAAAAAAAAAAA], eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-2 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: directories: [AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA, AAAAAAAAAAAAAAAAAAAAAA] -&amp;gt; [AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA, 7V9WGfqd-WUS-k61NdrzcQ], partitionEpoch: 2 -&amp;gt; 3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=2, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=[AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA, 7V9WGfqd-WUS-k61NdrzcQ], eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-1 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: directories: [AAAAAAAAAAAAAAAAAAAAAA, AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA] -&amp;gt; [7V9WGfqd-WUS-k61NdrzcQ, AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA], partitionEpoch: 2 -&amp;gt; 3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=1, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=[7V9WGfqd-WUS-k61NdrzcQ, AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA], eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-0 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: isr: [7, 2] -&amp;gt; [2], leader: 7 -&amp;gt; 2, leaderEpoch: 1 -&amp;gt; 2, partitionEpoch: 3 -&amp;gt; 4 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=0, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=[2], leader=2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-2 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: isr: [2, 7] -&amp;gt; [2], partitionEpoch: 3 -&amp;gt; 4 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=2, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=[2], leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-1 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: isr: [7, 2] -&amp;gt; [2], leader: 7 -&amp;gt; 2, leaderEpoch: 0 -&amp;gt; 1, partitionEpoch: 3 -&amp;gt; 4 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,375] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=1, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=[2], leader=2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)


# handling 3rd assignReplicaToDirs request

[2024-01-18 19:34:47,378] DEBUG [QuorumController id=1] Broker 2 assigned partition quickstart-events3:0 to OFFLINE dir 97WGe1Sf0cWqegCPEUExiw (org.apache.kafka.controller.ReplicationControlManager)
!!! dir:AAAAAAAAAAAAAAAAAAAAAA;;;[]
[2024-01-18 19:34:47,378] DEBUG [QuorumController id=1] Broker 2 assigned partition quickstart-events3:2 to OFFLINE dir 97WGe1Sf0cWqegCPEUExiw (org.apache.kafka.controller.ReplicationControlManager)
!!! dir:AAAAAAAAAAAAAAAAAAAAAA;;;[]
[2024-01-18 19:34:47,378] DEBUG [QuorumController id=1] Broker 2 assigned partition quickstart-events3:1 to OFFLINE dir 97WGe1Sf0cWqegCPEUExiw (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] offline-dir-assignment: changing partition(s): quickstart-events3-0, quickstart-events3-2, quickstart-events3-1 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-0 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: directories: [7K5JBERyyqFFxIXSXYluJA, 7V9WGfqd-WUS-k61NdrzcQ, AAAAAAAAAAAAAAAAAAAAAA] -&amp;gt; [7K5JBERyyqFFxIXSXYluJA, 7V9WGfqd-WUS-k61NdrzcQ, 97WGe1Sf0cWqegCPEUExiw], partitionEpoch: 4 -&amp;gt; 5 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=0, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=[7K5JBERyyqFFxIXSXYluJA, 7V9WGfqd-WUS-k61NdrzcQ, 97WGe1Sf0cWqegCPEUExiw], eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-2 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: directories: [AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA, 7V9WGfqd-WUS-k61NdrzcQ] -&amp;gt; [97WGe1Sf0cWqegCPEUExiw, 7K5JBERyyqFFxIXSXYluJA, 7V9WGfqd-WUS-k61NdrzcQ], partitionEpoch: 4 -&amp;gt; 5 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=2, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=[97WGe1Sf0cWqegCPEUExiw, 7K5JBERyyqFFxIXSXYluJA, 7V9WGfqd-WUS-k61NdrzcQ], eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-1 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: directories: [7V9WGfqd-WUS-k61NdrzcQ, AAAAAAAAAAAAAAAAAAAAAA, 7K5JBERyyqFFxIXSXYluJA] -&amp;gt; [7V9WGfqd-WUS-k61NdrzcQ, 97WGe1Sf0cWqegCPEUExiw, 7K5JBERyyqFFxIXSXYluJA], partitionEpoch: 4 -&amp;gt; 5 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=1, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-2, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=[7V9WGfqd-WUS-k61NdrzcQ, 97WGe1Sf0cWqegCPEUExiw, 7K5JBERyyqFFxIXSXYluJA], eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-0 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: leader: 2 -&amp;gt; -1, leaderEpoch: 2 -&amp;gt; 3, partitionEpoch: 5 -&amp;gt; 6 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=0, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-1, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-2 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: leader: 2 -&amp;gt; -1, leaderEpoch: 0 -&amp;gt; 1, partitionEpoch: 5 -&amp;gt; 6 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=2, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-1, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] partition change &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; quickstart-events3-1 with topic ID 6ZIeidfiSTWRiOAmGEwn_g: leader: 2 -&amp;gt; -1, leaderEpoch: 1 -&amp;gt; 2, partitionEpoch: 5 -&amp;gt; 6 (org.apache.kafka.controller.ReplicationControlManager)
[2024-01-18 19:34:47,379] DEBUG [QuorumController id=1] Replayed partition change PartitionChangeRecord(partitionId=1, topicId=6ZIeidfiSTWRiOAmGEwn_g, isr=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leader=-1, replicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, removingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, addingReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, leaderRecoveryState=-1, directories=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, eligibleLeaderReplicas=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastKnownELR=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topic quickstart-events3 (org.apache.kafka.controller.ReplicationControlManager)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The issue will be fixed after restarting the broker because after restarting, the brokerRegistration request will be sent using the latest metadata version including `logDirs` fields.&lt;/p&gt;


&lt;p&gt;Steps to reproduce:&lt;br/&gt;
1. Deploy a Kafka 3.6 cluster&lt;br/&gt;
2. Upgrade to 3.7&lt;br/&gt;
3. Creating a new topic&lt;br/&gt;
4. Describe the topic&lt;/p&gt;</description>
                <environment></environment>
        <key id="13565249">KAFKA-16162</key>
            <summary>New created topics are unavailable after upgrading to 3.7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnarula">Gaurav Narula</assignee>
                                    <reporter username="showuon">Luke Chen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jan 2024 12:14:22 +0000</created>
                <updated>Fri, 9 Feb 2024 12:26:15 +0000</updated>
                            <resolved>Fri, 9 Feb 2024 12:25:14 +0000</resolved>
                                    <version>3.7.0</version>
                                    <fixVersion>3.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17808378" author="JIRAUSER298332" created="Thu, 18 Jan 2024 22:09:08 +0000"  >&lt;p&gt;I have a PR &lt;a href=&quot;https://github.com/apache/kafka/pull/15232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;GitHub Pull Request #15232&lt;/a&gt; that should fix the issue. I have not created tests for it yet though and it really should also add a condition where if a broker sends a heartbeat indicating it has no online directories, it should be fenced.&lt;/p&gt;</comment>
                            <comment id="17808578" author="showuon" created="Fri, 19 Jan 2024 09:46:57 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pprovenzano&quot; class=&quot;user-hover&quot; rel=&quot;pprovenzano&quot;&gt;pprovenzano&lt;/a&gt;, I agree we also need to have a way to handle all log dirs are offline in a broker.&lt;br/&gt;
However, in this issue, I think there&apos;s also another potential bug that why should we update topic assignment and send ASSIGN_REPLICAS_TO_DIRS in `ReplicaManager#maybeUpdateTopicAssignment`?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1. Controller assign replicas and adds in metadata log
2. brokers fetch the metadata and apply it
3. ReplicaManager#maybeUpdateTopicAssignment will update topic assignment
4. After sending ASSIGN_REPLICAS_TO_DIRS to controller with replica assignment, controller will think the log dir in current replica is offline, so triggering offline handler, and reassign leader to another replica, and offline, until no more replicas to assign, so assigning leader to -1 (i.e. no leader) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem still lies in the brokerRegistraion having no log dir. And when the controller adds the `PartitionRegistration` record, it used the info in old `brokerRegistraion` for the broker, so it&apos;ll get nothing for the log dir. Later in the broker side, when in `ReplicaManager#maybeUpdateTopicAssignment`, we&apos;ll find the assigned log dir UUID (which is all 0 (MIGRATING)) is different from the one in logManager (the real log dir UUID). I&apos;m not sure if we can skip the topic assignment update if the UUID is MIGRATING and we have a real UUID? I can create another ticket if you think that&apos;s a separate issue. &lt;/p&gt;</comment>
                            <comment id="17808658" author="JIRAUSER298332" created="Fri, 19 Jan 2024 13:39:11 +0000"  >&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think my patch will also address this other case. In step 4 the check to see if the log directory is offline will go through the same code path. It will see that there are no directories assigned to the broker and assume that it doesn&apos;t have any information and thus assume that the directory is online. I did run a manual test and everything worked for me. If you can try the code and see if you can produce this second case that would be really helpful. Just add it to this bug report. Your bug report was awesome and with the logs I was easily able to find the issue.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As for all log dirs are offline in the broker, the current behavior is that the broker is supposed to fail. I just want to add extra protection on the controller side.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17811017" author="gnarula" created="Thu, 25 Jan 2024 19:30:32 +0000"  >&lt;p&gt;I think the proposed fix would never result in the controller&apos;s view of the log directories in the broker being updated until the broker restarts and re-registers.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This makes me wonder if a cleaner alternative would be to re-send the BrokerRegistration request with the same incarnation id when handling the metadata version update?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omnia_h_ibrahim&quot; class=&quot;user-hover&quot; rel=&quot;omnia_h_ibrahim&quot;&gt;omnia_h_ibrahim&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cmccabe&quot; class=&quot;user-hover&quot; rel=&quot;cmccabe&quot;&gt;cmccabe&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17811230" author="showuon" created="Fri, 26 Jan 2024 11:38:50 +0000"  >&lt;p&gt;You are right &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gnarula&quot; class=&quot;user-hover&quot; rel=&quot;gnarula&quot;&gt;gnarula&lt;/a&gt;. I agree the best fix should be re-sending the BrokerRegistration request with the same incarnation id when handling the metadata version update. I can see the current fix works well right now, but we are unsure if the logDirs in the controller view will be used for any other purpose in the future, which will cause another potential issue then. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pprovenzano&quot; class=&quot;user-hover&quot; rel=&quot;pprovenzano&quot;&gt;pprovenzano&lt;/a&gt;, WDYT?&lt;/p&gt;</comment>
                            <comment id="17811236" author="gnarula" created="Fri, 26 Jan 2024 11:57:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt; The controller&apos;s view of the logDirs is used to make leaderAndIsr update decisions. WIth the current fix, if a log directory fails, the leadership of the partitions hosted in the failed log directory will not be updated. I&apos;m able to confirm this behaviour with a manual test.&lt;/p&gt;

&lt;p&gt;I&apos;ll raise a PR shortly which incorporates Proven&apos;s fix and resends the BrokerRegistration request as well.&lt;/p&gt;</comment>
                            <comment id="17811308" author="gnarula" created="Fri, 26 Jan 2024 14:58:00 +0000"  >&lt;p&gt;Raised &lt;a href=&quot;https://github.com/apache/kafka/pull/15270&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/15270&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17811720" author="JIRAUSER298332" created="Mon, 29 Jan 2024 03:36:53 +0000"  >&lt;p&gt;Hey folks!&lt;/p&gt;

&lt;p&gt;Sorry, I was unavailable all last week.&#160;&lt;/p&gt;

&lt;p&gt;I am comfortable with resending the BrokerRegistration. I think we should probably always do it after any MV upgrade as there could be other future issues that are similar. The BrokerRegistration is a nice way of updating once only state of a Broker.&lt;/p&gt;

&lt;p&gt;In a separate issue I think we need to separate Heartbeat updates from BrokerRegistration and only use BrokerRegistration to indicate the set of possible directories not the set of active directories. A separate record should be used to indicate the offline directories of a broker. This isn&apos;t necessary now and I&apos;ll create a Jira for it for future enhancements.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17816037" author="omnia_h_ibrahim" created="Fri, 9 Feb 2024 12:26:15 +0000"  >&lt;p&gt;Marking this as resolved as the pr was committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1mugo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>