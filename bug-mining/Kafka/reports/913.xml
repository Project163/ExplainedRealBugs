<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:52:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-2695] Handle null string/bytes protocol primitives</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-2695</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The kafka protocol supports null bytes and string primitives by passing -1 as the size, but the current deserializers implemented in o.a.k.common.protocol.types.Type do not handle them.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12908107">KAFKA-2695</key>
            <summary>Handle null string/bytes protocol primitives</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hachikuji">Jason Gustafson</assignee>
                                    <reporter username="hachikuji">Jason Gustafson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Oct 2015 03:46:47 +0000</created>
                <updated>Mon, 18 Jan 2016 17:54:29 +0000</updated>
                            <resolved>Mon, 18 Jan 2016 17:54:29 +0000</resolved>
                                                    <fixVersion>0.9.0.1</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15073886" author="edenhill" created="Tue, 29 Dec 2015 13:16:52 +0000"  >&lt;p&gt;This blocks kafka-consumer-groups.sh to describe librdkafka-based consumer groups, see &lt;a href=&quot;https://github.com/edenhill/librdkafka/issues/479&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/edenhill/librdkafka/issues/479&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15098250" author="junrao" created="Thu, 14 Jan 2016 15:28:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt;, when using a compacted topic, we use a null value in the message to indicate a delete. Are you saying the new consumer won&apos;t be able to parse that?&lt;/p&gt;</comment>
                            <comment id="15098604" author="hachikuji" created="Thu, 14 Jan 2016 18:31:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; That actually works currently because records are not parsed using o.a.k.common.protocol.types.Type. But most other cases will fail because the parsing code looks like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; length = buffer.getShort();
&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] bytes = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[length];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s not difficult to fix, but we&apos;ll probably need to make sure that current usage can handle null values without breaking in other ways.&lt;/p&gt;</comment>
                            <comment id="15099141" author="hachikuji" created="Thu, 14 Jan 2016 23:42:05 +0000"  >&lt;p&gt;After looking at this, I feel uneasy about the risk of allowing nulls to suddenly pop up all over the place. Perhaps instead of modifying Type.STRING and Type.BYTES (and verifying that all usages are safe for null values), we can create NULLABLE_STRING and NULLABLE_BYTES Type implementations which must be used explicitly in schema definitions to allow null fields. Then we use these for the user data field in the consumer protocol to fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edenhill&quot; class=&quot;user-hover&quot; rel=&quot;edenhill&quot;&gt;edenhill&lt;/a&gt;&apos;s issue.&lt;/p&gt;</comment>
                            <comment id="15099227" author="githubbot" created="Fri, 15 Jan 2016 01:01:24 +0000"  >&lt;p&gt;GitHub user hachikuji opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/780&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/780&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2695&quot; title=&quot;Handle null string/bytes protocol primitives&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2695&quot;&gt;&lt;del&gt;KAFKA-2695&lt;/del&gt;&lt;/a&gt;: limited support for nullable byte arrays&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hachikuji/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hachikuji/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2695&quot; title=&quot;Handle null string/bytes protocol primitives&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2695&quot;&gt;&lt;del&gt;KAFKA-2695&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/780.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/780.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #780&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 770f3d037b5a5190d6ccc187bcbf623ca9240618&lt;br/&gt;
Author: Jason Gustafson &amp;lt;jason@confluent.io&amp;gt;&lt;br/&gt;
Date:   2016-01-15T00:58:34Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2695&quot; title=&quot;Handle null string/bytes protocol primitives&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2695&quot;&gt;&lt;del&gt;KAFKA-2695&lt;/del&gt;&lt;/a&gt;: limited support for nullable byte arrays&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15105585" author="githubbot" created="Mon, 18 Jan 2016 17:54:23 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/780&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/780&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15105586" author="guozhang" created="Mon, 18 Jan 2016 17:54:29 +0000"  >&lt;p&gt;Issue resolved by pull request 780&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/780&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/780&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nk0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>