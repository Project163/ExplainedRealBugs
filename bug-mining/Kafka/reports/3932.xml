<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:40:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-17584] Fix incorrect synonym handling for dynamic log configurations</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-17584</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Updating certain dynamic configurations (for example `message.max.bytes`) causes retention based on time to reset to the default value (source code) for log.retention.ms. This poses a durability issue if users have set their retention by using log.retention.hours or log.retention.minutes. In other words, if a user has set log.retention.hours=-1 (infinite retention) and they dynamically change `message.max.bytes` their retention will immediately change back to the default of 604800000 ms (7 days) and data before this will be scheduled for deletion immediately.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;

&lt;p&gt; 1. Add log.retention.minutes=1,log.retention.check.interval.ms=1000 to server.properties&lt;br/&gt;
 2. Start a single ZK or KRaft instance + a single Kafka instance&lt;br/&gt;
 3. Create a topic using&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bin/kafka-topics.sh --bootstrap-server localhost:9092 --create --topic A --replication-factor 1 --partitions 1 --config min.insync.replicas=1 --config segment.bytes=512&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; 4. Create a few segments with the console producer&lt;br/&gt;
 5. Observe that they are deleted after 1 minute&lt;br/&gt;
 6. Use the following command&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bin/kafka-configs.sh --bootstrap-server loclahost:9092 --entity-type brokers --entity-&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; --alter --add-config message.max.bytes=1048609&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(the value of `message.max.bytes` is irrelevant)&lt;br/&gt;
 7. Create a few more segments with the console producer&lt;br/&gt;
 8. Observe that segments are no longer deleted after 1 minute&lt;/p&gt;</description>
                <environment></environment>
        <key id="13592707">KAFKA-17584</key>
            <summary>Fix incorrect synonym handling for dynamic log configurations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="christo_lolov">Christo Lolov</assignee>
                                    <reporter username="christo_lolov">Christo Lolov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Sep 2024 10:33:23 +0000</created>
                <updated>Mon, 25 Nov 2024 19:11:43 +0000</updated>
                            <resolved>Thu, 26 Sep 2024 07:16:49 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.7.2</fixVersion>
                    <fixVersion>3.8.1</fixVersion>
                    <fixVersion>3.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17883257" author="fvaleri" created="Fri, 20 Sep 2024 13:01:30 +0000"  >&lt;p&gt;I can confirm the issue as described. I reproduced with trunk, 3.9.0-rc0, and currently supported releases.&lt;/p&gt;</comment>
                            <comment id="17892989" author="mjsax" created="Fri, 25 Oct 2024 20:48:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=christo_lolov&quot; class=&quot;user-hover&quot; rel=&quot;christo_lolov&quot;&gt;christo_lolov&lt;/a&gt; &#8211; why is &quot;affects version&quot; set to 3.9.0 while fix version includes 3.8.1? &quot;affects version&quot; should be the earliest version which has this bug.&lt;/p&gt;

&lt;p&gt;It seem we should at least update it to 3.8.0, but I am wondering if we want to cherry-pick this for 3.7.2 release that we plan to do?&lt;/p&gt;</comment>
                            <comment id="17893164" author="cmccabe" created="Sun, 27 Oct 2024 01:50:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;: Going from memory, this particular bug goes all the way back to the earliest 3.0 releases. I didn&apos;t bother cherry-picking to 3.7 since I didn&apos;t think anyone would make another 3.7 release. There&apos;s no reason why it couldn&apos;t be ported back to that release, though.&lt;/p&gt;</comment>
                            <comment id="17894524" author="christo_lolov" created="Thu, 31 Oct 2024 10:30:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; Apologies for the delay, I was taking some time off from computers &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. At the time of discovering the bug 3.9.0 was undergoing its release candidates, hence I put 3.9.0 as affected version. As Colin correctly mentioned, this is present in all Kafka versions at least since 3.0.&lt;/p&gt;</comment>
                            <comment id="17895467" author="mjsax" created="Tue, 5 Nov 2024 00:11:03 +0000"  >&lt;p&gt;Thanks. I tried to cherry-pick to 3.7 branch, but it does not cherry-pick cleanly. Should we include it in 3.7.2? If yes, would be great to get some help from people who know this code better. I am also fine with just leave it as is, and not include in 3.7.2. Thoughts?&lt;/p&gt;</comment>
                            <comment id="17895570" author="christo_lolov" created="Tue, 5 Nov 2024 11:23:24 +0000"  >&lt;p&gt;Heya &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;, I have a preference for this to make it in 3.7.2. I have made an attempt to port the changes &lt;a href=&quot;https://github.com/apache/kafka/pull/17696&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/17696&lt;/a&gt;, but I would like reviews from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cmccabe&quot; class=&quot;user-hover&quot; rel=&quot;cmccabe&quot;&gt;cmccabe&lt;/a&gt; (author of the original fix) and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=showuon&quot; class=&quot;user-hover&quot; rel=&quot;showuon&quot;&gt;showuon&lt;/a&gt; (ported the fix to 3.8)&lt;/p&gt;</comment>
                            <comment id="17895872" author="mjsax" created="Wed, 6 Nov 2024 06:31:35 +0000"  >&lt;p&gt;Thanks! I&apos;ll monitor the PR and wait until it&apos;s merged before creating the first RC for 3.7.2. Appreciate the help to backport the PR!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13545269">KAFKA-15266</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1risg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>