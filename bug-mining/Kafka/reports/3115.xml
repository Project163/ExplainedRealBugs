<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:29:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-13391] Failure on Windows due to AccessDeniedAcception when attempting to fsync the parent directory</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-13391</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;There appears to be a regression in Kafka 3.0 due to &lt;a href=&quot;https://github.com/apache/kafka/commit/66b0c5c64f2969dc62362b9f169ad1d18f64efe9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the changes&lt;/a&gt; made for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3968&quot; title=&quot;fsync() is not called on parent directory when new FileMessageSet is flushed to disk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3968&quot;&gt;&lt;del&gt;KAFKA-3968&lt;/del&gt;&lt;/a&gt; that causes a failure on Windows. After upgrading to 3.0.0, we&apos;re seeing failures in Spring Boot&apos;s Windows CI such as the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.nio.file.AccessDeniedException: C:\Windows\TEMP\spring.kafka.915ab8c1-735c-4c88-8507-8d25fd050621920219824697516859	
	at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:83)
	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)
	at sun.nio.fs.WindowsFileSystemProvider.newFileChannel(WindowsFileSystemProvider.java:115)
	at java.nio.channels.FileChannel.open(FileChannel.java:287)
	at java.nio.channels.FileChannel.open(FileChannel.java:335)
	at org.apache.kafka.common.utils.Utils.flushDir(Utils.java:953)
	at org.apache.kafka.common.utils.Utils.atomicMoveWithFallback(Utils.java:941)
	at kafka.server.BrokerMetadataCheckpoint.liftedTree1$1(BrokerMetadataCheckpoint.scala:214)
	at kafka.server.BrokerMetadataCheckpoint.write(BrokerMetadataCheckpoint.scala:204)
	at kafka.server.KafkaServer.$anonfun$checkpointBrokerMetadata$2(KafkaServer.scala:772)
	at kafka.server.KafkaServer.$anonfun$checkpointBrokerMetadata$2$adapted(KafkaServer.scala:770)
	at scala.collection.IterableOnceOps.foreach(IterableOnce.scala:563)
	at scala.collection.IterableOnceOps.foreach$(IterableOnce.scala:561)
	at scala.collection.AbstractIterable.foreach(Iterable.scala:919)
	at scala.collection.IterableOps$WithFilter.foreach(Iterable.scala:889)
	at kafka.server.KafkaServer.checkpointBrokerMetadata(KafkaServer.scala:770)
	at kafka.server.KafkaServer.startup(KafkaServer.scala:322)
	at kafka.utils.TestUtils$.createServer(TestUtils.scala:175)
	at kafka.utils.TestUtils$.createServer(TestUtils.scala:170)
	at kafka.utils.TestUtils.createServer(TestUtils.scala)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While I&apos;m &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-12190?focusedCommentId=17264398&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17264398&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;aware that Windows isn&apos;t officially supported&lt;/a&gt;, I think this problem is likely to be a blocker for anyone who uses Windows for Kafka-based development work.&lt;/p&gt;

&lt;p&gt;I suspect that the attempt to fsync the directory should just be skipped on Window. Alternatively, the failure could be ignored on Windows. Lucene &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-5588&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;added similar functionality in the past&lt;/a&gt; where it looks like they opted to ignore IOExceptions on Windows rather than skipping the attempt.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13407725">KAFKA-13391</key>
            <summary>Failure on Windows due to AccessDeniedAcception when attempting to fsync the parent directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="showuon">Luke Chen</assignee>
                                    <reporter username="awilkinson">Andy Wilkinson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Oct 2021 09:40:08 +0000</created>
                <updated>Wed, 16 Feb 2022 08:46:53 +0000</updated>
                            <resolved>Mon, 25 Oct 2021 17:18:12 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.1</fixVersion>
                    <fixVersion>3.1.0</fixVersion>
                                    <component>clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17432337" author="awilkinson" created="Thu, 21 Oct 2021 09:56:10 +0000"  >&lt;p&gt;This may be a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-13390&quot; title=&quot;Kafka 3 fails to run on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-13390&quot;&gt;&lt;del&gt;KAFKA-13390&lt;/del&gt;&lt;/a&gt; which was also opened today. The Stack Overflow question to which it links shows the same stack trace at least.&lt;/p&gt;</comment>
                            <comment id="17432399" author="showuon" created="Thu, 21 Oct 2021 11:21:44 +0000"  >&lt;p&gt;Also happened in HDFS, and the solution is also to skip fsync when in Windows. &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-13586&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HDFS-13586&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17432831" author="showuon" created="Fri, 22 Oct 2021 06:51:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=awilkinson&quot; class=&quot;user-hover&quot; rel=&quot;awilkinson&quot;&gt;awilkinson&lt;/a&gt; , thanks for reporting the issue. PR is ready for review: &lt;a href=&quot;https://github.com/apache/kafka/pull/11426&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/11426&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Welcome to provide comments. Thanks.&lt;/p&gt;</comment>
                            <comment id="17432837" author="awilkinson" created="Fri, 22 Oct 2021 07:14:17 +0000"  >&lt;p&gt;It looks good to me. Thanks.&lt;/p&gt;</comment>
                            <comment id="17433885" author="junrao" created="Mon, 25 Oct 2021 17:18:12 +0000"  >&lt;p&gt;merged the PR to 3.0 and trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13407719">KAFKA-13390</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0w1mg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>