<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:38:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-880] NoLeaderPartitionSet should be cleared before leader finder thread is started up</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-880</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;This was a recent regression.&lt;/p&gt;

&lt;p&gt;This could prevent the consumer from progressing because fetchers for the currently owned partitions may not be added (depending on the order that the map iterator yields).&lt;/p&gt;

&lt;p&gt;I think the fix should be simple - just clear the set after stopping the leader finder thread and stopping fetchers.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-25 17:06:38,377&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;sometopic-somehost-1366909575615-f801367d-leader-finder-thread&amp;#93;&lt;/span&gt;&lt;br/&gt;
, Failed to find leader for Set(&lt;span class=&quot;error&quot;&gt;&amp;#91;sometopic,11&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;sometopic,25&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;sometopic,24&amp;#93;&lt;/span&gt;) (kafka.consumer.ConsumerFetcherManager$Lead&lt;br/&gt;
erFinderThread)&lt;br/&gt;
java.util.NoSuchElementException: key not found: &lt;span class=&quot;error&quot;&gt;&amp;#91;sometopic,24&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at scala.collection.MapLike$class.default(MapLike.scala:223)&lt;br/&gt;
        at scala.collection.immutable.Map$Map2.default(Map.scala:110)&lt;br/&gt;
        at scala.collection.MapLike$class.apply(MapLike.scala:134)&lt;br/&gt;
        at scala.collection.immutable.Map$Map2.apply(Map.scala:110)&lt;br/&gt;
        at kafka.consumer.ConsumerFetcherManager$LeaderFinderThread$$anonfun$doWork$4.apply(ConsumerFetcherManager.scala:81)&lt;br/&gt;
        at kafka.consumer.ConsumerFetcherManager$LeaderFinderThread$$anonfun$doWork$4.apply(ConsumerFetcherManager.scala:79)&lt;br/&gt;
        at scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:80)&lt;br/&gt;
        at scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:80)&lt;br/&gt;
        at scala.collection.Iterator$class.foreach(Iterator.scala:631)&lt;br/&gt;
        at scala.collection.mutable.HashTable$$anon$1.foreach(HashTable.scala:161)&lt;br/&gt;
        at scala.collection.mutable.HashTable$class.foreachEntry(HashTable.scala:194)&lt;br/&gt;
        at scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:39)&lt;br/&gt;
        at scala.collection.mutable.HashMap.foreach(HashMap.scala:80)&lt;br/&gt;
        at kafka.consumer.ConsumerFetcherManager$LeaderFinderThread.doWork(ConsumerFetcherManager.scala:79)&lt;br/&gt;
        at kafka.utils.ShutdownableThread.run(ShutdownableThread.scala:51)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12644755">KAFKA-880</key>
            <summary>NoLeaderPartitionSet should be cleared before leader finder thread is started up</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="junrao">Jun Rao</assignee>
                                    <reporter username="jjkoshy">Joel Jacob Koshy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Apr 2013 00:13:14 +0000</created>
                <updated>Fri, 26 Apr 2013 02:03:51 +0000</updated>
                            <resolved>Fri, 26 Apr 2013 02:03:51 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13642495" author="junrao" created="Fri, 26 Apr 2013 01:43:35 +0000"  >&lt;p&gt;Good catch. Attach a patch.&lt;/p&gt;</comment>
                            <comment id="13642500" author="nehanarkhede" created="Fri, 26 Apr 2013 01:48:35 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13642513" author="junrao" created="Fri, 26 Apr 2013 02:03:51 +0000"  >&lt;p&gt;Thanks for the review. Committed to 0.8.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12580647" name="kafka-880.patch" size="676" author="junrao" created="Fri, 26 Apr 2013 01:43:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325118</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 30 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k3af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325463</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>