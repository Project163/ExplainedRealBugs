<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:44:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-2489] System tests: update benchmark tests to run with new and old consumer</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-2489</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Update benchmark tests to run w/new consumer to help catch performance regressions&lt;/p&gt;

&lt;p&gt;For context:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.mail-archive.com/dev@kafka.apache.org/msg33633.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/dev@kafka.apache.org/msg33633.html&lt;/a&gt;&lt;br/&gt;
The new consumer was previously reaching getting good performance. However, a &lt;br/&gt;
recent report on the mailing list indicates it&apos;s dropped significantly. After &lt;br/&gt;
evaluation, even with a local broker it seems to only be reaching a 2-10MB/s, &lt;br/&gt;
compared to 600+MB/s previously. Before release, we should get the performance &lt;br/&gt;
back on par.&lt;/p&gt;

&lt;p&gt;Some details about where the regression occurred from the mailing list &lt;br/&gt;
&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/kafka-dev/201508.mbox/%3CCAAdKFaE8bPSeWZf%2BF9RuA-xZazRpBrZG6vo454QLVHBAk_VOJg%40mail.gmail.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/kafka-dev/201508.mbox/%3CCAAdKFaE8bPSeWZf%2BF9RuA-xZazRpBrZG6vo454QLVHBAk_VOJg%40mail.gmail.com%3E&lt;/a&gt;&lt;br/&gt;
 :&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;At 49026f11781181c38e9d5edb634be9d27245c961 (May 14th), we went from good &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;performance -&amp;gt; an error due to broker apparently not accepting the partition &lt;br/&gt;
assignment strategy. Since this commit seems to add heartbeats and the server &lt;br/&gt;
side code for partition assignment strategies, I assume we were missing &lt;br/&gt;
something on the client side and by filling in the server side, things stopped &lt;br/&gt;
working.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;On either 84636272422b6379d57d4c5ef68b156edc1c67f8 or &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;a5b11886df8c7aad0548efd2c7c3dbc579232f03 (July 17th), I am able to run the perf &lt;br/&gt;
test again, but it&apos;s slow &amp;#8211; ~10MB/s for me vs the 2MB/s Jay was seeing, but &lt;br/&gt;
that&apos;s still far less than the 600MB/s I saw on the earlier commits.&lt;/p&gt;

&lt;p&gt;Ideally we would also at least have a system test in place for the new &lt;br/&gt;
consumer, even if regressions weren&apos;t automatically detected. It would at least &lt;br/&gt;
allow for manually checking for regressions. This should not be difficult since &lt;br/&gt;
there are already old consumer performance tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12860351">KAFKA-2489</key>
            <summary>System tests: update benchmark tests to run with new and old consumer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="granders">Geoff Anderson</assignee>
                                    <reporter username="granders">Geoff Anderson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Aug 2015 17:59:41 +0000</created>
                <updated>Thu, 14 Mar 2024 11:59:46 +0000</updated>
                            <resolved>Wed, 9 Sep 2015 01:00:56 +0000</resolved>
                                                    <fixVersion>0.9.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14721153" author="githubbot" created="Sat, 29 Aug 2015 16:50:04 +0000"  >&lt;p&gt;GitHub user granders opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/179&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2489&quot; title=&quot;System tests: update benchmark tests to run with new and old consumer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2489&quot;&gt;&lt;del&gt;KAFKA-2489&lt;/del&gt;&lt;/a&gt;: add benchmark for new consumer&lt;/p&gt;

&lt;p&gt;    @ewencp &lt;br/&gt;
    The changes here are smaller than they look - mostly refactoring/cleanup.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ConsumerPerformance.scala - corrected timeout inequality which had prevented this from working with new consumer&lt;/li&gt;
	&lt;li&gt;ConsumerPerformanceService: added new_consumer flag, and exposed more command-line settings&lt;/li&gt;
	&lt;li&gt;benchmark.py: refactored to use `@parametrize` and `@matrix` - this reduced some amount of repeated code&lt;/li&gt;
	&lt;li&gt;benchmark.py: added consumer performance tests with new consumer (using `@parametrize`)&lt;/li&gt;
	&lt;li&gt;benchmark.py: added more detailed test descriptions&lt;/li&gt;
	&lt;li&gt;performance.py: broke into separate files&lt;/li&gt;
&lt;/ul&gt;




&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/confluentinc/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/confluentinc/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2489&quot; title=&quot;System tests: update benchmark tests to run with new and old consumer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2489&quot;&gt;&lt;del&gt;KAFKA-2489&lt;/del&gt;&lt;/a&gt;-benchmark-new-consumer&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/179.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/179.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #179&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6525594e2c4803f85403f260ddcb18ff5ae6c0a0&lt;br/&gt;
Author: Geoff Anderson &amp;lt;geoff@confluent.io&amp;gt;&lt;br/&gt;
Date:   2015-08-29T05:24:29Z&lt;/p&gt;

&lt;p&gt;    Fixed typo in ProducerPerformance.java&lt;/p&gt;

&lt;p&gt;commit fa5f81094215a69f00076cc2a07c2e3d19f9a34f&lt;br/&gt;
Author: Geoff Anderson &amp;lt;geoff@confluent.io&amp;gt;&lt;br/&gt;
Date:   2015-08-29T05:25:53Z&lt;/p&gt;

&lt;p&gt;    Fixed ConsumerPerformance.scala with new consumer: incorrect inequality previously caused this to time out without consuming any messages with new consumer.&lt;/p&gt;

&lt;p&gt;commit 45b31f3d5f7a2ae6d4d27737012495cc8ad1c70d&lt;br/&gt;
Author: Geoff Anderson &amp;lt;geoff@confluent.io&amp;gt;&lt;br/&gt;
Date:   2015-08-29T05:28:57Z&lt;/p&gt;

&lt;p&gt;    Updated consumer throughput tests to run with new and old consumer. Refactored with @parametrize and @matrix to reduce duplicated code.&lt;/p&gt;

&lt;p&gt;commit f4d837330fdda2bc7918b97e740ba91a9d456462&lt;br/&gt;
Author: Geoff Anderson &amp;lt;geoff@confluent.io&amp;gt;&lt;br/&gt;
Date:   2015-08-29T05:30:37Z&lt;/p&gt;

&lt;p&gt;    Refactored performance.py - broke services into individual files. This does not change the way external users would import and use the performance services however.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14735924" author="githubbot" created="Wed, 9 Sep 2015 01:00:22 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/179&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14735925" author="gwenshap" created="Wed, 9 Sep 2015 01:00:56 +0000"  >&lt;p&gt;Issue resolved by pull request 179&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/179&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jjlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>gwenshap</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>