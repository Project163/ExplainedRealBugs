<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:13:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-7141] kafka-consumer-group doesn&apos;t describe existing group</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-7141</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;I am running two consumers: akka-stream-kafka consumer with standard config section as described in the &lt;a href=&quot;https://doc.akka.io/docs/akka-stream-kafka/current/consumer.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://doc.akka.io/docs/akka-stream-kafka/current/consumer.html&lt;/a&gt;&#160;and &#160;kafka-console-consumer.&lt;/p&gt;

&lt;p&gt;akka-stream-kafka consumer configuration looks like this&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt;&lt;em&gt;akka.kafka.consumer{&lt;/em&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt;&#160; &lt;em&gt;kafka-clients{&lt;/em&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt;&#160; &#160; &lt;em&gt;group.id = &quot;myakkastreamkafka-1&quot;&lt;/em&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt;&#160; &#160;&lt;em&gt;enable.auto.commit = false&lt;/em&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;}&lt;br/&gt;
&lt;font color=&quot;#333333&quot;&gt; }&lt;/font&gt;&lt;/p&gt;

&lt;p&gt; I am able to see the both groups with the command&lt;/p&gt;

&lt;p&gt; &lt;b&gt;kafka-consumer-groups --bootstrap-server 127.0.0.1:9092 --list&lt;/b&gt;&lt;br/&gt;
 &lt;em&gt;Note: This will not show information about old Zookeeper-based consumers.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt; &lt;em&gt;myakkastreamkafka-1&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;console-consumer-57171&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt;I am able to view details about the console consumer group&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;kafka-consumer-groups --describe --bootstrap-server 127.0.0.1:9092 --group console-consumer-57171&lt;/b&gt;&lt;br/&gt;
 &lt;em&gt;&lt;font color=&quot;#205081&quot;&gt;Note: This will not show information about old Zookeeper-based consumers.&lt;/font&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;font color=&quot;#205081&quot;&gt;TOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-ID&lt;/font&gt;&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;&lt;font color=&quot;#205081&quot;&gt;STREAM-TEST 0 0 0 0 consumer-1-6b928e07-196a-4322-9928-068681617878 /172.19.0.4 consumer-1&lt;/font&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt;But the command to describe my akka stream consumer gives me empty output:&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;kafka-consumer-groups --describe --bootstrap-server 127.0.0.1:9092 --group myakkastreamkafka-1&lt;/b&gt;&lt;br/&gt;
 &lt;font color=&quot;#205081&quot;&gt;&lt;em&gt;Note: This will not show information about old Zookeeper-based consumers.&lt;/em&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#205081&quot;&gt;&lt;em&gt;TOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-ID&lt;/em&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt;That is strange. Can you please check the issue?&lt;/font&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13170884">KAFKA-7141</key>
            <summary>kafka-consumer-group doesn&apos;t describe existing group</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="huxi_2b">huxihx</assignee>
                                    <reporter username="kioria">Bohdana Panchenko</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Jul 2018 15:14:51 +0000</created>
                <updated>Fri, 20 Jul 2018 16:18:45 +0000</updated>
                            <resolved>Fri, 20 Jul 2018 16:18:45 +0000</resolved>
                                    <version>0.11.0.0</version>
                    <version>1.0.1</version>
                                    <fixVersion>2.1.0</fixVersion>
                                    <component>admin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16537665" author="vahid" created="Mon, 9 Jul 2018 21:57:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kioria&quot; class=&quot;user-hover&quot; rel=&quot;kioria&quot;&gt;kioria&lt;/a&gt;&#160;thanks for reporting the issue. Do you see that output after manually committing offsets? Or before?&#160;It would be great help if you could provide the steps that reproduces the issue. Thanks!&#160;&lt;/p&gt;</comment>
                            <comment id="16538255" author="kioria" created="Tue, 10 Jul 2018 08:34:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vahid&quot; class=&quot;user-hover&quot; rel=&quot;vahid&quot;&gt;vahid&lt;/a&gt;, let me check and i will be back&lt;/p&gt;</comment>
                            <comment id="16538400" author="kioria" created="Tue, 10 Jul 2018 11:03:56 +0000"  >&lt;p&gt;Steps to reproduce the issue:&lt;br/&gt;
I am using Windows and Docker Client for Windows. Kafka broker is running as a part of the Landoop distribution &lt;a href=&quot;https://github.com/Landoop/fast-data-dev.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Landoop/fast-data-dev.&lt;/a&gt;&#160;Setup looks like this&lt;/p&gt;
&lt;h4&gt;&lt;a name=&quot;Kafka1.0.1L0%40Landoop%27sApacheKafkaDistribution&quot;&gt;&lt;/a&gt;Kafka 1.0.1-L0 @ Landoop&apos;s Apache Kafka Distribution&lt;/h4&gt;

&lt;p&gt;1&#215; Broker, 1&#215; Schema Registry, 1&#215; Connect Distributed Worker, 1&#215; REST Proxy, 1&#215; Zookeeper&lt;/p&gt;

&lt;p&gt;&#160;My&#160;Alpakka Kafka connector client and my scala producer are running in other docker containers - all are in the custom bridge network on my local dev machine.&lt;/p&gt;

&lt;p&gt;I can see my topic in the landoop topic ui and all the messages submitted by my scala producer. My alpakka consumer processes them happily and delegates offsets committing to the alpakka library (&#160;&#160;&lt;font color=&quot;#d04437&quot;&gt;_enable.auto.commit = false and&#160;&lt;a href=&quot;https://doc.akka.io/docs/akka-stream-kafka/current/consumer.html#offset-storage-in-kafka-committing_&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://doc.akka.io/docs/akka-stream-kafka/current/consumer.html#offset-storage-in-kafka-committing_&lt;/a&gt;)&lt;/font&gt;.&#160;&lt;br/&gt;
1) start fast-data-dev broker, any producer, alpakka consumer - all in separate docker containers. Start console consumer from the kafka command line.&lt;/p&gt;

&lt;p&gt;2) Send message, verify it has been received from both consumers.&lt;/p&gt;

&lt;p&gt;3) Describe both consumers - and compare the output of the describe command for the console consumer with the output for the alpakka consumer.&lt;/p&gt;

&lt;p&gt;What do you mean by &quot;&#160;after manually committing offsets&quot;?&lt;/p&gt;

&lt;p&gt;I am using&#160;&#160;&#160;&lt;em&gt;enable.auto.commit = false -&lt;/em&gt; is that not enough?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16538861" author="kioria" created="Tue, 10 Jul 2018 16:06:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vahid&quot; class=&quot;user-hover&quot; rel=&quot;vahid&quot;&gt;vahid&lt;/a&gt;, i have updates from my side.&#160;&lt;/p&gt;

&lt;p&gt;First:&#160; i checked setting&#160;&lt;font color=&quot;#d04437&quot;&gt;enable.auto.commit = true. &lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt;&lt;font color=&quot;#d04437&quot;&gt;&lt;/font&gt;After that change, &lt;ins&gt;even with the empty topic partition, I got the desired output for the describe command.&lt;/ins&gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;I&lt;/font&gt;&lt;font color=&quot;&quot;&gt;&lt;/font&gt;s that so by design?&lt;/p&gt;

&lt;p&gt; &lt;b&gt;$&lt;/b&gt; &lt;b&gt;kafka-consumer-groups --describe --bootstrap-server 127.0.0.1:9092 --group myakkastreamkafka-1&lt;/b&gt;&lt;br/&gt;
 &lt;em&gt;Note: This will not show information about old Zookeeper-based consumers.&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;TOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-ID&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;STREAM-TEST 0 0 0 0 consumer-1-7f68330a-9c2f-4694-9978-0378368e6000 /172.19.0.8 consumer-1&lt;/em&gt;&lt;/p&gt;

&lt;p&gt; &#160;&lt;/p&gt;

&lt;p&gt; Second&#160;&lt;em&gt;:&lt;/em&gt; That made me thinking I am doing something wrong while using consumer&apos;s commit API for manual offset management.&lt;/p&gt;

&lt;p&gt; I set the&#160;&#160;enable.auto.commit = false.&lt;/p&gt;

&lt;p&gt;I have double-checked and verified that i was not committing&#160;__&#160;offsets properly. I fixed that and the result is:&lt;br/&gt;
 &lt;ins&gt;before manually committing offsets - no output&lt;/ins&gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;Is that by design?&lt;/p&gt;

&lt;p&gt;&lt;b&gt;$&#160;kafka-consumer-groups --describe --bootstrap-server 127.0.0.1:9092 --group myakkastreamkafka-1&lt;/b&gt;&lt;br/&gt;
 &lt;em&gt;Note: This will not show information about old Zookeeper-based consumers.&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;TOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-ID&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;after correctly manually committing offsets - desired output&lt;/ins&gt;&#160;__&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;$ kafka-consumer-groups --describe --bootstrap-server 127.0.0.1:9092 --group myakkastreamkafka-1&lt;/b&gt;&lt;br/&gt;
 &lt;em&gt;Note: This will not show information about old Zookeeper-based consumers.&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;TOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-ID&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;STREAM-TEST 0 5 5 0 consumer-1-868599a6-272a-4929-9b28-b67de153fab4 /172.17.0.1 consumer-1&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;So to summarize: is it so, that for the group to be properly described, it is required either: using automatic offset management or wait for the first offset commit from the consumer for that group?&lt;/ins&gt;&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Thank you in advance.&lt;/ins&gt;&#160;__&#160;&lt;/p&gt;</comment>
                            <comment id="16539282" author="vahid" created="Tue, 10 Jul 2018 22:09:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kioria&quot; class=&quot;user-hover&quot; rel=&quot;kioria&quot;&gt;kioria&lt;/a&gt; thanks for the detailed info. What you&apos;re seeing makes sense. While there is no offset commit within a group there is nothing to register (an offset commit indicates successful consumption). Even with disabling auto offset commit, in normal scenarios offsets should be committed regularly when the processing of consumed records is complete.&lt;/p&gt;

&lt;p&gt;I don&apos;t think there is anything to fix here. I&apos;ll close the Jira for now. If you still see an issue please reopen and provide additional info about it. Thanks!&lt;/p&gt;</comment>
                            <comment id="16539373" author="wushujames" created="Tue, 10 Jul 2018 23:36:46 +0000"  >&lt;p&gt;I think it&apos;s a little odd that kafka-consumer-groups doesn&apos;t show partition assignment at all, when there are no offsets.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Currently, if there are 2 partitions (partitions 1 and 2)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A) Active consumer, no committed offsets on either of them means that you see nothing. No group assignment, no partitions.&lt;/li&gt;
	&lt;li&gt;B) Active consumer, committed offsets on 1, no committed offsets on 2, means that you will see rows for both of them, but the CURRENT-OFFSET field for partition 2 will have a hyphen in it.&lt;/li&gt;
	&lt;li&gt;C) Active consumer, Committed offsets on both 1 and 2, means you will see all the data&lt;/li&gt;
	&lt;li&gt;D) No active consumer, committed offsets on both 1 and 2, means you will see the rows, but CONSUMER-ID/HOST/CLIENT-ID will have hyphens.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This Jira is talking about &quot;A&quot;.&lt;br/&gt;
I would have expected that &quot;A&quot; would display similar to &quot;B&quot;. That you would see partition assignments, but &quot;-&quot; wherever there are missing offsets.&lt;/p&gt;</comment>
                            <comment id="16539616" author="githubbot" created="Wed, 11 Jul 2018 06:18:28 +0000"  >&lt;p&gt;huxihx opened a new pull request #5356: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7141&quot; title=&quot;kafka-consumer-group doesn&amp;#39;t describe existing group&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7141&quot;&gt;&lt;del&gt;KAFKA-7141&lt;/del&gt;&lt;/a&gt;: ConsumerGroupCommand should describe group assignment eve&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5356&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;n with no offsets  committed.&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7141&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-7141&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Currently, if a consumer group never commits offsets, ConsumerGroupCommand cannot describe it at all even if the member assignment is valid. Instead, the tool should be able to describe the group information showing empty current_offset and LAG.&lt;/p&gt;

&lt;p&gt;   *More detailed description of your change,&lt;br/&gt;
   if necessary. The PR title and PR message become&lt;br/&gt;
   the squashed commit message, so use a separate&lt;br/&gt;
   comment to ping reviewers.*&lt;/p&gt;

&lt;p&gt;   *Summary of testing strategy (including rationale)&lt;br/&gt;
   for the feature or bug fix. Unit and/or integration&lt;br/&gt;
   tests are expected for any behaviour change and&lt;br/&gt;
   system tests should be considered for larger changes.*&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16539619" author="huxi_2b" created="Wed, 11 Jul 2018 06:21:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wushujames&quot; class=&quot;user-hover&quot; rel=&quot;wushujames&quot;&gt;wushujames&lt;/a&gt;&#160;Agreed. This makes no sense that whether to commit offsets impacts the showing of group assignment, as shown below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
val rowsWithConsumer =
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (offsets.isEmpty)  &lt;span class=&quot;code-comment&quot;&gt;// If offsets is empty, we give up the chance to get the group assignment at all.
&lt;/span&gt;    List[PartitionAssignmentState]()
  &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
    consumers.filter(_.assignment.nonEmpty).sortWith(_.assignment.size &amp;gt; _.assignment.size).flatMap { consumerSummary =&amp;gt;
      val topicPartitions = consumerSummary.assignment
      assignedTopicPartitions = assignedTopicPartitions ++ consumerSummary.assignment
      val partitionOffsets: Map[TopicPartition, Option[&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;]] = consumerSummary.assignment.map { topicPartition =&amp;gt;
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TopicPartition(topicPartition.topic, topicPartition.partition) -&amp;gt; offsets.get(topicPartition)
      }.toMap
      collectConsumerAssignment(group, Some(consumerGroupSummary.coordinator), topicPartitions,
        partitionOffsets, Some(s&lt;span class=&quot;code-quote&quot;&gt;&quot;${consumerSummary.consumerId}&quot;&lt;/span&gt;), Some(s&lt;span class=&quot;code-quote&quot;&gt;&quot;${consumerSummary.host}&quot;&lt;/span&gt;),
        Some(s&lt;span class=&quot;code-quote&quot;&gt;&quot;${consumerSummary.clientId}&quot;&lt;/span&gt;))
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16550903" author="githubbot" created="Fri, 20 Jul 2018 15:52:07 +0000"  >&lt;p&gt;hachikuji closed pull request #5356: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7141&quot; title=&quot;kafka-consumer-group doesn&amp;#39;t describe existing group&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7141&quot;&gt;&lt;del&gt;KAFKA-7141&lt;/del&gt;&lt;/a&gt;: ConsumerGroupCommand should describe group assignment eve&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5356&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/core/src/main/scala/kafka/admin/ConsumerGroupCommand.scala b/core/src/main/scala/kafka/admin/ConsumerGroupCommand.scala&lt;br/&gt;
index 48c2cffb5d3..1d61720bfa9 100755&lt;br/&gt;
&amp;#8212; a/core/src/main/scala/kafka/admin/ConsumerGroupCommand.scala&lt;br/&gt;
+++ b/core/src/main/scala/kafka/admin/ConsumerGroupCommand.scala&lt;br/&gt;
@@ -27,7 +27,6 @@ import kafka.utils._&lt;br/&gt;
 import org.apache.kafka.clients.&lt;/p&gt;
{CommonClientConfigs, admin}
&lt;p&gt; import org.apache.kafka.clients.admin._&lt;br/&gt;
 import org.apache.kafka.clients.consumer.&lt;/p&gt;
{ConsumerConfig, KafkaConsumer, OffsetAndMetadata}
&lt;p&gt;-import org.apache.kafka.common.protocol.Errors&lt;br/&gt;
 import org.apache.kafka.common.serialization.StringDeserializer&lt;br/&gt;
 import org.apache.kafka.common.utils.Utils&lt;br/&gt;
 import org.apache.kafka.common.&lt;/p&gt;
{KafkaException, Node, TopicPartition}&lt;br/&gt;
@@ -35,7 +34,6 @@ import org.apache.kafka.common.{KafkaException, Node, TopicPartition}
&lt;p&gt; import scala.collection.JavaConverters._&lt;br/&gt;
 import scala.collection.mutable.ListBuffer&lt;br/&gt;
 import scala.collection.&lt;/p&gt;
{Seq, Set}
&lt;p&gt;-import scala.concurrent.ExecutionException&lt;br/&gt;
 import scala.util.&lt;/p&gt;
{Failure, Success, Try}

&lt;p&gt; object ConsumerGroupCommand extends Logging {&lt;br/&gt;
@@ -340,20 +338,19 @@ object ConsumerGroupCommand extends Logging {&lt;br/&gt;
       val state = consumerGroup.state&lt;br/&gt;
       val committedOffsets = getCommittedOffsets(groupId).asScala.toMap&lt;br/&gt;
       var assignedTopicPartitions = ListBuffer&lt;span class=&quot;error&quot;&gt;&amp;#91;TopicPartition&amp;#93;&lt;/span&gt;()&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;val rowsWithConsumer = if (committedOffsets.isEmpty) List&lt;span class=&quot;error&quot;&gt;&amp;#91;PartitionAssignmentState&amp;#93;&lt;/span&gt;() else consumerGroup.members.asScala.filter(!_.assignment.topicPartitions.isEmpty).toSeq&lt;/li&gt;
	&lt;li&gt;.sortWith(_.assignment.topicPartitions.size &amp;gt; _.assignment.topicPartitions.size)&lt;/li&gt;
	&lt;li&gt;.flatMap { consumerSummary =&amp;gt;&lt;/li&gt;
	&lt;li&gt;val topicPartitions = consumerSummary.assignment.topicPartitions.asScala&lt;/li&gt;
	&lt;li&gt;assignedTopicPartitions = assignedTopicPartitions ++ topicPartitions&lt;/li&gt;
	&lt;li&gt;val partitionOffsets = consumerSummary.assignment.topicPartitions.asScala&lt;/li&gt;
	&lt;li&gt;.map 
{ topicPartition =&amp;gt;
-              topicPartition -&amp;gt; committedOffsets.get(topicPartition).map(_.offset)
-            }
&lt;p&gt;.toMap&lt;br/&gt;
+      val rowsWithConsumer = consumerGroup.members.asScala.filter(!_.assignment.topicPartitions.isEmpty).toSeq&lt;br/&gt;
+        .sortWith(_.assignment.topicPartitions.size &amp;gt; _.assignment.topicPartitions.size).flatMap { consumerSummary =&amp;gt;&lt;br/&gt;
+        val topicPartitions = consumerSummary.assignment.topicPartitions.asScala&lt;br/&gt;
+        assignedTopicPartitions = assignedTopicPartitions ++ topicPartitions&lt;br/&gt;
+        val partitionOffsets = consumerSummary.assignment.topicPartitions.asScala&lt;br/&gt;
+          .map &lt;/p&gt;
{ topicPartition =&amp;gt;
+            topicPartition -&amp;gt; committedOffsets.get(topicPartition).map(_.offset)
+          }
&lt;p&gt;.toMap&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         collectConsumerAssignment(groupId, Option(consumerGroup.coordinator), topicPartitions.toList,&lt;br/&gt;
           partitionOffsets, Some(s&quot;${consumerSummary.consumerId}&quot;), Some(s&quot;${consumerSummary.host}&quot;),&lt;br/&gt;
           Some(s&quot;${consumerSummary.clientId}&quot;))&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;}&lt;br/&gt;
+      }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       val rowsWithoutConsumer = committedOffsets.filterKeys(!assignedTopicPartitions.contains(_)).flatMap {&lt;br/&gt;
         case (topicPartition, offset) =&amp;gt;&lt;br/&gt;
diff --git a/core/src/test/scala/unit/kafka/admin/ConsumerGroupCommandTest.scala b/core/src/test/scala/unit/kafka/admin/ConsumerGroupCommandTest.scala&lt;br/&gt;
index cf00e93558c..51082effdbd 100644&lt;br/&gt;
&amp;#8212; a/core/src/test/scala/unit/kafka/admin/ConsumerGroupCommandTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/admin/ConsumerGroupCommandTest.scala&lt;br/&gt;
@@ -92,8 +92,9 @@ class ConsumerGroupCommandTest extends KafkaServerTestHarness {&lt;br/&gt;
   def addConsumerGroupExecutor(numConsumers: Int,&lt;br/&gt;
                                topic: String = topic,&lt;br/&gt;
                                group: String = group,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;strategy: String = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;RangeAssignor&amp;#93;&lt;/span&gt;.getName): ConsumerGroupExecutor = {&lt;/li&gt;
	&lt;li&gt;val executor = new ConsumerGroupExecutor(brokerList, numConsumers, group, topic, strategy)&lt;br/&gt;
+                               strategy: String = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;RangeAssignor&amp;#93;&lt;/span&gt;.getName,&lt;br/&gt;
+                               customPropsOpt: Option&lt;span class=&quot;error&quot;&gt;&amp;#91;Properties&amp;#93;&lt;/span&gt; = None): ConsumerGroupExecutor = 
{
+    val executor = new ConsumerGroupExecutor(brokerList, numConsumers, group, topic, strategy, customPropsOpt)
     addExecutor(executor)
     executor
   }
&lt;p&gt;@@ -114,9 +115,10 @@ class ConsumerGroupCommandTest extends KafkaServerTestHarness {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; object ConsumerGroupCommandTest {&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;abstract class AbstractConsumerRunnable(broker: String, groupId: String) extends Runnable {&lt;br/&gt;
+  abstract class AbstractConsumerRunnable(broker: String, groupId: String, customPropsOpt: Option&lt;span class=&quot;error&quot;&gt;&amp;#91;Properties&amp;#93;&lt;/span&gt; = None) extends Runnable {&lt;br/&gt;
     val props = new Properties&lt;br/&gt;
     configure(props)&lt;br/&gt;
+    customPropsOpt.foreach(props.asScala ++= _.asScala)&lt;br/&gt;
     val consumer = new KafkaConsumer(props)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     def configure(props: Properties): Unit = {&lt;br/&gt;
@@ -145,8 +147,8 @@ object ConsumerGroupCommandTest {&lt;br/&gt;
     }&lt;br/&gt;
   }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;class ConsumerRunnable(broker: String, groupId: String, topic: String, strategy: String)&lt;/li&gt;
	&lt;li&gt;extends AbstractConsumerRunnable(broker, groupId) {&lt;br/&gt;
+  class ConsumerRunnable(broker: String, groupId: String, topic: String, strategy: String, customPropsOpt: Option&lt;span class=&quot;error&quot;&gt;&amp;#91;Properties&amp;#93;&lt;/span&gt; = None)&lt;br/&gt;
+    extends AbstractConsumerRunnable(broker, groupId, customPropsOpt) {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     override def configure(props: Properties): Unit = {&lt;br/&gt;
       super.configure(props)&lt;br/&gt;
@@ -182,11 +184,12 @@ object ConsumerGroupCommandTest {&lt;br/&gt;
     }&lt;br/&gt;
   }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;class ConsumerGroupExecutor(broker: String, numConsumers: Int, groupId: String, topic: String, strategy: String)&lt;br/&gt;
+  class ConsumerGroupExecutor(broker: String, numConsumers: Int, groupId: String, topic: String, strategy: String,&lt;br/&gt;
+                              customPropsOpt: Option&lt;span class=&quot;error&quot;&gt;&amp;#91;Properties&amp;#93;&lt;/span&gt; = None)&lt;br/&gt;
     extends AbstractConsumerGroupExecutor(numConsumers) {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     for (_ &amp;lt;- 1 to numConsumers) &lt;/p&gt;
{
-      submit(new ConsumerRunnable(broker, groupId, topic, strategy))
+      submit(new ConsumerRunnable(broker, groupId, topic, strategy, customPropsOpt))
     }

&lt;p&gt;   }&lt;br/&gt;
diff --git a/core/src/test/scala/unit/kafka/admin/DescribeConsumerGroupTest.scala b/core/src/test/scala/unit/kafka/admin/DescribeConsumerGroupTest.scala&lt;br/&gt;
index fac34a71ee1..950676b9222 100644&lt;br/&gt;
&amp;#8212; a/core/src/test/scala/unit/kafka/admin/DescribeConsumerGroupTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/admin/DescribeConsumerGroupTest.scala&lt;br/&gt;
@@ -16,9 +16,11 @@&lt;br/&gt;
  */&lt;br/&gt;
 package kafka.admin&lt;/p&gt;

&lt;p&gt;+import java.util.Properties&lt;br/&gt;
+&lt;br/&gt;
 import joptsimple.OptionException&lt;br/&gt;
 import kafka.utils.TestUtils&lt;br/&gt;
-import org.apache.kafka.clients.consumer.RoundRobinAssignor&lt;br/&gt;
+import org.apache.kafka.clients.consumer.&lt;/p&gt;
{ConsumerConfig, RoundRobinAssignor}
&lt;p&gt; import org.apache.kafka.common.TopicPartition&lt;br/&gt;
 import org.apache.kafka.common.errors.&lt;/p&gt;
{TimeoutException}
&lt;p&gt; import org.junit.Assert._&lt;br/&gt;
@@ -605,5 +607,29 @@ class DescribeConsumerGroupTest extends ConsumerGroupCommandTest &lt;/p&gt;
{
     fail(&quot;Expected an error due to presence of unrecognized --new-consumer option&quot;)
   }

&lt;p&gt;+  @Test&lt;br/&gt;
+  def testDescribeNonOffsetCommitGroup() {&lt;br/&gt;
+    TestUtils.createOffsetsTopic(zkClient, servers)&lt;br/&gt;
+&lt;br/&gt;
+    val customProps = new Properties&lt;br/&gt;
+    // create a consumer group that never commits offsets&lt;br/&gt;
+    customProps.setProperty(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, &quot;false&quot;)&lt;br/&gt;
+    // run one consumer in the group consuming from a single-partition topic&lt;br/&gt;
+    addConsumerGroupExecutor(numConsumers = 1, customPropsOpt = Some(customProps))&lt;br/&gt;
+&lt;br/&gt;
+    val cgcArgs = Array(&quot;-&lt;del&gt;bootstrap-server&quot;, brokerList, &quot;&lt;/del&gt;&lt;del&gt;describe&quot;, &quot;&lt;/del&gt;-group&quot;, group)&lt;br/&gt;
+    val service = getConsumerGroupService(cgcArgs)&lt;br/&gt;
+&lt;br/&gt;
+    TestUtils.waitUntilTrue(() =&amp;gt; &lt;/p&gt;
{
+      val (state, assignments) = service.collectGroupOffsets()
+      state.contains(&quot;Stable&quot;) &amp;amp;&amp;amp;
+        assignments.isDefined &amp;amp;&amp;amp;
+        assignments.get.count(_.group == group) == 1 &amp;amp;&amp;amp;
+        assignments.get.filter(_.group == group).head.consumerId.exists(_.trim != ConsumerGroupCommand.MISSING_COLUMN_VALUE) &amp;amp;&amp;amp;
+        assignments.get.filter(_.group == group).head.clientId.exists(_.trim != ConsumerGroupCommand.MISSING_COLUMN_VALUE) &amp;amp;&amp;amp;
+        assignments.get.filter(_.group == group).head.host.exists(_.trim != ConsumerGroupCommand.MISSING_COLUMN_VALUE)
+    }
&lt;p&gt;, s&quot;Expected a &apos;Stable&apos; group status, rows and valid values for consumer id / client id / host columns in describe results for non-offset-committing group $group.&quot;)&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
 }&lt;/p&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3voh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>