<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:42:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-328] Write unit test for kafka server startup and shutdown API </title>
                <link>https://issues.apache.org/jira/browse/KAFKA-328</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Background discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-320&quot; title=&quot;testZKSendWithDeadBroker fails intermittently due to ZKNodeExistsException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-320&quot;&gt;&lt;del&gt;KAFKA-320&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;People often try to embed KafkaServer in an application that ends up calling startup() and shutdown() repeatedly and sometimes in odd ways. To ensure this works correctly we have to be very careful about cleaning up resources. This is a good practice for making unit tests reliable anyway.&lt;/p&gt;

&lt;p&gt;A good first step would be to add some unit tests on startup and shutdown to cover various cases:&lt;br/&gt;
1. A Kafka server can startup if it is not already starting up, if it is not currently being shutdown, or if it hasn&apos;t been already started&lt;br/&gt;
2. A Kafka server can shutdown if it is not already shutting down, if it is not currently starting up, or if it hasn&apos;t been already shutdown. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12549926">KAFKA-328</key>
            <summary>Write unit test for kafka server startup and shutdown API </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="balaji.seshadri@dish.com">BalajiSeshadri</assignee>
                                    <reporter username="nehanarkhede">Neha Narkhede</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Fri, 6 Apr 2012 19:53:57 +0000</created>
                <updated>Tue, 2 Dec 2014 23:18:37 +0000</updated>
                            <resolved>Tue, 23 Sep 2014 04:04:55 +0000</resolved>
                                                    <fixVersion>0.9.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14064490" author="balaji.seshadri@dish.com" created="Thu, 17 Jul 2014 02:11:24 +0000"  >&lt;p&gt;Please assign to me i will work on the fix.&lt;/p&gt;</comment>
                            <comment id="14065956" author="nehanarkhede" created="Fri, 18 Jul 2014 03:07:43 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=balajisn&quot; class=&quot;user-hover&quot; rel=&quot;balajisn&quot;&gt;balajisn&lt;/a&gt;, it will be good to see if we already have a unit test for this. If not, write one and see if this is still an issue or not. &lt;/p&gt;</comment>
                            <comment id="14066423" author="balaji.seshadri@dish.com" created="Fri, 18 Jul 2014 15:08:08 +0000"  >&lt;p&gt;Sure will do. Can you guys please verify my patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1476&quot; title=&quot;Get a list of consumer groups&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1476&quot;&gt;&lt;del&gt;KAFKA-1476&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Balaji&lt;/p&gt;
</comment>
                            <comment id="14067071" author="balaji.seshadri@dish.com" created="Fri, 18 Jul 2014 23:07:51 +0000"  >&lt;p&gt;Is this the kind of test you are expecting.&lt;/p&gt;

&lt;p&gt; @Test&lt;br/&gt;
  def testServerStartupConsecutively(){&lt;br/&gt;
    var server = new KafkaServer(config)&lt;br/&gt;
    server.startup()&lt;br/&gt;
    Thread.sleep(100)&lt;br/&gt;
    try&lt;/p&gt;
{
    	server.startup()
    }
&lt;p&gt;    catch{&lt;br/&gt;
      case ex =&amp;gt; &lt;/p&gt;
{
        assertTrue(ex.getMessage().contains(&quot;This scheduler has already been started!&quot;))
      }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;    server.shutdown()&lt;br/&gt;
  }&lt;/p&gt;</comment>
                            <comment id="14073391" author="balaji.seshadri" created="Thu, 24 Jul 2014 17:15:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; can you please advise on my comments on this unit test ?.&lt;/p&gt;</comment>
                            <comment id="14073400" author="balaji.seshadri" created="Thu, 24 Jul 2014 17:22:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; i didnot see any such unit tests i have mentioned in my comment in current codebase.&lt;/p&gt;</comment>
                            <comment id="14121932" author="balaji.seshadri@dish.com" created="Thu, 4 Sep 2014 20:22:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; can u please suggest on my previous comment.&lt;/p&gt;</comment>
                            <comment id="14133279" author="nehanarkhede" created="Sun, 14 Sep 2014 17:04:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=balaji.seshadri%40dish.com&quot; class=&quot;user-hover&quot; rel=&quot;balaji.seshadri@dish.com&quot;&gt;balaji.seshadri@dish.com&lt;/a&gt; Thanks for looking into this. The tests mentioned in the description of the JIRA can be added to the ServerShutdownTest test suite. However, I would avoid adding any sleeps as it defies the point of the test. I&apos;m guessing the fix for the right behavior already exists, but your tests would verify it. I will also take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1476&quot; title=&quot;Get a list of consumer groups&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1476&quot;&gt;&lt;del&gt;KAFKA-1476&lt;/del&gt;&lt;/a&gt; today.&lt;/p&gt;</comment>
                            <comment id="14142171" author="nehanarkhede" created="Sat, 20 Sep 2014 19:42:58 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=balaji.seshadri%40dish.com&quot; class=&quot;user-hover&quot; rel=&quot;balaji.seshadri@dish.com&quot;&gt;balaji.seshadri@dish.com&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14144297" author="balaji.seshadri@dish.com" created="Tue, 23 Sep 2014 04:05:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; please find patch attached.&lt;/p&gt;</comment>
                            <comment id="14147374" author="nehanarkhede" created="Thu, 25 Sep 2014 05:07:31 +0000"  >&lt;p&gt;Thanks for the patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=balaji.seshadri%40dish.com&quot; class=&quot;user-hover&quot; rel=&quot;balaji.seshadri@dish.com&quot;&gt;balaji.seshadri@dish.com&lt;/a&gt;. The patch has a lot of unrelated indentation and whitespace changes that distracts from the actual changes and makes the review process harder. Could you please fix your env so all your patches don&apos;t suffer from the whitespace/indentation issues?&lt;/p&gt;</comment>
                            <comment id="14147815" author="balaji.seshadri@dish.com" created="Thu, 25 Sep 2014 14:46:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; Can you please send me code style you are using ?.&lt;/p&gt;

&lt;p&gt;Are you are using IntelliJ or Eclipse,please give me the formmater xml,i will import it to my environment.&lt;/p&gt;</comment>
                            <comment id="14159389" author="nehanarkhede" created="Sun, 5 Oct 2014 01:45:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=balaji.seshadri%40dish.com&quot; class=&quot;user-hover&quot; rel=&quot;balaji.seshadri@dish.com&quot;&gt;balaji.seshadri@dish.com&lt;/a&gt; I use Intellij 13 community edition and whatever formatting that comes in that by default. &lt;/p&gt;</comment>
                            <comment id="14159445" author="balaji.seshadri@dish.com" created="Sun, 5 Oct 2014 05:47:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; Please find patch for Startup Test.&lt;/p&gt;</comment>
                            <comment id="14174061" author="nehanarkhede" created="Thu, 16 Oct 2014 18:33:27 +0000"  >&lt;p&gt;Thanks for the patch. Would you mind using our patch review tool going forward? It will make it easier to review.&lt;br/&gt;
1. Better to use intercept&lt;span class=&quot;error&quot;&gt;&amp;#91;IllegalStateException&amp;#93;&lt;/span&gt; in the test. &lt;br/&gt;
2. We should add all relevant test cases mentioned in the description like repeated shutdown&lt;/p&gt;</comment>
                            <comment id="14192650" author="balaji.seshadri@dish.com" created="Fri, 31 Oct 2014 22:35:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; Please review&lt;/p&gt;</comment>
                            <comment id="14204323" author="nehanarkhede" created="Mon, 10 Nov 2014 04:17:31 +0000"  >&lt;p&gt;Few review comments-&lt;br/&gt;
1. Can you please use intercept&lt;span class=&quot;error&quot;&gt;&amp;#91;IllegalStateException&amp;#93;&lt;/span&gt; in testServerStartupConsecutively? &lt;br/&gt;
2. Can you move server.shutdown() to the finally block in testServerStartupConsecutively?&lt;br/&gt;
3. Can you add a similar try catch finally block in testConsecutiveShutdown as well?&lt;/p&gt;</comment>
                            <comment id="14205077" author="balaji.seshadri@dish.com" created="Mon, 10 Nov 2014 17:52:16 +0000"  >&lt;p&gt;Created reviewboard &lt;a href=&quot;https://reviews.apache.org/r/27818/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/27818/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14205087" author="balaji.seshadri@dish.com" created="Mon, 10 Nov 2014 18:05:55 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/27818/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/27818/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14205093" author="balaji.seshadri@dish.com" created="Mon, 10 Nov 2014 18:07:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; Please find changes in review board.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/27818/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/27818/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14212697" author="nehanarkhede" created="Fri, 14 Nov 2014 19:32:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=balaji.seshadri%40dish.com&quot; class=&quot;user-hover&quot; rel=&quot;balaji.seshadri@dish.com&quot;&gt;balaji.seshadri@dish.com&lt;/a&gt; Reviewed. Left a suggestion on the rb&lt;/p&gt;</comment>
                            <comment id="14228655" author="balaji.seshadri@dish.com" created="Sat, 29 Nov 2014 07:07:57 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/27818/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/27818/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14228657" author="balaji.seshadri@dish.com" created="Sat, 29 Nov 2014 07:09:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; Please find updated review board.&lt;/p&gt;</comment>
                            <comment id="14232288" author="nehanarkhede" created="Tue, 2 Dec 2014 23:18:08 +0000"  >&lt;p&gt;Thanks for your patch. Pushed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12672978" name="KAFKA-328-FORMATTED.patch" size="1350" author="balaji.seshadri@dish.com" created="Sun, 5 Oct 2014 05:48:21 +0000"/>
                            <attachment id="12684233" name="KAFKA-328-REVIEW-11-29.patch" size="2592" author="balaji.seshadri@dish.com" created="Sat, 29 Nov 2014 07:10:08 +0000"/>
                            <attachment id="12678591" name="KAFKA-328-REVIEW-COMMENTS.patch" size="2310" author="balaji.seshadri@dish.com" created="Fri, 31 Oct 2014 22:35:44 +0000"/>
                            <attachment id="12680612" name="KAFKA-328.patch" size="14647" author="balaji.seshadri@dish.com" created="Mon, 10 Nov 2014 17:52:16 +0000"/>
                            <attachment id="12670599" name="KAFKA-328.patch" size="170846" author="balaji.seshadri@dish.com" created="Tue, 23 Sep 2014 04:05:37 +0000"/>
                            <attachment id="12680613" name="KAFKA-328_2014-11-10_11:05:58.patch" size="2603" author="balaji.seshadri@dish.com" created="Mon, 10 Nov 2014 18:05:54 +0000"/>
                            <attachment id="12684231" name="KAFKA-328_2014-11-29_00:08:05.patch" size="2592" author="balaji.seshadri@dish.com" created="Sat, 29 Nov 2014 07:07:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>234917</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i029vb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11200</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>nehanarkhede</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>