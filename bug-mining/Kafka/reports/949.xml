<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:52:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3229] Root statestore is not registered with ProcessorStateManager, inner state store is registered instead</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3229</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;When the hierarchy of nested StateStores are created, init is called on the root store, but parent StateStores such as  MeteredKeyValueStore just call the contained StateStore until a store such as MemoryStore calls ProcessorContext.register, but it passes &apos;this&apos; to the method so only that inner state store (MemoryStore in this case) is registered with ProcessorStateManager.  As state is added to the store none of the parent stores code will be called, metering, or even StoreChangeLogger to put the state on the kafka topic.&lt;/p&gt;</description>
                <environment>MacOS El Capitan</environment>
        <key id="12938536">KAFKA-3229</key>
            <summary>Root statestore is not registered with ProcessorStateManager, inner state store is registered instead</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tom_dearman">Tom Dearman</assignee>
                                    <reporter username="tom_dearman">Tom Dearman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Feb 2016 15:08:01 +0000</created>
                <updated>Wed, 2 Mar 2016 22:04:31 +0000</updated>
                            <resolved>Thu, 11 Feb 2016 18:42:19 +0000</resolved>
                                    <version>0.10.0.0</version>
                                    <fixVersion>0.10.0.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15142936" author="githubbot" created="Thu, 11 Feb 2016 16:04:47 +0000"  >&lt;p&gt;GitHub user tomdearman opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/904&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/904&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3229&quot; title=&quot;Root statestore is not registered with ProcessorStateManager, inner state store is registered instead&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3229&quot;&gt;&lt;del&gt;KAFKA-3229&lt;/del&gt;&lt;/a&gt; ensure that root statestore is registered with ProcessorStateManager&lt;/p&gt;

&lt;p&gt;    Pass through the root StateStore in the init method so the inner StateStore can register that object.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tomdearman/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tomdearman/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3229&quot; title=&quot;Root statestore is not registered with ProcessorStateManager, inner state store is registered instead&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3229&quot;&gt;&lt;del&gt;KAFKA-3229&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/904.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/904.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #904&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="15143224" author="githubbot" created="Thu, 11 Feb 2016 18:36:30 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/904&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/904&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15143235" author="gwenshap" created="Thu, 11 Feb 2016 18:42:19 +0000"  >&lt;p&gt;Issue resolved by pull request 904&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/904&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/904&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15172592" author="guozhang" created="Mon, 29 Feb 2016 20:54:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tom_dearman&quot; class=&quot;user-hover&quot; rel=&quot;tom_dearman&quot;&gt;tom_dearman&lt;/a&gt; I feel adding one more parameter to the register() call may be a bit more for users with the processor topology API, could we instead separate the logic of adding the store to stores map and register the inner store (including restoring, etc) so that we can still keep the register API simple with one parameter?&lt;/p&gt;</comment>
                            <comment id="15173486" author="tom_dearman" created="Tue, 1 Mar 2016 09:24:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt; not sure what you mean, there were no new parameters added to register(), a StateStore was always passed through just the wrong one. My code added a parameter to init() but is this a method that a user would call?&lt;/p&gt;</comment>
                            <comment id="15176570" author="guozhang" created="Wed, 2 Mar 2016 22:04:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tom_dearman&quot; class=&quot;user-hover&quot; rel=&quot;tom_dearman&quot;&gt;tom_dearman&lt;/a&gt; Sorry my previous message was incorrect, indeed I meant &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; StateStore.init() &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; not &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; ProcessorContext.register() &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;, and I was not worrying about &quot;users&quot; but &quot;developers&quot; who, say, want to add a new state store implementation into it, whether it is more complex for them to reason about which store to use calling init(). Maybe I was over-thinking about programmability, but would like to bring it up so people can ponder whether it is worthwhile doing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sq6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>