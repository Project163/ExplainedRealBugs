<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:10:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-6894] Improve error message when connecting processor with a global store</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-6894</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;I was trying to access a store from a &lt;tt&gt;GlobalKTable&lt;/tt&gt; in &lt;tt&gt;KStream.transform()&lt;/tt&gt;, but I got the following error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.kafka.streams.errors.TopologyException: Invalid topology: StateStore globalStore is not added yet.
	at org.apache.kafka.streams.processor.internals.InternalTopologyBuilder.connectProcessorAndStateStore(InternalTopologyBuilder.java:716)
	at org.apache.kafka.streams.processor.internals.InternalTopologyBuilder.connectProcessorAndStateStores(InternalTopologyBuilder.java:615)
	at org.apache.kafka.streams.kstream.internals.KStreamImpl.transform(KStreamImpl.java:521)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have submitted a PR to improve the error message.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13158550">KAFKA-6894</key>
            <summary>Improve error message when connecting processor with a global store</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rayokota">Robert Yokota</assignee>
                                    <reporter username="rayokota">Robert Yokota</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 May 2018 19:14:08 +0000</created>
                <updated>Thu, 10 May 2018 22:49:51 +0000</updated>
                            <resolved>Thu, 10 May 2018 22:49:51 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16470980" author="githubbot" created="Thu, 10 May 2018 19:18:27 +0000"  >&lt;p&gt;rayokota opened a new pull request #5000: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6894&quot; title=&quot;Improve error message when connecting processor with a global store&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6894&quot;&gt;&lt;del&gt;KAFKA-6894&lt;/del&gt;&lt;/a&gt;: Fix InternalTopologyBuilder.connectProcessAndState for global stores&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5000&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5000&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This is a small change to `InternalTopologyBuilder.connectProcessAndState` to allow global stores such as from `GlobalKTable` to be accessed from `KStream.transform()` and others.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16471254" author="githubbot" created="Thu, 10 May 2018 22:49:42 +0000"  >&lt;p&gt;guozhangwang closed pull request #5000: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6894&quot; title=&quot;Improve error message when connecting processor with a global store&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6894&quot;&gt;&lt;del&gt;KAFKA-6894&lt;/del&gt;&lt;/a&gt;: Improve err msg when explicitly connecting processor to global store&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5000&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5000&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/streams/src/main/java/org/apache/kafka/streams/processor/internals/InternalTopologyBuilder.java b/streams/src/main/java/org/apache/kafka/streams/processor/internals/InternalTopologyBuilder.java&lt;br/&gt;
index b1d60a9ad88..bfe8cda7da1 100644&lt;br/&gt;
&amp;#8212; a/streams/src/main/java/org/apache/kafka/streams/processor/internals/InternalTopologyBuilder.java&lt;br/&gt;
+++ b/streams/src/main/java/org/apache/kafka/streams/processor/internals/InternalTopologyBuilder.java&lt;br/&gt;
@@ -712,6 +712,10 @@ private void addGlobalStore(final String sourceName,&lt;/p&gt;

&lt;p&gt;     private void connectProcessorAndStateStore(final String processorName,&lt;br/&gt;
                                                final String stateStoreName) {&lt;br/&gt;
+        if (globalStateStores.containsKey(stateStoreName)) &lt;/p&gt;
{
+            throw new TopologyException(&quot;Global StateStore &quot; + stateStoreName +
+                    &quot; can be used by a Processor without being specified; it should not be explicitly passed.&quot;);
+        }
&lt;p&gt;         if (!stateFactories.containsKey(stateStoreName)) &lt;/p&gt;
{
             throw new TopologyException(&quot;StateStore &quot; + stateStoreName + &quot; is not added yet.&quot;);
         }




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tky7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>