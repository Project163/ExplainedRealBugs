<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:36:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-569] Cleanup kafka.utils.Utils</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-569</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;kafka.utils.Utils is a real mess. It is full of odd little pieces of business logic dropped there. We should clean this up.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12611471">KAFKA-569</key>
            <summary>Cleanup kafka.utils.Utils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jkreps">Jay Kreps</assignee>
                                    <reporter username="jkreps">Jay Kreps</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Oct 2012 00:29:20 +0000</created>
                <updated>Sat, 13 Oct 2012 16:36:46 +0000</updated>
                            <resolved>Sat, 13 Oct 2012 16:36:39 +0000</resolved>
                                    <version>0.8.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13474674" author="jkreps" created="Fri, 12 Oct 2012 00:39:55 +0000"  >&lt;p&gt;This patch has a large number of trivial changes.&lt;/p&gt;

&lt;p&gt;Here is a summary:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make bad names good&lt;/li&gt;
	&lt;li&gt;Create kafka.api.ApiUtils and move all protocol parsing related methods there&lt;/li&gt;
	&lt;li&gt;Get rid of the encoding argument in ApiUtils since our protocol requires UTF8, so making this changable is not good.&lt;/li&gt;
	&lt;li&gt;Move zookeeper method into ZkUtils, delete random duplicate version of that code elsewhere&lt;/li&gt;
	&lt;li&gt;Move SyncJSON which was inside Utils &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; into its own file&lt;/li&gt;
	&lt;li&gt;Create ClientUtils and put getTopicMetadata() there&lt;/li&gt;
	&lt;li&gt;Create CommandLineUtils and put command line stuff there&lt;/li&gt;
	&lt;li&gt;Delete a few silly, unused methods&lt;/li&gt;
	&lt;li&gt;Move getTopicPartition into LogManager since it is an implementation detail of LogManager&lt;/li&gt;
	&lt;li&gt;Move getAllBrokersFromBrokerList into BrokerPartitionInfo, the only place it is used&lt;/li&gt;
	&lt;li&gt;Get rid of Utils.getNextRandomInt. Since random is synchronized it is better to not have a single one.&lt;/li&gt;
	&lt;li&gt;Changed DefaultEventHandler to user a counter rather than Utils.randomInt--this will be more evenly distributed since it is true round-robin.&lt;/li&gt;
	&lt;li&gt;Delete ~5 custom property parsing methods that were jammed into Utils. Add a generic method VerifiableProperties.getMap that replaces them all.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13474770" author="nehanarkhede" created="Fri, 12 Oct 2012 04:19:14 +0000"  >&lt;p&gt;Looks great, thanks for contributing this cleanup patch !&lt;br/&gt;
Just one minor suggestion - Can we add a description in ClientUtils similar to the one in Utils and ApiUtils ?&lt;/p&gt;</comment>
                            <comment id="13475415" author="jkreps" created="Fri, 12 Oct 2012 22:44:45 +0000"  >&lt;p&gt;Neha, thanks for the quick review!&lt;/p&gt;

&lt;p&gt;New patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Added the comment you requested&lt;/li&gt;
	&lt;li&gt;Rebased&lt;/li&gt;
	&lt;li&gt;Changed naming of ISR to be consistent (we had, for example, LeaderAndIsrRequest but LeaderAndISRResponse)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13475430" author="nehanarkhede" created="Fri, 12 Oct 2012 23:22:53 +0000"  >&lt;p&gt;Looks good, just one thing that I missed in the first review - I see you added a counter to DefaultEventHandler for the round-robin load-balancing. For a long running producer, the counter could overflow to a negative value. I think we need to reset it to 0, no ?&lt;/p&gt;

&lt;p&gt;+1 otherwise.&lt;/p&gt;</comment>
                            <comment id="13475443" author="jkreps" created="Fri, 12 Oct 2012 23:44:07 +0000"  >&lt;p&gt;Oh my, good catch.&lt;/p&gt;

&lt;p&gt;BTW, in fixing this I found a rare bug in DefaultPartitioner which does a similar thing. The cause is that we take&lt;br/&gt;
  math.abs(key.hashCode) % numPartitions&lt;br/&gt;
The problem with this is that since the creators of java hate all living things they made java.lang.Math.abs return a negative number when given Integer.MIN_VALUE (since it has no equivalent positive integer). Sooner or later hashCode() will return a negative value, which would cause this.&lt;/p&gt;

&lt;p&gt;I am adding a new method in Utils (how apt)&lt;br/&gt;
 def abs(n: Int) = n &amp;amp; 0x7fffffff&lt;/p&gt;

&lt;p&gt;That should fix this. Not sure if we ever saw this happen in practice.&lt;/p&gt;</comment>
                            <comment id="13475445" author="nehanarkhede" created="Fri, 12 Oct 2012 23:50:17 +0000"  >&lt;p&gt;&amp;gt;&amp;gt; The problem with this is that since the creators of java hate all living things they made java.lang.Math.abs return a negative number when given Integer.MIN_VALUE (since it has no equivalent positive integer). Sooner or later hashCode() will return a negative value, which would cause this.&lt;/p&gt;

&lt;p&gt;:O (Stumped and don&apos;t know what else to say). Great catch !&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12548980" name="KAFKA-569-v2.patch" size="128531" author="jkreps" created="Fri, 12 Oct 2012 22:44:45 +0000"/>
                            <attachment id="12548832" name="KAFKA-569.patch" size="94768" author="jkreps" created="Fri, 12 Oct 2012 00:39:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247838</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08q7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48847</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>