<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:56:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4157] Transient system test failure in replica_verification_test.test_replica_lags</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4157</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The replica_verification_test.test_replica_lags test runs a background thread via replica_verification_tool that populates a dict with max lag for each &quot;topic,partition&quot; key. Because populating that map is in a separate thread, there is a race condition on populating the key and querying it via replica_verification_tool.get_lag_for_partition. This results in a key error like below: &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Traceback (most recent call last):
  File &quot;/usr/lib/python2.7/site-packages/ducktape/tests/runner.py&quot;, line 106, in run_all_tests
    data = self.run_single_test()
  File &quot;/usr/lib/python2.7/site-packages/ducktape/tests/runner.py&quot;, line 162, in run_single_test
    return self.current_test_context.function(self.current_test)
  File &quot;/root/kafka/tests/kafkatest/tests/tools/replica_verification_test.py&quot;, line 82, in test_replica_lags
    err_msg=&quot;Timed out waiting to reach zero replica lags.&quot;)
  File &quot;/usr/lib/python2.7/site-packages/ducktape/utils/util.py&quot;, line 31, in wait_until
    if condition():
  File &quot;/root/kafka/tests/kafkatest/tests/tools/replica_verification_test.py&quot;, line 81, in &amp;lt;lambda&amp;gt;
    wait_until(lambda: self.replica_verifier.get_lag_for_partition(TOPIC, 0) == 0, timeout_sec=10,
  File &quot;/root/kafka/tests/kafkatest/services/replica_verification_tool.py&quot;, line 66, in get_lag_for_partition
    lag = self.partition_lag[topic_partition]
KeyError: &apos;topic-replica-verification,0&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Instead of an error, None should be returned when no key is found. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13004602">KAFKA-4157</key>
            <summary>Transient system test failure in replica_verification_test.test_replica_lags</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="granthenke">Grant Henke</assignee>
                                    <reporter username="granthenke">Grant Henke</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Sep 2016 14:26:43 +0000</created>
                <updated>Sat, 17 Sep 2016 22:03:59 +0000</updated>
                            <resolved>Sat, 17 Sep 2016 22:03:58 +0000</resolved>
                                    <version>0.10.0.0</version>
                                    <fixVersion>0.10.0.2</fixVersion>
                                    <component>system tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15487341" author="githubbot" created="Tue, 13 Sep 2016 14:28:19 +0000"  >&lt;p&gt;GitHub user granthenke opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1849&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4157&quot; title=&quot;Transient system test failure in replica_verification_test.test_replica_lags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4157&quot;&gt;&lt;del&gt;KAFKA-4157&lt;/del&gt;&lt;/a&gt;: Transient system test failure in replica_verification_tes&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;t.test_replica_lags&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/granthenke/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/granthenke/kafka&lt;/a&gt; replica-verification-fix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1849.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1849.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1849&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4fdee9a5f7cb0c62fd001c8e64eab4f9ec6785ad&lt;br/&gt;
Author: Grant Henke &amp;lt;granthenke@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-09-13T14:27:26Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4157&quot; title=&quot;Transient system test failure in replica_verification_test.test_replica_lags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4157&quot;&gt;&lt;del&gt;KAFKA-4157&lt;/del&gt;&lt;/a&gt;: Transient system test failure in replica_verification_test.test_replica_lags&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15499750" author="githubbot" created="Sat, 17 Sep 2016 21:48:34 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1849&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33kk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>