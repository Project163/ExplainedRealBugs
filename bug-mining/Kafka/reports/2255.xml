<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:18:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-8344] Fix vagrant-up.sh to work with AWS properly</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-8344</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;I tried to run &lt;tt&gt;vagrant/vagrant-up.sh --aws&lt;/tt&gt; with the following Vagrantfile.local.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
enable_dns = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
enable_hostmanager = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;

# EC2
ec2_access_key = &lt;span class=&quot;code-quote&quot;&gt;&quot;********************&quot;&lt;/span&gt;
ec2_secret_key = &lt;span class=&quot;code-quote&quot;&gt;&quot;****************************************&quot;&lt;/span&gt;
ec2_keypair_name = &lt;span class=&quot;code-quote&quot;&gt;&quot;keypair&quot;&lt;/span&gt;
ec2_keypair_file = &lt;span class=&quot;code-quote&quot;&gt;&quot;/path/to/keypair/file&quot;&lt;/span&gt;
ec2_region = &lt;span class=&quot;code-quote&quot;&gt;&quot;ap-northeast-1&quot;&lt;/span&gt;
ec2_ami = &lt;span class=&quot;code-quote&quot;&gt;&quot;ami-0905ffddadbfd01b7&quot;&lt;/span&gt;
ec2_security_groups = &lt;span class=&quot;code-quote&quot;&gt;&quot;sg-********&quot;&lt;/span&gt;
ec2_subnet_id = &lt;span class=&quot;code-quote&quot;&gt;&quot;subnet-********&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;EC2 instances were successfully created, but it failed with the following error after that.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ vagrant/vagrant-up.sh --aws

(snip)

An active machine was found with a different provider. Vagrant
currently allows each machine to be brought up with only a single
provider at a time. A &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; version will remove &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; limitation.
Until then, please destroy the existing machine to up with a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;
provider.

Machine name: zk1
Active provider: aws
Requested provider: virtualbox
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems that the &lt;tt&gt;vagrant hostmanager&lt;/tt&gt; command also requires &lt;tt&gt;--provider=aws&lt;/tt&gt; option, in addition to &lt;tt&gt;vagrant up&lt;/tt&gt;.&lt;br/&gt;
With that option, it succeeded as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ git diff
diff --git a/vagrant/vagrant-up.sh b/vagrant/vagrant-up.sh
index 6a4ef9564..9210a5357 100755
--- a/vagrant/vagrant-up.sh
+++ b/vagrant/vagrant-up.sh
@@ -220,7 +220,7 @@ function bring_up_aws {
             # We still have to bring up zookeeper/broker nodes serially
             echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Bringing up zookeeper/broker machines serially&quot;&lt;/span&gt;
             vagrant up --provider=aws --no-parallel --no-provision $zk_broker_machines $debug
-            vagrant hostmanager
+            vagrant hostmanager --provider=aws
             vagrant provision
         fi

@@ -231,11 +231,11 @@ function bring_up_aws {
             local vagrant_rsync_temp_dir=$(mktemp -d);
             TMPDIR=$vagrant_rsync_temp_dir vagrant_batch_command &lt;span class=&quot;code-quote&quot;&gt;&quot;vagrant up $debug --provider=aws&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;$worker_machines&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;$max_parallel&quot;&lt;/span&gt;
             rm -rf $vagrant_rsync_temp_dir
-            vagrant hostmanager
+            vagrant hostmanager --provider=aws
         fi
     &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
         vagrant up --provider=aws --no-parallel --no-provision $debug
-        vagrant hostmanager
+        vagrant hostmanager --provider=aws
         vagrant provision
     fi

$ vagrant/vagrant-up.sh --aws

(snip)

==&amp;gt; broker3: Running provisioner: shell...
    broker3: Running: /tmp/vagrant-shell20190509-25399-8f1wgz.sh
    broker3: Killing server
    broker3: No kafka server to stop
    broker3: Starting server
$ vagrant status
Current machine states:

zk1                       running (aws)
broker1                   running (aws)
broker2                   running (aws)
broker3                   running (aws)

This environment represents multiple VMs. The VMs are all listed
above with their current state. For more information about a specific
VM, run `vagrant status NAME`.
$ vagrant ssh broker1

(snip)

ubuntu@ip-172-16-0-62:~$ /opt/kafka-dev/bin/kafka-topics.sh --bootstrap-server broker1:9092,broker2:9092,broker3:9092 --create --partitions 1 --replication-factor 3 --topic sandbox

(snip)

ubuntu@ip-172-16-0-62:~$ /opt/kafka-dev/bin/kafka-topics.sh --bootstrap-server broker1:9092,broker2:9092,broker3:9092 --list

(snip)

sandbox
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13232392">KAFKA-8344</key>
            <summary>Fix vagrant-up.sh to work with AWS properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sekikn">Kengo Seki</assignee>
                                    <reporter username="sekikn">Kengo Seki</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 May 2019 07:15:20 +0000</created>
                <updated>Thu, 11 Jul 2019 16:05:21 +0000</updated>
                            <resolved>Fri, 10 May 2019 05:49:33 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>system tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16836176" author="githubbot" created="Thu, 9 May 2019 08:00:07 +0000"  >&lt;p&gt;sekikn commented on pull request #6703: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8344&quot; title=&quot;Fix vagrant-up.sh to work with AWS properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8344&quot;&gt;&lt;del&gt;KAFKA-8344&lt;/del&gt;&lt;/a&gt;. Fix vagrant-up.sh to work with AWS properly&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6703&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   For now, `vagrant/vagrant-up.sh --aws` fails because&lt;br/&gt;
   the `vagrant hostmanager` command in that script lacks&lt;br/&gt;
   the `--aws` option. This PR adds it.&lt;/p&gt;

&lt;p&gt;   I ran `vagrant/vagrant-up.sh --aws` with and without&lt;br/&gt;
   `--no-parallel` option and confirmed both worked&lt;br/&gt;
   as expected.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16836904" author="githubbot" created="Fri, 10 May 2019 05:50:44 +0000"  >&lt;p&gt;gwenshap commented on pull request #6703: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8344&quot; title=&quot;Fix vagrant-up.sh to work with AWS properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8344&quot;&gt;&lt;del&gt;KAFKA-8344&lt;/del&gt;&lt;/a&gt;. Fix vagrant-up.sh to work with AWS properly&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6703&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02j28:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>