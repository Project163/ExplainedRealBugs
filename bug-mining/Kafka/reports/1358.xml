<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:59:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4461] When using ProcessorTopologyTestDriver, the combination of map and .groupByKey does not produce any result</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4461</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;&lt;b&gt;Problem&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;When using ProcessorTopologyTestDriver in the latest Kafka 0.10.1, the combination of map and .groupByKey does not produce any result. However, it works fine when using KStreamTestDriver.&lt;/p&gt;

&lt;p&gt;The topology looks like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;builder.stream(Serdes.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, Serdes.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, inputTopic)
 .map((k, v) =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; KeyValue(fn(k), v))
 .groupByKey(Serdes.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, Serdes.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;)
 .count(stateStore)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Full examples&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Examples for ProcessorTopologyTestDriver and KStreamTestDriver:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.github.com/hrafzali/c2f50e7b957030dab13693eec1e49c13&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/hrafzali/c2f50e7b957030dab13693eec1e49c13&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Additional info&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;kafka-users mailing list:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/kafka-users/201611.mbox/%3CCAHwHRrVq1APVkNhP3HVqxujxRJEP9FwHV2NRcvPPsHX7Wujzng%40mail.gmail.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/kafka-users/201611.mbox/%3CCAHwHRrVq1APVkNhP3HVqxujxRJEP9FwHV2NRcvPPsHX7Wujzng%40mail.gmail.com%3E&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13024111">KAFKA-4461</key>
            <summary>When using ProcessorTopologyTestDriver, the combination of map and .groupByKey does not produce any result</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amccague">Adrian McCague</assignee>
                                    <reporter username="hrafzali">Hamidreza Afzali</reporter>
                        <labels>
                            <label>newbie</label>
                            <label>unit-test</label>
                    </labels>
                <created>Tue, 29 Nov 2016 15:13:40 +0000</created>
                <updated>Thu, 23 Feb 2017 14:01:17 +0000</updated>
                            <resolved>Mon, 6 Feb 2017 19:38:06 +0000</resolved>
                                    <version>0.10.1.0</version>
                                    <fixVersion>0.11.0.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15852496" author="githubbot" created="Sat, 4 Feb 2017 02:17:26 +0000"  >&lt;p&gt;GitHub user amccague opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2499&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2499&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4461&quot; title=&quot;When using ProcessorTopologyTestDriver, the combination of map and .groupByKey does not produce any result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4461&quot;&gt;&lt;del&gt;KAFKA-4461&lt;/del&gt;&lt;/a&gt; Added support to ProcessorTopologyTestDriver for internal topics.&lt;/p&gt;

&lt;p&gt;    This resolves an issue in driving tests using the ProcessorTopologyTestDriver when `groupBy()` is invoked downstream of a processor that flags repartitioning.&lt;/p&gt;

&lt;p&gt;    Ticket: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4461&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-4461&lt;/a&gt;&lt;br/&gt;
    Discussion: &lt;a href=&quot;http://search-hadoop.com/m/Kafka/uyzND1wbKeY1Q8nH1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://search-hadoop.com/m/Kafka/uyzND1wbKeY1Q8nH1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @dguy @guozhangwang &lt;/p&gt;

&lt;p&gt;    The contribution is my original work and I license the work to the project under the project&apos;s open source license.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/amccague/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/amccague/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4461&quot; title=&quot;When using ProcessorTopologyTestDriver, the combination of map and .groupByKey does not produce any result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4461&quot;&gt;&lt;del&gt;KAFKA-4461&lt;/del&gt;&lt;/a&gt;_ProcessorTopologyTestDriver_map_groupbykey&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2499.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2499.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2499&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 938b8bb8b8981ea25bacc7389565e15604c4dcba&lt;br/&gt;
Author: Adrian McCague &amp;lt;amccague@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-02-04T02:09:35Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4461&quot; title=&quot;When using ProcessorTopologyTestDriver, the combination of map and .groupByKey does not produce any result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4461&quot;&gt;&lt;del&gt;KAFKA-4461&lt;/del&gt;&lt;/a&gt; Added support to ProcessorTopologyTestDriver for internal topics.&lt;br/&gt;
    Ticket: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4461&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-4461&lt;/a&gt;&lt;br/&gt;
    Discussion: &lt;a href=&quot;http://search-hadoop.com/m/Kafka/uyzND1wbKeY1Q8nH1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://search-hadoop.com/m/Kafka/uyzND1wbKeY1Q8nH1&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15854605" author="guozhang" created="Mon, 6 Feb 2017 19:38:06 +0000"  >&lt;p&gt;Issue resolved by pull request 2499&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2499&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2499&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15854608" author="githubbot" created="Mon, 6 Feb 2017 19:38:36 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2499&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2499&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15854609" author="guozhang" created="Mon, 6 Feb 2017 19:39:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amccague&quot; class=&quot;user-hover&quot; rel=&quot;amccague&quot;&gt;amccague&lt;/a&gt; Thanks for the patch! I have added you to the contributor list of Kafka, so that you can assign JIRAs to yourself in the future.&lt;/p&gt;</comment>
                            <comment id="15855792" author="amccague" created="Tue, 7 Feb 2017 11:20:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt; Thanks!&lt;/p&gt;</comment>
                            <comment id="15880293" author="githubbot" created="Thu, 23 Feb 2017 11:37:19 +0000"  >&lt;p&gt;GitHub user hrafzali opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2587&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2587&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4461&quot; title=&quot;When using ProcessorTopologyTestDriver, the combination of map and .groupByKey does not produce any result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4461&quot;&gt;&lt;del&gt;KAFKA-4461&lt;/del&gt;&lt;/a&gt;: Added support to ProcessorTopologyTestDriver to forward timestamps to internal topics&lt;/p&gt;

&lt;p&gt;    This resolves the issue in the ProcessorTopologyTestDriver that the extracted timestamp is not forwarded with the produced record to the internal topics.&lt;/p&gt;

&lt;p&gt;    JIRA ticket: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4789&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-4789&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The contribution is my original work and I license the work to the project under the project&apos;s open source license.&lt;/p&gt;

&lt;p&gt;    @guozhangwang @dguy&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hrafzali/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hrafzali/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4789&quot; title=&quot;ProcessorTopologyTestDriver does not forward extracted timestamps to internal topics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4789&quot;&gt;&lt;del&gt;KAFKA-4789&lt;/del&gt;&lt;/a&gt;_ProcessorTopologyTestDriver_timestamp&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2587.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2587.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2587&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ad6db45916f28971470c0522584c2dca02ffae76&lt;br/&gt;
Author: Hamidreza Afzali &amp;lt;hamidreza.afzali@hivestreaming.com&amp;gt;&lt;br/&gt;
Date:   2017-02-23T10:53:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4461&quot; title=&quot;When using ProcessorTopologyTestDriver, the combination of map and .groupByKey does not produce any result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4461&quot;&gt;&lt;del&gt;KAFKA-4461&lt;/del&gt;&lt;/a&gt;: Added support to ProcessorTopologyTestDriver to forward extracted timestamps to internal topics.&lt;/p&gt;

&lt;hr /&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36wqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>