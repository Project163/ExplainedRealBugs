<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:42:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1870] Cannot commit with simpleConsumer on Zookeeper only with Java API</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1870</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;From Kafka 0.8.2, we need to pass version 0 in the OffsetCommitRequest if we want to commit only on zookeeper.&lt;/p&gt;

&lt;p&gt;However the Java API doesnt allow to pass the version in parameter.&lt;/p&gt;

&lt;p&gt;Can you please add the version in the constructor of kafka.javaapi.OffsetCommitRequest ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12768043">KAFKA-1870</key>
            <summary>Cannot commit with simpleConsumer on Zookeeper only with Java API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="junrao">Jun Rao</assignee>
                                    <reporter username="tomvdv">Thomas Vandevelde</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Jan 2015 15:16:36 +0000</created>
                <updated>Tue, 3 Feb 2015 02:37:13 +0000</updated>
                            <resolved>Sat, 17 Jan 2015 02:35:46 +0000</resolved>
                                    <version>0.8.2.0</version>
                                    <fixVersion>0.8.2.0</fixVersion>
                                    <component>consumer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="14280373" author="tomvdv" created="Fri, 16 Jan 2015 15:18:08 +0000"  >&lt;p&gt;Patch attached&lt;/p&gt;</comment>
                            <comment id="14280429" author="sriharsha" created="Fri, 16 Jan 2015 15:50:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomvdv&quot; class=&quot;user-hover&quot; rel=&quot;tomvdv&quot;&gt;tomvdv&lt;/a&gt; can you send the patch via review board. Here are the instructions &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/Kafka+patch+review+tool&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/Kafka+patch+review+tool&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14280517" author="guozhang" created="Fri, 16 Jan 2015 17:17:48 +0000"  >&lt;p&gt;Thanks for the findings Thomas.&lt;/p&gt;

&lt;p&gt;However since the javaapi.OffsetCommitRequest is a public API class, adding the version_id into the construct directly will make backward incompatible changes: people using it without worrying the version id will break their apps when moving on to the new kafka vesion.&lt;/p&gt;

&lt;p&gt;How about adding another constructor which takes the version id and leave the current one as-is?&lt;/p&gt;

&lt;p&gt;Guozhang&lt;/p&gt;</comment>
                            <comment id="14280594" author="nehanarkhede" created="Fri, 16 Jan 2015 18:19:53 +0000"  >&lt;p&gt;Since this is related to offset commit, thought you&apos;d like to take a look, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14280619" author="jjkoshy" created="Fri, 16 Jan 2015 18:37:47 +0000"  >&lt;p&gt;Committing offsets to Kafka is a little more complicated - i.e., you need to discover the offset manager for your group and then send the request to that broker. &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/Committing+and+fetching+consumer+offsets+in+Kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/Committing+and+fetching+consumer+offsets+in+Kafka&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think the SimpleConsumer should only send v0 of OffsetCommitRequest. For people who wish to commit offsets manually to ZooKeeper they will need to do so explicitly (via a BlockingChannel) or until we get &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1013&quot; title=&quot;Modify existing tools as per the changes in KAFKA-1000&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1013&quot;&gt;&lt;del&gt;KAFKA-1013&lt;/del&gt;&lt;/a&gt; in.&lt;/p&gt;</comment>
                            <comment id="14280632" author="tomvdv" created="Fri, 16 Jan 2015 18:47:02 +0000"  >&lt;p&gt;Do you mean we should then have the default version 0 instead of 1 in OffsetCommitRequest ?&lt;/p&gt;</comment>
                            <comment id="14280715" author="jjkoshy" created="Fri, 16 Jan 2015 19:39:06 +0000"  >&lt;p&gt;Not really - the SimpleConsumer commitOffsets method can explicitly set the version to 0. What do you/others think?&lt;/p&gt;</comment>
                            <comment id="14280725" author="guozhang" created="Fri, 16 Jan 2015 19:46:49 +0000"  >&lt;p&gt;Joel, I think for v0 now the offsets will be still forwarded to ZK, no?&lt;/p&gt;</comment>
                            <comment id="14280728" author="junrao" created="Fri, 16 Jan 2015 19:49:49 +0000"  >&lt;p&gt;Created reviewboard &lt;a href=&quot;https://reviews.apache.org/r/29977/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/29977/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/0.8.2&lt;/p&gt;</comment>
                            <comment id="14280736" author="jjkoshy" created="Fri, 16 Jan 2015 19:54:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt; yes that is the intended effect. i.e., the documentation will be: you cannot commit to Kafka with SimpleConsumer.&lt;/p&gt;</comment>
                            <comment id="14280742" author="jjkoshy" created="Fri, 16 Jan 2015 19:57:19 +0000"  >&lt;p&gt;Actually, sorry - nm. I just misread the API. For some reason I was thinking SimpleConsumer&apos;s commitOffsets took the offset array and not the actual request.&lt;/p&gt;</comment>
                            <comment id="14280756" author="junrao" created="Fri, 16 Jan 2015 20:08:11 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/29977/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/29977/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/0.8.2&lt;/p&gt;</comment>
                            <comment id="14280768" author="junrao" created="Fri, 16 Jan 2015 20:12:32 +0000"  >&lt;p&gt;I think it makes sense to pin the version of OffsetCommitRequest and OffsetFetchRequest to version 0 so that they have the same behavior as in 0.8.1. There are likely people using this api and stopping support it w/o deprecating it first may not be ideal. Attaching a patch. This probably should be an 0.8.2 blocker.&lt;/p&gt;</comment>
                            <comment id="14280778" author="jjkoshy" created="Fri, 16 Jan 2015 20:20:18 +0000"  >&lt;p&gt;This is a pretty severe limitation of the scala javaapi request definitions. i.e., we don&apos;t provide explicit constructors for different versions (as we do in the Java request definitions in the clients package). We should really get rid of these and move completely over to the Java request definitions in the next or next++ release - so on that note I think it is reasonable to pin the version and enforce SimpleConsumer commits/fetches only to/from ZK.&lt;/p&gt;</comment>
                            <comment id="14281163" author="junrao" created="Sat, 17 Jan 2015 02:35:25 +0000"  >&lt;p&gt;Marking this as an 0.8.2 blocker.&lt;/p&gt;</comment>
                            <comment id="14281165" author="junrao" created="Sat, 17 Jan 2015 02:35:46 +0000"  >&lt;p&gt;Thanks for the reviews. Committed to 0.8.2 and trunk.&lt;/p&gt;</comment>
                            <comment id="14281389" author="tomvdv" created="Sat, 17 Jan 2015 14:55:22 +0000"  >&lt;p&gt;Thanks for the very quick fix guys!&lt;/p&gt;

&lt;p&gt;It was indeed blocking us to move from 0.8.1  to 0.8.2&lt;br/&gt;
I can see that only the javaapi version is restricted to use v0, The scala one still has v1 as default. Is it expected? &lt;br/&gt;
In our case, i suppose we will wait for the new kafkaconsumer to commit to kafka instead of zookeeper.&lt;/p&gt;

&lt;p&gt;Do you know when 0.8.2 will be released by any chance?&lt;/p&gt;</comment>
                            <comment id="14281436" author="junrao" created="Sat, 17 Jan 2015 16:28:11 +0000"  >&lt;p&gt;Yes, the scala one still defaults to version 1. This is a bit harder to fix since both OffsetCommitRequest and OffsetFetchRequest are used internally and we always want the default to be the latest version. Technically, only the javaapi is our public api. If you are using the scala api, the workaround is to explicitly specify version 0 when constructing OffsetCommitRequest and OffsetFetchRequest.&lt;/p&gt;

&lt;p&gt;0.8.2 is being voted now and hopefully we can release it by end of next week.&lt;/p&gt;</comment>
                            <comment id="14302679" author="jjkoshy" created="Tue, 3 Feb 2015 02:37:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; (at least on trunk) I think the change to kafka.javaapi.OffsetFetchRequest should be reverted since people who are using that original constructor should be explicitly setting the versionId to 0. The issue is that right now you cannot fetch offsets from Kafka using javaapi.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12692783" name="OffsetCommitRequest.diff" size="930" author="tomvdv" created="Fri, 16 Jan 2015 15:18:08 +0000"/>
                            <attachment id="12692822" name="kafka-1870.patch" size="2355" author="junrao" created="Fri, 16 Jan 2015 19:49:49 +0000"/>
                            <attachment id="12692827" name="kafka-1870_2015-01-16_12:08:05.patch" size="4720" author="junrao" created="Fri, 16 Jan 2015 20:08:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24gmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jjkoshy</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>