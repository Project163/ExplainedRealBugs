<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:59:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4704] Group coordinator cache loading fails if groupId is used first for consumer groups and then for simple consumer</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4704</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;When all the members in a consumer group have died and all of its offsets have expired, we write a tombstone to __consumer_offsets so that its group metadata is cleaned up. It is possible that after this happens, the same groupId is then used only for offset storage (i.e. by &quot;simple&quot; consumers). Our current cache loading logic, which is triggered when a coordinator first takes over control of a partition, does not account for this scenario and would currently fail.&lt;/p&gt;

&lt;p&gt;This is probably an unlikely scenario to hit in practice, but it reveals the lack of test coverage around the cache loading logic. We should improve this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13038309">KAFKA-4704</key>
            <summary>Group coordinator cache loading fails if groupId is used first for consumer groups and then for simple consumer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hachikuji">Jason Gustafson</assignee>
                                    <reporter username="hachikuji">Jason Gustafson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Jan 2017 22:49:35 +0000</created>
                <updated>Fri, 27 Jan 2017 20:30:50 +0000</updated>
                            <resolved>Fri, 27 Jan 2017 20:30:48 +0000</resolved>
                                    <version>0.10.0.0</version>
                    <version>0.10.0.1</version>
                    <version>0.10.1.0</version>
                    <version>0.10.1.1</version>
                                    <fixVersion>0.10.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15840637" author="githubbot" created="Thu, 26 Jan 2017 23:09:39 +0000"  >&lt;p&gt;GitHub user hachikuji opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2455&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4704&quot; title=&quot;Group coordinator cache loading fails if groupId is used first for consumer groups and then for simple consumer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4704&quot;&gt;&lt;del&gt;KAFKA-4704&lt;/del&gt;&lt;/a&gt;: Coordinator cache loading fails if groupId is reused for offset storage after group is removed&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hachikuji/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hachikuji/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4704&quot; title=&quot;Group coordinator cache loading fails if groupId is used first for consumer groups and then for simple consumer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4704&quot;&gt;&lt;del&gt;KAFKA-4704&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2455.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2455.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2455&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 166e0d95dba89ba7ed9ff975b8353968316248bd&lt;br/&gt;
Author: Jason Gustafson &amp;lt;jason@confluent.io&amp;gt;&lt;br/&gt;
Date:   2017-01-26T22:51:08Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4704&quot; title=&quot;Group coordinator cache loading fails if groupId is used first for consumer groups and then for simple consumer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4704&quot;&gt;&lt;del&gt;KAFKA-4704&lt;/del&gt;&lt;/a&gt;: Coordinator cache loading fails if groupId is reused for offset storage after group is removed&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15840663" author="onurkaraman" created="Thu, 26 Jan 2017 23:35:14 +0000"  >&lt;p&gt;It might be worth mentioning that I hit a similar scenario when implementing the new consumer migration. Rolling back from the migration-aware old consumer (or just new consumer) to the old consumer with kafka-based offset storage (or &lt;tt&gt;dual.commit.enabled&lt;/tt&gt;) causes the old consumer offset commits to fail silently. This is because by that point, the group has been added to the &lt;tt&gt;GroupCoordinator&lt;/tt&gt; and generation id has been incremented to be &amp;gt;= 0.  The old consumer, on the other hand, is naively sending &lt;tt&gt;OffsetCommitRequests&lt;/tt&gt; with an empty member id and generation id of -1, so the &lt;tt&gt;GroupCoordinator&lt;/tt&gt; will reject the request with &lt;tt&gt;UNKNOWN_MEMBER_ID&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I have a workaround constraint to address the problem, but I&apos;ll leave that for when I send out the actual proposal.&lt;/p&gt;</comment>
                            <comment id="15843389" author="hachikuji" created="Fri, 27 Jan 2017 19:51:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=onurkaraman&quot; class=&quot;user-hover&quot; rel=&quot;onurkaraman&quot;&gt;onurkaraman&lt;/a&gt; Interesting point. Unfortunately, this patch won&apos;t fix that problem. The only thing I can think of would be to skip the generation check when the group is empty. Seems a little dangerous, but possibly justifiable. I suggest we address this as part of the consumer migration work itself.&lt;/p&gt;</comment>
                            <comment id="15843450" author="ijuma" created="Fri, 27 Jan 2017 20:30:48 +0000"  >&lt;p&gt;Issue resolved by pull request 2455&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2455&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15843451" author="githubbot" created="Fri, 27 Jan 2017 20:30:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2455&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i399zj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>