<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:21:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4203] Java producer default max message size does not align with broker default</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4203</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The Java producer sets max.request.size = 1048576 (the base 2 version of 1 MB (MiB))&lt;/p&gt;

&lt;p&gt;The broker sets max.message.bytes = 1000012 (the base 10 value of 1 MB + 12 bytes for overhead)&lt;/p&gt;

&lt;p&gt;This means that by default the producer can try to produce messages larger than the broker will accept resulting in RecordTooLargeExceptions.&lt;/p&gt;

&lt;p&gt;There were not similar issues in the old producer because it sets max.message.size = 1000000 (the base 10 value of 1 MB)&lt;/p&gt;

&lt;p&gt;I propose we increase the broker default for max.message.bytes to 1048588 (the base 2 value of 1 MB (MiB) + 12 bytes for overhead) so that any message produced with default configs from either producer does not result in a RecordTooLargeException.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13006648">KAFKA-4203</key>
            <summary>Java producer default max message size does not align with broker default</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ijuma">Ismael Juma</assignee>
                                    <reporter username="granthenke">Grant Henke</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Sep 2016 20:41:41 +0000</created>
                <updated>Wed, 29 Jan 2020 21:49:00 +0000</updated>
                            <resolved>Wed, 29 Jan 2020 21:49:00 +0000</resolved>
                                    <version>0.8.1</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16223601" author="githubbot" created="Sat, 28 Oct 2017 15:47:14 +0000"  >&lt;p&gt;GitHub user ijuma opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/4154&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4154&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4203&quot; title=&quot;Java producer default max message size does not align with broker default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4203&quot;&gt;&lt;del&gt;KAFKA-4203&lt;/del&gt;&lt;/a&gt;: Align broker default for max.message.bytes with Java producer default&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ijuma/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ijuma/kafka&lt;/a&gt; kafka-4203-align-broker-max-message-bytes-with-java-producer&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/4154.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4154.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4154&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 15cf53bf2643bd0ea164d70f76e36acdd65d0990&lt;br/&gt;
Author: Ismael Juma &amp;lt;ismael@juma.me.uk&amp;gt;&lt;br/&gt;
Date:   2017-10-28T15:46:44Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4203&quot; title=&quot;Java producer default max message size does not align with broker default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4203&quot;&gt;&lt;del&gt;KAFKA-4203&lt;/del&gt;&lt;/a&gt;: Align broker default for max.message.bytes with Java producer default&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16223603" author="ijuma" created="Sat, 28 Oct 2017 15:48:53 +0000"  >&lt;p&gt;Since this is a trivial issue and has been there for over a year, I went ahead and submitted a PR. I hope that&apos;s fine &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=granthenke&quot; class=&quot;user-hover&quot; rel=&quot;granthenke&quot;&gt;granthenke&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16508031" author="rsivaram" created="Mon, 11 Jun 2018 13:17:40 +0000"  >&lt;p&gt;Since there has been no activity on this for several months, moving this out to 2.1.0.&lt;/p&gt;</comment>
                            <comment id="16770591" author="mjsax" created="Sun, 17 Feb 2019 19:16:13 +0000"  >&lt;p&gt;Moving all major/minor/trivial tickets that are not merged yet out of 2.2 release.&lt;/p&gt;</comment>
                            <comment id="17026227" author="githubbot" created="Wed, 29 Jan 2020 21:03:40 +0000"  >&lt;p&gt;guozhangwang commented on pull request #4154: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4203&quot; title=&quot;Java producer default max message size does not align with broker default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4203&quot;&gt;&lt;del&gt;KAFKA-4203&lt;/del&gt;&lt;/a&gt;: Align broker default for max.message.bytes with Java producer default&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/4154&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4154&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33x53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>guozhang</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>