<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:00:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4594] Annotate integration tests and provide gradle build targets to run subsets of tests</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4594</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;It&apos;s possible to annotate unit tests and control which ones run based on these annotations. Our tests have grown to take quite a long time because we&apos;ve added a lot of relatively expensive integration tests. Because these tests are all interleaved with the true unit tests and block things like checkstyle from running, we&apos;ve ended up with pretty bad turn around time on feedback on simple PR issues.&lt;/p&gt;

&lt;p&gt;We could make this a lot nicer, and encourage users to actually run some tests before submitting PRs with problems, by making it easier to get lightweight feedback based only on unit tests. We&apos;d want to annotate integration tests (which can probably mostly be accomplished by annotating just a few shared &lt;tt&gt;*TestHarness&lt;/tt&gt; classes and then setting up the build tasks and dependencies to run things in fast-fail, more user-friendly order. In particular, it&apos;d be nice to:&lt;/p&gt;

&lt;p&gt;a) Have gradle tasks that can run just the unit tests + checkstyle. This provides devs a &lt;b&gt;much&lt;/b&gt; faster way to get at least basic feedback about whether there are problems with their PR. PR Jenkins builds will also give much faster feedback (and avoid clogging up the Jenkins slaves with lots of unnecessary work that will ultimately just fail on a unit test anyway).&lt;br/&gt;
b) Have the order of tests be 1) build everything and run their unit tests, 2) run checkstyle against all components, then 3) run integration tests. This could help address one of the frustrating things about checkstyle tests today, which are put after all tests to avoid annoying failures during development, but also results in a lot of folks missing simple checkstyle issues before submitting PRs.&lt;/p&gt;

&lt;p&gt;The two obvious options I see for this are:&lt;/p&gt;

&lt;p&gt;1. In JUnit4 (which we currently use), use Categories. These seem to unfortunately still be under an experimental package. We pin to a specific version of JUnit, so this may not be a huge issue. But it does mean any future migration would be more painful as the annotations &amp;amp; integration with the test runner would need to change in the future.&lt;br/&gt;
2. Wait for JUnit5 with its built-in Tag support. This would be tied to making JDK8 the minimum supported Java version. Given current plans that would mean we couldn&apos;t do this until at least 0.11.0.0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13032173">KAFKA-4594</key>
            <summary>Annotate integration tests and provide gradle build targets to run subsets of tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="damianguy">Damian Guy</assignee>
                                    <reporter username="ewencp">Ewen Cheslack-Postava</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Thu, 5 Jan 2017 05:47:48 +0000</created>
                <updated>Tue, 21 Mar 2017 11:40:17 +0000</updated>
                            <resolved>Tue, 21 Mar 2017 11:39:13 +0000</resolved>
                                                    <fixVersion>0.11.0.0</fixVersion>
                                    <component>unit tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="15800944" author="ijuma" created="Thu, 5 Jan 2017 09:57:38 +0000"  >&lt;p&gt;If we go in the annotations direction, we should probably get rid of the `integration` and `unit` folders in the `core` project. Alternatively, we could keep the folder based approach and rely on that. I think I prefer the tag-based approach, particularly if we can tag superclasses/supertraits as you suggested.&lt;/p&gt;</comment>
                            <comment id="15927957" author="damianguy" created="Thu, 16 Mar 2017 12:53:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=manasvigupta&quot; class=&quot;user-hover&quot; rel=&quot;manasvigupta&quot;&gt;manasvigupta&lt;/a&gt;&lt;br/&gt;
Sorry, i&apos;ve already begun work on a duplicate of this ticket: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4909&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-4909&lt;/a&gt;. I&apos;m going to reassign to me. &lt;br/&gt;
I apologize&lt;/p&gt;</comment>
                            <comment id="15928186" author="githubbot" created="Thu, 16 Mar 2017 14:42:06 +0000"  >&lt;p&gt;GitHub user dguy opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2695&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2695&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4594&quot; title=&quot;Annotate integration tests and provide gradle build targets to run subsets of tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4594&quot;&gt;&lt;del&gt;KAFKA-4594&lt;/del&gt;&lt;/a&gt;: Annotate integration tests and provide gradle build targets to run subsets of tests&lt;/p&gt;

&lt;p&gt;    This uses junit Categories to identify integration tests. Adds 2 new build targets: `integrationTest` and `testAll`. The `test` target will just run the unit tests&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dguy/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dguy/kafka&lt;/a&gt; junit-categories&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2695.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2695.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2695&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="15934392" author="githubbot" created="Tue, 21 Mar 2017 10:14:37 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2695&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2695&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15934509" author="ijuma" created="Tue, 21 Mar 2017 11:40:17 +0000"  >&lt;p&gt;I&apos;ll update the Jenkins PR jobs to use the introduced `jenkins.sh` script in a week or so to reduce the number of in-flight PRs that would require an immediate rebase/merge of/from trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13056636">KAFKA-4909</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38agn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>