<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:54:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3692] Wildcards in External CLASSPATH may cause it not be included in the CLASSPATH</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3692</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Currently, we doesn&apos;t use double quote when using CLASSPATH in kafka-run-class.sh. This could potentially cause issues as spaces in external CLASSPATH may result in the CLASSPATH to be incorrectly interpreted. As we perform a check on whether CLASSPATH is provided to determine the initial value of  CLASSPATH, not using double quotes may cause the external CLASSPATH not be included in the final CLASSPATH. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12967233">KAFKA-3692</key>
            <summary>Wildcards in External CLASSPATH may cause it not be included in the CLASSPATH</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liquanpei">Liquan Pei</assignee>
                                    <reporter username="liquanpei">Liquan Pei</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 May 2016 23:05:50 +0000</created>
                <updated>Fri, 18 Jan 2019 08:34:39 +0000</updated>
                            <resolved>Fri, 13 May 2016 11:11:21 +0000</resolved>
                                    <version>0.10.0.0</version>
                                    <fixVersion>0.10.0.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="15279351" author="granders" created="Wed, 11 May 2016 01:30:19 +0000"  >&lt;p&gt;I came across this bug, but it took me some time to understand what was going on.&lt;/p&gt;

&lt;p&gt;In summary, the problem manifests itself this way: if CLASSPATH is defined externally, but contains multiple paths with wildcards (i.e. &quot;*&quot;), the kafka-run-class.sh script will clobber CLASSPATH within the scope of the script. This is problematic if you&apos;re for example running your own connector. The cause seems to be the interaction of nullglob, and our lack of use of quotes when using bash variables.&lt;/p&gt;

&lt;p&gt;The issue came up when trying to run connectors in tests, and I had something like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;export CLASSPATH=$(echo /opt/schema-registry/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-kafka-serde-tools/target/kafka-serde-tools-&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-*-development/share/java/kafka-serde-tools/)*:$(echo /opt/kafka-connect-jdbc/target/kafka-connect-jdbc-*-development/share/java/kafka-connect-jdbc/)*:/opt/mysql-jdbc/*:$(echo /opt/kafka-connect-hdfs/target/kafka-connect-hdfs-*-development/share/java/kafka-connect-hdfs/)*; export KAFKA_LOG4J_OPTS=&lt;span class=&quot;code-quote&quot;&gt;&quot;-Dlog4j.configuration=file:/mnt/connect/connect-log4j.properties&quot;&lt;/span&gt;; export KAFKA_OPTS=; /opt/kafka-trunk/bin/connect-standalone.sh /mnt/connect/connect.properties /mnt/connect/connect-connector-0.properties
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The offending code is in kafka-run-class.sh is here:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;shopt -s nullglob
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; dir in &lt;span class=&quot;code-quote&quot;&gt;&quot;$base_dir&quot;&lt;/span&gt;/core/build/dependant-libs-${SCALA_VERSION}*;
&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ -z $CLASSPATH ] ; then
    CLASSPATH=&lt;span class=&quot;code-quote&quot;&gt;&quot;$dir&quot;&lt;/span&gt;/*
  &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
    CLASSPATH=&lt;span class=&quot;code-quote&quot;&gt;&quot;$CLASSPATH&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;$dir&quot;&lt;/span&gt;/*
  fi
done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So what does bash do when nullglob is turned on?&lt;br/&gt;
If nullglob is turned on, a sequence of characters that does not expand to a valid path, it will evaluate that string as empty.&lt;br/&gt;
E.g. p1/&lt;b&gt;:p2/&lt;/b&gt; -&amp;gt; &quot;&quot;  (p1/&lt;b&gt;:p2/&lt;/b&gt; may be a valid CLASSPATH, but bash doesn&apos;t know this and tries to match the entire expression as a path)&lt;/p&gt;

&lt;p&gt;If I have nullglob turned off, this same sequence of characters just evaluates as-is&lt;br/&gt;
E.g. p1/&lt;b&gt;:p2/&lt;/b&gt; -&amp;gt; p1/&lt;b&gt;:p2/&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;In the code block testing emptiness of CLASSPATH, we do if [ -z $CLASSPATH ]&lt;br/&gt;
Unfortunately, because the variable is not quoted, if CLASSPATH looks something like p1/&lt;b&gt;:p2/&lt;/b&gt;, then nullglob kicks in, $CLASSPATH evaluates as empty, and we clobber CLASSPATH.&lt;/p&gt;
</comment>
                            <comment id="15279354" author="granders" created="Wed, 11 May 2016 01:33:52 +0000"  >&lt;p&gt;To clarify, the previous comment should read&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;p1/*:p2/*
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Anywhere you see p1 and p2&lt;br/&gt;
(JIRA translated some of these to bold styling)&lt;/p&gt;</comment>
                            <comment id="15280295" author="granthenke" created="Wed, 11 May 2016 15:38:14 +0000"  >&lt;p&gt;Linked &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1508&quot; title=&quot;Scripts Break When Path Has Spaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1508&quot;&gt;KAFKA-1508&lt;/a&gt; since this patch would likely fix that issue too. &lt;/p&gt;</comment>
                            <comment id="15280318" author="ijuma" created="Wed, 11 May 2016 15:53:18 +0000"  >&lt;p&gt;Good point &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=granthenke&quot; class=&quot;user-hover&quot; rel=&quot;granthenke&quot;&gt;granthenke&lt;/a&gt;. That issue also mentions the `.bat` files though.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12723481">KAFKA-1508</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13210325">KAFKA-7839</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xjjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>ijuma</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>