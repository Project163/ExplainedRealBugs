<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:22:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-9308] Misses SAN after certificate creation</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-9308</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I followed the documentation to use kafka with ssl, however the entire &apos;procedure&apos; loses at the end the specified SAN.&lt;/p&gt;

&lt;p&gt;To test, run (after the first keytool command and after the latest):&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
keytool -list -v -keystore server.keystore.jks
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Reference:&lt;br/&gt;
 &lt;a href=&quot;http://kafka.apache.org/documentation.html#security_ssl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://kafka.apache.org/documentation.html#security_ssl&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#!/bin/bash
#Step 1
keytool -keystore server.keystore.jks -alias localhost -validity 365 -keyalg RSA -genkey&#160;-ext SAN=DNS:test.test.com
#Step 2
openssl req -&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; -x509 -keyout ca-key -out ca-cert -days 365
keytool -keystore server.truststore.jks -alias CARoot -&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; -file ca-cert
keytool -keystore client.truststore.jks -alias CARoot -&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; -file ca-cert
#Step 3
keytool -keystore server.keystore.jks -alias localhost -certreq -file cert-file 
openssl x509 -req -CA ca-cert -CAkey ca-key -in cert-file -out cert-signed -days 365 -CAcreateserial -passin pass:test1234 
keytool -keystore server.keystore.jks -alias CARoot -&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; -file ca-cert 
keytool -keystore server.keystore.jks -alias localhost -&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; -file cert-signed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In the detail, the SAN is losed after:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
keytool -keystore server.keystore.jks -alias localhost -&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; -file cert-signed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13274981">KAFKA-9308</key>
            <summary>Misses SAN after certificate creation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sliebau">S&#246;nke Liebau</assignee>
                                    <reporter username="ago">Agostino Sarubbo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Dec 2019 12:23:06 +0000</created>
                <updated>Tue, 25 Feb 2020 16:25:42 +0000</updated>
                            <resolved>Tue, 25 Feb 2020 16:25:42 +0000</resolved>
                                    <version>2.3.1</version>
                                    <fixVersion>2.6.0</fixVersion>
                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16998337" author="sliebau" created="Tue, 17 Dec 2019 15:41:31 +0000"  >&lt;p&gt;I believe this is due to the fact that the x509 module of openssl only adds extensions to signed certificates that are passed via the -extfile parameter. Any extensions that are requested in the CSR are ignored.&lt;br/&gt;
For this to work you&apos;d need to create a proper CA with signing profiles like shown here: &lt;a href=&quot;https://stackoverflow.com/a/21340898/7183757&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/21340898/7183757&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Might make sense to update the docs for this.&lt;/p&gt;</comment>
                            <comment id="16998932" author="ago" created="Wed, 18 Dec 2019 08:31:15 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;the main purpose of this bug, as you said, was to update the documentation.&lt;br/&gt;
Anyway I fixed by myself (now the certificate shows the SAN) but I&apos;m unable to connect without &apos;ssl.endpoint.identification.algorithm=&apos; because of failed handshake. Do I need to open another bug for that?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17014989" author="sliebau" created="Tue, 14 Jan 2020 10:11:35 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ago&quot; class=&quot;user-hover&quot; rel=&quot;ago&quot;&gt;ago&lt;/a&gt;, thanks for the update. Would you be interested in creating a pull request to update the documentation?&lt;/p&gt;

&lt;p&gt;Regarding your second question, that is a bit hard to diagnose without further detail, does it give any reason why the handshake failed?&lt;/p&gt;</comment>
                            <comment id="17014994" author="ago" created="Tue, 14 Jan 2020 10:25:25 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;it happens the same as described in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7450&quot; title=&quot;&amp;quot;Handshake message sequence violation&amp;quot; related ssl handshake failure leads to high cpu usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7450&quot;&gt;KAFKA-7450&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It works for me without&#160;ssl.client.auth=required&lt;/p&gt;</comment>
                            <comment id="17025096" author="githubbot" created="Tue, 28 Jan 2020 13:06:28 +0000"  >&lt;p&gt;soenkeliebau commented on pull request #8009: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9308&quot; title=&quot;Misses SAN after certificate creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9308&quot;&gt;&lt;del&gt;KAFKA-9308&lt;/del&gt;&lt;/a&gt;: Reworded the ssl part of the security documentation &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/8009&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8009&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This is to fix various issues (mainly as noted by this jira, the problem that SAN extension values are not copied to certificates) and add some recommendations.&lt;/p&gt;

&lt;p&gt;   Build the page and reviewed it, used Intellij HTML syntax checker to ensure valid HTML syntax.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09r74:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>