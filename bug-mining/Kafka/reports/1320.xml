<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:58:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4603] the argument of shell in doc wrong and command parsed error</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4603</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>
&lt;p&gt;according to the 7.6.2 Migrating clusters of document :&lt;/p&gt;

&lt;p&gt;./zookeeper-security-migration.sh --zookeeper.acl=secure --zookeeper.connection=localhost:2181&lt;br/&gt;
joptsimple.OptionArgumentConversionException: Cannot parse argument &apos;localhost:2181&apos; of option zookeeper.connection.timeout&lt;br/&gt;
	at joptsimple.AbstractOptionSpec.convertWith(AbstractOptionSpec.java:93)&lt;br/&gt;
	at joptsimple.ArgumentAcceptingOptionSpec.convert(ArgumentAcceptingOptionSpec.java:274)&lt;br/&gt;
	at joptsimple.OptionSet.valuesOf(OptionSet.java:223)&lt;br/&gt;
	at joptsimple.OptionSet.valueOf(OptionSet.java:172)&lt;br/&gt;
	at kafka.admin.ZkSecurityMigrator$.run(ZkSecurityMigrator.scala:111)&lt;br/&gt;
	at kafka.admin.ZkSecurityMigrator$.main(ZkSecurityMigrator.scala:119)&lt;br/&gt;
	at kafka.admin.ZkSecurityMigrator.main(ZkSecurityMigrator.scala)&lt;br/&gt;
Caused by: joptsimple.internal.ReflectionException: java.lang.NumberFormatException: For input string: &quot;localhost:2181&quot;&lt;br/&gt;
	at joptsimple.internal.Reflection.reflectionException(Reflection.java:140)&lt;br/&gt;
	at joptsimple.internal.Reflection.invoke(Reflection.java:122)&lt;br/&gt;
	at joptsimple.internal.MethodInvokingValueConverter.convert(MethodInvokingValueConverter.java:48)&lt;br/&gt;
	at joptsimple.internal.Reflection.convertWith(Reflection.java:128)&lt;br/&gt;
	at joptsimple.AbstractOptionSpec.convertWith(AbstractOptionSpec.java:90)&lt;br/&gt;
	... 6 more&lt;br/&gt;
Caused by: java.lang.NumberFormatException: For input string: &quot;localhost:2181&quot;&lt;br/&gt;
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)&lt;br/&gt;
	at java.lang.Integer.parseInt(Integer.java:492)&lt;br/&gt;
	at java.lang.Integer.valueOf(Integer.java:582)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
	at joptsimple.internal.Reflection.invoke(Reflection.java:119)&lt;br/&gt;
	... 9 more&lt;/p&gt;



&lt;p&gt;===&amp;gt;the argument  &quot;zookeeper.connection&quot; has been parsed to &quot;zookeeper.connection.timeout&quot;&lt;/p&gt;

&lt;p&gt;using help i found that  the argument  is :&lt;br/&gt;
--zookeeper.connect                    Sets the ZooKeeper connect string     &lt;br/&gt;
                                         (ensemble). This parameter takes a  &lt;br/&gt;
                                         comma-separated list of host:port   &lt;br/&gt;
                                         pairs. (default: localhost:2181)    &lt;br/&gt;
--zookeeper.connection.timeout         Sets the ZooKeeper connection timeout.&lt;/p&gt;

&lt;p&gt;the document describe wrong, and the code also has something wrong:&lt;/p&gt;

&lt;p&gt; in ZkSecurityMigrator.scala,&lt;br/&gt;
  val parser = new OptionParse()==&amp;gt;&lt;/p&gt;

&lt;p&gt;Any of --v, --ve, ... are accepted on the command line and treated as though you had typed --verbose.&lt;/p&gt;

&lt;p&gt;To suppress this behavior, use the OptionParser constructor OptionParser(boolean allowAbbreviations) and pass a value of false.&lt;/p&gt;</description>
                <environment>suse</environment>
        <key id="13032451">KAFKA-4603</key>
            <summary>the argument of shell in doc wrong and command parsed error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="auroraxlh">Xin</assignee>
                                    <reporter username="auroraxlh">Xin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jan 2017 02:57:42 +0000</created>
                <updated>Tue, 30 May 2017 20:55:00 +0000</updated>
                            <resolved>Tue, 30 May 2017 20:54:02 +0000</resolved>
                                    <version>0.10.0.1</version>
                    <version>0.10.2.0</version>
                                    <fixVersion>0.11.0.0</fixVersion>
                                    <component>admin</component>
                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15803345" author="auroraxlh" created="Fri, 6 Jan 2017 03:05:39 +0000"  >&lt;p&gt;I think  that  new OptionParser() not suitable for kafka&lt;br/&gt;
command in kafka has many similar  prefixion&lt;/p&gt;

&lt;p&gt;this may lead to command parse error&lt;/p&gt;

&lt;p&gt;To suppress this behavior, use the OptionParser constructor OptionParser(boolean allowAbbreviations) and pass a value of false.&lt;/p&gt;</comment>
                            <comment id="15803353" author="auroraxlh" created="Fri, 6 Jan 2017 03:08:09 +0000"  >&lt;p&gt; Changed  OptionParser constructor, &lt;br/&gt;
ZkSecurityMigrator.scala:&lt;/p&gt;

&lt;p&gt;var jaasFile = System.getProperty(JaasUtils.JAVA_LOGIN_CONFIG_PARAM)&lt;br/&gt;
val parser = new OptionParser(false)&lt;/p&gt;


&lt;p&gt;I got the result:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;./zookeeper-security-migration.sh --zookeeper.acl=secure --zookeeper.connection=localhost:2181&lt;br/&gt;
Picked up JAVA_TOOL_OPTIONS: -Xmx8g&lt;br/&gt;
joptsimple.UnrecognizedOptionException: zookeeper.connection is not a recognized option&lt;br/&gt;
	at joptsimple.OptionException.unrecognizedOption(OptionException.java:108)&lt;br/&gt;
	at joptsimple.OptionParser.handleLongOptionToken(OptionParser.java:510)&lt;br/&gt;
	at joptsimple.OptionParserState$2.handleArgument(OptionParserState.java:56)&lt;br/&gt;
	at joptsimple.OptionParser.parse(OptionParser.java:396)&lt;br/&gt;
	at kafka.admin.ZkSecurityMigrator$.run(ZkSecurityMigrator.scala:80)&lt;br/&gt;
	at kafka.admin.ZkSecurityMigrator$.main(ZkSecurityMigrator.scala:117)&lt;br/&gt;
	at kafka.admin.ZkSecurityMigrator.main(ZkSecurityMigrator.scala)&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15803365" author="auroraxlh" created="Fri, 6 Jan 2017 03:15:03 +0000"  >&lt;p&gt;In Kafka, all  the  OptionParser constructor  has no allowAbbreviations argument &lt;br/&gt;
I tried some other cmd, found that they also like zookeeper-security-migration.sh, prefixion  of argument are accepted&lt;/p&gt;</comment>
                            <comment id="15803933" author="huxi_2b" created="Fri, 6 Jan 2017 08:09:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=auroraxlh&quot; class=&quot;user-hover&quot; rel=&quot;auroraxlh&quot;&gt;auroraxlh&lt;/a&gt; If you exactly type &apos;--zookeeper.connect&apos; the command could run successfully? And it gets failed should you get some typos. Correct? &lt;/p&gt;</comment>
                            <comment id="15804144" author="githubbot" created="Fri, 6 Jan 2017 09:48:37 +0000"  >&lt;p&gt;GitHub user auroraxlh opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2322&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2322&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4603&quot; title=&quot;the argument of shell in doc wrong and command parsed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4603&quot;&gt;&lt;del&gt;KAFKA-4603&lt;/del&gt;&lt;/a&gt; argument error,and command parsed error&lt;/p&gt;

&lt;p&gt;    Signed-off-by: auroraxlh &amp;lt;xin.lihua1@zte.com.cn&amp;gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/auroraxlh/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/auroraxlh/kafka&lt;/a&gt; my-issue&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2322.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2322.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2322&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 69943067fe0c4addc7e8685c0ed1a6cc08d622ed&lt;br/&gt;
Author: auroraxlh &amp;lt;xin.lihua1@zte.com.cn&amp;gt;&lt;br/&gt;
Date:   2017-01-06T09:46:30Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4603&quot; title=&quot;the argument of shell in doc wrong and command parsed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4603&quot;&gt;&lt;del&gt;KAFKA-4603&lt;/del&gt;&lt;/a&gt; argument error,and command parsed error&lt;/p&gt;

&lt;p&gt;    Signed-off-by: auroraxlh &amp;lt;xin.lihua1@zte.com.cn&amp;gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15804172" author="auroraxlh" created="Fri, 6 Jan 2017 10:01:46 +0000"  >&lt;p&gt; ./zookeeper-security-migration.sh --zookeeper.acl=secure --zookeeper.connect=dap121-183:2181/kafka &lt;br/&gt;
run successfully&lt;/p&gt;</comment>
                            <comment id="15820676" author="githubbot" created="Thu, 12 Jan 2017 10:25:38 +0000"  >&lt;p&gt;GitHub user auroraxlh opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2349&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2349&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4603&quot; title=&quot;the argument of shell in doc wrong and command parsed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4603&quot;&gt;&lt;del&gt;KAFKA-4603&lt;/del&gt;&lt;/a&gt; Command parsed error, change all OptionParser constructor &lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4603&quot; title=&quot;the argument of shell in doc wrong and command parsed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4603&quot;&gt;&lt;del&gt;KAFKA-4603&lt;/del&gt;&lt;/a&gt; the command parsed error&lt;br/&gt;
    Using &quot;new OptionParser&quot; might result in parse error&lt;/p&gt;

&lt;p&gt;    Change all the OptionParser constructor in Kafka into &quot;new OptionParser(false)&quot;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/auroraxlh/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/auroraxlh/kafka&lt;/a&gt; fix_OptionParser_bug&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2349.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2349.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2349&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 749fa3786f1b283409462698856369f20793ef57&lt;br/&gt;
Author: auroraxlh &amp;lt;xin.lihua1@zte.com.cn&amp;gt;&lt;br/&gt;
Date:   2017-01-12T09:35:23Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4603&quot; title=&quot;the argument of shell in doc wrong and command parsed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4603&quot;&gt;&lt;del&gt;KAFKA-4603&lt;/del&gt;&lt;/a&gt; the command parsed error&lt;/p&gt;

&lt;p&gt;    Using &quot;new OptionParser&quot; might result in parse error&lt;/p&gt;

&lt;p&gt;Change all the OptionParser constructor in Kafka into &quot;new OptionParser(false)&quot;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16017046" author="auroraxlh" created="Fri, 19 May 2017 08:15:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ewencp&quot; class=&quot;user-hover&quot; rel=&quot;ewencp&quot;&gt;ewencp&lt;/a&gt; can you take a look at this issue?&lt;/p&gt;</comment>
                            <comment id="16030105" author="guozhang" created="Tue, 30 May 2017 20:54:02 +0000"  >&lt;p&gt;Issue resolved by pull request 2349&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2349&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2349&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16030106" author="githubbot" created="Tue, 30 May 2017 20:55:00 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2349&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2349&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38c6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>