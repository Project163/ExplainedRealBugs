<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:34:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-15473] Connect connector-plugins endpoint shows duplicate plugins</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-15473</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In &amp;lt;3.6.0-rc0, duplicates of a plugin would be shown if it subclassed multiple interfaces. For example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  {
    &quot;class&quot;: &quot;org.apache.kafka.connect.storage.StringConverter&quot;,
    &quot;type&quot;: &quot;converter&quot;
  },
  { 
    &quot;class&quot;: &quot;org.apache.kafka.connect.storage.StringConverter&quot;,
    &quot;type&quot;: &quot;converter&quot;
  },&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In 3.6.0-rc0, there are many more listings for the same plugin. For example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&#160; {
&#160; &#160; &quot;class&quot;: &quot;org.apache.kafka.connect.storage.StringConverter&quot;,
&#160; &#160; &quot;type&quot;: &quot;converter&quot;
&#160; },
&#160; {
&#160; &#160; &quot;class&quot;: &quot;org.apache.kafka.connect.storage.StringConverter&quot;,
&#160; &#160; &quot;type&quot;: &quot;converter&quot;
&#160; },
&#160; {
&#160; &#160; &quot;class&quot;: &quot;org.apache.kafka.connect.storage.StringConverter&quot;,
&#160; &#160; &quot;type&quot;: &quot;converter&quot;
&#160; },
&#160; {
&#160; &#160; &quot;class&quot;: &quot;org.apache.kafka.connect.storage.StringConverter&quot;,
&#160; &#160; &quot;type&quot;: &quot;converter&quot;
&#160; },
&#160; {
&#160; &#160; &quot;class&quot;: &quot;org.apache.kafka.connect.storage.StringConverter&quot;,
&#160; &#160; &quot;type&quot;: &quot;converter&quot;
&#160; },
&#160; {
&#160; &#160; &quot;class&quot;: &quot;org.apache.kafka.connect.storage.StringConverter&quot;,
&#160; &#160; &quot;type&quot;: &quot;converter&quot;,
&#160; &#160; &quot;version&quot;: &quot;3.6.0&quot;
&#160; },&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;These duplicates appear to happen when a plugin with the same class name appears in multiple locations/classloaders.&lt;br/&gt;
When interpreting a connector configuration, only one of these plugins will be chosen, so only one is relevant to show to users. The REST API should only display the plugins which are eligible to be loaded, and hide the duplicates.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13551131">KAFKA-15473</key>
            <summary>Connect connector-plugins endpoint shows duplicate plugins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gharris1727">Greg Harris</assignee>
                                    <reporter username="gharris1727">Greg Harris</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Sep 2023 18:48:40 +0000</created>
                <updated>Tue, 19 Sep 2023 16:58:53 +0000</updated>
                            <resolved>Tue, 19 Sep 2023 16:37:45 +0000</resolved>
                                    <version>3.6.0</version>
                                    <fixVersion>3.6.0</fixVersion>
                    <fixVersion>3.7.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17766578" author="gharris1727" created="Mon, 18 Sep 2023 20:42:09 +0000"  >&lt;p&gt;it appears that the bug which prompted the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-15244&quot; title=&quot;Connect PluginType.from(Class) result is incorrect when subclassing multiple plugin interfaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-15244&quot;&gt;&lt;del&gt;KAFKA-15244&lt;/del&gt;&lt;/a&gt; (wrong PluginType being inferred) also could cause duplicates. For example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&#160; {
&#160; &#160; &quot;class&quot;: &quot;org.apache.kafka.connect.storage.StringConverter&quot;,
&#160; &#160; &quot;type&quot;: &quot;converter&quot;
&#160; },
&#160; {
&#160; &#160; &quot;class&quot;: &quot;org.apache.kafka.connect.storage.StringConverter&quot;,
&#160; &#160; &quot;type&quot;: &quot;converter&quot;
&#160; },&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here, the second entry should have been &quot;header_converter&quot;. So while there are more duplicates in 3.6.0-rc0 than there were in &amp;lt;3.6.0-rc0, the presence of duplicates is not new. We wouldn&apos;t be breaking any third-party clients, because they would already have to handle these duplicates.&lt;/p&gt;</comment>
                            <comment id="17766592" author="gharris1727" created="Mon, 18 Sep 2023 21:24:14 +0000"  >&lt;p&gt;Plugins could also appear multiple times &amp;lt;3.6.0-rc0 if multiple versions were on the plugin path concurrently. The DelegatingClassLoader would prefer the one with the latest version, but all of the different versions would be visible in the REST API.&lt;br/&gt;
It also treated the undefined version as distinct from defined versions. Since 3.6.0 is also the first version with &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-15291&quot; title=&quot;Implement Versioned interfaces in common Connect plugins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-15291&quot;&gt;&lt;del&gt;KAFKA-15291&lt;/del&gt;&lt;/a&gt; and there are some public plugins which package the AK transforms, there are now going to be both un-versioned and versioned copies of the transforms classes.&lt;/p&gt;

&lt;p&gt;I think there are multiple ways to address this:&lt;br/&gt;
1. Show the source location of the plugins in the REST API to distinguish between apparently equivalent entries&lt;br/&gt;
2. Use the DelegatingClassLoader logic for choosing among multiple similarly-named plugins to only show the entry which the DelegatingClassLoader would use&lt;br/&gt;
3. Deduplicate the PluginInfos to avoid obvious repetition, but allow multiple versions to still be shown.&lt;/p&gt;

&lt;p&gt;(1) would require a KIP, and might be scope creep for the REST API. Theoretically the API client shouldn&apos;t care about the on-disk layout of plugins.&lt;br/&gt;
(2) hides the duplicates introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-15244&quot; title=&quot;Connect PluginType.from(Class) result is incorrect when subclassing multiple plugin interfaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-15244&quot;&gt;&lt;del&gt;KAFKA-15244&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-15291&quot; title=&quot;Implement Versioned interfaces in common Connect plugins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-15291&quot;&gt;&lt;del&gt;KAFKA-15291&lt;/del&gt;&lt;/a&gt;, but also hides all but the latest version of each plugin. If someone has multiple versions of a plugin installed, they can currently diagnose that via REST API. After implementing solution (2), they would need to look at the worker logs.&lt;br/&gt;
(3) hides the duplicates introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-15244&quot; title=&quot;Connect PluginType.from(Class) result is incorrect when subclassing multiple plugin interfaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-15244&quot;&gt;&lt;del&gt;KAFKA-15244&lt;/del&gt;&lt;/a&gt;, but leaves the duplicates introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-15291&quot; title=&quot;Implement Versioned interfaces in common Connect plugins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-15291&quot;&gt;&lt;del&gt;KAFKA-15291&lt;/del&gt;&lt;/a&gt;, and allows users to diagnose when multiple versions are installed.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure which of these to implement. In &amp;lt;3.6.0-rc0 it was not possible to diagnose installations with multiple copies of the same plugin when they had the same (or undefined) version, and in 3.6.0-rc0 that is now possible. If we implement solution (2) or (3), we would take away that capability.&lt;br/&gt;
We might just be able to leave this as-is, and try to implement some form of solution (1) to make these duplicates more descriptive.&lt;/p&gt;</comment>
                            <comment id="17766595" author="gharris1727" created="Mon, 18 Sep 2023 21:53:11 +0000"  >&lt;p&gt;I&apos;ve opened &lt;a href=&quot;https://github.com/apache/kafka/pull/14398&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/14398&lt;/a&gt; with strategy (3) from above. We can always implement (1) in the future and change the PluginInfo::equals implementation to show these duplicates, so we can hide them for now. I think (2) removes functionality from the API and would count as a regression itself.&lt;/p&gt;</comment>
                            <comment id="17766718" author="satish.duggana" created="Tue, 19 Sep 2023 09:39:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gharris1727&quot; class=&quot;user-hover&quot; rel=&quot;gharris1727&quot;&gt;gharris1727&lt;/a&gt;&lt;br/&gt;
Is this API documented that it does not return duplicate entries?&lt;/p&gt;

&lt;p&gt;Can we also get an opinion from PMC/Committers and other KafkaConnect&lt;br/&gt;
experts on whether this issue is a release blocker?&lt;/p&gt;

&lt;p&gt;If we agree that it is not a release blocker then we can have a&lt;br/&gt;
release note clarifying this behaviour and add a reference to the JIRA&lt;br/&gt;
that follows up on the possible solutions.&lt;/p&gt;</comment>
                            <comment id="17766738" author="sagarrao" created="Tue, 19 Sep 2023 10:33:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=satish.duggana&quot; class=&quot;user-hover&quot; rel=&quot;satish.duggana&quot;&gt;satish.duggana&lt;/a&gt;, No the API documentation doesn&apos;t mention anything about the presence/absence of duplicate entries. This is what it says:&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;GET /connector-plugins- return a list of connector plugins installed in the Kafka Connect cluster. Note that the API only checks for connectors on the worker that handles the request, which means you may see inconsistent results, especially during a rolling upgrade if you add new connector jars
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;I think the implicit assumption is that these would always return unique values but as Greg pointed out above, even pre-3.6 there could be cases in which this end point can return duplicate entries. Keeping that in mind, IMO this needn&apos;t be a release blocker and we can document it as you suggested. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13544728">KAFKA-15244</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1kfqg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>