<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:28:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-12777] AutoTopicCreationManager does not handle response errors</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-12777</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The request completion callback in AutoTopicCreationManager assumes the response is present. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-scala&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; onComplete(response: ClientResponse): Unit = {
        debug(s&lt;span class=&quot;code-quote&quot;&gt;&quot;Auto topic creation completed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ${creatableTopics.keys} &lt;span class=&quot;code-keyword&quot;&gt;with&lt;/span&gt; response ${response.responseBody.toString}.&quot;&lt;/span&gt;)
        clearInflightRequests(creatableTopics)
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We should at least check to see if the response exists before logging it and clearing the in-flight flag. &lt;/p&gt;

&lt;p&gt;This was found while debugging a separate issue. Here is a log snippet:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2021-05-13 11:21:03,890] DEBUG [BrokerToControllerChannelManager broker=1 name=forwarding] Version mismatch when attempting to send EnvelopeRequestData(requestData=java.nio.HeapByteBuffer[pos=0 lim=43 cap=43], requestPrincipal=[0, 0, 5, 85, 115, 101, 114, 10, 65, 78, 79, 78, 89, 77, 79, 85, 83, 0, 0], clientHostAddress=[127, 0, 0, 1]) with correlation id 2 to 0 (org.apache.kafka.clients.NetworkClient:495)
org.apache.kafka.common.errors.UnsupportedVersionException: The broker does not support ENVELOPE
[2021-05-13 11:21:03,893] ERROR [BrokerToControllerChannelManager broker=1 name=forwarding]: Request EnvelopeRequestData(requestData=java.nio.HeapByteBuffer[pos=0 lim=43 cap=43], requestPrincipal=[0, 0, 5, 85, 115, 101, 114, 10, 65, 78, 79, 78, 89, 77, 79, 85, 83, 0, 0], clientHostAddress=[127, 0, 0, 1]) failed due to unsupported version error (kafka.server.BrokerToControllerRequestThread:76)
org.apache.kafka.common.errors.UnsupportedVersionException: The broker does not support ENVELOPE
[2021-05-13 11:21:03,894] ERROR [BrokerToControllerChannelManager broker=1 name=forwarding] Uncaught error in request completion: (org.apache.kafka.clients.NetworkClient:576)
java.lang.NullPointerException
	at kafka.server.DefaultAutoTopicCreationManager$$anon$1.$anonfun$onComplete$1(AutoTopicCreationManager.scala:179)
	at kafka.utils.Logging.debug(Logging.scala:62)
	at kafka.utils.Logging.debug$(Logging.scala:62)
	at kafka.server.DefaultAutoTopicCreationManager.debug(AutoTopicCreationManager.scala:67)
	at kafka.server.DefaultAutoTopicCreationManager$$anon$1.onComplete(AutoTopicCreationManager.scala:179)
	at kafka.server.BrokerToControllerRequestThread.handleResponse(BrokerToControllerChannelManager.scala:355)
	at kafka.server.BrokerToControllerRequestThread.$anonfun$generateRequests$1(BrokerToControllerChannelManager.scala:339)
	at org.apache.kafka.clients.ClientResponse.onComplete(ClientResponse.java:109)
	at org.apache.kafka.clients.NetworkClient.completeResponses(NetworkClient.java:574)
	at org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:545)
	at kafka.common.InterBrokerSendThread.pollOnce(InterBrokerSendThread.scala:74)
	at kafka.server.BrokerToControllerRequestThread.doWork(BrokerToControllerChannelManager.scala:374)
	at kafka.utils.ShutdownableThread.run(ShutdownableThread.scala:96)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I suspect the NPE is due to &lt;tt&gt;response.responseBody&lt;/tt&gt; being null.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13378328">KAFKA-12777</key>
            <summary>AutoTopicCreationManager does not handle response errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mumrah">David Arthur</assignee>
                                    <reporter username="mumrah">David Arthur</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 May 2021 15:29:40 +0000</created>
                <updated>Wed, 1 Jan 2025 03:42:49 +0000</updated>
                            <resolved>Fri, 16 Jul 2021 21:24:50 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17343949" author="ijuma" created="Thu, 13 May 2021 15:34:25 +0000"  >&lt;p&gt;Is this really &quot;minor&quot;?&lt;/p&gt;</comment>
                            <comment id="17343964" author="mumrah" created="Thu, 13 May 2021 15:53:46 +0000"  >&lt;p&gt;I think this is mostly cosmetic since the only time this bug would be seen is if something was misconfigured. E.g., authentication errors and apiVersion errors (like I&apos;m seeing). That said, NPEs are never good to see in production code. I&apos;ll change this to major&lt;/p&gt;</comment>
                            <comment id="17382357" author="cmccabe" created="Fri, 16 Jul 2021 21:24:50 +0000"  >&lt;p&gt;Committed #11069, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r0fs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>