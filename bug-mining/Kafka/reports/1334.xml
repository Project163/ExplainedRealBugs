<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:58:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4633] Always use regex pattern subscription to avoid auto create topics</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4633</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In &lt;tt&gt;KafkaConsumer&lt;/tt&gt;, a metadata update is requested whenever &lt;tt&gt;subscribe(List&amp;lt;String&amp;gt; topics ..)&lt;/tt&gt; is called. And when such a metadata request is sent to the broker upon the first &lt;tt&gt;poll&lt;/tt&gt; call, it will cause the broker to auto-create any topics that do not exist if the broker-side config &lt;tt&gt;topic.auto.create&lt;/tt&gt; is turned on.&lt;/p&gt;

&lt;p&gt;In order to work around this issue until the config is default to false and gradually be deprecated, we will let Streams to always use the other &lt;tt&gt;subscribe&lt;/tt&gt; function with regex pattern, which will send the metadata request with empty topic list and hence won&apos;t trigger broker-side auto topic creation.&lt;/p&gt;

&lt;p&gt;The side-effect is that the metadata response will be larger, since it contains all the topic infos; but since we only refresh it infrequently this will add negligible overhead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13034875">KAFKA-4633</key>
            <summary>Always use regex pattern subscription to avoid auto create topics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guozhang">Guozhang Wang</assignee>
                                    <reporter username="guozhang">Guozhang Wang</reporter>
                        <labels>
                            <label>architecture</label>
                    </labels>
                <created>Sat, 14 Jan 2017 00:53:13 +0000</created>
                <updated>Thu, 8 Jun 2017 07:37:29 +0000</updated>
                            <resolved>Mon, 23 Jan 2017 18:54:18 +0000</resolved>
                                                    <fixVersion>0.10.2.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15822839" author="githubbot" created="Sat, 14 Jan 2017 15:44:23 +0000"  >&lt;p&gt;GitHub user guozhangwang opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2379&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2379&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4633&quot; title=&quot;Always use regex pattern subscription to avoid auto create topics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4633&quot;&gt;&lt;del&gt;KAFKA-4633&lt;/del&gt;&lt;/a&gt;: Always using regex pattern subscription in StreamThread&lt;/p&gt;

&lt;p&gt;    1. In StreamThread, always use subscribe(Pattern, ..) function in order to avoid sending MetadataRequest with specific topic names and cause brokers to possibly auto-create subscribed topics; the pattern is generated as &quot;topic-1|topic-2..|topic-n&quot;.&lt;/p&gt;

&lt;p&gt;    2. Minor cleanup: changed String[] to List&amp;lt;String&amp;gt; to avoid overloaded functions.&lt;/p&gt;

&lt;p&gt;    3. Minor cleanup: augmented unit test error message and fixed a potential transient failure in KafkaStreamTest.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/guozhangwang/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/guozhangwang/kafka&lt;/a&gt; K4633-regex-pattern&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2379.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2379.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2379&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c571fd6fe33155ed355469997c5572b92ccdabab&lt;br/&gt;
Author: Guozhang Wang &amp;lt;wangguoz@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-01-14T08:17:37Z&lt;/p&gt;

&lt;p&gt;    enforce always using regex pattern subscription&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15835037" author="hachikuji" created="Mon, 23 Jan 2017 18:54:18 +0000"  >&lt;p&gt;Issue resolved by pull request 2379&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2379&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2379&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15835038" author="githubbot" created="Mon, 23 Jan 2017 18:54:39 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2379&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2379&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16040795" author="agomez" created="Wed, 7 Jun 2017 12:41:39 +0000"  >&lt;p&gt;Hi all,&lt;/p&gt;

&lt;p&gt;I have some question about this issue. With this change, the Kafka Streams app doesn&apos;t auto-create topics, so you need to create the topics before start running the APP. This is ok if you create the input/output topics, but when you use the &lt;b&gt;through&lt;/b&gt; method to do some repartition .. Do you need to create the topic before? Maybe this is a little strange, isn&apos;t?&lt;/p&gt;

&lt;p&gt;I have seen the &lt;b&gt;through&lt;/b&gt; method, and it works with &lt;b&gt;to(...)&lt;/b&gt; and &lt;b&gt;stream(...)&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; KStream&amp;lt;K, V&amp;gt; through(Serde&amp;lt;K&amp;gt; keySerde, Serde&amp;lt;V&amp;gt; valSerde, StreamPartitioner&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt; K, ? &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt; V&amp;gt; partitioner, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; topic) {
        to(keySerde, valSerde, partitioner, topic);

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; topology.stream(keySerde, valSerde, topic);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What do you think? Maybe this is a new issue or Is normal that you need to create the topic that later you use in the &lt;b&gt;through&lt;/b&gt; method?&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Andr&#233;s&lt;/p&gt;</comment>
                            <comment id="16041772" author="mjsax" created="Wed, 7 Jun 2017 22:19:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=agomez&quot; class=&quot;user-hover&quot; rel=&quot;agomez&quot;&gt;agomez&lt;/a&gt; It&apos;s by desing. All topic specified by name/patter in the DSL/PAPI are considered &quot;user topics&quot; and thus, user is responsible to create those (with appropriate configuration setting) before starting the Streams application. (cf. &lt;a href=&quot;http://docs.confluent.io/current/streams/developer-guide.html#managing-topics-of-a-kafka-streams-application&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.confluent.io/current/streams/developer-guide.html#managing-topics-of-a-kafka-streams-application&lt;/a&gt; &amp;#8211; we are still working on AK docs to get this content there, too). If you don&apos;t want to manage intermediate topics you can also rely on auto-repartitioning that was added in &lt;tt&gt;0.10.1&lt;/tt&gt;: for this, Streams does create the topics for you and thus, the topics are no longer considered &quot;user topics&quot; but &quot;internal topics&quot; (cf &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3561&quot; title=&quot;Auto create through topic for KStream aggregation and join&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3561&quot;&gt;&lt;del&gt;KAFKA-3561&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;http://docs.confluent.io/3.1.2/streams/upgrade-guide.html#auto-repartitioning&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.confluent.io/3.1.2/streams/upgrade-guide.html#auto-repartitioning&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="16042360" author="agomez" created="Thu, 8 Jun 2017 07:37:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; ok!! I understand, so I will use auto-repartitioning. Thanks a lot for the explanation.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38pcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>