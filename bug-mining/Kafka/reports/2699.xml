<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:24:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-9845] plugin.path property does not work with config provider</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-9845</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The config provider mechanism doesn&apos;t work if used for the &lt;tt&gt;plugin.path&lt;/tt&gt; property of a standalone or distributed Connect worker. This is because the &lt;tt&gt;Plugins&lt;/tt&gt; instance which performs plugin path scanning is created using the raw worker config, pre-transformation (see &lt;a href=&quot;https://github.com/apache/kafka/blob/371ad143a6bb973927c89c0788d048a17ebac91a/connect/runtime/src/main/java/org/apache/kafka/connect/cli/ConnectStandalone.java#L79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ConnectStandalone&lt;/a&gt;&#160;and &lt;a href=&quot;https://github.com/apache/kafka/blob/371ad143a6bb973927c89c0788d048a17ebac91a/connect/runtime/src/main/java/org/apache/kafka/connect/cli/ConnectDistributed.java#L91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ConnectDistributed&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Unfortunately, because config providers are loaded as plugins, there&apos;s a circular dependency issue here. The &lt;tt&gt;Plugins&lt;/tt&gt; instance needs to be created &lt;em&gt;before&lt;/em&gt; the &lt;tt&gt;DistributedConfig&lt;/tt&gt;/&lt;tt&gt;StandaloneConfig&lt;/tt&gt; is created in order for the config providers to be loaded correctly, and the config providers need to be loaded in order to perform their logic on any properties (including the &lt;tt&gt;plugin.path&lt;/tt&gt; property).&lt;/p&gt;

&lt;p&gt;There is no clear fix for this issue in the code base, and the only known workaround is to refrain from using config providers for the &lt;tt&gt;plugin.path&lt;/tt&gt; property.&lt;/p&gt;

&lt;p&gt;A couple improvements could potentially be made to improve the UX when this issue arises:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&#160;Alter the config logging performed by the &lt;tt&gt;DistributedConfig&lt;/tt&gt; and &lt;tt&gt;StandaloneConfig&lt;/tt&gt; classes to &lt;em&gt;always&lt;/em&gt; log the raw value for the &lt;tt&gt;plugin.path&lt;/tt&gt; property. Right now, the transformed value is logged even though it isn&apos;t used, which is likely to cause confusion.&lt;/li&gt;
	&lt;li&gt;Issue a &lt;tt&gt;WARN&lt;/tt&gt;- or even &lt;tt&gt;ERROR&lt;/tt&gt;-level log message when it&apos;s detected that the user is attempting to use config providers for the &lt;tt&gt;plugin.path&lt;/tt&gt; property, which states that config providers cannot be used for that specific property, instructs them to change the value for the property accordingly, and/or informs them of the actual value that the framework will use for that property when performing plugin path scanning.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;We should &lt;em&gt;not&lt;/em&gt; throw an error on startup if this condition is detected, as this could cause previously-functioning, benignly-misconfigured Connect workers to fail to start after an upgrade.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13297419">KAFKA-9845</key>
            <summary>plugin.path property does not work with config provider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ChrisEgerton">Chris Egerton</assignee>
                                    <reporter username="ChrisEgerton">Chris Egerton</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Apr 2020 15:31:11 +0000</created>
                <updated>Thu, 11 Jun 2020 05:07:18 +0000</updated>
                            <resolved>Thu, 11 Jun 2020 05:07:18 +0000</resolved>
                                    <version>2.3.0</version>
                    <version>2.3.1</version>
                    <version>2.4.0</version>
                    <version>2.4.1</version>
                    <version>2.5.0</version>
                                    <fixVersion>2.4.2</fixVersion>
                    <fixVersion>2.5.1</fixVersion>
                    <fixVersion>2.6.0</fixVersion>
                    <fixVersion>2.7.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17079495" author="githubbot" created="Thu, 9 Apr 2020 15:38:12 +0000"  >&lt;p&gt;C0urante commented on pull request #8455: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9845&quot; title=&quot;plugin.path property does not work with config provider&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9845&quot;&gt;&lt;del&gt;KAFKA-9845&lt;/del&gt;&lt;/a&gt;: Fix plugin.path when config provider is used&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/8455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8455&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;Jira&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9845&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-9845&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;   These changes cause the transformed worker configuration to be passed to the `Plugins` instance which performs plugin path scanning, instead of the raw (pre-transform) worker configuration.&lt;/p&gt;

&lt;p&gt;   This has the added benefit that worker configuration validation now takes place &lt;em&gt;before&lt;/em&gt; plugin path scanning, which in some environments can take a while.&lt;/p&gt;

&lt;p&gt;   No tests are added as the chance of regression is extremely small and the accuracy of the fix can be easily verified by reading the code changes and/or through local testing with a file-based config provider.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17079586" author="githubbot" created="Thu, 9 Apr 2020 17:25:25 +0000"  >&lt;p&gt;C0urante commented on pull request #8455: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9845&quot; title=&quot;plugin.path property does not work with config provider&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9845&quot;&gt;&lt;del&gt;KAFKA-9845&lt;/del&gt;&lt;/a&gt;: Fix plugin.path when config provider is used&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/8455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8455&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17080017" author="githubbot" created="Thu, 9 Apr 2020 21:50:26 +0000"  >&lt;p&gt;C0urante commented on pull request #8455: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9845&quot; title=&quot;plugin.path property does not work with config provider&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9845&quot;&gt;&lt;del&gt;KAFKA-9845&lt;/del&gt;&lt;/a&gt;: Warn users about using config providers with plugin.path property&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/8455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8455&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;Jira&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9845&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-9845&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;   These changes cause the transformed worker configuration to be passed to the `Plugins` instance which performs plugin path scanning, instead of the raw (pre-transform) worker configuration. This has the added benefit that worker configuration validation now takes place &lt;em&gt;before&lt;/em&gt; plugin path scanning, which in some environments can take a while.&lt;/p&gt;

&lt;p&gt;   Unfortunately, they may interfere with the loading of properties of type `CLASS` from the `WorkerConfig`. The changes will need to be revisited in order to address this circular dependency issue: `Plugins` needs to be instantiated and `compareAndSwapWithDelegatingLoader` invoked before creating the worker config since it loads classes when instantiated, and the config provider logic specified in the worker config needs to be performed on the `plugin.path` property before instantiating the `Plugins` instance. This is especially complicated by the fact that config providers are loaded as plugins.&lt;/p&gt;

&lt;p&gt;   No clear workaround is apparent at the moment that wouldn&apos;t involve a substantial rewrite, and the scope of the problem is limited enough that simply documenting it as a &quot;won&apos;t fix&quot; seems the best approach for now.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17132922" author="rhauch" created="Thu, 11 Jun 2020 05:07:18 +0000"  >&lt;p&gt;Merged to `trunk`, and backported to `2.6` (for upcoming 2.6.0), `2.5` (for upcoming 2.5.1), and `2.4` (for future 2.4.2).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0dgv4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>rhauch</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>