<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:33:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-15106] AbstractStickyAssignor may stuck in 3.5</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-15106</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;this could reproduce in ut easy,&lt;/p&gt;

&lt;p&gt;just int org.apache.kafka.clients.consumer.internals.AbstractStickyAssignorTest#testLargeAssignmentAndGroupWithNonEqualSubscription,&lt;/p&gt;

&lt;p&gt;plz set&#160;&lt;/p&gt;

&lt;p&gt;partitionCount=200,&#160;&lt;/p&gt;

&lt;p&gt;consumerCount=20,&#160; you can see&#160;&lt;/p&gt;

&lt;p&gt;isBalanced will return false forever.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13540602">KAFKA-15106</key>
            <summary>AbstractStickyAssignor may stuck in 3.5</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="flashmouse">li xiangyuan</assignee>
                                    <reporter username="flashmouse">li xiangyuan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jun 2023 10:29:22 +0000</created>
                <updated>Fri, 20 Oct 2023 12:44:38 +0000</updated>
                            <resolved>Fri, 4 Aug 2023 02:19:16 +0000</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.5.2</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                    <component>clients</component>
                        <due>Mon, 19 Jun 2023 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17735790" author="kirktrue" created="Wed, 21 Jun 2023 15:46:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=flashmouse&quot; class=&quot;user-hover&quot; rel=&quot;flashmouse&quot;&gt;flashmouse&lt;/a&gt; Thank you for the test case. I was able to reproduce the hanging behavior. I would have assumed that the &lt;tt&gt;@Timeout&lt;/tt&gt; would have stopped the test after 90 seconds, but it didn&apos;t appear to when I ran it &#129300;&lt;/p&gt;

&lt;p&gt;I&apos;m not familiar with this area of the code, so I&apos;m not sure if the stated values make for a valid test or not &#129335;&#8205;&#9794;&#65039;&lt;/p&gt;

&lt;p&gt;Were you planning to provide a patch to fix the issue?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="17736829" author="flashmouse" created="Sun, 25 Jun 2023 07:12:35 +0000"  >&lt;p&gt;I wonder whether modify the line in function `isBalanced` could solve it.&lt;/p&gt;

&lt;p&gt;current:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (consumerPartitionCount &amp;lt; otherConsumerPartitionCount) { &lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;fixed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (consumerPartitionCount+1 &amp;lt; otherConsumerPartitionCount) { &lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17736830" author="flashmouse" created="Sun, 25 Jun 2023 07:15:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rajinisivaram%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;rajinisivaram@gmail.com&quot;&gt;rajinisivaram@gmail.com&lt;/a&gt;&#160; I notice you are the writer, could u give a check?&lt;/p&gt;</comment>
                            <comment id="17736971" author="flashmouse" created="Mon, 26 Jun 2023 03:20:05 +0000"  >&lt;p&gt;I deem the root cause is the check `isBalanced` have some logical error so the function `performReassignments` will run the whole loop body, this loop is very slow, each time pick one partition, compare its current assignor with all consumers subscribe the partition and try to find one hold fewer partition num than current consumer.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;my solve is written in above comment, modify the code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// com.tuya.basic.mq.consumer.AbstractStickyAssignor.GeneralAssignmentBuilder#isBalanced
&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;// current:
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (consumerPartitionCount &amp;lt; otherConsumerPartitionCount)

&lt;span class=&quot;code-comment&quot;&gt;// fix:
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (consumerPartitionCount+1 &amp;lt; otherConsumerPartitionCount) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I could pass the test after do so.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kirktrue&quot; class=&quot;user-hover&quot; rel=&quot;kirktrue&quot;&gt;kirktrue&lt;/a&gt;&#160; How do u think? If you&apos;re not familiar with this code, could u find guy that may handle it?&lt;/p&gt;

&lt;p&gt;thx...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1in8g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>