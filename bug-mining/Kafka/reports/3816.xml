<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:39:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-9228] Reconfigured converters and clients may not be propagated to connector tasks</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-9228</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;If an existing connector is reconfigured but the only changes are to its converters and/or Kafka clients (enabled as of &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-458%3A+Connector+Client+Config+Override+Policy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;KIP-458&lt;/a&gt;), the changes will not propagate to its tasks unless the connector also generates task configs that differ from the existing task configs. Even after this point, if the connector tasks are reconfigured, they will still not pick up on the new converter and/or Kafka client configs.&lt;/p&gt;

&lt;p&gt;This is because the &lt;tt&gt;DistributedHerder&lt;/tt&gt; only writes new task configurations to the connect config topic &lt;a href=&quot;https://github.com/apache/kafka/blob/e499c960e4f9cfc462f1a05a110d79ffa1c5b322/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/distributed/DistributedHerder.java#L1285-L1332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;if the connector-provided task configs differ from the task configs already in the config topic&lt;/a&gt;, and neither of those contain converter or Kafka client configs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13270205">KAFKA-9228</key>
            <summary>Reconfigured converters and clients may not be propagated to connector tasks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ChrisEgerton">Chris Egerton</assignee>
                                    <reporter username="ChrisEgerton">Chris Egerton</reporter>
                        <labels>
                    </labels>
                <created>Sat, 23 Nov 2019 01:13:46 +0000</created>
                <updated>Tue, 8 Oct 2024 14:52:37 +0000</updated>
                            <resolved>Mon, 10 Jun 2024 21:02:53 +0000</resolved>
                                    <version>2.3.0</version>
                    <version>2.3.1</version>
                    <version>2.3.2</version>
                    <version>2.4.0</version>
                                    <fixVersion>3.7.1</fixVersion>
                    <fixVersion>3.8.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16980601" author="chrisegerton" created="Sat, 23 Nov 2019 01:14:34 +0000"  >&lt;p&gt;This almost certainly affects more than 2.3 and 2.4; will add to the &lt;tt&gt;Affects Version/s&lt;/tt&gt; field when I open a fix PR.&lt;/p&gt;</comment>
                            <comment id="16993990" author="chrisegerton" created="Wed, 11 Dec 2019 23:26:19 +0000"  >&lt;p&gt;This issue is much harder to reproduce than initially suspected.&lt;br/&gt;
When the &lt;tt&gt;Connector::start&lt;/tt&gt; method is invoked, the framework passes in the entire user-supplied connector configuration, including converter and client configs. Most connectors will retain that configuration and then, from their &lt;tt&gt;Connector::taskConfigs&lt;/tt&gt; method, return either verbatim or slightly-modified copies of it. This has the consequence that, through quirk of connector development style, it&apos;s likely that changing the converter and/or client configs for a connector will result in a change for its task configs as well (even if those converter and/or configs are completely ignored by both the connector and its tasks). Any change in the task configs for a connector will result in its tasks being restarted, which then causes any changes to its converters and/or clients to be picked up.&lt;/p&gt;

&lt;p&gt;However, there are two connectors that do &lt;em&gt;not&lt;/em&gt; follow this pattern: the &lt;a href=&quot;https://github.com/apache/kafka/blob/717ce42a6d68d3ac8d9478451a31423b5d43234e/connect/file/src/main/java/org/apache/kafka/connect/file/FileStreamSourceConnector.java#L78-L86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;FileStreamSourceConnector&lt;/a&gt; and the &lt;a href=&quot;https://github.com/apache/kafka/blob/717ce42a6d68d3ac8d9478451a31423b5d43234e/connect/file/src/main/java/org/apache/kafka/connect/file/FileStreamSinkConnector.java#L62-L69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;FileStreamSinkConnector&lt;/a&gt;. Any changes to the configs of either of these connectors that only affect their converters and/or Kafka clients will not propagate to their tasks until their tasks are restarted (either manually, due to rebalance, or via some other cause).&lt;/p&gt;</comment>
                            <comment id="16994024" author="githubbot" created="Thu, 12 Dec 2019 00:40:25 +0000"  >&lt;p&gt;C0urante commented on pull request #7823: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9228&quot; title=&quot;Reconfigured converters and clients may not be propagated to connector tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9228&quot;&gt;&lt;del&gt;KAFKA-9228&lt;/del&gt;&lt;/a&gt;: Force reconfiguration of tasks if converter or Kafka client configs are changed&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7823&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;Jira&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9228&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-9228&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;   There&apos;s a subtle bug in the Connect framework that hasn&apos;t been a common issue due to the patterns many connector developers follow for their `Connector::taskConfigs` method (more on the cause of this is outlined in the Jira issue). It&apos;s possible that reconfiguring a connector but only altering its converters and/or Kafka clients will fail to propagate to the connector&apos;s tasks.&lt;/p&gt;

&lt;p&gt;   This change should fix that bug by caching the client and converter configs for running connectors in the herder and, if a change is detected to any of those configs, force a restart of the connector&apos;s tasks. This is done in both the standalone and distributed herder.&lt;/p&gt;

&lt;p&gt;   A unit test is added for the shared converter/client config extraction logic, and an integration test is added to confirm the fix which fails on the current `trunk` but passes on the source branch of this PR.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17878907" author="douglasawh" created="Tue, 3 Sep 2024 15:00:26 +0000"  >&lt;p&gt;This does not appear to resolve all use cases in 3.7.1. Is there a chance of a 3.7.2, or should we test in 3.8?&lt;/p&gt;</comment>
                            <comment id="17878917" author="douglasawh" created="Tue, 3 Sep 2024 15:38:08 +0000"  >&lt;p&gt;upon review of &lt;a href=&quot;https://github.com/apache/kafka/pull/7823,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7823&lt;/a&gt; this does not appear to have been merged. Can the &quot;Resolved&quot; field be modified to reflect that?&lt;/p&gt;</comment>
                            <comment id="17878920" author="douglasawh" created="Tue, 3 Sep 2024 15:44:29 +0000"  >&lt;p&gt;I see that the other PRs got merged, so do we think this should be a complete fix and the Jira &quot;Resolved&quot; is accurate? &lt;a href=&quot;https://github.com/apache/kafka/pull/16053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/16053&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17879282" author="gharris1727" created="Wed, 4 Sep 2024 16:05:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=douglasawh&quot; class=&quot;user-hover&quot; rel=&quot;douglasawh&quot;&gt;douglasawh&lt;/a&gt; Are you able to reproduce this problem on a 3.7.1 or 3.8.0 cluster? If so, please open a new ticket with your reproduction steps.&lt;/p&gt;

&lt;p&gt;As far as we know, this problem is resolved in the patch that was merged &lt;a href=&quot;https://github.com/apache/kafka/pull/16053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/16053&lt;/a&gt; but there may be another root cause for configurations not being propagated that you could help find.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="17881343" author="douglasawh" created="Thu, 12 Sep 2024 15:08:33 +0000"  >&lt;p&gt;What we know right now is that this doesn&apos;t work with the Mongo connector TTL settings. We are working to determine if it can be reproduced with another connector.&lt;/p&gt;</comment>
                            <comment id="17882088" author="douglasawh" created="Mon, 16 Sep 2024 14:54:44 +0000"  >&lt;p&gt;This is the mongo connector at issue: &lt;a href=&quot;https://github.com/mongodb/mongo-kafka/blob/master/src/main/java/com/mongodb/kafka/connect/sink/MongoSinkTask.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mongodb/mongo-kafka/blob/master/src/main/java/com/mongodb/kafka/connect/sink/MongoSinkTask.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17883296" author="douglasawh" created="Fri, 20 Sep 2024 14:22:21 +0000"  >&lt;p&gt;We performed the test with Mongodb connector 1.11.1 and 1.13.0&lt;/p&gt;

&lt;p&gt;Supposedly, this should work since &quot;compatible with Apache Kafka v2.3 and later: &lt;br/&gt;
&lt;a href=&quot;https://www.mongodb.com/docs/kafka-connector/v1.11/compatibility/#kafka-compatibility&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mongodb.com/docs/kafka-connector/v1.11/compatibility/#kafka-compatibility&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;although the release dates don&apos;t really line up in a way that seems to make that possible. I have asked about this over at Mongo: &lt;a href=&quot;https://www.mongodb.com/community/forums/t/kafka-connect-version-compatibility/297511&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mongodb.com/community/forums/t/kafka-connect-version-compatibility/297511&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Log snippet below shows that when the vault ttl not expired, the connector 1.11.1 works well with Kafka 3.7.1.&lt;/p&gt;

&lt;p&gt;on the line 7851 (I didn&apos;t upload the full log, but we can keep the reference here for any of my team members following the case) , is the first record insert : {userid=AMIR_SINK_AUTH_13_3_7_1_002} with the username=v-DATA-nope-auth--test-cms-5min-RLdkjtfI2GPesm7hk1UI-1726737189 at 2024-09-19 09:15:20,590&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-09-19 09:15:20,590&amp;#93;&lt;/span&gt; TRACE WorkerSinkTask{id=ec002i000948-kf002i000165-AP24944-mongosink} Applying transformations to record in topic &apos;ec002i000948-kf002i000165-AP24944-mongosink&apos; partition 0 at offset 240 and timestamp 1726737319573 with key null and value {userid=AMIR_SINK_AUTH_13_3_7_1_002} (org.apache.kafka.connect.runtime.WorkerSinkTask:553)&lt;br/&gt;
the new username was renewed by the config provider on the line 20427 at 2024-09-19 09:24:38,909&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-09-19 09:24:38,909&amp;#93;&lt;/span&gt; INFO the value of the key = &apos;password&apos; is &apos;lol&apos; (com.lonecppcoder.kafka.config.TTLFileConfigProvider:102)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-09-19 09:24:38,909&amp;#93;&lt;/span&gt; INFO the value of the key = &apos;username&apos; is &apos;v-DATA-nope-auth--test-cms-5min-cYsJMmuafidQTn2CS1YQ-1726737431&apos; (com.lonecppcoder.kafka.config.TTLFileConfigProvider:102)&lt;/p&gt;

&lt;p&gt;After this moment on the line 22062, when the connector try to insert a new record, the connector returned an exception auth 13 at 2024-09-19 09:25:34,295:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-09-19 09:25:34,295&amp;#93;&lt;/span&gt; ERROR Failed to put into the sink the following records: [SinkRecord{kafkaOffset=241, timestampType=CreateTime, originalTopic=ec002i000948-kf002i000165-AP24944-mongosink, originalKafkaPartition=0, originalKafkaOffset=241} ConnectRecord{topic=&apos;ec002i000948-kf002i000165-AP24944-mongosink&apos;, kafkaPartition=0, key=null, keySchema=null, value=&lt;/p&gt;
{userid=AMIR_SINK_AUTH_13_3_7_1_003}
&lt;p&gt;, valueSchema=null, timestamp=1726737933134, headers=ConnectHeaders(headers=)}] (com.mongodb.kafka.connect.sink.MongoSinkTask:244)&lt;br/&gt;
com.mongodb.MongoCommandException: Command failed with error 13 (Unauthorized): &apos;command update requires authentication&apos; on server b98370ec-1806-4566-83f5-c38dfda12b7a-0.cdh5ng0b0v5co5c3f9qg.private.databases.appdomain.cloud:30603. The full response is {&quot;ok&quot;: 0.0, &quot;errmsg&quot;: &quot;command update requires authentication&quot;, &quot;code&quot;: 13, &quot;codeName&quot;: &quot;Unauthorized&quot;, &quot;$clusterTime&quot;: {&quot;clusterTime&quot;: {&quot;$timestamp&quot;: {&quot;t&quot;: 1726737929, &quot;i&quot;: 1}}, &quot;signature&quot;: {&quot;hash&quot;: {&quot;$binary&quot;: {&quot;base64&quot;: &quot;Take On Me&quot;, &quot;subType&quot;: &quot;00&quot;}}, &quot;keyId&quot;: numbers}}, &quot;operationTime&quot;: {&quot;$timestamp&quot;: &lt;/p&gt;
{&quot;t&quot;: 1726737320, &quot;i&quot;: 1}
&lt;p&gt;}}&lt;/p&gt;

&lt;p&gt;So via this log, we see clearly the error 13 (Unauthorized) appear only after ttl expire. Is this a different bug? Is this fix incompletely fixed. Is ttl not a concern of Kafka but a concern of Mongo?&lt;/p&gt;</comment>
                            <comment id="17885142" author="gharris1727" created="Thu, 26 Sep 2024 18:56:26 +0000"  >&lt;p&gt;Thanks so much for the additional information &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=douglasawh&quot; class=&quot;user-hover&quot; rel=&quot;douglasawh&quot;&gt;douglasawh&lt;/a&gt; you pointed me to look at the right area.&lt;/p&gt;

&lt;p&gt;I think you are affected by this bug: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-17627&quot; title=&quot;ConfigProvider TTLs do not restart Tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-17627&quot;&gt;KAFKA-17627&lt;/a&gt; which has been around since 2.0.0 (when ConfigProviders were added). The only workaround for this that I know of is to restart the tasks yourself.&lt;/p&gt;

&lt;p&gt;Just to confirm, do you see this error message anywhere in your cluster? &lt;a href=&quot;https://github.com/apache/kafka/blob/18340c973378610cd5930974201088b6aca8a8ad/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/WorkerConfigTransformer.java#L91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/18340c973378610cd5930974201088b6aca8a8ad/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/WorkerConfigTransformer.java#L91&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I would expect that this error would get thrown: &lt;a href=&quot;https://github.com/apache/kafka/blob/18340c973378610cd5930974201088b6aca8a8ad/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/distributed/DistributedHerder.java#L1446&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/18340c973378610cd5930974201088b6aca8a8ad/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/distributed/DistributedHerder.java#L1446&lt;/a&gt; and then get logged whenever it would have performed the refresh, but unintentionally restarted the connector, dropping the task restart completely.&lt;/p&gt;</comment>
                            <comment id="17886421" author="douglasawh" created="Wed, 2 Oct 2024 15:37:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gharris1727&quot; class=&quot;user-hover&quot; rel=&quot;gharris1727&quot;&gt;gharris1727&lt;/a&gt; thanks!&lt;/p&gt;

&lt;p&gt;I will have to try to get more logs from the team with access, but in what I currently have, I do not see either of those errors.&lt;/p&gt;

&lt;p&gt;The thing that I see is this weird (to me) double restart:&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-11&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;20:16:55,988&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; Scheduling a restart of connector mongosink-case in &lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;600000&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; ms (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;org.apache.kafka.connect.runtime.WorkerConfigTransformer&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;87&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-11&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;20:16:55,989&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; Retrieving config data from path &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;/apps/kafka/creds/creds.properties&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;com.lonecppcoder.kafka.config.TTLFileConfigProvider&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;91&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-11&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;20:16:56,143&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; the value of the key = &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;password&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; is &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;com.lonecppcoder.kafka.config.TTLFileConfigProvider&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;102&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-11&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;20:16:56,143&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; the value of the key = &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;username&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; is &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;NGUouaMNpuRd6XCF2wyr-1726085638&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;com.lonecppcoder.kafka.config.TTLFileConfigProvider&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;102&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-11&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;20:16:56,143&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; Returning new config data with TTL &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;600000&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;com.lonecppcoder.kafka.config.TTLFileConfigProvider&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;106&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-11&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;20:16:56,144&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; Scheduling a restart of connector mongosink-case in &lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;600000&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; ms (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;org.apache.kafka.connect.runtime.WorkerConfigTransformer&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;87&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-11&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;20:16:56,144&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; Retrieving config data from path &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;/apps/kafka/creds/creds.properties&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;com.lonecppcoder.kafka.config.TTLFileConfigProvider&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;91&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-11&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;20:16:56,176&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; the value of the key = &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;password&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; is &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;com.lonecppcoder.kafka.config.TTLFileConfigProvider&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;102&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-11&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;20:16:56,176&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; the value of the key = &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;username&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; is &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;NGUouaMNpuRd6XCF2wyr-1726085638&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;com.lonecppcoder.kafka.config.TTLFileConfigProvider&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;102&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-11&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;20:16:56,177&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; Returning new config data with TTL &lt;/font&gt;&lt;font color=&quot;#ce9178&quot;&gt;&apos;600000&apos;&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;com.lonecppcoder.kafka.config.TTLFileConfigProvider&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;106&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;font color=&quot;#172b4d&quot;&gt;The fact that it retries is of course not weird in and of itself, but there is no timeout error or anything to suggest why it happens twice.&lt;/font&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;font color=&quot;#172b4d&quot;&gt;&lt;font color=&quot;#172b4d&quot;&gt;&lt;/font&gt;On a later day with a higher logging level there are a couple of these that are blank&lt;/font&gt;&lt;font color=&quot;&quot;&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;&lt;/font&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-19&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;09:14:36,905&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;DEBUG&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; [Worker clientId=&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;connect-198.18.155.99&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;8089&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;, groupId=streamconnect-case] Tasks to restart from currently running assignment: [] (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;org.apache.kafka.connect.runtime.distributed.DistributedHerder&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;1933&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;font color=&quot;#172b4d&quot;&gt;Then there is one where it does get scheduled&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-09-19&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;09:14:38,187&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;DEBUG&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; [Worker clientId=&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;connect-198.18.155.99&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;8089&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;, groupId=streamconnect-case] Tasks to restart from currently running assignment: [mongosink-case-&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;1&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;, mongosink-case-&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;0&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;org.apache.kafka.connect.runtime.distributed.DistributedHerder&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;1933&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;font color=&quot;#172b4d&quot;&gt;This is all running in Kubernetes so it&apos;s possible the reason I am not seeing those errors is because the pod is automatically getting restarted before that happens. I will have to discuss with the team &quot;on the ground&quot; to see if they are happy accepting 17627, but will ask them to not restart the pods to see if we can perhaps see some different errors.&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="17886426" author="gharris1727" created="Wed, 2 Oct 2024 15:59:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=douglasawh&quot; class=&quot;user-hover&quot; rel=&quot;douglasawh&quot;&gt;douglasawh&lt;/a&gt; Those log messages are emitted whenever a config has it&apos;s secrets processed, not just after a restart. Since you have two tasks, and you see the log messages from the ConfigProvider twice, these are probably from the tasks starting.&lt;/p&gt;

&lt;p&gt;The error should only appear if the tasks are on a different machine than the connector. If you&apos;re only running a single machine, then there shouldn&apos;t be any errors, just the connector being restarted periodically. You can look for &quot;Stopping connector&quot; and &quot;Creating connector&quot; messages emitted every ~60 seconds.&lt;/p&gt;</comment>
                            <comment id="17886767" author="douglasawh" created="Thu, 3 Oct 2024 19:10:26 +0000"  >&lt;p&gt;&lt;font color=&quot;#172b4d&quot;&gt;Members of my team believe the issue is that the connector is not getting restarted. The log &lt;b&gt;says&lt;/b&gt; it is creating a new connector. But the connector has the same name. Should it be getting a new name?&lt;/font&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-10-02&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;14:40:32,162&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; Scheduling a restart of connector ec002i000948-kf002i000165-AP24944-mongosink-case in &lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;600000&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; ms (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;org.apache.kafka.connect.runtime.WorkerConfigTransformer&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;87&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#cccccc&quot;&gt;[&lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;2024-10-02&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a9955&quot;&gt;14:40:32,170&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;] &lt;/font&gt;&lt;font color=&quot;#b5cea8&quot;&gt;INFO&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; Creating connector ec002i000948-kf002i000165-AP24944-mongosink-case of type &lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;com.mongodb.kafka.connect.MongoSinkConnector&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt; (&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;org.apache.kafka.connect.runtime.Worker&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;:&lt;/font&gt;&lt;font color=&quot;#569cd6&quot;&gt;309&lt;/font&gt;&lt;font color=&quot;#cccccc&quot;&gt;)&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="17887376" author="gharris1727" created="Mon, 7 Oct 2024 15:39:12 +0000"  >&lt;p&gt;&quot;Creating&quot; in &quot;Creating connector&quot; means creating an instance of the class. From your perspective, it really means &quot;starting&quot;.&lt;/p&gt;</comment>
                            <comment id="17887602" author="douglasawh" created="Tue, 8 Oct 2024 14:00:22 +0000"  >&lt;p&gt;Just FYI that we are able to reproduce an issue in single node. We created a new issue, since it doesn&apos;t appear to be the same issue as &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-17627&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-17627&lt;/a&gt; or this one (though the symptoms are closely related)&lt;/p&gt;

&lt;p&gt;Here&apos;s the one we created: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-17704&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-17704&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17887603" author="JIRAUSER307266" created="Tue, 8 Oct 2024 14:04:39 +0000"  >&lt;p&gt;Thanks, Greg. What we are missing is not &quot;Creating connector&quot;, but &quot;starting task messages&quot;, like in the attached pic. Post creds change at 9:24, we do not see the &quot;starting task&quot; pattern as in 9:14.  &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13072043/13072043_image-2024-10-08-17-03-14-251.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13580362">KAFKA-16837</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13593420">KAFKA-17627</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13594325">KAFKA-17704</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13072043" name="image-2024-10-08-17-03-14-251.png" size="326802" author="pavlov2000uk" created="Tue, 8 Oct 2024 14:03:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z08xq0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>