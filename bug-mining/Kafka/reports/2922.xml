<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:27:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-10251] Flaky Test kafka.api.TransactionsBounceTest.testWithGroupMetadata</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-10251</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;h3&gt;&lt;a name=&quot;Stacktrace&quot;&gt;&lt;/a&gt;Stacktrace&lt;/h3&gt;

&lt;p&gt;org.scalatest.exceptions.TestFailedException: Consumed 0 records before timeout instead of the expected 200 records at org.scalatest.Assertions.newAssertionFailedException(Assertions.scala:530) at org.scalatest.Assertions.newAssertionFailedException$(Assertions.scala:529) at org.scalatest.Assertions$.newAssertionFailedException(Assertions.scala:1389) at org.scalatest.Assertions.fail(Assertions.scala:1091) at org.scalatest.Assertions.fail$(Assertions.scala:1087) at org.scalatest.Assertions$.fail(Assertions.scala:1389) at kafka.utils.TestUtils$.pollUntilAtLeastNumRecords(TestUtils.scala:842) at kafka.api.TransactionsBounceTest.testWithGroupMetadata(TransactionsBounceTest.scala:109)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The logs are pretty much just this on repeat:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2020-07-08 23:41:04,034] ERROR Error when sending message to topic output-topic with key: 9955, value: 9955 with error: (org.apache.kafka.clients.producer.internals.ErrorLoggingCallback:52) org.apache.kafka.common.KafkaException: Failing batch since transaction was aborted at org.apache.kafka.clients.producer.internals.Sender.maybeSendAndPollTransactionalRequest(Sender.java:423) at org.apache.kafka.clients.producer.internals.Sender.runOnce(Sender.java:313) at org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:240) at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [2020-07-08 23:41:04,034] ERROR Error when sending message to topic output-topic with key: 9959, value: 9959 with error: (org.apache.kafka.clients.producer.internals.ErrorLoggingCallback:52) org.apache.kafka.common.KafkaException: Failing batch since transaction was aborted at org.apache.kafka.clients.producer.internals.Sender.maybeSendAndPollTransactionalRequest(Sender.java:423) at org.apache.kafka.clients.producer.internals.Sender.runOnce(Sender.java:313) at org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:240) at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13315756">KAFKA-10251</key>
            <summary>Flaky Test kafka.api.TransactionsBounceTest.testWithGroupMetadata</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="showuon">Luke Chen</assignee>
                                    <reporter username="ableegoldman">A. Sophie Blee-Goldman</reporter>
                        <labels>
                            <label>flaky-test</label>
                    </labels>
                <created>Thu, 9 Jul 2020 00:43:02 +0000</created>
                <updated>Wed, 1 Jan 2025 03:41:55 +0000</updated>
                                                                            <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17154110" author="ableegoldman" created="Thu, 9 Jul 2020 01:17:39 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bchen225242&quot; class=&quot;user-hover&quot; rel=&quot;bchen225242&quot;&gt;bchen225242&lt;/a&gt; &#8211;&#160;&lt;a href=&quot;https://builds.apache.org/job/kafka-pr-jdk8-scala2.12/3318/testReport/junit/kafka.api/TransactionsBounceTest/testWithGroupMetadata/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/kafka-pr-jdk8-scala2.12/3318/testReport/junit/kafka.api/TransactionsBounceTest/testWithGroupMetadata/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17289620" author="showuon" created="Wed, 24 Feb 2021 03:28:15 +0000"  >&lt;p&gt;investigating&lt;/p&gt;</comment>
                            <comment id="17291964" author="mjsax" created="Fri, 26 Feb 2021 23:25:34 +0000"  >&lt;p&gt;Different test method:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;org.opentest4j.AssertionFailedError: Consumed 0 records before timeout instead of the expected 200 records at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:39) at org.junit.jupiter.api.Assertions.fail(Assertions.java:117) at kafka.utils.TestUtils$.pollUntilAtLeastNumRecords(TestUtils.scala:852) at kafka.api.TransactionsBounceTest.testWithGroupId(TransactionsBounceTest.scala:109)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;STDOUT is full with&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-26 22:24:12,274&amp;#93;&lt;/span&gt; ERROR Error when sending message to topic output-topic with key: 923, value: 923 with error: (org.apache.kafka.clients.producer.internals.ErrorLoggingCallback:52) org.apache.kafka.common.errors.TransactionAbortedException: Failing batch since transaction was aborted &lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-26 22:24:12,274&amp;#93;&lt;/span&gt; ERROR Error when sending message to topic output-topic with key: 926, value: 926 with error: (org.apache.kafka.clients.producer.internals.ErrorLoggingCallback:52) org.apache.kafka.common.errors.TransactionAbortedException: Failing batch since transaction was aborted&lt;br/&gt;
...&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="17292005" author="showuon" created="Sat, 27 Feb 2021 01:34:24 +0000"  >&lt;p&gt;This flaky test also points to the same root cause.&lt;/p&gt;

&lt;p&gt;kafka.api.TransactionsBounceTest.testWithGroupId()&lt;/p&gt;


&lt;p&gt;org.opentest4j.AssertionFailedError: Consumed 0 records before timeout instead of the expected 200 records&lt;br/&gt;
 at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:39)&lt;br/&gt;
 at org.junit.jupiter.api.Assertions.fail(Assertions.java:117)&lt;br/&gt;
 at kafka.utils.TestUtils$.pollUntilAtLeastNumRecords(TestUtils.scala:852)&lt;br/&gt;
 at kafka.api.TransactionsBounceTest.testWithGroupId(TransactionsBounceTest.scala:109)&lt;br/&gt;
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/p&gt;</comment>
                            <comment id="17293187" author="mjsax" created="Mon, 1 Mar 2021 21:35:35 +0000"  >&lt;p&gt;Failed again.&lt;/p&gt;</comment>
                            <comment id="17293885" author="mjsax" created="Tue, 2 Mar 2021 18:02:56 +0000"  >&lt;p&gt;Two more.&lt;/p&gt;</comment>
                            <comment id="17293953" author="ableegoldman" created="Tue, 2 Mar 2021 19:48:06 +0000"  >&lt;p&gt;Merged &lt;a href=&quot;https://github.com/apache/kafka/pull/10228,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/10228,&lt;/a&gt;&#160;please reopen this ticket if failures are seen on builds kicked off after 11:47am PST (March 2nd)&lt;/p&gt;</comment>
                            <comment id="17294068" author="ableegoldman" created="Wed, 3 Mar 2021 00:26:08 +0000"  >&lt;p&gt;Looks like it&apos;s still failing &#8211; saw at least one test failure on a build which was kicked off since merging this PR. &lt;a href=&quot;https://ci-builds.apache.org/job/Kafka/job/kafka-pr/job/PR-10215/5/testReport/junit/kafka.api/TransactionsBounceTest/Build___JDK_8___testWithGroupId__/?cloudbees-analytics-link=scm-reporting%2Ftests%2Ffailed&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Kafka/job/kafka-pr/job/PR-10215/5/testReport/junit/kafka.api/TransactionsBounceTest/Build___JDK_8___testWithGroupId__/?cloudbees-analytics-link=scm-reporting%2Ftests%2Ffailed&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Reopening the ticket for further investigation&lt;/p&gt;</comment>
                            <comment id="17294210" author="showuon" created="Wed, 3 Mar 2021 01:33:29 +0000"  >&lt;p&gt;Interesting. Let me check it. Thanks.&lt;/p&gt;</comment>
                            <comment id="17303205" author="showuon" created="Wed, 17 Mar 2021 09:05:48 +0000"  >&lt;p&gt;Found the root cause, which is we are bouncing broker during the test to verify the transnational data is still as expected. However, the broker down and on, will fail the rebalance due to &lt;tt&gt;error when storing group assignment during SyncGroup&lt;/tt&gt;. To fix it, we can make the rebalance happened earlier before broker bouncing, so that we can make sure when test starts, we can start the records consuming, instead of rebalancing. PR:&lt;a href=&quot;https://github.com/apache/kafka/pull/10338&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/10338&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="17379262" author="cadonna" created="Mon, 12 Jul 2021 16:45:00 +0000"  >&lt;p&gt;Failed again:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ci-builds.apache.org/job/Kafka/job/kafka-pr/job/PR-10943/5/testReport/junit/kafka.api/TransactionsBounceTest/Build___JDK_8_and_Scala_2_12___testWithGroupId___2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Kafka/job/kafka-pr/job/PR-10943/5/testReport/junit/kafka.api/TransactionsBounceTest/Build___JDK_8_and_Scala_2_12___testWithGroupId___2/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.opentest4j.AssertionFailedError: Consumed 0 records before timeout instead of the expected 200 records
	at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:39)
	at org.junit.jupiter.api.Assertions.fail(Assertions.java:117)
	at kafka.utils.TestUtils$.pollUntilAtLeastNumRecords(TestUtils.scala:833)
	at kafka.api.TransactionsBounceTest.testWithGroupId(TransactionsBounceTest.scala:112)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17387650" author="mjsax" created="Mon, 26 Jul 2021 23:24:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka/pull/11106/checks?check_run_id=3146651514&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/11106/checks?check_run_id=3146651514&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0gl14:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>