<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:59:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4779] Failure in kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4779</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;This test failed on 01/29, on both trunk and 0.10.2, error message:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;The consumer has terminated, or timed out, on node ubuntu@worker3.
Traceback (most recent call last):
  File &quot;/var/lib/jenkins/workspace/system-test-kafka-0.10.2/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.6.0-py2.7.egg/ducktape/tests/runner_client.py&quot;, line 123, in run
    data = self.run_test()
  File &quot;/var/lib/jenkins/workspace/system-test-kafka-0.10.2/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.6.0-py2.7.egg/ducktape/tests/runner_client.py&quot;, line 176, in run_test
    return self.test_context.function(self.test)
  File &quot;/var/lib/jenkins/workspace/system-test-kafka-0.10.2/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.6.0-py2.7.egg/ducktape/mark/_mark.py&quot;, line 321, in wrapper
    return functools.partial(f, *args, **kwargs)(*w_args, **w_kwargs)
  File &quot;/var/lib/jenkins/workspace/system-test-kafka-0.10.2/kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py&quot;, line 148, in test_rolling_upgrade_phase_two
    self.run_produce_consume_validate(self.roll_in_secured_settings, client_protocol, broker_protocol)
  File &quot;/var/lib/jenkins/workspace/system-test-kafka-0.10.2/kafka/tests/kafkatest/tests/produce_consume_validate.py&quot;, line 100, in run_produce_consume_validate
    self.stop_producer_and_consumer()
  File &quot;/var/lib/jenkins/workspace/system-test-kafka-0.10.2/kafka/tests/kafkatest/tests/produce_consume_validate.py&quot;, line 87, in stop_producer_and_consumer
    self.check_alive()
  File &quot;/var/lib/jenkins/workspace/system-test-kafka-0.10.2/kafka/tests/kafkatest/tests/produce_consume_validate.py&quot;, line 79, in check_alive
    raise Exception(msg)
Exception: The consumer has terminated, or timed out, on node ubuntu@worker3.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looks like the console consumer times out: &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2017-01-30 04:56:00,972] ERROR Error processing message, terminating consumer process:  (kafka.tools.ConsoleConsumer$)
kafka.consumer.ConsumerTimeoutException
        at kafka.consumer.NewShinyConsumer.receive(BaseConsumer.scala:90)
        at kafka.tools.ConsoleConsumer$.process(ConsoleConsumer.scala:120)
        at kafka.tools.ConsoleConsumer$.run(ConsoleConsumer.scala:75)
        at kafka.tools.ConsoleConsumer$.main(ConsoleConsumer.scala:50)
        at kafka.tools.ConsoleConsumer.main(ConsoleConsumer.scala)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A bunch of these security_rolling_upgrade tests failed, and in all cases, the producer produced ~15k messages, of which ~7k were acked, and the consumer only got around ~2600 before timing out. &lt;/p&gt;

&lt;p&gt;There are a lot of messages like the following for different request types on the producer and consumer:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2017-01-30 05:13:35,954] WARN Received unknown topic or partition error in produce request on partition test_topic-0. The topic/partition may not exist or the user may not have Describe access to it (org.apache.kafka.clients.producer.internals.Sender)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13044167">KAFKA-4779</key>
            <summary>Failure in kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsivaram">Rajini Sivaram</assignee>
                                    <reporter username="apurva">Apurva Mehta</reporter>
                        <labels>
                    </labels>
                <created>Sat, 18 Feb 2017 01:38:26 +0000</created>
                <updated>Wed, 22 Mar 2017 01:43:46 +0000</updated>
                            <resolved>Wed, 22 Mar 2017 01:43:46 +0000</resolved>
                                                    <fixVersion>0.10.2.1</fixVersion>
                    <fixVersion>0.11.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15872862" author="apurva" created="Sat, 18 Feb 2017 01:39:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rsivaram&quot; class=&quot;user-hover&quot; rel=&quot;rsivaram&quot;&gt;rsivaram&lt;/a&gt; do you have an idea about what could be going wrong here? these tests have been failing for maybe 4 weeks now on and off.&lt;/p&gt;</comment>
                            <comment id="15877030" author="rsivaram" created="Tue, 21 Feb 2017 23:44:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurva&quot; class=&quot;user-hover&quot; rel=&quot;apurva&quot;&gt;apurva&lt;/a&gt; Do you by any chance have the full logs of a failure? Can you attach a zip to the JIRA if they are not too big? I tried running the tests locally, but they passed for me. Can&apos;t think of anything that changed recently that could result in this failure.&lt;/p&gt;</comment>
                            <comment id="15877047" author="apurva" created="Tue, 21 Feb 2017 23:55:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rsivaram&quot; class=&quot;user-hover&quot; rel=&quot;rsivaram&quot;&gt;rsivaram&lt;/a&gt; here you go: &lt;a href=&quot;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2017-02-15--001.1487153551--apache--trunk--4db048d/TestSecurityRollingUpgrade/test_rolling_upgrade_phase_two/broker_protocol=SSL.client_protocol=SASL_PLAINTEXT/66.tgz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2017-02-15--001.1487153551--apache--trunk--4db048d/TestSecurityRollingUpgrade/test_rolling_upgrade_phase_two/broker_protocol=SSL.client_protocol=SASL_PLAINTEXT/66.tgz&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15880642" author="githubbot" created="Thu, 23 Feb 2017 15:25:40 +0000"  >&lt;p&gt;GitHub user rajinisivaram opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2589&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4779&quot; title=&quot;Failure in kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4779&quot;&gt;&lt;del&gt;KAFKA-4779&lt;/del&gt;&lt;/a&gt;: Fix security upgrade system test to be non-disruptive&lt;/p&gt;

&lt;p&gt;    The phase_two security upgrade test verifies upgrading inter-broker and client protocols to the same value as well as different values. The second case currently changes inter-broker protocol without first enabling the protocol, disrupting produce/consume until the whole cluster is updated. This commit changes the test to be a non-disruptive upgrade test that enables protocols first (simulating phase one of upgrade).&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rajinisivaram/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rajinisivaram/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4779&quot; title=&quot;Failure in kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4779&quot;&gt;&lt;del&gt;KAFKA-4779&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2589.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2589.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2589&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 71aa4c4fa8035695ac460797b84a6754576dc99f&lt;br/&gt;
Author: Rajini Sivaram &amp;lt;rajinisivaram@googlemail.com&amp;gt;&lt;br/&gt;
Date:   2017-02-23T14:57:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4779&quot; title=&quot;Failure in kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4779&quot;&gt;&lt;del&gt;KAFKA-4779&lt;/del&gt;&lt;/a&gt;: Fix security upgrade system test to be non-disruptive&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15880684" author="rsivaram" created="Thu, 23 Feb 2017 15:51:46 +0000"  >&lt;p&gt;I couldn&apos;t recreate the failure, but the code for phase_two of security upgrade with different client_protocol and broker_protocol is currently a disruptive upgrade that stops produce and consume during the upgrade. As a result, consumer can timeout if the upgrade takes slightly longer than expected.&lt;/p&gt;

&lt;p&gt;Non-disruptive upgrade of cluster to enable new security protocols is described in the docs (&lt;a href=&quot;http://kafka.apache.org/documentation/#security_rolling_upgrade&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://kafka.apache.org/documentation/#security_rolling_upgrade&lt;/a&gt;). The new protocols must be enabled first with incremental bounce. And then the inter-broker protocol is updated with incremental bounce. And finally, the old protocol is removed. When client_protocol (SASL_PLAINTEXT) and broker_protocol (SSL) are being updated to different protocols starting with PLAINTEXT, both SASL_PLAINTEXT and SSL must be enabled first before inter-broker protocol is changed to SSL. The test was enabling only SASL_PLAINTEXT. As a result inter-broker communication was broken during the upgrade, causing produce and consume to fail until the cluster got back to a good state. Since the purpose of the test is to verify non-disruptive upgrade, I have changed the test to enable both SASL_PLAINTEXT and SSL first so that the upgrade is performed without disrupting producers or consumers.&lt;/p&gt;</comment>
                            <comment id="15883143" author="ijuma" created="Fri, 24 Feb 2017 17:24:41 +0000"  >&lt;p&gt;Issue resolved by pull request 2589&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2589&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15883144" author="githubbot" created="Fri, 24 Feb 2017 17:24:59 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2589&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15885716" author="ijuma" created="Mon, 27 Feb 2017 12:55:51 +0000"  >&lt;p&gt;The test failed again, this time with a different message:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;--------------------------------------------------------------------------------
test_id:    kafkatest.tests.core.security_rolling_upgrade_test.TestSecurityRollingUpgrade.test_rolling_upgrade_phase_two.broker_protocol=SASL_PLAINTEXT.client_protocol=SSL
status:     FAIL
run time:   4 minutes 32.586 seconds


    1152 acked message did not make it to the Consumer. They are: 12288, 12289, 12290, 12291, 12292, 12293, 12294, 12295, 12296, 12297, 12298, 12299, 12300, 12301, 12302, 12303, 12304, 12305, 12306, 12307...plus 1132 more. Total Acked: 12184, Total Consumed: 11032. We validated that the first 1000 of these missing messages correctly made it into Kafka&apos;s data files. This suggests they were lost on their way to the consumer.
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.6.0-py2.7.egg/ducktape/tests/runner_client.py&quot;&lt;/span&gt;, line 123, in run
    data = self.run_test()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.6.0-py2.7.egg/ducktape/tests/runner_client.py&quot;&lt;/span&gt;, line 176, in run_test
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self.test_context.function(self.test)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.6.0-py2.7.egg/ducktape/mark/_mark.py&quot;&lt;/span&gt;, line 321, in wrapper
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; functools.partial(f, *args, **kwargs)(*w_args, **w_kwargs)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py&quot;&lt;/span&gt;, line 148, in test_rolling_upgrade_phase_two
    self.run_produce_consume_validate(self.roll_in_secured_settings, client_protocol, broker_protocol)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/tests/kafkatest/tests/produce_consume_validate.py&quot;&lt;/span&gt;, line 117, in run_produce_consume_validate
    self.validate()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/workspace/system-test-kafka/kafka/tests/kafkatest/tests/produce_consume_validate.py&quot;&lt;/span&gt;, line 179, in validate
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; success, msg
AssertionError: 1152 acked message did not make it to the Consumer. They are: 12288, 12289, 12290, 12291, 12292, 12293, 12294, 12295, 12296, 12297, 12298, 12299, 12300, 12301, 12302, 12303, 12304, 12305, 12306, 12307...plus 1132 more. Total Acked: 12184, Total Consumed: 11032. We validated that the first 1000 of these missing messages correctly made it into Kafka&apos;s data files. This suggests they were lost on their way to the consumer.
--------------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2017-02-26--001.1488103947--apache--trunk--5b682ba/report.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2017-02-26--001.1488103947--apache--trunk--5b682ba/report.html&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2017-02-26--001.1488103947--apache--trunk--5b682ba/TestSecurityRollingUpgrade/test_rolling_upgrade_phase_two/broker_protocol=SASL_PLAINTEXT.client_protocol=SSL/62.tgz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2017-02-26--001.1488103947--apache--trunk--5b682ba/TestSecurityRollingUpgrade/test_rolling_upgrade_phase_two/broker_protocol=SASL_PLAINTEXT.client_protocol=SSL/62.tgz&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15887913" author="rsivaram" created="Tue, 28 Feb 2017 12:35:20 +0000"  >&lt;p&gt;The new failure looks like a very different issue. The consumer logs show:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-02-26 05:14:28,833&amp;#93;&lt;/span&gt; WARN Error while fetching metadata with correlation id 10712 : test_topic=LEADER_NOT_AVAILABLE (org.apache.kafka.clients.NetworkClient)&lt;br/&gt;
....&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-02-26 05:14:29,655&amp;#93;&lt;/span&gt; DEBUG Received successful JoinGroup response for group group: org.apache.kafka.common.requests.JoinGroupResponse@7802468d (org.apache.kafka.clients.consumer.internals.AbstractCoordinator)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-02-26 05:14:29,655&amp;#93;&lt;/span&gt; DEBUG Performing assignment for group group using strategy range with subscriptions console-consumer-810cd1cc-eb5b-4d6d-bfb5-6e094e107d14=Subscription(topics=&lt;span class=&quot;error&quot;&gt;&amp;#91;test_topic&amp;#93;&lt;/span&gt;)(org.apache.kafka.clients.consumer.internals.ConsumerCoordinator)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-02-26 05:14:29,655&amp;#93;&lt;/span&gt; DEBUG Skipping assignment for topic test_topic since no metadata is available (org.apache.kafka.clients.consumer.internals.AbstractPartitionAssignor)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-02-26 05:14:29,655&amp;#93;&lt;/span&gt; WARN The following subscribed topics are not assigned to any members in the group group : &lt;span class=&quot;error&quot;&gt;&amp;#91;test_topic&amp;#93;&lt;/span&gt;  (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Even though partitions of the subscribed topic could not be assigned because no metadata is available due to a transient error resulting from broker restart, no metadata refresh is requested. The consumer times out after a minute. Metadata expiry is 5 minutes, so rebalancing will be delayed for 5 minutes. Consumers currently request metadata when leader is not known during fetching, but not if assignment cannot be performed. I think we should request metadata sooner for this case. Will submit a PR.&lt;/p&gt;</comment>
                            <comment id="15887934" author="ijuma" created="Tue, 28 Feb 2017 12:49:37 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rsivaram&quot; class=&quot;user-hover&quot; rel=&quot;rsivaram&quot;&gt;rsivaram&lt;/a&gt;! Hopefully this is the last issue uncovered by this system test. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15887978" author="githubbot" created="Tue, 28 Feb 2017 13:15:16 +0000"  >&lt;p&gt;GitHub user rajinisivaram opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2608&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2608&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4779&quot; title=&quot;Failure in kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4779&quot;&gt;&lt;del&gt;KAFKA-4779&lt;/del&gt;&lt;/a&gt;: Request metadata in consumer if partitions unavailable&lt;/p&gt;

&lt;p&gt;    If leader node of one more more partitions in a consumer subscription are temporarily unavailable, request metadata refresh so that partitions skipped for assignment dont have to wait for metadata expiry before reassignment.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rajinisivaram/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rajinisivaram/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4779&quot; title=&quot;Failure in kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4779&quot;&gt;&lt;del&gt;KAFKA-4779&lt;/del&gt;&lt;/a&gt;-consumer-metadata&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2608.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2608.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2608&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit af5ef2b98314653de5ae098e8c45eb84b81685e7&lt;br/&gt;
Author: Rajini Sivaram &amp;lt;rajinisivaram@googlemail.com&amp;gt;&lt;br/&gt;
Date:   2017-02-28T12:09:44Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4779&quot; title=&quot;Failure in kafka/tests/kafkatest/tests/core/security_rolling_upgrade_test.py&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4779&quot;&gt;&lt;del&gt;KAFKA-4779&lt;/del&gt;&lt;/a&gt;: Request metadata in consumer if partitions unavailable&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15890202" author="githubbot" created="Wed, 1 Mar 2017 13:56:02 +0000"  >&lt;p&gt;Github user rajinisivaram closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2608&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2608&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a9hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>