<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:39:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1188] Stale LeaderAndIsr request could be handled by the broker on Controller failover</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1188</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;... which will cause the broker to truncate log as responding in makeFollower, and hence lose data. &lt;/p&gt;

&lt;p&gt;One procedure to produce this issue:&lt;/p&gt;

&lt;p&gt;3 brokers, 3 partitions, replication factor = 3.&lt;/p&gt;

&lt;p&gt;1. Broker 1 is the original controller.&lt;br/&gt;
2. Broker 3 lost registration, 1 send LeaderAndIsr to 1 for isr shrinking  (leader of partition 1), but not to 2 since it is not the leader.&lt;br/&gt;
3. Broker 1 dies, new controller 2 sends all LeaderAndIsr to 2 and 3 (resumed), and 2 handles the makeFollower, truncates data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685440">KAFKA-1188</key>
            <summary>Stale LeaderAndIsr request could be handled by the broker on Controller failover</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guozhang">Guozhang Wang</assignee>
                                    <reporter username="guozhang">Guozhang Wang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Dec 2013 19:31:00 +0000</created>
                <updated>Thu, 13 Feb 2014 22:47:42 +0000</updated>
                            <resolved>Thu, 13 Feb 2014 22:47:42 +0000</resolved>
                                                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13852541" author="guozhang" created="Thu, 19 Dec 2013 03:01:12 +0000"  >&lt;p&gt;Created reviewboard &lt;a href=&quot;https://reviews.apache.org/r/16360/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/16360/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="13856426" author="guozhang" created="Tue, 24 Dec 2013 19:08:40 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/16360/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/16360/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="13860586" author="guozhang" created="Thu, 2 Jan 2014 18:44:49 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/16360/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/16360/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="13872882" author="guozhang" created="Thu, 16 Jan 2014 00:43:42 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/16360/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/16360/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="13873785" author="guozhang" created="Thu, 16 Jan 2014 19:07:08 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/16360/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/16360/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="13874112" author="guozhang" created="Thu, 16 Jan 2014 23:02:33 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/16360/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/16360/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="13877906" author="guozhang" created="Tue, 21 Jan 2014 22:01:33 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/16360/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/16360/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="13898646" author="guozhang" created="Wed, 12 Feb 2014 01:48:51 +0000"  >&lt;p&gt;Updated reviewboard  against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="13898648" author="guozhang" created="Wed, 12 Feb 2014 01:50:53 +0000"  >&lt;p&gt;Updated reviewboard  against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="13900831" author="nehanarkhede" created="Thu, 13 Feb 2014 22:47:42 +0000"  >&lt;p&gt;Fixed the minor suggestions and checked in.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12689354">KAFKA-1211</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12619475" name="KAFKA-1188.patch" size="15719" author="guozhang" created="Thu, 19 Dec 2013 03:01:12 +0000"/>
                            <attachment id="12620380" name="KAFKA-1188_2013-12-24_11:07:12.patch" size="12950" author="guozhang" created="Tue, 24 Dec 2013 19:08:13 +0000"/>
                            <attachment id="12621127" name="KAFKA-1188_2014-01-02_10:43:54.patch" size="12875" author="guozhang" created="Thu, 2 Jan 2014 18:44:35 +0000"/>
                            <attachment id="12623272" name="KAFKA-1188_2014-01-15_16:43:30.patch" size="14506" author="guozhang" created="Thu, 16 Jan 2014 00:43:42 +0000"/>
                            <attachment id="12623444" name="KAFKA-1188_2014-01-16_11:06:56.patch" size="16609" author="guozhang" created="Thu, 16 Jan 2014 19:07:08 +0000"/>
                            <attachment id="12623522" name="KAFKA-1188_2014-01-16_15:02:22.patch" size="16940" author="guozhang" created="Thu, 16 Jan 2014 23:02:33 +0000"/>
                            <attachment id="12624196" name="KAFKA-1188_2014-01-21_14:01:22.patch" size="17750" author="guozhang" created="Tue, 21 Jan 2014 22:01:33 +0000"/>
                            <attachment id="12628407" name="KAFKA-1188_2014-02-11_17:48:06.patch" size="17054" author="guozhang" created="Wed, 12 Feb 2014 01:48:50 +0000"/>
                            <attachment id="12628408" name="KAFKA-1188_2014-02-11_17:50:06.patch" size="17054" author="guozhang" created="Wed, 12 Feb 2014 01:50:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364517</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qtwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>