<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:17:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-7921] Instable KafkaStreamsTest</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-7921</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;&lt;tt&gt;KafkaStreamsTest&lt;/tt&gt; failed multiple times, eg,&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;java.lang.AssertionError: Condition not met within timeout 15000. Streams never started.&lt;br/&gt;
at org.apache.kafka.test.TestUtils.waitForCondition(TestUtils.java:365)&lt;br/&gt;
at org.apache.kafka.test.TestUtils.waitForCondition(TestUtils.java:325)&lt;br/&gt;
at org.apache.kafka.streams.KafkaStreamsTest.shouldThrowOnCleanupWhileRunning(KafkaStreamsTest.java:556)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;java.lang.AssertionError: Condition not met within timeout 15000. Streams never started.&lt;br/&gt;
at org.apache.kafka.test.TestUtils.waitForCondition(TestUtils.java:365)&lt;br/&gt;
at org.apache.kafka.test.TestUtils.waitForCondition(TestUtils.java:325)&lt;br/&gt;
at org.apache.kafka.streams.KafkaStreamsTest.testStateThreadClose(KafkaStreamsTest.java:255)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;br/&gt;
The preserved logs are as follows:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,198&amp;#93;&lt;/span&gt; INFO Kafka version: 2.3.0-SNAPSHOT (org.apache.kafka.common.utils.AppInfoParser:109)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,198&amp;#93;&lt;/span&gt; INFO Kafka commitId: 08036fa4b1e5b822 (org.apache.kafka.common.utils.AppInfoParser:110)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,199&amp;#93;&lt;/span&gt; INFO stream-client &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId&amp;#93;&lt;/span&gt; State transition from CREATED to REBALANCING (org.apache.kafka.streams.KafkaStreams:263)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,200&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-238&amp;#93;&lt;/span&gt; Starting (org.apache.kafka.streams.processor.internals.StreamThread:767)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,200&amp;#93;&lt;/span&gt; INFO stream-client &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId&amp;#93;&lt;/span&gt; State transition from REBALANCING to PENDING_SHUTDOWN (org.apache.kafka.streams.KafkaStreams:263)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,200&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-239&amp;#93;&lt;/span&gt; Starting (org.apache.kafka.streams.processor.internals.StreamThread:767)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,200&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-238&amp;#93;&lt;/span&gt; State transition from CREATED to STARTING (org.apache.kafka.streams.processor.internals.StreamThread:214)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,200&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-239&amp;#93;&lt;/span&gt; State transition from CREATED to STARTING (org.apache.kafka.streams.processor.internals.StreamThread:214)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,200&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-238&amp;#93;&lt;/span&gt; Informed to shut down (org.apache.kafka.streams.processor.internals.StreamThread:1192)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,201&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-238&amp;#93;&lt;/span&gt; State transition from STARTING to PENDING_SHUTDOWN (org.apache.kafka.streams.processor.internals.StreamThread:214)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,201&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-239&amp;#93;&lt;/span&gt; Informed to shut down (org.apache.kafka.streams.processor.internals.StreamThread:1192)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,201&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-239&amp;#93;&lt;/span&gt; State transition from STARTING to PENDING_SHUTDOWN (org.apache.kafka.streams.processor.internals.StreamThread:214)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,205&amp;#93;&lt;/span&gt; INFO Cluster ID: J8uJhiTKQx-Y_i9LzT0iLg (org.apache.kafka.clients.Metadata:365)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,205&amp;#93;&lt;/span&gt; INFO Cluster ID: J8uJhiTKQx-Y_i9LzT0iLg (org.apache.kafka.clients.Metadata:365)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,205&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-238-consumer, groupId=appId&amp;#93;&lt;/span&gt; Discovered group coordinator localhost:36122 (id: 2147483647 rack: null) (org.apache.kafka.clients.consumer.internals.AbstractCoordinator:675)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,205&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-239-consumer, groupId=appId&amp;#93;&lt;/span&gt; Discovered group coordinator localhost:36122 (id: 2147483647 rack: null) (org.apache.kafka.clients.consumer.internals.AbstractCoordinator:675)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,206&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-238-consumer, groupId=appId&amp;#93;&lt;/span&gt; Revoking previously assigned partitions [] (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:458)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,206&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-239-consumer, groupId=appId&amp;#93;&lt;/span&gt; Revoking previously assigned partitions [] (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:458)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,206&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-238-consumer, groupId=appId&amp;#93;&lt;/span&gt; (Re-)joining group (org.apache.kafka.clients.consumer.internals.AbstractCoordinator:491)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,206&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-239-consumer, groupId=appId&amp;#93;&lt;/span&gt; (Re-)joining group (org.apache.kafka.clients.consumer.internals.AbstractCoordinator:491)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,208&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-239-consumer, groupId=appId&amp;#93;&lt;/span&gt; (Re-)joining group (org.apache.kafka.clients.consumer.internals.AbstractCoordinator:491)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,208&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-238-consumer, groupId=appId&amp;#93;&lt;/span&gt; (Re-)joining group (org.apache.kafka.clients.consumer.internals.AbstractCoordinator:491)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,278&amp;#93;&lt;/span&gt; INFO Cluster ID: J8uJhiTKQx-Y_i9LzT0iLg (org.apache.kafka.clients.Metadata:365)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,293&amp;#93;&lt;/span&gt; INFO Cluster ID: J8uJhiTKQx-Y_i9LzT0iLg (org.apache.kafka.clients.Metadata:365)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,301&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-239&amp;#93;&lt;/span&gt; Shutting down (org.apache.kafka.streams.processor.internals.StreamThread:1206)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,301&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-239-restore-consumer, groupId=null&amp;#93;&lt;/span&gt; Unsubscribed all topics or patterns and assigned partitions (org.apache.kafka.clients.consumer.KafkaConsumer:1042)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,301&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-238&amp;#93;&lt;/span&gt; Shutting down (org.apache.kafka.streams.processor.internals.StreamThread:1206)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,301&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-238-restore-consumer, groupId=null&amp;#93;&lt;/span&gt; Unsubscribed all topics or patterns and assigned partitions (org.apache.kafka.clients.consumer.KafkaConsumer:1042)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,302&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Producer clientId=clientId-StreamThread-238-producer&amp;#93;&lt;/span&gt; Closing the Kafka producer with timeoutMillis = 9223372036854775807 ms. (org.apache.kafka.clients.producer.KafkaProducer:1139)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,301&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Producer clientId=clientId-StreamThread-239-producer&amp;#93;&lt;/span&gt; Closing the Kafka producer with timeoutMillis = 9223372036854775807 ms. (org.apache.kafka.clients.producer.KafkaProducer:1139)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,863&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:18,766&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:19,769&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:20,872&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:21,775&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:22,678&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:23,882&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:24,885&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:25,888&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:26,991&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:28,095&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:28,998&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:29,901&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:31,004&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:32,108&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:33,311&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:34,515&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:35,718&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:36,921&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:37,924&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:38,927&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:40,029&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:41,232&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:42,235&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:43,337&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:44,340&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:45,442&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:46,444&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;AdminClient clientId=adminclient-233&amp;#93;&lt;/span&gt; Connection to node 0 (localhost/127.0.0.1:41539) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient:722)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:47,305&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-239-consumer, groupId=appId&amp;#93;&lt;/span&gt; Close timed out with 1 pending requests to coordinator, terminating client connections (org.apache.kafka.clients.consumer.internals.AbstractCoordinator:800)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:47,307&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-239&amp;#93;&lt;/span&gt; State transition from PENDING_SHUTDOWN to DEAD (org.apache.kafka.streams.processor.internals.StreamThread:214)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:47,307&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-239&amp;#93;&lt;/span&gt; Shutdown complete (org.apache.kafka.streams.processor.internals.StreamThread:1226)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:47,308&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=clientId-StreamThread-238-consumer, groupId=appId&amp;#93;&lt;/span&gt; Close timed out with 1 pending requests to coordinator, terminating client connections (org.apache.kafka.clients.consumer.internals.AbstractCoordinator:800)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:47,313&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-238&amp;#93;&lt;/span&gt; State transition from PENDING_SHUTDOWN to DEAD (org.apache.kafka.streams.processor.internals.StreamThread:214)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:47,313&amp;#93;&lt;/span&gt; INFO stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId-StreamThread-238&amp;#93;&lt;/span&gt; Shutdown complete (org.apache.kafka.streams.processor.internals.StreamThread:1226)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:47,315&amp;#93;&lt;/span&gt; INFO stream-client &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId&amp;#93;&lt;/span&gt; State transition from PENDING_SHUTDOWN to NOT_RUNNING (org.apache.kafka.streams.KafkaStreams:263)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:47,315&amp;#93;&lt;/span&gt; INFO stream-client &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId&amp;#93;&lt;/span&gt; Streams client stopped completely (org.apache.kafka.streams.KafkaStreams:899)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:47,316&amp;#93;&lt;/span&gt; INFO stream-client &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId&amp;#93;&lt;/span&gt; Already in the pending shutdown state, wait to complete shutdown (org.apache.kafka.streams.KafkaStreams:849)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:47,316&amp;#93;&lt;/span&gt; INFO stream-client &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId&amp;#93;&lt;/span&gt; Streams client stopped completely (org.apache.kafka.streams.KafkaStreams:899)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;br/&gt;
Note, that the instance goes from&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,199&amp;#93;&lt;/span&gt; INFO stream-client &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId&amp;#93;&lt;/span&gt; State transition from CREATED to REBALANCING (org.apache.kafka.streams.KafkaStreams:263)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-02-12 07:02:17,200&amp;#93;&lt;/span&gt; INFO stream-client &lt;span class=&quot;error&quot;&gt;&amp;#91;clientId&amp;#93;&lt;/span&gt; State transition from REBALANCING to PENDING_SHUTDOWN (org.apache.kafka.streams.KafkaStreams:263)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;in the very beginning. It&apos;s unclear why this happens. Note, that the log before the copied snipped is unfortunately not complete (thank you Jenkins):&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;...&lt;span class=&quot;error&quot;&gt;&amp;#91;truncated 1593438 chars&amp;#93;&lt;/span&gt;...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Later, `AdminClient` seems to not be able to connect to the brokers (also unclear why) and the test times out. If the `AdminClient` issue is related to the first issue is unclear atm).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13215293">KAFKA-7921</key>
            <summary>Instable KafkaStreamsTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mjsax">Matthias J. Sax</reporter>
                        <labels>
                            <label>flaky-test</label>
                    </labels>
                <created>Tue, 12 Feb 2019 17:38:11 +0000</created>
                <updated>Fri, 27 Sep 2019 19:09:58 +0000</updated>
                            <resolved>Mon, 20 May 2019 18:25:56 +0000</resolved>
                                    <version>2.3.0</version>
                                    <fixVersion>2.4.0</fixVersion>
                                    <component>streams</component>
                    <component>unit tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16766360" author="guozhang" created="Tue, 12 Feb 2019 19:31:55 +0000"  >&lt;p&gt;Note that in a recent commit we&apos;ve updated &lt;tt&gt;InternalTopicManager&lt;/tt&gt; so that if topic creation / list topics return fatal errors it would be logged. So if we did not find it in the logs it means not related to admin-client creating topics.&lt;/p&gt;

&lt;p&gt;The &quot;informed shutdown&quot; can only be triggered from two places: 1) KafkaStreams#close() call, which should not be the case (there&apos;s no caller at that time). or 2):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (streamThread.assignmentErrorCode.get() == StreamsPartitionAssignor.Error.INCOMPLETE_SOURCE_TOPIC_METADATA.code()) {
                log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Received error code {} - shutdown&quot;&lt;/span&gt;, streamThread.assignmentErrorCode.get());
                streamThread.shutdown();
                streamThread.setStateListener(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This indicates that the source topics are not available yet:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InternalTopologyBuilder.TopicsInfo topicsInfo : topicGroups.values()) {
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; topic : topicsInfo.sourceTopics) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!topicsInfo.repartitionSourceTopics.keySet().contains(topic) &amp;amp;&amp;amp;
                    !metadata.topics().contains(topic)) {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; errorAssignment(clientsMetadata, topic, Error.INCOMPLETE_SOURCE_TOPIC_METADATA.code);
                }
            }
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InternalTopicConfig topic: topicsInfo.repartitionSourceTopics.values()) {
                repartitionTopicMetadata.put(topic.name(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; InternalTopicMetadata(topic));
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;d suggest we upgrade DEBUG to ERROR logs on the above places when setting the error, as well as when receiving the error code to confirm. And in this case, inside &lt;tt&gt;KafkaStreamsTest&lt;/tt&gt; we should add waitForCondition to wait for source topics to be successfully created. Cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vvcephei&quot; class=&quot;user-hover&quot; rel=&quot;vvcephei&quot;&gt;vvcephei&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16766391" author="mjsax" created="Tue, 12 Feb 2019 19:55:43 +0000"  >&lt;p&gt;Can we do a &quot;two phase&quot; approach here? First only change the log level and wait until the test fails again to see if it&apos;s really a correct root cause analysis? And afterwards put the fix into the test?&lt;/p&gt;</comment>
                            <comment id="16766393" author="guozhang" created="Tue, 12 Feb 2019 19:56:43 +0000"  >&lt;p&gt;Yup that&apos;s what I proposed as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16766445" author="githubbot" created="Tue, 12 Feb 2019 20:54:28 +0000"  >&lt;p&gt;vvcephei commented on pull request #6262: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7921&quot; title=&quot;Instable KafkaStreamsTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7921&quot;&gt;&lt;del&gt;KAFKA-7921&lt;/del&gt;&lt;/a&gt;: log at error level for missing source topic&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6262&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This condition is a fatal error, so error level is warranted, to provide more context on why Streams shuts down.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16767548" author="githubbot" created="Wed, 13 Feb 2019 20:10:13 +0000"  >&lt;p&gt;guozhangwang commented on pull request #6262: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7921&quot; title=&quot;Instable KafkaStreamsTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7921&quot;&gt;&lt;del&gt;KAFKA-7921&lt;/del&gt;&lt;/a&gt;: log at error level for missing source topic&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6262&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16768810" author="mjsax" created="Thu, 14 Feb 2019 23:34:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vvcephei&quot; class=&quot;user-hover&quot; rel=&quot;vvcephei&quot;&gt;vvcephei&lt;/a&gt; Test failed again. Can you have a look: &lt;a href=&quot;https://builds.apache.org/blue/organizations/jenkins/kafka-2.2-jdk8/detail/kafka-2.2-jdk8/15/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/blue/organizations/jenkins/kafka-2.2-jdk8/detail/kafka-2.2-jdk8/15/tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16770190" author="mjsax" created="Sat, 16 Feb 2019 20:15:50 +0000"  >&lt;p&gt;One more:&#160;&lt;a href=&quot;https://builds.apache.org/job/kafka-pr-jdk8-scala2.11/19519/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/kafka-pr-jdk8-scala2.11/19519/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16772240" author="vvcephei" created="Tue, 19 Feb 2019 18:57:42 +0000"  >&lt;p&gt;I haven&apos;t seen a failure since we merged the PR to capture logs.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Checked:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/kafka-pr-jdk8-scala2.11/test_results_analyzer/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/kafka-pr-jdk8-scala2.11/test_results_analyzer/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/test_results_analyzer/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/test_results_analyzer/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16844190" author="cmccabe" created="Mon, 20 May 2019 18:25:56 +0000"  >&lt;p&gt;Let&apos;s re-open this if we see another failure.&lt;/p&gt;</comment>
                            <comment id="16939697" author="guozhang" created="Fri, 27 Sep 2019 19:09:45 +0000"  >&lt;p&gt;Should have been fixed via &lt;a href=&quot;https://github.com/apache/kafka/pull/7382&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7382&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 7 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0wmw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>