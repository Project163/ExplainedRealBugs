<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:49:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-2807] Movement of throughput throttler to common broke upgrade tests</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-2807</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In order to run compatibility tests with an 0.8.2 producer, and using VerifiableProducer, we use the 0.8.2 kafka-run-tools.sh classpath augmented by the 0.9.0 tools and tools dependencies classpaths.&lt;/p&gt;

&lt;p&gt;Recently, some refactoring efforts moved ThroughputThrottler to org.apache.kafka.common.utils package, but this breaks the existing compatibility tests:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.NoClassDefFoundError: org/apache/kafka/common/utils/ThroughputThrottler
        at org.apache.kafka.tools.VerifiableProducer.main(VerifiableProducer.java:334)
Caused by: java.lang.ClassNotFoundException: org.apache.kafka.common.utils.ThroughputThrottler
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:425)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:358)
        ... 1 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Given the need to be able to run VerifiableProducer against 0.8.X, I&apos;m not sure VerifiableProducer can depend on org.apache.kafka.common.utils at this point in time. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12912082">KAFKA-2807</key>
            <summary>Movement of throughput throttler to common broke upgrade tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ewencp">Ewen Cheslack-Postava</assignee>
                                    <reporter username="granders">Geoff Anderson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Nov 2015 07:11:31 +0000</created>
                <updated>Fri, 24 Feb 2023 23:24:26 +0000</updated>
                            <resolved>Thu, 12 Nov 2015 19:13:46 +0000</resolved>
                                                    <fixVersion>0.9.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15000934" author="ewencp" created="Wed, 11 Nov 2015 19:24:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=geoffra&quot; class=&quot;user-hover&quot; rel=&quot;geoffra&quot;&gt;geoffra&lt;/a&gt; Hmm, I moved it into common because that seemed the logical place given it was now to be used by both tools and copycat-tools classes. I think we could probably resolve this by moving it back to tools and have copycat-tools depend on tools. It&apos;s a little awkward, but I don&apos;t think would cause any problems for copycat-tools.&lt;/p&gt;</comment>
                            <comment id="15000969" author="nehanarkhede" created="Wed, 11 Nov 2015 19:47:24 +0000"  >&lt;p&gt;We don&apos;t want our tests to fail, so marking this as a blocker.&lt;/p&gt;</comment>
                            <comment id="15001091" author="githubbot" created="Wed, 11 Nov 2015 21:08:13 +0000"  >&lt;p&gt;GitHub user ewencp opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/499&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/499&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2807&quot; title=&quot;Movement of throughput throttler to common broke upgrade tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2807&quot;&gt;&lt;del&gt;KAFKA-2807&lt;/del&gt;&lt;/a&gt;: Move ThroughputThrottler back to tools jar to fix upgrade tests.&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ewencp/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ewencp/kafka&lt;/a&gt; kafka-2807-relocate-throughput-throttler&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/499.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/499.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #499&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 410e876f2466c0fabd2c5e3a1ba9252375a35939&lt;br/&gt;
Author: Ewen Cheslack-Postava &amp;lt;me@ewencp.org&amp;gt;&lt;br/&gt;
Date:   2015-11-11T20:14:49Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2807&quot; title=&quot;Movement of throughput throttler to common broke upgrade tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2807&quot;&gt;&lt;del&gt;KAFKA-2807&lt;/del&gt;&lt;/a&gt;: Move ThroughputThrottler back to tools jar to fix upgrade tests.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15001094" author="ewencp" created="Wed, 11 Nov 2015 21:09:54 +0000"  >&lt;p&gt;Tested the upgrade test and a copycat test locally, we can rerun the full suite if necessary. This patch required a bit of renaming in the build file because Gradle does not like : in project names.&lt;/p&gt;</comment>
                            <comment id="15001357" author="githubbot" created="Wed, 11 Nov 2015 23:55:38 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/499&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/499&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15001358" author="gwenshap" created="Wed, 11 Nov 2015 23:55:40 +0000"  >&lt;p&gt;Issue resolved by pull request 499&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/499&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/499&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15002636" author="ewencp" created="Thu, 12 Nov 2015 18:55:40 +0000"  >&lt;p&gt;Turns out the original patch actually broke things. The way the projects are named with colons is important in gradle and renaming them actually pointed the projects at the wrong directories.&lt;/p&gt;

&lt;p&gt;Fundamentally, the issue turns out to be a limitation of gradle. It identifies projects by group (i.e. org.apache.kafka) and the last component of the name (e.g. :connect:tools is identified by the tuple (org.apache.kafka, tools). This means that having a top-level tools project and tools within a subproject like connect:tools makes it impossible to get gradle to express a dependency of :connect:tools on :tools. See &lt;a href=&quot;https://discuss.gradle.org/t/dependency-substitution-wrong-with-more-than-one-sub-project-with-same-name/7253/6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://discuss.gradle.org/t/dependency-substitution-wrong-with-more-than-one-sub-project-with-same-name/7253/6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15002638" author="githubbot" created="Thu, 12 Nov 2015 18:55:59 +0000"  >&lt;p&gt;GitHub user ewencp opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/512&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/512&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2807&quot; title=&quot;Movement of throughput throttler to common broke upgrade tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2807&quot;&gt;&lt;del&gt;KAFKA-2807&lt;/del&gt;&lt;/a&gt;: Fix Kafka Connect packaging and move VerifiableSource/Sink into runtime jar.&lt;/p&gt;

&lt;p&gt;    Gradle does not handle subprojects with the same name (top-level tools vs&lt;br/&gt;
    connect/tools) properly, making the dependency impossible to express correctly&lt;br/&gt;
    since we need to move the ThroughputThrottler class into the top level tools&lt;br/&gt;
    project. Moving the current set of tools into the runtime jar works fine since&lt;br/&gt;
    they are only used for system tests at the moment.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ewencp/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ewencp/kafka&lt;/a&gt; kafka-2807-redux&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/512.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/512.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #512&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7632c27cb5583d285aa66a9d2bf0510139666b41&lt;br/&gt;
Author: Ewen Cheslack-Postava &amp;lt;me@ewencp.org&amp;gt;&lt;br/&gt;
Date:   2015-11-12T18:25:33Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2807&quot; title=&quot;Movement of throughput throttler to common broke upgrade tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2807&quot;&gt;&lt;del&gt;KAFKA-2807&lt;/del&gt;&lt;/a&gt;: Fix Kafka Connect packaging and move VerifiableSource/Sink into runtime jar.&lt;/p&gt;

&lt;p&gt;    Gradle does not handle subprojects with the same name (top-level tools vs&lt;br/&gt;
    connect/tools) properly, making the dependency impossible to express correctly&lt;br/&gt;
    since we need to move the ThroughputThrottler class into the top level tools&lt;br/&gt;
    project. Moving the current set of tools into the runtime jar works fine since&lt;br/&gt;
    they are only used for system tests at the moment.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15002675" author="gwenshap" created="Thu, 12 Nov 2015 19:13:46 +0000"  >&lt;p&gt;Issue resolved by pull request 512&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/512&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/512&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15002676" author="githubbot" created="Thu, 12 Nov 2015 19:13:49 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/512&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/512&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13526131">KAFKA-14760</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o8e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>gwenshap</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>