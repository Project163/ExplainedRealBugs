<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:25:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-10274] Transaction system test uses inconsistent timeouts</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-10274</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;We&apos;ve seen some failures in the transaction system test with errors like the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
copier-1 : Message copier didn&apos;t make enough progress in 30s. Current progress: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Looking at the consumer logs, we see the following messages repeating over and over:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2020-07-14 06:50:21,466] DEBUG [Consumer clientId=consumer-transactions-test-consumer-group-1, groupId=transactions-test-consumer-group] Fetching committed offsets &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; partitions: [input-topic-1] (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator)
[2020-07-14 06:50:21,468] DEBUG [Consumer clientId=consumer-transactions-test-consumer-group-1, groupId=transactions-test-consumer-group] Failed to fetch offset &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; partition input-topic-1: There are unstable offsets that need to be cleared. (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think the problem is that the test implicitly depends on the transaction timeout which has been configured to 40s even though it expects progress after 30s.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13316784">KAFKA-10274</key>
            <summary>Transaction system test uses inconsistent timeouts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hachikuji">Jason Gustafson</assignee>
                                    <reporter username="hachikuji">Jason Gustafson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jul 2020 23:16:50 +0000</created>
                <updated>Wed, 22 Jul 2020 19:11:33 +0000</updated>
                            <resolved>Wed, 22 Jul 2020 19:11:33 +0000</resolved>
                                                    <fixVersion>2.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17157746" author="hachikuji" created="Tue, 14 Jul 2020 23:30:24 +0000"  >&lt;p&gt;Looks like this issue was already fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-10235&quot; title=&quot;Fix flaky transactions_test.py&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-10235&quot;&gt;&lt;del&gt;KAFKA-10235&lt;/del&gt;&lt;/a&gt; and I had an older branch. Closing as a duplicate&lt;/p&gt;</comment>
                            <comment id="17157750" author="hachikuji" created="Tue, 14 Jul 2020 23:39:29 +0000"  >&lt;p&gt;Apologies for the noise, but I&apos;m going to reopen this. The recent fix addressed the issue with the transaction timeout exceeding the wait time, but it also opened the door again to the issue reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9802&quot; title=&quot;Fix flaky system test `TransactionsTest.test_transactions`&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9802&quot;&gt;&lt;del&gt;KAFKA-9802&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="17161519" author="vvcephei" created="Mon, 20 Jul 2020 20:34:41 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt; ,&lt;/p&gt;

&lt;p&gt;I&apos;m trying to get a green system test build for the 2.5.1 release, and this test seems to be failing quite a bit in the last few days.&lt;/p&gt;

&lt;p&gt;I see that you already fixed the test back in May in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9802&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-9802&lt;/a&gt; for 2.5.1, and that you theorized that &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-10235&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-10235&lt;/a&gt; may have re-introduced the test failure.&lt;/p&gt;

&lt;p&gt;It doesn&apos;t look like &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-10235&quot; title=&quot;Fix flaky transactions_test.py&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-10235&quot;&gt;&lt;del&gt;KAFKA-10235&lt;/del&gt;&lt;/a&gt; was backported to 2.5. Maybe it should have been, but then again, your last comment makes me think that we still need your current fix on top of it.&lt;/p&gt;

&lt;p&gt;What do you think we should do here? Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-10235&quot; title=&quot;Fix flaky transactions_test.py&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-10235&quot;&gt;&lt;del&gt;KAFKA-10235&lt;/del&gt;&lt;/a&gt; and then the PR for this ticket once it&apos;s merged?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-John&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;PS, the results I looked at:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://confluent-kafka-2-5-system-test-results.s3-us-west-2.amazonaws.com/2020-07-18--001.1595065230--confluentinc--2.5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://confluent-kafka-2-5-system-test-results.s3-us-west-2.amazonaws.com/2020-07-18--001.1595065230--confluentinc--2.5&lt;/a&gt;&#8211;21e17cd14/report.html&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://confluent-kafka-2-5-system-test-results.s3-us-west-2.amazonaws.com/2020-07-19--001.1595151548--confluentinc--2.5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://confluent-kafka-2-5-system-test-results.s3-us-west-2.amazonaws.com/2020-07-19--001.1595151548--confluentinc--2.5&lt;/a&gt;&#8211;21e17cd14/report.html&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://confluent-kafka-2-5-system-test-results.s3-us-west-2.amazonaws.com/2020-07-20--001.1595238538--confluentinc--2.5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://confluent-kafka-2-5-system-test-results.s3-us-west-2.amazonaws.com/2020-07-20--001.1595238538--confluentinc--2.5&lt;/a&gt;&#8211;21e17cd14/report.html&lt;/p&gt;

&lt;p&gt;from &lt;a href=&quot;https://jenkins.confluent.io/job/system-test-kafka/job/2.5/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.confluent.io/job/system-test-kafka/job/2.5/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17161560" author="vvcephei" created="Mon, 20 Jul 2020 21:38:21 +0000"  >&lt;p&gt;FWIW, I cherry-picked both of these fixes on top of 2.5:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka/compare/2.5...vvcephei:2.5-fix-transactional-test?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/compare/2.5...vvcephei:2.5-fix-transactional-test?expand=1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And the test passes for me locally.&lt;/p&gt;

&lt;p&gt;I&apos;m running the whole transactions_test x5 to be sure: &lt;a href=&quot;https://jenkins.confluent.io/job/system-test-kafka-branch-builder/4056/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.confluent.io/job/system-test-kafka-branch-builder/4056/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17163024" author="junrao" created="Wed, 22 Jul 2020 19:11:33 +0000"  >&lt;p&gt;Merged this to trunk and 2.6 branch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13315036">KAFKA-10235</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0grd4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>