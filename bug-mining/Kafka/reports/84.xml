<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:35:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-490] Check max message size on server instead of producer</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-490</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Message size is checked currently only in SyncProducer and not at the server. Therefore, non-java clients can push bigger messages to the server. Need a message size check at the server. Can remove the check from producer side since server can send acks in 0.8.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12605302">KAFKA-490</key>
            <summary>Check max message size on server instead of producer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="swapnilghike">Swapnil Ghike</assignee>
                                    <reporter username="swapnilghike">Swapnil Ghike</reporter>
                        <labels>
                            <label>bug</label>
                    </labels>
                <created>Tue, 28 Aug 2012 21:44:48 +0000</created>
                <updated>Wed, 12 Sep 2012 01:31:08 +0000</updated>
                            <resolved>Wed, 12 Sep 2012 01:31:04 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="172800">48h</timeoriginalestimate>
                            <timeestimate seconds="172800">48h</timeestimate>
                                        <comments>
                            <comment id="13445540" author="swapnilghike" created="Fri, 31 Aug 2012 01:06:32 +0000"  >&lt;p&gt;1. The changes in Log are mostly similar to those in Kafka-469. &lt;/p&gt;

&lt;p&gt;2. In addition to that, I have removed the message size check in producer. &lt;/p&gt;

&lt;p&gt;3. Now, the broker returns an error code for MessageSizeTooLargeException, this is logged as an error in the broker just like the other exception cases. &lt;/p&gt;

&lt;p&gt;4. The producer on receiving the MessageSizeTooLargeCode logs a warning producerRetries times, and eventually logs a &quot;failed to send request&quot; error. &lt;/p&gt;

&lt;p&gt;5. Since there is no point in re-sending a message that was previously declined by the broker due to its size, we could return the errorcode along with every (topic, partition) pair. Any pair with MessageSizeTooLargeCode error could be excluded from further attempts of re-transmission. However, this feels like a hack only for the sake of preventing large messages from being re-transmitted. If we are to do anything along this line, then we are better off preventing them from transmitting in the first place. &lt;/p&gt;

&lt;p&gt;6. A unit test in LogTest to check maxMessageSize in Log.append.&lt;/p&gt;

&lt;p&gt;7. A unit test in SyncProducer to check for MessageSizeTooLargeCode in response.&lt;/p&gt;</comment>
                            <comment id="13447753" author="junrao" created="Tue, 4 Sep 2012 15:30:23 +0000"  >&lt;p&gt;Thanks for patch v1. Some comments:&lt;/p&gt;

&lt;p&gt;1. DefaultEventHandler.send(): We should log a warning if we get any error in the response, not just for MessageSizeTooLarge.&lt;/p&gt;

&lt;p&gt;2. KafkaApis: &lt;br/&gt;
2.1 Is the change in the file necessary?&lt;br/&gt;
2.2 handleProducerRequest(): If produceToLocalLog() returns a response with an error code on every partition, we can send the response immediately without putting the request into the purgatory. &lt;/p&gt;

&lt;p&gt;3. SyncProducer.send(): We can get rid of the 2 for loops here. &lt;/p&gt;</comment>
                            <comment id="13449363" author="swapnilghike" created="Thu, 6 Sep 2012 02:09:22 +0000"  >&lt;p&gt;attached the modified patch. I dont know if it will need a rebase, svn is still down.&lt;/p&gt;</comment>
                            <comment id="13450793" author="jjkoshy" created="Fri, 7 Sep 2012 17:02:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Looks good to me. The git mirror should have the latest svn revision, and v2 applies cleanly on that.&lt;/p&gt;</comment>
                            <comment id="13453624" author="junrao" created="Wed, 12 Sep 2012 01:31:04 +0000"  >&lt;p&gt;Thanks for the patch. Committed to 0.8.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12543215" name="kafka-490-v1.patch" size="17886" author="swapnilghike" created="Fri, 31 Aug 2012 01:06:32 +0000"/>
                            <attachment id="12543970" name="kafka-490-v2.patch" size="17946" author="swapnilghike" created="Thu, 6 Sep 2012 02:09:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>299146</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i15zvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243113</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>