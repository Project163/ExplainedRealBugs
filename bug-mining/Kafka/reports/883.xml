<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:50:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-2880] Fetcher.getTopicMetadata NullPointerException when broker cannot be reached</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-2880</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The Fetcher class will throw a NullPointerException if a broker cannot be reached:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException&lt;br/&gt;
        at org.apache.kafka.common.requests.MetadataResponse.&amp;lt;init&amp;gt;(MetadataResponse.java:130)&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.Fetcher.getTopicMetadata(Fetcher.java:203)&lt;br/&gt;
        at org.apache.kafka.clients.consumer.KafkaConsumer.partitionsFor(KafkaConsumer.java:1143)&lt;br/&gt;
        at org.apache.kafka.connect.util.KafkaBasedLog.start(KafkaBasedLog.java:126)&lt;br/&gt;
        at org.apache.kafka.connect.storage.KafkaOffsetBackingStore.start(KafkaOffsetBackingStore.java:85)&lt;br/&gt;
        at org.apache.kafka.connect.runtime.Worker.start(Worker.java:108)&lt;br/&gt;
        at org.apache.kafka.connect.runtime.Connect.start(Connect.java:56)&lt;br/&gt;
        at org.apache.kafka.connect.cli.ConnectDistributed.main(ConnectDistributed.java:62)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is trivially reproduced by trying to start Kafka Connect in distributed mode (i.e. connect-distributed.sh config/connect-distributed.properties) with no broker running. However, it&apos;s not specific to Kafka Connect, it just happens to use the consumer in a way that triggers it reliably.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12915641">KAFKA-2880</key>
            <summary>Fetcher.getTopicMetadata NullPointerException when broker cannot be reached</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hachikuji">Jason Gustafson</assignee>
                                    <reporter username="ewencp">Ewen Cheslack-Postava</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2015 00:13:27 +0000</created>
                <updated>Thu, 24 Dec 2015 07:49:43 +0000</updated>
                            <resolved>Wed, 2 Dec 2015 19:28:12 +0000</resolved>
                                    <version>0.9.0.0</version>
                                    <fixVersion>0.9.0.1</fixVersion>
                                    <component>clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15023729" author="hachikuji" created="Tue, 24 Nov 2015 03:50:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ewencp&quot; class=&quot;user-hover&quot; rel=&quot;ewencp&quot;&gt;ewencp&lt;/a&gt; Looks like we&apos;re missing a disconnect check on the client response. Looking over the code, error handling for the listTopics() and partitionsFor() API clearly hasn&apos;t been given enough attention. How about we expand the scope of this ticket to include the following cases?&lt;/p&gt;

&lt;p&gt;1. Unauthorized topics: raise TopicAuthorizationException&lt;br/&gt;
2. Miscellaneous topic errors (e.g. leader/replica not available): retry until request timeout expires&lt;br/&gt;
3. Disconnect errors: retry until request timeout expires&lt;br/&gt;
4. Request timeout: raise TimeoutException&lt;/p&gt;</comment>
                            <comment id="15023766" author="ewencp" created="Tue, 24 Nov 2015 04:46:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt; Agreed, makes sense to round out error handling in general for those APIs.&lt;/p&gt;</comment>
                            <comment id="15024938" author="githubbot" created="Tue, 24 Nov 2015 17:42:08 +0000"  >&lt;p&gt;GitHub user hachikuji opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/581&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/581&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2880&quot; title=&quot;Fetcher.getTopicMetadata NullPointerException when broker cannot be reached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2880&quot;&gt;&lt;del&gt;KAFKA-2880&lt;/del&gt;&lt;/a&gt;: consumer should handle disconnect/timeout for metadata requests&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hachikuji/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hachikuji/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2880&quot; title=&quot;Fetcher.getTopicMetadata NullPointerException when broker cannot be reached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2880&quot;&gt;&lt;del&gt;KAFKA-2880&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/581.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/581.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #581&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 605641249dc289ae7e8d7e003cd0e1f35367abad&lt;br/&gt;
Author: Jason Gustafson &amp;lt;jason@confluent.io&amp;gt;&lt;br/&gt;
Date:   2015-11-24T01:45:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2880&quot; title=&quot;Fetcher.getTopicMetadata NullPointerException when broker cannot be reached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2880&quot;&gt;&lt;del&gt;KAFKA-2880&lt;/del&gt;&lt;/a&gt;: consumer should handle disconnect/timeout for metadata requests&lt;/p&gt;

&lt;p&gt;commit 851c9b3877b337c83e88f4c4100383129f83222c&lt;br/&gt;
Author: Jason Gustafson &amp;lt;jason@confluent.io&amp;gt;&lt;br/&gt;
Date:   2015-11-24T17:40:00Z&lt;/p&gt;

&lt;p&gt;    additional error handling/test cases for topic metadata API&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15036424" author="githubbot" created="Wed, 2 Dec 2015 19:27:56 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/581&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/581&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15036425" author="guozhang" created="Wed, 2 Dec 2015 19:28:12 +0000"  >&lt;p&gt;Issue resolved by pull request 581&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/581&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/581&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15049289" author="drsmith" created="Wed, 9 Dec 2015 19:52:13 +0000"  >&lt;p&gt;Looks like it&apos;s already documented, but ran into this same issue with listTopics:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;! Caused by: java.lang.NullPointerException
! at org.apache.kafka.common.requests.MetadataResponse.&amp;lt;init&amp;gt;(MetadataResponse.java:130)
! at org.apache.kafka.clients.consumer.internals.Fetcher.getTopicMetadata(Fetcher.java:203)
! at org.apache.kafka.clients.consumer.internals.Fetcher.getAllTopicMetadata(Fetcher.java:180)
! at org.apache.kafka.clients.consumer.KafkaConsumer.listTopics(KafkaConsumer.java:1162)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15049298" author="guozhang" created="Wed, 9 Dec 2015 20:00:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=drsmith&quot; class=&quot;user-hover&quot; rel=&quot;drsmith&quot;&gt;drsmith&lt;/a&gt; This is fixed in current trunk, which will be included in the next point release (0.9.0.1).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12924157">KAFKA-3041</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ou9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>