<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:33:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-15102] Mirror Maker 2 - KIP690 backward compatibility</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-15102</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;According to KIP690, &quot;When users upgrade an existing MM2 cluster they don&#8217;t need to change any of their current configuration as this proposal maintains the default behaviour for MM2.&quot;&lt;/p&gt;

&lt;p&gt;Now, the separator is subject to customization.&lt;/p&gt;

&lt;p&gt;As a consequence, when an MM2 upgrade is performed, if the separator was customized with replication.policy.separator, the name of this internal topic changes. It then generates issues like:&lt;br/&gt;
Caused by: java.util.concurrent.ExecutionException: org.apache.kafka.common.errors.InvalidTopicException: Topic &apos;mm2-offset-syncs_bkts28_internal&apos; collides with existing topics: mm2-offset-syncs.bkts28.internal&lt;/p&gt;

&lt;p&gt;It has been observed that the replication can then be broken sometimes several days after the upgrade (reason not identified). By deleting the old topic name, it recovers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13540564">KAFKA-15102</key>
            <summary>Mirror Maker 2 - KIP690 backward compatibility</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="omnia_h_ibrahim">Omnia Ibrahim</assignee>
                                    <reporter username="ddufour1a">David Dufour</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jun 2023 07:26:36 +0000</created>
                <updated>Tue, 5 Dec 2023 17:24:16 +0000</updated>
                            <resolved>Tue, 15 Aug 2023 23:59:51 +0000</resolved>
                                    <version>3.1.0</version>
                                    <fixVersion>3.1.3</fixVersion>
                    <fixVersion>3.2.4</fixVersion>
                    <fixVersion>3.3.3</fixVersion>
                    <fixVersion>3.4.2</fixVersion>
                    <fixVersion>3.5.2</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                    <component>mirrormaker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17738733" author="chrisegerton" created="Thu, 29 Jun 2023 18:42:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ddufour1a&quot; class=&quot;user-hover&quot; rel=&quot;ddufour1a&quot;&gt;ddufour1a&lt;/a&gt; Thanks for raising this. I believe if we wanted to preserve backward compatibility perfectly, we would have had to ignore the custom separator when creating topics affected by KIP-690, and possibly introduced separate opt-in configuration logic to disable that behavior (i.e., resume taking custom separators into account, even for topics that were not affected prior to KIP-690).&lt;/p&gt;

&lt;p&gt;However, since 3.1.0 came out a year and a half ago, things are less cut-and-dry: there may be more negative fallout for users who are accustomed to the current behavior than what&apos;s currently being experienced by those who are used to the previous behavior.&lt;/p&gt;

&lt;p&gt;One possibility could be to revert to older behavior for the remainder of our 3.x.y releases with a single configuration property such as &lt;tt&gt;replication.policy.internal.topic.separator.enabled&lt;/tt&gt; that defaults to &lt;tt&gt;false&lt;/tt&gt; for now and, come 4.0, defaults to &lt;tt&gt;true&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omnia_h_ibrahim&quot; class=&quot;user-hover&quot; rel=&quot;omnia_h_ibrahim&quot;&gt;omnia_h_ibrahim&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mimaison&quot; class=&quot;user-hover&quot; rel=&quot;mimaison&quot;&gt;mimaison&lt;/a&gt; do either of you have thoughts on how to approach this accidental break in compatibility? It&apos;s probably worth bringing this up in a discussion thread on the user/dev mailing lists, but I&apos;d rather get some feedback on a potential fix before bringing this before a larger audience.&lt;/p&gt;</comment>
                            <comment id="17738744" author="omnia_h_ibrahim" created="Thu, 29 Jun 2023 18:59:52 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ddufour1a&quot; class=&quot;user-hover&quot; rel=&quot;ddufour1a&quot;&gt;ddufour1a&lt;/a&gt; for raising this. The backward compatibility mentioned in the KIP accounted only for using the default separator configuration and didn&apos;t address the usage custom separator (my mistake here). &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ChrisEgerton&quot; class=&quot;user-hover&quot; rel=&quot;ChrisEgerton&quot;&gt;ChrisEgerton&lt;/a&gt; I think having `&lt;tt&gt;replication.policy.internal.topic.separator.enabled` is a good option.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;We can also update the backward compatibility section in KIP-690 to ask users to provide a custom implementation that the override `ReplicationPolicy.&lt;/tt&gt;offsetSyncsTopic`and `ReplicationPolicy.checkpointsTopic` methods to use old topics if they still want to use the old internal topics or delete them so they are aware of this issue.&lt;/p&gt;</comment>
                            <comment id="17739146" author="chrisegerton" created="Fri, 30 Jun 2023 15:49:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omnia_h_ibrahim&quot; class=&quot;user-hover&quot; rel=&quot;omnia_h_ibrahim&quot;&gt;omnia_h_ibrahim&lt;/a&gt; Good call &#128077; we should definitely update the compatibility section in the KIP to mention this. We may also want list the affected versions and link to this issue for further context.&lt;/p&gt;</comment>
                            <comment id="17739924" author="omnia_h_ibrahim" created="Tue, 4 Jul 2023 13:28:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ChrisEgerton&quot; class=&quot;user-hover&quot; rel=&quot;ChrisEgerton&quot;&gt;ChrisEgerton&lt;/a&gt; I updated the compatibility section in the KIP with the impacted versions and linked to this JIRA. I can open a small KIP to have `&lt;tt&gt;replication.policy.internal.topic.separator.enabled` if you don&apos;t have time to do it. {&lt;/tt&gt;}&lt;/p&gt;</comment>
                            <comment id="17740248" author="chrisegerton" created="Wed, 5 Jul 2023 14:53:37 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omnia_h_ibrahim&quot; class=&quot;user-hover&quot; rel=&quot;omnia_h_ibrahim&quot;&gt;omnia_h_ibrahim&lt;/a&gt;, I&apos;d love it if you could take on that KIP!&lt;/p&gt;</comment>
                            <comment id="17740252" author="omnia_h_ibrahim" created="Wed, 5 Jul 2023 15:01:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ChrisEgerton&quot; class=&quot;user-hover&quot; rel=&quot;ChrisEgerton&quot;&gt;ChrisEgerton&lt;/a&gt; I&apos;ll prepare the KIP this week.&lt;/p&gt;</comment>
                            <comment id="17740663" author="chrisegerton" created="Thu, 6 Jul 2023 15:18:27 +0000"  >&lt;p&gt;&#128175; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omnia_h_ibrahim&quot; class=&quot;user-hover&quot; rel=&quot;omnia_h_ibrahim&quot;&gt;omnia_h_ibrahim&lt;/a&gt; I&apos;ve assigned you this ticket so nobody else picks it up by mistake; feel free to unassign if you no longer want to work on this.&lt;/p&gt;</comment>
                            <comment id="17741402" author="omnia_h_ibrahim" created="Sun, 9 Jul 2023 15:54:24 +0000"  >&lt;p&gt;I opened this small KIP to fix this &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-949%3A+Add+flag+to+enable+the+usage+of+topic+separator+in+MM2+DefaultReplicationPolicy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/KIP-949%3A+Add+flag+to+enable+the+usage+of+topic+separator+in+MM2+DefaultReplicationPolicy&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17750371" author="omnia_h_ibrahim" created="Wed, 2 Aug 2023 15:05:13 +0000"  >&lt;p&gt;The KIP got accepted and the PR is ready&lt;/p&gt;</comment>
                            <comment id="17750598" author="ddufour1a" created="Thu, 3 Aug 2023 06:55:30 +0000"  >&lt;p&gt;Thanks for this&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 14 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1in00:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>