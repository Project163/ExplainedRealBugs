<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:52:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3088] 0.9.0.0 broker crash on receipt of produce request with empty client ID</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3088</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Sending a produce request with an empty client ID to a 0.9.0.0 broker causes the broker to crash as shown below.  More details can be found in the following email thread:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/kafka-users/201601.mbox/%3c5693ECD9.4050400@dspeterson.com%3e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/kafka-users/201601.mbox/%3c5693ECD9.4050400@dspeterson.com%3e&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;2016-01-10 23:03:44,957&amp;#93;&lt;/span&gt; ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;KafkaApi-3&amp;#93;&lt;/span&gt; error when handling request Name: ProducerRequest; Version: 0; CorrelationId: 1; ClientId: null; RequiredAcks: 1; AckTimeoutMs: 10000 ms; TopicAndPartition: &lt;span class=&quot;error&quot;&gt;&amp;#91;topic_1,3&amp;#93;&lt;/span&gt; -&amp;gt; 37 (kafka.server.KafkaApis)&lt;br/&gt;
   java.lang.NullPointerException&lt;br/&gt;
          at org.apache.kafka.common.metrics.JmxReporter.getMBeanName(JmxReporter.java:127)&lt;br/&gt;
          at org.apache.kafka.common.metrics.JmxReporter.addAttribute(JmxReporter.java:106)&lt;br/&gt;
          at org.apache.kafka.common.metrics.JmxReporter.metricChange(JmxReporter.java:76)&lt;br/&gt;
          at org.apache.kafka.common.metrics.Metrics.registerMetric(Metrics.java:288)&lt;br/&gt;
          at org.apache.kafka.common.metrics.Sensor.add(Sensor.java:177)&lt;br/&gt;
          at org.apache.kafka.common.metrics.Sensor.add(Sensor.java:162)&lt;br/&gt;
          at kafka.server.ClientQuotaManager.getOrCreateQuotaSensors(ClientQuotaManager.scala:209)&lt;br/&gt;
          at kafka.server.ClientQuotaManager.recordAndMaybeThrottle(ClientQuotaManager.scala:111)&lt;br/&gt;
          at kafka.server.KafkaApis.kafka$server$KafkaApis$$sendResponseCallback$2(KafkaApis.scala:353)&lt;br/&gt;
          at kafka.server.KafkaApis$$anonfun$handleProducerRequest$1.apply(KafkaApis.scala:371)&lt;br/&gt;
          at kafka.server.KafkaApis$$anonfun$handleProducerRequest$1.apply(KafkaApis.scala:371)&lt;br/&gt;
          at kafka.server.ReplicaManager.appendMessages(ReplicaManager.scala:348)&lt;br/&gt;
          at kafka.server.KafkaApis.handleProducerRequest(KafkaApis.scala:366)&lt;br/&gt;
          at kafka.server.KafkaApis.handle(KafkaApis.scala:68)&lt;br/&gt;
          at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:60)&lt;br/&gt;
          at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12929255">KAFKA-3088</key>
            <summary>0.9.0.0 broker crash on receipt of produce request with empty client ID</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="granthenke">Grant Henke</assignee>
                                    <reporter username="dspeterson">Dave Peterson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Jan 2016 19:01:24 +0000</created>
                <updated>Sat, 14 May 2016 08:22:43 +0000</updated>
                            <resolved>Tue, 16 Feb 2016 19:41:43 +0000</resolved>
                                    <version>0.9.0.0</version>
                                    <fixVersion>0.9.0.2</fixVersion>
                    <fixVersion>0.10.0.0</fixVersion>
                                    <component>producer </component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15110812" author="ijuma" created="Thu, 21 Jan 2016 15:52:45 +0000"  >&lt;p&gt;Since clientId is used in quotas, logging and a few other places, it is a good practice to pass one. There are two possible paths here:&lt;/p&gt;

&lt;p&gt;1. Change `null` to an empty String internally and avoid this and other NPEs as the code generally assumes that clientId is not null.&lt;br/&gt;
2. Make clientId a required field, return a more meaningful error and add a note to the upgrade notes.&lt;/p&gt;

&lt;p&gt;Some additional information, the clientId is generated by the Java clients if not provided by the user like the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&quot;consumer-&quot; + CONSUMER_CLIENT_ID_SEQUENCE.getAndIncrement()&lt;/li&gt;
	&lt;li&gt;&quot;producer-&quot; + PRODUCER_CLIENT_ID_SEQUENCE.getAndIncrement();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also, it&apos;s interesting the the old Consumer used the following regex to validate the clientId (while the new clients don&apos;t seem to do any validation): &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;a-zA-Z0-9\\._\\-&amp;#93;&lt;/span&gt;&quot;.&lt;/p&gt;

&lt;p&gt;Thoughts &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ewencp&quot; class=&quot;user-hover&quot; rel=&quot;ewencp&quot;&gt;ewencp&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15110837" author="dspeterson" created="Thu, 21 Jan 2016 16:09:13 +0000"  >&lt;p&gt;Without being familiar with the code and how much work each option would involve, option 1 seems preferable.  If option 2 were chosen, the ideal thing would be to send an error response rather than just throwing, but implementing that might involve more work.&lt;/p&gt;</comment>
                            <comment id="15110850" author="ijuma" created="Thu, 21 Jan 2016 16:20:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dspeterson&quot; class=&quot;user-hover&quot; rel=&quot;dspeterson&quot;&gt;dspeterson&lt;/a&gt;, I used the word &quot;throw&quot; a bit loosely there. I changed it to &quot;return&quot;.&lt;/p&gt;</comment>
                            <comment id="15110864" author="dspeterson" created="Thu, 21 Jan 2016 16:30:16 +0000"  >&lt;p&gt;Ok, gotcha &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Option 1 still seems preferable, since option 2 would require client-side work to do something meaningful on receipt of such an error.  But either option seems fine, and would be a big improvement over current behavior.&lt;/p&gt;</comment>
                            <comment id="15110952" author="guozhang" created="Thu, 21 Jan 2016 17:22:31 +0000"  >&lt;p&gt;Right now the client-id is guaranteed not-null at the client side (producer / consumer will throw exceptions, streams will set a default clientid, etc), so the server does not check this. Using an empty string to replace null at the request protocol layer has a risk that multiple clients will be treated as one to the server (&quot;&quot; is treated as a valid string today), so going with option 1 we need to also add a check on the server side with empty string to reject the request.&lt;/p&gt;</comment>
                            <comment id="15110959" author="ijuma" created="Thu, 21 Jan 2016 17:28:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt;, you are talking about the Java clients, but we have lots of other clients that don&apos;t guarantee this. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Some of them assume that client id can be null because we don&apos;t specify that it&apos;s a required field in the protocol wiki page and it apparently &quot;worked&quot; before 0.9.0.0. From what you are saying, it seems like you are suggesting that client id should be mandatory, but we just forgot to specify it so we should go with option 2?&lt;/p&gt;</comment>
                            <comment id="15111020" author="dana.powers" created="Thu, 21 Jan 2016 18:07:58 +0000"  >&lt;p&gt;But client ids are not globally unique, even in the java implementation, right? Start 2 consumers in different processes / different servers, and you&apos;ll get two identical client-ids (consumer-1) as I understand that code. Also note that a user-supplied client-id does not get any incremented value added, so all metrics get blended in that case. And most third-party clients that set a client-id dont attempt to add a unique incremented number at all. So I don&apos;t think option-2 adds much value.&lt;/p&gt;

&lt;p&gt;Another alternative to consider is skipping client metrics if there is no client-id.&lt;/p&gt;</comment>
                            <comment id="15111627" author="guozhang" created="Thu, 21 Jan 2016 23:46:44 +0000"  >&lt;p&gt;Yeah, I just meant that the server today rely on clients guaranteeing not-null clients in the past time, and of course that is not the case for all clients. We are just lucky that this problem is not exposed in older versions. So now we either need to:&lt;/p&gt;

&lt;p&gt;1) educate all client developers to guarantee this themselves (technically very hard), and let servers reject null / empty-string client-ids.&lt;br/&gt;
2) do not enforce client developers to do so, and let servers assign client-id themselves.&lt;/p&gt;

&lt;p&gt;Personally I am not in favor of 2) as it will make trouble shooting quite hard since we cannot tell too much from client-id &quot;producer-5&quot;, while adding hostnames / etc into auto generated clientId is not safe as we can have multiple clients on the same clients, etc. So I would rather go with option 1), that when users get an returned error server they will realize &quot;oh I forgot to specify the client-ids&quot;.&lt;/p&gt;

&lt;p&gt;BTW, I am adding a &quot;NotNull&quot; Validator in ConfigDef as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3121&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-3121&lt;/a&gt;, this may cover the java clients as we discussed here.&lt;/p&gt;

&lt;p&gt;EDIT: just realized that today we already &quot;validate&quot; required configs as long as we do not provide a default value. So will not add the above Validator.&lt;/p&gt;</comment>
                            <comment id="15111679" author="jjkoshy" created="Fri, 22 Jan 2016 00:24:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aauradkar&quot; class=&quot;user-hover&quot; rel=&quot;aauradkar&quot;&gt;aauradkar&lt;/a&gt; can chime in since this is related to code that he touched for quotas, but personally I would prefer just preserving the old behavior and treating empty client-ids as a default ANONYMOUS or similar. Also, since we quota by client-id it behooves clients to set their client-id properly. If we want to change this behavior and start &lt;em&gt;requiring&lt;/em&gt; client-ids then perhaps a short DISCUSS thread is in order.&lt;/p&gt;</comment>
                            <comment id="15111751" author="gwenshap" created="Fri, 22 Jan 2016 01:33:47 +0000"  >&lt;p&gt;Agree with Dana that there is no requirement that client-ids will be unique (After all, quota implementation can &quot;share&quot; a quota between multiple clients if they have same id). Therefore &quot;&quot; is a valid ID and we can safely convert nulls to &quot;&quot; and preserve the old behavior.&lt;/p&gt;</comment>
                            <comment id="15111924" author="aauradkar" created="Fri, 22 Jan 2016 05:05:51 +0000"  >&lt;p&gt;I personally prefer preserving the old behavior i.e. option (1). Everyone using an empty client-id receives a default quota shared by all such instances.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dspeterson&quot; class=&quot;user-hover&quot; rel=&quot;dspeterson&quot;&gt;dspeterson&lt;/a&gt; - Are you planning to submit a patch for this? If not, I can.&lt;/p&gt;</comment>
                            <comment id="15112001" author="dspeterson" created="Fri, 22 Jan 2016 06:29:07 +0000"  >&lt;p&gt;I wasn&apos;t planning on submitting a patch.  I wish I could, but my hands are too full with other stuff at the moment.  Thanks!&lt;/p&gt;</comment>
                            <comment id="15116568" author="granthenke" created="Tue, 26 Jan 2016 03:08:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aauradkar&quot; class=&quot;user-hover&quot; rel=&quot;aauradkar&quot;&gt;aauradkar&lt;/a&gt; Are you working on this?&lt;/p&gt;</comment>
                            <comment id="15118088" author="granthenke" created="Tue, 26 Jan 2016 21:34:54 +0000"  >&lt;p&gt;I will pick this one up quick if thats alright. &lt;/p&gt;</comment>
                            <comment id="15130571" author="granthenke" created="Wed, 3 Feb 2016 15:39:43 +0000"  >&lt;p&gt;I have written a basic unit test that sends a produce request with an null client-id in order to start fixing this issue, but I have found that the behavior is different between 0.8.2, 0.9.0, and trunk. The error messages and explanations are below:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;0.8.2:&lt;/b&gt; No issue.&lt;br/&gt;
&lt;b&gt;0.9.0:&lt;/b&gt; Parses the message fine, but the resulting null causes issues:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[2016-02-02 22:46:25,230] ERROR [KafkaApi-1] error when handling request Name: ProducerRequest; Version: 1; CorrelationId: -1; ClientId: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; RequiredAcks: -1; AckTimeoutMs: 10000 ms; TopicAndPartition:  (kafka.server.KafkaApis:103)
java.lang.NullPointerException
	at org.apache.kafka.common.metrics.JmxReporter.getMBeanName(JmxReporter.java:127)
	at org.apache.kafka.common.metrics.JmxReporter.addAttribute(JmxReporter.java:106)
	at org.apache.kafka.common.metrics.JmxReporter.metricChange(JmxReporter.java:76)
	at org.apache.kafka.common.metrics.Metrics.registerMetric(Metrics.java:288)
	at org.apache.kafka.common.metrics.Sensor.add(Sensor.java:177)
	at org.apache.kafka.common.metrics.Sensor.add(Sensor.java:162)
	at kafka.server.ClientQuotaManager.getOrCreateQuotaSensors(ClientQuotaManager.scala:209)
	at kafka.server.ClientQuotaManager.recordAndMaybeThrottle(ClientQuotaManager.scala:111)
	at kafka.server.KafkaApis.kafka$server$KafkaApis$$sendResponseCallback$2(KafkaApis.scala:354)
	at kafka.server.KafkaApis.handleProducerRequest(KafkaApis.scala:360)
	at kafka.server.KafkaApis.handle(KafkaApis.scala:68)
	at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:60)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;trunk:&lt;/b&gt; Uses the new o.a.k requests since &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2071&quot; title=&quot;Replace Produce Request/Response with their org.apache.kafka.common.requests equivalents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2071&quot;&gt;&lt;del&gt;KAFKA-2071&lt;/del&gt;&lt;/a&gt;. Null is not allowed in client_id, therefore does not parse:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[2016-02-02 22:53:25,745] ERROR Closing socket &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 127.0.0.1:57399-127.0.0.1:57400 because of error (kafka.network.Processor:103)
org.apache.kafka.common.protocol.types.SchemaException: Error reading field &lt;span class=&quot;code-quote&quot;&gt;&apos;client_id&apos;&lt;/span&gt;: java.lang.NegativeArraySizeException
	at org.apache.kafka.common.protocol.types.Schema.read(Schema.java:73)
	at org.apache.kafka.common.requests.RequestHeader.parse(RequestHeader.java:80)
	at kafka.network.RequestChannel$Request.&amp;lt;init&amp;gt;(RequestChannel.scala:82)
	at kafka.network.Processor$$anonfun$run$11.apply(SocketServer.scala:426)
	at kafka.network.Processor$$anonfun$run$11.apply(SocketServer.scala:421)
	at scala.collection.Iterator$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;foreach(Iterator.scala:727)
	at scala.collection.AbstractIterator.foreach(Iterator.scala:1157)
	at scala.collection.IterableLike$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;foreach(IterableLike.scala:72)
	at scala.collection.AbstractIterable.foreach(Iterable.scala:54)
	at kafka.network.Processor.run(SocketServer.scala:421)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Based on those findings I want to open the question: &lt;br/&gt;
&lt;b&gt;In trunk do we want to change the o.a.k protocol to support a nullable string and allow client_id to be nullable?&lt;/b&gt; It looks like there was clear intention to have it required based on how the protocol is defined. This is simple to do and it was recently done for byte arrays in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2695&quot; title=&quot;Handle null string/bytes protocol primitives&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2695&quot;&gt;&lt;del&gt;KAFKA-2695&lt;/del&gt;&lt;/a&gt;. The answer for how to handle trunk should help drive the solution for 0.9.0.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; I will also ad tests for other &quot;malformed&apos; requests as part of this fix/patch.&lt;/p&gt;</comment>
                            <comment id="15130601" author="ijuma" created="Wed, 3 Feb 2016 15:59:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=granthenke&quot; class=&quot;user-hover&quot; rel=&quot;granthenke&quot;&gt;granthenke&lt;/a&gt;, your suggestion seems to make sense given the favoured approach by the commenters in this JIRA (which is to restore compatibility).&lt;/p&gt;</comment>
                            <comment id="15130609" author="ijuma" created="Wed, 3 Feb 2016 16:02:51 +0000"  >&lt;p&gt;This may be a candidate for 0.9.0.1.&lt;/p&gt;</comment>
                            <comment id="15130616" author="granthenke" created="Wed, 3 Feb 2016 16:04:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; Sounds good. Thanks for the confirmation. I will make a patch for review with those changes.&lt;/p&gt;</comment>
                            <comment id="15132712" author="githubbot" created="Thu, 4 Feb 2016 18:23:41 +0000"  >&lt;p&gt;GitHub user granthenke opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/866&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/866&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3088&quot; title=&quot;0.9.0.0 broker crash on receipt of produce request with empty client ID&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3088&quot;&gt;&lt;del&gt;KAFKA-3088&lt;/del&gt;&lt;/a&gt;: broker crash on receipt of produce request with empty cli&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;ent ID&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adds  NULLABLE_STRING Type to the protocol&lt;/li&gt;
	&lt;li&gt;Changes client_id in the REQUEST_HEADER to NULLABLE_STRING with a default of &quot;&quot;&lt;/li&gt;
	&lt;li&gt;Fixes server handling of invalid ApiKey request and other invalid requests&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/granthenke/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/granthenke/kafka&lt;/a&gt; null-clientid&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/866.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/866.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #866&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b17eb557ac989dfa19d32370eca4cb73eca30664&lt;br/&gt;
Author: Grant Henke &amp;lt;granthenke@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-02-04T18:17:51Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3088&quot; title=&quot;0.9.0.0 broker crash on receipt of produce request with empty client ID&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3088&quot;&gt;&lt;del&gt;KAFKA-3088&lt;/del&gt;&lt;/a&gt;: broker crash on receipt of produce request with empty client ID&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adds  NULLABLE_STRING Type to the protocol&lt;/li&gt;
	&lt;li&gt;Changes client_id in the REQUEST_HEADER to NULLABLE_STRING with a default of &quot;&quot;&lt;/li&gt;
	&lt;li&gt;Fixes server handling of invalid ApiKey request and other invalid requests&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15134390" author="ijuma" created="Fri, 5 Feb 2016 16:17:28 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=granthenke&quot; class=&quot;user-hover&quot; rel=&quot;granthenke&quot;&gt;granthenke&lt;/a&gt;. Are you planning to submit a change for 0.9.0.1 as well? The relevant code in trunk has changed quite a lot so it would have to be a separate PR for 0.9.0.1.&lt;/p&gt;</comment>
                            <comment id="15134396" author="granthenke" created="Fri, 5 Feb 2016 16:20:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; Yes, after the trunk patch is reviewed, I can modify it to fit/work within the 0.9 branch.&lt;/p&gt;</comment>
                            <comment id="15134769" author="ijuma" created="Fri, 5 Feb 2016 19:19:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=granthenke&quot; class=&quot;user-hover&quot; rel=&quot;granthenke&quot;&gt;granthenke&lt;/a&gt;, you may have seen that 0.9.0.1 is planned for next week so we would probably need a PR for this soon if we want to include it in that release.&lt;/p&gt;</comment>
                            <comment id="15134778" author="granthenke" created="Fri, 5 Feb 2016 19:24:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; As soon as the general approach and code is reviewed for trunk I will update the patch for 0.9.0.1 too.&lt;/p&gt;</comment>
                            <comment id="15145737" author="githubbot" created="Sat, 13 Feb 2016 02:49:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/866&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/866&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15145738" author="jjkoshy" created="Sat, 13 Feb 2016 02:50:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=granthenke&quot; class=&quot;user-hover&quot; rel=&quot;granthenke&quot;&gt;granthenke&lt;/a&gt; I&apos;m leaving this open for 0.9 (i.e., 0.9.1.0)&lt;/p&gt;</comment>
                            <comment id="15145773" author="githubbot" created="Sat, 13 Feb 2016 04:04:32 +0000"  >&lt;p&gt;GitHub user granthenke opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/910&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/910&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3088&quot; title=&quot;0.9.0.0 broker crash on receipt of produce request with empty client ID&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3088&quot;&gt;&lt;del&gt;KAFKA-3088&lt;/del&gt;&lt;/a&gt;: (0.9 branch) broker crash on receipt of produce request w&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;ith empty client ID&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adds  NULLABLE_STRING Type to the protocol&lt;/li&gt;
	&lt;li&gt;Changes client_id in the REQUEST_HEADER to NULLABLE_STRING with a default of &quot;&quot;&lt;/li&gt;
	&lt;li&gt;Fixes server handling of invalid ApiKey request and other invalid requests&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Specifically for 0.9 branch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Changes legacy &apos;readFrom&apos; methods to default client id to &quot;&quot; on read&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/granthenke/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/granthenke/kafka&lt;/a&gt; null-clientid-0.9&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/910.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/910.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #910&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a369d94dad34033cb8a1ba57366fe73e161f4efa&lt;br/&gt;
Author: Grant Henke &amp;lt;granthenke@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-02-13T04:02:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3088&quot; title=&quot;0.9.0.0 broker crash on receipt of produce request with empty client ID&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3088&quot;&gt;&lt;del&gt;KAFKA-3088&lt;/del&gt;&lt;/a&gt;: (0.9 branch) broker crash on receipt of produce request with empty client ID&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adds  NULLABLE_STRING Type to the protocol&lt;/li&gt;
	&lt;li&gt;Changes client_id in the REQUEST_HEADER to NULLABLE_STRING with a default of &quot;&quot;&lt;/li&gt;
	&lt;li&gt;Fixes server handling of invalid ApiKey request and other invalid requests&lt;br/&gt;
    Specifically for 0.9 branch:&lt;/li&gt;
	&lt;li&gt;Changes legacy &apos;readFrom&apos; methods to default client id to &quot;&quot; on read&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15149175" author="githubbot" created="Tue, 16 Feb 2016 19:40:28 +0000"  >&lt;p&gt;Github user granthenke closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/910&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/910&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15149181" author="jjkoshy" created="Tue, 16 Feb 2016 19:44:43 +0000"  >&lt;p&gt;Thanks for the patches - this has been pushed to trunk and 0.9&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2r57z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>