<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:53:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3250] release tarball is unnecessarily large due to duplicate libraries</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3250</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Between 0.8.2.2 and 0.9.0, our release tarballs grew from 17M to 34M. We thought it is just due to new libraries and dependencies. But:&lt;br/&gt;
1. If you untar Kafka into a directory and check the directory size (du -sh), it is around 28M, smaller than the tarball. Recompressing give you 25M tarball.&lt;br/&gt;
2. If you list the original tar contents and grep for &quot;snappy&quot;, you see it 4 times in the tarball.&lt;/p&gt;

&lt;p&gt;Clearly we are creating a tarball with duplicates (and we didn&apos;t before).&lt;br/&gt;
I think its due to how we are generating the tarball from core but pull in other projects into libs/ directory with their dependencies (which overlap).&lt;/p&gt;

&lt;p&gt;We need to find out how to sort it out (possibly with excludes).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12940329">KAFKA-3250</key>
            <summary>release tarball is unnecessarily large due to duplicate libraries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="granthenke">Grant Henke</assignee>
                                    <reporter username="gwenshap">Gwen Shapira</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Feb 2016 23:37:05 +0000</created>
                <updated>Thu, 17 Mar 2016 21:15:53 +0000</updated>
                            <resolved>Thu, 17 Mar 2016 21:14:29 +0000</resolved>
                                    <version>0.9.0.1</version>
                                    <fixVersion>0.10.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15153383" author="ijuma" created="Thu, 18 Feb 2016 23:45:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka/pull/693&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/693&lt;/a&gt; may fix it.&lt;/p&gt;</comment>
                            <comment id="15153395" author="gwenshap" created="Thu, 18 Feb 2016 23:56:20 +0000"  >&lt;p&gt;It does not.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Chens-MacBook-Pro:distributions gwen$ ls -lh
total 72680
-rw-r--r--  1 gwen  staff   489K Feb 18 15:55 kafka_2.11-0.9.1.0-SNAPSHOT-site-docs.tgz
-rw-r--r--  1 gwen  staff    35M Feb 18 15:55 kafka_2.11-0.9.1.0-SNAPSHOT.tgz

Chens-MacBook-Pro:distributions gwen$ tar -tvzf kafka_2.11-0.9.1.0-SNAPSHOT.tgz  | grep snappy
-rw-r--r--  0 0      0      704708 Nov 18 19:41 kafka_2.11-0.9.1.0-SNAPSHOT/libs/snappy-java-1.1.2.jar
-rw-r--r--  0 0      0      704708 Nov 18 19:41 kafka_2.11-0.9.1.0-SNAPSHOT/libs/snappy-java-1.1.2.jar
-rw-r--r--  0 0      0      704708 Nov 18 19:41 kafka_2.11-0.9.1.0-SNAPSHOT/libs/snappy-java-1.1.2.jar
-rw-r--r--  0 0      0      704708 Nov 18 19:41 kafka_2.11-0.9.1.0-SNAPSHOT/libs/snappy-java-1.1.2.jar
-rw-r--r--  0 0      0      704708 Nov 18 19:41 kafka_2.11-0.9.1.0-SNAPSHOT/libs/snappy-java-1.1.2.jar
-rw-r--r--  0 0      0      704708 Nov 18 19:41 kafka_2.11-0.9.1.0-SNAPSHOT/libs/snappy-java-1.1.2.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15153398" author="ijuma" created="Thu, 18 Feb 2016 23:59:50 +0000"  >&lt;p&gt;Oh well. I&apos;ll check why when I test that PR.&lt;/p&gt;</comment>
                            <comment id="15195538" author="githubbot" created="Tue, 15 Mar 2016 15:54:40 +0000"  >&lt;p&gt;GitHub user granthenke opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1075&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1075&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3250&quot; title=&quot;release tarball is unnecessarily large due to duplicate libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3250&quot;&gt;&lt;del&gt;KAFKA-3250&lt;/del&gt;&lt;/a&gt;: release tarball is unnecessarily large due to duplicate l&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;ibraries&lt;/p&gt;

&lt;p&gt;    This ensures duplicates are not copied in the distribution without rewriting all of the tar&apos;ing logic. A larger improvement could be made to the packaging code, but that should be tracked by another jira.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/granthenke/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/granthenke/kafka&lt;/a&gt; libs-duplicates&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1075.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1075.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1075&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8cdbf18fb5b751e0fc922d405643c152daaef4d1&lt;br/&gt;
Author: Grant Henke &amp;lt;granthenke@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-03-15T15:53:43Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3250&quot; title=&quot;release tarball is unnecessarily large due to duplicate libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3250&quot;&gt;&lt;del&gt;KAFKA-3250&lt;/del&gt;&lt;/a&gt;: release tarball is unnecessarily large due to duplicate libraries&lt;/p&gt;

&lt;p&gt;    This ensures duplicates are not copied in the distribution without rewriting all of the tar&apos;ing logic. A larger improvement could be made to the packaging code, but that should be tracked by another jira.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15200399" author="gwenshap" created="Thu, 17 Mar 2016 21:14:29 +0000"  >&lt;p&gt;Issue resolved by pull request 1075&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/1075&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1075&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15200404" author="githubbot" created="Thu, 17 Mar 2016 21:15:53 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1075&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1075&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2t173:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>