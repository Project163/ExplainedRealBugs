<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:35:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-500] javaapi support for getTopoicMetaData</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-500</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;TopicMetaRequest and TopicMetaResponse use scala Seq and Option. We need a version so that java applications can use more easily.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12606799">KAFKA-500</key>
            <summary>javaapi support for getTopoicMetaData</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="swapnilghike">Swapnil Ghike</assignee>
                                    <reporter username="junrao">Jun Rao</reporter>
                        <labels>
                            <label>bugs</label>
                    </labels>
                <created>Sun, 9 Sep 2012 21:41:47 +0000</created>
                <updated>Tue, 25 Sep 2012 00:44:27 +0000</updated>
                            <resolved>Wed, 19 Sep 2012 22:28:50 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="259200">72h</timeoriginalestimate>
                            <timeestimate seconds="259200">72h</timeestimate>
                                        <comments>
                            <comment id="13456245" author="swapnilghike" created="Sat, 15 Sep 2012 00:24:33 +0000"  >&lt;p&gt;1. Created java apis for TopicMetadataRequest and TopicMetadataResponse. &lt;/p&gt;

&lt;p&gt;2. Added a send(topicMetadataRequest) method in javaapi/SyncProducer.&lt;/p&gt;

&lt;p&gt;3. Created unit tests to make sure that the underlying object is correctly created for javaapi/TopicMetadataRequest and javaapi/TopicMetadataResponse. (Are they an overkill?)&lt;/p&gt;

&lt;p&gt;4. Removed detailedMetadata, timestamp and count from TopicMetadataRequest as those fields were not being used anywhere.&lt;/p&gt;

&lt;p&gt;5. Refactored kafka.api.TopicMetaDataResponse to TopicMetadataResponse. Sorry, this patch will touch a couple of more files.&lt;/p&gt;</comment>
                            <comment id="13457138" author="junrao" created="Mon, 17 Sep 2012 16:43:13 +0000"  >&lt;p&gt;Thanks for patch v1. Some comments:&lt;/p&gt;

&lt;p&gt;1. javaapi.SyncProducer returns a list of the scala version of TopicMetadata. We need to create a java version of TopicMetadata and PartitionMetadata to hide things like Seq and Option. Also, since we only return TopicMetadata to the java client. There is probably no need for a java version of TopicMetadataResponse.&lt;/p&gt;

&lt;p&gt;2. In kafka-391, we are getting rid of the java version of SyncProducer since it&apos;s no longer a public api (java users should use Producer instead). So, there is no need to put the getMetadata api in javaapi.SyncProducer. However, we should include it in javaapi.SimpleConsumer, which remains a public api.&lt;/p&gt;

&lt;p&gt;3. TopicMetadataResponseTest: The test of the java version of the response can probably be made simpler. We just need to make sure that we can convert from a scala response to a java response correctly.&lt;/p&gt;

&lt;p&gt;4. Patch doesn&apos;t apply cleanly, likely due to renaming class names.&lt;/p&gt;</comment>
                            <comment id="13457541" author="swapnilghike" created="Tue, 18 Sep 2012 02:04:15 +0000"  >&lt;p&gt;1. Rebased. javaapi/SyncProducer is gone.&lt;/p&gt;

&lt;p&gt;2. Removed the two step creation of underlying objects for objects that won&apos;t be created by producer/consumer clients. This will be the case of javaapi/&lt;/p&gt;
{TopicMetadata, PartitionMetadata, ByteBufferMessageSet, FetchResponse, and the future TopicMetadataResponse that will be added with the completion of KAFKA-473}
&lt;p&gt;. The underlying object is now directly passed as a constructor private val. &lt;/p&gt;

&lt;p&gt;3. Added java apis for TopicMetadata and PartitionMetadata given their respective scala objects. I am not sure if we need to expose all the fields to clients via getters, please advise.&lt;/p&gt;

&lt;p&gt;4. Removed unit tests from the v1 patch as the new javaapi code merely wraps over the scala code.&lt;/p&gt;

&lt;p&gt;5. Cleaned up ByteBufferMessageSetTest, javaapi/Implicits.scala.&lt;/p&gt;

&lt;p&gt;6. Removed the logMetadata field from PartitionMetadata as it was not used anywhere and was merely going around in buffers. Removed the classes LogMetadata and LogSegmentMetadata as well.&lt;/p&gt;

&lt;p&gt;7.  Removed detailedMetadata, timestamp and count from TopicMetadataRequest as those fields were not being used anywhere. &lt;/p&gt;

&lt;p&gt;8. Refactored kafka.api.TopicMetaDataResponse to TopicMetadataResponse.&lt;/p&gt;</comment>
                            <comment id="13457899" author="junrao" created="Tue, 18 Sep 2012 16:00:00 +0000"  >&lt;p&gt;Thanks for patch v2. Can&apos;t seem to apply the patch. Got the following error.&lt;/p&gt;

&lt;p&gt;patching file core/src/main/scala/kafka/api/TopicMetaDataResponse.scala&lt;br/&gt;
can&apos;t find file to patch at input line 438&lt;br/&gt;
Perhaps you used the wrong -p or --strip option?&lt;br/&gt;
The text leading up to this was:&lt;br/&gt;
--------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Index: core/src/main/scala/kafka/api/TopicMetadataResponse.scala&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;===================================================================&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;#8212; core/src/main/scala/kafka/api/TopicMetadataResponse.scala	(working copy)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;+++ core/src/main/scala/kafka/api/TopicMetadataResponse.scala	(working copy)&lt;br/&gt;
--------------------------&lt;br/&gt;
File to patch: ^C&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;A few minor comments:&lt;br/&gt;
20. ByteBufferMessageSet: The way that we write equal, we don&apos;t really need canEqual.&lt;/p&gt;

&lt;p&gt;21. TopicMetadataRequest: remove unused imports&lt;/p&gt;

</comment>
                            <comment id="13458064" author="swapnilghike" created="Tue, 18 Sep 2012 19:09:11 +0000"  >&lt;p&gt;1. Probably svn generated a wrong diff due to a simultaneous rename and modify. As advised, deleted the old file and simply added the new one.&lt;/p&gt;

&lt;p&gt;2. Removed canEqual.&lt;/p&gt;

&lt;p&gt;3. Removed unused imports one last time. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13458340" author="junrao" created="Wed, 19 Sep 2012 01:13:09 +0000"  >&lt;p&gt;Thanks for patch v3. Looks good. A few more things:&lt;/p&gt;

&lt;p&gt;30. javaapi.PartitionMetadata, javaapi.TopicMetadata: no need to expose method writeTo().&lt;/p&gt;

&lt;p&gt;31. Could you expose the getMetadata api in SimpleConsumer (both scala and java)?&lt;/p&gt;

&lt;p&gt;32. Cloud you take care of kafka-505 in this patch too since it&apos;s small and is related to TopicMetadata?&lt;/p&gt;</comment>
                            <comment id="13458543" author="swapnilghike" created="Wed, 19 Sep 2012 10:12:52 +0000"  >&lt;p&gt;1. Removed writeTo() from javaapi.&lt;/p&gt;
{PartitionMetadata, TopicMetadata}
&lt;p&gt;.&lt;/p&gt;

&lt;p&gt;2. Exposed send(TopicMetadataRequest) in javaapi/Simpleconsumer and kafka/api/SimpleConsumer. &lt;/p&gt;

&lt;p&gt;3. &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-505&quot; title=&quot;Remove errorcode from TopicMetaDataResponse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-505&quot;&gt;&lt;del&gt;KAFKA-505&lt;/del&gt;&lt;/a&gt; : Removed errorCode from TopicMetadataResponse, accordingly modified server.handleTopicMetadataRequest.&lt;/p&gt;

&lt;p&gt;4. I tried to use generic parameters in javaapi/Implicits.scala but that&apos;s probably not going to work because we have different return types for the implicit defs. So in order to keep the javaapi code clean, I created two implicit defs to convert Seq&lt;span class=&quot;error&quot;&gt;&amp;#91;api.*&amp;#93;&lt;/span&gt; to java.util.List&lt;span class=&quot;error&quot;&gt;&amp;#91;*&amp;#93;&lt;/span&gt; and one implicit def to convert Option&lt;span class=&quot;error&quot;&gt;&amp;#91;*&amp;#93;&lt;/span&gt; to *.&lt;/p&gt;</comment>
                            <comment id="13458780" author="junrao" created="Wed, 19 Sep 2012 16:05:57 +0000"  >&lt;p&gt;Thanks for patch v4. Thinking about this a bit more. To be consistent with other requests, it&apos;s probably better to return TopicMetadataResponse in both SyncProducer and SimpleConsumer, instead of Seq&lt;span class=&quot;error&quot;&gt;&amp;#91;TopicMetadata&amp;#93;&lt;/span&gt;. So we will also need a java version of TopicMetadataResponse. The implicits will be a bit easier now since we just need to define a conversion at TopicMetadataResponse level.&lt;/p&gt;</comment>
                            <comment id="13459097" author="swapnilghike" created="Wed, 19 Sep 2012 21:06:46 +0000"  >&lt;p&gt;1. Yes, &lt;/p&gt;
{SyncProducer, SimpleConsumer}
&lt;p&gt;.send() now returns TopicMetadataResponse. &lt;/p&gt;

&lt;p&gt;2. Added the javaapi for TopicMetadataResponse.&lt;/p&gt;

&lt;p&gt;3. Rearranged implicits as discussed.&lt;/p&gt;</comment>
                            <comment id="13459170" author="junrao" created="Wed, 19 Sep 2012 22:28:50 +0000"  >&lt;p&gt;Thanks for the patch. Committed to 0.8.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12545254" name="kafka-500-v1.patch" size="21924" author="swapnilghike" created="Sat, 15 Sep 2012 00:24:33 +0000"/>
                            <attachment id="12545515" name="kafka-500-v2.patch" size="32074" author="swapnilghike" created="Tue, 18 Sep 2012 02:04:15 +0000"/>
                            <attachment id="12545605" name="kafka-500-v3.patch" size="35832" author="swapnilghike" created="Tue, 18 Sep 2012 19:09:11 +0000"/>
                            <attachment id="12545704" name="kafka-500-v4.patch" size="40611" author="swapnilghike" created="Wed, 19 Sep 2012 10:12:52 +0000"/>
                            <attachment id="12545801" name="kafka-500-v5.patch" size="44004" author="swapnilghike" created="Wed, 19 Sep 2012 21:06:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>299150</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i15zwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243117</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>