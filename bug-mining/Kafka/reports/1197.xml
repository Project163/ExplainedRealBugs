<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:56:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3590] KafkaConsumer fails with &quot;Messages are rejected since there are fewer in-sync replicas than required.&quot; when polling</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3590</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;KafkaConsumer.poll() fails with &quot;Messages are rejected since there are fewer in-sync replicas than required.&quot;. Isn&apos;t this message about minimum number of ISR&apos;s when &lt;b&gt;sending&lt;/b&gt; messages?&lt;/p&gt;

&lt;p&gt;Stacktrace:&lt;br/&gt;
org.apache.kafka.common.KafkaException: Unexpected error from SyncGroup: Messages are rejected since there are fewer in-sync replicas than required.&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.AbstractCoordinator$SyncGroupRequestHandler.handle(AbstractCoordinator.java:444) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.AbstractCoordinator$SyncGroupRequestHandler.handle(AbstractCoordinator.java:411) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.AbstractCoordinator$CoordinatorResponseHandler.onSuccess(AbstractCoordinator.java:665) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.AbstractCoordinator$CoordinatorResponseHandler.onSuccess(AbstractCoordinator.java:644) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.RequestFuture$1.onSuccess(RequestFuture.java:167) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.RequestFuture.fireSuccess(RequestFuture.java:133) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.RequestFuture.complete(RequestFuture.java:107) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient$RequestFutureCompletionHandler.onComplete(ConsumerNetworkClient.java:380) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:274) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.clientPoll(ConsumerNetworkClient.java:320) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:213) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:193) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:163) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureActiveGroup(AbstractCoordinator.java:222) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.ensurePartitionAssignment(ConsumerCoordinator.java:311) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:890) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:853) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-clients-0.9.0.1.jar:na&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment>JDK1.8 Ubuntu 14.04</environment>
        <key id="12960300">KAFKA-3590</key>
            <summary>KafkaConsumer fails with &quot;Messages are rejected since there are fewer in-sync replicas than required.&quot; when polling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hachikuji">Jason Gustafson</assignee>
                                    <reporter username="salaev">Sergey Alaev</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Apr 2016 10:56:37 +0000</created>
                <updated>Fri, 23 Sep 2016 20:14:36 +0000</updated>
                            <resolved>Fri, 23 Sep 2016 20:14:36 +0000</resolved>
                                    <version>0.9.0.1</version>
                                    <fixVersion>0.10.1.0</fixVersion>
                    <fixVersion>0.10.2.0</fixVersion>
                                    <component>consumer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15396213" author="cotedm" created="Wed, 27 Jul 2016 19:31:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=salaev&quot; class=&quot;user-hover&quot; rel=&quot;salaev&quot;&gt;salaev&lt;/a&gt; it looks like this is occurring in a SyncGroup call so it&apos;s probably due to the fact that the new consumer needs to write to the __consumer_offsets topic and can&apos;t because __consumer_offsets isn&apos;t meeting the min ISR requirements for the cluster.  The error message isn&apos;t very clear, so maybe we can start by improving that.  I can take a shot at the pull request in the next couple of days.&lt;/p&gt;</comment>
                            <comment id="15399460" author="githubbot" created="Fri, 29 Jul 2016 15:03:13 +0000"  >&lt;p&gt;GitHub user cotedm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1681&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1681&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3590&quot; title=&quot;KafkaConsumer fails with &amp;quot;Messages are rejected since there are fewer in-sync replicas than required.&amp;quot; when polling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3590&quot;&gt;&lt;del&gt;KAFKA-3590&lt;/del&gt;&lt;/a&gt;: KafkaConsumer fails with &quot;Messages are rejected since there are fewer in-sync replicas than required.&quot; when polling&lt;/p&gt;

&lt;p&gt;    This just improves the error message since it&apos;s confusing that a consumer throws a message you&apos;d normally see for a producer. &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cotedm/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cotedm/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3590&quot; title=&quot;KafkaConsumer fails with &amp;quot;Messages are rejected since there are fewer in-sync replicas than required.&amp;quot; when polling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3590&quot;&gt;&lt;del&gt;KAFKA-3590&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1681.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1681.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1681&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9873e9fa94c8781dccb390cde890c48f9aa5ffc5&lt;br/&gt;
Author: Dustin Cote &amp;lt;dustin@confluent.io&amp;gt;&lt;br/&gt;
Date:   2016-07-29T14:59:10Z&lt;/p&gt;

&lt;p&gt;    Handle error case for under replicated __consumer_offsets by logging a better message&lt;/p&gt;

&lt;p&gt;commit 45c0d6cd9e4192fae6f44a308812679f8fdb3fd3&lt;br/&gt;
Author: Dustin Cote &amp;lt;dustin@confluent.io&amp;gt;&lt;br/&gt;
Date:   2016-07-29T15:02:28Z&lt;/p&gt;

&lt;p&gt;    updated comment&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15399465" author="ijuma" created="Fri, 29 Jul 2016 15:07:20 +0000"  >&lt;p&gt;This looks similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3766&quot; title=&quot;Unhandled &amp;quot;not enough replicas&amp;quot; errors in SyncGroup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3766&quot;&gt;&lt;del&gt;KAFKA-3766&lt;/del&gt;&lt;/a&gt;, Jason suggests a different solution there.&lt;/p&gt;</comment>
                            <comment id="15399518" author="cotedm" created="Fri, 29 Jul 2016 15:31:47 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt;, I didn&apos;t see that one.  Updated the PR to move toward Jason&apos;s recommendation.&lt;/p&gt;</comment>
                            <comment id="15473815" author="githubbot" created="Thu, 8 Sep 2016 13:05:21 +0000"  >&lt;p&gt;Github user cotedm closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1681&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1681&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15473820" author="cotedm" created="Thu, 8 Sep 2016 13:07:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt; is going to take this one over for now.&lt;/p&gt;</comment>
                            <comment id="15492184" author="githubbot" created="Thu, 15 Sep 2016 03:28:13 +0000"  >&lt;p&gt;GitHub user hachikuji opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1859&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1859&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3590&quot; title=&quot;KafkaConsumer fails with &amp;quot;Messages are rejected since there are fewer in-sync replicas than required.&amp;quot; when polling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3590&quot;&gt;&lt;del&gt;KAFKA-3590&lt;/del&gt;&lt;/a&gt;: Handle not-enough-replicas errors when writing to offsets topic&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hachikuji/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hachikuji/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3590&quot; title=&quot;KafkaConsumer fails with &amp;quot;Messages are rejected since there are fewer in-sync replicas than required.&amp;quot; when polling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3590&quot;&gt;&lt;del&gt;KAFKA-3590&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1859.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1859.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1859&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 64cd85590c9f6a2e064b15b51f62eddcb7a804f2&lt;br/&gt;
Author: Jason Gustafson &amp;lt;jason@confluent.io&amp;gt;&lt;br/&gt;
Date:   2016-09-15T03:12:04Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3590&quot; title=&quot;KafkaConsumer fails with &amp;quot;Messages are rejected since there are fewer in-sync replicas than required.&amp;quot; when polling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3590&quot;&gt;&lt;del&gt;KAFKA-3590&lt;/del&gt;&lt;/a&gt;: Handle not-enough-replicas errors when writing to offsets topic&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15517451" author="githubbot" created="Fri, 23 Sep 2016 20:14:25 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1859&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1859&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15517452" author="hachikuji" created="Fri, 23 Sep 2016 20:14:36 +0000"  >&lt;p&gt;Issue resolved by pull request 1859&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/1859&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1859&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12973621">KAFKA-3766</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wdfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>