<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:23:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-9667] Connect JSON serde strip trailing zeros</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-9667</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The Connect Json serde was recently enhanced to support serializing decimals as standard JSON numbers, (Original work done under&#160;&lt;del&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8595&quot; title=&quot;Support SerDe of Decimals in JSON that are not HEX encoded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8595&quot;&gt;&lt;del&gt;KAFKA-8595&lt;/del&gt;&lt;/a&gt;)&lt;/del&gt;, e.g. `1.23`.&#160; However, there is a bug in the implementation: it&apos;s stripping trailing zeros!&#160; `1.23` is &lt;em&gt;not&lt;/em&gt; the same as `1.230`.&#160; The first is a number accurate to 2 decimal places, where as the later is accurate to 3 dp.&lt;/p&gt;

&lt;p&gt;It is important that trailing zeros are not dropped when de(serializing) decimals.&#160; For some use-cases it may be acceptable to drop the trailing zeros, but for others it definitely is not.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;CurrentFunctionality&quot;&gt;&lt;/a&gt;Current Functionality&lt;/h3&gt;

&lt;p&gt;If a JSON object was to contain the number `1.230` then the Java JsonDeserializer would correctly deserialize this into a `BigDecimal`. The BigDecimal would have a scale of 3, which is correct.&lt;/p&gt;

&lt;p&gt;However, if that same BigDecimal was then serialized back to JSON using the Java JsonSerializer it would incorrectly strip the zeros, serializing to `1.23`.&#160;&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;ExpectedFunctionality&quot;&gt;&lt;/a&gt;Expected Functionality&lt;/h3&gt;

&lt;p&gt;When serializing, trailing zeros should be maintained.&#160; For example, a BigDecimal such as `1.230`, (3 dp), should be serialized as `1.230`.&#160;&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;Compatibility&quot;&gt;&lt;/a&gt;Compatibility&lt;/h3&gt;

&lt;p&gt;With this bug fix any computation on decimal values that resulted in a number with trailing zeros, would see the number correctly serialized with those trailing zeros.&lt;/p&gt;

&lt;p&gt;Both the old serialized number, e.g. `1.23`, and the proposed corrected serialized number, e.g. `1.230`, are valid JSON numbers. Downstream consumers should have no issue deserializing either.&#160;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13289876">KAFKA-9667</key>
            <summary>Connect JSON serde strip trailing zeros</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="BigAndy">Andy Coates</assignee>
                                    <reporter username="BigAndy">Andy Coates</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Mar 2020 17:32:35 +0000</created>
                <updated>Thu, 7 May 2020 22:43:01 +0000</updated>
                            <resolved>Thu, 7 May 2020 22:43:01 +0000</resolved>
                                    <version>2.4.0</version>
                                    <fixVersion>2.4.2</fixVersion>
                    <fixVersion>2.5.1</fixVersion>
                    <fixVersion>2.6.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17052373" author="githubbot" created="Thu, 5 Mar 2020 17:40:44 +0000"  >&lt;p&gt;big-andy-coates commented on pull request #8230: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9667&quot; title=&quot;Connect JSON serde strip trailing zeros&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9667&quot;&gt;&lt;del&gt;KAFKA-9667&lt;/del&gt;&lt;/a&gt;: Connect JSON serde strip trailing zeros&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/8230&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8230&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This change turns on exact decimal processing in Jackson for decimals, meaning trailing zeros are maintained. This means a value of `1.2300` can be deserialized and re-serialized to JSON without any loss of information.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17052429" author="rhauch" created="Thu, 5 Mar 2020 18:53:11 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=BigAndy&quot; class=&quot;user-hover&quot; rel=&quot;BigAndy&quot;&gt;BigAndy&lt;/a&gt;. We are currently frozen on the 2.4 and 2.5 branches as we&apos;re in the final stages of releases (2.4.1 and 2.5.0, respectively). This does not appear to warrant blockers on those releases, so my plan is to merge to the `trunk`, `2.4`, and `2.5` branches after we are no longer frozen on `2.4` and `2.5` branches.&lt;/p&gt;</comment>
                            <comment id="17052553" author="bigandy" created="Thu, 5 Mar 2020 22:24:03 +0000"  >&lt;p&gt;Patch available:&#160;&#160;&lt;a href=&quot;https://github.com/apache/kafka/pull/8230&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8230&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17052558" author="bigandy" created="Thu, 5 Mar 2020 22:26:42 +0000"  >&lt;p&gt;Sounds good &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhauch&quot; class=&quot;user-hover&quot; rel=&quot;rhauch&quot;&gt;rhauch&lt;/a&gt;. Thanks.&lt;/p&gt;

&lt;p&gt;If anything prompts new release candidates being made from those point releases, then it would be handy to get this change in. But no biggie if that&apos;s not possible.&lt;/p&gt;</comment>
                            <comment id="17102079" author="rhauch" created="Thu, 7 May 2020 22:43:01 +0000"  >&lt;p&gt;Merged to trunk and backported to 2.4.x (for inclusion in 2.4.2) and 2.5.x (for inclusion in 2.5.1).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0c7rk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>rhauch</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>