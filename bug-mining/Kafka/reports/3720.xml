<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:37:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-13922] Unable to generate coverage reports for the whole project</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-13922</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;It is documented in the project that if we need code coverage reports for the whole project, we need to run something like this where we enabled the test coverage flag and run the reportCoverage task:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./gradlew reportCoverage -PenableTestCoverage=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dorg.gradle.parallel=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If I run it, the build will fail in the end because of jacocoRootReport:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
14:34:41 &amp;gt; Task :jacocoRootReport FAILED
14:34:41 
14:34:41 FAILURE: Build failed with an exception.
14:34:41 
14:34:41 * What went wrong:
14:34:41 Some problems were found with the configuration of task &lt;span class=&quot;code-quote&quot;&gt;&apos;:jacocoRootReport&apos;&lt;/span&gt; (type &lt;span class=&quot;code-quote&quot;&gt;&apos;JacocoReport&apos;&lt;/span&gt;).
14:34:41   - Type &lt;span class=&quot;code-quote&quot;&gt;&apos;org.gradle.testing.jacoco.tasks.JacocoReport&apos;&lt;/span&gt; property &lt;span class=&quot;code-quote&quot;&gt;&apos;jacocoClasspath&apos;&lt;/span&gt; doesn&apos;t have a configured value.
14:34:41     
14:34:41     Reason: This property isn&apos;t marked as optional and no value has been configured.
14:34:41     
14:34:41     Possible solutions:
14:34:41       1. Assign a value to &lt;span class=&quot;code-quote&quot;&gt;&apos;jacocoClasspath&apos;&lt;/span&gt;.
14:34:41       2. Mark property &lt;span class=&quot;code-quote&quot;&gt;&apos;jacocoClasspath&apos;&lt;/span&gt; as optional.
14:34:41     
14:34:41     Please refer to https:&lt;span class=&quot;code-comment&quot;&gt;//docs.gradle.org/7.3.3/userguide/validation_problems.html#value_not_set &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more details about &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; problem.
&lt;/span&gt;14:34:41   - Type &lt;span class=&quot;code-quote&quot;&gt;&apos;org.gradle.testing.jacoco.tasks.JacocoReport&apos;&lt;/span&gt; property &lt;span class=&quot;code-quote&quot;&gt;&apos;reports.enabledReports.html.outputLocation&apos;&lt;/span&gt; doesn&apos;t have a configured value.
14:34:41     
14:34:41     Reason: This property isn&apos;t marked as optional and no value has been configured.
14:34:41     
14:34:41     Possible solutions:
14:34:41       1. Assign a value to &lt;span class=&quot;code-quote&quot;&gt;&apos;reports.enabledReports.html.outputLocation&apos;&lt;/span&gt;.
14:34:41       2. Mark property &lt;span class=&quot;code-quote&quot;&gt;&apos;reports.enabledReports.html.outputLocation&apos;&lt;/span&gt; as optional.
14:34:41     
14:34:41     Please refer to https:&lt;span class=&quot;code-comment&quot;&gt;//docs.gradle.org/7.3.3/userguide/validation_problems.html#value_not_set &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more details about &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; problem.
&lt;/span&gt;14:34:41   - Type &lt;span class=&quot;code-quote&quot;&gt;&apos;org.gradle.testing.jacoco.tasks.JacocoReport&apos;&lt;/span&gt; property &lt;span class=&quot;code-quote&quot;&gt;&apos;reports.enabledReports.xml.outputLocation&apos;&lt;/span&gt; doesn&apos;t have a configured value.
14:34:41     
14:34:41     Reason: This property isn&apos;t marked as optional and no value has been configured.
14:34:41     
14:34:41     Possible solutions:
14:34:41       1. Assign a value to &lt;span class=&quot;code-quote&quot;&gt;&apos;reports.enabledReports.xml.outputLocation&apos;&lt;/span&gt;.
14:34:41       2. Mark property &lt;span class=&quot;code-quote&quot;&gt;&apos;reports.enabledReports.xml.outputLocation&apos;&lt;/span&gt; as optional. &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13446068">KAFKA-13922</key>
            <summary>Unable to generate coverage reports for the whole project</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="akatona">Andras Katona</assignee>
                                    <reporter username="pnagy">Patrik Nagy</reporter>
                        <labels>
                            <label>cloudera</label>
                    </labels>
                <created>Fri, 20 May 2022 14:34:00 +0000</created>
                <updated>Thu, 14 Mar 2024 09:45:17 +0000</updated>
                            <resolved>Thu, 14 Mar 2024 09:45:17 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>3.8.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17540157" author="JIRAUSER289621" created="Fri, 20 May 2022 14:53:06 +0000"  >&lt;p&gt;There is a reportCoverage task in each module that runs jacoco or scoverage report (scoverage for the core module and jacoco for any other). This works well and needed for coverage generation.&lt;/p&gt;

&lt;p&gt;There is also a reportCoverage task configured outside of subprojects scope that depends on jacocoRootReport and the reportCoverage task of the core module.&#160;&lt;/p&gt;

&lt;p&gt;The jacocoRootReport depends on all java related project&apos;s test task.&lt;/p&gt;

&lt;p&gt;I don&apos;t think this jacocoRootReport is needed in the project because:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;You can have the coverage data generated for all modules without it&lt;/li&gt;
	&lt;li&gt;If you need something like a report to summarize everything that is what sonar is much better for than an html/xml file&lt;/li&gt;
	&lt;li&gt;I don&apos;t think jacoco aggregated report would include the core module&apos;s scoverage report (I am sure it can be implemented with additional work, but I am not sure it is worth instead of using simply a sonar), so even if the aggregated report would work, it still would not be complete for the project, core module would be missing&lt;/li&gt;
	&lt;li&gt;It seems to me that Gradle advises to create another module for aggregated reports that would be responsible to collect everything and generate the report, not like the current one: &lt;a href=&quot;https://docs.gradle.org/7.3.3/samples/sample_jvm_multi_project_with_code_coverage.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.gradle.org/7.3.3/samples/sample_jvm_multi_project_with_code_coverage.html&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;I doubt that it is used by anyone because it is not working for a really long time (tested in 2.5 and 3.2)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think the jacocoRootReport should be considered to be deleted along with the reportCoverage task outside of subprojects scope:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (userEnableTestCoverage) {
  task reportCoverage(dependsOn: [&lt;span class=&quot;code-quote&quot;&gt;&apos;jacocoRootReport&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;core:reportCoverage&apos;&lt;/span&gt;])
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Without them, it would be easy to generate coverage for all modules as it is documented.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17704565" author="akatona" created="Fri, 24 Mar 2023 10:43:20 +0000"  >&lt;p&gt;I have a jacoco related PR, which i want to finish up, so I&apos;m picking this one up too. checking how it&apos;s working on trunk.&lt;br/&gt;
(&lt;a href=&quot;https://github.com/apache/kafka/pull/11982&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/11982&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17799084" author="akatona" created="Wed, 20 Dec 2023 16:14:38 +0000"  >&lt;p&gt;Okay, I was trying to configure the jacoco-report-aggregation for the project, because we&apos;re removing the rootreport part from the build.gradle, that&apos;s not working any more. But failed to include that aggregation plugin in the timeframe I allocated myself to try. It&apos;s not adding much, sonar and jenkins are able to fetch the coverage reports from the build dirs (they would not use the aggregated one anyway), so I convinced myself that it&apos;s fine to stop trying &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;m doing a last round of tests with my adjustments (see the above mentioned &lt;a href=&quot;https://github.com/apache/kafka/pull/11982/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12jx4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>