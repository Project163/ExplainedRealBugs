<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:25:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-10387] Cannot include SMT configs with source connector that uses topic.creation.* properties</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-10387</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Let&apos;s say we try to create a connector with the following config:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;connector.class&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;io.debezium.connector.postgresql.PostgresConnector&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;tasks.max&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;database.hostname&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;database.port&quot;&lt;/span&gt;: 32843,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;database.user&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;database.password&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;database.dbname&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;database.server.name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;tcpsql&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;table.whitelist&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;.numerics&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;transforms&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;abc&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;transforms.abc.type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;io.debezium.transforms.ExtractNewRecordState&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;topic.creation.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.partitions&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;topic.creation.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.replication.factor&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;this fails with the following error in the Connector worker:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2020-08-11 02:47:05,908] ERROR Failed to start task deb-0 (org.apache.kafka.connect.runtime.Worker:560)
org.apache.kafka.connect.errors.ConnectException: org.apache.kafka.common.config.ConfigException: Unknown configuration &lt;span class=&quot;code-quote&quot;&gt;&apos;transforms.abc.type&apos;&lt;/span&gt;
	at org.apache.kafka.connect.runtime.ConnectorConfig.transformations(ConnectorConfig.java:296)
	at org.apache.kafka.connect.runtime.Worker.buildWorkerTask(Worker.java:605)
	at org.apache.kafka.connect.runtime.Worker.startTask(Worker.java:555)
	at org.apache.kafka.connect.runtime.distributed.DistributedHerder.startTask(DistributedHerder.java:1251)
	at org.apache.kafka.connect.runtime.distributed.DistributedHerder.access$1700(DistributedHerder.java:127)
	at org.apache.kafka.connect.runtime.distributed.DistributedHerder$10.call(DistributedHerder.java:1266)
	at org.apache.kafka.connect.runtime.distributed.DistributedHerder$10.call(DistributedHerder.java:1262)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:832)
Caused by: org.apache.kafka.common.config.ConfigException: Unknown configuration &lt;span class=&quot;code-quote&quot;&gt;&apos;transforms.abc.type&apos;&lt;/span&gt;
	at org.apache.kafka.common.config.AbstractConfig.get(AbstractConfig.java:159)
	at org.apache.kafka.connect.runtime.SourceConnectorConfig$EnrichedSourceConnectorConfig.get(SourceConnectorConfig.java:57)
	at org.apache.kafka.connect.runtime.SourceConnectorConfig.get(SourceConnectorConfig.java:141)
	at org.apache.kafka.common.config.AbstractConfig.getClass(AbstractConfig.java:216)
	at org.apache.kafka.connect.runtime.ConnectorConfig.transformations(ConnectorConfig.java:281)
	... 10 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;connector creation works fine, if we remove the topic.creation properties above. &lt;/p&gt;

&lt;p&gt;Not entirely sure but it looks like the piece of code that might need a fix is here (as it does not add &lt;tt&gt;transforms.*&lt;/tt&gt; configs into the returned ConfigDef instances: &lt;a href=&quot;https://github.com/apache/kafka/blob/2.6.0/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/SourceConnectorConfig.java#L94&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/2.6.0/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/SourceConnectorConfig.java#L94&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13322099">KAFKA-10387</key>
            <summary>Cannot include SMT configs with source connector that uses topic.creation.* properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkonstantine">Konstantine Karantasis</assignee>
                                    <reporter username="wicknicks">Arjun Satish</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Aug 2020 18:39:21 +0000</created>
                <updated>Mon, 17 Jun 2024 21:58:52 +0000</updated>
                            <resolved>Mon, 17 Aug 2020 06:26:16 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.6.1</fixVersion>
                    <fixVersion>2.7.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17178747" author="kkonstantine" created="Mon, 17 Aug 2020 06:25:47 +0000"  >&lt;p&gt;Addition of configs for custom topic creation with KIP-158 created a regression when transformation configs are also included in the configuration of a source connector.&lt;/p&gt;

&lt;p&gt;To experience the issue, just enabling topic creation at the worker is not sufficient. A user needs to supply a source connector configuration that contains both transformations and custom topic creation properties.&lt;/p&gt;

&lt;p&gt;The issue is that the enrichment of configs in&#160;&lt;tt&gt;SourceConnectorConfig&lt;/tt&gt;&#160;happens on top of an&#160;&lt;tt&gt;AbstractConfig&lt;/tt&gt;&#160;rather than a&#160;&lt;tt&gt;ConnectorConfig&lt;/tt&gt;. Inheriting from the latter allows enrichment to be composable for both topic creation and transformations.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13371106">KAFKA-12652</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13330594">KAFKA-10568</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ho1c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>