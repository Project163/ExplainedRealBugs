<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:10:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5807] Check Connector.config() and Transformation.config() returns a valid ConfigDef</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5807</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;NPE is thrown when a developer returns a null when overloading Connector.validate(). &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[2017-08-23 13:36:30,086] ERROR Stopping after connector error (org.apache.kafka.connect.cli.ConnectStandalone:99)
java.lang.NullPointerException
        at org.apache.kafka.connect.connector.Connector.validate(Connector.java:134)
        at org.apache.kafka.connect.runtime.AbstractHerder.validateConnectorConfig(AbstractHerder.java:254)
        at org.apache.kafka.connect.runtime.standalone.StandaloneHerder.putConnectorConfig(StandaloneHerder.java:158)
        at org.apache.kafka.connect.cli.ConnectStandalone.main(ConnectStandalone.java:93)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13098372">KAFKA-5807</key>
            <summary>Check Connector.config() and Transformation.config() returns a valid ConfigDef</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jcustenborder">Jeremy Custenborder</assignee>
                                    <reporter username="jcustenborder">Jeremy Custenborder</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Aug 2017 19:37:05 +0000</created>
                <updated>Tue, 22 May 2018 20:57:46 +0000</updated>
                            <resolved>Tue, 22 May 2018 20:56:09 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16148053" author="githubbot" created="Wed, 30 Aug 2017 21:00:12 +0000"  >&lt;p&gt;GitHub user jcustenborder opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3762&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3762&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5807&quot; title=&quot;Check Connector.config() and Transformation.config() returns a valid ConfigDef&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5807&quot;&gt;&lt;del&gt;KAFKA-5807&lt;/del&gt;&lt;/a&gt; - Check Connector.config() and Transformation.config() returns a valid ConfigDef&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jcustenborder/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jcustenborder/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5807&quot; title=&quot;Check Connector.config() and Transformation.config() returns a valid ConfigDef&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5807&quot;&gt;&lt;del&gt;KAFKA-5807&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3762.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3762.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3762&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 484447a755aeb14d62a7844530b7d95e0426eb2f&lt;br/&gt;
Author: Jeremy Custenborder &amp;lt;jcustenborder@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-08-30T20:40:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5807&quot; title=&quot;Check Connector.config() and Transformation.config() returns a valid ConfigDef&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5807&quot;&gt;&lt;del&gt;KAFKA-5807&lt;/del&gt;&lt;/a&gt; check for null when calling into user code. Throw a descriptive&lt;br/&gt;
    exception rather than the eventual NPE.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16484558" author="ewencp" created="Tue, 22 May 2018 20:56:09 +0000"  >&lt;p&gt;Issue resolved by pull request 3762&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/3762&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3762&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16484561" author="githubbot" created="Tue, 22 May 2018 20:57:46 +0000"  >&lt;p&gt;ewencp closed pull request #3762: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5807&quot; title=&quot;Check Connector.config() and Transformation.config() returns a valid ConfigDef&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5807&quot;&gt;&lt;del&gt;KAFKA-5807&lt;/del&gt;&lt;/a&gt; - Check Connector.config() and Transformation.config() returns a valid ConfigDef&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/3762&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3762&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/connect/api/src/main/java/org/apache/kafka/connect/connector/Connector.java b/connect/api/src/main/java/org/apache/kafka/connect/connector/Connector.java&lt;br/&gt;
index a8a5dabfc83..30dfd3cc9e0 100644&lt;br/&gt;
&amp;#8212; a/connect/api/src/main/java/org/apache/kafka/connect/connector/Connector.java&lt;br/&gt;
+++ b/connect/api/src/main/java/org/apache/kafka/connect/connector/Connector.java&lt;br/&gt;
@@ -19,6 +19,7 @@&lt;br/&gt;
 import org.apache.kafka.common.config.Config;&lt;br/&gt;
 import org.apache.kafka.common.config.ConfigDef;&lt;br/&gt;
 import org.apache.kafka.common.config.ConfigValue;&lt;br/&gt;
+import org.apache.kafka.connect.errors.ConnectException;&lt;/p&gt;

&lt;p&gt; import java.util.List;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
@@ -130,13 +131,18 @@ public void reconfigure(Map&amp;lt;String, String&amp;gt; props) {&lt;br/&gt;
      */&lt;br/&gt;
     public Config validate(Map&amp;lt;String, String&amp;gt; connectorConfigs) {&lt;br/&gt;
         ConfigDef configDef = config();&lt;br/&gt;
+        if (null == configDef) &lt;/p&gt;
{
+            throw new ConnectException(
+                String.format(&quot;%s.config() must return a ConfigDef that is not null.&quot;, this.getClass().getName())
+            );
+        }
&lt;p&gt;         List&amp;lt;ConfigValue&amp;gt; configValues = configDef.validate(connectorConfigs);&lt;br/&gt;
         return new Config(configValues);&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Define the configuration for the connector.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @return The ConfigDef for this connector.&lt;br/&gt;
+     * @return The ConfigDef for this connector; may not be null.&lt;br/&gt;
      */&lt;br/&gt;
     public abstract ConfigDef config();&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java&lt;br/&gt;
index 424b4749fe2..c31568664fc 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java&lt;br/&gt;
+++ b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java&lt;br/&gt;
@@ -271,7 +271,23 @@ public ConfigInfos validateConnectorConfig(Map&amp;lt;String, String&amp;gt; connectorProps) {&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             // do custom connector-specific validation&lt;br/&gt;
             Config config = connector.validate(connectorProps);&lt;br/&gt;
+            if (null == config) &lt;/p&gt;
{
+                throw new BadRequestException(
+                    String.format(
+                        &quot;%s.validate() must return a Config that is not null.&quot;,
+                        connector.getClass().getName()
+                    )
+                );
+            }
&lt;p&gt;             ConfigDef configDef = connector.config();&lt;br/&gt;
+            if (null == configDef) &lt;/p&gt;
{
+                throw new BadRequestException(
+                    String.format(
+                        &quot;%s.config() must return a ConfigDef that is not null.&quot;,
+                        connector.getClass().getName()
+                    )
+                );
+            }
&lt;p&gt;             configKeys.putAll(configDef.configKeys());&lt;br/&gt;
             allGroups.addAll(configDef.groups());&lt;br/&gt;
             configValues.addAll(config.configValues());&lt;br/&gt;
diff --git a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/ConnectorConfig.java b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/ConnectorConfig.java&lt;br/&gt;
index 6a90310df5a..a8dd49a4091 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/ConnectorConfig.java&lt;br/&gt;
+++ b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/ConnectorConfig.java&lt;br/&gt;
@@ -227,11 +227,22 @@ static ConfigDef getConfigDefFromTransformation(String key, Class&amp;lt;?&amp;gt; transformat&lt;br/&gt;
         if (transformationCls == null || !Transformation.class.isAssignableFrom(transformationCls)) &lt;/p&gt;
{
             throw new ConfigException(key, String.valueOf(transformationCls), &quot;Not a Transformation&quot;);
         }
&lt;p&gt;+        Transformation transformation;&lt;br/&gt;
         try &lt;/p&gt;
{
-            return (transformationCls.asSubclass(Transformation.class).newInstance()).config();
+            transformation = transformationCls.asSubclass(Transformation.class).newInstance();
         }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
             throw new ConfigException(key, String.valueOf(transformationCls), &quot;Error getting config definition from Transformation: &quot; + e.getMessage());
         }
&lt;p&gt;+        ConfigDef configDef = transformation.config();&lt;br/&gt;
+        if (null == configDef) &lt;/p&gt;
{
+            throw new ConnectException(
+                String.format(
+                    &quot;%s.config() must return a ConfigDef that is not null.&quot;,
+                    transformationCls.getName()
+                )
+            );
+        }
&lt;p&gt;+        return configDef;&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jf4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>