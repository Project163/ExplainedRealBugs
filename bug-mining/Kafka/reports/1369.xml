<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:59:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4756] The auto-generated broker id should be passed to MetricReporter.configure</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4756</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;We currently pass the original config values and we initialise the metric reporters in the constructor of `KafkaServer` while we get the generated broker id in the `startup` method.&lt;/p&gt;

&lt;p&gt;We should also check if there&apos;s any other pluggable interface that suffers from the same issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13042129">KAFKA-4756</key>
            <summary>The auto-generated broker id should be passed to MetricReporter.configure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cmccabe">Colin McCabe</assignee>
                                    <reporter username="ijuma">Ismael Juma</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 17:10:31 +0000</created>
                <updated>Mon, 13 Feb 2017 21:47:35 +0000</updated>
                            <resolved>Mon, 13 Feb 2017 21:47:08 +0000</resolved>
                                                    <fixVersion>0.10.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15862105" author="githubbot" created="Sat, 11 Feb 2017 01:04:06 +0000"  >&lt;p&gt;GitHub user cmccabe opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2540&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2540&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4756&quot; title=&quot;The auto-generated broker id should be passed to MetricReporter.configure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4756&quot;&gt;&lt;del&gt;KAFKA-4756&lt;/del&gt;&lt;/a&gt;: The auto-generated broker id should be passed to MetricRe&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;porter.configure&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cmccabe/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cmccabe/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4756&quot; title=&quot;The auto-generated broker id should be passed to MetricReporter.configure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4756&quot;&gt;&lt;del&gt;KAFKA-4756&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2540.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2540.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2540&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8ad6a776619866b04be9f5990de48a3218a99107&lt;br/&gt;
Author: Colin P. Mccabe &amp;lt;cmccabe@confluent.io&amp;gt;&lt;br/&gt;
Date:   2017-02-11T01:03:07Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4756&quot; title=&quot;The auto-generated broker id should be passed to MetricReporter.configure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4756&quot;&gt;&lt;del&gt;KAFKA-4756&lt;/del&gt;&lt;/a&gt;: The auto-generated broker id should be passed to MetricReporter.configure&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15862112" author="cmccabe" created="Sat, 11 Feb 2017 01:10:58 +0000"  >&lt;p&gt;I put up a patch for this that fixes the issue.&lt;/p&gt;

&lt;p&gt;So, the tricky issue here is that the broker id may be explicitly set in the configuration that the user passes, or the broker id may be determined at runtime (when broker id generation is enabled.)  Even though the broker id can be changed, this change does not propagate to the original map of string -&amp;gt; object which backs the KafkaConfiguration object.  The KafkaConfiguration class is almost entirely immutable and the broker id is one of the few mutable fields.  My patch works around this by creating the reporter objects with an explicit &quot;configuration override&quot; that sets the broker id field, even though it is not necessarily set in the configuration map.&lt;/p&gt;

&lt;p&gt;Detailed overview:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;KafkaServer.scala: Do not create the reporters inside the KafkaConfig object constructor.  Instead, create them after the broker id is known in KafkaServer&apos;s constructor.&lt;/li&gt;
	&lt;li&gt;AbstractConfig.java: add a method that can instantiate a list of configurable objects with configuration overrides.&lt;/li&gt;
	&lt;li&gt;KafkaMetricReporterClusterIdTest: add a test that clsuter id is set in the configuration that we are passed.  I confirmed that this fails without the rest of the patch.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15864513" author="junrao" created="Mon, 13 Feb 2017 21:47:08 +0000"  >&lt;p&gt;Issue resolved by pull request 2540&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2540&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2540&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15864515" author="githubbot" created="Mon, 13 Feb 2017 21:47:35 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2540&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2540&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39x4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>