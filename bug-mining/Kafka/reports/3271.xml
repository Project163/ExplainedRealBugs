<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:30:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-13613] Kafka Connect has a hard dependency on KeyGenerator.HmacSHA256</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-13613</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;If a server is running Java 8 that has been configured for FIPS mode according to &lt;a href=&quot;https://access.redhat.com/documentation/en-us/openjdk/8/pdf/configuring_openjdk_8_on_rhel_with_fips/openjdk-8-configuring_openjdk_8_on_rhel_with_fips-en-us.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;openjdk-8-configuring_openjdk_8_on_rhel_with_fips-en-us.pdf&lt;/a&gt; then the SunJCE provider is not available. As such the KeyGenerator HmacSHA256 is not available. The KeyGenerators I see available are&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;DES&lt;/li&gt;
	&lt;li&gt;ARCFOUR&lt;/li&gt;
	&lt;li&gt;AES&lt;/li&gt;
	&lt;li&gt;DESede&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Out of these I think AES would be most appropriate, but that&apos;s not the point of this issue, just including for completeness.&lt;/p&gt;

&lt;p&gt;When Kafka Connect is started in distributed mode on one of these servers I see the following stack trace&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2022-01-20 20:36:30,027] ERROR Stopping due to error (org.apache.kafka.connect.cli.ConnectDistributed)
java.lang.ExceptionInInitializerError
        at org.apache.kafka.connect.cli.ConnectDistributed.startConnect(ConnectDistributed.java:94)
        at org.apache.kafka.connect.cli.ConnectDistributed.main(ConnectDistributed.java:79)
Caused by: org.apache.kafka.common.config.ConfigException: Invalid value HmacSHA256 for configuration inter.worker.key.generation.algorithm: HmacSHA256 KeyGenerator not available
        at org.apache.kafka.connect.runtime.distributed.DistributedConfig.validateKeyAlgorithm(DistributedConfig.java:504)
        at org.apache.kafka.connect.runtime.distributed.DistributedConfig.lambda$configDef$2(DistributedConfig.java:375)
        at org.apache.kafka.common.config.ConfigDef$LambdaValidator.ensureValid(ConfigDef.java:1043)
        at org.apache.kafka.common.config.ConfigDef$ConfigKey.&amp;lt;init&amp;gt;(ConfigDef.java:1164)
        at org.apache.kafka.common.config.ConfigDef.define(ConfigDef.java:152)
        at org.apache.kafka.common.config.ConfigDef.define(ConfigDef.java:172)
        at org.apache.kafka.common.config.ConfigDef.define(ConfigDef.java:211)
        at org.apache.kafka.common.config.ConfigDef.define(ConfigDef.java:373)
        at org.apache.kafka.connect.runtime.distributed.DistributedConfig.configDef(DistributedConfig.java:371)
        at org.apache.kafka.connect.runtime.distributed.DistributedConfig.&amp;lt;clinit&amp;gt;(DistributedConfig.java:196)
        ... 2 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It appears the &lt;tt&gt;org.apache.kafka.connect.runtime.distributed.DistributedConfig&lt;/tt&gt; is triggering a validation of the hard-coded default &lt;tt&gt;inter.worker.key.generation.algorithm&lt;/tt&gt; property, which is &lt;tt&gt;HmacSHA256&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Ideally a fix would use the value from the configuration file before attempting to validate a default value.&lt;/p&gt;

&lt;p&gt;Updates &lt;span class=&quot;error&quot;&gt;&amp;#91;2022/01/27&amp;#93;&lt;/span&gt;: I just tested on a FIPS-enabled version of OpenJDK 11 using the instructions at &lt;a href=&quot;https://access.redhat.com/documentation/en-us/openjdk/11/html-single/configuring_openjdk_11_on_rhel_with_fips/index&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;configuring_openjdk_11_on_rhel_with_fips&lt;/a&gt;, which resulted in the same issues. One workaround is to disable FIPS for Kafka Connect by passing in the JVM parameter &lt;tt&gt;-Dcom.redhat.fips=false&lt;/tt&gt;, however, that means Kafka Connect and all the workers are out of compliance for anyone required to use FIPS-enabled systems.&lt;/p&gt;</description>
                <environment>RHEL 8.5&lt;br/&gt;
OpenJDK 1.8.0_312 or 11&lt;br/&gt;
Confluent Platform 7.0.1 (Kafka 3.0.0)</environment>
        <key id="13424408">KAFKA-13613</key>
            <summary>Kafka Connect has a hard dependency on KeyGenerator.HmacSHA256</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ChrisEgerton">Chris Egerton</assignee>
                                    <reporter username="that_guy">Guy Pascarella</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Jan 2022 13:35:27 +0000</created>
                <updated>Tue, 5 Jul 2022 10:34:45 +0000</updated>
                            <resolved>Tue, 5 Jul 2022 10:34:45 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.3.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17501355" author="mmillson" created="Fri, 4 Mar 2022 14:30:32 +0000"  >&lt;p&gt;I think OpenJDK17 should work, as support for this type of key was added with SHA3 support for the SunPKCS11 provider in JDK16&lt;span class=&quot;error&quot;&gt;&amp;#91;1,2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;References:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=2007331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java-17-openjdk / rhel-8.5: Mac keys generated by KeyGenerator do not work with corresponding Mac in FIPS mode&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8256082&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Add SHA3 support to SunPKCS11 provider&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17506571" author="chrisegerton" created="Mon, 14 Mar 2022 21:29:31 +0000"  >&lt;p&gt;Thanks for reporting this, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=that_guy&quot; class=&quot;user-hover&quot; rel=&quot;that_guy&quot;&gt;that_guy&lt;/a&gt;. I&apos;m working on a fix and would like to confirm something with you&#8211;is the primary use case here &lt;em&gt;running&lt;/em&gt; Kafka Connect on a FIPS-compliant JVM (or really, any JVM that doesn&apos;t come with the &lt;tt&gt;HmacSHA256&lt;/tt&gt; key generator algorithm), or is it also necessary to be able to &lt;em&gt;build&lt;/em&gt; Kafka Connect from source on that kind of JVM, including running all unit and integration tests?&lt;/p&gt;</comment>
                            <comment id="17510979" author="JIRAUSER284104" created="Wed, 23 Mar 2022 02:43:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ChrisEgerton&quot; class=&quot;user-hover&quot; rel=&quot;ChrisEgerton&quot;&gt;ChrisEgerton&lt;/a&gt; The issue is only observed for running. We tend to utilize pre-compiled binaries whenever possible. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0yvu0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>