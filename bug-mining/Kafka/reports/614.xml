<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:42:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1947] can&apos;t explicitly set replica-assignment when add partitions</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1947</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;When create topic, the replicaAssignmentOpt should not appear with partitions.&lt;br/&gt;
But when add partitions,  they should can appear together,  from the code below, you can see when alter topic, and has partitions in arguments, it try get &quot;replica-assignment&quot;&lt;br/&gt;
&lt;a href=&quot;https://git1-us-west.apache.org/repos/asf?p=kafka.git;a=blob;f=core/src/main/scala/kafka/admin/TopicCommand.scala;h=285c0333ff43543d3e46444c1cd9374bb883bb59;hb=HEAD#l114&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git1-us-west.apache.org/repos/asf?p=kafka.git;a=blob;f=core/src/main/scala/kafka/admin/TopicCommand.scala;h=285c0333ff43543d3e46444c1cd9374bb883bb59;hb=HEAD#l114&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;The root cause is below code:&lt;br/&gt;
CommandLineUtils.checkInvalidArgs(parser, options, replicaAssignmentOpt,&lt;br/&gt;
 305         allTopicLevelOpts &amp;#8211; Set(alterOpt, createOpt) + partitionsOpt + replicationFactorOpt)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://git1-us-west.apache.org/repos/asf?p=kafka.git;a=blob;f=core/src/main/scala/kafka/admin/TopicCommand.scala;h=285c0333ff43543d3e46444c1cd9374bb883bb59;hb=HEAD#l304&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git1-us-west.apache.org/repos/asf?p=kafka.git;a=blob;f=core/src/main/scala/kafka/admin/TopicCommand.scala;h=285c0333ff43543d3e46444c1cd9374bb883bb59;hb=HEAD#l304&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Related:  &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1052&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-1052&lt;/a&gt;&lt;/p&gt;
</description>
                <environment>Windows</environment>
        <key id="12774409">KAFKA-1947</key>
            <summary>can&apos;t explicitly set replica-assignment when add partitions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="waldenchen">Honghai Chen</assignee>
                                    <reporter username="waldenchen">Honghai Chen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Feb 2015 01:49:11 +0000</created>
                <updated>Mon, 23 Nov 2015 03:27:38 +0000</updated>
                            <resolved>Sun, 22 Feb 2015 04:28:14 +0000</resolved>
                                    <version>0.8.1.1</version>
                                    <fixVersion>0.9.0.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14317775" author="waldenchen" created="Thu, 12 Feb 2015 08:08:17 +0000"  >&lt;p&gt;Created reviewboard  against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14317781" author="waldenchen" created="Thu, 12 Feb 2015 08:14:18 +0000"  >&lt;p&gt;The fix is quite directly:&lt;br/&gt;
When has replicaAssignment, the command should only be createTopic or alterTopic&lt;br/&gt;
When the command is create topic,  and replicaAssignment appear, there should no partitions and replica number.&lt;/p&gt;

&lt;p&gt;The command told me board is ok, but actually no.  But patch uploaded.&lt;/p&gt;

&lt;p&gt;D:\C\Kafka_Update&amp;gt;kafka-patch-review_.py -b origin/trunk -j &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1947&quot; title=&quot;can&amp;#39;t explicitly set replica-assignment when add partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1947&quot;&gt;&lt;del&gt;KAFKA-1947&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
Configuring reviewboard url to &lt;a href=&quot;https://reviews.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org&lt;/a&gt;&lt;br/&gt;
Updating your remote branches to pull the latest changes&lt;br/&gt;
Creating diff against origin/trunk and uploading patch to JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1947&quot; title=&quot;can&amp;#39;t explicitly set replica-assignment when add partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1947&quot;&gt;&lt;del&gt;KAFKA-1947&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
Created a new reviewboard&lt;/p&gt;

&lt;p&gt;D:\C\Kafka_Update&amp;gt;&lt;/p&gt;</comment>
                            <comment id="14317835" author="waldenchen" created="Thu, 12 Feb 2015 08:56:40 +0000"  >&lt;p&gt;Submit review ...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/30919/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/30919/diff/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please help check&lt;/p&gt;</comment>
                            <comment id="14332017" author="nehanarkhede" created="Sun, 22 Feb 2015 04:28:14 +0000"  >&lt;p&gt;Thanks for the patch. Pushed to trunk&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12744583">KAFKA-1656</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12698366" name="KAFKA-1947.patch" size="1402" author="waldenchen" created="Thu, 12 Feb 2015 08:54:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25imf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>