<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:27:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5146] Kafka Streams: remove compile dependency on connect-json</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5146</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;We currently have a compile-dependency on `connect-json`:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;dependency&amp;gt;
  &amp;lt;groupId&amp;gt;org.apache.kafka&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;connect-json&amp;lt;/artifactId&amp;gt;
  &amp;lt;version&amp;gt;0.10.2.0&amp;lt;/version&amp;gt;
  &amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;
  &amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The snippet above is from the generated POM of Kafka Streams as of 0.10.2.0 release.&lt;/p&gt;

&lt;p&gt;AFAICT the only reason for that is because the Kafka Streams &lt;b&gt;examples&lt;/b&gt; showcase some JSON processing, but that&#8217;s it.&lt;/p&gt;

&lt;p&gt;First and foremost, we should remove the connect-json dependency, and also figure out a way to set up / structure the examples so we that we can continue showcasing JSON support.  Alternatively, we could consider removing the JSON example (but I don&apos;t like that, personally).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13068100">KAFKA-5146</key>
            <summary>Kafka Streams: remove compile dependency on connect-json</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcolotz">Marco Lotz</assignee>
                                    <reporter username="miguno">Michael G. Noll</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 May 2017 09:11:50 +0000</created>
                <updated>Wed, 7 Apr 2021 00:49:38 +0000</updated>
                            <resolved>Wed, 7 Apr 2021 00:49:38 +0000</resolved>
                                    <version>0.10.1.0</version>
                    <version>0.10.2.0</version>
                    <version>0.10.2.1</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>7</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="16696557" author="tom.dewolf" created="Fri, 23 Nov 2018 09:22:41 +0000"  >&lt;p&gt;Can this get more priority? for example when running on jdk 11 this dependency is the only one requiring java xml bind dependencies which were removed from the jdk&lt;/p&gt;</comment>
                            <comment id="16696571" author="ijuma" created="Fri, 23 Nov 2018 09:33:16 +0000"  >&lt;p&gt;What version of Kafka Streams are you using? 2.1.0 should work fine in Java 11.&lt;/p&gt;</comment>
                            <comment id="16696580" author="tom.dewolf" created="Fri, 23 Nov 2018 09:37:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; we are using 2.1.0 and it works, but only if we exclude the connect-json dependency ourselves OR add a java xml bind implementation as dependency which we don&apos;t need otherwise&lt;/p&gt;</comment>
                            <comment id="16696594" author="ijuma" created="Fri, 23 Nov 2018 09:46:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tom.dewolf&quot; class=&quot;user-hover&quot; rel=&quot;tom.dewolf&quot;&gt;tom.dewolf&lt;/a&gt; Can you please file a bug? connect-json should be including the xml bind dependency if it&apos;s required to start.&#160;Maybe the JUnit tests include it somehow and hence why we haven&apos;t seen the issue when running the tests with Java 11.&lt;/p&gt;</comment>
                            <comment id="16696598" author="tom.dewolf" created="Fri, 23 Nov 2018 09:50:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; this bug is exactly what would solve it. And if only the junit test include it then it should only be a test dependency, not a real dependency. Best to change the priority field of this bug and add 2.1.0 as affected version, can you do that?&lt;/p&gt;</comment>
                            <comment id="16696610" author="ijuma" created="Fri, 23 Nov 2018 10:02:00 +0000"  >&lt;p&gt;This Jira is about an orthogonal issue than the Java 11 issue you raise. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt; should be able to confirm if the connect-json is needed or not.&lt;/p&gt;</comment>
                            <comment id="16697451" author="mjsax" created="Fri, 23 Nov 2018 19:17:15 +0000"  >&lt;p&gt;Kafka Streams code base includes a small example program using JSON data type&#160;and pulls in&#160;connect-json to make it work. If we remove the dependency, we need to remove the example, too. Or add a different dependency for an external JSON library.&lt;/p&gt;

&lt;p&gt;An alternative might be to add a new module `kafka-streams-examples` and move it (code and dependency) there. However, there are only two examples and thus it&#160;seems not be worth adding a new module.&lt;/p&gt;</comment>
                            <comment id="16697454" author="ijuma" created="Fri, 23 Nov 2018 19:22:24 +0000"  >&lt;p&gt;Why is the example shipped with the main jar though. A separate module seems like the right solution, but another option is to add it to the test module.&lt;/p&gt;</comment>
                            <comment id="16697465" author="mjsax" created="Fri, 23 Nov 2018 19:41:35 +0000"  >&lt;p&gt;I don&apos;t know &#8211; it was like since from the beginning on. I agree that it&apos;s not clean to have it in the main jar. With &quot;test module&quot; do you mean `streams-test-utils`? &#8211; seems to be equally unclean to me. If you mean&#160;unit/integration test module, it seem not helpful because users should not depend on test&#160;modules at all.&lt;/p&gt;

&lt;p&gt;Overall, adding a new module for examples is the cleanest solution, if&#160;we don&apos;t see this as unnecessary overhead, for&#160;the small number of&#160;examples we have.&lt;/p&gt;</comment>
                            <comment id="16699446" author="guozhang" created="Mon, 26 Nov 2018 19:01:35 +0000"  >&lt;p&gt;I think we can actually use the `streams-quickstart` repo, which is part of the tutorial web docs to replace the examples folder inside `src`. It&apos;s a bit different from current examples code such that it cannot be executed directly.&lt;/p&gt;</comment>
                            <comment id="16704882" author="ijuma" created="Fri, 30 Nov 2018 15:10:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tom.dewolf&quot; class=&quot;user-hover&quot; rel=&quot;tom.dewolf&quot;&gt;tom.dewolf&lt;/a&gt; can you please paste a stacktrace of the error you see with Java 11?&lt;/p&gt;</comment>
                            <comment id="16706796" author="robin.vanpraet@aca-it.be" created="Mon, 3 Dec 2018 07:57:41 +0000"  >&lt;p&gt;Hi, I&apos;m a colleague of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tom.dewolf&quot; class=&quot;user-hover&quot; rel=&quot;tom.dewolf&quot;&gt;tom.dewolf&lt;/a&gt; and the one actually running into this issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; : in my opinion having an unneeded dependency (and example code) in production code is much worse than just creating another module with some examples.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; : the error that occurs is the following:&#160;java.lang.module.FindException: Module java.xml.bind not found, required by java.ws.rs&lt;/p&gt;

&lt;p&gt;This error is only an issue when running on the module-path (not just the class-path). We are using Kafka Streams 2.1.0. Kafka Streams depends on connect-json 2.1.0.&#160;Which in turn depends on connect-api 2.1.0. The connect-api has a new version of&#160;javax.ws.rs:javax.ws.rs-api 2.1.1. And here is the issue. This dependency is now a full fletched Java Module explicitly requiring module java.xml.bind which is not available in our module-path. And it shouldn&apos;t be because we do not use it. And according to this bug Kafka Streams doesn&apos;t use it either (only for some code samples).&#160;&lt;/p&gt;</comment>
                            <comment id="16706806" author="mjsax" created="Mon, 3 Dec 2018 08:10:34 +0000"  >&lt;p&gt;I agree that we should get rid of the dependency &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;As a workaround, you could exclude the dependency? IIRC, maven allows to specify a dependency as &quot;provided&quot; suppressing that it get&apos;s pulled in (not sure if you use maven)? Because Kafka Streams actually does not depend on it, but only the example code that is not used, it should be save to exclude it.&lt;/p&gt;</comment>
                            <comment id="16706826" author="robin.vanpraet@aca-it.be" created="Mon, 3 Dec 2018 08:28:02 +0000"  >&lt;p&gt;Yes as a workaround we excluded the dependency indeed&lt;/p&gt;</comment>
                            <comment id="16707972" author="mjsax" created="Mon, 3 Dec 2018 23:27:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=miguno&quot; class=&quot;user-hover&quot; rel=&quot;miguno&quot;&gt;miguno&lt;/a&gt; How important do we think is the example? Could we just remove it? If we create a new module, do we need a KIP (maybe not?).&lt;/p&gt;</comment>
                            <comment id="17281789" author="marcolotz" created="Tue, 9 Feb 2021 13:31:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;&#160;I recall we had a similar problem when updating to Java 11. Also, shipping the example with the production code, as everyone seems to agree, is sub-optimal.&lt;/p&gt;

&lt;p&gt;Kafka contains right now a module called &quot;&lt;a href=&quot;https://github.com/apache/kafka/tree/trunk/examples&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;examples&lt;/a&gt;&quot;, as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt;&#160;mentioned. If nobody strongly disagrees, I can send a PR moving this section of code there and removing the dependency. I can move it a package called &quot;streams.examples&quot; inside the &quot;examples&quot; module for example. Also, seems that I will have to update the Readme of the examples module - since although the package name is plural, currently there&apos;s only one example there.&lt;/p&gt;

&lt;p&gt;The example code itself was quite useful when I was onboarding some members - so I would suggest not to remove it.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17282099" author="mjsax" created="Tue, 9 Feb 2021 22:59:34 +0000"  >&lt;p&gt;Any comments from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vvcephei&quot; class=&quot;user-hover&quot; rel=&quot;vvcephei&quot;&gt;vvcephei&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ableegoldman&quot; class=&quot;user-hover&quot; rel=&quot;ableegoldman&quot;&gt;ableegoldman&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bbejeck&quot; class=&quot;user-hover&quot; rel=&quot;bbejeck&quot;&gt;bbejeck&lt;/a&gt;&#160;?&lt;/p&gt;</comment>
                            <comment id="17282162" author="ableegoldman" created="Wed, 10 Feb 2021 02:21:45 +0000"  >&lt;p&gt;I agree, let&apos;s definitely not remove them entirely.&lt;/p&gt;

&lt;p&gt;Personally I think it makes more sense to move them to their own module rather than re-use the streams-quickstart, since that modules serves its own purpose which is not the same as program examples. But I don&apos;t feel that strongly one way or another.&lt;/p&gt;

&lt;p&gt;There may not be many examples at the moment, but maybe someone will want to contribute more. There are definitely plenty of examples that would be useful and are currently lacking, such as usage of a global store.&lt;/p&gt;</comment>
                            <comment id="17282398" author="marcolotz" created="Wed, 10 Feb 2021 11:52:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ableegoldman&quot; class=&quot;user-hover&quot; rel=&quot;ableegoldman&quot;&gt;ableegoldman&lt;/a&gt;&#160;sounds good. Would you suggest to create a module named &quot;streams-examples&quot; or should I add to the previous &quot;examples&quot; module of Kafka project?&lt;/p&gt;</comment>
                            <comment id="17282729" author="ableegoldman" created="Wed, 10 Feb 2021 21:25:27 +0000"  >&lt;p&gt;I guess I would lean towards creating a separate streams-examples module for a clean separation, but honestly putting it into the existing examples module doesn&apos;t seem to bad. It&apos;s a little messy in there already though. If anyone else feels strongly, I&apos;m happy either way&lt;/p&gt;</comment>
                            <comment id="17283829" author="marcolotz" created="Fri, 12 Feb 2021 16:54:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vvcephei&quot; class=&quot;user-hover&quot; rel=&quot;vvcephei&quot;&gt;vvcephei&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bbejeck&quot; class=&quot;user-hover&quot; rel=&quot;bbejeck&quot;&gt;bbejeck&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; any of you against proceeding and moving it to a new &quot;streams-examples&quot; module? Otherwise I will send a PR fix next week.&lt;/p&gt;</comment>
                            <comment id="17284970" author="mjsax" created="Mon, 15 Feb 2021 22:47:38 +0000"  >&lt;p&gt;Adding a `streams-examples` module SGTM.&lt;/p&gt;</comment>
                            <comment id="17293178" author="marcolotz" created="Mon, 1 Mar 2021 21:22:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ableegoldman&quot; class=&quot;user-hover&quot; rel=&quot;ableegoldman&quot;&gt;ableegoldman&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;&#160;whenever you have some spare time, can you please have a quick look on the PR?&lt;/p&gt;</comment>
                            <comment id="17315626" author="marcolotz" created="Tue, 6 Apr 2021 14:45:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;&#160;would it be possible for you to have a quick look into the PR? Since updates files are quite mutable right now, the PR needs constant maintenance to keep it merge-conflict free.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3eb6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>