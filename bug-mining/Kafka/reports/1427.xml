<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:00:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4810] SchemaBuilder should be more lax about checking that fields are unset if they are being set to the same value</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4810</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Currently SchemaBuilder is strict when checking that certain fields have not been set yet (e.g. version, name, doc). It just checks that the field is null. This is intended to protect the user from buggy code that overwrites a field with different values, but it&apos;s a bit too strict currently. In generic code for converting schemas (e.g. Converters) you will sometimes initialize a builder with these values (e.g. because you get a SchemaBuilder for a logical type, which sets name &amp;amp; version), but then have generic code for setting name &amp;amp; version from the source schema.&lt;/p&gt;

&lt;p&gt;We saw this bug in practice with Confluent&apos;s AvroConverter, so it&apos;s likely it could trip up others as well. You can work around the issue, but it would be nice if exceptions were only thrown if you try to overwrite an existing value with a different value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13046809">KAFKA-4810</key>
            <summary>SchemaBuilder should be more lax about checking that fields are unset if they are being set to the same value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pshk4r">Vitaly Pushkar</assignee>
                                    <reporter username="ewencp">Ewen Cheslack-Postava</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Mon, 27 Feb 2017 23:52:43 +0000</created>
                <updated>Tue, 4 Apr 2017 21:59:48 +0000</updated>
                            <resolved>Tue, 4 Apr 2017 21:59:02 +0000</resolved>
                                    <version>0.10.2.0</version>
                                    <fixVersion>0.11.0.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="15948026" author="pshk4r" created="Wed, 29 Mar 2017 22:47:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ewencp&quot; class=&quot;user-hover&quot; rel=&quot;ewencp&quot;&gt;ewencp&lt;/a&gt; I would like to fix this one. How do I get assigned? Thank you&lt;/p&gt;</comment>
                            <comment id="15949951" author="ewencp" created="Thu, 30 Mar 2017 22:08:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pshk4r&quot; class=&quot;user-hover&quot; rel=&quot;pshk4r&quot;&gt;pshk4r&lt;/a&gt; Great! You&apos;re already a contributor on the Kafka project so when you want to pick up a ticket you can just assign it to yourself so someone else doesn&apos;t accidentally work on it in parallel.&lt;/p&gt;</comment>
                            <comment id="15952397" author="githubbot" created="Sat, 1 Apr 2017 20:42:29 +0000"  >&lt;p&gt;GitHub user vitaly-pushkar opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2787&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2787&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4810&quot; title=&quot;SchemaBuilder should be more lax about checking that fields are unset if they are being set to the same value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4810&quot;&gt;&lt;del&gt;KAFKA-4810&lt;/del&gt;&lt;/a&gt;: Kafka Connect SchemaBuilder unset fields validation fix&lt;/p&gt;

&lt;p&gt;    &amp;gt; Currently SchemaBuilder is strict when checking that certain fields have not been set yet (e.g. version, name, doc). It just checks that the field is null. This is intended to protect the user from buggy code that overwrites a field with different values, but it&apos;s a bit too strict currently. In generic code for converting schemas (e.g. Converters) you will sometimes initialize a builder with these values (e.g. because you get a SchemaBuilder for a logical type, which sets name &amp;amp; version), but then have generic code for setting name &amp;amp; version from the source schema.&lt;/p&gt;

&lt;p&gt;    Changed the validation method to not only check if a field is null but also to check if the new value that is being set is the same as the current value of the field.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/vitaly-pushkar/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vitaly-pushkar/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4810&quot; title=&quot;SchemaBuilder should be more lax about checking that fields are unset if they are being set to the same value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4810&quot;&gt;&lt;del&gt;KAFKA-4810&lt;/del&gt;&lt;/a&gt;-check-if-can-set-field-same-value&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2787.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2787.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2787&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 404995bf21ca645475b4a8a002fa6a12e6619fcd&lt;br/&gt;
Author: Vitaly Pushkar &amp;lt;vitaly.pushkar@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-04-01T20:29:28Z&lt;/p&gt;

&lt;p&gt;    Change field null validation method to respect the previously set same value&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15955707" author="githubbot" created="Tue, 4 Apr 2017 19:53:07 +0000"  >&lt;p&gt;Github user vitaly-pushkar closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2787&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2787&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15955732" author="githubbot" created="Tue, 4 Apr 2017 20:20:07 +0000"  >&lt;p&gt;GitHub user vitaly-pushkar opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2806&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2806&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4810&quot; title=&quot;SchemaBuilder should be more lax about checking that fields are unset if they are being set to the same value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4810&quot;&gt;&lt;del&gt;KAFKA-4810&lt;/del&gt;&lt;/a&gt;: Kafka Connect SchemaBuilder unset fields validation fix&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4810&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-4810&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;gt; Currently SchemaBuilder is strict when checking that certain fields have not been set yet (e.g. version, name, doc). It just checks that the field is null. This is intended to protect the user from buggy code that overwrites a field with different values, but it&apos;s a bit too strict currently. In generic code for converting schemas (e.g. Converters) you will sometimes initialize a builder with these values (e.g. because you get a SchemaBuilder for a logical type, which sets name &amp;amp; version), but then have generic code for setting name &amp;amp; version from the source schema.&lt;/p&gt;

&lt;p&gt;    Changed the validation method to not only check if a field is null but also to check if the new value that is being set is the same as the current value of the field.&lt;br/&gt;
    @ewencp&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/vitaly-pushkar/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vitaly-pushkar/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4810&quot; title=&quot;SchemaBuilder should be more lax about checking that fields are unset if they are being set to the same value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4810&quot;&gt;&lt;del&gt;KAFKA-4810&lt;/del&gt;&lt;/a&gt;-schema-builder-default-fields-validation&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2806.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2806.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2806&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7ed22f0b54ab09aebe6c2f6e9404974ba3b21ed1&lt;br/&gt;
Author: Vitaly Pushkar &amp;lt;vitaly.pushkar@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-04-04T20:00:46Z&lt;/p&gt;

&lt;p&gt;    Change field null validation to accept the same value overwrite&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15955936" author="ewencp" created="Tue, 4 Apr 2017 21:59:02 +0000"  >&lt;p&gt;Issue resolved by pull request 2806&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2806&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2806&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15955937" author="githubbot" created="Tue, 4 Apr 2017 21:59:48 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2806&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2806&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3apd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>