<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:27:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-12381] Incompatible change in verifiable_producer.log in 2.8</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-12381</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In test_verifiable_producer.py , we used to see this error message in verifiable_producer.log when a topic couldn&apos;t be created:&lt;/p&gt;

&lt;p&gt;WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;Producer clientId=producer-1&amp;#93;&lt;/span&gt; Error while fetching metadata with correlation id 1 : &lt;/p&gt;
{test_topic=LEADER_NOT_AVAILABLE}
&lt;p&gt; (org.apache.kafka.clients.NetworkClient)&lt;br/&gt;
The test does a grep LEADER_NOT_AVAILABLE on the log in this case, and it used to pass.&lt;/p&gt;

&lt;p&gt;Now we are instead seeing this in the log file:&lt;/p&gt;

&lt;p&gt;WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;Producer clientId=producer-1&amp;#93;&lt;/span&gt; Error while fetching metadata with correlation id 1 : &lt;/p&gt;
{test_topic=INVALID_REPLICATION_FACTOR}
&lt;p&gt; (org.apache.kafka.clients.NetworkClient)&lt;br/&gt;
And of course now the test fails.&lt;/p&gt;

&lt;p&gt;The INVALID_REPLICATION_FACTOR is coming from the new auto topic creation manager.&lt;/p&gt;

&lt;p&gt;It is a simple matter to make the test pass &amp;#8211; I have confirmed that it passes if we grep for INVALID_REPLICATION_FACTOR in the log file instead of LEADER_NOT_AVAILABLE.&lt;/p&gt;

&lt;p&gt;I think we just need to decide if this change in behavior is acceptable or not.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13361291">KAFKA-12381</key>
            <summary>Incompatible change in verifiable_producer.log in 2.8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bchen225242">Boyang Chen</assignee>
                                    <reporter username="cmccabe">Colin McCabe</reporter>
                        <labels>
                            <label>kip-500</label>
                    </labels>
                <created>Sat, 27 Feb 2021 00:50:33 +0000</created>
                <updated>Sat, 6 Mar 2021 06:46:32 +0000</updated>
                            <resolved>Sat, 6 Mar 2021 06:46:21 +0000</resolved>
                                    <version>2.8.0</version>
                                    <fixVersion>2.8.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17291991" author="cmccabe" created="Sat, 27 Feb 2021 00:51:28 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rndgstn&quot; class=&quot;user-hover&quot; rel=&quot;rndgstn&quot;&gt;rndgstn&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17293161" author="bchen225242" created="Mon, 1 Mar 2021 20:29:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cmccabe&quot; class=&quot;user-hover&quot; rel=&quot;cmccabe&quot;&gt;cmccabe&lt;/a&gt;&#160;Could you provide more specific details here, such like which test case is failing and where you were fixing the log grep?&lt;/p&gt;</comment>
                            <comment id="17293264" author="hachikuji" created="Tue, 2 Mar 2021 00:56:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bchen225242&quot; class=&quot;user-hover&quot; rel=&quot;bchen225242&quot;&gt;bchen225242&lt;/a&gt; I would not focus too much on the system test failure. The main thing to verify is whether there is a behavior change here in the `Metadata` response. If we are returning `INVALID_REPLICATION_FACTOR` in some case where we were previously returning `LEADER_NOT_AVAILABLE`, then it is likely a regression. &lt;/p&gt;</comment>
                            <comment id="17293286" author="bchen225242" created="Tue, 2 Mar 2021 01:49:55 +0000"  >&lt;p&gt;I checked 2.7 code, and we only return INVALID_REPLICATION_FACTOR for internal topics:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isInternal(topic)) {
  val topicMetadata = createInternalTopic(topic)
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (topicMetadata.errorCode == Errors.COORDINATOR_NOT_AVAILABLE.code)
    metadataResponseTopic(Errors.INVALID_REPLICATION_FACTOR, topic, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, util.Collections.emptyList())
  &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
    topicMetadata
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (allowAutoTopicCreation &amp;amp;&amp;amp; config.autoCreateTopicsEnable) {
  createTopic(topic, config.numPartitions, config.defaultReplicationFactor)
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
  metadataResponseTopic(Errors.UNKNOWN_TOPIC_OR_PARTITION, topic, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, util.Collections.emptyList())
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which seems to be lost in the new auto topic creation module. I will try to do a fix there.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o480:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>