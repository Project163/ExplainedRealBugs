<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:56:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4303] KafkaConsumer blocks unnecessarily in commitSync() </title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4303</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;This appears to be a regression caused by the KIP-62 patch. It is possible that we end up blocking unnecessarily in &lt;tt&gt;NetworkClient.poll()&lt;/tt&gt; with no requests pending. The reason is that &lt;tt&gt;ConsumerNetworkClient.poll(RequestFuture)&lt;/tt&gt; does not actually verify that the request has been sent prior to calling &lt;tt&gt;NetworkClient.poll()&lt;/tt&gt;. This was not as much of a problem previously because the maximum timeout was always bounded by the heartbeat interval, which is typically small.&lt;/p&gt;

&lt;p&gt;This appears to be the cause of hanging builds that some people may have experienced. In particular, I have seen &lt;tt&gt;ConsumerBounceTest&lt;/tt&gt; hang because of this problem.&lt;/p&gt;

&lt;p&gt;Note that another reason we can block indefinitely in &lt;tt&gt;commitSync()&lt;/tt&gt; is coordinator discovery. We do not attempt to fix this here.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13012438">KAFKA-4303</key>
            <summary>KafkaConsumer blocks unnecessarily in commitSync() </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hachikuji">Jason Gustafson</assignee>
                                    <reporter username="hachikuji">Jason Gustafson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Oct 2016 18:46:06 +0000</created>
                <updated>Fri, 14 Oct 2016 22:37:37 +0000</updated>
                            <resolved>Fri, 14 Oct 2016 22:37:14 +0000</resolved>
                                                    <fixVersion>0.10.1.0</fixVersion>
                                    <component>consumer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15576402" author="githubbot" created="Fri, 14 Oct 2016 20:35:05 +0000"  >&lt;p&gt;GitHub user hachikuji opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2031&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2031&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4303&quot; title=&quot;KafkaConsumer blocks unnecessarily in commitSync() &quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4303&quot;&gt;&lt;del&gt;KAFKA-4303&lt;/del&gt;&lt;/a&gt;: Ensure commitSync does not block indefinitely in poll without in-flight requests&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hachikuji/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hachikuji/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4303&quot; title=&quot;KafkaConsumer blocks unnecessarily in commitSync() &quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4303&quot;&gt;&lt;del&gt;KAFKA-4303&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2031.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2031.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2031&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ccba1a4ee7626230d9a6aed1e966d54d6e509c26&lt;br/&gt;
Author: Jason Gustafson &amp;lt;jason@confluent.io&amp;gt;&lt;br/&gt;
Date:   2016-10-14T20:29:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4303&quot; title=&quot;KafkaConsumer blocks unnecessarily in commitSync() &quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4303&quot;&gt;&lt;del&gt;KAFKA-4303&lt;/del&gt;&lt;/a&gt;: Ensure commitSync does not block indefinitely in poll without in-flight requests&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15576520" author="hachikuji" created="Fri, 14 Oct 2016 21:19:50 +0000"  >&lt;p&gt;Revised the title. The unnecessary blocking caused by the issue above should be bounded in duration by the minimum of &lt;tt&gt;metadata.max.age.ms&lt;/tt&gt; and &lt;tt&gt;request.timeout.ms&lt;/tt&gt; (this upper bound is enforced by &lt;tt&gt;NetworkClient&lt;/tt&gt;). We still probably need to fix this though because it prevents the offset commit from being sent and results in the consumer being kicked out of the group.&lt;/p&gt;</comment>
                            <comment id="15576758" author="hachikuji" created="Fri, 14 Oct 2016 22:37:15 +0000"  >&lt;p&gt;Issue resolved by pull request 2031&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2031&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2031&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15576761" author="githubbot" created="Fri, 14 Oct 2016 22:37:37 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2031&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2031&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34wtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>