<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:59:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-4716] Fix logic for re-checking if internal topic is ready</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-4716</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In InternalTopicManager, we have a hardcoded constant MAX_TOPIC_READY_TRY that is set to 5. We shouldn&apos;t hardcode the retry time and it should be based on a timeout, not on a number of retries.&lt;/p&gt;

&lt;p&gt;There are cases when the code in makeReady tries to create a topic but then fails because the controller is currently in transition and we get a warning: &quot; Could not create internal topics: Could not create topic: &amp;lt;topic name&amp;gt; due to This is not the correct controller for this cluster.&quot; The code proceeds to retry MAX_TOPIC_READY_TRY times in a tight loop, and eventually fails. We should have a retry backoff (perhaps just use retry.backoff.ms) and a timeout (perhaps just use request.timeout.ms) instead of a number of retries.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="13039175">KAFKA-4716</key>
            <summary>Fix logic for re-checking if internal topic is ready</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enothereska">Eno Thereska</assignee>
                                    <reporter username="enothereska">Eno Thereska</reporter>
                        <labels>
                            <label>architecture</label>
                    </labels>
                <created>Tue, 31 Jan 2017 13:14:57 +0000</created>
                <updated>Fri, 10 Feb 2017 07:45:29 +0000</updated>
                            <resolved>Thu, 9 Feb 2017 22:01:36 +0000</resolved>
                                    <version>0.10.2.0</version>
                                    <fixVersion>0.10.2.0</fixVersion>
                    <fixVersion>0.11.0.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15858439" author="guozhang" created="Wed, 8 Feb 2017 19:34:07 +0000"  >&lt;p&gt;Coming from this commit: &lt;a href=&quot;https://github.com/apache/kafka/pull/2478/commits/7d1968cce975d07c760b2248c6578e5841f5cece&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2478/commits/7d1968cce975d07c760b2248c6578e5841f5cece&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Seems scale = 2 will doom to fail because of this issue?&lt;/p&gt;</comment>
                            <comment id="15859183" author="enothereska" created="Thu, 9 Feb 2017 08:00:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=norwood&quot; class=&quot;user-hover&quot; rel=&quot;norwood&quot;&gt;norwood&lt;/a&gt; mentioned that the fix is to use the controller returned from the metadatarequest, not to retry better.&lt;/p&gt;</comment>
                            <comment id="15859331" author="githubbot" created="Thu, 9 Feb 2017 10:44:24 +0000"  >&lt;p&gt;GitHub user enothereska opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2522&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2522&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4716&quot; title=&quot;Fix logic for re-checking if internal topic is ready&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4716&quot;&gt;&lt;del&gt;KAFKA-4716&lt;/del&gt;&lt;/a&gt;: Send request to controller &lt;span class=&quot;error&quot;&gt;&amp;#91;WiP&amp;#93;&lt;/span&gt;&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/enothereska/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/enothereska/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4716&quot; title=&quot;Fix logic for re-checking if internal topic is ready&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4716&quot;&gt;&lt;del&gt;KAFKA-4716&lt;/del&gt;&lt;/a&gt;-metadata&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2522.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2522.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2522&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2d6cce7a7d9e9426ef53304ada46eada70b344ee&lt;br/&gt;
Author: Eno Thereska &amp;lt;eno@confluent.io&amp;gt;&lt;br/&gt;
Date:   2017-02-09T10:37:23Z&lt;/p&gt;

&lt;p&gt;    Send request to controller&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15859607" author="githubbot" created="Thu, 9 Feb 2017 14:48:24 +0000"  >&lt;p&gt;GitHub user enothereska opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2526&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2526&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4716&quot; title=&quot;Fix logic for re-checking if internal topic is ready&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4716&quot;&gt;&lt;del&gt;KAFKA-4716&lt;/del&gt;&lt;/a&gt;: Fix case when controller cannot be reached&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/enothereska/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/enothereska/kafka&lt;/a&gt; 0.10.2-&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4716&quot; title=&quot;Fix logic for re-checking if internal topic is ready&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4716&quot;&gt;&lt;del&gt;KAFKA-4716&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2526.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2526.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2526&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a0f39a7d645d1ea8745dd6f73b4f6d7790d4aed3&lt;br/&gt;
Author: Eno Thereska &amp;lt;eno@confluent.io&amp;gt;&lt;br/&gt;
Date:   2017-02-09T14:47:18Z&lt;/p&gt;

&lt;p&gt;    Fix case when controller cannot be reached&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15860289" author="guozhang" created="Thu, 9 Feb 2017 22:01:36 +0000"  >&lt;p&gt;Issue resolved by pull request 2522&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/2522&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2522&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15860290" author="githubbot" created="Thu, 9 Feb 2017 22:01:59 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2522&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2522&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15860877" author="githubbot" created="Fri, 10 Feb 2017 07:45:29 +0000"  >&lt;p&gt;Github user enothereska closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/2526&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2526&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39f07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>