<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:14:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-7388] An equal sign in a property value causes the broker to fail</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-7388</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;I caught this due to a keystore password that had an equal sign in it.&lt;/p&gt;

&lt;p&gt;In this case the code &lt;a href=&quot;https://github.com/apache/kafka/blob/3cdc78e6bb1f83973a14ce1550fe3874f7348b05/core/src/main/scala/kafka/utils/CommandLineUtils.scala#L63-L76&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&#160;throws a &quot;Invalid command line properties&quot; error and the broker start is aborted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183770">KAFKA-7388</key>
            <summary>An equal sign in a property value causes the broker to fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="asdaraujo">Andre Araujo</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Sep 2018 01:21:28 +0000</created>
                <updated>Wed, 1 May 2019 22:03:40 +0000</updated>
                            <resolved>Tue, 18 Sep 2018 09:40:50 +0000</resolved>
                                                    <fixVersion>2.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16608505" author="githubbot" created="Sun, 9 Sep 2018 17:02:46 +0000"  >&lt;p&gt;mutdmour opened a new pull request #5630: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7388&quot; title=&quot;An equal sign in a property value causes the broker to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7388&quot;&gt;&lt;del&gt;KAFKA-7388&lt;/del&gt;&lt;/a&gt; equal sign in property value&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5630&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5630&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Changing limit of split to 2 values&lt;/p&gt;

&lt;p&gt;   Added test to check feature&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16618697" author="githubbot" created="Tue, 18 Sep 2018 08:36:02 +0000"  >&lt;p&gt;rajinisivaram closed pull request #5630: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7388&quot; title=&quot;An equal sign in a property value causes the broker to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7388&quot;&gt;&lt;del&gt;KAFKA-7388&lt;/del&gt;&lt;/a&gt; equal sign in property value for password&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5630&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5630&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/core/src/main/scala/kafka/utils/CommandLineUtils.scala b/core/src/main/scala/kafka/utils/CommandLineUtils.scala&lt;br/&gt;
index edf473e3a70..700a137c8de 100644&lt;br/&gt;
&amp;#8212; a/core/src/main/scala/kafka/utils/CommandLineUtils.scala&lt;br/&gt;
+++ b/core/src/main/scala/kafka/utils/CommandLineUtils.scala&lt;br/&gt;
@@ -5,7 +5,7 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The ASF licenses this file to You under the Apache License, Version 2.0&lt;/li&gt;
	&lt;li&gt;(the &quot;License&quot;); you may not use this file except in compliance with&lt;/li&gt;
	&lt;li&gt;the License.  You may obtain a copy of the License at&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;*&lt;br/&gt;
+ *&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
  *&lt;/li&gt;
	&lt;li&gt;Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
@@ -58,21 +58,18 @@ object CommandLineUtils extends Logging {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Parse key-value pairs in the form key=value&lt;br/&gt;
+   * value may contain equals sign&lt;br/&gt;
    */&lt;br/&gt;
   def parseKeyValueArgs(args: Iterable&lt;span class=&quot;error&quot;&gt;&amp;#91;String&amp;#93;&lt;/span&gt;, acceptMissingValue: Boolean = true): Properties = {&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;val splits = args.map(_ split &quot;=&quot;).filterNot(_.length == 0)&lt;br/&gt;
+    val splits = args.map(&lt;em&gt;.split(&quot;=&quot;, 2)).filterNot(&lt;/em&gt;.length == 0)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     val props = new Properties&lt;br/&gt;
     for (a &amp;lt;- splits) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (a.length == 1) {&lt;br/&gt;
+      if (a.length == 1 || (a.length == 2 &amp;amp;&amp;amp; a(1).isEmpty())) {&lt;br/&gt;
         if (acceptMissingValue) props.put(a(0), &quot;&quot;)&lt;br/&gt;
         else throw new IllegalArgumentException(s&quot;Missing value for key ${a(0)}&quot;)&lt;br/&gt;
       }&lt;/li&gt;
	&lt;li&gt;else if (a.length == 2) props.put(a(0), a(1))&lt;/li&gt;
	&lt;li&gt;else 
{
-        System.err.println(&quot;Invalid command line properties: &quot; + args.mkString(&quot; &quot;))
-        Exit.exit(1)
-      }
&lt;p&gt;+      else props.put(a(0), a(1))&lt;br/&gt;
     }&lt;br/&gt;
     props&lt;br/&gt;
   }&lt;br/&gt;
diff --git a/core/src/test/scala/unit/kafka/KafkaConfigTest.scala b/core/src/test/scala/unit/kafka/KafkaConfigTest.scala&lt;br/&gt;
index 469cf92377b..c8876327dd2 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/core/src/test/scala/unit/kafka/KafkaConfigTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/KafkaConfigTest.scala&lt;br/&gt;
@@ -58,12 +58,6 @@ class KafkaTest 
{
     assertEquals(util.Arrays.asList(&quot;compact&quot;,&quot;delete&quot;), config4.logCleanupPolicy)
   }&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;FatalExitError&amp;#93;&lt;/span&gt;)&lt;/li&gt;
	&lt;li&gt;def testGetKafkaConfigFromArgsWrongSetValue(): Unit = 
{
-    val propertiesFile = prepareDefaultConfig()
-    KafkaConfig.fromProps(Kafka.getPropsFromArgs(Array(propertiesFile, &quot;--override&quot;, &quot;a=b=c&quot;)))
-  }
&lt;p&gt;-&lt;br/&gt;
   @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;FatalExitError&amp;#93;&lt;/span&gt;)&lt;br/&gt;
   def testGetKafkaConfigFromArgsNonArgsAtTheEnd(): Unit = {&lt;br/&gt;
     val propertiesFile = prepareDefaultConfig()&lt;br/&gt;
@@ -97,6 +91,23 @@ class KafkaTest &lt;/p&gt;
{
     assertEquals(&quot;truststore_password&quot;, config.getPassword(KafkaConfig.SslTruststorePasswordProp).value)
   }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+  @Test&lt;br/&gt;
+  def testKafkaSslPasswordsWithSymbols(): Unit = &lt;/p&gt;
{
+    val password = &quot;=!#-+!?*/\&quot;\&apos;^%$=\\.,@:;=&quot;
+    val propertiesFile = prepareDefaultConfig()
+    val config = KafkaConfig.fromProps(Kafka.getPropsFromArgs(Array(propertiesFile,
+      &quot;--override&quot;, &quot;ssl.keystore.password=&quot; + password,
+      &quot;--override&quot;, &quot;ssl.key.password=&quot; + password,
+      &quot;--override&quot;, &quot;ssl.truststore.password=&quot; + password)))
+    assertEquals(Password.HIDDEN, config.getPassword(KafkaConfig.SslKeyPasswordProp).toString)
+    assertEquals(Password.HIDDEN, config.getPassword(KafkaConfig.SslKeystorePasswordProp).toString)
+    assertEquals(Password.HIDDEN, config.getPassword(KafkaConfig.SslTruststorePasswordProp).toString)
+
+    assertEquals(password, config.getPassword(KafkaConfig.SslKeystorePasswordProp).value)
+    assertEquals(password, config.getPassword(KafkaConfig.SslKeyPasswordProp).value)
+    assertEquals(password, config.getPassword(KafkaConfig.SslTruststorePasswordProp).value)
+  }
&lt;p&gt;+&lt;br/&gt;
   def prepareDefaultConfig(): String = &lt;/p&gt;
{
     prepareConfig(Array(&quot;broker.id=1&quot;, &quot;zookeeper.connect=somewhere&quot;))
   }
&lt;p&gt;diff --git a/core/src/test/scala/unit/kafka/utils/CommandLineUtilsTest.scala b/core/src/test/scala/unit/kafka/utils/CommandLineUtilsTest.scala&lt;br/&gt;
index 50023f80464..25c67291210 100644&lt;br/&gt;
&amp;#8212; a/core/src/test/scala/unit/kafka/utils/CommandLineUtilsTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/utils/CommandLineUtilsTest.scala&lt;br/&gt;
@@ -26,30 +26,51 @@ class CommandLineUtilsTest {&lt;br/&gt;
   @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;java.lang.IllegalArgumentException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
   def testParseEmptyArg() &lt;/p&gt;
{
     val argArray = Array(&quot;my.empty.property=&quot;)
-    CommandLineUtils.parseKeyValueArgs(argArray, false)
+
+    CommandLineUtils.parseKeyValueArgs(argArray, acceptMissingValue = false)
   }

&lt;p&gt;+  @Test(expected = classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;java.lang.IllegalArgumentException&amp;#93;&lt;/span&gt;)&lt;br/&gt;
+  def testParseEmptyArgWithNoDelimiter() &lt;/p&gt;
{
+    val argArray = Array(&quot;my.empty.property&quot;)
+
+    CommandLineUtils.parseKeyValueArgs(argArray, acceptMissingValue = false)
+  }

&lt;p&gt;   @Test&lt;br/&gt;
   def testParseEmptyArgAsValid() &lt;/p&gt;
{
-    val argArray = Array(&quot;my.empty.property=&quot;)
+    val argArray = Array(&quot;my.empty.property=&quot;, &quot;my.empty.property1&quot;)
     val props = CommandLineUtils.parseKeyValueArgs(argArray)
-    assertEquals(&quot;Value of a key with missing value should be an empty string&quot;,props.getProperty(&quot;my.empty.property&quot;),&quot;&quot;)
+
+    assertEquals(&quot;Value of a key with missing value should be an empty string&quot;, props.getProperty(&quot;my.empty.property&quot;), &quot;&quot;)
+    assertEquals(&quot;Value of a key with missing value with no delimiter should be an empty string&quot;, props.getProperty(&quot;my.empty.property1&quot;), &quot;&quot;)
   }

&lt;p&gt;   @Test&lt;br/&gt;
   def testParseSingleArg() &lt;/p&gt;
{
     val argArray = Array(&quot;my.property=value&quot;)
     val props = CommandLineUtils.parseKeyValueArgs(argArray)
-    assertEquals(&quot;Value of a single property should be &apos;value&apos; &quot;,props.getProperty(&quot;my.property&quot;),&quot;value&quot;)
+
+    assertEquals(&quot;Value of a single property should be &apos;value&apos; &quot;, props.getProperty(&quot;my.property&quot;), &quot;value&quot;)
   }

&lt;p&gt;   @Test&lt;br/&gt;
   def testParseArgs() &lt;/p&gt;
{
     val argArray = Array(&quot;first.property=first&quot;,&quot;second.property=second&quot;)
-    val props = CommandLineUtils.parseKeyValueArgs(argArray, false)
-    assertEquals(&quot;Value of first property should be &apos;first&apos;&quot;,props.getProperty(&quot;first.property&quot;),&quot;first&quot;)
-    assertEquals(&quot;Value of second property should be &apos;second&apos;&quot;,props.getProperty(&quot;second.property&quot;),&quot;second&quot;)
+    val props = CommandLineUtils.parseKeyValueArgs(argArray)
+
+    assertEquals(&quot;Value of first property should be &apos;first&apos;&quot;, props.getProperty(&quot;first.property&quot;), &quot;first&quot;)
+    assertEquals(&quot;Value of second property should be &apos;second&apos;&quot;, props.getProperty(&quot;second.property&quot;), &quot;second&quot;)
+  }
&lt;p&gt;+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  def testParseArgsWithMultipleDelimiters() &lt;/p&gt;
{
+    val argArray = Array(&quot;first.property==first&quot;, &quot;second.property=second=&quot;, &quot;third.property=thi=rd&quot;)
+    val props = CommandLineUtils.parseKeyValueArgs(argArray)
+
+    assertEquals(&quot;Value of first property should be &apos;=first&apos;&quot;, props.getProperty(&quot;first.property&quot;), &quot;=first&quot;)
+    assertEquals(&quot;Value of second property should be &apos;second=&apos;&quot;, props.getProperty(&quot;second.property&quot;), &quot;second=&quot;)
+    assertEquals(&quot;Value of second property should be &apos;thi=rd&apos;&quot;, props.getProperty(&quot;third.property&quot;), &quot;thi=rd&quot;)
   }

&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13041918">KAFKA-4754</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="13231149">KAFKA-8310</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xv7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>