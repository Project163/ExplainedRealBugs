<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:26:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-10689] Assignor can&apos;t determine number of partitions on FJK with upstream windowed repartition</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-10689</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Due to a minor logical gap in how windowed repartition sink nodes are written to the topology, they are never added to the official map of sink topics tracked by the InternalTopologyBuilder. This makes it impossible to determine the number of partitions of downstream repartition topics in StreamsPartitionAssignor#setRepartitionTopicMetadataNumberOfPartitions, causing the assignor to loop infinitely in this method.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13339094">KAFKA-10689</key>
            <summary>Assignor can&apos;t determine number of partitions on FJK with upstream windowed repartition</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ableegoldman">A. Sophie Blee-Goldman</assignee>
                                    <reporter username="ableegoldman">A. Sophie Blee-Goldman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Nov 2020 23:26:23 +0000</created>
                <updated>Wed, 3 Feb 2021 01:33:08 +0000</updated>
                            <resolved>Wed, 18 Nov 2020 01:00:29 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>2.6.2</fixVersion>
                    <fixVersion>2.7.1</fixVersion>
                    <fixVersion>2.8.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17227077" author="ableegoldman" created="Thu, 5 Nov 2020 23:28:27 +0000"  >&lt;p&gt;It&apos;s a pretty obnoxious bug, since the application stays stuck in REBALANCING while StreamThreads slowly drop out of the group one-by-one as the current group leader gets stuck and a new rebalance has to be triggered. Meanwhile we don&apos;t log anything within this loop so it&apos;s impossible to know what happened based on the logs.&lt;/p&gt;

&lt;p&gt;Ideally we would just limit the number of iterations and shut down the application if we can&apos;t seem to figure out the number of partitions for some reason. Unfortunately, given the random way that&#160;setRepartitionTopicMetadataNumberOfPartitions walks through the topology and the lack of a ceiling on topological cycles/complexity, it&apos;s not immediately obvious how (or if) we can pick a limit on the number of necessary iterations.&#160;&lt;/p&gt;

&lt;p&gt;Still, we can probably improve the current situation and do better than just silently looping forever. One simple option would be to just start logging a warning once we&apos;re past some large iteration number.&lt;/p&gt;

&lt;p&gt;Another option is to keep track of the set of repartition topics whose partitions are still unknown, and if this set fails to change over one full iteration of the outer `topicGroups.values()` loop, then break out and shut down the application. This seems pretty airtight, although obviously a bit more complicated than just logging a warning at high iteration count. The logging is probably more than sufficient for a user to debug their application, but also a worse user experience.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kbtk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>