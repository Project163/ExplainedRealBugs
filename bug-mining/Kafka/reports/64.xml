<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:35:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-384] Fix intermittent test failures and remove unnecessary sleeps</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-384</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Seeing intermittent failures in 0.8 unit tests. Also, many sleeps can be removed (with producer acks in place) and I think MockTime isn&apos;t used in some places where it should.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12596466">KAFKA-384</key>
            <summary>Fix intermittent test failures and remove unnecessary sleeps</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nehanarkhede">Neha Narkhede</assignee>
                                    <reporter username="jjkoshy">Joel Jacob Koshy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jun 2012 22:29:29 +0000</created>
                <updated>Tue, 31 Jul 2012 23:28:30 +0000</updated>
                            <resolved>Tue, 31 Jul 2012 23:28:30 +0000</resolved>
                                    <version>0.8.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13424610" author="nehanarkhede" created="Sun, 29 Jul 2012 19:24:17 +0000"  >&lt;p&gt;This patch removes sleep statements from the unit tests. Changes include -&lt;/p&gt;

&lt;p&gt;1. All sleep statements except those related to a scheduler are removed. So 2-3 sleep statements that exercise the producer side queue expiration logic have not been removed&lt;br/&gt;
2. For the Log tests, passed in a Time parameter to the Log. Kafka server already takes in an optional Time parameter that defaults to SystemTime. However, it wasn&apos;t passed around in LogManager. Fixed it so KafkaServer passes its Time&lt;br/&gt;
 variable to LogManager which passes it to Log.&lt;br/&gt;
This is useful in removing all sleep statements from unit tests for the log manager and logs&lt;/p&gt;</comment>
                            <comment id="13425180" author="junrao" created="Mon, 30 Jul 2012 20:12:13 +0000"  >&lt;p&gt;Thanks for the patch. It looks good. Just 1 comment:&lt;/p&gt;

&lt;p&gt;1. AsyncProducerTest.testQueueTimeExpired(): This is an existing issue, but probably can be fixed in this patch too. It seems that we should do     producerSendThread.shutdown after EasyMock.verify(mockHandler). Shutdown always sends all remaining messages in the buffer. If we call shutdown before verify, it&apos;s not clear if the send was triggered by timeout or shutdown.&lt;/p&gt;</comment>
                            <comment id="13425210" author="nehanarkhede" created="Mon, 30 Jul 2012 20:39:49 +0000"  >&lt;p&gt;Thanks for the review, Jun. That is a good point. I fixed that and also removed the reference to mockTime since that is not useful here.&lt;/p&gt;</comment>
                            <comment id="13425221" author="jjkoshy" created="Mon, 30 Jul 2012 20:44:23 +0000"  >&lt;p&gt;+1 for v2.&lt;/p&gt;</comment>
                            <comment id="13425274" author="jkreps" created="Mon, 30 Jul 2012 21:42:12 +0000"  >&lt;p&gt;You are my hero...&lt;/p&gt;</comment>
                            <comment id="13425294" author="junrao" created="Mon, 30 Jul 2012 21:57:37 +0000"  >&lt;p&gt;+1 on v2 too.&lt;/p&gt;</comment>
                            <comment id="13425985" author="nehanarkhede" created="Tue, 31 Jul 2012 18:19:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-343&quot; title=&quot;revisit the become leader and become follower state change operations using V3 design&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-343&quot;&gt;&lt;del&gt;KAFKA-343&lt;/del&gt;&lt;/a&gt; checkin broke some unit tests and cause others to hang. I think I might have to hold off on the checkin until that is either fixed or reverted. &lt;/p&gt;</comment>
                            <comment id="13426218" author="nehanarkhede" created="Tue, 31 Jul 2012 23:28:30 +0000"  >&lt;p&gt;Thanks all for the review! Committed the v2 patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12538287" name="kafka-384-v1.patch" size="37650" author="nehanarkhede" created="Sun, 29 Jul 2012 19:24:17 +0000"/>
                            <attachment id="12538408" name="kafka-384-v2.patch" size="37910" author="nehanarkhede" created="Mon, 30 Jul 2012 20:39:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248177</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09m1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>54003</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>