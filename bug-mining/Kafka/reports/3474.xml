<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:32:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-14908] Sporadic &quot;Address already in use&quot; when starting kafka cluster embedded within tests</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-14908</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;We have an integration test suite that starts/stops a kafka cluster before/after each test.&#160; &#160;Kafka is being started programmatically within the same JVM that is running the tests.&lt;/p&gt;

&lt;p&gt;Sometimes we get sporadic failures from with Kafka as it tries to bind the server socket.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.kafka.common.KafkaException: Socket server failed to bind to 0.0.0.0:9092: Address already in use.
&#160; &#160; at kafka.network.Acceptor.openServerSocket(SocketServer.scala:684)
&#160; &#160; at kafka.network.Acceptor.&amp;lt;init&amp;gt;(SocketServer.scala:576)
&#160; &#160; at kafka.network.DataPlaneAcceptor.&amp;lt;init&amp;gt;(SocketServer.scala:433)
&#160; &#160; at kafka.network.SocketServer.createDataPlaneAcceptor(SocketServer.scala:247)
&#160; &#160; at kafka.network.SocketServer.createDataPlaneAcceptorAndProcessors(SocketServer.scala:226)
&#160; &#160; at kafka.network.SocketServer.$anonfun$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$31(SocketServer.scala:173)
&#160; &#160; at kafka.network.SocketServer.$anonfun$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$31$adapted(SocketServer.scala:173)
&#160; &#160; at scala.collection.IterableOnceOps.foreach(IterableOnce.scala:575)
&#160; &#160; at scala.collection.IterableOnceOps.foreach$(IterableOnce.scala:573)
&#160; &#160; at scala.collection.AbstractIterable.foreach(Iterable.scala:933)
&#160; &#160; at kafka.network.SocketServer.&amp;lt;init&amp;gt;(SocketServer.scala:173)
&#160; &#160; at kafka.server.KafkaServer.startup(KafkaServer.scala:331) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Investigation has shown that the socket is in the timed_wait state from a previous test.&lt;/p&gt;

&lt;p&gt;I know Kafka supports ephemeral ports, but this isn&apos;t convenient to our use-case.&#160;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;d like to suggest that Kafka is changed to set the SO_REUSEADDR on the server socket.&#160; I believe this is standard practice for server applications that run on well known ports .&lt;/p&gt;

&lt;p&gt;I don&apos;t believe this change would introduce a backward compatibility concerns.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I will open a PR so that can be considered. Thank you.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13532654">KAFKA-14908</key>
            <summary>Sporadic &quot;Address already in use&quot; when starting kafka cluster embedded within tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwall">Keith Wall</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Apr 2023 11:53:30 +0000</created>
                <updated>Wed, 15 Oct 2025 10:00:27 +0000</updated>
                                                                            <component>unit tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17712360" author="k-wall" created="Fri, 14 Apr 2023 12:14:31 +0000"  >&lt;p&gt;Opened PR: &lt;a href=&quot;https://github.com/apache/kafka/pull/13572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/13572&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17747400" author="divijvaidya" created="Wed, 26 Jul 2023 09:08:19 +0000"  >&lt;p&gt;re-opening this since it was reverted&lt;/p&gt;</comment>
                            <comment id="17747403" author="divijvaidya" created="Wed, 26 Jul 2023 09:11:08 +0000"  >&lt;p&gt;This is the second most frequent reason for build failures in the last 28 days: &lt;a href=&quot;https://ge.apache.org/scans/failures?search.relativeStartTime=P28D&amp;amp;search.rootProjectNames=kafka&amp;amp;search.timeZoneId=Europe/Berlin&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ge.apache.org/scans/failures?search.relativeStartTime=P28D&amp;amp;search.rootProjectNames=kafka&amp;amp;search.timeZoneId=Europe/Berlin&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Raising the priority to Major&lt;/p&gt;</comment>
                            <comment id="17747721" author="showuon" created="Thu, 27 Jul 2023 02:51:54 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=divijvaidya&quot; class=&quot;user-hover&quot; rel=&quot;divijvaidya&quot;&gt;divijvaidya&lt;/a&gt; , but I cannot see the `Address already in use` error from the gradle error output. How do you identify it?&lt;/p&gt;</comment>
                            <comment id="17761556" author="satish.duggana" created="Sun, 3 Sep 2023 05:30:18 +0000"  >&lt;p&gt;Moving it to 3.7.0 as we are near code freeze and it is not a blocker.&lt;/p&gt;</comment>
                            <comment id="17800613" author="enether" created="Tue, 26 Dec 2023 20:33:24 +0000"  >&lt;p&gt;Changing target fix version to 3.8 since this is not a blocker and we are cutting a 3.7 RC&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17856161" author="jlprat" created="Wed, 19 Jun 2024 07:17:27 +0000"  >&lt;p&gt;Changing target fix version to 3.9 since this is not a blocker and we are past code freeze&lt;/p&gt;</comment>
                            <comment id="18030039" author="k-wall" created="Wed, 15 Oct 2025 10:00:27 +0000"  >&lt;p&gt;This issue went away for me, so I am happy if it is closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1haiw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>