<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:55:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3854] Subsequent regex subscription calls fail</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3854</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;There are a couple of issues with regex subscription in the new consumer:&lt;/p&gt;

&lt;h6&gt;&lt;a name=&quot;SubsequentSubscriptionsFail&quot;&gt;&lt;/a&gt;Subsequent Subscriptions Fail&lt;/h6&gt;
&lt;p&gt;When consecutive calls are made to new consumer&apos;s &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/consumer/KafkaConsumer.java#L850&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;regex subscription&lt;/a&gt;, like below: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;consumer.subscribe(Pattern.compile(&lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt;), listener);
consumer.poll(0);

consumer.subscribe(Pattern.compile(&lt;span class=&quot;code-quote&quot;&gt;&quot;f..&quot;&lt;/span&gt;), listener);
consumer.poll(0);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the second call fails with the following error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.IllegalStateException: Subscription to topics, partitions and pattern are mutually exclusive
	at org.apache.kafka.clients.consumer.internals.SubscriptionState.subscribe(SubscriptionState.java:175)
	at org.apache.kafka.clients.consumer.KafkaConsumer.subscribe(KafkaConsumer.java:854)
	...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h6&gt;&lt;a name=&quot;SubsequentSubscriptionsFailtoTriggeraSubscriptionChangeandRebalance&quot;&gt;&lt;/a&gt;Subsequent Subscriptions Fail to Trigger a Subscription Change and Rebalance&lt;/h6&gt;
&lt;p&gt;Even after the code is tweaked to get around the above issue, only the first call to regex subscription triggers an actual subscription and the subscription&apos;s rebalance listener. The reason is the regex &lt;tt&gt;subscription&lt;/tt&gt; / &lt;tt&gt;poll&lt;/tt&gt; does not directly call &lt;tt&gt;changeSubscription(...)&lt;/tt&gt; in which &lt;tt&gt;needsPartitionAssignment&lt;/tt&gt; is set and causes a rebalance. This method is called only during the first regex &lt;tt&gt;subscription&lt;/tt&gt; / &lt;tt&gt;poll&lt;/tt&gt; when coordinator is unknown and &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/consumer/internals/AbstractCoordinator.java#L179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a &lt;tt&gt;client.poll&lt;/tt&gt; call&lt;/a&gt; is made which eventually leads to &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/consumer/internals/ConsumerCoordinator.java#L161&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a &lt;tt&gt;changeSubscription&lt;/tt&gt; call&lt;/a&gt;. The subsequent call does not reach this point because the coordinator is already known.&lt;/p&gt;

&lt;p&gt;It seems due to the same reason, if a consumer is subscribed to a pattern, and later on a new topic is created that matches that pattern, the consumer does not become subscribed it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12979914">KAFKA-3854</key>
            <summary>Subsequent regex subscription calls fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vahid">Vahid Hashemian</assignee>
                                    <reporter username="vahid">Vahid Hashemian</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jun 2016 18:07:58 +0000</created>
                <updated>Tue, 5 Jul 2016 17:07:38 +0000</updated>
                            <resolved>Mon, 4 Jul 2016 21:09:49 +0000</resolved>
                                                    <fixVersion>0.10.0.1</fixVersion>
                    <fixVersion>0.10.1.0</fixVersion>
                                    <component>consumer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15334973" author="bharatviswa" created="Thu, 16 Jun 2016 23:37:38 +0000"  >&lt;p&gt;Hi Vahid,&lt;br/&gt;
Can I take this PR, if you have not started working on this issue.&lt;/p&gt;</comment>
                            <comment id="15335004" author="vahid" created="Thu, 16 Jun 2016 23:51:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bharatviswa&quot; class=&quot;user-hover&quot; rel=&quot;bharatviswa&quot;&gt;bharatviswa&lt;/a&gt;. I have already started working on it. I&apos;ll let you know if i decide not to pursue it. I hope that&apos;s okay.&lt;/p&gt;</comment>
                            <comment id="15335008" author="bharatviswa" created="Thu, 16 Jun 2016 23:54:09 +0000"  >&lt;p&gt;Hi vahid,&lt;br/&gt;
Thats fine.&lt;br/&gt;
I will have a look in to other Jiras to take-up.&lt;/p&gt;</comment>
                            <comment id="15355981" author="githubbot" created="Wed, 29 Jun 2016 23:18:28 +0000"  >&lt;p&gt;GitHub user vahidhashemian opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not actually change the subscription of the new consumer nor they would trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat &lt;br/&gt;
    `subscribe()` to the same pattern would be needed to handle that case.&lt;/p&gt;

&lt;p&gt;    Improved unit tests for regex subscriptions will be covered in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3897&quot; title=&quot;Improve Unit Tests for New Consumer&amp;#39;s Regex Subscription&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3897&quot;&gt;&lt;del&gt;KAFKA-3897&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/vahidhashemian/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vahidhashemian/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1572&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e9d10171b0ebbd13ac15d5f0059246ffbe249b37&lt;br/&gt;
Author: Vahid Hashemian &amp;lt;vahidhashemian@us.ibm.com&amp;gt;&lt;br/&gt;
Date:   2016-06-16T21:19:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not actually change the subscription of the new consumer nor they would trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat subscribe() to the same pattern would be needed to handle that case.&lt;br/&gt;
    Unit tests for regex subscriptions will be handled in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3897&quot; title=&quot;Improve Unit Tests for New Consumer&amp;#39;s Regex Subscription&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3897&quot;&gt;&lt;del&gt;KAFKA-3897&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15358377" author="githubbot" created="Fri, 1 Jul 2016 04:51:45 +0000"  >&lt;p&gt;Github user vahidhashemian closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15358378" author="githubbot" created="Fri, 1 Jul 2016 04:51:47 +0000"  >&lt;p&gt;GitHub user vahidhashemian reopened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not immediately refresh metadata to change the subscription of the new consumer and trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat &lt;br/&gt;
    `subscribe()` to the same pattern or some wait time until the next automatic metadata refresh would handle that case.&lt;/p&gt;

&lt;p&gt;    An integration test was also added to verify these issues are fixed with this PR.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/vahidhashemian/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vahidhashemian/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1572&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 463345bf870f53a628c4b1b08400495a352736cb&lt;br/&gt;
Author: Vahid Hashemian &amp;lt;vahidhashemian@us.ibm.com&amp;gt;&lt;br/&gt;
Date:   2016-06-16T21:19:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not actually refresh metadata and change the subscription of the new consumer nor they would trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat subscribe() to the same pattern would be needed to handle that case.&lt;br/&gt;
    Unit tests for regex subscriptions will be handled in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3897&quot; title=&quot;Improve Unit Tests for New Consumer&amp;#39;s Regex Subscription&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3897&quot;&gt;&lt;del&gt;KAFKA-3897&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15359383" author="githubbot" created="Fri, 1 Jul 2016 18:08:23 +0000"  >&lt;p&gt;Github user vahidhashemian closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15359384" author="githubbot" created="Fri, 1 Jul 2016 18:08:28 +0000"  >&lt;p&gt;GitHub user vahidhashemian reopened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not immediately refresh metadata to change the subscription of the new consumer and trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat &lt;br/&gt;
    `subscribe()` to the same pattern or some wait time until the next automatic metadata refresh would handle that case.&lt;/p&gt;

&lt;p&gt;    An integration test was also added to verify these issues are fixed with this PR.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/vahidhashemian/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vahidhashemian/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1572&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5fb472a48a0231aece798d601c3427bd058fc078&lt;br/&gt;
Author: Vahid Hashemian &amp;lt;vahidhashemian@us.ibm.com&amp;gt;&lt;br/&gt;
Date:   2016-06-16T21:19:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not actually refresh metadata and change the subscription of the new consumer nor they would trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat subscribe() to the same pattern would be needed to handle that case.&lt;br/&gt;
    Unit tests for regex subscriptions will be handled in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3897&quot; title=&quot;Improve Unit Tests for New Consumer&amp;#39;s Regex Subscription&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3897&quot;&gt;&lt;del&gt;KAFKA-3897&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15359909" author="githubbot" created="Sat, 2 Jul 2016 01:51:01 +0000"  >&lt;p&gt;Github user vahidhashemian closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15359911" author="githubbot" created="Sat, 2 Jul 2016 01:51:07 +0000"  >&lt;p&gt;GitHub user vahidhashemian reopened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not immediately refresh metadata to change the subscription of the new consumer and trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat &lt;br/&gt;
    `subscribe()` to the same pattern or some wait time until the next automatic metadata refresh would handle that case.&lt;/p&gt;

&lt;p&gt;    An integration test was also added to verify these issues are fixed with this PR.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/vahidhashemian/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vahidhashemian/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1572&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0860bd7691b87de33393b26373df752b0d2f934e&lt;br/&gt;
Author: Vahid Hashemian &amp;lt;vahidhashemian@us.ibm.com&amp;gt;&lt;br/&gt;
Date:   2016-06-16T21:19:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not actually refresh metadata and change the subscription of the new consumer nor they would trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat subscribe() to the same pattern would be needed to handle that case.&lt;br/&gt;
    Unit tests for regex subscriptions will be handled in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3897&quot; title=&quot;Improve Unit Tests for New Consumer&amp;#39;s Regex Subscription&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3897&quot;&gt;&lt;del&gt;KAFKA-3897&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15359942" author="githubbot" created="Sat, 2 Jul 2016 03:06:59 +0000"  >&lt;p&gt;Github user vahidhashemian closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15359943" author="githubbot" created="Sat, 2 Jul 2016 03:07:04 +0000"  >&lt;p&gt;GitHub user vahidhashemian reopened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not immediately refresh metadata to change the subscription of the new consumer and trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat &lt;br/&gt;
    `subscribe()` to the same pattern or some wait time until the next automatic metadata refresh would handle that case.&lt;/p&gt;

&lt;p&gt;    An integration test was also added to verify these issues are fixed with this PR.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/vahidhashemian/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vahidhashemian/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1572&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0860bd7691b87de33393b26373df752b0d2f934e&lt;br/&gt;
Author: Vahid Hashemian &amp;lt;vahidhashemian@us.ibm.com&amp;gt;&lt;br/&gt;
Date:   2016-06-16T21:19:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not actually refresh metadata and change the subscription of the new consumer nor they would trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat subscribe() to the same pattern would be needed to handle that case.&lt;br/&gt;
    Unit tests for regex subscriptions will be handled in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3897&quot; title=&quot;Improve Unit Tests for New Consumer&amp;#39;s Regex Subscription&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3897&quot;&gt;&lt;del&gt;KAFKA-3897&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15360746" author="githubbot" created="Mon, 4 Jul 2016 02:21:05 +0000"  >&lt;p&gt;Github user vahidhashemian closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15360747" author="githubbot" created="Mon, 4 Jul 2016 02:21:09 +0000"  >&lt;p&gt;GitHub user vahidhashemian reopened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not immediately refresh metadata to change the subscription of the new consumer and trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat &lt;br/&gt;
    `subscribe()` to the same pattern or some wait time until the next automatic metadata refresh would handle that case.&lt;/p&gt;

&lt;p&gt;    An integration test was also added to verify these issues are fixed with this PR.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/vahidhashemian/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vahidhashemian/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1572&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 55423ce803081ead713c9b25655c9d859558177d&lt;br/&gt;
Author: Vahid Hashemian &amp;lt;vahidhashemian@us.ibm.com&amp;gt;&lt;br/&gt;
Date:   2016-06-16T21:19:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3854&quot; title=&quot;Subsequent regex subscription calls fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3854&quot;&gt;&lt;del&gt;KAFKA-3854&lt;/del&gt;&lt;/a&gt;: Fix issues with new consumer&apos;s subsequent regex (pattern) subscriptions&lt;/p&gt;

&lt;p&gt;    This patch fixes two issues:&lt;br/&gt;
    1. Subsequent regex subscriptions fail with the new consumer.&lt;br/&gt;
    2. Subsequent regex subscriptions would not actually refresh metadata and change the subscription of the new consumer nor they would trigger a rebalance.&lt;/p&gt;

&lt;p&gt;    The final note on the JIRA stating that a later created topic that matches a consumer&apos;s subscription pattern would not be assigned to the consumer upon creation seems to be as designed. A repeat subscribe() to the same pattern would be needed to handle that case.&lt;br/&gt;
    Unit tests for regex subscriptions will be handled in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3897&quot; title=&quot;Improve Unit Tests for New Consumer&amp;#39;s Regex Subscription&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3897&quot;&gt;&lt;del&gt;KAFKA-3897&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15361777" author="ewencp" created="Mon, 4 Jul 2016 21:09:50 +0000"  >&lt;p&gt;Issue resolved by pull request 1572&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15361778" author="githubbot" created="Mon, 4 Jul 2016 21:10:05 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/1572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/1572&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12982480">KAFKA-3897</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12982480">KAFKA-3897</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zkxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>