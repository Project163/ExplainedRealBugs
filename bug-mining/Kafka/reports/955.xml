<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:52:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3256] Large number of system test failures</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3256</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Confluent&apos;s nightly run of the kafka system tests reported a large number of failures beginning 2/20/2016&lt;/p&gt;

&lt;p&gt;Test run: 2016-02-19-&lt;del&gt;001.1455897182&lt;/del&gt;&lt;del&gt;apache&lt;/del&gt;&lt;del&gt;trunk&lt;/del&gt;-eee9522/&lt;br/&gt;
Link: &lt;a href=&quot;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2016-02-19--001.1455897182--apache--trunk--eee9522/report.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2016-02-19--001.1455897182--apache--trunk--eee9522/report.html&lt;/a&gt;&lt;br/&gt;
Pass: 136&lt;br/&gt;
Fail: 0&lt;/p&gt;

&lt;p&gt;Test run: 2016-02-20-&lt;del&gt;001.1455979842&lt;/del&gt;&lt;del&gt;apache&lt;/del&gt;&lt;del&gt;trunk&lt;/del&gt;-5caa800/&lt;br/&gt;
Link: &lt;a href=&quot;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2016-02-20--001.1455979842--apache--trunk--5caa800/report.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2016-02-20--001.1455979842--apache--trunk--5caa800/report.html&lt;/a&gt;&lt;br/&gt;
Pass: 72&lt;br/&gt;
Fail: 64&lt;/p&gt;

&lt;p&gt;I.e. trunk@eee9522 was the last passing run, and trunk@5caa800 had a large number of failures.&lt;/p&gt;

&lt;p&gt;Given its complexity, the most likely culprit is 45c8195fa, and I confirmed this is the first commit with failures on a small number of tests.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt; do you mind investigating?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;commit 5caa800e217c6b83f62ee3e6b5f02f56e331b309
Author: Jun Rao &amp;lt;junrao@gmail.com&amp;gt;
Date:   Fri Feb 19 09:40:59 2016 -0800

    trivial fix to authorization CLI table

commit 45c8195fa14c766b200c720f316836dbb84e9d8b
Author: Jiangjie Qin &amp;lt;becket.qin@gmail.com&amp;gt;
Date:   Fri Feb 19 07:56:40 2016 -0800

    KAFKA-3025; Added timetamp to Message and use relative offset.

commit eee95228fabe1643baa016a2d49fb0a9fe2c66bd
Author: Yasuhiro Matsuda &amp;lt;yasuhiro@confluent.io&amp;gt;
Date:   Thu Feb 18 09:39:30 2016 +0800

    MINOR: remove streams config params from producer/consumer configs
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12940826">KAFKA-3256</key>
            <summary>Large number of system test failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="becket_qin">Jiangjie Qin</assignee>
                                    <reporter username="granders">Geoff Anderson</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Feb 2016 21:19:37 +0000</created>
                <updated>Mon, 22 Feb 2016 23:58:21 +0000</updated>
                            <resolved>Mon, 22 Feb 2016 23:58:15 +0000</resolved>
                                                    <fixVersion>0.10.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15155793" author="becket_qin" created="Sat, 20 Feb 2016 22:52:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt; Sure, I&apos;m investigating.&lt;/p&gt;</comment>
                            <comment id="15155794" author="becket_qin" created="Sat, 20 Feb 2016 22:56:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt; It seems I am not able to access the test report on AWS S3. Do you mind uploading it in this ticket?&lt;/p&gt;</comment>
                            <comment id="15155819" author="granders" created="Sat, 20 Feb 2016 23:56:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt; Are you not able to navigate directly to this link and view the report?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2016-02-20--001.1455979842--apache--trunk--5caa800/report.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://confluent-kafka-system-test-results.s3-us-west-2.amazonaws.com/2016-02-20--001.1455979842--apache--trunk--5caa800/report.html&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15155827" author="granders" created="Sun, 21 Feb 2016 00:20:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt; The bucket is publicly readable as far as I can tell:&lt;/p&gt;

&lt;p&gt;If you have awscli installed (see &lt;a href=&quot;http://docs.aws.amazon.com/cli/latest/userguide/installing.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.aws.amazon.com/cli/latest/userguide/installing.html&lt;/a&gt;), you can try&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;aws s3 cp --recursive s3:&lt;span class=&quot;code-comment&quot;&gt;//confluent-kafka-system-test-results/2016-02-20--001.1455979842--apache--trunk--5caa800 ./2016-02-20--001.1455979842--apache--trunk&#8212;5caa800&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that directories corresponding to individual tests are actually tarballed, and can be unpacked with:&lt;br/&gt;
tar xzf INDIVIDUAL_TEST_DIRECTORY&lt;/p&gt;


</comment>
                            <comment id="15155828" author="becket_qin" created="Sun, 21 Feb 2016 00:21:49 +0000"  >&lt;p&gt;Ah, interesting. It seems chrome is not able to render the page so it is always blank. FireFox seems working fine.&lt;/p&gt;</comment>
                            <comment id="15155832" author="apovzner" created="Sun, 21 Feb 2016 00:33:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt; Most of these tests are reproducible locally, so should be easier to debug.&lt;/p&gt;

&lt;p&gt;I found the issue with some of the connect tests, which produce output like this:&lt;br/&gt;
 Expected &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;foo&amp;quot;, &amp;quot;bar&amp;quot;, &amp;quot;baz&amp;quot;, &amp;quot;razz&amp;quot;, &amp;quot;ma&amp;quot;, &amp;quot;tazz&amp;quot;&amp;#93;&lt;/span&gt; but saw &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;CreateTime:1455962742782\tfoo&amp;quot;, &amp;quot;CreateTime:1455962742789\tbar&amp;quot;, &amp;quot;CreateTime:1455962742789\tbaz&amp;quot;, &amp;quot;CreateTime:1455962758003\trazz&amp;quot;, &amp;quot;CreateTime:1455962758009\tma&amp;quot;, &amp;quot;CreateTime:1455962758009\ttazz&amp;quot;&amp;#93;&lt;/span&gt; in Kafka&lt;br/&gt;
Traceback (most recent call last):&lt;br/&gt;
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.3.10-py2.7.egg/ducktape/tests/runner.py&quot;, line 102, in run_all_tests&lt;br/&gt;
    result.data = self.run_single_test()&lt;br/&gt;
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.3.10-py2.7.egg/ducktape/tests/runner.py&quot;, line 154, in run_single_test&lt;br/&gt;
    return self.current_test_context.function(self.current_test)&lt;br/&gt;
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.3.10-py2.7.egg/ducktape/mark/_mark.py&quot;, line 331, in wrapper&lt;br/&gt;
    return functools.partial(f, *args, **kwargs)(*w_args, **w_kwargs)&lt;br/&gt;
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/tests/kafkatest/tests/connect_test.py&quot;, line 86, in test_file_source_and_sink&lt;br/&gt;
    assert expected == actual, &quot;Expected %s but saw %s in Kafka&quot; % (expected, actual)&lt;br/&gt;
AssertionError: Expected &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;foo&amp;quot;, &amp;quot;bar&amp;quot;, &amp;quot;baz&amp;quot;, &amp;quot;razz&amp;quot;, &amp;quot;ma&amp;quot;, &amp;quot;tazz&amp;quot;&amp;#93;&lt;/span&gt; but saw &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;CreateTime:1455962742782\tfoo&amp;quot;, &amp;quot;CreateTime:1455962742789\tbar&amp;quot;, &amp;quot;CreateTime:1455962742789\tbaz&amp;quot;, &amp;quot;CreateTime:1455962758003\trazz&amp;quot;, &amp;quot;CreateTime:1455962758009\tma&amp;quot;, &amp;quot;CreateTime:1455962758009\ttazz&amp;quot;&amp;#93;&lt;/span&gt; in Kafka&lt;/p&gt;

&lt;p&gt;ConsoleConsumer was changed to also output timestamp type and timestamp value in addition to key/value. However, it looks connect tests expect output with just key and value. See test_file_source_and_sink in connect_test.py for example.&lt;/p&gt;
</comment>
                            <comment id="15155835" author="becket_qin" created="Sun, 21 Feb 2016 00:49:22 +0000"  >&lt;p&gt;Yes, fix to those tests are obvious. I am looking at the other two types of failure.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;No JSON object could be decoded
Traceback (most recent call last):
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.3.10-py2.7.egg/ducktape/tests/runner.py&quot;, line 102, in run_all_tests
    result.data = self.run_single_test()
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.3.10-py2.7.egg/ducktape/tests/runner.py&quot;, line 154, in run_single_test
    return self.current_test_context.function(self.current_test)
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.3.10-py2.7.egg/ducktape/mark/_mark.py&quot;, line 331, in wrapper
    return functools.partial(f, *args, **kwargs)(*w_args, **w_kwargs)
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/tests/kafkatest/tests/connect_test.py&quot;, line 85, in test_file_source_and_sink
    actual = json.dumps([decoder(x) for x in self.consumer_validator.messages_consumed[1]])
  File &quot;/usr/lib/python2.7/json/__init__.py&quot;, line 338, in loads
    return _default_decoder.decode(s)
  File &quot;/usr/lib/python2.7/json/decoder.py&quot;, line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File &quot;/usr/lib/python2.7/json/decoder.py&quot;, line 384, in raw_decode
    raise ValueError(&quot;No JSON object could be decoded&quot;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Consumer failed to start in a reasonable amount of time.
Traceback (most recent call last):
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.3.10-py2.7.egg/ducktape/tests/runner.py&quot;, line 102, in run_all_tests
    result.data = self.run_single_test()
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.3.10-py2.7.egg/ducktape/tests/runner.py&quot;, line 154, in run_single_test
    return self.current_test_context.function(self.current_test)
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/venv/local/lib/python2.7/site-packages/ducktape-0.3.10-py2.7.egg/ducktape/mark/_mark.py&quot;, line 331, in wrapper
    return functools.partial(f, *args, **kwargs)(*w_args, **w_kwargs)
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/tests/kafkatest/tests/mirror_maker_test.py&quot;, line 139, in test_simple_end_to_end
    self.run_produce_consume_validate(core_test_action=self.wait_for_n_messages)
  File &quot;/var/lib/jenkins/workspace/kafka_system_tests/kafka/tests/kafkatest/tests/produce_consume_validate.py&quot;, line 79, in run_produce_consume_validate
    raise e
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I am not super familiar with those tests, so might it might take me some time to check. It looks we have problem when starting validating consumer.&lt;/p&gt;</comment>
                            <comment id="15155841" author="apovzner" created="Sun, 21 Feb 2016 01:40:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt; The &quot;No JSON object could be decoded&quot; failure is also caused by ConsoleConsumer outputting timestamp type and timestamp. If I remove that output from ConsoleConsumer, I stop getting this failure. &lt;/p&gt;

&lt;p&gt;Also, once I did that, reassign_partitions_test also started passing.&lt;/p&gt;

&lt;p&gt;So, it leads me to believe that there is some common test tool which expects a particular &lt;b&gt;format&lt;/b&gt; of an output, rather than a test expecting a specific output.&lt;/p&gt;

&lt;p&gt;What was the reason for outputting timestamp type and timestamp in ConsoleConsumer? If it does not bring much value, I propose to just got back to the original format of outputting key and value in ConsoleConsumer. I think  that would fix most of the tests.  &lt;/p&gt;</comment>
                            <comment id="15155846" author="becket_qin" created="Sun, 21 Feb 2016 01:52:37 +0000"  >&lt;p&gt;Hmm, the reason we are printing the timestamp is because that is a user-specified field, just like key and value. ConsoleConsumer is supposed to print that if applicable. &lt;/p&gt;

&lt;p&gt;If fixing the integration tests format is time consuming, we can temporarily change the output format for ConsoleConsumer back to print only key and value. And we can have a follow-up patch for this ticket that updates both the ConsumerConsumer output format and integration test message format.&lt;/p&gt;</comment>
                            <comment id="15155847" author="ijuma" created="Sun, 21 Feb 2016 01:54:01 +0000"  >&lt;p&gt;We may also consider outputting those fields only when a flag is set for compatibility reasons.&lt;/p&gt;</comment>
                            <comment id="15155848" author="ijuma" created="Sun, 21 Feb 2016 01:57:03 +0000"  >&lt;p&gt;Whatever we decide, it would be good to do it in two steps (revert the output format change so that the system tests pass again and then discuss the best way to handle adding it back) as per Becket&apos;s suggestion.&lt;/p&gt;</comment>
                            <comment id="15155852" author="becket_qin" created="Sun, 21 Feb 2016 02:04:30 +0000"  >&lt;p&gt;I like this idea. We already have &quot;print.key&quot; as an option for console consumer. We can have a &quot;print.timestamp&quot; as well and disable it by default.&lt;/p&gt;</comment>
                            <comment id="15155854" author="becket_qin" created="Sun, 21 Feb 2016 02:06:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; If we add a &quot;print.timestamp&quot; to console consumer and disable it by default then we only need one patch, right?&lt;/p&gt;</comment>
                            <comment id="15155855" author="ijuma" created="Sun, 21 Feb 2016 02:12:56 +0000"  >&lt;p&gt;Yes, one patch would be enough for that option.&lt;/p&gt;</comment>
                            <comment id="15155910" author="apovzner" created="Sun, 21 Feb 2016 06:17:18 +0000"  >&lt;p&gt;I looked more into system tests to find where the format is expected, and there are several places actually:&lt;br/&gt;
1) Connect tests expect the output to be in JSON format. The value is published in JSON format, and since before the test was expecting the value only, the test was written to expect the console consumer output in JSON format.&lt;br/&gt;
2) Other tests such as reassign_partition, compatibility tests that are using ConsoleConsumer are setting message_validator=is_int when constructing it (because they were expecting only value of type integer in the console consumer output). This means that produce_consume_validate.py will be expecting consumer output to be an integer.&lt;/p&gt;

&lt;p&gt;I actually think unless we want a system test that specifically verifies a timestamp, we shouldn&apos;t modify existing tests to work with a console consumer output containing timestamp type and timestamp. So I agree with your decision to not output timestamp type and timestamp by default. If we want to write/extend system tests that specifically checks for timestamps (type or validates timestamp range), then we will use an output with a timestamp.&lt;/p&gt;</comment>
                            <comment id="15155911" author="apovzner" created="Sun, 21 Feb 2016 06:29:25 +0000"  >&lt;p&gt;Also for completeness, the remaining system tests:&lt;br/&gt;
mirror_maker_test.py, zookeeper_security_upgrade_test.py, and upgrade_test.py all use console consumer and set message_validator=is_int. So, they all expect  console consumer to output values that are integers, and additional &quot;CreateTime:NNNN&amp;gt; breaks that.&lt;/p&gt;</comment>
                            <comment id="15156184" author="junrao" created="Sun, 21 Feb 2016 19:37:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt;, could you try the fix in ConsoleConsumer and run all system tests again? Geoff has given you permission to Confluence jenkins and you can run the tests on your branch.&lt;/p&gt;</comment>
                            <comment id="15156272" author="becket_qin" created="Sun, 21 Feb 2016 22:50:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; Yes, I was trying to run the integration test with the patch. &lt;/p&gt;

&lt;p&gt;Not sure if I did something wrong, but the jenkins test seems not quite stable. Yesterday night the build failed because some ssh issue. I kicked off a new build this morning but somehow it seems stuck at the 21st test. I just started a new build and see if that works.&lt;/p&gt;</comment>
                            <comment id="15156331" author="granders" created="Mon, 22 Feb 2016 00:40:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt; It appears your first attempt failed while building kafka for some reason.&lt;/p&gt;

&lt;p&gt;I cleared the workspace and kicked off another run here: &lt;a href=&quot;https://jenkins.confluent.io/job/kafka_system_tests_branch_builder/356/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.confluent.io/job/kafka_system_tests_branch_builder/356/console&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="15156340" author="becket_qin" created="Mon, 22 Feb 2016 01:06:14 +0000"  >&lt;p&gt;Thanks for the help, Geoff.&lt;/p&gt;</comment>
                            <comment id="15157580" author="becket_qin" created="Mon, 22 Feb 2016 19:53:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=geoffra&quot; class=&quot;user-hover&quot; rel=&quot;geoffra&quot;&gt;geoffra&lt;/a&gt; It seems that yesterday&apos;s build had two tests failure. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; kicked a off a new build with better logging. It shows many broker tear down failures. I&apos;ll take a looks at the log to see  what happened.&lt;/p&gt;</comment>
                            <comment id="15157604" author="apovzner" created="Mon, 22 Feb 2016 20:04:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=geoffra&quot; class=&quot;user-hover&quot; rel=&quot;geoffra&quot;&gt;geoffra&lt;/a&gt; The remaining system tests are compatibility test and rolling upgrade tests. The issue is that both tests assume trunk to be 0.9. Since we are testing 0.8 to 0.9 upgrade tests (and similarly compatibility tests) in 0.9 branch, we don&apos;t need to port the tests to get 0.9 version vs. trunk. We have separate JIRAs (&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3201&quot; title=&quot;Add system test for KIP-31 and KIP-32 - Upgrade Test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3201&quot;&gt;&lt;del&gt;KAFKA-3201&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3188&quot; title=&quot;Add system test for KIP-31 and KIP-32 - Compatibility Test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3188&quot;&gt;&lt;del&gt;KAFKA-3188&lt;/del&gt;&lt;/a&gt;) to add 0.8 to 0.10 and 0.9 to 0.10 upgrade tests, and test compatibility of mix of 0.9 and 0.10 clients with 0.10 brokers. My proposal to have a patch with current fixes, and address compatibility and upgrade test failures as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3201&quot; title=&quot;Add system test for KIP-31 and KIP-32 - Upgrade Test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3201&quot;&gt;&lt;del&gt;KAFKA-3201&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3188&quot; title=&quot;Add system test for KIP-31 and KIP-32 - Compatibility Test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3188&quot;&gt;&lt;del&gt;KAFKA-3188&lt;/del&gt;&lt;/a&gt;, which are currently assigned to me.&lt;/p&gt;</comment>
                            <comment id="15157715" author="becket_qin" created="Mon, 22 Feb 2016 21:23:14 +0000"  >&lt;p&gt;Thanks for the investigation &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apovzner&quot; class=&quot;user-hover&quot; rel=&quot;apovzner&quot;&gt;apovzner&lt;/a&gt;. It looks upgrade test failed because the default message.format.version is higher than inter.broker.version. And producer compatibility test failed because the producer was not able to parse timestamp field in the produce response.&lt;/p&gt;

&lt;p&gt;It is not clear to me that why we see tear down timeout failures in other tests. Those failures did not affect the test results but from the logs it seems all the servers have successfully shutdown.&lt;/p&gt;

&lt;p&gt;I agree that we can check in this patch first and fix upgrade test and producer compatibility test in the other two separate patches.&lt;/p&gt;</comment>
                            <comment id="15157719" author="apovzner" created="Mon, 22 Feb 2016 21:28:10 +0000"  >&lt;p&gt;FYI: The upgrade test fails with this error:&lt;br/&gt;
java.lang.IllegalArgumentException: requirement failed: message.format.version 0.10.0-IV0 cannot be used when inter.broker.protocol.version is set to 0.8.2&lt;/p&gt;

&lt;p&gt;I think this is expected, right? We need to use 0.9.0 (or 0.8) message format in the first pass of upgrade in 0.8 to 0.10 upgrade test (which is what current upgrade test is testing), is that correct?&lt;/p&gt;</comment>
                            <comment id="15157723" author="apovzner" created="Mon, 22 Feb 2016 21:30:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt; I wrote my comment without seeing yours. Yes, I think tear down timeout failures are unrelated and I don&apos;t think hey actually cause any issues (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=geoffra&quot; class=&quot;user-hover&quot; rel=&quot;geoffra&quot;&gt;geoffra&lt;/a&gt; ?). &lt;/p&gt;

&lt;p&gt;I&apos;ll take on upgrade and compatibility system tests if you don&apos;t mind. &lt;/p&gt;</comment>
                            <comment id="15157780" author="githubbot" created="Mon, 22 Feb 2016 21:57:50 +0000"  >&lt;p&gt;GitHub user becketqin opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/949&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/949&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3256&quot; title=&quot;Large number of system test failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3256&quot;&gt;&lt;del&gt;KAFKA-3256&lt;/del&gt;&lt;/a&gt;: Add print.timestamp option to console consumer.&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/becketqin/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/becketqin/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3256&quot; title=&quot;Large number of system test failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3256&quot;&gt;&lt;del&gt;KAFKA-3256&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/949.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/949.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #949&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f4a2ebd5feb75cde8b44b3cb1512152805259383&lt;br/&gt;
Author: Jiangjie Qin &amp;lt;becket.qin@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-02-21T06:03:27Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3256&quot; title=&quot;Large number of system test failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3256&quot;&gt;&lt;del&gt;KAFKA-3256&lt;/del&gt;&lt;/a&gt;: Add print.timestamp option to console consumer. It is disabled by default&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15157971" author="junrao" created="Mon, 22 Feb 2016 23:58:15 +0000"  >&lt;p&gt;Issue resolved by pull request 949&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/949&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/949&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15157972" author="githubbot" created="Mon, 22 Feb 2016 23:58:21 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/949&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/949&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2t49j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>