<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:43:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-1367] Broker topic metadata not kept in sync with ZooKeeper</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-1367</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;When a broker is restarted, the topic metadata responses from the brokers will be incorrect (different from ZooKeeper) until a preferred replica leader election.&lt;/p&gt;

&lt;p&gt;In the metadata, it looks like leaders are correctly removed from the ISR when a broker disappears, but followers are not. Then, when a broker reappears, the ISR is never updated.&lt;/p&gt;


&lt;p&gt;I used a variation of the Vagrant setup created by Joe Stein to reproduce this with latest from the 0.8.1 branch: &lt;a href=&quot;https://github.com/also/kafka/commit/dba36a503a5e22ea039df0f9852560b4fb1e067c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/also/kafka/commit/dba36a503a5e22ea039df0f9852560b4fb1e067c&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12707041">KAFKA-1367</key>
            <summary>Broker topic metadata not kept in sync with ZooKeeper</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="singhashish">Ashish Singh</assignee>
                                    <reporter username="rberdeen">Ryan Berdeen</reporter>
                        <labels>
                            <label>newbie++</label>
                    </labels>
                <created>Mon, 7 Apr 2014 22:23:55 +0000</created>
                <updated>Wed, 5 Aug 2015 05:50:26 +0000</updated>
                            <resolved>Tue, 7 Jul 2015 16:49:35 +0000</resolved>
                                    <version>0.8.0</version>
                    <version>0.8.1</version>
                                    <fixVersion>0.9.0.0</fixVersion>
                                        <due></due>
                            <votes>5</votes>
                                    <watches>28</watches>
                                                                                                                <comments>
                            <comment id="13962337" author="rberdeen" created="Mon, 7 Apr 2014 22:26:30 +0000"  >&lt;p&gt;JIRA ate my whitespace. See Attached for a description of the steps.&lt;/p&gt;</comment>
                            <comment id="14141002" author="ottomata" created="Fri, 19 Sep 2014 18:06:53 +0000"  >&lt;p&gt;This happens to me as well.  See:  &lt;a href=&quot;https://github.com/edenhill/librdkafka/issues/147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/edenhill/librdkafka/issues/147&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14141017" author="ottomata" created="Fri, 19 Sep 2014 18:15:24 +0000"  >&lt;p&gt;I just updated the librdkafka issue, pasting it here as well:&lt;/p&gt;

&lt;p&gt;I noticed that in my case, only 1 of the 4 brokers was ever missing in the ISRs reported by Kafka Brokers (via librdkafka). This JIRA indicated that a preferred-replica-election should fix the problem. I did this:&lt;/p&gt;

&lt;p&gt;controlled-shutdown of offending broker 21. Then actual shutdown of broker 21. Once this was done, librdkafka metadata showed the correct ISRs, since this offending broker really was not in any ISRs. I then restarted broker 21 and let its replicas catch back up. Once it caught up, zookeeper reported that all ISRs were in sync. I then checked librdkafka&apos;s metadata, and broker 21 was not listed in any ISR. I then ran a preferred-replica-election. broker 21 was then promoted to leader of some partitions. librdkafka then only showed broker 21 being in the ISRs for which it was also the leader. Any partition that has a replica on broker 21 does not show up in the ISR unless broker 21 is the leader.&lt;/p&gt;

&lt;p&gt;  $ kafkacat -L -b analytics1022.eqiad.wmnet  -t webrequest_upload&lt;br/&gt;
  Metadata for webrequest_upload (from broker -1: analytics1022.eqiad.wmnet:9092/bootstrap):&lt;br/&gt;
   4 brokers:&lt;br/&gt;
    broker 12 at analytics1012.eqiad.wmnet:9092&lt;br/&gt;
    broker 21 at analytics1021.eqiad.wmnet:9092&lt;br/&gt;
    broker 22 at analytics1022.eqiad.wmnet:9092&lt;br/&gt;
    broker 18 at analytics1018.eqiad.wmnet:9092&lt;br/&gt;
   1 topics:&lt;br/&gt;
    topic &quot;webrequest_upload&quot; with 12 partitions:&lt;br/&gt;
      partition 11, leader 12, replicas: 12,21,22, isrs: 12,22&lt;br/&gt;
      partition 5, leader 21, replicas: 21,22,12, isrs: 22,12,21&lt;br/&gt;
      partition 10, leader 22, replicas: 22,18,21, isrs: 18,22&lt;br/&gt;
      partition 7, leader 12, replicas: 12,18,21, isrs: 12,18&lt;br/&gt;
      partition 8, leader 18, replicas: 18,22,12, isrs: 12,18,22&lt;br/&gt;
      partition 3, leader 12, replicas: 12,22,18, isrs: 12,18,22&lt;br/&gt;
      partition 4, leader 18, replicas: 18,21,22, isrs: 18,22&lt;br/&gt;
      partition 1, leader 21, replicas: 21,18,22, isrs: 18,22,21&lt;br/&gt;
      partition 6, leader 22, replicas: 22,12,18, isrs: 12,18,22&lt;br/&gt;
      partition 2, leader 22, replicas: 22,21,12, isrs: 12,22&lt;br/&gt;
      partition 9, leader 21, replicas: 21,12,18, isrs: 12,18,21&lt;br/&gt;
      partition 0, leader 18, replicas: 18,12,21, isrs: 12,18&lt;/p&gt;



&lt;p&gt;vs kafka-topic.sh --describe&lt;/p&gt;

&lt;p&gt;  Topic:webrequest_upload	PartitionCount:12	ReplicationFactor:3	Configs:&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 0	Leader: 18	Replicas: 18,12,21	Isr: 12,18,21&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 1	Leader: 21	Replicas: 21,18,22	Isr: 18,22,21&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 2	Leader: 22	Replicas: 22,21,12	Isr: 12,22,21&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 3	Leader: 12	Replicas: 12,22,18	Isr: 12,18,22&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 4	Leader: 18	Replicas: 18,21,22	Isr: 18,22,21&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 5	Leader: 21	Replicas: 21,22,12	Isr: 22,12,21&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 6	Leader: 22	Replicas: 22,12,18	Isr: 12,18,22&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 7	Leader: 12	Replicas: 12,18,21	Isr: 12,18,21&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 8	Leader: 18	Replicas: 18,22,12	Isr: 12,18,22&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 9	Leader: 21	Replicas: 21,12,18	Isr: 12,18,21&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 10	Leader: 22	Replicas: 22,18,21	Isr: 18,22,21&lt;br/&gt;
  	Topic: webrequest_upload	Partition: 11	Leader: 12	Replicas: 12,21,22	Isr: 12,22,21&lt;/p&gt;</comment>
                            <comment id="14141749" author="junrao" created="Sat, 20 Sep 2014 05:01:50 +0000"  >&lt;p&gt;Yes, in the current implementation, ISR returned from metadata requests can be inconsistent with what&apos;s stored in ZK. This is because metadata is only propagated from the controller to the brokers when the controller changes the leader or the ISR. However, when a follower catches up, the leader (not the controller) adds it back to ISR and updates ZK. That info is not propagated to all brokers.&lt;/p&gt;

&lt;p&gt;Currently, the ISR part in a metadata response is not really used by the clients. Do you have a usage for this?&lt;/p&gt;</comment>
                            <comment id="14143218" author="edenhill" created="Mon, 22 Sep 2014 13:53:28 +0000"  >&lt;p&gt;Apart from supplying the ISR count and list in its metadata API, librdkafka also provides an `enforce.isr.cnt` configuration property that fails&lt;br/&gt;
produce requests locally before transmission if the currently known ISR count is smaller than the configured value.&lt;br/&gt;
This is a workaround for the broker not fully honoring `request.required.acks`, i.e., if `request.required.acks=3` and only one broker is available the produce request will not fail.&lt;br/&gt;
More info in the original issue here: &lt;a href=&quot;https://github.com/edenhill/librdkafka/issues/91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/edenhill/librdkafka/issues/91&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Generally I would assume that information provided by the broker is correct, otherwise it should not be included at all since it can&apos;t be used (reliably).&lt;/p&gt;</comment>
                            <comment id="14143413" author="guozhang" created="Mon, 22 Sep 2014 16:57:02 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edenhill&quot; class=&quot;user-hover&quot; rel=&quot;edenhill&quot;&gt;edenhill&lt;/a&gt;, I think your use case may be supported in a new feature that is currently developed: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1555&quot; title=&quot;provide strong consistency with reasonable availability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1555&quot;&gt;&lt;del&gt;KAFKA-1555&lt;/del&gt;&lt;/a&gt;. Would you like to take a look at it and see if your case is really covered?&lt;/p&gt;</comment>
                            <comment id="14144108" author="winbatch" created="Tue, 23 Sep 2014 00:28:06 +0000"  >&lt;p&gt;I&apos;d also add that having the broker being able to serve up (accurate) metadata allows client applications to build custom dashboards, etc.  As I understand it, there is the idea to move away from zookeeper (or at least for somethings) within the kafka infrastructure - so having the broker be able to provide this would be good.&lt;/p&gt;</comment>
                            <comment id="14144434" author="jjkoshy" created="Tue, 23 Sep 2014 06:48:41 +0000"  >&lt;p&gt;I definitely agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edenhill&quot; class=&quot;user-hover&quot; rel=&quot;edenhill&quot;&gt;edenhill&lt;/a&gt; that if such a field exists in the response then the information populated in the field should be accurate (or we may as well not include the field) - so we should fix this.&lt;/p&gt;</comment>
                            <comment id="14147377" author="nehanarkhede" created="Thu, 25 Sep 2014 05:08:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;I definitely agree with Magnus Edenhill that if such a field exists in the response then the information populated in the field should be accurate (or we may as well not include the field) - so we should fix this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14148054" author="edenhill" created="Thu, 25 Sep 2014 18:04:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt; Yes, &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1555&quot; title=&quot;provide strong consistency with reasonable availability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1555&quot;&gt;&lt;del&gt;KAFKA-1555&lt;/del&gt;&lt;/a&gt; looks like a good match.&lt;/p&gt;</comment>
                            <comment id="14160538" author="guozhang" created="Mon, 6 Oct 2014 17:26:37 +0000"  >&lt;p&gt;Regarding the fix to this issue, we can either 1) remove the ISR field from the metadata response and hence enforce people to use the admin tool (with ZK dependency) for such usages, which would also require a protocol change between client / server; or 2) let the controller to also watch for ISR change and propagate that information to brokers, this will not introduce protocol change to clients but will likely add a lot of burden on controllers since ISR change is more frequent than leader migrations.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; any other thoughts?&lt;/p&gt;</comment>
                            <comment id="14160717" author="guozhang" created="Mon, 6 Oct 2014 19:02:02 +0000"  >&lt;p&gt;Just talked to Joel offline. I think since ISR (and also Leader) info in broker is just a cached snapshot and cannot be really used in a scenario like this (i.e. depending on the ISR list to determine if the ack received with -1 setting is reliable or not, since the ISR can shrink while the ack is sent back), we could remove the ISR cache from the brokers and also remove it from the metadata response, unless there is a clear use case of this information.&lt;/p&gt;</comment>
                            <comment id="14160772" author="nehanarkhede" created="Mon, 6 Oct 2014 19:20:55 +0000"  >&lt;p&gt;The ISR cache on the broker was added only because we had to expose that information through the topic metadata response. I don&apos;t think we gave a lot of thought, back then, on why the ISR information is useful in the topic metadata response (especially since it&apos;s stale and effectively inaccurate). I am not entirely sure if having the controller be aware of all ISR changes is terrible even though it&apos;s true that the # of watches it has to add is proportional to the # of partitions in a cluster. But it&apos;s not worth doing that if we don&apos;t find a use for the ISR information in the topic metadata response. So I&apos;d vote for removing ISR from topic metadata and also from the broker&apos;s metadata cache.&lt;/p&gt;</comment>
                            <comment id="14160927" author="edenhill" created="Mon, 6 Oct 2014 20:57:37 +0000"  >&lt;p&gt;May I suggest not to change the protocol but to only send an empty ISR vector in the MetadataResponse?&lt;/p&gt;</comment>
                            <comment id="14309966" author="fsaintjacques" created="Fri, 6 Feb 2015 21:35:16 +0000"  >&lt;p&gt;Instead of silently removing the field, could the controller force a cache refresh on a metadata request?&lt;/p&gt;</comment>
                            <comment id="14395959" author="jkreps" created="Sat, 4 Apr 2015 21:37:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; Does this problem still exist?&lt;/p&gt;</comment>
                            <comment id="14488058" author="skandragon" created="Thu, 9 Apr 2015 19:24:05 +0000"  >&lt;p&gt;There is another issue that no one seems to be discussing.  This ISR data is AFAIK the only way to know when a broker is &quot;Back in service&quot;&lt;/p&gt;

&lt;p&gt;Consider this scenario.  I have 5 brokers, and want to upgrade them.  I want to know when a broker has caught up so I can take down the next one in sequence to upgrade it.  How can I know this if the reported state of the world is different than what is actually in use by the brokers themselves?&lt;/p&gt;

&lt;p&gt;This seems to be very much an operational issue.&lt;/p&gt;</comment>
                            <comment id="14488218" author="junrao" created="Thu, 9 Apr 2015 20:33:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Skandragon&quot; class=&quot;user-hover&quot; rel=&quot;Skandragon&quot;&gt;Skandragon&lt;/a&gt;, for the operational issue that you pointed out, there are jmx such as the underReplicatedCount that one can leverage.&lt;/p&gt;

&lt;p&gt;That said, it&apos;s probably useful for an admin client to know the accurate ISR. As Guozhang has suggested, one approach is to register a watcher of the state path for each partition. We probably need to do a bit experiments to see how much overhead this adds. Another approach is to have the controller periodically read the latest ISR for each partition. This is probably a bit simpler to implement, but may not reflect ISR timely and may add unnecessary load to ZK.&lt;/p&gt;</comment>
                            <comment id="14494808" author="jonbringhurst" created="Tue, 14 Apr 2015 20:31:38 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkreps&quot; class=&quot;user-hover&quot; rel=&quot;jkreps&quot;&gt;jkreps&lt;/a&gt;, I can confirm that the metadata response is still out of sync with ZK in a recent trunk build (about a month old).&lt;/p&gt;

&lt;p&gt;Btw, it&apos;s not much effort for me to simply look at ZK or JMX &amp;#8211; it was just confusing when I initially ran into this.&lt;/p&gt;</comment>
                            <comment id="14513265" author="nehanarkhede" created="Sun, 26 Apr 2015 21:10:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkreps&quot; class=&quot;user-hover&quot; rel=&quot;jkreps&quot;&gt;jkreps&lt;/a&gt; Yup, issue still exists and the solution I still recommend is to have the controller register watches and know the latest ISR for all partitions. This change isn&apos;t big if someone wants to take a stab. &lt;/p&gt;</comment>
                            <comment id="14513387" author="singhashish" created="Mon, 27 Apr 2015 01:23:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt; If no one has already started working on this I would like to take a stab at it.&lt;/p&gt;</comment>
                            <comment id="14514481" author="jjkoshy" created="Mon, 27 Apr 2015 17:26:59 +0000"  >&lt;p&gt;I&apos;m a bit wary of the watch approach. I believe at the last google hangout we decided against doing this (as part of the KIP-4 discussion). A number of people had dropped off at that point - I believe we were going with a broker-level metadata request that can return ISR information for partitions that it leads. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abiletskyi&quot; class=&quot;user-hover&quot; rel=&quot;abiletskyi&quot;&gt;abiletskyi&lt;/a&gt; can you confirm? I didn&apos;t see it in the summary notes so I could be wrong.&lt;/p&gt;</comment>
                            <comment id="14514761" author="abiletskyi" created="Mon, 27 Apr 2015 19:24:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt; Yes, it appears that topic commands don&apos;t require ISR information so it was proposed to remove it at all from the TopicMetadataRequest. There was an idea to create some sort of BrokerMetadataRequest which will include correct topic metadata but since it&apos;s not related to KIP-4 directly it won&apos;t be a part of it. So everyone is welcome to create a separate KIP for it. Atleast to this conclusion we came last time.&lt;/p&gt;</comment>
                            <comment id="14516298" author="nehanarkhede" created="Tue, 28 Apr 2015 04:02:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt; That would work too but looks like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abiletskyi&quot; class=&quot;user-hover&quot; rel=&quot;abiletskyi&quot;&gt;abiletskyi&lt;/a&gt; is suggesting that it is not included as part of KIP-4. Maybe we can have whoever picks this JIRA discuss this change as part of a separate KIP?&lt;/p&gt;</comment>
                            <comment id="14535956" author="singhashish" created="Sat, 9 May 2015 00:05:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt;/ &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt; I have put together &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-24+-+Remove+ISR+information+from+TopicMetadataRequest+and+add+broker+level+metadata+request&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;KIP-24&lt;/a&gt;. I will need a bit more information on what we decided for BrokerMetadataRequest, before I can update &quot;Public Interfaces&quot; section of the KIP.&lt;/p&gt;

&lt;p&gt;Is my understanding correct that below is the plan we agreed upon. Below excerpt is actually from the KIP.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;It is proposed to remove ISR information from the TopicMetadataRequest. However, a new request, BrokerMetadataRequest, is proposed to be added. The new request will include ISR information for all the partitions that the broker leads.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14563795" author="singhashish" created="Thu, 28 May 2015 22:24:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt; pinging you for your confirmation on this.&lt;/p&gt;</comment>
                            <comment id="14563858" author="jjkoshy" created="Thu, 28 May 2015 23:10:34 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=singhashish&quot; class=&quot;user-hover&quot; rel=&quot;singhashish&quot;&gt;singhashish&lt;/a&gt; - sorry I missed your pings. Yes that is the approach we are planning to take. i.e., remove ISR from TMR. As mentioned in KIP-4 the ISR will be removed in v1 of TMR.&lt;/p&gt;</comment>
                            <comment id="14563904" author="singhashish" created="Thu, 28 May 2015 23:38:19 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt;! I will update the KIP accordingly.&lt;/p&gt;</comment>
                            <comment id="14563935" author="junrao" created="Thu, 28 May 2015 23:56:01 +0000"  >&lt;p&gt;There is actually a reasonable use case of ISR in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2225&quot; title=&quot;Allow fetching from ISR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2225&quot;&gt;&lt;del&gt;KAFKA-2225&lt;/del&gt;&lt;/a&gt;. Basically, for economical reasons, we may want to let a consumer fetch from a replica in ISR that&apos;s in the same zone. In order to support that, it will be convenient to have TMR return the correct ISR for the consumer to choose.&lt;/p&gt;

&lt;p&gt;Implementation wise, one way to address the concern with too many watchers is to do sth similar to changing topic configs. Basically, when the leader changes the isr, in addition to writing the new isr in the partition state in ZK, it also writes the change as a sequential node under a new isrChangeNotification path in ZK. The controller listens to child changes in the isrChangeNotification path. On child change, the controller reads the new isr and broadcasts it through an UpdateMetadataRequest to every broker.&lt;/p&gt;</comment>
                            <comment id="14563960" author="jjkoshy" created="Fri, 29 May 2015 00:14:02 +0000"  >&lt;p&gt;Jun - that is a good point. That sounds like a good approach to address the concern with watcher counts. Another way is to just allow brokers to send an equivalent update metadata (or similar) request to the controller to notify it of an ISR change - or even allow leaders to broadcast update metadata requests for ISR changes. We currently don&apos;t allow this, but maybe we should consider a generic broker-broker communication component. Given the use-case that Theo raised on the list yesterday, it appears we may want to keep the ISR even in TMR v1. It may make sense to discuss this at an upcoming hangout especially since it affects KIP-4.&lt;/p&gt;</comment>
                            <comment id="14564002" author="junrao" created="Fri, 29 May 2015 00:42:50 +0000"  >&lt;p&gt;It&apos;s probably better to always let the controller propagate metadata changes to the brokers. If the metadata change can be sent from both the controller and other brokers, we need additional logic to reason about ordering.&lt;/p&gt;

&lt;p&gt;Having the broker send the change to the controller is possible. The implication is that there is another thread that can exercise the controller logic, instead of just the ZK watcher thread. So, we may need to deal with more concurrency issues.&lt;/p&gt;</comment>
                            <comment id="14564012" author="jjkoshy" created="Fri, 29 May 2015 00:55:11 +0000"  >&lt;p&gt;One minor issue with depending on the TMR for KAKFA-2225 even if we fix this is that the consumer would need to periodically refresh its metadata in case the ISR changes after it starts reading from a follower in ISR.&lt;/p&gt;

&lt;p&gt;Another approach for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2225&quot; title=&quot;Allow fetching from ISR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2225&quot;&gt;&lt;del&gt;KAFKA-2225&lt;/del&gt;&lt;/a&gt; is to add the ISR information to the fetch response. The followers will then have the current ISR information and so will the consumers. There are at least two concerns though: first, it depends on a live replica fetcher thread; second, it&apos;s a bit hacky to add ISR to fetch response as it is more associated with metadata.&lt;/p&gt;</comment>
                            <comment id="14564029" author="junrao" created="Fri, 29 May 2015 01:08:41 +0000"  >&lt;p&gt;Well, in that approach, you still have the problem on the very first fetch request. If ISR is not returned in TMR, the first fetch request has to go to the leader. Then the consumer has to switch to another broker on a subsequent request, which seems more complicated.&lt;/p&gt;

&lt;p&gt;I am not sure if we need to rely on periodic metadata refresh to detect whether a replica is out of sync. Basically, as long as the fetch offset is less than HW, the replica can serve the request. If the fetch offset is larger than HW (an indication that the replica is out of sync), the consumer will get an OffsetOutOfRangeException and has to refresh the metadata and pick a new broker to fetch from.&lt;/p&gt;</comment>
                            <comment id="14564980" author="singhashish" created="Fri, 29 May 2015 15:40:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; can we add this to the agenda of next KIP hangout?&lt;/p&gt;</comment>
                            <comment id="14565078" author="junrao" created="Fri, 29 May 2015 17:11:39 +0000"  >&lt;p&gt;Yes.&lt;/p&gt;</comment>
                            <comment id="14569420" author="jjkoshy" created="Tue, 2 Jun 2015 17:02:00 +0000"  >&lt;p&gt;You may still want to switch back to a replica in the same (or nearer) availability zone right after it catches up and rejoins the ISR. Also, I&apos;m not sure about the offset going out of range while fetching from a given replica. i.e., the fetcher will just fetch with an offset larger than the last fetched chunk. It may occur if you were switching between replicas though but that would only be if you were switching to a replica out of the ISR.&lt;/p&gt;</comment>
                            <comment id="14569484" author="junrao" created="Tue, 2 Jun 2015 17:46:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joel+koshy&quot; class=&quot;user-hover&quot; rel=&quot;joel koshy&quot;&gt;joel koshy&lt;/a&gt;, yes, that&apos;s a good point. If we want to switch back to the closest replica for consumption, we do need to refresh the metadata periodically to check if the closest replica is back in ISR. We also need to handle OffsetOutOfRangeException a bit differently. If the consumer gets OffsetOutOfRangeException because the replica is out of sync, we want to switch to another in-sync replica instead of resetting the offset. One way to do that is the following protocol.&lt;/p&gt;

&lt;p&gt;1. Get topic metadata.&lt;br/&gt;
2. Pick the &quot;closest&quot; in-sync replica to issue fetch requests.&lt;br/&gt;
3. On an OffsetOutOfRangeException, get the smallest/largest offset. If the fetch offset is within the range, go back to step 1 to switch to a different in-sync replica. Otherwise, go through the offset reset logic.&lt;br/&gt;
4. Periodically refresh the metadata. Switch to the &quot;closest&quot; in-sync replica for fetching, if needed.&lt;/p&gt;
</comment>
                            <comment id="14569803" author="guozhang" created="Tue, 2 Jun 2015 21:36:46 +0000"  >&lt;p&gt;One note is that with the new consumer, one has to periodically refresh metadata anyways for wildcard subscriptions.&lt;/p&gt;</comment>
                            <comment id="14571268" author="jjkoshy" created="Wed, 3 Jun 2015 16:13:46 +0000"  >&lt;p&gt;Follow-up from the KIP hangout. Side-note: this and most of the above comments are actually implementation details for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2225&quot; title=&quot;Allow fetching from ISR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2225&quot;&gt;&lt;del&gt;KAFKA-2225&lt;/del&gt;&lt;/a&gt;. This is relevant here only because we are considering keeping vs. removing the ISR field.&lt;/p&gt;

&lt;p&gt;I do think it is possible to implement &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2225&quot; title=&quot;Allow fetching from ISR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2225&quot;&gt;&lt;del&gt;KAFKA-2225&lt;/del&gt;&lt;/a&gt; without ISR support either in metadata or the fetch response. The fetch response already contains HW. So the consumer can watch its fetch offset and the current HW (from the last fetch response). If the fetchOffset &amp;lt;&amp;lt; HW but if the fetch response size is smaller than the requested bytes and the highest offset in the response is &amp;lt;&amp;lt; HW then the consumer knows that the follower that it is fetching from is lagging behind (especially if this difference increases in successive fetches). The main caveat with this is that it depends on the replica having a live replica fetcher. The other issue is that the consumer needs to have its own definition of what it takes to deem a replica as out of sync (since the replica lag time config is server-side). The other observation is that ISR is a highly relevant and useful field in the topic metadata response. I would be in favor of keeping it in the TMR and just having the consumer refresh the topic metadata periodically to keep itself informed of ISR changes.&lt;/p&gt;</comment>
                            <comment id="14577509" author="aauradkar" created="Mon, 8 Jun 2015 17:31:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2225&quot; title=&quot;Allow fetching from ISR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2225&quot;&gt;&lt;del&gt;KAFKA-2225&lt;/del&gt;&lt;/a&gt;, even if we leave the ISR in the TopicMetadataRequest, how do the consumers detect which of the replicas in ISR to fetch from right? The consumers need to know which &quot;zone&quot; each of the brokers live in and their own in order to fetch from the closest replica (which mitigates with the bandwidth issues described in 2225).&lt;/p&gt;

&lt;p&gt;Couple of options:&lt;br/&gt;
1. Return it in BrokerMetadataRequest (KIP-24)&lt;br/&gt;
2. Piggyback it along with the ISR field in TMR. i.e. isr : &lt;/p&gt;
{0: &quot;zone1&quot;, 1: &quot;zone2&quot;}

&lt;p&gt;If we choose to do (2), then the TMR will evolve anyway.&lt;/p&gt;</comment>
                            <comment id="14577563" author="junrao" created="Mon, 8 Jun 2015 18:05:48 +0000"  >&lt;p&gt;Yes, we need some kind of notion of zones for both the brokers and the clients. Each broker and each client (producer/consumer) need a configuration for which zone it belongs to. It&apos;s probably simpler to just return the zone info in TMR. We will need to evolve TMR, but that can probably be done separately from fixing the ISR in TMR. We probably should move these design discussions to &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2225&quot; title=&quot;Allow fetching from ISR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2225&quot;&gt;&lt;del&gt;KAFKA-2225&lt;/del&gt;&lt;/a&gt; itself.&lt;/p&gt;</comment>
                            <comment id="14577728" author="gwenshap" created="Mon, 8 Jun 2015 19:47:24 +0000"  >&lt;p&gt;By &quot;zones&quot; do we mean rack-awareness? Or more general locality notion?&lt;br/&gt;
Sounds like something that may need its own JIRA and design.&lt;/p&gt;</comment>
                            <comment id="14577758" author="becket_qin" created="Mon, 8 Jun 2015 20:10:06 +0000"  >&lt;p&gt;I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gwenshap&quot; class=&quot;user-hover&quot; rel=&quot;gwenshap&quot;&gt;gwenshap&lt;/a&gt;, it sounds this deserves a KIP.&lt;/p&gt;</comment>
                            <comment id="14578053" author="junrao" created="Mon, 8 Jun 2015 23:27:55 +0000"  >&lt;p&gt;Yes, perhaps some kind of more general locality could be useful. That can be done in a separate jira.&lt;/p&gt;

&lt;p&gt;Here, we just want to figure out whether it&apos;s useful to maintain ISR in TMR.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt;, another issue without ISR is that initially a client will have no idea which replica is in sync and can only guess.&lt;/p&gt;</comment>
                            <comment id="14581292" author="singhashish" created="Thu, 11 Jun 2015 00:45:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt;, correct me if my understanding is wrong, but I think we agreed on keeping ISR info in TMR and below mentioned approach is our preference.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;When the leader changes the isr, in addition to writing the new isr in the partition state in ZK, it also writes the change as a sequential node under a new isrChangeNotification path in ZK. The controller listens to child changes in the isrChangeNotification path. On child change, the controller reads the new isr and broadcasts it through an UpdateMetadataRequest to every broker.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Now that we want to keep ISR as part of TMR, do we still need a new BrokerMetadataRequest?&lt;/p&gt;</comment>
                            <comment id="14582433" author="jjkoshy" created="Thu, 11 Jun 2015 19:57:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=singhashish&quot; class=&quot;user-hover&quot; rel=&quot;singhashish&quot;&gt;singhashish&lt;/a&gt; - yes that is a good summary. BrokerMetadataRequest - probably yes, but that is now orthogonal.&lt;/p&gt;</comment>
                            <comment id="14582532" author="singhashish" created="Thu, 11 Jun 2015 21:20:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt; thanks for confirming. I will get started on the suggested solution for this issue. We will probably need a separate JIRA for KIP-24.&lt;/p&gt;</comment>
                            <comment id="14598877" author="singhashish" created="Wed, 24 Jun 2015 05:09:40 +0000"  >&lt;p&gt;Created reviewboard &lt;a href=&quot;https://reviews.apache.org/r/35820/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/35820/&lt;/a&gt;&lt;br/&gt;
 against branch trunk&lt;/p&gt;</comment>
                            <comment id="14598880" author="singhashish" created="Wed, 24 Jun 2015 05:15:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nehanarkhede&quot; class=&quot;user-hover&quot; rel=&quot;nehanarkhede&quot;&gt;nehanarkhede&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gwenshap&quot; class=&quot;user-hover&quot; rel=&quot;gwenshap&quot;&gt;gwenshap&lt;/a&gt; just uploaded a patch to fix this. Apart from the changes suggested above, I just had to update controller&apos;s leader and isr cache before sending update metadata request. Tested it on a 3 node kafka cluster and the patch resolves the issue.&lt;/p&gt;</comment>
                            <comment id="14611233" author="singhashish" created="Thu, 2 Jul 2015 00:23:29 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/35820/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/35820/&lt;/a&gt;&lt;br/&gt;
 against branch trunk&lt;/p&gt;</comment>
                            <comment id="14616184" author="singhashish" created="Tue, 7 Jul 2015 05:04:20 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/35820/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/35820/&lt;/a&gt;&lt;br/&gt;
 against branch trunk&lt;/p&gt;</comment>
                            <comment id="14616968" author="junrao" created="Tue, 7 Jul 2015 16:49:35 +0000"  >&lt;p&gt;Thanks for the latest patch. +1. Committed to trunk after fixing the last minor issue in the RB.&lt;/p&gt;</comment>
                            <comment id="14654469" author="junrao" created="Tue, 4 Aug 2015 22:26:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=singhashish&quot; class=&quot;user-hover&quot; rel=&quot;singhashish&quot;&gt;singhashish&lt;/a&gt;, forgot to mention this earlier. Could you include the ZK structure change in &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/Kafka+data+structures+in+Zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/Kafka+data+structures+in+Zookeeper&lt;/a&gt; ? Thanks,&lt;/p&gt;</comment>
                            <comment id="14654801" author="singhashish" created="Wed, 5 Aug 2015 04:45:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; done!&lt;/p&gt;</comment>
                            <comment id="14654847" author="becket_qin" created="Wed, 5 Aug 2015 05:31:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashishujjain&quot; class=&quot;user-hover&quot; rel=&quot;ashishujjain&quot;&gt;ashishujjain&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjkoshy&quot; class=&quot;user-hover&quot; rel=&quot;jjkoshy&quot;&gt;jjkoshy&lt;/a&gt;, I found some issue when trying to deploy the latest trunk with this patch. &lt;/p&gt;

&lt;p&gt;The problem is that during a rolling bounce in a cluster the ISR state propagation flooded the controller to broker traffic, the controlled shutdown of one broker takes about 1.5 hour to finish for a 30 node cluster.&lt;/p&gt;

&lt;p&gt;Also, even during a clean cluster startup, there are more than 70,000 ISR change ephemeral path got created.&lt;/p&gt;

&lt;p&gt;I feel we need to either find another way to propagate ISR change other than using zookeeper, or at very least we need to throttle the propagation rate to, say, once every 10 seconds.&lt;/p&gt;

&lt;p&gt;I&apos;m going to create another ticket to address the issue. Hopefully the fix should be quick. If the fix takes some time, do we consider reverting this patch and rework on it?&lt;/p&gt;</comment>
                            <comment id="14654859" author="singhashish" created="Wed, 5 Aug 2015 05:44:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt; that is a valid concern. I guess what you are suggesting makes sense, controller should wait for a configurable time before sending out Update Metadata Request to brokers.&lt;/p&gt;</comment>
                            <comment id="14654861" author="becket_qin" created="Wed, 5 Aug 2015 05:50:26 +0000"  >&lt;p&gt;Thanks for the quick response &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashishujjain&quot; class=&quot;user-hover&quot; rel=&quot;ashishujjain&quot;&gt;ashishujjain&lt;/a&gt;. I created &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2406&quot; title=&quot;ISR propagation should be throttled to avoid overwhelming controller.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2406&quot;&gt;&lt;del&gt;KAFKA-2406&lt;/del&gt;&lt;/a&gt; and will submit a patch tonight. This has become a blocker for us now so I want to get it fixed ASAP. Thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12729791">KAFKA-1557</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12657261">KAFKA-972</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12741448" name="KAFKA-1367.patch" size="10366" author="singhashish" created="Wed, 24 Jun 2015 05:09:39 +0000"/>
                            <attachment id="12639080" name="KAFKA-1367.txt" size="3229" author="rberdeen" created="Mon, 7 Apr 2014 22:26:30 +0000"/>
                            <attachment id="12743187" name="KAFKA-1367_2015-07-01_17:23:14.patch" size="15751" author="singhashish" created="Thu, 2 Jul 2015 00:23:29 +0000"/>
                            <attachment id="12743887" name="KAFKA-1367_2015-07-06_22:04:06.patch" size="15943" author="singhashish" created="Tue, 7 Jul 2015 05:04:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1udzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385631</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>