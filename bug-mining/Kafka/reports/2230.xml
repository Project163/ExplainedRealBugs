<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:18:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-7026] Sticky assignor could assign a partition to multiple consumers (KIP-341)</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-7026</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In the following scenario sticky assignor assigns a topic partition to two&#160;consumers in the group:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Create a topic &lt;tt&gt;test&lt;/tt&gt; with a single partition&lt;/li&gt;
	&lt;li&gt;Start consumer &lt;tt&gt;c1&lt;/tt&gt;&#160;in group &lt;tt&gt;sticky-group&lt;/tt&gt; (&lt;tt&gt;c1&lt;/tt&gt;&#160;becomes group leader and gets &lt;tt&gt;test-0&lt;/tt&gt;)&lt;/li&gt;
	&lt;li&gt;Start consumer &lt;tt&gt;c2&lt;/tt&gt;&#160; in group &lt;tt&gt;sticky-group&lt;/tt&gt; (&lt;tt&gt;c1&lt;/tt&gt; holds onto &lt;tt&gt;test-0&lt;/tt&gt;,&#160;&lt;tt&gt;c2&lt;/tt&gt;&#160;does not get any partition)&#160;&lt;/li&gt;
	&lt;li&gt;Pause &lt;tt&gt;c1&lt;/tt&gt;&#160;(e.g. using Java debugger) (&lt;tt&gt;c2&lt;/tt&gt; becomes leader and takes over &lt;tt&gt;test-0&lt;/tt&gt;, &lt;tt&gt;c1&lt;/tt&gt; leaves the group)&lt;/li&gt;
	&lt;li&gt;Resume &lt;tt&gt;c1&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;At this point both &lt;tt&gt;c1&lt;/tt&gt; and &lt;tt&gt;c2&lt;/tt&gt; will have &lt;tt&gt;test-0&lt;/tt&gt; assigned to them.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The reason is &lt;tt&gt;c1&lt;/tt&gt; still has kept its previous assignment (&lt;tt&gt;test-0&lt;/tt&gt;) from the last assignment it received from the leader (itself) and did not get the next round of assignments (when &lt;tt&gt;c2&lt;/tt&gt; became leader) because it was paused. Both &lt;tt&gt;c1&lt;/tt&gt; and &lt;tt&gt;c2&lt;/tt&gt; enter the rebalance supplying &lt;tt&gt;test-0&lt;/tt&gt; as their existing assignment. The sticky assignor code does not currently check and avoid this duplication.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Note: This issue was originally reported on &lt;a href=&quot;https://stackoverflow.com/questions/50761842/kafka-stickyassignor-breaking-delivery-to-single-consumer-in-the-group&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;StackOverflow&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13165024">KAFKA-7026</key>
            <summary>Sticky assignor could assign a partition to multiple consumers (KIP-341)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vahid">Vahid Hashemian</assignee>
                                    <reporter username="vahid">Vahid Hashemian</reporter>
                        <labels>
                            <label>kip</label>
                    </labels>
                <created>Fri, 8 Jun 2018 21:10:01 +0000</created>
                <updated>Mon, 23 Sep 2019 19:47:54 +0000</updated>
                            <resolved>Thu, 18 Apr 2019 15:35:49 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>clients</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>14</watches>
                                                                                                                <comments>
                            <comment id="16522404" author="steven.aerts" created="Mon, 25 Jun 2018 15:04:55 +0000"  >&lt;p&gt;I found three issues in kafka which are I think all the same. This issue, &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6681&quot; title=&quot;Two instances of kafka consumer reading the same partition within a consumer group&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6681&quot;&gt;&lt;del&gt;KAFKA-6681&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6717&quot; title=&quot;TopicPartition Assined twice to a consumer group for 2 consumer instances &quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6717&quot;&gt;&lt;del&gt;KAFKA-6717&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
 I will comment on this one as I think it gives the best description.&lt;/p&gt;

&lt;p&gt;We were able to see this issue both on 0.11.0 as on 1.1.0.&lt;/p&gt;

&lt;p&gt;When we are in this state, the consumer group is marked as stable:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$./kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group c-group  --describe  --state --verbose
COORDINATOR (ID)    ASSIGNMENT-STRATEGY       STATE                #MEMBERS
broker3:9092 (1003) sticky                    Stable               6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;While the assignment is clearly broken:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$./kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group wfei-aggregator-product-ap-1-2-PT6H  --describe  --members --verbose
CONSUMER-ID                                     HOST   CLIENT-ID  #PARTITIONS ASSIGNMENT
consumer-1-63f5550e-fd12-4a1f-be13-fb33ac82d9d9 /host1 consumer-1 70          coll-v2-events-beta3(7,12,17,20,24,29,38,39,45,48,49,51,55,61,64,66,69,73,80,83,94,97,99,101,111,122,128,133,134,136,139,144,149,153,160,161,168,178,179,184,188,196,210,213,215,224,243,252,254,255,258,262,281,283,285,293,294,297,302,303,304,305,311,316,319,326,331,337,342,343)
consumer-2-6490433c-f181-4d37-adb8-e3e8679bc960 /host1 consumer-2 70          coll-v2-events-beta3(4,6,16,19,30,34,41,43,44,49,52,54,72,76,85,86,92,93,97,105,108,113,123,124,126,131,133,138,143,147,156,159,169,174,191,197,198,204,208,215,217,230,231,242,252,257,264,267,272,273,275,277,279,284,287,291,294,300,303,305,316,326,333,337,338,340,342,348,350,358)
consumer-1-c4fd0a50-456a-4994-9c85-d843b8bc4319 /host2 consumer-1 70          coll-v2-events-beta3(1,3,5,7,13,18,22,23,24,32,33,35,36,37,40,55,68,74,77,84,87,94,98,102,122,127,135,137,141,142,148,152,154,157,158,165,177,178,193,194,199,220,221,222,228,236,238,239,249,259,262,270,281,283,285,293,295,299,301,314,320,329,331,341,344,345,346,347,352,353)
consumer-1-517ab012-fa10-4d4e-9465-861f4912b013 /host3 consumer-1 70          coll-v2-events-beta3(2,8,9,14,17,26,28,45,46,48,53,57,58,59,60,63,66,70,73,75,78,80,82,88,91,95,103,107,109,115,119,120,134,136,151,155,160,166,170,172,182,183,186,188,189,203,205,226,232,233,237,244,246,247,248,260,263,278,282,286,292,296,308,312,313,319,328,332,343,357)
consumer-2-e4e4ab60-e94f-4242-93fa-99aa39cafc9f /host2 consumer-2 70          coll-v2-events-beta3(0,10,11,15,20,25,27,29,31,38,47,50,79,83,96,99,101,111,112,114,125,139,140,145,150,162,168,171,175,179,187,190,192,195,200,202,206,207,209,211,213,214,218,219,223,227,229,234,240,241,245,250,251,253,254,256,261,269,271,276,288,290,298,315,323,325,334,349,354,355)
consumer-2-8bbc1a53-a626-4e5b-825e-57d71dc4658c /host3 consumer-2 70          coll-v2-events-beta3(21,39,42,51,56,62,64,65,67,71,81,89,90,100,104,106,110,116,117,118,121,129,130,132,146,149,161,163,164,167,173,176,180,181,184,185,201,210,212,216,224,225,235,265,266,268,274,280,289,297,302,304,306,307,309,310,311,317,318,321,322,324,327,330,335,336,339,351,356,359)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So we have 360 partitions but there are 420 assigned.&lt;br/&gt;
 You clearly see that the partitions assigned to the fist consumer are also assigned to other consumers. (7, 17, 20, ...).&lt;/p&gt;

&lt;p&gt;This issue is typically triggered when consumers loose (temporarily) their connection with the broker.&#160; After restarting this consumer, everything is rebalanced correctly.&lt;/p&gt;</comment>
                            <comment id="16522967" author="vahid" created="Tue, 26 Jun 2018 00:01:44 +0000"  >&lt;p&gt;Thanks! Yes, this is a valid bug. Working on a PR and should submit one soon.&lt;/p&gt;</comment>
                            <comment id="16523060" author="githubbot" created="Tue, 26 Jun 2018 01:52:48 +0000"  >&lt;p&gt;vahidhashemian opened a new pull request #5291: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7026&quot; title=&quot;Sticky assignor could assign a partition to multiple consumers (KIP-341)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7026&quot;&gt;&lt;del&gt;KAFKA-7026&lt;/del&gt;&lt;/a&gt;: Sticky Assignor Partition Assignment Improvement&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5291&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   In the current implementation of sticky assignor the leader does not cache the most recent calculated assignment. It relies on the fact that each consumer in the group sends its subscribed topics and also its current assignment when a rebalance occurs. This could lead to the issue described in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7026&quot; title=&quot;Sticky assignor could assign a partition to multiple consumers (KIP-341)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7026&quot;&gt;&lt;del&gt;KAFKA-7026&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7026&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-7026&lt;/a&gt;), in which current assignment of a consumer is no longer valid and should be ignored. The solution implemented in this PR involves the leader caching the most recent assignment of each consumer, so the assignment reported by a consumer can be properly ignored if necessary.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16523146" author="nperiwal" created="Tue, 26 Jun 2018 03:58:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vahid&quot; class=&quot;user-hover&quot; rel=&quot;vahid&quot;&gt;vahid&lt;/a&gt;, Can this issue be there with RangeAssignor as well, because we have seen this issue occuring multiple time in our Kafka consumer (0.10.2.1) with RangeAssignor. Jira - &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6681&quot; title=&quot;Two instances of kafka consumer reading the same partition within a consumer group&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6681&quot;&gt;&lt;del&gt;KAFKA-6681&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Some observation is that there is spike in the number of UnderReplicated partition in our Kafka cluster, after which multiple consumer instances start consuming the same topic partition.&lt;/p&gt;

&lt;p&gt;Kafka broker is also at version 0.10.2.1&lt;/p&gt;</comment>
                            <comment id="16523582" author="steven.aerts" created="Tue, 26 Jun 2018 11:20:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nperiwal&quot; class=&quot;user-hover&quot; rel=&quot;nperiwal&quot;&gt;nperiwal&lt;/a&gt; looking at the code of the &lt;tt&gt;RangeAssignor&lt;/tt&gt;, I do not think this is the same issue, as this topic does not have any state.&lt;/p&gt;

&lt;p&gt;Do you have a dump of the consumer groups as I did above?&#160; So we can have an idea if it follows a similar pattern?&lt;/p&gt;</comment>
                            <comment id="16524117" author="vahid" created="Tue, 26 Jun 2018 19:00:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steven.aerts&quot; class=&quot;user-hover&quot; rel=&quot;steven.aerts&quot;&gt;steven.aerts&lt;/a&gt; is correct. The issue reported in this Jira occurs because the&#160;consumers involved keep state of their assignment and report that back to the leader when a rebalance occurs. Range Assignor is much simpler than that: every time a rebalance occurs the leader starts fresh (this is the case for Round Robin Assignor too). So &#160;a similar use case would work fine for those assignors.&lt;/p&gt;</comment>
                            <comment id="16524517" author="nperiwal" created="Wed, 27 Jun 2018 03:18:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vahid&quot; class=&quot;user-hover&quot; rel=&quot;vahid&quot;&gt;vahid&lt;/a&gt;, Agree that this may not be the actual cause of the issue. But we have seen this occuring  multiple times in our production setup, with consumers continuing to consume the same partition unless a manual restart is triggered. So, it could be due to some other issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steven.aerts&quot; class=&quot;user-hover&quot; rel=&quot;steven.aerts&quot;&gt;steven.aerts&lt;/a&gt;, we are using custom checkpointing in zookeeper, so the kafka-consumer-groups.sh script to describe the consumer group does not work for us. &lt;br/&gt;
However, we have a mechanism to detect multiple consumers when consuming from the same partition. I am sharing the distribution of one such case. Topic - test, consumer group - group1, consumers - c1,c2,c3,c4,c5.&lt;br/&gt;
Partition 3,4,5 of this topic were being consumed by multiple consumer instances.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;group: group1, topic: test, partition: 0, consumer: c2
group: group1, topic: test, partition: 1, consumer: c4
group: group1, topic: test, partition: 2, consumer: c4
group: group1, topic: test, partition: 3, consumer: c3,c4
group: group1, topic: test, partition: 4, consumer: c3,c5
group: group1, topic: test, partition: 5, consumer: c3,c5
group: group1, topic: test, partition: 6, consumer: c5
group: group1, topic: test, partition: 7, consumer: c1
group: group1, topic: test, partition: 8, consumer: c1
group: group1, topic: test, partition: 9, consumer: c1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </comment>
                            <comment id="16524538" author="vahid" created="Wed, 27 Jun 2018 03:52:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nperiwal&quot; class=&quot;user-hover&quot; rel=&quot;nperiwal&quot;&gt;nperiwal&lt;/a&gt; Is the issue you described reproducible by following certain steps?&lt;/p&gt;</comment>
                            <comment id="16524543" author="nperiwal" created="Wed, 27 Jun 2018 04:00:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vahid&quot; class=&quot;user-hover&quot; rel=&quot;vahid&quot;&gt;vahid&lt;/a&gt;, unfortunately we are not able to reproduce this in our QA setup. Only co-relation that we have seen is this seems to happen when there is spike in the number of under replicated partitions in the kafka cluster. &lt;/p&gt;

&lt;p&gt;One more thing is when this issue happens, we have seen our consumers not processing data for more than &quot;max.poll.interval.ms&quot;, thus the consumer.poll() call is not invoked for &quot;max.poll.interval.ms&quot;, which means the consumer is considered failed and the group will rebalance in order to reassign the partitions to another member. Looks like, the first consumer, after recovery(able to process now), is still getting data from the earlier assigned partition, leading to this issue.&lt;/p&gt;</comment>
                            <comment id="16530876" author="steven.aerts" created="Tue, 3 Jul 2018 06:06:07 +0000"  >&lt;p&gt;Just fyi,&lt;/p&gt;

&lt;p&gt;An extra example of a double assignment with a &lt;tt&gt;StickyAssignor&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CONSUMER-ID         HOST    CLIENT-ID  #PARTITIONS ASSIGNMENT
consumer-1-fc091420 host41  consumer-1 20          topic(2,13,34,40,49,63,85,91,146,147,151,161,162,179,194,217,257,269,330,334)
consumer-2-e48a0ca6 host144 consumer-2 19          topic(15,17,36,57,66,69,87,111,127,168,178,216,235,275,282,292,300,313,333)
consumer-2-e2db3969 host247 consumer-2 19          topic(20,33,43,50,77,82,107,126,130,135,139,173,188,209,224,242,265,291,307)
consumer-1-fc3ab033 host144 consumer-1 20          topic(6,30,31,48,59,62,100,102,103,115,140,192,199,201,213,231,245,309,321,345)
consumer-2-8e6c6445 host81  consumer-2 20          topic(0,11,32,44,64,67,71,101,119,123,132,143,183,205,244,249,267,318,341,347)
consumer-2-a2093927 host255 consumer-2 20          topic(10,16,42,74,90,106,124,153,157,220,240,256,258,259,289,305,306,328,349,358)
consumer-1-87baca65 host72  consumer-1 20          topic(28,37,38,53,56,97,113,121,128,137,145,160,189,218,268,276,277,302,343,350)
consumer-2-17a88623 host26  consumer-2 20          topic(1,18,19,41,46,61,83,95,99,110,117,133,186,193,197,214,234,255,264,348)
consumer-1-e0386920 host81  consumer-1 20          topic(22,24,79,94,122,144,169,172,177,187,198,215,228,251,285,294,295,304,310,338)
consumer-1-1833b87f host255 consumer-1 20          topic(3,8,9,29,58,73,98,105,109,142,158,190,191,202,210,273,312,319,323,335)
consumer-2-48439f14 host72  consumer-2 20          topic(14,45,80,84,89,104,114,150,185,200,207,212,239,248,254,290,296,324,325,351)
consumer-2-2dd9999f host41  consumer-2 20          topic(47,65,118,149,184,196,223,225,227,238,241,250,253,263,279,283,298,301,332,355)
consumer-1-26ba25c1 host96  consumer-1 20          topic(5,23,39,51,70,78,125,129,175,182,219,221,230,247,252,270,286,316,317,352)
consumer-2-c595b608 host96  consumer-2 20          topic(7,21,52,55,72,134,154,155,156,163,167,203,226,233,236,266,287,303,322,339)
consumer-1-ad352cbc host164 consumer-1 20          topic(27,75,81,136,195,208,232,246,271,278,280,281,314,320,327,329,336,342,344,354)
consumer-2-4a8643ef host164 consumer-2 20          topic(68,93,131,138,148,159,164,165,170,176,204,222,229,260,288,299,315,331,346,356)
consumer-1-a3f65f96 host26  consumer-1 20          topic(4,12,35,86,108,112,116,120,181,211,237,243,261,262,272,297,311,337,353,359)
consumer-1-583ae694 host247 consumer-1 20          topic(25,54,60,76,88,92,96,141,152,171,174,180,206,274,284,293,308,326,340,357)
consumer-1-230f463c host216 consumer-1 19          topic(20,26,56,78,145,171,179,195,213,223,261,271,293,298,304,321,335,352,356)
consumer-2-4842910d host216 consumer-2 19          topic(40,52,69,87,99,101,135,143,150,166,207,210,226,228,255,259,299,337,349)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The double assignment is the last assignment (I reordered the list).&lt;br/&gt;
What is interesting that here, we have two consumers in the same process.  And that the other consumer of that process did not loose its subscription.&lt;/p&gt;</comment>
                            <comment id="16636871" author="nperiwal" created="Wed, 3 Oct 2018 12:00:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steven.aerts&quot; class=&quot;user-hover&quot; rel=&quot;steven.aerts&quot;&gt;steven.aerts&lt;/a&gt;, can the issue of &quot;consumer of the process not losing it&apos;s subscription&quot; come with RangeAssignor?&lt;/p&gt;</comment>
                            <comment id="16637302" author="steven.aerts" created="Wed, 3 Oct 2018 17:58:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nperiwal&quot; class=&quot;user-hover&quot; rel=&quot;nperiwal&quot;&gt;nperiwal&lt;/a&gt; no, I do not think so, as that one is &quot;stateless&quot;, so it calculates its data without looking at the consumer user data.&lt;/p&gt;</comment>
                            <comment id="16637717" author="nperiwal" created="Thu, 4 Oct 2018 02:04:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steven.aerts&quot; class=&quot;user-hover&quot; rel=&quot;steven.aerts&quot;&gt;steven.aerts&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vahid&quot; class=&quot;user-hover&quot; rel=&quot;vahid&quot;&gt;vahid&lt;/a&gt; As I mentioned in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6681&quot; title=&quot;Two instances of kafka consumer reading the same partition within a consumer group&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6681&quot;&gt;&lt;del&gt;KAFKA-6681&lt;/del&gt;&lt;/a&gt;, we are seeing this issue with RangeAssignor. So I do not think this fix is going to solve our issue.&#160;&lt;/p&gt;

&lt;p&gt;We are using a bit old version of Kafka brokers (0.10.2.1). Don&apos;t know if upgrading will fix this.&#160;&lt;/p&gt;</comment>
                            <comment id="16639667" author="steven.aerts" created="Fri, 5 Oct 2018 11:08:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nperiwal&quot; class=&quot;user-hover&quot; rel=&quot;nperiwal&quot;&gt;nperiwal&lt;/a&gt; I propose that you create a separate ticket.&lt;/p&gt;

&lt;p&gt;As this issue is only related to the sticky assignor.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16639684" author="nperiwal" created="Fri, 5 Oct 2018 11:21:56 +0000"  >&lt;p&gt;Sure &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steven.aerts&quot; class=&quot;user-hover&quot; rel=&quot;steven.aerts&quot;&gt;steven.aerts&lt;/a&gt;. I have already created a ticket related to it -&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6681&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-6681&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16758705" author="mjsax" created="Fri, 1 Feb 2019 22:09:19 +0000"  >&lt;p&gt;Feature freeze deadline for 2.2 was yesterday. Moving this 2.3 release.&lt;/p&gt;</comment>
                            <comment id="16821228" author="githubbot" created="Thu, 18 Apr 2019 15:35:31 +0000"  >&lt;p&gt;hachikuji commented on pull request #5291: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7026&quot; title=&quot;Sticky assignor could assign a partition to multiple consumers (KIP-341)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7026&quot;&gt;&lt;del&gt;KAFKA-7026&lt;/del&gt;&lt;/a&gt;: Sticky Assignor Partition Assignment Improvement (KIP-341)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5291&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16821254" author="mkedwards" created="Thu, 18 Apr 2019 16:03:57 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vahid&quot; class=&quot;user-hover&quot; rel=&quot;vahid&quot;&gt;vahid&lt;/a&gt; and reviewers!&#160; We will be eagerly anticipating a release that contains this fix.&#160; Is it a candidate for backport to the 2.2.x maintenance branch?&lt;/p&gt;</comment>
                            <comment id="16821274" author="mkedwards" created="Thu, 18 Apr 2019 16:19:41 +0000"  >&lt;p&gt;How confident are we that analogous flaws do not exist in StreamsPartitionAssignor?&lt;/p&gt;</comment>
                            <comment id="16821391" author="mjsax" created="Thu, 18 Apr 2019 18:26:09 +0000"  >&lt;p&gt;Pretty confident.&lt;/p&gt;</comment>
                            <comment id="16821419" author="mkedwards" created="Thu, 18 Apr 2019 19:09:35 +0000"  >&lt;p&gt;Good enough for me.&#160; Thank you.&lt;/p&gt;</comment>
                            <comment id="16932965" author="redbrick9" created="Thu, 19 Sep 2019 01:19:09 +0000"  >&lt;p&gt;We are testing our application based on kafka, when we are using iptables to drop/reject packets from consumers to broker for the network issues&apos; similation. We ran into the similiar problem.&lt;/p&gt;

&lt;p&gt;A few partitions were assigned to the more than one consumers.&lt;/p&gt;

&lt;p&gt;We are using kafka 2.3.0 and StickyAssignor assignment strategy. It looks good to us to use another assignment strategy.&lt;/p&gt;

&lt;p&gt;It is easy to reproduce. Just adding rules to reject/drop packets from consumer then delete the rules. We can see the following output.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bin/kafka-consumer-groups.sh --bootstrap-server 172.93.57.21:9092 --group test-group --describe GROUP TOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-ID test-group test-topic 12 - 0 - consumer-1-f94c41a7-a64c-4f22-bfa2-86b369f22682 /172.93.57.22 consumer-1 test-group test-topic 2 - 0 - consumer-1-f94c41a7-a64c-4f22-bfa2-86b369f22682 /172.93.57.22 consumer-1 test-group test-topic 5 - 0 - consumer-1-f94c41a7-a64c-4f22-bfa2-86b369f22682 /172.93.57.22 consumer-1 test-group test-topic 15 - 0 - consumer-1-f94c41a7-a64c-4f22-bfa2-86b369f22682 /172.93.57.22 consumer-1 test-group test-topic 3 - 0 - consumer-1-f94c41a7-a64c-4f22-bfa2-86b369f22682 /172.93.57.22 consumer-1 test-group test-topic 8 - 0 - consumer-1-f94c41a7-a64c-4f22-bfa2-86b369f22682 /172.93.57.22 consumer-1 test-group test-topic 7 - 0 - consumer-1-f94c41a7-a64c-4f22-bfa2-86b369f22682 /172.93.57.22 consumer-1 test-group test-topic 5 - 0 - consumer-1-75e1a353-cd34-4e49-b88f-2e8da3117320 /172.93.57.23 consumer-1 test-group test-topic 4 - 0 - consumer-1-75e1a353-cd34-4e49-b88f-2e8da3117320 /172.93.57.23 consumer-1 test-group test-topic 11 - 0 - consumer-1-75e1a353-cd34-4e49-b88f-2e8da3117320 /172.93.57.23 consumer-1 test-group test-topic 0 - 0 - consumer-1-75e1a353-cd34-4e49-b88f-2e8da3117320 /172.93.57.23 consumer-1 test-group test-topic 3 - 0 - consumer-1-75e1a353-cd34-4e49-b88f-2e8da3117320 /172.93.57.23 consumer-1 test-group test-topic 10 - 0 - consumer-1-75e1a353-cd34-4e49-b88f-2e8da3117320 /172.93.57.23 consumer-1 test-group test-topic 6 - 0 - consumer-1-75e1a353-cd34-4e49-b88f-2e8da3117320 /172.93.57.23 consumer-1 test-group test-topic 12 - 0 - consumer-1-a5684c45-859c-4718-aa27-32fcf8f9c64b /172.93.57.21 consumer-1 test-group test-topic 2 - 0 - consumer-1-a5684c45-859c-4718-aa27-32fcf8f9c64b /172.93.57.21 consumer-1 test-group test-topic 14 - 0 - consumer-1-a5684c45-859c-4718-aa27-32fcf8f9c64b /172.93.57.21 consumer-1 test-group test-topic 1 - 0 - consumer-1-a5684c45-859c-4718-aa27-32fcf8f9c64b /172.93.57.21 consumer-1 test-group test-topic 13 - 0 - consumer-1-a5684c45-859c-4718-aa27-32fcf8f9c64b /172.93.57.21 consumer-1 test-group test-topic 7 - 0 - consumer-1-a5684c45-859c-4718-aa27-32fcf8f9c64b /172.93.57.21 consumer-1 test-group test-topic 9 - 0 - consumer-1-a5684c45-859c-4718-aa27-32fcf8f9c64b /172.93.57.21 consumer-1 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;I&apos;m not sure if this is same problem. Could you help take a look at it? Thanks.&lt;/p&gt;</comment>
                            <comment id="16936147" author="vahid" created="Mon, 23 Sep 2019 19:47:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=redbrick9&quot; class=&quot;user-hover&quot; rel=&quot;redbrick9&quot;&gt;redbrick9&lt;/a&gt;&#160;Can you please provide detailed steps to reproduce? Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13148174">KAFKA-6717</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12838149">KAFKA-2273</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uoe7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>