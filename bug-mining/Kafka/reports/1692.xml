<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:04:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5970] Deadlock due to locking of DelayedProduce and group</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5970</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;From a local run of TransactionsBounceTest. Looks like we hold group lock while completing DelayedProduce, which in turn may acquire group lock.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Found one Java-level deadlock:&lt;br/&gt;
=============================&lt;br/&gt;
&quot;kafka-request-handler-7&quot;:&lt;br/&gt;
  waiting to lock monitor 0x00007fe08891fb08 (object 0x000000074a9fbc50, a kafka.coordinator.group.GroupMetadata),&lt;br/&gt;
  which is held by &quot;kafka-request-handler-4&quot;&lt;br/&gt;
&quot;kafka-request-handler-4&quot;:&lt;br/&gt;
  waiting to lock monitor 0x00007fe0869e4408 (object 0x0000000749be7bb8, a kafka.server.DelayedProduce),&lt;br/&gt;
  which is held by &quot;kafka-request-handler-3&quot;&lt;br/&gt;
&quot;kafka-request-handler-3&quot;:&lt;br/&gt;
  waiting to lock monitor 0x00007fe08891fb08 (object 0x000000074a9fbc50, a kafka.coordinator.group.GroupMetadata),&lt;br/&gt;
  which is held by &quot;kafka-request-handler-4&quot;&lt;/p&gt;

&lt;p&gt;Java stack information for the threads listed above:&lt;br/&gt;
===================================================&lt;br/&gt;
&quot;kafka-request-handler-7&quot;:&lt;br/&gt;
        at kafka.coordinator.group.GroupMetadataManager$$anonfun$handleTxnCompletion$1.apply(GroupMetadataManager.scala:752)&lt;br/&gt;
          waiting to lock &amp;lt;0x000000074a9fbc50&amp;gt; (a kafka.coordinator.group.GroupMetadata)&lt;br/&gt;
        at kafka.coordinator.group.GroupMetadataManager$$anonfun$handleTxnCompletion$1.apply(GroupMetadataManager.scala:750)&lt;br/&gt;
        at scala.collection.mutable.HashSet.foreach(HashSet.scala:78)&lt;br/&gt;
        at kafka.coordinator.group.GroupMetadataManager.handleTxnCompletion(GroupMetadataManager.scala:750)&lt;br/&gt;
        at kafka.coordinator.group.GroupCoordinator.handleTxnCompletion(GroupCoordinator.scala:439)&lt;br/&gt;
        at kafka.server.KafkaApis.kafka$server$KafkaApis$$maybeSendResponseCallback$1(KafkaApis.scala:1556)&lt;br/&gt;
        at kafka.server.KafkaApis$$anonfun$handleWriteTxnMarkersRequest$1$$anonfun$apply$20.apply(KafkaApis.scala:1614)&lt;br/&gt;
        at kafka.server.KafkaApis$$anonfun$handleWriteTxnMarkersRequest$1$$anonfun$apply$20.apply(KafkaApis.scala:1614)&lt;br/&gt;
        at kafka.server.DelayedProduce.onComplete(DelayedProduce.scala:134)&lt;br/&gt;
        at kafka.server.DelayedOperation.forceComplete(DelayedOperation.scala:66)&lt;br/&gt;
        at kafka.server.DelayedProduce.tryComplete(DelayedProduce.scala:116)&lt;br/&gt;
        at kafka.server.DelayedProduce.safeTryComplete(DelayedProduce.scala:76)&lt;br/&gt;
          locked &amp;lt;0x000000074b21c968&amp;gt; (a kafka.server.DelayedProduce)&lt;br/&gt;
        at kafka.server.DelayedOperationPurgatory$Watchers.tryCompleteWatched(DelayedOperation.scala:338)&lt;br/&gt;
        at kafka.server.DelayedOperationPurgatory.checkAndComplete(DelayedOperation.scala:244)&lt;br/&gt;
        at kafka.server.ReplicaManager.tryCompleteDelayedProduce(ReplicaManager.scala:284)&lt;br/&gt;
        at kafka.cluster.Partition.tryCompleteDelayedRequests(Partition.scala:434)&lt;br/&gt;
        at kafka.cluster.Partition.updateReplicaLogReadResult(Partition.scala:285)&lt;br/&gt;
        at kafka.server.ReplicaManager$$anonfun$updateFollowerLogReadResults$2.apply(ReplicaManager.scala:1290)&lt;br/&gt;
        at kafka.server.ReplicaManager$$anonfun$updateFollowerLogReadResults$2.apply(ReplicaManager.scala:1286)&lt;br/&gt;
        at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)&lt;br/&gt;
        at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)&lt;br/&gt;
        at kafka.server.ReplicaManager.updateFollowerLogReadResults(ReplicaManager.scala:1286)&lt;br/&gt;
        at kafka.server.ReplicaManager.fetchMessages(ReplicaManager.scala:786)&lt;br/&gt;
        at kafka.server.KafkaApis.handleFetchRequest(KafkaApis.scala:598)&lt;br/&gt;
        at kafka.server.KafkaApis.handle(KafkaApis.scala:100)&lt;br/&gt;
        at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:65)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:748)&lt;br/&gt;
&quot;kafka-request-handler-4&quot;:&lt;br/&gt;
        at kafka.server.DelayedProduce.safeTryComplete(DelayedProduce.scala:75)&lt;br/&gt;
          waiting to lock &amp;lt;0x0000000749be7bb8&amp;gt; (a kafka.server.DelayedProduce)&lt;br/&gt;
        at kafka.server.DelayedOperationPurgatory$Watchers.tryCompleteWatched(DelayedOperation.scala:338)&lt;br/&gt;
        at kafka.server.DelayedOperationPurgatory.checkAndComplete(DelayedOperation.scala:244)&lt;br/&gt;
        at kafka.server.ReplicaManager.tryCompleteDelayedProduce(ReplicaManager.scala:284)&lt;br/&gt;
        at kafka.cluster.Partition.tryCompleteDelayedRequests(Partition.scala:434)&lt;br/&gt;
        at kafka.cluster.Partition.appendRecordsToLeader(Partition.scala:516)&lt;br/&gt;
        at kafka.server.ReplicaManager$$anonfun$appendToLocalLog$2.apply(ReplicaManager.scala:707)&lt;br/&gt;
        at kafka.server.ReplicaManager$$anonfun$appendToLocalLog$2.apply(ReplicaManager.scala:691)&lt;br/&gt;
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)&lt;br/&gt;
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)&lt;br/&gt;
        at scala.collection.immutable.Map$Map1.foreach(Map.scala:116)&lt;br/&gt;
        at scala.collection.TraversableLike$class.map(TraversableLike.scala:234)&lt;br/&gt;
        at scala.collection.AbstractTraversable.map(Traversable.scala:104)&lt;br/&gt;
        at kafka.server.ReplicaManager.appendToLocalLog(ReplicaManager.scala:691)&lt;br/&gt;
        at kafka.server.ReplicaManager.appendRecords(ReplicaManager.scala:441)&lt;br/&gt;
        at kafka.coordinator.group.GroupMetadataManager.appendForGroup(GroupMetadataManager.scala:240)&lt;br/&gt;
        at kafka.coordinator.group.GroupMetadataManager.storeGroup(GroupMetadataManager.scala:228)&lt;br/&gt;
        at kafka.coordinator.group.GroupCoordinator.onCompleteJoin(GroupCoordinator.scala:731)&lt;br/&gt;
          locked &amp;lt;0x000000074a9fbc50&amp;gt; (a kafka.coordinator.group.GroupMetadata)&lt;br/&gt;
        at kafka.coordinator.group.DelayedJoin.onComplete(DelayedJoin.scala:44)&lt;br/&gt;
        at kafka.server.DelayedOperation.forceComplete(DelayedOperation.scala:66)&lt;br/&gt;
        at kafka.coordinator.group.DelayedJoin$$anonfun$tryComplete$1.apply$mcZ$sp(DelayedJoin.scala:42)&lt;br/&gt;
        at kafka.coordinator.group.GroupCoordinator.tryCompleteJoin(GroupCoordinator.scala:708)&lt;br/&gt;
          locked &amp;lt;0x000000074a9fbc50&amp;gt; (a kafka.coordinator.group.GroupMetadata)&lt;br/&gt;
        at kafka.coordinator.group.DelayedJoin.tryComplete(DelayedJoin.scala:42)&lt;br/&gt;
        at kafka.coordinator.group.DelayedJoin.safeTryComplete(DelayedJoin.scala:40)&lt;br/&gt;
        at kafka.server.DelayedOperationPurgatory.tryCompleteElseWatch(DelayedOperation.scala:199)&lt;br/&gt;
        at kafka.coordinator.group.GroupCoordinator.prepareRebalance(GroupCoordinator.scala:693)&lt;br/&gt;
        at kafka.coordinator.group.GroupCoordinator.kafka$coordinator$group$GroupCoordinator$$maybePrepareRebalance(GroupCoordinator.scala:668)&lt;br/&gt;
          locked &amp;lt;0x000000074a9fbc50&amp;gt; (a kafka.coordinator.group.GroupMetadata)&lt;br/&gt;
        at kafka.coordinator.group.GroupCoordinator.removeMemberAndUpdateGroup(GroupCoordinator.scala:700)&lt;br/&gt;
        at kafka.coordinator.group.GroupCoordinator.handleLeaveGroup(GroupCoordinator.scala:324)&lt;br/&gt;
          locked &amp;lt;0x000000074a9fbc50&amp;gt; (a kafka.coordinator.group.GroupMetadata)&lt;br/&gt;
        at kafka.server.KafkaApis.handleLeaveGroupRequest(KafkaApis.scala:1259)&lt;br/&gt;
        at kafka.server.KafkaApis.handle(KafkaApis.scala:112)&lt;br/&gt;
        at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:65)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:748)&lt;br/&gt;
&quot;kafka-request-handler-3&quot;:&lt;br/&gt;
        at kafka.coordinator.group.GroupMetadataManager$$anonfun$handleTxnCompletion$1.apply(GroupMetadataManager.scala:752)&lt;br/&gt;
          waiting to lock &amp;lt;0x000000074a9fbc50&amp;gt; (a kafka.coordinator.group.GroupMetadata)&lt;br/&gt;
        at kafka.coordinator.group.GroupMetadataManager$$anonfun$handleTxnCompletion$1.apply(GroupMetadataManager.scala:750)&lt;br/&gt;
        at scala.collection.mutable.HashSet.foreach(HashSet.scala:78)&lt;br/&gt;
        at kafka.coordinator.group.GroupMetadataManager.handleTxnCompletion(GroupMetadataManager.scala:750)&lt;br/&gt;
        at kafka.coordinator.group.GroupCoordinator.handleTxnCompletion(GroupCoordinator.scala:439)&lt;br/&gt;
        at kafka.server.KafkaApis.kafka$server$KafkaApis$$maybeSendResponseCallback$1(KafkaApis.scala:1556)&lt;br/&gt;
        at kafka.server.KafkaApis$$anonfun$handleWriteTxnMarkersRequest$1$$anonfun$apply$20.apply(KafkaApis.scala:1614)&lt;br/&gt;
        at kafka.server.KafkaApis$$anonfun$handleWriteTxnMarkersRequest$1$$anonfun$apply$20.apply(KafkaApis.scala:1614)&lt;br/&gt;
        at kafka.server.DelayedProduce.onComplete(DelayedProduce.scala:134)&lt;br/&gt;
        at kafka.server.DelayedOperation.forceComplete(DelayedOperation.scala:66)&lt;br/&gt;
        at kafka.server.DelayedProduce.tryComplete(DelayedProduce.scala:116)&lt;br/&gt;
        at kafka.server.DelayedProduce.safeTryComplete(DelayedProduce.scala:76)&lt;br/&gt;
          locked &amp;lt;0x0000000749be7bb8&amp;gt; (a kafka.server.DelayedProduce)&lt;br/&gt;
        at kafka.server.DelayedOperationPurgatory$Watchers.tryCompleteWatched(DelayedOperation.scala:338)&lt;br/&gt;
        at kafka.server.DelayedOperationPurgatory.checkAndComplete(DelayedOperation.scala:244)&lt;br/&gt;
        at kafka.server.ReplicaManager.tryCompleteDelayedProduce(ReplicaManager.scala:284)&lt;br/&gt;
        at kafka.server.ReplicaManager$$anonfun$updateFollowerLogReadResults$2.apply(ReplicaManager.scala:1294)&lt;br/&gt;
        at kafka.server.ReplicaManager$$anonfun$updateFollowerLogReadResults$2.apply(ReplicaManager.scala:1286)&lt;br/&gt;
        at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)&lt;br/&gt;
        at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)&lt;br/&gt;
        at kafka.server.ReplicaManager.updateFollowerLogReadResults(ReplicaManager.scala:1286)&lt;br/&gt;
        at kafka.server.ReplicaManager.fetchMessages(ReplicaManager.scala:786)&lt;br/&gt;
        at kafka.server.KafkaApis.handleFetchRequest(KafkaApis.scala:598)&lt;br/&gt;
        at kafka.server.KafkaApis.handle(KafkaApis.scala:100)&lt;br/&gt;
        at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:65)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:748)&lt;/p&gt;

&lt;p&gt;Found 1 deadlock.&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13104726">KAFKA-5970</key>
            <summary>Deadlock due to locking of DelayedProduce and group</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsivaram">Rajini Sivaram</assignee>
                                    <reporter username="rsivaram">Rajini Sivaram</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Sep 2017 10:40:07 +0000</created>
                <updated>Fri, 20 Oct 2017 10:22:12 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 10:22:12 +0000</resolved>
                                                    <fixVersion>0.11.0.2</fixVersion>
                    <fixVersion>1.0.0</fixVersion>
                                    <component>clients</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="16178888" author="githubbot" created="Mon, 25 Sep 2017 11:49:32 +0000"  >&lt;p&gt;GitHub user rajinisivaram opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3956&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3956&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5970&quot; title=&quot;Deadlock due to locking of DelayedProduce and group&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5970&quot;&gt;&lt;del&gt;KAFKA-5970&lt;/del&gt;&lt;/a&gt;: Avoid locking group in operations that lock DelayedProduce&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rajinisivaram/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rajinisivaram/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5970&quot; title=&quot;Deadlock due to locking of DelayedProduce and group&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5970&quot;&gt;&lt;del&gt;KAFKA-5970&lt;/del&gt;&lt;/a&gt;-delayedproduce-deadlock&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3956.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3956.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3956&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 27238fe16a31bad09cc82785a7bb62d347f2c7ac&lt;br/&gt;
Author: Rajini Sivaram &amp;lt;rajinisivaram@googlemail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-25T11:40:28Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5970&quot; title=&quot;Deadlock due to locking of DelayedProduce and group&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5970&quot;&gt;&lt;del&gt;KAFKA-5970&lt;/del&gt;&lt;/a&gt;: Avoid locking group in operations that lock DelayedProduce&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16179141" author="davispw" created="Mon, 25 Sep 2017 14:58:06 +0000"  >&lt;p&gt;It looks like we are seeing this repeatedly in a production cluster after upgrading to Confluent Platform 3.3.0.&lt;/p&gt;

&lt;p&gt;After the deadlock, the affected broker appears to drop all connections, including replication to other brokers.  Result is the deadlocked broker becomes the only member of ISR for partitions it was leading, and due to unclean.leader.election.enabled=false and min.insync.replicas=2, the partitions become unavailable and won&apos;t recover without restarting the deadlocked broker.  So this is quite serious.&lt;/p&gt;

&lt;p&gt;Any hints of what unusual condition might be causing this for us or a workaround?&lt;/p&gt;</comment>
                            <comment id="16179150" author="ijuma" created="Mon, 25 Sep 2017 15:05:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davispw&quot; class=&quot;user-hover&quot; rel=&quot;davispw&quot;&gt;davispw&lt;/a&gt;, are you using transactions? The deadlock in this JIRA seems to be related to the handling of transactions.&lt;/p&gt;</comment>
                            <comment id="16179154" author="davispw" created="Mon, 25 Sep 2017 15:09:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt;  No, not using transactions.  Attached stack dump.  (Also have a heap dump and output of `netstat` but cannot post due to potentially sensitive contents.)  Different deadlock?&lt;/p&gt;</comment>
                            <comment id="16179159" author="davispw" created="Mon, 25 Sep 2017 15:16:25 +0000"  >&lt;p&gt;I ended up here because of commonality of deadlock in GroupCoordinator and DelayedProduce, and version 0.11.0.0 (CP 3.3.0).&lt;/p&gt;

&lt;p&gt;Other possibly-similar JIRAs found after a quick search all reportedly resolved: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4478&quot; title=&quot;Deadlock between heartbeat executor, group metadata manager and request handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4478&quot;&gt;&lt;del&gt;KAFKA-4478&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3994&quot; title=&quot;Deadlock between consumer heartbeat expiration and offset commit.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3994&quot;&gt;&lt;del&gt;KAFKA-3994&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2821&quot; title=&quot;Deadlock in group metadata persistence callback&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2821&quot;&gt;&lt;del&gt;KAFKA-2821&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4562&quot; title=&quot;deadlock heartbeat, metadata-manager, request-handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4562&quot;&gt;&lt;del&gt;KAFKA-4562&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16179160" author="rsivaram" created="Mon, 25 Sep 2017 15:17:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davispw&quot; class=&quot;user-hover&quot; rel=&quot;davispw&quot;&gt;davispw&lt;/a&gt;, I think it is the same issue in a slightly different codepath, which should be fixed by the proposed solution from the PR here.&lt;/p&gt;</comment>
                            <comment id="16179184" author="davispw" created="Mon, 25 Sep 2017 15:37:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rsivaram&quot; class=&quot;user-hover&quot; rel=&quot;rsivaram&quot;&gt;rsivaram&lt;/a&gt; Thanks for looking into this so quickly.  We agree, looks like the same codepath.&lt;/p&gt;

&lt;p&gt;Theorizing about our problem and whether this is a smoking gun, it&apos;s possible this deadlock is an effect, not a cause, of our issue.  As I mentioned we&apos;re seeing a broker repeatedly end up as the only member of ISR for partitions it is leading, which includes some __consumer_offsets partitions.  If replication to __consumer_offsets failed first, then the GroupCoordinator&apos;s producer would get hung trying to publish committed offsets and we might see this.  On the other hand, a deadlocked GroupCoordinator which hangs up request processing threads could have all kinds of cascading effects, right?  Sigh...&lt;/p&gt;

&lt;p&gt;We are just spinning here trying to theorize how this is biting us so badly.  If the GroupCoordinator can deadlock on merely committing offsets, this&apos;d be extremely serious and affect a whole lot more people, right?&lt;/p&gt;</comment>
                            <comment id="16179271" author="rsivaram" created="Mon, 25 Sep 2017 16:28:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davispw&quot; class=&quot;user-hover&quot; rel=&quot;davispw&quot;&gt;davispw&lt;/a&gt; I am surprised this was not reported earlier. We hold a group lock in several places where a purgatory operation may complete and attempt to acquire a potentially different group lock. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt; may know why this doesn&apos;t deadlock more often.&lt;/p&gt;</comment>
                            <comment id="16179293" author="davispw" created="Mon, 25 Sep 2017 16:44:52 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rsivaram&quot; class=&quot;user-hover&quot; rel=&quot;rsivaram&quot;&gt;rsivaram&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hachikuji&quot; class=&quot;user-hover&quot; rel=&quot;hachikuji&quot;&gt;hachikuji&lt;/a&gt; for looking at this.  Even a theory why this &lt;b&gt;doesn&apos;t&lt;/b&gt; bite people more often would be helpful, as it might give us a clue how to work around this.   As I said, it is quite seriously hurting us at the moment.&lt;/p&gt;</comment>
                            <comment id="16182779" author="scottreynolds" created="Wed, 27 Sep 2017 15:58:43 +0000"  >&lt;p&gt;Ran into a very similar deadlock&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Found one Java-level deadlock:
=============================
&lt;span class=&quot;code-quote&quot;&gt;&quot;executor-Heartbeat&quot;&lt;/span&gt;:
  waiting to lock monitor 0x00007f8c9c297a98 (object 0x000000042f7c55a0, a kafka.coordinator.group.GroupMetadata),
  which is held by &lt;span class=&quot;code-quote&quot;&gt;&quot;kafka-request-handler-5&quot;&lt;/span&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;kafka-request-handler-5&quot;&lt;/span&gt;:
  waiting to lock monitor 0x00007f8d10125ba8 (object 0x000000042f7b64e8, a kafka.coordinator.group.GroupMetadata),
  which is held by &lt;span class=&quot;code-quote&quot;&gt;&quot;kafka-request-handler-1&quot;&lt;/span&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;kafka-request-handler-1&quot;&lt;/span&gt;:
  waiting to lock monitor 0x00007f8c9c297a98 (object 0x000000042f7c55a0, a kafka.coordinator.group.GroupMetadata),
  which is held by &lt;span class=&quot;code-quote&quot;&gt;&quot;kafka-request-handler-5&quot;&lt;/span&gt;

Java stack information &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the threads listed above:
===================================================
&lt;span class=&quot;code-quote&quot;&gt;&quot;executor-Heartbeat&quot;&lt;/span&gt;:
	at kafka.coordinator.group.GroupCoordinator.onExpireHeartbeat(GroupCoordinator.scala:777)
	- waiting to lock &amp;lt;0x000000042f7c55a0&amp;gt; (a kafka.coordinator.group.GroupMetadata)
	at kafka.coordinator.group.DelayedHeartbeat.onExpiration(DelayedHeartbeat.scala:38)
	at kafka.server.DelayedOperation.run(DelayedOperation.scala:113)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;span class=&quot;code-quote&quot;&gt;&quot;kafka-request-handler-5&quot;&lt;/span&gt;:
	at kafka.server.DelayedProduce.safeTryComplete(DelayedProduce.scala:75)
	- waiting to lock &amp;lt;0x000000042f7b64e8&amp;gt; (a kafka.coordinator.group.GroupMetadata)
	at kafka.server.DelayedOperationPurgatory$Watchers.tryCompleteWatched(DelayedOperation.scala:338)
	at kafka.server.DelayedOperationPurgatory.checkAndComplete(DelayedOperation.scala:244)
	at kafka.server.ReplicaManager.tryCompleteDelayedProduce(ReplicaManager.scala:250)
	at kafka.cluster.Partition.tryCompleteDelayedRequests(Partition.scala:418)
	at kafka.cluster.Partition.appendRecordsToLeader(Partition.scala:500)
	at kafka.server.ReplicaManager$$anonfun$appendToLocalLog$2.apply(ReplicaManager.scala:546)
	at kafka.server.ReplicaManager$$anonfun$appendToLocalLog$2.apply(ReplicaManager.scala:532)
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)
	at scala.collection.immutable.Map$Map1.foreach(Map.scala:116)
	at scala.collection.TraversableLike$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;map(TraversableLike.scala:234)
	at scala.collection.AbstractTraversable.map(Traversable.scala:104)
	at kafka.server.ReplicaManager.appendToLocalLog(ReplicaManager.scala:532)
	at kafka.server.ReplicaManager.appendRecords(ReplicaManager.scala:373)
	at kafka.coordinator.group.GroupMetadataManager.appendForGroup(GroupMetadataManager.scala:239)
	at kafka.coordinator.group.GroupMetadataManager.storeOffsets(GroupMetadataManager.scala:381)
	at kafka.coordinator.group.GroupCoordinator.doCommitOffsets(GroupCoordinator.scala:465)
	- locked &amp;lt;0x000000042f7c55a0&amp;gt; (a kafka.coordinator.group.GroupMetadata)
	at kafka.coordinator.group.GroupCoordinator.handleCommitOffsets(GroupCoordinator.scala:428)
	at kafka.server.KafkaApis.handleOffsetCommitRequest(KafkaApis.scala:356)
	at kafka.server.KafkaApis.handle(KafkaApis.scala:105)
	at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:66)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;span class=&quot;code-quote&quot;&gt;&quot;kafka-request-handler-1&quot;&lt;/span&gt;:
	at kafka.server.DelayedProduce.safeTryComplete(DelayedProduce.scala:75)
	- waiting to lock &amp;lt;0x000000042f7c55a0&amp;gt; (a kafka.coordinator.group.GroupMetadata)
	at kafka.server.DelayedOperationPurgatory$Watchers.tryCompleteWatched(DelayedOperation.scala:338)
	at kafka.server.DelayedOperationPurgatory.checkAndComplete(DelayedOperation.scala:244)
	at kafka.server.ReplicaManager.tryCompleteDelayedProduce(ReplicaManager.scala:250)
	at kafka.cluster.Partition.tryCompleteDelayedRequests(Partition.scala:418)
	at kafka.cluster.Partition.appendRecordsToLeader(Partition.scala:500)
	at kafka.server.ReplicaManager$$anonfun$appendToLocalLog$2.apply(ReplicaManager.scala:546)
	at kafka.server.ReplicaManager$$anonfun$appendToLocalLog$2.apply(ReplicaManager.scala:532)
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)
	at scala.collection.immutable.Map$Map1.foreach(Map.scala:116)
	at scala.collection.TraversableLike$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;map(TraversableLike.scala:234)
	at scala.collection.AbstractTraversable.map(Traversable.scala:104)
	at kafka.server.ReplicaManager.appendToLocalLog(ReplicaManager.scala:532)
	at kafka.server.ReplicaManager.appendRecords(ReplicaManager.scala:373)
	at kafka.coordinator.group.GroupMetadataManager.appendForGroup(GroupMetadataManager.scala:239)
	at kafka.coordinator.group.GroupMetadataManager.storeOffsets(GroupMetadataManager.scala:381)
	at kafka.coordinator.group.GroupCoordinator.doCommitOffsets(GroupCoordinator.scala:465)
	- locked &amp;lt;0x000000042f7b64e8&amp;gt; (a kafka.coordinator.group.GroupMetadata)
	at kafka.coordinator.group.GroupCoordinator.handleCommitOffsets(GroupCoordinator.scala:428)
	at kafka.server.KafkaApis.handleOffsetCommitRequest(KafkaApis.scala:356)
	at kafka.server.KafkaApis.handle(KafkaApis.scala:105)
	at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:66)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)

Found 1 deadlock.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I believe the change that introduced this regression is this:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/3133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3133&lt;/a&gt;&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;With Guozhang&apos;s change in ReplicaManager, it seems we no longer need the delayed store that we were using before to avoid holding the group lock when calling ReplicaManager.append.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Which I think addresses &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rsivaram&quot; class=&quot;user-hover&quot; rel=&quot;rsivaram&quot;&gt;rsivaram&lt;/a&gt; question&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I am struggling to understand why a deadlock (without transactions) was not observed before - I don&apos;t mean in tests where it is rather unlikely, but by users.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16183129" author="davispw" created="Wed, 27 Sep 2017 19:34:02 +0000"  >&lt;p&gt;In our case, turns out there&apos;s a very chatty consumer calling commitAsync() after each message, about 30/s across about 8 consumer threads.  (Found by heap dump of the deadlocked JVM -&amp;gt; inspect the GroupMetadata object.)  Been running this way since 0.9.0.  Less commits -&amp;gt; less likely but still possible.&lt;/p&gt;

&lt;p&gt;If I read this right, this is a ticking time bomb for anyone running 0.11 in production, transactions or no.  Can a fix go in 0.11.0.2?&lt;/p&gt;</comment>
                            <comment id="16191797" author="githubbot" created="Wed, 4 Oct 2017 18:37:24 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/3956&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3956&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16191864" author="hachikuji" created="Wed, 4 Oct 2017 19:17:33 +0000"  >&lt;p&gt;Issue resolved by pull request 3956&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/3956&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/3956&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16196844" author="ijuma" created="Mon, 9 Oct 2017 11:46:29 +0000"  >&lt;p&gt;Can anyone test the latest code from the 0.11.0 branch to verify that it no longer happens for them?&lt;/p&gt;</comment>
                            <comment id="16206542" author="kpocius" created="Mon, 16 Oct 2017 20:21:15 +0000"  >&lt;p&gt;We&apos;ve applied the patch on CP 3.3.0 as the issue started to hit us every few hours. Haven&apos;t recurred in the last 24 hours and hopefully that&apos;s the last we saw it.&lt;/p&gt;</comment>
                            <comment id="16206741" author="guozhang" created="Mon, 16 Oct 2017 23:04:01 +0000"  >&lt;p&gt;Glad to hear that, thanks Karolis!&lt;/p&gt;</comment>
                            <comment id="16212383" author="corlettb" created="Fri, 20 Oct 2017 08:56:46 +0000"  >&lt;p&gt;Unfortunately we&apos;ve had another incident today on broker 125 after applying the changes from pull request 3956. You can see the changes here &lt;a href=&quot;https://github.com/corlettb/kafka/commits/deadlock&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/corlettb/kafka/commits/deadlock&lt;/a&gt;. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Found one Java-level deadlock:
=============================
&quot;executor-Heartbeat&quot;:
  waiting to lock monitor 0x00007fbd8c1834c8 (object 0x000000068cccb590, a kafka.coordinator.group.GroupMetadata),
  which is held by &quot;kafka-request-handler-7&quot;
&quot;kafka-request-handler-7&quot;:
  waiting to lock monitor 0x00007fbe1942f698 (object 0x000000068cd2c420, a kafka.coordinator.group.GroupMetadata),
  which is held by &quot;kafka-request-handler-4&quot;
&quot;kafka-request-handler-4&quot;:
  waiting to lock monitor 0x00007fbd8c1834c8 (object 0x000000068cccb590, a kafka.coordinator.group.GroupMetadata),
  which is held by &quot;kafka-request-handler-7&quot;

Java stack information for the threads listed above:
===================================================
&quot;executor-Heartbeat&quot;:
	at kafka.coordinator.group.GroupCoordinator.onExpireHeartbeat(GroupCoordinator.scala:776)
	- waiting to lock &amp;lt;0x000000068cccb590&amp;gt; (a kafka.coordinator.group.GroupMetadata)
	at kafka.coordinator.group.DelayedHeartbeat.onExpiration(DelayedHeartbeat.scala:34)
	at kafka.server.DelayedOperation.run(DelayedOperation.scala:120)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:748)
&quot;kafka-request-handler-7&quot;:
	at kafka.coordinator.group.GroupMetadataManager.putCacheCallback$2(GroupMetadataManager.scala:311)
	- waiting to lock &amp;lt;0x000000068cd2c420&amp;gt; (a kafka.coordinator.group.GroupMetadata)
	at kafka.coordinator.group.GroupMetadataManager.$anonfun$storeOffsets$10(GroupMetadataManager.scala:380)
	at kafka.coordinator.group.GroupMetadataManager.$anonfun$storeOffsets$10$adapted(GroupMetadataManager.scala:380)
	at kafka.coordinator.group.GroupMetadataManager$$Lambda$1045/747223912.apply(Unknown Source)
	at kafka.server.DelayedProduce.onComplete(DelayedProduce.scala:124)
	at kafka.server.DelayedOperation.forceComplete(DelayedOperation.scala:68)
	at kafka.server.DelayedProduce.tryComplete(DelayedProduce.scala:106)
	at kafka.server.DelayedOperation.maybeTryComplete(DelayedOperation.scala:107)
	at kafka.server.DelayedOperationPurgatory$Watchers.tryCompleteWatched(DelayedOperation.scala:347)
	at kafka.server.DelayedOperationPurgatory.checkAndComplete(DelayedOperation.scala:253)
	at kafka.server.ReplicaManager.tryCompleteDelayedProduce(ReplicaManager.scala:250)
	at kafka.cluster.Partition.tryCompleteDelayedRequests(Partition.scala:418)
	at kafka.cluster.Partition.appendRecordsToLeader(Partition.scala:500)
	at kafka.server.ReplicaManager.$anonfun$appendToLocalLog$2(ReplicaManager.scala:545)
	at kafka.server.ReplicaManager$$Lambda$909/475609331.apply(Unknown Source)
	at scala.collection.TraversableLike.$anonfun$map$1(TraversableLike.scala:234)
	at scala.collection.TraversableLike$$Lambda$14/1859039536.apply(Unknown Source)
	at scala.collection.immutable.Map$Map1.foreach(Map.scala:120)
	at scala.collection.TraversableLike.map(TraversableLike.scala:234)
	at scala.collection.TraversableLike.map$(TraversableLike.scala:227)
	at scala.collection.AbstractTraversable.map(Traversable.scala:104)
	at kafka.server.ReplicaManager.appendToLocalLog(ReplicaManager.scala:531)
	at kafka.server.ReplicaManager.appendRecords(ReplicaManager.scala:373)
	at kafka.coordinator.group.GroupMetadataManager.appendForGroup(GroupMetadataManager.scala:245)
	at kafka.coordinator.group.GroupMetadataManager.storeOffsets(GroupMetadataManager.scala:380)
	at kafka.coordinator.group.GroupCoordinator.doCommitOffsets(GroupCoordinator.scala:465)
	- locked &amp;lt;0x000000068cccb590&amp;gt; (a kafka.coordinator.group.GroupMetadata)
	at kafka.coordinator.group.GroupCoordinator.handleCommitOffsets(GroupCoordinator.scala:429)
	at kafka.server.KafkaApis.handleOffsetCommitRequest(KafkaApis.scala:361)
	at kafka.server.KafkaApis.handle(KafkaApis.scala:105)
	at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:66)
	at java.lang.Thread.run(Thread.java:748)
&quot;kafka-request-handler-4&quot;:
	at kafka.coordinator.group.GroupMetadataManager.putCacheCallback$2(GroupMetadataManager.scala:311)
	- waiting to lock &amp;lt;0x000000068cccb590&amp;gt; (a kafka.coordinator.group.GroupMetadata)
	at kafka.coordinator.group.GroupMetadataManager.$anonfun$storeOffsets$10(GroupMetadataManager.scala:380)
	at kafka.coordinator.group.GroupMetadataManager.$anonfun$storeOffsets$10$adapted(GroupMetadataManager.scala:380)
	at kafka.coordinator.group.GroupMetadataManager$$Lambda$1045/747223912.apply(Unknown Source)
	at kafka.server.DelayedProduce.onComplete(DelayedProduce.scala:124)
	at kafka.server.DelayedOperation.forceComplete(DelayedOperation.scala:68)
	at kafka.server.DelayedProduce.tryComplete(DelayedProduce.scala:106)
	at kafka.server.DelayedOperation.maybeTryComplete(DelayedOperation.scala:107)
	at kafka.server.DelayedOperationPurgatory$Watchers.tryCompleteWatched(DelayedOperation.scala:347)
	at kafka.server.DelayedOperationPurgatory.checkAndComplete(DelayedOperation.scala:253)
	at kafka.server.ReplicaManager.tryCompleteDelayedProduce(ReplicaManager.scala:250)
	at kafka.cluster.Partition.tryCompleteDelayedRequests(Partition.scala:418)
	at kafka.cluster.Partition.appendRecordsToLeader(Partition.scala:500)
	at kafka.server.ReplicaManager.$anonfun$appendToLocalLog$2(ReplicaManager.scala:545)
	at kafka.server.ReplicaManager$$Lambda$909/475609331.apply(Unknown Source)
	at scala.collection.TraversableLike.$anonfun$map$1(TraversableLike.scala:234)
	at scala.collection.TraversableLike$$Lambda$14/1859039536.apply(Unknown Source)
	at scala.collection.immutable.Map$Map1.foreach(Map.scala:120)
	at scala.collection.TraversableLike.map(TraversableLike.scala:234)
	at scala.collection.TraversableLike.map$(TraversableLike.scala:227)
	at scala.collection.AbstractTraversable.map(Traversable.scala:104)
	at kafka.server.ReplicaManager.appendToLocalLog(ReplicaManager.scala:531)
	at kafka.server.ReplicaManager.appendRecords(ReplicaManager.scala:373)
	at kafka.coordinator.group.GroupMetadataManager.appendForGroup(GroupMetadataManager.scala:245)
	at kafka.coordinator.group.GroupMetadataManager.storeOffsets(GroupMetadataManager.scala:380)
	at kafka.coordinator.group.GroupCoordinator.doCommitOffsets(GroupCoordinator.scala:465)
	- locked &amp;lt;0x000000068cd2c420&amp;gt; (a kafka.coordinator.group.GroupMetadata)
	at kafka.coordinator.group.GroupCoordinator.handleCommitOffsets(GroupCoordinator.scala:429)
	at kafka.server.KafkaApis.handleOffsetCommitRequest(KafkaApis.scala:361)
	at kafka.server.KafkaApis.handle(KafkaApis.scala:105)
	at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:66)
	at java.lang.Thread.run(Thread.java:748)

Found 1 deadlock.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16212448" author="rsivaram" created="Fri, 20 Oct 2017 09:57:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=corlettb&quot; class=&quot;user-hover&quot; rel=&quot;corlettb&quot;&gt;corlettb&lt;/a&gt; Thank you for reporting this. Looks like there is another potential deadlock as well that needs to be fixed.&lt;/p&gt;</comment>
                            <comment id="16212453" author="ijuma" created="Fri, 20 Oct 2017 10:01:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rsivaram&quot; class=&quot;user-hover&quot; rel=&quot;rsivaram&quot;&gt;rsivaram&lt;/a&gt;, if it&apos;s a separate deadlock, maybe you can track it via &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6042&quot; title=&quot;Kafka Request Handler deadlocks and brings down the cluster.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6042&quot;&gt;&lt;del&gt;KAFKA-6042&lt;/del&gt;&lt;/a&gt; since we did fix one as part of this JIRA.&lt;/p&gt;</comment>
                            <comment id="16212468" author="rsivaram" created="Fri, 20 Oct 2017 10:22:12 +0000"  >&lt;p&gt;The new deadlock will be fixed under &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6042&quot; title=&quot;Kafka Request Handler deadlocks and brings down the cluster.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6042&quot;&gt;&lt;del&gt;KAFKA-6042&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12888890" name="jstack.txt" size="115824" author="davispw" created="Mon, 25 Sep 2017 15:08:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3khnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>