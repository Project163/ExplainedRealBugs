<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:06:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5890] records.lag should use tags for topic and partition rather than using metric name.</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5890</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;As part of KIP-92&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; a per partition lag metric was added.&lt;/p&gt;

&lt;p&gt;These metrics are really useful, however in the implementation  it was implemented as a prefix to the metric name: &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/consumer/internals/Fetcher.java#L1321-L1344&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/consumer/internals/Fetcher.java#L1321-L1344&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Usually these kind of metrics use tags and the name is constant for all topics, partitions.&lt;/p&gt;

&lt;p&gt;We have a custom reporter which aggregates topics/partitions together to avoid explosion of the number of KPIs and this KPI doesn&apos;t support this as it doesn&apos;t have tags but a complex name.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-92+-+Add+per+partition+lag+metrics+to+KafkaConsumer&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/KIP-92+-+Add+per+partition+lag+metrics+to+KafkaConsumer&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13102253">KAFKA-5890</key>
            <summary>records.lag should use tags for topic and partition rather than using metric name.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cmolter">Charly Molter</assignee>
                                    <reporter username="cmolter">Charly Molter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Sep 2017 13:13:02 +0000</created>
                <updated>Mon, 15 Jan 2018 09:53:10 +0000</updated>
                            <resolved>Mon, 15 Jan 2018 09:44:49 +0000</resolved>
                                    <version>0.10.2.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>clients</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16168759" author="wushujames" created="Sat, 16 Sep 2017 01:32:47 +0000"  >&lt;p&gt;I noticed the same thing in &lt;a href=&quot;https://github.com/apache/kafka/pull/2993&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/2993&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Metric names are a public API, and so would require a KIP before changes could be made. Is that something you want to take on?&lt;/p&gt;</comment>
                            <comment id="16178207" author="cmolter" created="Sun, 24 Sep 2017 13:44:30 +0000"  >&lt;p&gt;That&apos;s what I was expecting. I&apos;ll try to get a KIP written this week.&lt;/p&gt;</comment>
                            <comment id="16247837" author="cmolter" created="Fri, 10 Nov 2017 17:47:52 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wushujames&quot; class=&quot;user-hover&quot; rel=&quot;wushujames&quot;&gt;wushujames&lt;/a&gt; I&apos;ve finally got around to open a kip about this if you want to have a look: &lt;a href=&quot;https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=74686649&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=74686649&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16304856" author="githubbot" created="Wed, 27 Dec 2017 23:13:57 +0000"  >&lt;p&gt;lahabana opened a new pull request #4362: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5890&quot; title=&quot;records.lag should use tags for topic and partition rather than using metric name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5890&quot;&gt;&lt;del&gt;KAFKA-5890&lt;/del&gt;&lt;/a&gt; records.lag should use tags for topic and partition rather than using metric name.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/4362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4362&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This is the implementation of KIP-225.&lt;br/&gt;
   It marks the previous metrics as deprecated in the documentation and adds new metrics using tags.&lt;/p&gt;

&lt;p&gt;   Testing verifies that both the new and the old metric report the same value.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16323796" author="cmolter" created="Fri, 12 Jan 2018 10:21:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka/pull/4362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4362&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16326053" author="cmolter" created="Mon, 15 Jan 2018 09:49:03 +0000"  >&lt;p&gt;This got merged and I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6445&quot; title=&quot;Remove deprecated metrics in 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6445&quot;&gt;&lt;del&gt;KAFKA-6445&lt;/del&gt;&lt;/a&gt; to track the removing the old metrics.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k2gn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>becket_qin</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>