<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:25:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-10218] DistributedHerder&apos;s canReadConfigs field is never reset to true</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-10218</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;If the &lt;tt&gt;DistributedHerder&lt;/tt&gt; encounters issues reading to the end of the config topic, it &lt;a href=&quot;https://github.com/apache/kafka/blob/7db52a46b00eed652e791dd4eae809d590626a1f/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/distributed/DistributedHerder.java#L1109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;takes note of this fact&lt;/a&gt;&#160;by setting a field &lt;tt&gt;canReadConfigs&lt;/tt&gt; to &lt;tt&gt;false&lt;/tt&gt;&#160;and then acts accordingly at the &lt;a href=&quot;https://github.com/apache/kafka/blob/7db52a46b00eed652e791dd4eae809d590626a1f/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/distributed/DistributedHerder.java#L319&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;start of its tick loop&lt;/a&gt;&#160;by trying again to read to the end of the config topic. However, if a subsequent attempt to read to the end of the config topic succeeds, the &lt;tt&gt;canReadConfigs&lt;/tt&gt; field is never set back to &lt;tt&gt;true&lt;/tt&gt; again, so no matter what, the herder will always attempt to read to the end of the config topic at the beginning of each tick.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13314164">KAFKA-10218</key>
            <summary>DistributedHerder&apos;s canReadConfigs field is never reset to true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ChrisEgerton">Chris Egerton</assignee>
                                    <reporter username="ChrisEgerton">Chris Egerton</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jun 2020 22:18:06 +0000</created>
                <updated>Tue, 29 Sep 2020 00:08:30 +0000</updated>
                            <resolved>Tue, 29 Sep 2020 00:08:30 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.0.1</version>
                    <version>2.0.2</version>
                    <version>2.1.0</version>
                    <version>2.1.1</version>
                    <version>2.1.2</version>
                    <version>2.2.0</version>
                    <version>2.2.1</version>
                    <version>2.2.2</version>
                    <version>2.2.3</version>
                    <version>2.3.0</version>
                    <version>2.3.1</version>
                    <version>2.3.2</version>
                    <version>2.4.0</version>
                    <version>2.4.1</version>
                    <version>2.4.2</version>
                    <version>2.5.0</version>
                    <version>2.5.1</version>
                    <version>2.5.2</version>
                    <version>2.6.0</version>
                    <version>2.6.1</version>
                    <version>2.7.0</version>
                                    <fixVersion>2.4.2</fixVersion>
                    <fixVersion>2.5.2</fixVersion>
                    <fixVersion>2.6.1</fixVersion>
                    <fixVersion>2.7.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17148205" author="chrisegerton" created="Mon, 29 Jun 2020 23:25:42 +0000"  >&lt;p&gt;This goes back beyond 1.0.0. I&apos;ve added a handful of versions to &lt;tt&gt;Affects Version/s&lt;/tt&gt;, if anyone wants to add more feel free.&lt;/p&gt;</comment>
                            <comment id="17152108" author="rhauch" created="Mon, 6 Jul 2020 15:42:58 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ChrisEgerton&quot; class=&quot;user-hover&quot; rel=&quot;ChrisEgerton&quot;&gt;ChrisEgerton&lt;/a&gt;. You didn&apos;t really describe the impact of this bug, but IIUC the herder still behaves correctly with this bug but does extra work with every herder tick. Specifically, the config log&apos;s `producer.flush()` will have work to do only if there were recent new, removed, or changed connector configs or state change requests for that herder. And although the config log&apos;s consumer does have to fetch end offsets with every tick, only when the producer will have flushed records might the consumer have to block while it consumes records. (I say &quot;might&quot; because it&apos;s possible, though less likely, the consumer had just finished consuming those records and does not have to block.)&lt;/p&gt;

&lt;p&gt;IOW, most of the time the only impact of this bug is that the Connect worker&apos;s herder unnecessarily fetches the config topic&apos;s end offsets on every tick. (Normally, the herder&apos;s config log already reads to the end any time anything of interest happens anyway.) But in some cases a lossy network or Kafka cluster transient outage coupled with the short default timeout (3 seconds) could cause the worker to leave the group, when it might not normally need to. &lt;/p&gt;

&lt;p&gt;Is my analysis correct?&lt;/p&gt;

&lt;p&gt;(This isn&apos;t to suggest we not fix this; I&apos;m just trying to understand the impact of the bug and to properly prioritize the fix.)&lt;/p&gt;</comment>
                            <comment id="17153936" author="chrisegerton" created="Wed, 8 Jul 2020 19:40:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhauch&quot; class=&quot;user-hover&quot; rel=&quot;rhauch&quot;&gt;rhauch&lt;/a&gt;&#160;The primary impact here is that there are erroneous and confusing log messages that start to get emitted as soon as the worker enters a bad state and there is no fix except to restart the worker. The fix and the test are fairly simple and I think warrant review before the upcoming 2.7 release so that we can include them in upcoming bug fix releases before then.&lt;/p&gt;</comment>
                            <comment id="17203560" author="rhauch" created="Tue, 29 Sep 2020 00:08:30 +0000"  >&lt;p&gt;Merged into the `trunk` branch for inclusion in the upcoming 2.7.0, and cherry-picked to the `2.6.x`, `2.5.x`, and `2.4.x` branches for inclusion in the next 2.6.1, 2.5.2, and 2.4.2 patch releases if/when they happen.&lt;/p&gt;

&lt;p&gt;Even though the bug was present in much earlier versions, the project&apos;s policy is to backport only critical fixes earlier than the most recent 2-3 releases. This issue doesn&apos;t appear to fit that threshold.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0gbds:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>rhauch</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>