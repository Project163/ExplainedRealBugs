<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:05:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-6313] Kafka Core should have explicit SLF4J API dependency</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-6313</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In an application that depends on the Kafka server artifacts with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.kafka&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;kafka_2.11&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.1.0-SNAPSHOT&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and then running the server programmatically, the following error occurs:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2017-11-23 01:01:45,029] INFO Shutting down producer (kafka.producer.Producer:63)
[2017-11-23 01:01:45,051] INFO Closing all sync producers (kafka.producer.ProducerPool:63)
[2017-11-23 01:01:45,052] INFO Producer shutdown completed in 23 ms (kafka.producer.Producer:63)
[2017-11-23 01:01:45,052] INFO [KafkaServer id=1] shutting down (kafka.server.KafkaServer:63)
[2017-11-23 01:01:45,057] ERROR [KafkaServer id=1] Fatal error during KafkaServer shutdown. (kafka.server.KafkaServer:161)
java.lang.NoClassDefFoundError: org/slf4j/event/Level
	at kafka.utils.CoreUtils$.swallow$default$3(CoreUtils.scala:83)
	at kafka.server.KafkaServer.shutdown(KafkaServer.scala:520)
       ...
Caused by: java.lang.ClassNotFoundException: org.slf4j.event.Level
	at java.net.URLClassLoader$1.run(URLClassLoader.java:359)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:348)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:347)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:425)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:312)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
	... 25 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It appears that &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1044&quot; title=&quot;change log4j to slf4j &quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1044&quot;&gt;&lt;del&gt;KAFKA-1044&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/kafka/pull/3477&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this PR&lt;/a&gt; removed the use of Log4J from Core but &lt;a href=&quot;https://github.com/confluentinc/kafka/commit/ed8b0315a6c3705b2a163ce3ab4723234779264f#diff-52505b9374ea885e44bcb73cbc4714d6R34&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;added use of&lt;/a&gt; the &lt;tt&gt;org.slf4j.event.Level&lt;/tt&gt; in &lt;tt&gt;CoreUtils.scala&lt;/tt&gt;. The &lt;tt&gt;org.slf4j.event.Level&lt;/tt&gt; class is in the &lt;tt&gt;org.slf4j:slf4j-api&lt;/tt&gt; artifact, which is currently not included in the dependencies of &lt;tt&gt;org.apache.kafka:kafka_2.11:1.1.0-SNAPSHOT&lt;/tt&gt;. Because this is needed by the server, the SLF4J API library probably needs to be added to the dependencies.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=viktorsomogyi&quot; class=&quot;user-hover&quot; rel=&quot;viktorsomogyi&quot;&gt;viktorsomogyi&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt;, was this intentional, or is it intended that the SLF4J API be marked as &lt;tt&gt;provided&lt;/tt&gt;? BTW, I marked this as CRITICAL just because this probably needs to be sorted out before the release.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Update&lt;/b&gt;: As the comments below explain, the actual problem is a bit different to what is in the JIRA description.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13123072">KAFKA-6313</key>
            <summary>Kafka Core should have explicit SLF4J API dependency</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhauch">Randall Hauch</assignee>
                                    <reporter username="rhauch">Randall Hauch</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Dec 2017 02:41:56 +0000</created>
                <updated>Thu, 7 Dec 2017 08:42:08 +0000</updated>
                            <resolved>Thu, 7 Dec 2017 08:42:08 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16279805" author="ijuma" created="Wed, 6 Dec 2017 08:01:11 +0000"  >&lt;p&gt;slf4j-api is a dependency of slf4j-log4j12:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://central.maven.org/maven2/org/slf4j/slf4j-log4j12/1.7.25/slf4j-log4j12-1.7.25.pom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/slf4j/slf4j-log4j12/1.7.25/slf4j-log4j12-1.7.25.pom&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I also verified via ./gradlew dependencies and slf4j-api is a dependency via various libraries including the one just mentioned:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+--- org.slf4j:slf4j-log4j12:1.7.25
|    +--- org.slf4j:slf4j-api:1.7.25
|    \--- log4j:log4j:1.2.17
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Are you sure this is not caused by an exclusion on your library? In any case, it is a good practice to include a direct dependency on slf4j-api since we refer to it in our code, but that is a minor issue so updated priority.&lt;/p&gt;</comment>
                            <comment id="16280260" author="rhauch" created="Wed, 6 Dec 2017 14:49:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt;, you are correct that other dependencies in my project caused the SLF4J API artifact to be missed. It wasn&apos;t an exclusion, but it was due to including a slightly older version 3.4.6 of &lt;tt&gt;org.apache.zookeeper:zookeeper&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; +- org.apache.zookeeper:zookeeper:jar:3.4.6:compile
 |  +- org.slf4j:slf4j-api:jar:1.6.1:compile
 |  \- io.netty:netty:jar:3.7.0.Final:compile
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Because ZK depends &lt;b&gt;directly&lt;/b&gt; on SLF4J API while Kafka depends &lt;b&gt;indirectly&lt;/b&gt;, Maven&apos;s &lt;a href=&quot;https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;transitive dependency rules&lt;/a&gt; used ZK&apos;s direct dependency to resolve the version conflict and to identify the version to use. Reordering in my project Kafka&apos;s dependency first doesn&apos;t help, though I could force it by manually adding the SLF4J dependency (now I&apos;d have to manage the version) or the Kafka client dependency (which does have a direct dependency on SLF4J).&lt;/p&gt;

&lt;p&gt;So, you are correct that the existing dependencies should have brought in the SLF4J if there were no other conflicts/exclusions, and that we should make Kafka&apos;s dependency direct rather than indirect. However, because this is so difficult to fix, I&apos;d still characterize this as more important because of how Maven&apos;s dependency conflict resolution works.&lt;/p&gt;

</comment>
                            <comment id="16280268" author="ijuma" created="Wed, 6 Dec 2017 14:55:04 +0000"  >&lt;p&gt;Interesting, so that class is missing from the older slf4j-api version? I agree that this makes it a bigger deal. Either way, I have a fix nearly ready.&lt;/p&gt;</comment>
                            <comment id="16280289" author="githubbot" created="Wed, 6 Dec 2017 15:09:58 +0000"  >&lt;p&gt;GitHub user rhauch opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/4296&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4296&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6313&quot; title=&quot;Kafka Core should have explicit SLF4J API dependency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6313&quot;&gt;&lt;del&gt;KAFKA-6313&lt;/del&gt;&lt;/a&gt;: Add SLF4J as direct dependency to Kafka core&lt;/p&gt;

&lt;p&gt;    Recent changes are now directly using the SLF4J API, so we should have a direct dependency.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rhauch/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rhauch/kafka&lt;/a&gt; kafka-6313&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/4296.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4296.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4296&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit eb38ce67d82a47f932ab8cf6b39b05e5887f5300&lt;br/&gt;
Author: Randall Hauch &amp;lt;rhauch@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-12-06T15:07:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6313&quot; title=&quot;Kafka Core should have explicit SLF4J API dependency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6313&quot;&gt;&lt;del&gt;KAFKA-6313&lt;/del&gt;&lt;/a&gt;: Add SLF4J as direct dependency to Kafka core&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16281499" author="githubbot" created="Thu, 7 Dec 2017 08:38:41 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/4296&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4296&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nl0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>