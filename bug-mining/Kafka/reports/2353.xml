<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:19:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-8860] SslPrincipalMapper should handle distinguished names with spaces</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-8860</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;This Jira is to track the issue reported by&#160;&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:tb@teebee.de&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;tb@teebee.de&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;in PR&#160;&lt;a href=&quot;https://github.com/apache/kafka/pull/7140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#7140&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;PR&#160;&lt;a href=&quot;https://github.com/apache/kafka/pull/6099&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#6099&lt;/a&gt;&#160;tried to undo the splitting of the&#160;&lt;tt&gt;ssl.principal.mapper.rules&lt;/tt&gt;&#160;&lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/server/KafkaConfig.scala#L1054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;list&lt;/a&gt;&#160;on&#160;&lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java#L78&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;comma with whitespace&lt;/a&gt;&#160;by&#160;&lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/security/ssl/SslPrincipalMapper.java#L42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sophisticated rejoining&lt;/a&gt;&#160;of the split list using a comma as separator. However, since possibly surrounding whitespace is not reconstructed this approach fails in general. Consider the following test case:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testCommaWithWhitespace() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception \{
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value = &lt;span class=&quot;code-quote&quot;&gt;&quot;RULE:^CN=((\\\\, *|\\w)+)(,.*|$)/$1/,DEFAULT&quot;&lt;/span&gt;;

    @SuppressWarnings(&lt;span class=&quot;code-quote&quot;&gt;&quot;unchecked&quot;&lt;/span&gt;)
    List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; rules = (List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;) ConfigDef.parseType(&lt;span class=&quot;code-quote&quot;&gt;&quot;ssl.principal.mapper.rules&quot;&lt;/span&gt;, value, Type.LIST);

    SslPrincipalMapper mapper = SslPrincipalMapper.fromRules(rules);
    assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Tkac\\, Adam&quot;&lt;/span&gt;, mapper.getName(&lt;span class=&quot;code-quote&quot;&gt;&quot;CN=Tkac\\, Adam,OU=ITZ,DC=geodis,DC=cz&quot;&lt;/span&gt;));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The space after the escaped comma is&#160;&lt;a href=&quot;https://sogo.nu/bugs/view.php?id=2152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;essential&lt;/a&gt;. Unfortunately, it has disappeared after splitting and rejoining.&lt;/p&gt;

&lt;p&gt;Moreover, in&#160;&lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/security/ssl/SslPrincipalMapper.java#L42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;joinSplitRules&lt;/tt&gt;&lt;/a&gt;&#160;the decision to rejoin list elements is based on local information only which might not be sufficient. It works for&#160;&lt;blockquote&gt;&lt;p&gt;&quot;RULE:^CN=(&lt;span class=&quot;error&quot;&gt;&amp;#91;^,ADEFLTU,&amp;#93;&lt;/span&gt;+)(,.*|$)/$1/&quot;&lt;/p&gt;&lt;/blockquote&gt;&#160; but fails for the&#160;&lt;em&gt;equivalent&lt;/em&gt;&#160;regular expression&#160;&lt;blockquote&gt;&lt;p&gt;RULE:^CN=(&lt;span class=&quot;error&quot;&gt;&amp;#91;^,DEFAULT,&amp;#93;&lt;/span&gt;+)(,.*|$)/$1/&quot;&lt;/p&gt;&lt;/blockquote&gt;&lt;/p&gt;

&lt;p&gt;The approach of the current PR is to change the type of the&#160;&lt;tt&gt;ssl.principal.mapper.rules&lt;/tt&gt;&#160;attribute from&#160;&lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java#L781&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;LIST&lt;/a&gt;&#160;to&#160;&lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java#L781&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;STRING&lt;/a&gt;&#160;and to delegate the splitting of the rules to the&#160;&lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/security/ssl/SslPrincipalMapper.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SslPrincipalMapper&lt;/a&gt;. It knows about the structure of the rules and can perform the splitting context-based.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13254285">KAFKA-8860</key>
            <summary>SslPrincipalMapper should handle distinguished names with spaces</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="omkreddy">Manikumar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Sep 2019 17:27:33 +0000</created>
                <updated>Mon, 2 Sep 2019 18:03:20 +0000</updated>
                            <resolved>Mon, 2 Sep 2019 18:03:20 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16920987" author="omkreddy" created="Mon, 2 Sep 2019 17:27:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka/pull/7140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7140&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16920998" author="githubbot" created="Mon, 2 Sep 2019 18:03:09 +0000"  >&lt;p&gt;omkreddy commented on pull request #7140: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8860&quot; title=&quot;SslPrincipalMapper should handle distinguished names with spaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8860&quot;&gt;&lt;del&gt;KAFKA-8860&lt;/del&gt;&lt;/a&gt;: Let SslPrincipalMapper split SSL principal mapping rules&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7140&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16920999" author="omkreddy" created="Mon, 2 Sep 2019 18:03:20 +0000"  >&lt;p&gt;Issue resolved by pull request 7140&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/7140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7140&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0698g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>