<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:22:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-9701] Consumer could catch InconsistentGroupProtocolException during rebalance</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-9701</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The bug was due to an out-of-order handling of the SyncGroupRequest after the LeaveGroupRequest.&lt;/p&gt;

&lt;p&gt;The sequence of events are:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The stream thread tries to rejoin the group during runOnce#poll&lt;/li&gt;
	&lt;li&gt;The join group call was successful and group was waiting for sync group result&lt;/li&gt;
	&lt;li&gt;Outside the poll, task producer hits FencedException, triggering a partition lost&lt;/li&gt;
	&lt;li&gt;Stream thread unsubscribes and sends out an leave group, and gets the local generation wipe out&#160;&lt;/li&gt;
	&lt;li&gt;The sync group response was processed. Although it is legitimate, the local protocol type becomes null in this case&lt;/li&gt;
	&lt;li&gt;The sync group response hits the protocol type mismatch fatal exception&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20T*10:40:08-07:00*&amp;#93;&lt;/span&gt; (streams-soak-trunk-eos_soak_i-01629239fa39901b4_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20 17:40:08,754&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1-consumer, groupId=stream-soak-test&amp;#93;&lt;/span&gt; (Re-)joining group (org.apache.kafka.clients.consumer.internals.AbstractCoordinator)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20T*10:40:11-07:00*&amp;#93;&lt;/span&gt; (streams-soak-trunk-eos_soak_i-01629239fa39901b4_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20 17:40:11,152&amp;#93;&lt;/span&gt; ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-producer-network-thread | stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1-0_1-producer&amp;#93;&lt;/span&gt; stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1&amp;#93;&lt;/span&gt; task &lt;span class=&quot;error&quot;&gt;&amp;#91;0_1&amp;#93;&lt;/span&gt; Error encountered sending record to topic network-id-repartition for task 0_1 due to:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20T10:40:11-07:00&amp;#93;&lt;/span&gt; (streams-soak-trunk-eos_soak_i-01629239fa39901b4_streamslog) org.apache.kafka.common.errors.ProducerFencedException: Producer attempted an operation with an old epoch. Either there is a newer producer with the same transactionalId, or the producer&apos;s transaction has been expired by the broker.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20T10:40:12-07:00&amp;#93;&lt;/span&gt; (streams-soak-trunk-eos_soak_i-01629239fa39901b4_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20 17:40:12,048&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1&amp;#93;&lt;/span&gt; stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1&amp;#93;&lt;/span&gt; at state RUNNING: partitions &lt;span class=&quot;error&quot;&gt;&amp;#91;logs.json.kafka-1, node-name-repartition-1, logs.json.zookeeper-1, logs.kubernetes-1, windowed-node-counts-1, logs.operator-1, logs.syslog-1&amp;#93;&lt;/span&gt; lost due to missed rebalance.&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; lost active tasks: []&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; lost assigned standby tasks: []&lt;/p&gt;

&lt;p&gt; (org.apache.kafka.streams.processor.internals.StreamThread)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20T*10:40:12-07:00*&amp;#93;&lt;/span&gt; (streams-soak-trunk-eos_soak_i-01629239fa39901b4_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20 17:40:12,048&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1-consumer, groupId=stream-soak-test&amp;#93;&lt;/span&gt; Member stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1-consumer-34c2198b-5bdd-470b-ae50-30a39873edab sending LeaveGroup request to coordinator ip-172-31-18-29.us-west-2.compute.internal:9092 (id: 2147482644 rack: null) due to the consumer &lt;b&gt;unsubscribed from all topics&lt;/b&gt; (org.apache.kafka.clients.consumer.internals.AbstractCoordinator)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20T10:40:12-07:00&amp;#93;&lt;/span&gt; (streams-soak-trunk-eos_soak_i-01629239fa39901b4_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20 17:40:12,048&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1-consumer, groupId=stream-soak-test&amp;#93;&lt;/span&gt; Unsubscribed all topics or patterns and assigned partitions (org.apache.kafka.clients.consumer.KafkaConsumer)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20T10:40:17-07:00&amp;#93;&lt;/span&gt; (streams-soak-trunk-eos_soak_i-01629239fa39901b4_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20 17:40:16,972&amp;#93;&lt;/span&gt; ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1-consumer, groupId=stream-soak-test&amp;#93;&lt;/span&gt; SyncGroup failed due to inconsistent Protocol Name, received stream but expected null (org.apache.kafka.clients.consumer.internals.AbstractCoordinator)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20T10:40:17-07:00&amp;#93;&lt;/span&gt; (streams-soak-trunk-eos_soak_i-01629239fa39901b4_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-20 17:40:16,973&amp;#93;&lt;/span&gt; ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1&amp;#93;&lt;/span&gt; stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-f7392d33-55d7-484f-8b72-578e22fead96-StreamThread-1&amp;#93;&lt;/span&gt; Encountered the following exception during processing and the thread is going to shut down:&#160; (org.apache.kafka.streams.processor.internals.StreamThread)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;----------- Original Exception -------------&lt;/p&gt;

&lt;p&gt;INFO log shows that we accidentally hit an unexpected inconsistent group protocol exception:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-10T17:16:53-07:00&amp;#93;&lt;/span&gt; (streams-soak-2-5-eos-broker-2-5_soak_i-00067445452c82fe8_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-11 *00:16:53,382*&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-d3da8597-c371-450e-81d9-72aea6a26949-StreamThread-1&amp;#93;&lt;/span&gt; stream-client &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-d3da8597-c371-450e-81d9-72aea6a26949&amp;#93;&lt;/span&gt; State transition from REBALANCING to RUNNING (org.apache.kafka.streams.KafkaStreams)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-10T17:16:53-07:00&amp;#93;&lt;/span&gt; (streams-soak-2-5-eos-broker-2-5_soak_i-00067445452c82fe8_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-11 *00:16:53,384*&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;kafka-producer-network-thread | stream-soak-test-d3da8597-c371-450e-81d9-72aea6a26949-StreamThread-1-0_1-producer&amp;#93;&lt;/span&gt; stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-d3da8597-c371-450e-81d9-72aea6a26949-StreamThread-1&amp;#93;&lt;/span&gt; task &lt;span class=&quot;error&quot;&gt;&amp;#91;0_1&amp;#93;&lt;/span&gt; Error sending record to topic node-name-repartition due to Producer attempted an operation with an old epoch. Either there is a newer producer with the same transactionalId, or the producer&apos;s transaction has been expired by the broker.; No more records will be sent and no more offsets will be recorded for this task.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-10T17:16:53-07:00&amp;#93;&lt;/span&gt; (streams-soak-2-5-eos-broker-2-5_soak_i-00067445452c82fe8_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-11 *00:16:53,521*&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-d3da8597-c371-450e-81d9-72aea6a26949-StreamThread-1&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=stream-soak-test-d3da8597-c371-450e-81d9-72aea6a26949-StreamThread-1-consumer, groupId=stream-soak-test&amp;#93;&lt;/span&gt; Member stream-soak-test-d3da8597-c371-450e-81d9-72aea6a26949-StreamThread-1-consumer-d1c3c796-0bfb-4c1c-9fb4-5a807d8b53a2 sending LeaveGroup request to coordinator ip-172-31-20-215.us-west-2.compute.internal:9092 (id: 2147482646 rack: null) due to the consumer unsubscribed from all topics (org.apache.kafka.clients.consumer.internals.AbstractCoordinator)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-10T17:16:54-07:00&amp;#93;&lt;/span&gt; (streams-soak-2-5-eos-broker-2-5_soak_i-00067445452c82fe8_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-11 *00:16:53,798*&amp;#93;&lt;/span&gt; ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-d3da8597-c371-450e-81d9-72aea6a26949-StreamThread-1&amp;#93;&lt;/span&gt; stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-d3da8597-c371-450e-81d9-72aea6a26949-StreamThread-1&amp;#93;&lt;/span&gt; Encountered the following unexpected Kafka exception during processing, this usually indicate Streams internal errors: (org.apache.kafka.streams.processor.internals.StreamThread)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-10T17:16:54-07:00&amp;#93;&lt;/span&gt; (streams-soak-2-5-eos-broker-2-5_soak_i-00067445452c82fe8_streamslog) org.apache.kafka.common.errors.InconsistentGroupProtocolException: The group member&apos;s supported protocols are incompatible with those of existing members or first group member tried to join with empty protocol type or empty protocol list.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Potentially needs further log to understand this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13290966">KAFKA-9701</key>
            <summary>Consumer could catch InconsistentGroupProtocolException during rebalance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bchen225242">Boyang Chen</assignee>
                                    <reporter username="bchen225242">Boyang Chen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Mar 2020 02:49:33 +0000</created>
                <updated>Wed, 11 May 2022 13:09:56 +0000</updated>
                            <resolved>Sat, 21 Mar 2020 04:28:13 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17056604" author="githubbot" created="Wed, 11 Mar 2020 02:56:42 +0000"  >&lt;p&gt;abbccdda commented on pull request #8272: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9701&quot; title=&quot;Consumer could catch InconsistentGroupProtocolException during rebalance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9701&quot;&gt;&lt;del&gt;KAFKA-9701&lt;/del&gt;&lt;/a&gt;: Add more debug log on client to reproduce the issue&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/8272&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8272&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   *More detailed description of your change,&lt;br/&gt;
   if necessary. The PR title and PR message become&lt;br/&gt;
   the squashed commit message, so use a separate&lt;br/&gt;
   comment to ping reviewers.*&lt;/p&gt;

&lt;p&gt;   *Summary of testing strategy (including rationale)&lt;br/&gt;
   for the feature or bug fix. Unit and/or integration&lt;br/&gt;
   tests are expected for any behaviour change and&lt;br/&gt;
   system tests should be considered for larger changes.*&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17056639" author="githubbot" created="Wed, 11 Mar 2020 04:41:29 +0000"  >&lt;p&gt;iamgd67 commented on pull request #8274: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9701&quot; title=&quot;Consumer could catch InconsistentGroupProtocolException during rebalance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9701&quot;&gt;&lt;del&gt;KAFKA-9701&lt;/del&gt;&lt;/a&gt;: remove -E option from sed in kafka-run-class.sh&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/8274&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8274&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    remove -E option from sed in kafka-run-class.sh because old version of sed not support -E&lt;br/&gt;
   more detail please look at  &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9699&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-9699&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17056670" author="bchen225242" created="Wed, 11 Mar 2020 05:57:16 +0000"  >&lt;p&gt;Reproduced on trunk as well:&lt;br/&gt;
```&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-10T20:05:27-07:00&amp;#93;&lt;/span&gt; (streams-soak-2-6-eos_soak_i-053ea65a68df40867_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-11 03:05:27,252&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-cdaca0fe-8d47-4de5-911e-bb084038d6f5-StreamThread-3&amp;#93;&lt;/span&gt; stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-cdaca0fe-8d47-4de5-911e-bb084038d6f5-StreamThread-3&amp;#93;&lt;/span&gt; State transition from RUNNING to PARTITIONS_ASSIGNED (org.apache.kafka.streams.processor.internals.StreamThread)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-10T20:05:27-07:00&amp;#93;&lt;/span&gt; (streams-soak-2-6-eos_soak_i-053ea65a68df40867_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-11 03:05:27,252&amp;#93;&lt;/span&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-cdaca0fe-8d47-4de5-911e-bb084038d6f5-StreamThread-3&amp;#93;&lt;/span&gt; stream-client &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-cdaca0fe-8d47-4de5-911e-bb084038d6f5&amp;#93;&lt;/span&gt; State transition from RUNNING to REBALANCING (org.apache.kafka.streams.KafkaStreams)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-10T20:05:27-07:00&amp;#93;&lt;/span&gt; (streams-soak-2-6-eos_soak_i-053ea65a68df40867_streamslog) &lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-11 03:05:27,252&amp;#93;&lt;/span&gt; ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-cdaca0fe-8d47-4de5-911e-bb084038d6f5-StreamThread-1&amp;#93;&lt;/span&gt; stream-thread &lt;span class=&quot;error&quot;&gt;&amp;#91;stream-soak-test-cdaca0fe-8d47-4de5-911e-bb084038d6f5-StreamThread-1&amp;#93;&lt;/span&gt; Encountered the following exception during processing and the thread is going to shut down:&#160; (org.apache.kafka.streams.processor.internals.StreamThread)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-10T20:05:27-07:00&amp;#93;&lt;/span&gt; (streams-soak-2-6-eos_soak_i-053ea65a68df40867_streamslog) org.apache.kafka.common.errors.InconsistentGroupProtocolException: The group member&apos;s supported protocols are incompatible with those of existing members or first group member tried to join with empty protocol type or empty protocol list.&lt;/p&gt;

&lt;p&gt;```&lt;/p&gt;</comment>
                            <comment id="17057459" author="githubbot" created="Wed, 11 Mar 2020 22:52:58 +0000"  >&lt;p&gt;guozhangwang commented on pull request #8272: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9701&quot; title=&quot;Consumer could catch InconsistentGroupProtocolException during rebalance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9701&quot;&gt;&lt;del&gt;KAFKA-9701&lt;/del&gt;&lt;/a&gt;: Add more debug log on client to reproduce the issue&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/8272&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8272&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17063613" author="vvcephei" created="Fri, 20 Mar 2020 20:30:02 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bchen225242&quot; class=&quot;user-hover&quot; rel=&quot;bchen225242&quot;&gt;bchen225242&lt;/a&gt; , I think I&apos;ve reproduced this issue in a soak test. Attaching the client and broker logs ...&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12997248/12997248_cluster.log&quot; title=&quot;cluster.log attached to KAFKA-9701&quot;&gt;cluster.log&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17063689" author="githubbot" created="Sat, 21 Mar 2020 00:31:18 +0000"  >&lt;p&gt;abbccdda commented on pull request #8324: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9701&quot; title=&quot;Consumer could catch InconsistentGroupProtocolException during rebalance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9701&quot;&gt;&lt;del&gt;KAFKA-9701&lt;/del&gt;&lt;/a&gt; (fix): Only check protocol name when generation is valid&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/8324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8324&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This bug was incurred by &lt;a href=&quot;https://github.com/apache/kafka/pull/7994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7994&lt;/a&gt; with a too-strong consistency check. It is because a reset generation operation could be called in between the `joinGroupRequest` -&amp;gt; `joinGroupResponse` -&amp;gt; `SyncGroupRequest` -&amp;gt; `SyncGroupResponse` sequence of events, if user calls `unsubscribe` in the middle of consumer#poll().&lt;/p&gt;

&lt;p&gt;   Proper fix is to avoid the protocol name check when the generation is invalid.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17063754" author="githubbot" created="Sat, 21 Mar 2020 04:27:03 +0000"  >&lt;p&gt;guozhangwang commented on pull request #8324: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-9701&quot; title=&quot;Consumer could catch InconsistentGroupProtocolException during rebalance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-9701&quot;&gt;&lt;del&gt;KAFKA-9701&lt;/del&gt;&lt;/a&gt; (fix): Only check protocol name when generation is valid&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/8324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/8324&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12997248" name="cluster.log" size="60107" author="vvcephei" created="Fri, 20 Mar 2020 20:29:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0cehs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>