<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:15:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-7553] Jenkins PR tests hung</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-7553</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;I wouldn&apos;t worry about this unless it continues to happen, but I wanted to document it.&lt;/p&gt;

&lt;p&gt;This was a Java 11 build: &lt;a href=&quot;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/266/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/266/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It was for this PR: &lt;a href=&quot;https://github.com/apache/kafka/pull/5795&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5795&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And this commit: &lt;a href=&quot;https://github.com/apache/kafka/pull/5795/commits/5bdcd0e023c6f406d585155399f6541bb6a9f9c2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5795/commits/5bdcd0e023c6f406d585155399f6541bb6a9f9c2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It looks like the tests just hung after 46 minutes, until the build timed out at 180 minutes.&lt;/p&gt;

&lt;p&gt;End of the output:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;...
00:46:27.275 kafka.server.ServerGenerateBrokerIdTest &amp;gt; testConsistentBrokerIdFromUserConfigAndMetaProps STARTED
00:46:29.775 
00:46:29.775 kafka.server.ServerGenerateBrokerIdTest &amp;gt; testConsistentBrokerIdFromUserConfigAndMetaProps PASSED
03:00:51.124 Build timed out (after 180 minutes). Marking the build as aborted.
03:00:51.440 Build was aborted
03:00:51.492 [FINDBUGS] Skipping publisher since build result is ABORTED
03:00:51.492 Recording test results
03:00:51.495 Setting GRADLE_4_8_1_HOME=/home/jenkins/tools/gradle/4.8.1
03:00:58.017 Setting GRADLE_4_8_1_HOME=/home/jenkins/tools/gradle/4.8.1
03:00:59.330 Setting GRADLE_4_8_1_HOME=/home/jenkins/tools/gradle/4.8.1
03:00:59.331 Adding one-line test results to commit status...
03:00:59.332 Setting GRADLE_4_8_1_HOME=/home/jenkins/tools/gradle/4.8.1
03:00:59.334 Setting GRADLE_4_8_1_HOME=/home/jenkins/tools/gradle/4.8.1
03:00:59.335 Setting status of 5bdcd0e023c6f406d585155399f6541bb6a9f9c2 to FAILURE with url https://builds.apache.org/job/kafka-pr-jdk11-scala2.12/266/ and message: &apos;FAILURE
03:00:59.335  9053 tests run, 1 skipped, 0 failed.&apos;
03:00:59.335 Using context: JDK 11 and Scala 2.12
03:00:59.541 Setting GRADLE_4_8_1_HOME=/home/jenkins/tools/gradle/4.8.1
03:00:59.542 Finished: ABORTED&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I did find one test that started but did not finish:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;00:23:29.576 kafka.api.PlaintextConsumerTest &amp;gt; testLowMaxFetchSizeForRequestAndPartition STARTED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But note that the tests continued to run for another 23 minutes after this one started.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Just for completeness, there were 4 failures:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;00:22:06.875 kafka.admin.ResetConsumerGroupOffsetTest &amp;gt; testResetOffsetsNotExistingGroup FAILED
00:22:06.875     java.util.concurrent.ExecutionException: org.apache.kafka.common.errors.CoordinatorNotAvailableException: The coordinator is not available.
00:22:06.875         at org.apache.kafka.common.internals.KafkaFutureImpl.wrapAndThrow(KafkaFutureImpl.java:45)
00:22:06.875         at org.apache.kafka.common.internals.KafkaFutureImpl.access$000(KafkaFutureImpl.java:32)
00:22:06.875         at org.apache.kafka.common.internals.KafkaFutureImpl$SingleWaiter.await(KafkaFutureImpl.java:89)
00:22:06.876         at org.apache.kafka.common.internals.KafkaFutureImpl.get(KafkaFutureImpl.java:262)
00:22:06.876         at kafka.admin.ConsumerGroupCommand$ConsumerGroupService.resetOffsets(ConsumerGroupCommand.scala:307)
00:22:06.876         at kafka.admin.ResetConsumerGroupOffsetTest.testResetOffsetsNotExistingGroup(ResetConsumerGroupOffsetTest.scala:89)
00:22:06.876 
00:22:06.876         Caused by:
00:22:06.876         org.apache.kafka.common.errors.CoordinatorNotAvailableException: The coordinator is not available.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;00:25:22.175 kafka.api.CustomQuotaCallbackTest &amp;gt; testCustomQuotaCallback FAILED
00:25:22.175     java.lang.AssertionError: Partition [group1_largeTopic,69] metadata not propagated after 15000 ms
00:25:22.176         at kafka.utils.TestUtils$.fail(TestUtils.scala:351)
00:25:22.176         at kafka.utils.TestUtils$.waitUntilTrue(TestUtils.scala:741)
00:25:22.176         at kafka.utils.TestUtils$.waitUntilMetadataIsPropagated(TestUtils.scala:831)
00:25:22.176         at kafka.utils.TestUtils$$anonfun$createTopic$2.apply(TestUtils.scala:330)
00:25:22.176         at kafka.utils.TestUtils$$anonfun$createTopic$2.apply(TestUtils.scala:329)
00:25:22.176         at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)
00:25:22.176         at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)
00:25:22.176         at scala.collection.Iterator$class.foreach(Iterator.scala:891)
00:25:22.176         at scala.collection.AbstractIterator.foreach(Iterator.scala:1334)
00:25:22.176         at scala.collection.MapLike$DefaultKeySet.foreach(MapLike.scala:174)
00:25:22.176         at scala.collection.TraversableLike$class.map(TraversableLike.scala:234)
00:25:22.176         at scala.collection.AbstractSet.scala$collection$SetLike$$super$map(Set.scala:47)
00:25:22.176         at scala.collection.SetLike$class.map(SetLike.scala:92)
00:25:22.176         at scala.collection.AbstractSet.map(Set.scala:47)
00:25:22.176         at kafka.utils.TestUtils$.createTopic(TestUtils.scala:329)
00:25:22.176         at kafka.utils.TestUtils$.createTopic(TestUtils.scala:312)
00:25:22.176         at kafka.api.CustomQuotaCallbackTest.createTopic(CustomQuotaCallbackTest.scala:180)
00:25:22.176         at kafka.api.CustomQuotaCallbackTest.testCustomQuotaCallback(CustomQuotaCallbackTest.scala:135)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;00:22:28.075 kafka.api.SaslSslAdminClientIntegrationTest &amp;gt; testAclDescribe FAILED
00:22:28.075     org.junit.runners.model.TestTimedOutException: test timed out after 120000 milliseconds
00:22:28.075         at java.base@11/java.io.FileDescriptor.sync(Native Method)
00:22:28.075         at app//jdbm.recman.TransactionManager.sync(TransactionManager.java:385)
00:22:28.075         at app//jdbm.recman.TransactionManager.close(TransactionManager.java:405)
00:22:28.075         at app//jdbm.recman.TransactionManager.synchronizeLogFromMemory(TransactionManager.java:173)
00:22:28.075         at app//jdbm.recman.TransactionManager.shutdown(TransactionManager.java:395)
00:22:28.075         at app//jdbm.recman.RecordFile.close(RecordFile.java:365)
00:22:28.075         at app//jdbm.recman.BaseRecordManager.close(BaseRecordManager.java:167)
00:22:28.075         at app//jdbm.recman.CacheRecordManager.close(CacheRecordManager.java:297)
00:22:28.075         at app//org.apache.directory.server.core.partition.impl.btree.jdbm.JdbmIndex.close(JdbmIndex.java:580)
00:22:28.075         at app//org.apache.directory.server.core.partition.impl.btree.AbstractBTreePartition.doDestroy(AbstractBTreePartition.java:524)
00:22:28.075         at app//org.apache.directory.server.core.partition.impl.btree.jdbm.JdbmPartition.doDestroy(JdbmPartition.java:744)
00:22:28.075         at app//org.apache.directory.server.core.api.partition.AbstractPartition.destroy(AbstractPartition.java:153)
00:22:28.075         at app//org.apache.directory.server.core.shared.partition.DefaultPartitionNexus.removeContextPartition(DefaultPartitionNexus.java:886)
00:22:28.075         at app//org.apache.directory.server.core.shared.partition.DefaultPartitionNexus.doDestroy(DefaultPartitionNexus.java:287)
00:22:28.075         at app//org.apache.directory.server.core.api.partition.AbstractPartition.destroy(AbstractPartition.java:153)
00:22:28.075         at app//org.apache.directory.server.core.DefaultDirectoryService.shutdown(DefaultDirectoryService.java:1313)
00:22:28.075         at app//kafka.security.minikdc.MiniKdc.stop(MiniKdc.scala:278)
00:22:28.075         at app//kafka.api.SaslSetup$class.closeSasl(SaslSetup.scala:118)
00:22:28.075         at app//kafka.api.SaslSslAdminClientIntegrationTest.closeSasl(SaslSslAdminClientIntegrationTest.scala:34)
00:22:28.075         at app//kafka.api.SaslSslAdminClientIntegrationTest.tearDown(SaslSslAdminClientIntegrationTest.scala:91)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;00:22:30.775 kafka.tools.MirrorMakerIntegrationTest &amp;gt; testCommaSeparatedRegex FAILED
00:22:30.775     kafka.tools.MirrorMaker$NoRecordsException
00:22:30.776         at kafka.tools.MirrorMaker$ConsumerWrapper.receive(MirrorMaker.scala:483)
00:22:30.776         at kafka.tools.MirrorMakerIntegrationTest$$anonfun$testCommaSeparatedRegex$1.apply$mcZ$sp(MirrorMakerIntegrationTest.scala:92)
00:22:30.776         at kafka.utils.TestUtils$.waitUntilTrue(TestUtils.scala:738)
00:22:30.776         at kafka.tools.MirrorMakerIntegrationTest.testCommaSeparatedRegex(MirrorMakerIntegrationTest.scala:90)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It&apos;s not clear whether there&apos;s something wrong with the tests that made the job fail (especially the one that started but didn&apos;t end), or if there&apos;s something wrong with the build machine that made the tests fail.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached the console output for completeness.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13194223">KAFKA-7553</key>
            <summary>Jenkins PR tests hung</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vvcephei">John Roesler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Oct 2018 19:10:36 +0000</created>
                <updated>Sat, 17 Aug 2019 17:22:19 +0000</updated>
                            <resolved>Sat, 17 Aug 2019 17:22:19 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16669285" author="hachikuji" created="Tue, 30 Oct 2018 20:22:03 +0000"  >&lt;p&gt;I investigated a few additional hanging builds and also observed `testLowMaxFetchSizeForRequestAndPartition` hanging. Curiously it only seems to happen when the PR builder runs (AFAICT).&lt;/p&gt;</comment>
                            <comment id="16670680" author="vvcephei" created="Wed, 31 Oct 2018 20:25:40 +0000"  >&lt;p&gt;Weird.&lt;/p&gt;

&lt;p&gt;FWIW, It happened again to me on the same PR.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12946443/12946443_consoleText-2.txt&quot; title=&quot;consoleText-2.txt attached to KAFKA-7553&quot;&gt;consoleText-2.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16670732" author="hachikuji" created="Wed, 31 Oct 2018 21:10:42 +0000"  >&lt;p&gt;I submitted a patch to fix what I suspected to be the cause of the blocking: &lt;a href=&quot;https://github.com/apache/kafka/pull/5859&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5859&lt;/a&gt;. We got the expected failure in `testLowMaxFetchSizeForRequestAndPartition`. Now we have a trace to work with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError: Timed out before consuming expected 2700 records. The number consumed was 2550.
	at kafka.utils.TestUtils$.fail(TestUtils.scala:351)
	at kafka.utils.TestUtils$.waitUntilTrue(TestUtils.scala:761)
	at kafka.utils.TestUtils$.pollRecordsUntilTrue(TestUtils.scala:737)
	at kafka.api.BaseConsumerTest.consumeRecords(BaseConsumerTest.scala:188)
	at kafka.api.PlaintextConsumerTest.testLowMaxFetchSizeForRequestAndPartition(PlaintextConsumerTest.scala:793)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16909774" author="ijuma" created="Sat, 17 Aug 2019 17:22:19 +0000"  >&lt;p&gt;I&apos;m going to mark this as fixed since this is pretty old. I have seen a few cases of builds timing out more recently, but it&apos;s a new issue and not this one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12946443" name="consoleText-2.txt" size="2464839" author="vvcephei" created="Wed, 31 Oct 2018 20:25:44 +0000"/>
                            <attachment id="12945640" name="consoleText.txt" size="2446310" author="vvcephei" created="Thu, 25 Oct 2018 19:10:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3znbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>