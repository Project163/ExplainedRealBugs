<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:16:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5117] Kafka Connect REST endpoints reveal Password typed values</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5117</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;A Kafka Connect connector can specify ConfigDef keys as type of Password. This type was added to prevent logging the values (instead &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;hidden&amp;#93;&lt;/span&gt;&quot; is logged).&lt;/p&gt;

&lt;p&gt;This change does not apply to the values returned by executing a GET on &lt;tt&gt;connectors/{connector-name&lt;/tt&gt;} and &lt;tt&gt;connectors/{connector-name}/config&lt;/tt&gt;. This creates an easily accessible way for an attacker who has infiltrated your network to gain access to potential secrets that should not be available.&lt;/p&gt;

&lt;p&gt;I have started on a code change that addresses this issue by parsing the config values through the ConfigDef for the connector and returning their output instead (which leads to the masking of Password typed configs as &lt;span class=&quot;error&quot;&gt;&amp;#91;hidden&amp;#93;&lt;/span&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13066406">KAFKA-5117</key>
            <summary>Kafka Connect REST endpoints reveal Password typed values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ChrisEgerton">Chris Egerton</assignee>
                                    <reporter username="tholmes">Thomas Holmes</reporter>
                        <labels>
                            <label>needs-kip</label>
                    </labels>
                <created>Mon, 24 Apr 2017 17:22:59 +0000</created>
                <updated>Tue, 13 Aug 2019 15:02:46 +0000</updated>
                            <resolved>Wed, 23 Jan 2019 19:06:28 +0000</resolved>
                                    <version>0.10.2.0</version>
                                    <fixVersion>2.0.2</fixVersion>
                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>connect</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="16001717" author="bharatviswa" created="Mon, 8 May 2017 22:54:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tholmes&quot; class=&quot;user-hover&quot; rel=&quot;tholmes&quot;&gt;tholmes&lt;/a&gt; are you still working on this?&lt;/p&gt;</comment>
                            <comment id="16017689" author="tholmes" created="Fri, 19 May 2017 17:18:24 +0000"  >&lt;p&gt;I had some code that seems to work but I&apos;m not very happy with it. I&apos;ll try to clean it up a bit and get a PR made so the approach/impact can be discussed.&lt;/p&gt;

&lt;p&gt;One main thing I was concerned about was whether or not the connectors use these endpoints to share task configuration. I was seeing some instability when running my code change so I am unsure if it was related or not.  I didn&apos;t get a chance to fully diagnose the situation, though.&lt;/p&gt;</comment>
                            <comment id="16267400" author="githubbot" created="Mon, 27 Nov 2017 20:12:07 +0000"  >&lt;p&gt;GitHub user qiao-meng-zefr opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/4269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5117&quot; title=&quot;Kafka Connect REST endpoints reveal Password typed values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5117&quot;&gt;&lt;del&gt;KAFKA-5117&lt;/del&gt;&lt;/a&gt;: Add password masking for kafka connect REST endpoint&lt;/p&gt;

&lt;p&gt;    *More detailed description of your change,&lt;br/&gt;
    Mask all password type config parameter with &quot;*&quot; instead of displaying the plain text in kafka connect REST endpoint.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/qiao-meng-zefr/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/qiao-meng-zefr/kafka&lt;/a&gt; mask_password&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/4269.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4269.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4269&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 51665eae52eadb9e6db4107dffac12e0bd40585a&lt;br/&gt;
Author: Vincent Meng &amp;lt;qiao.meng@zefr.com&amp;gt;&lt;br/&gt;
Date:   2017-11-27T19:41:11Z&lt;/p&gt;

&lt;p&gt;    Add password masking&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16286014" author="rhauch" created="Mon, 11 Dec 2017 15:07:13 +0000"  >&lt;p&gt;This issue is requesting a change in a public API for several Connect REST methods, and therefore we&apos;re going to need a KIP for this change to make sure that all considerations are taken into account.&lt;/p&gt;</comment>
                            <comment id="16286021" author="rhauch" created="Mon, 11 Dec 2017 15:11:46 +0000"  >&lt;p&gt;BTW, the KIP doesn&apos;t have to be that complex, since this is a straighforward change. Just follow the process outlined &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/Kafka+Improvement+Proposals&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. The &quot;Migration Plan and Compatibility&quot; section of the KIP should highlight the fact that the public response of several methods will change to mask the password configuration values.&lt;/p&gt;</comment>
                            <comment id="16324215" author="rhauch" created="Fri, 12 Jan 2018 16:44:18 +0000"  >&lt;p&gt;So I&apos;m a bit concerned that simply masking the passwords will not be that advantageous. Sure, it might work if you&apos;re just managing your configuration files locally and then using the REST API with curl and thus never really needing to get configurations back out. But this change would likely break every management tool that is using the API to read, modify, and post configurations. Also, to maintain backward compatibility, we&apos;d need to introduce a config file that defaults to &lt;em&gt;not masking&lt;/em&gt; &amp;#8211; doesn&apos;t that kind of defeat the purpose?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-208%3A+Add+SSL+support+to+Kafka+Connect+REST+interface&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;KIP-208&lt;/a&gt; is already trying to add SSL/TLS support to the Connect REST API, and then adding (with a different KIP) ACLs support would mean you can control who can and cannot use different endpoints. That is definitely one approach to preventing exposure of passwords.&lt;/p&gt;

&lt;p&gt;Another approach is to avoid putting passwords in the configuration file in the first place. &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-6142&quot; title=&quot;Connect worker configurations and connector configurations should accept environment variables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-6142&quot;&gt;KAFKA-6142&lt;/a&gt; proposes adding support for variables in configuration files, and variables could be used in place of passwords to have the passwords resolved only upon deployment via some &quot;configuration transformer&quot; plugin.&lt;/p&gt;</comment>
                            <comment id="16331104" author="githubbot" created="Thu, 18 Jan 2018 20:02:11 +0000"  >&lt;p&gt;Tang8330 opened a new pull request #4441: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5117&quot; title=&quot;Kafka Connect REST endpoints reveal Password typed values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5117&quot;&gt;&lt;del&gt;KAFKA-5117&lt;/del&gt;&lt;/a&gt;: Password Mask to Kafka Connect REST Endpoint&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/4441&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4441&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#9888;&#65039;  WIP &#9888;&#65039; &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16606326" author="satyacool" created="Thu, 6 Sep 2018 19:50:18 +0000"  >&lt;p&gt;I would like to add couple of more points related to this KIP&lt;/p&gt;

&lt;p&gt;Currently i noticed even accessing end point&lt;/p&gt;

&lt;p&gt;connectors/{connector-name}/status is also hitting the configuration. I think this endpoint need not gather config information.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16640116" author="ewencp" created="Fri, 5 Oct 2018 17:33:00 +0000"  >&lt;p&gt;Going to close this since&#160;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-297%3A+Externalizing+Secrets+for+Connect+Configurations&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/KIP-297%3A+Externalizing+Secrets+for+Connect+Configurations&lt;/a&gt;&#160;addresses this problem. Feel free to reopen if that doesn&apos;t sufficiently address the issue.&lt;/p&gt;</comment>
                            <comment id="16687038" author="githubbot" created="Wed, 14 Nov 2018 19:53:14 +0000"  >&lt;p&gt;qiao-meng-zefr closed pull request #4269: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5117&quot; title=&quot;Kafka Connect REST endpoints reveal Password typed values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5117&quot;&gt;&lt;del&gt;KAFKA-5117&lt;/del&gt;&lt;/a&gt;: Add password masking for kafka connect REST endpoint&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/4269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4269&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java&lt;br/&gt;
index fbe0ae2afb2..9eb2def0c64 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java&lt;br/&gt;
+++ b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/AbstractHerder.java&lt;br/&gt;
@@ -184,6 +184,22 @@ public void resumeConnector(String connector) &lt;/p&gt;
{
         configBackingStore.putTargetState(connector, TargetState.STARTED);
     }

&lt;p&gt;+    @Override&lt;br/&gt;
+    public Map&amp;lt;String, String&amp;gt; maskCredentials(String connName, Map&amp;lt;String, String&amp;gt; config) {&lt;br/&gt;
+        Map&amp;lt;String, String&amp;gt; newConfig = new LinkedHashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+        for (Map.Entry&amp;lt;String, String&amp;gt; entry : config.entrySet()) {&lt;br/&gt;
+            // Password.toString() will return the hidden value&lt;br/&gt;
+            String value = null;&lt;br/&gt;
+            if (entry.getValue() != null) &lt;/p&gt;
{
+                value = entry.getValue().toString();
+            }
&lt;p&gt;+&lt;br/&gt;
+            newConfig.put(entry.getKey(), value);&lt;br/&gt;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        return newConfig;&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
     @Override&lt;br/&gt;
     public Plugins plugins() {&lt;br/&gt;
         return worker.getPlugins();&lt;br/&gt;
diff --git a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/Herder.java b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/Herder.java&lt;br/&gt;
index 5dfb808f764..774dbaf8ca1 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/Herder.java&lt;br/&gt;
+++ b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/Herder.java&lt;br/&gt;
@@ -169,6 +169,14 @@&lt;br/&gt;
      */&lt;br/&gt;
     void resumeConnector(String connector);&lt;/p&gt;

&lt;p&gt;+    /**&lt;br/&gt;
+     * Goes through config parameters and replace password field value with &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;hidden&amp;quot;&amp;#93;&lt;/span&gt;&lt;br/&gt;
+     * @param connName name of the connector&lt;br/&gt;
+     * @param config configuration of the connector&lt;br/&gt;
+     * @return new map of the configurations, with password omitted from clear-text&lt;br/&gt;
+     */&lt;br/&gt;
+    Map&amp;lt;String, String&amp;gt; maskCredentials(String connName, Map&amp;lt;String, String&amp;gt; config);&lt;br/&gt;
+&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Returns a handle to the plugin factory used by this herder and its worker.&lt;br/&gt;
      *&lt;br/&gt;
diff --git a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/rest/resources/ConnectorsResource.java b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/rest/resources/ConnectorsResource.java&lt;br/&gt;
index 2c031245c06..6e19cc729a8 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/rest/resources/ConnectorsResource.java&lt;br/&gt;
+++ b/connect/runtime/src/main/java/org/apache/kafka/connect/runtime/rest/resources/ConnectorsResource.java&lt;br/&gt;
@@ -50,6 +50,7 @@&lt;br/&gt;
 import java.util.Collection;&lt;br/&gt;
 import java.util.List;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
 import java.util.concurrent.ExecutionException;&lt;br/&gt;
 import java.util.concurrent.TimeUnit;&lt;br/&gt;
 import java.util.concurrent.TimeoutException;&lt;br/&gt;
@@ -109,7 +110,8 @@ public ConnectorInfo getConnector(final @PathParam(&quot;connector&quot;) String connector&lt;br/&gt;
                                       final @QueryParam(&quot;forward&quot;) Boolean forward) throws Throwable 
{
         FutureCallback&amp;lt;ConnectorInfo&amp;gt; cb = new FutureCallback&amp;lt;&amp;gt;();
         herder.connectorInfo(connector, cb);
-        return completeOrForwardRequest(cb, &quot;/connectors/&quot; + connector, &quot;GET&quot;, null, forward);
+        ConnectorInfo connectorInfo = completeOrForwardRequest(cb, &quot;/connectors/&quot; + connector, &quot;GET&quot;, null, forward);
+        return new ConnectorInfo(connectorInfo.name(), herder.maskCredentials(connector, connectorInfo.config()), connectorInfo.tasks(), connectorInfo.type());
     }&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @GET&lt;br/&gt;
@@ -118,7 +120,8 @@ public ConnectorInfo getConnector(final @PathParam(&quot;connector&quot;) String connector&lt;br/&gt;
                                                   final @QueryParam(&quot;forward&quot;) Boolean forward) throws Throwable &lt;/p&gt;
{
         FutureCallback&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt; cb = new FutureCallback&amp;lt;&amp;gt;();
         herder.connectorConfig(connector, cb);
-        return completeOrForwardRequest(cb, &quot;/connectors/&quot; + connector + &quot;/config&quot;, &quot;GET&quot;, null, forward);
+        Map&amp;lt;String, String&amp;gt; config = completeOrForwardRequest(cb, &quot;/connectors/&quot; + connector + &quot;/config&quot;, &quot;GET&quot;, null, forward);
+        return herder.maskCredentials(connector, config);
     }

&lt;p&gt;     @GET&lt;br/&gt;
@@ -177,8 +180,14 @@ public Response resumeConnector(@PathParam(&quot;connector&quot;) String connector) {&lt;br/&gt;
                                          final @QueryParam(&quot;forward&quot;) Boolean forward) throws Throwable {&lt;br/&gt;
         FutureCallback&amp;lt;List&amp;lt;TaskInfo&amp;gt;&amp;gt; cb = new FutureCallback&amp;lt;&amp;gt;();&lt;br/&gt;
         herder.taskConfigs(connector, cb);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return completeOrForwardRequest(cb, &quot;/connectors/&quot; + connector + &quot;/tasks&quot;, &quot;GET&quot;, null, new TypeReference&amp;lt;List&amp;lt;TaskInfo&amp;gt;&amp;gt;() 
{
-        }
&lt;p&gt;, forward);&lt;br/&gt;
+        List&amp;lt;TaskInfo&amp;gt; taskInfoList = completeOrForwardRequest(cb, &quot;/connectors/&quot; + connector + &quot;/tasks&quot;, &quot;GET&quot;, null,&lt;br/&gt;
+                new TypeReference&amp;lt;List&amp;lt;TaskInfo&amp;gt;&amp;gt;() &lt;/p&gt;
{
+                }
&lt;p&gt;, forward);&lt;br/&gt;
+        List&amp;lt;TaskInfo&amp;gt; maskedTaskInfoList = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
+        for (TaskInfo taskInfo : taskInfoList) &lt;/p&gt;
{
+            maskedTaskInfoList.add(new TaskInfo(taskInfo.id(), herder.maskCredentials(connector, taskInfo.config())));
+        }
&lt;p&gt;+        return maskedTaskInfoList;&lt;br/&gt;
     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @POST&lt;br/&gt;
diff --git a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/rest/resources/ConnectorsResourceTest.java b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/rest/resources/ConnectorsResourceTest.java&lt;br/&gt;
index 89a221835ef..614eff9d585 100644&lt;br/&gt;
&amp;#8212; a/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/rest/resources/ConnectorsResourceTest.java&lt;br/&gt;
+++ b/connect/runtime/src/test/java/org/apache/kafka/connect/runtime/rest/resources/ConnectorsResourceTest.java&lt;br/&gt;
@@ -268,7 +268,10 @@ public void testDeleteConnectorNotFound() throws Throwable {&lt;/p&gt;

&lt;p&gt;     @Test&lt;br/&gt;
     public void testGetConnector() throws Throwable {&lt;br/&gt;
+        EasyMock.expect(herder.maskCredentials(CONNECTOR_NAME, CONNECTOR_CONFIG)).andReturn(CONNECTOR_CONFIG);&lt;br/&gt;
+&lt;br/&gt;
         final Capture&amp;lt;Callback&amp;lt;ConnectorInfo&amp;gt;&amp;gt; cb = Capture.newInstance();&lt;br/&gt;
+&lt;br/&gt;
         herder.connectorInfo(EasyMock.eq(CONNECTOR_NAME), EasyMock.capture(cb));&lt;br/&gt;
         expectAndCallbackResult(cb, new ConnectorInfo(CONNECTOR_NAME, CONNECTOR_CONFIG, CONNECTOR_TASK_NAMES,&lt;br/&gt;
             ConnectorType.SOURCE));&lt;br/&gt;
@@ -276,6 +279,7 @@ public void testGetConnector() throws Throwable {&lt;br/&gt;
         PowerMock.replayAll();&lt;/p&gt;

&lt;p&gt;         ConnectorInfo connInfo = connectorsResource.getConnector(CONNECTOR_NAME, FORWARD);&lt;br/&gt;
+&lt;br/&gt;
         assertEquals(new ConnectorInfo(CONNECTOR_NAME, CONNECTOR_CONFIG, CONNECTOR_TASK_NAMES, ConnectorType.SOURCE),&lt;br/&gt;
             connInfo);&lt;/p&gt;

&lt;p&gt;@@ -284,13 +288,15 @@ public void testGetConnector() throws Throwable {&lt;/p&gt;

&lt;p&gt;     @Test&lt;br/&gt;
     public void testGetConnectorConfig() throws Throwable {&lt;br/&gt;
+        EasyMock.expect(herder.maskCredentials(CONNECTOR_NAME, CONNECTOR_CONFIG)).andReturn(CONNECTOR_CONFIG);&lt;br/&gt;
+&lt;br/&gt;
         final Capture&amp;lt;Callback&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt;&amp;gt; cb = Capture.newInstance();&lt;br/&gt;
         herder.connectorConfig(EasyMock.eq(CONNECTOR_NAME), EasyMock.capture(cb));&lt;br/&gt;
         expectAndCallbackResult(cb, CONNECTOR_CONFIG);&lt;/p&gt;

&lt;p&gt;         PowerMock.replayAll();&lt;br/&gt;
-&lt;br/&gt;
         Map&amp;lt;String, String&amp;gt; connConfig = connectorsResource.getConnectorConfig(CONNECTOR_NAME, FORWARD);&lt;br/&gt;
+&lt;br/&gt;
         assertEquals(CONNECTOR_CONFIG, connConfig);&lt;/p&gt;

&lt;p&gt;         PowerMock.verifyAll();&lt;br/&gt;
@@ -298,6 +304,8 @@ public void testGetConnectorConfig() throws Throwable {&lt;/p&gt;

&lt;p&gt;     @Test(expected = NotFoundException.class)&lt;br/&gt;
     public void testGetConnectorConfigConnectorNotFound() throws Throwable {&lt;br/&gt;
+        EasyMock.expect(herder.maskCredentials(CONNECTOR_NAME, CONNECTOR_CONFIG)).andReturn(CONNECTOR_CONFIG);&lt;br/&gt;
+&lt;br/&gt;
         final Capture&amp;lt;Callback&amp;lt;Map&amp;lt;String, String&amp;gt;&amp;gt;&amp;gt; cb = Capture.newInstance();&lt;br/&gt;
         herder.connectorConfig(EasyMock.eq(CONNECTOR_NAME), EasyMock.capture(cb));&lt;br/&gt;
         expectAndCallbackException(cb, new NotFoundException(&quot;not found&quot;));&lt;br/&gt;
@@ -375,6 +383,10 @@ public void testCreateConnectorConfigNameMismatch() throws Throwable {&lt;/p&gt;

&lt;p&gt;     @Test&lt;br/&gt;
     public void testGetConnectorTaskConfigs() throws Throwable {&lt;br/&gt;
+        for (int i = 0; i &amp;lt; TASK_CONFIGS.size(); i++) &lt;/p&gt;
{
+            EasyMock.expect(herder.maskCredentials(CONNECTOR_NAME, TASK_CONFIGS.get(i))).andReturn(TASK_CONFIGS.get(i));
+        }
&lt;p&gt;+&lt;br/&gt;
         final Capture&amp;lt;Callback&amp;lt;List&amp;lt;TaskInfo&amp;gt;&amp;gt;&amp;gt; cb = Capture.newInstance();&lt;br/&gt;
         herder.taskConfigs(EasyMock.eq(CONNECTOR_NAME), EasyMock.capture(cb));&lt;br/&gt;
         expectAndCallbackResult(cb, TASK_INFOS);&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16737143" author="rhauch" created="Tue, 8 Jan 2019 14:02:57 +0000"  >&lt;p&gt;I&apos;m reopening this because there appears to be a bug in the worker that incorrectly returns the externalized secrets when getting the connector config from the REST API. Instead, the REST API should return the config with the raw configuration values, including those of the form `${provider:path:key}`.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-297%3A+Externalizing+Secrets+for+Connect+Configurations&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;KIP-297&lt;/a&gt; is actually not really clear on whether the REST API will be affected, and so IMO its behavior should not have been changed by the implementation of KIP-297 and should return the connector configuration submitted via PUT and stored by the worker as before KIP-297. Only this behavior really works with tooling that edits connector configurations via GET and PUT operations. IMO, &lt;b&gt;any other behavioral changes should be determined through a new KIP.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Here are the details. Consider a standalone worker config defines a config provider (using the example `&lt;tt&gt;FileConfigProvider&lt;/tt&gt;` added by KIP-297):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
# Define a config provider that reads from any file
config.providers=file
config.providers.file.class=org.apache.kafka.common.config.provider.FileConfigProvider
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then, create a connector with at least one property with an externalized placeholder for its value:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
name=my-connector
...
connection.user=foobar
connection.password=${file:/path/to/secret.properties:db.password}
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;where the `&lt;tt&gt;/path/to/secrets.properties&lt;/tt&gt;` file contains:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
db.password=my-secret
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;then Connect will use the FileConfigProvider to replace the placeholder on the `&lt;tt&gt;connection.password&lt;/tt&gt;` value with the `&lt;tt&gt;db.password&lt;/tt&gt;` property in the  `&lt;tt&gt;/path/to/secrets.properties&lt;/tt&gt;` file &lt;b&gt;before&lt;/b&gt; these properties are given to the connector upon startup.&lt;/p&gt;

&lt;p&gt;In fact this works just fine. The problem is that when we perform a `&lt;tt&gt;GET&lt;/tt&gt; connectors/my-connector/` we get the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;my-connector&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;config&quot;&lt;/span&gt;: {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;connector.class&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;io.confluent.connect.jdbc.JdbcSourceConnector&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;mode&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;incrementing&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;incrementing.column.name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;topic.prefix&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;jdbc-&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;connection.password&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;my-secret&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;connection.user&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;foobar&quot;&lt;/span&gt;,
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note how the `&lt;tt&gt;connection.password&lt;/tt&gt;` property is `&lt;tt&gt;my-secret&lt;/tt&gt;` but should instead be `&lt;tt&gt;${&lt;a href=&quot;file:/path/to/secret.properties:db.password&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/path/to/secret.properties:db.password&lt;/a&gt;&lt;/tt&gt;}`:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;my-connector&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;config&quot;&lt;/span&gt;: {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;connector.class&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;io.confluent.connect.jdbc.JdbcSourceConnector&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;mode&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;incrementing&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;incrementing.column.name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;topic.prefix&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;jdbc-&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;connection.password&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;${file:/path/to/secret.properties:db.password}&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;connection.user&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;foobar&quot;&lt;/span&gt;,
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


</comment>
                            <comment id="16750334" author="githubbot" created="Wed, 23 Jan 2019 19:02:54 +0000"  >&lt;p&gt;ewencp commented on pull request #6129: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5117&quot; title=&quot;Kafka Connect REST endpoints reveal Password typed values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5117&quot;&gt;&lt;del&gt;KAFKA-5117&lt;/del&gt;&lt;/a&gt;: Stop resolving externalized configs in Connect REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6129&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16750343" author="chrisegerton" created="Wed, 23 Jan 2019 19:06:28 +0000"  >&lt;p&gt;Resolved with&#160;&lt;a href=&quot;https://github.com/apache/kafka/pull/6129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6129&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16830783" author="githubbot" created="Wed, 1 May 2019 00:53:16 +0000"  >&lt;p&gt;rhauch commented on pull request #4441: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5117&quot; title=&quot;Kafka Connect REST endpoints reveal Password typed values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5117&quot;&gt;&lt;del&gt;KAFKA-5117&lt;/del&gt;&lt;/a&gt;: Password Mask to Kafka Connect REST Endpoint&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/4441&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/4441&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13158008">KAFKA-6886</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13249790">KAFKA-8774</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3e0qn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>