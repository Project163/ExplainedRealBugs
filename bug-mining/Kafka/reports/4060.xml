<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:41:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-18034] CommitRequestManager should fail pending requests on fatal coordinator errors</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-18034</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;The commit request manager requires a known coordinator to send requests fetch and commit offsets (sync and async).&lt;/p&gt;

&lt;p&gt;If there is no known coordinator, the commit manager simply returns no requests on poll, but it keeps pending requests in hand, to be send as soon as there is a known coordinator. This ensures that on recoverable errors the requests are sent. But if there is a fatal error looking up a coordinator (ie. GroupAuthorizationFailed), the commit manager does not fail the pending requests it has in hand. This means that api calls that generate commit/fetch requests will not be aware of the error.&lt;/p&gt;

&lt;p&gt;We should consider if there is a fatal error with the coordinator when there is a commitManager poll that finds not coordinator&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka/blob/50c15b94c94fbe8f964703c057963b38100b0bd6/clients/src/main/java/org/apache/kafka/clients/consumer/internals/CommitRequestManager.java#L181&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/50c15b94c94fbe8f964703c057963b38100b0bd6/clients/src/main/java/org/apache/kafka/clients/consumer/internals/CommitRequestManager.java#L181&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In that case, we should fail all&#160;pendingRequests to ensure that the calling API funcs know about the error. This should allow us to enable auth tests that are currently failing for the new consumer due to this gap (expecting GroupAuthException on consumer api calls). Ex.&#160; &lt;a href=&quot;https://github.com/apache/kafka/blob/50c15b94c94fbe8f964703c057963b38100b0bd6/core/src/test/scala/integration/kafka/api/AuthorizerIntegrationTest.scala#L1277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/50c15b94c94fbe8f964703c057963b38100b0bd6/core/src/test/scala/integration/kafka/api/AuthorizerIntegrationTest.scala#L1277&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13599158">KAFKA-18034</key>
            <summary>CommitRequestManager should fail pending requests on fatal coordinator errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="m1a2st">&#40643;&#31459;&#38525;</assignee>
                                    <reporter username="lianetm">Lianet Magrans</reporter>
                        <labels>
                            <label>consumer-threading-refactor</label>
                            <label>kip-848-client-support</label>
                    </labels>
                <created>Mon, 18 Nov 2024 17:01:54 +0000</created>
                <updated>Thu, 30 Jan 2025 21:58:49 +0000</updated>
                            <resolved>Thu, 30 Jan 2025 16:29:30 +0000</resolved>
                                                    <fixVersion>4.0.0</fixVersion>
                                    <component>clients</component>
                    <component>consumer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17899197" author="JIRAUSER300183" created="Mon, 18 Nov 2024 17:07:37 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=m1a2st&quot; class=&quot;user-hover&quot; rel=&quot;m1a2st&quot;&gt;m1a2st&lt;/a&gt; , assigned this to you given that is splitting out this different issue/fix from what you are addressing on &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-17696&quot; title=&quot;New consumer background operations unaware of metadata errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-17696&quot;&gt;&lt;del&gt;KAFKA-17696&lt;/del&gt;&lt;/a&gt;, and you have an initial approach already.&#160; Makes sense? Thanks!&lt;/p&gt;</comment>
                            <comment id="17899302" author="JIRAUSER305187" created="Tue, 19 Nov 2024 00:13:18 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lianetm&quot; class=&quot;user-hover&quot; rel=&quot;lianetm&quot;&gt;lianetm&lt;/a&gt; , I will handle this issue, Thanks for your assign&#160;&lt;/p&gt;</comment>
                            <comment id="17901325" author="kirktrue" created="Tue, 26 Nov 2024 22:59:48 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=m1a2st&quot; class=&quot;user-hover&quot; rel=&quot;m1a2st&quot;&gt;m1a2st&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17902809" author="kirktrue" created="Wed, 4 Dec 2024 02:30:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=m1a2st&quot; class=&quot;user-hover&quot; rel=&quot;m1a2st&quot;&gt;m1a2st&lt;/a&gt;&#8212;how&apos;s the progress on this ticket?&lt;/p&gt;</comment>
                            <comment id="17902817" author="JIRAUSER305187" created="Wed, 4 Dec 2024 03:27:40 +0000"  >&lt;p&gt;I will open PR in these day &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17902976" author="JIRAUSER305187" created="Wed, 4 Dec 2024 11:56:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kirktrue&quot; class=&quot;user-hover&quot; rel=&quot;kirktrue&quot;&gt;kirktrue&lt;/a&gt; I think this PR should wait for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-17696&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-17696&lt;/a&gt;&lt;br/&gt;
WDYT?&lt;/p&gt;</comment>
                            <comment id="17903179" author="kirktrue" created="Thu, 5 Dec 2024 04:05:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think this PR should wait for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-17696&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-17696&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Is the idea that the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-17696&quot; title=&quot;New consumer background operations unaware of metadata errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-17696&quot;&gt;&lt;del&gt;KAFKA-17696&lt;/del&gt;&lt;/a&gt; will fix this Jira too (or at least make this Jira easier to fix)?&lt;/p&gt;</comment>
                            <comment id="17903180" author="kirktrue" created="Thu, 5 Dec 2024 04:07:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=m1a2st&quot; class=&quot;user-hover&quot; rel=&quot;m1a2st&quot;&gt;m1a2st&lt;/a&gt;&#8212;apologies if my previous inquiry about the progress gave a bad impression. Thanks for taking on this (and other) tasks! It&apos;s super helpful! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17903185" author="JIRAUSER305187" created="Thu, 5 Dec 2024 05:41:53 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kirktrue&quot; class=&quot;user-hover&quot; rel=&quot;kirktrue&quot;&gt;kirktrue&lt;/a&gt;, The release date for version 4.0 is approaching. I understand your concerns, and I will address this issue as soon as possible.&lt;/p&gt;</comment>
                            <comment id="17912593" author="JIRAUSER300183" created="Mon, 13 Jan 2025 16:16:01 +0000"  >&lt;p&gt;Merged to trunk and cherry-picked to 4.0 branch &lt;a href=&quot;https://github.com/apache/kafka/commit/46b825c9e651ee3e901e97d43fa7bf2ba10ff749&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/commit/46b825c9e651ee3e901e97d43fa7bf2ba10ff749&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17913215" author="JIRAUSER305181" created="Wed, 15 Jan 2025 08:37:42 +0000"  >&lt;p&gt;Reopened due to &lt;a href=&quot;https://github.com/apache/kafka/pull/18544&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/18544&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17922533" author="JIRAUSER300183" created="Thu, 30 Jan 2025 21:58:29 +0000"  >&lt;p&gt;PR with initial changes + fix needed after reopening has been merged to trunk and 4.0&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka/pull/18548&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/18548&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=frankvicky&quot; class=&quot;user-hover&quot; rel=&quot;frankvicky&quot;&gt;frankvicky&lt;/a&gt; !&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1smhk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>