<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:28:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-12336] custom stream naming does not work while calling stream[K, V](topicPattern: Pattern) API with named Consumed parameter </title>
                <link>https://issues.apache.org/jira/browse/KAFKA-12336</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In our Scala application I am trying to implement custom naming for Kafka Streams application nodes.&lt;/p&gt;

&lt;p&gt;We are using topicPattern for our stream source.&lt;/p&gt;

&lt;p&gt;Here is an API which I am calling:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
val topicsPattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;t-[A-Za-z0-9-].suffix&quot;&lt;/span&gt;
val operations: KStream[MyKey, MyValue] =
  builder.stream[MyKey, MyValue](Pattern.compile(topicsPattern))(
    Consumed.`with`[MyKey, MyValue].withName(&lt;span class=&quot;code-quote&quot;&gt;&quot;my-fancy-name&quot;&lt;/span&gt;)
  )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;Despite the fact that I am providing Consumed with custom name the topology describe still show &quot;KSTREAM-SOURCE-0000000000&quot; as name for our stream source.&lt;/p&gt;

&lt;p&gt;It is not a problem if I just use a name for topic. But our application needs to get messages from set of topics based on topicname pattern matching.&lt;/p&gt;

&lt;p&gt;After checking the kakfa code I see that&lt;/p&gt;

&lt;p&gt;org.apache.kafka.streams.kstream.internals.InternalStreamBuilder (on line 103) has a bug:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;K, V&amp;gt; KStream&amp;lt;K, V&amp;gt; stream(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Pattern topicPattern,
                                   &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ConsumedInternal&amp;lt;K, V&amp;gt; consumed) {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = newProcessorName(KStreamImpl.SOURCE_NAME);
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; StreamSourceNode&amp;lt;K, V&amp;gt; streamPatternSourceNode = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamSourceNode&amp;lt;&amp;gt;(name, topicPattern, consumed);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;node name construction does not take into account the name of consumed parameter.&lt;/p&gt;

&lt;p&gt;For example code for another stream api call with topic name does it correctly:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NamedInternal(consumed.name()).orElseGenerateWithPrefix(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, KStreamImpl.SOURCE_NAME);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13359324">KAFKA-12336</key>
            <summary>custom stream naming does not work while calling stream[K, V](topicPattern: Pattern) API with named Consumed parameter </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Geordie">GeordieMai</assignee>
                                    <reporter username="ramazanyich">Ramil Israfilov</reporter>
                        <labels>
                            <label>easy-fix</label>
                            <label>newbie</label>
                    </labels>
                <created>Thu, 18 Feb 2021 13:37:17 +0000</created>
                <updated>Thu, 24 Jun 2021 16:56:19 +0000</updated>
                            <resolved>Thu, 24 Jun 2021 16:09:38 +0000</resolved>
                                    <version>2.7.0</version>
                                    <fixVersion>2.8.1</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17368949" author="bbejeck" created="Thu, 24 Jun 2021 16:10:50 +0000"  >&lt;p&gt;merged into trunk&lt;/p&gt;</comment>
                            <comment id="17368968" author="bbejeck" created="Thu, 24 Jun 2021 16:56:01 +0000"  >&lt;p&gt;cherry-picked to 2.8&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nsqo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>