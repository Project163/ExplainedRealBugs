<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:35:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-473] Use getMetadata Api in ZookeeperConsumerConnector</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-473</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Currently, ZookeeperConsumerConnector gets topic metadata from ZK directly. It&apos;s better to use the getMetadata Api since it&apos;s batched. This is especially helpful if the consumer client is in a different data center.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12604077">KAFKA-473</key>
            <summary>Use getMetadata Api in ZookeeperConsumerConnector</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yeyangever">Yang Ye</assignee>
                                    <reporter username="junrao">Jun Rao</reporter>
                        <labels>
                            <label>newbie</label>
                            <label>optimization</label>
                    </labels>
                <created>Mon, 20 Aug 2012 16:05:17 +0000</created>
                <updated>Thu, 27 Sep 2012 01:20:37 +0000</updated>
                            <resolved>Thu, 27 Sep 2012 01:20:30 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="172800">48h</timeoriginalestimate>
                            <timeestimate seconds="172800">48h</timeestimate>
                                        <comments>
                            <comment id="13460977" author="yeyangever" created="Sat, 22 Sep 2012 01:07:16 +0000"  >
&lt;p&gt;1. create a utility function &quot;getTopicMetadata&quot; in Utils.scala to get topic metadata, and let the BrokerPartitionInfo and leaderFinderThread use it&lt;/p&gt;

&lt;p&gt;2. a function getConsumerTopicMaps() in zkUtils() is never used, remove it.&lt;/p&gt;

&lt;p&gt;3. potentially still use the function in consumer rebalancing&lt;/p&gt;</comment>
                            <comment id="13461894" author="junrao" created="Mon, 24 Sep 2012 16:29:53 +0000"  >&lt;p&gt;Thanks for patch v1. Looks good overall. Some comments:&lt;/p&gt;

&lt;p&gt;1. ProducerPool.createSyncProducer(): It&apos;s probably better to use the input parameter config an Option than allowing it to be null.&lt;/p&gt;

&lt;p&gt;2. Utils.getBrokerPartitionInfo(): We should probably rename this to something like getTopicMetadata() and change log messages with &quot;broker partition metadata&quot; to &quot;topic metadata&quot;.&lt;/p&gt;

&lt;p&gt;3. It&apos;s probably worthwhile to use the getTopicMetadata utility to replace getPartitionsForTopics in ZookeeperConsumerConnector.rebalance(). This saves the reading of all partitions. We still need to do 1 delete and 1 write to ZK for each partition that a consumer owns. However, that&apos;s only a subset of the partitions.&lt;/p&gt;</comment>
                            <comment id="13462321" author="yeyangever" created="Tue, 25 Sep 2012 01:01:41 +0000"  >
&lt;p&gt;1. Use the api call at producer side &lt;br/&gt;
2. use &quot;Option&lt;span class=&quot;error&quot;&gt;&amp;#91;ProducerConfig&amp;#93;&lt;/span&gt;&quot; as parameter to createSyncProducer method, handle case where no producerConfig or target broker id is provided&lt;/p&gt;</comment>
                            <comment id="13462985" author="junrao" created="Tue, 25 Sep 2012 17:14:10 +0000"  >&lt;p&gt;Thanks for patch v2. A couple of more comments:&lt;/p&gt;

&lt;p&gt;20. What does the following line in ZookeeperConsumerConnector.rebalance() do?&lt;br/&gt;
        (topic, partitions)&lt;/p&gt;

&lt;p&gt;21. ProducerPool.createSyncProducer(configOpt: Option&lt;span class=&quot;error&quot;&gt;&amp;#91;ProducerConfig&amp;#93;&lt;/span&gt;): This one always expects a ProducerConfig. So, we shouldn&apos;t use Option. Also, this method seems not to be used anywhere. We can just remove it.&lt;/p&gt;</comment>
                            <comment id="13463381" author="yeyangever" created="Wed, 26 Sep 2012 00:01:36 +0000"  >&lt;p&gt;&lt;br/&gt;
Thank you for pointing out the issues. This patch should look good&lt;/p&gt;</comment>
                            <comment id="13464294" author="yeyangever" created="Wed, 26 Sep 2012 23:44:27 +0000"  >&lt;p&gt;&lt;br/&gt;
v3 plus replacing leader id look up from zookeeper with reading from the cache&lt;/p&gt;</comment>
                            <comment id="13464342" author="junrao" created="Thu, 27 Sep 2012 01:20:30 +0000"  >&lt;p&gt;+1 on patch v4. Committed to 0.8.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12546143" name="kafka_473_v1.diff" size="9460" author="yeyangever" created="Sat, 22 Sep 2012 01:07:16 +0000"/>
                            <attachment id="12546420" name="kafka_473_v2.diff" size="13031" author="yeyangever" created="Tue, 25 Sep 2012 01:01:41 +0000"/>
                            <attachment id="12546617" name="kafka_473_v3.diff" size="12671" author="yeyangever" created="Wed, 26 Sep 2012 00:01:36 +0000"/>
                            <attachment id="12546779" name="kafka_473_v4.diff" size="15736" author="yeyangever" created="Wed, 26 Sep 2012 23:44:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>291940</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rhqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>158517</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>