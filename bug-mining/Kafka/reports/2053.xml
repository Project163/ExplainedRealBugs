<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:15:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-5066] KafkaMetricsConfig properties and description notably missing from documentation</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-5066</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;`KafkaMetrics` implementations do not appear to be exposed to all the Yammer metrics exposed to implementations of the `KafkaMetricsReporter` &lt;/p&gt;

&lt;p&gt;Currently the docs only cover the `metric.reporters` which allows clients to configure a `MetricsReporter` plugin. Clients are then disappointed to learn that this affords them access to only a small subset of metrics. &lt;/p&gt;

&lt;p&gt;Proper monitoring of the broker requires access to the Yammer metrics which clients can gain access to with a `KafkaMetricsReporter` plugin. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="13063797">KAFKA-5066</key>
            <summary>KafkaMetricsConfig properties and description notably missing from documentation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Ryan P">Ryan P</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Apr 2017 14:06:18 +0000</created>
                <updated>Tue, 25 Sep 2018 13:47:49 +0000</updated>
                            <resolved>Tue, 25 Sep 2018 13:47:49 +0000</resolved>
                                                    <fixVersion>2.1.0</fixVersion>
                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16590719" author="githubbot" created="Thu, 23 Aug 2018 19:27:45 +0000"  >&lt;p&gt;omkreddy opened a new pull request #5563: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5066&quot; title=&quot;KafkaMetricsConfig properties and description notably missing from documentation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5066&quot;&gt;&lt;del&gt;KAFKA-5066&lt;/del&gt;&lt;/a&gt;: Add KafkaMetricsConfig (Yammer metrics reporter) props to documentation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5563&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5563&lt;/a&gt;&lt;/p&gt;




&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16626775" author="githubbot" created="Tue, 25 Sep 2018 05:04:52 +0000"  >&lt;p&gt;lindong28 closed pull request #5563: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-5066&quot; title=&quot;KafkaMetricsConfig properties and description notably missing from documentation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-5066&quot;&gt;&lt;del&gt;KAFKA-5066&lt;/del&gt;&lt;/a&gt;: Add KafkaMetricsConfig (Yammer metrics reporters) props to documentation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/5563&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/5563&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/core/src/main/scala/kafka/metrics/KafkaMetricsConfig.scala b/core/src/main/scala/kafka/metrics/KafkaMetricsConfig.scala&lt;br/&gt;
index ad9eb20f3e7..a3a21bdbca0 100755&lt;br/&gt;
&amp;#8212; a/core/src/main/scala/kafka/metrics/KafkaMetricsConfig.scala&lt;br/&gt;
+++ b/core/src/main/scala/kafka/metrics/KafkaMetricsConfig.scala&lt;br/&gt;
@@ -20,7 +20,8 @@&lt;/p&gt;

&lt;p&gt; package kafka.metrics&lt;/p&gt;

&lt;p&gt;-import kafka.utils.&lt;/p&gt;
{VerifiableProperties, CoreUtils}
&lt;p&gt;+import kafka.server.&lt;/p&gt;
{Defaults, KafkaConfig}
&lt;p&gt;+import kafka.utils.&lt;/p&gt;
{CoreUtils, VerifiableProperties}

&lt;p&gt; class KafkaMetricsConfig(props: VerifiableProperties) {&lt;/p&gt;

&lt;p&gt;@@ -28,10 +29,12 @@ class KafkaMetricsConfig(props: VerifiableProperties) &lt;/p&gt;
{
    * Comma-separated list of reporter types. These classes should be on the
    * classpath and will be instantiated at run-time.
    */
-  val reporters = CoreUtils.parseCsvList(props.getString(&quot;kafka.metrics.reporters&quot;, &quot;&quot;))
+  val reporters = CoreUtils.parseCsvList(props.getString(KafkaConfig.KafkaMetricsReporterClassesProp,
+    Defaults.KafkaMetricReporterClasses))
 
   /**
    * The metrics polling interval (in seconds).
    */
-  val pollingIntervalSecs = props.getInt(&quot;kafka.metrics.polling.interval.secs&quot;, 10)
+  val pollingIntervalSecs = props.getInt(KafkaConfig.KafkaMetricsPollingIntervalSecondsProp,
+    Defaults.KafkaMetricsPollingIntervalSeconds)
 }
&lt;p&gt;diff --git a/core/src/main/scala/kafka/server/KafkaConfig.scala b/core/src/main/scala/kafka/server/KafkaConfig.scala&lt;br/&gt;
index 1bc9707fa0b..90225024bfc 100755&lt;br/&gt;
&amp;#8212; a/core/src/main/scala/kafka/server/KafkaConfig.scala&lt;br/&gt;
+++ b/core/src/main/scala/kafka/server/KafkaConfig.scala&lt;br/&gt;
@@ -203,6 +203,11 @@ object Defaults {&lt;br/&gt;
   val MetricReporterClasses = &quot;&quot;&lt;br/&gt;
   val MetricRecordingLevel = Sensor.RecordingLevel.INFO.toString()&lt;/p&gt;

&lt;p&gt;+&lt;br/&gt;
+  /** ********* Kafka Yammer Metrics Reporter Configuration ***********/&lt;br/&gt;
+  val KafkaMetricReporterClasses = &quot;&quot;&lt;br/&gt;
+  val KafkaMetricsPollingIntervalSeconds = 10&lt;br/&gt;
+&lt;br/&gt;
   /** ********* SSL configuration ***********/&lt;br/&gt;
   val SslProtocol = SslConfigs.DEFAULT_SSL_PROTOCOL&lt;br/&gt;
   val SslEnabledProtocols = SslConfigs.DEFAULT_SSL_ENABLED_PROTOCOLS&lt;br/&gt;
@@ -410,6 +415,10 @@ object KafkaConfig {&lt;br/&gt;
   val MetricReporterClassesProp: String = CommonClientConfigs.METRIC_REPORTER_CLASSES_CONFIG&lt;br/&gt;
   val MetricRecordingLevelProp: String = CommonClientConfigs.METRICS_RECORDING_LEVEL_CONFIG&lt;/p&gt;

&lt;p&gt;+  /** ********* Kafka Yammer Metrics Reporters Configuration ***********/&lt;br/&gt;
+  val KafkaMetricsReporterClassesProp = &quot;kafka.metrics.reporters&quot;&lt;br/&gt;
+  val KafkaMetricsPollingIntervalSecondsProp = &quot;kafka.metrics.polling.interval.secs&quot;&lt;br/&gt;
+&lt;br/&gt;
   /** ******** Common Security Configuration *************/&lt;br/&gt;
   val PrincipalBuilderClassProp = BrokerSecurityConfigs.PRINCIPAL_BUILDER_CLASS_CONFIG&lt;/p&gt;

&lt;p&gt;@@ -720,6 +729,17 @@ object KafkaConfig {&lt;br/&gt;
   val MetricReporterClassesDoc = CommonClientConfigs.METRIC_REPORTER_CLASSES_DOC&lt;br/&gt;
   val MetricRecordingLevelDoc = CommonClientConfigs.METRICS_RECORDING_LEVEL_DOC&lt;/p&gt;

&lt;p&gt;+&lt;br/&gt;
+  /** ********* Kafka Yammer Metrics Reporter Configuration ***********/&lt;br/&gt;
+  val KafkaMetricsReporterClassesDoc = &quot;A list of classes to use as Yammer metrics custom reporters.&quot; +&lt;br/&gt;
+    &quot; The reporters should implement &amp;lt;code&amp;gt;kafka.metrics.KafkaMetricsReporter&amp;lt;/code&amp;gt; trait. If a client wants&quot; +&lt;br/&gt;
+    &quot; to expose JMX operations on a custom reporter, the custom reporter needs to additionally implement an MBean&quot; +&lt;br/&gt;
+    &quot; trait that extends &amp;lt;code&amp;gt;kafka.metrics.KafkaMetricsReporterMBean&amp;lt;/code&amp;gt; trait so that the registered MBean is compliant with&quot; +&lt;br/&gt;
+    &quot; the standard MBean convention.&quot;&lt;br/&gt;
+&lt;br/&gt;
+  val KafkaMetricsPollingIntervalSecondsDoc = s&quot;The metrics polling interval (in seconds) which can be used&quot; +&lt;br/&gt;
+    s&quot; in $KafkaMetricsReporterClassesProp implementations.&quot;&lt;br/&gt;
+&lt;br/&gt;
   /** ******** Common Security Configuration *************/&lt;br/&gt;
   val PrincipalBuilderClassDoc = BrokerSecurityConfigs.PRINCIPAL_BUILDER_CLASS_DOC&lt;/p&gt;

&lt;p&gt;@@ -945,6 +965,10 @@ object KafkaConfig {&lt;br/&gt;
       .define(MetricReporterClassesProp, LIST, Defaults.MetricReporterClasses, LOW, MetricReporterClassesDoc)&lt;br/&gt;
       .define(MetricRecordingLevelProp, STRING, Defaults.MetricRecordingLevel, LOW, MetricRecordingLevelDoc)&lt;/p&gt;

&lt;p&gt;+      /** ********* Kafka Yammer Metrics Reporter Configuration for docs ***********/&lt;br/&gt;
+      .define(KafkaMetricsReporterClassesProp, LIST, Defaults.KafkaMetricReporterClasses, LOW, KafkaMetricsReporterClassesDoc)&lt;br/&gt;
+      .define(KafkaMetricsPollingIntervalSecondsProp, INT, Defaults.KafkaMetricsPollingIntervalSeconds, atLeast(1), LOW, KafkaMetricsPollingIntervalSecondsDoc)&lt;br/&gt;
+&lt;br/&gt;
       /** ********* Quota configuration ***********/&lt;br/&gt;
       .define(ProducerQuotaBytesPerSecondDefaultProp, LONG, Defaults.ProducerQuotaBytesPerSecondDefault, atLeast(1), HIGH, ProducerQuotaBytesPerSecondDefaultDoc)&lt;br/&gt;
       .define(ConsumerQuotaBytesPerSecondDefaultProp, LONG, Defaults.ConsumerQuotaBytesPerSecondDefault, atLeast(1), HIGH, ConsumerQuotaBytesPerSecondDefaultDoc)&lt;br/&gt;
diff --git a/core/src/test/scala/unit/kafka/server/KafkaConfigTest.scala b/core/src/test/scala/unit/kafka/server/KafkaConfigTest.scala&lt;br/&gt;
index b7a8951ecc0..b75c3e7eb24 100755&lt;br/&gt;
&amp;#8212; a/core/src/test/scala/unit/kafka/server/KafkaConfigTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/server/KafkaConfigTest.scala&lt;br/&gt;
@@ -22,6 +22,7 @@ import java.util.Properties&lt;br/&gt;
 import kafka.api.&lt;/p&gt;
{ApiVersion, KAFKA_0_8_2}
&lt;p&gt; import kafka.cluster.EndPoint&lt;br/&gt;
 import kafka.message._&lt;br/&gt;
+import kafka.metrics.KafkaMetricsConfig&lt;br/&gt;
 import kafka.utils.&lt;/p&gt;
{CoreUtils, TestUtils}
&lt;p&gt; import org.apache.kafka.common.config.ConfigException&lt;br/&gt;
 import org.apache.kafka.common.metrics.Sensor&lt;br/&gt;
@@ -724,6 +725,10 @@ class KafkaConfigTest &lt;/p&gt;
{
         case KafkaConfig.DelegationTokenExpiryTimeMsProp =&amp;gt; assertPropertyInvalid(getBaseProperties(), name, &quot;not_a_number&quot;, &quot;0&quot;)
         case KafkaConfig.DelegationTokenExpiryCheckIntervalMsProp =&amp;gt; assertPropertyInvalid(getBaseProperties(), name, &quot;not_a_number&quot;, &quot;0&quot;)
 
+        //Kafka Yammer metrics reporter configs
+        case KafkaConfig.KafkaMetricsReporterClassesProp =&amp;gt; // ignore
+        case KafkaConfig.KafkaMetricsPollingIntervalSecondsProp =&amp;gt; //ignore
+
         case _ =&amp;gt; assertPropertyInvalid(getBaseProperties(), name, &quot;not_a_number&quot;, &quot;-1&quot;)
       }
&lt;p&gt;     })&lt;br/&gt;
diff --git a/core/src/test/scala/unit/kafka/server/KafkaMetricReporterClusterIdTest.scala b/core/src/test/scala/unit/kafka/server/KafkaMetricReporterClusterIdTest.scala&lt;br/&gt;
index dfcb4ac2799..4d514a0550d 100755&lt;br/&gt;
&amp;#8212; a/core/src/test/scala/unit/kafka/server/KafkaMetricReporterClusterIdTest.scala&lt;br/&gt;
+++ b/core/src/test/scala/unit/kafka/server/KafkaMetricReporterClusterIdTest.scala&lt;br/&gt;
@@ -83,7 +83,7 @@ class KafkaMetricReporterClusterIdTest extends ZooKeeperTestHarness {&lt;br/&gt;
   override def setUp() {&lt;br/&gt;
     super.setUp()&lt;br/&gt;
     val props = TestUtils.createBrokerConfig(1, zkConnect)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;props.setProperty(&quot;kafka.metrics.reporters&quot;, &quot;kafka.server.KafkaMetricReporterClusterIdTest$MockKafkaMetricsReporter&quot;)&lt;br/&gt;
+    props.setProperty(KafkaConfig.KafkaMetricsReporterClassesProp, &quot;kafka.server.KafkaMetricReporterClusterIdTest$MockKafkaMetricsReporter&quot;)&lt;br/&gt;
     props.setProperty(KafkaConfig.MetricReporterClassesProp, &quot;kafka.server.KafkaMetricReporterClusterIdTest$MockBrokerMetricsReporter&quot;)&lt;br/&gt;
     props.setProperty(KafkaConfig.BrokerIdGenerationEnableProp, &quot;true&quot;)&lt;br/&gt;
     props.setProperty(KafkaConfig.BrokerIdProp, &quot;-1&quot;)&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12834783">KAFKA-2238</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13060303">KAFKA-4978</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12834947">KAFKA-2244</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3dl8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>