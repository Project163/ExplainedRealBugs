<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:52:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-3189] Kafka server returns UnknownServerException for inherited exceptions</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-3189</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;This issue was introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2929&quot; title=&quot;Migrate server side error mapping functionality&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2929&quot;&gt;&lt;del&gt;KAFKA-2929&lt;/del&gt;&lt;/a&gt;. The problem is that we are using o.a.k.common.protocol.Errors.forException() while some exceptions thrown by the broker are still using old scala exception. This cause Errors.forException() always return UnknownServerException.&lt;/p&gt;

&lt;p&gt;InvalidMessageException is inherited from CorruptRecordException. But it seems Errors.forException() needs the exception class to be the exact class, so it does not map the subclass InvalidMessageException to the correct error code. Instead it returns -1 which is UnknownServerException.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12935823">KAFKA-3189</key>
            <summary>Kafka server returns UnknownServerException for inherited exceptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="granthenke">Grant Henke</assignee>
                                    <reporter username="becket_qin">Jiangjie Qin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2016 02:24:15 +0000</created>
                <updated>Tue, 9 Feb 2016 18:17:31 +0000</updated>
                            <resolved>Tue, 9 Feb 2016 18:17:20 +0000</resolved>
                                                    <fixVersion>0.10.0.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15127475" author="becket_qin" created="Tue, 2 Feb 2016 02:29:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; Would like to see if you have any concern on moving all the exceptions to client exception class? It looks a simple replacement.&lt;/p&gt;</comment>
                            <comment id="15127813" author="ijuma" created="Tue, 2 Feb 2016 07:18:40 +0000"  >&lt;p&gt;Changed the fix version to 0.9.1.0 as it doesn&apos;t affect the 0.9.0 branch. The aim of &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2929&quot; title=&quot;Migrate server side error mapping functionality&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2929&quot;&gt;&lt;del&gt;KAFKA-2929&lt;/del&gt;&lt;/a&gt; was to switch the broker to the Java exceptions indeed (at least for code that wasn&apos;t shared with the old clients). Sounds like cases were missed. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=granthenke&quot; class=&quot;user-hover&quot; rel=&quot;granthenke&quot;&gt;granthenke&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15128284" author="granthenke" created="Tue, 2 Feb 2016 14:08:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt; Could you be more specific how/when you are seeing the issue? Most of the server side exceptions were migrated to the new clients exception classes and the ones that weren&apos;t inherit from them so they can still be caught. There could be a place that was missed. I will look through the code to try and find any gaps.&lt;/p&gt;</comment>
                            <comment id="15128739" author="becket_qin" created="Tue, 2 Feb 2016 18:29:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=granthenke&quot; class=&quot;user-hover&quot; rel=&quot;granthenke&quot;&gt;granthenke&lt;/a&gt; The exception I saw was InvalidMessageException. I saw it is inherited from CorruptRecordException. But it seems Errors.forException() needs the exception class to be the exact class, so it does not map the subclass InvalidMessageException to the correct error code. Instead it returns -1 which is UnknownServerException.&lt;/p&gt;</comment>
                            <comment id="15129685" author="granthenke" created="Wed, 3 Feb 2016 03:04:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; I updated the jira description to match the exact scenario. I will open a PR shortly.&lt;/p&gt;</comment>
                            <comment id="15129701" author="githubbot" created="Wed, 3 Feb 2016 03:15:01 +0000"  >&lt;p&gt;GitHub user granthenke opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/856&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/856&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3189&quot; title=&quot;Kafka server returns UnknownServerException for inherited exceptions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3189&quot;&gt;&lt;del&gt;KAFKA-3189&lt;/del&gt;&lt;/a&gt;: Kafka server returns UnknownServerException for inherited&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230; exceptions&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/granthenke/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/granthenke/kafka&lt;/a&gt; inherited-errors&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/856.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/856.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #856&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4de1cce990d3df283f9688d4b91d7a6582b55853&lt;br/&gt;
Author: Grant Henke &amp;lt;granthenke@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-02-03T03:10:30Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-3189&quot; title=&quot;Kafka server returns UnknownServerException for inherited exceptions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-3189&quot;&gt;&lt;del&gt;KAFKA-3189&lt;/del&gt;&lt;/a&gt;: Kafka server returns UnknownServerException for inherited exceptions&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15139335" author="ewencp" created="Tue, 9 Feb 2016 18:17:20 +0000"  >&lt;p&gt;Issue resolved by pull request 856&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/856&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/856&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15139336" author="githubbot" created="Tue, 9 Feb 2016 18:17:31 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/856&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/856&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s9p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>