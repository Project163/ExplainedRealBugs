<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:44:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-2585] ConsoleConsumer should not hang infinitely upon exception</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-2585</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Due to imcompatibility beween Java 1.7 and Java 1.8, if Kafka ConsoleConsumer was compiled by Java 1.8 but run by Java 1.7, and if ConsoleConsumer has consumer.timeout.ms in the consumer.properties, then when it timesout, it will throw the following exception and hang infinitely.&lt;/p&gt;

&lt;p&gt;This will cause problem for e.g. Ducktape system test, which currently runs consumer with Java 1.7 and waits for consumer to timeout. This bug causes the Ducktape to hang for a long time.&lt;/p&gt;

&lt;p&gt;To prevent ConsoleConsumer to hang in case of such exception, we can wrap try/catch around run() and do System.exit(0) at the end of main() in ConsoleConsumer.&lt;/p&gt;



&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2015-09-28 05:41:31,499&amp;#93;&lt;/span&gt; ERROR Error processing message, stopping consumer:  (kafka.tools.ConsoleConsumer$)&lt;br/&gt;
kafka.consumer.ConsumerTimeoutException&lt;br/&gt;
	at kafka.consumer.ConsumerIterator.makeNext(ConsumerIterator.scala:69)&lt;br/&gt;
	at kafka.consumer.ConsumerIterator.makeNext(ConsumerIterator.scala:33)&lt;br/&gt;
	at kafka.utils.IteratorTemplate.maybeComputeNext(IteratorTemplate.scala:66)&lt;br/&gt;
	at kafka.utils.IteratorTemplate.hasNext(IteratorTemplate.scala:58)&lt;br/&gt;
	at kafka.utils.IteratorTemplate.next(IteratorTemplate.scala:38)&lt;br/&gt;
	at kafka.consumer.ConsumerIterator.next(ConsumerIterator.scala:46)&lt;br/&gt;
	at kafka.consumer.OldConsumer.receive(BaseConsumer.scala:70)&lt;br/&gt;
	at kafka.tools.ConsoleConsumer$.process(ConsoleConsumer.scala:94)&lt;br/&gt;
	at kafka.tools.ConsoleConsumer$.run(ConsoleConsumer.scala:57)&lt;br/&gt;
	at kafka.tools.ConsoleConsumer$.main(ConsoleConsumer.scala:41)&lt;br/&gt;
	at kafka.tools.ConsoleConsumer.main(ConsoleConsumer.scala)&lt;br/&gt;
Processed a total of 78 messages&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: java.util.concurrent.ConcurrentHashMap.keySet()Ljava/util/concurrent/ConcurrentHashMap$KeySetView;&lt;br/&gt;
	at kafka.utils.Pool.keys(Pool.scala:77)&lt;br/&gt;
	at kafka.consumer.FetchRequestAndResponseStatsRegistry$.removeConsumerFetchRequestAndResponseStats(FetchRequestAndResponseStats.scala:69)&lt;br/&gt;
	at kafka.metrics.KafkaMetricsGroup$.removeAllConsumerMetrics(KafkaMetricsGroup.scala:189)&lt;br/&gt;
	at kafka.consumer.ZookeeperConsumerConnector.shutdown(ZookeeperConsumerConnector.scala:202)&lt;br/&gt;
	at kafka.consumer.OldConsumer.stop(BaseConsumer.scala:75)&lt;br/&gt;
	at kafka.tools.ConsoleConsumer$.process(ConsoleConsumer.scala:98)&lt;br/&gt;
	at kafka.tools.ConsoleConsumer$.run(ConsoleConsumer.scala:57)&lt;br/&gt;
	at kafka.tools.ConsoleConsumer$.main(ConsoleConsumer.scala:41)&lt;br/&gt;
	at kafka.tools.ConsoleConsumer.main(ConsoleConsumer.scala)&lt;/p&gt;



</description>
                <environment></environment>
        <key id="12896702">KAFKA-2585</key>
            <summary>ConsoleConsumer should not hang infinitely upon exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lindong">Dong Lin</assignee>
                                    <reporter username="lindong">Dong Lin</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Sep 2015 05:34:04 +0000</created>
                <updated>Mon, 28 Sep 2015 21:41:57 +0000</updated>
                            <resolved>Mon, 28 Sep 2015 21:41:57 +0000</resolved>
                                                    <fixVersion>0.9.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14910055" author="githubbot" created="Mon, 28 Sep 2015 05:39:14 +0000"  >&lt;p&gt;GitHub user lindong28 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/247&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2585&quot; title=&quot;ConsoleConsumer should not hang infinitely upon exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2585&quot;&gt;&lt;del&gt;KAFKA-2585&lt;/del&gt;&lt;/a&gt;; ConsoleConsumer should not hang infinitely upon exception&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/lindong28/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/lindong28/kafka&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2585&quot; title=&quot;ConsoleConsumer should not hang infinitely upon exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2585&quot;&gt;&lt;del&gt;KAFKA-2585&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/247.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/247.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #247&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ccd6826e8ab257c56e0994414c3cffc9aca387a9&lt;br/&gt;
Author: Dong Lin &amp;lt;lindong28@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-09-28T05:38:27Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2585&quot; title=&quot;ConsoleConsumer should not hang infinitely upon exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2585&quot;&gt;&lt;del&gt;KAFKA-2585&lt;/del&gt;&lt;/a&gt;; ConsoleConsumer should not hang infinitely upon exception&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14934105" author="githubbot" created="Mon, 28 Sep 2015 21:41:46 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/247&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14934107" author="gwenshap" created="Mon, 28 Sep 2015 21:41:57 +0000"  >&lt;p&gt;Issue resolved by pull request 247&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/247&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lm6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>