<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:18:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-8187] State store record loss across multiple reassignments when using standby tasks</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-8187</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Overview:&lt;br/&gt;
There is a race condition that can cause a partitioned state store to be missing records up to an offset when using standby tasks.&lt;/p&gt;

&lt;p&gt;When a reassignment occurs and a task is migrated to a StandbyTask in another StreamThread/TaskManager on the same JVM, there can be lock contention that prevents the StandbyTask on the currently assigned StreamThread from acquiring the lock and to not retry acquiring the lock because all of the active StreamTasks are running for that StreamThread. If the StandbyTask does not acquire the lock before the StreamThread enters into the RUNNING state, then the StandbyTask will not consume any records. If there is no subsequent reassignment before the second execution of the stateDirCleaner Thread, then the task directory for the StandbyTask will be deleted. When the next reassignment occurs the offset that was read by the StandbyTask at creation time before acquiring the lock will be written back to the state store directory, this re-creates the state store directory.&lt;/p&gt;


&lt;p&gt;An example:&lt;br/&gt;
StreamThread(A) and StreamThread(B) are running on the same JVM in the same streams application.&lt;/p&gt;

&lt;p&gt;StreamThread(A) has StandbyTask 1_0&lt;br/&gt;
StreamThread(B) has no tasks&lt;/p&gt;

&lt;p&gt;A reassignment is triggered by another host in the streams application fleet.&lt;/p&gt;

&lt;p&gt;StreamThread(A) is notified with a PARTITIONS_REVOKED event of the threads one task&lt;br/&gt;
StreamThread(B) is notified with a PARTITIONS_ASSIGNED event of a standby task for 1_0&lt;/p&gt;

&lt;p&gt;Here begins the race condition.&lt;br/&gt;
StreamThread(B) creates the StandbyTask which reads the current checkpoint from disk.&lt;br/&gt;
StreamThread(B) then attempts to updateNewAndRestoringTasks() for it&apos;s assigned tasks. &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;br/&gt;
StreamThread(B) initializes the new tasks for the active and standby tasks. &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;br/&gt;
StreamThread(B) attempts to lock the state directory for task 1_0 but fails with a LockException &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;, since StreamThread(A) still holds the lock.&lt;br/&gt;
StreamThread(B) returns true from updateNewAndRestoringTasks() due to the check at &lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; which only checks that the active assigned tasks are running.&lt;br/&gt;
StreamThread(B) state is set to RUNNING&lt;br/&gt;
StreamThread(A) closes the previous StandbyTask specifically calling closeStateManager() &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt;&lt;br/&gt;
StreamThread(A) state is set to RUNNING&lt;/p&gt;

&lt;p&gt;Streams application for this host has completed re-balancing and is now in the RUNNING state.&lt;/p&gt;

&lt;p&gt;State at this point is the following: State directory exists for 1_0 and all data is present.&lt;/p&gt;

&lt;p&gt;Then at a period that is 1 to 2 intervals of &lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt;(which is default of 10 minutes) after the reassignment had completed the stateDirCleaner thread will execute &lt;span class=&quot;error&quot;&gt;&amp;#91;7&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;The stateDirCleaner will then do &lt;span class=&quot;error&quot;&gt;&amp;#91;8&amp;#93;&lt;/span&gt;, which finds the directory 1_0, finds that there isn&apos;t an active lock for that directory, acquire the lock, and deletes the directory.&lt;/p&gt;

&lt;p&gt;State at this point is the following: State directory does not exist for 1_0.&lt;/p&gt;

&lt;p&gt;When the next reassignment occurs. The offset that was read by StreamThread(B) during construction of the StandbyTask for 1_0 will be written back to disk. This write re-creates the state store directory and writes the .checkpoint file with the old offset.&lt;/p&gt;

&lt;p&gt;State at this point is the following: State directory exists for 1_0 with a &apos;.checkpoint&apos; file in it, but there is no other state store data in the directory.&lt;/p&gt;

&lt;p&gt;If this host is assigned the active task for 1_0 then all the history in the state store will be missing from before the offset that was read at the previous reassignment. &lt;br/&gt;
If this host is assigned the standby task for 1_0 then the lock will be acquired and the standby will start to consume records, but it will still be missing all records from before the offset that was read at the previous reassignment.&lt;br/&gt;
If this host is not assigned 1_0, then the state directory will get cleaned up by the stateDirCleaner thread 10 to 20 minutes later and the record loss issue will be hidden.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/StreamThread.java#L865-L869&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/StreamThread.java#L865-L869&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/TaskManager.java#L324-L340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/TaskManager.java#L324-L340&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/AssignedTasks.java#L65-L84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/AssignedTasks.java#L65-L84&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/AbstractTask.java#L212-L236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/AbstractTask.java#L212-L236&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/TaskManager.java#L332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/TaskManager.java#L332&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/AbstractTask.java#L245-L264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/AbstractTask.java#L245-L264&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/KafkaStreams.java#L797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/KafkaStreams.java#L797&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;7&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/KafkaStreams.java#L798-L803&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/KafkaStreams.java#L798-L803&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;8&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/StateDirectory.java#L262-L327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/StateDirectory.java#L262-L327&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;How we recovered from the record loss:&lt;br/&gt;
1. Stop the streams application&lt;br/&gt;
2. Delete the impacted task directory to remove the .checkpoint file&lt;br/&gt;
3. Restart the streams application&lt;/p&gt;


&lt;p&gt;Some possible ways of addressing this issue could be the following:&lt;br/&gt;
1. Check that the assigned standbys are running in addition to the assigned active tasks before returning in this method &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
2. Only write the checkpoint file for a task if the thread still has the state directory lock for the task &lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt;, on close StandbyTasks commit the offsets they have in memory. &lt;span class=&quot;error&quot;&gt;&amp;#91;10&amp;#93;&lt;/span&gt;&lt;br/&gt;
3. Read the checkpoint file after acquiring the locks for a task in the StreamThread.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/ProcessorStateManager.java#L325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/ProcessorStateManager.java#L325&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;10&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/StandbyTask.java#L125-L148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/blob/trunk/streams/src/main/java/org/apache/kafka/streams/processor/internals/StandbyTask.java#L125-L148&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13225979">KAFKA-8187</key>
            <summary>State store record loss across multiple reassignments when using standby tasks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hustclf">Lifei Chen</assignee>
                                    <reporter username="wgreerx">William Greer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Apr 2019 22:22:05 +0000</created>
                <updated>Wed, 12 Feb 2020 18:51:15 +0000</updated>
                            <resolved>Thu, 30 May 2019 16:47:36 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>2.2.1</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16811023" author="guozhang" created="Fri, 5 Apr 2019 16:33:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wgreerx&quot; class=&quot;user-hover&quot; rel=&quot;wgreerx&quot;&gt;wgreerx&lt;/a&gt; Thanks for reporting the bug! It was very well written and crystal about the root cause, thanks again.&lt;/p&gt;

&lt;p&gt;I&apos;ve read through the code and can confirm that it is indeed a bug, and actually is still exist in trunk (hence affecting not only 2.0.1 but later releases as well).&lt;/p&gt;

&lt;p&gt;Are you interested in filing a PR to fix it? I think the proposed option 1) would be preferable: we should not let the thread to transit to RUNNING until all tasks, active and standby are ready. And that additional wait time, in practice, should not be very long.&lt;/p&gt;</comment>
                            <comment id="16816676" author="bbejeck" created="Fri, 12 Apr 2019 21:34:56 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wgreerx&quot; class=&quot;user-hover&quot; rel=&quot;wgreerx&quot;&gt;wgreerx&lt;/a&gt; just touching base to see if you are interested at all in filing a PR.&lt;/p&gt;</comment>
                            <comment id="16848456" author="githubbot" created="Sun, 26 May 2019 15:04:13 +0000"  >&lt;p&gt;hustclf commented on pull request #6818: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8187&quot; title=&quot;State store record loss across multiple reassignments when using standby tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8187&quot;&gt;&lt;del&gt;KAFKA-8187&lt;/del&gt;&lt;/a&gt;: Add wait time for other thread in the same jvm to free the locks&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6818&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6818&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;   *More detailed description of your change,&lt;br/&gt;
   if necessary. The PR title and PR message become&lt;br/&gt;
   the squashed commit message, so use a separate&lt;br/&gt;
   comment to ping reviewers.*&lt;/p&gt;

&lt;p&gt;   *Summary of testing strategy (including rationale)&lt;br/&gt;
   for the feature or bug fix. Unit and/or integration&lt;br/&gt;
   tests are expected for any behaviour change and&lt;br/&gt;
   system tests should be considered for larger changes.*&lt;/p&gt;

&lt;p&gt;   Fix &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8187&quot; title=&quot;State store record loss across multiple reassignments when using standby tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8187&quot;&gt;&lt;del&gt;KAFKA-8187&lt;/del&gt;&lt;/a&gt;: State store record loss across multiple reassignments when using standby tasks.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add wait time for other thread in the save jvm to free the locks of state store&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Do not let the thread to transit to RUNNING until all tasks (including standby tasks) are ready.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16848458" author="hustclf" created="Sun, 26 May 2019 15:13:12 +0000"  >&lt;p&gt;Hi, I&apos;m also interested about the issue,&#160; and fill a PR for it based on &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wgreerx&quot; class=&quot;user-hover&quot; rel=&quot;wgreerx&quot;&gt;wgreerx&lt;/a&gt;&apos;s detailed description about the root cause, and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt;&apos;s advice about&#160;proposed option 1.&lt;/p&gt;

&lt;p&gt;My solution is as follow:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Add wait time for other threads in the same jvm to free the locks of state store&lt;/li&gt;
	&lt;li&gt;Do not let the thread to transit to RUNNING until all tasks (including standby tasks) are ready.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please review the PR and give me your helpful feedback, thanks a lot.&lt;/p&gt;</comment>
                            <comment id="16849218" author="guozhang" created="Mon, 27 May 2019 21:32:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hustclf&quot; class=&quot;user-hover&quot; rel=&quot;hustclf&quot;&gt;hustclf&lt;/a&gt; Thanks for filling the PR! &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bbejeck&quot; class=&quot;user-hover&quot; rel=&quot;bbejeck&quot;&gt;bbejeck&lt;/a&gt; and I will take a look and see if it can be merged to 2.3 asap.&lt;/p&gt;</comment>
                            <comment id="16849752" author="wgreerx" created="Tue, 28 May 2019 14:04:15 +0000"  >&lt;p&gt;Apologies on not getting back on this sooner. I&apos;d be willing to fill a PR if it is still needed. However there appears to be a pull request already.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hustclf&quot; class=&quot;user-hover&quot; rel=&quot;hustclf&quot;&gt;hustclf&lt;/a&gt;&#160;Thank you for posting a PR for addressing this issue Kafka-8187 .&lt;/p&gt;</comment>
                            <comment id="16849915" author="bbejeck" created="Tue, 28 May 2019 16:40:24 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hustclf&quot; class=&quot;user-hover&quot; rel=&quot;hustclf&quot;&gt;hustclf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve assigned the ticket to you.&#160; Just for future reference, you&apos;ll want to check the &quot;Assignee&quot; field on the upper left-hand side and if the field is populated leave a comment asking the current user if they are still working on this ticket as you&apos;d like to pick it up.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ll also add to you to the contributors list in Jira so you can self-assign tickets in the future as well.&lt;br/&gt;
Ignore my previous statement, you are already listed there!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="16851996" author="githubbot" created="Thu, 30 May 2019 15:33:40 +0000"  >&lt;p&gt;bbejeck commented on pull request #6818: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8187&quot; title=&quot;State store record loss across multiple reassignments when using standby tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8187&quot;&gt;&lt;del&gt;KAFKA-8187&lt;/del&gt;&lt;/a&gt;: Add wait time for other thread in the same jvm to free the locks&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6818&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6818&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16852061" author="bbejeck" created="Thu, 30 May 2019 16:47:36 +0000"  >&lt;p&gt;merged to trunk and cherry-picked to 2.3, 2.2 and 2.1&lt;/p&gt;</comment>
                            <comment id="16852661" author="githubbot" created="Fri, 31 May 2019 05:00:18 +0000"  >&lt;p&gt;hustclf commented on pull request #6849: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8187&quot; title=&quot;State store record loss across multiple reassignments when using standby tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8187&quot;&gt;&lt;del&gt;KAFKA-8187&lt;/del&gt;&lt;/a&gt; Bugfix for branch 2.0&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6849&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Fix &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8187&quot; title=&quot;State store record loss across multiple reassignments when using standby tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8187&quot;&gt;&lt;del&gt;KAFKA-8187&lt;/del&gt;&lt;/a&gt;: State store record loss across multiple reassignments when using standby tasks.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Do not let the thread to transit to RUNNING until all tasks (including standby tasks) are ready.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17035614" author="githubbot" created="Wed, 12 Feb 2020 18:51:15 +0000"  >&lt;p&gt;mjsax commented on pull request #6849: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-8187&quot; title=&quot;State store record loss across multiple reassignments when using standby tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-8187&quot;&gt;&lt;del&gt;KAFKA-8187&lt;/del&gt;&lt;/a&gt; Bugfix for branch 2.0&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/6849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/6849&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01fn4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>