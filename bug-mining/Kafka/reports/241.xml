<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:37:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-816] Reduce noise in Kafka server logs due to NotLeaderForPartitionException</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-816</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;NotLeaderForPartitionException is logged at the ERROR level with a full stack trace. But really this is just an informational message on the server when a client with stale metadata sends requests to the wrong leader for a partition. This floods the logs either if there are many clients or few clients sending many topics (migration tool or mirror maker). This should probably be logged at WARN and without the stack trace&lt;/p&gt;</description>
                <environment></environment>
        <key id="12637838">KAFKA-816</key>
            <summary>Reduce noise in Kafka server logs due to NotLeaderForPartitionException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nehanarkhede">Neha Narkhede</assignee>
                                    <reporter username="nehanarkhede">Neha Narkhede</reporter>
                        <labels>
                            <label>kafka-0.8</label>
                            <label>p2</label>
                    </labels>
                <created>Tue, 19 Mar 2013 22:09:33 +0000</created>
                <updated>Wed, 29 May 2013 16:59:27 +0000</updated>
                            <resolved>Fri, 22 Mar 2013 16:32:50 +0000</resolved>
                                    <version>0.8.0</version>
                                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13607009" author="nehanarkhede" created="Tue, 19 Mar 2013 23:19:43 +0000"  >&lt;p&gt;Special cased NotLeaderForPartitionException and UnknownTopicOrPartitionException to do the following -&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Print a warn message, not a stack trace at ERROR level&lt;/li&gt;
	&lt;li&gt;Not increment the failed request metric since that is meant to track a broker&apos;s failure to serve requests for a partition for which it is the leader&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13607110" author="junrao" created="Wed, 20 Mar 2013 00:43:06 +0000"  >&lt;p&gt;Thanks for the patch. Instead of duplicating the comments for each type of exception, is it better to add a comment at the beginning of catch to explain how different exceptions are handled? The comment should probably be added to handleOffsetRequest() too. Also, there is a grammar mistake in &quot;Failed produce requests is &quot;.&lt;/p&gt;</comment>
                            <comment id="13607123" author="nehanarkhede" created="Wed, 20 Mar 2013 00:50:21 +0000"  >&lt;p&gt;Sure. And the comment is not added to handleOffsetRequest since there is no failed offset request rate that we track. Will fix the grammar while checkin.&lt;/p&gt;</comment>
                            <comment id="13610566" author="nehanarkhede" created="Fri, 22 Mar 2013 16:17:57 +0000"  >&lt;p&gt;Moved the comments as per your suggestion&lt;/p&gt;</comment>
                            <comment id="13610685" author="junrao" created="Fri, 22 Mar 2013 16:26:52 +0000"  >&lt;p&gt;+1 on patch v2. To make the comment clearer, suggest that we change the comment &quot;// NOTE: Failed produce requests is not incremented here&quot; to &quot;// NOTE: Failed produce requests is not incremented for UnknownTopicOrPartitionException and NotLeaderForPartitionException&quot; (ditto for the comments in readMessageSets()) before checking in.&lt;/p&gt;</comment>
                            <comment id="13610757" author="nehanarkhede" created="Fri, 22 Mar 2013 16:32:50 +0000"  >&lt;p&gt;checked in after making the suggested change&lt;/p&gt;</comment>
                            <comment id="13642334" author="balaji.seshadri@dish.com" created="Thu, 25 Apr 2013 22:51:10 +0000"  >&lt;p&gt;Using the below trunk and i still see error happening.Please let us know if this can be fixed.&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://github.com/apache/kafka.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka.git&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-25 16:47:08,924&amp;#93;&lt;/span&gt; WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;console-consumer-24019_MERD7-21964-1366930009136-8b7f9eb7-leader-finder-thread&amp;#93;&lt;/span&gt;, Failed to add fetcher for &lt;span class=&quot;error&quot;&gt;&amp;#91;mytopic,0&amp;#93;&lt;/span&gt; to broker id:0,host:MERD7-21964.echostar.com,port:9092 (kafka.consumer.ConsumerFetcherManager$$anon$1)&lt;br/&gt;
kafka.common.NotLeaderForPartitionException&lt;br/&gt;
        at sun.reflect.GeneratedConstructorAccessor1.newInstance(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)&lt;br/&gt;
        at java.lang.reflect.Constructor.newInstance(Constructor.java:525)&lt;br/&gt;
        at java.lang.Class.newInstance0(Class.java:372)&lt;br/&gt;
        at java.lang.Class.newInstance(Class.java:325)&lt;br/&gt;
        at kafka.common.ErrorMapping$.exceptionFor(ErrorMapping.scala:72)&lt;br/&gt;
        at kafka.consumer.SimpleConsumer.earliestOrLatestOffset(SimpleConsumer.scala:163)&lt;br/&gt;
        at kafka.consumer.ConsumerFetcherThread.handleOffsetOutOfRange(ConsumerFetcherThread.scala:61)&lt;br/&gt;
        at kafka.server.AbstractFetcherThread.addPartition(AbstractFetcherThread.scala:167)&lt;br/&gt;
        at kafka.server.AbstractFetcherManager.addFetcher(AbstractFetcherManager.scala:48)&lt;br/&gt;
        at kafka.consumer.ConsumerFetcherManager$$anon$1$$anonfun$doWork$3.apply(ConsumerFetcherManager.scala:79)&lt;br/&gt;
        at kafka.consumer.ConsumerFetcherManager$$anon$1$$anonfun$doWork$3.apply(ConsumerFetcherManager.scala:75)&lt;br/&gt;
        at scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:95)&lt;br/&gt;
        at scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:95)&lt;br/&gt;
        at scala.collection.Iterator$class.foreach(Iterator.scala:772)&lt;br/&gt;
        at scala.collection.mutable.HashTable$$anon$1.foreach(HashTable.scala:157)&lt;br/&gt;
        at scala.collection.mutable.HashTable$class.foreachEntry(HashTable.scala:190)&lt;br/&gt;
        at scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:45)&lt;br/&gt;
        at scala.collection.mutable.HashMap.foreach(HashMap.scala:95)&lt;br/&gt;
        at kafka.consumer.ConsumerFetcherManager$$anon$1.doWork(ConsumerFetcherManager.scala:75)&lt;br/&gt;
        at kafka.utils.ShutdownableThread.run(ShutdownableThread.scala:51)&lt;/p&gt;

&lt;p&gt;We are evaluating Kafka for our new messaging system and we had tough time running in windows.&lt;/p&gt;

&lt;p&gt;We somehow managed to run 0.8 using cygwin but when we run the console producer/consumer,we are not getting messages from consumer.&lt;/p&gt;

&lt;p&gt;Please help us to fix this issue,this might not be related but its keeping on throwing this error on consumer side.&lt;/p&gt;</comment>
                            <comment id="13642342" author="nehanarkhede" created="Thu, 25 Apr 2013 22:55:58 +0000"  >&lt;p&gt;All 0.8 development is happening on the 0.8 branch. Please can you retry on that branch ?&lt;/p&gt;</comment>
                            <comment id="13642344" author="balaji.seshadri@dish.com" created="Thu, 25 Apr 2013 23:00:08 +0000"  >&lt;p&gt;Please let me know the Git URL.&lt;/p&gt;</comment>
                            <comment id="13642346" author="balaji.seshadri@dish.com" created="Thu, 25 Apr 2013 23:02:15 +0000"  >&lt;p&gt;I see fix merged in the show log but it is not working.&lt;/p&gt;

&lt;p&gt;SHA-1: 51421fcc0111031bb77f779a6f6c00520d526a34&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-816&quot; title=&quot;Reduce noise in Kafka server logs due to NotLeaderForPartitionException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-816&quot;&gt;&lt;del&gt;KAFKA-816&lt;/del&gt;&lt;/a&gt; Reduce noise in Kafka server logs due to NotLeaderForPartitionException; reviewed by Jun Rao&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13642557" author="balaji.seshadri@dish.com" created="Fri, 26 Apr 2013 03:46:02 +0000"  >&lt;p&gt;Error occuring still in 0.8 branch,pls refer screen shot attached.&lt;/p&gt;</comment>
                            <comment id="13669434" author="nehanarkhede" created="Wed, 29 May 2013 16:59:27 +0000"  >&lt;p&gt;Balaji, &lt;/p&gt;

&lt;p&gt;That fix was to reduce the noise in the kafka server logs. The error you see is on the consumer when the leader for some partitions is failing over to another replica. Can you please move the issue to a separate JIRA?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12644746">KAFKA-877</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12580654" name="KAFKA-816.jpg" size="63567" author="balaji.seshadri@dish.com" created="Fri, 26 Apr 2013 03:45:31 +0000"/>
                            <attachment id="12575033" name="kafka-816-v2.patch" size="3700" author="nehanarkhede" created="Fri, 22 Mar 2013 16:17:57 +0000"/>
                            <attachment id="12574441" name="kafka-816.patch" size="3715" author="nehanarkhede" created="Tue, 19 Mar 2013 23:19:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318318</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ixbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318659</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>