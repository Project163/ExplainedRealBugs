<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:42:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-17516] Client metrics configuration resources default configs not shown by kafka-configs.sh</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-17516</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;KIP-714 introduces client metrics configuration resources for configuring the set of metrics pushed by clients. The kafka-configs.sh and kafka-client-metrics.sh tools are used to manipulate them.&lt;/p&gt;

&lt;p&gt;When kafka-configs.sh is used to manipulate configurations for other resource types, such as topics and groups, configuration for which there is no explicit dynamic value specified have a default which is either part of the definition of the definition of each config, or inherited from another config (usually from the broker).&lt;/p&gt;

&lt;p&gt;This is not the case currently for client metrics resources, and this is not intentional. There are defaults for the configurations and they are applied. It&apos;s just that they&apos;re not visible using kafka-configs.sh --describe --all and not returned by the admin API. They should be.&lt;/p&gt;

&lt;p&gt;This issue adjusts the handling of the default values so that they are displayed by this tool.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13591695">KAFKA-17516</key>
            <summary>Client metrics configuration resources default configs not shown by kafka-configs.sh</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="schofielaj">Andrew Schofield</assignee>
                                    <reporter username="schofielaj">Andrew Schofield</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Sep 2024 19:59:37 +0000</created>
                <updated>Fri, 14 Mar 2025 08:17:57 +0000</updated>
                            <resolved>Fri, 14 Mar 2025 08:17:57 +0000</resolved>
                                    <version>3.7.0</version>
                                    <fixVersion>4.1.0</fixVersion>
                                    <component>admin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17881472" author="schofielaj" created="Fri, 13 Sep 2024 05:39:58 +0000"  >&lt;p&gt;Looking at &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-226+-+Dynamic+Broker+Configuration,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/KIP-226+-+Dynamic+Broker+Configuration,&lt;/a&gt; it seems that the following output would be sensible.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;$ bin/kafka-config.sh --bootstrap-server localhost:9092 --alter --entity-type client-metrics --entity-name CM1 --add-config metrics=org.apache.kafka,interval.ms=1000&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This sets the configs metrics and interval.ms, but leaves match unset.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;$ bin/kafka-config.sh --bootstrap-server localhost:9092 --describe --entity-type client-metrics --entity-name CM1&lt;/p&gt;

&lt;p&gt;Dynamic configs for client-metric CM1 are:&lt;/p&gt;

&lt;p&gt;&#160; interval.ms=1000 sensitive=false synonyms={DYNAMIC_CLIENT_METRICS_CONFIG=1000}&lt;/p&gt;

&lt;p&gt;&#160; metrics=org.apache.kafka sensitive=false synonyms={DYNAMIC_CLIENT_METRICS_CONFIG=org.apache.kafka}&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This doesn&apos;t show the value of the config match because it&apos;s not set and will take the default value. However, you can see the default with this command.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;$ bin/kafka-config.sh --bootstrap-server localhost:9092 --describe --entity-type client-metrics --entity-name CM1&lt;/p&gt;

&lt;p&gt;Dynamic configs for client-metric CM1 are:&lt;/p&gt;

&lt;p&gt;&#160; interval.ms=1000 sensitive=false synonyms={DYNAMIC_CLIENT_METRICS_CONFIG=1000}&lt;/p&gt;

&lt;p&gt;&#160; metrics=org.apache.kafka sensitive=false synonyms={DYNAMIC_CLIENT_METRICS_CONFIG=org.apache.kafka}&lt;/p&gt;

&lt;p&gt;&#160; match= sensitive=false synonyms={}&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Using the kafka-client-metrics.sh tool instead, the output always shows the defaults giving a quick way to see the effective settings.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;$ bin/kafka-client-metrics.sh --bootstrap-server localhost:9092 --describe --name CM1&lt;/p&gt;

&lt;p&gt;Client metrics configs for CM1 are:&lt;/p&gt;

&lt;p&gt;&#160; metrics=org.apache.kafka&lt;/p&gt;

&lt;p&gt;&#160; interval.ms=300000&lt;/p&gt;

&lt;p&gt;&#160; match=&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Now it&apos;s possible to work out what the interval duration is without having to remember the default value.&lt;/p&gt;</comment>
                            <comment id="17914649" author="dajac" created="Mon, 20 Jan 2025 12:48:57 +0000"  >&lt;p&gt;Changing target fix version to 4.1 since this is not a blocker and we are past code freeze&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1rck0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>