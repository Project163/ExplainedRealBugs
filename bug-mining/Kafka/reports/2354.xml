<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 17:19:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-7849] Warning when adding GlobalKTable</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-7849</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;Per&#160;&lt;a href=&quot;https://lists.apache.org/thread.html/59c119be8a2723c501e0653fa3ed571e8c09be40d5b5170c151528b5@%3Cusers.kafka.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/59c119be8a2723c501e0653fa3ed571e8c09be40d5b5170c151528b5@%3Cusers.kafka.apache.org%3E&lt;/a&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
When I add a GlobalKTable for topic &quot;message-write-service-user-ids-by-email&quot; to my topology, I get this warning:&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2019-01-19 12:18:14,008&amp;#93;&lt;/span&gt; WARN (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:421) &lt;span class=&quot;error&quot;&gt;&amp;#91;Consumer clientId=message-write-service-55f2ca4d-0efc-4344-90d3-955f9f5a65fd-StreamThread-2-consumer, groupId=message-write-service&amp;#93;&lt;/span&gt; The following subscribed topics are not assigned to any members: &lt;span class=&quot;error&quot;&gt;&amp;#91;message-write-service-user-ids-by-email&amp;#93;&lt;/span&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13210802">KAFKA-7849</key>
            <summary>Warning when adding GlobalKTable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="omarsmak">Omar Al-Safi</assignee>
                                    <reporter username="dminkovsky">Dmitry Minkovsky</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Mon, 21 Jan 2019 15:47:16 +0000</created>
                <updated>Wed, 4 Sep 2019 06:27:56 +0000</updated>
                            <resolved>Wed, 4 Sep 2019 06:27:42 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.4.0</fixVersion>
                                    <component>streams</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="16836432" author="frederic.tardif" created="Thu, 9 May 2019 14:28:06 +0000"  >&lt;p&gt;got the same issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2019-05-08 09:54:24.212]&#160; WARN [uepg-catalog_program-snapshot-connector-7ddde56e-7dff-4a14-aa11-6c8fb22b40ce-StreamThread-2] [Consumer clientId=uepg-catalog_program-snapshot-connector-7ddde56e-7dff-4a14-aa11-6c8fb22b40ce-StreamThread-2-consumer, groupId=uepg-catalog_program-snapshot-connector] The following subscribed topics are not assigned to any members: [livecms.program.snapshot]&#160; - (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:?)&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;My topology is a globalTable:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
streamBuilder.globalTable(config.getTopicName(), Materialized.as(config.getStoreName()));&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I confirm my consumer lag in the rocksdb checkpoint file did indeed show the expected partition offset. In addition the warning disappeared the third time I had restarted it (maybe however caused by the store already in sync). I would be surprised in that case that fiddling with the number of stream thread configuration is required. So it looks like a self healed kind of warning. The message however does not sound that reassuring... Next time I&apos;ll get this I&apos;ll try enabling debug logs to correlate the warning.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16886897" author="omarsmak" created="Wed, 17 Jul 2019 10:14:31 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;, I would like to give myself a headstart with this issue and work on it. Is it possible if you can add me to the&#160;contribution&#160;list in Jira so I can work on it? Thanks&#160;&lt;/p&gt;</comment>
                            <comment id="16888091" author="omarsmak" created="Thu, 18 Jul 2019 15:52:22 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;, I was looking at this issue and I was wondering if you could give a hint how does the main consumer can&#160;differentiate between these global topics that being consumed by &lt;tt&gt;GlobalStreamThread&lt;/tt&gt;?&#160;A good hint from you would be a great help on the right direction in order to fix this bug &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="16888340" author="mjsax" created="Thu, 18 Jul 2019 21:13:42 +0000"  >&lt;p&gt;Thanks for you interest &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omarsmak&quot; class=&quot;user-hover&quot; rel=&quot;omarsmak&quot;&gt;omarsmak&lt;/a&gt;. Assigned the ticket to you; you can also self-assign.&lt;/p&gt;

&lt;p&gt;The subscription happens in `StreamThread` methods `runLoop()` and `enforceRebalance()`. Hope this helps to get started. Let us know if you have any other question.s&lt;/p&gt;</comment>
                            <comment id="16888772" author="omarsmak" created="Fri, 19 Jul 2019 10:30:46 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt;!&#160; I want to validate my&#160;findings&#160;with you, as I understood from the code and &lt;tt&gt;DEBUG&lt;/tt&gt; logs, &lt;tt&gt;GlobalStreamThread&lt;/tt&gt; should be responsible for&#160;subscribing to all the global topics as I can see &lt;a href=&quot;https://github.com/apache/kafka/blob/2.3/streams/src/main/java/org/apache/kafka/streams/KafkaStreams.java#L698&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, therefore&#160;&lt;tt&gt;StreamThread&lt;/tt&gt; shouldn&apos;t subscribe to any of these topics as the &lt;tt&gt;GlobalStreamThread&lt;/tt&gt; is the sole responsible for this. Based on this understanding, I was looking at &lt;tt&gt;sourceTopicPattern()&lt;/tt&gt; in &lt;tt&gt;InternalTopologyBuilder&lt;/tt&gt; since is responsible for returning the topics pattern that consumer in &lt;tt&gt;StreamThread&lt;/tt&gt;&#160;should subscribe to, as I can see, this method doesn&apos;t pay attention to the global topics although we have this information in &lt;tt&gt;globalTopics&lt;/tt&gt; HashSet, therefore I believe to fix this issue, we will just need to filter out all global topics from that method before returning the topic pattern, do you think&#160;that makes since?&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="16889046" author="mjsax" created="Fri, 19 Jul 2019 17:25:17 +0000"  >&lt;p&gt;That sounds correct.&lt;/p&gt;</comment>
                            <comment id="16890013" author="githubbot" created="Mon, 22 Jul 2019 08:56:25 +0000"  >&lt;p&gt;omarsmak commented on pull request #7104: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7849&quot; title=&quot;Warning when adding GlobalKTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7849&quot;&gt;&lt;del&gt;KAFKA-7849&lt;/del&gt;&lt;/a&gt;: Fix the warning when using GlobalKTable  &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7104&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   *More detailed description of your change,&lt;br/&gt;
   This PR intend to fix the issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7849&quot; title=&quot;Warning when adding GlobalKTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7849&quot;&gt;&lt;del&gt;KAFKA-7849&lt;/del&gt;&lt;/a&gt; by filtering out the global topics from the main consumer, thus the main consumer won&apos;t subscribe to any of the global topics&lt;/p&gt;

&lt;p&gt;   *Summary of testing strategy (including rationale)&lt;br/&gt;
   for the feature or bug fix. Unit and/or integration&lt;br/&gt;
   tests are expected for any behaviour change and&lt;br/&gt;
   system tests should be considered for larger changes.*&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Committer Checklist (excluded from commit message)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Verify design and implementation&lt;/li&gt;
	&lt;li&gt;[ ] Verify test coverage and CI build status&lt;/li&gt;
	&lt;li&gt;[ ] Verify documentation (including upgrade notes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16921983" author="githubbot" created="Wed, 4 Sep 2019 06:25:33 +0000"  >&lt;p&gt;mjsax commented on pull request #7104: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-7849&quot; title=&quot;Warning when adding GlobalKTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-7849&quot;&gt;&lt;del&gt;KAFKA-7849&lt;/del&gt;&lt;/a&gt;: Fix the warning when using GlobalKTable  &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/kafka/pull/7104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/7104&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi050o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>