<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:43:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-2198] kafka-topics.sh exits with 0 status on failures</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-2198</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;In the two failure cases below, kafka-topics.sh exits with status 0.  You shouldn&apos;t need to parse output from the command to know if it failed or not.&lt;/p&gt;

&lt;p&gt;Case 1: Forgetting to add Kafka zookeeper chroot path to zookeeper spec&lt;/p&gt;

&lt;p&gt;$ kafka-topics.sh --alter --topic foo --config min.insync.replicas=2 --zookeeper 10.0.0.1 &amp;amp;&amp;amp; echo succeeded&lt;br/&gt;
succeeded&lt;/p&gt;

&lt;p&gt;Case 2: Bad config option.  (Also, do we really need the java backtrace?  It&apos;s a lot of noise most of the time.)&lt;/p&gt;

&lt;p&gt;$ kafka-topics.sh --alter --topic foo --config min.insync.replicasTYPO=2 --zookeeper 10.0.0.1/kafka &amp;amp;&amp;amp; echo succeeded&lt;br/&gt;
Error while executing topic command requirement failed: Unknown configuration &quot;min.insync.replicasTYPO&quot;.&lt;br/&gt;
java.lang.IllegalArgumentException: requirement failed: Unknown configuration &quot;min.insync.replicasTYPO&quot;.&lt;br/&gt;
    at scala.Predef$.require(Predef.scala:233)&lt;br/&gt;
    at kafka.log.LogConfig$$anonfun$validateNames$1.apply(LogConfig.scala:183)&lt;br/&gt;
    at kafka.log.LogConfig$$anonfun$validateNames$1.apply(LogConfig.scala:182)&lt;br/&gt;
    at scala.collection.Iterator$class.foreach(Iterator.scala:727)&lt;br/&gt;
    at scala.collection.AbstractIterator.foreach(Iterator.scala:1157)&lt;br/&gt;
    at kafka.log.LogConfig$.validateNames(LogConfig.scala:182)&lt;br/&gt;
    at kafka.log.LogConfig$.validate(LogConfig.scala:190)&lt;br/&gt;
    at kafka.admin.TopicCommand$.parseTopicConfigsToBeAdded(TopicCommand.scala:205)&lt;br/&gt;
    at kafka.admin.TopicCommand$$anonfun$alterTopic$1.apply(TopicCommand.scala:103)&lt;br/&gt;
    at kafka.admin.TopicCommand$$anonfun$alterTopic$1.apply(TopicCommand.scala:100)&lt;br/&gt;
    at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)&lt;br/&gt;
    at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:47)&lt;br/&gt;
    at kafka.admin.TopicCommand$.alterTopic(TopicCommand.scala:100)&lt;br/&gt;
    at kafka.admin.TopicCommand$.main(TopicCommand.scala:57)&lt;br/&gt;
    at kafka.admin.TopicCommand.main(TopicCommand.scala)&lt;/p&gt;

&lt;p&gt;succeeded&lt;/p&gt;</description>
                <environment></environment>
        <key id="12830716">KAFKA-2198</key>
            <summary>kafka-topics.sh exits with 0 status on failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="omkreddy">Manikumar</assignee>
                                    <reporter username="rthalley">Bob Halley</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 May 2015 15:24:06 +0000</created>
                <updated>Mon, 11 Jan 2016 15:17:46 +0000</updated>
                            <resolved>Tue, 14 Jul 2015 06:04:02 +0000</resolved>
                                    <version>0.8.2.1</version>
                                    <fixVersion>0.9.0.0</fixVersion>
                                    <component>admin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14550100" author="omkreddy" created="Tue, 19 May 2015 09:19:51 +0000"  >&lt;p&gt;Created reviewboard &lt;a href=&quot;https://reviews.apache.org/r/34403/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/34403/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14550120" author="omkreddy" created="Tue, 19 May 2015 09:28:02 +0000"  >&lt;p&gt;Case 1: Zookeeper chroot path is optional.  Currently --zookeeper options accepts 10.0.0.1, 10.0.0.1:2181, 10.0.0.1:2181/kafka, 10.0.0.1/kafka formats&lt;/p&gt;

&lt;p&gt;Case 2: Uploaded a simple patch which returns non-zero status on failures. I am not sure about the printing stacktrace. let the commiter can decide about it.&lt;/p&gt;</comment>
                            <comment id="14550352" author="rthalley" created="Tue, 19 May 2015 12:30:35 +0000"  >&lt;p&gt;I realize that the chroot path is optional, but it&apos;s still a bug that the command does nothing.  The request is to alter an existing topic, but there is no such topic.  It makes no changes to zookeeper and exits with status 0.  A better error would be &quot;no Kafka configuration in directory /&quot; or &quot;topic &apos;foo&apos; not found in &apos;/config/topics&apos;&quot;.&lt;/p&gt;</comment>
                            <comment id="14550387" author="omkreddy" created="Tue, 19 May 2015 13:00:00 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/34403/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/34403/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14550407" author="omkreddy" created="Tue, 19 May 2015 13:14:28 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/34403/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/34403/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14550411" author="omkreddy" created="Tue, 19 May 2015 13:16:42 +0000"  >&lt;p&gt;Agreed. This has been fixed on trunk (&lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1668&quot; title=&quot;TopicCommand doesn&amp;#39;t warn if --topic argument doesn&amp;#39;t match any topics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-1668&quot;&gt;&lt;del&gt;KAFKA-1668&lt;/del&gt;&lt;/a&gt;). &lt;/p&gt;</comment>
                            <comment id="14622559" author="omkreddy" created="Fri, 10 Jul 2015 16:35:10 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/34403/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/34403/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14622561" author="omkreddy" created="Fri, 10 Jul 2015 16:36:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=junrao&quot; class=&quot;user-hover&quot; rel=&quot;junrao&quot;&gt;junrao&lt;/a&gt; pinging for review&lt;/p&gt;</comment>
                            <comment id="14622574" author="gwenshap" created="Fri, 10 Jul 2015 16:47:05 +0000"  >&lt;p&gt;Hope its ok if I review this, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omkreddy&quot; class=&quot;user-hover&quot; rel=&quot;omkreddy&quot;&gt;omkreddy&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14622576" author="gwenshap" created="Fri, 10 Jul 2015 16:47:58 +0000"  >&lt;p&gt;Also, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omkreddy&quot; class=&quot;user-hover&quot; rel=&quot;omkreddy&quot;&gt;omkreddy&lt;/a&gt;, since the complaint is about usability, can you post sample output of the cases shown above? so we can show the improvement?&lt;/p&gt;</comment>
                            <comment id="14622637" author="omkreddy" created="Fri, 10 Jul 2015 17:40:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gwenshap&quot; class=&quot;user-hover&quot; rel=&quot;gwenshap&quot;&gt;gwenshap&lt;/a&gt; Thanks for the review.  Sample output is given below.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;sh kafka-topics.sh --alter --topic UNKNOWN -config min.insync.replicas=2 --zookeeper localhost &amp;amp;&amp;amp; echo succeeded
Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing topic command : Topic UNKNOWN does not exist on ZK path localhost
[2015-07-10 22:59:01,808] ERROR java.lang.IllegalArgumentException: Topic UNKNOWN does not exist on ZK path localhost
	at kafka.admin.TopicCommand$.alterTopic(TopicCommand.scala:104)
	at kafka.admin.TopicCommand$.main(TopicCommand.scala:56)
	at kafka.admin.TopicCommand.main(TopicCommand.scala)
 (kafka.admin.TopicCommand$)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ sh kafka-topics.sh --alter --topic EVENT --config min.insync.replicasTYPO=2 --zookeeper localhost &amp;amp;&amp;amp; echo succeeded
Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing topic command : requirement failed: Unknown configuration &lt;span class=&quot;code-quote&quot;&gt;&quot;min.insync.replicasTYPO&quot;&lt;/span&gt;.
[2015-07-10 23:02:04,273] ERROR java.lang.IllegalArgumentException: requirement failed: Unknown configuration &lt;span class=&quot;code-quote&quot;&gt;&quot;min.insync.replicasTYPO&quot;&lt;/span&gt;.
	at scala.Predef$.require(Predef.scala:233)
	at kafka.log.LogConfig$$anonfun$validateNames$1.apply(LogConfig.scala:185)
	at kafka.log.LogConfig$$anonfun$validateNames$1.apply(LogConfig.scala:184)
	at scala.collection.Iterator$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;foreach(Iterator.scala:727)
	at scala.collection.AbstractIterator.foreach(Iterator.scala:1157)
	at kafka.log.LogConfig$.validateNames(LogConfig.scala:184)
	at kafka.log.LogConfig$.validate(LogConfig.scala:192)
	at kafka.admin.TopicCommand$.parseTopicConfigsToBeAdded(TopicCommand.scala:217)
	at kafka.admin.TopicCommand$$anonfun$alterTopic$1.apply(TopicCommand.scala:110)
	at kafka.admin.TopicCommand$$anonfun$alterTopic$1.apply(TopicCommand.scala:107)
	at scala.collection.mutable.ResizableArray$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;foreach(ResizableArray.scala:59)
	at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:47)
	at kafka.admin.TopicCommand$.alterTopic(TopicCommand.scala:107)
	at kafka.admin.TopicCommand$.main(TopicCommand.scala:56)
	at kafka.admin.TopicCommand.main(TopicCommand.scala)
 (kafka.admin.TopicCommand$)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14622644" author="omkreddy" created="Fri, 10 Jul 2015 17:44:51 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/34403/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/34403/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14624674" author="omkreddy" created="Mon, 13 Jul 2015 13:57:47 +0000"  >&lt;p&gt;Updated reviewboard &lt;a href=&quot;https://reviews.apache.org/r/34403/diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/34403/diff/&lt;/a&gt;&lt;br/&gt;
 against branch origin/trunk&lt;/p&gt;</comment>
                            <comment id="14625827" author="gwenshap" created="Tue, 14 Jul 2015 05:09:36 +0000"  >&lt;p&gt;Thanks for the patch! pushed to trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12907119">KAFKA-2685</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12733761" name="KAFKA-2198.patch" size="1353" author="omkreddy" created="Tue, 19 May 2015 09:19:50 +0000"/>
                            <attachment id="12733807" name="KAFKA-2198_2015-05-19_18:27:01.patch" size="2409" author="omkreddy" created="Tue, 19 May 2015 12:59:59 +0000"/>
                            <attachment id="12733810" name="KAFKA-2198_2015-05-19_18:41:25.patch" size="2546" author="omkreddy" created="Tue, 19 May 2015 13:14:27 +0000"/>
                            <attachment id="12744741" name="KAFKA-2198_2015-07-10_22:02:02.patch" size="2536" author="omkreddy" created="Fri, 10 Jul 2015 16:35:03 +0000"/>
                            <attachment id="12744752" name="KAFKA-2198_2015-07-10_23:11:23.patch" size="2796" author="omkreddy" created="Fri, 10 Jul 2015 17:44:44 +0000"/>
                            <attachment id="12745038" name="KAFKA-2198_2015-07-13_19:24:46.patch" size="2747" author="omkreddy" created="Mon, 13 Jul 2015 13:57:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2evk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>gwenshap</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>