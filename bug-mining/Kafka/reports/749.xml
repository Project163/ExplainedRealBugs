<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 16:44:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KAFKA-2467] ConsoleConsumer regressions</title>
                <link>https://issues.apache.org/jira/browse/KAFKA-2467</link>
                <project id="12311720" key="KAFKA">Kafka</project>
                    <description>&lt;p&gt;It seems that the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2015&quot; title=&quot;Enable ConsoleConsumer to use new consumer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2015&quot;&gt;&lt;del&gt;KAFKA-2015&lt;/del&gt;&lt;/a&gt; caused a few changes in the behavior of the console consumer. I picked this up because it caused the new mirror maker sanity system test to hang. We need a separate fix for ducktape to address the lack of a timeout where it got stuck, but I&apos;d also like to get this fixed ASAP since it affects pretty much all system test efforts since they commonly use console consumer to validate data produced to Kafka.&lt;/p&gt;

&lt;p&gt;I&apos;ve tracked down a couple of changes so far:&lt;/p&gt;

&lt;p&gt;1. The --consumer.config option handling was changed entirely. I think the new approach was trying to parse it as key=value parameters, but it&apos;s supposed to be a properties file &lt;b&gt;containing&lt;/b&gt; key=value pairs.&lt;br/&gt;
2. A few different exceptions during message processing are not handled the same way. The skipMessageOnErrorOpt is not longer being used at all (it&apos;s parsed, but that option is never checked anymore). Also, exceptions during iteration are not caught. After fixing the consumer.config issue, which was keeping the consumer.timeout.ms setting from making it into the consumer config, this also caused the process to hang. It killed the main thread, but there must be another non-daemon thread still running (presumably the consumer threads?)&lt;br/&gt;
3. The &quot;consumed X messages&quot; message changed from stderr to stdout.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12858521">KAFKA-2467</key>
            <summary>ConsoleConsumer regressions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ewencp">Ewen Cheslack-Postava</assignee>
                                    <reporter username="ewencp">Ewen Cheslack-Postava</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Aug 2015 05:47:49 +0000</created>
                <updated>Thu, 27 Aug 2015 01:36:51 +0000</updated>
                            <resolved>Thu, 27 Aug 2015 01:36:51 +0000</resolved>
                                                    <fixVersion>0.9.0.0</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14710666" author="githubbot" created="Tue, 25 Aug 2015 06:10:33 +0000"  >&lt;p&gt;GitHub user ewencp opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/166&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2467&quot; title=&quot;ConsoleConsumer regressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2467&quot;&gt;&lt;del&gt;KAFKA-2467&lt;/del&gt;&lt;/a&gt;: Fix changes to behavior in ConsoleConsumer: properly parse consumer.config option, handle exceptions during message processing, and print number of processed messages to stderr.&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ewencp/kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ewencp/kafka&lt;/a&gt; kafka-2467-fix-console-consumer-behavior-regressions&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/166.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/166.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #166&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a6961ee0c7551b69922a43ca91f8146662e21209&lt;br/&gt;
Author: Ewen Cheslack-Postava &amp;lt;me@ewencp.org&amp;gt;&lt;br/&gt;
Date:   2015-08-25T05:50:12Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2467&quot; title=&quot;ConsoleConsumer regressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2467&quot;&gt;&lt;del&gt;KAFKA-2467&lt;/del&gt;&lt;/a&gt;: Fix changes to behavior in ConsoleConsumer: properly parse consumer.config option, handle exceptions during message processing, and print number of processed messages to stderr.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14710825" author="ijuma" created="Tue, 25 Aug 2015 07:54:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ewencp&quot; class=&quot;user-hover&quot; rel=&quot;ewencp&quot;&gt;ewencp&lt;/a&gt;, do I understand correctly that the system tests would have caught this regression? Shall we be running the system tests against PR branches automatically?&lt;/p&gt;</comment>
                            <comment id="14710829" author="ewencp" created="Tue, 25 Aug 2015 08:01:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ijuma&quot; class=&quot;user-hover&quot; rel=&quot;ijuma&quot;&gt;ijuma&lt;/a&gt; Sort of. We still need refinements since the tests would have hung and had to be killed by Jenkins (we&apos;re missing a timeout in a pretty critical place).&lt;/p&gt;

&lt;p&gt;As for running system tests on every PR, that would be nice but at the moment isn&apos;t practical because of how long they can take to run. It&apos;d be great to get there eventually, but we need to continue refining the tests, ducktape (e.g., adding the parallel test runner), and even the jenkins config (reuse clusters to avoid the startup costs for each test run that we currently pay). For now, we&apos;re working on making it easy for people to run the system tests manually on specific PRs when they think it would be useful, which I think is a reasonable intermediate step before doing builds on every PR.&lt;/p&gt;</comment>
                            <comment id="14710836" author="ijuma" created="Tue, 25 Aug 2015 08:06:54 +0000"  >&lt;p&gt;Thanks for the explanation &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ewencp&quot; class=&quot;user-hover&quot; rel=&quot;ewencp&quot;&gt;ewencp&lt;/a&gt;. That sounds good. It would be good to update &lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/Contributing+Code+Changes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/Contributing+Code+Changes&lt;/a&gt; with the instructions once ready. &lt;/p&gt;</comment>
                            <comment id="14710860" author="benstopford" created="Tue, 25 Aug 2015 08:25:57 +0000"  >&lt;p&gt;Apologies for this regression. 2015 was adapted by me from a submitted patch. This caused some confusion and I should have been more questioning. Lesson learnt. &lt;/p&gt;

&lt;p&gt;Automated tests here would obviously be a boon too.   &lt;/p&gt;</comment>
                            <comment id="14710873" author="ewencp" created="Tue, 25 Aug 2015 08:30:43 +0000"  >&lt;p&gt;No worries, I was just thankful that the patch had added any unit tests since they helped track the problem down and fix it! This is one class of issues that are harder to catch in unit tests. Apparently the addition of some system tests that we&apos;re running regularly is paying off &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14715847" author="ewencp" created="Thu, 27 Aug 2015 00:59:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gwenshap&quot; class=&quot;user-hover&quot; rel=&quot;gwenshap&quot;&gt;gwenshap&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guozhang&quot; class=&quot;user-hover&quot; rel=&quot;guozhang&quot;&gt;guozhang&lt;/a&gt; Can one of you review and commit this? It&apos;s currently breaking system tests.&lt;/p&gt;</comment>
                            <comment id="14715879" author="guozhang" created="Thu, 27 Aug 2015 01:26:42 +0000"  >&lt;p&gt;I should be the guy apologizing here.. My original patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-2015&quot; title=&quot;Enable ConsoleConsumer to use new consumer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-2015&quot;&gt;&lt;del&gt;KAFKA-2015&lt;/del&gt;&lt;/a&gt; was not complete but only sufficient for some of my local validations long time ago which is essentially a very small subset of the old system test. When &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benstopford&quot; class=&quot;user-hover&quot; rel=&quot;benstopford&quot;&gt;benstopford&lt;/a&gt; picked it up I did not clearly mention it to him. Sorry about that.&lt;/p&gt;</comment>
                            <comment id="14715886" author="githubbot" created="Thu, 27 Aug 2015 01:36:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/kafka/pull/166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/166&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14715887" author="guozhang" created="Thu, 27 Aug 2015 01:36:51 +0000"  >&lt;p&gt;Issue resolved by pull request 166&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/kafka/pull/166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/kafka/pull/166&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12858509">KAFKA-2466</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jbo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>