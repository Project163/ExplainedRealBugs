diff --git a/kafka-patch-review.py b/kafka-patch-review.py
index dc45549f88..89afc841d2 100644
--- a/kafka-patch-review.py
+++ b/kafka-patch-review.py
@@ -105,11 +105,13 @@ def main():
       print 'ERROR: Your reviewboard was not created/updated. Please run the script with the --debug option to troubleshoot the problem'
       p.close()
       sys.exit(1)
-  p.close()
+  if p.close() != None:
+    print 'ERROR: reviewboard update failed. Exiting.'
+    sys.exit(1)
   if opt.debug:
     print 'rb url=',rb_url
 
-  git_command="git diff " + opt.branch + " > " + patch_file
+  git_command="git format-patch " + opt.branch + " --stdout > " + patch_file
   if opt.debug:
     print git_command
   p=os.popen(git_command)
