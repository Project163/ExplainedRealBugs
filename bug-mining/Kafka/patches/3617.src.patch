diff --git a/core/src/main/scala/kafka/server/KafkaServer.scala b/core/src/main/scala/kafka/server/KafkaServer.scala
index b68801faaa..072d47e334 100755
--- a/core/src/main/scala/kafka/server/KafkaServer.scala
+++ b/core/src/main/scala/kafka/server/KafkaServer.scala
@@ -283,7 +283,9 @@ class KafkaServer(
               setClusterId(_clusterId).
               setNodeId(config.brokerId)
             if (!builder.directoryId().isPresent()) {
-              builder.setDirectoryId(copier.generateValidDirectoryId())
+              if (config.migrationEnabled) {
+                builder.setDirectoryId(copier.generateValidDirectoryId())
+              }
             }
             copier.setLogDirProps(logDir, builder.build())
           })
diff --git a/core/src/test/scala/unit/kafka/server/ServerStartupTest.scala b/core/src/test/scala/unit/kafka/server/ServerStartupTest.scala
index dc3a346a1f..bdf3d0afc9 100755
--- a/core/src/test/scala/unit/kafka/server/ServerStartupTest.scala
+++ b/core/src/test/scala/unit/kafka/server/ServerStartupTest.scala
@@ -24,6 +24,8 @@ import org.apache.kafka.server.log.remote.storage.{NoOpRemoteLogMetadataManager,
 import org.apache.zookeeper.KeeperException.NodeExistsException
 import org.junit.jupiter.api.Assertions._
 import org.junit.jupiter.api.{AfterEach, Test}
+import org.junit.jupiter.params.ParameterizedTest
+import org.junit.jupiter.params.provider.ValueSource
 
 class ServerStartupTest extends QuorumTestHarness {
 
@@ -132,4 +134,23 @@ class ServerStartupTest extends QuorumTestHarness {
     assertEquals(1, brokers.size)
     assertEquals(brokerId, brokers.head.id)
   }
+
+ @ParameterizedTest
+ @ValueSource(booleans = Array(false, true))
+ def testDirectoryIdsCreatedOnlyForMigration(migrationEnabled: Boolean): Unit = {
+   val props = TestUtils.createBrokerConfig(1, zkConnect)
+   props.setProperty(KafkaConfig.MigrationEnabledProp, migrationEnabled.toString)
+   if (migrationEnabled) {
+     // Create Controller properties needed when migration is enabled
+     props.setProperty(KafkaConfig.QuorumVotersProp, "3000@localhost:9093")
+     props.setProperty(KafkaConfig.ControllerListenerNamesProp, "CONTROLLER")
+     props.setProperty(KafkaConfig.ListenerSecurityProtocolMapProp,
+       "CONTROLLER:PLAINTEXT,EXTERNAL:PLAINTEXT,PLAINTEXT:PLAINTEXT")
+   }
+   server = new KafkaServer(KafkaConfig.fromProps(props))
+   server.startup()
+   assertEquals(!migrationEnabled, server.logManager.directoryIds.isEmpty)
+   server.shutdown()
+ }
+
 }
