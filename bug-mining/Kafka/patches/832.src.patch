diff --git a/vagrant/broker.sh b/vagrant/broker.sh
index bc040c92e3..954157a185 100644
--- a/vagrant/broker.sh
+++ b/vagrant/broker.sh
@@ -24,13 +24,14 @@ PUBLIC_ADDRESS=$2
 PUBLIC_ZOOKEEPER_ADDRESSES=$3
 JMX_PORT=$4
 
-cd /opt/kafka
+kafka_dir=/opt/kafka-trunk
+cd $kafka_dir
 
 sed \
     -e 's/broker.id=0/'broker.id=$BROKER_ID'/' \
     -e 's/#advertised.host.name=<hostname routable by clients>/'advertised.host.name=$PUBLIC_ADDRESS'/' \
     -e 's/zookeeper.connect=localhost:2181/'zookeeper.connect=$PUBLIC_ZOOKEEPER_ADDRESSES'/' \
-    /opt/kafka/config/server.properties > /opt/kafka/config/server-$BROKER_ID.properties
+    $kafka_dir/config/server.properties > $kafka_dir/config/server-$BROKER_ID.properties
 
 echo "Killing server"
 bin/kafka-server-stop.sh || true
@@ -40,4 +41,4 @@ if [[  -n $JMX_PORT ]]; then
   export JMX_PORT=$JMX_PORT
   export KAFKA_JMX_OPTS="-Djava.rmi.server.hostname=$PUBLIC_ADDRESS -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false  -Dcom.sun.management.jmxremote.ssl=false "
 fi
-bin/kafka-server-start.sh /opt/kafka/config/server-$BROKER_ID.properties 1>> /tmp/broker.log 2>> /tmp/broker.log &
+bin/kafka-server-start.sh $kafka_dir/config/server-$BROKER_ID.properties 1>> /tmp/broker.log 2>> /tmp/broker.log &
diff --git a/vagrant/zk.sh b/vagrant/zk.sh
index 6fc4b7cfe8..dcc481073a 100644
--- a/vagrant/zk.sh
+++ b/vagrant/zk.sh
@@ -23,14 +23,15 @@ ZKID=$1
 NUM_ZK=$2
 JMX_PORT=$3
 
-cd /opt/kafka
+kafka_dir=/opt/kafka-trunk
+cd $kafka_dir
 
-cp /opt/kafka/config/zookeeper.properties /opt/kafka/config/zookeeper-$ZKID.properties
-echo "initLimit=5" >> /opt/kafka/config/zookeeper-$ZKID.properties
-echo "syncLimit=2" >> /opt/kafka/config/zookeeper-$ZKID.properties
-echo "quorumListenOnAllIPs=true" >> /opt/kafka/config/zookeeper-$ZKID.properties
+cp $kafka_dir/config/zookeeper.properties $kafka_dir/config/zookeeper-$ZKID.properties
+echo "initLimit=5" >> $kafka_dir/config/zookeeper-$ZKID.properties
+echo "syncLimit=2" >> $kafka_dir/config/zookeeper-$ZKID.properties
+echo "quorumListenOnAllIPs=true" >> $kafka_dir/config/zookeeper-$ZKID.properties
 for i in `seq 1 $NUM_ZK`; do
-    echo "server.${i}=zk${i}:2888:3888" >> /opt/kafka/config/zookeeper-$ZKID.properties
+    echo "server.${i}=zk${i}:2888:3888" >> $kafka_dir/config/zookeeper-$ZKID.properties
 done
 
 mkdir -p /tmp/zookeeper
