<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:03:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3771] Regression from TIKA-3687: Files wrongly detected as EML </title>
                <link>https://issues.apache.org/jira/browse/TIKA-3771</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Running regression tests in the process of upgrading to Tika-2.4.0 from 1.x, I detected some hundreds of samples from 1M of different file types now are being detected as EML. This is caused by the &amp;lt;match value=&quot;\nX-&quot; type=&quot;string&quot; offset=&quot;0:1024&quot;/&amp;gt; rule added in &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3687&quot; title=&quot;Email file detected as text/html&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3687&quot;&gt;&lt;del&gt;TIKA-3687&lt;/del&gt;&lt;/a&gt; in the minShouldMatch=&quot;2&quot; clause. Attached is a sample PNG file that triggers this (it also has another \nDate: value in the first 1024 bytes).&lt;/p&gt;

&lt;p&gt;Another not related thing, I tried to override the message/rfc822 mime definition with a custom-tika-mimetypes.xml in classpath, but it had no effect. It used to work in Tika-1.x. Was that change intentional? I think user definitions should take precedence over Tika definitions, since they can change depending on domain or context (e.g. the same extension may be used by different applications). If it wasn&apos;t intentional, I&apos;ll open other issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13445942">TIKA-3771</key>
            <summary>Regression from TIKA-3687: Files wrongly detected as EML </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lfcnassif">Lu&#237;s Filipe Nassif</assignee>
                                    <reporter username="lfcnassif">Lu&#237;s Filipe Nassif</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 May 2022 03:13:11 +0000</created>
                <updated>Fri, 8 Sep 2023 15:34:38 +0000</updated>
                            <resolved>Sun, 22 May 2022 21:25:28 +0000</resolved>
                                    <version>2.4.0</version>
                                    <fixVersion>2.4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17539993" author="gagravarr" created="Fri, 20 May 2022 08:40:14 +0000"  >&lt;p&gt;The PNG magic is priority 50, which is also what our EML min-match 2 is at. That&apos;s probably fine for most of them, but \nX- is seemingly too general&lt;/p&gt;

&lt;p&gt;I think we probably need to lower the priority on the 0:1024 cases, though I&apos;m not sure if we can do that without moving that whole block down?&lt;/p&gt;

&lt;p&gt;FWIW your PNG matches because it has a URL followed by a bunch of HTTP response headers at the end of it!&lt;/p&gt;</comment>
                            <comment id="17540132" author="lfcnassif" created="Fri, 20 May 2022 13:32:36 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nick&quot; class=&quot;user-hover&quot; rel=&quot;nick&quot;&gt;nick&lt;/a&gt;, decreasing the priority of that block seems a good idea, but it may have side effects... I asked to &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3687&quot; title=&quot;Email file detected as text/html&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3687&quot;&gt;&lt;del&gt;TIKA-3687&lt;/del&gt;&lt;/a&gt; reporter if he really needs \nX- 0:1024 match, if not, maybe we could remove it?&lt;/p&gt;</comment>
                            <comment id="17540409" author="tallison@mitre.org" created="Sat, 21 May 2022 10:51:47 +0000"  >&lt;p&gt;&amp;gt;If it wasn&apos;t intentional, I&apos;ll open other issue.&lt;/p&gt;

&lt;p&gt;Not intentional. &lt;/p&gt;</comment>
                            <comment id="17540507" author="lfcnassif" created="Sat, 21 May 2022 21:29:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison&quot; class=&quot;user-hover&quot; rel=&quot;tallison&quot;&gt;tallison&lt;/a&gt;, any problem if we revert that \nX- magic for 2.4.1?&lt;/p&gt;</comment>
                            <comment id="17540569" author="tallison@mitre.org" created="Sun, 22 May 2022 10:26:58 +0000"  >&lt;p&gt;All good.  +1&lt;/p&gt;</comment>
                            <comment id="17540595" author="lfcnassif" created="Sun, 22 May 2022 13:25:15 +0000"  >&lt;p&gt;Great, I&apos;ll commit with an unit test later today or early tomorrow, thank you!&lt;/p&gt;</comment>
                            <comment id="17540700" author="lfcnassif" created="Sun, 22 May 2022 21:59:28 +0000"  >&lt;p&gt;Fixed in ed1c86a52d8e07d0d57decfe82ed73a90fb57c8e&lt;/p&gt;</comment>
                            <comment id="17540703" author="hudson" created="Sun, 22 May 2022 23:06:13 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #593 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/593/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/593/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3771&quot; title=&quot;Regression from TIKA-3687: Files wrongly detected as EML &quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3771&quot;&gt;&lt;del&gt;TIKA-3771&lt;/del&gt;&lt;/a&gt;: remove eml magic too common causing false positives (lfcnassif: &lt;a href=&quot;https://github.com/apache/tika/commit/ed1c86a52d8e07d0d57decfe82ed73a90fb57c8e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/ed1c86a52d8e07d0d57decfe82ed73a90fb57c8e&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-core/src/test/java/org/apache/tika/mime/MimeDetectionTest.java&lt;/li&gt;
	&lt;li&gt;(add) tika-core/src/test/resources/org/apache/tika/mime/test-pngNotEml.bin&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17763140" author="tallison@mitre.org" created="Fri, 8 Sep 2023 15:34:38 +0000"  >&lt;p&gt;On &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-4125&quot; title=&quot;Tweak rfc822 detection, yet again&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-4125&quot;&gt;&lt;del&gt;TIKA-4125&lt;/del&gt;&lt;/a&gt;, we were getting html detection when we should have gotten rfc822 detection.  I added some more headers to rfc822 detection and then caused this test to fail. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;On the &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-4125&quot; title=&quot;Tweak rfc822 detection, yet again&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-4125&quot;&gt;&lt;del&gt;TIKA-4125&lt;/del&gt;&lt;/a&gt; branch, I&apos;ve temporarily bumped the priority of png to 55, higher than rfc822.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lfcnassif&quot; class=&quot;user-hover&quot; rel=&quot;lfcnassif&quot;&gt;lfcnassif&lt;/a&gt;, were your rfc822 false positives all on PNG or have I just opened this can of worms again?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13043944" name="BEA498353ECFA1C440365BB434BBC228269917D7.png" size="938" author="lfcnassif" created="Fri, 20 May 2022 03:12:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12j54:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>