<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:00:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2242] opendocument parsing produces malformed xml</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2242</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;For some odt documents, a malformed xml is produced when parsing. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13035475">TIKA-2242</key>
            <summary>opendocument parsing produces malformed xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="jvanraemdonck">Jan Van Raemdonck</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Jan 2017 11:05:16 +0000</created>
                <updated>Tue, 3 Oct 2023 19:56:04 +0000</updated>
                            <resolved>Tue, 3 Oct 2023 19:56:03 +0000</resolved>
                                    <version>1.13</version>
                    <version>1.14</version>
                                    <fixVersion>1.15</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>handler</component>
                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15826609" author="tallison@mitre.org" created="Tue, 17 Jan 2017 18:56:19 +0000"  >&lt;p&gt;Bad nesting of markup or something else?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;&amp;lt;u&amp;gt;name&amp;lt;/b&amp;gt;, advocaat ... persoon.&amp;lt;/u&amp;gt;&amp;lt;/p&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15826650" author="jvanraemdonck" created="Tue, 17 Jan 2017 19:25:07 +0000"  >&lt;p&gt;Yes, the bad nesting is the issue i&apos;m having.&lt;/p&gt;</comment>
                            <comment id="15826839" author="tallison@mitre.org" created="Tue, 17 Jan 2017 21:20:23 +0000"  >&lt;p&gt;Thank you.  The attached test file also shows that we need to handle paragraph level default styles &quot;P1&quot;, etc...&lt;/p&gt;

&lt;p&gt;Will work on both.&lt;/p&gt;</comment>
                            <comment id="15827321" author="tallison@mitre.org" created="Wed, 18 Jan 2017 02:20:10 +0000"  >&lt;p&gt;And we have to handle &lt;tt&gt;style:text-underline-style=&quot;none&quot;&lt;/tt&gt;. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15827325" author="tallison@mitre.org" created="Wed, 18 Jan 2017 02:21:14 +0000"  >&lt;p&gt;Thank you for opening this and submitting a test document!&lt;/p&gt;</comment>
                            <comment id="15827341" author="hudson" created="Wed, 18 Jan 2017 02:42:56 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build tika-2.x #200 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x/200/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x/200/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2242&quot; title=&quot;opendocument parsing produces malformed xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2242&quot;&gt;&lt;del&gt;TIKA-2242&lt;/del&gt;&lt;/a&gt;  fix style markup in ODT (tallison: rev 4374bcecf4600664998cd08bd1c6b044b9acded7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parser-modules/tika-parser-office-module/src/main/java/org/apache/tika/parser/odf/OpenDocumentContentParser.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parser-modules/tika-parser-office-module/src/test/java/org/apache/tika/parser/odf/ODFParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(add) tika-test-resources/src/test/resources/test-documents/testODTStyles2.odt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15827344" author="hudson" created="Wed, 18 Jan 2017 02:47:44 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1181 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1181/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1181/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2242&quot; title=&quot;opendocument parsing produces malformed xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2242&quot;&gt;&lt;del&gt;TIKA-2242&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix style markup in ODT (tallison: rev 8a04f207e8c4e2a87e61930e0e28be48ce99d20c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/src/test/resources/test-documents/testODTStyles2.odt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/odf/ODFParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/odf/OpenDocumentContentParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15848452" author="jvanraemdonck" created="Wed, 1 Feb 2017 14:51:15 +0000"  >&lt;p&gt;Found another instance of this issue in one of the odt documents. This time it is a div tag that is causing the issue:&lt;br/&gt;
&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;WOUTERS Rolf&amp;lt;div&amp;gt;&amp;lt;p /&amp;gt;Beschermde persoon is overleden&amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;/div&amp;gt;&lt;br/&gt;
I will attach the new document to the ticket.&lt;/p&gt;</comment>
                            <comment id="15850182" author="tallison@mitre.org" created="Thu, 2 Feb 2017 17:00:10 +0000"  >&lt;p&gt;Thank you for re-opening this.  The second document shows we need some non-trivial fixes.  We&apos;re mapping, &lt;tt&gt;note&lt;/tt&gt;, &lt;tt&gt;annotation&lt;/tt&gt; and &lt;tt&gt;notes&lt;/tt&gt; to &lt;tt&gt;&amp;lt;div&amp;gt;&lt;/tt&gt;.  However, as your document shows, these can occur within a &lt;tt&gt;&amp;lt;p/&amp;gt;&lt;/tt&gt; and contain their own &lt;tt&gt;&amp;lt;p/&amp;gt;&lt;/tt&gt;.  We&apos;ll want to avoid putting a &lt;tt&gt;&amp;lt;p/&amp;gt;&lt;/tt&gt; inside a &lt;tt&gt;&amp;lt;div/&amp;gt;&lt;/tt&gt; and a &lt;tt&gt;&amp;lt;p/&amp;gt;&lt;/tt&gt; inside a &lt;tt&gt;&amp;lt;p/&amp;gt;&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;p&amp;gt;text&amp;lt;div&amp;gt;&amp;lt;p&amp;gt;this is an annotation&amp;lt;/p&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/p&amp;gt;.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should we map &lt;tt&gt;note&lt;/tt&gt;, &lt;tt&gt;annotation&lt;/tt&gt; and &lt;tt&gt;notes&lt;/tt&gt; to &lt;tt&gt;&amp;lt;span/&amp;gt;&lt;/tt&gt; instead of &lt;tt&gt;&amp;lt;div/&amp;gt;&lt;/tt&gt;?  Or, should we close the &lt;tt&gt;&amp;lt;p&amp;gt;&lt;/tt&gt; when we hit an &lt;tt&gt;annotation&lt;/tt&gt; and friends?&lt;/p&gt;</comment>
                            <comment id="15856155" author="jvanraemdonck" created="Tue, 7 Feb 2017 14:59:01 +0000"  >&lt;p&gt;Hi Tim, sorry for the delay in replying!&lt;br/&gt;
For us it would be best if the annotation and friends would be mapped to &amp;lt;span&amp;gt; tags.&lt;/p&gt;</comment>
                            <comment id="15863680" author="tallison@mitre.org" created="Mon, 13 Feb 2017 13:39:05 +0000"  >&lt;p&gt;Ha.  Sorry, now, for my delay.  I&apos;ll work on this over the next few days in coordination with &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2264&quot; title=&quot;Better handling of footnotes/endnotes for ODF files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2264&quot;&gt;TIKA-2264&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15897345" author="jvanraemdonck" created="Mon, 6 Mar 2017 13:58:06 +0000"  >&lt;p&gt;Hi Tim, did you have a chance to work on this issue yet?&lt;/p&gt;</comment>
                            <comment id="15897350" author="tallison@mitre.org" created="Mon, 6 Mar 2017 14:01:04 +0000"  >&lt;p&gt;No.  Sorry.  Working on other tasks.  I&apos;m hoping to get to this on Wed.&lt;/p&gt;</comment>
                            <comment id="15905593" author="tallison@mitre.org" created="Fri, 10 Mar 2017 19:35:00 +0000"  >&lt;p&gt;The issue in the second triggering file is now fixed.&lt;/p&gt;

&lt;p&gt; And, y, it turns out that Wed in Open source time looks like Friday, and &quot;over the next few days&quot; = &quot;next week, maybe&quot;.  Sorry.&lt;/p&gt;

&lt;p&gt;Please let us know what else you find.  Cheers!&lt;/p&gt;</comment>
                            <comment id="17391228" author="teddy_boomer" created="Sun, 1 Aug 2021 19:21:56 +0000"  >&lt;p&gt;Hi, I come back to this old issue because it reappears in my work:&lt;/p&gt;

&lt;p&gt;I tried a tika run on a directory of .docx and .odt files to grab metadata into an exist-db project. (tika 1.27, 2.0BETA, 2.0.0 tested with same effect)&lt;/p&gt;

&lt;p&gt;Meanwhile, odt generates&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;twisted markups ( ul, ol, see L254-261)&lt;/li&gt;
	&lt;li&gt;and strange annotations: see L243 &#8594; the &amp;lt;p&amp;gt; markup begins with an annotation class and is closed by &amp;lt;/annotation&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It&apos;s a pity because I&apos;d like to grab a large bunch of metadata on .odt which is my default format of work.&lt;/p&gt;

&lt;p&gt;(output of tika-app-2.0.0 and file joined underneath). Sincerely.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13031352/13031352_out.xhtml&quot; title=&quot;out.xhtml attached to TIKA-2242&quot;&gt;out.xhtml&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;sup&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13031353/13031353_cor-S0BAC21-specimen2.odt&quot; title=&quot;cor-S0BAC21-specimen2.odt attached to TIKA-2242&quot;&gt;cor-S0BAC21-specimen2.odt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/sup&gt;&lt;/p&gt;</comment>
                            <comment id="17393157" author="tallison@mitre.org" created="Wed, 4 Aug 2021 13:28:55 +0000"  >&lt;p&gt;The ol/ul misorder was caused by pushing to the list style stack only if the name was not null at the start list element but always popping at the end list element.&lt;/p&gt;

&lt;p&gt;This is what we now get:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;p&amp;gt;Exercice 3&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;tableau des issues&#160;: produits des deux d&#233;s &amp;lt;/p&amp;gt;
    &amp;lt;ul&amp;gt;	
      &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;Univers des valeurs&#160;: { 1;2;3;4;5;6;8;9;10;12;15;16;18;20;24;25;30;36}&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
      &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;Chaque couple de faces est &#233;quiprobable (36 couples), donc on a la loi de probabilit&#233;&#160;:&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
    &amp;lt;/ul&amp;gt;
  &amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Will fix annotations next...&lt;/p&gt;</comment>
                            <comment id="17393200" author="tallison@mitre.org" created="Wed, 4 Aug 2021 14:14:09 +0000"  >&lt;p&gt;Annotations are now fixed.&lt;/p&gt;

&lt;p&gt;I added a test to run the xhtml output of the ODTParser through an XML parser.  This turned up two other bugs: we weren&apos;t closing style tags at the end of headers or &amp;lt;a&amp;gt; elements.&lt;/p&gt;

&lt;p&gt;This is all fixed now locally.  When I get a clean build, I&apos;ll push to main.&lt;/p&gt;</comment>
                            <comment id="17393290" author="hudson" created="Wed, 4 Aug 2021 15:59:24 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #301 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/301/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/301/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2242&quot; title=&quot;opendocument parsing produces malformed xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2242&quot;&gt;&lt;del&gt;TIKA-2242&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix buggy xhtml element ordering/tags in ODT parser (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/6dfd3f6a3e043d020f3ca1f6880dd9a28f3c5a7d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/6dfd3f6a3e043d020f3ca1f6880dd9a28f3c5a7d&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-miscoffice-module/src/test/java/org/apache/tika/parser/odf/ODFParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-miscoffice-module/src/main/java/org/apache/tika/parser/odf/OpenDocumentBodyHandler.java&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-miscoffice-module/src/test/resources/test-documents/testODTBodyListOpenClose.xml.gz&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-miscoffice-module/src/test/java/org/apache/tika/parser/odf/OpenDocumentContentParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17771630" author="tallison@mitre.org" created="Tue, 3 Oct 2023 19:56:04 +0000"  >&lt;p&gt;This should be good to go.  Please reopen if you find otherwise.  Thank you for opening this issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13042410">TIKA-2264</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12847778" name="2017-01-02-16B833-16B833VANCAUTEREN.odt" size="17383" author="jvanraemdonck" created="Tue, 17 Jan 2017 11:10:21 +0000"/>
                            <attachment id="12850432" name="2017-02-01-15B96Ghijsens-17B96GHIJSENS.odt" size="17140" author="jvanraemdonck" created="Wed, 1 Feb 2017 14:51:48 +0000"/>
                            <attachment id="13031353" name="cor-S0BAC21-specimen2.odt" size="106546" author="teddy_boomer" created="Sun, 1 Aug 2021 19:16:33 +0000"/>
                            <attachment id="13031352" name="out.xhtml" size="10196" author="teddy_boomer" created="Sun, 1 Aug 2021 19:16:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38t1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>