<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:05:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-4459] protected ODF encryption detection fail</title>
                <link>https://issues.apache.org/jira/browse/TIKA-4459</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;When passing inputstream of protected odf format file to tika we get a ZipException instead of a EncryptedDocumentException.&lt;/p&gt;

&lt;p&gt;This works well and correctly throws EncryptedDocumentException if you create TikaInputStream with Path or call TikaInputStream.getPath() as it will write to a temporary file in memory.&lt;/p&gt;

&lt;p&gt;But when working with InputStreams we get the following zip exception:&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
org.apache.tika.exception.TikaException: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-198&quot; title=&quot;Better distinction between IOException and TikaException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-198&quot;&gt;&lt;del&gt;TIKA-198&lt;/del&gt;&lt;/a&gt;: Illegal IOException from org.apache.tika.parser.odf.OpenDocumentParser@bae47a0&lt;br/&gt;
at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:304)&lt;br/&gt;
at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:298)&lt;br/&gt;
at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:204)&lt;br/&gt;
at org.apache.tika.Tika.parseToString(Tika.java:525)&lt;br/&gt;
at org.apache.tika.Tika.parseToString(Tika.java:495)&lt;br/&gt;
at org.manish.AttachmentParser.parse(AttachmentParser.java:21)&lt;br/&gt;
at org.manish.AttachmentParser.lambda$testParse$1(AttachmentParser.java:72)&lt;br/&gt;
at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)&lt;br/&gt;
at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)&lt;br/&gt;
at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)&lt;br/&gt;
at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)&lt;br/&gt;
at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)&lt;br/&gt;
at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)&lt;br/&gt;
at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)&lt;br/&gt;
at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)&lt;br/&gt;
at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)&lt;br/&gt;
at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)&lt;br/&gt;
at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)&lt;br/&gt;
at org.manish.AttachmentParser.testParse(AttachmentParser.java:64)&lt;br/&gt;
at org.manish.AttachmentParser.main(AttachmentParser.java:57)&lt;br/&gt;
Caused by: java.util.zip.ZipException: only DEFLATED entries can have EXT descriptor&lt;br/&gt;
at java.base/java.util.zip.ZipInputStream.readLOC(ZipInputStream.java:313)&lt;br/&gt;
at java.base/java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:125)&lt;br/&gt;
at org.apache.tika.parser.odf.OpenDocumentParser.handleZipStream(OpenDocumentParser.java:218)&lt;br/&gt;
at org.apache.tika.parser.odf.OpenDocumentParser.parse(OpenDocumentParser.java:169)&lt;br/&gt;
at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:298)&lt;br/&gt;
... 19 more&lt;br/&gt;
&#160;&lt;br/&gt;
(We use tika to detect encrypted docs)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 24.04.2 LTS x86_64&#160;&lt;/p&gt;</environment>
        <key id="13624580">TIKA-4459</key>
            <summary>protected ODF encryption detection fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="manish003">Manish S N</reporter>
                        <labels>
                            <label>encryption</label>
                            <label>odf</label>
                            <label>open-document-format</label>
                            <label>protected</label>
                            <label>regression</label>
                            <label>zip</label>
                    </labels>
                <created>Fri, 25 Jul 2025 07:46:52 +0000</created>
                <updated>Thu, 31 Jul 2025 23:51:32 +0000</updated>
                            <resolved>Thu, 31 Jul 2025 21:38:54 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0.0</fixVersion>
                    <fixVersion>3.2.2</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="18009929" author="tilman" created="Fri, 25 Jul 2025 11:47:00 +0000"  >&lt;p&gt;Please attach such a file and minimal code, and try using the previous tika version, does it happen too?&lt;/p&gt;</comment>
                            <comment id="18010244" author="JIRAUSER306563" created="Mon, 28 Jul 2025 04:44:57 +0000"  >&lt;p&gt;It happens with any protected open document format (odt,ods,odp) (given as stream not file) parsed by open document parser.&#160;&lt;/p&gt;

&lt;p&gt;Infering from the decompiled code the open document parser has two way of parsing document it seems, either as ZipFile (In case the stream is TikaInputStream and returns true for hasFile() method) or as ZipStream otherwise.&lt;/p&gt;

&lt;p&gt;The problem occurs in the ZipStream logic &amp;#8211; when we give tika an Inputstream (either or not wrapped in TikaInputStream)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Tika correctly throws EncryptedDocumentException in the ZipFile logic&#160; flow that happens when we pass the parser a TikaInputStream created using path by calling TikaInputStream.get(Path)&lt;/p&gt;</comment>
                            <comment id="18010278" author="tilman" created="Mon, 28 Jul 2025 07:01:48 +0000"  >&lt;p&gt;I can reproduce it with this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
InputStream is = URI.create(&lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/secure/attachment/13077746/&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt;.odt&quot;&lt;/span&gt;).toURL().openStream();
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AutoDetectParser().parse(is, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultHandler(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Metadata(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ParseContext());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and it worked in 3.2.0 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="18010307" author="JIRAUSER306563" created="Mon, 28 Jul 2025 09:07:41 +0000"  >&lt;p&gt;It works in 3.2.0&#160; &#128064;&lt;/p&gt;

&lt;p&gt;It didn&apos;t work in 2.9.2 though and in 3.2.1; I thought the issue is never fixed in the in-between versions &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;(It didn&apos;t work in 3.1.0. and 3.0.0 too. Making 3.2.0 the only version to handle this correctly)&lt;/p&gt;</comment>
                            <comment id="18010334" author="tilman" created="Mon, 28 Jul 2025 10:06:59 +0000"  >&lt;p&gt;It&apos;s a java bug when handling zip streams instead of zip files (which you mentioned):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
InputStream is = URI.create(&lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/secure/attachment/13077746/&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt;.odt&quot;&lt;/span&gt;).toURL().openStream();
&lt;/span&gt;ZipInputStream zis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipInputStream(is);
&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
{
    ZipEntry entry = zis.getNextEntry();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entry == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
    }
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(entry + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + entry.getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + entry.getSize() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + entry.isDirectory());
}
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See here:&lt;br/&gt;
&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8143613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8143613&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8327690&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8327690&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So I guess we&apos;ll have to temporarily store them, or use a different library&lt;/p&gt;</comment>
                            <comment id="18010354" author="JIRAUSER306563" created="Mon, 28 Jul 2025 10:57:25 +0000"  >&lt;p&gt;then how can 3.2.0 handle it?&lt;/p&gt;

&lt;p&gt;Shouldn&apos;t we do something in tika side to handle this exception and ensure smooth parsing?&lt;/p&gt;

&lt;p&gt;Like calling TikaInputStream.getPath() internally in the parser when such a file is encountered. This spools the Inputstream to temporary file for the parser to parse as ZipFile&lt;/p&gt;</comment>
                            <comment id="18010364" author="tilman" created="Mon, 28 Jul 2025 11:23:20 +0000"  >&lt;p&gt;I was working on something like that. My first attempt failed, which was to copy to a file after a fail and retry. I suspect it failed because the input has already been consumed. The second attempt was to call &lt;tt&gt;((TikaInputStream) stream).getPath();&lt;/tt&gt; in &lt;tt&gt;OpenDocumentParser.parse()&lt;/tt&gt; and this works, but it means that it would make everything slower because we&apos;d always copy to a temporary file.&lt;/p&gt;</comment>
                            <comment id="18010390" author="JIRAUSER306563" created="Mon, 28 Jul 2025 12:49:34 +0000"  >&lt;p&gt;&lt;del&gt;So would ditching java&apos;s inbuilt ZipInputStream and moving to ZipArchiveInputStream of apache commons compress solve the issue?&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;EDIT:&lt;/p&gt;

&lt;p&gt;guess not. as the following code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
InputStream is = URI.create(&lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/secure/attachment/13077746/&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt;.odt&quot;&lt;/span&gt;).toURL().openStream();
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AutoDetectParser().parse(is, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultHandler(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Metadata(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ParseContext());
&lt;/span&gt;
        ZipArchiveInputStream zis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveInputStream(is);
        &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
        {
            ZipEntry entry = zis.getNextEntry();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entry == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
            {
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;No more entries in the zip file.&quot;&lt;/span&gt;);
                &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
            }
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(entry + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + entry.getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + entry.getSize() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + entry.isDirectory());
        }
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;gives&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mimetype mimetype 39 &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
Configurations2/menubar/ Configurations2/menubar/ 0 &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Configurations2/progressbar/ Configurations2/progressbar/ 0 &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Configurations2/popupmenu/ Configurations2/popupmenu/ 0 &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Configurations2/floater/ Configurations2/floater/ 0 &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Configurations2/statusbar/ Configurations2/statusbar/ 0 &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Configurations2/toolbar/ Configurations2/toolbar/ 0 &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Configurations2/toolpanel/ Configurations2/toolpanel/ 0 &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Configurations2/images/Bitmaps/ Configurations2/images/Bitmaps/ 0 &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Configurations2/accelerator/ Configurations2/accelerator/ 0 truestyles.xml styles.xml -1 &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.commons.compress.archivers.zip.UnsupportedZipFeatureException: Unsupported feature data descriptor used in entry styles.xml
	at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.read(ZipArchiveInputStream.java:919)
	at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.skip(ZipArchiveInputStream.java:1285)
	at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.closeEntry(ZipArchiveInputStream.java:480)
	at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.getNextZipEntry(ZipArchiveInputStream.java:651)
	at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.getNextEntry(ZipArchiveInputStream.java:632)
	at org.manish.AttachmentParser.tilmanTest(AttachmentParser.java:79)
	at org.manish.AttachmentParser.main(AttachmentParser.java:69)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18010392" author="tilman" created="Mon, 28 Jul 2025 12:55:09 +0000"  >&lt;p&gt;No I tried that one (the answer with zero votes)&lt;br/&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/47208272/android-zipinputstream-only-deflated-entries-can-have-ext-descriptor&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/47208272/android-zipinputstream-only-deflated-entries-can-have-ext-descriptor&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Lets wait for another opinion. One change that makes a compromise would be this in &lt;tt&gt;OpenDocumentParser.parse()&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stream &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; TikaInputStream) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;application/vnd.oasis.opendocument.text&quot;&lt;/span&gt;.equals(metadata.get(Metadata.CONTENT_TYPE))) {
                ((TikaInputStream) stream).getPath();
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18010395" author="JIRAUSER306563" created="Mon, 28 Jul 2025 13:15:21 +0000"  >&lt;p&gt;Yeah ZipArchiveStream does not help. edited my comment above.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;your code looks promising only that&lt;/p&gt;

&lt;p&gt;this issue is not only in protected open document text but also in presentations and sheets all .odt, .ods , .odp&lt;/p&gt;</comment>
                            <comment id="18010396" author="JIRAUSER306563" created="Mon, 28 Jul 2025 13:15:46 +0000"  >&lt;p&gt;also how is it working fine in 3.2.0 ?!&lt;/p&gt;

&lt;p&gt;EDIT: -&lt;/p&gt;

&lt;p&gt;The culprit was DefaultZipContainerDetector&lt;/p&gt;

&lt;p&gt;in the detect method in the return statement the &apos;this.markLimit&apos; evaluates to -1 so it defaults to method detectZipFormatOnFile(tis,metadata) which calls TikaInputStream.getFile() method which spools the input stream to a temporary file and returns the file. This converts our stream based TikaInputStream to File based TikaInputStream during the detection itself&lt;/p&gt;</comment>
                            <comment id="18010398" author="tilman" created="Mon, 28 Jul 2025 13:29:04 +0000"  >&lt;p&gt;It was working in 3.2.0 because that version downloaded the file on disk.&lt;/p&gt;

&lt;p&gt;new code change in &lt;tt&gt;OpenDocumentParser.parse()&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stream &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; TikaInputStream) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Strings.CS.startsWith(metadata.get(Metadata.CONTENT_TYPE), &lt;span class=&quot;code-quote&quot;&gt;&quot;application/vnd.oasis.opendocument&quot;&lt;/span&gt;)) {
        ((TikaInputStream) stream).getPath();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18010556" author="JIRAUSER306563" created="Tue, 29 Jul 2025 04:33:45 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; yes that&apos;s what we must do &#8211; spool InputStream to temporary file in OpenDocumentParser every time, if that&apos;s what&apos;s required for correct parsing,&lt;/p&gt;

&lt;p&gt;As OpenDocumentParser must do what it ought to do.&lt;/p&gt;

&lt;p&gt;with modern SSDs the write overhead is negligible.&lt;/p&gt;

&lt;p&gt;Also there are benefits of having it in file system like parsers can have random access to content and it is easy on ram.&lt;/p&gt;</comment>
                            <comment id="18010647" author="JIRAUSER306563" created="Tue, 29 Jul 2025 11:43:16 +0000"  >&lt;p&gt;I did a performance test with spooling (for every file type) and withour explicit spooling.&lt;/p&gt;

&lt;p&gt;The results are&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
17:05:39.547 [main] INFO org.manish.PerfTest -- #$# spooling: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, fileCount: 23, meanTime: 5.96, stdDeviation: 3.78, minTime: 2.0, maxTime: 13.0
17:05:39.547 [main] INFO org.manish.PerfTest -- #$# spooling: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, fileCount: 23, meanTime: 5.13, stdDeviation: 4.81, minTime: 1.0, maxTime: 17.0 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I only walked all the files in my document folder and my machine has an ssd so the results might be influenced by that. but it seems the spooling variant performed better.&#160;&lt;/p&gt;

&lt;p&gt;I attach the performance test code below so you can try it on your test files folder&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PerfTest {
    &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;is to test performance difference between spooling and not spooling input stream
&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Path TEST_FOLDER = Path.of(&lt;span class=&quot;code-quote&quot;&gt;&quot;/path/redacted/&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;/privacy&quot;&lt;/span&gt;);

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Logger log = LoggerFactory.getLogger(PerfTest.class);

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; DescriptiveStatistics spoolingStats = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DescriptiveStatistics();
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; DescriptiveStatistics nonSpoolingStats = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DescriptiveStatistics();

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        testSpoolingPerf();
    }

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Tika parser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Tika();

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; parse(InputStream fileStream, Metadata meta) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; TikaException, IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; parser.parseToString(fileStream, meta);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void testSpoolingPerf() {
        &lt;span class=&quot;code-comment&quot;&gt;// This method walks the files in the folder and calls test path on each path
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (Stream&amp;lt;Path&amp;gt; paths = Files.walk(TEST_FOLDER)) {
            paths.filter(Files::isRegularFile).forEach(PerfTest::testPath);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
            e.printStackTrace();
        }
        logStats(spoolingStats, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        logStats(nonSpoolingStats, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void logStats(DescriptiveStatistics stats, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; spooling) {
        &lt;span class=&quot;code-comment&quot;&gt;//log overall statistics &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; time taken
&lt;/span&gt;        log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;#$# spooling: {}, fileCount: {}, meanTime: {}, stdDeviation: {}, minTime: {}, maxTime: {}&quot;&lt;/span&gt;,
                spooling, stats.getN(), &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%.2f&quot;&lt;/span&gt;,stats.getMean()), &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%.2f&quot;&lt;/span&gt;, stats.getStandardDeviation()),
                stats.getMin(), stats.getMax());
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void testPath(Path file){
        parsePath(file, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;); &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; warmup
&lt;/span&gt;        parsePath(file, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;); &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; warmup
&lt;/span&gt;        log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Warmup completed&quot;&lt;/span&gt;);
        parsePath(file,&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, spoolingStats); &lt;span class=&quot;code-comment&quot;&gt;//parse with spooling
&lt;/span&gt;        parsePath(file,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, nonSpoolingStats); &lt;span class=&quot;code-comment&quot;&gt;//parse without spooling
&lt;/span&gt;    } 

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void parsePath(Path filePath, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; spooling, DescriptiveStatistics stats) {
            &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; startTime = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis();
            &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; size =-1;
            &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; parsedSize = -1;
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (InputStream inputStream = TikaInputStream.get(Files.newInputStream(filePath))) {
                log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;\n parsing file: {}&quot;&lt;/span&gt;, filePath.getFileName());
                Metadata meta = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Metadata();
                meta.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;resourceName&quot;&lt;/span&gt;, filePath.getFileName().toString());
                meta.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;size&quot;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.valueOf(Files.size(filePath)));
                TikaInputStream tis = TikaInputStream.get( inputStream);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(spooling){
                    tis.getPath(); &lt;span class=&quot;code-comment&quot;&gt;//spools Input stream to temp file
&lt;/span&gt;                }
                &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; content = parse(tis, meta);
                size = Files.size(filePath);
                parsedSize = content.length();
                log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;File: {} , Type: {} , Size: {} , ParsedSize: {}&quot;&lt;/span&gt;, filePath.getFileName(), meta.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;), size, parsedSize);
                log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Content:\n{}&quot;&lt;/span&gt;, content);
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (EncryptedDocumentException e) {
                log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;File is encrypted: {}&quot;&lt;/span&gt;, filePath.getFileName());
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (UnsupportedFormatException e) {
                log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unsupported format &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; file: {}&quot;&lt;/span&gt;, filePath.getFileName());
            }
            &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (TikaException e) {
                Throwable cause = e.getCause();
                &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (cause != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cause &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; PasswordRequiredException) {
                        log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;File is encrypted: {}&quot;&lt;/span&gt;, filePath.getFileName());
                        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
                    }
                    cause = cause.getCause();
                }
                log.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error processing file: {}&quot;&lt;/span&gt;, filePath.getFileName(),e);
            }
            &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
                log.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error processing file: {}&quot;&lt;/span&gt;, filePath.getFileName(), e);
            }
            &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; timeTaken = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis() - startTime;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(stats!=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;){
                stats.addValue(timeTaken);
            }
            log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;#@# spool: {} , file: {} , size: {} , parsedSize: {} , time taken: {}&quot;&lt;/span&gt;, spooling, filePath.getFileName(), size, parsedSize, timeTaken);
    }
}
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;P.S:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;You can directly run the code just by changing the path of the constant TEST_FOLDER to your test files folder&apos;s path&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I used slf4j logger which would expect an slf4j implementation to be in the classpath. you also can replace all log.info|error|debug with System.out.println if you want&lt;/li&gt;
	&lt;li&gt;I used&#160;&lt;br/&gt;
org.apache.commons.math3.stat.descriptive.DescriptiveStatistics for ease of calculating mean, max, min, count and standard deviations&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;#@# and #$# are just there to easily search and extract the results&#160;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="18010791" author="tilman" created="Wed, 30 Jul 2025 03:25:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;it seems the spooling variant performed better&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;my understanding is that it&apos;s slightly slower (1 unit), but not much. Using an ssd for temporary data might destroy it in the long term because of the limited amount of write cycles (although google says this isn&apos;t a thing anymore)&lt;/p&gt;</comment>
                            <comment id="18010803" author="JIRAUSER306563" created="Wed, 30 Jul 2025 05:46:58 +0000"  >&lt;p&gt;i collected some more Open Document&#160; files and msOffice files from the internet and ran the test again&lt;/p&gt;

&lt;p&gt;results are:&lt;/p&gt;

&lt;p&gt;run 1:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#$# spooling: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, fileCount: 151, meanTime: 35.35, stdDeviation: 58.17, minTime: 1.0, maxTime: 364.0, medianTime: 11.0
#$# spooling: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, fileCount: 151, meanTime: 38.40, stdDeviation: 68.07, minTime: 1.0, maxTime: 422.0, medianTime: 10.0 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;run 2:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#$# spooling: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, fileCount: 151, meanTime: 35.65, stdDeviation: 60.67, minTime: 1.0, maxTime: 411.0, medianTime: 11.0
#$# spooling: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, fileCount: 151, meanTime: 39.63, stdDeviation: 70.73, minTime: 0.0, maxTime: 416.0, medianTime: 11.0 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;run 3:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#$# spooling: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, fileCount: 151, meanTime: 35.87, stdDeviation: 58.69, minTime: 1.0, maxTime: 378.0, medianTime: 10.0
#$# spooling: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, fileCount: 151, meanTime: 41.48, stdDeviation: 74.02, minTime: 0.0, maxTime: 440.0, medianTime: 10.0 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;You can see the spooling variant has better mean and maxTime in all runs&lt;/p&gt;

&lt;p&gt;&lt;b&gt;&lt;em&gt;Hence it is inferred that the parser is more efficient with ZipFile than ZipStream&lt;/em&gt;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;(Also it is the one that handles errors properly)&lt;/p&gt;

&lt;p&gt;So can we change the OpenDocumentParser to spool files by default?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;P.S:&lt;/p&gt;

&lt;p&gt;as for the SSD write limit concern, there is &lt;a href=&quot;https://linustechtips.com/topic/811454-should-i-be-worried-of-ssd-write-limit/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this&lt;/a&gt; Linus tech tips discussion and &lt;a href=&quot;https://superuser.com/questions/345997/what-happens-when-an-ssd-wears-out&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this&lt;/a&gt; super user forum post&lt;/p&gt;

&lt;p&gt;both agree that it is more of a myth&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="18010999" author="tallison@mitre.org" created="Wed, 30 Jul 2025 18:32:58 +0000"  >&lt;p&gt;Thank you, both, for all of your work on this.&lt;/p&gt;

&lt;p&gt;There are a number of places where we have a messy dance of &quot;is it a TikaInputStream...does it have a path, ...&quot; for other zip based files.&lt;/p&gt;

&lt;p&gt;Generally, it is more efficient to use zip file for the reason that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=manish003&quot; class=&quot;user-hover&quot; rel=&quot;manish003&quot;&gt;manish003&lt;/a&gt; mentioned above rather than &quot;stream once&quot;.&lt;/p&gt;

&lt;p&gt;I&apos;ll open a PR that removes stream processing and forces a ZipFile.&lt;/p&gt;</comment>
                            <comment id="18011007" author="githubbot" created="Wed, 30 Jul 2025 18:56:03 +0000"  >&lt;p&gt;tballison opened a new pull request, #2291:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2291&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &#8230;ts correctly&lt;/p&gt;

&lt;p&gt;   &amp;lt;!--&lt;br/&gt;
     Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
     or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
     distributed with this work for additional information&lt;br/&gt;
     regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
     to you under the Apache License, Version 2.0 (the&lt;br/&gt;
     &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
     with the License.  You may obtain a copy of the License at&lt;/p&gt;

&lt;p&gt;       &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;     Unless required by applicable law or agreed to in writing,&lt;br/&gt;
     software distributed under the License is distributed on an&lt;br/&gt;
     &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
     KIND, either express or implied.  See the License for the&lt;br/&gt;
     specific language governing permissions and limitations&lt;br/&gt;
     under the License.&lt;br/&gt;
   --&amp;gt;&lt;/p&gt;

&lt;p&gt;   Thanks for your contribution to &lt;span class=&quot;error&quot;&gt;&amp;#91;Apache Tika&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://tika.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tika.apache.org/&lt;/a&gt;)! Your help is appreciated!&lt;/p&gt;

&lt;p&gt;   Before opening the pull request, please verify that&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;there is an open issue on the &lt;span class=&quot;error&quot;&gt;&amp;#91;Tika issue tracker&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/projects/TIKA&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/TIKA&lt;/a&gt;) which describes the problem or the improvement. We cannot accept pull requests without an issue because the change wouldn&apos;t be listed in the release notes.&lt;/li&gt;
	&lt;li&gt;the issue ID (`TIKA-XXXX`)&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;is referenced in the title of the pull request&lt;/li&gt;
	&lt;li&gt;and placed in front of your commit messages surrounded by square brackets (`&lt;span class=&quot;error&quot;&gt;&amp;#91;TIKA-XXXX&amp;#93;&lt;/span&gt; Issue or pull request title`)&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;commits are squashed into a single one (or few commits for larger changes)&lt;/li&gt;
	&lt;li&gt;Tika is successfully built and unit tests pass by running `mvn clean test`&lt;/li&gt;
	&lt;li&gt;there should be no conflicts when merging the pull request branch into the &lt;b&gt;recent&lt;/b&gt; `main` branch. If there are conflicts, please try to rebase the pull request branch on top of a freshly pulled `main` branch&lt;/li&gt;
	&lt;li&gt;if you add new module that downstream users will depend upon add it to relevant group in `tika-bom/pom.xml`.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   We will be able to faster integrate your pull request if these conditions are met. If you have any questions how to fix your problem or about using Tika in general, please sign up for the &lt;span class=&quot;error&quot;&gt;&amp;#91;Tika mailing list&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://tika.apache.org/mail-lists.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tika.apache.org/mail-lists.html&lt;/a&gt;). Thanks!&lt;/p&gt;


</comment>
                            <comment id="18011086" author="JIRAUSER306563" created="Thu, 31 Jul 2025 05:42:56 +0000"  >&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="18011115" author="githubbot" created="Thu, 31 Jul 2025 08:41:15 +0000"  >&lt;p&gt;THausherr commented on PR #2291:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2291#issuecomment-3139063565&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2291#issuecomment-3139063565&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &#128077;&lt;/p&gt;

</comment>
                            <comment id="18011290" author="githubbot" created="Thu, 31 Jul 2025 21:37:33 +0000"  >&lt;p&gt;tballison merged PR #2291:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2291&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="18011314" author="hudson" created="Thu, 31 Jul 2025 23:39:12 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-branch_3x-jdk11 #2140 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-branch_3x-jdk11/2140/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-branch_3x-jdk11/2140/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-4459&quot; title=&quot;protected ODF encryption detection fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-4459&quot;&gt;&lt;del&gt;TIKA-4459&lt;/del&gt;&lt;/a&gt; &amp;#8211; force stream to zip file to handle encrypted od* documents correctly (#2291) (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/2b52257304f4d3cde2b8463657380bdb936d9ef2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/2b52257304f4d3cde2b8463657380bdb936d9ef2&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-miscoffice-module/src/test/java/org/apache/tika/parser/odf/ODFParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-miscoffice-module/src/main/java/org/apache/tika/parser/odf/OpenDocumentParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="18011316" author="hudson" created="Thu, 31 Jul 2025 23:51:32 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk17 #834 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk17/834/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk17/834/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-4459&quot; title=&quot;protected ODF encryption detection fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-4459&quot;&gt;&lt;del&gt;TIKA-4459&lt;/del&gt;&lt;/a&gt; &amp;#8211; force stream to zip file to handle encrypted od* documents correctly (#2291) (github: &lt;a href=&quot;https://github.com/apache/tika/commit/e5154cb2d87a0697ccb79014d1a6cde38b25a596&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/e5154cb2d87a0697ccb79014d1a6cde38b25a596&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-miscoffice-module/src/test/java/org/apache/tika/parser/odf/ODFParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-miscoffice-module/src/main/java/org/apache/tika/parser/odf/OpenDocumentParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="13077746" name="protected.odt" size="18298" author="manish003" created="Mon, 28 Jul 2025 04:40:34 +0000"/>
                            <attachment id="13077748" name="testProtected.odp" size="1269351" author="manish003" created="Mon, 28 Jul 2025 13:14:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1wy60:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>