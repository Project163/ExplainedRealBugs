<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:03:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3141] LINUX - Tika shouldn&apos;t throw an exception for an empty TIKA_CONFIG environment variable value</title>
                <link>https://issues.apache.org/jira/browse/TIKA-3141</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;On my Linux box I configure Tika using the TIKA_CONFIG environment variable to point the Tika server at my config.xml file.&#160; &#160;Sometimes, however, I want to clear this variable to use the default config and I noticed that Tika will throw an exception and abort if I do the following:&lt;/p&gt;

&lt;p&gt;export TIKA_CONFIG=&apos;&apos;&lt;/p&gt;

&lt;p&gt;Seems like a case that should be handled just by ignoring the empty value (i.e., there&apos;s no config to be used so go with the default)&#160; or at the most, log a warning that the variable was detected but it&apos;s value is empty, but still carry on using the default config.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Exception in thread &quot;main&quot; java.lang.RuntimeException: Unable to access default configuration&lt;/tt&gt;&lt;br/&gt;
 {{ at org.apache.tika.config.TikaConfig.getDefaultConfig(TikaConfig.java:410)}}&lt;br/&gt;
 {{ at org.apache.tika.Tika.&amp;lt;init&amp;gt;(Tika.java:116)}}&lt;br/&gt;
 {{ at org.apache.tika.server.TikaServerCli.main(TikaServerCli.java:125)}}&lt;br/&gt;
 &lt;tt&gt;&lt;b&gt;Caused by: org.apache.tika.exception.TikaException: Specified Tika configuration not found:&lt;/b&gt;&lt;/tt&gt;&lt;br/&gt;
 {{ at org.apache.tika.config.TikaConfig.getConfigInputStream(TikaConfig.java:317)}}&lt;br/&gt;
 {{ at org.apache.tika.config.TikaConfig.&amp;lt;init&amp;gt;(TikaConfig.java:254)}}&lt;br/&gt;
 {&lt;/p&gt;
{ at org.apache.tika.config.TikaConfig.getDefaultConfig(TikaConfig.java:405)}
&lt;p&gt;}&lt;/p&gt;</description>
                <environment>&lt;p&gt;Any Linux distro.&#160; I&apos;m running the bash shell.&#160; Not sure about other platforms.&lt;/p&gt;</environment>
        <key id="13317268">TIKA-3141</key>
            <summary>LINUX - Tika shouldn&apos;t throw an exception for an empty TIKA_CONFIG environment variable value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jmbox80">Josh Burchard</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jul 2020 22:42:35 +0000</created>
                <updated>Tue, 4 Oct 2022 17:14:30 +0000</updated>
                            <resolved>Tue, 4 Oct 2022 17:14:30 +0000</resolved>
                                    <version>1.20</version>
                                                    <component>config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="17166296" author="csmdev" created="Tue, 28 Jul 2020 09:32:24 +0000"  >&lt;p&gt;Hi,&#160;&lt;/p&gt;

&lt;p&gt;I suggest you can use this follow cmd instead of&#160;export TIKA_CONFIG=&apos;&apos; .&#160; This cmd will remove&#160;environment variable&#160;TIKA_CONFIG and then you will use the default config.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
unset&#160;TIKA_CONFIG
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17166439" author="gagravarr" created="Tue, 28 Jul 2020 13:57:16 +0000"  >&lt;p&gt;Unsetting the environment variable seems like the right way to handle it as a user, but the current Tika behaviour does feel unexpected and non-ideal. A warning of a set-but-empty config variable and an ignore seems like a better experience&lt;/p&gt;

&lt;p&gt;Would that make sense to everyone?&lt;/p&gt;</comment>
                            <comment id="17167845" author="peterlee" created="Thu, 30 Jul 2020 11:52:23 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nick&quot; class=&quot;user-hover&quot; rel=&quot;nick&quot;&gt;nick&lt;/a&gt;, I&apos;m working on Tika recently and I&apos;m interested in this. Trying to improve this.&lt;/p&gt;</comment>
                            <comment id="17167998" author="kbennett" created="Thu, 30 Jul 2020 15:18:35 +0000"  >&lt;p&gt;I agree that this should be handled, if it&apos;s not a prohibitively large effort to implement. IMO the correct behavior would be to use the default location.&lt;/p&gt;

&lt;p&gt;In addition to the use of:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;export TIKA_CONFIG=&quot;&quot;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;mentioned, this would enable a temporary use of the default config using the environment variable &lt;em&gt;without&lt;/em&gt; `export`:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
TIKA_CONFIG=&quot;&quot; [tika command]&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As I understand it, using unset would require re-setting the value after the single command. This would be unwieldy since it would be necessary to save the original value of the variable before the `unset`ting in order to restore it after the unset. And, in any case, as previously mentioned, the expected behavior of setting the variable to the empty string is to disable the override.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17192912" author="hudson" created="Wed, 9 Sep 2020 14:43:04 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #22 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/22/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/22/&lt;/a&gt;)&lt;br/&gt;
Tika-3141 &amp;#8211; add empty environment variable handle (#334) (github: &lt;a href=&quot;https://github.com/apache/tika/commit/144fe98901b09f6ac329ae906d4c6565c2b33180&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/144fe98901b09f6ac329ae906d4c6565c2b33180&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/config/TikaConfig.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17192956" author="hudson" created="Wed, 9 Sep 2020 15:31:40 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build Tika &#187; tika-branch1x-jdk8 #8 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-branch1x-jdk8/8/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-branch1x-jdk8/8/&lt;/a&gt;)&lt;br/&gt;
Tika-3141 &amp;#8211; add empty environment variable handle (#334) (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/fd1926dd95d592afb6dce1b0da885f94482ce137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/fd1926dd95d592afb6dce1b0da885f94482ce137&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/config/TikaConfig.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0guc0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>