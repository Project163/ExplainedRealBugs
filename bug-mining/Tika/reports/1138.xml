<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:02:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2630] Wrong height and width metadata for JPEG images</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2630</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;According to &lt;a href=&quot;http://www.exif.org/Exif2-2.PDF#page=73&amp;amp;zoom=auto,-176,103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Exif specs&lt;/a&gt;, for compressed images the values for width and height should come from the tags:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;PixelXDimension&lt;/b&gt; mapped in metadata-extractor to &lt;tt&gt;com.drew.metadata.Directory.ExifDirectoryBase.TAG_EXIF_IMAGE_WIDTH&lt;/tt&gt; and&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;PixelYDimension&lt;/b&gt; mapped to &lt;tt&gt;ExifDirectoryBase.TAG_EXIF_IMAGE_HEIGHT&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;tt&gt;ImageMetadataExtractor$ExifHandler.&lt;a href=&quot;https://github.com/apache/tika/blob/master/tika-parsers/src/main/java/org/apache/tika/parser/image/ImageMetadataExtractor.java#L487&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;handlePhotoTags(...)&lt;/a&gt;&lt;/tt&gt; should extract and set these in the metadata:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (directory.containsTag(ExifSubIFDDirectory.TAG_EXIF_IMAGE_WIDTH)) {
    metadata.set(Metadata.IMAGE_WIDTH,
                 trimPixels(directory.getDescription(ExifSubIFDDirectory.TAG_EXIF_IMAGE_WIDTH)));
  }
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (directory.containsTag(ExifSubIFDDirectory.TAG_EXIF_IMAGE_WIDTH)) {
      metadata.set(Metadata.IMAGE_LENGTH,
                   trimPixels(directory.getDescription(ExifSubIFDDirectory.TAG_EXIF_IMAGE_HEIGHT)));
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Also the &lt;tt&gt;CopyUnknownFieldsHandler&lt;/tt&gt; overrides the values for &quot;Image Width&quot; (&lt;tt&gt;JpegDirectory.TAG_IMAGE_WIDTH&lt;/tt&gt;) and &quot;Image Height&quot; (&lt;tt&gt;JpegDirectory.TAG_IMAGE_HEIGHT&lt;/tt&gt;) with the values from &lt;tt&gt;ExifIFD0Descriptor.TAG_IMAGE_WIDTH&lt;/tt&gt; and &lt;tt&gt;ExifIFD0Descriptor.TAG_IMAGE_HEIGHT&lt;/tt&gt; because they have the same tag name.&lt;/p&gt;

&lt;p&gt;I attached a sample image, these are the metadata values:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;extracted by metadata-extractor:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;JPEG&amp;#93;&lt;/span&gt; Image Height = 367 pixels&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;JPEG&amp;#93;&lt;/span&gt; Image Width = 1535 pixels&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Exif IFD0&amp;#93;&lt;/span&gt; Image Width = 2173 pixels&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Exif IFD0&amp;#93;&lt;/span&gt; Image Height = 520 pixels&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Exif SubIFD&amp;#93;&lt;/span&gt; Exif Image Width = 1535 pixels&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Exif SubIFD&amp;#93;&lt;/span&gt; Exif Image Height = 367 pixels&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Tika metadata:&lt;br/&gt;
Image Height: 520 pixels&lt;br/&gt;
Image Width: 2173 pixels&lt;br/&gt;
tiff:ImageLength: 520&lt;br/&gt;
tiff:ImageWidth: 2173&lt;br/&gt;
Exif Image Height: 367 pixels&lt;br/&gt;
Exif Image Width: 1535 pixels&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13151883">TIKA-2630</key>
            <summary>Wrong height and width metadata for JPEG images</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davemeikle">Dave Meikle</assignee>
                                    <reporter username="ancuta.morarasu">Ancuta Morarasu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Apr 2018 08:39:11 +0000</created>
                <updated>Tue, 3 Dec 2019 03:21:07 +0000</updated>
                            <resolved>Mon, 2 Dec 2019 19:58:26 +0000</resolved>
                                    <version>1.17</version>
                                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16667903" author="davemeikle" created="Mon, 29 Oct 2018 23:52:02 +0000"  >&lt;p&gt;Thanks for raising this one. Short term we can add in the reading from these fields for compressed images knowing it will set the tiff:ImageHeight and tiff:ImageLength to the correct value.&lt;/p&gt;

&lt;p&gt;Longer term we need to address the metadata clashes are part of the 2.x series as whilst we could add in the directory name as a key to the metadata (e.g.&#160;Exif IFD0:Image Height: 520 pixels) I would be worried about the impact on downstream code that has got used to what we do. This means we can also&#160;build up on the Metadata&#160;proposals for 2.x.&lt;/p&gt;

&lt;p&gt;Will this work for you?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16667918" author="davemeikle" created="Tue, 30 Oct 2018 00:09:29 +0000"  >&lt;p&gt;After writing it, I know it really wont given the class of metadata keys between the Exif directories.&lt;/p&gt;

&lt;p&gt;Wondering if we could short term just add the directory name in as a key qualifier for just Exif information, given it is there where this is an issue just now.&lt;/p&gt;

&lt;p&gt;Will create a proposed pull request and see what others think.&lt;/p&gt;</comment>
                            <comment id="16667942" author="githubbot" created="Tue, 30 Oct 2018 00:38:59 +0000"  >&lt;p&gt;dameikle opened a new pull request #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255&lt;/a&gt;&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Added extraction of image height/width from ExifSubIFDDirectory for compressed images&lt;/li&gt;
	&lt;li&gt;Include directory name as key qualifier for Exif directories to avoid clashes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16667943" author="githubbot" created="Tue, 30 Oct 2018 00:42:22 +0000"  >&lt;p&gt;dameikle commented on issue #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255#issuecomment-434131434&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255#issuecomment-434131434&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hey @tballison - given the key name clashes for the Exif metadata I am proposing to add the directory name as the qualifier, hence the request for a review.&lt;/p&gt;

&lt;p&gt;   I was tempted to do this for all directories to make it clean but worry about downstream code that rely on the current values in 1.x stream.&lt;/p&gt;

&lt;p&gt;   I also thought about not doing it, but without doing it for at least Exif, we will continue to give the wrong value here without some logic to have a key hierarchy in CopyUnknownFieldsHandler.&lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668839" author="githubbot" created="Tue, 30 Oct 2018 15:03:14 +0000"  >&lt;p&gt;tballison commented on issue #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255#issuecomment-434337083&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255#issuecomment-434337083&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I don&apos;t know enough about exif to be useful on this.  If there are only a few standard directories (say, ExifSubIFDDirectory or ExifIFD0Descriptor), could we make those static property prefixes or static properties?  Given that I don&apos;t know what we&apos;ll find in exif, I&apos;m very hesitant about using the literal directory name.  If we do go with the literal directory name in some cases, we should prefix that.  WDYT?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668856" author="githubbot" created="Tue, 30 Oct 2018 15:15:50 +0000"  >&lt;p&gt;dameikle commented on issue #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255#issuecomment-434342088&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255#issuecomment-434342088&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @tballison Thanks for looking over it - my main worry was changing the behaviour. There is a fixed structure that one should expect with data included in them only if written, so we could make them static property prefixes.  I think the directory name is safe in this instance given how the format works and agree the prefix route - its easy enough to make this fixed against those directories.  I&apos;ll go with that.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668872" author="githubbot" created="Tue, 30 Oct 2018 15:26:43 +0000"  >&lt;p&gt;tballison commented on issue #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255#issuecomment-434346662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255#issuecomment-434346662&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Sorry, @dameikle, I should have addressed the change in behavior...the actual reason you asked for a second pair of eyes. &#128518; I agree that changes in behavior are bad.  IIUC, though, we&apos;d be fixing what we&apos;re currently doing, which is over-writing info, right?&lt;/p&gt;

&lt;p&gt;   If we did something like this in branch_1x:&lt;br/&gt;
   `    if (directory instanceof ExifDirectoryBase) &lt;/p&gt;
{
           metadata.set(directory.getName() + &quot;:&quot; + tag.getTagName(), tag.getDescription());
           metadata.set(tag.getTagName(), tag.getDescription());
       }
&lt;p&gt; else &lt;/p&gt;
{
           metadata.set(EXIF_ROOT + &quot;:&quot; + tag.getTagName(), tag.getDescription());
           metadata.set(tag.getTagName(), tag.getDescription());
       }
&lt;p&gt;`&lt;/p&gt;

&lt;p&gt;   That would maintain the same current (wrong) over-writing behavior, and introduce new tag names.  I have no idea what an appropriate prefix would be for EXIF_ROOT...something static and documented and appropriate.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668875" author="githubbot" created="Tue, 30 Oct 2018 15:27:43 +0000"  >&lt;p&gt;tballison edited a comment on issue #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255#issuecomment-434346662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255#issuecomment-434346662&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Sorry, @dameikle, I should have addressed the change in behavior...the actual reason you asked for a second pair of eyes. &#128518; I agree that changes in behavior are bad.  IIUC, though, we&apos;d be fixing what we&apos;re currently doing, which is over-writing info, right?&lt;/p&gt;

&lt;p&gt;   If we did something like this in branch_1x:&lt;br/&gt;
   ```  &lt;br/&gt;
       if (directory instanceof ExifDirectoryBase) &lt;/p&gt;
{
           metadata.set(directory.getName() + &quot;:&quot; + tag.getTagName(), tag.getDescription());
           metadata.set(tag.getTagName(), tag.getDescription());
       }
&lt;p&gt; else &lt;/p&gt;
{
           metadata.set(EXIF_ROOT + &quot;:&quot; + tag.getTagName(), tag.getDescription());
           metadata.set(tag.getTagName(), tag.getDescription());
       }
&lt;p&gt;   ```&lt;/p&gt;

&lt;p&gt;   That would maintain the same current (wrong) over-writing behavior, and introduce new tag names.  I have no idea what an appropriate prefix would be for EXIF_ROOT...something static and documented and appropriate.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16681930" author="githubbot" created="Fri, 9 Nov 2018 20:58:28 +0000"  >&lt;p&gt;dameikle commented on issue #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255#issuecomment-437493134&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255#issuecomment-437493134&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I was thinking something similar but stopped as it is not always going to Exif metadata that is processed by the Extractor. I am beginning to think it might be the right thing to actually fix the overwriting, unless you completely disagree.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16682109" author="githubbot" created="Sat, 10 Nov 2018 00:27:49 +0000"  >&lt;p&gt;tballison commented on issue #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255#issuecomment-437536451&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255#issuecomment-437536451&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I&apos;m ok with correcting bad behavior. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;going to Exif metadata that is processed by the Extractor&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;   What do you mean by this exactly?  In that portion of the code, it might not be Exif metadata?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16682350" author="githubbot" created="Sat, 10 Nov 2018 11:22:19 +0000"  >&lt;p&gt;dameikle commented on issue #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255#issuecomment-437576959&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255#issuecomment-437576959&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Yes, it could be one of different types of metadata directories - Exif, IPTC, XMP, ICC, etc.  The challenge is really that Exif uses the same tag name in different directories, so unless keyed it overwrites.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16847514" author="githubbot" created="Fri, 24 May 2019 12:34:13 +0000"  >&lt;p&gt;saitho commented on issue #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255#issuecomment-495606025&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255#issuecomment-495606025&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   What&apos;s the status on this? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16958116" author="githubbot" created="Wed, 23 Oct 2019 18:12:09 +0000"  >&lt;p&gt;tballison commented on issue #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255#issuecomment-545569640&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255#issuecomment-545569640&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Unless there are objections, let&apos;s put this in 1.23?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16960544" author="githubbot" created="Sun, 27 Oct 2019 09:19:32 +0000"  >&lt;p&gt;dameikle commented on issue #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255#issuecomment-546676220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255#issuecomment-546676220&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @tballison - I agree, let&apos;s go with this one&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16983855" author="tallison@mitre.org" created="Wed, 27 Nov 2019 19:28:07 +0000"  >&lt;p&gt;Argh.  Missed this one.  1.24 it is, unless we need a new release candidate for 1.23.&lt;/p&gt;</comment>
                            <comment id="16986268" author="githubbot" created="Mon, 2 Dec 2019 19:03:05 +0000"  >&lt;p&gt;tballison commented on pull request #255: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/255&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/255&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16986316" author="tallison@mitre.org" created="Mon, 2 Dec 2019 19:58:26 +0000"  >&lt;p&gt;Not yet sure if this will make it into 1.23.  Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davemeikle&quot; class=&quot;user-hover&quot; rel=&quot;davemeikle&quot;&gt;davemeikle&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ancuta.morarasu&quot; class=&quot;user-hover&quot; rel=&quot;ancuta.morarasu&quot;&gt;ancuta.morarasu&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16986333" author="hudson" created="Mon, 2 Dec 2019 20:13:41 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build tika-branch-1x #286 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/286/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/286/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images (#255) (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/90880e179f98c06ca948b8fed65e902f5b520e6b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/90880e179f98c06ca948b8fed65e902f5b520e6b&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/ocr/TesseractOCRParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/image/ImageMetadataExtractor.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/jpeg/JpegParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/rtf/RTFParserTest.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt; &amp;#8211; cleanup unit test (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/b86eb05a2e379fa61e7bb46e0a81bbd60b262eb5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/b86eb05a2e379fa61e7bb46e0a81bbd60b262eb5&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/rtf/RTFParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16986382" author="hudson" created="Mon, 2 Dec 2019 21:22:43 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1754 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1754/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1754/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt;: Wrong height and width metadata for JPEG images (#255) (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/31fe67d7ee016579ad3827c44fe7d2bf61f3efbe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/31fe67d7ee016579ad3827c44fe7d2bf61f3efbe&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/ocr/TesseractOCRParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/image/ImageMetadataExtractor.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/rtf/RTFParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/jpeg/JpegParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16986574" author="hudson" created="Tue, 3 Dec 2019 03:20:50 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1757 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1757/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1757/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt; &amp;#8211; add defensive null check and fix &quot;if (...width)&quot; to &quot;if (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/8c0d7feb55988c2d6b34a96d8b2ab73884989bd4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/8c0d7feb55988c2d6b34a96d8b2ab73884989bd4&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/image/ImageMetadataExtractor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16986575" author="hudson" created="Tue, 3 Dec 2019 03:21:07 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #290 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/290/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/290/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2630&quot; title=&quot;Wrong height and width metadata for JPEG images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2630&quot;&gt;&lt;del&gt;TIKA-2630&lt;/del&gt;&lt;/a&gt; &amp;#8211; add defensive null check and fix &quot;if (...width)&quot; to &quot;if (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/4eb73d02888fa36d00305f47d3c70f8d9f3d9b48&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/4eb73d02888fa36d00305f47d3c70f8d9f3d9b48&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/image/ImageMetadataExtractor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12918699" name="Tika-metadata.txt" size="3445" author="ancuta.morarasu" created="Thu, 12 Apr 2018 08:40:34 +0000"/>
                            <attachment id="12918698" name="metadata-exctractor-metadata.txt" size="3973" author="ancuta.morarasu" created="Thu, 12 Apr 2018 08:40:27 +0000"/>
                            <attachment id="12918697" name="sizesampleissue.jpg" size="591831" author="ancuta.morarasu" created="Thu, 12 Apr 2018 08:40:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sgfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>