<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:03:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3255] Parsing MP3 file with record size &gt; 100000 fails</title>
                <link>https://issues.apache.org/jira/browse/TIKA-3255</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I got the following exception with the attached mp3 file&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.tika.exception.TikaException: TIKA-198: Illegal IOException from org.apache.tika.parser.mp3.Mp3Parser@152aa092
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:286)
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)
	at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:143)
	at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:159)
	at org.torchai.ReadFile.autoDetect(ReadFile.java:33)
	at org.torchai.ReadFile.main(ReadFile.java:40)
Caused by: java.io.IOException: Record size (2790678 bytes) is larger than the allowed record size: 1000000
	at org.apache.tika.parser.mp3.ID3v2Frame.readFully(ID3v2Frame.java:186)
	at org.apache.tika.parser.mp3.ID3v2Frame.&amp;lt;init&amp;gt;(ID3v2Frame.java:138)
	at org.apache.tika.parser.mp3.ID3v2Frame.createFrameIfPresent(ID3v2Frame.java:91)
	at org.apache.tika.parser.mp3.Mp3Parser.getAllTagHandlers(Mp3Parser.java:188)
	at org.apache.tika.parser.mp3.Mp3Parser.parse(Mp3Parser.java:70)
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)
	... 5 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is a perfectly valid MP3 file.&#160; It seems that the code has a hard-coded limit of 100000&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here is the code I&apos;m running&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.tika.exception.TikaException: TIKA-198: Illegal IOException from org.apache.tika.parser.mp3.Mp3Parser@152aa092
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:286)
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)
	at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:143)
	at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:159)
	at org.torchai.ReadFile.autoDetect(ReadFile.java:33)
	at org.torchai.ReadFile.main(ReadFile.java:40)
Caused by: java.io.IOException: Record size (2790678 bytes) is larger than the allowed record size: 1000000
	at org.apache.tika.parser.mp3.ID3v2Frame.readFully(ID3v2Frame.java:186)
	at org.apache.tika.parser.mp3.ID3v2Frame.&amp;lt;init&amp;gt;(ID3v2Frame.java:138)
	at org.apache.tika.parser.mp3.ID3v2Frame.createFrameIfPresent(ID3v2Frame.java:91)
	at org.apache.tika.parser.mp3.Mp3Parser.getAllTagHandlers(Mp3Parser.java:188)
	at org.apache.tika.parser.mp3.Mp3Parser.parse(Mp3Parser.java:70)
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)
	... 5 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13347393">TIKA-3255</key>
            <summary>Parsing MP3 file with record size &gt; 100000 fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="peterkronenberg">Peter Kronenberg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Dec 2020 17:04:55 +0000</created>
                <updated>Sat, 6 Mar 2021 20:55:58 +0000</updated>
                            <resolved>Mon, 1 Mar 2021 13:52:49 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17253631" author="kkrugler" created="Tue, 22 Dec 2020 17:10:54 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison&quot; class=&quot;user-hover&quot; rel=&quot;tallison&quot;&gt;tallison&lt;/a&gt;&#160;- looks like this check is from your commit  57193f5191368311e0334766e366f6f77b4d15a8, &quot;improve mp3 parser&quot;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
57193f5191 (tallison &#160; &#160; &#160; &#160; &#160; 2020-04-08 10:48:24 -0400 185) &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (length &amp;gt; MAX_RECORD_SIZE) {
57193f5191 (tallison &#160; &#160; &#160; &#160; &#160; 2020-04-08 10:48:24 -0400 186) &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Record size (&quot;&lt;/span&gt;+length+
57193f5191 (tallison &#160; &#160; &#160; &#160; &#160; 2020-04-08 10:48:24 -0400 187) &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot; bytes) is larger than the allowed record size: &quot;&lt;/span&gt;+MAX_RECORD_SIZE);
57193f5191 (tallison &#160; &#160; &#160; &#160; &#160; 2020-04-08 10:48:24 -0400 188) &#160; &#160; &#160; &#160; } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17253643" author="gagravarr" created="Tue, 22 Dec 2020 17:32:33 +0000"  >&lt;p&gt;The 6mb MP3 file seems to be 2.75mb of ID3 tags, which seems pretty unusual! A few kb is more normal&lt;/p&gt;

&lt;p&gt;Any idea where the file came from, and what all the data in the ID3 tags is?&lt;/p&gt;</comment>
                            <comment id="17253651" author="peterkronenberg" created="Tue, 22 Dec 2020 17:50:33 +0000"  >&lt;p&gt;It&apos;s from a podcast that I listen to all the time and I just happened to grab one of the files for testing: &lt;a href=&quot;https://podcasts.apple.com/us/podcast/the-weirdest-thing-i-learned-this-week/id1377843908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://podcasts.apple.com/us/podcast/the-weirdest-thing-i-learned-this-week/id1377843908&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It was in no way contrived by me&lt;/p&gt;</comment>
                            <comment id="17253768" author="tallison@mitre.org" created="Tue, 22 Dec 2020 21:04:53 +0000"  >&lt;p&gt;We can bump that limit and make it configurable via the MP3Parser.  And, y, I completely get that this solution is non-optimal; the point of that was to prevent a 2GB allocation.&lt;/p&gt;</comment>
                            <comment id="17292241" author="peterkronenberg" created="Sat, 27 Feb 2021 21:36:15 +0000"  >&lt;p&gt;Is there a resolution on this problem?&lt;/p&gt;</comment>
                            <comment id="17293024" author="peterkronenberg" created="Mon, 1 Mar 2021 16:57:43 +0000"  >&lt;p&gt;Confirmed.&#160; Thank you&lt;/p&gt;</comment>
                            <comment id="17296653" author="hudson" created="Sat, 6 Mar 2021 20:55:58 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #166 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/166/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/166/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3255&quot; title=&quot;Parsing MP3 file with record size &amp;gt; 100000 fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3255&quot;&gt;&lt;del&gt;TIKA-3255&lt;/del&gt;&lt;/a&gt; &amp;#8211; bump max record size and make it configurable for Mp3Parser. (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/09ce2eb3c8e78c6689f0720b2f7edccdc4adf4ab&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/09ce2eb3c8e78c6689f0720b2f7edccdc4adf4ab&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-classic/tika-parsers-classic-modules/tika-parser-audiovideo-module/src/main/java/org/apache/tika/parser/mp3/ID3v2Frame.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-classic/tika-parsers-classic-modules/tika-parser-audiovideo-module/src/test/java/org/apache/tika/parser/mp3/Mp3ParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-classic/tika-parsers-classic-modules/tika-parser-audiovideo-module/src/main/java/org/apache/tika/parser/mp3/AudioFrame.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-classic/tika-parsers-classic-modules/tika-parser-audiovideo-module/src/main/java/org/apache/tika/parser/mp3/Mp3Parser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="13017524" name="sample-a.mp3" size="6342740" author="peterkronenberg" created="Tue, 22 Dec 2020 17:05:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lqz4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>