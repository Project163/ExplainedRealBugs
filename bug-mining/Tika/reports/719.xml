<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:59:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-1524] Can install Tika-Bundle, missing JUnit dependency</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1524</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;When I&apos;m trying to install a feature which has a dependency on the Tika-Bundle, it fails to install. It indicates it&apos;s missing a dependency to JUnit. &lt;/p&gt;

&lt;p&gt;Momentarily I solved this for myself by reverting back to Tika-Bundle version 1.6&lt;/p&gt;

&lt;p&gt;Error executing command: Could not start bundle mvn:org.apache.tika/tika-bundle/1.7 in feature(s): Unresolved constraint in bundle org.apache.tika.bundle &lt;span class=&quot;error&quot;&gt;&amp;#91;336&amp;#93;&lt;/span&gt;: Unable to resolve 336.0: missing requirement &lt;span class=&quot;error&quot;&gt;&amp;#91;336.0&amp;#93;&lt;/span&gt; osgi.wiring.package; (osgi.wiring.package=org.junit.internal)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Karaf 2.3.6&lt;/p&gt;</environment>
        <key id="12768674">TIKA-1524</key>
            <summary>Can install Tika-Bundle, missing JUnit dependency</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="niels">Niels</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Jan 2015 13:19:21 +0000</created>
                <updated>Tue, 28 Jul 2015 14:01:31 +0000</updated>
                            <resolved>Tue, 28 Jul 2015 14:01:31 +0000</resolved>
                                    <version>1.7</version>
                                    <fixVersion>1.10</fixVersion>
                                    <component>packaging</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14283807" author="gagravarr" created="Tue, 20 Jan 2015 13:24:55 +0000"  >&lt;p&gt;JUnit should only be needed for testing the bundle, not for running it&lt;/p&gt;

&lt;p&gt;I can&apos;t see any references to junit from the main code, only in the test classes&lt;/p&gt;

&lt;p&gt;The bundle explicitly doesn&apos;t import junit (there&apos;s a &lt;tt&gt;&amp;lt;Import-Package&amp;gt; !org.junit,&lt;/tt&gt; line)&lt;/p&gt;

&lt;p&gt;Finally, we have a unit test that tries to start the bundle + check all the parsers are there, and that seems to work fine&lt;/p&gt;

&lt;p&gt;So, I&apos;ve no idea why it&apos;s failing for you... Can you maybe turn on some more logging or debugging, and see why your environment wants to use junit?&lt;/p&gt;</comment>
                            <comment id="14345055" author="boxtelp" created="Tue, 3 Mar 2015 13:21:37 +0000"  >&lt;p&gt;The bundle does not intent to import junit, but still, it does. See the following snippet from the Import-Package section in MANIFEST.MF&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; l,org.jdom;resolution:=optional,org.jdom.input;resolution:=optional,o
 rg.jdom.output;resolution:=optional,org.junit.internal,org.junit.runn
 er,org.junit.runner.notification,org.openxmlformats.schemas.officeDoc
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I guess the &amp;lt;Import-Package&amp;gt; !org.junit, line excludes the root package, but not the sub packages.&lt;/p&gt;</comment>
                            <comment id="14496463" author="bobpaulin" created="Wed, 15 Apr 2015 16:20:10 +0000"  >&lt;p&gt;Correct.  You can exclude subpackages with a wildcard.  I&apos;ve attached a patch and tested in Felix 4.6.1.&lt;/p&gt;</comment>
                            <comment id="14642659" author="bobpaulin" created="Mon, 27 Jul 2015 12:31:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;tallison@mitre.org&lt;/a&gt; Any chance of getting this in for 1.10?  I still can&apos;t spin up tika-bundle without installing JUnit in OSGi.&lt;/p&gt;</comment>
                            <comment id="14642685" author="tallison@mitre.org" created="Mon, 27 Jul 2015 12:48:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=grossws&quot; class=&quot;user-hover&quot; rel=&quot;grossws&quot;&gt;grossws&lt;/a&gt;, does this modification depend on &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1695&quot; title=&quot;Update json-simple when available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1695&quot;&gt;TIKA-1695&lt;/a&gt;?  That is...to confirm, we can&apos;t make this change until &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1695&quot; title=&quot;Update json-simple when available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1695&quot;&gt;TIKA-1695&lt;/a&gt; is resolved, right?&lt;/p&gt;</comment>
                            <comment id="14642752" author="bobpaulin" created="Mon, 27 Jul 2015 14:05:25 +0000"  >&lt;p&gt;Looks like the json-simple project hasn&apos;t been touched in some time.  Is it realistic to wait for this project to do a release?  If this is the only reason that the junit is required at runtime perhaps there&apos;s another json library that could be dropped in instead.  I&apos;ve personally had good luck using jackson but it shouldn&apos;t be too hard to find one without a JUnit runtime dependency and the right license.&lt;/p&gt;</comment>
                            <comment id="14642786" author="tallison@mitre.org" created="Mon, 27 Jul 2015 14:32:44 +0000"  >&lt;p&gt;Y, I was just looking at the small bit of code that we&apos;re using json-simple with, and it wouldn&apos;t take much to modify to Jackson or Gson...unfortunately we use both... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=diefunction&quot; class=&quot;user-hover&quot; rel=&quot;diefunction&quot;&gt;diefunction&lt;/a&gt;, any chance you&apos;d be able to look at Jackson or Gson?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=grossws&quot; class=&quot;user-hover&quot; rel=&quot;grossws&quot;&gt;grossws&lt;/a&gt;, are you aware of any other parsers/dependencies on json-simple within Tika?&lt;/p&gt;</comment>
                            <comment id="14642882" author="grossws" created="Mon, 27 Jul 2015 15:36:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;tallison@mitre.org&lt;/a&gt;, it doesn&apos;t depend, since excluding &lt;tt&gt;junit&lt;/tt&gt; from &lt;tt&gt;json-simple&lt;/tt&gt; deps doesn&apos;t change anything from &lt;tt&gt;tika-bundle&lt;/tt&gt; point. I don&apos;t see any non-test dependencies on junit in Tika project (via &lt;tt&gt;mvn dependency:tree -Dverbose=true&lt;/tt&gt;), but it can leak through some deps marked as &lt;b&gt;provided&lt;/b&gt; from &lt;tt&gt;maven-bundle-plugin&lt;/tt&gt; point of view, I&apos;m not so familiar with this plugin to be certain.&lt;/p&gt;

&lt;p&gt;So, my +1 for inclusion of this patch with &lt;tt&gt;!org.junit.&amp;#42;&lt;/tt&gt; and &lt;tt&gt;!junit.&amp;#42;&lt;/tt&gt; to be sure that they are excluded in any case. I don&apos;t know why we have &lt;b&gt;explicitly&lt;/b&gt; imported &lt;tt&gt;junit.textui&lt;/tt&gt; with &lt;tt&gt;resolution=optional&lt;/tt&gt; in tika-bundle&apos;s pom. If it&apos;s removed there will be no junit imports in &lt;tt&gt;Import-Package&lt;/tt&gt; manifest section.&lt;/p&gt;

&lt;p&gt;Also, I think that migration to one json library within Tika is good point. I personally prefer to use &lt;tt&gt;jackson&lt;/tt&gt; but &lt;tt&gt;gson&lt;/tt&gt; can be as good, so you can choose any of them if you&apos;ll migrate from json-simple. As I see neither tika-parsers nor tika-bundle depends on gson or jackson currently.&lt;/p&gt;</comment>
                            <comment id="14642887" author="grossws" created="Mon, 27 Jul 2015 15:40:17 +0000"  >&lt;p&gt;JFYI, removing explicit &lt;tt&gt;junit.textui&lt;/tt&gt; import isn&apos;t enough to avoid junit in &lt;tt&gt;Import-Package&lt;/tt&gt; manifest section.&lt;/p&gt;</comment>
                            <comment id="14642903" author="bobpaulin" created="Mon, 27 Jul 2015 15:50:34 +0000"  >&lt;p&gt;+1 to migrating to a single JSON library.  Sounds like a separate JIRA.  Thanks!&lt;/p&gt;</comment>
                            <comment id="14642959" author="tallison@mitre.org" created="Mon, 27 Jul 2015 16:30:53 +0000"  >&lt;p&gt;Y, sorry, I wasn&apos;t being as precise as I should have been.  tika-translate uses &lt;tt&gt;Jackson&lt;/tt&gt; whereas we&apos;re using &lt;tt&gt;gson&lt;/tt&gt; in tika-serialization. &lt;/p&gt;

&lt;p&gt;Ditto on &lt;tt&gt;depend&lt;/tt&gt; vs &lt;tt&gt;leak&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="14643214" author="tallison@mitre.org" created="Mon, 27 Jul 2015 18:51:30 +0000"  >&lt;p&gt;I don&apos;t think I&apos;ll have time to install the geotopic parser (looks non-trivial: &lt;a href=&quot;https://wiki.apache.org/tika/GeoTopicParser&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.apache.org/tika/GeoTopicParser&lt;/a&gt;).  If I make the changes/offer a patch for factoring out json-simple and moving to GSON, would anyone be able to test it?&lt;/p&gt;

&lt;p&gt;Also, going back to Nick&apos;s point, is there a unit test we can add to our bundle test that would fail as it is failing for Bob and others?&lt;/p&gt;</comment>
                            <comment id="14643224" author="bobpaulin" created="Mon, 27 Jul 2015 19:05:00 +0000"  >&lt;p&gt;We&apos;d need a special PAX-EXAM test that does not import a JUnit bundle (currently they all do).  Perhaps we can use TestNG instead &lt;a href=&quot;https://ops4j1.jira.com/wiki/display/PAXEXAM4/TestNG+Driver&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ops4j1.jira.com/wiki/display/PAXEXAM4/TestNG+Driver&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Then hope that we don&apos;t build a dependency on TestNG in the future &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="14643447" author="tallison@mitre.org" created="Mon, 27 Jul 2015 21:35:12 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ha!&lt;/p&gt;

&lt;p&gt;It looks to me like the current JSON parser is parsing the following from the &lt;a href=&quot;https://wiki.apache.org/tika/GeoTopicParser&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;wiki&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[
{&quot;Texas&quot; : [
&quot;Texas&quot;,
&quot;-91.92139&quot;,
&quot;18.05333&quot;
]},
{&quot;Pasadena&quot; : [
&quot;Pasadena&quot;,
&quot;-74.06446&quot;,
&quot;4.6964&quot;
]}
]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We could add this as a unit test and &lt;em&gt;hope&lt;/em&gt; that we don&apos;t break the geo.topic parser?&lt;/p&gt;

&lt;p&gt;It feels to me like it would be better to have the small risk of breaking the geo.topic parser rather than preventing the entire bundling/functionality of Tika.&lt;/p&gt;

&lt;p&gt;Not ideal...&lt;/p&gt;</comment>
                            <comment id="14643801" author="bobpaulin" created="Tue, 28 Jul 2015 03:14:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;tallison@mitre.org&lt;/a&gt; Turns out Pax-Exam requires the Junit bundle.  So I&apos;ve created a small test that check the Import-Package entry in the manifest for any sign of JUnit. A bit low level but this should accomplish the same thing as checking the bundle for starting without junit.&lt;/p&gt;</comment>
                            <comment id="14643802" author="bobpaulin" created="Tue, 28 Jul 2015 03:14:46 +0000"  >&lt;p&gt;Patch attached &lt;br/&gt;
TikaBundleNoJUnit.patch&lt;/p&gt;</comment>
                            <comment id="14644086" author="grossws" created="Tue, 28 Jul 2015 08:57:45 +0000"  >&lt;p&gt;Combined with reformatted TikaBundleNoJUnit.patch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;tallison@mitre.org&lt;/a&gt;, may I merge it? All seems fine to me: test without patch to exclude junit fails as expected.&lt;/p&gt;</comment>
                            <comment id="14644298" author="tallison@mitre.org" created="Tue, 28 Jul 2015 12:24:22 +0000"  >&lt;p&gt;+1.  Looks great to me.  Thank you!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bobpaulin&quot; class=&quot;user-hover&quot; rel=&quot;bobpaulin&quot;&gt;bobpaulin&lt;/a&gt;, thank you for reminding us of this issue before the 1.10 release and thank you for figuring out a unit test.  I was going to try to create a test by kicking off an OSGi bundle in a separate process, but yours is far simpler.&lt;/p&gt;

&lt;p&gt;As a side note, the junit stuff was added into the bundle pom in: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1369624&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1369624&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14644345" author="grossws" created="Tue, 28 Jul 2015 13:07:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;tallison@mitre.org&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bobpaulin&quot; class=&quot;user-hover&quot; rel=&quot;bobpaulin&quot;&gt;bobpaulin&lt;/a&gt;, thanks, merged in r1693089.&lt;/p&gt;

&lt;p&gt;As I see, two junit imports were added in r1369624, but one was removed later.&lt;/p&gt;</comment>
                            <comment id="14644391" author="hudson" created="Tue, 28 Jul 2015 13:55:21 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #804 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/804/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/804/&lt;/a&gt;)&lt;br/&gt;
Remove junit from OSGi bundle deps&lt;/p&gt;

&lt;p&gt;Test dependencies removed from OSGi bundle `Import-Package` manifest header.&lt;/p&gt;

&lt;p&gt;Extra integration test by Bob Pailin &amp;lt;bob@apache.org&amp;gt; added to avoid regressions&lt;br/&gt;
with junit packages included to inappropriate manifest entries.&lt;/p&gt;

&lt;p&gt;Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1524&quot; title=&quot;Can install Tika-Bundle, missing JUnit dependency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1524&quot;&gt;&lt;del&gt;TIKA-1524&lt;/del&gt;&lt;/a&gt; (grossws: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1693089&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1693089&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-bundle/pom.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-bundle/src/test/java/org/apache/tika/bundle/BundleIT.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12747525" name="TIKA-1524.patch" size="2682" author="grossws" created="Tue, 28 Jul 2015 08:57:45 +0000"/>
                            <attachment id="12747355" name="TIKA-1524.patch" size="837" author="grossws" created="Mon, 27 Jul 2015 15:38:33 +0000"/>
                            <attachment id="12725618" name="TIKA-1524.patch" size="438" author="bobpaulin" created="Wed, 15 Apr 2015 16:19:37 +0000"/>
                            <attachment id="12747487" name="TikaBundleNoJUnit.patch" size="1771" author="bobpaulin" created="Tue, 28 Jul 2015 03:14:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24k8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>