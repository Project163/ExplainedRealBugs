<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:59:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-1742] StackOverflowError parsing a PDF with ExtractInlineImages=true</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1742</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Here&apos;s the file:&lt;br/&gt;
&lt;a href=&quot;http://nlp.stanford.edu/~socherr/EMNLP2013_RNTN.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://nlp.stanford.edu/~socherr/EMNLP2013_RNTN.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Code to repro (&lt;tt&gt;ExtractInlineImages&lt;/tt&gt; must be true):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    Parser parser = new PDFParser();
    Metadata metadata = new Metadata();
    ParseContext context = new ParseContext();
    PDFParserConfig config = new PDFParserConfig();
    ContentHandler handler = new DefaultHandler();

    config.setExtractInlineImages(true);
    config.setExtractUniqueInlineImagesOnly(false);

    context.set(PDFParserConfig.class, config);
    context.set(Parser.class, parser);

    InputStream is = new BufferedInputStream(new FileInputStream(args[0]));
    try {
      parser.parse(is, handler, metadata, context);
    } finally {
      is.close();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Error (infinite recursion in &lt;tt&gt;extractImages&lt;/tt&gt;):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.StackOverflowError
	at java.util.LinkedHashMap$Entry.addBefore(LinkedHashMap.java:340)
	at java.util.LinkedHashMap$Entry.access$600(LinkedHashMap.java:320)
	at java.util.LinkedHashMap.createEntry(LinkedHashMap.java:444)
	at java.util.HashMap.addEntry(HashMap.java:888)
	at java.util.LinkedHashMap.addEntry(LinkedHashMap.java:427)
	at java.util.HashMap.put(HashMap.java:509)
	at org.apache.pdfbox.cos.COSDictionary.setItem(COSDictionary.java:246)
	at org.apache.pdfbox.pdmodel.common.COSDictionaryMap.convert(COSDictionaryMap.java:206)
	at org.apache.pdfbox.pdmodel.PDResources.setXObjects(PDResources.java:331)
	at org.apache.pdfbox.pdmodel.PDResources.getXObjects(PDResources.java:269)
	at org.apache.tika.parser.pdf.PDF2XHTML.extractImages(PDF2XHTML.java:310)
	at org.apache.tika.parser.pdf.PDF2XHTML.extractImages(PDF2XHTML.java:319)
	at org.apache.tika.parser.pdf.PDF2XHTML.extractImages(PDF2XHTML.java:319)
	at org.apache.tika.parser.pdf.PDF2XHTML.extractImages(PDF2XHTML.java:319)
	at org.apache.tika.parser.pdf.PDF2XHTML.extractImages(PDF2XHTML.java:319)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12895588">TIKA-1742</key>
            <summary>StackOverflowError parsing a PDF with ExtractInlineImages=true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nated">Nate Dire</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Sep 2015 21:19:05 +0000</created>
                <updated>Wed, 30 Sep 2015 17:50:20 +0000</updated>
                            <resolved>Wed, 30 Sep 2015 17:05:25 +0000</resolved>
                                    <version>1.10</version>
                                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14904360" author="tallison@mitre.org" created="Wed, 23 Sep 2015 11:29:26 +0000"  >&lt;p&gt;The HORROR!  If it were a second rate conference, it would be one thing... (not sarcasm, I&apos;m an nlp&apos;er).&lt;/p&gt;

&lt;p&gt;I confirmed that this same bug happens in pure PDFBox 1.8.11-SNAPSHOT&apos;s ExtractImages.  I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2988&quot; title=&quot;Infinite recursion in ExtractImages 1.8.11-SNAPSHOT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2988&quot;&gt;&lt;del&gt;PDFBOX-2988&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14906238" author="tallison@mitre.org" created="Thu, 24 Sep 2015 11:45:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; fixed this over in PDFBox 1.8.x (already not an issue in PDFBox trunk).  Any problems if  copy &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;&apos;s &lt;a href=&quot;https://svn.apache.org/viewvc/pdfbox/branches/1.8/pdfbox/src/main/java/org/apache/pdfbox/ExtractImages.java?r1=1704895&amp;amp;r2=1704894&amp;amp;pathrev=1704895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;strategy&lt;/a&gt; and only export one copy of an image per page?&lt;/p&gt;</comment>
                            <comment id="14937719" author="tallison@mitre.org" created="Wed, 30 Sep 2015 17:05:25 +0000"  >&lt;p&gt;r1706086&lt;/p&gt;</comment>
                            <comment id="14937720" author="tallison@mitre.org" created="Wed, 30 Sep 2015 17:06:00 +0000"  >&lt;p&gt;Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nated&quot; class=&quot;user-hover&quot; rel=&quot;nated&quot;&gt;nated&lt;/a&gt;, for raising this, and thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; for a solution!&lt;/p&gt;</comment>
                            <comment id="14938166" author="hudson" created="Wed, 30 Sep 2015 17:50:20 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #860 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/860/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/860/&lt;/a&gt;)&lt;br/&gt;
clean up from &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1742&quot; title=&quot;StackOverflowError parsing a PDF with ExtractInlineImages=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1742&quot;&gt;&lt;del&gt;TIKA-1742&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1748&quot; title=&quot;Upgrade to POI 3.13-final when available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1748&quot;&gt;&lt;del&gt;TIKA-1748&lt;/del&gt;&lt;/a&gt; (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1706092&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1706092&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;trunk/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParserConfig.java&lt;/li&gt;
	&lt;li&gt;trunk/tika-parsers/src/test/java/org/apache/tika/parser/microsoft/PowerPointParserTest.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1742&quot; title=&quot;StackOverflowError parsing a PDF with ExtractInlineImages=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1742&quot;&gt;&lt;del&gt;TIKA-1742&lt;/del&gt;&lt;/a&gt; prevent infinite recursion while processing inline images in PDFs by limiting extraction to unique images per page...following Tilman Hausherr&apos;s solution on PDFBox (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1706086&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1706086&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;trunk/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDF2XHTML.java&lt;/li&gt;
	&lt;li&gt;trunk/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParserConfig.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12618838">TIKA-1038</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12895756">PDFBOX-2988</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lfc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>