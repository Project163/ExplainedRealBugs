<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:02:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2795] Error starting Tika 2.0 server with -spawnChild on Ubuntu</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2795</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Hallo.&lt;/p&gt;

&lt;p&gt;I triend to download Tika server 2.0.0 from here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/lastStableBuild/org.apache.tika$tika-server/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/lastStableBuild/org.apache.tika$tika-server/&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I tried to start on my Ubuntu server but with the -spawnChild, it doesn&apos;t work.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;sudo java -jar /opt/tika/tika-server-2.0.0-20181203.205013-340.jar -spawnChild&lt;br/&gt;
Dec 05, 2018 2:22:32 PM org.apache.tika.config.InitializableProblemHandler$3 handleInitializableProblem&lt;br/&gt;
WARNING: J2KImageReader not loaded. JPEG2000 files will not be processed.&lt;br/&gt;
See &lt;a href=&quot;https://pdfbox.apache.org/2.0/dependencies.html#jai-image-io&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pdfbox.apache.org/2.0/dependencies.html#jai-image-io&lt;/a&gt;&lt;br/&gt;
for optional dependencies.&lt;/p&gt;

&lt;p&gt;Dec 05, 2018 2:22:32 PM org.apache.tika.config.InitializableProblemHandler$3 handleInitializableProblem&lt;br/&gt;
WARNING: org.xerial&apos;s sqlite-jdbc is not loaded.&lt;br/&gt;
Please provide the jar on your classpath to parse sqlite files.&lt;br/&gt;
See tika-parsers/pom.xml for the correct version.&lt;br/&gt;
INFO Starting Apache Tika 2.0.0-SNAPSHOT server&lt;br/&gt;
INFO server watch dog is starting up&lt;br/&gt;
Dec 05, 2018 2:22:32 PM org.apache.tika.config.InitializableProblemHandler$3 handleInitializableProblem&lt;br/&gt;
WARNING: J2KImageReader not loaded. JPEG2000 files will not be processed.&lt;br/&gt;
See &lt;a href=&quot;https://pdfbox.apache.org/2.0/dependencies.html#jai-image-io&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pdfbox.apache.org/2.0/dependencies.html#jai-image-io&lt;/a&gt;&lt;br/&gt;
for optional dependencies.&lt;/p&gt;

&lt;p&gt;Dec 05, 2018 2:22:32 PM org.apache.tika.config.InitializableProblemHandler$3 handleInitializableProblem&lt;br/&gt;
WARNING: org.xerial&apos;s sqlite-jdbc is not loaded.&lt;br/&gt;
Please provide the jar on your classpath to parse sqlite files.&lt;br/&gt;
See tika-parsers/pom.xml for the correct version.&lt;br/&gt;
INFO Starting Apache Tika 2.0.0-SNAPSHOT server&lt;br/&gt;
java.nio.file.NoSuchFileException: /tmp/tika-server-child-process-mmap-2180120677326747096&lt;br/&gt;
 at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)&lt;br/&gt;
 at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)&lt;br/&gt;
 at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:116)&lt;br/&gt;
 at java.base/sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55)&lt;br/&gt;
 at java.base/sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:145)&lt;br/&gt;
 at java.base/sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99)&lt;br/&gt;
 at java.base/java.nio.file.Files.readAttributes(Files.java:1755)&lt;br/&gt;
 at java.base/java.nio.file.Files.size(Files.java:2372)&lt;br/&gt;
 at org.apache.tika.server.TikaServerWatchDog$ChildProcess.&amp;lt;init&amp;gt;(TikaServerWatchDog.java:234)&lt;br/&gt;
 at org.apache.tika.server.TikaServerWatchDog$ChildProcess.&amp;lt;init&amp;gt;(TikaServerWatchDog.java:210)&lt;br/&gt;
 at org.apache.tika.server.TikaServerWatchDog.execute(TikaServerWatchDog.java:66)&lt;br/&gt;
 at org.apache.tika.server.TikaServerCli.execute(TikaServerCli.java:146)&lt;br/&gt;
 at org.apache.tika.server.TikaServerCli.main(TikaServerCli.java:127)&lt;br/&gt;
ERROR Can&apos;t start:&lt;/p&gt;

&lt;p&gt;java.nio.file.NoSuchFileException: /tmp/tika-server-child-process-mmap-2180120677326747096&lt;/p&gt;

&lt;p&gt;at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)&lt;br/&gt;
 at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)&lt;br/&gt;
 at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:116)&lt;br/&gt;
 at java.base/sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55)&lt;br/&gt;
 at java.base/sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:145)&lt;br/&gt;
 at java.base/sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99)&lt;br/&gt;
 at java.base/java.nio.file.Files.readAttributes(Files.java:1755)&lt;br/&gt;
 at java.base/java.nio.file.Files.size(Files.java:2372)&lt;br/&gt;
 at org.apache.tika.server.TikaServerWatchDog$ChildProcess.&amp;lt;init&amp;gt;(TikaServerWatchDog.java:234)&lt;br/&gt;
 at org.apache.tika.server.TikaServerWatchDog$ChildProcess.&amp;lt;init&amp;gt;(TikaServerWatchDog.java:210)&lt;br/&gt;
 at org.apache.tika.server.TikaServerWatchDog.execute(TikaServerWatchDog.java:66)&lt;br/&gt;
 at org.apache.tika.server.TikaServerCli.execute(TikaServerCli.java:146)&lt;br/&gt;
 at org.apache.tika.server.TikaServerCli.main(TikaServerCli.java:127)&lt;br/&gt;
administrator@sengvivv02:/opt/tika$&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Instead, on a Windows machine, it starts right.&lt;/p&gt;

&lt;p&gt;Thanks a lot&lt;/p&gt;

&lt;p&gt;Mario&lt;/p&gt;</description>
                <environment></environment>
        <key id="13202541">TIKA-2795</key>
            <summary>Error starting Tika 2.0 server with -spawnChild on Ubuntu</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="bisontim">Mario Bisonti</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Dec 2018 13:33:42 +0000</created>
                <updated>Mon, 12 Apr 2021 12:59:57 +0000</updated>
                            <resolved>Tue, 11 Dec 2018 02:29:35 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.20</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16713155" author="hudson" created="Fri, 7 Dec 2018 18:13:35 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build tika-branch-1x #138 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/138/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/138/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2795&quot; title=&quot;Error starting Tika 2.0 server with -spawnChild on Ubuntu&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2795&quot;&gt;&lt;del&gt;TIKA-2795&lt;/del&gt;&lt;/a&gt; &amp;#8211; catch IOException if child deletes shared file (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/582a1d441ea8240e06a552c4cfa315439ea47a45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/582a1d441ea8240e06a552c4cfa315439ea47a45&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-server/src/main/java/org/apache/tika/server/TikaServerWatchDog.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16715588" author="tallison@mitre.org" created="Mon, 10 Dec 2018 21:35:27 +0000"  >&lt;p&gt;&lt;tt&gt;DELETE_ON_CLOSE&lt;/tt&gt; is a bad idea on a file used by different processes.  There&apos;s no guarantee that the file won&apos;t be deleted before close.  On linux, the file has not yet been closed in the delete_on_close process, and that process can still see and write to the file, but at the same time the other process can&apos;t find the file.  The behavior is different on Windows.&lt;/p&gt;

&lt;p&gt;  I tried a number of options, and I found it very hard to guarantee that the tmp file was deleted and that nothing seriously bad happened when two processes shared the tmp file when I shared a memorymapped file between processes &lt;em&gt;and&lt;/em&gt; I had to allow either or both processes to be killed.  Different platforms handle the details in different ways.&lt;/p&gt;

&lt;p&gt;For now, I&apos;ve chosen the simplest option, which is the writer opens the file, waits for trylock, writes the status and closes the file.  The reader does the same.  This appears to avoid synchronization issues within a process (if more than one thread calls close()) and across processes.  I&apos;m sure that we can improve the efficiency of this at some point, but it just shouldn&apos;t matter.&lt;/p&gt;</comment>
                            <comment id="16715688" author="hudson" created="Mon, 10 Dec 2018 22:30:02 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #139 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/139/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/139/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2795&quot; title=&quot;Error starting Tika 2.0 server with -spawnChild on Ubuntu&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2795&quot;&gt;&lt;del&gt;TIKA-2795&lt;/del&gt;&lt;/a&gt; &amp;#8211; swapped memorymapped buffer for traditional open, write (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/8475ddb2bf3aafdbb5aadef77f6888e7e4c4b810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/8475ddb2bf3aafdbb5aadef77f6888e7e4c4b810&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-server/src/test/java/org/apache/tika/server/TikaServerIntegrationTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-server/src/main/java/org/apache/tika/server/ServerStatusWatcher.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-server/src/main/java/org/apache/tika/server/TikaServerWatchDog.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16715696" author="hudson" created="Mon, 10 Dec 2018 22:38:25 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build tika-2.x-windows #360 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/360/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/360/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2795&quot; title=&quot;Error starting Tika 2.0 server with -spawnChild on Ubuntu&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2795&quot;&gt;&lt;del&gt;TIKA-2795&lt;/del&gt;&lt;/a&gt; &amp;#8211; swapped memorymapped buffer for traditional open, write (tallison: rev e921e69c1a484de3036ed4e5a8654b046f54ceea)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-server/src/main/java/org/apache/tika/server/TikaServerWatchDog.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-server/src/main/java/org/apache/tika/server/ServerStatusWatcher.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-server/src/test/java/org/apache/tika/server/TikaServerIntegrationTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16715770" author="hudson" created="Mon, 10 Dec 2018 23:26:58 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1606 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1606/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1606/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2795&quot; title=&quot;Error starting Tika 2.0 server with -spawnChild on Ubuntu&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2795&quot;&gt;&lt;del&gt;TIKA-2795&lt;/del&gt;&lt;/a&gt; &amp;#8211; swapped memorymapped buffer for traditional open, write (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/e921e69c1a484de3036ed4e5a8654b046f54ceea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/e921e69c1a484de3036ed4e5a8654b046f54ceea&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-server/src/main/java/org/apache/tika/server/ServerStatusWatcher.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-server/src/test/java/org/apache/tika/server/TikaServerIntegrationTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-server/src/main/java/org/apache/tika/server/TikaServerWatchDog.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16716014" author="tallison@mitre.org" created="Tue, 11 Dec 2018 02:29:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bisontim&quot; class=&quot;user-hover&quot; rel=&quot;bisontim&quot;&gt;bisontim&lt;/a&gt;, many thanks for finding this.  Please let me know what else you find!&lt;/p&gt;</comment>
                            <comment id="16830424" author="tallison@mitre.org" created="Tue, 30 Apr 2019 15:51:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bisontim&quot; class=&quot;user-hover&quot; rel=&quot;bisontim&quot;&gt;bisontim&lt;/a&gt;, I wanted to follow up to make sure that you&apos;re still good to go with &lt;tt&gt;-spawnChild&lt;/tt&gt;.  If I need to fix anything, I&apos;d like to do it before the upcoming release of 1.21.  Again, many thanks for reporting this problem.&lt;/p&gt;</comment>
                            <comment id="16831443" author="bisontim" created="Thu, 2 May 2019 07:15:56 +0000"  >&lt;p&gt;Hallo Tim.&lt;/p&gt;

&lt;p&gt;I use :&lt;br/&gt;
java -Dlog4j.configuration=&lt;a href=&quot;file:/opt/tika/log4j.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/opt/tika/log4j.xml&lt;/a&gt; -jar /opt/tika/tika-server-1.20.jar -JDlog4j.configuration=&lt;a href=&quot;file:/opt/tika/log4j_child.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/opt/tika/log4j_child.xml&lt;/a&gt; --host=hostname -spawnChild -taskTimeoutMillis 1000000&lt;/p&gt;

&lt;p&gt;tika-server-1.20.jar is a downloaded snapshot version in december 2018 and it works fine&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks a lot&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Mario&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s01740:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>