<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:01:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2433] Tika 1.16 - Nullpointer Exception after update - Asking for help</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2433</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;i would like to kindly ask for help. We had to update to the latest Tika 1.16. I have no experience in Tika so far, i am just maintaining the configuration and application from another developer.&lt;/p&gt;

&lt;p&gt;Version 1.15 worked very fine for us. But right now i see following error (office is the name of our docker container, hence this output):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/tika/blob/1.16/tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java#L202&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/blob/1.16/tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java#L202&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;office     | java.lang.NullPointerException
office     | 	at org.apache.tika.cli.TikaCLI$OutputType.process(TikaCLI.java:202)
office     | 	at org.apache.tika.cli.TikaCLI$TikaServer$1.run(TikaCLI.java:1153)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have checked the source on github and have seen, that this code part was changed with one of the latest commits before the 1.16 release (see link above).&lt;/p&gt;

&lt;p&gt;I checked the Change.txt at &lt;a href=&quot;https://tika.apache.org/1.16/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tika.apache.org/1.16/index.html&lt;/a&gt;. As i haven&apos;t used Tika so far, and i cannot see that the CLI requirements changed from the release notes, i would like to ask, whether this is the case anyway. Do you have some hints on where to start, is this maybe due to improper cli usage? Or do you think there is a missing java package or dependency?&lt;/p&gt;

&lt;p&gt;It&apos;s hard for me to say, as the cli commands are automated and distributed over several layers and configuration files in the application stack, hence i am asking for a hint.&lt;/p&gt;

&lt;p&gt;Thx for any advice, best Karl.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Docker - Debian Stretch - Oracle Java&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Installation in Dockerfile&lt;/ins&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ENV TIKA_VERSION 1.16
# also see https://github.com/LogicalSpark/docker-tikaserver/blob/master/Dockerfile
RUN mkdir -p /opt/tika &amp;amp;&amp;amp; cd /opt/tika &amp;amp;&amp;amp; curl --fail http://www-eu.apache.org/dist/tika/tika-app-${TIKA_VERSION}.jar -o tika.jar \
 &amp;amp;&amp;amp; curl --fail http://www-eu.apache.org/dist/tika/tika-server-${TIKA_VERSION}.jar -o tika-server.jar \
 &amp;amp;&amp;amp; apt-get install -y tesseract-ocr tesseract-ocr-eng tesseract-ocr-ita tesseract-ocr-fra tesseract-ocr-spa tesseract-ocr-deu gdal-bin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;Tika.xml&lt;/ins&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;properties&amp;gt;
    &amp;lt;parsers&amp;gt;
        &amp;lt;parser class=&quot;org.apache.tika.parser.DefaultParser&quot;&amp;gt;
            &amp;lt;parser-exclude class=&quot;org.apache.tika.parser.ocr.TesseractOCRParser&quot;/&amp;gt;
        &amp;lt;/parser&amp;gt;
    &amp;lt;/parsers&amp;gt;
&amp;lt;/properties&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</environment>
        <key id="13089875">TIKA-2433</key>
            <summary>Tika 1.16 - Nullpointer Exception after update - Asking for help</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="KarlBuchta">Karl Buchta</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Jul 2017 13:10:48 +0000</created>
                <updated>Wed, 26 Jul 2017 15:18:30 +0000</updated>
                            <resolved>Tue, 25 Jul 2017 14:23:14 +0000</resolved>
                                    <version>1.16</version>
                                    <fixVersion>1.17</fixVersion>
                                    <component>cli</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16100021" author="gagravarr" created="Tue, 25 Jul 2017 13:21:23 +0000"  >&lt;p&gt;What are the arguments you are passing to the Tika App?&lt;/p&gt;</comment>
                            <comment id="16100029" author="karlbuchta" created="Tue, 25 Jul 2017 13:26:49 +0000"  >&lt;p&gt;I am looking it up within the application stack.&lt;/p&gt;</comment>
                            <comment id="16100057" author="karlbuchta" created="Tue, 25 Jul 2017 13:45:40 +0000"  >&lt;p&gt;This is how we start the server:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java -Djava.awt.headless=true -jar /opt/tika/tika.jar --server --port 9100 -t
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;To be more exact, this is our supervisor config:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[program:tika]
priority=2
command=java -Djava.awt.headless=true -jar /opt/tika/tika.jar --server --port 9100 -t
autorestart=true
stopsignal = KILL
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;We write to / read from the server via ruby sockets directly.&lt;br/&gt;
This code was not subject to change during the upgrade, meaning it worked with 1.15.&lt;br/&gt;
Otherwise we do not use the Tika App via cli, but only this way.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Tika &amp;lt; ExtractorBase

    def self.run (data, binary = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; binary
        data = StringIO.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(data , &lt;span class=&quot;code-quote&quot;&gt;&apos;rb&apos;&lt;/span&gt;) # we use b to read as binary, so we &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not destroy the encoding we &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not know
      &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
        # TODO: should never be used
        data = StringIO.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(data , &lt;span class=&quot;code-quote&quot;&gt;&apos;r&apos;&lt;/span&gt;) # we use b to read as binary, so we &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not destroy the encoding we &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not know
      end


      s = TCPSocket.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(ENV[&lt;span class=&quot;code-quote&quot;&gt;&apos;TIKA_SERVER&apos;&lt;/span&gt;], ENV[&lt;span class=&quot;code-quote&quot;&gt;&apos;TIKA_PORT&apos;&lt;/span&gt;])
      i = 0
      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; 1
        chunk = data.read(65536)
        &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt; unless chunk
        s.write(chunk)
        i += 65536
      end
      s.shutdown(Socket::SHUT_WR)
      resp = &apos;&apos;
      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; 1
        chunk = s.recv(65536)
        &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; chunk.empty? || !chunk
        resp &amp;lt;&amp;lt; chunk
      end
      resp
    end

  end
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thank you a lot for your quick reply.&lt;/p&gt;</comment>
                            <comment id="16100064" author="karlbuchta" created="Tue, 25 Jul 2017 13:50:31 +0000"  >&lt;p&gt;Sorry i thought this was running via cli as our other services, but this is not the case.&lt;/p&gt;</comment>
                            <comment id="16100099" author="gagravarr" created="Tue, 25 Jul 2017 14:23:14 +0000"  >&lt;p&gt;I can reproduce the problem, hopefully fixed in f31b7f1e281938c393f159cd4a76f3396291e7b6&lt;/p&gt;

&lt;p&gt;Just be aware that the Tika App server mode will be removed in 2.x, you should swap to the proper RESTful Tika Server fairly soon&lt;/p&gt;</comment>
                            <comment id="16100162" author="karlbuchta" created="Tue, 25 Jul 2017 15:08:19 +0000"  >&lt;p&gt;Nick Burch, thanks a lot for this information. Will you release this fix at some point?&lt;/p&gt;

&lt;p&gt;Otherwise we will use the the source and try to compile.&lt;br/&gt;
Will post here tomorrow again.&lt;/p&gt;

&lt;p&gt;Awesome help and support, thank you.&lt;/p&gt;

&lt;p&gt;Best Karl&lt;/p&gt;</comment>
                            <comment id="16100166" author="gagravarr" created="Tue, 25 Jul 2017 15:13:15 +0000"  >&lt;p&gt;As it&apos;s in a deprecated part of the codebase, I&apos;m not sure we&apos;d do a release just for this fix. We&apos;ve only just done 1.16, so it may be several months until 1.17 is released&lt;/p&gt;</comment>
                            <comment id="16100206" author="karlbuchta" created="Tue, 25 Jul 2017 15:31:46 +0000"  >&lt;p&gt;Ok, thx for the info. Will try to compile it tomorrow with this revision, and confirm here if it works.&lt;/p&gt;</comment>
                            <comment id="16100627" author="hudson" created="Tue, 25 Jul 2017 19:39:39 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build Tika-trunk #1338 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1338/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1338/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2433&quot; title=&quot;Tika 1.16 - Nullpointer Exception after update - Asking for help&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2433&quot;&gt;&lt;del&gt;TIKA-2433&lt;/del&gt;&lt;/a&gt; All non-pipe modes need configuring, otherwise the Tika Server (nick: &lt;a href=&quot;https://github.com/apache/tika/commit/f31b7f1e281938c393f159cd4a76f3396291e7b6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/f31b7f1e281938c393f159cd4a76f3396291e7b6&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16101306" author="karlbuchta" created="Wed, 26 Jul 2017 08:09:25 +0000"  >&lt;p&gt;Hi again,&lt;/p&gt;

&lt;p&gt;my dev lead has decided to downgrade instead of compiling.&lt;br/&gt;
So my advice is to continue with other work now.&lt;/p&gt;

&lt;p&gt;From my side this issue can be closed, we will wait for the 1.17 release.&lt;/p&gt;

&lt;p&gt;Best Karl&lt;/p&gt;</comment>
                            <comment id="16101540" author="tallison@mitre.org" created="Wed, 26 Jul 2017 11:02:58 +0000"  >&lt;p&gt;Might recommend migrating to tika-server.  As Nick pointed out, we&apos;ll be getting rid of this part of the codebase soon.&lt;/p&gt;</comment>
                            <comment id="16101769" author="karlbuchta" created="Wed, 26 Jul 2017 15:05:10 +0000"  >&lt;p&gt;Hi Tim,&lt;/p&gt;

&lt;p&gt;for sure we will in the future, but right now we are in the phase of going live with many other changes, completely new infrastructure, docker in production, major release, ...&lt;/p&gt;

&lt;p&gt;That&apos;s why we are skipping this part right now.&lt;/p&gt;

&lt;p&gt;Thanks for the hint though, i would usually absolutely agree, but everything is burning right now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;Best, and thx a lot for your kind and fast support, extraordinary!&lt;/p&gt;

&lt;p&gt;Karl&lt;/p&gt;</comment>
                            <comment id="16101781" author="tallison@mitre.org" created="Wed, 26 Jul 2017 15:18:30 +0000"  >&lt;p&gt;All thanks should go to Nick who fixed my npe so quickly.  Ugh, on my part. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Completely understand need not to change anything now.&lt;/p&gt;

&lt;p&gt;Cheers!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hzan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>