<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:03:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3065] Not able to parse the document with inline image</title>
                <link>https://issues.apache.org/jira/browse/TIKA-3065</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I am using apache tika in my project to detect the file extension. I am using Scala for development.&#160;&lt;br/&gt;
 Below is the code,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;

val sinkIs = StreamConverters.asInputStream(60 seconds)
val is = data.runWith(sinkIs)

val tikaStream = TikaInputStream.get(is)

val mediaType = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Tika().detect(tikaStream, fileName)
val extension = MimeTypes.getDefaultMimeTypes.forName(mediaType)
print(&lt;span class=&quot;code-quote&quot;&gt;&quot;extension: &quot;&lt;/span&gt; + extension.getExtension)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I have a API which upload the files and gives back the extension as response.&#160;&lt;/p&gt;

&lt;p&gt;I have attached the file I used to upload. But I am facing the problem with all types of doc which contains the image.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13290504">TIKA-3065</key>
            <summary>Not able to parse the document with inline image</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="suchendra">suchendra</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Mar 2020 11:15:05 +0000</created>
                <updated>Wed, 11 Mar 2020 13:55:25 +0000</updated>
                            <resolved>Wed, 11 Mar 2020 13:53:04 +0000</resolved>
                                    <version>1.23</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17054863" author="tilman" created="Mon, 9 Mar 2020 11:31:31 +0000"  >&lt;p&gt;works for me:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TIKA3065
{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; MalformedURLException, IOException, MimeTypeException
    {
        TikaInputStream tis = TikaInputStream.get(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URL(&lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/secure/attachment/12996133/2.pdf&quot;&lt;/span&gt;).openStream());
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; mediaType = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Tika().detect(tis, &lt;span class=&quot;code-quote&quot;&gt;&quot;2.pdf&quot;&lt;/span&gt;);
        MimeType extension = MimeTypes.getDefaultMimeTypes().forName(mediaType);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(extension);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;output:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
M&#228;r 09, 2020 12:30:01 PM org.apache.tika.config.InitializableProblemHandler$3 handleInitializableProblem
WARNUNG: J2KImageReader not loaded. JPEG2000 files will not be processed.
See https://pdfbox.apache.org/2.0/dependencies.html#jai-image-io
for optional dependencies.

M&#228;r 09, 2020 12:30:01 PM org.apache.tika.config.InitializableProblemHandler$3 handleInitializableProblem
WARNUNG: org.xerial&apos;s sqlite-jdbc is not loaded.
Please provide the jar on your classpath to parse sqlite files.
See tika-parsers/pom.xml for the correct version.
application/pdf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17054983" author="suchendra" created="Mon, 9 Mar 2020 13:54:08 +0000"  >&lt;p&gt;In Java it does work, but I am using Scala. It&apos;s getting stuck at POIFSContainerDetector&lt;/p&gt;</comment>
                            <comment id="17056108" author="tilman" created="Tue, 10 Mar 2020 16:26:24 +0000"  >&lt;p&gt;I suggest you save whatever you get in that inputstream into a file, and then check whether the content is the same.&lt;/p&gt;</comment>
                            <comment id="17056145" author="hudson" created="Tue, 10 Mar 2020 17:16:08 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #318 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/318/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/318/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3065&quot; title=&quot;Not able to parse the document with inline image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3065&quot;&gt;&lt;del&gt;TIKA-3065&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix bug in TikaInputStream&apos;s getPath(int maxLength) (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/cea7876d7916bd5551b5e82a8c8bc8499fb531de&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/cea7876d7916bd5551b5e82a8c8bc8499fb531de&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/io/TikaInputStream.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/microsoft/POIFSContainerDetector.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17056161" author="tallison@mitre.org" created="Tue, 10 Mar 2020 17:23:24 +0000"  >&lt;p&gt;Sorry, wrong issue in commit message...&lt;/p&gt;</comment>
                            <comment id="17056249" author="hudson" created="Tue, 10 Mar 2020 18:35:09 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1788 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1788/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1788/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3065&quot; title=&quot;Not able to parse the document with inline image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3065&quot;&gt;&lt;del&gt;TIKA-3065&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix bug in TikaInputStream&apos;s getPath(int maxLength) (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/7e68c3661843309f76a290e1889eda58ae0921f1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/7e68c3661843309f76a290e1889eda58ae0921f1&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/io/TikaInputStream.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/microsoft/POIFSContainerDetector.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17056658" author="suchendra" created="Wed, 11 Mar 2020 05:23:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;&#160;, I tried saving the content to a file and tried. It does work and the content were matching&lt;/p&gt;</comment>
                            <comment id="17056711" author="suchendra" created="Wed, 11 Mar 2020 07:16:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hudson&quot; class=&quot;user-hover&quot; rel=&quot;hudson&quot;&gt;hudson&lt;/a&gt;, what was the issue ?&#160; and When do we get the release ?&lt;/p&gt;</comment>
                            <comment id="17056729" author="tilman" created="Wed, 11 Mar 2020 07:53:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=suchendra&quot; class=&quot;user-hover&quot; rel=&quot;suchendra&quot;&gt;suchendra&lt;/a&gt; ignore that one. That was a mistake in the commit message.&lt;/p&gt;

&lt;p&gt;Sadly I&apos;m not able to help much, I don&apos;t use scala.&lt;/p&gt;</comment>
                            <comment id="17056878" author="suchendra" created="Wed, 11 Mar 2020 11:11:03 +0000"  >&lt;p&gt;I tried with your changes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hudson&quot; class=&quot;user-hover&quot; rel=&quot;hudson&quot;&gt;hudson&lt;/a&gt;, no luck.&lt;/p&gt;</comment>
                            <comment id="17056909" author="suchendra" created="Wed, 11 Mar 2020 11:36:48 +0000"  >&lt;p&gt;I have attached exception. Please someone look into the issue&lt;/p&gt;</comment>
                            <comment id="17056968" author="tallison@mitre.org" created="Wed, 11 Mar 2020 12:51:02 +0000"  >&lt;p&gt;I don&apos;t know scala, but it looks like the stream is blocking (hence the timeout)...why do you need a sink?  What class is &lt;tt&gt;data&lt;/tt&gt;? &lt;/p&gt;

&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; noted, I made a mistake in the commit message...that change shouldn&apos;t fix anything for you.&lt;/p&gt;
</comment>
                            <comment id="17057018" author="tallison@mitre.org" created="Wed, 11 Mar 2020 13:55:25 +0000"  >&lt;p&gt;For posterity, would you be willing to share the solution?  Did you have to close the stream or something else?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12996133" name="2.pdf" size="282652" author="suchendra" created="Mon, 9 Mar 2020 11:13:18 +0000"/>
                            <attachment id="12996406" name="Screenshot 2020-03-11 at 5.05.49 PM.png" size="92767" author="suchendra" created="Wed, 11 Mar 2020 11:36:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0cbn4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>