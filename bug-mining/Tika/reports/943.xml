<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:01:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2450] OfficeParser.parse called for zero-byte file with .doc extension</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2450</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;A zero-byte (empty) file with a .doc extension is detected as a Word Document and the &lt;tt&gt;OfficeParser.parse&lt;/tt&gt; method is called for this file.&lt;/p&gt;

&lt;p&gt;We then get a &lt;tt&gt;TikaException&lt;/tt&gt;, with the cause given as an &lt;tt&gt;org.apache.poi.EmptyFileException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I think it would be more useful if the file were NOT detected as a Word Document, meaning that the &lt;tt&gt;AutoDetectParser&lt;/tt&gt; would then fall back to whatever is set as the fallback parser in the parse context.&lt;/p&gt;

&lt;p&gt;This is more useful because the user can then trigger some special logic for handling empty files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13098542">TIKA-2450</key>
            <summary>OfficeParser.parse called for zero-byte file with .doc extension</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mcaruanagalizia">Matthew Caruana Galizia</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Aug 2017 12:02:49 +0000</created>
                <updated>Tue, 2 Jan 2018 13:45:04 +0000</updated>
                            <resolved>Wed, 30 Aug 2017 17:17:19 +0000</resolved>
                                    <version>1.16</version>
                                    <fixVersion>1.17</fixVersion>
                                    <component>detector</component>
                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16147292" author="tallison@mitre.org" created="Wed, 30 Aug 2017 14:20:09 +0000"  >&lt;p&gt;Hmmm...should we add a TikaZeroByteException?  Even if a file were 0 bytes, I think I&apos;d want the extension detection to work.  &lt;/p&gt;

&lt;p&gt;I realize this is somewhat philosophical. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lfcnassif&quot; class=&quot;user-hover&quot; rel=&quot;lfcnassif&quot;&gt;lfcnassif&lt;/a&gt; and others who may often come across 0-byte files...recommendations?&lt;/p&gt;</comment>
                            <comment id="16147303" author="mcaruanagalizia" created="Wed, 30 Aug 2017 14:24:56 +0000"  >&lt;p&gt;I would argue that the raison d&apos;etre of tika-detect is not to provide extension-based detection, but to provide detection. A zero-bye file can never be a Word Document, so assuming my first statement is true then logically it should not be detected as a Word Document.&lt;/p&gt;</comment>
                            <comment id="16147322" author="gagravarr" created="Wed, 30 Aug 2017 14:34:15 +0000"  >&lt;p&gt;In Windows, right click on a folder, New then Word Document. That will create a 0-byte file with a .doc (or .docx) extension.&lt;/p&gt;

&lt;p&gt;Many users do feel that that is a &quot;empty or new Word Document&quot;. (This is based on the bug reports and support requests received to Apache POI from people who are surprised that POI can&apos;t then open &quot;the new file&quot;)&lt;/p&gt;</comment>
                            <comment id="16147331" author="mcaruanagalizia" created="Wed, 30 Aug 2017 14:38:28 +0000"  >&lt;p&gt;OK, with that in mind then I will agree you.&lt;/p&gt;

&lt;p&gt;In the same way that all the various encrypted document exceptions are normalised to a &lt;tt&gt;tika.exception.EncryptedDocumentException&lt;/tt&gt; then I think it would be useful to, as Tim suggests, normalise empty file exceptions to a &lt;tt&gt;tika.exception.ZeroByteFileException&lt;/tt&gt; (that extends &lt;tt&gt;TikaException&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="16147339" author="tallison@mitre.org" created="Wed, 30 Aug 2017 14:41:55 +0000"  >&lt;p&gt;Comment too late... keeping for posterity.  Y, let&apos;s add a normalized exception that extends TikaException.&lt;/p&gt;

&lt;p&gt;&lt;del&gt;Y, I see your point.  I agree about the preference for byte-based detection over extension-based detection.  As you know, we use a combination... e.g., extensions are all we have for e.g. text files, and, IIRC, we rely on extensions for corrupt ooxml files.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;And, y, I completely agree that, of course, a 0 byte file can&apos;t be a Word Document, but it is possible that it used to be and was somehow truncated to 0 bytes failure of cp/mv or network transmission or possibly in a forensics/carving context (??? I defer to those in that field, though).&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;So, to all, is there value in knowing what format a 0-byte file &lt;em&gt;might&lt;/em&gt; have been?  I&apos;m willing to accept &quot;no&quot;. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/del&gt;&lt;/p&gt;</comment>
                            <comment id="16147347" author="mcaruanagalizia" created="Wed, 30 Aug 2017 14:45:13 +0000"  >&lt;p&gt;When you put it that way, then I&apos;ll say yes. There is value in knowing what it might have been.&lt;/p&gt;</comment>
                            <comment id="16147629" author="tallison@mitre.org" created="Wed, 30 Aug 2017 17:17:19 +0000"  >&lt;p&gt;I put the logic in AutoDetectParser.  I didn&apos;t want to require every new parser to do its own test.  If there&apos;s a more elegant solution, let me know.&lt;/p&gt;</comment>
                            <comment id="16147632" author="mcaruanagalizia" created="Wed, 30 Aug 2017 17:20:22 +0000"  >&lt;p&gt;Thank you, that looks like a good solution!&lt;/p&gt;</comment>
                            <comment id="16147699" author="hudson" created="Wed, 30 Aug 2017 18:01:55 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1352 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1352/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1352/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2450&quot; title=&quot;OfficeParser.parse called for zero-byte file with .doc extension&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2450&quot;&gt;&lt;del&gt;TIKA-2450&lt;/del&gt;&lt;/a&gt; &amp;#8211; AutoDetectParser should throw a ZeroByteFileException for (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/a1533977852307c5095efaebfcc5a896d914a57c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/a1533977852307c5095efaebfcc5a896d914a57c&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(add) tika-core/src/main/java/org/apache/tika/exception/ZeroByteFileException.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/parser/AutoDetectParser.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/AutoDetectParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16147874" author="lfcnassif" created="Wed, 30 Aug 2017 19:21:10 +0000"  >&lt;p&gt;Late to the party... In forensic field, it is very useful to know that some recovered corrupted zero byte file named &quot;sex with 10 yo child.jpg&quot; was a picture in the past.&lt;/p&gt;

&lt;p&gt;Currently we test if the file is zero length before sending it to autodetectparser to not get confusing parser errors, but that is not possible with streams...&lt;/p&gt;

&lt;p&gt;So +1 to a unique ZeroByteFileException.&lt;/p&gt;</comment>
                            <comment id="16147881" author="tallison@mitre.org" created="Wed, 30 Aug 2017 19:24:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lfcnassif&quot; class=&quot;user-hover&quot; rel=&quot;lfcnassif&quot;&gt;lfcnassif&lt;/a&gt;, I don&apos;t need details!!!  But, thank you! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13127985">JCR-4240</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jg6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>