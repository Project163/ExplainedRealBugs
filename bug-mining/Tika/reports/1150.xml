<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:03:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3035] Tika-app --extract mode outputs to stderr instead of stdout</title>
                <link>https://issues.apache.org/jira/browse/TIKA-3035</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;In version 1.23 of Tika I am noticing a problem using the extract functionality. When extracting items from a file the &quot;Extracting ... to ... &quot; output goes to &lt;tt&gt;stderr&lt;/tt&gt; instead of &lt;tt&gt;stdout&lt;/tt&gt;.&#160;&#160;&lt;/p&gt;

&lt;p&gt;This problem is observed using the runnable jar `tika-app-1.23.jar` .&#160;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;b&gt;Example to re-create problem:&lt;/b&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Here we explode&#160;&lt;tt&gt;testPDF_childAttachments.pdf&lt;/tt&gt; and redirects standard error to /&lt;tt&gt;dev/null&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ java -jar tika-app-1.23.jar --extract-dir=tika-test/out/ -z testPDF_childAttachments.pdf 2&amp;gt; /dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If I do not redirect stderr I see:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ java -jar tika-app-1.23.jar --extract-dir=tika-test/out/ -z testPDF_childAttachments.pdf
INFO  As a convenience, TikaCLI has turned on extraction of
inline images &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the PDFParser (TIKA-2374).
Aside from the -z option, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is not the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; behavior
in Tika generally or in tika-server.
Jan 31, 2020 8:06:01 PM org.apache.tika.config.InitializableProblemHandler$3 handleInitializableProblem
WARNING: J2KImageReader not loaded. JPEG2000 files will not be processed.
See https:&lt;span class=&quot;code-comment&quot;&gt;//pdfbox.apache.org/2.0/dependencies.html#jai-image-io
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; optional dependencies.Jan 31, 2020 8:06:01 PM org.apache.tika.config.InitializableProblemHandler$3 handleInitializableProblem
WARNING: Tesseract OCR is installed and will be automatically applied to image files unless
you&apos;ve excluded the TesseractOCRParser from the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; parser.
Tesseract may dramatically slow down content extraction (TIKA-2359).
As of Tika 1.15 (and prior versions), Tesseract is automatically called.
In &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; versions of Tika, users may need to turn the TesseractOCRParser on via TikaConfig.
Jan 31, 2020 8:06:01 PM org.apache.tika.config.InitializableProblemHandler$3 handleInitializableProblem
WARNING: org.xerial&apos;s sqlite-jdbc is not loaded.
Please provide the jar on your classpath to parse sqlite files.
See tika-parsers/pom.xml &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the correct version.
Extracting &lt;span class=&quot;code-quote&quot;&gt;&apos;image0.jpg&apos;&lt;/span&gt; (image/jpeg) to tika-test/out/3975acae-089c-43ae-a3bc-04e4987a0282-image0.jpg
Extracting &lt;span class=&quot;code-quote&quot;&gt;&apos;image1.tif&apos;&lt;/span&gt; (image/tiff) to tika-test/out/8d11e4e3-735b-4b0b-9441-3ed4332c2f53-image1.tif
WARN  No Unicode mapping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; f_i (31) in font SCZFMD+HelveticaNeueLTStd-Roman
Extracting &lt;span class=&quot;code-quote&quot;&gt;&apos;Press Quality(1).joboptions&apos;&lt;/span&gt; (text/plain) to tika-test/out/28c3fb48-30ea-403b-8a35-252c8f692305-Press Quality(1).joboptions
Extracting &lt;span class=&quot;code-quote&quot;&gt;&apos;Unit10.doc&apos;&lt;/span&gt; (application/msword) to tika-test/out/008b9157-75f3-453b-bdfd-d5403c56891c-Unit10.doc
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Using 1.22 I correctly see the extracted files in &lt;tt&gt;stdout&lt;/tt&gt; when redirecting &lt;tt&gt;stderr&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ java -jar tika-app-1.22.jar --extract-dir=tika-test/out/ -z testPDF_childAttachments.pdf 2&amp;gt; /dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
Extracting &lt;span class=&quot;code-quote&quot;&gt;&apos;image0.jpg&apos;&lt;/span&gt; (image/jpeg) to tika-test/out/4ec61a12-4e5f-4de3-bee8-fa15521c374a-image0.jpg
Extracting &lt;span class=&quot;code-quote&quot;&gt;&apos;image1.tif&apos;&lt;/span&gt; (image/tiff) to tika-test/out/004fbeb5-4b0e-4d35-8c50-23a420dccc99-image1.tif
Extracting &lt;span class=&quot;code-quote&quot;&gt;&apos;Press Quality(1).joboptions&apos;&lt;/span&gt; (text/plain) to tika-test/out/8f6174d1-f0c7-4143-990d-a922c2e9513a-Press Quality(1).joboptions
Extracting &lt;span class=&quot;code-quote&quot;&gt;&apos;Unit10.doc&apos;&lt;/span&gt; (application/msword) to tika-test/out/b2508bee-745d-4051-b927-0f5c31b97c1e-Unit10.doc

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13282694">TIKA-3035</key>
            <summary>Tika-app --extract mode outputs to stderr instead of stdout</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="sorend">Soren Daugaard</reporter>
                        <labels>
                            <label>app</label>
                            <label>extract</label>
                    </labels>
                <created>Fri, 31 Jan 2020 20:11:03 +0000</created>
                <updated>Tue, 3 Mar 2020 00:17:11 +0000</updated>
                            <resolved>Mon, 2 Mar 2020 23:10:00 +0000</resolved>
                                    <version>1.23</version>
                                    <fixVersion>1.24</fixVersion>
                                    <component>app</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17033218" author="tilman" created="Sun, 9 Feb 2020 14:35:19 +0000"  >&lt;p&gt;That seems to be on purpose, here&apos;s the commit on that one:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;056304f - Eric Pugh &amp;lt;epugh@opensourceconnections.com&amp;gt; 04.09.2019&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2931&quot; title=&quot;Tika CLI shouldn&amp;#39;t log with System.out.println&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2931&quot;&gt;&lt;del&gt;TIKA-2931&lt;/del&gt;&lt;/a&gt; (#281)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;need to lowercase the output file to match the format passed to tesseract cmd line&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;need to lowercase the output file to match the format passed to tesseract cmd line&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;pull original code from apache/tika&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Send informational output to System.err, not System.out so commandline json response is clean&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;</comment>
                            <comment id="17043795" author="tallison@mitre.org" created="Mon, 24 Feb 2020 19:55:48 +0000"  >&lt;p&gt;Should we close as &quot;not a problem&quot; or is there something we need to fix?&lt;/p&gt;</comment>
                            <comment id="17043802" author="sorend" created="Mon, 24 Feb 2020 20:05:04 +0000"  >&lt;p&gt;I feel like this should be fixed since listing the embedded files that was extracted is valid output. It is not an error&#160;or diagnostic information. In my opinion stderr should be reserved for errors or diagnostic messages not for useable program output.&#160;&lt;/p&gt;

&lt;p&gt;If the concern is that STDOUT should only contain clean JSON a solution could be to add a JSON format option for listing the embedded files.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17043924" author="tallison@mitre.org" created="Mon, 24 Feb 2020 22:27:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=epugh&quot; class=&quot;user-hover&quot; rel=&quot;epugh&quot;&gt;epugh&lt;/a&gt; as I look back on this, how were you getting json with the &#8212;extract option? Sorry, it has been a while...&lt;/p&gt;</comment>
                            <comment id="17044406" author="epugh" created="Tue, 25 Feb 2020 12:49:49 +0000"  >&lt;p&gt;Here is my command:&lt;/p&gt;

&lt;p&gt;java -cp tika-app-1.23-SNAPSHOT.jar org.apache.tika.cli.TikaCLI --config=tika-config.xml --xmp --jsonRecursive --extract --pretty-print -x ./files/alvarez20140715a.pdf&lt;/p&gt;

&lt;p&gt;I went to try it out with a non snapshot version of tika-app, and tika.apache.org appears down &lt;cite&gt;!!&lt;/cite&gt;   &lt;/p&gt;</comment>
                            <comment id="17044533" author="epugh" created="Tue, 25 Feb 2020 14:54:47 +0000"  >&lt;p&gt;Tried it with tika-app-1.23.jar and worked great.   &lt;/p&gt;

&lt;p&gt;It feels to me like tika-app is somewhat over loaded...   Sometimes we use it to fire up the GUI app, othertimes we use it like a CLI.   But the CLI is kind of messy.   I wonder if we need a tika-cli project seperate from tika-app where all the inputs and outputs are properly thought through?&lt;/p&gt;</comment>
                            <comment id="17044573" author="tallison@mitre.org" created="Tue, 25 Feb 2020 15:26:47 +0000"  >&lt;p&gt;Alright, IIUC from private communication, I shouldn&apos;t have accepted the initial patch.  &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;I didn&apos;t realize it was even possible to extract attachments &lt;tt&gt;-z&lt;/tt&gt; and full recursive parsing &lt;tt&gt;-J&lt;/tt&gt; in the same command!  Congratulations!!!&lt;/li&gt;
	&lt;li&gt;Let&apos;s not do that.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Unless there are objections, I&apos;ll revert the &lt;tt&gt;-z&lt;/tt&gt; behavior to print progress to STDOUT.&lt;/p&gt;

&lt;p&gt;Longer term, e.g. Tika 2.0, we could really do to fix up the commandline processing and maybe use an actual commandline parser library, e.g. commons-cli.&lt;/p&gt;

&lt;p&gt;FTR: I accept serious fault for introducing some true nuttiness in the commandline, but here we are...&lt;/p&gt;</comment>
                            <comment id="17044722" author="kkrugler" created="Tue, 25 Feb 2020 18:23:47 +0000"  >&lt;p&gt;FWIW,&#160;&#160;[picocli|&lt;a href=&quot;https://picocli.info/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://picocli.info/&lt;/a&gt;] is a good command line parser - I&apos;ve switched over to it, since args4j seems to be sunsetting...&lt;/p&gt;</comment>
                            <comment id="17049701" author="hudson" created="Mon, 2 Mar 2020 22:13:02 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1784 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1784/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1784/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3035&quot; title=&quot;Tika-app --extract mode outputs to stderr instead of stdout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3035&quot;&gt;&lt;del&gt;TIKA-3035&lt;/del&gt;&lt;/a&gt; &amp;#8211; tika-app&apos;s -z option should report progress to stdout not (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/5a093aa34a0abfb158f2801e69245d3501bbdee5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/5a093aa34a0abfb158f2801e69245d3501bbdee5&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-app/src/test/java/org/apache/tika/cli/TikaCLITest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17049734" author="tallison@mitre.org" created="Mon, 2 Mar 2020 23:10:00 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sorend&quot; class=&quot;user-hover&quot; rel=&quot;sorend&quot;&gt;sorend&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=epugh&quot; class=&quot;user-hover&quot; rel=&quot;epugh&quot;&gt;epugh&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17049775" author="hudson" created="Tue, 3 Mar 2020 00:17:11 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #315 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/315/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/315/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3035&quot; title=&quot;Tika-app --extract mode outputs to stderr instead of stdout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3035&quot;&gt;&lt;del&gt;TIKA-3035&lt;/del&gt;&lt;/a&gt; &amp;#8211; tika-app&apos;s -z option should report progress to stdout not (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/1c3ceac4bfb966a61bd08bc7f22b4fb8e43f6499&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/1c3ceac4bfb966a61bd08bc7f22b4fb8e43f6499&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-app/src/test/java/org/apache/tika/cli/TikaCLITest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13253576">TIKA-2931</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12992365" name="testPDF_childAttachments.pdf" size="2318262" author="sorend" created="Fri, 31 Jan 2020 20:10:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0b228:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>