<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:56:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-657] Email parser gets into trouble on malformed html in enron corpus</title>
                <link>https://issues.apache.org/jira/browse/TIKA-657</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;There is a very large corpus of email addresses available: &lt;a href=&quot;http://www.cs.cmu.edu/~enron/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.cs.cmu.edu/~enron/&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In processing even a subset of this corpus, I see numerous &apos;unexpected RuntimeException&apos; errors resulting from tagsoup throwing on truly awful html. It seems to me that being able to do something with this entire stack would make a good &apos;1.0&apos; criteria for tika&apos;s email parser.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12506516">TIKA-657</key>
            <summary>Email parser gets into trouble on malformed html in enron corpus</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jnioche">Julien Nioche</assignee>
                                    <reporter username="bmargulies">Benson Margulies</reporter>
                        <labels>
                    </labels>
                <created>Sat, 7 May 2011 22:45:04 +0000</created>
                <updated>Fri, 14 Oct 2011 13:37:43 +0000</updated>
                            <resolved>Fri, 14 Oct 2011 13:37:42 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>1.0</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13030467" author="jnioche" created="Sun, 8 May 2011 08:31:12 +0000"  >&lt;p&gt;Good idea. We need more tutorials and example for Behemoth &lt;a href=&quot;https://github.com/jnioche/behemoth&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jnioche/behemoth&lt;/a&gt; and processing the Enron corpus with Tika would be an interesting one. We get the stacktraces in the Hadoop logs and could then look into the details of each problem &lt;/p&gt;</comment>
                            <comment id="13040149" author="butlermh" created="Fri, 27 May 2011 09:41:39 +0000"  >&lt;p&gt;I took the Enron dataset and processed it using Tika and Behemoth. It contains 517,424 documents.&lt;/p&gt;

&lt;p&gt;Using Tika 0.9 I encountered runtime errors on 27,224 documents. Sorting the exceptions, there were four different stack traces. I enclose a summary of these exceptions below. However I did not see the problems with Tagsoup parsing that Benson reports? &lt;/p&gt;

&lt;p&gt;I then took the version of Tika in head. Here I encountered run time errors on 1,218 documents. I enclose a summary of these exceptions below also. There were two sources of error. First, the Enron corpus contains emails with lines longer than the default 10,000 characters used in the RFC822Parser parser. The other problem is that the Enron corpus contains malformed dates, which cause apache-mime4j to throw a MimeException. &lt;/p&gt;

&lt;p&gt;The first problem is easily fixed because RFC822Parser is configured from a MimeEntityConfig object, so passing in an object with a higher MaxLineLen - e.g. 60,000 - avoids these exceptions. I noticed that MimeEntityConfig also contains an option for &quot;strict parsing&quot;. Currently MailContentHandler only performs strict parsing, i.e. if a MimeException is encountered when processing any fields in MailContentHandler.field then it is passed back up and processing the document fails. However, we may prefer not to have strict parsing i.e. continue even if processing one or more fields fails. This can be achieved by placing a try / catch block around the logic inside MailContentHandler.field(), and only rethrowing the error if strictParsing is enabled, otherwise we log the error.&lt;/p&gt;

&lt;p&gt;I then re-ran this on the entire corpus and it parsed successfully.&lt;/p&gt;</comment>
                            <comment id="13040150" author="butlermh" created="Fri, 27 May 2011 09:42:33 +0000"  >&lt;p&gt;Summary of exceptions thrown when processing Enron corpus using Tika 0.9&lt;/p&gt;</comment>
                            <comment id="13040153" author="butlermh" created="Fri, 27 May 2011 09:44:36 +0000"  >&lt;p&gt;Summary of exceptions thrown when processing Enron corpus using Tika 1.0 snapshot (head)&lt;/p&gt;</comment>
                            <comment id="13040174" author="butlermh" created="Fri, 27 May 2011 10:38:14 +0000"  >&lt;p&gt;I have submitted code to support turning off strict parsing as issue &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-667&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TIKA-667&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13126938" author="jukkaz" created="Thu, 13 Oct 2011 21:17:54 +0000"  >&lt;p&gt;In revision 1183109 I increased the default line and header length limits to cope with valid messages in the Enron corpus. With that change I saw no more exceptions at least in the first 30k messages.&lt;/p&gt;

&lt;p&gt;I&apos;ll run a full test over the entire corpus to see if there are any other problems left before we can resolve this issue.&lt;/p&gt;</comment>
                            <comment id="13127540" author="jukkaz" created="Fri, 14 Oct 2011 13:37:42 +0000"  >&lt;p&gt;I was able to process the entire Enron corpus without problems, so resolving as fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12480638" name="tika0.9-enron-errors-summary.txt" size="6617" author="butlermh" created="Fri, 27 May 2011 09:42:33 +0000"/>
                            <attachment id="12480639" name="tika1.0-snapshot-enron-errors.summary.txt" size="8478" author="butlermh" created="Fri, 27 May 2011 09:44:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3885</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i037wv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16715</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>