<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:04:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3972] Parsing RTF sample with hyperlink and ToXMLContentHandler returns malformed XHTML from toString method call</title>
                <link>https://issues.apache.org/jira/browse/TIKA-3972</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I am exploring Tika for RTF to X(HT)ML parsing, I have run into a problem with some RTF having an hyperlink where unfortunately the result of using a ContentHandler created with ToXMLContentHandler and calling the toString() method on the handler returns a malformed X(HT)ML document where the starting `&amp;lt;a&amp;gt;` tag is not properly closed.&lt;/p&gt;

&lt;p&gt;I have attached the relevant RTF sample document. The output I get is&lt;/p&gt;

&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;&amp;lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&amp;gt;&lt;br/&gt;
&amp;lt;head&amp;gt;&lt;br/&gt;
&amp;lt;meta name=&quot;X-TIKA:Parsed-By&quot; content=&quot;org.apache.tika.parser.DefaultParser&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;meta name=&quot;X-TIKA:Parsed-By&quot; content=&quot;org.apache.tika.parser.microsoft.rtf.RTFParser&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;meta name=&quot;Content-Type&quot; content=&quot;application/rtf&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;title&amp;gt;&amp;lt;/title&amp;gt;&lt;br/&gt;
&amp;lt;/head&amp;gt;&lt;br/&gt;
&amp;lt;body&amp;gt;&amp;lt;p /&amp;gt;&lt;br/&gt;
&amp;lt;p /&amp;gt;&lt;br/&gt;
&amp;lt;p&amp;gt; &#160; &#160;10&#8221;Flour Tortilla&amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;p&amp;gt; &#160; &#160;Caesar &amp;lt;b&amp;gt;&amp;lt;i&amp;gt;DIP&amp;lt;/i&amp;gt;: &amp;lt;a href=&quot;..\\..\\SAUCES\\Dips&lt;br class=&quot;atl-forced-newline&quot; /&gt;Dip, Caesar.doc&quot;&amp;gt;Dip, Caesar.doc&amp;lt;/b&amp;gt;&amp;lt;b /&amp;gt;&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;p&amp;gt;&amp;lt;b /&amp;gt; &#160; &#160;Ripped Romaine&amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;p&amp;gt; &#160; &#160;Blackened Salmon julienne&amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;p&amp;gt; &#160; &#160;Shaved Red Onion&amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;p&amp;gt; &#160; &#160;Julienne Tomato&amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;p&amp;gt; &#160; &#160;Grated Parmesan&amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;p&amp;gt; &#160; &#160;Blackening spice: &amp;lt;a href=&quot;..\\..\\SPICE&lt;br class=&quot;atl-forced-newline&quot; /&gt;Blackening Spice.doc&quot;&amp;gt;Blackening Spice.doc&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;p /&amp;gt;&lt;br/&gt;
&amp;lt;p&amp;gt;Method&amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;p&amp;gt;Procedure Text &amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;p /&amp;gt;&lt;br/&gt;
&amp;lt;p /&amp;gt;&lt;br/&gt;
&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&lt;/p&gt;

&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;where the part `&amp;lt;p&amp;gt; &#160; &#160;Caesar &amp;lt;b&amp;gt;&amp;lt;i&amp;gt;DIP&amp;lt;/i&amp;gt;: &amp;lt;a href=&quot;..\\..\\SAUCES\\Dips&lt;br class=&quot;atl-forced-newline&quot; /&gt;Dip, Caesar.doc&quot;&amp;gt;Dip, Caesar.doc&amp;lt;/b&amp;gt;&amp;lt;b /&amp;gt;&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;` is flawed as the `&amp;lt;a href&amp;gt;` is not closed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Tested with Java 8 (Temurin Eclipse) and Tika 2.7.0 on Windows 11.&lt;/p&gt;</environment>
        <key id="13524551">TIKA-3972</key>
            <summary>Parsing RTF sample with hyperlink and ToXMLContentHandler returns malformed XHTML from toString method call</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="martin.honnen">Martin Honnen</reporter>
                        <labels>
                            <label>RTFParser</label>
                            <label>rtf</label>
                    </labels>
                <created>Mon, 13 Feb 2023 22:11:15 +0000</created>
                <updated>Wed, 15 Feb 2023 23:52:28 +0000</updated>
                                            <version>2.7.0</version>
                                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17689337" author="tallison@mitre.org" created="Wed, 15 Feb 2023 20:45:52 +0000"  >&lt;p&gt;&lt;del&gt;It looks like our parser requires &lt;tt&gt;fldrslt&lt;/tt&gt; as a hint that the field has come to an end.  &lt;tt&gt;Dip, Caesar.doc&lt;/tt&gt; doesn&apos;t have that, but &lt;tt&gt;Blackening Spice&lt;/tt&gt; does.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;Sorry.  That was wrong.  Still looking.&lt;/p&gt;

&lt;p&gt;Thank you for opening this issue and providing an example file!&lt;/p&gt;</comment>
                            <comment id="17689364" author="tallison@mitre.org" created="Wed, 15 Feb 2023 22:12:49 +0000"  >&lt;p&gt;It looks like the RTFParser is actually ending the &amp;lt;a&amp;gt; element.  Somewhere in the content handler stack, though, it isn&apos;t being emitted because the parser is incorrectly ending the &amp;lt;b&amp;gt; element (and then starting it again) after the start of the &amp;lt;a&amp;gt; element.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;start: p
characters: Caesar 
start: b
start: i
characters: DIP
end: i
characters: : 
start: a
characters: Dip, Caesar.doc
end: b
start: b
end: a
end: b
end: p
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So literally, we&apos;re writing &amp;lt;a href...&amp;gt; &amp;lt;/b&amp;gt;&amp;lt;b&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/b&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17689400" author="hudson" created="Wed, 15 Feb 2023 23:52:28 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #1024 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/1024/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/1024/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3972&quot; title=&quot;Parsing RTF sample with hyperlink and ToXMLContentHandler returns malformed XHTML from toString method call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3972&quot;&gt;TIKA-3972&lt;/a&gt; &amp;#8211; fix closing &amp;lt;a&amp;gt; elements when there are also style elements (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/4f599dfa3d72c724a846356bf867db45f221170a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/4f599dfa3d72c724a846356bf867db45f221170a&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-microsoft-module/src/test/java/org/apache/tika/parser/microsoft/rtf/RTFParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-microsoft-module/src/main/java/org/apache/tika/parser/microsoft/rtf/TextExtractor.java&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-microsoft-module/src/test/resources/test-documents/testRTFHyperlinkAndStyles.rtf&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="13055411" name="hyperlink.rtf" size="1794" author="martin.honnen" created="Mon, 13 Feb 2023 22:04:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1fwls:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>