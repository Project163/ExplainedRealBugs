<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:05:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-4385] GDALParser deadlocks while reading gdalinfo output</title>
                <link>https://issues.apache.org/jira/browse/TIKA-4385</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;As per &lt;a href=&quot;https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Process.html:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Process.html:&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Because some native platforms only provide limited buffer size for standard input and output streams, failure to promptly write the input stream or read the output stream of the process may cause the process to block, or even deadlock.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The fix is to read the output buffer in another thread. Sample file causing this issue attached.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13608324">TIKA-4385</key>
            <summary>GDALParser deadlocks while reading gdalinfo output</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lsliwko">Leszek Sliwko</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Feb 2025 00:50:11 +0000</created>
                <updated>Thu, 8 May 2025 13:59:31 +0000</updated>
                            <resolved>Tue, 18 Feb 2025 13:42:31 +0000</resolved>
                                    <version>3.1.0</version>
                                    <fixVersion>4.0.0</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17926626" author="githubbot" created="Thu, 13 Feb 2025 00:53:49 +0000"  >&lt;p&gt;lsliwko opened a new pull request, #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   A fix for GDALParser deadlock while reading gdalinfo output.&lt;/p&gt;

</comment>
                            <comment id="17926672" author="githubbot" created="Thu, 13 Feb 2025 05:47:10 +0000"  >&lt;p&gt;THausherr commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2655549263&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2655549263&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Why is `startFor()` returning an array but only the first element is used?&lt;/p&gt;

</comment>
                            <comment id="17926746" author="githubbot" created="Thu, 13 Feb 2025 11:10:14 +0000"  >&lt;p&gt;lsliwko commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2656267318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2656267318&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Both stdout and stderr buffers need to be drained while the process is running, but we are only interested in stdout. I will rewrite it for better clarity. Also, TesseractOCRParserTest.testPositiveRotateOCR is failling on master.&lt;/p&gt;

</comment>
                            <comment id="17926784" author="githubbot" created="Thu, 13 Feb 2025 14:15:25 +0000"  >&lt;p&gt;THausherr commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2656728049&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2656728049&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   There&apos;s a checkstyle error. Run it locally and look into the file `checkstyle-result.xml` in the target directory of the failing subproject.&lt;/p&gt;

</comment>
                            <comment id="17926806" author="githubbot" created="Thu, 13 Feb 2025 15:13:51 +0000"  >&lt;p&gt;lsliwko commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2656915724&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2656915724&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Checkstyle did not like empty catch blocks. Fixed and pushed to PR.&lt;/p&gt;

</comment>
                            <comment id="17926808" author="githubbot" created="Thu, 13 Feb 2025 15:18:36 +0000"  >&lt;p&gt;lsliwko commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2656930337&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2656930337&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   By the way, multiple processes are executed the same way without draining the stdout/stderr buffers and without timeouts, which might cause deadlocks in other places: ExternalEmbedder, MarianTranslator, etc. I will refactor that in a separate ticket.&lt;/p&gt;

</comment>
                            <comment id="17926827" author="githubbot" created="Thu, 13 Feb 2025 16:04:23 +0000"  >&lt;p&gt;THausherr commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2657065817&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2657065817&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Now we have a new problem, but it&apos;s not related to your code.&lt;br/&gt;
   &lt;a href=&quot;https://github.com/netplex/json-smart-v2/issues/232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/netplex/json-smart-v2/issues/232&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17926837" author="githubbot" created="Thu, 13 Feb 2025 16:18:43 +0000"  >&lt;p&gt;THausherr commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2657106242&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2657106242&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Please take the latest commit I did in the trunk&lt;/p&gt;

</comment>
                            <comment id="17926915" author="githubbot" created="Thu, 13 Feb 2025 19:43:11 +0000"  >&lt;p&gt;lsliwko commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2657557053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2657557053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Thanks, I have checked the other processes, and all of them have some stdout/stderr draining logic. Thus, only the GDALParser requires a fix.&lt;/p&gt;

</comment>
                            <comment id="17927007" author="githubbot" created="Fri, 14 Feb 2025 00:58:51 +0000"  >&lt;p&gt;tballison commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2658024482&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2658024482&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   I&apos;m sorry for showing up late to this PR. Any chance this could be of use: &lt;a href=&quot;https://github.com/apache/tika/blob/main/tika-core/src/main/java/org/apache/tika/utils/ProcessUtils.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/blob/main/tika-core/src/main/java/org/apache/tika/utils/ProcessUtils.java&lt;/a&gt; ?&lt;/p&gt;

</comment>
                            <comment id="17927057" author="githubbot" created="Fri, 14 Feb 2025 07:20:59 +0000"  >&lt;p&gt;THausherr commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2658472550&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2658472550&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Yes that would be better, to avoid double implementations.&lt;/p&gt;

</comment>
                            <comment id="17927080" author="githubbot" created="Fri, 14 Feb 2025 09:08:31 +0000"  >&lt;p&gt;lsliwko commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2658681622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2658681622&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Yes, it should work. I will re-implement it.&lt;/p&gt;

</comment>
                            <comment id="17927142" author="githubbot" created="Fri, 14 Feb 2025 14:45:35 +0000"  >&lt;p&gt;lsliwko commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2659517441&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2659517441&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   GDALParser has been re-implemented using ProcessUtils. Please check.&lt;/p&gt;

</comment>
                            <comment id="17927152" author="githubbot" created="Fri, 14 Feb 2025 15:31:16 +0000"  >&lt;p&gt;THausherr commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2659634231&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2659634231&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   LGTM&lt;/p&gt;

</comment>
                            <comment id="17927527" author="githubbot" created="Sun, 16 Feb 2025 15:38:52 +0000"  >&lt;p&gt;tballison merged PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17927528" author="githubbot" created="Sun, 16 Feb 2025 15:39:25 +0000"  >&lt;p&gt;tballison commented on PR #2126:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/2126#issuecomment-2661489158&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/2126#issuecomment-2661489158&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Thank you @lsliwko and @THausherr . I&apos;ll cherry-pick into 3.x in the next day or two.&lt;/p&gt;

</comment>
                            <comment id="17927540" author="hudson" created="Sun, 16 Feb 2025 17:27:49 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk17 #638 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk17/638/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk17/638/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-4385&quot; title=&quot;GDALParser deadlocks while reading gdalinfo output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-4385&quot;&gt;&lt;del&gt;TIKA-4385&lt;/del&gt;&lt;/a&gt; : fix : GDAL process output read in another thread (#2126) (github: &lt;a href=&quot;https://github.com/apache/tika/commit/05500bbd9a2840934652e5b647e0a85506a0325b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/05500bbd9a2840934652e5b647e0a85506a0325b&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-scientific-module/src/main/java/org/apache/tika/parser/gdal/GDALParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17928088" author="tallison@mitre.org" created="Tue, 18 Feb 2025 13:42:31 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lsliwko&quot; class=&quot;user-hover&quot; rel=&quot;lsliwko&quot;&gt;lsliwko&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17928139" author="hudson" created="Tue, 18 Feb 2025 16:06:16 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-branch_3x-jdk11 #1973 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-branch_3x-jdk11/1973/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-branch_3x-jdk11/1973/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-4385&quot; title=&quot;GDALParser deadlocks while reading gdalinfo output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-4385&quot;&gt;&lt;del&gt;TIKA-4385&lt;/del&gt;&lt;/a&gt; : fix : GDAL process output read in another thread (#2126) (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/3fc3476f997d559713fa823c42716141545c5283&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/3fc3476f997d559713fa823c42716141545c5283&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-scientific-module/src/main/java/org/apache/tika/parser/gdal/GDALParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="13074696" name="content-type-test.grb2" size="3447292" author="lsliwko" created="Thu, 13 Feb 2025 00:56:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1u6qw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>