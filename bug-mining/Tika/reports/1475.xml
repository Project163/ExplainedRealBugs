<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:05:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-4485] Can no longer use a simple file name or resource name for tika-config.xml</title>
                <link>https://issues.apache.org/jira/browse/TIKA-4485</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;It looks like the tika.config property or TIKA_CONFIG environment variable can no longer be a simple string.&#160; Post &lt;a href=&quot;https://github.com/apache/tika/commit/3e3145eb0a003ddc0e1ebf88c2ad35eebda2afb1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this commit&lt;/a&gt;, the code to get a config input stream does&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(config).toURL().openStream() &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;and catches IOException and MalformedURLException.&#160; But the above ends up throwing IllegalArgumentException if the property or environment variable isn&apos;t an absolute URL.&#160; As a result, the code that tries to load the file as a resource or regular file never gets to run:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; InputStream getConfigInputStream(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; config, ServiceLoader serviceLoader)
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; TikaException, IOException {
&#160; &#160; &#160; &#160; InputStream stream = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
&#160; &#160; &#160; &#160; &#160; &#160; stream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(config).toURL().openStream();
&#160; &#160; &#160; &#160; } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException | URISyntaxException ignore) {
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stream == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
&#160; &#160; &#160; &#160; &#160; &#160; stream = serviceLoader.getResourceAsStream(config);
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stream == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
&#160; &#160; &#160; &#160; &#160; &#160; Path file = Paths.get(config);
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Files.isRegularFile(file)) {
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; stream = Files.newInputStream(file);
&#160; &#160; &#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stream == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TikaException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Specified Tika configuration not found: &quot;&lt;/span&gt; + config);
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; stream;
&#160; &#160; }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;If the first exception handler caught IllegalArgumentException, I think this would help.&#160; This is an issue for test environments that can&apos;t inject -Dtika.config= ... as an absolute URI.&#160; For my case, this is Clojure code running under leiningen where we are injecting JVM opts that need to be portable between machines (e.g., -Dtika.config=tika-config.xml).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13628993">TIKA-4485</key>
            <summary>Can no longer use a simple file name or resource name for tika-config.xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="ejschoen">Eric Schoen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Sep 2025 01:03:22 +0000</created>
                <updated>Tue, 4 Nov 2025 03:52:11 +0000</updated>
                            <resolved>Tue, 16 Sep 2025 08:56:02 +0000</resolved>
                                                    <fixVersion>4.0.0</fixVersion>
                    <fixVersion>3.3.0</fixVersion>
                                    <component>tika-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="18020535" author="tilman" created="Tue, 16 Sep 2025 03:57:36 +0000"  >&lt;p&gt;I&apos;m gonna investigate this and also find out why this didn&apos;t fail in the unit tests.&lt;/p&gt;</comment>
                            <comment id="18020575" author="hudson" created="Tue, 16 Sep 2025 08:19:19 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk17 #898 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk17/898/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk17/898/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-4485&quot; title=&quot;Can no longer use a simple file name or resource name for tika-config.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-4485&quot;&gt;&lt;del&gt;TIKA-4485&lt;/del&gt;&lt;/a&gt;: fix relative files + test (tilman: &lt;a href=&quot;https://github.com/apache/tika/commit/f11a42c7636d1e8c0cb1dde1fa7ca092ca8f9218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/f11a42c7636d1e8c0cb1dde1fa7ca092ca8f9218&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/config/TikaConfig.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-core/src/test/java/org/apache/tika/config/TikaConfigTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="18020590" author="hudson" created="Tue, 16 Sep 2025 08:41:26 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-branch_3x-jdk11 #2205 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-branch_3x-jdk11/2205/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-branch_3x-jdk11/2205/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-4485&quot; title=&quot;Can no longer use a simple file name or resource name for tika-config.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-4485&quot;&gt;&lt;del&gt;TIKA-4485&lt;/del&gt;&lt;/a&gt;: fix relative files + test (tilman: &lt;a href=&quot;https://github.com/apache/tika/commit/3dc10a4c5edff1550821c96c683489e51fbab251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/3dc10a4c5edff1550821c96c683489e51fbab251&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/config/TikaConfig.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-core/src/test/java/org/apache/tika/config/TikaConfigTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="18020594" author="tilman" created="Tue, 16 Sep 2025 08:56:03 +0000"  >&lt;p&gt;Thanks for reporting this, it should be fixed now, please try with a snapshot:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/tika/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/tika/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please do not wait for the next release to test it.&lt;/p&gt;</comment>
                            <comment id="18020670" author="ejschoen" created="Tue, 16 Sep 2025 12:53:35 +0000"  >&lt;p&gt;Yes, thanks.&#160; Adding the above snapshot repo and setting a managed dependency on tika-core 3.3.0-SNAPSHOT does appear to fix the problem.&#160; Both through the Leiningen repl (tracked that down to a Clojure package called pantomime that uses Tika and makes a static instance of AutoDetectParser at load time) and with a java command line that uses java -Dtika.config=tika-config.xml.&#160; Startup now shows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2025-09-16T12:52:13.592Z btc.i2kconnect.com DEBUG [org.apache.tika.config.TikaConfig] - loading tika config from: tika-config.xml
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For what it&apos;s worth, a workaround for startup with pre-3.3.0-SNAPSHOT is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JAVA -Dtika.config=jar:file:./jarfilename.jar!/tika-config.xml &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I really appreciate the quick attention to this, since there&apos;s a recent critical CVE (CVE-2025-54988) that&apos;s forcing&#160;upgrades to 3.2.2 or later.&lt;/p&gt;</comment>
                            <comment id="18035153" author="ejschoen" created="Mon, 3 Nov 2025 21:40:00 +0000"  >&lt;p&gt;Is there a chance we could get a release with this fix published to Maven?&#160; For some reason, nobody else in my team can fetch from a 3.3.0-SNAPSHOT release from the snapshots repo, and I&apos;m not sure why, since it worked for me back in September.&#160; I see there&apos;s already a snapshot for 4.0.0, but nothing on Maven past 3.2.3, which predates the fix.&lt;/p&gt;</comment>
                            <comment id="18035211" author="tilman" created="Tue, 4 Nov 2025 03:51:51 +0000"  >&lt;p&gt;Add this to their pom.xml:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;pluginRepositories&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;pluginRepository&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;apache.snapshots&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;https://repository.apache.org/content/repositories/snapshots&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;snapshots&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;enabled&amp;gt;&lt;/span&gt;true&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/enabled&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;updatePolicy&amp;gt;&lt;/span&gt;always&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/updatePolicy&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;checksumPolicy&amp;gt;&lt;/span&gt;warn&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/checksumPolicy&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/snapshots&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/pluginRepository&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/pluginRepositories&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If it still doesn&apos;t work, then maybe your employer has a policy to prevent users from getting a snapshot. The 3.3.0 builds are there:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/tika/tika-core/3.3.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/tika/tika-core/3.3.0-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1xpgg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>