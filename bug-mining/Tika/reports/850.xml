<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:00:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2098] Tika.parseToString() with maxLength doesn&apos;t work correctly for PDF files</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2098</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;When parsing PDF file with Tika.parseToString(InputStream stream, Metadata metadata, int maxLength) and maxLength &amp;lt; content size it throws Exception.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.tika.exception.TikaException: Unable to extract all PDF content

	at org.apache.tika.parser.pdf.PDF2XHTML.process(PDF2XHTML.java:135)
	at org.apache.tika.parser.pdf.PDFParser.parse(PDFParser.java:150)
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)
	at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:120)
	at org.apache.tika.Tika.parseToString(Tika.java:568)
Caused by: org.apache.commons.io.IOExceptionWithCause: Unable to write a string: Tika - Content Analysis Toolkit
	at org.apache.tika.parser.pdf.PDF2XHTML.writeString(PDF2XHTML.java:302)
	at org.apache.pdfbox.text.PDFTextStripper.writeString(PDFTextStripper.java:779)
	at org.apache.pdfbox.text.PDFTextStripper.writeLine(PDFTextStripper.java:1738)
	at org.apache.pdfbox.text.PDFTextStripper.writePage(PDFTextStripper.java:672)
	at org.apache.pdfbox.text.PDFTextStripper.processPage(PDFTextStripper.java:392)
	at org.apache.tika.parser.pdf.PDF2XHTML.processPage(PDF2XHTML.java:143)
	at org.apache.pdfbox.text.PDFTextStripper.processPages(PDFTextStripper.java:319)
	at org.apache.pdfbox.text.PDFTextStripper.writeText(PDFTextStripper.java:266)
	at org.apache.tika.parser.pdf.PDF2XHTML.process(PDF2XHTML.java:111)
	... 35 more
Caused by: org.apache.tika.sax.TaggedSAXException: Your document contained more than 100 characters, and so your requested limit has been reached. To receive the full text of the document, increase your limit. (Text up to the limit is however available).
org.apache.tika.sax.TaggedSAXException: Your document contained more than 100 characters, and so your requested limit has been reached. To receive the full text of the document, increase your limit. (Text up to the limit is however available).
org.apache.tika.sax.WriteOutContentHandler$WriteLimitReachedException: Your document contained more than 100 characters, and so your requested limit has been reached. To receive the full text of the document, increase your limit. (Text up to the limit is however available).
	at org.apache.tika.sax.TaggedContentHandler.handleException(TaggedContentHandler.java:113)
	at org.apache.tika.sax.ContentHandlerDecorator.characters(ContentHandlerDecorator.java:148)
	at org.apache.tika.sax.ContentHandlerDecorator.characters(ContentHandlerDecorator.java:146)
	at org.apache.tika.sax.SafeContentHandler.access$001(SafeContentHandler.java:46)
	at org.apache.tika.sax.SafeContentHandler$1.write(SafeContentHandler.java:82)
	at org.apache.tika.sax.SafeContentHandler.filter(SafeContentHandler.java:140)
	at org.apache.tika.sax.SafeContentHandler.characters(SafeContentHandler.java:287)
	at org.apache.tika.sax.XHTMLContentHandler.characters(XHTMLContentHandler.java:279)
	at org.apache.tika.sax.XHTMLContentHandler.characters(XHTMLContentHandler.java:306)
	at org.apache.tika.parser.pdf.PDF2XHTML.writeString(PDF2XHTML.java:300)
	... 43 more
Caused by: org.apache.tika.sax.TaggedSAXException: Your document contained more than 100 characters, and so your requested limit has been reached. To receive the full text of the document, increase your limit. (Text up to the limit is however available).
org.apache.tika.sax.WriteOutContentHandler$WriteLimitReachedException: Your document contained more than 100 characters, and so your requested limit has been reached. To receive the full text of the document, increase your limit. (Text up to the limit is however available).
	at org.apache.tika.sax.TaggedContentHandler.handleException(TaggedContentHandler.java:113)
	at org.apache.tika.sax.ContentHandlerDecorator.characters(ContentHandlerDecorator.java:148)
	at org.apache.tika.sax.ContentHandlerDecorator.characters(ContentHandlerDecorator.java:146)
	... 51 more
Caused by: org.apache.tika.sax.WriteOutContentHandler$WriteLimitReachedException: Your document contained more than 100 characters, and so your requested limit has been reached. To receive the full text of the document, increase your limit. (Text up to the limit is however available).
	at org.apache.tika.sax.WriteOutContentHandler.characters(WriteOutContentHandler.java:141)
	at org.apache.tika.sax.ContentHandlerDecorator.characters(ContentHandlerDecorator.java:146)
	at org.apache.tika.sax.xpath.MatchingContentHandler.characters(MatchingContentHandler.java:85)
	at org.apache.tika.sax.ContentHandlerDecorator.characters(ContentHandlerDecorator.java:146)
	at org.apache.tika.sax.ContentHandlerDecorator.characters(ContentHandlerDecorator.java:146)
	at org.apache.tika.sax.SecureContentHandler.characters(SecureContentHandler.java:270)
	at org.apache.tika.sax.ContentHandlerDecorator.characters(ContentHandlerDecorator.java:146)
	... 52 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13007670">TIKA-2098</key>
            <summary>Tika.parseToString() with maxLength doesn&apos;t work correctly for PDF files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="alexshadow007">Alexander Kazakov</reporter>
                        <labels>
                            <label>java</label>
                            <label>parser</label>
                            <label>pdf</label>
                    </labels>
                <created>Mon, 26 Sep 2016 18:42:15 +0000</created>
                <updated>Mon, 12 Apr 2021 13:02:04 +0000</updated>
                            <resolved>Mon, 26 Sep 2016 20:07:57 +0000</resolved>
                                    <version>1.13</version>
                                    <fixVersion>1.14</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15523870" author="githubbot" created="Mon, 26 Sep 2016 18:49:06 +0000"  >&lt;p&gt;GitHub user alexshadow007 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tika/pull/134&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/134&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2098&quot; title=&quot;Tika.parseToString() with maxLength doesn&amp;#39;t work correctly for PDF files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2098&quot;&gt;&lt;del&gt;TIKA-2098&lt;/del&gt;&lt;/a&gt; contributed by alexshadow007&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/alexshadow007/tika&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/alexshadow007/tika&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2098&quot; title=&quot;Tika.parseToString() with maxLength doesn&amp;#39;t work correctly for PDF files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2098&quot;&gt;&lt;del&gt;TIKA-2098&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tika/pull/134.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/134.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #134&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c33ac04618f97c06fe4508b5d41465b2c11ba1b9&lt;br/&gt;
Author: Alexander Kazakov &amp;lt;alexshadow007@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-09-26T18:48:11Z&lt;/p&gt;

&lt;p&gt;    fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2098&quot; title=&quot;Tika.parseToString() with maxLength doesn&amp;#39;t work correctly for PDF files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2098&quot;&gt;&lt;del&gt;TIKA-2098&lt;/del&gt;&lt;/a&gt; contributed by alexshadow007&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15523900" author="githubbot" created="Mon, 26 Sep 2016 19:02:38 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tika/pull/134&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/134&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15523958" author="hudson" created="Mon, 26 Sep 2016 19:29:28 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1110 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1110/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1110/&lt;/a&gt;)&lt;br/&gt;
fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2098&quot; title=&quot;Tika.parseToString() with maxLength doesn&amp;#39;t work correctly for PDF files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2098&quot;&gt;&lt;del&gt;TIKA-2098&lt;/del&gt;&lt;/a&gt; contributed by alexshadow007 (alexshadow007: rev c33ac04618f97c06fe4508b5d41465b2c11ba1b9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/pdf/PDFParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDF2XHTML.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15524042" author="tallison@mitre.org" created="Mon, 26 Sep 2016 20:07:57 +0000"  >&lt;p&gt;Good catch.  Thank you!&lt;/p&gt;</comment>
                            <comment id="15524060" author="hudson" created="Mon, 26 Sep 2016 20:17:03 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build tika-2.x-windows #57 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/57/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/57/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2098&quot; title=&quot;Tika.parseToString() with maxLength doesn&amp;#39;t work correctly for PDF files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2098&quot;&gt;&lt;del&gt;TIKA-2098&lt;/del&gt;&lt;/a&gt; small clean up.  Test for writelimitreached for each catchable (tallison: rev cde4c0aa8b668e0964f2b83fab67588292ffc993)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parser-modules/tika-parser-multimedia-module/src/main/java/org/apache/tika/parser/pdf/AbstractPDF2XHTML.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parser-modules/tika-parser-multimedia-module/src/test/java/org/apache/tika/parser/pdf/PDFParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15524143" author="hudson" created="Mon, 26 Sep 2016 20:56:16 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-2.x #153 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x/153/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x/153/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2098&quot; title=&quot;Tika.parseToString() with maxLength doesn&amp;#39;t work correctly for PDF files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2098&quot;&gt;&lt;del&gt;TIKA-2098&lt;/del&gt;&lt;/a&gt; small clean up.  Test for writelimitreached for each catchable (tallison: rev cde4c0aa8b668e0964f2b83fab67588292ffc993)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parser-modules/tika-parser-multimedia-module/src/test/java/org/apache/tika/parser/pdf/PDFParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parser-modules/tika-parser-multimedia-module/src/main/java/org/apache/tika/parser/pdf/AbstractPDF2XHTML.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15524149" author="hudson" created="Mon, 26 Sep 2016 20:58:04 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1111 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1111/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1111/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2098&quot; title=&quot;Tika.parseToString() with maxLength doesn&amp;#39;t work correctly for PDF files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2098&quot;&gt;&lt;del&gt;TIKA-2098&lt;/del&gt;&lt;/a&gt; small clean up.  Test for writelimitreached for each catchable (tallison: rev 9b497d1fef2fe183b2099f1a835113dade8a0227)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDF2XHTML.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/pdf/AbstractPDF2XHTML.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15626388" author="hudson" created="Tue, 1 Nov 2016 19:14:49 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1131 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1131/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1131/&lt;/a&gt;)&lt;br/&gt;
improve test for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2098&quot; title=&quot;Tika.parseToString() with maxLength doesn&amp;#39;t work correctly for PDF files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2098&quot;&gt;&lt;del&gt;TIKA-2098&lt;/del&gt;&lt;/a&gt; (tallison: rev 2df68c84b043f3158c0bdfa63d1a0c8d44d7e18a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/pdf/PDFParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15626453" author="hudson" created="Tue, 1 Nov 2016 19:38:03 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build tika-2.x #169 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x/169/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x/169/&lt;/a&gt;)&lt;br/&gt;
improve unit test for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2098&quot; title=&quot;Tika.parseToString() with maxLength doesn&amp;#39;t work correctly for PDF files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2098&quot;&gt;&lt;del&gt;TIKA-2098&lt;/del&gt;&lt;/a&gt; (tallison: rev 6ca74bec6a1d448bbe3340d51dc84ca8ca58507a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parser-modules/tika-parser-multimedia-module/src/test/java/org/apache/tika/parser/pdf/PDFParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15642937" author="hudson" created="Mon, 7 Nov 2016 03:05:47 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build tika-2.x-windows #69 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/69/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/69/&lt;/a&gt;)&lt;br/&gt;
improve unit test for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2098&quot; title=&quot;Tika.parseToString() with maxLength doesn&amp;#39;t work correctly for PDF files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2098&quot;&gt;&lt;del&gt;TIKA-2098&lt;/del&gt;&lt;/a&gt; (tallison: rev 6ca74bec6a1d448bbe3340d51dc84ca8ca58507a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parser-modules/tika-parser-multimedia-module/src/test/java/org/apache/tika/parser/pdf/PDFParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="13016959">TIKA-2151</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i343g7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>