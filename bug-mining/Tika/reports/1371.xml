<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:04:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-4204] ChmExtractor unable to decompress file</title>
                <link>https://issues.apache.org/jira/browse/TIKA-4204</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;ChmExtractor fails with error: &quot;TikaException: can&apos;t copy beyond array length&quot; when calling extractChmEntry on any non-empty entry.&#160;&lt;/p&gt;

&lt;p&gt;Upon inspection this turns out to be caused by lzxBlockOffset being incorrectly set.&lt;/p&gt;

&lt;p&gt;This is caused by the method ChmExtractor#getIndexOfContent returing the wrong entry.&lt;/p&gt;

&lt;p&gt;This is because ChmCommons#indexOf(List, String) returns the first entry with a name containing the string &quot;Content&quot;. The file I am trying to parse contains a file with the name Content.css, which is the entry returned by #indexOf(...), instead of the actual content entry.&lt;/p&gt;

&lt;p&gt;To fix the issue, ChmCommons#indexOf(...) should be more strict in how it detects the content entry.&lt;/p&gt;

&lt;p&gt;According to: &lt;a href=&quot;http://www.russotto.net/chm/chmformat.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.russotto.net/chm/chmformat.html&lt;/a&gt;, the name of the content entry will always start with &quot;::DataSpace/Storage/&quot;, which could be used to restrict it to find the correct entry.&lt;/p&gt;</description>
                <environment>&lt;p&gt;The file I am trying to parse is attached, the file being found as the content file is &quot;/CSS/ABBContent.css&quot;&lt;/p&gt;</environment>
        <key id="13570062">TIKA-4204</key>
            <summary>ChmExtractor unable to decompress file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="bossymr">Robert Fromholz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Feb 2024 19:02:26 +0000</created>
                <updated>Wed, 28 Feb 2024 17:02:00 +0000</updated>
                            <resolved>Wed, 28 Feb 2024 16:47:46 +0000</resolved>
                                    <version>2.9.1</version>
                    <version>3.0.0-BETA</version>
                                    <fixVersion>2.9.2</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17821697" author="tallison@mitre.org" created="Wed, 28 Feb 2024 14:43:17 +0000"  >&lt;p&gt;Ugh. I accidentally pushed to main instead of a dev branch. Sorry.&lt;/p&gt;</comment>
                            <comment id="17821698" author="tallison@mitre.org" created="Wed, 28 Feb 2024 14:43:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bossymr&quot; class=&quot;user-hover&quot; rel=&quot;bossymr&quot;&gt;bossymr&lt;/a&gt; thank you for opening this issue, thoroughly diagnosing the problem and sharing a triggering file!&lt;/p&gt;</comment>
                            <comment id="17821735" author="tallison@mitre.org" created="Wed, 28 Feb 2024 16:02:37 +0000"  >&lt;p&gt;I just cherry-picked the fix(es) back to &lt;tt&gt;branch_2x&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17821772" author="hudson" created="Wed, 28 Feb 2024 17:02:00 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk11 #1533 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk11/1533/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk11/1533/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-4204&quot; title=&quot;ChmExtractor unable to decompress file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-4204&quot;&gt;&lt;del&gt;TIKA-4204&lt;/del&gt;&lt;/a&gt; &amp;#8211; improve lookup of dataspace/storage items (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/eefe884c81a2a94c212e5ed9aa5bbb659e653782&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/eefe884c81a2a94c212e5ed9aa5bbb659e653782&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-microsoft-module/src/main/java/org/apache/tika/parser/microsoft/chm/ChmCommons.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-microsoft-module/src/main/java/org/apache/tika/parser/microsoft/chm/ChmExtractor.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-microsoft-module/src/test/java/org/apache/tika/parser/microsoft/chm/TestChmLzxState.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-microsoft-module/src/main/java/org/apache/tika/parser/microsoft/chm/ChmPmgiHeader.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-4204&quot; title=&quot;ChmExtractor unable to decompress file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-4204&quot;&gt;&lt;del&gt;TIKA-4204&lt;/del&gt;&lt;/a&gt; &amp;#8211; improve lookup of dataspace/storage items &amp;#8211; fix checkstyle (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/1c1018950c88454ee9a91456931f9d18dde13124&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/1c1018950c88454ee9a91456931f9d18dde13124&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-microsoft-module/src/main/java/org/apache/tika/parser/microsoft/chm/ChmExtractor.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-microsoft-module/src/test/java/org/apache/tika/parser/microsoft/chm/TestChmLzxState.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="13067087" name="3HAC050917_TRM_RAPID_RW_6-en.chm" size="6268813" author="bossymr" created="Tue, 27 Feb 2024 19:03:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1nno8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>