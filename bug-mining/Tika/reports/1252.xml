<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:03:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3591] The Import-Package of commons.io is wrong in MANIFEST.MF</title>
                <link>https://issues.apache.org/jira/browse/TIKA-3591</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;The tika-bundle-standard bundle get version 1.4 of commons.io which leads to NoSuchMethodException in some Parsers/Detectors since they require later versions of commons.io.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13412010">TIKA-3591</key>
            <summary>The Import-Package of commons.io is wrong in MANIFEST.MF</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="psoreide">Per Kristian S&#246;reide</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Nov 2021 10:41:54 +0000</created>
                <updated>Thu, 18 Nov 2021 16:35:12 +0000</updated>
                                            <version>2.1.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17444498" author="psoreide" created="Tue, 16 Nov 2021 11:49:52 +0000"  >&lt;p&gt;The dependency is on commons.io 2.11, so I don&apos;t know why the manifest gets 1.4. This happens in the parser modules as well, e.g. tika-parser-pdf-module.&lt;/p&gt;</comment>
                            <comment id="17444581" author="tallison@mitre.org" created="Tue, 16 Nov 2021 14:39:22 +0000"  >&lt;p&gt;Whoa.  Thank you for catching this.&lt;/p&gt;

&lt;p&gt;I see this in tika-core, too:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.commons.io;version=&quot;[1.4,2)&quot;,org.apache.commons.io.
 input;version=&quot;[1.4,2)&quot;,org.apache.commons.io.output;version=&quot;[1.4,2)&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17444591" author="tallison@mitre.org" created="Tue, 16 Nov 2021 14:52:29 +0000"  >&lt;p&gt;It looks like commons-io-2.11.0.jar is bundled inside tika-bundle-standard-2.1.0.jar.  So, the manifest is forcing the import of 1.4?&lt;/p&gt;

&lt;p&gt;Can you share a bit more about how you&apos;re importing Tika...share a minimal project?&lt;/p&gt;</comment>
                            <comment id="17445068" author="psoreide" created="Wed, 17 Nov 2021 10:39:10 +0000"  >&lt;p&gt;I run Tika in a rather old OSGi-runtime. The runtime have some preinstalled bundles that I have no control over. One of these bundles are org.apache.felix.webconsole-4.3.4.all which happens to export commons.io-1.4. So in that case the Tika bundle will import the existing exported packages in the runtime.&lt;/p&gt;</comment>
                            <comment id="17445190" author="tallison@mitre.org" created="Wed, 17 Nov 2021 14:07:05 +0000"  >&lt;p&gt;Ah, got it.  That makes sense.  Thank you.  Apologies for my failure of imagination!&lt;/p&gt;</comment>
                            <comment id="17445408" author="tallison@mitre.org" created="Wed, 17 Nov 2021 17:46:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bobpaulin&quot; class=&quot;user-hover&quot; rel=&quot;bobpaulin&quot;&gt;bobpaulin&lt;/a&gt;, have you seen this before?  tika-core doesn&apos;t even compile with commons.io-1.4...why is the bundle allowing it?  Any recs on fixing this?&lt;/p&gt;

&lt;p&gt;Interesting:&lt;br/&gt;
&lt;a href=&quot;https://bnd.discourse.group/t/why-is-commons-io-2-6-exports-2-versions-of-same-package-1-4-and-2-6/94&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bnd.discourse.group/t/why-is-commons-io-2-6-exports-2-versions-of-same-package-1-4-and-2-6/94&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17445466" author="tallison@mitre.org" created="Wed, 17 Nov 2021 19:56:02 +0000"  >&lt;p&gt;I tried to override commons-io&apos;s export: &lt;a href=&quot;https://github.com/apache/tika/commit/f750410ce5ec206acca156a71de6b32396a78416&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/f750410ce5ec206acca156a71de6b32396a78416&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=psoreide&quot; class=&quot;user-hover&quot; rel=&quot;psoreide&quot;&gt;psoreide&lt;/a&gt;, are you able to test with a nightly build to see if this fixes your issues?  Our unit tests work, but I&apos;m a bit concerned that we are no longer importing commons-io in tika-bundle-standard, and I don&apos;t know why.&lt;/p&gt;</comment>
                            <comment id="17445471" author="bob" created="Wed, 17 Nov 2021 20:07:09 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison&quot; class=&quot;user-hover&quot; rel=&quot;tallison&quot;&gt;tallison&lt;/a&gt; .&#160; The commons-io library is what&apos;s saying hey you can use 1.4 if you&apos;d like &#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&#160; So even though you&apos;re saying use 2.11.0 commons-io is going to export those packages with the 1.4 version.&#160; So I don&apos;t think it&apos;s wrong that tika-core imports 1.4 in this case since that&apos;s what commons-io is telling it to do.&#160; I think the trouble is with the tika-bundle-standard.&#160; If the commons-io classes are embedded in the bundle it should NOT need to import it as it is instructed to do &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&#160; I&apos;d suggest removing that line rather than explicitly setting the versions.&#160; Having the jar embedded AND importing those packages can lead to unpredictable results based on the runtime.&#160; &lt;/p&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://github.com/apache/commons-io/blob/884e5ecee572856804a2303e0bb53ab15f1a7543/pom.xml#L320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/blob/884e5ecee572856804a2303e0bb53ab15f1a7543/pom.xml#L320&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/tika/blob/f750410ce5ec206acca156a71de6b32396a78416/tika-bundles/tika-bundle-standard/pom.xml#L222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/blob/f750410ce5ec206acca156a71de6b32396a78416/tika-bundles/tika-bundle-standard/pom.xml#L222&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17445472" author="tallison@mitre.org" created="Wed, 17 Nov 2021 20:14:29 +0000"  >&lt;p&gt;Thank you so much &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bob&quot; class=&quot;user-hover&quot; rel=&quot;bob&quot;&gt;bob&lt;/a&gt;!  I removed the import from tika-bundle-standard.  &lt;/p&gt;

&lt;p&gt;Should I leave in my hack in tika-core or revert that to what it was?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So I don&apos;t think it&apos;s wrong that tika-core imports 1.4 in this case since that&apos;s what commons-io is telling it to do&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree that&apos;s what commons-io is telling tika-core to do, but tika-core won&apos;t compile with 1.4... for kicks, I switched the commons-io dependency to 1.4 and it was a disaster.  If we revert the bundle import in tika-core to let nature take its course, will it all just work?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Having the jar embedded AND importing those packages can lead to unpredictable results based on the runtime.  &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Whoa... thank you. We should probably open a ticket to prune the imports list...&lt;/p&gt;

</comment>
                            <comment id="17445474" author="bob" created="Wed, 17 Nov 2021 20:29:16 +0000"  >&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I agree that&apos;s what commons-io is telling tika-core to do, but tika-core won&apos;t compile with 1.4... for kicks, I switched the commons-io dependency to 1.4 and it was a disaster. If we revert the bundle import in tika-core to let nature take its course, will it all just work?@Mention someone by typing their name...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The 1.4 is set at the package level so it&apos;s NOT trying to say that tika can be compiled with 1.4 JAR (as there are other packages).&#160; So given commons-io jar is only exporting the org.apache.commons.io package at version 1.4.999 if you exclude packages that are &amp;lt; 2.0 you may not get tika-core to resolve properly by itself in an osgi runtime.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17445477" author="tallison@mitre.org" created="Wed, 17 Nov 2021 20:34:54 +0000"  >&lt;p&gt;Got it.  Thank you!&lt;/p&gt;</comment>
                            <comment id="17445479" author="bob" created="Wed, 17 Nov 2021 20:36:21 +0000"  >&lt;p&gt;Actually take that back it looks like commons-io is exporting at BOTH versions so maybe ok to keep your requirement.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Export-Package: org.apache.commons.io;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.4.9999&quot;&lt;/span&gt;,

...
org.apache.commons.io
&#160;;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;2.10.0&quot;&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17445497" author="hudson" created="Wed, 17 Nov 2021 21:32:28 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #361 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/361/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/361/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3591&quot; title=&quot;The Import-Package of commons.io is wrong in MANIFEST.MF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3591&quot;&gt;TIKA-3591&lt;/a&gt; &amp;#8211; override commons-io bundle export versions (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/f750410ce5ec206acca156a71de6b32396a78416&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/f750410ce5ec206acca156a71de6b32396a78416&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-bundles/tika-bundle-standard/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-core/pom.xml&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3591&quot; title=&quot;The Import-Package of commons.io is wrong in MANIFEST.MF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3591&quot;&gt;TIKA-3591&lt;/a&gt; &amp;#8211; override commons-io bundle export versions; rm commons.io following Bob&apos;s recommendation (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/560dc1d33bc6f790fa4f632d0f090cc5fb2da60d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/560dc1d33bc6f790fa4f632d0f090cc5fb2da60d&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;(edit) tika-bundles/tika-bundle-standard/pom.xml&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3591&quot; title=&quot;The Import-Package of commons.io is wrong in MANIFEST.MF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3591&quot;&gt;TIKA-3591&lt;/a&gt; &amp;#8211; revert override of commons-io bundle export versions (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/be8a1218bd9f5b24b247194b90e7186cebe221e5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/be8a1218bd9f5b24b247194b90e7186cebe221e5&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;(edit) tika-core/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17446035" author="hudson" created="Thu, 18 Nov 2021 16:35:12 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #362 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/362/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/362/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3591&quot; title=&quot;The Import-Package of commons.io is wrong in MANIFEST.MF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3591&quot;&gt;TIKA-3591&lt;/a&gt; &amp;#8211; revert revert override of commons-io bundle export versions (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/fabadd31728013c6d90c72502a2e7a427d642ae0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/fabadd31728013c6d90c72502a2e7a427d642ae0&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0wrx4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>