<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:03:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3634] Failed to Parser Apple related files</title>
                <link>https://issues.apache.org/jira/browse/TIKA-3634</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Unable to parse &apos;.Number&apos;, &apos;.key&apos;, &apos;.pages&apos; file using below class in xml file(org.apache.tika.parser.apple.AppleSingleFileParser)&lt;/p&gt;

&lt;p&gt;Getting unkown mimetype : application/vnd.apple.unknown.13&lt;/p&gt;

&lt;p&gt;Using all these modules :&lt;/p&gt;

&lt;p&gt;tika-core,tika-parsers-standard-package,tika-parser-microsoft-module,tika-parser-sqlite3-package,tika-parser-scientific-module,tika-parser-zip-commons,tika-parser-apple-module&lt;/p&gt;</description>
                <environment></environment>
        <key id="13419533">TIKA-3634</key>
            <summary>Failed to Parser Apple related files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="Vamsi452">Tika User</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Dec 2021 10:28:05 +0000</created>
                <updated>Thu, 13 Jan 2022 15:27:44 +0000</updated>
                                            <version>2.2.1</version>
                                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17465675" author="vamsi452" created="Mon, 27 Dec 2021 10:30:39 +0000"  >&lt;p&gt;.&lt;/p&gt;</comment>
                            <comment id="17465677" author="tilman" created="Mon, 27 Dec 2021 10:34:20 +0000"  >&lt;p&gt;Please don&apos;t ping people unless needed, we watch the dev list for new issues and some dev will or will not work on your issue if possible.&lt;/p&gt;

&lt;p&gt;Please attach a file that fails.&lt;/p&gt;</comment>
                            <comment id="17465723" author="tilman" created="Mon, 27 Dec 2021 11:35:16 +0000"  >&lt;p&gt;Thanks for uploading the files. Please don&apos;t set the &quot;fix&quot; version, this is the future version where a Tika dev expects it to be fixed or has been fixed. It is not the version where it worked. (Is 1.27 the last version where it worked? If yes, then this is very valuable information)&lt;/p&gt;</comment>
                            <comment id="17465835" author="tilman" created="Mon, 27 Dec 2021 18:30:54 +0000"  >&lt;p&gt;I have no idea, at this time no dev has picked up the problem. You submitted this 8 hours ago. This is a volunteer project, and it&apos;s winter holiday season.&lt;/p&gt;</comment>
                            <comment id="17466053" author="vamsi452" created="Tue, 28 Dec 2021 10:06:24 +0000"  >&lt;p&gt;Fyi. This is working fine in 2.0.0 version. Able to get correct file type but text is unavailable as iWork is not implemented(seen this comment in one of the incident).&lt;/p&gt;</comment>
                            <comment id="17466098" author="tilman" created="Tue, 28 Dec 2021 12:14:49 +0000"  >&lt;p&gt;I ran tika-app, only the &lt;tt&gt;keynotecreated.key&lt;/tt&gt; file is detected differently in 2.0.0 (as &lt;tt&gt;application/vnd.apple.keynote.13&lt;/tt&gt;). This is related to a small change in &lt;tt&gt;IWork13PackageParser.java&lt;/tt&gt; done in &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3517&quot; title=&quot;Text extraction doesn&amp;#39;t work for Pages and Numbers when Tesseract is disabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3517&quot;&gt;TIKA-3517&lt;/a&gt;. There is a TODO there which I haven&apos;t understood. Maybe related to the format / contents of &lt;tt&gt;Document.iwa&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17466374" author="vamsi452" created="Wed, 29 Dec 2021 09:28:56 +0000"  >&lt;p&gt;For 2.0.0 version the .key files mime type is correct but failing to extract attachments. But for 2.2.1 all the attachments are extracted but mime type is showing as unknown (application/vnd.apple.unknown.13)&lt;/p&gt;</comment>
                            <comment id="17472053" author="tallison@mitre.org" created="Mon, 10 Jan 2022 14:22:04 +0000"  >&lt;p&gt;Thank you for submitting the bug and sharing triggering files.&lt;/p&gt;

&lt;p&gt;A couple of items unrelated to the problem:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;AppleSingleFileParser does not handle iworks files.&#160; That is for a completely unrelated file format: &lt;a href=&quot;https://en.wikipedia.org/wiki/AppleSingle_and_AppleDouble_formats&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/AppleSingle_and_AppleDouble_formats&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;You shouldn&apos;t need to add: tika-parser-zip-commons,tika-parser-apple-module.&#160; These should be included in tika-parsers-standard-package.&#160; If they&apos;re not, that&apos;s a serious problem.&#160; Please open a different ticket.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I regret I&apos;m still not clear on what we need to fix.&lt;/p&gt;

&lt;p&gt;With Tika 1.28, I get &lt;tt&gt;application/vnd.apple.unknown.13&lt;/tt&gt; for the *.numbers file and *.pages file; I get &lt;tt&gt;application/vnd.apple.keynote.13&lt;/tt&gt; for the .key file.&#160; No attachments or text are extracted from any of those.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;With Tika 2.2.1, I get &lt;tt&gt;application/vnd.apple.unknown.13&lt;/tt&gt; all three (*.pages, *.key , *.numbers files), but then the packageparser parses all embedded files that Tika supports.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;What is the desired behavior?&lt;/p&gt;

&lt;p&gt;As you&apos;ve pointed out, we don&apos;t have a parser for these formats, and it would be non-trivial. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;My guess is that you want the same detection as 1.28, but with the parsing of all component files?&#160; We could probably fall back to the file name for the distinction btwn pages and numbers.&lt;/p&gt;</comment>
                            <comment id="17472189" author="tallison@mitre.org" created="Mon, 10 Jan 2022 17:54:55 +0000"  >&lt;p&gt;I pushed a fix that takes into account the file names for disambiguation between numbers and pages if the user sends in the file name.&#160; I&apos;ve also added better parsing for the thumbnail image file, and I now have the iworkspackage parser handle metadata plist files and any file that doesn&apos;t end in .iwa (for iworks 13 files).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Not sure if/when we should add in the iworks18 parser that does minimal detection for those files.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Note that none of the above actually extracts content from the iworks13 and iworks 18 files.&#160; We still do not have a parser for those files.&#160; We also still have no way of disambiguating numbers and pages without file names (e.g. if the user sends in only a stream without a file name). &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17472195" author="vamsi452" created="Mon, 10 Jan 2022 18:02:41 +0000"  >&lt;p&gt;The fix should be available in next release? For now I handled in our code based on tika extension I am setting mime type. Also thanks for letting me know about zip module , I will have a look on that. Also can you let me know apache.pdf tool is included in core right? Is there a way to downgrade not using latest version&#160;&lt;/p&gt;</comment>
                            <comment id="17472237" author="hudson" created="Mon, 10 Jan 2022 19:02:46 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #412 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/412/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/412/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3634&quot; title=&quot;Failed to Parser Apple related files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3634&quot;&gt;TIKA-3634&lt;/a&gt; &amp;#8211; improve detection of iworks 13 files and extraction of thumbnails and attachments (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/7e4edfce6722cbf0be0deab9b9e3f23073406dd4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/7e4edfce6722cbf0be0deab9b9e3f23073406dd4&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-apple-module/src/test/java/org/apache/tika/parser/iwork/iwana/IWork13ParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-apple-module/src/main/java/org/apache/tika/parser/iwork/iwana/IWork13PackageParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17472243" author="tallison@mitre.org" created="Mon, 10 Jan 2022 19:14:26 +0000"  >&lt;p&gt;pdfbox is not in core; it is brought in via tika-parsers-standard-package.&#160; You&apos;d have to build your own tika-parsers-standard-package to downgrade PDFBox.&#160; If there&apos;s a regression, you should open a ticket with PDFBox, obviously.&#160; What breaks for you with the latest PDFBox?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Yes, this will be out with the next release.&#160; I have no idea when that will be.&lt;/p&gt;</comment>
                            <comment id="17475393" author="hudson" created="Thu, 13 Jan 2022 14:18:36 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #415 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/415/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/415/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3634&quot; title=&quot;Failed to Parser Apple related files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3634&quot;&gt;TIKA-3634&lt;/a&gt; &amp;#8211; improve detection of iworks 13 files and extraction of thumbnails and attachments (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/0a8da94c5fc49e706a77245da323088115cc22c9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/0a8da94c5fc49e706a77245da323088115cc22c9&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-pdf-module/src/main/java/org/apache/tika/parser/pdf/PDFParserConfig.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17475454" author="tallison@mitre.org" created="Thu, 13 Jan 2022 15:27:44 +0000"  >&lt;p&gt;That was a bad commit message.&#160; Mea culpa.&#160; That was for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3642&quot; title=&quot;Getting java.lang.OutOfMemoryError: Java heap space when parsing PDF file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3642&quot;&gt;&lt;del&gt;TIKA-3642&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13037968" name="brochure.pages" size="1443557" author="Vamsi452" created="Mon, 27 Dec 2021 17:50:28 +0000"/>
                            <attachment id="13037970" name="keynotecreated.key" size="776951" author="Vamsi452" created="Mon, 27 Dec 2021 17:50:46 +0000"/>
                            <attachment id="13037969" name="mortgagecalculator.numbers" size="238619" author="Vamsi452" created="Mon, 27 Dec 2021 17:50:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0y1so:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>