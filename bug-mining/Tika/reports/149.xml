<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:55:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-478] HtmlParser can emit &lt;head&gt; elements inside of &lt;body&gt; block</title>
                <link>https://issues.apache.org/jira/browse/TIKA-478</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;The change to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-379&quot; title=&quot;Html elements and attributes not available in XHTML representation &quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-379&quot;&gt;&lt;del&gt;TIKA-379&lt;/del&gt;&lt;/a&gt; causes a premature generation of HTML &amp;lt;head&amp;gt; element and nested &amp;lt;title&amp;gt; by the XHTMLContentHandler being used by HtmlHandler.&lt;/p&gt;

&lt;p&gt;This then creates issues for any downstream content handler, as they can then get an empty &amp;lt;title&amp;gt; element, and &amp;lt;meta&amp;gt; elements inside of the &amp;lt;body&amp;gt; element (which is invalid).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12471430">TIKA-478</key>
            <summary>HtmlParser can emit &lt;head&gt; elements inside of &lt;body&gt; block</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkrugler">Kenneth William Krugler</assignee>
                                    <reporter username="kkrugler">Kenneth William Krugler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Aug 2010 15:33:31 +0000</created>
                <updated>Thu, 12 Aug 2010 22:55:02 +0000</updated>
                            <resolved>Thu, 12 Aug 2010 21:45:58 +0000</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.8</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12897811" author="jukkaz" created="Thu, 12 Aug 2010 16:10:23 +0000"  >&lt;p&gt;Oh, I see now where this problem with &amp;lt;meta/&amp;gt; elements is coming from.&lt;/p&gt;

&lt;p&gt;One reasonably clean way to solve this would be to disable the output of &amp;lt;meta/&amp;gt; elements from HtmlHandler while keeping the code that sets the respective Metadata entries. Then in XHTMLContentHandler we&apos;d modify the lazyStartDocument() method to output not just the &amp;lt;title/&amp;gt; element but the full set of collected metadata as &amp;lt;meta/&amp;gt; elements. We could also set the lang attribute (or xml:lang?) of the &amp;lt;html/&amp;gt; element if the respective Metadata entry is set.&lt;/p&gt;

&lt;p&gt;The nice thing about this solution would be that the inclusion of metadata in &amp;lt;head/&amp;gt; would work also for other document types beyond HTML.&lt;/p&gt;</comment>
                            <comment id="12897954" author="kkrugler" created="Thu, 12 Aug 2010 21:32:39 +0000"  >&lt;p&gt;Emitting metadata entries inside of the &amp;lt;head&amp;gt; element works for &amp;lt;meta&amp;gt; elements, of course, but not for &amp;lt;link&amp;gt; or &amp;lt;base&amp;gt;. Though it does improve output for non-HTML parsers, so it feels like the right way to at least handle &amp;lt;meta&amp;gt;.&lt;/p&gt;

</comment>
                            <comment id="12897956" author="kkrugler" created="Thu, 12 Aug 2010 21:35:30 +0000"  >&lt;p&gt;I ran into a test case failing when I applied my fix - looks like the epub parser calls XHTMLContentHandler with &amp;lt;head&amp;gt; elements, among others. This triggered the premature emitting of &amp;lt;title&amp;gt;. In order to guard against similar problems with other parsers, I modified XHTMLContentHandler to try to ignore startElement() calls with elements that would be auto-generated.&lt;/p&gt;</comment>
                            <comment id="12897957" author="kkrugler" created="Thu, 12 Aug 2010 21:45:58 +0000"  >&lt;p&gt;SVN 984997.&lt;/p&gt;

&lt;p&gt;Normally I&apos;d let a patch like this bake for a while, but it&apos;s blocking some work that needs to use Tika trunk for other fixes, so I&apos;ve pushed it out sooner than usual. Happy to revert if a review uncovers any issues.&lt;/p&gt;</comment>
                            <comment id="12897990" author="kkrugler" created="Thu, 12 Aug 2010 22:55:02 +0000"  >&lt;p&gt;Additional fix for problem with missing closing &amp;lt;/body&amp;gt; and &amp;lt;/html&amp;gt; tags.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12456401">TIKA-379</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12451967" name="TIKA-478-2.patch" size="1316" author="kkrugler" created="Thu, 12 Aug 2010 22:55:02 +0000"/>
                            <attachment id="12451953" name="TIKA-478.patch" size="12372" author="kkrugler" created="Thu, 12 Aug 2010 21:35:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4383</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0390f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16893</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>