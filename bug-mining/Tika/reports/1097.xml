<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:02:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2903] RereadableInputStream does not close storeOutputStream in all casses in, temporary files remain locked</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2903</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;The TikaParser leaves a lot of temporary files with the name&#160;TIKA_streamstore_*.temp in the temp folder. Many of them are locked and may be deleted only after restart of the&#160;by the java process.&lt;/p&gt;

&lt;p&gt;The files are created by the&#160;&lt;b&gt;org.apache.tika.utils.RereadableInputStream&lt;/b&gt;, which obviously does not close the &lt;font color=&quot;#FF0000&quot;&gt;storeOutputStream&lt;/font&gt; in all casses. Actually, it is closed only by the method&#160;rewind(), but it should be also closed by calling the overall&lt;font color=&quot;#FF0000&quot;&gt; close()&lt;/font&gt; method of the whole InputStream.&lt;/p&gt;

&lt;p&gt;A simple patch is provided.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13244028">TIKA-2903</key>
            <summary>RereadableInputStream does not close storeOutputStream in all casses in, temporary files remain locked</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fassev@gmx.de">Peter Fassev</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 10 Jul 2019 07:07:45 +0000</created>
                <updated>Wed, 10 Jul 2019 15:18:10 +0000</updated>
                            <resolved>Wed, 10 Jul 2019 13:59:09 +0000</resolved>
                                    <version>1.21</version>
                                    <fixVersion>1.22</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16881984" author="hudson" created="Wed, 10 Jul 2019 12:07:21 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1673 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1673/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1673/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2903&quot; title=&quot;RereadableInputStream does not close storeOutputStream in all casses in, temporary files remain locked&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2903&quot;&gt;&lt;del&gt;TIKA-2903&lt;/del&gt;&lt;/a&gt; &amp;#8211; close RereadableStream&apos;s storeOutputStream via Peter Fassev (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/ce693ed2acf5f70c6e8d919229be96456bf0ce9e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/ce693ed2acf5f70c6e8d919229be96456bf0ce9e&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/utils/RereadableInputStream.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16881989" author="hudson" created="Wed, 10 Jul 2019 12:16:44 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build tika-2.x-windows #428 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/428/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/428/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2903&quot; title=&quot;RereadableInputStream does not close storeOutputStream in all casses in, temporary files remain locked&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2903&quot;&gt;&lt;del&gt;TIKA-2903&lt;/del&gt;&lt;/a&gt; &amp;#8211; close RereadableStream&apos;s storeOutputStream via Peter Fassev (tallison: rev ce693ed2acf5f70c6e8d919229be96456bf0ce9e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/utils/RereadableInputStream.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16882086" author="tallison@mitre.org" created="Wed, 10 Jul 2019 13:59:09 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fassev%40gmx.de&quot; class=&quot;user-hover&quot; rel=&quot;fassev@gmx.de&quot;&gt;fassev@gmx.de&lt;/a&gt;!!!  1.22 should be out in a few weeks...&lt;/p&gt;</comment>
                            <comment id="16882181" author="hudson" created="Wed, 10 Jul 2019 15:18:10 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #206 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/206/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/206/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2903&quot; title=&quot;RereadableInputStream does not close storeOutputStream in all casses in, temporary files remain locked&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2903&quot;&gt;&lt;del&gt;TIKA-2903&lt;/del&gt;&lt;/a&gt; &amp;#8211; close RereadableStream&apos;s storeOutputStream via Peter Fassev (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/f6d4cd855ef8c875826cc0eb334383a9f74a21ac&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/f6d4cd855ef8c875826cc0eb334383a9f74a21ac&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/utils/RereadableInputStream.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12974143" name="RereadableInputStream.patch" size="438" author="fassev@gmx.de" created="Wed, 10 Jul 2019 07:02:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04iog:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>