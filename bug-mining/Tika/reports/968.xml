<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:01:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2510] Embedded MP3 file in PPTX document no longer identified</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2510</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I&apos;m attaching a sample PPTX file with an embedded MP3 file along with JSON files produced by Tika App (versions 1.14 and 1.15).&lt;br/&gt;
Notice that the 1.14 output identifies the embedded MP3 file while the 1.15 version does not.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13121007">TIKA-2510</key>
            <summary>Embedded MP3 file in PPTX document no longer identified</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="esaunders">Eamonn Saunders</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Nov 2017 16:41:50 +0000</created>
                <updated>Tue, 28 Nov 2017 15:26:09 +0000</updated>
                            <resolved>Tue, 28 Nov 2017 14:23:10 +0000</resolved>
                                    <version>1.15</version>
                                    <fixVersion>1.17</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16267149" author="tallison@mitre.org" created="Mon, 27 Nov 2017 18:03:55 +0000"  >&lt;p&gt;I need to go back to 1.14 to figure out why this worked then.  Quick code review turns up nothing, but debugger should solve it. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=esaunders&quot; class=&quot;user-hover&quot; rel=&quot;esaunders&quot;&gt;esaunders&lt;/a&gt;, thank you for opening this and supplying a triggering document.&lt;/p&gt;</comment>
                            <comment id="16267255" author="hudson" created="Mon, 27 Nov 2017 18:56:25 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1397 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1397/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1397/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2510&quot; title=&quot;Embedded MP3 file in PPTX document no longer identified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2510&quot;&gt;&lt;del&gt;TIKA-2510&lt;/del&gt;&lt;/a&gt; &amp;#8211; Extract media files from ooxml (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/d4fd659ac5c3070104a85df4a535afe570b08a0e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/d4fd659ac5c3070104a85df4a535afe570b08a0e&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/microsoft/ooxml/SXSLFExtractorTest.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/src/test/resources/test-documents/testPPT_embeddedMP3.pptx&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/microsoft/ooxml/OOXMLParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16268793" author="tallison@mitre.org" created="Tue, 28 Nov 2017 14:17:00 +0000"  >&lt;p&gt;Figured out diff btwn 1.14 and 1.16. We added the set &lt;tt&gt;seen&lt;/tt&gt; so that we only processed a media item once.  In 1.16, &lt;/p&gt;

&lt;p&gt;1. the first relationship to the mp3 file was type &lt;tt&gt;&lt;a href=&quot;http://schemas.microsoft.com/office/2007/relationships/media&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://schemas.microsoft.com/office/2007/relationships/media&lt;/a&gt;&lt;/tt&gt;&lt;br/&gt;
2. we added the mp3 to &lt;tt&gt;seen&lt;/tt&gt;&lt;br/&gt;
3. we then didn&apos;t process it because we didn&apos;t recognize that relationship&lt;br/&gt;
4. the second relationship to the mp3 file was type &lt;tt&gt;&lt;a href=&quot;http://schemas.openxmlformats.org/officeDocument/2006/relationships/audio&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://schemas.openxmlformats.org/officeDocument/2006/relationships/audio&lt;/a&gt;&lt;/tt&gt;&lt;br/&gt;
5. In 1.14, we processed this, but in 1.16, because we had added that media item to &lt;tt&gt;seen&lt;/tt&gt; (without processing it!), we skipped it.&lt;/p&gt;

&lt;p&gt;The correct fix is to add embedded media items to &lt;tt&gt;seen&lt;/tt&gt; only after they are processed.&lt;/p&gt;</comment>
                            <comment id="16268803" author="tallison@mitre.org" created="Tue, 28 Nov 2017 14:23:10 +0000"  >&lt;p&gt;I suspect I didn&apos;t pick this up in our regression tests because the diff in number of attachments after adding the &lt;tt&gt;seen&lt;/tt&gt; set would have been huge.  I should have looked for files that went from 1-&amp;gt;0.&lt;/p&gt;</comment>
                            <comment id="16268912" author="hudson" created="Tue, 28 Nov 2017 15:26:09 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1401 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1401/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1401/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2510&quot; title=&quot;Embedded MP3 file in PPTX document no longer identified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2510&quot;&gt;&lt;del&gt;TIKA-2510&lt;/del&gt;&lt;/a&gt;, correct fix. Only add to seen/handledTarget &lt;em&gt;after&lt;/em&gt; (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/a047fa945c033666723cd0f18c536c1d56cac436&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/a047fa945c033666723cd0f18c536c1d56cac436&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12899444" name="Windows Audio File.pptx" size="250878" author="esaunders" created="Mon, 27 Nov 2017 16:42:26 +0000"/>
                            <attachment id="12899442" name="tika-1.14-output.json" size="5708" author="esaunders" created="Mon, 27 Nov 2017 16:42:26 +0000"/>
                            <attachment id="12899443" name="tika-1.15-output.json" size="4518" author="esaunders" created="Mon, 27 Nov 2017 16:42:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3n8d3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>