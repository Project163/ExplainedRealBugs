<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:02:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2992]  java.lang.UnsupportedOperationException: This feature requires ASM7 in Tika 1.21</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2992</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;We are using Tika java library to parse a bunch of documents (various formats). We are seeing the exception below regularly in our logs on certain documents. Any suggestions on how to fix would be really useful. On initial investigation it looks like its a bug with mismatched ASM between XHTMLClassVisitor and tika-parsers pom.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Failed to parse the document. org.apache.tika.exception.TikaException: Failed to parse a Java class&lt;br/&gt;
at org.apache.tika.parser.asm.XHTMLClassVisitor.parse (XHTMLClassVisitor.java:66)&lt;br/&gt;
at org.apache.tika.parser.asm.ClassParser.parse (ClassParser.java:51)&lt;br/&gt;
at org.apache.tika.parser.CompositeParser.parse (CompositeParser.java:280)&lt;br/&gt;
at org.apache.tika.parser.CompositeParser.parse (CompositeParser.java:280)&lt;br/&gt;
at org.apache.tika.parser.AutoDetectParser.parse (AutoDetectParser.java:143)&lt;br/&gt;
at com.askscio.beam.docbuilder.processor.parsers.GenericParser.parse (GenericParser.java:55)&lt;/p&gt;

&lt;p&gt;&amp;lt;snipped&amp;gt;&lt;br/&gt;
Caused by: java.lang.UnsupportedOperationException: This feature requires ASM7&lt;br/&gt;
at org.objectweb.asm.ClassVisitor.visitNestMember (ClassVisitor.java:236)&lt;br/&gt;
at org.objectweb.asm.ClassReader.accept (ClassReader.java:660)&lt;br/&gt;
at org.objectweb.asm.ClassReader.accept (ClassReader.java:400)&lt;br/&gt;
at org.apache.tika.parser.asm.XHTMLClassVisitor.parse (XHTMLClassVisitor.java:61)}}&lt;/p&gt;</description>
                <environment></environment>
        <key id="13269433">TIKA-2992</key>
            <summary> java.lang.UnsupportedOperationException: This feature requires ASM7 in Tika 1.21</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="arvindscio">Arvind Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Nov 2019 22:32:26 +0000</created>
                <updated>Wed, 4 Dec 2019 07:29:25 +0000</updated>
                            <resolved>Tue, 3 Dec 2019 18:10:59 +0000</resolved>
                                    <version>1.21</version>
                                    <fixVersion>1.24</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16978265" author="gagravarr" created="Wed, 20 Nov 2019 09:46:17 +0000"  >&lt;p&gt;Most likely you have an older version of ASM on your classpath which is being used instead of the one that comes via Tika Parsers&lt;/p&gt;

&lt;p&gt;Can you check, and remove the older one if so? Apache POI has sample code snippet to see where it came from at &lt;a href=&quot;http://poi.apache.org/help/faq.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://poi.apache.org/help/faq.html&lt;/a&gt; - you could do the same for an ASM class to check for that if you&apos;re struggling to hunt down the jar&lt;/p&gt;</comment>
                            <comment id="16986630" author="arvindscio" created="Tue, 3 Dec 2019 05:50:15 +0000"  >&lt;p&gt;Thanks for the reply &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nick&quot; class=&quot;user-hover&quot; rel=&quot;nick&quot;&gt;nick&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Tried what you suggested, looks like we only have ASM 7.1 in our classpath because tika-parsers 1.21 requires that.&lt;/p&gt;

&lt;p&gt;I debugged a bit more and looks like an issue with&#160;&lt;a href=&quot;https://github.com/apache/tika/blob/master/tika-parsers/src/main/java/org/apache/tika/parser/asm/XHTMLClassVisitor.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/blob/master/tika-parsers/src/main/java/org/apache/tika/parser/asm/XHTMLClassVisitor.java&lt;/a&gt;. This class is initialized with OpCode ASM5.&lt;/p&gt;

&lt;p&gt;The exception is happening here:&#160;&lt;a href=&quot;https://github.com/consulo/objectweb-asm/blob/master/asm/src/main/java/org/objectweb/asm/ClassVisitor.java#L150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/consulo/objectweb-asm/blob/master/asm/src/main/java/org/objectweb/asm/ClassVisitor.java#L150,&lt;/a&gt;&#160;so somewhere feature of ASM7 is being used &#8211; which is not unexpected since tika-parsers depends on ASM 7.1.&lt;/p&gt;

&lt;p&gt;Does this make sense or am I missing something ?&lt;/p&gt;

&lt;p&gt;Arvind&lt;/p&gt;</comment>
                            <comment id="16986866" author="tallison@mitre.org" created="Tue, 3 Dec 2019 12:48:51 +0000"  >&lt;p&gt;&lt;del&gt;Any chance you can share a triggering file?&lt;/del&gt;&lt;/p&gt;</comment>
                            <comment id="16987069" author="tallison@mitre.org" created="Tue, 3 Dec 2019 16:44:16 +0000"  >&lt;p&gt;I can reproduce this on our own code if I set the target to Java 11.&lt;/p&gt;</comment>
                            <comment id="16987074" author="tallison@mitre.org" created="Tue, 3 Dec 2019 16:47:16 +0000"  >&lt;p&gt;If I change the line that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arvindscio&quot; class=&quot;user-hover&quot; rel=&quot;arvindscio&quot;&gt;arvindscio&lt;/a&gt; pointed to to:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        super(Opcodes.ASM7);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have no problems with Java 8 or Java 11.&lt;/p&gt;</comment>
                            <comment id="16987139" author="tallison@mitre.org" created="Tue, 3 Dec 2019 18:10:59 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arvindscio&quot; class=&quot;user-hover&quot; rel=&quot;arvindscio&quot;&gt;arvindscio&lt;/a&gt; for raising this.  It looks like the trigger is an inner class with target Java version &amp;gt; 8.&lt;/p&gt;</comment>
                            <comment id="16987187" author="hudson" created="Tue, 3 Dec 2019 18:57:56 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build Tika-trunk #1758 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1758/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1758/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2992&quot; title=&quot; java.lang.UnsupportedOperationException: This feature requires ASM7 in Tika 1.21&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2992&quot;&gt;&lt;del&gt;TIKA-2992&lt;/del&gt;&lt;/a&gt; &amp;#8211; ensure opcode matches asm version in XHTMLClassVisitor (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/970651a1b59189354a26c4c970741147ec266fe0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/970651a1b59189354a26c4c970741147ec266fe0&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(add) tika-parsers/src/test/resources/test-documents/AppleSingleFileParser.class&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/asm/XHTMLClassVisitor.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/asm/ClassParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16987190" author="hudson" created="Tue, 3 Dec 2019 19:00:25 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build tika-branch-1x #292 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/292/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/292/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2992&quot; title=&quot; java.lang.UnsupportedOperationException: This feature requires ASM7 in Tika 1.21&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2992&quot;&gt;&lt;del&gt;TIKA-2992&lt;/del&gt;&lt;/a&gt; &amp;#8211; ensure opcode matches asm version in XHTMLClassVisitor (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/887b27a5ca2f1c98c2c5ae8422b96aa0f39fdb75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/887b27a5ca2f1c98c2c5ae8422b96aa0f39fdb75&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(add) tika-parsers/src/test/resources/test-documents/AppleSingleFileParser.class&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/asm/XHTMLClassVisitor.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/asm/ClassParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16987261" author="tallison@mitre.org" created="Tue, 3 Dec 2019 21:05:06 +0000"  >&lt;p&gt;I&apos;ve excluded &lt;tt&gt;test-documents/*.class&lt;/tt&gt; from the &lt;tt&gt;forbidden-apis&lt;/tt&gt; check, and the build in Jenkins seems to be passing.&#160; I wasn&apos;t able to replicate this locally.&lt;/p&gt;</comment>
                            <comment id="16987271" author="hudson" created="Tue, 3 Dec 2019 21:18:20 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1759 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1759/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1759/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2992&quot; title=&quot; java.lang.UnsupportedOperationException: This feature requires ASM7 in Tika 1.21&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2992&quot;&gt;&lt;del&gt;TIKA-2992&lt;/del&gt;&lt;/a&gt; &amp;#8211; try to unbreak build by ignoring *.class files in (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/7bdce26c4175fa9245dfc830e1d38f142918d1d1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/7bdce26c4175fa9245dfc830e1d38f142918d1d1&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parent/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16987471" author="hudson" created="Wed, 4 Dec 2019 03:06:08 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #293 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/293/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/293/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2992&quot; title=&quot; java.lang.UnsupportedOperationException: This feature requires ASM7 in Tika 1.21&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2992&quot;&gt;&lt;del&gt;TIKA-2992&lt;/del&gt;&lt;/a&gt; &amp;#8211; try to unbreak build by ignoring *.class files in (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/9a1ad3cdde1844fc1384cec66497d98260744bb8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/9a1ad3cdde1844fc1384cec66497d98260744bb8&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parent/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16987612" author="arvindscio" created="Wed, 4 Dec 2019 07:29:25 +0000"  >&lt;p&gt;Thanks for the fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison&quot; class=&quot;user-hover&quot; rel=&quot;tallison&quot;&gt;tallison&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z08syg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>