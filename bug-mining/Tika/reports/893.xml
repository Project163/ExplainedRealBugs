<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:00:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2290] PDFParser &apos;ocr&apos; properties cannot be set via headers when using Tika JAXRS</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2290</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I have created a stackoverflow question on this topic &lt;a href=&quot;http://stackoverflow.com/questions/42602834/x-tika-pdfocrstrategy-is-an-invalid-x-tika-ocr-header-error&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here &lt;/a&gt;, but I&apos;ll reiterate the main issue. &lt;/p&gt;

&lt;p&gt;I am trying to use TikaJAXRS and add headers for setting PDFParser properties. Specifically the ocrStrategy property. However, when I add the header using X-Tika-PDFocrStrategy, I get an error stating that it is an invalid X-Tika-OCR header.&lt;/p&gt;

&lt;p&gt;After looking into the source code, I believe the issue might be with the &apos;fillParseContext&apos; method in the TikaResource.java file.&lt;/p&gt;

&lt;p&gt;The if statement first looks for a key that starts with the OCR header prefix, and since the PDFParser&apos;s property name contains &apos;ocr&apos;, it is trying to find a property named &apos;ocrStrategy&apos; in the OCRParser class, which doesn&apos;t exist.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13048671">TIKA-2290</key>
            <summary>PDFParser &apos;ocr&apos; properties cannot be set via headers when using Tika JAXRS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="koberlag">Kevin Oberlag</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Mar 2017 22:12:45 +0000</created>
                <updated>Mon, 12 Apr 2021 13:01:29 +0000</updated>
                            <resolved>Wed, 8 Mar 2017 02:38:28 +0000</resolved>
                                    <version>1.13</version>
                    <version>1.14</version>
                                    <fixVersion>1.15</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>ocr</component>
                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15900593" author="tallison@mitre.org" created="Wed, 8 Mar 2017 02:38:28 +0000"  >&lt;p&gt;Thank you for opening this.  The problem was that reflection tries to set fields directly and only processes String, int, double, boolean, but not the OCR_Strategy enum.  As a last ditch effort, we now try to call the setterX() on a String.&lt;/p&gt;

&lt;p&gt;Let us know what else you find.&lt;/p&gt;</comment>
                            <comment id="15900601" author="koberlag" created="Wed, 8 Mar 2017 02:45:40 +0000"  >&lt;p&gt;Thanks for getting to it so quickly!&lt;/p&gt;

</comment>
                            <comment id="16036087" author="koberlag" created="Sat, 3 Jun 2017 20:31:02 +0000"  >&lt;p&gt;Tim, I am still having issues with this after the Tika 1.15 release. &lt;/p&gt;

&lt;p&gt;The error is &quot;javax.ws.rs.WebApplicationException: X-Tika-ocrStrategy is an invalid X-Tika-OCR header&quot; &lt;/p&gt;

&lt;p&gt;I am using curl with the following:&lt;br/&gt;
 --header &quot;X-Tika-ocrStrategy: ocr_only&quot;&lt;/p&gt;

&lt;p&gt;Do you know what I may be doing wrong?&lt;/p&gt;</comment>
                            <comment id="16037356" author="tallison@mitre.org" created="Mon, 5 Jun 2017 18:37:31 +0000"  >&lt;p&gt;Sorry for my delay. &lt;/p&gt;

&lt;p&gt;This works for me:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl -T testOCR.pdf http://localhost:9998/tika --header &quot;Accept: text/plain&quot; --header &quot;X-Tika-PDFOcrStrategy: ocr_only&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16037530" author="koberlag" created="Mon, 5 Jun 2017 20:27:43 +0000"  >&lt;p&gt;Oops, I was leaving off &quot;PDF&quot; in X-Tika-PDFocrStrategy. It is working for me now.&lt;/p&gt;

&lt;p&gt;Thank you for your feedback!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3b0sf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>