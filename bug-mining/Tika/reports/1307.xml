<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:04:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3839] Property com.ctc.wstx.maxEntityCount is not supported</title>
                <link>https://issues.apache.org/jira/browse/TIKA-3839</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;First of all, this might not even be a bug, just a slight annoyance.&lt;/p&gt;

&lt;p&gt;Whenever I try to parse the attached PDF, I get the following error:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[main] WARN org.apache.tika.utils.XMLReaderUtils - SAX Security Manager could not be setup [log suppressed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 5 minutes]
java.lang.IllegalArgumentException: Property com.ctc.wstx.maxEntityCount is not supported
&#160; &#160; at java.xml/com.sun.xml.internal.stream.XMLInputFactoryImpl.setProperty(XMLInputFactoryImpl.java:246)
&#160; &#160; at org.apache.tika.utils.XMLReaderUtils.trySetStaxSecurityManager(XMLReaderUtils.java:732)
&#160; &#160; at org.apache.tika.utils.XMLReaderUtils.getXMLInputFactory(XMLReaderUtils.java:303)
&#160; &#160; at org.apache.tika.parser.ParseContext.getXMLInputFactory(ParseContext.java:229)
&#160; &#160; at org.apache.tika.parser.pdf.XFAExtractor.extract(XFAExtractor.java:90)
&#160; &#160; at org.apache.tika.parser.pdf.AbstractPDF2XHTML.extractAcroForm(AbstractPDF2XHTML.java:863)
&#160; &#160; at org.apache.tika.parser.pdf.AbstractPDF2XHTML.endDocument(AbstractPDF2XHTML.java:772)
&#160; &#160; at org.apache.pdfbox.text.PDFTextStripper.writeText(PDFTextStripper.java:270)
&#160; &#160; at org.apache.tika.parser.pdf.PDF2XHTML.process(PDF2XHTML.java:97)
&#160; &#160; at org.apache.tika.parser.pdf.PDFParser.parse(PDFParser.java:170) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;After a couple of hours of Googling, I realized that there is an XML parser implementation called woodstox. If I include that dependency on the classpath, this exception is no longer present, because it understands the &lt;em&gt;com.ctc.wstx.maxEntityCount&lt;/em&gt; property.&lt;/p&gt;

&lt;p&gt;As far as I see, the 1.28.4 version of tika-parsers included this library as a compile-time dependency, however, 2.0.0+ doesn&apos;t. I&apos;m not sure why this is the case, but there must be a good reason for it.&lt;/p&gt;

&lt;p&gt;However, I think it would be a good idea to change the exception&apos;s message from:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SAX Security Manager could not be setup [log suppressed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 5 minutes] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to something more meaningful.&lt;/p&gt;

&lt;p&gt;Something that mentions woodstox would be good (especially if the only property that Tika tries to set is woodstox specific). Also, spamming/printing the message every 5 minutes is pointless in my opinion. If woodstox is not on the classpath, it will fail anyways (and also it is not synchronized so if you parsing a lot of documents at the same time in parallel, it still can print it more than once).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13477316">TIKA-3839</key>
            <summary>Property com.ctc.wstx.maxEntityCount is not supported</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Laxika">Lakatos Gyula</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2022 23:25:33 +0000</created>
                <updated>Wed, 14 Sep 2022 18:26:45 +0000</updated>
                            <resolved>Mon, 29 Aug 2022 17:18:32 +0000</resolved>
                                    <version>2.4.1</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17581329" author="tallison@mitre.org" created="Thu, 18 Aug 2022 12:35:14 +0000"  >&lt;p&gt;Y. Agreed.  Thank you.  Will fix before the next release, estimated first week of September.&lt;/p&gt;</comment>
                            <comment id="17597315" author="tallison@mitre.org" created="Mon, 29 Aug 2022 17:17:53 +0000"  >&lt;p&gt;I&apos;ve modified XMLReaderUtils to try the default java max entity expansions.  If that fails, try woodstox and then if that fails, log a warning that max entity expansions can&apos;t be set on the stax parser.  This logging should only happen once.&lt;/p&gt;</comment>
                            <comment id="17597316" author="tallison@mitre.org" created="Mon, 29 Aug 2022 17:18:25 +0000"  >&lt;p&gt;We should open another issue to make this fix more general for dom and sax parsers as well.&lt;/p&gt;</comment>
                            <comment id="17597383" author="hudson" created="Mon, 29 Aug 2022 20:01:48 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #764 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/764/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/764/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3839&quot; title=&quot;Property com.ctc.wstx.maxEntityCount is not supported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3839&quot;&gt;&lt;del&gt;TIKA-3839&lt;/del&gt;&lt;/a&gt; &amp;#8211; improve robustness and logging for limiting max entity expansions in the stax parser (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/451b632daca526713984df9f8ccb3cb2b1f783db&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/451b632daca526713984df9f8ccb3cb2b1f783db&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/utils/XMLReaderUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="13048256" name="8a4b2154-b6c1-4e0e-b8be-8ce4e68c454f.pdf" size="354323" author="Laxika" created="Wed, 17 Aug 2022 22:55:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z17uc0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>