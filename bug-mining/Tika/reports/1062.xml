<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:02:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2780] Intermittent failures in batch mode when STDIN = /tmp/null </title>
                <link>https://issues.apache.org/jira/browse/TIKA-2780</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;We found this strange behavior in the&#160;R wrapper for&#160;tika:&lt;/p&gt;

&lt;p&gt;We call rtika in batch mode using the -fileList parameter. However if in the java tika process STDIN is set to /dev/null with read permission (O_RDONLY) as is&#160;usually the default then, then tika will randomly fail occasionally with this error:&lt;/p&gt;

&lt;p&gt;{{&#160;&#160;BatchProcess:ParallelFileProcessingResult&lt;/p&gt;
{considered=7, added=7, consumed=2, numberHandledExceptions=0, secondsElapsed=1.539, exitStatus=0, causeForTermination=&apos;USER_INTERRUPTION&apos;}
&lt;p&gt;}}&lt;/p&gt;

&lt;p&gt;As a workaround we now set STDIN to something that is unreadable and then everything works, but this is really strange behavior.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13197585">TIKA-2780</key>
            <summary>Intermittent failures in batch mode when STDIN = /tmp/null </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="jeroenooms">Jeroen</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Nov 2018 14:09:49 +0000</created>
                <updated>Tue, 13 Nov 2018 22:36:10 +0000</updated>
                            <resolved>Tue, 13 Nov 2018 19:20:20 +0000</resolved>
                                    <version>1.19.1</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.20</fixVersion>
                                    <component>batch</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16682617" author="tallison@mitre.org" created="Sat, 10 Nov 2018 21:53:07 +0000"  >&lt;p&gt;IIUC, that was initially a feature... that a user could stop the batch by typing something w a \n into the parent&#8217;s stdin. Should we turn that off and rely on killing parent and child w ctrl-c?&lt;/p&gt;</comment>
                            <comment id="16682639" author="jeroenooms" created="Sat, 10 Nov 2018 22:37:03 +0000"  >&lt;p&gt;The strange thing is that `/dev/null` does not have any content, it always returns 0 bytes when trying to read.&#160; So it is unclear why tika&#160;thinks there is&#160;something happening in&#160;stdin.&lt;/p&gt;</comment>
                            <comment id="16682666" author="tallison@mitre.org" created="Sat, 10 Nov 2018 23:48:54 +0000"  >&lt;p&gt;Y...that&#8217;s what was puzzling me...&lt;/p&gt;</comment>
                            <comment id="16685068" author="jeroenooms" created="Tue, 13 Nov 2018 11:38:19 +0000"  >&lt;p&gt;But yes I think this is an unexpected feature. The usual way to&#160;interrupt is indeed with a SIGINT which should work just fine on all platforms.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16685630" author="tallison@mitre.org" created="Tue, 13 Nov 2018 19:20:20 +0000"  >&lt;p&gt;tika-app in batch mode now requires a signal interrupt or kill.  The child process will try to stop itself gracefully if the parent process is killed...this was supposed to happen before, but relied on a shutdown hook which is unreliable.  The child now initiates its shutdown if something happens to stdin from the parent process.&lt;/p&gt;</comment>
                            <comment id="16685678" author="hudson" created="Tue, 13 Nov 2018 20:04:11 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1592 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1592/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1592/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2780&quot; title=&quot;Intermittent failures in batch mode when STDIN = /tmp/null &quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2780&quot;&gt;&lt;del&gt;TIKA-2780&lt;/del&gt;&lt;/a&gt; &amp;#8211; the shutdown method for tika-batch mode should not be (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/dfe737c94bb71fe415fb6fa4fae505a73bd2e654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/dfe737c94bb71fe415fb6fa4fae505a73bd2e654&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/builders/InterrupterBuilder.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/builders/BatchProcessBuilder.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/BatchProcessDriverCLI.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/BatchProcess.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/Interrupter.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/InterrupterFutureResult.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16685692" author="hudson" created="Tue, 13 Nov 2018 20:11:02 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #126 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/126/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/126/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2780&quot; title=&quot;Intermittent failures in batch mode when STDIN = /tmp/null &quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2780&quot;&gt;&lt;del&gt;TIKA-2780&lt;/del&gt;&lt;/a&gt; &amp;#8211; the shutdown method for tika-batch mode should not be (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/fe4f41ba2e51f5044e372c4cee9cbd769470e92f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/fe4f41ba2e51f5044e372c4cee9cbd769470e92f&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/InterrupterFutureResult.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/builders/BatchProcessBuilder.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/BatchProcessDriverCLI.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/builders/InterrupterBuilder.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/BatchProcess.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/Interrupter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16685721" author="hudson" created="Tue, 13 Nov 2018 20:40:26 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build tika-2.x-windows #347 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/347/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/347/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2780&quot; title=&quot;Intermittent failures in batch mode when STDIN = /tmp/null &quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2780&quot;&gt;&lt;del&gt;TIKA-2780&lt;/del&gt;&lt;/a&gt; &amp;#8211; the shutdown method for tika-batch mode should not be (tallison: rev dfe737c94bb71fe415fb6fa4fae505a73bd2e654)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/builders/BatchProcessBuilder.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/BatchProcess.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/BatchProcessDriverCLI.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/builders/InterrupterBuilder.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/Interrupter.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-batch/src/main/java/org/apache/tika/batch/InterrupterFutureResult.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16685805" author="hudson" created="Tue, 13 Nov 2018 22:02:42 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1593 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1593/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1593/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2780&quot; title=&quot;Intermittent failures in batch mode when STDIN = /tmp/null &quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2780&quot;&gt;&lt;del&gt;TIKA-2780&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix changes.txt (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/760eba3eeb3e4240a282d069a8a2f357295edf86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/760eba3eeb3e4240a282d069a8a2f357295edf86&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16685822" author="hudson" created="Tue, 13 Nov 2018 22:10:18 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #127 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/127/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/127/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2780&quot; title=&quot;Intermittent failures in batch mode when STDIN = /tmp/null &quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2780&quot;&gt;&lt;del&gt;TIKA-2780&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix changes.txt (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/9fd50edd70e31fd1d2dd271bd22204e64c8ce063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/9fd50edd70e31fd1d2dd271bd22204e64c8ce063&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16685844" author="hudson" created="Tue, 13 Nov 2018 22:36:10 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build tika-2.x-windows #348 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/348/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/348/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2780&quot; title=&quot;Intermittent failures in batch mode when STDIN = /tmp/null &quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2780&quot;&gt;&lt;del&gt;TIKA-2780&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix changes.txt (tallison: rev 760eba3eeb3e4240a282d069a8a2f357295edf86)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00cs8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>