<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:03:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2961] Tika &#22312;&#35782;&#21035;&#20197;caff&#24320;&#22987;&#30340;txt&#25991;&#26723;&#26102;&#20250;&#25226;&#23427;&#38169;&#35823;&#22320;&#35782;&#21035;&#20026;audio/x-caf &#38899;&#39057;&#31867;&#22411;</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2961</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;public String getFileType(File file) {&lt;br/&gt;
 String fileType = &quot;&quot;;&lt;br/&gt;
 try &lt;/p&gt;
{
 Tika tika = new Tika();
 fileType = tika.detect(file);
 }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
 e.printStackTrace();
 }
&lt;p&gt; return fileType;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;&#20197;&#19978;&#20195;&#30721;&#22312;&#35782;&#21035;&#20197;caff&#24320;&#22836;&#30340;txt&#25991;&#26723;&#26102;&#65292;&#20250;&#38169;&#35823;&#22320;&#35782;&#21035;&#20026; audio/x-caf &#38899;&#39057;&#31867;&#22411;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13261754">TIKA-2961</key>
            <summary>Tika &#22312;&#35782;&#21035;&#20197;caff&#24320;&#22987;&#30340;txt&#25991;&#26723;&#26102;&#20250;&#25226;&#23427;&#38169;&#35823;&#22320;&#35782;&#21035;&#20026;audio/x-caf &#38899;&#39057;&#31867;&#22411;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Mr_Jiang">Feng Jiao Jiang</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Fri, 11 Oct 2019 09:55:26 +0000</created>
                <updated>Thu, 2 Dec 2021 11:52:26 +0000</updated>
                            <resolved>Thu, 2 Dec 2021 11:52:26 +0000</resolved>
                                    <version>1.20</version>
                                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16949540" author="tilman" created="Fri, 11 Oct 2019 15:18:01 +0000"  >&lt;p&gt;&quot;When identifying a txt document starting with caff, it will be mistakenly recognized as an audio/x-caf audio type.&quot;&lt;/p&gt;</comment>
                            <comment id="16949862" author="mr_jiang" created="Sat, 12 Oct 2019 01:35:23 +0000"  >&lt;p&gt;&#26159;&#30340;&#65292;&#24403;&#26102;&#25105;&#21644;&#25105;&#30340;&#21516;&#20107;&#20351;&#29992;&#31243;&#24207;&#38543;&#26426;&#29983;&#25104;&#20102;&#19968;&#20123;txt&#25991;&#26723;&#23545;tika&#36827;&#34892;&#27979;&#35797;&#65292;&#21457;&#29616;&#37096;&#20998;txt&#20250;&#34987;&#38169;&#35823;&#22320;&#35782;&#21035;&#20026;&#38899;&#39057;&#25991;&#20214;&#65292;&#21487;&#33021;&#19981;&#21482;&#20197;caff&#24320;&#22836;&#30340;&#65292;&#36824;&#26377;&#37096;&#20998;&#27979;&#35797;&#36164;&#26009;&#25214;&#19981;&#21040;&#20102;&lt;/p&gt;</comment>
                            <comment id="17109509" author="spadezhang" created="Sun, 17 May 2020 14:45:07 +0000"  >&lt;p&gt;audio/x-caf type detection only matches the string&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;mime-type type=&lt;span class=&quot;code-quote&quot;&gt;&quot;audio/x-caf&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;_comment&amp;gt;&lt;/span&gt;Core Audio Format&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/_comment&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;_comment&amp;gt;&lt;/span&gt;com.apple.coreaudio-format&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/_comment&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;magic priority=&lt;span class=&quot;code-quote&quot;&gt;&quot;60&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;match value=&lt;span class=&quot;code-quote&quot;&gt;&quot;caff&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; offset=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/magic&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;glob pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;*.caf&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/mime-type&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I used xxd to read several cafe files, and their file headers are consistent&lt;br/&gt;
test file from:&lt;a href=&quot;https://filesamples.com/formats/caf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://filesamples.com/formats/caf&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#955; xxd -l 100 sample1.caf
00000000: 6361 6666 0001 0000 6465 7363 0000 0000  caff....desc....
00000010: 0000 0020 40e5 8880 0000 0000 6c70 636d  ... @.......lpcm
00000020: 0000 0000 0000 0004 0000 0001 0000 0002  ................
00000030: 0000 0010 6672 6565 0000 0000 0000 0fb0  ....free........
00000040: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000050: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000060: 0000 0000                                ....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;i think we need to change modify tika-mimetypes.xml&lt;/p&gt;</comment>
                            <comment id="17109825" author="gagravarr" created="Mon, 18 May 2020 04:20:07 +0000"  >&lt;p&gt;Based on &lt;a href=&quot;https://developer.apple.com/library/archive/documentation/MusicAudio/Reference/CAFSpec/CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-SW3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developer.apple.com/library/archive/documentation/MusicAudio/Reference/CAFSpec/CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-SW3&lt;/a&gt; it looks like the file starts with 4 bytes &lt;tt&gt;caff&lt;/tt&gt; then a 16 bit version integer then a 16 bit flags integer. Currently, only v1 LE is a defined version&lt;/p&gt;

&lt;p&gt;Based on that, in&#160;&lt;tt&gt;0bf11aec8&lt;/tt&gt; I&apos;ve changed the mime magic to look for &lt;tt&gt;caff&lt;/tt&gt; then v0, v1 or v2 in LE or BE forms. That ought to catch any current of likely-future CAF file, but hopefully avoid false positives from text files&lt;/p&gt;</comment>
                            <comment id="17109878" author="hudson" created="Mon, 18 May 2020 05:07:47 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1814 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1814/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1814/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2961&quot; title=&quot;Tika &#22312;&#35782;&#21035;&#20197;caff&#24320;&#22987;&#30340;txt&#25991;&#26723;&#26102;&#20250;&#25226;&#23427;&#38169;&#35823;&#22320;&#35782;&#21035;&#20026;audio/x-caf &#38899;&#39057;&#31867;&#22411;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2961&quot;&gt;&lt;del&gt;TIKA-2961&lt;/del&gt;&lt;/a&gt; Make the CAF mime magic more specific to avoid false (nick: &lt;a href=&quot;https://github.com/apache/tika/commit/0bf11aec86079b8f1ae2f1ea680910ba79665c4f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/0bf11aec86079b8f1ae2f1ea680910ba79665c4f&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17123915" author="hudson" created="Tue, 2 Jun 2020 15:12:54 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #339 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/339/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/339/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2961&quot; title=&quot;Tika &#22312;&#35782;&#21035;&#20197;caff&#24320;&#22987;&#30340;txt&#25991;&#26723;&#26102;&#20250;&#25226;&#23427;&#38169;&#35823;&#22320;&#35782;&#21035;&#20026;audio/x-caf &#38899;&#39057;&#31867;&#22411;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2961&quot;&gt;&lt;del&gt;TIKA-2961&lt;/del&gt;&lt;/a&gt; Make the CAF mime magic more specific to avoid false (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/7a141d136578af5ce8cc5dd73e097566d7cbe1aa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/7a141d136578af5ce8cc5dd73e097566d7cbe1aa&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12982765" name="1.txt" size="69" author="Mr_Jiang" created="Fri, 11 Oct 2019 09:54:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07i1k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>