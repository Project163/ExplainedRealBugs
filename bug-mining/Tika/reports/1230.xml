<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:03:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3510] tika-parser-scientific-module seems to embbed many dependencies</title>
                <link>https://issues.apache.org/jira/browse/TIKA-3510</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;tika-parser-scientific-module 2.0.0 contains many files from other artifacts:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;joda-time&lt;/li&gt;
	&lt;li&gt;slf4j&lt;/li&gt;
	&lt;li&gt;commons-io&lt;/li&gt;
	&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Is that really expected ?&lt;/p&gt;

&lt;p&gt;tika-parser-sqlite3-module seems to be affected too&lt;/p&gt;</description>
                <environment></environment>
        <key id="13393024">TIKA-3510</key>
            <summary>tika-parser-scientific-module seems to embbed many dependencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tmortagne">Thomas Mortagne</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Aug 2021 08:45:41 +0000</created>
                <updated>Wed, 18 Aug 2021 20:24:59 +0000</updated>
                            <resolved>Tue, 17 Aug 2021 13:26:03 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.1.0</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17391798" author="tallison@mitre.org" created="Mon, 2 Aug 2021 21:01:10 +0000"  >&lt;p&gt;Thank you for raising this. The sqlite parser is fixed now; as part of a fairly large dependency cleanup I did after 2.0.0 was out.&lt;/p&gt;

&lt;p&gt; Netcdf4 uses jodatime. I don&#8217;t know that dependency well enough to figure out what we can safely exclude.&lt;/p&gt;

&lt;p&gt;Do you have any recs?&lt;/p&gt;</comment>
                            <comment id="17391799" author="tallison@mitre.org" created="Mon, 2 Aug 2021 21:02:13 +0000"  >&lt;p&gt;Sorry&#8230; slf4j and commons io are no longer incorrectly bundled w the scientific parser jar.&lt;/p&gt;</comment>
                            <comment id="17392027" author="tmortagne" created="Tue, 3 Aug 2021 06:40:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&#8217;t know that dependency well enough to figure out what we can safely exclude.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well, I don&apos;t see any reason to exclude it if it&apos;s used, but I don&apos;t understand why it&apos;s not just a regular dependency and it&apos;s embedded.&lt;/p&gt;</comment>
                            <comment id="17392300" author="tallison@mitre.org" created="Tue, 3 Aug 2021 13:33:42 +0000"  >&lt;p&gt;The goal was to make it possible for users to drop the sqlite3 jar and/or the scientific-module jar on their path with the tika-parsers-standard-package or tika-app/tika-server and have everything just work.&lt;/p&gt;

&lt;p&gt;If there&apos;s a better way to accomplish this, let me know.&lt;/p&gt;

&lt;p&gt;One thing we could do is what we do in tika-parsers-standard and have a module &lt;em&gt;and&lt;/em&gt; package project for the scientific-module and the sqlite3 module.  We&apos;d include the dependencies in the jar in *_package but not in *_module.&lt;/p&gt;

&lt;p&gt;Would this be of any use?  Or can you recommend a better fix?&lt;/p&gt;</comment>
                            <comment id="17392352" author="tmortagne" created="Tue, 3 Aug 2021 15:01:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;The goal was to make it possible for users to drop the sqlite3 jar and/or the scientific-module jar on their path with the tika-parsers-standard-package or tika-app/tika-server and have everything just work.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, but it also makes it pretty much unusable in a project built with Maven which uses Tika as library among other things which have common dependencies but in different versions.&lt;/p&gt;

&lt;p&gt;Even for the &quot;drop the jar&quot; use case you described, it can create quite a mess if the environment where you drop it have conflicting dependencies (but I supposed what you have in mind is only a very specific Tika server environment) but you could improve that by shading those dependencies (rewrite the packages in them) instead of just including them as is.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;One thing we could do is what we do in tika-parsers-standard and have a module and package project for the scientific-module and the sqlite3 module. We&apos;d include the dependencies in the jar in *_package but not in *_module.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s not super clear to me what tika-parsers-standard exactly is but in my experience this kind of need is generally covered by providing 2 different artifacts:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-parser-scientific-module with regular Maven dependencies (so not included)&lt;/li&gt;
	&lt;li&gt;tika-parser-scientific-module-standalone (or something like this) with everything in it&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17393228" author="tallison@mitre.org" created="Wed, 4 Aug 2021 14:39:03 +0000"  >&lt;p&gt;Y, that was my proposal.&lt;/p&gt;

&lt;p&gt;Fellow devs, are we willing to make breaking changes in 2.0.1?  This is closer to what we did in tika-parsers-standard:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;tika-parser-scientific-module -- just the Tika code, no bundled dependencies
tika-parser-scientific-package -- bundled dependencies

tika-parser-sqlite3-module
tika-parser-sqlite3-package 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or something less breaking but unpleasant &amp;#8211;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;tika-parser-scientific-core -- just the Tika code, no bundled dependencies
tika-parser-scientific-module -- bundled dependencies

tika-parser-sqlite3-core
tika-parser-sqlite3-package 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="17394139" author="kkrugler" created="Thu, 5 Aug 2021 15:52:13 +0000"  >&lt;p&gt;I&apos;d vote for option #1. The word &lt;tt&gt;core&lt;/tt&gt; feels like it&apos;s more about scope, versus packaging. Though &lt;tt&gt;module&lt;/tt&gt; is pretty generic too. &lt;/p&gt;

&lt;p&gt;Can&apos;t help bikeshedding it here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I say &lt;tt&gt;tika-parser-scientific&lt;/tt&gt; for the &quot;regular&quot; jar, and &lt;tt&gt;tika-parser-scientific-uber&lt;/tt&gt; for the uber jar with all dependencies.&lt;/p&gt;</comment>
                            <comment id="17397488" author="hudson" created="Wed, 11 Aug 2021 17:02:46 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #305 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/305/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/305/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3510&quot; title=&quot;tika-parser-scientific-module seems to embbed many dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3510&quot;&gt;&lt;del&gt;TIKA-3510&lt;/del&gt;&lt;/a&gt; &amp;#8211; separate out modules/packages for tika-parsers-extended (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/509748b336a2ddc368a237d026fefeee57300325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/509748b336a2ddc368a237d026fefeee57300325&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-scientific-module/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/pom.xml&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-extended/tika-parser-sqlite3-package/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-sqlite3-module/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) pom.xml&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17397641" author="tallison@mitre.org" created="Wed, 11 Aug 2021 21:08:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tmortagne&quot; class=&quot;user-hover&quot; rel=&quot;tmortagne&quot;&gt;tmortagne&lt;/a&gt;, please take a look and see if this will meet your needs.  If you can recommend a more elegant solution, I&apos;d appreciate it.  I&apos;m not thrilled with it as is.&lt;/p&gt;

&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkrugler&quot; class=&quot;user-hover&quot; rel=&quot;kkrugler&quot;&gt;kkrugler&lt;/a&gt; for your feedback!  I went with 1/2 of it for now.  Onwards!&lt;/p&gt;</comment>
                            <comment id="17397680" author="hudson" created="Wed, 11 Aug 2021 23:00:43 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #308 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/308/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/308/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3510&quot; title=&quot;tika-parser-scientific-module seems to embbed many dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3510&quot;&gt;&lt;del&gt;TIKA-3510&lt;/del&gt;&lt;/a&gt; &amp;#8211; further fixes (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/a2b21f85817333c4e8396713069e6b389899af82&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/a2b21f85817333c4e8396713069e6b389899af82&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-sqlite3-package/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-sqlite3-module/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-scientific-module/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17399985" author="hudson" created="Mon, 16 Aug 2021 20:16:05 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #309 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/309/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/309/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3510&quot; title=&quot;tika-parser-scientific-module seems to embbed many dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3510&quot;&gt;&lt;del&gt;TIKA-3510&lt;/del&gt;&lt;/a&gt; &amp;#8211; further clean up (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/5985b629df562b15ab39ca8a02332daf9936a383&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/5985b629df562b15ab39ca8a02332daf9936a383&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-scientific-module/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-sqlite3-module/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-sqlite3-package/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17401082" author="tmortagne" created="Wed, 18 Aug 2021 14:07:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;Thomas Mortagne, please take a look and see if this will meet your needs. If you can recommend a more elegant solution, I&apos;d appreciate it. I&apos;m not thrilled with it as is.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry for the late answer (summer, all that). What don&apos;t you like, exactly ? The resulting modules names, or something specific in the way you did it ?&lt;/p&gt;</comment>
                            <comment id="17401087" author="tallison@mitre.org" created="Wed, 18 Aug 2021 14:15:50 +0000"  >&lt;p&gt;No problem.  After the most recent fix, I&apos;m all set.  I had done a bunch of exclusions...but the right answer was to get rid of the shade plugin.&lt;/p&gt;

&lt;p&gt; I think this looks good.  Are you ok with the changes?  We&apos;re about to roll rc2 for 2.1.0.  Thank you!&lt;/p&gt;</comment>
                            <comment id="17401103" author="tmortagne" created="Wed, 18 Aug 2021 14:34:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;Are you ok with the changes?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;tt&gt;tika-parser-scientific-module&lt;/tt&gt; and &lt;tt&gt;tika-parser-sqlite3-module&lt;/tt&gt; poms looks OK to me at least.&lt;/p&gt;

&lt;p&gt;Not necessarily related to this issue, I see in those poms that you have quite a lot of exclusions that feels like cases of &quot;I want a different version of the same groupid:artifactid&quot; that I would have personally resolved using &amp;lt;dependencyManagement&amp;gt; entries in the tika parent pom instead (that way you have only one entry that apply to all dependencies, and you don&apos;t have to worry about it when you add a new dependency).&lt;/p&gt;</comment>
                            <comment id="17401343" author="tallison@mitre.org" created="Wed, 18 Aug 2021 20:24:59 +0000"  >&lt;p&gt;Much better.  Thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0tiyg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>