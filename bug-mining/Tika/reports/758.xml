<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:00:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-1849] RTF Exception</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1849</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;When converting a RTF document with a default new Tika().parseToString(inputStream, new Metadata()) I get an exception:&lt;/p&gt;

&lt;p&gt;org.apache.tika.exception.TikaException: Unexpected RuntimeException from org.apache.tika.parser.rtf.RTFParser@47f4e407&lt;br/&gt;
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:282)&lt;br/&gt;
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)&lt;br/&gt;
    at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:120)&lt;br/&gt;
    at org.apache.tika.Tika.parseToString(Tika.java:496)&lt;br/&gt;
    at com.expertsystem.experiments.tika.tika_test_dtra.App.main(App.java:48)&lt;br/&gt;
Caused by: org.apache.tika.metadata.PropertyTypeException: meta:page-count : SIMPLE&lt;br/&gt;
    at org.apache.tika.metadata.Metadata.add(Metadata.java:337)&lt;br/&gt;
    at org.apache.tika.parser.rtf.TextExtractor.processControlWord(TextExtractor.java:830)&lt;br/&gt;
    at org.apache.tika.parser.rtf.TextExtractor.parseControlWord(TextExtractor.java:562)&lt;br/&gt;
    at org.apache.tika.parser.rtf.TextExtractor.parseControlToken(TextExtractor.java:488)&lt;br/&gt;
    at org.apache.tika.parser.rtf.TextExtractor.extract(TextExtractor.java:450)&lt;br/&gt;
    at org.apache.tika.parser.rtf.TextExtractor.extract(TextExtractor.java:439)&lt;br/&gt;
    at org.apache.tika.parser.rtf.RTFParser.parse(RTFParser.java:86)&lt;br/&gt;
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)&lt;br/&gt;
    ... 4 more&lt;/p&gt;

&lt;p&gt;This doesn&apos;t happen if I don&apos;t pass the metadata parameter.&lt;/p&gt;

&lt;p&gt;As an example:&lt;br/&gt;
&lt;a href=&quot;https://www.google.it/url?sa=t&amp;amp;rct=j&amp;amp;q=&amp;amp;esrc=s&amp;amp;source=web&amp;amp;cd=4&amp;amp;cad=rja&amp;amp;uact=8&amp;amp;ved=0ahUKEwjI0_q87NvKAhWIpA4KHdDKAHkQFggzMAM&amp;amp;url=http%3A%2F%2Fidkf.bogor.net%2Fidkf-wireless%2Faplikasi%2Fhukum%2FLEGAL%2520ASPECTS%2520OF%2520SOFTWARE%2520DEVELOPMENT%2520AGREEMENT.rtf&amp;amp;usg=AFQjCNGiyWmdH7NECJoso189tgDbIN5D9g&amp;amp;sig2=kn8qEb2m_ft35-h5Ni7Vgg&amp;amp;bvm=bv.113034660,d.ZWU&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.google.it/url?sa=t&amp;amp;rct=j&amp;amp;q=&amp;amp;esrc=s&amp;amp;source=web&amp;amp;cd=4&amp;amp;cad=rja&amp;amp;uact=8&amp;amp;ved=0ahUKEwjI0_q87NvKAhWIpA4KHdDKAHkQFggzMAM&amp;amp;url=http%3A%2F%2Fidkf.bogor.net%2Fidkf-wireless%2Faplikasi%2Fhukum%2FLEGAL%2520ASPECTS%2520OF%2520SOFTWARE%2520DEVELOPMENT%2520AGREEMENT.rtf&amp;amp;usg=AFQjCNGiyWmdH7NECJoso189tgDbIN5D9g&amp;amp;sig2=kn8qEb2m_ft35-h5Ni7Vgg&amp;amp;bvm=bv.113034660,d.ZWU&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12936355">TIKA-1849</key>
            <summary>RTF Exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="aasta">Andrea</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2016 14:55:11 +0000</created>
                <updated>Wed, 3 Feb 2016 20:06:05 +0000</updated>
                                            <version>1.11</version>
                                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15130677" author="hudson" created="Wed, 3 Feb 2016 16:56:51 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #905 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/905/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/905/&lt;/a&gt;)&lt;br/&gt;
minimal cleanup while working on &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1849&quot; title=&quot;RTF Exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1849&quot;&gt;TIKA-1849&lt;/a&gt;: turn test back on. (tallison: rev fabeac95b56b0f430593881b705d9c57842f04a5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-parsers/src/test/java/org/apache/tika/parser/rtf/RTFParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15131024" author="hudson" created="Wed, 3 Feb 2016 19:58:26 +0000"  >&lt;p&gt;UNSTABLE: Integrated in tika-2.x #16 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x/16/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x/16/&lt;/a&gt;)&lt;br/&gt;
prep for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1849&quot; title=&quot;RTF Exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1849&quot;&gt;TIKA-1849&lt;/a&gt;, miniscule clean up of RTFParser test (tallison: rev d6ae0a4fe02b6f66b00330983295ba8ab16d1115)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-parser-modules/tika-parser-office-module/src/test/java/org/apache/tika/parser/rtf/RTFParserTest.java&lt;br/&gt;
prep for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1849&quot; title=&quot;RTF Exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1849&quot;&gt;TIKA-1849&lt;/a&gt;, miniscule clean up of RTFParser test...with clean up (tallison: rev 4843ccbf2ead4a0c4a2bf96a127ccc13e94823ba)&lt;/li&gt;
	&lt;li&gt;tika-parser-modules/tika-parser-office-module/src/test/java/org/apache/tika/parser/rtf/RTFParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15131036" author="tallison@mitre.org" created="Wed, 3 Feb 2016 20:05:46 +0000"  >&lt;p&gt;I&apos;m not able to reproduce this in our test suite.  To confirm, this works for you:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        String result = new Tika().parseToString(
                getResourceAsStream(&quot;/test-documents/testRTF_metadataSet.rtf&quot;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but this doesn&apos;t work for you:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        String result = new Tika().parseToString(
                getResourceAsStream(&quot;/test-documents/testRTF_metadataSet.rtf&quot;), new Metadata());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Are you using tika-app.jar?  How are you opening your inputstream?  Are you putting anything in Metadata before sending into parseToString()?&lt;/p&gt;

&lt;p&gt;My initial thought was that the RTF had two &lt;tt&gt;Office.PAGE_COUNT&lt;/tt&gt;, and this would cause this error, but I&apos;m not seeing that when I try to reproduce it.&lt;/p&gt;

&lt;p&gt;I think we should change our code to &lt;tt&gt;set&lt;/tt&gt; vs. &lt;tt&gt;add&lt;/tt&gt;, but I&apos;d like to figure out how we are doubly adding that value in your file.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2scy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>