<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:04:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3812] Parser Order: image get parsed by GDALParser instead of TesseractOCRParser</title>
                <link>https://issues.apache.org/jira/browse/TIKA-3812</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;The selected parser seems to be different in 2.4.1. For example sending an image (jpg/png) that was previously (2.4.0) processed by TesseractOCRParser, now gets parsed by GDALParser.&lt;/p&gt;

&lt;p&gt;Seems that when multiple parsers support same file types, the selected parser depends on the order in which they get loaded.&lt;/p&gt;

&lt;p&gt;For example the GDALParser, ImageParser and TesseractOCRParser all support image/jpeg, image/png, image/gif ...&lt;/p&gt;

&lt;p&gt;A recent change is reversing the parser order (&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3750&quot; title=&quot;Bug in sorting parsers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3750&quot;&gt;&lt;del&gt;TIKA-3750&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Re-configuring the GDALParser by excluding the image mime types might work, but there could be other duplicated parsers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13470206">TIKA-3812</key>
            <summary>Parser Order: image get parsed by GDALParser instead of TesseractOCRParser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ecaruntu">Eugen Caruntu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jul 2022 21:40:14 +0000</created>
                <updated>Wed, 5 Oct 2022 13:13:31 +0000</updated>
                            <resolved>Thu, 1 Sep 2022 12:58:37 +0000</resolved>
                                    <version>2.4.1</version>
                                    <fixVersion>2.5.0</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17563221" author="tallison@mitre.org" created="Wed, 6 Jul 2022 13:07:58 +0000"  >&lt;p&gt;Ugh.  Thank you.  I&apos;ll look into this.  I don&apos;t think we have any integration tests with the scientific parsers.  That type of testing would have caught this.  Y. Let me see what else may have changed.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure of the path forward.  The fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3750&quot; title=&quot;Bug in sorting parsers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3750&quot;&gt;&lt;del&gt;TIKA-3750&lt;/del&gt;&lt;/a&gt; was indeed a fix, and I&apos;m hesitant to revert that.&lt;/p&gt;</comment>
                            <comment id="17563243" author="tallison@mitre.org" created="Wed, 6 Jul 2022 13:48:59 +0000"  >&lt;p&gt;These are the diffs when tesseract is not installed and a user has both &lt;tt&gt;tika-parsers-standard-package&lt;/tt&gt; and &lt;tt&gt;tika-parser-scientific-package&lt;/tt&gt; on their class path.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;application/x-hdf 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.hdf.HDFParser
application/x-netcdf 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.netcdf.NetCDFParser
image/bmp 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.image.ImageParser
image/gif 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.image.ImageParser
image/jpeg 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.image.JpegParser
image/png 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.image.ImageParser
video/mp4 2.4.1: class org.apache.tika.parser.external.CompositeExternalParser 2.4.0: class org.apache.tika.parser.mp4.MP4Parser
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;These are the diffs when tesseract is installed:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;application/x-hdf 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.hdf.HDFParser
application/x-netcdf 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.netcdf.NetCDFParser
image/bmp 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.image.ImageParser
image/gif 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.image.ImageParser
image/jp2 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.ocr.TesseractOCRParser
image/jpeg 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.image.JpegParser
image/png 2.4.1: class org.apache.tika.parser.gdal.GDALParser 2.4.0: class org.apache.tika.parser.image.ImageParser
video/mp4 2.4.1: class org.apache.tika.parser.external.CompositeExternalParser 2.4.0: class org.apache.tika.parser.mp4.MP4Parser
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17563250" author="tallison@mitre.org" created="Wed, 6 Jul 2022 13:59:02 +0000"  >&lt;p&gt;I think the above behavior is actually an improvement in 2.4.1. If you have &lt;tt&gt;tika-parser-scientific-package&lt;/tt&gt; on your class path, I think you&apos;d want that to run instead of the ImageParser and Tesseract, no?  Or, are you interested in other parsers in the scientific-package and do not want GDAL?&lt;/p&gt;

&lt;p&gt;Further, if you have exiftool installed, that is now getting triggered on mp4, which should be the desired behavior.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="17563260" author="JIRAUSER280558" created="Wed, 6 Jul 2022 14:16:22 +0000"  >&lt;p&gt;Thank you for confirming the overlapping parser/mime types.&lt;/p&gt;

&lt;p&gt;We can handle this in configuration file with a mime-exclude for GDALParser for those images, since this seems limited to that mostly.&lt;/p&gt;

&lt;p&gt;I understand that adding parsers besides the standard ones will take precedence and seems fair.&lt;/p&gt;</comment>
                            <comment id="17563269" author="tallison@mitre.org" created="Wed, 6 Jul 2022 14:38:25 +0000"  >&lt;p&gt;I&apos;m sorry for the surprise.  Surprises are not intended and not good.&lt;/p&gt;</comment>
                            <comment id="17566943" author="tilman" created="Thu, 14 Jul 2022 18:15:37 +0000"  >&lt;p&gt;Build fails on my machine (W10):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.979 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.tika.parser.scientific.integration.TestParsers
[ERROR] org.apache.tika.parser.scientific.integration.TestParsers.testDiffsFrom241 &#160;Time elapsed: 0.951 s &#160;&amp;lt;&amp;lt;&amp;lt; FAILURE!
org.opentest4j.AssertionFailedError: expected: &amp;lt;class org.apache.tika.parser.mp4.MP4Parser&amp;gt; but was: &amp;lt;class org.apache.tika.parser.external.CompositeExternalParser&amp;gt;
&#160; &#160; &#160; &#160; at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55)
&#160; &#160; &#160; &#160; at org.junit.jupiter.api.AssertionUtils.failNotEqual(AssertionUtils.java:62)
&#160; &#160; &#160; &#160; at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)
&#160; &#160; &#160; &#160; at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)
&#160; &#160; &#160; &#160; at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1141)
&#160; &#160; &#160; &#160; at org.apache.tika.parser.scientific.integration.TestParsers.testDiffsFrom241(TestParsers.java:66)
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17566946" author="tallison@mitre.org" created="Thu, 14 Jul 2022 18:36:44 +0000"  >&lt;p&gt;Sorry.  Just pushed fix.  Tracking to see if that doesn&apos;t fix it.&lt;/p&gt;</comment>
                            <comment id="17566951" author="hudson" created="Thu, 14 Jul 2022 19:05:14 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #685 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/685/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/685/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3812&quot; title=&quot;Parser Order: image get parsed by GDALParser instead of TesseractOCRParser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3812&quot;&gt;&lt;del&gt;TIKA-3812&lt;/del&gt;&lt;/a&gt; &amp;#8211; add unit tests to confirm parser order with &amp;gt;= 2.4.1 (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/19b0337d60d91778d6837f88e62d151586888a79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/19b0337d60d91778d6837f88e62d151586888a79&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/src/test/resources/2.4.0-no-tesseract.txt&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/src/test/resources/2.4.0-tesseract.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/pom.xml&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/src/test/java/org/apache/tika/parser/scientific/integration/TestParsers.java&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/src/test/resources/2.4.1-no-tesseract.txt&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/src/test/resources/2.4.1-tesseract.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17566954" author="tilman" created="Thu, 14 Jul 2022 19:14:35 +0000"  >&lt;p&gt;Thanks, it works now.&lt;/p&gt;</comment>
                            <comment id="17566974" author="hudson" created="Thu, 14 Jul 2022 20:17:19 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #686 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/686/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/686/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3812&quot; title=&quot;Parser Order: image get parsed by GDALParser instead of TesseractOCRParser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3812&quot;&gt;&lt;del&gt;TIKA-3812&lt;/del&gt;&lt;/a&gt; &amp;#8211; test should work whether or not ffmpeg and exiftool are installed or not. (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/9dc592f95200885af75671f0e0381770d8b8298f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/9dc592f95200885af75671f0e0381770d8b8298f&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/src/test/resources/2.4.1-tesseract.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/src/test/resources/2.4.1-no-tesseract.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parser-scientific-package/src/test/java/org/apache/tika/parser/scientific/integration/TestParsers.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17612617" author="dadoonet" created="Tue, 4 Oct 2022 13:16:15 +0000"  >&lt;p&gt;I&apos;m still having issues with 2.5.0.&lt;/p&gt;

&lt;p&gt;Basically my OCR tests are working as expected with 2.4.0. It&apos;s breaking in 2.4.1 and 2.5.0.&lt;/p&gt;

&lt;p&gt;I&apos;m trying to do OCR on a PNG image.&lt;/p&gt;

&lt;p&gt;The image I&apos;m trying to run OCR on is available at &lt;a href=&quot;https://github.com/dadoonet/fscrawler/blob/master/test-documents/src/main/resources/documents/test-ocr.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dadoonet/fscrawler/blob/master/test-documents/src/main/resources/documents/test-ocr.png&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I don&apos;t see any metadata extracted with 2.5.0. I have no idea what is happening and if I need to change something on my end...&#160;&lt;/p&gt;</comment>
                            <comment id="17612638" author="tallison@mitre.org" created="Tue, 4 Oct 2022 14:51:25 +0000"  >&lt;p&gt;Ugh &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dadoonet&quot; class=&quot;user-hover&quot; rel=&quot;dadoonet&quot;&gt;dadoonet&lt;/a&gt;...sorry.  Are you using tika-parsers-scientific-package?  Can you share the contents of the metadata object after the test &amp;#8211; which parsers touched the file?&lt;/p&gt;</comment>
                            <comment id="17612645" author="dadoonet" created="Tue, 4 Oct 2022 15:10:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison&quot; class=&quot;user-hover&quot; rel=&quot;tallison&quot;&gt;tallison&lt;/a&gt; I always had &lt;tt&gt;tika-parsers-scientific-package&lt;/tt&gt; in my &lt;tt&gt;pom.xml&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;metadata&lt;/tt&gt; object seems to be &lt;tt&gt;null&lt;/tt&gt;. Which looks weird to me. May be I did something stupid I can&apos;t see...&lt;/p&gt;

&lt;p&gt;I will try to reproduce this with a small piece of test code.&#160;&lt;/p&gt;</comment>
                            <comment id="17612656" author="tallison@mitre.org" created="Tue, 4 Oct 2022 15:41:52 +0000"  >&lt;p&gt;I added two unit tests (thank you for the png!): &lt;a href=&quot;https://github.com/apache/tika/blob/main/tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/java/org/apache/tika/parser/ocr/TestOCR.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/blob/main/tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/java/org/apache/tika/parser/ocr/TestOCR.java&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="17612664" author="tallison@mitre.org" created="Tue, 4 Oct 2022 16:05:18 +0000"  >&lt;p&gt;Y, sorry.  That test actually shows that gdal is being called when I get the imports correct.  &lt;/p&gt;

&lt;p&gt;We could modify gdal to implement AbstractImageParser, which would call tesseract on those file formats that tesseract handles.  This, however, would skip the metadata extraction by the &quot;regular&quot; image parsers.&lt;/p&gt;

&lt;p&gt;So, the way to get the legacy behavior is to have gdal skip the &quot;regular&quot; image formats through configuration, or we could modify the GDAL parser to skip jpg/png etc as its new behavior.&lt;/p&gt;

&lt;p&gt;No good options.&lt;/p&gt;
</comment>
                            <comment id="17612665" author="tallison@mitre.org" created="Tue, 4 Oct 2022 16:06:03 +0000"  >&lt;p&gt;In 1.x, the regular image parsers took precedence over gdal so it was never called on &lt;tt&gt;png, jpeg, bmp, jp2&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17612666" author="tallison@mitre.org" created="Tue, 4 Oct 2022 16:08:30 +0000"  >&lt;p&gt;So, the proposal would be to remove png, jpeg and gif from the file formats that GDAL processes.  Users could configure their GDAL parsers to parse those formats if they wanted.  This would be closer to the older behavior.&lt;/p&gt;</comment>
                            <comment id="17612667" author="dadoonet" created="Tue, 4 Oct 2022 16:08:59 +0000"  >&lt;p&gt;I&apos;m totally fine modifying the code on my side to make this work. But it&apos;s unclear to me what I need to do &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here is how I&apos;m building the parser and the context. What should I change there?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/dadoonet/fscrawler/blob/master/tika/src/main/java/fr/pilato/elasticsearch/crawler/fs/tika/TikaInstance.java#L84-L178&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dadoonet/fscrawler/blob/master/tika/src/main/java/fr/pilato/elasticsearch/crawler/fs/tika/TikaInstance.java#L84-L178&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17612671" author="tallison@mitre.org" created="Tue, 4 Oct 2022 16:28:06 +0000"  >&lt;p&gt;This is how you can configure GDAL to avoid the image files types listed above:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/tika/blob/main/tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/resources/config/tika-config-restricted-gdal.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/blob/main/tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/resources/config/tika-config-restricted-gdal.xml&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17612695" author="hudson" created="Tue, 4 Oct 2022 17:09:41 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #830 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/830/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/830/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3812&quot; title=&quot;Parser Order: image get parsed by GDALParser instead of TesseractOCRParser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3812&quot;&gt;&lt;del&gt;TIKA-3812&lt;/del&gt;&lt;/a&gt; &amp;#8211; add unit test to confirm plain png and jpeg work (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/f69c0ba5d976a72f8075fbd81d732d6ca74a188d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/f69c0ba5d976a72f8075fbd81d732d6ca74a188d&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/resources/test-documents/testOCR.jpg&lt;/li&gt;
	&lt;li&gt;(edit) tika-integration-tests/tika-resource-loading-tests/src/test/java/org/apache/custom/parser/CustomParserTest.java&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/resources/test-documents/testOCR.png&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/pom.xml&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/java/org/apache/tika/parser/ocr/TestOCR.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17612732" author="hudson" created="Tue, 4 Oct 2022 18:32:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #831 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/831/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/831/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3812&quot; title=&quot;Parser Order: image get parsed by GDALParser instead of TesseractOCRParser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3812&quot;&gt;&lt;del&gt;TIKA-3812&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix unit test to confirm plain png and jpeg work with config file (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/634f9191f1a1f3cd21a5ff4311af249663567716&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/634f9191f1a1f3cd21a5ff4311af249663567716&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/java/org/apache/tika/parser/ocr/TestOCR.java&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/resources/config/tika-config-restricted-gdal.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17612937" author="dadoonet" created="Wed, 5 Oct 2022 10:28:59 +0000"  >&lt;p&gt;When excluding&#160;&lt;tt&gt;GDALParser&lt;/tt&gt; from the &lt;tt&gt;DefaultParser&lt;/tt&gt;, I&apos;m able to get the same behavior as before.&lt;/p&gt;

&lt;p&gt;But I don&apos;t know how to add the &lt;tt&gt;GDALParser&lt;/tt&gt; again with exclusions on the mime-types you shown using Java code. Which method I should use to mimic the following?&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; &amp;lt;parser class=&quot;org.apache.tika.parser.gdal.GDALParser&quot;&amp;gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &amp;lt;mime-exclude&amp;gt;image/jpeg&amp;lt;/mime-exclude&amp;gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &amp;lt;mime-exclude&amp;gt;image/png&amp;lt;/mime-exclude&amp;gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &amp;lt;mime-exclude&amp;gt;image/jp2&amp;lt;/mime-exclude&amp;gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &amp;lt;mime-exclude&amp;gt;image/gif&amp;lt;/mime-exclude&amp;gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &amp;lt;/parser&amp;gt;&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17612939" author="tallison@mitre.org" created="Wed, 5 Oct 2022 10:34:18 +0000"  >&lt;p&gt;I&apos;d frankly have a default tika-config.xml and just load it from there.  Let me try some things.&lt;/p&gt;</comment>
                            <comment id="17612941" author="tallison@mitre.org" created="Wed, 5 Oct 2022 10:53:29 +0000"  >&lt;p&gt;Added a unit test.  It is UGLY.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/tika/blob/main/tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/java/org/apache/tika/parser/ocr/TestOCR.java#L68&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/blob/main/tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/java/org/apache/tika/parser/ocr/TestOCR.java#L68&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17612942" author="tallison@mitre.org" created="Wed, 5 Oct 2022 10:56:43 +0000"  >&lt;p&gt;The benefit of having a default tika-config.xml is that users can look at it and make changes as necessary.  With hard coded configuration, it gets a bit more difficult.&lt;/p&gt;

&lt;p&gt;If you need to inject the tesseract config stuff, you might consider a tika-config template like we have in our unit tests?  See, for example {{&quot;&lt;/p&gt;
{ATTACHMENT_STRATEGY}
&lt;p&gt;&quot;}}: &lt;a href=&quot;https://github.com/apache/tika/blob/main/tika-integration-tests/tika-pipes-solr-integration-tests/src/test/resources/tika-config-solr-urls.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/blob/main/tika-integration-tests/tika-pipes-solr-integration-tests/src/test/resources/tika-config-solr-urls.xml&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But I don&apos;t want to put more work on you/break what works!&lt;/p&gt;</comment>
                            <comment id="17612949" author="dadoonet" created="Wed, 5 Oct 2022 11:13:09 +0000"  >&lt;p&gt;Amazing! That helps!&lt;/p&gt;

&lt;p&gt;I definitely want to read the settings from an XML file in the future so I could explose all settings instead of doing that programmatically. There is actually a support for this already but it&apos;s not the default in FSCrawler and it needs a lot of documentation update &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17612985" author="tallison@mitre.org" created="Wed, 5 Oct 2022 12:50:15 +0000"  >&lt;p&gt;Documentation?!  But you have unit tests! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; LOL&lt;/p&gt;

&lt;p&gt;If documentation&apos;s your thing, we could certainly use more help! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Let us know if you have any questions!&lt;/p&gt;</comment>
                            <comment id="17612994" author="hudson" created="Wed, 5 Oct 2022 13:13:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk8 #833 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/833/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk8/833/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3812&quot; title=&quot;Parser Order: image get parsed by GDALParser instead of TesseractOCRParser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3812&quot;&gt;&lt;del&gt;TIKA-3812&lt;/del&gt;&lt;/a&gt; add example of how to configure gdal programmatically (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/33c21a3a4c9b4805908600083786eb11c127fd94&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/33c21a3a4c9b4805908600083786eb11c127fd94&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-extended/tika-parsers-extended-integration-tests/src/test/java/org/apache/tika/parser/ocr/TestOCR.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="13046367" name="parser-diffs.tgz" size="4578" author="tallison" created="Wed, 6 Jul 2022 13:52:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z16mns:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>