<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:03:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-3088] java.lang.NullPointerException when converting Open Office presentation (.odp) to html</title>
                <link>https://issues.apache.org/jira/browse/TIKA-3088</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;The attempt to convert an odp file to html format ends with this:&lt;/p&gt;

&lt;p&gt;D:\&amp;gt;java -jar tika-app-1.23.jar --html D:\testdata\Presentations\11.odp&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.tika.exception.TikaException: Unexpected RuntimeException from org.apache.tika.parser.odf.OpenDocumentParser@710f4dc7&#160; &#160; &#160; &#160; at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:282)&#160; &#160; &#160; &#160; at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)&#160; &#160; &#160; &#160; at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:143)&#160; &#160; &#160; &#160; at org.apache.tika.cli.TikaCLI$OutputType.process(TikaCLI.java:209)&#160; &#160; &#160; &#160; at org.apache.tika.cli.TikaCLI.process(TikaCLI.java:496)&#160; &#160; &#160; &#160; at org.apache.tika.cli.TikaCLI.main(TikaCLI.java:149)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Caused by: java.lang.NullPointerException&lt;/b&gt;&#160; &#160; &#160; &#160; at com.sun.org.apache.xml.internal.serializer.ToHTMLStream.endElement(Unknown Source)&#160; &#160; &#160; &#160; at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerHandlerImpl.endElement(Unknown Source)&#160; &#160; &#160; &#160; at org.apache.tika.sax.ContentHandlerDecorator.endElement(ContentHandlerDecorator.java:136)&#160; &#160; &#160; &#160; at org.apache.tika.sax.ExpandedTitleContentHandler.endElement(ExpandedTitleContentHandler.java:70)&#160; &#160; &#160; &#160; at org.apache.tika.sax.ContentHandlerDecorator.endElement(ContentHandlerDecorator.java:136)&#160; &#160; &#160; &#160; at org.apache.tika.sax.SecureContentHandler.endElement(SecureContentHandler.java:256)&#160; &#160; &#160; &#160; at org.apache.tika.sax.ContentHandlerDecorator.endElement(ContentHandlerDecorator.java:136)&#160; &#160; &#160; &#160; at org.apache.tika.sax.ContentHandlerDecorator.endElement(ContentHandlerDecorator.java:136)&#160; &#160; &#160; &#160; at org.apache.tika.sax.ContentHandlerDecorator.endElement(ContentHandlerDecorator.java:136)&#160; &#160; &#160; &#160; at org.apache.tika.sax.SafeContentHandler.endElement(SafeContentHandler.java:274)&#160; &#160; &#160; &#160; at org.apache.tika.sax.XHTMLContentHandler.endElement(XHTMLContentHandler.java:271)&#160; &#160; &#160; &#160; at org.apache.tika.sax.ContentHandlerDecorator.endElement(ContentHandlerDecorator.java:136)&#160; &#160; &#160; &#160; at org.apache.tika.parser.odf.OpenDocumentContentParser$OpenDocumentElementMappingContentHandler.endElement(OpenDocumentContentParser.java:425)&#160; &#160; &#160; &#160; at org.apache.tika.sax.ContentHandlerDecorator.endElement(ContentHandlerDecorator.java:136)&#160; &#160; &#160; &#160; at org.apache.tika.parser.odf.NSNormalizerContentHandler.endElement(NSNormalizerContentHandler.java:75)&#160; &#160; &#160; &#160; at org.apache.tika.sax.ContentHandlerDecorator.endElement(ContentHandlerDecorator.java:136)&#160; &#160; &#160; &#160; at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)&#160; &#160; &#160; &#160; at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown Source)&#160; &#160; &#160; &#160; at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)&#160; &#160; &#160; &#160; at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)&#160; &#160; &#160; &#160; at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)&#160; &#160; &#160; &#160; at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)&#160; &#160; &#160; &#160; at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)&#160; &#160; &#160; &#160; at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)&#160; &#160; &#160; &#160; at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)&#160; &#160; &#160; &#160; at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown Source)&#160; &#160; &#160; &#160; at javax.xml.parsers.SAXParser.parse(Unknown Source)&#160; &#160; &#160; &#160; at org.apache.tika.utils.XMLReaderUtils.parseSAX(XMLReaderUtils.java:491)&#160; &#160; &#160; &#160; at org.apache.tika.parser.odf.OpenDocumentContentParser.parseInternal(OpenDocumentContentParser.java:599)&#160; &#160; &#160; &#160; at org.apache.tika.parser.odf.OpenDocumentParser.handleZipEntry(OpenDocumentParser.java:220)&#160; &#160; &#160; &#160; at org.apache.tika.parser.odf.OpenDocumentParser.handleZipFile(OpenDocumentParser.java:204)&#160; &#160; &#160; &#160; at org.apache.tika.parser.odf.OpenDocumentParser.parse(OpenDocumentParser.java:157)&#160; &#160; &#160; &#160; at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)&#160; &#160; &#160; &#160; ... 5 more&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13297378">TIKA-3088</key>
            <summary>java.lang.NullPointerException when converting Open Office presentation (.odp) to html</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kotik">Vladimir Kotik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Apr 2020 13:12:02 +0000</created>
                <updated>Tue, 21 Jul 2020 17:30:43 +0000</updated>
                            <resolved>Tue, 21 Jul 2020 17:30:43 +0000</resolved>
                                    <version>1.23</version>
                                    <fixVersion>1.24.1</fixVersion>
                                    <component>app</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17159014" author="andreasweber" created="Thu, 16 Jul 2020 08:29:14 +0000"  >&lt;p&gt;This bug seems to be a consequence of a change made in tika-1.15 (which still is contained in newer versions, up to current version 1.24.1)&lt;/p&gt;

&lt;p&gt;org.apache.tika.parser.odf,OpenDocumentContentParser&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;@Override&lt;/tt&gt;&lt;br/&gt;
public void endElement()&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; ....&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; if (completelyFiltered == 0) {&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; ...&lt;/tt&gt;&lt;tt&gt;&#160; &#160; &#160; &#160;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; &#160; &#160;} else if (&quot;annotation&quot;.equals(localName) || &quot;note&quot;.equals(localName) ||&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &quot;notes&quot;.equals(localName)) {&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160; &#160; closeStyleTags();&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160; &#160; handler.endElement(&quot;&quot;, localName, localName);&#160; &#160; &#160; &#160; // empty namespace uri - why?&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160;&lt;/tt&gt;}&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; ...&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;The problem here is the empty namespace string &quot;&quot;, which causes a different handling in com.sun.org.apache.xml.internal.serializer.ToHTMLStream.endElement():&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; if (null != namespaceURI &amp;amp;&amp;amp; namespaceURI.length() &amp;gt; 0) {&#160; &#160; // this condition is not true anymore&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; &#160;&#160;super.endElement(namespaceURI, localName, name);&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; &#160; return;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So the fix seems to be as easy as providing a correct namespace uri string in OpenDocumentContentParser.&lt;tt&gt;endElement()&lt;/tt&gt;, e.g.:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; &#160; &#160; handler.endElement(XHTMLContentHandler.XHTML&lt;/tt&gt;&lt;tt&gt;, localName, localName);&#160;&#160;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17159246" author="tallison@mitre.org" created="Thu, 16 Jul 2020 14:27:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andreasweber&quot; class=&quot;user-hover&quot; rel=&quot;andreasweber&quot;&gt;andreasweber&lt;/a&gt;, I made a fix in &lt;tt&gt;main&lt;/tt&gt; and &lt;tt&gt;branch_1x&lt;/tt&gt;.  Would you be able to build locally and let me know if this fixes your issue?  Thank you!&lt;/p&gt;</comment>
                            <comment id="17159283" author="hudson" created="Thu, 16 Jul 2020 15:15:15 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #347 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/347/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/347/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-3088&quot; title=&quot;java.lang.NullPointerException when converting Open Office presentation (.odp) to html&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-3088&quot;&gt;&lt;del&gt;TIKA-3088&lt;/del&gt;&lt;/a&gt; - fix NPE in OpenDocumentContentParser caused by (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/d8d4af1650b62952b55cf25560ed64b33ce32e0f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/d8d4af1650b62952b55cf25560ed64b33ce32e0f&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/main/java/org/apache/tika/parser/odf/OpenDocumentContentParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17161975" author="andreasweber" created="Tue, 21 Jul 2020 12:01:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison&quot; class=&quot;user-hover&quot; rel=&quot;tallison&quot;&gt;tallison&lt;/a&gt;: I&apos;m not familiar with checking out and building tika from scratch. But I tested it with 1.24.1 and your changes from &lt;a href=&quot;https://github.com/apache/tika/commit/d8d4af1650b62952b55cf25560ed64b33ce32e0f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/d8d4af1650b62952b55cf25560ed64b33ce32e0f&lt;/a&gt; and it looks fine.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12999441" name="1.odp" size="431290" author="kotik" created="Thu, 9 Apr 2020 13:08:06 +0000"/>
                            <attachment id="12999439" name="11.odp" size="1948558" author="kotik" created="Thu, 9 Apr 2020 13:08:06 +0000"/>
                            <attachment id="12999440" name="7.odp" size="504060" author="kotik" created="Thu, 9 Apr 2020 13:08:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0dgm0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>