<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:59:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-1678] PDF metadata extraction fails to spot UTF-16 encoded title</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1678</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;When extracting metadata from PDFs, we see some odd behaviour for a minority of the documents. The PDF metadata can be encoded as UTF-18 octets, but is not always being decoded as such.&lt;/p&gt;

&lt;p&gt;A specific example is here: &lt;a href=&quot;http://mqug.org.uk/downloads/201207/201207%20-%20TEC02%20-%20Introduction%20to%20Worklight.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mqug.org.uk/downloads/201207/201207%20-%20TEC02%20-%20Introduction%20to%20Worklight.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Which contains this (literal file content):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;443 0 obj
&amp;lt;&amp;lt;/Type/Metadata
/Subtype/XML/Length 1978&amp;gt;&amp;gt;stream
&amp;lt;?xpacket begin=&apos;&#239;&#187;&#191;&apos; id=&apos;W5M0MpCehiHzreSzNTczkc9d&apos;?&amp;gt;
&amp;lt;?adobe-xap-filters esc=&quot;CRLF&quot;?&amp;gt;
&amp;lt;x:xmpmeta xmlns:x=&apos;adobe:ns:meta/&apos; x:xmptk=&apos;XMP toolkit 2.9.1-13, framework 1.6&apos;&amp;gt;
&amp;lt;rdf:RDF xmlns:rdf=&apos;http://www.w3.org/1999/02/22-rdf-syntax-ns#&apos; xmlns:iX=&apos;http://ns.adobe.com/iX/1.0/&apos;&amp;gt;
&amp;lt;rdf:Description rdf:about=&apos;ac9f232e-d341-11e1-0000-ba905bfc4694&apos; xmlns:pdf=&apos;http://ns.adobe.com/pdf/1.3/&apos; pdf:Producer=&apos;\376\377\000B\000u\000l\000l\000z\000i\000p\000 \000P\000D\000F\000 \000P\000r\000i\000n\000t\000e\000r\000 \000/\000 \000w\000w\000w\000.\000b\000u\000l\000l\000z\000i\000p\000.\000c\000o\000m\000 \000/\000 \000F\000r\000e\000e\000w\000a\000r\000e\000 \000E\000d\000i\000t\000i\000o\000n&apos;/&amp;gt;
&amp;lt;rdf:Description rdf:about=&apos;ac9f232e-d341-11e1-0000-ba905bfc4694&apos; xmlns:xmp=&apos;http://ns.adobe.com/xap/1.0/&apos;&amp;gt;&amp;lt;xmp:ModifyDate&amp;gt;2012-07-18T15:38:01+01:00&amp;lt;/xmp:ModifyDate&amp;gt;
&amp;lt;xmp:CreateDate&amp;gt;2012-07-18T15:38:01+01:00&amp;lt;/xmp:CreateDate&amp;gt;
&amp;lt;xmp:CreatorTool&amp;gt;UnknownApplication&amp;lt;/xmp:CreatorTool&amp;gt;&amp;lt;/rdf:Description&amp;gt;
&amp;lt;rdf:Description rdf:about=&apos;ac9f232e-d341-11e1-0000-ba905bfc4694&apos; xmlns:xapMM=&apos;http://ns.adobe.com/xap/1.0/mm/&apos; xapMM:DocumentID=&apos;ac9f232e-d341-11e1-0000-ba905bfc4694&apos;/&amp;gt;
&amp;lt;rdf:Description rdf:about=&apos;ac9f232e-d341-11e1-0000-ba905bfc4694&apos; xmlns:dc=&apos;http://purl.org/dc/elements/1.1/&apos; dc:format=&apos;application/pdf&apos;&amp;gt;&amp;lt;dc:title&amp;gt;&amp;lt;rdf:Alt&amp;gt;&amp;lt;rdf:li xml:lang=&apos;x-default&apos;&amp;gt;\376\377\000M\000i\000c\000r\000o\000s\000o\000f\000t\000 \000P\000o\000w\000e\000r\000P\000o\000i\000n\000t\000 \000-\000 \000I\000n\000t\000r\000o\000d\000u\000c\000t\000i\000o\000n\000 \000t\000o\000 \000W\000o\000r\000k\000l\000i\000g\000h\000t\000 \000\(\000S\000R\000D\000\)\000.\000p\000p\000t\000x&amp;lt;/rdf:li&amp;gt;&amp;lt;/rdf:Alt&amp;gt;&amp;lt;/dc:title&amp;gt;&amp;lt;dc:creator&amp;gt;&amp;lt;rdf:Seq&amp;gt;&amp;lt;rdf:li&amp;gt;\376\377\000T\000e\000t\000t\000i&amp;lt;/rdf:li&amp;gt;&amp;lt;/rdf:Seq&amp;gt;&amp;lt;/dc:creator&amp;gt;&amp;lt;/rdf:Description&amp;gt;
&amp;lt;/rdf:RDF&amp;gt;
&amp;lt;/x:xmpmeta&amp;gt;


&amp;lt;?xpacket end=&apos;w&apos;?&amp;gt;
endstream
endobj
2 0 obj
&amp;lt;&amp;lt;/Producer(\376\377\000B\000u\000l\000l\000z\000i\000p\000 \000P\000D\000F\000 \000P\000r\000i\000n\000t\000e\000r\000 \000/\000 \000w\000w\000w\000.\000b\000u\000l\000l\000z\000i\000p\000.\000c\000o\000m\000 \000/\000 \000F\000r\000e\000e\000w\000a\000r\000e\000 \000E\000d\000i\000t\000i\000o\000n)
/CreationDate(D:20120718153801+01&apos;00&apos;)
/ModDate(D:20120718153801+01&apos;00&apos;)
/Title(\376\377\000M\000i\000c\000r\000o\000s\000o\000f\000t\000 \000P\000o\000w\000e\000r\000P\000o\000i\000n\000t\000 \000-\000 \000I\000n\000t\000r\000o\000d\000u\000c\000t\000i\000o\000n\000 \000t\000o\000 \000W\000o\000r\000k\000l\000i\000g\000h\000t\000 \000\(\000S\000R\000D\000\)\000.\000p\000p\000t\000x)
/Author(\376\377\000T\000e\000t\000t\000i)&amp;gt;&amp;gt;endobj
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Presumably, embedding these UTF-16 octet sequences in the XMP RDF is an error, but the ones encoded in the actual PDF metadata fields should be extracted accurately.&lt;/p&gt;

&lt;p&gt;When extracted, we get:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;...
dc:title: \376\377\000M\000i\000c\000r\000o\000s\000o\000f\000t\000 \000P\000o\000w\000e\000r\000P\000o\000i\000n\000t\000 \000-\000 \000I\000n\000t\000r\000o\000d\000u\000c\000t\000i\000o\000n\000 \000t\000o\000 \000W\000o\000r\000k\000l\000i\000g\000h\000t\000 \000\(\000S\000R\000D\000\)\000.\000p\000p\000t\000x
title: \376\377\000M\000i\000c\000r\000o\000s\000o\000f\000t\000 \000P\000o\000w\000e\000r\000P\000o\000i\000n\000t\000 \000-\000 \000I\000n\000t\000r\000o\000d\000u\000c\000t\000i\000o\000n\000 \000t\000o\000 \000W\000o\000r\000k\000l\000i\000g\000h\000t\000 \000\(\000S\000R\000D\000\)\000.\000p\000p\000t\000x
meta:author: \376\377\000T\000e\000t\000t\000i
meta:author: Tetti
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, the author appears to be decoded correctly once, but the title is not. Is the XML dc:title being used to override the PDF title field? Or is one of the title fields being decoded incorrectly?&lt;/p&gt;

&lt;p&gt;(I accept that although this is a real PDF document from the web, it is also a malformed one, so maybe there is not much to be done here.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12844973">TIKA-1678</key>
            <summary>PDF metadata extraction fails to spot UTF-16 encoded title</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="anjackson">Andrew Jackson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jul 2015 15:26:31 +0000</created>
                <updated>Thu, 6 Aug 2015 19:02:02 +0000</updated>
                            <resolved>Fri, 24 Jul 2015 14:08:19 +0000</resolved>
                                    <version>1.9</version>
                                    <fixVersion>1.10</fixVersion>
                                    <component>metadata</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14627897" author="tallison@mitre.org" created="Wed, 15 Jul 2015 11:05:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anjackson&quot; class=&quot;user-hover&quot; rel=&quot;anjackson&quot;&gt;anjackson&lt;/a&gt;, good to hear from you!  Y, the current code tries to pull content out of the xmp for some Dublin core items.  If that info is not available then it backs off to the &quot;native&quot; metadata.  &lt;/p&gt;

&lt;p&gt;So, I&apos;m not sure how to fix this...  Any recommendations?&lt;/p&gt;

&lt;p&gt;Should we add our own handling of strings that start with &quot;\376\377&quot; etc.?  Smells a bit hacky, but I&apos;m not above that. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m slightly puzzled that you are getting two author entries...I&apos;ll look into this.&lt;/p&gt;</comment>
                            <comment id="14627913" author="anjackson" created="Wed, 15 Jul 2015 11:33:03 +0000"  >&lt;p&gt;I&apos;m seeing this in about 220,000 out of 21,204,351 PDFs crawled from 2013 onwards, so it&apos;s a lot, but a small percentage. I thought it might be down to one or two implementations, but I&apos;m seeing a fairly broad range of software IDs:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     &quot;generator&quot;: [
        &quot;Bullzip PDF Printer / www.bullzip.com / Freeware Edition (not registered)&quot;,
        30,
        &quot;GPL Ghostscript 8.54 PDF Writer&quot;,
        30,
        &quot;PDFCreator Version 0.9.5&quot;,
        30,
        &quot;PDFCreator Version 1.1.0&quot;,
        30,
        &quot;Neevia Document Converter 5.2&quot;,
        29,
        &quot;pdfcreator Version 0.9.9&quot;,
        29,
        &quot;AFPL Ghostscript 8.54 PDF Writer&quot;,
        28,
        &quot;PDFCreator Version 1.0.0&quot;,
        28,
        &quot;GPL Ghostscript 8.64 ps2pdf.com&quot;,
        27,
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That octal UTF-16 BE BOM is pretty specific, so I think writing a hander to catch it is unlikely to cause problems elsewhere. But I&apos;m not really sure how to fix this either.&lt;/p&gt;

&lt;p&gt;In case it helps, here are some more (randomly chosen) URLs that seem to display the same issue (if they&apos;ve not disappeared from the live web already!):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;http://www.girlsb.org.uk/media/060a6d49/After_McDonaldization_Chapter_1.pdf
http://www.uniswales.ac.uk/wp/media/2011-March-The-Impact-of-International-and-EU-Students-in-Wales.pdf
http://www.youthworkwales.org.uk/creo_files/upload/files/gd_in_yw_conceptual_model_2009_1_.pdf
http://www.transitionchepstow.org.uk/wp-content/uploads/2014/09/Living-with-climate-change-poster.pdf
http://www.staustelltowncouncil.com/St-Austell-Town-Council/UserFiles/Files/Committees/Community/Agendas/2010/community%20agenda%206%20Sept%2010.pdf
http://community.stroud.gov.uk/_documents/79_SmartWater-NW-Kit-Leaflet3.pdf
http://www.recycleformerthyr.co.uk/media/9365/dowlais%20juniors%20school%20photos.pdf
http://www.visitmerthyr.co.uk/media/24663/volunteering_poster.psd_welsh.pdf
http://merthyrcynon.foodbank.org.uk/resources/documents/Get%20Involved/Gift-Aid-Form/Gift-Aid-form.pdf
http://www.basquechildren.org/-/docs/clarion
http://www.biicl.org/files/3776_5_-_richard_happ.pdf
http://www.artscouncil-ni.org/images/uploads/publications-documents/ArtsandHealth.pdf
http://www.lawsoc-ni.org/download/fs/doc/LEXCEL_APPLICATION_&amp;amp;_STATUS_ENQUIRY_FORMS_2010%5b1%5d/pdf/
http://www.templechurch.com/wp-content/uploads/2012/08/Olympic-poster.pdf
http://www.llennatur.com/files/u1/Cylchgrawn32.pdf
https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/315413/cau101.pdf
https://www.networks.nhs.uk/nhs-networks/common-assessment-framework-for-adults-learning/archived-material-from-caf-network-website-pre-april-2012/barnsley-ig-toolkit-aug-2010/FINAL_BMBC_ASSD_NHS_Numb
http://www.ccfgb.co.uk/images/Visit.pdf
http://www.wihb.scot.nhs.uk/hairt-reports/policies/key-infection-prevention-policies?task=document.viewdoc&amp;amp;id=22
http://www.ed.ac.uk/polopoly_fs/1.94783!/fileManager/martha%20hamilton%20trust%20app%20form12.pdf
http://stophs2.org/wp-content/uploads/2010/11/EHS_booklet.pdf
http://www.brookes.ac.uk/Documents/Regulations/Current/Core/A1/Technolgy--Design---Environment-Prizes/
http://www.nus.org.uk/PageFiles/4011/ACTSA_Events_December.pdf
https://www.ids.ac.uk/files/dmfile/GCSTDemocracyandSecurity34_WP8.pdf
http://www.theigc.org/wp-content/uploads/2015/02/Chaudhry-Woodruff-2013-Working-Paper.pdf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14627948" author="tallison@mitre.org" created="Wed, 15 Jul 2015 12:03:09 +0000"  >&lt;p&gt;Shouldn&apos;t have taken me this long, but, isn&apos;t that pseudo UTF-16?  For example, capital B shouldn&apos;t be &lt;tt&gt;\000B&lt;/tt&gt;...shouldn&apos;t it be &lt;tt&gt;\0042&lt;/tt&gt;.  Or is there some genuine alternate encoding?&lt;/p&gt;</comment>
                            <comment id="14627956" author="tallison@mitre.org" created="Wed, 15 Jul 2015 12:18:15 +0000"  >&lt;p&gt;Related: &lt;a href=&quot;https://github.com/mozilla/pdf.js/issues/1597&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mozilla/pdf.js/issues/1597&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;And note that Google hasn&apos;t fixed this either: &quot;pdf \376\377&quot;.  The results include, e.g. titles like &quot;376\377\000H\000u\000m\000a\000n\000i\000t\000i\000e&quot;. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14627960" author="anjackson" created="Wed, 15 Jul 2015 12:26:58 +0000"  >&lt;p&gt;As far as I can tell, the PDF spec seems to imply that when you encoded UTF-16 data into text strings in the PDF document, you escape non-ASCII characters into octal. so \U0042 is treated as two separate bytes, and encoded as \000 and then B. Ick.&lt;/p&gt;</comment>
                            <comment id="14632429" author="tilman" created="Sat, 18 Jul 2015 13:36:24 +0000"  >&lt;p&gt;I think this is two bytes. I.e. a 0x0 and a &apos;B&apos;. In PDF, octals are written as &lt;tt&gt;\ddd&lt;/tt&gt;, i.e. always three digits. The next character you see is just that, a character, and not part of an octal sequence.&lt;/p&gt;</comment>
                            <comment id="14632432" author="tilman" created="Sat, 18 Jul 2015 13:46:33 +0000"  >&lt;p&gt;I get correct output for the non-XMP stuff with this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        PDDocumentInformation info = doc.getDocumentInformation();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Author: &quot;&lt;/span&gt; + info.getAuthor());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Producer: &quot;&lt;/span&gt; + info.getProducer());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Title: &quot;&lt;/span&gt; + info.getTitle());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Title contains &lt;span class=&quot;code-quote&quot;&gt;&apos;Microsoft&apos;&lt;/span&gt;: &quot;&lt;/span&gt; + info.getTitle().contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;Microsoft&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Author: Tetti&lt;br/&gt;
Producer: Bullzip PDF Printer / www.bullzip.com / Freeware Edition&lt;br/&gt;
Title: Microsoft PowerPoint - Introduction to Worklight (SRD).pptx&lt;br/&gt;
Title contains &apos;Microsoft&apos;: true&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So I don&apos;t know why TIKA gets this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;title: \376\377\000M\000i\000c\000r\000o\000s\000o\000f\000t\000 \000P\000o\000w\000e\000r\000P\000o\000i\000n\000t\000 \000-\000 \000I\000n\000t\000r\000o\000d\000u\000c\000t\000i\000o\000n\000 \000t\000o\000 \000W\000o\000r\000k\000l\000i\000g\000h\000t\000 \000\(\000S\000R\000D\000\)\000.\000p\000p\000t\000x
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;A look at the TIKA source code (PDFParser.extractMultilingualItems()) shows that if both have a value, then the XMP value is taken. I don&apos;t use tika, so I don&apos;t know what the difference between &quot;title&quot; and &quot;dc:title&quot; is. I suspect it is the same, and taken from XMP.&lt;/p&gt;</comment>
                            <comment id="14633429" author="tallison@mitre.org" created="Mon, 20 Jul 2015 11:10:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;, y, that&apos;s taken from the xmp.  As you found, we overwrite the native PDF metadata if the same key exists in XMP.&lt;/p&gt;

&lt;p&gt;The diff btwn &quot;title&quot; and &quot;dc:title&quot; is zero...just a transitional stage from many versions ago.  We&apos;re migrating to dc: alone...when Tika 2.0 comes out. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I think the crux of this issue is that some PDF generators are incorrectly putting the octal/pdf encoding in the XMP.  The proposed solution is for Tika to check for octal encoding in the XMP and then decode it correctly.&lt;/p&gt;

&lt;p&gt;If we create a COSString for each value (perhaps only those with an octal BOM) that we pull out of XMP and then call &lt;tt&gt;getString()&lt;/tt&gt;, will that work?&lt;/p&gt;</comment>
                            <comment id="14633454" author="tallison@mitre.org" created="Mon, 20 Jul 2015 11:42:48 +0000"  >&lt;p&gt;The good news is that with PDFBox 2.0, we get a &lt;tt&gt;null&lt;/tt&gt; from &lt;tt&gt;schema.getUnqualifiedLanguagePropertyLanguagesValue(property.getName());&lt;/tt&gt; which means that we don&apos;t overwrite the native pdf metadata for title.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I must be misusing that...&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;getString&lt;/tt&gt; on COSString doesn&apos;t work:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;            if (xmp != null) {
                dcSchema = xmp.getDublinCoreSchema();
                String t = dcSchema.getTitle();
                COSString c = new COSString(t);
                System.out.println(&quot;DECODED: &quot; + c.getString());
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;DECODED: \376\377\000M\000i\000c\000r\000o\000s
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m guessing this is because what comes out of the XMP is a Java escaped literal string representation of the octals, not the actual octals?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;, any code we can reuse from PDFBox to properly decode the mis-encoded xmp?&lt;/p&gt;</comment>
                            <comment id="14633687" author="tilman" created="Mon, 20 Jul 2015 15:19:17 +0000"  >&lt;p&gt;sure:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Tika1678 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; BaseParser
{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
    {
        Tika1678 tika1678 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Tika1678();
        
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s1 = &lt;span class=&quot;code-quote&quot;&gt;&quot;\\376\\377\\000B\\000u\\000l\\000l\\000z\\000i\\000p\\000 \\000P\\000D\\000F\\000 \\000P\\000r\\000i\\000n\\000t\\000e\\000r\\000 \\000/\\000 \\000w\\000w\\000w\\000.\\000b\\000u\\000l\\000l\\000z\\000i\\000p\\000.\\000c\\000o\\000m\\000 \\000/\\000 \\000F\\000r\\000e\\000e\\000w\\000a\\000r\\000e\\000 \\000E\\000d\\000i\\000t\\000i\\000o\\000n&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s2 = &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt; + s1 + &lt;span class=&quot;code-quote&quot;&gt;&quot;)&quot;&lt;/span&gt;;
        
        ByteArrayInputStream bais = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(s2.getBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;ISO-8859-1&quot;&lt;/span&gt;));
        tika1678.pdfSource = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RandomAccessBufferedFileInputStream(bais);
        COSString cosString = tika1678.parseCOSString();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;cosString: &quot;&lt;/span&gt; + cosString.getString());
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;output:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;cosString: Bullzip PDF Printer / www.bullzip.com / Freeware Edition&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;However this code will work only for examples like mentioned. I expect mayhem if this is used on a UTF8 sequence.&lt;/p&gt;</comment>
                            <comment id="14633720" author="tallison@mitre.org" created="Mon, 20 Jul 2015 15:44:38 +0000"  >&lt;p&gt;Very helpful!  If we require that the string start with \376\377 or vice versa, we should be ok, though, no?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anjackson&quot; class=&quot;user-hover&quot; rel=&quot;anjackson&quot;&gt;anjackson&lt;/a&gt;, how much effort would it be to check for other BOMs, such as \377\376 or \357\273\277?  To confirm, your counts were based solely on \376\377?&lt;/p&gt;</comment>
                            <comment id="14633722" author="tilman" created="Mon, 20 Jul 2015 15:47:08 +0000"  >&lt;p&gt;Yes, such a string check would be useful. Or just check for backslash number number number.&lt;/p&gt;</comment>
                            <comment id="14633986" author="tallison@mitre.org" created="Mon, 20 Jul 2015 19:35:25 +0000"  >&lt;p&gt;That works perfectly.  Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;Now I&apos;m trying to generate a test file with code lifted from the writing a PDFA example in PDFBox:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        PDDocument doc = new PDDocument();
        try {

            PDPage page = new PDPage();
            doc.addPage(page);
            PDFont font = PDType0Font.load(doc, this.getClass().getResourceAsStream(&quot;/test-documents/testTrueType3.ttf&quot;));
            String message = &quot;This file contains an octal encoded string in the title field of the xmp&quot;;
            // create a page with the message
            PDPageContentStream contents = new PDPageContentStream(doc, page);
            contents.beginText();
            contents.setFont(font, 12);
            contents.newLineAtOffset(100, 700);
            contents.showText(message);
            contents.endText();
            contents.saveGraphicsState();
            contents.close();

            // add XMP metadata
            XMPMetadata xmp = XMPMetadata.createXMPMetadata();
            try {

                DublinCoreSchema dc = xmp.createAndAddDublinCoreSchema();
                dc.setTitle(&quot;this is the title&quot;);

                XmpSerializer serializer = new XmpSerializer();
                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                serializer.serialize(xmp, baos, true);
                System.out.println(StringUtil.fromStream(new ByteArrayInputStream(baos.toByteArray())));
                PDMetadata metadata = new PDMetadata(doc);
                metadata.importXMPMetadata(baos.toByteArray());
                doc.getDocumentCatalog().setMetadata(metadata);
            } catch (TransformerException e) {
                e.printStackTrace();
            }
            doc.save(outputPath.toFile());
        } finally {
            doc.close();
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The resulting file opens in Adobe and shows the text.  The &quot;title&quot; field is empty (not sure if Adobe reads only from the internal metadata instead of the xmp?), and I&apos;m getting null when I try to read the title value from the XMP with PDFBox.  This is all 2.0.0 trunk.&lt;/p&gt;

&lt;p&gt;What am I doing wrong?  Thank you, again.&lt;/p&gt;</comment>
                            <comment id="14634045" author="tilman" created="Mon, 20 Jul 2015 20:41:00 +0000"  >&lt;p&gt;Likely a bug. I tried calling getTitle after setTitle and get an NPE. I submitted the PDFA file to &lt;br/&gt;
&lt;a href=&quot;http://www.pdf-tools.com/pdf/validate-pdfa-online.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.pdf-tools.com/pdf/validate-pdfa-online.aspx&lt;/a&gt;&lt;br/&gt;
and it fails. And I compared a PDFA file from the Bavaria tests to ours and there&apos;s a difference:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &amp;lt;dc:title&amp;gt;
        &amp;lt;rdf:Alt&amp;gt;
          &amp;lt;dc:li&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is the title&amp;lt;/dc:li&amp;gt;
        &amp;lt;/rdf:Alt&amp;gt;
      &amp;lt;/dc:title&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;          &amp;lt;dc:title&amp;gt;
            &amp;lt;rdf:Alt&amp;gt;
              &amp;lt;rdf:li xml:lang=&lt;span class=&quot;code-quote&quot;&gt;&quot;x-&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;PDF/A-1b test&amp;lt;/rdf:li&amp;gt;
            &amp;lt;/rdf:Alt&amp;gt;
          &amp;lt;/dc:title&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14634052" author="tallison@mitre.org" created="Mon, 20 Jul 2015 20:46:14 +0000"  >&lt;p&gt;No good deed goes unpunished.  Thank you!  Let me know if I should open an issue.&lt;/p&gt;</comment>
                            <comment id="14634065" author="tilman" created="Mon, 20 Jul 2015 20:54:06 +0000"  >&lt;p&gt;Yes please do and attach the file. It&apos;s late here. It&apos;s two bugs, the wrong XML is produced, and the bad XML isn&apos;t flagged by preflight.&lt;/p&gt;</comment>
                            <comment id="14634391" author="tallison@mitre.org" created="Tue, 21 Jul 2015 01:36:06 +0000"  >&lt;p&gt;Slight modification of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;&apos;s example added in r1692042.  Will wait for &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2896&quot; title=&quot;XMPBox not creating valid &amp;quot;title&amp;quot; entry in DublinCoreSchema in trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2896&quot;&gt;&lt;del&gt;PDFBOX-2896&lt;/del&gt;&lt;/a&gt; to generate test file.&lt;/p&gt;</comment>
                            <comment id="14634743" author="hudson" created="Tue, 21 Jul 2015 08:12:49 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #796 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/796/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/796/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1678&quot; title=&quot;PDF metadata extraction fails to spot UTF-16 encoded title&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1678&quot;&gt;&lt;del&gt;TIKA-1678&lt;/del&gt;&lt;/a&gt; &amp;#8211; initial commit.  Need to wait for fix to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2896&quot; title=&quot;XMPBox not creating valid &amp;quot;title&amp;quot; entry in DublinCoreSchema in trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2896&quot;&gt;&lt;del&gt;PDFBOX-2896&lt;/del&gt;&lt;/a&gt; to generate test file. (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1692042&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1692042&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/pdfbox&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/pdfbox/pdfparser&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/pdfbox/pdfparser/PDFOctalUnicodeDecoder.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14635032" author="anjackson" created="Tue, 21 Jul 2015 12:28:45 +0000"  >&lt;p&gt;Sorry for the delay. Here are the results:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;title starts with \376\377: 252,903 out of 21,204,500 PDFs.&lt;/li&gt;
	&lt;li&gt;title starts with \377: 0 out of 21,204,500 PDFs.&lt;/li&gt;
	&lt;li&gt;title starts with \357: 0 out of 21,204,500 PDFs.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There is a tiny handful of mixed-up oddities, that look like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
        &lt;span class=&quot;code-quote&quot;&gt;&quot;url&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.praksis.gr/assets/files/h_PRAKSIS_sto_big_march.pdf&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;wayback_date&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;20141205021311&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;title&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;(Microsoft Word - \\323\\365\\354\\354\\345\\364\\357\\367\\336 \\364\\347\\362 PRAKSIS \\363\\364\\357 BIG MARCH _1_)&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;generator&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;PScript5.dll Version 5.2.2&quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;GPL Ghostscript 8.15&quot;&lt;/span&gt;]},
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(see the original here: &lt;a href=&quot;http://web.archive.org/web/20150721122710/http://www.praksis.gr/assets/files/h_PRAKSIS_sto_big_march.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://web.archive.org/web/20150721122710/http://www.praksis.gr/assets/files/h_PRAKSIS_sto_big_march.pdf&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;But these are such minor exceptions I don&apos;t think it&apos;s worth pursuing. &lt;/p&gt;</comment>
                            <comment id="14637232" author="tilman" created="Wed, 22 Jul 2015 17:26:43 +0000"  >&lt;p&gt;API has changed again. This code works:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Tika1678 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; COSParser
{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
    {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s1 = &quot;\\376\\377\\000B\\000u\\000l\\000l\\000z\\000i\\000p\\000 \\000P\\000D\\000F\\000 \\000P\\000r\\000i\\000n\\000t\\000e\\000r\\000 \

\000/\\000 \\000w\\000w\\000w\\000.\\000b\\000u\\000l\\000l\\000z\\000i\\000p\\000.\\000c\\000o\\000m\\000 \\000/\\000 \\000F\\000r\\000e\\000e\\000w\

\000a\\000r\\000e\\000 \\000E\\000d\\000i\\000t\\000i\\000o\\000n&quot;;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s2 = &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt; + s1 + &lt;span class=&quot;code-quote&quot;&gt;&quot;)&quot;&lt;/span&gt;;
        
        ByteArrayInputStream bais = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(s2.getBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;ISO-8859-1&quot;&lt;/span&gt;));
        Tika1678 tika1678 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Tika1678(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RandomAccessBufferedFileInputStream(bais));
        COSString cosString = tika1678.parseCOSString();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;cosString: &quot;&lt;/span&gt; + cosString.getString());
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Tika1678(RandomAccessRead source)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(source);
    }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14637535" author="tallison@mitre.org" created="Wed, 22 Jul 2015 20:05:57 +0000"  >&lt;p&gt;Got it.  Thank you!&lt;/p&gt;</comment>
                            <comment id="14640370" author="tallison@mitre.org" created="Fri, 24 Jul 2015 12:15:40 +0000"  >&lt;p&gt;I&apos;ll try to build a test file today with the fix on &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2896&quot; title=&quot;XMPBox not creating valid &amp;quot;title&amp;quot; entry in DublinCoreSchema in trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2896&quot;&gt;&lt;del&gt;PDFBOX-2896&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Because &lt;tt&gt;parseCOSString()&lt;/tt&gt; is protected in PDFBox (o.a.pdfbox.pdfparser.BaseParser), I have to put the Tika class that subclasses BaseParser in o.a.pdfbox.pdfparser.  Because of this, we&apos;re now getting two build warnings:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;when building the tika-parsers module:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[WARNING] Warning building bundle org.apache.tika:tika-parsers:bundle:1.10-SNAPSHOT : Split package org/apache/pdfbox/pdfparser
Use directive -split-package:=(merge-first|merge-last|error|first) on Export/Private Package instruction to get rid of this warning
Package found in   [Jar:., Jar:pdfbox]
Reference from     ....m2\repository\org\apache\pdfbox\pdfbox\1.8.10\pdfbox-1.8.10.jar
Classpath          [Jar:., Jar:org.osgi.core,
.... 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;And during the build of tika-app:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[WARNING] tika-parsers-1.10-SNAPSHOT.jar, pdfbox-1.8.10.jar define 19 overlapppi     ng classes:
[WARNING]   - org.apache.pdfbox.pdfparser.PDFParser$ConflictObj
[WARNING]   - org.apache.pdfbox.pdfparser.PDFObjectStreamParser
[WARNING]   - org.apache.pdfbox.pdfparser.PDFXRef
[WARNING]   - org.apache.pdfbox.pdfparser.VisualSignatureParser
[WARNING]   - org.apache.pdfbox.pdfparser.NonSequentialPDFParser
[WARNING]   - org.apache.pdfbox.pdfparser.BaseParser
[WARNING]   - org.apache.pdfbox.pdfparser.PDFStreamParser$1
[WARNING]   - org.apache.pdfbox.pdfparser.XrefTrailerResolver
[WARNING]   - org.apache.pdfbox.pdfparser.PDFStreamParser
[WARNING]   - org.apache.pdfbox.pdfparser.PDFXRefStream$NormalReference
[WARNING]   - 9 more...
[WARNING] maven-shade-plugin has detected that some .class files
[WARNING] are present in two or more JARs. When this happens, only
[WARNING] one single version of the class is copied in the uberjar.
[WARNING] Usually this is not harmful and you can skeep these
[WARNING] warnings, otherwise try to manually exclude artifacts
[WARNING] based on mvn dependency:tree -Ddetail=true and the above
[WARNING] output
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Any recommendations for a fix?  Some options that I see:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Ignore the warnings (don&apos;t like this in principal)&lt;/li&gt;
	&lt;li&gt;Figure out the right way to -split-package-merge-x (don&apos;t want to wallpaper over other cases where this might happen in the future with other packages unrelated to this issue)&lt;/li&gt;
	&lt;li&gt;Copy and paste relevant code from PDFBox (that particular call isn&apos;t extremely long/complex, but I don&apos;t like this for maintainability/upgrades, etc.)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Other options?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bobpaulin&quot; class=&quot;user-hover&quot; rel=&quot;bobpaulin&quot;&gt;bobpaulin&lt;/a&gt;, any recommendations from the OSGi side?&lt;/p&gt;
</comment>
                            <comment id="14640423" author="bobpaulin" created="Fri, 24 Jul 2015 13:09:28 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;tallison@mitre.org&lt;/a&gt; before putting the Tika class in a different package could you subclass the PDFBox BaseParser with a Tika Class?  Protected methods are also available to Classes that extend them so it might be better to take this approach than aligning the packages.  &lt;/p&gt;

&lt;p&gt;If you need to use split package there are directives that allow you to merge them and generally the ordering is only really a big deal when there may be class collisions.  But I think by using subclassing you might remove the split package completely.&lt;/p&gt;</comment>
                            <comment id="14640458" author="tallison@mitre.org" created="Fri, 24 Jul 2015 13:34:18 +0000"  >&lt;p&gt;Duh.  I had subclassed BaseParser, but then I was trying to call parseCOSString from the client object.  When I added a wrapper around the subclass (&lt;tt&gt;public COSString myParseCOSString()&lt;/tt&gt;, all is well.  Sorry about that, and thank you.&lt;/p&gt;</comment>
                            <comment id="14640461" author="bobpaulin" created="Fri, 24 Jul 2015 13:37:30 +0000"  >&lt;p&gt;No worries!  Glad it worked out without a split package.&lt;/p&gt;</comment>
                            <comment id="14640480" author="tallison@mitre.org" created="Fri, 24 Jul 2015 14:05:43 +0000"  >&lt;p&gt;As a former professor of (Ancient) Greek, it hurts to lose any ISO-8859-7...  If this type of thing (no BOM in PDFEncoded xmp strings) were common, we could modify our code to try to handle this.  But I concur that this probably has diminishing returns.&lt;/p&gt;</comment>
                            <comment id="14640484" author="tallison@mitre.org" created="Fri, 24 Jul 2015 14:08:19 +0000"  >&lt;p&gt;Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anjackson&quot; class=&quot;user-hover&quot; rel=&quot;anjackson&quot;&gt;anjackson&lt;/a&gt;, for raising this.  Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;, for helping us integrate PDFBox&apos;s BaseParser, and thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msahyoun&quot; class=&quot;user-hover&quot; rel=&quot;msahyoun&quot;&gt;msahyoun&lt;/a&gt; for fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2896&quot; title=&quot;XMPBox not creating valid &amp;quot;title&amp;quot; entry in DublinCoreSchema in trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2896&quot;&gt;&lt;del&gt;PDFBOX-2896&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Fixed with test file and test case in r1692521.&lt;/p&gt;</comment>
                            <comment id="14641460" author="hudson" created="Sat, 25 Jul 2015 08:14:59 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #800 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/800/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/800/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1678&quot; title=&quot;PDF metadata extraction fails to spot UTF-16 encoded title&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1678&quot;&gt;&lt;del&gt;TIKA-1678&lt;/del&gt;&lt;/a&gt;: clean up and add test file and unit test (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1692521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1692521&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/pdfbox&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFEncodedStringDecoder.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParser.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/pdf/PDFParserTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/testPDF_PDFEncodedStringInXMP.pdf&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14660623" author="tallison@mitre.org" created="Thu, 6 Aug 2015 19:02:02 +0000"  >&lt;p&gt;I found vaguely similar numbers against govdocs1+slice of Common Crawl: 1293 out of 500k had \376\377 starting the title field and 14 files had another PDFEncoding encoding in the title field without the BOM.&lt;/p&gt;

&lt;p&gt;Thank you, again for raising this!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12846421">PDFBOX-2897</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12846418">PDFBOX-2896</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h8iv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>