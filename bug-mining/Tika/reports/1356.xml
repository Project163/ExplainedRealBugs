<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:04:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-4126] PDF XMP ModifyDate extracted without TimeZone info</title>
                <link>https://issues.apache.org/jira/browse/TIKA-4126</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I&apos;ve run:&lt;br/&gt;
&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@localhost Downloads&amp;#93;&lt;/span&gt;# java -jar tika-app-2.9.0.jar sobreavisoEditado3.pdf | grep xmp&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;that returned a time in UTC&lt;/p&gt;


&lt;p&gt;&lt;em&gt;WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 07:42:34,238 org.apache.pdfbox.pdmodel.font.PDType1Font Using fallback font LiberationSans for base font Symbol&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 07:42:34,241 org.apache.pdfbox.pdmodel.font.PDType1Font Using fallback font LiberationSans for base font ZapfDingbats&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;&amp;lt;meta name=&quot;xmp:ModifyDate&quot; content=&quot;2023-09-06T13:35:38Z&quot;/&amp;gt;&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;&amp;lt;meta name=&quot;xmp:MetadataDate&quot; content=&quot;2023-09-06T13:35:38Z&quot;/&amp;gt;&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;&amp;lt;meta name=&quot;xmpTPg:NPages&quot; content=&quot;11&quot;/&amp;gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;While running:&lt;/p&gt;

&lt;p&gt;&#160;{{java -jar pdfbox-app-2.0.29.jar ExtractXMP -console sobreavisoEditado3.pdf }}&lt;/p&gt;

&lt;p&gt;Returned the correct info with the timezone info (-04:00):&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;tt&gt;&amp;lt;?xpacket begin=&quot;&quot; id=&quot;W5M0MpCehiHzreSzNTczkc9d&quot;?&amp;gt;&amp;lt;x:xmpmeta xmlns:x=&quot;adobe:ns:meta/&quot;&amp;gt;&amp;lt;rdf:RDF xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;&amp;gt;&amp;lt;rdf:Description rdf:about=&quot;&quot; xmp:ModifyDate=&quot;&lt;b&gt;2023-09-06T13:35:38&lt;font color=&quot;#de350b&quot;&gt;&lt;ins&gt;-04:00&lt;/ins&gt;&lt;/font&gt;&lt;/b&gt;&quot; xmlns:xmp=&quot;http://ns.adobe.com/xap/1.0/&quot;&amp;gt;&amp;lt;xmp:MetadataDate&amp;gt;2023-09-06T13:35:38-04:00&amp;lt;/xmp:MetadataDate&amp;gt;&amp;lt;/rdf:Description&amp;gt;&amp;lt;/rdf:RDF&amp;gt;&amp;lt;/x:xmpmeta&amp;gt;&amp;lt;?xpacket end=&quot;w&quot;?&amp;gt;&lt;/tt&gt;{&lt;tt&gt;}&lt;/tt&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;So the metadata string had striped its timezone info, without making any HOUR OF DAY shift to the UTC timezone.&lt;/em&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13550221">TIKA-4126</key>
            <summary>PDF XMP ModifyDate extracted without TimeZone info</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="patrickdalla">Patrick Dalla Bernardina</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Sep 2023 13:20:49 +0000</created>
                <updated>Tue, 12 Sep 2023 13:25:21 +0000</updated>
                            <resolved>Tue, 12 Sep 2023 13:25:21 +0000</resolved>
                                    <version>2.4.0</version>
                    <version>2.7.0</version>
                    <version>2.8.0</version>
                    <version>2.9.0</version>
                                    <fixVersion>2.9.1</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="604800">168h</timeoriginalestimate>
                            <timeestimate seconds="604800">168h</timeestimate>
                                        <comments>
                            <comment id="17763739" author="patrickdalla" created="Mon, 11 Sep 2023 14:15:00 +0000"  >&lt;p&gt;I could not find a way to MOVE this issue to PDFBOX project. Could anyone do this or tell me how to move?&lt;/p&gt;</comment>
                            <comment id="17763744" author="patrickdalla" created="Mon, 11 Sep 2023 14:19:01 +0000"  >&lt;p&gt;I will create this issue in PDFBOX&lt;/p&gt;</comment>
                            <comment id="17763753" author="patrickdalla" created="Mon, 11 Sep 2023 14:40:26 +0000"  >&lt;p&gt;It seems that PDFBOX extracts correctly the date as a Calendar object with the correct zone info. So it seems realy a TIKA problem.&lt;/p&gt;</comment>
                            <comment id="17763814" author="githubbot" created="Mon, 11 Sep 2023 16:44:08 +0000"  >&lt;p&gt;tballison opened a new pull request, #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;lt;!--&lt;br/&gt;
     Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
     or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
     distributed with this work for additional information&lt;br/&gt;
     regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
     to you under the Apache License, Version 2.0 (the&lt;br/&gt;
     &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
     with the License.  You may obtain a copy of the License at&lt;/p&gt;

&lt;p&gt;       &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;     Unless required by applicable law or agreed to in writing,&lt;br/&gt;
     software distributed under the License is distributed on an&lt;br/&gt;
     &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
     KIND, either express or implied.  See the License for the&lt;br/&gt;
     specific language governing permissions and limitations&lt;br/&gt;
     under the License.&lt;br/&gt;
   --&amp;gt;&lt;/p&gt;

&lt;p&gt;   Thanks for your contribution to &lt;span class=&quot;error&quot;&gt;&amp;#91;Apache Tika&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://tika.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tika.apache.org/&lt;/a&gt;)! Your help is appreciated!&lt;/p&gt;

&lt;p&gt;   Before opening the pull request, please verify that&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;there is an open issue on the &lt;span class=&quot;error&quot;&gt;&amp;#91;Tika issue tracker&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/projects/TIKA&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/TIKA&lt;/a&gt;) which describes the problem or the improvement. We cannot accept pull requests without an issue because the change wouldn&apos;t be listed in the release notes.&lt;/li&gt;
	&lt;li&gt;the issue ID (`TIKA-XXXX`)&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;is referenced in the title of the pull request&lt;/li&gt;
	&lt;li&gt;and placed in front of your commit messages surrounded by square brackets (`&lt;span class=&quot;error&quot;&gt;&amp;#91;TIKA-XXXX&amp;#93;&lt;/span&gt; Issue or pull request title`)&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;commits are squashed into a single one (or few commits for larger changes)&lt;/li&gt;
	&lt;li&gt;Tika is successfully built and unit tests pass by running `mvn clean test`&lt;/li&gt;
	&lt;li&gt;there should be no conflicts when merging the pull request branch into the &lt;b&gt;recent&lt;/b&gt; `main` branch. If there are conflicts, please try to rebase the pull request branch on top of a freshly pulled `main` branch&lt;/li&gt;
	&lt;li&gt;if you add new module that downstream users will depend upon add it to relevant group in `tika-bom/pom.xml`.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   We will be able to faster integrate your pull request if these conditions are met. If you have any questions how to fix your problem or about using Tika in general, please sign up for the &lt;span class=&quot;error&quot;&gt;&amp;#91;Tika mailing list&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://tika.apache.org/mail-lists.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tika.apache.org/mail-lists.html&lt;/a&gt;). Thanks!&lt;/p&gt;


</comment>
                            <comment id="17763851" author="patrickdalla" created="Mon, 11 Sep 2023 17:53:46 +0000"  >&lt;p&gt;Hi Tim,&lt;/p&gt;

&lt;p&gt;I found the problem. When setting Calendar object timezone, it does not sync remainder internal fields immediatelly.&lt;/p&gt;

&lt;p&gt;So, when the info is read from PDF XMP metadata, the original instance timezone is UTC, and it sets to the informed timezone (-4 in my case) but does not change any other internal fields.&lt;/p&gt;

&lt;p&gt;When formatDate method of DateUtils is called, it sets again the timezone of the Calendar object, this time with UTC. Only after, in doFormatDate method, when the get method of Calendar is called, it sync all other fields state, but as the timezone is in UTC, it does not make the HOUR field shift.&lt;/p&gt;

&lt;p&gt;I could overcome this just calling &quot;date.get(Calendar.HOUR_OF_DAY);&quot; right before &quot;date.setTimeZone(UTC);&quot; in DateUtils, as the get method forces the first timezone setting done when metadata info was read to be applied, so latter timezone modification also shifts correctly the hour_of_day field.&#160;&lt;/p&gt;</comment>
                            <comment id="17763884" author="tallison@mitre.org" created="Mon, 11 Sep 2023 19:14:12 +0000"  >&lt;p&gt;If you can take a look at the PR, that&apos;d be great. By the time someone passes DateUtils a Calendar, there&apos;s already a timezone on it, so we may as well just rely on Instant&apos;s toString(), truncated to seconds?&lt;/p&gt;</comment>
                            <comment id="17763912" author="githubbot" created="Mon, 11 Sep 2023 20:31:04 +0000"  >&lt;p&gt;patrickdalla commented on PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329#issuecomment-1714535743&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#issuecomment-1714535743&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &quot;By the time someone passes DateUtils a Calendar, there&apos;s already a timezone on it&quot; from tika-4126 ISSUE:&lt;/p&gt;

&lt;p&gt;   Yes, but if you see the Calendar code, this timezone that was read from XMP metadata does not immediately triggers any method to shift the hour of day field. Neither this setTimezone method, nor the &quot;date.setTimeZone(UTC);&quot; method in line 92 of DateUtils formatDate method.&lt;/p&gt;

&lt;p&gt;   What really triggers the field hour of day sync, is the first &quot;calendar.get(Calendar.YEAR)&quot; that is called in doFormatDate method (line 116). But when this is triggered, the timezone is set as UTC, ignoring the first setTimezone called when the XMP metadata was read.&lt;/p&gt;

&lt;p&gt;   Just add &quot;date.get(Calendar.DAY_OF_MONTH)&quot; right before line 92 of DateUtils formatDate and it will force sync the XMP metadata timezone read, so, in subsequent calendar.get(Calendar.DAY_OF_MONTH) done at line 117, the shift of the hour of day (and other fields) will be correctly done.&lt;/p&gt;

</comment>
                            <comment id="17763916" author="githubbot" created="Mon, 11 Sep 2023 20:33:30 +0000"  >&lt;p&gt;patrickdalla commented on PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329#issuecomment-1714538739&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#issuecomment-1714538739&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &quot;so we may as well just rely on Instant&apos;s toString(), truncated to seconds?&quot;&lt;/p&gt;

&lt;p&gt;   I don&apos;t think this helps anyhow on solving the tika-4126 ISSUE.&lt;/p&gt;

</comment>
                            <comment id="17763921" author="githubbot" created="Mon, 11 Sep 2023 20:39:07 +0000"  >&lt;p&gt;tballison commented on PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329#issuecomment-1714545632&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#issuecomment-1714545632&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; I don&apos;t think this helps anyhow on solving the tika-4126 ISSUE.&lt;/p&gt;

&lt;p&gt;   The unit test that I added shows that it does help, I think?  Also, I had to fix 3 other unit tests after making this correction.&lt;/p&gt;

&lt;p&gt;   The documentation here (&lt;a href=&quot;https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html#toString(&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html#toString(&lt;/a&gt;)) and &lt;a href=&quot;https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html#toString(&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html#toString(&lt;/a&gt;) suggests that Java is correctly converting the times to UTC in Instant&apos;s toString method?&lt;/p&gt;

&lt;p&gt;   Please let me know if the unit tests are wrong or if I&apos;m misunderstanding Java or the original problem.  Thank you!&lt;/p&gt;


</comment>
                            <comment id="17763923" author="githubbot" created="Mon, 11 Sep 2023 20:42:55 +0000"  >&lt;p&gt;tballison commented on code in PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329#discussion_r1322053276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#discussion_r1322053276&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-xmp-commons/src/test/java/org/apache/tika/parser/xmp/JempboxExtractorTest.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -134,4 +134,14 @@ public void testMaxXMPMMHistory() throws Exception {&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testModifiedTZ() throws Exception {&lt;br/&gt;
+        Metadata m = new Metadata();&lt;br/&gt;
+        JempboxExtractor ex = new JempboxExtractor(m);&lt;br/&gt;
+        try (InputStream is = getResourceAsStream(&quot;/test-documents/testXMP.xmp&quot;)) &lt;/p&gt;
{
+            ex.parse(is);
+        }
&lt;p&gt;+        assertEquals(&quot;2014-03-04T22:50:41Z&quot;, m.get(XMPMM.HISTORY_WHEN));&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   @patrickdalla This is the underlying xmp: ```&amp;lt;stEvt:when&amp;gt;2014-03-04T23:50:41+01:00&amp;lt;/stEvt:when&amp;gt;```&lt;/p&gt;

&lt;p&gt;   This is the desired output, right?&lt;/p&gt;


</comment>
                            <comment id="17763924" author="githubbot" created="Mon, 11 Sep 2023 20:44:04 +0000"  >&lt;p&gt;patrickdalla commented on PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329#issuecomment-1714551602&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#issuecomment-1714551602&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Yes, it seems you misunderstood (or I misinformed) the issue.&lt;/p&gt;

&lt;p&gt;   There is a XMP metadata tag in the PDF with the values:&lt;br/&gt;
   &amp;lt;rdf:Description rdf:about=&quot;&quot; *&lt;b&gt;xmp:ModifyDate=&quot;2023-09-06T13:35:38-04:00&quot;&lt;/b&gt;* xmlns:xmp=&quot;http://ns.adobe.com/xap/1.0/&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;   Look that the timezone is -04:00. But tika does not extracts the timezone, parsing the value as &quot;2023-09-06T13:35:38Z&quot;, as it was in UTC.&lt;/p&gt;

</comment>
                            <comment id="17763926" author="githubbot" created="Mon, 11 Sep 2023 20:49:16 +0000"  >&lt;p&gt;patrickdalla commented on PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329#issuecomment-1714558029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#issuecomment-1714558029&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Look at the code execution on the following video I have done:&lt;br/&gt;
   &lt;a href=&quot;https://github.com/apache/tika/assets/28692427/63f7cf7a-11b2-40e0-9720-6af181b8c8b3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/assets/28692427/63f7cf7a-11b2-40e0-9720-6af181b8c8b3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   If I uncomment the Calendar get method, the preceding setTimezone is correctly applied, and the following setTimezone to UTC and get methods work well, shifting the hour_of_day field correctly.&lt;/p&gt;

&lt;p&gt;   If it is kept commented, when the setTimezone to UTC is called, the following get method does not shift the internal fields as it considers them already synchronized.&lt;/p&gt;


</comment>
                            <comment id="17763928" author="githubbot" created="Mon, 11 Sep 2023 20:51:29 +0000"  >&lt;p&gt;patrickdalla commented on PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329#issuecomment-1714560889&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#issuecomment-1714560889&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   A similar behaviour occurs.&lt;br/&gt;
   When the metadata is read, the setTimezone is called, but not applied. When the second setTimezone to UTC is called to &apos;normalize&apos; the metadata timezone information, the first wasn&apos;t applied, so, the field are not shifted.&lt;/p&gt;

</comment>
                            <comment id="17763931" author="githubbot" created="Mon, 11 Sep 2023 20:56:16 +0000"  >&lt;p&gt;patrickdalla commented on code in PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329#discussion_r1322065384&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#discussion_r1322065384&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-xmp-commons/src/test/java/org/apache/tika/parser/xmp/JempboxExtractorTest.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -134,4 +134,14 @@ public void testMaxXMPMMHistory() throws Exception {&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testModifiedTZ() throws Exception {&lt;br/&gt;
+        Metadata m = new Metadata();&lt;br/&gt;
+        JempboxExtractor ex = new JempboxExtractor(m);&lt;br/&gt;
+        try (InputStream is = getResourceAsStream(&quot;/test-documents/testXMP.xmp&quot;)) &lt;/p&gt;
{
+            ex.parse(is);
+        }
&lt;p&gt;+        assertEquals(&quot;2014-03-04T22:50:41Z&quot;, m.get(XMPMM.HISTORY_WHEN));&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   Yes. It seems the desired. To normalize the string to UTC, making the correct time shifting. So, if it is working, that should really solve the issue.&lt;/p&gt;


</comment>
                            <comment id="17763933" author="githubbot" created="Mon, 11 Sep 2023 20:57:51 +0000"  >&lt;p&gt;patrickdalla commented on code in PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329#discussion_r1322066704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#discussion_r1322066704&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-xmp-commons/src/test/java/org/apache/tika/parser/xmp/JempboxExtractorTest.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -134,4 +134,14 @@ public void testMaxXMPMMHistory() throws Exception {&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testModifiedTZ() throws Exception {&lt;br/&gt;
+        Metadata m = new Metadata();&lt;br/&gt;
+        JempboxExtractor ex = new JempboxExtractor(m);&lt;br/&gt;
+        try (InputStream is = getResourceAsStream(&quot;/test-documents/testXMP.xmp&quot;)) &lt;/p&gt;
{
+            ex.parse(is);
+        }
&lt;p&gt;+        assertEquals(&quot;2014-03-04T22:50:41Z&quot;, m.get(XMPMM.HISTORY_WHEN));&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   How could I download a tika app snapshot with this patch to test on my PDF file?&lt;/p&gt;


</comment>
                            <comment id="17763944" author="githubbot" created="Mon, 11 Sep 2023 21:37:25 +0000"  >&lt;p&gt;tballison commented on PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329#issuecomment-1714619356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#issuecomment-1714619356&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; Yes, it seems you misunderstood (or I misinformed) the issue.&lt;br/&gt;
   &amp;gt; &lt;br/&gt;
   &amp;gt; There is a XMP metadata tag in the PDF with the values: &amp;lt;rdf:Description rdf:about=&quot;&quot; *&lt;b&gt;xmp:ModifyDate=&quot;2023-09-06T13:35:38-04:00&quot;&lt;/b&gt;* xmlns:xmp=&quot;&lt;a href=&quot;http://ns.adobe.com/xap/1.0/&amp;quot;&amp;gt;&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ns.adobe.com/xap/1.0/&quot;&amp;gt;&lt;/a&gt;(&lt;a href=&quot;http://ns.adobe.com/xap/1.0/%22%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ns.adobe.com/xap/1.0/%22%3E&lt;/a&gt;)&lt;br/&gt;
   &amp;gt; &lt;br/&gt;
   &amp;gt; Look that the timezone is -04:00. But tika does not extracts the timezone, parsing the value as &quot;2023-09-06T13:35:38Z&quot;, as it was in UTC.&lt;/p&gt;

&lt;p&gt;   When I add the date string from your original issue to the testXMP.xmp file, I get this from Tika: &lt;br/&gt;
   ```xmp:ModifyDate : 2023-09-06T17:35:38Z```&lt;/p&gt;

&lt;p&gt;   That&apos;s what you&apos;d expect, right?&lt;/p&gt;

</comment>
                            <comment id="17763945" author="githubbot" created="Mon, 11 Sep 2023 21:38:49 +0000"  >&lt;p&gt;patrickdalla commented on PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329#issuecomment-1714620873&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#issuecomment-1714620873&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   yes. thanks&lt;/p&gt;

&lt;p&gt;   Em seg., 11 de set. de 2023 17:37, Tim Allison **&lt;b&gt;@&lt;/b&gt;*&lt;b&gt;.&lt;/b&gt;**&amp;gt;&lt;br/&gt;
   escreveu:&lt;/p&gt;

&lt;p&gt;   &amp;gt; Yes, it seems you misunderstood (or I misinformed) the issue.&lt;br/&gt;
   &amp;gt;&lt;br/&gt;
   &amp;gt; There is a XMP metadata tag in the PDF with the values: &amp;lt;rdf:Description&lt;br/&gt;
   &amp;gt; rdf:about=&quot;&quot; &lt;b&gt;xmp:ModifyDate=&quot;2023-09-06T13:35:38-04:00&quot;&lt;/b&gt; xmlns:xmp=&quot;&lt;br/&gt;
   &amp;gt; &lt;a href=&quot;http://ns.adobe.com/xap/1.0/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ns.adobe.com/xap/1.0/&lt;/a&gt;&quot;&amp;gt;&lt;br/&gt;
   &amp;gt;&lt;br/&gt;
   &amp;gt; Look that the timezone is -04:00. But tika does not extracts the timezone,&lt;br/&gt;
   &amp;gt; parsing the value as &quot;2023-09-06T13:35:38Z&quot;, as it was in UTC.&lt;br/&gt;
   &amp;gt;&lt;br/&gt;
   &amp;gt; When I add the date string from your original issue to the testXMP.xmp&lt;br/&gt;
   &amp;gt; file, I get this from Tika:&lt;br/&gt;
   &amp;gt; xmp:ModifyDate : 2023-09-06T17:35:38Z&lt;br/&gt;
   &amp;gt;&lt;br/&gt;
   &amp;gt; That&apos;s what you&apos;d expect, right?&lt;br/&gt;
   &amp;gt;&lt;br/&gt;
   &amp;gt; &#8212;&lt;br/&gt;
   &amp;gt; Reply to this email directly, view it on GitHub&lt;br/&gt;
   &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/tika/pull/1329#issuecomment-1714619356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329#issuecomment-1714619356&lt;/a&gt;&amp;gt;, or&lt;br/&gt;
   &amp;gt; unsubscribe&lt;br/&gt;
   &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/notifications/unsubscribe-auth/AG247S3J5PYM25N7DM5JMTDXZ6AB3ANCNFSM6AAAAAA4TTWCUM&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/notifications/unsubscribe-auth/AG247S3J5PYM25N7DM5JMTDXZ6AB3ANCNFSM6AAAAAA4TTWCUM&lt;/a&gt;&amp;gt;&lt;br/&gt;
   &amp;gt; .&lt;br/&gt;
   &amp;gt; You are receiving this because you were mentioned.Message ID:&lt;br/&gt;
   &amp;gt; **&lt;b&gt;@&lt;/b&gt;*&lt;b&gt;.&lt;/b&gt;**&amp;gt;&lt;br/&gt;
   &amp;gt;&lt;/p&gt;


</comment>
                            <comment id="17763946" author="githubbot" created="Mon, 11 Sep 2023 21:41:03 +0000"  >&lt;p&gt;tballison merged PR #1329:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tika/pull/1329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/pull/1329&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17763947" author="tallison@mitre.org" created="Mon, 11 Sep 2023 21:42:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=patrickdalla&quot; class=&quot;user-hover&quot; rel=&quot;patrickdalla&quot;&gt;patrickdalla&lt;/a&gt; you should be able to pull a snapshot build from roughly here: &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk11/1237/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk11/1237/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That&apos;s the build that was triggered by a change I made a few hours ago.&lt;/p&gt;

&lt;p&gt;This merged PR will probably be 1238?&lt;/p&gt;</comment>
                            <comment id="17763970" author="hudson" created="Mon, 11 Sep 2023 23:37:33 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika &#187; tika-main-jdk11 #1238 (See &lt;a href=&quot;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk11/1238/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Tika/job/tika-main-jdk11/1238/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-4126&quot; title=&quot;PDF XMP ModifyDate extracted without TimeZone info&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-4126&quot;&gt;&lt;del&gt;TIKA-4126&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix bug in DateUtils that stripped timezone information from incoming Calendar objects (#1329) (github: &lt;a href=&quot;https://github.com/apache/tika/commit/94c6d922ad028074f5c1bb98d5cbacf46d4e21de&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/94c6d922ad028074f5c1bb98d5cbacf46d4e21de&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-xmp-commons/src/test/java/org/apache/tika/parser/xmp/JempboxExtractorTest.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/utils/DateUtils.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-pdf-module/src/test/java/org/apache/tika/parser/pdf/CustomTikaXMPTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/tika-parsers-standard/tika-parsers-standard-modules/tika-parser-pdf-module/src/test/java/org/apache/tika/parser/pdf/PDFParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17764183" author="tallison@mitre.org" created="Tue, 12 Sep 2023 13:25:21 +0000"  >&lt;p&gt;Please re-open if you find any other surprises.  Thank you for opening this issue and helping to fix it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ka4g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>