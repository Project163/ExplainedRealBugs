<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:00:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-1999] org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1999</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;When trying to read the following PDF document:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.arcadiz.com/content/assets/Artikel_CloudWorks_Vernieuwingen_zorg_vragen_om_veel_snellere_verbindingen.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.arcadiz.com/content/assets/Artikel_CloudWorks_Vernieuwingen_zorg_vragen_om_veel_snellere_verbindingen.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TIKA crashes for me with a java.lang.StackOverflowError, caused by a large number of recursion in:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    at org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For some reason, the Tika App doesn&apos;t exhibit this behavior, but the following MWE exposes the issue for me:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import org.apache.tika.metadata.Metadata;
import org.apache.tika.parser.AutoDetectParser;
import org.apache.tika.parser.ParseContext;
import org.apache.tika.sax.ToHTMLContentHandler;

public class test
{
    public static void main(String [] args) throws Exception {
        String p = &quot;/home/eggie/faulty_pdf_document.pdf&quot;;
        
        FileInputStream input = new FileInputStream(new File(p));
        AutoDetectParser tk = new AutoDetectParser();
        ByteArrayOutputStream os = new ByteArrayOutputStream();
        ToHTMLContentHandler handler = new ToHTMLContentHandler(os, &quot;UTF-8&quot;);
        ParseContext pc = new ParseContext();
        System.out.println(&quot;Parsing&quot;);
        tk.parse(input, handler, new Metadata(), pc);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Ubuntu 16.04 (64 bit)&lt;br/&gt;
Oracle Java 1.8.0_91-b14 (64 bit)&lt;/p&gt;</environment>
        <key id="12976474">TIKA-1999</key>
            <summary>org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="MadEgg">Egbert</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jun 2016 14:44:16 +0000</created>
                <updated>Mon, 12 Apr 2021 13:01:31 +0000</updated>
                            <resolved>Wed, 8 Jun 2016 15:55:47 +0000</resolved>
                                    <version>1.13</version>
                                    <fixVersion>1.14</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15319759" author="tallison@mitre.org" created="Wed, 8 Jun 2016 00:17:11 +0000"  >&lt;p&gt;Thank you for opening this and sharing a triggering file. If you use pdfbox-app&apos;s ExtractText, do you run into the same issue? That&apos;d be PDFBox 2.0.1.&lt;/p&gt;

&lt;p&gt;Will take a look in next few days.&lt;/p&gt;</comment>
                            <comment id="15320571" author="tallison@mitre.org" created="Wed, 8 Jun 2016 13:43:46 +0000"  >&lt;p&gt;PDFBox&apos;s ExtractText works on this file.&lt;/p&gt;

&lt;p&gt;The stackoverflow is caused by the XMPMM metadata extraction that I added on &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1894&quot; title=&quot;Add XMPMM metadata extraction to JempboxExtractor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1894&quot;&gt;&lt;del&gt;TIKA-1894&lt;/del&gt;&lt;/a&gt;.  This doc has 6,269 media management &quot;events&quot;. &lt;/p&gt;

&lt;p&gt;I don&apos;t know why this is only a problem for the ToHTMLHandler and not for the straight ToXMLHandler.&lt;/p&gt;

&lt;p&gt;We could add limit on the number of events that are added to the metadata.  Say, 1,000?&lt;/p&gt;</comment>
                            <comment id="15320577" author="tallison@mitre.org" created="Wed, 8 Jun 2016 13:49:30 +0000"  >&lt;p&gt;As a temporary workaround, you can increase your stack size: -Xss4m.&lt;/p&gt;</comment>
                            <comment id="15320580" author="madegg" created="Wed, 8 Jun 2016 13:52:31 +0000"  >&lt;p&gt;I&apos;m sorry, I don&apos;t really know what the effect of the limit would be. I am using Tika to extract plain text from PDF documents to be able to import them into a search index, so I do not have a lot of interest in the metadata.&lt;/p&gt;

&lt;p&gt;I&apos;ll try your suggested workaround to increase the stack size. Thanks!&lt;/p&gt;</comment>
                            <comment id="15320806" author="tallison@mitre.org" created="Wed, 8 Jun 2016 15:55:47 +0000"  >&lt;p&gt;Added configurable limit with default set to 1024. &lt;/p&gt;</comment>
                            <comment id="15320845" author="hudson" created="Wed, 8 Jun 2016 16:16:39 +0000"  >&lt;p&gt;FAILURE: Integrated in tika-2.x-windows #12 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/12/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/12/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1999&quot; title=&quot;org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1999&quot;&gt;&lt;del&gt;TIKA-1999&lt;/del&gt;&lt;/a&gt;: add configurable limit to number of events extracted in XMPMM (tallison: rev 89062edb0584980d09d55ead215373214cb2895d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-test-resources/src/test/resources/test-documents/testXMP.xmp&lt;/li&gt;
	&lt;li&gt;tika-parser-modules/tika-parser-xmp-commons/src/test/java/org/apache/tika/parser/xmp/JempboxExtractorTest.java&lt;/li&gt;
	&lt;li&gt;tika-parser-modules/tika-parser-xmp-commons/src/main/java/org/apache/tika/parser/xmp/JempboxExtractor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15320906" author="hudson" created="Wed, 8 Jun 2016 16:46:25 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-2.x #108 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x/108/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x/108/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1999&quot; title=&quot;org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1999&quot;&gt;&lt;del&gt;TIKA-1999&lt;/del&gt;&lt;/a&gt;: add configurable limit to number of events extracted in XMPMM (tallison: rev 89062edb0584980d09d55ead215373214cb2895d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-parser-modules/tika-parser-xmp-commons/src/main/java/org/apache/tika/parser/xmp/JempboxExtractor.java&lt;/li&gt;
	&lt;li&gt;tika-test-resources/src/test/resources/test-documents/testXMP.xmp&lt;/li&gt;
	&lt;li&gt;tika-parser-modules/tika-parser-xmp-commons/src/test/java/org/apache/tika/parser/xmp/JempboxExtractorTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15320918" author="hudson" created="Wed, 8 Jun 2016 16:53:06 +0000"  >&lt;p&gt;UNSTABLE: Integrated in tika-trunk-jdk1.7 #1007 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/1007/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/1007/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1999&quot; title=&quot;org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1999&quot;&gt;&lt;del&gt;TIKA-1999&lt;/del&gt;&lt;/a&gt; add limit to number of events extracted from the XMPMM section (tallison: rev 3e14505381eefa603adabe61171c0c19fc685b2f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-parsers/src/main/java/org/apache/tika/parser/image/xmp/JempboxExtractor.java&lt;/li&gt;
	&lt;li&gt;tika-parsers/src/test/java/org/apache/tika/parser/image/xmp/JempboxExtractorTest.java&lt;/li&gt;
	&lt;li&gt;tika-parsers/src/test/resources/test-documents/testXMP.xmp&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15321119" author="hudson" created="Wed, 8 Jun 2016 18:16:35 +0000"  >&lt;p&gt;FAILURE: Integrated in tika-2.x-windows #13 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/13/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/13/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1999&quot; title=&quot;org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1999&quot;&gt;&lt;del&gt;TIKA-1999&lt;/del&gt;&lt;/a&gt;: fix setter, update changes.txt (tallison: rev ac52e5c15852231d003526045124e3fafdafaf90)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-parser-modules/tika-parser-xmp-commons/src/main/java/org/apache/tika/parser/xmp/JempboxExtractor.java&lt;/li&gt;
	&lt;li&gt;CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15321211" author="hudson" created="Wed, 8 Jun 2016 18:54:38 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-2.x #109 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x/109/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x/109/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1999&quot; title=&quot;org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1999&quot;&gt;&lt;del&gt;TIKA-1999&lt;/del&gt;&lt;/a&gt;: fix setter, update changes.txt (tallison: rev ac52e5c15852231d003526045124e3fafdafaf90)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-parser-modules/tika-parser-xmp-commons/src/main/java/org/apache/tika/parser/xmp/JempboxExtractor.java&lt;/li&gt;
	&lt;li&gt;CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15321219" author="hudson" created="Wed, 8 Jun 2016 18:57:00 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #1008 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/1008/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/1008/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1999&quot; title=&quot;org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1999&quot;&gt;&lt;del&gt;TIKA-1999&lt;/del&gt;&lt;/a&gt; small fix and update CHANGES.txt (tallison: rev 99aa587d171207c0c557ce65397f767d6a42cdfd)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-parsers/src/main/java/org/apache/tika/parser/image/xmp/JempboxExtractor.java&lt;/li&gt;
	&lt;li&gt;CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z3dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>