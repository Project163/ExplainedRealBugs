[{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/481173650","html_url":"https://github.com/catchorg/Catch2/issues/1593#issuecomment-481173650","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/1593","id":481173650,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTE3MzY1MA==","user":{"login":"Bu11etmagnet","id":7579651,"node_id":"MDQ6VXNlcjc1Nzk2NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7579651?v=4","gravatar_id":"","url":"https://api.github.com/users/Bu11etmagnet","html_url":"https://github.com/Bu11etmagnet","followers_url":"https://api.github.com/users/Bu11etmagnet/followers","following_url":"https://api.github.com/users/Bu11etmagnet/following{/other_user}","gists_url":"https://api.github.com/users/Bu11etmagnet/gists{/gist_id}","starred_url":"https://api.github.com/users/Bu11etmagnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bu11etmagnet/subscriptions","organizations_url":"https://api.github.com/users/Bu11etmagnet/orgs","repos_url":"https://api.github.com/users/Bu11etmagnet/repos","events_url":"https://api.github.com/users/Bu11etmagnet/events{/privacy}","received_events_url":"https://api.github.com/users/Bu11etmagnet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-09T09:23:04Z","updated_at":"2019-04-09T09:23:04Z","body":"```\r\n$ /usr/bin/c++ -g -I ../single_include/catch2/ -Wall -Wpedantic -Wextra  -std=c++11   empty_gen.cpp \r\n$ ./a.out \r\nFilters: \r\na.out: ../single_include/catch2/catch.hpp:3711: Catch::Generators::TakeGenerator<T>::TakeGenerator(size_t, Catch::Generators::GeneratorWrapper<T>&&) [with T = int; size_t = long unsigned int]: Assertion `target != 0 && \"Empty generators are not allowed\"' failed.\r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\na.out is a Catch v2.7.1 host application.\r\nRun with -? for options\r\n\r\n-------------------------------------------------------------------------------\r\nEmpty Generator\r\n-------------------------------------------------------------------------------\r\nempty_gen.cpp:4\r\n...............................................................................\r\n\r\nempty_gen.cpp:6: FAILED:\r\ndue to a fatal error condition:\r\n  SIGABRT - Abort (abnormal termination) signal\r\n\r\n===============================================================================\r\ntest cases: 1 | 1 failed\r\nassertions: 1 | 1 failed\r\n\r\nAborted (core dumped)\r\n```\r\nIt's not a segmentation fault, it's an assertion failure, showing that you're using Catch incorrectly.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/481173650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Bu11etmagnet","id":7579651,"node_id":"MDQ6VXNlcjc1Nzk2NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7579651?v=4","gravatar_id":"","url":"https://api.github.com/users/Bu11etmagnet","html_url":"https://github.com/Bu11etmagnet","followers_url":"https://api.github.com/users/Bu11etmagnet/followers","following_url":"https://api.github.com/users/Bu11etmagnet/following{/other_user}","gists_url":"https://api.github.com/users/Bu11etmagnet/gists{/gist_id}","starred_url":"https://api.github.com/users/Bu11etmagnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bu11etmagnet/subscriptions","organizations_url":"https://api.github.com/users/Bu11etmagnet/orgs","repos_url":"https://api.github.com/users/Bu11etmagnet/repos","events_url":"https://api.github.com/users/Bu11etmagnet/events{/privacy}","received_events_url":"https://api.github.com/users/Bu11etmagnet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/481192531","html_url":"https://github.com/catchorg/Catch2/issues/1593#issuecomment-481192531","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/1593","id":481192531,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTE5MjUzMQ==","user":{"login":"nielsbuwen","id":9267463,"node_id":"MDQ6VXNlcjkyNjc0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9267463?v=4","gravatar_id":"","url":"https://api.github.com/users/nielsbuwen","html_url":"https://github.com/nielsbuwen","followers_url":"https://api.github.com/users/nielsbuwen/followers","following_url":"https://api.github.com/users/nielsbuwen/following{/other_user}","gists_url":"https://api.github.com/users/nielsbuwen/gists{/gist_id}","starred_url":"https://api.github.com/users/nielsbuwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielsbuwen/subscriptions","organizations_url":"https://api.github.com/users/nielsbuwen/orgs","repos_url":"https://api.github.com/users/nielsbuwen/repos","events_url":"https://api.github.com/users/nielsbuwen/events{/privacy}","received_events_url":"https://api.github.com/users/nielsbuwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-09T10:18:37Z","updated_at":"2019-04-09T10:18:37Z","body":"I should adjust my terminal color settings. I barely noticed the assertion line.\r\n\r\nIt turns out my example was too minimal. This one segfaults:\r\n```\r\n#define CATCH_CONFIG_MAIN\r\n#include <catch.hpp>\r\n\r\nTEST_CASE(\"Empty Generator\")\r\n{\r\n    GENERATE(take(1, filter([](int i){ return i == 0; }, value(1))));\r\n}\r\n```\r\n\r\nBut it also tells me that it crashed, because the filter didn't match anything so that's fine, i guess.\r\n\r\nShould i rather write a feature request to allow for empty generator? The problem with my custom generator still exists.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/481192531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nielsbuwen","id":9267463,"node_id":"MDQ6VXNlcjkyNjc0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9267463?v=4","gravatar_id":"","url":"https://api.github.com/users/nielsbuwen","html_url":"https://github.com/nielsbuwen","followers_url":"https://api.github.com/users/nielsbuwen/followers","following_url":"https://api.github.com/users/nielsbuwen/following{/other_user}","gists_url":"https://api.github.com/users/nielsbuwen/gists{/gist_id}","starred_url":"https://api.github.com/users/nielsbuwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielsbuwen/subscriptions","organizations_url":"https://api.github.com/users/nielsbuwen/orgs","repos_url":"https://api.github.com/users/nielsbuwen/repos","events_url":"https://api.github.com/users/nielsbuwen/events{/privacy}","received_events_url":"https://api.github.com/users/nielsbuwen/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/481569521","html_url":"https://github.com/catchorg/Catch2/issues/1593#issuecomment-481569521","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/1593","id":481569521,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTU2OTUyMQ==","user":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-10T07:28:03Z","updated_at":"2019-04-10T07:28:03Z","body":"Actually, a filter generator running out of elements will only fail that specific test case run, it won't abort the whole test run, so in this example\r\n\r\n```cpp\r\n#define CATCH_CONFIG_MAIN\r\n#include <catch.hpp>\r\n\r\nTEST_CASE(\"Empty Generator\")\r\n{\r\n    GENERATE(take(1, filter([](int i){ return i == 0; }, value(1))));\r\n}\r\nTEST_CASE(\"Bar\") {\r\n    REQUIRE(1 != 2);\r\n}\r\n```\r\n\r\nthe second test case will still run. This is not true with `take`, which asserts, but in the case of `take` passing it 0 is an obvious logic error (but I might be convinced to turn it into an exception as well).\r\n\r\n--------\r\n\r\nAs to allowing empty generators, you would need to write a hell of a motivation for that proposal to convince me, because they were disallowed intentionally.\r\n\r\nIf you have a generator that might be empty, then it should throw upon construction when it is empty so that the test case that uses it explicitly fails. The alternative is to fail it silently, but that is a trap for the user -- consider this simple example:\r\n\r\n```cpp\r\nTEST_CASE(\"Boring test 1\") { SUCCEED(); }\r\nTEST_CASE(\"Boring test 2\") { SUCCEED(); }\r\nTEST_CASE(\"Generator test\") {\r\n    auto val = GENERATE(empty_generator());\r\n    FAIL(\"Not yet implemented\");\r\n}\r\n```\r\n\r\nIf the user compiles and runs the test binary with the current behaviour, the third `TEST_CASE` fails as it should, and the user knows that not all test cases actually pass. On the other hand, if you skip over empty generators, then the only signal the user gets that some of the tests have not actually run is that there are fewer tests reported in the summary.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/481569521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/482558745","html_url":"https://github.com/catchorg/Catch2/issues/1593#issuecomment-482558745","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/1593","id":482558745,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjU1ODc0NQ==","user":{"login":"nielsbuwen","id":9267463,"node_id":"MDQ6VXNlcjkyNjc0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9267463?v=4","gravatar_id":"","url":"https://api.github.com/users/nielsbuwen","html_url":"https://github.com/nielsbuwen","followers_url":"https://api.github.com/users/nielsbuwen/followers","following_url":"https://api.github.com/users/nielsbuwen/following{/other_user}","gists_url":"https://api.github.com/users/nielsbuwen/gists{/gist_id}","starred_url":"https://api.github.com/users/nielsbuwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielsbuwen/subscriptions","organizations_url":"https://api.github.com/users/nielsbuwen/orgs","repos_url":"https://api.github.com/users/nielsbuwen/repos","events_url":"https://api.github.com/users/nielsbuwen/events{/privacy}","received_events_url":"https://api.github.com/users/nielsbuwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-12T12:38:12Z","updated_at":"2019-04-12T12:39:56Z","body":"Throwing inside the constructor looks good to me. I probably missed that in the reference. \r\n\r\nHowever, in my case the test case should not fail when the generator is empty. What about a \"special\" exception we can throw that doesn't fail the test like `throw GeneratorIsEmptyButThatsOk(...);`. I am worried about dozens of lines of failed test cases that clutter my output making it harder to concentrate on the real problem. I could also live with a single error message like \"Some tests were skipped, because of missing data\" or something similar.\r\n\r\nAnd sorry about the confusion about `take`/`filter`. I spend too much time to reproduce my error with the generators provided by the library.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/482558745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nielsbuwen","id":9267463,"node_id":"MDQ6VXNlcjkyNjc0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9267463?v=4","gravatar_id":"","url":"https://api.github.com/users/nielsbuwen","html_url":"https://github.com/nielsbuwen","followers_url":"https://api.github.com/users/nielsbuwen/followers","following_url":"https://api.github.com/users/nielsbuwen/following{/other_user}","gists_url":"https://api.github.com/users/nielsbuwen/gists{/gist_id}","starred_url":"https://api.github.com/users/nielsbuwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielsbuwen/subscriptions","organizations_url":"https://api.github.com/users/nielsbuwen/orgs","repos_url":"https://api.github.com/users/nielsbuwen/repos","events_url":"https://api.github.com/users/nielsbuwen/events{/privacy}","received_events_url":"https://api.github.com/users/nielsbuwen/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/1135514137","html_url":"https://github.com/catchorg/Catch2/issues/1593#issuecomment-1135514137","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/1593","id":1135514137,"node_id":"IC_kwDOABA2rM5DrpIZ","user":{"login":"geoff-m","id":22863275,"node_id":"MDQ6VXNlcjIyODYzMjc1","avatar_url":"https://avatars.githubusercontent.com/u/22863275?v=4","gravatar_id":"","url":"https://api.github.com/users/geoff-m","html_url":"https://github.com/geoff-m","followers_url":"https://api.github.com/users/geoff-m/followers","following_url":"https://api.github.com/users/geoff-m/following{/other_user}","gists_url":"https://api.github.com/users/geoff-m/gists{/gist_id}","starred_url":"https://api.github.com/users/geoff-m/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geoff-m/subscriptions","organizations_url":"https://api.github.com/users/geoff-m/orgs","repos_url":"https://api.github.com/users/geoff-m/repos","events_url":"https://api.github.com/users/geoff-m/events{/privacy}","received_events_url":"https://api.github.com/users/geoff-m/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-24T07:32:27Z","updated_at":"2023-08-06T08:19:48Z","body":"> If you have a generator that might be empty, then it should throw upon construction when it is empty so that the test case that uses it explicitly fails. The alternative is to fail it silently...\r\n\r\nFail? I don't follow. An empty generator does not represent a failure or an error of any kind. In general, generators output a variable and unpredictable numbers of items. Zero is such a number, just like one, two, a million, and so on. That is why whenever using any kind of generator/iterator, we write loops that check whether the generator has an item **before** attempting to use it, not after. By breaking with this convention and expecting to get an item out of a generator without checking whether it's available, Catch2's behavior here is a bug, and quite a surprising and annoying one.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/1135514137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"geoff-m","id":22863275,"node_id":"MDQ6VXNlcjIyODYzMjc1","avatar_url":"https://avatars.githubusercontent.com/u/22863275?v=4","gravatar_id":"","url":"https://api.github.com/users/geoff-m","html_url":"https://github.com/geoff-m","followers_url":"https://api.github.com/users/geoff-m/followers","following_url":"https://api.github.com/users/geoff-m/following{/other_user}","gists_url":"https://api.github.com/users/geoff-m/gists{/gist_id}","starred_url":"https://api.github.com/users/geoff-m/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geoff-m/subscriptions","organizations_url":"https://api.github.com/users/geoff-m/orgs","repos_url":"https://api.github.com/users/geoff-m/repos","events_url":"https://api.github.com/users/geoff-m/events{/privacy}","received_events_url":"https://api.github.com/users/geoff-m/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9390658331,"node_id":"CE_lADOABA2rM4ZqiezzwAAAAIvuhMb","url":"https://api.github.com/repos/catchorg/Catch2/issues/events/9390658331","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"0631b607ee2bbc07c7c238f0b15b23ef21926960","commit_url":"https://api.github.com/repos/catchorg/Catch2/commits/0631b607ee2bbc07c7c238f0b15b23ef21926960","created_at":"2023-05-31T13:37:30Z","state_reason":null,"performed_via_github_app":null},{"id":11644587852,"node_id":"REFE_lADOABA2rM4ZqiezzwAAAAK2Ek9M","url":"https://api.github.com/repos/catchorg/Catch2/issues/events/11644587852","actor":{"login":"nicramage","id":6319714,"node_id":"MDQ6VXNlcjYzMTk3MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6319714?v=4","gravatar_id":"","url":"https://api.github.com/users/nicramage","html_url":"https://github.com/nicramage","followers_url":"https://api.github.com/users/nicramage/followers","following_url":"https://api.github.com/users/nicramage/following{/other_user}","gists_url":"https://api.github.com/users/nicramage/gists{/gist_id}","starred_url":"https://api.github.com/users/nicramage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicramage/subscriptions","organizations_url":"https://api.github.com/users/nicramage/orgs","repos_url":"https://api.github.com/users/nicramage/repos","events_url":"https://api.github.com/users/nicramage/events{/privacy}","received_events_url":"https://api.github.com/users/nicramage/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0631b607ee2bbc07c7c238f0b15b23ef21926960","commit_url":"https://api.github.com/repos/nicramage/Catch2/commits/0631b607ee2bbc07c7c238f0b15b23ef21926960","created_at":"2024-01-30T16:40:49Z","performed_via_github_app":null}]