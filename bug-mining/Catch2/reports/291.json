{"url":"https://api.github.com/repos/catchorg/Catch2/issues/2668","repository_url":"https://api.github.com/repos/catchorg/Catch2","labels_url":"https://api.github.com/repos/catchorg/Catch2/issues/2668/labels{/name}","comments_url":"https://api.github.com/repos/catchorg/Catch2/issues/2668/comments","events_url":"https://api.github.com/repos/catchorg/Catch2/issues/2668/events","html_url":"https://github.com/catchorg/Catch2/issues/2668","id":1652087597,"node_id":"I_kwDOABA2rM5ieNst","number":2668,"title":"catch_discover_tests: xml reporter vs. XML reporter (lower/upper case mismatch)","user":{"login":"arnemertz","id":9985845,"node_id":"MDQ6VXNlcjk5ODU4NDU=","avatar_url":"https://avatars.githubusercontent.com/u/9985845?v=4","gravatar_id":"","url":"https://api.github.com/users/arnemertz","html_url":"https://github.com/arnemertz","followers_url":"https://api.github.com/users/arnemertz/followers","following_url":"https://api.github.com/users/arnemertz/following{/other_user}","gists_url":"https://api.github.com/users/arnemertz/gists{/gist_id}","starred_url":"https://api.github.com/users/arnemertz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arnemertz/subscriptions","organizations_url":"https://api.github.com/users/arnemertz/orgs","repos_url":"https://api.github.com/users/arnemertz/repos","events_url":"https://api.github.com/users/arnemertz/events{/privacy}","received_events_url":"https://api.github.com/users/arnemertz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":755139583,"node_id":"MDU6TGFiZWw3NTUxMzk1ODM=","url":"https://api.github.com/repos/catchorg/Catch2/labels/Extras","name":"Extras","color":"f9efae","default":false,"description":"Touches utility scripts outside of Catch2 proper, e.g. CMake integration."},{"id":1991723753,"node_id":"MDU6TGFiZWwxOTkxNzIzNzUz","url":"https://api.github.com/repos/catchorg/Catch2/labels/Good%20First%20Issue","name":"Good First Issue","color":"fce180","default":false,"description":"Issues that can be undertaken by someone new to the project"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-04-03T13:35:38Z","updated_at":"2023-04-05T08:12:52Z","closed_at":"2023-04-05T08:12:52Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\nAccording to the documentation, `--reporter xml` with lower case \"xml\" should work, but using `catch_discover_tests` with `REPORTER xml` leads to an error  `\"xml\" is not a valid reporter!` in CatchAddTests.cmake:85 (as of Catch 3.3.2). On the other hand, `REPORTER XML` with upper case \"XML\" works.\r\n\r\nListing the reporters produces \r\n```\r\n   Available reporters:\r\n    Automake:   Reports test results in the format of Automake .trs files\r\n    compact:    Reports test results on a single line, suitable for IDEs\r\n    console:    Reports test results as plain lines of text\r\n    JUnit:      Reports test results in an XML format that looks like Ant's\r\n                  junitreport target\r\n    SonarQube:  Reports test results in the Generic Test Data SonarQube XML\r\n                  format\r\n    TAP:        Reports test results in TAP format, suitable for test harnesses\r\n    TeamCity:   Reports test results as TeamCity service messages\r\n    XML:        Reports test results as an XML document\r\n```\r\n(Note the upper case XML)\r\n\r\n**Expected behavior**\r\nUsing the reporter feature in `catch_discover_tests` should be consistent with the documented command line option or case-insensitive.\r\n- See https://github.com/catchorg/Catch2/blob/devel/docs/command-line.md#choosing-a-reporter-to-use where the example uses lower case \"xml\"\r\n- See https://github.com/catchorg/Catch2/blob/devel/docs/cmake-integration.md#automatic-test-registration where it explicitly mentioned that the argument is passed to the test runner as `--reporter reporter`\r\n\r\nThis broke some time between 2.13.9 and 3.3.2 (see https://github.com/cpp-best-practices/cmake_conan_boilerplate_template/blob/main/test/CMakeLists.txt where it still works)\r\n\r\n**Reproduction steps**\r\nCMake section:\r\n```\r\nfind_package(Catch2 CONFIG REQUIRED)\r\n\r\ninclude(Catch)\r\n\r\ninclude(test_sources.cmake)\r\nadd_executable(tests tests.cpp)\r\ntarget_link_libraries(tests PUBLIC Catch2::Catch2WithMain)\r\n\r\n# automatically discover tests that are defined in catch based test files you can modify the unittests. Set TEST_PREFIX\r\n# to whatever you want, or use different for different binaries\r\ncatch_discover_tests(\r\n  tests\r\n  REPORTER  xml\r\n  OUTPUT_SUFFIX  .xml)\r\n```\r\n\r\nfails at compilation time.\r\n\r\nAlso note that the method used in CatchAddTests.cmake:85 is very crude, e.g. I could choose a reporter \"suitable\" without a failing build since that word happens to appear in the --list-reporters output.\r\n","closed_by":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/2668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catchorg/Catch2/issues/2668/timeline","performed_via_github_app":null,"state_reason":"completed"}